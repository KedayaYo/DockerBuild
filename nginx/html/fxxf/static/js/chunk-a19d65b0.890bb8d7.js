(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a19d65b0"],{"511f1":function(e,t,r){"use strict";r("b1e1")},5575:function(e,t,r){"use strict";r.d(t,"n",(function(){return i})),r.d(t,"h",(function(){return s})),r.d(t,"z",(function(){return a})),r.d(t,"a",(function(){return u})),r.d(t,"C",(function(){return c})),r.d(t,"E",(function(){return m})),r.d(t,"B",(function(){return f})),r.d(t,"j",(function(){return l})),r.d(t,"w",(function(){return d})),r.d(t,"k",(function(){return b})),r.d(t,"y",(function(){return h})),r.d(t,"t",(function(){return p})),r.d(t,"i",(function(){return g})),r.d(t,"F",(function(){return v})),r.d(t,"u",(function(){return k})),r.d(t,"r",(function(){return T})),r.d(t,"v",(function(){return O})),r.d(t,"q",(function(){return j})),r.d(t,"p",(function(){return D})),r.d(t,"f",(function(){return w})),r.d(t,"c",(function(){return y})),r.d(t,"d",(function(){return x})),r.d(t,"g",(function(){return _})),r.d(t,"e",(function(){return I})),r.d(t,"x",(function(){return A})),r.d(t,"s",(function(){return N})),r.d(t,"b",(function(){return $})),r.d(t,"o",(function(){return W})),r.d(t,"A",(function(){return q})),r.d(t,"D",(function(){return C}));var o=r("b775"),n=r("c38a");r("bc3a");function i(e){return Object(o["a"])({url:"/fcs/sites/"+Object(n["g"])(e),method:"get"})}function s(e){return Object(o["a"])({url:"/fcs/control/uavs/cancel_fly_point",method:"post",data:e})}function a(e){return Object(o["a"])({url:"/fcs/sites/page",method:"get",params:e})}function u(e){return Object(o["a"])({url:"/fcs/sites",method:"post",data:e})}function c(e,t,r){return Object(o["a"])({url:"/fcs/sites/bindHive/"+Object(n["g"])(e)+"/"+Object(n["g"])(t)+"/"+Object(n["g"])(r),method:"PATCH",data:{}})}function m(e,t,r){return Object(o["a"])({url:"/fcs/sites/bindUav/"+Object(n["g"])(e)+"/"+Object(n["g"])(t)+"/"+Object(n["g"])(r),method:"PATCH",data:{}})}function f(e){return Object(o["a"])({url:"/fcs/sites/"+Object(n["g"])(e.siteId),method:"PUT",data:e})}function l(e){return Object(o["a"])({url:"/fcs/sites/"+Object(n["g"])(e),method:"delete"})}function d(e){return Object(o["a"])({url:"/fcs/missions",method:"get",params:e})}function b(e){return Object(o["a"])({url:"/fcs/missions/"+Object(n["g"])(e)+"/"+Object(n["g"])("-1"),method:"PATCH"})}function h(e){return Object(o["a"])({url:"/fcs/missions",method:"post",data:e})}function p(e){return Object(o["a"])({url:"/fcs/missions/"+Object(n["g"])(e),method:"get"})}function g(e){return Object(o["a"])({url:"/fcs/cronmissions/cd/list",method:"get",params:e})}function v(e){return Object(o["a"])({url:"/fcs/cronmissions/validlist",method:"get",params:e})}function k(e,t){return Object(o["a"])({url:e,method:"post",data:t})}function T(e){return Object(o["a"])({url:"/fcs/uavaction/mediasetting",method:"post",params:e})}function O(e){return Object(o["a"])({url:"/fcs/control/uavs/fly_point",method:"post",data:e})}function j(e){return Object(o["a"])({url:"/fcs/uavaction/locationsetting",method:"post",params:e})}function D(e){return Object(o["a"])({url:"/fcs/uavaction/gimbalsetting",method:"post",params:e})}function w(e){return Object(o["a"])({url:"/fcs/control/uavs/camera_set_zoom",method:"post",data:e})}function y(e){return Object(o["a"])({url:"/fcs/control/uavs/camera_aim",method:"post",data:e})}function x(e){return Object(o["a"])({url:"/fcs/control/uavs/camera_mode_switch",method:"post",data:e})}function _(e){return Object(o["a"])({url:"/fcs/control/uavs/camera_take_photo",method:"post",data:e})}function I(e){return Object(o["a"])({url:"/fcs/control/uavs/camera_recording",method:"post",data:e})}function A(e){return Object(o["a"])({url:"/fcs/rcsetting",method:"post",params:e})}function N(e){return Object(o["a"])({url:"/fcs/control/uav_missions/perform_task",method:"post",data:e})}function $(e){return Object(o["a"])({url:"/fcs/task_manage/uav_task/task_progress/"+Object(n["g"])(e),method:"get"})}function W(e){return Object(o["a"])({url:"/fcs/task_manage/uav_task/task_log_info/"+Object(n["g"])(e),method:"get"})}function q(e){return Object(o["a"])({url:"/fcs/control/uavs/uav_manual",method:"post",data:e})}function C(e,t){return Object(o["a"])({url:"/fcs/task_manage/uav_task/ir_dect_results/update_status/"+Object(n["g"])(e)+"/"+Object(n["g"])(t),method:"PATCH"})}},8391:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{staticStyle:{height:"400px","margin-top":"200px",overflow:"hidden"},attrs:{title:"计划任务",visible:e.visible,width:"550px","append-to-body":"","close-on-click-modal":!1,"before-close":e.cancelAction},on:{"update:visible":function(t){e.visible=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,size:"small",rules:e.rules,"label-position":"left","label-width":"100px"}},[r("el-form-item",{attrs:{label:"计划任务",prop:"missionID"}},[r("el-select",{attrs:{clearable:"","value-key":"missionID",placeholder:"请选择航线"},on:{change:e.changeSelectAction},model:{value:e.form.missionID,callback:function(t){e.$set(e.form,"missionID",t)},expression:"form.missionID"}},e._l(e.routeOptions,(function(e){return r("el-option",{key:e.missionID,attrs:{value:e,label:e.missionName}})})),1)],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.modeTrue,expression:"!modeTrue"}],attrs:{label:"执行时间",prop:"excuteTime"}},[r("div",{staticClass:"div-content"},[r("el-select",{staticStyle:{width:"150px"},attrs:{disabled:!0},model:{value:e.mode,callback:function(t){e.mode=t},expression:"mode"}},e._l(e.modeOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),r("el-input",{directives:[{name:"show",rawName:"v-show",value:e.refereeWkArrTrue,expression:"refereeWkArrTrue"}],staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.weekDay,callback:function(t){e.weekDay=t},expression:"weekDay"}}),r("el-time-select",{attrs:{"picker-options":{start:"00:00",step:"00:01",end:"23:59"},placeholder:"选择时间"},model:{value:e.form.hourTime,callback:function(t){e.$set(e.form,"hourTime",t)},expression:"form.hourTime"}})],1)]),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.modeTrue,expression:"modeTrue"}],attrs:{label:"执行时间",prop:"excuteTime"}},[r("div",{staticClass:"div-content"},[r("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.form.excuteTime,callback:function(t){e.$set(e.form,"excuteTime",t)},expression:"form.excuteTime"}}),r("el-time-select",{attrs:{"picker-options":{start:"00:00",step:"00:01",end:"23:59"},placeholder:"选择时间"},model:{value:e.form.hourTime,callback:function(t){e.$set(e.form,"hourTime",t)},expression:"form.hourTime"}})],1)]),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.modeTrue,expression:"!modeTrue"}],attrs:{label:"执行区间",prop:"excuteTime"}},[r("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:e.form.startTime,callback:function(t){e.$set(e.form,"startTime",t)},expression:"form.startTime"}})],1),r("el-form-item",{attrs:{label:"备注",prop:"content"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),r("el-button",{on:{click:e.cancelAction}},[e._v("取 消")])],1)],1)},n=[],i=r("ade3"),s=(r("a9e3"),r("5575")),a=r("e52e"),u={data:function(){var e;return{form:{excuteTime:"",hourTime:"",missionID:""},siteID:"",siteName:"",activeButton:"",modeTrue:!0,mode:1,divId:"",visible:!1,queryParams:{},routeOptions:[],weekDay:"",refereeWkArrTrue:!1,modeOptions:[{label:"单次",value:1},{label:"每天",value:2},{label:"每周",value:3},{label:"每月",value:4}],rules:(e={missionID:[{required:!0,message:"计划任务不能为空",trigger:"blur"}],excuteTime:[{required:!0,message:"执行时间不能为空",trigger:"blur"}]},Object(i["a"])(e,"excuteTime",[{required:!0,message:"执行日期不能为空",trigger:"blur"}]),Object(i["a"])(e,"startTime",[{required:!0,message:"生效范围不能为空",trigger:"blur"}]),Object(i["a"])(e,"refereeWkArr",[{required:!0,message:"选择日期不能为空",trigger:"blur"}]),Object(i["a"])(e,"refereeMkArr",[{required:!0,message:"选择日期不能为空",trigger:"blur"}]),e)}},methods:{cancelAction:function(){this.form={excuteTime:"",hourTime:"",missionID:""},this.devId="",this.siteID="",this.siteName="",this.activeButton="",this.modeTrue=!0,this.mode="",this.visible=!1,this.$emit("changeValue",!1),console.info("this.form",this.$parent),this.$parent.$parent.divSelectClass(this.divId)},show:function(e,t,r){this.siteID=e,this.siteName=t,this.modeTrue=!1,"daily"==r?this.mode=2:"weekly"==r?(this.mode=3,this.refereeWkArrTrue=!0):"monthly"==r?(this.refereeWkArrTrue=!0,this.mode=4):(this.modeTrue=!0,this.mode=1),console.log("siteID",e,r),this.visible=!0,this.queryParams={pageIndex:1,siteID:e,pageSize:1e4}},getDate:function(e){var t=e,r=t.split(" "),o=r[0].split("-"),n=r[1].split(":"),i=new Date(o[0],o[1]-1,o[2],n[0],n[1],n[2]);return i},getTimeToString:function(e,t){var r=e.getFullYear(),o=e.getMonth(),n=e.getDate(),i=t.getHours(),s=t.getMinutes(),a=t.getSeconds();return o>=1&&o<=9&&(o="0"+o),n>=0&&n<=9&&(n="0"+n),i>=0&&i<=9&&(i="0"+i),s>=0&&s<=9&&(s="0"+s),a>=0&&a<=9&&(a="0"+a),r+"-"+o+"-"+n+" "+i+":"+s+":"+a},queryListMin:function(){var e=this;Object(s["w"])(this.queryParams).then((function(t){e.routeOptions=t.data.list}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){if(t){console.log("form",e.form);var r=e.mode,o=e.form.hourTime;if(e.form.mode=r,1==r){var n=e.form.excuteTime;console.info("excuteTime",n,o),e.form.excuteTime=e.getDate(n+" "+o+":00").getTime()/1e3,e.form.min=-1,e.form.hour=-1,e.form.day=[],e.form.weekDay=[],e.form.startDate=0,e.form.endDate=0}else 2==r?(e.form.excuteTime=-1,e.form.min=Number(o.split(":")[1]),e.form.hour=Number(o.split(":")[0]),e.form.day=[],e.form.weekDay=[],console.info("this.form.startTime",e.form),e.form.startDate=e.form.startTime[0].getTime()/1e3,e.form.endDate=e.form.startTime[1].getTime()/1e3):3==r?(e.form.excuteTime=-1,e.form.min=Number(o.split(":")[1]),e.form.hour=Number(o.split(":")[0]),e.form.day=[],"星期一"==e.weekDay?e.form.refereeWkArr=[1]:"星期"==e.weekDay?e.form.refereeWkArr=[2]:"星期三"==e.weekDay?e.form.refereeWkArr=[3]:"星期四"==e.weekDay?e.form.refereeWkArr=[4]:"星期五"==e.weekDay?e.form.refereeWkArr=[5]:"星期六"==e.weekDay?e.form.refereeWkArr=[6]:e.form.refereeWkArr=[0],e.form.weekDay=e.form.refereeWkArr,e.form.startDate=e.form.startTime[0].getTime()/1e3,e.form.endDate=e.form.startTime[1].getTime()/1e3):(e.form.excuteTime=-1,e.form.min=Number(o.split(":")[1]),e.form.hour=Number(o.split(":")[0]),e.form.day=[Number(e.weekDay)],e.form.weekDay=[],e.form.startDate=e.form.startTime[0].getTime()/1e3,e.form.endDate=e.form.startTime[1].getTime()/1e3);if(void 0!=e.form.CMID)console.info("this.form",e.form),update(e.form).then((function(t){e.$modal.msgSuccess("修改成功"),e.open=!1,e.getList()}));else{var i=e.form.missionID;e.form.projectID=i.projectID,e.form.siteID=e.siteID,e.form.siteName=e.siteName,e.form.missionID=i.missionID,e.form.missionName=i.missionName,Object(a["a"])(e.form).then((function(t){e.$modal.msgSuccess("新增成功"),e.$parent.$parent.divSelectClass(e.divId),e.$emit("changeValue",!0),e.visible=!1})).error((function(t){e.form.excuteTime=1e3*e.form.excuteTime}))}}}))},initParam:function(e,t,r,o){this.queryListMin(),this.form.hourTime=e,this.form.excuteTime=t,3==this.mode?this.weekDay=r:4==this.mode&&(this.weekDay=t.split("-")[2]),this.divId=o,console.log(e,"date",t)}}},c=u,m=(r("511f1"),r("2877")),f=Object(m["a"])(c,o,n,!1,null,"b8762306",null);t["default"]=f.exports},b1e1:function(e,t,r){},e52e:function(e,t,r){"use strict";r.d(t,"e",(function(){return i})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return a})),r.d(t,"a",(function(){return u})),r.d(t,"f",(function(){return c})),r.d(t,"b",(function(){return m}));var o=r("b775"),n=r("c38a");function i(e){return console.info(e),Object(o["a"])({url:"/fcs/timed_tasks/page",method:"get",params:e})}function s(e){return Object(o["a"])({url:"/fcs/timed_tasks/"+Object(n["g"])(e),method:"get"})}function a(e){return Object(o["a"])({url:"/dataCenter/fcs/sites/missions?siteIDs="+Object(n["g"])(e),method:"get"})}function u(e){return Object(o["a"])({url:"/fcs/timed_tasks",method:"post",data:e})}function c(e){return Object(o["a"])({url:"/fcs/timed_tasks/"+Object(n["g"])(e.timedTaskId),method:"PUT",data:e})}function m(e){return Object(o["a"])({url:"/fcs/timed_tasks/"+Object(n["g"])(e),method:"delete"})}}}]);