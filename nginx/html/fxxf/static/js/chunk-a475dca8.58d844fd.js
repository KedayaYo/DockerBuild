(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a475dca8","chunk-3733f150"],{2:function(t,e){},2533:function(t,e,a){},3:function(t,e){},"33dd":function(t,e,a){"use strict";a.d(e,"b",(function(){return c})),a.d(e,"a",(function(){return u}));var s=3.141592653589793,i=6378245,n=.006693421622965943;function r(t,e){return t<72.004||t>137.8347||e<.8293||e>55.8271||!1}function o(t,e){var a=300+t+2*e+.1*t*t+.1*t*e+.1*Math.sqrt(Math.abs(t));return a+=2*(20*Math.sin(6*t*s)+20*Math.sin(2*t*s))/3,a+=2*(20*Math.sin(t*s)+40*Math.sin(t/3*s))/3,a+=2*(150*Math.sin(t/12*s)+300*Math.sin(t/30*s))/3,a}function l(t,e){var a=2*t-100+3*e+.2*e*e+.1*t*e+.2*Math.sqrt(Math.abs(t));return a+=2*(20*Math.sin(6*t*s)+20*Math.sin(2*t*s))/3,a+=2*(20*Math.sin(e*s)+40*Math.sin(e/3*s))/3,a+=2*(160*Math.sin(e/12*s)+320*Math.sin(e*s/30))/3,a}function c(t,e){if(r(t,e))return[t,e];var a=l(t-105,e-35),c=o(t-105,e-35),u=e/180*s,d=Math.sin(u);d=1-n*d*d;var h=Math.sqrt(d);a=180*a/(i*(1-n)/(d*h)*s),c=180*c/(i/h*Math.cos(u)*s);var m=e+a,g=t+c;return[g,m]}function u(t,e){if(r(t,e))return[t,e];var a=l(t-105,e-35),c=o(t-105,e-35),u=e/180*s,d=Math.sin(u);d=1-n*d*d;var h=Math.sqrt(d);a=180*a/(i*(1-n)/(d*h)*s),c=180*c/(i/h*Math.cos(u)*s);var m=e+a,g=t+c;return[2*t-g,2*e-m]}},"38c3":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return o}));var s=a("b775"),i=a("c38a");function n(t){return Object(s["a"])({url:"/fcs/missions/page",method:"get",params:t})}function r(t,e){return Object(s["a"])({url:"/fcs/missions/"+Object(i["g"])(t),method:"put",data:e})}function o(t){return Object(s["a"])({url:"/fcs/addressConver",method:"get",params:t})}},"3dc4":function(t,e,a){"use strict";a("74fb")},4:function(t,e){},4636:function(t,e,a){t.exports=a.p+"static/img/tishi.dd60cf02.png"},5:function(t,e){},5575:function(t,e,a){"use strict";a.d(e,"n",(function(){return n})),a.d(e,"h",(function(){return r})),a.d(e,"z",(function(){return o})),a.d(e,"a",(function(){return l})),a.d(e,"C",(function(){return c})),a.d(e,"E",(function(){return u})),a.d(e,"B",(function(){return d})),a.d(e,"j",(function(){return h})),a.d(e,"w",(function(){return m})),a.d(e,"k",(function(){return g})),a.d(e,"y",(function(){return f})),a.d(e,"t",(function(){return p})),a.d(e,"i",(function(){return v})),a.d(e,"F",(function(){return b})),a.d(e,"u",(function(){return P})),a.d(e,"r",(function(){return D})),a.d(e,"v",(function(){return j})),a.d(e,"q",(function(){return k})),a.d(e,"p",(function(){return y})),a.d(e,"f",(function(){return w})),a.d(e,"c",(function(){return A})),a.d(e,"d",(function(){return _})),a.d(e,"g",(function(){return C})),a.d(e,"e",(function(){return x})),a.d(e,"x",(function(){return S})),a.d(e,"s",(function(){return O})),a.d(e,"b",(function(){return L})),a.d(e,"o",(function(){return I})),a.d(e,"A",(function(){return M})),a.d(e,"D",(function(){return N}));var s=a("b775"),i=a("c38a");a("bc3a");function n(t){return Object(s["a"])({url:"/fcs/sites/"+Object(i["g"])(t),method:"get"})}function r(t){return Object(s["a"])({url:"/fcs/control/uavs/cancel_fly_point",method:"post",data:t})}function o(t){return Object(s["a"])({url:"/fcs/sites/page",method:"get",params:t})}function l(t){return Object(s["a"])({url:"/fcs/sites",method:"post",data:t})}function c(t,e,a){return Object(s["a"])({url:"/fcs/sites/bindHive/"+Object(i["g"])(t)+"/"+Object(i["g"])(e)+"/"+Object(i["g"])(a),method:"PATCH",data:{}})}function u(t,e,a){return Object(s["a"])({url:"/fcs/sites/bindUav/"+Object(i["g"])(t)+"/"+Object(i["g"])(e)+"/"+Object(i["g"])(a),method:"PATCH",data:{}})}function d(t){return Object(s["a"])({url:"/fcs/sites/"+Object(i["g"])(t.siteId),method:"PUT",data:t})}function h(t){return Object(s["a"])({url:"/fcs/sites/"+Object(i["g"])(t),method:"delete"})}function m(t){return Object(s["a"])({url:"/fcs/missions",method:"get",params:t})}function g(t){return Object(s["a"])({url:"/fcs/missions/"+Object(i["g"])(t)+"/"+Object(i["g"])("-1"),method:"PATCH"})}function f(t){return Object(s["a"])({url:"/fcs/missions",method:"post",data:t})}function p(t){return Object(s["a"])({url:"/fcs/missions/"+Object(i["g"])(t),method:"get"})}function v(t){return Object(s["a"])({url:"/fcs/cronmissions/cd/list",method:"get",params:t})}function b(t){return Object(s["a"])({url:"/fcs/cronmissions/validlist",method:"get",params:t})}function P(t,e){return Object(s["a"])({url:t,method:"post",data:e})}function D(t){return Object(s["a"])({url:"/fcs/uavaction/mediasetting",method:"post",params:t})}function j(t){return Object(s["a"])({url:"/fcs/control/uavs/fly_point",method:"post",data:t})}function k(t){return Object(s["a"])({url:"/fcs/uavaction/locationsetting",method:"post",params:t})}function y(t){return Object(s["a"])({url:"/fcs/uavaction/gimbalsetting",method:"post",params:t})}function w(t){return Object(s["a"])({url:"/fcs/control/uavs/camera_set_zoom",method:"post",data:t})}function A(t){return Object(s["a"])({url:"/fcs/control/uavs/camera_aim",method:"post",data:t})}function _(t){return Object(s["a"])({url:"/fcs/control/uavs/camera_mode_switch",method:"post",data:t})}function C(t){return Object(s["a"])({url:"/fcs/control/uavs/camera_take_photo",method:"post",data:t})}function x(t){return Object(s["a"])({url:"/fcs/control/uavs/camera_recording",method:"post",data:t})}function S(t){return Object(s["a"])({url:"/fcs/rcsetting",method:"post",params:t})}function O(t){return Object(s["a"])({url:"/fcs/control/uav_missions/perform_task",method:"post",data:t})}function L(t){return Object(s["a"])({url:"/fcs/task_manage/uav_task/task_progress/"+Object(i["g"])(t),method:"get"})}function I(t){return Object(s["a"])({url:"/fcs/task_manage/uav_task/task_log_info/"+Object(i["g"])(t),method:"get"})}function M(t){return Object(s["a"])({url:"/fcs/control/uavs/uav_manual",method:"post",data:t})}function N(t,e){return Object(s["a"])({url:"/fcs/task_manage/uav_task/ir_dect_results/update_status/"+Object(i["g"])(t)+"/"+Object(i["g"])(e),method:"PATCH"})}},6:function(t,e){},"607b":function(t,e){t.exports="data:image/png;base64,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"},"74fb":function(t,e,a){},"7cdd":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"speedNumber"},[s("div",{staticClass:"top df-aj-b"},[s("div",[t._v(t._s(t.title)),t.tishiMsg?s("span",[s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.tishiMsg,placement:"top"}},[s("img",{staticStyle:{width:"20px",height:"20px","vertical-align":"top","margin-left":"5px"},attrs:{src:a("4636")}})])],1):t._e()]),t.isShowInput?s("el-input-number",{attrs:{min:t.min,max:t.max,size:"mini"},on:{change:t.handleChange},model:{value:t.num,callback:function(e){t.num=e},expression:"num"}}):t._e()],1),s("div",{staticClass:"bottom df-aj-b"},[s("span",{staticClass:"btn sub",on:{click:t.subHandle}},[t._v("-")]),s("div",[s("el-slider",{attrs:{min:t.min,max:t.max},model:{value:t.num,callback:function(e){t.num=e},expression:"num"}})],1),s("span",{staticClass:"btn add",on:{click:t.addHandle}},[t._v("+")])]),t._t("default")],2)},i=[],n=(a("a9e3"),{name:"speedNumber",props:{title:{type:String,default:""},tishiMsg:{type:String,default:""},min:{type:Number,default:0},max:{type:Number,default:5},data:{type:Number|String,default:null},isShowInput:{type:Boolean,default:!0}},data:function(){return{num:0}},created:function(){this.data&&(this.num=1*this.data)},methods:{handleChange:function(t){},subHandle:function(){this.num<=this.min||this.num--},addHandle:function(){this.num>=this.max||this.num++}},watch:{num:function(t){this.$emit("change",t)},data:function(t){this.num=1*this.data}}}),r=n,o=(a("9b25"),a("2877")),l=Object(o["a"])(r,s,i,!1,null,"347a5f74",null);e["default"]=l.exports},"86ac":function(t,e,a){t.exports=a.p+"static/img/M2101.ff7b7ca5.png"},"9b25":function(t,e,a){"use strict";a("2533")},bb4b:function(t,e,a){var s={"./bulk.js":"ab11","./cat.aliases.js":"6b16","./cat.allocation.js":"fe37","./cat.count.js":"d4b7","./cat.fielddata.js":"7f3a","./cat.health.js":"a36f","./cat.help.js":"86bc","./cat.indices.js":"5c29","./cat.master.js":"9dd7","./cat.nodeattrs.js":"4dde","./cat.nodes.js":"f241","./cat.pending_tasks.js":"a2d9","./cat.plugins.js":"85df","./cat.recovery.js":"b740","./cat.repositories.js":"7df9","./cat.segments.js":"11f9","./cat.shards.js":"cd9a","./cat.snapshots.js":"d32b","./cat.tasks.js":"f7a6","./cat.templates.js":"d63b","./cat.thread_pool.js":"96ee","./clear_scroll.js":"3cc9","./cluster.allocation_explain.js":"c03f","./cluster.get_settings.js":"75d6","./cluster.health.js":"fd4b","./cluster.pending_tasks.js":"42f9","./cluster.put_settings.js":"1d07","./cluster.remote_info.js":"39c8","./cluster.reroute.js":"1a73","./cluster.state.js":"fd2c","./cluster.stats.js":"d2b5","./count.js":"8100","./count_percolate.js":"2483","./create.js":"4332","./delete.js":"e70d","./delete_by_query.js":"f1fb","./delete_script.js":"bc19","./delete_template.js":"0c41","./exists.js":"ec38","./exists_source.js":"bb8f","./explain.js":"8f00","./field_caps.js":"8bd2","./field_stats.js":"84cd","./get.js":"ab63","./get_script.js":"3503","./get_source.js":"2d6c","./get_template.js":"0e8fe","./index.js":"9e6f","./indices.analyze.js":"a030","./indices.clear_cache.js":"4499","./indices.close.js":"cab0","./indices.create.js":"2a24","./indices.delete.js":"a798","./indices.delete_alias.js":"409d","./indices.delete_template.js":"0954","./indices.exists.js":"a7cd","./indices.exists_alias.js":"4447","./indices.exists_template.js":"d497","./indices.exists_type.js":"f93c","./indices.flush.js":"b730","./indices.flush_synced.js":"9dfd","./indices.forcemerge.js":"dbb5","./indices.get.js":"0c2e","./indices.get_alias.js":"7d22","./indices.get_field_mapping.js":"9c80","./indices.get_mapping.js":"bad4","./indices.get_settings.js":"5bd7","./indices.get_template.js":"f3c1","./indices.get_upgrade.js":"682d","./indices.open.js":"ea9c","./indices.put_alias.js":"4b3a","./indices.put_mapping.js":"9e88","./indices.put_settings.js":"b3b0","./indices.put_template.js":"7456","./indices.recovery.js":"bb1c","./indices.refresh.js":"ee39","./indices.rollover.js":"86e5","./indices.segments.js":"e563","./indices.shard_stores.js":"ebde","./indices.shrink.js":"2a9e","./indices.stats.js":"19ed","./indices.update_aliases.js":"83ee","./indices.upgrade.js":"7c38","./indices.validate_query.js":"5c88","./info.js":"6999","./ingest.delete_pipeline.js":"5596","./ingest.get_pipeline.js":"d98b","./ingest.processor_grok.js":"7572","./ingest.put_pipeline.js":"22e2","./ingest.simulate.js":"5c64","./mget.js":"c042","./mpercolate.js":"08a0","./msearch.js":"0616","./msearch_template.js":"1e16","./mtermvectors.js":"ae1e","./nodes.hot_threads.js":"39b2","./nodes.info.js":"e929","./nodes.stats.js":"23c1","./percolate.js":"23e1","./ping.js":"a675","./put_script.js":"3ab3","./put_template.js":"8f6f","./reindex.js":"5beb","./reindex_rethrottle.js":"dd3c","./render_search_template.js":"a38b","./scroll.js":"7d30","./search.js":"47f3","./search_shards.js":"5c9f","./search_template.js":"8b0c","./snapshot.create.js":"ddeb","./snapshot.create_repository.js":"c976","./snapshot.delete.js":"b5f0","./snapshot.delete_repository.js":"11e9","./snapshot.get.js":"04b8","./snapshot.get_repository.js":"aeb6","./snapshot.restore.js":"1a2d8","./snapshot.status.js":"2dcf","./snapshot.verify_repository.js":"42b4e","./suggest.js":"107a","./tasks.cancel.js":"1ee8","./tasks.get.js":"139f","./tasks.list.js":"e6ce","./termvectors.js":"e9d0","./update.js":"e6a5","./update_by_query.js":"78bd"};function i(t){var e=n(t);return a(e)}function n(t){if(!a.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}i.keys=function(){return Object.keys(s)},i.resolve=n,t.exports=i,i.id="bb4b"},f98c:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap"},[a("div",{staticClass:"top"},[a("div",{staticClass:"left"},[a("el-button",{attrs:{type:"primary"},on:{click:t.newTask}},[t._v("新建航线")]),a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"file",staticClass:"file",attrs:{type:"file",accept:".kmz,.KMZ"},on:{change:t.changes,click:t.clearInputValue}}),a("el-button",{on:{click:t.triggerUpload}},[t._v("导入航线")])],1),a("label",{staticStyle:{color:"red","font-size":"small"}},[t._v("*选中地图航点右键删除航点")]),a("div",{staticClass:"right"},[a("div",{staticClass:"input"},[a("el-input",{attrs:{placeholder:"请搜索航线名称",clearable:""},model:{value:t.queryParams.missionName,callback:function(e){t.$set(t.queryParams,"missionName",e)},expression:"queryParams.missionName"}}),a("i",{staticClass:"searchBtn el-icon-search",staticStyle:{cursor:"pointer"},on:{click:t.queryList}})],1),a("div",{staticClass:"label"},[t._v("任务站点：")]),a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:t.queryList},model:{value:t.queryParams.siteId,callback:function(e){t.$set(t.queryParams,"siteId",e)},expression:"queryParams.siteId"}},t._l(t.siteOptions,(function(t){return a("el-option",{key:t.siteID,attrs:{label:t.siteName,value:t.siteID}})})),1)],1)]),a("div",{staticClass:"con"},[a("div",{staticClass:"routeList"},[a("el-collapse",{attrs:{accordion:""},on:{change:t.handleChange},model:{value:t.activeRoute,callback:function(e){t.activeRoute=e},expression:"activeRoute"}},[t._l(t.routeList,(function(e,s){return a("el-collapse-item",{key:e.id,attrs:{title:e.missionName,name:e.missionID}},[a("div",{staticClass:"cell"},[a("span",[t._v("创建人：")]),a("span",[t._v(t._s(e.creator))])]),a("div",{staticClass:"cell"},[a("span",[t._v("更新人：")]),a("span",[t._v(t._s(e.modifier))])]),a("div",{staticClass:"cell"},[a("span",[t._v("创建时间：")]),a("span",[t._v(t._s(e.createTime))])]),a("div",{staticClass:"cell"},[a("span",[t._v("更新时间：")]),a("span",[t._v(t._s(e.updateTime))])]),a("div",{staticClass:"btns"},[a("i",{staticClass:"iconBtn el-icon-s-claim",staticStyle:{cursor:"pointer",display:"flex","align-items":"center","justify-content":"center","font-size":"large"},attrs:{title:"验签"},on:{click:function(a){return t.checkDataSign("air_route",e.id)}}}),a("i",{staticClass:"iconBtn delete",staticStyle:{cursor:"pointer"},attrs:{title:"删除"},on:{click:function(a){return t.delRoute(a,e)}}})])])})),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],attrs:{total:t.total,page:t.queryParams.pageNum,limit:t.queryParams.pageSize},on:{"update:page":function(e){return t.$set(t.queryParams,"pageNum",e)},"update:limit":function(e){return t.$set(t.queryParams,"pageSize",e)},pagination:t.queryList}})],2)],1),a("div",{staticClass:"mapWrap"},[a("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"map"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.keyIsFlag,expression:"keyIsFlag"}],staticClass:"keyword"},[a("el-autocomplete",{staticClass:"int_search",attrs:{"fetch-suggestions":t.querySearchAsync,placeholder:"搜索位置、区域、地点"},on:{select:t.handleSelect},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.item;return[a("div",{staticClass:"result_list"},[a("div",{staticClass:"list_left"},[t._v(t._s(s.ADDRESS))])])]}}]),model:{value:t.state.keyWord,callback:function(e){t.$set(t.state,"keyWord",e)},expression:"state.keyWord"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.drawFlag,expression:"drawFlag"}],staticClass:"cover",staticStyle:{left:"17%",bottom:"1%",top:"unset"}},[a("el-radio-group",{attrs:{size:"mini"},on:{change:t.draw},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},t._l(t.radioGroup,(function(e){return a("el-radio",{key:e.value,staticStyle:{color:"#01224b"},attrs:{label:e.value,border:""}},[t._v(t._s(e.name))])})),1),a("div",{staticClass:"input-item"},[a("el-button",{attrs:{type:"primary",round:""},on:{click:t.clearDraw}},[t._v("清除")]),a("el-button",{attrs:{type:"primary",round:""},on:{click:t.closeDraw}},[t._v("关闭绘图")])],1)],1)]),t.showDetail?a("div",{staticClass:"routeDetail",class:{active:t.showDetail}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.openDz,expression:"!openDz"}],staticClass:"title"},[a("div",[a("i",{staticClass:"el-icon-close",staticStyle:{cursor:"pointer"},on:{click:t.close}}),t._v(" "+t._s(t.saveData.missionName)+" ")]),a("div",{staticClass:"btns"},[a("i",{staticClass:"iconBtn ",staticStyle:{cursor:"pointer","font-size":"xx-small",height:"18px"},on:{click:t.delFlightPath}},[t._v("删除")]),a("i",{staticClass:"iconBtn ",staticStyle:{cursor:"pointer","font-size":"xx-small",height:"18px"},attrs:{title:"保存"},on:{click:t.saveRoute}},[t._v("保存")])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.openDz,expression:"openDz"}],staticClass:"title"},[a("div",{staticStyle:{cursor:"pointer"},on:{click:t.openDzClick}},[a("i",{staticClass:"el-icon-back",staticStyle:{cursor:"pointer"}}),t._v(" 返回 ")]),a("div",{staticClass:"btns"},[t._v(" 航点动作设置 ")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.openDz,expression:"openDz"}],staticClass:"con",staticStyle:{width:"100%","border-bottom":"1px solid rgba(255, 255, 255, 0.18)"}},[a("el-form",{ref:"form1"},[a("el-form-item",{staticStyle:{left:"10px",position:"relative"},attrs:{label:"添加动作"}},[a("el-select",{attrs:{placeholder:"请选择动作"},on:{change:t.addActions},model:{value:t.actionDz,callback:function(e){t.actionDz=e},expression:"actionDz"}},t._l(t.actionsOption,(function(t){return a("el-option",{key:t.id,attrs:{label:t.value,value:t.id}})})),1)],1),t.list.length>0&&t.saveData.missionParams.flightPath[t.current]&&t.saveData.missionParams.flightPath[t.current].actions?a("div",{staticClass:"editWrapSco",staticStyle:{"overflow-y":"scroll",height:"27%"}},t._l(t.saveData.missionParams.flightPath[t.current].actions,(function(e,s){return a("div",{key:s},[a("div",{staticClass:"btns df-aj-b"},[a("div"),a("div",{staticStyle:{width:"120px","font-size":"10px"}},[t._v(t._s(e.actionName)+" "+t._s(e.actionParams))]),a("div",{on:{click:function(a){return t.delAction(e)}}})]),1==e.action?a("speedNumber",{attrs:{title:"悬停",isShowInput:!1,data:t.saveData.missionParams.flightPath[t.current].actions[s].actionParams,min:1,max:30},on:{change:function(e){return t.actionParams1(e,s)}}}):t._e(),4==e.action?a("speedNumber",{attrs:{title:"云台俯仰角调整",isShowInput:!1,data:t.saveData.missionParams.flightPath[t.current].actions[s].actionParams,min:-90,max:0},on:{change:function(e){return t.actionParams1(e,s)}}}):t._e(),6==e.action?a("speedNumber",{attrs:{title:"机身偏航角",isShowInput:!1,data:t.saveData.missionParams.flightPath[t.current].actions[s].actionParams,min:-180,max:180},on:{change:function(e){return t.actionParams1(e,s)}}}):t._e(),7==e.action?a("speedNumber",{attrs:{title:"变焦倍数",isShowInput:!1,data:t.saveData.missionParams.flightPath[t.current].actions[s].actionParams,min:1,max:30},on:{change:function(e){return t.actionParams1(e,s)}}}):t._e(),10==e.action?a("speedNumber",{attrs:{title:"开始等时间隔拍照",isShowInput:!1,data:t.saveData.missionParams.flightPath[t.current].actions[s].actionParams,min:1,max:30},on:{change:function(e){return t.actionParams1(e,s)}}}):t._e(),11==e.action?a("speedNumber",{attrs:{title:"开始等距间隔拍照",isShowInput:!1,data:t.saveData.missionParams.flightPath[t.current].actions[s].actionParams,min:1,max:100},on:{change:function(e){return t.actionParams1(e,s)}}}):t._e()],1)})),0):t._e()],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.openDz,expression:"!openDz"}],staticClass:"con"},[a("div",{staticClass:"top"},[a("div",[a("div",[t._v(t._s(t.fxcd)+"m")]),a("div",[t._v("飞行长度")])]),a("div",[a("div",[t._v(t._s((t.fxcd/(null==t.saveData.missionParams.cruiseSpeed?"1":t.saveData.missionParams.cruiseSpeed)).toFixed(2))+"s")]),a("div",[t._v("飞行时间")])]),a("div",[a("div",[t._v(t._s(t.list.length))]),a("div",[t._v("航点数")])])]),a("div",{staticClass:"tabs"},[a("div",{staticStyle:{"text-align":"center","margin-bottom":"20px"}},[a("el-radio-group",{staticStyle:{"margin-bottom":"0"},on:{change:t.isFAFGASD},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},[a("el-radio-button",{attrs:{label:"1"}},[t._v("航线设置")]),a("el-radio-button",{attrs:{label:"2"}},[t._v("航点设置")])],1)],1),1==t.currentTab?a("div",{staticClass:"tabCon hangxian"},[a("speedNumber",{attrs:{title:"航线高度",data:t.cruiseAltitude,tishiMsg:t.tishiMsgHeight,min:10,max:200},on:{change:t.changeAltitude}}),a("speedNumber",{attrs:{title:"航线速度",data:t.cruiseSpeed,tishiMsg:t.tishiMsgSpeed,min:5,max:15},on:{change:t.changeSpeed}}),a("speedNumber",{attrs:{title:"航线云台角",data:t.cruiseGimbalPitch,tishiMsg:t.tishiMsgYtj,min:-120,max:45},on:{change:t.changeGimbalPitch}}),a("div",{staticClass:"df"},[a("div",{staticClass:"l mgr-10"},[t._v("航点拍照")]),a("el-switch",{attrs:{"active-color":"#269794","inactive-color":"#ffffff20"},model:{value:t.saveData.missionParams.isGPhoto,callback:function(e){t.$set(t.saveData.missionParams,"isGPhoto",e)},expression:"saveData.missionParams.isGPhoto"}})],1),t._e(),t._e(),t._e(),t._e()],1):t._e(),2==t.currentTab?a("div",{staticClass:"tabCon hangdian"},[a("div",{staticClass:"slider"},[a("div",{staticClass:"prev el-icon-arrow-left",class:{disabled:t.current<=0},on:{click:t.prevHandle}}),a("div",{staticClass:"content"},[a("ul",{style:{left:184*-t.current+"px"}},t._l(t.list,(function(e,s){return a("li",{key:s},[t._v(t._s(e.name))])})),0)]),a("div",{staticClass:"next el-icon-arrow-right",class:{disabled:t.current>=t.list.length-1},on:{click:t.nextHandle}})]),t.list.length>0?a("div",{staticClass:"info"},[a("div",{staticClass:"df-a mgb-20"},[a("div",{staticStyle:{flex:"1"}},[a("div",{staticClass:"df-a mgb-10"},[a("div",{staticClass:"l"},[t._v("经度：")]),a("div",{staticClass:"input"},[a("el-input",{attrs:{placeholder:"经度",size:"small",clearable:""},model:{value:t.saveData.missionParams.flightPath[t.current].longitude||0,callback:function(e){t.$set(t.saveData.missionParams.flightPath[t.current],"longitude || 0",e)},expression:"saveData.missionParams.flightPath[current].longitude || 0"}})],1)]),a("div",{staticClass:"df-a"},[a("div",{staticClass:"l"},[t._v("纬度：")]),a("div",{staticClass:"input"},[a("el-input",{attrs:{placeholder:"纬度",size:"small",clearable:""},model:{value:t.saveData.missionParams.flightPath[t.current].latitude||0,callback:function(e){t.$set(t.saveData.missionParams.flightPath[t.current],"latitude || 0",e)},expression:"saveData.missionParams.flightPath[current].latitude || 0"}})],1)])]),a("div",{staticClass:"fxjp"},t._l(t.directionControl,(function(e,s){return a("i",{key:s,class:[e,t.currentDirection==e?"active":""],on:{click:function(a){return t.directionControlHandle(e)},mousedown:function(a){t.currentDirection=e},mouseup:function(e){t.currentDirection=null}}})})),0)]),a("div",{staticClass:"df-a mgb-10"},[a("div",{staticClass:"l"},[t._v("机身偏航角：")]),a("div",{staticClass:"input"},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.currentVal,callback:function(e){t.currentVal=e},expression:"currentVal"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]),2==t.saveData.missionParams.flightPath[t.current].value?a("speedNumber",{attrs:{title:"机身偏航角",data:t.saveData.missionParams.flightPath[t.current].heading,min:0,max:100},on:{change:t.changePathheading}}):t._e(),a("speedNumber",{attrs:{title:"航点速度",tishiMsg:t.tishiMsgSpeed,data:t.saveData.missionParams.flightPath[t.current].speed,min:5,max:15},on:{change:t.changePathspeed}}),a("speedNumber",{attrs:{title:"航点高度",tishiMsg:t.tishiMsgHeight,data:t.saveData.missionParams.flightPath[t.current].altitude,min:10,max:200},on:{change:t.changePathaltitude}}),a("speedNumber",{attrs:{title:"航点云台角",tishiMsg:t.tishiMsgYtj,data:t.saveData.missionParams.flightPath[t.current].gimbalPitch,min:-120,max:45},on:{change:t.changePathgimbalPitch}})],1):t._e(),t.list.length>0?a("div",{staticClass:"editWrap",staticStyle:{"overflow-y":"scroll",height:"20%"}},[a("div",{staticClass:"df-aj-b"},[a("span",[t._v("编辑动作(最多8个)")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.editDz}},[t._v("编辑动作")])],1),t._l(t.saveData.missionParams.flightPath[t.current].actions,(function(e,s){return a("div",{key:s,staticClass:"btns df-aj-b"},[a("div"),a("div",{staticStyle:{width:"120px","font-size":"10px"}},[t._v(t._s(e.actionName)+t._s(e.actionParams))]),a("div",{on:{click:function(a){return t.delAction(e)}}})])}))],2):t._e()]):t._e()])])]):t._e()]),a("el-dialog",{attrs:{title:"新建航线",visible:t.open,width:"40%","append-to-body":"","close-on-click-modal":!1,"before-close":t.cancel},on:{"update:visible":function(e){t.open=e}}},[a("el-form",{ref:"form",attrs:{model:t.saveData,rules:t.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"站点名称",prop:"siteId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入站点名称"},model:{value:t.saveData.siteId,callback:function(e){t.$set(t.saveData,"siteId",e)},expression:"saveData.siteId"}},t._l(t.siteOptions,(function(t){return a("el-option",{key:t.siteId,attrs:{label:t.siteName,value:t.siteID}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"航线类型",prop:"missionType"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择航线类型",disabled:""},model:{value:t.missionType,callback:function(e){t.missionType=e},expression:"missionType"}},t._l(t.missionTypeOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"航线名称",prop:"missionName"}},[a("el-input",{attrs:{placeholder:"请输入航线名称"},model:{value:t.saveData.missionName,callback:function(e){t.$set(t.saveData,"missionName",e)},expression:"saveData.missionName"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")]),a("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1)],1)],1)},i=[],n=a("b85c"),r=a("c7eb"),o=a("1da1"),l=(a("d3b7"),a("159b"),a("14d9"),a("d81d"),a("b0c0"),a("7db0"),a("b680"),a("4de4"),a("ac1f"),a("00b4"),a("df2b")),c=a("7cdd"),u=a("38c3"),d=a("595b"),h=(a("e11e"),a("d451"),a("7ded")),m=a("5575"),g=(a("862d"),a("86ac")),f=a.n(g),p=a("607b"),v=a.n(p),b=(a("5c96"),a("4360"),a("b775"),a("33dd"),a("8232")),P=a.n(b),D=a("c4e3"),j=a.n(D);window._AMapSecurityConfig={securityJsCode:"e0dc8bcc188ebcafc5a009c027fe8aa9"};var k={name:"Index",components:{BaiduMap:l["a"],speedNumber:c["default"]},data:function(){return{currentVal:1,drawFlag:!1,radioGroup:[{name:"画点",value:"marker"},{name:"画折线",value:"polyline"},{name:"画多边形",value:"polygon"},{name:"画矩形",value:"rectangle"},{name:"画圆",value:"circle"}],keyIsFlag:!1,openDz:!1,cruiseAltitude:120,tishiMsgHeight:"建议50~120米",tishiMsgSpeed:"建议8到12米每秒",tishiMsgYtj:"建议-25 ~ -40度",isFlag:!1,cruiseSpeed:0,cruiseGimbalPitch:0,flightPathheading:0,flightPathspeed:0,flightPathaltitude:0,flightPathgimbalPitch:0,marker:null,wrjMarker:null,drawingManager:null,drawingType:"",value1:"",center:[121.500863,30.918788],zoom:19,ak:"dc0fXhXGxX8gVV1H1DCGtNobAES6ratw",myMap:null,map:null,maker:null,wrjmarker:null,taskName:"",markers:[],icon:null,fxcd:0,isShow:!1,out:!0,mapModule:null,radio:"",mouseTool:null,overlays:[],cluster:null,gridSize:120,points:[],value:1,options:[{value:1,label:"沿航线方向"},{value:2,label:"自定义"}],activeRoute:null,routeList:[],showDetail:!1,currentDetail:{},currentTab:"1",total:0,queryParams:{pageNum:1,pageSize:10,siteId:null,status:1},missionType:1,projectOptions:[],siteOptions:[],actionDz:null,actionsOption:[{id:1,value:"悬停"},{id:2,value:"开始录像"},{id:3,value:"停止录像"},{id:4,value:"云台俯仰角调整"},{id:5,value:"拍照"},{id:6,value:"机身偏航角"},{id:7,value:"变焦倍数"},{id:8,value:"云台航偏角绝对调整"},{id:9,value:"云台航偏角相对调整"},{id:10,value:"开始等时间隔拍照"},{id:11,value:"开始等距间隔拍照"},{id:12,value:"停止间隔拍照"}],title:"",rules:{missionName:[{required:!0,message:"航线名称不能为空",trigger:"blur"}],siteId:[{required:!0,message:"站点名称不能为空",trigger:"change"}],missionType:[{required:!0,message:"航线类型不能为空",trigger:"change"}]},open:!1,form:{},list:[],mapOptions:{container:"map",style:{version:8,sources:{"iserver-tiles":{type:"raster",tiles:["http://10.248.223.223:8090//iserver/services/map-ugcv5-FengXianJiChuDiTuDark12023/rest/maps/FengXianJiChuDiTuDark1_2023"],rasterSource:"iserver",tileSize:256}},layers:[{id:"iserver-tiles",type:"raster",source:"iserver-tiles",layout:{visibility:"visible"},minzoom:0,maxzoom:22}]},crs:"EPSG:4326",center:[121.56,30.895],zoom:10,minZoom:0,maxZoom:22},missionTypeOptions:[{name:"路点巡航",id:1},{name:"二维拼图",id:2},{name:"倾斜摄影",id:3}],saveData:this.getInitData(),current:0,data:{lng:"",lat:""},directionControl:["up","right","down","left"],currentDirection:null,isPhoto:!1,isGPhoto:!1,latLong:[],isAdd:!1,addresPush:[],featuresShow:!1,lnglat:[],auto:null,placeSearch:null,state:{keyWord:"",result:[{name:""}],MSearch:null},timerout:null}},watch:{currentVal:function(t){this.saveData.missionParams.flightPath[this.current].value=t}},mounted:function(){this.siteSelectList(),this.queryList(""),this.initMap()},methods:{siteSelectList:function(){var t=this;Object(m["z"])({pageNum:0,pageSize:99999}).then((function(e){e.data.list.forEach((function(t,a){e.data.list[a].siteID=t.siteId,e.data.list[a].siteLocation=[],e.data.list[a].siteLocation.push(t.siteLongitude),e.data.list[a].siteLocation.push(t.siteLatitude)})),t.siteOptions=e.data.list,console.log("站点",t.siteOptions)}))},queryList:function(){var t=this;this.loading=!0,Object(u["b"])(this.queryParams).then((function(e){console.log(">>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",e),null!=e.data.list&&e.data.list.length>0&&e.data.list.forEach((function(t,a){e.data.list[a].missionID=t.missionId})),t.routeList=e.data.list,t.total=e.data.total,t.loading=!1,null!=t.marker&&t.map.remove(t.marker)}))},editDz:function(){this.openDz=!0},openDzClick:function(){this.openDz=!1},triggerUpload:function(){this.$refs.file.click()},checkDataSign:function(t,e){var a=this;return Object(o["a"])(Object(r["a"])().mark((function s(){var i;return Object(r["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Object(h["a"])(t,e);case 2:i=s.sent,200==i.code?a.$modal.msgSuccess("验签成功"):a.$modal.msgError(i.msg);case 5:case"end":return s.stop()}}),s)})))()},delRoute:function(t,e){var a=this;console.log(e),this.$modal.confirm("确认信息").then((function(){})).then((function(){Object(m["k"])(e.missionID).then((function(t){a.$modal.msgSuccess("删除成功"),a.showDetail=!1,a.saveData=a.getInitData(),a.drawFlag=!1,a.queryList(""),a.closeDraw(),a.clearDraw()}))})).catch((function(t){console.log(t)}))},featuresChange:function(){this.currentTab="1",this.current=0;var t=this;this.drawFlag=!1,this.showDetail=!0;var e=[];t.addresPush.forEach((function(t,a){var s=[];s.push(t[1]),s.push(t[0]),console.info(s,"===================="),e.push({actions:null,altitude:120,gimbalPitch:0,heading:0,index:0,isPhoto:2,latitude:s[0],longitude:s[1],name:"航点"+a,speed:a,value:1})})),t.saveData.missionParams={GCSType:1,cruiseAltitude:120,cruiseGimbalPitch:0,cruiseSpeed:0,cruiseUAVYaw:0,flightPath:e,isGPhoto:!1,takeOffAltitude:0},this.gisInitData(),this.radio="marker",this.isAdd=!0,this.open=!1,t.map.on("click",(function(e){if(!e.defaultPrevented){e.preventDefault();var a=t.map.queryRenderedFeatures(e.point);if(a.length>0){var s=a[0];console.log("点击的坐标：",s.geometry.coordinates)}else{console.log("未点击任何图层",e.lngLat.lat+"，"+e.lngLat.lng),this.radio="marker",this.isAdd=!1;var i=[e.lngLat.lng,e.lngLat.lat];console.log("点击地图坐标：",i),t.list.push({id:t.list.length+1,name:"航点"+(t.list.length+1)});var n={};n.index=t.saveData.missionParams.flightPath.length,n.name="航点"+n.index,n.altitude=120,n.latitude=i[1],n.heading=0,n.gimbalPitch=0,n.longitude=i[0],n.speed=0,t.saveData.missionParams.isGPhoto?n.isPhoto=1:n.isPhoto=0,t.saveData.missionParams.flightPath.length>0&&t.current++,t.saveData.missionParams.flightPath.push(n),t.data.lng=i[0],t.data.lat=i[1],this.current=n.index,this.currentTab=2,t.gisInitData(1)}}}))},handleChange:function(t){var e=this;this.currentTab="1",this.current=0,this.saveData=this.getInitData();var a=this;if(t){this.keyIsFlag=!0,this.drawFlag=!1,this.showDetail=!0;var s=this.routeList.find((function(e){return e.missionID==t}));Object(m["t"])(s.missionID).then((function(t){console.log(">>>>>>>>>>>>>",t),t.data.missionParams.flightPath.forEach((function(e,a){console.log("源经纬度：",e.longitude+","+e.latitude),t.data.missionParams.flightPath[a].longitude=e.longitude,t.data.missionParams.flightPath[a].latitude=e.latitude})),t.data.missionID=t.data.missionId,e.saveData=t.data,e.gisInitData(),a.mouseTool=null,a.map.on("click",(function(t){if(!t.defaultPrevented){t.preventDefault();var e=a.map.queryRenderedFeatures(t.point);if(e.length>0){var s=e[0];console.log("点击的坐标：",s.geometry.coordinates)}else{console.log("未点击任何图层",t.lngLat.lat+"，"+t.lngLat.lng),this.radio="marker",this.isAdd=!1;var i=[t.lngLat.lng,t.lngLat.lat];console.log("点击地图坐标：",i),a.list.push({id:a.list.length+1,name:"航点"+(a.list.length+1)});var n={};n.index=a.saveData.missionParams.flightPath.length,n.name="航点"+n.index,n.altitude=a.saveData.missionParams.cruiseAltitude,n.latitude=i[1],n.heading=0,n.gimbalPitch=0,n.longitude=i[0],n.speed=a.saveData.missionParams.cruiseSpeed,a.saveData.missionParams.isGPhoto?n.isPhoto=1:n.isPhoto=0,a.saveData.missionParams.flightPath.length>0&&a.current++,a.saveData.missionParams.flightPath.push(n),a.data.lng=i[0],a.data.lat=i[1],this.current=n.index,this.currentTab=2,a.gisInitData(1)}}}))}))}else{this.keyIsFlag=!1,this.showDetail=!1,this.drawFlag=!1;var i=a.map.getStyle().layers;i.forEach((function(t,e){"iserver-tiles"!=t.id&&(a.map.removeLayer(t.id),a.map.removeSource(t.id))})),null!=this["markerWrj"]&&""!=this["markerWrj"]&&(this["markerWrj"].remove(),this.list.forEach((function(t,a){null!=e["marker"+a]&&void 0!=e["marker"+a]&&e["marker"+a].remove()})),this["markerWrj"]=null)}},gisInitData:function(t){var e=this,a=this,s=a.map.getStyle().layers;s.forEach((function(t,e){"iserver-tiles"!=t.id&&(a.map.removeLayer(t.id),a.map.removeSource(t.id))})),null!=this["markerWrj"]&&""!=this["markerWrj"]&&(this["markerWrj"].remove(),this.list.forEach((function(t,a){null!=e["marker"+a]&&void 0!=e["marker"+a]&&e["marker"+a].remove()})),this["markerWrj"]=null),this.latLong=[],this.list=[],a.wrjmarker=a.siteOptions.find((function(t){return t.siteID==a.saveData.siteId})).siteLocation,a.wrjmarker=[a.wrjmarker[0],a.wrjmarker[1]];var i=document.createElement("img");i.style.width="50px",i.style.height="50px",i.src=f.a,a["markerWrj"]=new mapboxgl.Marker(i),a["markerWrj"].setLngLat(a.wrjmarker),a["markerWrj"].addTo(a.map),console.log("撒点位置：",a.wrjmarker);var n=[];n[0]=a.wrjmarker[0],n[1]=a.wrjmarker[1],"1"!=t&&(this.map.setCenter(a.wrjmarker),console.log("中心点位置：",a.wrjmarker),a.map.setZoom(15)),this.latLong.push(n),a.saveData.missionParams.takeOffAltitude=a.siteOptions.find((function(t){return t.siteID==a.saveData.siteId})).siteAltitude,a.$nextTick((function(){a.cruiseAltitude=this.saveData.missionParams.cruiseAltitude,a.cruiseSpeed=this.saveData.missionParams.cruiseSpeed,a.cruiseGimbalPitch=this.saveData.missionParams.cruiseGimbalPitch}));var r=0;this.saveData.missionParams.flightPath.forEach((function(t,s){var i=[t.longitude,t.latitude],n=d["point"](e.latLong[e.latLong.length-1]),o=d["point"](i),l={units:"miles"};r+=d["distance"](n,o,l),e.latLong.push(i),e.list.push({id:t.index,name:"航点"+(s+1)}),e.data.lng=t.longitude,e.data.lat=t.latitude;var c=document.createElement("div");c.style.borderRadius="60%",c.style.backgroundColor="#ede412f5",c.style.border="1px solid darkolivegreen",c.style.color="#01224b",c.style.height="30px",c.style.width="30px",c.style.display="flex",c.style.justifyContent="center",c.style.alignItems="center",c.innerHTML=s+1,c.src=f.a,c.title=s,a["marker"+s]=new mapboxgl.Marker(c),a["marker"+s].setDraggable(!0),a["marker"+s].setLngLat(i),a["marker"+s].addTo(a.map),a["marker"+s].on("dragend",e.showInfoM),a["marker"+s].on("clickTolerance",e.removeShowInfo),a["marker"+s].on("click",e.showDiv),a.map.on("click",a["marker"+s],(function(t){console.log("e",t)})),t.heading?t.value=2:t.value=1,null!=a.saveData.missionParams.flightPath[s].actions&&a.saveData.missionParams.flightPath[s].actions.forEach((function(t,e){a.saveData.missionParams.flightPath[s].actions[e].actionName=a.actionsOption.find((function(e){return e.id==t.action})).value})),a.flightPathheading=t.heading,a.flightPathspeed=t.speed,a.flightPathaltitude=t.altitude,a.flightPathgimbalPitch=t.gimbalPitch,s==e.saveData.missionParams.flightPath.length-1&&(console.log("marker>>>>>>>>>>>>>>",e.latLong),a.map.addSource("line",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[a.wrjmarker,i]}}}),a.map.addLayer({id:"line",type:"line",source:"line",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#D2691E","line-width":4}}))})),console.log("marker>>>>>>>>>>>>>>",this.latLong);var o=[];a.latLong.forEach((function(t,e){var s={type:"Feature",geometry:{type:"Point",coordinates:a.latLong[e]}};o.push(s),e<a.latLong.length-1&&(a.map.addSource("line"+e,{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[a.latLong[e],a.latLong[e+1]]}}}),a.map.addLayer({id:"line"+e,type:"line",source:"line"+e,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#D2691E","line-width":4}}))})),this.fxcd=parseInt(1e3*r);var l=(this.fxcd/1e3/this.saveData.missionParams.cruiseSpeed==null?"1":60*this.saveData.missionParams.cruiseSpeed).toFixed(2);console.log(l)},onMouseMove:function(t){var e=this_.map.unproject([t.clientX-offsetX,t.clientY-offsetY]);this_.marker.setLngLat(e)},showInfoM:function(t,e,a){console.log(t.target.getLngLat()),console.log("下标：",t.target._element.title);var s=[t.target.getLngLat().lng,t.target.getLngLat().lat];this.saveData.missionParams.flightPath[t.target._element.title].longitude=s[0],this.saveData.missionParams.flightPath[t.target._element.title].latitude=s[1],this.gisInitData("1")},removeShowInfo:function(t){var e=this;this.clearDraw();var a=t.target._originOpts.extData.index;this.saveData.missionParams.flightPath=this.saveData.missionParams.flightPath.filter((function(t){return t.index!=a})),this.saveData.missionParams.flightPath.forEach((function(t,a){e.saveData.missionParams.flightPath[a].index=a})),this.list=[],this.current=0,this.gisInitData("1")},delFlightPath:function(){var t=this,e=this.saveData.missionParams.flightPath[this.current].index;this.clearDraw(),this.saveData.missionParams.flightPath=this.saveData.missionParams.flightPath.filter((function(t){return t.index!=e})),this.saveData.missionParams.flightPath.forEach((function(e,a){t.saveData.missionParams.flightPath[a].index=a})),this.list=[],this.current=0,this.gisInitData("1")},saveRoute:function(){var t=this,e=this;if(this.saveData.missionID)return this.saveData.missionParams.GCSType=1,void Object(u["c"])(this.saveData.missionID,this.saveData).then((function(a){console.log(a),t.$modal.msgSuccess("更新成功"),t.showDetail=!1,t.saveData=t.getInitData(),t.drawFlag=!1,t.closeDraw(),t.queryList(""),e.clearDraw()}));this.saveData.missionParams.GCSType=1,Object(m["y"])(this.saveData).then((function(a){console.log(a),t.$modal.msgSuccess("新增成功"),t.showDetail=!1,t.saveData=t.getInitData(),t.drawFlag=!1,t.closeDraw(),t.queryList(""),e.clearDraw()}))},close:function(){this.showDetail=!1,this.activeRoute=null,this.featuresShow=!1},prevHandle:function(){this.current<=0||this.current--},nextHandle:function(){this.current>=this.list.length-1||this.current++},directionControlHandle:function(t){console.log("directionControlHandle",t),"up"==t&&(this.saveData.missionParams.flightPath[this.current].longitude=this.saveData.missionParams.flightPath[this.current].longitude+5e-6),"right"==t&&(this.saveData.missionParams.flightPath[this.current].latitude=this.saveData.missionParams.flightPath[this.current].latitude+5e-6),"down"==t&&(this.saveData.missionParams.flightPath[this.current].longitude=this.saveData.missionParams.flightPath[this.current].longitude-5e-6),"left"==t&&(this.saveData.missionParams.flightPath[this.current].latitude=this.saveData.missionParams.flightPath[this.current].latitude-5e-6),this.gisInitData()},change:function(t){console.log(t)},isFAFGASD:function(t){this.isFlag=!0},changeAltitude:function(t){var e=this;this.saveData.missionParams.cruiseAltitude=t,this.cruiseAltitude=t,this.isFlag||this.saveData.missionParams.flightPath.forEach((function(a,s){e.saveData.missionParams.flightPath[s].altitude=t}))},changeSpeed:function(t){this.saveData.missionParams.cruiseSpeed=t,this.cruiseSpeed=t},changeGimbalPitch:function(t){this.saveData.missionParams.cruiseGimbalPitch=t,this.saveData.missionParams.cruiseUAVYaw=t,this.cruiseGimbalPitch=t},changeTHModeParam:function(t){this.saveData.missionParams.THModeParam=t},changeTHPTotal:function(t){this.saveData.missionParams.THPTotal=t},changePathheading:function(t){this.saveData.missionParams.flightPath[this.current].heading=t},phjChange:function(t){this.saveData.missionParams.flightPath[current].value=t},changePathspeed:function(t){this.saveData.missionParams.flightPath[this.current].speed=t},changePathaltitude:function(t){this.saveData.missionParams.flightPath[this.current].altitude=t},changePathgimbalPitch:function(t){this.saveData.missionParams.flightPath[this.current].gimbalPitch=t,console.log("@@@@@@@@@@@@@@@>>>>>>>>>>>>>>>>>>>>>>>>>.",this.saveData)},actionParams1:function(t,e){this.saveData.missionParams.flightPath[this.current].actions[e].actionParams=t},submitForm:function(){var t=this,e=this;this.latLong=[],this.$refs["form"].validate((function(a){if(a)if(t.keyIsFlag=!0,e.featuresShow)e.featuresChange();else{e.showDetail=!0,e.drawFlag=!1,e.open=!1,e.wrjmarker=e.siteOptions.find((function(t){return t.siteID==e.saveData.siteId})).siteLocation;var s=[e.wrjmarker[0],e.wrjmarker[1]],i=document.createElement("img");i.style.width="50px",i.style.height="50px",i.src=f.a,e["markerWrj"]=new mapboxgl.Marker(i),e["markerWrj"].setLngLat(s),e["markerWrj"].addTo(e.map),e.map.setCenter(s),e.map.setZoom(15);var n=[];n[0]=s[0],n[1]=s[1],t.latLong.push(n),e.saveData.missionParams.takeOffAltitude=e.siteOptions.find((function(t){return t.siteID==e.saveData.siteId})).siteAltitude,t.radio="marker",t.isAdd=!0,e.map.on("click",(function(t){if(!t.defaultPrevented){t.preventDefault();var a=e.map.queryRenderedFeatures(t.point);if(a.length>0){var s=a[0];console.log("点击的坐标：",s.geometry.coordinates)}else{console.log("未点击任何图层",t.lngLat.lat+"，"+t.lngLat.lng),this.radio="marker",this.isAdd=!1;var i=[t.lngLat.lng,t.lngLat.lat];console.log("点击地图坐标：",i),e.list.push({id:e.list.length+1,name:"航点"+(e.list.length+1)});var n={};n.index=e.saveData.missionParams.flightPath.length,n.name="航点"+n.index,n.altitude=e.saveData.missionParams.cruiseAltitude,n.latitude=i[1],n.heading=0,n.gimbalPitch=0,n.longitude=i[0],n.speed=e.saveData.missionParams.cruiseSpeed,e.saveData.missionParams.isGPhoto?n.isPhoto=1:n.isPhoto=0,e.saveData.missionParams.flightPath.length>0&&e.current++,e.saveData.missionParams.flightPath.push(n),e.data.lng=i[0],e.data.lat=i[1],this.current=n.index,this.currentTab=2,e.gisInitData(1)}}}))}}))},cancel:function(){this.open=!1,this.featuresShow=!1,this.addresPush=[]},clearInputValue:function(){this.$refs.file.value=""},changes:function(){console.info("fileselect====",e);var t=new j.a,e=this.$refs.file.files[0];console.info("fileselect====",e);var a=new FileReader;if("undefined"!==typeof FileReader){var s=this;a.readAsText(e),a.onload=function(i){console.log(a.result),t.loadAsync(e,{optimizedBinaryString:!0}).then((function(t){for(var e in t.files)t.files[e].dir||/\.(kml)$/.test(t.files[e].name)&&t.file(t.files[e].name).async("string").then((function(t){var e=(new DOMParser).parseFromString(t,"text/xml"),a=P.a.kml(e);console.log("geojsongeojson=============",a.features);var i=a.features;s.addresPush=[];var r,o=Object(n["a"])(i);try{for(o.s();!(r=o.n()).done;){var l=r.value;s.addresPush.push(l.geometry.coordinates)}}catch(c){o.e(c)}finally{o.f()}console.log("geojsongeojson=============",s.addresPush),s.newTask(),s.featuresShow=!0}))})).catch((function(t){console.log(t)}))}}else alert("您的浏览器不支持FileReader接口")},newTask:function(){this.open=!0,this.saveData=this.getInitData(),this.handleChange(""),this.list=[],this.activeRoute=null,this.showDetail=!1,this.drawFlag=!1},addActions:function(t){if(console.log(t),null==this.saveData.missionParams.flightPath[this.current].actions&&(this.saveData.missionParams.flightPath[this.current].actions=[]),this.saveData.missionParams.flightPath[this.current].actions.length>=8)this.$modal.msgWarning("最多八个动作");else if(null==this.saveData.missionParams.flightPath[this.current].actions.find((function(e){return e.action==t}))){var e={};e.index=this.saveData.missionParams.flightPath[this.current].actions.length+1,e.action=t,e.actionParams=0,e.actionName=this.actionsOption.find((function(e){return e.id==t})).value,this.saveData.missionParams.flightPath[this.current].actions.push(e)}},remoteMethod:function(t){var e=this;""!==t?(this.loading=!0,setTimeout((function(){e.loading=!1,e.options=e.remotelist.filter((function(e){return e.label.toLowerCase().indexOf(t.toLowerCase())>-1}))}),200)):this.options=[]},querySearchAsync:function(t,e){return Object(o["a"])(Object(r["a"])().mark((function a(){var s;return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return""===t&&e([]),a.next=3,Object(u["a"])({address:t});case 3:s=a.sent,e(s.data);case 5:case"end":return a.stop()}}),a)})))()},handleSelect:function(t){console.log(">>>>>>>>>>>>>>>>>>>>>>>>",t),this.state.keyWord=t.ADDRESS;var e=this,a=t.POINT_L,s=t.POINT_B;t.POINT_L,t.POINT_B;this.radio="marker",this.isAdd=!1;var i=[a,s];e.list.push({id:e.list.length+1,name:"航点"+(e.list.length+1)});var n={};n.index=e.saveData.missionParams.flightPath.length,n.name="航点"+n.index,n.altitude=e.saveData.missionParams.cruiseAltitude,n.latitude=i[1],n.heading=0,n.gimbalPitch=0,n.longitude=i[0],n.speed=e.saveData.missionParams.cruiseSpeed,e.saveData.missionParams.isGPhoto?n.isPhoto=1:n.isPhoto=0,e.saveData.missionParams.flightPath.length>0&&e.current++,e.saveData.missionParams.flightPath.push(n),e.data.lng=i[0],e.data.lat=i[1],this.current=n.index,this.currentTab=2,e.gisInitData(1)},keywordSearch_CallBack:function(t){console.log(t,"搜索结果");var e=t.poiList;e&&(this.state.result=e.pois)},initMap:function(){var t=this;t.map=new mapboxgl.Map(this.mapOptions),t.map.addControl(new mapboxgl.NavigationControl,"top-left"),t.map.addControl(new mapboxgl.ScaleControl({}))},delAction:function(t){console.log(t),this.saveData.missionParams.flightPath[this.current].actions=this.saveData.missionParams.flightPath[this.current].actions.filter((function(e){return e.index!=t.index}))},draw:function(t,e,a){new AMap.Icon({size:new AMap.Size(1,1),image:v.a,imageSize:new AMap.Size(1,1)});switch(t){case"marker":break;case"polyline":this.mouseTool.polyline({strokeColor:"#80d8ff"});break;case"polygon":this.mouseTool.polygon({fillColor:"#00b0ff",strokeColor:"#80d8ff"});break;case"rectangle":this.mouseTool.rectangle({fillColor:"#00b0ff",strokeColor:"#80d8ff"});break;case"circle":this.mouseTool.circle({fillColor:"#00b0ff",strokeColor:"#80d8ff"});break}},drawOverlays:function(t){if("marker"===this.radio){if(this.nowNew=new Date,this.nowNew==new Date)return void console.log("1=====================================");var e=[];e[0]=t.obj._position.KL,e[1]=t.obj._position.kT;var a=!1;if(this.saveData.missionParams.flightPath.forEach((function(t,s){var i=[];i.push(t.longitude),i.push(t.latitude);var n=[];n.push(i),n.push(e),AMap.GeometryUtil.distanceOfLine(n)<10&&(a=!0)})),!a){this.overlays.push(t.obj),null!=this.polyline&&this.map.remove(this.polyline),this.latLong.push(e);var s=AMap.GeometryUtil.distanceOfLine(this.latLong);if(s<=10)return;console.log("marker>>>>>>>>>>>>>>",this.latLong),this.polyline=new AMap.Polyline({path:this.latLong,strokeColor:"#3366FF",strokeWeight:5,strokeStyle:"solid"}),this.map.add(this.polyline),console.log("长度》》》》》》》》》》》》》》》》》》》》》》》》》》》》》》》》》》》》",s),this.fxcd=parseInt(s),this.list.push({id:this.list.length+1,name:"航点"+(this.list.length+1)});var i={};i.index=this.saveData.missionParams.flightPath.length,i.name="航点"+i.index,i.altitude=120,i.latitude=t.obj._position.kT,i.heading=0,i.gimbalPitch=0,i.longitude=t.obj._position.KL,i.speed=0,this.saveData.missionParams.isGPhoto?i.isPhoto=1:i.isPhoto=0,this.saveData.missionParams.flightPath.length>0&&this.current++,this.saveData.missionParams.flightPath.push(i),this.data.lng=t.obj._position.KL,this.data.lat=t.obj._position.kT,this.marker=new AMap.Marker({position:e,offset:new AMap.Pixel(-13,-15),draggable:!0,extData:{index:i.index,asdfg:"12345"},content:'<div style="border-radius: 60%;border: 1px;background-color: #01224b;border: 1px solid darkolivegreen;color: white;height: 30px;width: 30px;display: flex;justify-content: center;align-items: center;">'+(i.index+1)+"</div>"}),this.marker.on("dragging",this.showInfoM),this.marker.on("rightclick",this.removeShowInfo),this.marker.on("click",this.showDiv),this.map.add(this.marker),this.current=i.index,this.currentTab=2}this.gisInitData("1")}else if("circle"===this.radio){console.log("获取半径>>>>>>>>>>>>",t.obj.getRadius()),console.log("获取中心点>>>>>>>>>>>>>>",t.obj.getCenter());var n=this.map.getZoom();n>5&&(n-=1),this.map.setZoomAndCenter(n,t.obj.getCenter())}else{var r=[t.obj.getBounds().northEast.lng,t.obj.getBounds().northEast.lat],o=[t.obj.getBounds().southWest.lng,t.obj.getBounds().southWest.lat];console.log(t.obj.getBounds());var l=new this.mapModule.Bounds(r,o);this.map.setBounds(l)}},showDiv:function(t){this.current=t.target._originOpts.extData.index,this.currentTab=2},clearDraw:function(){this.overlays=[],this.latLong=[];var t=[];null!=this.wrjmarker&&(t[0]=this.wrjmarker[0],t[1]=this.wrjmarker[1],this.latLong.push(t)),this.closeDraw()},closeDraw:function(){var t=this,e=this,a=e.map.getStyle().layers;a.forEach((function(t,a){"iserver-tiles"!=t.id&&(e.map.removeLayer(t.id),e.map.removeSource(t.id))})),null!=this["markerWrj"]&&""!=this["markerWrj"]&&(this["markerWrj"].remove(),this.list.forEach((function(e,a){null!=t["marker"+a]&&void 0!=t["marker"+a]&&t["marker"+a].remove()})),this["markerWrj"]=null)},showInfoClick:function(t){var e=[t.lnglat.getLng(),t.lnglat.getLat()];console.log(e),this.points.push({lnglat:e}),console.log(this.points)},getInitData:function(){return{missionName:"",missionType:this.missionType,siteId:"",thumbnail:"",missionParams:{GCSType:1,heightMode:0,cruiseSpeed:0,cruiseAltitude:120,cruiseGimbalPitch:0,cruiseUAVYaw:0,takeOffAltitude:0,longitudinalOverlapRate:0,lateralOverlapRate:0,FRouteRMAngle:0,THMode:1,THModeParam:0,isGPhoto:!1,THPTotal:0,flightPath:[]}}}}},y=k,w=(a("3dc4"),a("2877")),A=Object(w["a"])(y,s,i,!1,null,"77625ce8",null);e["default"]=A.exports}}]);