(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5781079c","chunk-3733f150"],{"0030":function(t,e,a){"use strict";a("0f8a")},"0f8a":function(t,e,a){},2533:function(t,e,a){},"33d3":function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));const n=t=>Object.prototype.toString.call(t).slice(8,-1)},"38c3":function(t,e,a){"use strict";a.d(e,"b",(function(){return s})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return l}));var n=a("b775"),i=a("c38a");function s(t){return Object(n["a"])({url:"/fcs/missions/page",method:"get",params:t})}function o(t,e){return Object(n["a"])({url:"/fcs/missions/"+Object(i["g"])(t),method:"put",data:e})}function l(t){return Object(n["a"])({url:"/fcs/addressConver",method:"get",params:t})}},4636:function(t,e,a){t.exports=a.p+"static/img/tishi.dd60cf02.png"},"4fab":function(t,e,a){"use strict";var n={"bm-map":["click","dblclick","rightclick","rightdblclick","maptypechange","mousemove","mouseover","mouseout","movestart","moving","moveend","zoomstart","zoomend","addoverlay","addcontrol","removecontrol","removeoverlay","clearoverlays","dragstart","dragging","dragend","addtilelayer","removetilelayer","load","resize","hotspotclick","hotspotover","hotspotout","tilesloaded","touchstart","touchmove","touchend","longpress"],"bm-geolocation":["locationSuccess","locationError"],"bm-overview-map":["viewchanged","viewchanging"],"bm-marker":["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","infowindowclose","infowindowopen","dragstart","dragging","dragend","rightclick"],"bm-polyline":["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","lineupdate"],"bm-polygon":["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","lineupdate"],"bm-circle":["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","lineupdate"],"bm-label":["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","rightclick"],"bm-info-window":["close","open","maximize","restore","clickclose"],"bm-ground":["click","dblclick"],"bm-autocomplete":["onconfirm","onhighlight"],"bm-point-collection":["click","mouseover","mouseout"]};e["a"]=function(t,e){const a=e||n[this.$options.name];a&&a.forEach(e=>{const a="on"===e.slice(0,2),n=a?e.slice(2):e,i=this.$listeners[n];i&&t.addEventListener(e,i.fns)})}},5575:function(t,e,a){"use strict";a.d(e,"n",(function(){return s})),a.d(e,"h",(function(){return o})),a.d(e,"z",(function(){return l})),a.d(e,"a",(function(){return r})),a.d(e,"C",(function(){return c})),a.d(e,"E",(function(){return u})),a.d(e,"B",(function(){return d})),a.d(e,"j",(function(){return m})),a.d(e,"w",(function(){return p})),a.d(e,"k",(function(){return h})),a.d(e,"y",(function(){return f})),a.d(e,"t",(function(){return g})),a.d(e,"i",(function(){return b})),a.d(e,"F",(function(){return v})),a.d(e,"u",(function(){return y})),a.d(e,"r",(function(){return C})),a.d(e,"v",(function(){return k})),a.d(e,"q",(function(){return _})),a.d(e,"p",(function(){return w})),a.d(e,"f",(function(){return O})),a.d(e,"c",(function(){return D})),a.d(e,"d",(function(){return j})),a.d(e,"g",(function(){return M})),a.d(e,"e",(function(){return x})),a.d(e,"x",(function(){return S})),a.d(e,"s",(function(){return B})),a.d(e,"b",(function(){return T})),a.d(e,"o",(function(){return P})),a.d(e,"A",(function(){return Z})),a.d(e,"D",(function(){return N}));var n=a("b775"),i=a("c38a");a("bc3a");function s(t){return Object(n["a"])({url:"/fcs/sites/"+Object(i["g"])(t),method:"get"})}function o(t){return Object(n["a"])({url:"/fcs/control/uavs/cancel_fly_point",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/fcs/sites/page",method:"get",params:t})}function r(t){return Object(n["a"])({url:"/fcs/sites",method:"post",data:t})}function c(t,e,a){return Object(n["a"])({url:"/fcs/sites/bindHive/"+Object(i["g"])(t)+"/"+Object(i["g"])(e)+"/"+Object(i["g"])(a),method:"PATCH",data:{}})}function u(t,e,a){return Object(n["a"])({url:"/fcs/sites/bindUav/"+Object(i["g"])(t)+"/"+Object(i["g"])(e)+"/"+Object(i["g"])(a),method:"PATCH",data:{}})}function d(t){return Object(n["a"])({url:"/fcs/sites/"+Object(i["g"])(t.siteId),method:"PUT",data:t})}function m(t){return Object(n["a"])({url:"/fcs/sites/"+Object(i["g"])(t),method:"delete"})}function p(t){return Object(n["a"])({url:"/fcs/missions",method:"get",params:t})}function h(t){return Object(n["a"])({url:"/fcs/missions/"+Object(i["g"])(t)+"/"+Object(i["g"])("-1"),method:"PATCH"})}function f(t){return Object(n["a"])({url:"/fcs/missions",method:"post",data:t})}function g(t){return Object(n["a"])({url:"/fcs/missions/"+Object(i["g"])(t),method:"get"})}function b(t){return Object(n["a"])({url:"/fcs/cronmissions/cd/list",method:"get",params:t})}function v(t){return Object(n["a"])({url:"/fcs/cronmissions/validlist",method:"get",params:t})}function y(t,e){return Object(n["a"])({url:t,method:"post",data:e})}function C(t){return Object(n["a"])({url:"/fcs/uavaction/mediasetting",method:"post",params:t})}function k(t){return Object(n["a"])({url:"/fcs/control/uavs/fly_point",method:"post",data:t})}function _(t){return Object(n["a"])({url:"/fcs/uavaction/locationsetting",method:"post",params:t})}function w(t){return Object(n["a"])({url:"/fcs/uavaction/gimbalsetting",method:"post",params:t})}function O(t){return Object(n["a"])({url:"/fcs/control/uavs/camera_set_zoom",method:"post",data:t})}function D(t){return Object(n["a"])({url:"/fcs/control/uavs/camera_aim",method:"post",data:t})}function j(t){return Object(n["a"])({url:"/fcs/control/uavs/camera_mode_switch",method:"post",data:t})}function M(t){return Object(n["a"])({url:"/fcs/control/uavs/camera_take_photo",method:"post",data:t})}function x(t){return Object(n["a"])({url:"/fcs/control/uavs/camera_recording",method:"post",data:t})}function S(t){return Object(n["a"])({url:"/fcs/rcsetting",method:"post",params:t})}function B(t){return Object(n["a"])({url:"/fcs/control/uav_missions/perform_task",method:"post",data:t})}function T(t){return Object(n["a"])({url:"/fcs/task_manage/uav_task/task_progress/"+Object(i["g"])(t),method:"get"})}function P(t){return Object(n["a"])({url:"/fcs/task_manage/uav_task/task_log_info/"+Object(i["g"])(t),method:"get"})}function Z(t){return Object(n["a"])({url:"/fcs/control/uavs/uav_manual",method:"post",data:t})}function N(t,e){return Object(n["a"])({url:"/fcs/task_manage/uav_task/ir_dect_results/update_status/"+Object(i["g"])(t)+"/"+Object(i["g"])(e),method:"PATCH"})}},"7cdd":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"speedNumber"},[n("div",{staticClass:"top df-aj-b"},[n("div",[t._v(t._s(t.title)),t.tishiMsg?n("span",[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.tishiMsg,placement:"top"}},[n("img",{staticStyle:{width:"20px",height:"20px","vertical-align":"top","margin-left":"5px"},attrs:{src:a("4636")}})])],1):t._e()]),t.isShowInput?n("el-input-number",{attrs:{min:t.min,max:t.max,size:"mini"},on:{change:t.handleChange},model:{value:t.num,callback:function(e){t.num=e},expression:"num"}}):t._e()],1),n("div",{staticClass:"bottom df-aj-b"},[n("span",{staticClass:"btn sub",on:{click:t.subHandle}},[t._v("-")]),n("div",[n("el-slider",{attrs:{min:t.min,max:t.max},model:{value:t.num,callback:function(e){t.num=e},expression:"num"}})],1),n("span",{staticClass:"btn add",on:{click:t.addHandle}},[t._v("+")])]),t._t("default")],2)},i=[],s=(a("a9e3"),{name:"speedNumber",props:{title:{type:String,default:""},tishiMsg:{type:String,default:""},min:{type:Number,default:0},max:{type:Number,default:5},data:{type:Number|String,default:null},isShowInput:{type:Boolean,default:!0}},data:function(){return{num:0}},created:function(){this.data&&(this.num=1*this.data)},methods:{handleChange:function(t){},subHandle:function(){this.num<=this.min||this.num--},addHandle:function(){this.num>=this.max||this.num++}},watch:{num:function(t){this.$emit("change",t)},data:function(t){this.num=1*this.data}}}),o=s,l=(a("9b25"),a("2877")),r=Object(l["a"])(o,n,i,!1,null,"347a5f74",null);e["default"]=r.exports},"7f25":function(t,e,a){"use strict";(function(t){var n=a("b85c"),i=(a("a9e3"),a("d81d"),a("d3b7"),a("4fab")),s=a("33d3");e["a"]={name:"bm-map",props:{ak:{type:String},center:{type:[Object,String]},zoom:{type:Number},minZoom:{type:Number},maxZoom:{type:Number},highResolution:{type:Boolean,default:!0},mapClick:{type:Boolean,default:!0},mapType:{type:String},dragging:{type:Boolean,default:!0},scrollWheelZoom:{type:Boolean,default:!1},doubleClickZoom:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},inertialDragging:{type:Boolean,default:!0},continuousZoom:{type:Boolean,default:!0},pinchToZoom:{type:Boolean,default:!0},autoResize:{type:Boolean,default:!0},theme:{type:Array},mapStyle:{type:Object}},watch:{center:function(t,e){var a=this.map,n=this.zoom;"String"===Object(s["a"])(t)&&t!==e&&a.centerAndZoom(t,n)},"center.lng":function(t,e){var a=this.BMap,n=this.map,i=this.zoom,s=this.center;t!==e&&t>=-180&&t<=180&&n.centerAndZoom(new a.Point(t,s.lat),i)},"center.lat":function(t,e){var a=this.BMap,n=this.map,i=this.zoom,s=this.center;t!==e&&t>=-74&&t<=74&&n.centerAndZoom(new a.Point(s.lng,t),i)},zoom:function(t,e){var a=this.map;t!==e&&t>=3&&t<=19&&a.setZoom(t)},minZoom:function(t){var e=this.map;e.setMinZoom(t)},maxZoom:function(t){var e=this.map;e.setMaxZoom(t)},highResolution:function(){this.reset()},mapClick:function(){this.reset()},mapType:function(e){var a=this.map;a.setMapType(t[e])},dragging:function(t){var e=this.map;t?e.enableDragging():e.disableDragging()},scrollWheelZoom:function(t){var e=this.map;t?e.enableScrollWheelZoom():e.disableScrollWheelZoom()},doubleClickZoom:function(t){var e=this.map;t?e.enableDoubleClickZoom():e.disableDoubleClickZoom()},keyboard:function(t){var e=this.map;t?e.enableKeyboard():e.disableKeyboard()},inertialDragging:function(t){var e=this.map;t?e.enableInertialDragging():e.disableInertialDragging()},continuousZoom:function(t){var e=this.map;t?e.enableContinuousZoom():e.disableContinuousZoom()},pinchToZoom:function(t){var e=this.map;t?e.enablePinchToZoom():e.disablePinchToZoom()},autoResize:function(t){var e=this.map;t?e.enableAutoResize():e.disableAutoResize()},theme:function(t){var e=this.map;e.setMapStyle({styleJson:t})},"mapStyle.features":{handler:function(t,e){var a=this.map,n=this.mapStyle,i=n.style,s=n.styleJson;a.setMapStyle({styleJson:s,features:t,style:i})},deep:!0},"mapStyle.style":function(t,e){var a=this.map,n=this.mapStyle,i=n.features,s=n.styleJson;a.setMapStyle({styleJson:s,features:i,style:t})},"mapStyle.styleJson":{handler:function(t,e){var a=this.map,n=this.mapStyle,i=n.features,s=n.style;a.setMapStyle({styleJson:t,features:i,style:s})},deep:!0},mapStyle:function(t){var e=this.map,a=this.theme;!a&&e.setMapStyle(t)}},methods:{setMapOptions:function(){var e=this.map,a=this.minZoom,n=this.maxZoom,i=this.mapType,s=this.dragging,o=this.scrollWheelZoom,l=this.doubleClickZoom,r=this.keyboard,c=this.inertialDragging,u=this.continuousZoom,d=this.pinchToZoom,m=this.autoResize;a&&e.setMinZoom(a),n&&e.setMaxZoom(n),i&&e.setMapType(t[i]),s?e.enableDragging():e.disableDragging(),o?e.enableScrollWheelZoom():e.disableScrollWheelZoom(),l?e.enableDoubleClickZoom():e.disableDoubleClickZoom(),r?e.enableKeyboard():e.disableKeyboard(),c?e.enableInertialDragging():e.disableInertialDragging(),u?e.enableContinuousZoom():e.disableContinuousZoom(),d?e.enablePinchToZoom():e.disablePinchToZoom(),m?e.enableAutoResize():e.disableAutoResize()},init:function(t){if(!this.map){var e,a=this.$refs.view,s=Object(n["a"])(this.$slots.default||[]);try{for(s.s();!(e=s.n()).done;){var o=e.value;o.componentOptions&&"bm-view"===o.componentOptions.tag&&(this.hasBmView=!0,a=o.elm)}}catch(p){s.e(p)}finally{s.f()}var l=new t.Map(a,{enableHighResolution:this.highResolution,enableMapClick:this.mapClick});this.map=l;var r=this.setMapOptions,c=this.zoom,u=this.getCenterPoint,d=this.theme,m=this.mapStyle;d?l.setMapStyle({styleJson:d}):l.setMapStyle(m),r(),i["a"].call(this,l),l.reset(),l.centerAndZoom(u(),c),this.$emit("ready",{BMap:t,map:l})}},getCenterPoint:function(){var t=this.center,e=this.BMap;switch(Object(s["a"])(t)){case"String":return t;case"Object":return new e.Point(t.lng,t.lat);default:return new e.Point}},initMap:function(t){this.BMap=t,this.init(t)},getMapScript:function(){if(t.BMap)return t.BMap._preloader?t.BMap._preloader:Promise.resolve(t.BMap);var e=this.ak||this._BMap().ak;return t.BMap={},t.BMap._preloader=new Promise((function(a,n){t._initBaiduMap=function(){a(t.BMap),t.document.body.removeChild(i),t.BMap._preloader=null,t._initBaiduMap=null};var i=document.createElement("script");t.document.body.appendChild(i),i.src="https://api.map.baidu.com/api?v=2.0&ak=".concat(e,"&callback=_initBaiduMap")})),t.BMap._preloader},reset:function(){var t=this.getMapScript,e=this.initMap;t().then(e)}},mounted:function(){this.reset()},data:function(){return{hasBmView:!1}}}}).call(this,a("c8ba"))},"9b25":function(t,e,a){"use strict";a("2533")},b5dd:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap"},[a("div",{staticClass:"top"},[a("div",{staticClass:"left"},[a("el-button",{attrs:{type:"primary"},on:{click:t.newTask}},[t._v("新建任务")]),a("el-button",[t._v("导入任务")])],1),a("div",{staticClass:"right"},[a("div",{staticClass:"input"},[a("el-input",{attrs:{placeholder:"请搜索任务名称",clearable:""},model:{value:t.taskName,callback:function(e){t.taskName=e},expression:"taskName"}}),a("i",{staticClass:"searchBtn el-icon-search"})],1),a("div",{staticClass:"label"},[t._v("任务站点：")]),a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:t.queryList},model:{value:t.queryParams.siteID,callback:function(e){t.$set(t.queryParams,"siteID",e)},expression:"queryParams.siteID"}},t._l(t.siteOptions,(function(t){return a("el-option",{key:t.siteID,attrs:{label:t.siteName,value:t.siteID}})})),1)],1)]),a("div",{staticClass:"con"},[a("div",{staticClass:"routeList"},[a("el-collapse",{attrs:{accordion:""},on:{change:t.handleChange},model:{value:t.activeRoute,callback:function(e){t.activeRoute=e},expression:"activeRoute"}},[t._l(t.routeList,(function(e,n){return a("el-collapse-item",{key:e.id,attrs:{title:e.missionName,name:e.missionID}},[a("div",{staticClass:"cell"},[a("span",[t._v("创建人：")]),a("span",[t._v(t._s(e.createUser))])]),a("div",{staticClass:"cell"},[a("span",[t._v("更新人：")]),a("span",[t._v(t._s(e.updateUser))])]),a("div",{staticClass:"cell"},[a("span",[t._v("创建时间：")]),a("span",[t._v(t._s(e.createTime))])]),a("div",{staticClass:"cell"},[a("span",[t._v("更新时间：")]),a("span",[t._v(t._s(e.updateTime))])]),a("div",{staticClass:"btns"},[a("i",{staticClass:"iconBtn edit",attrs:{title:"编辑"}}),a("i",{staticClass:"iconBtn copy",attrs:{title:"复制"}}),a("i",{staticClass:"iconBtn download",attrs:{title:"导出"}}),a("i",{staticClass:"iconBtn delete",attrs:{title:"删除"}})])])})),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.queryParams.pageIndex,limit:t.queryParams.pageSize},on:{"update:page":function(e){return t.$set(t.queryParams,"pageIndex",e)},"update:limit":function(e){return t.$set(t.queryParams,"pageSize",e)},pagination:t.queryList}})],2)],1),a("div",{staticClass:"mapWrap"},[a("ul",{staticClass:"drawing-panel"},[a("li",{staticClass:"bmap-btn bmap-polyline",attrs:{id:"polyline"},on:{click:function(e){return t.draw("polyline")}}}),a("li",{staticClass:"bmap-btn bmap-rectangle",attrs:{id:"rectangle"},on:{click:function(e){return t.draw("rectangle")}}}),a("li",{staticClass:"bmap-btn bmap-polygon",attrs:{id:"polygon"},on:{click:function(e){return t.draw("polygon")}}}),a("li",{staticClass:"bmap-btn bmap-circle",attrs:{id:"circle"},on:{click:function(e){return t.draw("circle")}}})]),a("div",{staticClass:"allmap",staticStyle:{width:"100%",height:"100%"},attrs:{id:"container"}})]),a("div",{staticClass:"routeDetail",class:{active:t.showDetail}},[a("div",{staticClass:"title"},[a("div",[a("i",{staticClass:"el-icon-close",staticStyle:{cursor:"pointer"},on:{click:t.close}}),t._v(" "+t._s(t.saveData.missionName)+" ")]),t._m(0)]),a("div",{staticClass:"con"},[t._m(1),a("div",{staticClass:"tabs"},[a("div",{staticStyle:{"text-align":"center","margin-bottom":"20px"}},[a("el-radio-group",{staticStyle:{"margin-bottom":"0"},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},[a("el-radio-button",{attrs:{label:"1"}},[t._v("航线设置")]),a("el-radio-button",{attrs:{label:"2"}},[t._v("航点设置")])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.currentTab,expression:"currentTab==1"}],staticClass:"tabCon hangxian"},[a("speedNumber",{attrs:{title:"航线高度",data:0,min:0,max:100},on:{change:t.change}}),a("speedNumber",{attrs:{title:"航线速度",data:0,min:0,max:100},on:{change:t.change}}),a("speedNumber",{attrs:{title:"航线云台角",data:0,min:0,max:100},on:{change:t.change}}),a("div",{staticClass:"df"},[a("div",{staticClass:"l mgr-10"},[t._v("航点拍照")]),a("el-switch",{attrs:{"active-color":"#269794","inactive-color":"#ffffff20"},model:{value:t.isPhoto,callback:function(e){t.isPhoto=e},expression:"isPhoto"}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:2==t.currentTab,expression:"currentTab==2"}],staticClass:"tabCon hangdian"},[a("div",{staticClass:"slider"},[a("div",{staticClass:"prev el-icon-arrow-left",class:{disabled:t.current<=0},on:{click:t.prevHandle}}),a("div",{staticClass:"content"},[a("ul",{style:{left:184*-t.current+"px"}},t._l(t.list,(function(e,n){return a("li",{key:n},[t._v(t._s(e.name))])})),0)]),a("div",{staticClass:"next el-icon-arrow-right",class:{disabled:t.current>=t.list.length-1},on:{click:t.nextHandle}})]),a("div",{staticClass:"info"},[a("div",{staticClass:"df-a mgb-20"},[a("div",{staticStyle:{flex:"1"}},[a("div",{staticClass:"df-a mgb-10"},[a("div",{staticClass:"l"},[t._v("经度：")]),a("div",{staticClass:"input"},[a("el-input",{attrs:{placeholder:"经度",size:"small",clearable:""},model:{value:t.data.lng,callback:function(e){t.$set(t.data,"lng",e)},expression:"data.lng"}})],1)]),a("div",{staticClass:"df-a"},[a("div",{staticClass:"l"},[t._v("纬度：")]),a("div",{staticClass:"input"},[a("el-input",{attrs:{placeholder:"纬度",size:"small",clearable:""},model:{value:t.data.lat,callback:function(e){t.$set(t.data,"lat",e)},expression:"data.lat"}})],1)])]),a("div",{staticClass:"fxjp"},t._l(t.directionControl,(function(e,n){return a("i",{key:n,class:[e,t.currentDirection==e?"active":""],on:{click:function(a){return t.directionControlHandle(e)},mousedown:function(a){t.currentDirection=e},mouseup:function(e){t.currentDirection=null}}})})),0)]),a("div",{staticClass:"df-a mgb-10"},[a("div",{staticClass:"l"},[t._v("机身偏航角：")]),a("div",{staticClass:"input"},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]),a("speedNumber",{attrs:{title:"航点速度",data:0,min:0,max:100},on:{change:t.change}}),a("speedNumber",{attrs:{title:"航点高度",data:0,min:0,max:100},on:{change:t.change}}),a("speedNumber",{attrs:{title:"航点云台角",data:0,min:0,max:100},on:{change:t.change}})],1),a("div",{staticClass:"editWrap"},[a("div",{staticClass:"df-aj-b"},[a("span",[t._v("编辑动作(最多8个)")]),a("el-button",{attrs:{type:"primary",size:"small"}},[t._v("编辑动作")])],1),t._m(2)])])])])])]),a("el-dialog",{attrs:{title:t.title,visible:t.open,width:"1080px","append-to-body":""},on:{"update:visible":function(e){t.open=e}}},[t._v(" 基本信息： "),a("el-form",{ref:"form",attrs:{model:t.saveData,rules:t.rules,"label-width":"200px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"站点名称",prop:"siteID"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入站点名称"},model:{value:t.saveData.siteID,callback:function(e){t.$set(t.saveData,"siteID",e)},expression:"saveData.siteID"}},t._l(t.siteOptions,(function(t){return a("el-option",{key:t.siteID,attrs:{label:t.siteName,value:t.siteID}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"航线类型",prop:"missionType"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择航线类型"},model:{value:t.saveData.missionType,callback:function(e){t.$set(t.saveData,"missionType",e)},expression:"saveData.missionType"}},t._l(t.missionTypeOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"航线名称",prop:"missionName"}},[a("el-input",{attrs:{placeholder:"请输入航线名称"},model:{value:t.saveData.missionName,callback:function(e){t.$set(t.saveData,"missionName",e)},expression:"saveData.missionName"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")]),a("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1)],1)],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"btns"},[a("i",{staticClass:"iconBtn delete",attrs:{title:"删除"}}),a("i",{staticClass:"iconBtn save",attrs:{title:"保存"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"top"},[a("div",[a("div",[t._v("1445.7m")]),a("div",[t._v("飞行长度")])]),a("div",[a("div",[t._v("148.6s")]),a("div",[t._v("飞行时间")])]),a("div",[a("div",[t._v("4")]),a("div",[t._v("航点数")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"btns df-aj-b"},[a("div"),a("div",[t._v("拍照")]),a("div")])}],s=(a("7db0"),a("d3b7"),a("d81d"),a("df2b")),o=a("7cdd"),l=a("38c3"),r=a("5575");function c(t){return new Promise((function(e,a){window.init=function(){e(BMapGL)};var n=document.createElement("script");n.type="text/javascript",n.src="http://api.map.baidu.com/api?v=1.0&type=webgl&ak=".concat(t,"&callback=init"),n.onerror=a,document.head.appendChild(n)}))}var u={name:"Index",components:{BaiduMap:s["a"],speedNumber:o["default"]},data:function(){return{styleOptions:{strokeColor:"#5E87DB",fillColor:"#5E87DB",strokeWeight:2,strokeOpacity:1,fillOpacity:.2},labelOptions:{borderRadius:"2px",background:"#FFFBCC",border:"1px solid #E1E1E1",color:"#703A04",fontSize:"12px",letterSpacing:"0",padding:"5px"},drawingManager:null,drawingType:"",value1:"",center:{lng:121.54829,lat:31.18056},zoom:13,ak:"dc0fXhXGxX8gVV1H1DCGtNobAES6ratw",myMap:null,taskName:"",value:"",options:[],activeRoute:null,routeList:[],showDetail:!1,currentDetail:{},currentTab:"1",total:0,queryParams:{pageIndex:1,pageSize:10,siteID:null},projectOptions:[],siteOptions:[],title:"",rules:{missionName:[{required:!0,message:"航线名称不能为空",trigger:"blur"}],siteID:[{required:!0,message:"站点名称不能为空",trigger:"change"}],missionType:[{required:!0,message:"航线类型不能为空",trigger:"change"}]},open:!1,form:{},list:[{name:"航点1",id:"1"},{name:"航点2",id:"2"},{name:"航点3",id:"3"},{name:"航点4",id:"4"}],missionTypeOptions:[{name:"路点巡航",id:"1"},{name:"二维拼图",id:"2"},{name:"倾斜摄影",id:"3"}],saveData:this.getInitData(),current:0,data:{lng:"",lat:""},directionControl:["up","right","down","left"],currentDirection:null,isPhoto:!0}},mounted:function(){var t=this;this.$nextTick((function(){t.initMap()})),this.siteSelectList(),this.queryList("")},methods:{siteSelectList:function(){var t=this;Object(r["z"])().then((function(e){t.siteOptions=e.data.list}))},queryList:function(){var t=this;this.loading=!0,Object(l["b"])(this.queryParams).then((function(e){console.log(">>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",e),t.routeList=e.data.list,t.total=e.data.total,t.loading=!1}))},getClickInfo:function(t){console.log(t.point.lng),console.log(t.point.lat),this.center.lng=t.point.lng,this.center.lat=t.point.lat},handleChange:function(t){t?(this.showDetail=!0,this.saveData=this.routeList.find((function(e){return e.missionID==t}))):this.showDetail=!1},close:function(){this.showDetail=!1,this.activeRoute=null},prevHandle:function(){this.current<=0||this.current--},nextHandle:function(){this.current>=this.list.length-1||this.current++},directionControlHandle:function(t){console.log(t)},change:function(t){console.log(t)},submitForm:function(){var t=this;console.log(123),this.$refs["form"].validate((function(e){e&&(t.showDetail=!0,t.open=!1)}))},initMap:function(){var t=this;c(this.ak).then((function(e){var a=new e.Map("container"),n=new e.Point(114.031761,22.542826);a.centerAndZoom(n,19),a.enableScrollWheelZoom(!0),a.setHeading(64.5),a.setTilt(73),t.getDrawingManager()})).catch((function(t){console.log(t)}))},getDrawingManager:function(){this.drawingManager=new BMapLib.DrawingManager(this.map,{isOpen:!1,enableDrawingTool:!0,drawingToolOptions:{anchor:BMAP_ANCHOR_TOP_RIGHT,offset:new BMap.Size(5,5),drawingModes:[BMAP_DRAWING_RECTANGLE]},rectangleOptions:styleOptions})},draw:function(t){for(var e=document.getElementsByClassName("bmap-btn"),a=0;a<e.length;a++)e[a].style.backgroundPositionY="0";document.getElementById(t).style.backgroundPositionY="-52px",null!=this.drawingManager&&this.drawingManager._isOpen&&this.drawingManager.getDrawingMode()===t?this.drawingManager.close():(this.drawingManager.setDrawingMode(t),this.drawingManager.open())},cancel:function(){this.open=!1},newTask:function(){this.open=!0,this.saveData=this.getInitData(),this.handleChange(""),this.activeRoute=null},getInitData:function(){return{missionName:"",missionType:"",UAVModel:"",siteID:"",cameraModel:"",projectID:"",flightParams:{GCSType:0,cruiseSpeed:0,cruiseAltitude:0,cruiseGimbalPitch:0,cruiseUAVYaw:0,takeOffAltitude:0,longitudinalOverlapRate:0,lateralOverlapRate:0,FRouteRMAngle:0,THMode:1,flightBoundary:[],THModeParam:0,isGPhoto:!1,THPTotal:0,childrenList:[{index:0,flightPath:[{index:0,altitude:0,latitude:0,longitude:0,heading:0,gimbalPitch:0}]}],flightPath:[{index:0,name:"",altitude:0,latitude:0,heading:0,gimbalPitch:0,longitude:0,speed:0,isPhoto:0,actions:[{index:"",action:0,actionParams:0}]}]}}}}},d=u,m=(a("0030"),a("2877")),p=Object(m["a"])(d,n,i,!1,null,"232d4704",null);e["default"]=p.exports},df2b:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.hasBmView?t._e():a("div",{ref:"view",staticStyle:{width:"100%",height:"100%"}}),t._t("default")],2)},i=[],s=a("7f25"),o=s["a"],l=a("2877"),r=Object(l["a"])(o,n,i,!1,null,null,null);e["a"]=r.exports}}]);