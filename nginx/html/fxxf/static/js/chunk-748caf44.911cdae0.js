(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-748caf44","chunk-0d5b0085"],{"00f9":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var r=n("73ec");function i(t,e){var n=t.cfg.el,r=t.attr(),i={dx:r.shadowOffsetX,dy:r.shadowOffsetY,blur:r.shadowBlur,color:r.shadowColor};if(i.dx||i.dy||i.blur||i.color){var o=e.find("filter",i);o||(o=e.addShadow(i)),n.setAttribute("filter","url(#"+o+")")}else n.removeAttribute("filter")}function o(t){var e=t.attr().matrix;if(e){for(var n=t.cfg.el,r=[],i=0;i<9;i+=3)r.push(e[i]+","+e[i+1]);r=r.join(","),-1===r.indexOf("NaN")?n.setAttribute("transform","matrix("+r+")"):console.warn("invalid matrix:",e)}}function a(t,e){var n=t.getClip(),i=t.get("el");if(n){if(n&&!i.hasAttribute("clip-path")){Object(r["a"])(n),n.createPath(e);var o=e.addClip(n);i.setAttribute("clip-path","url(#"+o+")")}}else i.removeAttribute("clip-path")}},"00fd":function(t,e,n){var r=n("9e69"),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;function l(t){var e=o.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(l){}var i=a.call(t);return r&&(e?t[s]=n:delete t[s]),i}t.exports=l},"0253":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(n("16c7"));function i(t){return t&&t.__esModule?t:{default:t}}var o=function(t,e){for(var n=(0,r.default)(t,e),i=[],o=n.length,a=0;a<o;a+=1){i[a]=[];for(var s=0;s<o;s+=1)a===s?i[a][s]=0:0!==n[a][s]&&n[a][s]?i[a][s]=n[a][s]:i[a][s]=1/0}for(var l=0;l<o;l+=1)for(a=0;a<o;a+=1)for(s=0;s<o;s+=1)i[a][s]>i[a][l]+i[l][s]&&(i[a][s]=i[a][l]+i[l][s]);return i},a=o;e.default=a},"0376":function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__awaiter||function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function a(t){try{l(r.next(t))}catch(e){o(e)}}function s(t){try{l(r["throw"](t))}catch(e){o(e)}}function l(t){t.done?n(t.value):i(t.value).then(a,s)}l((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(t){return function(e){return l([t,e])}}function l(s){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,s[0]&&(a=0)),a)try{if(n=1,r&&(i=2&s[0]?r["return"]:s[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(l){s=[6,l],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0}),e.GForceGPULayout=void 0;var a=n("5bc9"),s=n("f271"),l=n("a196"),u=n("6299"),c=n("19d2"),h=n("b3dc"),d=n("3888"),f=function(t){function e(e){var n=t.call(this)||this;return n.maxIteration=1e3,n.edgeStrength=200,n.nodeStrength=1e3,n.coulombDisScale=.005,n.damping=.9,n.maxSpeed=1e3,n.minMovement=.5,n.interval=.02,n.factor=1,n.linkDistance=1,n.gravity=10,n.workerEnabled=!1,n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.updateCfg(e),n}return r(e,t),e.prototype.getDefaultCfg=function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}},e.prototype.execute=function(){return i(this,void 0,void 0,(function(){var t,e,n,r,i;return o(this,(function(o){switch(o.label){case 0:return t=this,e=t.nodes,e&&0!==e.length?(t.width||"undefined"===typeof window||(t.width=window.innerWidth),t.height||"undefined"===typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]),n=t.center,1===e.length?(e[0].x=n[0],e[0].y=n[1],t.onLayoutEnd&&t.onLayoutEnd(),[2]):(r={},i={},e.forEach((function(e,n){(0,s.isNumber)(e.x)||(e.x=Math.random()*t.width),(0,s.isNumber)(e.y)||(e.y=Math.random()*t.height),r[e.id]=e,i[e.id]=n})),t.nodeMap=r,t.nodeIdxMap=i,t.nodeStrength=(0,u.proccessToFunc)(t.nodeStrength,1),t.edgeStrength=(0,u.proccessToFunc)(t.edgeStrength,1),[4,t.run()])):(t.onLayoutEnd&&t.onLayoutEnd(),[2]);case 1:return o.sent(),[2]}}))}))},e.prototype.executeWithWorker=function(t,e){var n=this,r=n.nodes,i=n.center;if(r&&0!==r.length){if(1===r.length)return r[0].x=i[0],void(r[0].y=i[1]);var o={},a={};r.forEach((function(t,e){(0,s.isNumber)(t.x)||(t.x=Math.random()*n.width),(0,s.isNumber)(t.y)||(t.y=Math.random()*n.height),o[t.id]=t,a[t.id]=e})),n.nodeMap=o,n.nodeIdxMap=a,n.nodeStrength=(0,u.proccessToFunc)(n.nodeStrength,1),n.edgeStrength=(0,u.proccessToFunc)(n.edgeStrength,1),n.run(t,e)}},e.prototype.run=function(t,e){return i(this,void 0,void 0,(function(){var n,r,a,f,p,g,m,y,v,b,_,x,w,S,E,C,M,T,A,O,k,I,P,L,N,R,D,F=this;return o(this,(function(j){switch(j.label){case 0:for(n=this,r=n.nodes,a=n.edges,f=n.maxIteration,n.width||"undefined"===typeof window||(n.width=window.innerWidth),n.height||"undefined"===typeof window||(n.height=window.innerHeight),p=r.length,n.linkDistance=(0,u.proccessToFunc)(n.linkDistance),n.edgeStrength=(0,u.proccessToFunc)(n.edgeStrength),g=(0,u.buildTextureDataWithTwoEdgeAttr)(r,a,n.linkDistance,n.edgeStrength),m=g.maxEdgePerVetex,y=g.array,n.degrees=(0,c.getDegree)(r.length,n.nodeIdxMap,a).map((function(t){return t.all})),v=[],b=[],_=[],x=[],w=[],S=[],E=[],n.getMass||(n.getMass=function(t){return n.degrees[n.nodeIdxMap[t.id]]||1}),C=n.gravity,M=n.center,r.forEach((function(t,e){v.push(n.getMass(t)),b.push(n.nodeStrength(t)),n.degrees[e]||(n.degrees[e]=0);var r=[M[0],M[1],C];if(n.getCenter){var i=n.getCenter(t,n.degrees[e]);i&&(0,s.isNumber)(i[0])&&(0,s.isNumber)(i[1])&&(0,s.isNumber)(i[2])&&(r=i)}_.push(r[0]),x.push(r[1]),w.push(r[2]),(0,s.isNumber)(t.fx)&&(0,s.isNumber)(t.fy)?(S.push(t.fx||.001),E.push(t.fy||.001)):(S.push(0),E.push(0))})),T=(0,u.arrayToTextureData)([v,n.degrees,b,S]),A=(0,u.arrayToTextureData)([_,x,w,E]),O=n.workerEnabled,k=O?l.World.create({canvas:t,engineOptions:{supportCompute:!0}}):l.World.create({engineOptions:{supportCompute:!0}}),I=n.onLayoutEnd,P=[],y.forEach((function(t){P.push(t)})),L=0;L<4;L++)P.push(0);return N=k.createKernel(h.gForceBundle).setDispatch([p,1,1]).setBinding({u_Data:y,u_damping:n.damping,u_maxSpeed:n.maxSpeed,u_minMovement:n.minMovement,u_coulombDisScale:n.coulombDisScale,u_factor:n.factor,u_NodeAttributeArray1:T,u_NodeAttributeArray2:A,MAX_EDGE_PER_VERTEX:m,VERTEX_COUNT:p,u_AveMovement:P,u_interval:n.interval}),R=k.createKernel(h.aveMovementBundle).setDispatch([1,1,1]).setBinding({u_Data:y,VERTEX_COUNT:p,u_AveMovement:[0,0,0,0]}),D=function(){return i(F,void 0,void 0,(function(){var i,a,s;return o(this,(function(o){switch(o.label){case 0:i=0,o.label=1;case 1:return i<f?[4,N.execute()]:[3,5];case 2:return o.sent(),R.setBinding({u_Data:N}),[4,R.execute()];case 3:o.sent(),a=Math.max(.02,n.interval-.002*i),N.setBinding({u_interval:a,u_AveMovement:R}),o.label=4;case 4:return i++,[3,1];case 5:return[4,N.getOutput()];case 6:return s=o.sent(),t?e.postMessage({type:d.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:s}):r.forEach((function(t,e){var n=s[4*e],r=s[4*e+1];t.x=n,t.y=r})),I&&I(),[2]}}))}))},[4,D()];case 1:return j.sent(),[2]}}))}))},e.prototype.getType=function(){return"gForce-gpu"},e}(a.Base);e.GForceGPULayout=f},"04b8":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["master_timeout","ignore_unavailable","verbose","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",ignoreUnavailable:"ignore_unavailable",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["repository"]){const t=new n("Missing required parameter: repository");return r(t,l)}if(null==t["snapshot"]){const t=new n("Missing required parameter: snapshot");return r(t,l)}if(null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=t["snapshot"]&&null==t["repository"]){const t=new n("Missing required parameter of the url: repository");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,repository:d,snapshot:f,...p}=t;p=i(o,a,p,u),null==c&&(c="GET");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m="/_snapshot/"+encodeURIComponent(d)+"/"+encodeURIComponent(f);const y={method:c,path:m,body:null,querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},"0519":function(t,e,n){(function(e,n){t.exports=n()})("undefined"!==typeof self&&self,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=36)}([function(t,e,n){"use strict";var r=n(3);e["a"]=function(t){return Array.isArray?Array.isArray(t):Object(r["a"])(t,"Array")}},function(t,e,n){"use strict";var r=function(t){return null!==t&&"function"!==typeof t&&isFinite(t.length)};e["a"]=r},function(t,e,n){"use strict";var r=n(3);e["a"]=function(t){return Object(r["a"])(t,"Function")}},function(t,e,n){"use strict";var r={}.toString,i=function(t,e){return r.call(t)==="[object "+e+"]"};e["a"]=i},function(t,e,n){"use strict";var r=n(3);e["a"]=function(t){return Object(r["a"])(t,"String")}},function(t,e,n){"use strict";var r=n(3),i=function(t){return Object(r["a"])(t,"Number")};e["a"]=i},function(t,e,n){var r=n(38),i=r.mix;function o(t,e,n,r){return void 0===r&&(r="height"),"center"===n?(t[r]+e[r])/2:t.height}t.exports={assign:i,getHeight:o}},function(t,e,n){"use strict";var r=function(t){return null===t||void 0===t};e["a"]=r},function(t,e,n){"use strict";var r=n(0),i=n(12);function o(t,e){var n;if(t)if(Object(r["a"])(t)){for(var o=0,a=t.length;o<a;o++)if(n=e(t[o],o),!1===n)break}else if(Object(i["a"])(t))for(var s in t)if(t.hasOwnProperty(s)&&(n=e(t[s],s),!1===n))break}e["a"]=o},function(t,e,n){"use strict";var r=n(7);e["a"]=function(t){return Object(r["a"])(t)?"":t.toString()}},function(t,e,n){"use strict";var r=n(14),i=n(3),o=function(t){if(!Object(r["a"])(t)||!Object(i["a"])(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;var e=t;while(null!==Object.getPrototypeOf(e))e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e};e["a"]=o},function(t,e,n){var r=n(18),i=function(){function t(t,e){void 0===e&&(e={});var n=this;n.options=e,n.rootNode=r(t,e)}var e=t.prototype;return e.execute=function(){throw new Error("please override this method")},t}();t.exports=i},function(t,e,n){"use strict";e["a"]=function(t){var e=typeof t;return null!==t&&"object"===e||"function"===e}},function(t,e,n){"use strict";var r=n(1),i=function(t,e){return!!Object(r["a"])(t)&&t.indexOf(e)>-1};e["a"]=i},function(t,e,n){"use strict";var r=function(t){return"object"===typeof t&&null!==t};e["a"]=r},function(t,e,n){"use strict";var r=n(8),i=n(2),o=Object.values?function(t){return Object.values(t)}:function(t){var e=[];return Object(r["a"])(t,(function(n,r){Object(i["a"])(t)&&"prototype"===r||e.push(n)})),e};e["a"]=o},function(t,e,n){"use strict";function r(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&void 0!==e[n]&&(t[n]=e[n])}function i(t,e,n,i){return e&&r(t,e),n&&r(t,n),i&&r(t,i),t}e["a"]=i},function(t,e,n){var r=n(35),i=["LR","RL","TB","BT","H","V"],o=["LR","RL","H"],a=function(t){return o.indexOf(t)>-1},s=i[0];t.exports=function(t,e,n){var o=e.direction||s;if(e.isHorizontal=a(o),o&&-1===i.indexOf(o))throw new TypeError("Invalid direction: "+o);if(o===i[0])n(t,e);else if(o===i[1])n(t,e),t.right2left();else if(o===i[2])n(t,e);else if(o===i[3])n(t,e),t.bottom2top();else if(o===i[4]||o===i[5]){var l=r(t,e),u=l.left,c=l.right;n(u,e),n(c,e),e.isHorizontal?u.right2left():u.bottom2top(),c.translate(u.x-c.x,u.y-c.y),t.x=u.x,t.y=c.y;var h=t.getBoundingBox();e.isHorizontal?h.top<0&&t.translate(0,-h.top):h.left<0&&t.translate(-h.left,0)}var d=e.fixedRoot;return void 0===d&&(d=!0),d&&t.translate(-(t.x+t.width/2+t.hgap),-(t.y+t.height/2+t.vgap)),t}},function(t,e,n){var r=n(6),i=18,o=2*i,a=i,s={getId:function(t){return t.id||t.name},getPreH:function(t){return t.preH||0},getPreV:function(t){return t.preV||0},getHGap:function(t){return t.hgap||a},getVGap:function(t){return t.vgap||a},getChildren:function(t){return t.children},getHeight:function(t){return t.height||o},getWidth:function(t){var e=t.label||" ";return t.width||e.split("").length*i}};function l(t,e){var n=this;if(n.vgap=n.hgap=0,t instanceof l)return t;n.data=t;var r=e.getHGap(t),i=e.getVGap(t);return n.preH=e.getPreH(t),n.preV=e.getPreV(t),n.width=e.getWidth(t),n.height=e.getHeight(t),n.width+=n.preH,n.height+=n.preV,n.id=e.getId(t),n.x=n.y=0,n.depth=0,n.children||(n.children=[]),n.addGap(r,i),n}function u(t,e,n){void 0===e&&(e={}),e=r.assign({},s,e);var i,o=new l(t,e),a=[o];if(!n&&!t.collapsed)while(i=a.shift())if(!i.data.collapsed){var u=e.getChildren(i.data),c=u?u.length:0;if(i.children=new Array(c),u&&c)for(var h=0;h<c;h++){var d=new l(u[h],e);i.children[h]=d,a.push(d),d.parent=i,d.depth=i.depth+1}}return o}r.assign(l.prototype,{isRoot:function(){return 0===this.depth},isLeaf:function(){return 0===this.children.length},addGap:function(t,e){var n=this;n.hgap+=t,n.vgap+=e,n.width+=2*t,n.height+=2*e},eachNode:function(t){var e,n=this,r=[n];while(e=r.shift())t(e),r=e.children.concat(r)},DFTraverse:function(t){this.eachNode(t)},BFTraverse:function(t){var e,n=this,r=[n];while(e=r.shift())t(e),r=r.concat(e.children)},getBoundingBox:function(){var t={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode((function(e){t.left=Math.min(t.left,e.x),t.top=Math.min(t.top,e.y),t.width=Math.max(t.width,e.x+e.width),t.height=Math.max(t.height,e.y+e.height)})),t},translate:function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.eachNode((function(n){n.x+=t,n.y+=e,n.x+=n.preH,n.y+=n.preV}))},right2left:function(){var t=this,e=t.getBoundingBox();t.eachNode((function(t){t.x=t.x-2*(t.x-e.left)-t.width})),t.translate(e.width,0)},bottom2top:function(){var t=this,e=t.getBoundingBox();t.eachNode((function(t){t.y=t.y-2*(t.y-e.top)-t.height})),t.translate(0,e.height)}}),t.exports=u},function(t,e,n){"use strict";var r=n(1),i=function(t,e){if(!Object(r["a"])(t))return t;for(var n=[],i=0;i<t.length;i++){var o=t[i];e(o,i)&&n.push(o)}return n};e["a"]=i},function(t,e,n){"use strict";var r=n(7),i=n(21);function o(t,e){var n=Object(i["a"])(e),o=n.length;if(Object(r["a"])(t))return!o;for(var a=0;a<o;a+=1){var s=n[a];if(e[s]!==t[s]||!(s in t))return!1}return!0}e["a"]=o},function(t,e,n){"use strict";var r=n(8),i=n(2),o=Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];return Object(r["a"])(t,(function(n,r){Object(i["a"])(t)&&"prototype"===r||e.push(r)})),e};e["a"]=o},function(t,e,n){"use strict";var r=n(0);e["a"]=function(t){if(Object(r["a"])(t))return t.reduce((function(t,e){return Math.max(t,e)}),t[0])}},function(t,e,n){"use strict";var r=n(0);e["a"]=function(t){if(Object(r["a"])(t))return t.reduce((function(t,e){return Math.min(t,e)}),t[0])}},function(t,e,n){"use strict";var r=n(1),i=Array.prototype.splice,o=function(t,e){if(!Object(r["a"])(t))return[];var n=t?e.length:0,o=n-1;while(n--){var a=void 0,s=e[n];n!==o&&s===a||(a=s,i.call(t,s,1))}return t};e["a"]=o},function(t,e,n){"use strict";var r=n(8),i=n(0),o=n(10),a=function(t,e,n){if(!Object(i["a"])(t)&&!Object(o["a"])(t))return t;var a=n;return Object(r["a"])(t,(function(t,n){a=e(a,t,n)})),a};e["a"]=a},function(t,e,n){"use strict";function r(t,e){void 0===e&&(e=new Map);var n=[];if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++){var o=t[r];e.has(o)||(n.push(o),e.set(o,!0))}return n}e["a"]=r},function(t,e,n){"use strict";e["a"]=a;var r=n(0),i=n(2),o=n(28);function a(t,e){if(!e)return{0:t};if(!Object(i["a"])(e)){var n=Object(r["a"])(e)?e:e.replace(/\s+/g,"").split("*");e=function(t){for(var e="_",r=0,i=n.length;r<i;r++)e+=t[n[r]]&&t[n[r]].toString();return e}}return Object(o["a"])(t,e)}},function(t,e,n){"use strict";var r=n(0),i=n(2),o=Object.prototype.hasOwnProperty;function a(t,e){if(!e||!Object(r["a"])(t))return{};for(var n,a={},s=Object(i["a"])(e)?e:function(t){return t[e]},l=0;l<t.length;l++){var u=t[l];n=s(u),o.call(a,n)?a[n].push(u):a[n]=[u]}return a}e["a"]=a},function(t,e,n){"use strict";e["a"]=function(t,e){return t.hasOwnProperty(e)}},function(t,e,n){"use strict";var r={}.toString,i=function(t){return r.call(t).replace(/^\[object /,"").replace(/]$/,"")};e["a"]=i},function(t,e,n){"use strict";var r=Object.prototype,i=function(t){var e=t&&t.constructor,n="function"===typeof e&&e.prototype||r;return t===n};e["a"]=i},function(t,e,n){"use strict";var r=n(2);e["a"]=function(t,e){if(!Object(r["a"])(t))throw new TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=e?e.apply(this,r):r[0],a=n.cache;if(a.has(o))return a.get(o);var s=t.apply(this,r);return a.set(o,s),s};return n.cache=new Map,n}},function(t,e,n){"use strict";var r=n(14),i=n(1),o=n(4),a=function(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Object(o["a"])(t)||Object(o["a"])(e))return!1;if(Object(i["a"])(t)||Object(i["a"])(e)){if(t.length!==e.length)return!1;for(var n=!0,s=0;s<t.length;s++)if(n=a(t[s],e[s]),!n)break;return n}if(Object(r["a"])(t)||Object(r["a"])(e)){var l=Object.keys(t),u=Object.keys(e);if(l.length!==u.length)return!1;for(n=!0,s=0;s<l.length;s++)if(n=a(t[l[s]],e[l[s]]),!n)break;return n}return!1};e["a"]=a},function(t,e,n){"use strict";var r,i=n(116),o=n(15),a=n(32),s=n(4);e["a"]=Object(a["a"])((function(t,e){void 0===e&&(e={});var n=e.fontSize,i=e.fontFamily,o=e.fontWeight,a=e.fontStyle,l=e.fontVariant;return r||(r=document.createElement("canvas").getContext("2d")),r.font=[a,l,o,n+"px",i].join(" "),r.measureText(Object(s["a"])(t)?t:"").width}),(function(t,e){return void 0===e&&(e={}),Object(i["a"])([t],Object(o["a"])(e)).join("")}))},function(t,e,n){var r=n(18);t.exports=function(t,e){for(var n=r(t.data,e,!0),i=r(t.data,e,!0),o=t.children.length,a=Math.round(o/2),s=e.getSide||function(t,e){return e<a?"right":"left"},l=0;l<o;l++){var u=t.children[l],c=s(u,l);"right"===c?i.children.push(u):n.children.push(u)}return n.eachNode((function(t){t.isRoot()||(t.side="left")})),i.eachNode((function(t){t.isRoot()||(t.side="right")})),{left:n,right:i}}},function(t,e,n){var r={compactBox:n(37),dendrogram:n(120),indented:n(122),mindmap:n(124)};t.exports=r},function(t,e,n){function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,i(t,e)}function i(t,e){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},i(t,e)}var o=n(11),a=n(119),s=n(17),l=n(6),u=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.execute=function(){var t=this;return s(t.rootNode,t.options,a)},e}(o),c={};function h(t,e){return e=l.assign({},c,e),new u(t,e).execute()}t.exports=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(13);n.d(e,"contains",(function(){return r["a"]})),n.d(e,"includes",(function(){return r["a"]}));var i=n(39);n.d(e,"difference",(function(){return i["a"]}));var o=n(40);n.d(e,"find",(function(){return o["a"]}));var a=n(41);n.d(e,"findIndex",(function(){return a["a"]}));var s=n(42);n.d(e,"firstValue",(function(){return s["a"]}));var l=n(43);n.d(e,"flatten",(function(){return l["a"]}));var u=n(44);n.d(e,"flattenDeep",(function(){return u["a"]}));var c=n(45);n.d(e,"getRange",(function(){return c["a"]}));var h=n(46);n.d(e,"pull",(function(){return h["a"]}));var d=n(24);n.d(e,"pullAt",(function(){return d["a"]}));var f=n(25);n.d(e,"reduce",(function(){return f["a"]}));var p=n(47);n.d(e,"remove",(function(){return p["a"]}));var g=n(48);n.d(e,"sortBy",(function(){return g["a"]}));var m=n(49);n.d(e,"union",(function(){return m["a"]}));var y=n(26);n.d(e,"uniq",(function(){return y["a"]}));var v=n(50);n.d(e,"valuesOfKey",(function(){return v["a"]}));var b=n(51);n.d(e,"head",(function(){return b["a"]}));var _=n(52);n.d(e,"last",(function(){return _["a"]}));var x=n(53);n.d(e,"startsWith",(function(){return x["a"]}));var w=n(54);n.d(e,"endsWith",(function(){return w["a"]}));var S=n(19);n.d(e,"filter",(function(){return S["a"]}));var E=n(55);n.d(e,"every",(function(){return E["a"]}));var C=n(56);n.d(e,"some",(function(){return C["a"]}));var M=n(57);n.d(e,"group",(function(){return M["a"]}));var T=n(28);n.d(e,"groupBy",(function(){return T["a"]}));var A=n(27);n.d(e,"groupToMap",(function(){return A["a"]}));var O=n(58);n.d(e,"getWrapBehavior",(function(){return O["a"]}));var k=n(59);n.d(e,"wrapBehavior",(function(){return k["a"]}));var I=n(60);n.d(e,"number2color",(function(){return I["a"]}));var P=n(61);n.d(e,"parseRadius",(function(){return P["a"]}));var L=n(62);n.d(e,"clamp",(function(){return L["a"]}));var N=n(63);n.d(e,"fixedBase",(function(){return N["a"]}));var R=n(64);n.d(e,"isDecimal",(function(){return R["a"]}));var D=n(65);n.d(e,"isEven",(function(){return D["a"]}));var F=n(66);n.d(e,"isInteger",(function(){return F["a"]}));var j=n(67);n.d(e,"isNegative",(function(){return j["a"]}));var B=n(68);n.d(e,"isNumberEqual",(function(){return B["a"]}));var z=n(69);n.d(e,"isOdd",(function(){return z["a"]}));var U=n(70);n.d(e,"isPositive",(function(){return U["a"]}));var G=n(22);n.d(e,"max",(function(){return G["a"]}));var q=n(71);n.d(e,"maxBy",(function(){return q["a"]}));var V=n(23);n.d(e,"min",(function(){return V["a"]}));var H=n(72);n.d(e,"minBy",(function(){return H["a"]}));var W=n(73);n.d(e,"mod",(function(){return W["a"]}));var Y=n(74);n.d(e,"toDegree",(function(){return Y["a"]}));var X=n(75);n.d(e,"toInteger",(function(){return X["a"]}));var J=n(76);n.d(e,"toRadian",(function(){return J["a"]}));var Z=n(77);n.d(e,"forIn",(function(){return Z["a"]}));var K=n(29);n.d(e,"has",(function(){return K["a"]}));var Q=n(78);n.d(e,"hasKey",(function(){return Q["a"]}));var $=n(79);n.d(e,"hasValue",(function(){return $["a"]}));var tt=n(21);n.d(e,"keys",(function(){return tt["a"]}));var et=n(20);n.d(e,"isMatch",(function(){return et["a"]}));var nt=n(15);n.d(e,"values",(function(){return nt["a"]}));var rt=n(80);n.d(e,"lowerCase",(function(){return rt["a"]}));var it=n(81);n.d(e,"lowerFirst",(function(){return it["a"]}));var ot=n(82);n.d(e,"substitute",(function(){return ot["a"]}));var at=n(83);n.d(e,"upperCase",(function(){return at["a"]}));var st=n(84);n.d(e,"upperFirst",(function(){return st["a"]}));var lt=n(30);n.d(e,"getType",(function(){return lt["a"]}));var ut=n(85);n.d(e,"isArguments",(function(){return ut["a"]}));var ct=n(0);n.d(e,"isArray",(function(){return ct["a"]}));var ht=n(1);n.d(e,"isArrayLike",(function(){return ht["a"]}));var dt=n(86);n.d(e,"isBoolean",(function(){return dt["a"]}));var ft=n(87);n.d(e,"isDate",(function(){return ft["a"]}));var pt=n(88);n.d(e,"isError",(function(){return pt["a"]}));var gt=n(2);n.d(e,"isFunction",(function(){return gt["a"]}));var mt=n(89);n.d(e,"isFinite",(function(){return mt["a"]}));var yt=n(7);n.d(e,"isNil",(function(){return yt["a"]}));var vt=n(90);n.d(e,"isNull",(function(){return vt["a"]}));var bt=n(5);n.d(e,"isNumber",(function(){return bt["a"]}));var _t=n(12);n.d(e,"isObject",(function(){return _t["a"]}));var xt=n(14);n.d(e,"isObjectLike",(function(){return xt["a"]}));var wt=n(10);n.d(e,"isPlainObject",(function(){return wt["a"]}));var St=n(31);n.d(e,"isPrototype",(function(){return St["a"]}));var Et=n(91);n.d(e,"isRegExp",(function(){return Et["a"]}));var Ct=n(4);n.d(e,"isString",(function(){return Ct["a"]}));var Mt=n(3);n.d(e,"isType",(function(){return Mt["a"]}));var Tt=n(92);n.d(e,"isUndefined",(function(){return Tt["a"]}));var At=n(93);n.d(e,"isElement",(function(){return At["a"]}));var Ot=n(94);n.d(e,"requestAnimationFrame",(function(){return Ot["a"]}));var kt=n(95);n.d(e,"clearAnimationFrame",(function(){return kt["a"]}));var It=n(96);n.d(e,"augment",(function(){return It["a"]}));var Pt=n(97);n.d(e,"clone",(function(){return Pt["a"]}));var Lt=n(98);n.d(e,"debounce",(function(){return Lt["a"]}));var Nt=n(32);n.d(e,"memoize",(function(){return Nt["a"]}));var Rt=n(99);n.d(e,"deepMix",(function(){return Rt["a"]}));var Dt=n(8);n.d(e,"each",(function(){return Dt["a"]}));var Ft=n(100);n.d(e,"extend",(function(){return Ft["a"]}));var jt=n(101);n.d(e,"indexOf",(function(){return jt["a"]}));var Bt=n(102);n.d(e,"isEmpty",(function(){return Bt["a"]}));var zt=n(33);n.d(e,"isEqual",(function(){return zt["a"]}));var Ut=n(103);n.d(e,"isEqualWith",(function(){return Ut["a"]}));var Gt=n(104);n.d(e,"map",(function(){return Gt["a"]}));var qt=n(105);n.d(e,"mapValues",(function(){return qt["a"]}));var Vt=n(16);n.d(e,"mix",(function(){return Vt["a"]})),n.d(e,"assign",(function(){return Vt["a"]}));var Ht=n(106);n.d(e,"get",(function(){return Ht["a"]}));var Wt=n(107);n.d(e,"set",(function(){return Wt["a"]}));var Yt=n(108);n.d(e,"pick",(function(){return Yt["a"]}));var Xt=n(109);n.d(e,"omit",(function(){return Xt["a"]}));var Jt=n(110);n.d(e,"throttle",(function(){return Jt["a"]}));var Zt=n(111);n.d(e,"toArray",(function(){return Zt["a"]}));var Kt=n(9);n.d(e,"toString",(function(){return Kt["a"]}));var Qt=n(112);n.d(e,"uniqueId",(function(){return Qt["a"]}));var $t=n(113);n.d(e,"noop",(function(){return $t["a"]}));var te=n(114);n.d(e,"identity",(function(){return te["a"]}));var ee=n(115);n.d(e,"size",(function(){return ee["a"]}));var ne=n(34);n.d(e,"measureTextWidth",(function(){return ne["a"]}));var re=n(117);n.d(e,"getEllipsisText",(function(){return re["a"]}));var ie=n(118);n.d(e,"Cache",(function(){return ie["a"]}))},function(t,e,n){"use strict";var r=n(19),i=n(13),o=function(t,e){return void 0===e&&(e=[]),Object(r["a"])(t,(function(t){return!Object(i["a"])(e,t)}))};e["a"]=o},function(t,e,n){"use strict";var r=n(2),i=n(20),o=n(0),a=n(10);function s(t,e){if(!Object(o["a"])(t))return null;var n;if(Object(r["a"])(e)&&(n=e),Object(a["a"])(e)&&(n=function(t){return Object(i["a"])(t,e)}),n)for(var s=0;s<t.length;s+=1)if(n(t[s]))return t[s];return null}e["a"]=s},function(t,e,n){"use strict";function r(t,e,n){void 0===n&&(n=0);for(var r=n;r<t.length;r++)if(e(t[r],r))return r;return-1}e["a"]=r},function(t,e,n){"use strict";var r=n(7),i=n(0),o=function(t,e){for(var n=null,o=0;o<t.length;o++){var a=t[o],s=a[e];if(!Object(r["a"])(s)){n=Object(i["a"])(s)?s[0]:s;break}}return n};e["a"]=o},function(t,e,n){"use strict";var r=n(0),i=function(t){if(!Object(r["a"])(t))return[];for(var e=[],n=0;n<t.length;n++)e=e.concat(t[n]);return e};e["a"]=i},function(t,e,n){"use strict";var r=n(0),i=function(t,e){if(void 0===e&&(e=[]),Object(r["a"])(t))for(var n=0;n<t.length;n+=1)i(t[n],e);else e.push(t);return e};e["a"]=i},function(t,e,n){"use strict";var r=n(0),i=n(22),o=n(23),a=function(t){var e=t.filter((function(t){return!isNaN(t)}));if(!e.length)return{min:0,max:0};if(Object(r["a"])(t[0])){for(var n=[],a=0;a<t.length;a++)n=n.concat(t[a]);e=n}var s=Object(i["a"])(e),l=Object(o["a"])(e);return{min:l,max:s}};e["a"]=a},function(t,e,n){"use strict";var r=Array.prototype,i=r.splice,o=r.indexOf,a=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r++){var a=e[r],s=-1;while((s=o.call(t,a))>-1)i.call(t,s,1)}return t};e["a"]=a},function(t,e,n){"use strict";var r=n(1),i=n(24),o=function(t,e){var n=[];if(!Object(r["a"])(t))return n;var o=-1,a=[],s=t.length;while(++o<s){var l=t[o];e(l,o,t)&&(n.push(l),a.push(o))}return Object(i["a"])(t,a),n};e["a"]=o},function(t,e,n){"use strict";var r=n(0),i=n(4),o=n(2);function a(t,e){var n;if(Object(o["a"])(e))n=function(t,n){return e(t)-e(n)};else{var a=[];Object(i["a"])(e)?a.push(e):Object(r["a"])(e)&&(a=e),n=function(t,e){for(var n=0;n<a.length;n+=1){var r=a[n];if(t[r]>e[r])return 1;if(t[r]<e[r])return-1}return 0}}return t.sort(n),t}e["a"]=a},function(t,e,n){"use strict";var r=n(26),i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(r["a"])([].concat.apply([],t))};e["a"]=i},function(t,e,n){"use strict";var r=n(0),i=n(7);e["a"]=function(t,e){for(var n=[],o={},a=0;a<t.length;a++){var s=t[a],l=s[e];if(!Object(i["a"])(l)){Object(r["a"])(l)||(l=[l]);for(var u=0;u<l.length;u++){var c=l[u];o[c]||(n.push(c),o[c]=!0)}}}return n}},function(t,e,n){"use strict";e["a"]=i;var r=n(1);function i(t){if(Object(r["a"])(t))return t[0]}},function(t,e,n){"use strict";e["a"]=i;var r=n(1);function i(t){if(Object(r["a"])(t)){var e=t;return e[e.length-1]}}},function(t,e,n){"use strict";var r=n(0),i=n(4);function o(t,e){return!(!Object(r["a"])(t)&&!Object(i["a"])(t))&&t[0]===e}e["a"]=o},function(t,e,n){"use strict";var r=n(0),i=n(4);function o(t,e){return!(!Object(r["a"])(t)&&!Object(i["a"])(t))&&t[t.length-1]===e}e["a"]=o},function(t,e,n){"use strict";var r=function(t,e){for(var n=0;n<t.length;n++)if(!e(t[n],n))return!1;return!0};e["a"]=r},function(t,e,n){"use strict";var r=function(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n))return!0;return!1};e["a"]=r},function(t,e,n){"use strict";var r=n(27);e["a"]=function(t,e){if(!e)return[t];var n=Object(r["a"])(t,e),i=[];for(var o in n)i.push(n[o]);return i}},function(t,e,n){"use strict";function r(t,e){return t["_wrap_"+e]}e["a"]=r},function(t,e,n){"use strict";function r(t,e){if(t["_wrap_"+e])return t["_wrap_"+e];var n=function(n){t[e](n)};return t["_wrap_"+e]=n,n}e["a"]=r},function(t,e,n){"use strict";var r={};function i(t){var e=r[t];if(!e){for(var n=t.toString(16),i=n.length;i<6;i++)n="0"+n;e="#"+n,r[t]=e}return e}e["a"]=i},function(t,e,n){"use strict";var r=n(0);function i(t){var e=0,n=0,i=0,o=0;return Object(r["a"])(t)?1===t.length?e=n=i=o=t[0]:2===t.length?(e=i=t[0],n=o=t[1]):3===t.length?(e=t[0],n=o=t[1],i=t[2]):(e=t[0],n=t[1],i=t[2],o=t[3]):e=n=i=o=t,{r1:e,r2:n,r3:i,r4:o}}e["a"]=i},function(t,e,n){"use strict";var r=function(t,e,n){return t<e?e:t>n?n:t};e["a"]=r},function(t,e,n){"use strict";var r=function(t,e){var n=e.toString(),r=n.indexOf(".");if(-1===r)return Math.round(t);var i=n.substr(r+1).length;return i>20&&(i=20),parseFloat(t.toFixed(i))};e["a"]=r},function(t,e,n){"use strict";var r=n(5),i=function(t){return Object(r["a"])(t)&&t%1!==0};e["a"]=i},function(t,e,n){"use strict";var r=n(5),i=function(t){return Object(r["a"])(t)&&t%2===0};e["a"]=i},function(t,e,n){"use strict";var r=n(5),i=Number.isInteger?Number.isInteger:function(t){return Object(r["a"])(t)&&t%1===0};e["a"]=i},function(t,e,n){"use strict";var r=n(5),i=function(t){return Object(r["a"])(t)&&t<0};e["a"]=i},function(t,e,n){"use strict";e["a"]=i;var r=1e-5;function i(t,e,n){return void 0===n&&(n=r),Math.abs(t-e)<n}},function(t,e,n){"use strict";var r=n(5),i=function(t){return Object(r["a"])(t)&&t%2!==0};e["a"]=i},function(t,e,n){"use strict";var r=n(5),i=function(t){return Object(r["a"])(t)&&t>0};e["a"]=i},function(t,e,n){"use strict";var r=n(0),i=n(2);e["a"]=function(t,e){if(Object(r["a"])(t)){for(var n,o=-1/0,a=0;a<t.length;a++){var s=t[a],l=Object(i["a"])(e)?e(s):s[e];l>o&&(n=s,o=l)}return n}}},function(t,e,n){"use strict";var r=n(0),i=n(2);e["a"]=function(t,e){if(Object(r["a"])(t)){for(var n,o=1/0,a=0;a<t.length;a++){var s=t[a],l=Object(i["a"])(e)?e(s):s[e];l<o&&(n=s,o=l)}return n}}},function(t,e,n){"use strict";var r=function(t,e){return(t%e+e)%e};e["a"]=r},function(t,e,n){"use strict";var r=180/Math.PI,i=function(t){return r*t};e["a"]=i},function(t,e,n){"use strict";e["a"]=parseInt},function(t,e,n){"use strict";var r=Math.PI/180,i=function(t){return r*t};e["a"]=i},function(t,e,n){"use strict";var r=n(8);e["a"]=r["a"]},function(t,e,n){"use strict";var r=n(29);e["a"]=r["a"]},function(t,e,n){"use strict";var r=n(13),i=n(15);e["a"]=function(t,e){return Object(r["a"])(Object(i["a"])(t),e)}},function(t,e,n){"use strict";var r=n(9),i=function(t){return Object(r["a"])(t).toLowerCase()};e["a"]=i},function(t,e,n){"use strict";var r=n(9),i=function(t){var e=Object(r["a"])(t);return e.charAt(0).toLowerCase()+e.substring(1)};e["a"]=i},function(t,e,n){"use strict";function r(t,e){return t&&e?t.replace(/\\?\{([^{}]+)\}/g,(function(t,n){return"\\"===t.charAt(0)?t.slice(1):void 0===e[n]?"":e[n]})):t}e["a"]=r},function(t,e,n){"use strict";var r=n(9),i=function(t){return Object(r["a"])(t).toUpperCase()};e["a"]=i},function(t,e,n){"use strict";var r=n(9),i=function(t){var e=Object(r["a"])(t);return e.charAt(0).toUpperCase()+e.substring(1)};e["a"]=i},function(t,e,n){"use strict";var r=n(3),i=function(t){return Object(r["a"])(t,"Arguments")};e["a"]=i},function(t,e,n){"use strict";var r=n(3),i=function(t){return Object(r["a"])(t,"Boolean")};e["a"]=i},function(t,e,n){"use strict";var r=n(3),i=function(t){return Object(r["a"])(t,"Date")};e["a"]=i},function(t,e,n){"use strict";var r=n(3),i=function(t){return Object(r["a"])(t,"Error")};e["a"]=i},function(t,e,n){"use strict";var r=n(5);e["a"]=function(t){return Object(r["a"])(t)&&isFinite(t)}},function(t,e,n){"use strict";var r=function(t){return null===t};e["a"]=r},function(t,e,n){"use strict";var r=n(3),i=function(t){return Object(r["a"])(t,"RegExp")};e["a"]=i},function(t,e,n){"use strict";var r=function(t){return void 0===t};e["a"]=r},function(t,e,n){"use strict";var r=function(t){return t instanceof Element||t instanceof HTMLDocument};e["a"]=r},function(t,e,n){"use strict";function r(t){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)};return e(t)}e["a"]=r},function(t,e,n){"use strict";function r(t){var e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;e(t)}e["a"]=r},function(t,e,n){"use strict";var r=n(16),i=n(2),o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t[0],o=1;o<t.length;o++){var a=t[o];Object(i["a"])(a)&&(a=a.prototype),Object(r["a"])(n.prototype,a)}};e["a"]=o},function(t,e,n){"use strict";var r=n(0),i=function(t){if("object"!==typeof t||null===t)return t;var e;if(Object(r["a"])(t)){e=[];for(var n=0,o=t.length;n<o;n++)"object"===typeof t[n]&&null!=t[n]?e[n]=i(t[n]):e[n]=t[n]}else for(var a in e={},t)"object"===typeof t[a]&&null!=t[a]?e[a]=i(t[a]):e[a]=t[a];return e};e["a"]=i},function(t,e,n){"use strict";function r(t,e,n){var r;return function(){var i=this,o=arguments,a=function(){r=null,n||t.apply(i,o)},s=n&&!r;clearTimeout(r),r=setTimeout(a,e),s&&t.apply(i,o)}}e["a"]=r},function(t,e,n){"use strict";var r=n(0),i=n(10),o=5;function a(t,e,n,s){for(var l in n=n||0,s=s||o,e)if(e.hasOwnProperty(l)){var u=e[l];null!==u&&Object(i["a"])(u)?(Object(i["a"])(t[l])||(t[l]={}),n<s?a(t[l],u,n+1,s):t[l]=e[l]):Object(r["a"])(u)?(t[l]=[],t[l]=t[l].concat(u)):void 0!==u&&(t[l]=u)}}var s=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)a(t,e[r]);return t};e["a"]=s},function(t,e,n){"use strict";var r=n(16),i=n(2),o=function(t,e,n,o){Object(i["a"])(e)||(n=e,e=t,t=function(){});var a=Object.create?function(t,e){return Object.create(t,{constructor:{value:e}})}:function(t,e){function n(){}n.prototype=t;var r=new n;return r.constructor=e,r},s=a(e.prototype,t);return t.prototype=Object(r["a"])(s,t.prototype),t.superclass=a(e.prototype,e),Object(r["a"])(s,n),Object(r["a"])(t,o),t};e["a"]=o},function(t,e,n){"use strict";var r=n(1),i=function(t,e){if(!Object(r["a"])(t))return-1;var n=Array.prototype.indexOf;if(n)return n.call(t,e);for(var i=-1,o=0;o<t.length;o++)if(t[o]===e){i=o;break}return i};e["a"]=i},function(t,e,n){"use strict";var r=n(7),i=n(1),o=n(30),a=n(31),s=Object.prototype.hasOwnProperty;function l(t){if(Object(r["a"])(t))return!0;if(Object(i["a"])(t))return!t.length;var e=Object(o["a"])(t);if("Map"===e||"Set"===e)return!t.size;if(Object(a["a"])(t))return!Object.keys(t).length;for(var n in t)if(s.call(t,n))return!1;return!0}e["a"]=l},function(t,e,n){"use strict";var r=n(2),i=n(33);e["a"]=function(t,e,n){return Object(r["a"])(n)?!!n(t,e):Object(i["a"])(t,e)}},function(t,e,n){"use strict";var r=n(1),i=function(t,e){if(!Object(r["a"])(t))return t;for(var n=[],i=0;i<t.length;i++){var o=t[i];n.push(e(o,i))}return n};e["a"]=i},function(t,e,n){"use strict";var r=n(7),i=n(12),o=function(t){return t};e["a"]=function(t,e){void 0===e&&(e=o);var n={};return Object(i["a"])(t)&&!Object(r["a"])(t)&&Object.keys(t).forEach((function(r){n[r]=e(t[r],r)})),n}},function(t,e,n){"use strict";var r=n(4);e["a"]=function(t,e,n){var i=0,o=Object(r["a"])(e)?e.split("."):e;while(t&&i<o.length)t=t[o[i++]];return void 0===t||i<o.length?n:t}},function(t,e,n){"use strict";var r=n(12),i=n(4),o=n(5);e["a"]=function(t,e,n){var a=t,s=Object(i["a"])(e)?e.split("."):e;return s.forEach((function(t,e){e<s.length-1?(Object(r["a"])(a[t])||(a[t]=Object(o["a"])(s[e+1])?[]:{}),a=a[t]):a[t]=n})),t}},function(t,e,n){"use strict";var r=n(8),i=n(10),o=Object.prototype.hasOwnProperty;e["a"]=function(t,e){if(null===t||!Object(i["a"])(t))return{};var n={};return Object(r["a"])(e,(function(e){o.call(t,e)&&(n[e]=t[e])})),n}},function(t,e,n){"use strict";var r=n(25);e["a"]=function(t,e){return Object(r["a"])(t,(function(t,n,r){return e.includes(r)||(t[r]=n),t}),{})}},function(t,e,n){"use strict";e["a"]=function(t,e,n){var r,i,o,a,s=0;n||(n={});var l=function(){s=!1===n.leading?0:Date.now(),r=null,a=t.apply(i,o),r||(i=o=null)},u=function(){var u=Date.now();s||!1!==n.leading||(s=u);var c=e-(u-s);return i=this,o=arguments,c<=0||c>e?(r&&(clearTimeout(r),r=null),s=u,a=t.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(l,c)),a};return u.cancel=function(){clearTimeout(r),s=0,r=i=o=null},u}},function(t,e,n){"use strict";var r=n(1);e["a"]=function(t){return Object(r["a"])(t)?Array.prototype.slice.call(t):[]}},function(t,e,n){"use strict";var r={};e["a"]=function(t){return t=t||"g",r[t]?r[t]+=1:r[t]=1,t+r[t]}},function(t,e,n){"use strict";e["a"]=function(){}},function(t,e,n){"use strict";e["a"]=function(t){return t}},function(t,e,n){"use strict";e["a"]=o;var r=n(7),i=n(1);function o(t){return Object(r["a"])(t)?0:Object(i["a"])(t)?t.length:Object.keys(t).length}},function(t,e,n){"use strict";e["a"]=r;Object.create;function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}Object.create},function(t,e,n){"use strict";var r=n(4),i=n(9),o=n(34);e["a"]=function(t,e,n,a){void 0===a&&(a="...");var s,l,u=16,c=Object(o["a"])(a,n),h=Object(r["a"])(t)?t:Object(i["a"])(t),d=e,f=[];if(Object(o["a"])(t,n)<=e)return t;while(1){if(s=h.substr(0,u),l=Object(o["a"])(s,n),l+c>d&&l>d)break;if(f.push(s),d-=l,h=h.substr(u),!h)return f.join("")}while(1){if(s=h.substr(0,1),l=Object(o["a"])(s,n),l+c>d)break;if(f.push(s),d-=l,h=h.substr(1),!h)return f.join("")}return""+f.join("")+a}},function(t,e,n){"use strict";var r=function(){function t(){this.map={}}return t.prototype.has=function(t){return void 0!==this.map[t]},t.prototype.get=function(t,e){var n=this.map[t];return void 0===n?e:n},t.prototype.set=function(t,e){this.map[t]=e},t.prototype.clear=function(){this.map={}},t.prototype.delete=function(t){delete this.map[t]},t.prototype.size=function(){return Object.keys(this.map).length},t}();e["a"]=r},function(t,e){function n(t,e,n,r){void 0===r&&(r=[]);var i=this;i.w=t||0,i.h=e||0,i.y=n||0,i.x=0,i.c=r||[],i.cs=r.length,i.prelim=0,i.mod=0,i.shift=0,i.change=0,i.tl=null,i.tr=null,i.el=null,i.er=null,i.msel=0,i.mser=0}function r(t,e,n){n?t.y+=e:t.x+=e,t.children.forEach((function(t){r(t,e,n)}))}function i(t,e){var n=e?t.y:t.x;return t.children.forEach((function(t){n=Math.min(i(t,e),n)})),n}function o(t,e){var n=i(t,e);r(t,-n,e)}function a(t,e,n){n?e.y=t.x:e.x=t.x,t.c.forEach((function(t,r){a(t,e.children[r],n)}))}function s(t,e,n){void 0===n&&(n=0),e?(t.x=n,n+=t.width):(t.y=n,n+=t.height),t.children.forEach((function(t){s(t,e,n)}))}n.fromNode=function(t,e){if(!t)return null;var r=[];return t.children.forEach((function(t){r.push(n.fromNode(t,e))})),e?new n(t.height,t.width,t.x,r):new n(t.width,t.height,t.y,r)},t.exports=function(t,e){void 0===e&&(e={});var r=e.isHorizontal;function i(t){if(0!==t.cs){i(t.c[0]);for(var e=_(f(t.c[0].el),0,null),n=1;n<t.cs;++n){i(t.c[n]);var r=f(t.c[n].er);u(t,n,e),e=_(r,n,e)}m(t),l(t)}else l(t)}function l(t){0===t.cs?(t.el=t,t.er=t,t.msel=t.mser=0):(t.el=t.c[0].el,t.msel=t.c[0].msel,t.er=t.c[t.cs-1].er,t.mser=t.c[t.cs-1].mser)}function u(t,e,n){var r=t.c[e-1],i=r.mod,o=t.c[e],a=o.mod;while(null!==r&&null!==o){f(r)>n.low&&(n=n.nxt);var s=i+r.prelim+r.w-(a+o.prelim);s>0&&(a+=s,c(t,e,n.index,s));var l=f(r),u=f(o);l<=u&&(r=d(r),null!==r&&(i+=r.mod)),l>=u&&(o=h(o),null!==o&&(a+=o.mod))}!r&&o?p(t,e,o,a):r&&!o&&g(t,e,r,i)}function c(t,e,n,r){t.c[e].mod+=r,t.c[e].msel+=r,t.c[e].mser+=r,v(t,e,n,r)}function h(t){return 0===t.cs?t.tl:t.c[0]}function d(t){return 0===t.cs?t.tr:t.c[t.cs-1]}function f(t){return t.y+t.h}function p(t,e,n,r){var i=t.c[0].el;i.tl=n;var o=r-n.mod-t.c[0].msel;i.mod+=o,i.prelim-=o,t.c[0].el=t.c[e].el,t.c[0].msel=t.c[e].msel}function g(t,e,n,r){var i=t.c[e].er;i.tr=n;var o=r-n.mod-t.c[e].mser;i.mod+=o,i.prelim-=o,t.c[e].er=t.c[e-1].er,t.c[e].mser=t.c[e-1].mser}function m(t){t.prelim=(t.c[0].prelim+t.c[0].mod+t.c[t.cs-1].mod+t.c[t.cs-1].prelim+t.c[t.cs-1].w)/2-t.w/2}function y(t,e){e+=t.mod,t.x=t.prelim+e,b(t);for(var n=0;n<t.cs;n++)y(t.c[n],e)}function v(t,e,n,r){if(n!==e-1){var i=e-n;t.c[n+1].shift+=r/i,t.c[e].shift-=r/i,t.c[e].change-=r-r/i}}function b(t){for(var e=0,n=0,r=0;r<t.cs;r++)e+=t.c[r].shift,n+=e+t.c[r].change,t.c[r].mod+=n}function _(t,e,n){while(null!==n&&t>=n.low)n=n.nxt;return{low:t,index:e,nxt:n}}s(t,r);var x=n.fromNode(t,r);return i(x),y(x,0),a(x,t,r),o(t,r),t}},function(t,e,n){function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,i(t,e)}function i(t,e){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},i(t,e)}var o=n(11),a=n(121),s=n(17),l=n(6),u=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.execute=function(){var t=this;return t.rootNode.width=0,s(t.rootNode,t.options,a)},e}(o),c={};function h(t,e){return e=l.assign({},c,e),new u(t,e).execute()}t.exports=h},function(t,e,n){var r=n(6);function i(t,e){void 0===t&&(t=0),void 0===e&&(e=[]);var n=this;n.x=n.y=0,n.leftChild=n.rightChild=null,n.height=0,n.children=e}var o={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function a(t,e,n){n?(e.x=t.x,e.y=t.y):(e.x=t.y,e.y=t.x),t.children.forEach((function(t,r){a(t,e.children[r],n)}))}t.exports=function(t,e){void 0===e&&(e={}),e=r.assign({},o,e);var n,s=0;function l(t){if(!t)return null;t.width=0,t.depth&&t.depth>s&&(s=t.depth);var e=t.children,n=e.length,r=new i(t.height,[]);return e.forEach((function(t,e){var i=l(t);r.children.push(i),0===e&&(r.leftChild=i),e===n-1&&(r.rightChild=i)})),r.originNode=t,r.isLeaf=t.isLeaf(),r}function u(t){if(t.isLeaf||0===t.children.length)t.drawingDepth=s;else{var e=t.children.map((function(t){return u(t)})),n=Math.min.apply(null,e);t.drawingDepth=n-1}return t.drawingDepth}function c(t){t.x=t.drawingDepth*e.rankSep,t.isLeaf?(t.y=0,n&&(t.y=n.y+n.height+e.nodeSep,t.originNode.parent!==n.originNode.parent&&(t.y+=e.subTreeSep)),n=t):(t.children.forEach((function(t){c(t)})),t.y=(t.leftChild.y+t.rightChild.y)/2)}var h=l(t);return u(h),c(h),a(h,t,e.isHorizontal),t}},function(t,e,n){function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,i(t,e)}function i(t,e){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},i(t,e)}var o=n(11),a=n(123),s=n(35),l=n(6),u=["LR","RL","H"],c=u[0],h=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.execute=function(){var t=this,e=t.options,n=t.rootNode;e.isHorizontal=!0;var r=e.indent,i=void 0===r?20:r,o=e.dropCap,l=void 0===o||o,h=e.direction,d=void 0===h?c:h,f=e.align;if(d&&-1===u.indexOf(d))throw new TypeError("Invalid direction: "+d);if(d===u[0])a(n,i,l,f);else if(d===u[1])a(n,i,l,f),n.right2left();else if(d===u[2]){var p=s(n,e),g=p.left,m=p.right;a(g,i,l,f),g.right2left(),a(m,i,l,f);var y=g.getBoundingBox();m.translate(y.width,0),n.x=m.x-n.width/2}return n},e}(o),d={};function f(t,e){return e=l.assign({},d,e),new h(t,e).execute()}t.exports=f},function(t,e,n){var r=n(6);function i(t,e,n,i,o){var a="function"===typeof n?n(t):n*t.depth;if(!i)try{if(t.id===t.parent.children[0].id)return t.x+=a,void(t.y=e?e.y:0)}catch(u){}if(t.x+=a,e){if(t.y=e.y+r.getHeight(e,t,o),e.parent&&t.parent.id!==e.parent.id){var s=e.parent,l=s.y+r.getHeight(s,t,o);t.y=l>t.y?l:t.y}}else t.y=0}t.exports=function(t,e,n,r){var o=null;t.eachNode((function(t){i(t,o,e,n,r),o=t}))}},function(t,e,n){function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,i(t,e)}function i(t,e){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},i(t,e)}var o=n(11),a=n(125),s=n(17),l=n(6),u=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.execute=function(){var t=this;return s(t.rootNode,t.options,a)},e}(o),c={};function h(t,e){return e=l.assign({},c,e),new u(t,e).execute()}t.exports=h},function(t,e,n){var r=n(6);function i(t,e){var n=0;return t.children.length?t.children.forEach((function(t){n+=i(t,e)})):n=t.height,t._subTreeSep=e.getSubTreeSep(t.data),t.totalHeight=Math.max(t.height,n)+2*t._subTreeSep,t.totalHeight}function o(t){var e=t.children,n=e.length;if(n){e.forEach((function(t){o(t)}));var r=e[0],i=e[n-1],a=i.y-r.y+i.height,s=0;if(e.forEach((function(t){s+=t.totalHeight})),a>t.height)t.y=r.y+a/2-t.height/2;else if(1!==e.length||t.height>s){var l=t.y+(t.height-a)/2-r.y;e.forEach((function(t){t.translate(0,l)}))}else t.y=(r.y+r.height/2+i.y+i.height/2)/2-t.height/2}}var a={getSubTreeSep:function(){return 0}};t.exports=function(t,e){void 0===e&&(e={}),e=r.assign({},a,e),t.parent={x:0,width:0,height:0,y:0},t.BFTraverse((function(t){t.x=t.parent.x+t.parent.width})),t.parent=null,i(t,e),t.startY=0,t.y=t.totalHeight/2-t.height/2,t.eachNode((function(t){var e=t.children,n=e.length;if(n){var r=e[0];if(r.startY=t.startY+t._subTreeSep,1===n)r.y=t.y+t.height/2-r.height/2;else{r.y=r.startY+r.totalHeight/2-r.height/2;for(var i=1;i<n;i++){var o=e[i];o.startY=e[i-1].startY+e[i-1].totalHeight,o.y=o.startY+o.totalHeight/2-o.height/2}}}})),o(t)}}])}))},"0616":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["search_type","max_concurrent_searches","typed_keys","pre_filter_shard_size","pretty","human","error_trace","source","filter_path"],a={searchType:"search_type",maxConcurrentSearches:"max_concurrent_searches",typedKeys:"typed_keys",preFilterShardSize:"pre_filter_shard_size",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["body"]){const t=new n("Missing required parameter: body");return r(t,l)}if(null!=t["type"]&&null==t["index"]){const t=new n("Missing required parameter of the url: index");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,type:f,...p}=t;p=i(o,a,p,u),null==c&&(c=null==h?"GET":"POST");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m=null!=d&&null!=f?"/"+encodeURIComponent(d)+"/"+encodeURIComponent(f)+"/_msearch":null!=d?"/"+encodeURIComponent(d)+"/_msearch":"/_msearch";const y={method:c,path:m,bulkBody:h,querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},"0676":function(t,e,n){function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n("d9e2"),t.exports=r,t.exports.__esModule=!0,t.exports["default"]=t.exports},"0717":function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ForceAtlas2Layout=void 0;var o=n("5bc9"),a=n("f271"),s=i(n("faf9")),l=i(n("431f")),u=i(n("871d")),c=function(t){function e(e){var n=t.call(this)||this;return n.center=[0,0],n.width=300,n.height=300,n.nodes=[],n.edges=[],n.kr=5,n.kg=1,n.mode="normal",n.preventOverlap=!1,n.dissuadeHubs=!1,n.barnesHut=void 0,n.maxIteration=0,n.ks=.1,n.ksmax=10,n.tao=.1,n.onLayoutEnd=function(){},n.prune=void 0,n.updateCfg(e),n}return r(e,t),e.prototype.getDefaultCfg=function(){return{}},e.prototype.execute=function(){var t=this,e=t.nodes,n=t.onLayoutEnd,r=t.prune,i=t.maxIteration;t.width||"undefined"===typeof window||(t.width=window.innerWidth),t.height||"undefined"===typeof window||(t.height=window.innerHeight);for(var o=[],s=e.length,l=0;l<s;l+=1){var u=e[l],c=10,h=10;(0,a.isNumber)(u.size)&&(c=u.size,h=u.size),(0,a.isArray)(u.size)?(isNaN(u.size[0])||(c=u.size[0]),isNaN(u.size[1])||(h=u.size[1])):(0,a.isObject)(u.size)&&(c=u.size.width,h=u.size.height),t.getWidth&&!isNaN(t.getWidth(u))&&(h=t.getWidth(u)),t.getHeight&&!isNaN(t.getHeight(u))&&(c=t.getHeight(u));var d=Math.max(c,h);o.push(d)}void 0===t.barnesHut&&s>250&&(t.barnesHut=!0),void 0===t.prune&&s>100&&(t.prune=!0),0!==this.maxIteration||t.prune?0===this.maxIteration&&r&&(i=100,s<=200&&s>100?i=500:s>200&&(i=950),this.maxIteration=i):(i=250,s<=200&&s>100?i=1e3:s>200&&(i=1200),this.maxIteration=i),t.kr||(t.kr=50,s>100&&s<=500?t.kr=20:s>500&&(t.kr=1)),t.kg||(t.kg=20,s>100&&s<=500?t.kg=10:s>500&&(t.kg=1)),this.nodes=t.updateNodesByForces(o),n()},e.prototype.updateNodesByForces=function(t){for(var e=this,n=e.edges,r=e.maxIteration,i=e.nodes,o=n.filter((function(t){var e=(0,a.getEdgeTerminal)(t,"source"),n=(0,a.getEdgeTerminal)(t,"target");return e!==n})),s=i.length,l=o.length,u=[],c={},h={},d=[],f=0;f<s;f+=1)c[i[f].id]=f,u[f]=0,(void 0===i[f].x||isNaN(i[f].x))&&(i[f].x=1e3*Math.random()),(void 0===i[f].y||isNaN(i[f].y))&&(i[f].y=1e3*Math.random()),d.push({x:i[f].x,y:i[f].y});for(f=0;f<l;f+=1){for(var p=void 0,g=void 0,m=0,y=0,v=0;v<s;v+=1){var b=(0,a.getEdgeTerminal)(o[f],"source"),_=(0,a.getEdgeTerminal)(o[f],"target");i[v].id===b?(p=i[v],m=v):i[v].id===_&&(g=i[v],y=v),h[f]={sourceIdx:m,targetIdx:y}}p&&(u[c[p.id]]+=1),g&&(u[c[g.id]]+=1)}var x=r;if(i=this.iterate(x,c,h,l,u,t),e.prune){for(v=0;v<l;v+=1)u[h[v].sourceIdx]<=1?(i[h[v].sourceIdx].x=i[h[v].targetIdx].x,i[h[v].sourceIdx].y=i[h[v].targetIdx].y):u[h[v].targetIdx]<=1&&(i[h[v].targetIdx].x=i[h[v].sourceIdx].x,i[h[v].targetIdx].y=i[h[v].sourceIdx].y);e.prune=!1,e.barnesHut=!1,x=100,i=this.iterate(x,c,h,l,u,t)}return i},e.prototype.iterate=function(t,e,n,r,i,o){for(var a=this,l=a.nodes,u=a.kr,c=a.preventOverlap,h=a.barnesHut,d=l.length,f=0,p=100,g=t,m=50,y=[],v=[],b=[],_=0;_<d;_+=1)if(y[2*_]=0,y[2*_+1]=0,h){var x={id:_,rx:l[_].x,ry:l[_].y,mass:1,g:u,degree:i[_]};b[_]=new s.default(x)}while(g>0){for(_=0;_<d;_+=1)v[2*_]=y[2*_],v[2*_+1]=y[2*_+1],y[2*_]=0,y[2*_+1]=0;y=this.getAttrForces(g,m,r,e,n,i,o,y),y=h&&(c&&g>m||!c)?this.getOptRepGraForces(y,b,i):this.getRepGraForces(g,m,y,p,o,i);var w=this.updatePos(y,v,f,i);l=w.nodes,f=w.sg,g--,a.tick&&a.tick()}return l},e.prototype.getAttrForces=function(t,e,n,r,i,o,a,s){for(var l=this,u=l.nodes,c=l.preventOverlap,h=l.dissuadeHubs,d=l.mode,f=l.prune,p=0;p<n;p+=1){var g=u[i[p].sourceIdx],m=i[p].sourceIdx,y=u[i[p].targetIdx],v=i[p].targetIdx;if(!f||!(o[m]<=1||o[v]<=1)){var b=[y.x-g.x,y.y-g.y],_=Math.hypot(b[0],b[1]);_=_<1e-4?1e-4:_,b[0]=b[0]/_,b[1]=b[1]/_,c&&t<e&&(_=_-a[m]-a[v]);var x=_,w=x;"linlog"===d&&(x=Math.log(1+_),w=x),h&&(x=_/o[m],w=_/o[v]),c&&t<e&&_<=0?(x=0,w=0):c&&t<e&&_>0&&(x=_,w=_),s[2*r[g.id]]+=x*b[0],s[2*r[y.id]]-=w*b[0],s[2*r[g.id]+1]+=x*b[1],s[2*r[y.id]+1]-=w*b[1]}}return s},e.prototype.getRepGraForces=function(t,e,n,r,i,o){for(var a=this,s=a.nodes,l=a.preventOverlap,u=a.kr,c=a.kg,h=a.center,d=a.prune,f=s.length,p=0;p<f;p+=1){for(var g=p+1;g<f;g+=1)if(!d||!(o[p]<=1||o[g]<=1)){var m=[s[g].x-s[p].x,s[g].y-s[p].y],y=Math.hypot(m[0],m[1]);y=y<1e-4?1e-4:y,m[0]=m[0]/y,m[1]=m[1]/y,l&&t<e&&(y=y-i[p]-i[g]);var v=u*(o[p]+1)*(o[g]+1)/y;l&&t<e&&y<0?v=r*(o[p]+1)*(o[g]+1):l&&t<e&&0===y?v=0:l&&t<e&&y>0&&(v=u*(o[p]+1)*(o[g]+1)/y),n[2*p]-=v*m[0],n[2*g]+=v*m[0],n[2*p+1]-=v*m[1],n[2*g+1]+=v*m[1]}var b=[s[p].x-h[0],s[p].y-h[1]],_=Math.hypot(b[0],b[1]);b[0]=b[0]/_,b[1]=b[1]/_;var x=c*(o[p]+1);n[2*p]-=x*b[0],n[2*p+1]-=x*b[1]}return n},e.prototype.getOptRepGraForces=function(t,e,n){for(var r=this,i=r.nodes,o=r.kg,a=r.center,s=r.prune,c=i.length,h=9e10,d=-9e10,f=9e10,p=-9e10,g=0;g<c;g+=1)s&&n[g]<=1||(e[g].setPos(i[g].x,i[g].y),i[g].x>=d&&(d=i[g].x),i[g].x<=h&&(h=i[g].x),i[g].y>=p&&(p=i[g].y),i[g].y<=f&&(f=i[g].y));var m=Math.max(d-h,p-f),y={xmid:(d+h)/2,ymid:(p+f)/2,length:m,massCenter:a,mass:c},v=new l.default(y),b=new u.default(v);for(g=0;g<c;g+=1)s&&n[g]<=1||e[g].in(v)&&b.insert(e[g]);for(g=0;g<c;g+=1)if(!(s&&n[g]<=1)){e[g].resetForce(),b.updateForce(e[g]),t[2*g]-=e[g].fx,t[2*g+1]-=e[g].fy;var _=[i[g].x-a[0],i[g].y-a[1]],x=Math.hypot(_[0],_[1]);x=x<1e-4?1e-4:x,_[0]=_[0]/x,_[1]=_[1]/x;var w=o*(n[g]+1);t[2*g]-=w*_[0],t[2*g+1]-=w*_[1]}return t},e.prototype.updatePos=function(t,e,n,r){for(var i=this,o=i.nodes,s=i.ks,l=i.tao,u=i.prune,c=i.ksmax,h=o.length,d=[],f=[],p=0,g=0,m=0;m<h;m+=1)if(!(u&&r[m]<=1)){var y=[t[2*m]-e[2*m],t[2*m+1]-e[2*m+1]],v=Math.hypot(y[0],y[1]),b=[t[2*m]+e[2*m],t[2*m+1]+e[2*m+1]],_=Math.hypot(b[0],b[1]);d[m]=v,f[m]=_/2,p+=(r[m]+1)*d[m],g+=(r[m]+1)*f[m]}var x=n;n=l*g/p,0!==x&&(n=n>1.5*x?1.5*x:n);for(m=0;m<h;m+=1)if(!(u&&r[m]<=1)&&(!(0,a.isNumber)(o[m].fx)||!(0,a.isNumber)(o[m].fy))){var w=s*n/(1+n*Math.sqrt(d[m])),S=Math.hypot(t[2*m],t[2*m+1]);S=S<1e-4?1e-4:S;var E=c/S;w=w>E?E:w;var C=w*t[2*m],M=w*t[2*m+1];o[m].x+=C,o[m].y+=M}return{nodes:o,sg:n}},e}(o.Base);e.ForceAtlas2Layout=c},"0765":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n("d9c5")),i=n("dcfe");function o(t){return t&&t.__esModule?t:{default:t}}var a=function(t,e,n){"number"!==typeof e&&(e=1e-6),"number"!==typeof n&&(n=.85);for(var o,a=1,s=0,l=1e3,u=t.nodes,c=void 0===u?[]:u,h=t.edges,d=void 0===h?[]:h,f=c.length,p={},g={},m=0;m<f;++m){var y=c[m],v=y.id;p[v]=1/f,g[v]=1/f}var b=(0,r.default)(t);while(l>0&&a>e){s=0;for(m=0;m<f;++m){y=c[m],v=y.id;if(o=0,0===b[y.id].inDegree)p[v]=0;else{for(var _=(0,i.getNeighbors)(v,d,"source"),x=0;x<_.length;++x){var w=_[x],S=b[w].outDegree;S>0&&(o+=g[w]/S)}p[v]=n*o,s+=p[v]}}s=(1-s)/f,a=0;for(m=0;m<f;++m){y=c[m],v=y.id;o=p[v]+s,a+=Math.abs(o-g[v]),g[v]=o}l-=1}return g},s=a;e.default=s},"077d":function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__awaiter||function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function a(t){try{l(r.next(t))}catch(e){o(e)}}function s(t){try{l(r["throw"](t))}catch(e){o(e)}}function l(t){t.done?n(t.value):i(t.value).then(a,s)}l((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(t){return function(e){return l([t,e])}}function l(s){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,s[0]&&(a=0)),a)try{if(n=1,r&&(i=2&s[0]?r["return"]:s[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(l){s=[6,l],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0}),e.FruchtermanGPULayout=void 0;var a=n("5bc9"),s=n("f271"),l=n("a196"),u=n("6299"),c=n("18fc"),h=n("3888"),d=function(t){function e(e){var n=t.call(this)||this;return n.maxIteration=1e3,n.gravity=10,n.speed=1,n.clustering=!1,n.clusterField="cluster",n.clusterGravity=10,n.workerEnabled=!1,n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.updateCfg(e),n}return r(e,t),e.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}},e.prototype.execute=function(){return i(this,void 0,void 0,(function(){var t,e,n,r,i,a=this;return o(this,(function(o){switch(o.label){case 0:return t=this,e=t.nodes,e&&0!==e.length?(t.width||"undefined"===typeof window||(t.width=window.innerWidth),t.height||"undefined"===typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]),n=t.center,1===e.length?(e[0].x=n[0],e[0].y=n[1],t.onLayoutEnd&&t.onLayoutEnd(),[2]):(r={},i={},e.forEach((function(t,e){(0,s.isNumber)(t.x)||(t.x=Math.random()*a.width),(0,s.isNumber)(t.y)||(t.y=Math.random()*a.height),r[t.id]=t,i[t.id]=e})),t.nodeMap=r,t.nodeIdxMap=i,[4,t.run()])):(t.onLayoutEnd&&t.onLayoutEnd(),[2]);case 1:return o.sent(),[2]}}))}))},e.prototype.executeWithWorker=function(t,e){return i(this,void 0,void 0,(function(){var n,r,i,a,l,u=this;return o(this,(function(o){switch(o.label){case 0:return n=this,r=n.nodes,i=n.center,r&&0!==r.length?1===r.length?(r[0].x=i[0],r[0].y=i[1],[2]):(a={},l={},r.forEach((function(t,e){(0,s.isNumber)(t.x)||(t.x=Math.random()*u.width),(0,s.isNumber)(t.y)||(t.y=Math.random()*u.height),a[t.id]=t,l[t.id]=e})),n.nodeMap=a,n.nodeIdxMap=l,[4,n.run(t,e)]):[2];case 1:return o.sent(),[2]}}))}))},e.prototype.run=function(t,e){return i(this,void 0,void 0,(function(){var n,r,a,d,f,p,g,m,y,v,b,_,x,w,S,E,C,M,T,A,O,k,I,P,L,N,R=this;return o(this,(function(D){switch(D.label){case 0:for(n=this,r=n.nodes,a=n.edges,d=n.maxIteration,f=n.center,p=n.height*n.width,g=Math.sqrt(p)/10,m=p/(r.length+1),y=Math.sqrt(m),v=n.speed,b=n.clustering,_=(0,u.attributesToTextureData)([n.clusterField],r),x=_.array,w=_.count,r.forEach((function(t,e){var n=0,r=0;(0,s.isNumber)(t.fx)&&(0,s.isNumber)(t.fy)&&(n=t.fx||.001,r=t.fy||.001),x[4*e+1]=n,x[4*e+2]=r})),S=r.length,E=(0,u.buildTextureData)(r,a),C=E.maxEdgePerVetex,M=E.array,T=n.workerEnabled,A=T?l.World.create({canvas:t,engineOptions:{supportCompute:!0}}):l.World.create({engineOptions:{supportCompute:!0}}),O=n.onLayoutEnd,k=[],I=0;I<w;I++)k.push(0,0,0,0);return P=A.createKernel(c.fruchtermanBundle).setDispatch([S,1,1]).setBinding({u_Data:M,u_K:y,u_K2:m,u_Gravity:n.gravity,u_ClusterGravity:n.clusterGravity||n.gravity||1,u_Speed:v,u_MaxDisplace:g,u_Clustering:b?1:0,u_Center:f,u_AttributeArray:x,u_ClusterCenters:k,MAX_EDGE_PER_VERTEX:C,VERTEX_COUNT:S}),b&&(L=A.createKernel(c.clusterBundle).setDispatch([w,1,1]).setBinding({u_Data:M,u_NodeAttributes:x,u_ClusterCenters:k,VERTEX_COUNT:S,CLUSTER_COUNT:w})),N=function(){return i(R,void 0,void 0,(function(){var n,i;return o(this,(function(o){switch(o.label){case 0:n=0,o.label=1;case 1:return n<d?[4,P.execute()]:[3,6];case 2:return o.sent(),b?(L.setBinding({u_Data:P}),[4,L.execute()]):[3,4];case 3:o.sent(),P.setBinding({u_ClusterCenters:L}),o.label=4;case 4:P.setBinding({u_MaxDisplace:g*=.99}),o.label=5;case 5:return n++,[3,1];case 6:return[4,P.getOutput()];case 7:return i=o.sent(),t?e.postMessage({type:h.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:i}):r.forEach((function(t,e){var n=i[4*e],r=i[4*e+1];t.x=n,t.y=r})),O&&O(),[2]}}))}))},[4,N()];case 1:return D.sent(),[2]}}))}))},e.prototype.getType=function(){return"fruchterman-gpu"},e}(a.Base);e.FruchtermanGPULayout=d},"07dd":function(t,e,n){"use strict";var r=n("0e21");function i(t,e){this.layers=t.readFields(o,{},e)}function o(t,e,n){if(3===t){var i=new r(n,n.readVarint()+n.pos);i.length&&(e[i.name]=i)}}t.exports=i},"07f4":function(t,e,n){"use strict";var r=n("be7f"),i=4,o=0,a=1,s=2;function l(t){var e=t.length;while(--e>=0)t[e]=0}var u=0,c=1,h=2,d=3,f=258,p=29,g=256,m=g+1+p,y=30,v=19,b=2*m+1,_=15,x=16,w=7,S=256,E=16,C=17,M=18,T=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],A=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],k=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],I=512,P=new Array(2*(m+2));l(P);var L=new Array(2*y);l(L);var N=new Array(I);l(N);var R=new Array(f-d+1);l(R);var D=new Array(p);l(D);var F,j,B,z=new Array(y);function U(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}function G(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function q(t){return t<256?N[t]:N[256+(t>>>7)]}function V(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function H(t,e,n){t.bi_valid>x-n?(t.bi_buf|=e<<t.bi_valid&65535,V(t,t.bi_buf),t.bi_buf=e>>x-t.bi_valid,t.bi_valid+=n-x):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function W(t,e,n){H(t,n[2*e],n[2*e+1])}function Y(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}function X(t){16===t.bi_valid?(V(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}function J(t,e){var n,r,i,o,a,s,l=e.dyn_tree,u=e.max_code,c=e.stat_desc.static_tree,h=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,p=e.stat_desc.max_length,g=0;for(o=0;o<=_;o++)t.bl_count[o]=0;for(l[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<b;n++)r=t.heap[n],o=l[2*l[2*r+1]+1]+1,o>p&&(o=p,g++),l[2*r+1]=o,r>u||(t.bl_count[o]++,a=0,r>=f&&(a=d[r-f]),s=l[2*r],t.opt_len+=s*(o+a),h&&(t.static_len+=s*(c[2*r+1]+a)));if(0!==g){do{o=p-1;while(0===t.bl_count[o])o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[p]--,g-=2}while(g>0);for(o=p;0!==o;o--){r=t.bl_count[o];while(0!==r)i=t.heap[--n],i>u||(l[2*i+1]!==o&&(t.opt_len+=(o-l[2*i+1])*l[2*i],l[2*i+1]=o),r--)}}}function Z(t,e,n){var r,i,o=new Array(_+1),a=0;for(r=1;r<=_;r++)o[r]=a=a+n[r-1]<<1;for(i=0;i<=e;i++){var s=t[2*i+1];0!==s&&(t[2*i]=Y(o[s]++,s))}}function K(){var t,e,n,r,i,o=new Array(_+1);for(n=0,r=0;r<p-1;r++)for(D[r]=n,t=0;t<1<<T[r];t++)R[n++]=r;for(R[n-1]=r,i=0,r=0;r<16;r++)for(z[r]=i,t=0;t<1<<A[r];t++)N[i++]=r;for(i>>=7;r<y;r++)for(z[r]=i<<7,t=0;t<1<<A[r]-7;t++)N[256+i++]=r;for(e=0;e<=_;e++)o[e]=0;t=0;while(t<=143)P[2*t+1]=8,t++,o[8]++;while(t<=255)P[2*t+1]=9,t++,o[9]++;while(t<=279)P[2*t+1]=7,t++,o[7]++;while(t<=287)P[2*t+1]=8,t++,o[8]++;for(Z(P,m+1,o),t=0;t<y;t++)L[2*t+1]=5,L[2*t]=Y(t,5);F=new U(P,T,g+1,m,_),j=new U(L,A,0,y,_),B=new U(new Array(0),O,0,v,w)}function Q(t){var e;for(e=0;e<m;e++)t.dyn_ltree[2*e]=0;for(e=0;e<y;e++)t.dyn_dtree[2*e]=0;for(e=0;e<v;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*S]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function $(t){t.bi_valid>8?V(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function tt(t,e,n,i){$(t),i&&(V(t,n),V(t,~n)),r.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}function et(t,e,n,r){var i=2*e,o=2*n;return t[i]<t[o]||t[i]===t[o]&&r[e]<=r[n]}function nt(t,e,n){var r=t.heap[n],i=n<<1;while(i<=t.heap_len){if(i<t.heap_len&&et(e,t.heap[i+1],t.heap[i],t.depth)&&i++,et(e,r,t.heap[i],t.depth))break;t.heap[n]=t.heap[i],n=i,i<<=1}t.heap[n]=r}function rt(t,e,n){var r,i,o,a,s=0;if(0!==t.last_lit)do{r=t.pending_buf[t.d_buf+2*s]<<8|t.pending_buf[t.d_buf+2*s+1],i=t.pending_buf[t.l_buf+s],s++,0===r?W(t,i,e):(o=R[i],W(t,o+g+1,e),a=T[o],0!==a&&(i-=D[o],H(t,i,a)),r--,o=q(r),W(t,o,n),a=A[o],0!==a&&(r-=z[o],H(t,r,a)))}while(s<t.last_lit);W(t,S,e)}function it(t,e){var n,r,i,o=e.dyn_tree,a=e.stat_desc.static_tree,s=e.stat_desc.has_stree,l=e.stat_desc.elems,u=-1;for(t.heap_len=0,t.heap_max=b,n=0;n<l;n++)0!==o[2*n]?(t.heap[++t.heap_len]=u=n,t.depth[n]=0):o[2*n+1]=0;while(t.heap_len<2)i=t.heap[++t.heap_len]=u<2?++u:0,o[2*i]=1,t.depth[i]=0,t.opt_len--,s&&(t.static_len-=a[2*i+1]);for(e.max_code=u,n=t.heap_len>>1;n>=1;n--)nt(t,o,n);i=l;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],nt(t,o,1),r=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=r,o[2*i]=o[2*n]+o[2*r],t.depth[i]=(t.depth[n]>=t.depth[r]?t.depth[n]:t.depth[r])+1,o[2*n+1]=o[2*r+1]=i,t.heap[1]=i++,nt(t,o,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],J(t,e),Z(o,u,t.bl_count)}function ot(t,e,n){var r,i,o=-1,a=e[1],s=0,l=7,u=4;for(0===a&&(l=138,u=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=e[2*(r+1)+1],++s<l&&i===a||(s<u?t.bl_tree[2*i]+=s:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[2*E]++):s<=10?t.bl_tree[2*C]++:t.bl_tree[2*M]++,s=0,o=i,0===a?(l=138,u=3):i===a?(l=6,u=3):(l=7,u=4))}function at(t,e,n){var r,i,o=-1,a=e[1],s=0,l=7,u=4;for(0===a&&(l=138,u=3),r=0;r<=n;r++)if(i=a,a=e[2*(r+1)+1],!(++s<l&&i===a)){if(s<u)do{W(t,i,t.bl_tree)}while(0!==--s);else 0!==i?(i!==o&&(W(t,i,t.bl_tree),s--),W(t,E,t.bl_tree),H(t,s-3,2)):s<=10?(W(t,C,t.bl_tree),H(t,s-3,3)):(W(t,M,t.bl_tree),H(t,s-11,7));s=0,o=i,0===a?(l=138,u=3):i===a?(l=6,u=3):(l=7,u=4)}}function st(t){var e;for(ot(t,t.dyn_ltree,t.l_desc.max_code),ot(t,t.dyn_dtree,t.d_desc.max_code),it(t,t.bl_desc),e=v-1;e>=3;e--)if(0!==t.bl_tree[2*k[e]+1])break;return t.opt_len+=3*(e+1)+5+5+4,e}function lt(t,e,n,r){var i;for(H(t,e-257,5),H(t,n-1,5),H(t,r-4,4),i=0;i<r;i++)H(t,t.bl_tree[2*k[i]+1],3);at(t,t.dyn_ltree,e-1),at(t,t.dyn_dtree,n-1)}function ut(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return o;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return a;for(e=32;e<g;e++)if(0!==t.dyn_ltree[2*e])return a;return o}l(z);var ct=!1;function ht(t){ct||(K(),ct=!0),t.l_desc=new G(t.dyn_ltree,F),t.d_desc=new G(t.dyn_dtree,j),t.bl_desc=new G(t.bl_tree,B),t.bi_buf=0,t.bi_valid=0,Q(t)}function dt(t,e,n,r){H(t,(u<<1)+(r?1:0),3),tt(t,e,n,!0)}function ft(t){H(t,c<<1,3),W(t,S,P),X(t)}function pt(t,e,n,r){var o,a,l=0;t.level>0?(t.strm.data_type===s&&(t.strm.data_type=ut(t)),it(t,t.l_desc),it(t,t.d_desc),l=st(t),o=t.opt_len+3+7>>>3,a=t.static_len+3+7>>>3,a<=o&&(o=a)):o=a=n+5,n+4<=o&&-1!==e?dt(t,e,n,r):t.strategy===i||a===o?(H(t,(c<<1)+(r?1:0),3),rt(t,P,L)):(H(t,(h<<1)+(r?1:0),3),lt(t,t.l_desc.max_code+1,t.d_desc.max_code+1,l+1),rt(t,t.dyn_ltree,t.dyn_dtree)),Q(t),r&&$(t)}function gt(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(R[n]+g+1)]++,t.dyn_dtree[2*q(e)]++),t.last_lit===t.lit_bufsize-1}e._tr_init=ht,e._tr_stored_block=dt,e._tr_flush_block=pt,e._tr_tally=gt,e._tr_align=ft},"0892":function(t){t.exports=JSON.parse('{"_from":"@elastic/elasticsearch@^5.6.22","_id":"@elastic/elasticsearch@5.6.22","_inBundle":false,"_integrity":"sha512-jg5VnRSFUQREi4gPQ773nKb3t4IaUsdAGJr5AAtOL2Mj2RSVDFKclPONjEMItcsBxDWdhDWZfhaFC/ymjCEQeA==","_location":"/@elastic/elasticsearch","_phantomChildren":{},"_requested":{"type":"range","registry":true,"raw":"@elastic/elasticsearch@^5.6.22","name":"@elastic/elasticsearch","escapedName":"@elastic%2felasticsearch","scope":"@elastic","rawSpec":"^5.6.22","saveSpec":null,"fetchSpec":"^5.6.22"},"_requiredBy":["/@supermap/iclient-common"],"_resolved":"https://registry.npmjs.org/@elastic/elasticsearch/-/elasticsearch-5.6.22.tgz","_shasum":"af2d2c3be539fa3ff47350c4b1df3b0ae664a7fa","_spec":"@elastic/elasticsearch@^5.6.22","_where":"D:\\\\otherWorkspace\\\\奉贤消防巡检系统\\\\fengxian-ui\\\\node_modules\\\\@supermap\\\\iclient-common","author":{"name":"Tomas Della Vedova"},"bugs":{"url":"https://github.com/elastic/elasticsearch-js/issues"},"bundleDependencies":false,"dependencies":{"debug":"^4.1.1","decompress-response":"^4.2.0","into-stream":"^5.1.0","ms":"^2.1.1","once":"^1.4.0","pump":"^3.0.0","secure-json-parse":"^2.1.0"},"deprecated":false,"description":"The official Elasticsearch client for Node.js","devDependencies":{"@types/node":"^12.6.2","convert-hrtime":"^3.0.0","dedent":"^0.7.0","deepmerge":"^4.0.0","dezalgo":"^1.0.3","js-yaml":"^3.13.1","license-checker":"^25.0.1","lolex":"^4.0.1","minimist":"^1.2.0","ora":"^3.4.0","pretty-hrtime":"^1.0.3","rimraf":"^2.6.3","semver":"^6.0.0","simple-git":"^1.110.0","simple-statistics":"^7.0.2","split2":"^3.1.1","standard":"^13.0.2","stoppable":"^1.1.0","tap":"^14.4.1","typescript":"^3.4.5","workq":"^2.1.0"},"engines":{"node":">=8"},"homepage":"http://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/index.html","keywords":["elasticsearch","elastic","kibana","mapping","REST","search","client","index"],"license":"Apache-2.0","main":"index.js","name":"@elastic/elasticsearch","original-author":{"name":"Spencer Alger","company":"Elasticsearch BV"},"repository":{"type":"git","url":"git+https://github.com/elastic/elasticsearch-js.git"},"scripts":{"ci":"npm run license-checker && npm test && npm run test:integration && npm run test:coverage","elasticsearch":"./scripts/es-docker.sh","elasticsearch:xpack":"./scripts/es-docker-platinum.sh","license-checker":"license-checker --production --onlyAllow=\'MIT;Apache-2.0;Apache1.1;ISC;BSD-3-Clause;BSD-2-Clause\'","lint":"standard","lint:fix":"standard --fix","test":"npm run lint && npm run test:unit && npm run test:behavior && npm run test:types","test:behavior":"tap test/behavior/*.test.js -t 300 --no-coverage","test:coverage":"nyc tap test/unit/*.test.js test/behavior/*.test.js -t 300 && nyc report --reporter=text-lcov > coverage.lcov","test:integration":"tap test/integration/index.js -T --no-coverage","test:types":"tsc --project ./test/types/tsconfig.json","test:unit":"tap test/unit/*.test.js -t 300 --no-coverage"},"types":"index.d.ts","version":"5.6.22"}')},"08a0":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["ignore_unavailable","allow_no_indices","expand_wildcards","pretty","human","error_trace","source","filter_path"],a={ignoreUnavailable:"ignore_unavailable",allowNoIndices:"allow_no_indices",expandWildcards:"expand_wildcards",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["body"]){const t=new n("Missing required parameter: body");return r(t,l)}if(null!=t["type"]&&null==t["index"]){const t=new n("Missing required parameter of the url: index");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,type:f,...p}=t;p=i(o,a,p,u),null==c&&(c=null==h?"GET":"POST");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m=null!=d&&null!=f?"/"+encodeURIComponent(d)+"/"+encodeURIComponent(f)+"/_mpercolate":null!=d?"/"+encodeURIComponent(d)+"/_mpercolate":"/_mpercolate";const y={method:c,path:m,body:h||"",querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},"0954":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["timeout","master_timeout","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["name"]){const t=new n("Missing required parameter: name");return r(t,l)}if(null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,name:d,...f}=t;f=i(o,a,f,u),null==c&&(c="DELETE");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g="/_template/"+encodeURIComponent(d);const m={method:c,path:g,body:"",querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},"09da":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){var e,n=null===(e=t.graph().rankdir)||void 0===e?void 0:e.toLowerCase();"lr"!==n&&"rl"!==n||o(t)},i=function(t){var e,n=null===(e=t.graph().rankdir)||void 0===e?void 0:e.toLowerCase();"bt"!==n&&"rl"!==n||s(t),"lr"!==n&&"rl"!==n||(u(t),o(t))},o=function(t){t.nodes().forEach((function(e){a(t.node(e))})),t.edges().forEach((function(e){a(t.edge(e))}))},a=function(t){var e=t.width;t.width=t.height,t.height=e},s=function(t){t.nodes().forEach((function(e){l(t.node(e))})),t.edges().forEach((function(e){var n,r=t.edge(e);null===(n=r.points)||void 0===n||n.forEach((function(t){return l(t)})),r.hasOwnProperty("y")&&l(r)}))},l=function(t){(null===t||void 0===t?void 0:t.y)&&(t.y=-t.y)},u=function(t){t.nodes().forEach((function(e){c(t.node(e))})),t.edges().forEach((function(e){var n,r=t.edge(e);null===(n=r.points)||void 0===n||n.forEach((function(t){return c(t)})),r.hasOwnProperty("x")&&c(r)}))},c=function(t){var e=t.x;t.x=t.y,t.y=e};e.default={adjust:r,undo:i}},"0a3c":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("7908"),i=function(t){var e,n=(0,r.addDummyNode)(t,"root",{},"_root"),i=a(t),l=Math.max.apply(Math,Object.values(i));Math.abs(l)===1/0&&(l=1);var u=l-1,c=2*u+1;t.graph().nestingRoot=n,t.edges().forEach((function(e){t.edge(e).minlen*=c}));var h=s(t)+1;null===(e=t.children())||void 0===e||e.forEach((function(e){o(t,n,c,h,u,i,e)})),t.graph().nodeRankFactor=c},o=function(t,e,n,i,a,s,l){var u=t.children(l);if(null===u||void 0===u?void 0:u.length){var c=(0,r.addBorderNode)(t,"_bt"),h=(0,r.addBorderNode)(t,"_bb"),d=t.node(l);t.setParent(c,l),d.borderTop=c,t.setParent(h,l),d.borderBottom=h,null===u||void 0===u||u.forEach((function(r){o(t,e,n,i,a,s,r);var u=t.node(r),d=u.borderTop?u.borderTop:r,f=u.borderBottom?u.borderBottom:r,p=u.borderTop?i:2*i,g=d!==f?1:a-s[l]+1;t.setEdge(c,d,{minlen:g,weight:p,nestingEdge:!0}),t.setEdge(f,h,{minlen:g,weight:p,nestingEdge:!0})})),t.parent(l)||t.setEdge(e,c,{weight:0,minlen:a+s[l]})}else l!==e&&t.setEdge(e,l,{weight:0,minlen:n})},a=function(t){var e,n={},r=function(e,i){var o=t.children(e);null===o||void 0===o||o.forEach((function(t){return r(t,i+1)})),n[e]=i};return null===(e=t.children())||void 0===e||e.forEach((function(t){return r(t,1)})),n},s=function(t){var e=0;return t.edges().forEach((function(n){e+=t.edge(n).weight})),e},l=function(t){var e=t.graph();e.nestingRoot&&t.removeNode(e.nestingRoot),delete e.nestingRoot,t.edges().forEach((function(e){var n=t.edge(e);n.nestingEdge&&t.removeEdgeObj(e)}))};e.default={run:i,cleanup:l}},"0a4a":function(t,e,n){"use strict";n.r(e),n.d(e,"forceCenter",(function(){return r})),n.d(e,"forceCollide",(function(){return u})),n.d(e,"forceLink",(function(){return d})),n.d(e,"forceManyBody",(function(){return k})),n.d(e,"forceRadial",(function(){return I})),n.d(e,"forceSimulation",(function(){return O})),n.d(e,"forceX",(function(){return P})),n.d(e,"forceY",(function(){return L}));var r=function(t,e){var n,r=1;function i(){var i,o,a=n.length,s=0,l=0;for(i=0;i<a;++i)o=n[i],s+=o.x,l+=o.y;for(s=(s/a-t)*r,l=(l/a-e)*r,i=0;i<a;++i)o=n[i],o.x-=s,o.y-=l}return null==t&&(t=0),null==e&&(e=0),i.initialize=function(t){n=t},i.x=function(e){return arguments.length?(t=+e,i):t},i.y=function(t){return arguments.length?(e=+t,i):e},i.strength=function(t){return arguments.length?(r=+t,i):r},i},i=n("cfa1"),o=function(t){return function(){return t}},a=function(t){return 1e-6*(t()-.5)};function s(t){return t.x+t.vx}function l(t){return t.y+t.vy}var u=function(t){var e,n,r,u=1,c=1;function h(){for(var t,o,h,f,p,g,m,y=e.length,v=0;v<c;++v)for(o=Object(i["a"])(e,s,l).visitAfter(d),t=0;t<y;++t)h=e[t],g=n[h.index],m=g*g,f=h.x+h.vx,p=h.y+h.vy,o.visit(b);function b(t,e,n,i,o){var s=t.data,l=t.r,c=g+l;if(!s)return e>f+c||i<f-c||n>p+c||o<p-c;if(s.index>h.index){var d=f-s.x-s.vx,y=p-s.y-s.vy,v=d*d+y*y;v<c*c&&(0===d&&(d=a(r),v+=d*d),0===y&&(y=a(r),v+=y*y),v=(c-(v=Math.sqrt(v)))/v*u,h.vx+=(d*=v)*(c=(l*=l)/(m+l)),h.vy+=(y*=v)*c,s.vx-=d*(c=1-c),s.vy-=y*c)}}}function d(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function f(){if(e){var r,i,o=e.length;for(n=new Array(o),r=0;r<o;++r)i=e[r],n[i.index]=+t(i,r,e)}}return"function"!==typeof t&&(t=o(null==t?1:+t)),h.initialize=function(t,n){e=t,r=n,f()},h.iterations=function(t){return arguments.length?(c=+t,h):c},h.strength=function(t){return arguments.length?(u=+t,h):u},h.radius=function(e){return arguments.length?(t="function"===typeof e?e:o(+e),f(),h):t},h};function c(t){return t.index}function h(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}var d=function(t){var e,n,r,i,s,l,u=c,d=g,f=o(30),p=1;function g(t){return 1/Math.min(i[t.source.index],i[t.target.index])}function m(r){for(var i=0,o=t.length;i<p;++i)for(var u,c,h,d,f,g,m,y=0;y<o;++y)u=t[y],c=u.source,h=u.target,d=h.x+h.vx-c.x-c.vx||a(l),f=h.y+h.vy-c.y-c.vy||a(l),g=Math.sqrt(d*d+f*f),g=(g-n[y])/g*r*e[y],d*=g,f*=g,h.vx-=d*(m=s[y]),h.vy-=f*m,c.vx+=d*(m=1-m),c.vy+=f*m}function y(){if(r){var o,a,l=r.length,c=t.length,d=new Map(r.map((t,e)=>[u(t,e,r),t]));for(o=0,i=new Array(l);o<c;++o)a=t[o],a.index=o,"object"!==typeof a.source&&(a.source=h(d,a.source)),"object"!==typeof a.target&&(a.target=h(d,a.target)),i[a.source.index]=(i[a.source.index]||0)+1,i[a.target.index]=(i[a.target.index]||0)+1;for(o=0,s=new Array(c);o<c;++o)a=t[o],s[o]=i[a.source.index]/(i[a.source.index]+i[a.target.index]);e=new Array(c),v(),n=new Array(c),b()}}function v(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+d(t[n],n,t)}function b(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+f(t[e],e,t)}return null==t&&(t=[]),m.initialize=function(t,e){r=t,l=e,y()},m.links=function(e){return arguments.length?(t=e,y(),m):t},m.id=function(t){return arguments.length?(u=t,m):u},m.iterations=function(t){return arguments.length?(p=+t,m):p},m.strength=function(t){return arguments.length?(d="function"===typeof t?t:o(+t),v(),m):d},m.distance=function(t){return arguments.length?(f="function"===typeof t?t:o(+t),b(),m):f},m},f={value:()=>{}};function p(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new g(r)}function g(t){this._=t}function m(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function y(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function v(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=f,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}g.prototype=p.prototype={constructor:g,on:function(t,e){var n,r=this._,i=m(t+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!==typeof e)throw new Error("invalid callback: "+e);while(++o<a)if(n=(t=i[o]).type)r[n]=v(r[n],t.name,e);else if(null==e)for(n in r)r[n]=v(r[n],t.name,null);return this}while(++o<a)if((n=(t=i[o]).type)&&(n=y(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new g(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=this._[t],o=0,n=r.length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var b=p,_=n("74f4");const x=1664525,w=1013904223,S=4294967296;var E=function(){let t=1;return()=>(t=(x*t+w)%S)/S};function C(t){return t.x}function M(t){return t.y}var T=10,A=Math.PI*(3-Math.sqrt(5)),O=function(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,l=Object(_["a"])(h),u=b("tick","end"),c=E();function h(){d(),u.call("tick",e),n<r&&(l.stop(),u.call("end",e))}function d(r){var l,u,c=t.length;void 0===r&&(r=1);for(var h=0;h<r;++h)for(n+=(o-n)*i,s.forEach((function(t){t(n)})),l=0;l<c;++l)u=t[l],null==u.fx?u.x+=u.vx*=a:(u.x=u.fx,u.vx=0),null==u.fy?u.y+=u.vy*=a:(u.y=u.fy,u.vy=0);return e}function f(){for(var e,n=0,r=t.length;n<r;++n){if(e=t[n],e.index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=T*Math.sqrt(.5+n),o=n*A;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function p(e){return e.initialize&&e.initialize(t,c),e}return null==t&&(t=[]),f(),e={tick:d,restart:function(){return l.restart(h),e},stop:function(){return l.stop(),e},nodes:function(n){return arguments.length?(t=n,f(),s.forEach(p),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(a=1-t,e):1-a},randomSource:function(t){return arguments.length?(c=t,s.forEach(p),e):c},force:function(t,n){return arguments.length>1?(null==n?s.delete(t):s.set(t,p(n)),e):s.get(t)},find:function(e,n,r){var i,o,a,s,l,u=0,c=t.length;for(null==r?r=1/0:r*=r,u=0;u<c;++u)s=t[u],i=e-s.x,o=n-s.y,a=i*i+o*o,a<r&&(l=s,r=a);return l},on:function(t,n){return arguments.length>1?(u.on(t,n),e):u.on(t)}}},k=function(){var t,e,n,r,s,l=o(-30),u=1,c=1/0,h=.81;function d(n){var o,a=t.length,s=Object(i["a"])(t,C,M).visitAfter(p);for(r=n,o=0;o<a;++o)e=t[o],s.visit(g)}function f(){if(t){var e,n,r=t.length;for(s=new Array(r),e=0;e<r;++e)n=t[e],s[n.index]=+l(n,e,t)}}function p(t){var e,n,r,i,o,a=0,l=0;if(t.length){for(r=i=o=0;o<4;++o)(e=t[o])&&(n=Math.abs(e.value))&&(a+=e.value,l+=n,r+=n*e.x,i+=n*e.y);t.x=r/l,t.y=i/l}else{e=t,e.x=e.data.x,e.y=e.data.y;do{a+=s[e.data.index]}while(e=e.next)}t.value=a}function g(t,i,o,l){if(!t.value)return!0;var d=t.x-e.x,f=t.y-e.y,p=l-i,g=d*d+f*f;if(p*p/h<g)return g<c&&(0===d&&(d=a(n),g+=d*d),0===f&&(f=a(n),g+=f*f),g<u&&(g=Math.sqrt(u*g)),e.vx+=d*t.value*r/g,e.vy+=f*t.value*r/g),!0;if(!(t.length||g>=c)){(t.data!==e||t.next)&&(0===d&&(d=a(n),g+=d*d),0===f&&(f=a(n),g+=f*f),g<u&&(g=Math.sqrt(u*g)));do{t.data!==e&&(p=s[t.data.index]*r/g,e.vx+=d*p,e.vy+=f*p)}while(t=t.next)}}return d.initialize=function(e,r){t=e,n=r,f()},d.strength=function(t){return arguments.length?(l="function"===typeof t?t:o(+t),f(),d):l},d.distanceMin=function(t){return arguments.length?(u=t*t,d):Math.sqrt(u)},d.distanceMax=function(t){return arguments.length?(c=t*t,d):Math.sqrt(c)},d.theta=function(t){return arguments.length?(h=t*t,d):Math.sqrt(h)},d},I=function(t,e,n){var r,i,a,s=o(.1);function l(t){for(var o=0,s=r.length;o<s;++o){var l=r[o],u=l.x-e||1e-6,c=l.y-n||1e-6,h=Math.sqrt(u*u+c*c),d=(a[o]-h)*i[o]*t/h;l.vx+=u*d,l.vy+=c*d}}function u(){if(r){var e,n=r.length;for(i=new Array(n),a=new Array(n),e=0;e<n;++e)a[e]=+t(r[e],e,r),i[e]=isNaN(a[e])?0:+s(r[e],e,r)}}return"function"!==typeof t&&(t=o(+t)),null==e&&(e=0),null==n&&(n=0),l.initialize=function(t){r=t,u()},l.strength=function(t){return arguments.length?(s="function"===typeof t?t:o(+t),u(),l):s},l.radius=function(e){return arguments.length?(t="function"===typeof e?e:o(+e),u(),l):t},l.x=function(t){return arguments.length?(e=+t,l):e},l.y=function(t){return arguments.length?(n=+t,l):n},l},P=function(t){var e,n,r,i=o(.1);function a(t){for(var i,o=0,a=e.length;o<a;++o)i=e[o],i.vx+=(r[o]-i.x)*n[o]*t}function s(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!==typeof t&&(t=o(null==t?0:+t)),a.initialize=function(t){e=t,s()},a.strength=function(t){return arguments.length?(i="function"===typeof t?t:o(+t),s(),a):i},a.x=function(e){return arguments.length?(t="function"===typeof e?e:o(+e),s(),a):t},a},L=function(t){var e,n,r,i=o(.1);function a(t){for(var i,o=0,a=e.length;o<a;++o)i=e[o],i.vy+=(r[o]-i.y)*n[o]*t}function s(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!==typeof t&&(t=o(null==t?0:+t)),a.initialize=function(t){e=t,s()},a.strength=function(t){return arguments.length?(i="function"===typeof t?t:o(+t),s(),a):i},a.y=function(e){return arguments.length?(t="function"===typeof e?e:o(+e),s(),a):t},a}},"0a7c":function(t,e,n){"use strict";const r=n("f654");function i(t){r(t.makeRequest,"Missing makeRequest function"),r(t.ConfigurationError,"Missing ConfigurationError class"),r(t.result,"Missing default result object");const{result:e}=t;t.handleError=i,t.snakeCaseKeys=a;const n={bulk:o("bulk",t),cat:{aliases:o("cat.aliases",t),allocation:o("cat.allocation",t),count:o("cat.count",t),fielddata:o("cat.fielddata",t),health:o("cat.health",t),help:o("cat.help",t),indices:o("cat.indices",t),master:o("cat.master",t),nodeattrs:o("cat.nodeattrs",t),nodes:o("cat.nodes",t),pending_tasks:o("cat.pending_tasks",t),pendingTasks:o("cat.pending_tasks",t),plugins:o("cat.plugins",t),recovery:o("cat.recovery",t),repositories:o("cat.repositories",t),segments:o("cat.segments",t),shards:o("cat.shards",t),snapshots:o("cat.snapshots",t),tasks:o("cat.tasks",t),templates:o("cat.templates",t),thread_pool:o("cat.thread_pool",t),threadPool:o("cat.thread_pool",t)},clear_scroll:o("clear_scroll",t),clearScroll:o("clear_scroll",t),cluster:{allocation_explain:o("cluster.allocation_explain",t),allocationExplain:o("cluster.allocation_explain",t),get_settings:o("cluster.get_settings",t),getSettings:o("cluster.get_settings",t),health:o("cluster.health",t),pending_tasks:o("cluster.pending_tasks",t),pendingTasks:o("cluster.pending_tasks",t),put_settings:o("cluster.put_settings",t),putSettings:o("cluster.put_settings",t),remote_info:o("cluster.remote_info",t),remoteInfo:o("cluster.remote_info",t),reroute:o("cluster.reroute",t),state:o("cluster.state",t),stats:o("cluster.stats",t)},count:o("count",t),count_percolate:o("count_percolate",t),countPercolate:o("count_percolate",t),create:o("create",t),delete:o("delete",t),delete_by_query:o("delete_by_query",t),deleteByQuery:o("delete_by_query",t),delete_script:o("delete_script",t),deleteScript:o("delete_script",t),delete_template:o("delete_template",t),deleteTemplate:o("delete_template",t),exists:o("exists",t),exists_source:o("exists_source",t),existsSource:o("exists_source",t),explain:o("explain",t),field_caps:o("field_caps",t),fieldCaps:o("field_caps",t),field_stats:o("field_stats",t),fieldStats:o("field_stats",t),get:o("get",t),get_script:o("get_script",t),getScript:o("get_script",t),get_source:o("get_source",t),getSource:o("get_source",t),get_template:o("get_template",t),getTemplate:o("get_template",t),index:o("index",t),indices:{analyze:o("indices.analyze",t),clear_cache:o("indices.clear_cache",t),clearCache:o("indices.clear_cache",t),close:o("indices.close",t),create:o("indices.create",t),delete:o("indices.delete",t),delete_alias:o("indices.delete_alias",t),deleteAlias:o("indices.delete_alias",t),delete_template:o("indices.delete_template",t),deleteTemplate:o("indices.delete_template",t),exists:o("indices.exists",t),exists_alias:o("indices.exists_alias",t),existsAlias:o("indices.exists_alias",t),exists_template:o("indices.exists_template",t),existsTemplate:o("indices.exists_template",t),exists_type:o("indices.exists_type",t),existsType:o("indices.exists_type",t),flush:o("indices.flush",t),flush_synced:o("indices.flush_synced",t),flushSynced:o("indices.flush_synced",t),forcemerge:o("indices.forcemerge",t),get:o("indices.get",t),get_alias:o("indices.get_alias",t),getAlias:o("indices.get_alias",t),get_field_mapping:o("indices.get_field_mapping",t),getFieldMapping:o("indices.get_field_mapping",t),get_mapping:o("indices.get_mapping",t),getMapping:o("indices.get_mapping",t),get_settings:o("indices.get_settings",t),getSettings:o("indices.get_settings",t),get_template:o("indices.get_template",t),getTemplate:o("indices.get_template",t),get_upgrade:o("indices.get_upgrade",t),getUpgrade:o("indices.get_upgrade",t),open:o("indices.open",t),put_alias:o("indices.put_alias",t),putAlias:o("indices.put_alias",t),put_mapping:o("indices.put_mapping",t),putMapping:o("indices.put_mapping",t),put_settings:o("indices.put_settings",t),putSettings:o("indices.put_settings",t),put_template:o("indices.put_template",t),putTemplate:o("indices.put_template",t),recovery:o("indices.recovery",t),refresh:o("indices.refresh",t),rollover:o("indices.rollover",t),segments:o("indices.segments",t),shard_stores:o("indices.shard_stores",t),shardStores:o("indices.shard_stores",t),shrink:o("indices.shrink",t),stats:o("indices.stats",t),update_aliases:o("indices.update_aliases",t),updateAliases:o("indices.update_aliases",t),upgrade:o("indices.upgrade",t),validate_query:o("indices.validate_query",t),validateQuery:o("indices.validate_query",t)},info:o("info",t),ingest:{delete_pipeline:o("ingest.delete_pipeline",t),deletePipeline:o("ingest.delete_pipeline",t),get_pipeline:o("ingest.get_pipeline",t),getPipeline:o("ingest.get_pipeline",t),processor_grok:o("ingest.processor_grok",t),processorGrok:o("ingest.processor_grok",t),put_pipeline:o("ingest.put_pipeline",t),putPipeline:o("ingest.put_pipeline",t),simulate:o("ingest.simulate",t)},mget:o("mget",t),mpercolate:o("mpercolate",t),msearch:o("msearch",t),msearch_template:o("msearch_template",t),msearchTemplate:o("msearch_template",t),mtermvectors:o("mtermvectors",t),nodes:{hot_threads:o("nodes.hot_threads",t),hotThreads:o("nodes.hot_threads",t),info:o("nodes.info",t),stats:o("nodes.stats",t)},percolate:o("percolate",t),ping:o("ping",t),put_script:o("put_script",t),putScript:o("put_script",t),put_template:o("put_template",t),putTemplate:o("put_template",t),reindex:o("reindex",t),reindex_rethrottle:o("reindex_rethrottle",t),reindexRethrottle:o("reindex_rethrottle",t),render_search_template:o("render_search_template",t),renderSearchTemplate:o("render_search_template",t),scroll:o("scroll",t),search:o("search",t),search_shards:o("search_shards",t),searchShards:o("search_shards",t),search_template:o("search_template",t),searchTemplate:o("search_template",t),snapshot:{create:o("snapshot.create",t),create_repository:o("snapshot.create_repository",t),createRepository:o("snapshot.create_repository",t),delete:o("snapshot.delete",t),delete_repository:o("snapshot.delete_repository",t),deleteRepository:o("snapshot.delete_repository",t),get:o("snapshot.get",t),get_repository:o("snapshot.get_repository",t),getRepository:o("snapshot.get_repository",t),restore:o("snapshot.restore",t),status:o("snapshot.status",t),verify_repository:o("snapshot.verify_repository",t),verifyRepository:o("snapshot.verify_repository",t)},suggest:o("suggest",t),tasks:{cancel:o("tasks.cancel",t),get:o("tasks.get",t),list:o("tasks.list",t)},termvectors:o("termvectors",t),update:o("update",t),update_by_query:o("update_by_query",t),updateByQuery:o("update_by_query",t)};return n;function i(t,n){return n?n(t,e):Promise.reject(t)}function a(t,e,n,r){for(var i={},o=Object.keys(n),a=0,s=o.length;a<s;a++){var l=o[a];i[e[l]||l]=n[l],-1===t.indexOf(e[l]||l)&&r.push('Client - Unknown parameter: "'+l+'", sending it as query parameter')}return i}}function o(t,e){var r=null;return function(i,o,a){return null===r&&(r=n("bb4b")(`./${t}.js`)(e)),r(i,o,a)}}t.exports=i},"0b16":function(t,e,n){"use strict";var r=n("1985");function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var o=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,s=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,l=["<",">",'"',"`"," ","\r","\n","\t"],u=["{","}","|","\\","^","`"].concat(l),c=["'"].concat(u),h=["%","/","?",";","#"].concat(c),d=["/","?","#"],f=255,p=/^[+a-z0-9A-Z_-]{0,63}$/,g=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=n("4328");function _(t,e,n){if(t&&"object"===typeof t&&t instanceof i)return t;var r=new i;return r.parse(t,e,n),r}function x(t){return"string"===typeof t&&(t=_(t)),t instanceof i?t.format():i.prototype.format.call(t)}function w(t,e){return _(t,!1,!0).resolve(e)}function S(t,e){return t?_(t,!1,!0).resolveObject(e):e}i.prototype.parse=function(t,e,n){if("string"!==typeof t)throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),a=-1!==i&&i<t.indexOf("#")?"?":"#",l=t.split(a),u=/\\/g;l[0]=l[0].replace(u,"/"),t=l.join(a);var _=t;if(_=_.trim(),!n&&1===t.split("#").length){var x=s.exec(_);if(x)return this.path=_,this.href=_,this.pathname=x[1],x[2]?(this.search=x[2],this.query=e?b.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var w=o.exec(_);if(w){w=w[0];var S=w.toLowerCase();this.protocol=S,_=_.substr(w.length)}if(n||w||_.match(/^\/\/[^@/]+@[^@/]+/)){var E="//"===_.substr(0,2);!E||w&&y[w]||(_=_.substr(2),this.slashes=!0)}if(!y[w]&&(E||w&&!v[w])){for(var C,M,T=-1,A=0;A<d.length;A++){var O=_.indexOf(d[A]);-1!==O&&(-1===T||O<T)&&(T=O)}M=-1===T?_.lastIndexOf("@"):_.lastIndexOf("@",T),-1!==M&&(C=_.slice(0,M),_=_.slice(M+1),this.auth=decodeURIComponent(C)),T=-1;for(A=0;A<h.length;A++){O=_.indexOf(h[A]);-1!==O&&(-1===T||O<T)&&(T=O)}-1===T&&(T=_.length),this.host=_.slice(0,T),_=_.slice(T),this.parseHost(),this.hostname=this.hostname||"";var k="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!k)for(var I=this.hostname.split(/\./),P=(A=0,I.length);A<P;A++){var L=I[A];if(L&&!L.match(p)){for(var N="",R=0,D=L.length;R<D;R++)L.charCodeAt(R)>127?N+="x":N+=L[R];if(!N.match(p)){var F=I.slice(0,A),j=I.slice(A+1),B=L.match(g);B&&(F.push(B[1]),j.unshift(B[2])),j.length&&(_="/"+j.join(".")+_),this.hostname=F.join(".");break}}}this.hostname.length>f?this.hostname="":this.hostname=this.hostname.toLowerCase(),k||(this.hostname=r.toASCII(this.hostname));var z=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+z,this.href+=this.host,k&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==_[0]&&(_="/"+_))}if(!m[S])for(A=0,P=c.length;A<P;A++){var G=c[A];if(-1!==_.indexOf(G)){var q=encodeURIComponent(G);q===G&&(q=escape(G)),_=_.split(G).join(q)}}var V=_.indexOf("#");-1!==V&&(this.hash=_.substr(V),_=_.slice(0,V));var H=_.indexOf("?");if(-1!==H?(this.search=_.substr(H),this.query=_.substr(H+1),e&&(this.query=b.parse(this.query)),_=_.slice(0,H)):e&&(this.search="",this.query={}),_&&(this.pathname=_),v[S]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){z=this.pathname||"";var W=this.search||"";this.path=z+W}return this.href=this.format(),this},i.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&"object"===typeof this.query&&Object.keys(this.query).length&&(o=b.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||v[e])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),n=n.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})),a=a.replace("#","%23"),e+i+n+a+r},i.prototype.resolve=function(t){return this.resolveObject(_(t,!1,!0)).format()},i.prototype.resolveObject=function(t){if("string"===typeof t){var e=new i;e.parse(t,!1,!0),t=e}for(var n=new i,r=Object.keys(this),o=0;o<r.length;o++){var a=r[o];n[a]=this[a]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),l=0;l<s.length;l++){var u=s[l];"protocol"!==u&&(n[u]=t[u])}return v[n.protocol]&&n.hostname&&!n.pathname&&(n.pathname="/",n.path=n.pathname),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!v[t.protocol]){for(var c=Object.keys(t),h=0;h<c.length;h++){var d=c[h];n[d]=t[d]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||y[t.protocol])n.pathname=t.pathname;else{var f=(t.pathname||"").split("/");while(f.length&&!(t.host=f.shift()));t.host||(t.host=""),t.hostname||(t.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),n.pathname=f.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var p=n.pathname||"",g=n.search||"";n.path=p+g}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var m=n.pathname&&"/"===n.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),_=b||m||n.host&&t.pathname,x=_,w=n.pathname&&n.pathname.split("/")||[],S=(f=t.pathname&&t.pathname.split("/")||[],n.protocol&&!v[n.protocol]);if(S&&(n.hostname="",n.port=null,n.host&&(""===w[0]?w[0]=n.host:w.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===f[0]?f[0]=t.host:f.unshift(t.host)),t.host=null),_=_&&(""===f[0]||""===w[0])),b)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,w=f;else if(f.length)w||(w=[]),w.pop(),w=w.concat(f),n.search=t.search,n.query=t.query;else if(null!=t.search){if(S){n.host=w.shift(),n.hostname=n.host;var E=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");E&&(n.auth=E.shift(),n.hostname=E.shift(),n.host=n.hostname)}return n.search=t.search,n.query=t.query,null===n.pathname&&null===n.search||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!w.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var C=w.slice(-1)[0],M=(n.host||t.host||w.length>1)&&("."===C||".."===C)||""===C,T=0,A=w.length;A>=0;A--)C=w[A],"."===C?w.splice(A,1):".."===C?(w.splice(A,1),T++):T&&(w.splice(A,1),T--);if(!_&&!x)for(;T--;T)w.unshift("..");!_||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),M&&"/"!==w.join("/").substr(-1)&&w.push("");var O=""===w[0]||w[0]&&"/"===w[0].charAt(0);if(S){n.hostname=O?"":w.length?w.shift():"",n.host=n.hostname;E=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");E&&(n.auth=E.shift(),n.hostname=E.shift(),n.host=n.hostname)}return _=_||n.host&&w.length,_&&!O&&w.unshift(""),w.length>0?n.pathname=w.join("/"):(n.pathname=null,n.path=null),null===n.pathname&&null===n.search||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},i.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)},e.parse=_,e.resolve=w,e.resolveObject=S,e.format=x,e.Url=i},"0c2e":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["local","ignore_unavailable","allow_no_indices","expand_wildcards","flat_settings","include_defaults","pretty","human","error_trace","source","filter_path"],a={ignoreUnavailable:"ignore_unavailable",allowNoIndices:"allow_no_indices",expandWildcards:"expand_wildcards",flatSettings:"flat_settings",includeDefaults:"include_defaults",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["index"]){const t=new n("Missing required parameter: index");return r(t,l)}if(null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=t["feature"]&&null==t["index"]){const t=new n("Missing required parameter of the url: index");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,feature:f,...p}=t;p=i(o,a,p,u),null==c&&(c="GET");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m=null!=d&&null!=f?"/"+encodeURIComponent(d)+"/"+encodeURIComponent(f):"/"+encodeURIComponent(d);const y={method:c,path:m,body:null,querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},"0c41":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["pretty","human","error_trace","source","filter_path"],a={errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["id"]){const t=new n("Missing required parameter: id");return r(t,l)}if(null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,id:d,...f}=t;f=i(o,a,f,u),null==c&&(c="DELETE");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g="/_search/template/"+encodeURIComponent(d);const m={method:c,path:g,body:"",querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},"0c62":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n("8937"),i=function(){function t(t){this.arr=t}return t.prototype.getArr=function(){return this.arr||[]},t.prototype.add=function(e){var n,r=e.arr;if(!(null===(n=this.arr)||void 0===n?void 0:n.length))return new t(r);if(!(null===r||void 0===r?void 0:r.length))return new t(this.arr);if(this.arr.length===r.length){var i=[];for(var o in this.arr)i[o]=this.arr[o]+r[o];return new t(i)}},t.prototype.subtract=function(e){var n,r=e.arr;if(!(null===(n=this.arr)||void 0===n?void 0:n.length))return new t(r);if(!(null===r||void 0===r?void 0:r.length))return new t(this.arr);if(this.arr.length===r.length){var i=[];for(var o in this.arr)i[o]=this.arr[o]-r[o];return new t(i)}},t.prototype.avg=function(e){var n=[];if(0!==e)for(var r in this.arr)n[r]=this.arr[r]/e;return new t(n)},t.prototype.negate=function(){var e=[];for(var n in this.arr)e[n]=-this.arr[n];return new t(e)},t.prototype.squareEuclideanDistance=function(t){var e,n=t.arr;if(!(null===(e=this.arr)||void 0===e?void 0:e.length)||!(null===n||void 0===n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var i in this.arr)r+=Math.pow(this.arr[i]-t.arr[i],2);return r}},t.prototype.euclideanDistance=function(t){var e,n=t.arr;if(!(null===(e=this.arr)||void 0===e?void 0:e.length)||!(null===n||void 0===n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var i in this.arr)r+=Math.pow(this.arr[i]-t.arr[i],2);return Math.sqrt(r)}console.error("The two vectors are unequal in length.")},t.prototype.normalize=function(){var e=[],n=(0,r.clone)(this.arr);n.sort((function(t,e){return t-e}));var i=n[n.length-1],o=n[0];for(var a in this.arr)e[a]=(this.arr[a]-o)/(i-o);return new t(e)},t.prototype.norm2=function(){var t;if(!(null===(t=this.arr)||void 0===t?void 0:t.length))return 0;var e=0;for(var n in this.arr)e+=Math.pow(this.arr[n],2);return Math.sqrt(e)},t.prototype.dot=function(t){var e,n=t.arr;if(!(null===(e=this.arr)||void 0===e?void 0:e.length)||!(null===n||void 0===n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var i in this.arr)r+=this.arr[i]*t.arr[i];return r}console.error("The two vectors are unequal in length.")},t.prototype.equal=function(t){var e,n=t.arr;if((null===(e=this.arr)||void 0===e?void 0:e.length)!==(null===n||void 0===n?void 0:n.length))return!1;for(var r in this.arr)if(this.arr[r]!==n[r])return!1;return!0},t}(),o=i;e.default=o},"0e21":function(t,e,n){"use strict";var r=n("1dfc");function i(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(o,this,e),this.length=this._features.length}function o(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(a(n))}function a(t){var e=null,n=t.readVarint()+t.pos;while(t.pos<n){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}t.exports=i,i.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new r(this._pbf,e,this.extent,this._keys,this._values)}},"0e8fe":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["pretty","human","error_trace","source","filter_path"],a={errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["id"]){const t=new n("Missing required parameter: id");return r(t,l)}if(null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,id:d,...f}=t;f=i(o,a,f,u),null==c&&(c="GET");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g="/_search/template/"+encodeURIComponent(d);const m={method:c,path:g,body:null,querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},"107a":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["ignore_unavailable","allow_no_indices","expand_wildcards","preference","routing","pretty","human","error_trace","source","filter_path"],a={ignoreUnavailable:"ignore_unavailable",allowNoIndices:"allow_no_indices",expandWildcards:"expand_wildcards",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["body"]){const t=new n("Missing required parameter: body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,...f}=t;f=i(o,a,f,u),null==c&&(c="POST");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g=null!=d?"/"+encodeURIComponent(d)+"/_suggest":"/_suggest";const m={method:c,path:g,body:h||"",querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},1183:function(t,e,n){"use strict";n.d(e,"e",(function(){return _})),n.d(e,"b",(function(){return M})),n.d(e,"a",(function(){return j})),n.d(e,"c",(function(){return h})),n.d(e,"d",(function(){return V})),n.d(e,"f",(function(){return r}));var r={};n.r(r),n.d(r,"distance",(function(){return o})),n.d(r,"isNumberEqual",(function(){return a})),n.d(r,"getBBoxByArray",(function(){return s})),n.d(r,"getBBoxRange",(function(){return l})),n.d(r,"piMod",(function(){return u}));var i=n("8937");function o(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}function a(t,e){return Math.abs(t-e)<.001}function s(t,e){var n=Object(i["min"])(t),r=Object(i["min"])(e),o=Object(i["max"])(t),a=Object(i["max"])(e);return{x:n,y:r,width:o-n,height:a-r}}function l(t,e,n,r){return{minX:Object(i["min"])([t,n]),maxX:Object(i["max"])([t,n]),minY:Object(i["min"])([e,r]),maxY:Object(i["max"])([e,r])}}function u(t){return(t+2*Math.PI)%(2*Math.PI)}var c=n("6711"),h={box:function(t,e,n,r){return s([t,n],[e,r])},length:function(t,e,n,r){return o(t,e,n,r)},pointAt:function(t,e,n,r,i){return{x:(1-i)*t+i*n,y:(1-i)*e+i*r}},pointDistance:function(t,e,n,r,i,a){var s=(n-t)*(i-t)+(r-e)*(a-e);if(s<0)return o(t,e,i,a);var l=(n-t)*(n-t)+(r-e)*(r-e);return s>l?o(n,r,i,a):this.pointToLine(t,e,n,r,i,a)},pointToLine:function(t,e,n,r,i,o){var a=[n-t,r-e];if(c["exactEquals"](a,[0,0]))return Math.sqrt((i-t)*(i-t)+(o-e)*(o-e));var s=[-a[1],a[0]];c["normalize"](s,s);var l=[i-t,o-e];return Math.abs(c["dot"](l,s))},tangentAngle:function(t,e,n,r){return Math.atan2(r-e,n-t)}},d=1e-4;function f(t,e,n,r,i,a){var s,l=1/0,u=[n,r],c=20;a&&a>200&&(c=a/10);for(var h=1/c,f=h/10,p=0;p<=c;p++){var g=p*h,m=[i.apply(null,t.concat([g])),i.apply(null,e.concat([g]))],y=o(u[0],u[1],m[0],m[1]);y<l&&(s=g,l=y)}if(0===s)return{x:t[0],y:e[0]};if(1===s){var v=t.length;return{x:t[v-1],y:e[v-1]}}l=1/0;for(p=0;p<32;p++){if(f<d)break;var b=s-f,_=s+f;m=[i.apply(null,t.concat([b])),i.apply(null,e.concat([b]))],y=o(u[0],u[1],m[0],m[1]);if(b>=0&&y<l)s=b,l=y;else{var x=[i.apply(null,t.concat([_])),i.apply(null,e.concat([_]))],w=o(u[0],u[1],x[0],x[1]);_<=1&&w<l?(s=_,l=w):f*=.5}}return{x:i.apply(null,t.concat([s])),y:i.apply(null,e.concat([s]))}}function p(t,e){for(var n=0,r=t.length,i=0;i<r;i++){var a=t[i],s=e[i],l=t[(i+1)%r],u=e[(i+1)%r];n+=o(a,s,l,u)}return n/2}function g(t,e,n,r){var i=1-r;return i*i*t+2*r*i*e+r*r*n}function m(t,e,n){var r=t+n-2*e;if(a(r,0))return[.5];var i=(t-e)/r;return i<=1&&i>=0?[i]:[]}function y(t,e,n,r){return 2*(1-r)*(e-t)+2*r*(n-e)}function v(t,e,n,r,i,o,a){var s=g(t,n,i,a),l=g(e,r,o,a),u=h.pointAt(t,e,n,r,a),c=h.pointAt(n,r,i,o,a);return[[t,e,u.x,u.y,s,l],[s,l,c.x,c.y,i,o]]}function b(t,e,n,r,i,a,s){if(0===s)return(o(t,e,n,r)+o(n,r,i,a)+o(t,e,i,a))/2;var l=v(t,e,n,r,i,a,.5),u=l[0],c=l[1];return u.push(s-1),c.push(s-1),b.apply(null,u)+b.apply(null,c)}var _={box:function(t,e,n,r,i,o){var a=m(t,n,i)[0],l=m(e,r,o)[0],u=[t,i],c=[e,o];return void 0!==a&&u.push(g(t,n,i,a)),void 0!==l&&c.push(g(e,r,o,l)),s(u,c)},length:function(t,e,n,r,i,o){return b(t,e,n,r,i,o,3)},nearestPoint:function(t,e,n,r,i,o,a,s){return f([t,n,i],[e,r,o],a,s,g)},pointDistance:function(t,e,n,r,i,a,s,l){var u=this.nearestPoint(t,e,n,r,i,a,s,l);return o(u.x,u.y,s,l)},interpolationAt:g,pointAt:function(t,e,n,r,i,o,a){return{x:g(t,n,i,a),y:g(e,r,o,a)}},divide:function(t,e,n,r,i,o,a){return v(t,e,n,r,i,o,a)},tangentAngle:function(t,e,n,r,i,o,a){var s=y(t,n,i,a),l=y(e,r,o,a),c=Math.atan2(l,s);return u(c)}};function x(t,e,n,r,i){var o=1-i;return o*o*o*t+3*e*i*o*o+3*n*i*i*o+r*i*i*i}function w(t,e,n,r,i){var o=1-i;return 3*(o*o*(e-t)+2*o*i*(n-e)+i*i*(r-n))}function S(t,e,n,r){var i,o,s,l=-3*t+9*e-9*n+3*r,u=6*t-12*e+6*n,c=3*e-3*t,h=[];if(a(l,0))a(u,0)||(i=-c/u,i>=0&&i<=1&&h.push(i));else{var d=u*u-4*l*c;a(d,0)?h.push(-u/(2*l)):d>0&&(s=Math.sqrt(d),i=(-u+s)/(2*l),o=(-u-s)/(2*l),i>=0&&i<=1&&h.push(i),o>=0&&o<=1&&h.push(o))}return h}function E(t,e,n,r,i,o,a,s,l){var u=x(t,n,i,a,l),c=x(e,r,o,s,l),d=h.pointAt(t,e,n,r,l),f=h.pointAt(n,r,i,o,l),p=h.pointAt(i,o,a,s,l),g=h.pointAt(d.x,d.y,f.x,f.y,l),m=h.pointAt(f.x,f.y,p.x,p.y,l);return[[t,e,d.x,d.y,g.x,g.y,u,c],[u,c,m.x,m.y,p.x,p.y,a,s]]}function C(t,e,n,r,i,o,a,s,l){if(0===l)return p([t,n,i,a],[e,r,o,s]);var u=E(t,e,n,r,i,o,a,s,.5),c=u[0],h=u[1];return c.push(l-1),h.push(l-1),C.apply(null,c)+C.apply(null,h)}var M={extrema:S,box:function(t,e,n,r,i,o,a,l){for(var u=[t,a],c=[e,l],h=S(t,n,i,a),d=S(e,r,o,l),f=0;f<h.length;f++)u.push(x(t,n,i,a,h[f]));for(f=0;f<d.length;f++)c.push(x(e,r,o,l,d[f]));return s(u,c)},length:function(t,e,n,r,i,o,a,s){return C(t,e,n,r,i,o,a,s,3)},nearestPoint:function(t,e,n,r,i,o,a,s,l,u,c){return f([t,n,i,a],[e,r,o,s],l,u,x,c)},pointDistance:function(t,e,n,r,i,a,s,l,u,c,h){var d=this.nearestPoint(t,e,n,r,i,a,s,l,u,c,h);return o(d.x,d.y,u,c)},interpolationAt:x,pointAt:function(t,e,n,r,i,o,a,s,l){return{x:x(t,n,i,a,l),y:x(e,r,o,s,l)}},divide:function(t,e,n,r,i,o,a,s,l){return E(t,e,n,r,i,o,a,s,l)},tangentAngle:function(t,e,n,r,i,o,a,s,l){var c=w(t,n,i,a,l),h=w(e,r,o,s,l);return u(Math.atan2(h,c))}};function T(t,e){var n=Math.abs(t);return e>0?n:-1*n}var A={box:function(t,e,n,r){return{x:t-n,y:e-r,width:2*n,height:2*r}},length:function(t,e,n,r){return Math.PI*(3*(n+r)-Math.sqrt((3*n+r)*(n+3*r)))},nearestPoint:function(t,e,n,r,i,o){var a=n,s=r;if(0===a||0===s)return{x:t,y:e};for(var l,u,c=i-t,h=o-e,d=Math.abs(c),f=Math.abs(h),p=a*a,g=s*s,m=Math.PI/4,y=0;y<4;y++){l=a*Math.cos(m),u=s*Math.sin(m);var v=(p-g)*Math.pow(Math.cos(m),3)/a,b=(g-p)*Math.pow(Math.sin(m),3)/s,_=l-v,x=u-b,w=d-v,S=f-b,E=Math.hypot(x,_),C=Math.hypot(S,w),M=E*Math.asin((_*S-x*w)/(E*C)),A=M/Math.sqrt(p+g-l*l-u*u);m+=A,m=Math.min(Math.PI/2,Math.max(0,m))}return{x:t+T(l,c),y:e+T(u,h)}},pointDistance:function(t,e,n,r,i,a){var s=this.nearestPoint(t,e,n,r,i,a);return o(s.x,s.y,i,a)},pointAt:function(t,e,n,r,i){var o=2*Math.PI*i;return{x:t+n*Math.cos(o),y:e+r*Math.sin(o)}},tangentAngle:function(t,e,n,r,i){var o=2*Math.PI*i,a=Math.atan2(r*Math.cos(o),-n*Math.sin(o));return u(a)}};function O(t,e,n,r,i,o,a,s){return-1*n*Math.cos(i)*Math.sin(s)-r*Math.sin(i)*Math.cos(s)}function k(t,e,n,r,i,o,a,s){return-1*n*Math.sin(i)*Math.sin(s)+r*Math.cos(i)*Math.cos(s)}function I(t,e,n){return Math.atan(-e/t*Math.tan(n))}function P(t,e,n){return Math.atan(e/(t*Math.tan(n)))}function L(t,e,n,r,i,o){return n*Math.cos(i)*Math.cos(o)-r*Math.sin(i)*Math.sin(o)+t}function N(t,e,n,r,i,o){return n*Math.sin(i)*Math.cos(o)+r*Math.cos(i)*Math.sin(o)+e}function R(t,e,n,r){var i=Math.atan2(r*t,n*e);return(i+2*Math.PI)%(2*Math.PI)}function D(t,e,n){return{x:t*Math.cos(n),y:e*Math.sin(n)}}function F(t,e,n){var r=Math.cos(n),i=Math.sin(n);return[t*r-e*i,t*i+e*r]}var j={box:function(t,e,n,r,i,o,a){for(var s=I(n,r,i),l=1/0,u=-1/0,c=[o,a],h=2*-Math.PI;h<=2*Math.PI;h+=Math.PI){var d=s+h;o<a?o<d&&d<a&&c.push(d):a<d&&d<o&&c.push(d)}for(h=0;h<c.length;h++){var f=L(t,e,n,r,i,c[h]);f<l&&(l=f),f>u&&(u=f)}var p=P(n,r,i),g=1/0,m=-1/0,y=[o,a];for(h=2*-Math.PI;h<=2*Math.PI;h+=Math.PI){var v=p+h;o<a?o<v&&v<a&&y.push(v):a<v&&v<o&&y.push(v)}for(h=0;h<y.length;h++){var b=N(t,e,n,r,i,y[h]);b<g&&(g=b),b>m&&(m=b)}return{x:l,y:g,width:u-l,height:m-g}},length:function(t,e,n,r,i,o,a){},nearestPoint:function(t,e,n,r,i,o,a,s,l){var u=F(s-t,l-e,-i),c=u[0],h=u[1],d=A.nearestPoint(0,0,n,r,c,h),f=R(n,r,d.x,d.y);f<o?d=D(n,r,o):f>a&&(d=D(n,r,a));var p=F(d.x,d.y,i);return{x:p[0]+t,y:p[1]+e}},pointDistance:function(t,e,n,r,i,a,s,l,u){var c=this.nearestPoint(t,e,n,r,l,u);return o(c.x,c.y,l,u)},pointAt:function(t,e,n,r,i,o,a,s){var l=(a-o)*s+o;return{x:L(t,e,n,r,i,l),y:N(t,e,n,r,i,l)}},tangentAngle:function(t,e,n,r,i,o,a,s){var l=(a-o)*s+o,c=O(t,e,n,r,i,o,a,l),h=k(t,e,n,r,i,o,a,l);return u(Math.atan2(h,c))}};function B(t){for(var e=0,n=[],r=0;r<t.length-1;r++){var i=t[r],a=t[r+1],s=o(i[0],i[1],a[0],a[1]),l={from:i,to:a,length:s};n.push(l),e+=s}return{segments:n,totalLength:e}}function z(t){if(t.length<2)return 0;for(var e=0,n=0;n<t.length-1;n++){var r=t[n],i=t[n+1];e+=o(r[0],r[1],i[0],i[1])}return e}function U(t,e){if(e>1||e<0||t.length<2)return null;var n=B(t),r=n.segments,i=n.totalLength;if(0===i)return{x:t[0][0],y:t[0][1]};for(var o=0,a=null,s=0;s<r.length;s++){var l=r[s],u=l.from,c=l.to,d=l.length/i;if(e>=o&&e<=o+d){var f=(e-o)/d;a=h.pointAt(u[0],u[1],c[0],c[1],f);break}o+=d}return a}function G(t,e){if(e>1||e<0||t.length<2)return 0;for(var n=B(t),r=n.segments,i=n.totalLength,o=0,a=0,s=0;s<r.length;s++){var l=r[s],u=l.from,c=l.to,h=l.length/i;if(e>=o&&e<=o+h){a=Math.atan2(c[1]-u[1],c[0]-u[0]);break}o+=h}return a}function q(t,e,n){for(var r=1/0,i=0;i<t.length-1;i++){var o=t[i],a=t[i+1],s=h.pointDistance(o[0],o[1],a[0],a[1],e,n);s<r&&(r=s)}return r}var V={box:function(t){for(var e=[],n=[],r=0;r<t.length;r++){var i=t[r];e.push(i[0]),n.push(i[1])}return s(e,n)},length:function(t){return z(t)},pointAt:function(t,e){return U(t,e)},pointDistance:function(t,e,n){return q(t,e,n)},tangentAngle:function(t,e){return G(t,e)}}},"11b0":function(t,e,n){function r(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630"),t.exports=r,t.exports.__esModule=!0,t.exports["default"]=t.exports},"11e9":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["master_timeout","timeout","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["repository"]){const t=new n("Missing required parameter: repository");return r(t,l)}if(null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,repository:d,...f}=t;f=i(o,a,f,u),null==c&&(c="DELETE");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g="/_snapshot/"+encodeURIComponent(d);const m={method:c,path:g,body:"",querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},"11f9":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["format","bytes","h","help","s","v","pretty","human","error_trace","source","filter_path"],a={errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,...f}=t;f=i(o,a,f,u),null==c&&(c="GET");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g=null!=d?"/_cat/segments/"+encodeURIComponent(d):"/_cat/segments";const m={method:c,path:g,body:null,querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},1231:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}return t.prototype.init=function(e,n,r){this.cells=[],this.CELL_W=r.CELL_W||t.DEFAULT_CELL_W,this.CELL_H=r.CELL_H||t.DEFAULT_CELL_H,this.columnNum=Math.ceil(e/this.CELL_W),this.rowNum=Math.ceil(n/this.CELL_H),t.MIN_DIST=Math.pow(e,2)+Math.pow(n,2);for(var i=0;i<this.columnNum;i++){for(var o=[],a=0;a<this.rowNum;a++){var s={dx:i,dy:a,x:i*this.CELL_W,y:a*this.CELL_H,occupied:!1};o.push(s)}this.cells.push(o)}},t.prototype.findGridByNodeId=function(t){for(var e,n,r=0;r<this.columnNum;r++)for(var i=0;i<this.rowNum;i++)if(this.cells[r][i].node&&(null===(n=null===(e=this.cells[r][i])||void 0===e?void 0:e.node)||void 0===n?void 0:n.id)===t)return{column:r,row:i};return null},t.prototype.sqdist=function(t,e){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)},t.prototype.occupyNearest=function(e){for(var n,r=t.MIN_DIST,i=null,o=0;o<this.columnNum;o++)for(var a=0;a<this.rowNum;a++)!this.cells[o][a].occupied&&(n=this.sqdist(e,this.cells[o][a]))<r&&(r=n,i=this.cells[o][a]);return i&&(i.occupied=!0),i},t.prototype.insertColumn=function(t,e){if(!(e<=0)){for(var n=0;n<e;n++){this.cells[n+this.columnNum]=[];for(var i=0;i<this.rowNum;i++)this.cells[n+this.columnNum][i]={dx:n,dy:i,x:n*this.CELL_W,y:i*this.CELL_H,occupied:!1,node:null}}for(n=this.columnNum-1;n>t;n--)for(i=0;i<this.rowNum;i++)this.cells[n+e][i]=r(r({},this.cells[n][i]),{x:(n+e)*this.CELL_W,y:i*this.CELL_H}),this.cells[n][i]={x:n*this.CELL_W,y:i*this.CELL_H,occupied:!0,node:null};for(i=0;i<this.additionColumn.length;i++)this.additionColumn[i]>=t&&(this.additionColumn[i]+=e);for(n=0;n<e;n++)this.additionColumn.push(t+n+1);this.columnNum+=e}},t.prototype.insertRow=function(t,e){if(!(e<=0)){for(var n=0;n<e;n++)for(var i=0;i<this.columnNum;i++)this.cells[i][n+this.rowNum]={dx:i,dy:n,x:i*this.CELL_W,y:n*this.CELL_H,occupied:!1,node:null};for(i=0;i<this.columnNum;i++)for(n=this.rowNum-1;n>t;n--)this.cells[i][n+e]=r(r({},this.cells[i][n]),{dx:i,dy:n+e,x:i*this.CELL_W,y:(n+e)*this.CELL_H}),this.cells[i][n]={dx:i,dy:n,x:i*this.CELL_W,y:n*this.CELL_H,occupied:!1,node:null};for(n=0;n<this.additionRow.length;n++)this.additionRow[n]>=t&&(this.additionRow[n]+=e);for(i=0;i<e;i++)this.additionRow.push(t+i+1);this.rowNum+=e}},t.prototype.getNodes=function(){for(var t=[],e=0;e<this.columnNum;e++)for(var n=0;n<this.rowNum;n++)this.cells[e][n].node&&t.push(this.cells[e][n]);return t},t.MIN_DIST=50,t.DEFAULT_CELL_W=80,t.DEFAULT_CELL_H=80,t}();e.default=i},1243:function(t,e,n){"use strict";var r=n("9ab4"),i=n("7b46"),o=n("330d"),a=n("b2cb"),s=n("8937"),l=n("74f4"),u=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function c(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function h(){}var d=.7,f=1/d,p="\\s*([+-]?\\d+)\\s*",g="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",m="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",y=/^#([0-9a-f]{3,8})$/,v=new RegExp(`^rgb\\(${p},${p},${p}\\)$`),b=new RegExp(`^rgb\\(${m},${m},${m}\\)$`),_=new RegExp(`^rgba\\(${p},${p},${p},${g}\\)$`),x=new RegExp(`^rgba\\(${m},${m},${m},${g}\\)$`),w=new RegExp(`^hsl\\(${g},${m},${m}\\)$`),S=new RegExp(`^hsla\\(${g},${m},${m},${g}\\)$`),E={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function C(){return this.rgb().formatHex()}function M(){return this.rgb().formatHex8()}function T(){return G(this).formatHsl()}function A(){return this.rgb().formatRgb()}function O(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=y.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?k(e):3===n?new N(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?I(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?I(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=v.exec(t))?new N(e[1],e[2],e[3],1):(e=b.exec(t))?new N(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=_.exec(t))?I(e[1],e[2],e[3],e[4]):(e=x.exec(t))?I(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=w.exec(t))?U(e[1],e[2]/100,e[3]/100,1):(e=S.exec(t))?U(e[1],e[2]/100,e[3]/100,e[4]):E.hasOwnProperty(t)?k(E[t]):"transparent"===t?new N(NaN,NaN,NaN,0):null}function k(t){return new N(t>>16&255,t>>8&255,255&t,1)}function I(t,e,n,r){return r<=0&&(t=e=n=NaN),new N(t,e,n,r)}function P(t){return t instanceof h||(t=O(t)),t?(t=t.rgb(),new N(t.r,t.g,t.b,t.opacity)):new N}function L(t,e,n,r){return 1===arguments.length?P(t):new N(t,e,n,null==r?1:r)}function N(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function R(){return`#${z(this.r)}${z(this.g)}${z(this.b)}`}function D(){return`#${z(this.r)}${z(this.g)}${z(this.b)}${z(255*(isNaN(this.opacity)?1:this.opacity))}`}function F(){const t=j(this.opacity);return`${1===t?"rgb(":"rgba("}${B(this.r)}, ${B(this.g)}, ${B(this.b)}${1===t?")":`, ${t})`}`}function j(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function B(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function z(t){return t=B(t),(t<16?"0":"")+t.toString(16)}function U(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new V(t,e,n,r)}function G(t){if(t instanceof V)return new V(t.h,t.s,t.l,t.opacity);if(t instanceof h||(t=O(t)),!t)return new V;if(t instanceof V)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new V(a,s,l,t.opacity)}function q(t,e,n,r){return 1===arguments.length?G(t):new V(t,e,n,null==r?1:r)}function V(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function H(t){return t=(t||0)%360,t<0?t+360:t}function W(t){return Math.max(0,Math.min(1,t||0))}function Y(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function X(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}u(h,O,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:C,formatHex:C,formatHex8:M,formatHsl:T,formatRgb:A,toString:A}),u(N,L,c(h,{brighter(t){return t=null==t?f:Math.pow(f,t),new N(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?d:Math.pow(d,t),new N(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new N(B(this.r),B(this.g),B(this.b),j(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:R,formatHex:R,formatHex8:D,formatRgb:F,toString:F})),u(V,q,c(h,{brighter(t){return t=null==t?f:Math.pow(f,t),new V(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?d:Math.pow(d,t),new V(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new N(Y(t>=240?t-240:t+120,i,r),Y(t,i,r),Y(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new V(H(this.h),W(this.s),W(this.l),j(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=j(this.opacity);return`${1===t?"hsl(":"hsla("}${H(this.h)}, ${100*W(this.s)}%, ${100*W(this.l)}%${1===t?")":`, ${t})`}`}}));var J=function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return X((n-r/e)*e,a,i,o,s)}},Z=function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return X((n-r/e)*e,i,o,a,s)}},K=t=>()=>t;function Q(t,e){return function(n){return t+n*e}}function $(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function tt(t){return 1===(t=+t)?et:function(e,n){return n-e?$(e,n,t):K(isNaN(e)?n:e)}}function et(t,e){var n=e-t;return n?Q(t,n):K(isNaN(t)?e:t)}var nt=function t(e){var n=tt(e);function r(t,e){var r=n((t=L(t)).r,(e=L(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=et(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function rt(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=L(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}rt(J),rt(Z);var it=function(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}};function ot(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}var at=function(t,e){return(ot(e)?it:st)(t,e)};function st(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=mt(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}var lt=function(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}},ut=function(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}},ct=function(t,e){var n,r={},i={};for(n in null!==t&&"object"===typeof t||(t={}),null!==e&&"object"===typeof e||(e={}),e)n in t?r[n]=mt(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},ht=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dt=new RegExp(ht.source,"g");function ft(t){return function(){return t}}function pt(t){return function(e){return t(e)+""}}var gt=function(t,e){var n,r,i,o=ht.lastIndex=dt.lastIndex=0,a=-1,s=[],l=[];t+="",e+="";while((n=ht.exec(t))&&(r=dt.exec(e)))(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:ut(n,r)})),o=dt.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?pt(l[0].x):ft(e):(e=l.length,function(t){for(var n,r=0;r<e;++r)s[(n=l[r]).i]=n.x(t);return s.join("")})},mt=function(t,e){var n,r=typeof e;return null==e||"boolean"===r?K(e):("number"===r?ut:"string"===r?(n=O(e))?(e=n,nt):gt:e instanceof O?nt:e instanceof Date?lt:ot(e)?it:Array.isArray(e)?st:"function"!==typeof e.valueOf&&"function"!==typeof e.toString||isNaN(e)?ct:ut)(t,e)},yt=n("54ca"),vt=n("b6fb"),bt=function(t){return["fill","stroke","fillStyle","strokeStyle"].includes(t)},_t=function(t){return/^[r,R,L,l]{1}[\s]*\(/.test(t)},xt=[1,0,0,0,1,0,0,0,1];function wt(t,e,n){var r={},i=e.fromAttrs,o=e.toAttrs;if(!t.destroyed){var a;for(var l in o)if(!Object(s["isEqual"])(i[l],o[l]))if("path"===l){var u=o[l],c=i[l];u.length>c.length?(u=vt["parsePathString"](o[l]),c=vt["parsePathString"](i[l]),c=vt["fillPathByDiff"](c,u),c=vt["formatPath"](c,u),e.fromAttrs.path=c,e.toAttrs.path=u):e.pathFormatted||(u=vt["parsePathString"](o[l]),c=vt["parsePathString"](i[l]),c=vt["formatPath"](c,u),e.fromAttrs.path=c,e.toAttrs.path=u,e.pathFormatted=!0),r[l]=[];for(var h=0;h<u.length;h++){for(var d=u[h],f=c[h],p=[],g=0;g<d.length;g++)Object(s["isNumber"])(d[g])&&f&&Object(s["isNumber"])(f[g])?(a=mt(f[g],d[g]),p.push(a(n))):p.push(d[g]);r[l].push(p)}}else if("matrix"===l){var m=at(i[l]||xt,o[l]||xt),y=m(n);r[l]=y}else bt(l)&&_t(o[l])?r[l]=o[l]:Object(s["isFunction"])(o[l])||(a=mt(i[l],o[l]),r[l]=a(n));t.attr(r)}}function St(t,e,n){var r,i=e.startTime,o=e.delay;if(n<i+o||e._paused)return!1;var a=e.duration,s=e.easing,l=Object(yt["a"])(s);if(n=n-i-e.delay,e.repeat)r=n%a/a,r=l(r);else{if(r=n/a,!(r<1))return e.onFrame?t.attr(e.onFrame(1)):t.attr(e.toAttrs),!0;r=l(r)}if(e.onFrame){var u=e.onFrame(r);t.attr(u)}else wt(t,e,r);return!1}var Et=function(){function t(t){this.animators=[],this.current=0,this.timer=null,this.canvas=t}return t.prototype.initTimer=function(){var t,e,n,r=this,i=!1;this.timer=l["a"]((function(o){if(r.current=o,r.animators.length>0){for(var a=r.animators.length-1;a>=0;a--)if(t=r.animators[a],t.destroyed)r.removeAnimator(a);else{if(!t.isAnimatePaused()){e=t.get("animations");for(var s=e.length-1;s>=0;s--)n=e[s],i=St(t,n,o),i&&(e.splice(s,1),i=!1,n.callback&&n.callback())}0===e.length&&r.removeAnimator(a)}var l=r.canvas.get("autoDraw");l||r.canvas.draw()}}))},t.prototype.addAnimator=function(t){this.animators.push(t)},t.prototype.removeAnimator=function(t){this.animators.splice(t,1)},t.prototype.isAnimating=function(){return!!this.animators.length},t.prototype.stop=function(){this.timer&&this.timer.stop()},t.prototype.stopAllAnimations=function(t){void 0===t&&(t=!0),this.animators.forEach((function(e){e.stopAnimate(t)})),this.animators=[],this.canvas.draw()},t.prototype.getTime=function(){return this.current},t}(),Ct=Et,Mt=n("e5e2"),Tt=40,At=0,Ot=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function kt(t,e,n){n.name=e,n.target=t,n.currentTarget=t,n.delegateTarget=t,t.emit(e,n)}function It(t,e,n){if(n.bubbles){var r=void 0,i=!1;if("mouseenter"===e?(r=n.fromShape,i=!0):"mouseleave"===e&&(i=!0,r=n.toShape),t.isCanvas()&&i)return;if(r&&Object(a["g"])(t,r))return void(n.bubbles=!1);n.name=e,n.currentTarget=t,n.delegateTarget=t,t.emit(e,n)}}var Pt=function(){function t(t){var e=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(t){var n=t.type;e._triggerEvent(n,t)},this._onDocumentMove=function(t){var n=e.canvas,r=n.get("el");if(r!==t.target&&(e.dragging||e.currentShape)){var i=e._getPointInfo(t);e.dragging&&e._emitEvent("drag",t,i,e.draggingShape)}},this._onDocumentMouseUp=function(t){var n=e.canvas,r=n.get("el");if(r!==t.target&&e.dragging){var i=e._getPointInfo(t);e.draggingShape&&e._emitEvent("drop",t,i,null),e._emitEvent("dragend",t,i,e.draggingShape),e._afterDrag(e.draggingShape,i,t)}},this.canvas=t.canvas}return t.prototype.init=function(){this._bindEvents()},t.prototype._bindEvents=function(){var t=this,e=this.canvas.get("el");Object(a["a"])(Ot,(function(n){e.addEventListener(n,t._eventCallback)})),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},t.prototype._clearEvents=function(){var t=this,e=this.canvas.get("el");Object(a["a"])(Ot,(function(n){e.removeEventListener(n,t._eventCallback)})),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},t.prototype._getEventObj=function(t,e,n,r,i,o){var a=new Mt["a"](t,e);return a.fromShape=i,a.toShape=o,a.x=n.x,a.y=n.y,a.clientX=n.clientX,a.clientY=n.clientY,a.propagationPath.push(r),a},t.prototype._getShape=function(t,e){return this.canvas.getShape(t.x,t.y,e)},t.prototype._getPointInfo=function(t){var e=this.canvas,n=e.getClientByEvent(t),r=e.getPointByEvent(t);return{x:r.x,y:r.y,clientX:n.x,clientY:n.y}},t.prototype._triggerEvent=function(t,e){var n=this._getPointInfo(e),r=this._getShape(n,e),i=this["_on"+t],o=!1;if(i)i.call(this,n,r,e);else{var a=this.currentShape;"mouseenter"===t||"dragenter"===t||"mouseover"===t?(this._emitEvent(t,e,n,null,null,r),r&&this._emitEvent(t,e,n,r,null,r),"mouseenter"===t&&this.draggingShape&&this._emitEvent("dragenter",e,n,null)):"mouseleave"===t||"dragleave"===t||"mouseout"===t?(o=!0,a&&this._emitEvent(t,e,n,a,a,null),this._emitEvent(t,e,n,null,a,null),"mouseleave"===t&&this.draggingShape&&this._emitEvent("dragleave",e,n,null)):this._emitEvent(t,e,n,r,null,null)}if(o||(this.currentShape=r),r&&!r.get("destroyed")){var s=this.canvas,l=s.get("el");l.style.cursor=r.attr("cursor")||s.get("cursor")}},t.prototype._onmousedown=function(t,e,n){n.button===At&&(this.mousedownShape=e,this.mousedownPoint=t,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,t,e,null,null)},t.prototype._emitMouseoverEvents=function(t,e,n,r){var i=this.canvas.get("el");n!==r&&(n&&(this._emitEvent("mouseout",t,e,n,n,r),this._emitEvent("mouseleave",t,e,n,n,r),r&&!r.get("destroyed")||(i.style.cursor=this.canvas.get("cursor"))),r&&(this._emitEvent("mouseover",t,e,r,n,r),this._emitEvent("mouseenter",t,e,r,n,r)))},t.prototype._emitDragoverEvents=function(t,e,n,r,i){r?(r!==n&&(n&&this._emitEvent("dragleave",t,e,n,n,r),this._emitEvent("dragenter",t,e,r,n,r)),i||this._emitEvent("dragover",t,e,r)):n&&this._emitEvent("dragleave",t,e,n,n,r),i&&this._emitEvent("dragover",t,e,r)},t.prototype._afterDrag=function(t,e,n){t&&(t.set("capture",!0),this.draggingShape=null),this.dragging=!1;var r=this._getShape(e,n);r!==t&&this._emitMouseoverEvents(n,e,t,r),this.currentShape=r},t.prototype._onmouseup=function(t,e,n){if(n.button===At){var r=this.draggingShape;this.dragging?(r&&this._emitEvent("drop",n,t,e),this._emitEvent("dragend",n,t,r),this._afterDrag(r,t,n)):(this._emitEvent("mouseup",n,t,e),e===this.mousedownShape&&this._emitEvent("click",n,t,e),this.mousedownShape=null,this.mousedownPoint=null)}},t.prototype._ondragover=function(t,e,n){n.preventDefault();var r=this.currentShape;this._emitDragoverEvents(n,t,r,e,!0)},t.prototype._onmousemove=function(t,e,n){var r=this.canvas,i=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(n,t,i,e,!1),this._emitEvent("drag",n,t,o);else{var a=this.mousedownPoint;if(a){var s=this.mousedownShape,l=n.timeStamp,u=l-this.mousedownTimeStamp,c=a.clientX-t.clientX,h=a.clientY-t.clientY,d=c*c+h*h;u>120||d>Tt?s&&s.get("draggable")?(o=this.mousedownShape,o.set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",n,t,o),this.mousedownShape=null,this.mousedownPoint=null):!s&&r.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,t,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,t,i,e),this._emitEvent("mousemove",n,t,e)):(this._emitMouseoverEvents(n,t,i,e),this._emitEvent("mousemove",n,t,e))}else this._emitMouseoverEvents(n,t,i,e),this._emitEvent("mousemove",n,t,e)}},t.prototype._emitEvent=function(t,e,n,r,i,o){var a=this._getEventObj(t,e,n,r,i,o);if(r){a.shape=r,kt(r,t,a);var s=r.getParent();while(s)s.emitDelegation(t,a),a.propagationStopped||It(s,t,a),a.propagationPath.push(s),s=s.getParent()}else{var l=this.canvas;kt(l,t,a)}},t.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},t}(),Lt=Pt,Nt="px",Rt=Object(i["a"])(),Dt=Rt&&"firefox"===Rt.name,Ft=function(t){function e(e){var n=t.call(this,e)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}return Object(r["__extends"])(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e["cursor"]="default",e["supportCSSTransform"]=!1,e},e.prototype.initContainer=function(){var t=this.get("container");Object(a["h"])(t)&&(t=document.getElementById(t),this.set("container",t))},e.prototype.initDom=function(){var t=this.createDom();this.set("el",t);var e=this.get("container");e.appendChild(t),this.setDOMSize(this.get("width"),this.get("height"))},e.prototype.initEvents=function(){var t=new Lt({canvas:this});t.init(),this.set("eventController",t)},e.prototype.initTimeline=function(){var t=new Ct(this);this.set("timeline",t)},e.prototype.setDOMSize=function(t,e){var n=this.get("el");a["c"]&&(n.style.width=t+Nt,n.style.height=e+Nt)},e.prototype.changeSize=function(t,e){this.setDOMSize(t,e),this.set("width",t),this.set("height",e),this.onCanvasChange("changeSize")},e.prototype.getRenderer=function(){return this.get("renderer")},e.prototype.getCursor=function(){return this.get("cursor")},e.prototype.setCursor=function(t){this.set("cursor",t);var e=this.get("el");a["c"]&&e&&(e.style.cursor=t)},e.prototype.getPointByEvent=function(t){var e=this.get("supportCSSTransform");if(e){if(Dt&&!Object(a["e"])(t.layerX)&&t.layerX!==t.offsetX)return{x:t.layerX,y:t.layerY};if(!Object(a["e"])(t.offsetX))return{x:t.offsetX,y:t.offsetY}}var n=this.getClientByEvent(t),r=n.x,i=n.y;return this.getPointByClient(r,i)},e.prototype.getClientByEvent=function(t){var e=t;return t.touches&&(e="touchend"===t.type?t.changedTouches[0]:t.touches[0]),{x:e.clientX,y:e.clientY}},e.prototype.getPointByClient=function(t,e){var n=this.get("el"),r=n.getBoundingClientRect();return{x:t-r.left,y:e-r.top}},e.prototype.getClientByPoint=function(t,e){var n=this.get("el"),r=n.getBoundingClientRect();return{x:t+r.left,y:e+r.top}},e.prototype.draw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.parentNode.removeChild(t)},e.prototype.clearEvents=function(){var t=this.get("eventController");t.destroy()},e.prototype.isCanvas=function(){return!0},e.prototype.getParent=function(){return null},e.prototype.destroy=function(){var e=this.get("timeline");this.get("destroyed")||(this.clear(),e&&e.stop(),this.clearEvents(),this.removeDom(),t.prototype.destroy.call(this))},e}(o["a"]);e["a"]=Ft},1310:function(t,e){function n(t){return null!=t&&"object"==typeof t}t.exports=n},"139f":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["wait_for_completion","pretty","human","error_trace","source","filter_path"],a={waitForCompletion:"wait_for_completion",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,taskId:d,task_id:f,...p}=t;p=i(o,a,p,u),null==c&&(c="GET");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m="/_tasks/"+encodeURIComponent(f||d);const y={method:c,path:m,body:null,querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},"13d2e":function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.DagreLayout=void 0;var o=i(n("3486")),a=n("f271"),s=n("5bc9"),l=n("3979"),u=function(t){function e(e){var n=t.call(this)||this;return n.rankdir="TB",n.nodesep=50,n.ranksep=50,n.controlPoints=!1,n.sortByCombo=!1,n.edgeLabelSpace=!0,n.radial=!1,n.nodes=[],n.edges=[],n.onLayoutEnd=function(){},n.layoutNode=function(t){var e=n,r=e.nodes,i=r.find((function(e){return e.id===t}));if(i){var o=!1!==i.layout;return o}return!0},n.updateCfg(e),n}return r(e,t),e.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}},e.prototype.execute=function(){var t,e,n,r,i=this,s=this,u=s.nodes,h=s.nodeSize,d=s.rankdir,f=s.combos,p=s.begin,g=s.radial,m=s.comboEdges,y=void 0===m?[]:m,v=s.vedges,b=void 0===v?[]:v;if(u){var _=s.edges||[],x=new l.Graph({multigraph:!0,compound:!0});s.nodeMap={};var w={};u.forEach((function(t){s.nodeMap[t.id]=t,t.comboId&&(w[t.comboId]=w[t.comboId]||[],w[t.comboId].push(t.id))}));var S,E=[],C={};(null===(t=s.nodeOrder)||void 0===t?void 0:t.length)?(s.nodeOrder.forEach((function(t){C[t]=!0,E.push(s.nodeMap[t])})),u.forEach((function(t){C[t.id]||E.push(t)}))):E=u,S=h?(0,a.isArray)(h)?function(){return h}:function(){return[h,h]}:function(t){return t.size?(0,a.isArray)(t.size)?t.size:(0,a.isObject)(t.size)?[t.size.width||40,t.size.height||40]:[t.size,t.size]:[40,40]};var M=(0,a.getFunc)(s.ranksep,50,s.ranksepFunc),T=(0,a.getFunc)(s.nodesep,50,s.nodesepFunc),A=T,O=M;"LR"!==d&&"RL"!==d||(A=M,O=T),x.setDefaultEdgeLabel((function(){return{}})),x.setGraph(s);var k={};this.sortByCombo&&f&&f.forEach((function(t){if(k[t.id]=t,t.collapsed){var e=S(t),n=O(t),r=A(t),i=e[0]+2*r,o=e[1]+2*n;x.setNode(t.id,{width:i,height:o})}t.parentId&&(k[t.parentId]||x.setNode(t.parentId,{}),x.setParent(t.id,t.parentId))})),E.filter((function(t){return!1!==t.layout})).forEach((function(t){var e=S(t),n=O(t),r=A(t),o=e[0]+2*r,s=e[1]+2*n,l=t.layer;(0,a.isNumber)(l)?x.setNode(t.id,{width:o,height:s,layer:l}):x.setNode(t.id,{width:o,height:s}),i.sortByCombo&&t.comboId&&(k[t.comboId]||(k[t.comboId]={id:t.comboId},x.setNode(t.comboId,{})),x.setParent(t.id,t.comboId))})),_.forEach((function(t){var e=(0,a.getEdgeTerminal)(t,"source"),n=(0,a.getEdgeTerminal)(t,"target");i.layoutNode(e)&&i.layoutNode(n)&&x.setEdge(e,n,{weight:t.weight||1})})),null===(e=null===y||void 0===y?void 0:y.concat(b||[]))||void 0===e||e.forEach((function(t){var e,n,r=t.source,i=t.target,o=(null===(e=k[r])||void 0===e?void 0:e.collapsed)?[r]:w[r]||[r],a=(null===(n=k[i])||void 0===n?void 0:n.collapsed)?[i]:w[i]||[i];o.forEach((function(e){a.forEach((function(n){x.setEdge(e,n,{weight:t.weight||1})}))}))}));var I=void 0;(null===(n=s.preset)||void 0===n?void 0:n.nodes)&&(I=new l.Graph({multigraph:!0,compound:!0}),s.preset.nodes.forEach((function(t){null===I||void 0===I||I.setNode(t.id,t)}))),o.default.layout(x,{prevGraph:I,edgeLabelSpace:s.edgeLabelSpace,keepNodeOrder:Boolean(!!s.nodeOrder),nodeOrder:s.nodeOrder});var P=[0,0];if(p){var L=1/0,N=1/0;x.nodes().forEach((function(t){var e=x.node(t);L>e.x&&(L=e.x),N>e.y&&(N=e.y)})),x.edges().forEach((function(t){var e,n=x.edge(t);null===(e=n.points)||void 0===e||e.forEach((function(t){L>t.x&&(L=t.x),N>t.y&&(N=t.y)}))})),P[0]=p[0]-L,P[1]=p[1]-N}var R="LR"===d||"RL"===d;if(g){var D=this,F=D.focusNode,j=D.ranksep,B=D.getRadialPos,z=(0,a.isString)(F)?F:null===F||void 0===F?void 0:F.id,U=z?null===(r=x.node(z))||void 0===r?void 0:r._rank:0,G=[],q=R?"y":"x",V=R?"height":"width",H=1/0,W=-1/0;x.nodes().forEach((function(t){var e=x.node(t);if(s.nodeMap[t]){var n=T(s.nodeMap[t]);if(0===U)G[e._rank]||(G[e._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),G[e._rank].nodes.push(t),G[e._rank].totalWidth+=2*n+e[V],G[e._rank].maxSize<Math.max(e.width,e.height)&&(G[e._rank].maxSize=Math.max(e.width,e.height));else{var r=e._rank-U;if(0===r)G[r]||(G[r]={nodes:[],totalWidth:0,maxSize:-1/0}),G[r].nodes.push(t),G[r].totalWidth+=2*n+e[V],G[r].maxSize<Math.max(e.width,e.height)&&(G[r].maxSize=Math.max(e.width,e.height));else{var i=Math.abs(r);G[i]||(G[i]={left:[],right:[],totalWidth:0,maxSize:-1/0}),G[i].totalWidth+=2*n+e[V],G[i].maxSize<Math.max(e.width,e.height)&&(G[i].maxSize=Math.max(e.width,e.height)),r<0?G[i].left.push(t):G[i].right.push(t)}}var o=e[q]-e[V]/2-n,a=e[q]+e[V]/2+n;o<H&&(H=o),a>W&&(W=a)}}));var Y=j||50,X={},J=(W-H)/.9,Z=[.5*(H+W-J),.5*(H+W+J)],K=function(t,e,n,r){void 0===n&&(n=-1/0),void 0===r&&(r=[0,1]);var i=n;return t.forEach((function(t){var n=x.node(t);X[t]=e;var o=B(n[q],Z,J,e,r),a=o.x,l=o.y;if(s.nodeMap[t]){s.nodeMap[t].x=a+P[0],s.nodeMap[t].y=l+P[1],s.nodeMap[t]._order=n._order;var u=M(s.nodeMap[t]);i<u&&(i=u)}})),i},Q=!0;G.forEach((function(t){var e,n,r,i,o,a,l;if((null===(e=null===t||void 0===t?void 0:t.nodes)||void 0===e?void 0:e.length)||(null===(n=null===t||void 0===t?void 0:t.left)||void 0===n?void 0:n.length)||(null===(r=null===t||void 0===t?void 0:t.right)||void 0===r?void 0:r.length)){if(Q&&1===t.nodes.length){var u=t.nodes[0];if(!s.nodeMap[u])return;return s.nodeMap[u].x=P[0],s.nodeMap[u].y=P[1],X[t.nodes[0]]=0,Y=M(s.nodeMap[u]),void(Q=!1)}Y=Math.max(Y,t.totalWidth/(2*Math.PI));var c=-1/0;if(0===U||(null===(i=t.nodes)||void 0===i?void 0:i.length))c=K(t.nodes,Y,c,[0,1]);else{var h=(null===(o=t.left)||void 0===o?void 0:o.length)/((null===(a=t.left)||void 0===a?void 0:a.length)+(null===(l=t.right)||void 0===l?void 0:l.length));c=K(t.left,Y,c,[0,h]),c=K(t.right,Y,c,[h+.05,1])}Y+=c,Q=!1,t.maxSize}})),x.edges().forEach((function(t){var e,n,r,i=x.edge(t),o=_.findIndex((function(e){var n=(0,a.getEdgeTerminal)(e,"source"),r=(0,a.getEdgeTerminal)(e,"target");return n===t.v&&r===t.w}));if(!(o<=-1)&&s.edgeLabelSpace&&s.controlPoints&&"loop"!==_[o].type){var l="x"===q?"y":"x",u=null===(e=null===i||void 0===i?void 0:i.points)||void 0===e?void 0:e.slice(1,i.points.length-1),c=[],h=null===(n=x.node(t.v))||void 0===n?void 0:n[l],d=h-(null===(r=x.node(t.w))||void 0===r?void 0:r[l]),f=X[t.v],p=f-X[t.w];null===u||void 0===u||u.forEach((function(t){var e=(t[l]-h)/d*p+f,n=B(t[q],Z,J,e);c.push({x:n.x+P[0],y:n.y+P[1]})})),_[o].controlPoints=c}}))}else{var $=new Set,tt="BT"===d||"RL"===d,et=tt?function(t,e){return e-t}:function(t,e){return t-e};x.nodes().forEach((function(t){var e=x.node(t);if(e){var n=i.nodeMap[t];n||(n=null===f||void 0===f?void 0:f.find((function(e){return e.id===t}))),n&&(n.x=e.x+P[0],n.y=e.y+P[1],n._order=e._order,$.add(R?n.x:n.y))}}));var nt=Array.from($).sort(et),rt=R?function(t,e){return t.x!==e.x}:function(t,e){return t.y!==e.y},it=R?function(t,e,n){var r=Math.max(e.y,n.y),i=Math.min(e.y,n.y);return t.filter((function(t){return t.y<=r&&t.y>=i}))}:function(t,e,n){var r=Math.max(e.x,n.x),i=Math.min(e.x,n.x);return t.filter((function(t){return t.x<=r&&t.x>=i}))};x.edges().forEach((function(t){var e,n=x.edge(t),r=_.findIndex((function(e){var n=(0,a.getEdgeTerminal)(e,"source"),r=(0,a.getEdgeTerminal)(e,"target");return n===t.v&&r===t.w}));if(!(r<=-1)&&s.edgeLabelSpace&&s.controlPoints&&"loop"!==_[r].type){null===(e=null===n||void 0===n?void 0:n.points)||void 0===e||e.forEach((function(t){t.x+=P[0],t.y+=P[1]}));var i=s.nodeMap[t.v],o=s.nodeMap[t.w];_[r].controlPoints=c(null===n||void 0===n?void 0:n.points,i,o,nt,R,rt,it)}}))}return s.onLayoutEnd&&s.onLayoutEnd(),{nodes:u,edges:_}}},e.prototype.getRadialPos=function(t,e,n,r,i){void 0===i&&(i=[0,1]);var o=(t-e[0])/n;o=o*(i[1]-i[0])+i[0];var a=2*o*Math.PI;return{x:Math.cos(a)*r,y:Math.sin(a)*r}},e.prototype.getType=function(){return"dagre"},e}(s.Base);e.DagreLayout=u;var c=function(t,e,n,r,i,o,a){var s=(null===t||void 0===t?void 0:t.slice(1,t.length-1))||[];if(e&&n){var l=e.x,u=e.y,c=n.x,h=n.y;if(i&&(l=e.y,u=e.x,c=n.y,h=n.x),h!==u&&l!==c){var d=r.indexOf(u),f=r[d+1];if(f){var p=s[0],g=i?{x:(u+f)/2,y:(null===p||void 0===p?void 0:p.y)||c}:{x:(null===p||void 0===p?void 0:p.x)||c,y:(u+f)/2};p&&!o(p,g)||s.unshift(g)}var m=r.indexOf(h),y=Math.abs(m-d);if(1===y)s=a(s,e,n),s.length||s.push(i?{x:(u+h)/2,y:l}:{x:l,y:(u+h)/2});else if(y>1){var v=r[m-1];if(v){var b=s[s.length-1],_=i?{x:(h+v)/2,y:(null===b||void 0===b?void 0:b.y)||c}:{x:(null===b||void 0===b?void 0:b.x)||l,y:(h+v)/2};b&&!o(b,_)||s.push(_)}}}}return s}},1468:function(t,e){var n=1e3,r=60*n,i=60*r,o=24*i,a=7*o,s=365.25*o;function l(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var l=parseFloat(e[1]),u=(e[2]||"ms").toLowerCase();switch(u){case"years":case"year":case"yrs":case"yr":case"y":return l*s;case"weeks":case"week":case"w":return l*a;case"days":case"day":case"d":return l*o;case"hours":case"hour":case"hrs":case"hr":case"h":return l*i;case"minutes":case"minute":case"mins":case"min":case"m":return l*r;case"seconds":case"second":case"secs":case"sec":case"s":return l*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}}}function u(t){var e=Math.abs(t);return e>=o?Math.round(t/o)+"d":e>=i?Math.round(t/i)+"h":e>=r?Math.round(t/r)+"m":e>=n?Math.round(t/n)+"s":t+"ms"}function c(t){var e=Math.abs(t);return e>=o?h(t,e,o,"day"):e>=i?h(t,e,i,"hour"):e>=r?h(t,e,r,"minute"):e>=n?h(t,e,n,"second"):t+" ms"}function h(t,e,n,r){var i=e>=1.5*n;return Math.round(t/n)+" "+r+(i?"s":"")}t.exports=function(t,e){e=e||{};var n=typeof t;if("string"===n&&t.length>0)return l(t);if("number"===n&&isFinite(t))return e.long?c(t):u(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},"146a":function(t,e,n){(function(t){(function(t,e){e()})(0,(function(){"use strict";function e(t){var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){return e.reject(n)}))}))}function n(t){var e=this;return new e((function(e,n){if(!t||"undefined"===typeof t.length)return n(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var i=r.length;function o(t,n){if(n&&("object"===typeof n||"function"===typeof n)){var a=n.then;if("function"===typeof a)return void a.call(n,(function(e){o(t,e)}),(function(n){r[t]={status:"rejected",reason:n},0===--i&&e(r)}))}r[t]={status:"fulfilled",value:n},0===--i&&e(r)}for(var a=0;a<r.length;a++)o(a,r[a])}))}var r=setTimeout;function i(t){return Boolean(t&&"undefined"!==typeof t.length)}function o(){}function a(t,e){return function(){t.apply(e,arguments)}}function s(t){if(!(this instanceof s))throw new TypeError("Promises must be constructed via new");if("function"!==typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],f(t,this)}function l(t,e){while(3===t._state)t=t._value;0!==t._state?(t._handled=!0,s._immediateFn((function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(i){return void c(e.promise,i)}u(e.promise,r)}else(1===t._state?u:c)(e.promise,t._value)}))):t._deferreds.push(e)}function u(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===typeof e||"function"===typeof e)){var n=e.then;if(e instanceof s)return t._state=3,t._value=e,void h(t);if("function"===typeof n)return void f(a(n,e),t)}t._state=1,t._value=e,h(t)}catch(r){c(t,r)}}function c(t,e){t._state=2,t._value=e,h(t)}function h(t){2===t._state&&0===t._deferreds.length&&s._immediateFn((function(){t._handled||s._unhandledRejectionFn(t._value)}));for(var e=0,n=t._deferreds.length;e<n;e++)l(t,t._deferreds[e]);t._deferreds=null}function d(t,e,n){this.onFulfilled="function"===typeof t?t:null,this.onRejected="function"===typeof e?e:null,this.promise=n}function f(t,e){var n=!1;try{t((function(t){n||(n=!0,u(e,t))}),(function(t){n||(n=!0,c(e,t))}))}catch(r){if(n)return;n=!0,c(e,r)}}s.prototype["catch"]=function(t){return this.then(null,t)},s.prototype.then=function(t,e){var n=new this.constructor(o);return l(this,new d(t,e,n)),n},s.prototype["finally"]=e,s.all=function(t){return new s((function(e,n){if(!i(t))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var o=r.length;function a(t,i){try{if(i&&("object"===typeof i||"function"===typeof i)){var s=i.then;if("function"===typeof s)return void s.call(i,(function(e){a(t,e)}),n)}r[t]=i,0===--o&&e(r)}catch(l){n(l)}}for(var s=0;s<r.length;s++)a(s,r[s])}))},s.allSettled=n,s.resolve=function(t){return t&&"object"===typeof t&&t.constructor===s?t:new s((function(e){e(t)}))},s.reject=function(t){return new s((function(e,n){n(t)}))},s.race=function(t){return new s((function(e,n){if(!i(t))return n(new TypeError("Promise.race accepts an array"));for(var r=0,o=t.length;r<o;r++)s.resolve(t[r]).then(e,n)}))},s._immediateFn="function"===typeof setImmediate&&function(t){setImmediate(t)}||function(t){r(t,0)},s._unhandledRejectionFn=function(t){"undefined"!==typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var p=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof t)return t;throw new Error("unable to locate global object")}();"function"!==typeof p["Promise"]?p["Promise"]=s:(p.Promise.prototype["finally"]||(p.Promise.prototype["finally"]=e),p.Promise.allSettled||(p.Promise.allSettled=n))}))}).call(this,n("c8ba"))},"14f7":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("20e73");function i(t,e,n){var i=[0,0,0,0,0,0,0,0,0];return r.mat3.fromTranslation(i,n),r.mat3.multiply(t,i,e)}function o(t,e,n){var i=[0,0,0,0,0,0,0,0,0];return r.mat3.fromRotation(i,n),r.mat3.multiply(t,i,e)}function a(t,e,n){var i=[0,0,0,0,0,0,0,0,0];return r.mat3.fromScaling(i,n),r.mat3.multiply(t,i,e)}function s(t,e,n){return r.mat3.multiply(t,n,e)}function l(t,e){for(var n=t?[].concat(t):[1,0,0,0,1,0,0,0,1],r=0,l=e.length;r<l;r++){var u=e[r];switch(u[0]){case"t":i(n,n,[u[1],u[2]]);break;case"s":a(n,n,[u[1],u[2]]);break;case"r":o(n,n,u[1]);break;case"m":s(n,n,u[1]);break;default:break}}return n}function u(t,e){return t[0]*e[1]-e[0]*t[1]}function c(t,e,n){var i=r.vec2.angle(t,e),o=u(t,e)>=0;return n?o?2*Math.PI-i:i:o?i:2*Math.PI-i}function h(t,e,n){return n?(t[0]=e[1],t[1]=-1*e[0]):(t[0]=-1*e[1],t[1]=e[0]),t}e.leftTranslate=i,e.leftRotate=o,e.leftScale=a,e.transform=l,e.direction=u,e.angleTo=c,e.vertical=h},"15b5":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.forceNBody=void 0;var r=n("80ef"),i=.81,o=.1;function a(t,e,n,i,o){var a=n/i,l=t.map((function(t,n){var r=e[t.id],i=r.data,o=r.x,s=r.y,l=r.size,u=i.layout.force.nodeStrength;return{x:o,y:s,size:l,index:n,vx:0,vy:0,weight:a*u}})),c=(0,r.quadtree)(l,(function(t){return t.x}),(function(t){return t.y})).visitAfter(s);return l.forEach((function(t){u(t,c)})),l.map((function(n,r){var i=e[t[r].id],a=i.data.layout.force.mass,s=void 0===a?1:a;o[2*r]=n.vx/s,o[2*r+1]=n.vy/s})),o}function s(t){var e=0,n=0,r=0;if(t.length){for(var i=0;i<4;i++){var o=t[i];o&&o.weight&&(e+=o.weight,n+=o.x*o.weight,r+=o.y*o.weight)}t.x=n/e,t.y=r/e,t.weight=e}else{o=t;t.x=o.data.x,t.y=o.data.y,t.weight=o.data.weight}}e.forceNBody=a;var l=function(t,e,n,r,a,s){var l=s.x-t.x||o,u=s.y-t.y||o,c=r-e,h=l*l+u*u,d=Math.sqrt(h)*h;if(c*c*i<h){var f=t.weight/d;return s.vx+=l*f,s.vy+=u*f,!0}if(t.length)return!1;if(t.data!==s){f=t.data.weight/d;s.vx+=l*f,s.vy+=u*f}};function u(t,e){e.visit((function(e,n,r,i,o){return l(e,n,r,i,o,t)}))}},1683:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"GADDIAsync",{enumerable:!0,get:function(){return r.GADDIAsync}}),Object.defineProperty(e,"connectedComponentAsync",{enumerable:!0,get:function(){return r.connectedComponentAsync}}),e.default=void 0,Object.defineProperty(e,"detectAllCyclesAsync",{enumerable:!0,get:function(){return r.detectAllCyclesAsync}}),Object.defineProperty(e,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return r.detectAllDirectedCycleAsync}}),Object.defineProperty(e,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return r.detectAllUndirectedCycleAsync}}),Object.defineProperty(e,"detectCycleAsync",{enumerable:!0,get:function(){return r.detectCycleAsync}}),e.detectDirectedCycleAsync=void 0,Object.defineProperty(e,"dijkstraAsync",{enumerable:!0,get:function(){return r.dijkstraAsync}}),Object.defineProperty(e,"findAllPathAsync",{enumerable:!0,get:function(){return r.findAllPathAsync}}),Object.defineProperty(e,"findShortestPathAsync",{enumerable:!0,get:function(){return r.findShortestPathAsync}}),Object.defineProperty(e,"floydWarshallAsync",{enumerable:!0,get:function(){return r.floydWarshallAsync}}),Object.defineProperty(e,"getAdjMatrixAsync",{enumerable:!0,get:function(){return r.getAdjMatrixAsync}}),Object.defineProperty(e,"getDegreeAsync",{enumerable:!0,get:function(){return r.getDegreeAsync}}),Object.defineProperty(e,"getInDegreeAsync",{enumerable:!0,get:function(){return r.getInDegreeAsync}}),Object.defineProperty(e,"getNeighborsAsync",{enumerable:!0,get:function(){return r.getNeighborsAsync}}),Object.defineProperty(e,"getOutDegreeAsync",{enumerable:!0,get:function(){return r.getOutDegreeAsync}}),Object.defineProperty(e,"labelPropagationAsync",{enumerable:!0,get:function(){return r.labelPropagationAsync}}),Object.defineProperty(e,"louvainAsync",{enumerable:!0,get:function(){return r.louvainAsync}}),Object.defineProperty(e,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return r.minimumSpanningTreeAsync}}),Object.defineProperty(e,"pageRankAsync",{enumerable:!0,get:function(){return r.pageRankAsync}});var r=n("e98d"),i=r.detectCycleAsync;e.detectDirectedCycleAsync=i;var o={getAdjMatrixAsync:r.getAdjMatrixAsync,connectedComponentAsync:r.connectedComponentAsync,getDegreeAsync:r.getDegreeAsync,getInDegreeAsync:r.getInDegreeAsync,getOutDegreeAsync:r.getOutDegreeAsync,detectCycleAsync:r.detectCycleAsync,detectDirectedCycleAsync:i,detectAllCyclesAsync:r.detectAllCyclesAsync,detectAllDirectedCycleAsync:r.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:r.detectAllUndirectedCycleAsync,dijkstraAsync:r.dijkstraAsync,findAllPathAsync:r.findAllPathAsync,findShortestPathAsync:r.findShortestPathAsync,floydWarshallAsync:r.floydWarshallAsync,labelPropagationAsync:r.labelPropagationAsync,louvainAsync:r.louvainAsync,minimumSpanningTreeAsync:r.minimumSpanningTreeAsync,pageRankAsync:r.pageRankAsync,getNeighborsAsync:r.getNeighborsAsync,GADDIAsync:r.GADDIAsync};e.default=o},"16c7":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t,e){var n=t.nodes,r=t.edges,i=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach((function(t,e){o[t.id]=e;var n=[];i.push(n)})),r&&r.forEach((function(t){var n=t.source,r=t.target,a=o[n],s=o[r];!a&&0!==a||!s&&0!==s||(i[a][s]=1,e||(i[s][a]=1))})),i},i=r;e.default=i},1715:function(t,e,n){"use strict";var r=n("3913"),i=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=h;var o=Object.create(n("3a7c"));o.inherits=n("3fb5");var a=n("8b77"),s=n("5bc2");o.inherits(h,a);for(var l=i(s.prototype),u=0;u<l.length;u++){var c=l[u];h.prototype[c]||(h.prototype[c]=s.prototype[c])}function h(t){if(!(this instanceof h))return new h(t);a.call(this,t),s.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",d)}function d(){this.allowHalfOpen||this._writableState.ended||r.nextTick(f,this)}function f(t){t.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),h.prototype._destroy=function(t,e){this.push(null),this.end(),r.nextTick(e,t)}},"18fc":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.clusterBundle=e.clusterCode=e.fruchtermanBundle=e.fruchtermanCode=void 0,e.fruchtermanCode="\nimport { globalInvocationID } from 'g-webgpu';\nconst MAX_EDGE_PER_VERTEX;\nconst VERTEX_COUNT;\n@numthreads(1, 1, 1)\nclass Fruchterman {\n  @in @out\n  u_Data: vec4[];\n  @in\n  u_K: float;\n  @in\n  u_K2: float;\n  \n  @in\n  u_Center: vec2;\n  @in\n  u_Gravity: float;\n  @in\n  u_ClusterGravity: float;\n  @in\n  u_Speed: float;\n  @in\n  u_MaxDisplace: float;\n  @in\n  u_Clustering: float;\n  @in\n  u_AttributeArray: vec4[];\n  @in\n  u_ClusterCenters: vec4[];\n  calcRepulsive(i: int, currentNode: vec4): vec2 {\n    let dx = 0, dy = 0;\n    for (let j = 0; j < VERTEX_COUNT; j++) {\n      if (i != j) {\n        const nextNode = this.u_Data[j];\n        const xDist = currentNode[0] - nextNode[0];\n        const yDist = currentNode[1] - nextNode[1];\n        const dist = (xDist * xDist + yDist * yDist) + 0.01;\n        let param = this.u_K2 / dist;\n        \n        if (dist > 0.0) {\n          dx += param * xDist;\n          dy += param * yDist;\n          if (xDist == 0 && yDist == 0) {\n            const sign = i < j ? 1 : -1;\n            dx += param * sign;\n            dy += param * sign;\n          }\n        }\n      }\n    }\n    return [dx, dy];\n  }\n  calcGravity(currentNode: vec4, nodeAttributes: vec4): vec2 { // \n    let dx = 0, dy = 0;\n    const vx = currentNode[0] - this.u_Center[0];\n    const vy = currentNode[1] - this.u_Center[1];\n    const gf = 0.01 * this.u_K * this.u_Gravity;\n    dx = gf * vx;\n    dy = gf * vy;\n    if (this.u_Clustering == 1) {\n      const clusterIdx = int(nodeAttributes[0]);\n      const center = this.u_ClusterCenters[clusterIdx];\n      const cvx = currentNode[0] - center[0];\n      const cvy = currentNode[1] - center[1];\n      const dist = sqrt(cvx * cvx + cvy * cvy) + 0.01;\n      const parma = this.u_K * this.u_ClusterGravity / dist;\n      dx += parma * cvx;\n      dy += parma * cvy;\n    }\n    return [dx, dy];\n  }\n  calcAttractive(i: int, currentNode: vec4): vec2 {\n    let dx = 0, dy = 0;\n    const arr_offset = int(floor(currentNode[2] + 0.5));\n    const length = int(floor(currentNode[3] + 0.5));\n    const node_buffer: vec4;\n    for (let p = 0; p < MAX_EDGE_PER_VERTEX; p++) {\n      if (p >= length) break;\n      const arr_idx = arr_offset + p;\n      // when arr_idx % 4 == 0 update currentNodedx_buffer\n      const buf_offset = arr_idx - arr_idx / 4 * 4;\n      if (p == 0 || buf_offset == 0) {\n        node_buffer = this.u_Data[int(arr_idx / 4)];\n      }\n      const float_j = buf_offset == 0 ? node_buffer[0] :\n                      buf_offset == 1 ? node_buffer[1] :\n                      buf_offset == 2 ? node_buffer[2] :\n                                        node_buffer[3];\n      const nextNode = this.u_Data[int(float_j)];\n      const xDist = currentNode[0] - nextNode[0];\n      const yDist = currentNode[1] - nextNode[1];\n      const dist = sqrt(xDist * xDist + yDist * yDist) + 0.01;\n      let attractiveF = dist / this.u_K;\n    \n      if (dist > 0.0) {\n        dx -= xDist * attractiveF;\n        dy -= yDist * attractiveF;\n        if (xDist == 0 && yDist == 0) {\n          const sign = i < int(float_j) ? 1 : -1;\n          dx -= sign * attractiveF;\n          dy -= sign * attractiveF;\n        }\n      }\n    }\n    return [dx, dy];\n  }\n  @main\n  compute() {\n    const i = globalInvocationID.x;\n    const currentNode = this.u_Data[i];\n    let dx = 0, dy = 0;\n    if (i >= VERTEX_COUNT) {\n      this.u_Data[i] = currentNode;\n      return;\n    }\n\n    // [gravity, fx, fy, 0]\n    const nodeAttributes = this.u_AttributeArray[i];\n\n    if (nodeAttributes[1] != 0 && nodeAttributes[2] != 0) {\n      // the node is fixed\n      this.u_Data[i] = [\n        nodeAttributes[1],\n        nodeAttributes[2],\n        currentNode[2],\n        currentNode[3]\n      ];\n      return;\n    }\n\n    // repulsive\n    const repulsive = this.calcRepulsive(i, currentNode);\n    dx += repulsive[0];\n    dy += repulsive[1];\n    // attractive\n    const attractive = this.calcAttractive(i, currentNode);\n    dx += attractive[0];\n    dy += attractive[1];\n    // gravity\n    const gravity = this.calcGravity(currentNode, nodeAttributes);\n    dx -= gravity[0];\n    dy -= gravity[1];\n    // speed\n    dx *= this.u_Speed;\n    dy *= this.u_Speed;\n\n    // move\n    const distLength = sqrt(dx * dx + dy * dy);\n    if (distLength > 0.0) {\n      const limitedDist = min(this.u_MaxDisplace * this.u_Speed, distLength);\n      this.u_Data[i] = [\n        currentNode[0] + dx / distLength * limitedDist,\n        currentNode[1] + dy / distLength * limitedDist,\n        currentNode[2],\n        currentNode[3]\n      ];\n    }\n  }\n}\n",e.fruchtermanBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',e.clusterCode="\nimport { globalInvocationID } from 'g-webgpu';\nconst VERTEX_COUNT;\nconst CLUSTER_COUNT;\n@numthreads(1, 1, 1)\nclass CalcCenter {\n  @in\n  u_Data: vec4[];\n  @in\n  u_NodeAttributes: vec4[]; // [[clusterIdx, 0, 0, 0], ...]\n  @in @out\n  u_ClusterCenters: vec4[]; // [[cx, cy, nodeCount, clusterIdx], ...]\n  @main\n  compute() {\n    const i = globalInvocationID.x;\n    const center = this.u_ClusterCenters[i];\n    let sumx = 0;\n    let sumy = 0;\n    let count = 0;\n    for (let j = 0; j < VERTEX_COUNT; j++) {\n      const attributes = this.u_NodeAttributes[j];\n      const clusterIdx = int(attributes[0]);\n      const vertex = this.u_Data[j];\n      if (clusterIdx == i) {\n        sumx += vertex.x;\n        sumy += vertex.y;\n        count += 1;\n      }\n    }\n    this.u_ClusterCenters[i] = [\n      sumx / count,\n      sumy / count,\n      count,\n      i\n    ];\n  }\n}\n",e.clusterBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}'},1985:function(t,e,n){(function(t,r){var i;/*! https://mths.be/punycode v1.4.1 by @mathias */(function(o){e&&e.nodeType,t&&t.nodeType;var a="object"==typeof r&&r;a.global!==a&&a.window!==a&&a.self;var s,l=2147483647,u=36,c=1,h=26,d=38,f=700,p=72,g=128,m="-",y=/^xn--/,v=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=u-c,w=Math.floor,S=String.fromCharCode;function E(t){throw new RangeError(_[t])}function C(t,e){var n=t.length,r=[];while(n--)r[n]=e(t[n]);return r}function M(t,e){var n=t.split("@"),r="";n.length>1&&(r=n[0]+"@",t=n[1]),t=t.replace(b,".");var i=t.split("."),o=C(i,e).join(".");return r+o}function T(t){var e,n,r=[],i=0,o=t.length;while(i<o)e=t.charCodeAt(i++),e>=55296&&e<=56319&&i<o?(n=t.charCodeAt(i++),56320==(64512&n)?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--)):r.push(e);return r}function A(t){return C(t,(function(t){var e="";return t>65535&&(t-=65536,e+=S(t>>>10&1023|55296),t=56320|1023&t),e+=S(t),e})).join("")}function O(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:u}function k(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function I(t,e,n){var r=0;for(t=n?w(t/f):t>>1,t+=w(t/e);t>x*h>>1;r+=u)t=w(t/x);return w(r+(x+1)*t/(t+d))}function P(t){var e,n,r,i,o,a,s,d,f,y,v=[],b=t.length,_=0,x=g,S=p;for(n=t.lastIndexOf(m),n<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&E("not-basic"),v.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<b;){for(o=_,a=1,s=u;;s+=u){if(i>=b&&E("invalid-input"),d=O(t.charCodeAt(i++)),(d>=u||d>w((l-_)/a))&&E("overflow"),_+=d*a,f=s<=S?c:s>=S+h?h:s-S,d<f)break;y=u-f,a>w(l/y)&&E("overflow"),a*=y}e=v.length+1,S=I(_-o,e,0==o),w(_/e)>l-x&&E("overflow"),x+=w(_/e),_%=e,v.splice(_++,0,x)}return A(v)}function L(t){var e,n,r,i,o,a,s,d,f,y,v,b,_,x,C,M=[];for(t=T(t),b=t.length,e=g,n=0,o=p,a=0;a<b;++a)v=t[a],v<128&&M.push(S(v));r=i=M.length,i&&M.push(m);while(r<b){for(s=l,a=0;a<b;++a)v=t[a],v>=e&&v<s&&(s=v);for(_=r+1,s-e>w((l-n)/_)&&E("overflow"),n+=(s-e)*_,e=s,a=0;a<b;++a)if(v=t[a],v<e&&++n>l&&E("overflow"),v==e){for(d=n,f=u;;f+=u){if(y=f<=o?c:f>=o+h?h:f-o,d<y)break;C=d-y,x=u-y,M.push(S(k(y+C%x,0))),d=w(C/x)}M.push(S(k(d,0))),o=I(n,_,r==i),n=0,++r}++n,++e}return M.join("")}function N(t){return M(t,(function(t){return y.test(t)?P(t.slice(4).toLowerCase()):t}))}function R(t){return M(t,(function(t){return v.test(t)?"xn--"+L(t):t}))}s={version:"1.4.1",ucs2:{decode:T,encode:A},decode:P,encode:L,toASCII:R,toUnicode:N},i=function(){return s}.call(e,n,e,t),void 0===i||(t.exports=i)})()}).call(this,n("62e4")(t),n("c8ba"))},"19d2":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getCoreNodeAndRelativeLeafNodes=e.getAvgNodePosition=e.getLayoutBBox=e.traverseTreeUp=e.scaleMatrix=e.getAdjMatrix=e.floydWarshall=e.getDegreeMap=e.getDegree=e.getEdgeTerminal=void 0;var r=n("910e"),i=n("4b03"),o=n("291d"),a=function(t,e){var n=t[e];return(0,o.isObject)(n)?n.cell:n};e.getEdgeTerminal=a;var s=function(t,n,r){for(var i=[],o=0;o<t;o++)i[o]={in:0,out:0,all:0};return r?(r.forEach((function(t){var r=(0,e.getEdgeTerminal)(t,"source"),o=(0,e.getEdgeTerminal)(t,"target");r&&i[n[r]]&&(i[n[r]].out+=1,i[n[r]].all+=1),o&&i[n[o]]&&(i[n[o]].in+=1,i[n[o]].all+=1)})),i):i};e.getDegree=s;var l=function(t,n){var r={};return t.forEach((function(t){r[t.id]={in:0,out:0,all:0}})),n?(n.forEach((function(t){var n=(0,e.getEdgeTerminal)(t,"source"),i=(0,e.getEdgeTerminal)(t,"target");n&&(r[n].out+=1,r[n].all+=1),i&&(r[i].in+=1,r[i].all+=1)})),r):r};e.getDegreeMap=l;var u=function(t){for(var e=[],n=t.length,r=0;r<n;r+=1){e[r]=[];for(var i=0;i<n;i+=1)r===i?e[r][i]=0:0!==t[r][i]&&t[r][i]?e[r][i]=t[r][i]:e[r][i]=1/0}for(var o=0;o<n;o+=1)for(r=0;r<n;r+=1)for(i=0;i<n;i+=1)e[r][i]>e[r][o]+e[o][i]&&(e[r][i]=e[r][o]+e[o][i]);return e};e.floydWarshall=u;var c=function(t,n){var r=t.nodes,i=t.edges,o=[],a={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach((function(t,e){a[t.id]=e;var n=[];o.push(n)})),null===i||void 0===i||i.forEach((function(t){var r=(0,e.getEdgeTerminal)(t,"source"),i=(0,e.getEdgeTerminal)(t,"target"),s=a[r],l=a[i];void 0!==s&&void 0!==l&&(o[s][l]=1,n||(o[l][s]=1))})),o};e.getAdjMatrix=c;var h=function(t,e){var n=[];return t.forEach((function(t){var r=[];t.forEach((function(t){r.push(t*e)})),n.push(r)})),n};e.scaleMatrix=h;var d=function(t,e){if(t&&t.children)for(var n=t.children.length-1;n>=0;n--)if(!d(t.children[n],e))return;return!!e(t)},f=function(t,e){"function"===typeof e&&d(t,e)};e.traverseTreeUp=f;var p=function(t){var e=1/0,n=1/0,o=-1/0,a=-1/0;return t.forEach((function(t){var s=t.size;(0,r.isArray)(s)?1===s.length&&(s=[s[0],s[0]]):(0,i.isNumber)(s)?s=[s,s]:(void 0===s||isNaN(s))&&(s=[30,30]);var l=[s[0]/2,s[1]/2],u=t.x-l[0],c=t.x+l[0],h=t.y-l[1],d=t.y+l[1];e>u&&(e=u),n>h&&(n=h),o<c&&(o=c),a<d&&(a=d)})),{minX:e,minY:n,maxX:o,maxY:a}};e.getLayoutBBox=p;var g=function(t){var e={x:0,y:0};t.forEach((function(t){e.x+=t.x||0,e.y+=t.y||0}));var n=t.length||1;return{x:e.x/n,y:e.y/n}};e.getAvgNodePosition=g;var m=function(t,e,n){var r,i;return"source"===t?(null===(r=null===n||void 0===n?void 0:n.find((function(t){return t.target===e.id})))||void 0===r?void 0:r.source)||{}:(null===(i=null===n||void 0===n?void 0:n.find((function(t){return t.source===e.id})))||void 0===i?void 0:i.target)||{}},y=function(t,e,n){var r=[];switch(t){case"source":r=null===n||void 0===n?void 0:n.filter((function(t){return t.source===e.id})).map((function(t){return t.target}));break;case"target":r=null===n||void 0===n?void 0:n.filter((function(t){return t.target===e.id})).map((function(t){return t.source}));break;case"both":r=null===n||void 0===n?void 0:n.filter((function(t){return t.source===e.id})).map((function(t){return t.target})).concat(null===n||void 0===n?void 0:n.filter((function(t){return t.target===e.id})).map((function(t){return t.source})));break;default:break}var i=new Set(r);return Array.from(i)},v=function(t,e,n,r,i){var o=n[e]||"",a=(null===r||void 0===r?void 0:r.filter((function(t){return t[e]===o})))||[];return"leaf"===t&&(a=a.filter((function(t){var e,n;return 0===(null===(e=i[t.id])||void 0===e?void 0:e.in)||0===(null===(n=i[t.id])||void 0===n?void 0:n.out)}))),a},b=function(t,e,n,r,i,o){var a=i[e.id],s=a.in,l=a.out,u=e,c=[];0===s?(u=m("source",e,n),c=y("both",u,n).map((function(t){return o[t]}))):0===l&&(u=m("target",e,n),c=y("both",u,n).map((function(t){return o[t]}))),c=c.filter((function(t){return i[t.id]&&(0===i[t.id].in||0===i[t.id].out)}));var h=v(t,r,e,c,i);return{coreNode:u,relativeLeafNodes:c,sameTypeLeafNodes:h}};e.getCoreNodeAndRelativeLeafNodes=b},"19ed":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["completion_fields","fielddata_fields","fields","groups","level","types","include_segment_file_sizes","pretty","human","error_trace","source","filter_path"],a={completionFields:"completion_fields",fielddataFields:"fielddata_fields",includeSegmentFileSizes:"include_segment_file_sizes",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,metric:f,...p}=t;p=i(o,a,p,u),null==c&&(c="GET");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m=null!=d&&null!=f?"/"+encodeURIComponent(d)+"/_stats/"+encodeURIComponent(f):null!=f?"/_stats/"+encodeURIComponent(f):null!=d?"/"+encodeURIComponent(d)+"/_stats":"/_stats";const y={method:c,path:m,body:null,querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},"1a2d8":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["master_timeout","wait_for_completion","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",waitForCompletion:"wait_for_completion",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["repository"]){const t=new n("Missing required parameter: repository");return r(t,l)}if(null==t["snapshot"]){const t=new n("Missing required parameter: snapshot");return r(t,l)}if(null!=t["snapshot"]&&null==t["repository"]){const t=new n("Missing required parameter of the url: repository");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,repository:d,snapshot:f,...p}=t;p=i(o,a,p,u),null==c&&(c="POST");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m="/_snapshot/"+encodeURIComponent(d)+"/"+encodeURIComponent(f)+"/_restore";const y={method:c,path:m,body:h||"",querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},"1a73":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["dry_run","explain","retry_failed","metric","master_timeout","timeout","pretty","human","error_trace","source","filter_path"],a={dryRun:"dry_run",retryFailed:"retry_failed",masterTimeout:"master_timeout",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,...d}=t;d=i(o,a,d,u),null==c&&(c="POST");var f=s.ignore;"number"===typeof f&&(s.ignore=[f]);var p="";p="/_cluster/reroute";const g={method:c,path:p,body:h||"",querystring:d};return s.warnings=0===u.length?null:u,e(g,s,l)}}t.exports=r},"1ab9":function(t,e,n){var r=n("4f4d"),i=n("2514"),o=Object.hasOwnProperty,a=Object.create(null);for(var s in r)o.call(r,s)&&(a[r[s]]=s);var l=t.exports={to:{},get:{}};function u(t,e,n){return Math.min(Math.max(e,t),n)}function c(t){var e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}l.get=function(t){var e,n,r=t.substring(0,3).toLowerCase();switch(r){case"hsl":e=l.get.hsl(t),n="hsl";break;case"hwb":e=l.get.hwb(t),n="hwb";break;default:e=l.get.rgb(t),n="rgb";break}return e?{model:n,value:e}:null},l.get.rgb=function(t){if(!t)return null;var e,n,i,a=/^#([a-f0-9]{3,4})$/i,s=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,l=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,c=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,h=/^(\w+)$/,d=[0,0,0,1];if(e=t.match(s)){for(i=e[2],e=e[1],n=0;n<3;n++){var f=2*n;d[n]=parseInt(e.slice(f,f+2),16)}i&&(d[3]=parseInt(i,16)/255)}else if(e=t.match(a)){for(e=e[1],i=e[3],n=0;n<3;n++)d[n]=parseInt(e[n]+e[n],16);i&&(d[3]=parseInt(i+i,16)/255)}else if(e=t.match(l)){for(n=0;n<3;n++)d[n]=parseInt(e[n+1],0);e[4]&&(e[5]?d[3]=.01*parseFloat(e[4]):d[3]=parseFloat(e[4]))}else{if(!(e=t.match(c)))return(e=t.match(h))?"transparent"===e[1]?[0,0,0,0]:o.call(r,e[1])?(d=r[e[1]],d[3]=1,d):null:null;for(n=0;n<3;n++)d[n]=Math.round(2.55*parseFloat(e[n+1]));e[4]&&(e[5]?d[3]=.01*parseFloat(e[4]):d[3]=parseFloat(e[4]))}for(n=0;n<3;n++)d[n]=u(d[n],0,255);return d[3]=u(d[3],0,1),d},l.get.hsl=function(t){if(!t)return null;var e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=t.match(e);if(n){var r=parseFloat(n[4]),i=(parseFloat(n[1])%360+360)%360,o=u(parseFloat(n[2]),0,100),a=u(parseFloat(n[3]),0,100),s=u(isNaN(r)?1:r,0,1);return[i,o,a,s]}return null},l.get.hwb=function(t){if(!t)return null;var e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=t.match(e);if(n){var r=parseFloat(n[4]),i=(parseFloat(n[1])%360+360)%360,o=u(parseFloat(n[2]),0,100),a=u(parseFloat(n[3]),0,100),s=u(isNaN(r)?1:r,0,1);return[i,o,a,s]}return null},l.to.hex=function(){var t=i(arguments);return"#"+c(t[0])+c(t[1])+c(t[2])+(t[3]<1?c(Math.round(255*t[3])):"")},l.to.rgb=function(){var t=i(arguments);return t.length<4||1===t[3]?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"},l.to.rgb.percent=function(){var t=i(arguments),e=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),r=Math.round(t[2]/255*100);return t.length<4||1===t[3]?"rgb("+e+"%, "+n+"%, "+r+"%)":"rgba("+e+"%, "+n+"%, "+r+"%, "+t[3]+")"},l.to.hsl=function(){var t=i(arguments);return t.length<4||1===t[3]?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"},l.to.hwb=function(){var t=i(arguments),e="";return t.length>=4&&1!==t[3]&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"},l.to.keyword=function(t){return a[t.slice(0,3)]}},"1ad6":function(t,e,n){t.exports=n("faa1").EventEmitter},"1aef":function(t,e){var n=[],r=[],i="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function o(t,e){if(e=e||{},void 0===t)throw new Error(i);var o,s=!0===e.prepend?"prepend":"append",l=void 0!==e.container?e.container:document.querySelector("head"),u=n.indexOf(l);return-1===u&&(u=n.push(l)-1,r[u]={}),void 0!==r[u]&&void 0!==r[u][s]?o=r[u][s]:(o=r[u][s]=a(),"prepend"===s?l.insertBefore(o,l.childNodes[0]):l.appendChild(o)),65279===t.charCodeAt(0)&&(t=t.substr(1,t.length)),o.styleSheet?o.styleSheet.cssText+=t:o.textContent+=t,o}function a(){var t=document.createElement("style");return t.setAttribute("type","text/css"),t}t.exports=o,t.exports.insertCss=o},"1d07":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["flat_settings","master_timeout","timeout","pretty","human","error_trace","source","filter_path"],a={flatSettings:"flat_settings",masterTimeout:"master_timeout",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,...d}=t;d=i(o,a,d,u),null==c&&(c="PUT");var f=s.ignore;"number"===typeof f&&(s.ignore=[f]);var p="";p="/_cluster/settings";const g={method:c,path:p,body:h||"",querystring:d};return s.warnings=0===u.length?null:u,e(g,s,l)}}t.exports=r},"1d7c":function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.width=e.sep=e.positionX=e.balance=e.alignCoordinates=e.findSmallestWidthAlignment=e.buildBlockGraph=e.horizontalCompaction=e.verticalAlignment=e.hasConflict=e.addConflict=e.findOtherInnerSegmentNode=e.findType2Conflicts=e.findType1Conflicts=void 0;var i=n("1de0"),o=n("f893e"),a=n("7908"),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(i.Graph),l=function(t,n){var r={},i=function(n,i){var o=0,a=0,s=n.length,l=null===i||void 0===i?void 0:i[(null===i||void 0===i?void 0:i.length)-1];return null===i||void 0===i||i.forEach((function(n,u){var c,h=(0,e.findOtherInnerSegmentNode)(t,n),d=h?t.node(h).order:s;(h||n===l)&&(null===(c=i.slice(a,u+1))||void 0===c||c.forEach((function(n){var i;null===(i=t.predecessors(n))||void 0===i||i.forEach((function(i){var a,s=t.node(i),l=s.order;!(l<o||d<l)||s.dummy&&(null===(a=t.node(n))||void 0===a?void 0:a.dummy)||(0,e.addConflict)(r,i,n)}))})),a=u+1,o=d)})),i};return(null===n||void 0===n?void 0:n.length)&&n.reduce(i),r};e.findType1Conflicts=l;var u=function(t,n){var r={};function i(n,i,o,a,s){for(var l,u,c,h=i;h<o;h++)c=n[h],(null===(l=t.node(c))||void 0===l?void 0:l.dummy)&&(null===(u=t.predecessors(c))||void 0===u||u.forEach((function(n){var i=t.node(n);i.dummy&&(i.order<a||i.order>s)&&(0,e.addConflict)(r,n,c)})))}function o(t){return JSON.stringify(t.slice(1))}function a(t,e){var n=o(t);e.get(n)||(i.apply(void 0,t),e.set(n,!0))}var s=function(e,n){var r,i=-1,o=0,s=new Map;return null===n||void 0===n||n.forEach((function(l,u){var c;if("border"===(null===(c=t.node(l))||void 0===c?void 0:c.dummy)){var h=t.predecessors(l)||[];h.length&&(r=t.node(h[0]).order,a([n,o,u,i,r],s),o=u,i=r)}a([n,o,n.length,r,e.length],s)})),n};return(null===n||void 0===n?void 0:n.length)&&n.reduce(s),r};e.findType2Conflicts=u;var c=function(t,e){var n,r;if(null===(n=t.node(e))||void 0===n?void 0:n.dummy)return null===(r=t.predecessors(e))||void 0===r?void 0:r.find((function(e){return t.node(e).dummy}))};e.findOtherInnerSegmentNode=c;var h=function(t,e,n){var r=e,i=n;if(r>i){var o=r;r=i,i=o}var a=t[r];a||(t[r]=a={}),a[i]=!0};e.addConflict=h;var d=function(t,e,n){var r=e,i=n;if(r>i){var o=e;r=i,i=o}return!!t[r]};e.hasConflict=d;var f=function(t,n,r,i){var o={},a={},s={};return null===n||void 0===n||n.forEach((function(t){null===t||void 0===t||t.forEach((function(t,e){o[t]=t,a[t]=t,s[t]=e}))})),null===n||void 0===n||n.forEach((function(t){var n=-1;null===t||void 0===t||t.forEach((function(t){var l=i(t);if(l.length){l=l.sort((function(t,e){return s[t]-s[e]}));for(var u=(l.length-1)/2,c=Math.floor(u),h=Math.ceil(u);c<=h;++c){var d=l[c];a[t]===t&&n<s[d]&&!(0,e.hasConflict)(r,t,d)&&(a[d]=t,a[t]=o[t]=o[d],n=s[d])}}}))})),{root:o,align:a}};e.verticalAlignment=f;var p=function(t,n,r,i,o){var a,s={},l=(0,e.buildBlockGraph)(t,n,r,o),u=o?"borderLeft":"borderRight",c=function(t,e){var n=l.nodes(),r=n.pop(),i={};while(r)i[r]?t(r):(i[r]=!0,n.push(r),n=n.concat(e(r))),r=n.pop()},h=function(t){s[t]=(l.inEdges(t)||[]).reduce((function(t,e){return Math.max(t,(s[e.v]||0)+l.edge(e))}),0)},d=function(e){var n=(l.outEdges(e)||[]).reduce((function(t,e){return Math.min(t,(s[e.w]||0)-l.edge(e))}),Number.POSITIVE_INFINITY),r=t.node(e);n!==Number.POSITIVE_INFINITY&&r.borderType!==u&&(s[e]=Math.max(s[e],n))};return c(h,l.predecessors.bind(l)),c(d,l.successors.bind(l)),null===(a=Object.values(i))||void 0===a||a.forEach((function(t){s[t]=s[r[t]]})),s};e.horizontalCompaction=p;var g=function(t,n,r,i){var o=new s,a=t.graph(),l=(0,e.sep)(a.nodesep,a.edgesep,i);return null===n||void 0===n||n.forEach((function(e){var n;null===e||void 0===e||e.forEach((function(e){var i=r[e];if(o.setNode(i),n){var a=r[n],s=o.edgeFromArgs(a,i);o.setEdge(a,i,Math.max(l(t,e,n),s||0))}n=e}))})),o};e.buildBlockGraph=g;var m=function(t,n){return(0,a.minBy)(Object.values(n),(function(n){var r,i=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return null===(r=Object.keys(n))||void 0===r||r.forEach((function(r){var a=n[r],s=(0,e.width)(t,r)/2;i=Math.max(a+s,i),o=Math.min(a-s,o)})),i-o}))};function y(t,e){var n=Object.values(e),r=(0,o.min)(n),i=(0,o.max)(n);["u","d"].forEach((function(n){["l","r"].forEach((function(a){var s,l=n+a,u=t[l];if(u!==e){var c=Object.values(u);s="l"===a?r-(0,o.min)(c):i-(0,o.max)(c),s&&(t[l]={},Object.keys(u).forEach((function(e){t[l][e]=u[e]+s})))}}))}))}e.findSmallestWidthAlignment=m,e.alignCoordinates=y;var v=function(t,e){var n={};return Object.keys(t.ul).forEach((function(r){if(e)n[r]=t[e.toLowerCase()][r];else{var i=Object.values(t).map((function(t){return t[r]}));n[r]=(i[0]+i[1])/2}})),n};e.balance=v;var b=function(t){var n,r=(0,a.buildLayerMatrix)(t),i=Object.assign((0,e.findType1Conflicts)(t,r),(0,e.findType2Conflicts)(t,r)),o={};["u","d"].forEach((function(a){n="u"===a?r:Object.values(r).reverse(),["l","r"].forEach((function(r){"r"===r&&(n=n.map((function(t){return Object.values(t).reverse()})));var s=("u"===a?t.predecessors:t.successors).bind(t),l=(0,e.verticalAlignment)(t,n,i,s),u=(0,e.horizontalCompaction)(t,n,l.root,l.align,"r"===r);"r"===r&&Object.keys(u).forEach((function(t){u[t]=-u[t]})),o[a+r]=u}))}));var s=(0,e.findSmallestWidthAlignment)(t,o);return y(o,s),(0,e.balance)(o,t.graph().align)};e.positionX=b;var _=function(t,e,n){return function(r,i,o){var a,s=r.node(i),l=r.node(o),u=0;if(u+=s.width/2,s.hasOwnProperty("labelpos"))switch((s.labelpos||"").toLowerCase()){case"l":a=-s.width/2;break;case"r":a=s.width/2;break}if(a&&(u+=n?a:-a),a=0,u+=(s.dummy?e:t)/2,u+=(l.dummy?e:t)/2,u+=l.width/2,l.labelpos)switch((l.labelpos||"").toLowerCase()){case"l":a=l.width/2;break;case"r":a=-l.width/2;break}return a&&(u+=n?a:-a),a=0,u}};e.sep=_;var x=function(t,e){return t.node(e).width||0};e.width=x},"1d89":function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"BRIDGE_GRAPH_NAME",(function(){return s})),n.d(e,"GraphType",(function(){return c})),n.d(e,"HierarchyNodeType",(function(){return h})),n.d(e,"InclusionType",(function(){return u})),n.d(e,"LAYOUT_CONFIG",(function(){return r})),n.d(e,"NodeType",(function(){return l})),n.d(e,"ROOT_NAME",(function(){return a})),n.d(e,"buildGraph",(function(){return al})),n.d(e,"flatGraph",(function(){return sl})),n.d(e,"getEdges",(function(){return ll})),n.d(e,"mergeConfig",(function(){return i}));const r={graph:{meta:{rankDir:"TB",nodeSep:50,rankSep:50,edgeSep:5,align:void 0}},subScene:{meta:{paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20,labelHeight:20}},nodeSize:{meta:{width:100,maxLabelWidth:0,height:20},node:{width:80,height:20,labelOffset:10,maxLabelWidth:40},bridge:{width:5,height:5,radius:2,labelOffset:0}}};function i(t={},e=r){var n,i,o,a;const s=JSON.parse(JSON.stringify(e)),l=(null===(n=null==t?void 0:t.graph)||void 0===n?void 0:n.meta)||{},u=(null===(i=null==t?void 0:t.subScene)||void 0===i?void 0:i.meta)||{},c=(null===(o=null==t?void 0:t.nodeSize)||void 0===o?void 0:o.meta)||{},h=(null===(a=null==t?void 0:t.nodeSize)||void 0===a?void 0:a.node)||{},d=s.nodeSize.bridge;return{graph:{meta:Object.assign(s.graph.meta,l)},subScene:{meta:Object.assign(s.subScene.meta,u)},nodeSize:{meta:Object.assign(s.nodeSize.meta,c),node:Object.assign(s.nodeSize.node,h),bridge:d}}}function o(t){return`◬${t}◬`}const a=o("ROOT"),s=o("BRIDGE_GRAPH");var l,u,c,h;!function(t){t[t.META=0]="META",t[t.NODE=1]="NODE",t[t.BRIDGE=2]="BRIDGE"}(l||(l={})),function(t){t[t.INCLUDE=0]="INCLUDE",t[t.EXCLUDE=1]="EXCLUDE",t[t.UNSPECIFIED=2]="UNSPECIFIED"}(u||(u={})),function(t){t[t.META=0]="META",t[t.CORE=1]="CORE",t[t.BRIDGE=2]="BRIDGE"}(c||(c={})),function(t){t[t.META=0]="META",t[t.OP=1]="OP",t[t.SERIES=2]="SERIES"}(h||(h={}));var d="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{};function f(t,e){return t(e={exports:{}},e.exports),e.exports}var p=function(){this.__data__=[],this.size=0},g=function(t,e){return t===e||t!=t&&e!=e},m=function(t,e){for(var n=t.length;n--;)if(g(t[n][0],e))return n;return-1},y=Array.prototype.splice,v=function(t){var e=this.__data__,n=m(e,t);return!(n<0)&&(n==e.length-1?e.pop():y.call(e,n,1),--this.size,!0)},b=function(t){var e=this.__data__,n=m(e,t);return n<0?void 0:e[n][1]},_=function(t){return m(this.__data__,t)>-1},x=function(t,e){var n=this.__data__,r=m(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function w(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}w.prototype.clear=p,w.prototype.delete=v,w.prototype.get=b,w.prototype.has=_,w.prototype.set=x;var S,E=w,C=function(){this.__data__=new E,this.size=0},M=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},T=function(t){return this.__data__.get(t)},A=function(t){return this.__data__.has(t)},O="object"==typeof d&&d&&d.Object===Object&&d,k="object"==typeof self&&self&&self.Object===Object&&self,I=O||k||Function("return this")(),P=I.Symbol,L=Object.prototype,N=L.hasOwnProperty,R=L.toString,D=P?P.toStringTag:void 0,F=function(t){var e=N.call(t,D),n=t[D];try{t[D]=void 0;var r=!0}catch(t){}var i=R.call(t);return r&&(e?t[D]=n:delete t[D]),i},j=Object.prototype.toString,B=function(t){return j.call(t)},z=P?P.toStringTag:void 0,U=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":z&&z in Object(t)?F(t):B(t)},G=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},q=function(t){if(!G(t))return!1;var e=U(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},V=I["__core-js_shared__"],H=(S=/[^.]+$/.exec(V&&V.keys&&V.keys.IE_PROTO||""))?"Symbol(src)_1."+S:"",W=function(t){return!!H&&H in t},Y=Function.prototype.toString,X=function(t){if(null!=t){try{return Y.call(t)}catch(t){}try{return t+""}catch(t){}}return""},J=/^\[object .+?Constructor\]$/,Z=Function.prototype,K=Object.prototype,Q=Z.toString,$=K.hasOwnProperty,tt=RegExp("^"+Q.call($).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),et=function(t){return!(!G(t)||W(t))&&(q(t)?tt:J).test(X(t))},nt=function(t,e){return null==t?void 0:t[e]},rt=function(t,e){var n=nt(t,e);return et(n)?n:void 0},it=rt(I,"Map"),ot=rt(Object,"create"),at=function(){this.__data__=ot?ot(null):{},this.size=0},st=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},lt=Object.prototype.hasOwnProperty,ut=function(t){var e=this.__data__;if(ot){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return lt.call(e,t)?e[t]:void 0},ct=Object.prototype.hasOwnProperty,ht=function(t){var e=this.__data__;return ot?void 0!==e[t]:ct.call(e,t)},dt=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=ot&&void 0===e?"__lodash_hash_undefined__":e,this};function ft(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ft.prototype.clear=at,ft.prototype.delete=st,ft.prototype.get=ut,ft.prototype.has=ht,ft.prototype.set=dt;var pt=ft,gt=function(){this.size=0,this.__data__={hash:new pt,map:new(it||E),string:new pt}},mt=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t},yt=function(t,e){var n=t.__data__;return mt(e)?n["string"==typeof e?"string":"hash"]:n.map},vt=function(t){var e=yt(this,t).delete(t);return this.size-=e?1:0,e},bt=function(t){return yt(this,t).get(t)},_t=function(t){return yt(this,t).has(t)},xt=function(t,e){var n=yt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function wt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}wt.prototype.clear=gt,wt.prototype.delete=vt,wt.prototype.get=bt,wt.prototype.has=_t,wt.prototype.set=xt;var St=wt,Et=function(t,e){var n=this.__data__;if(n instanceof E){var r=n.__data__;if(!it||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new St(r)}return n.set(t,e),this.size=n.size,this};function Ct(t){var e=this.__data__=new E(t);this.size=e.size}Ct.prototype.clear=C,Ct.prototype.delete=M,Ct.prototype.get=T,Ct.prototype.has=A,Ct.prototype.set=Et;var Mt=Ct,Tt=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t},At=function(){try{var t=rt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),Ot=function(t,e,n){"__proto__"==e&&At?At(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},kt=Object.prototype.hasOwnProperty,It=function(t,e,n){var r=t[e];kt.call(t,e)&&g(r,n)&&(void 0!==n||e in t)||Ot(t,e,n)},Pt=function(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],l=r?r(n[s],t[s],s,n,t):void 0;void 0===l&&(l=t[s]),i?Ot(n,s,l):It(n,s,l)}return n},Lt=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r},Nt=function(t){return null!=t&&"object"==typeof t},Rt=function(t){return Nt(t)&&"[object Arguments]"==U(t)},Dt=Object.prototype,Ft=Dt.hasOwnProperty,jt=Dt.propertyIsEnumerable,Bt=Rt(function(){return arguments}())?Rt:function(t){return Nt(t)&&Ft.call(t,"callee")&&!jt.call(t,"callee")},zt=Array.isArray,Ut=function(){return!1},Gt=f((function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,i=r&&r.exports===n?I.Buffer:void 0,o=(i?i.isBuffer:void 0)||Ut;t.exports=o})),qt=/^(?:0|[1-9]\d*)$/,Vt=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&qt.test(t))&&t>-1&&t%1==0&&t<e},Ht=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},Wt={};Wt["[object Float32Array]"]=Wt["[object Float64Array]"]=Wt["[object Int8Array]"]=Wt["[object Int16Array]"]=Wt["[object Int32Array]"]=Wt["[object Uint8Array]"]=Wt["[object Uint8ClampedArray]"]=Wt["[object Uint16Array]"]=Wt["[object Uint32Array]"]=!0,Wt["[object Arguments]"]=Wt["[object Array]"]=Wt["[object ArrayBuffer]"]=Wt["[object Boolean]"]=Wt["[object DataView]"]=Wt["[object Date]"]=Wt["[object Error]"]=Wt["[object Function]"]=Wt["[object Map]"]=Wt["[object Number]"]=Wt["[object Object]"]=Wt["[object RegExp]"]=Wt["[object Set]"]=Wt["[object String]"]=Wt["[object WeakMap]"]=!1;var Yt=function(t){return Nt(t)&&Ht(t.length)&&!!Wt[U(t)]},Xt=function(t){return function(e){return t(e)}},Jt=f((function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,i=r&&r.exports===n&&O.process,o=function(){try{var t=r&&r.require&&r.require("util").types;return t||i&&i.binding&&i.binding("util")}catch(t){}}();t.exports=o})),Zt=Jt&&Jt.isTypedArray,Kt=Zt?Xt(Zt):Yt,Qt=Object.prototype.hasOwnProperty,$t=function(t,e){var n=zt(t),r=!n&&Bt(t),i=!n&&!r&&Gt(t),o=!n&&!r&&!i&&Kt(t),a=n||r||i||o,s=a?Lt(t.length,String):[],l=s.length;for(var u in t)!e&&!Qt.call(t,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Vt(u,l))||s.push(u);return s},te=Object.prototype,ee=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||te)},ne=function(t,e){return function(n){return t(e(n))}},re=ne(Object.keys,Object),ie=Object.prototype.hasOwnProperty,oe=function(t){if(!ee(t))return re(t);var e=[];for(var n in Object(t))ie.call(t,n)&&"constructor"!=n&&e.push(n);return e},ae=function(t){return null!=t&&Ht(t.length)&&!q(t)},se=function(t){return ae(t)?$t(t):oe(t)},le=function(t,e){return t&&Pt(e,se(e),t)},ue=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e},ce=Object.prototype.hasOwnProperty,he=function(t){if(!G(t))return ue(t);var e=ee(t),n=[];for(var r in t)("constructor"!=r||!e&&ce.call(t,r))&&n.push(r);return n},de=function(t){return ae(t)?$t(t,!0):he(t)},fe=function(t,e){return t&&Pt(e,de(e),t)},pe=f((function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,i=r&&r.exports===n?I.Buffer:void 0,o=i?i.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=o?o(n):new t.constructor(n);return t.copy(r),r}})),ge=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e},me=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o},ye=function(){return[]},ve=Object.prototype.propertyIsEnumerable,be=Object.getOwnPropertySymbols,_e=be?function(t){return null==t?[]:(t=Object(t),me(be(t),(function(e){return ve.call(t,e)})))}:ye,xe=function(t,e){return Pt(t,_e(t),e)},we=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t},Se=ne(Object.getPrototypeOf,Object),Ee=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)we(e,_e(t)),t=Se(t);return e}:ye,Ce=function(t,e){return Pt(t,Ee(t),e)},Me=function(t,e,n){var r=e(t);return zt(t)?r:we(r,n(t))},Te=function(t){return Me(t,se,_e)},Ae=function(t){return Me(t,de,Ee)},Oe=rt(I,"DataView"),ke=rt(I,"Promise"),Ie=rt(I,"Set"),Pe=rt(I,"WeakMap"),Le=X(Oe),Ne=X(it),Re=X(ke),De=X(Ie),Fe=X(Pe),je=U;(Oe&&"[object DataView]"!=je(new Oe(new ArrayBuffer(1)))||it&&"[object Map]"!=je(new it)||ke&&"[object Promise]"!=je(ke.resolve())||Ie&&"[object Set]"!=je(new Ie)||Pe&&"[object WeakMap]"!=je(new Pe))&&(je=function(t){var e=U(t),n="[object Object]"==e?t.constructor:void 0,r=n?X(n):"";if(r)switch(r){case Le:return"[object DataView]";case Ne:return"[object Map]";case Re:return"[object Promise]";case De:return"[object Set]";case Fe:return"[object WeakMap]"}return e});var Be=je,ze=Object.prototype.hasOwnProperty,Ue=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&ze.call(t,"index")&&(n.index=t.index,n.input=t.input),n},Ge=I.Uint8Array,qe=function(t){var e=new t.constructor(t.byteLength);return new Ge(e).set(new Ge(t)),e},Ve=function(t,e){var n=e?qe(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)},He=/\w*$/,We=function(t){var e=new t.constructor(t.source,He.exec(t));return e.lastIndex=t.lastIndex,e},Ye=P?P.prototype:void 0,Xe=Ye?Ye.valueOf:void 0,Je=function(t){return Xe?Object(Xe.call(t)):{}},Ze=function(t,e){var n=e?qe(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)},Ke=function(t,e,n){var r=t.constructor;switch(e){case"[object ArrayBuffer]":return qe(t);case"[object Boolean]":case"[object Date]":return new r(+t);case"[object DataView]":return Ve(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Ze(t,n);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(t);case"[object RegExp]":return We(t);case"[object Set]":return new r;case"[object Symbol]":return Je(t)}},Qe=Object.create,$e=function(){function t(){}return function(e){if(!G(e))return{};if(Qe)return Qe(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),tn=function(t){return"function"!=typeof t.constructor||ee(t)?{}:$e(Se(t))},en=function(t){return Nt(t)&&"[object Map]"==Be(t)},nn=Jt&&Jt.isMap,rn=nn?Xt(nn):en,on=function(t){return Nt(t)&&"[object Set]"==Be(t)},an=Jt&&Jt.isSet,sn=an?Xt(an):on,ln={};ln["[object Arguments]"]=ln["[object Array]"]=ln["[object ArrayBuffer]"]=ln["[object DataView]"]=ln["[object Boolean]"]=ln["[object Date]"]=ln["[object Float32Array]"]=ln["[object Float64Array]"]=ln["[object Int8Array]"]=ln["[object Int16Array]"]=ln["[object Int32Array]"]=ln["[object Map]"]=ln["[object Number]"]=ln["[object Object]"]=ln["[object RegExp]"]=ln["[object Set]"]=ln["[object String]"]=ln["[object Symbol]"]=ln["[object Uint8Array]"]=ln["[object Uint8ClampedArray]"]=ln["[object Uint16Array]"]=ln["[object Uint32Array]"]=!0,ln["[object Error]"]=ln["[object Function]"]=ln["[object WeakMap]"]=!1;var un=function t(e,n,r,i,o,a){var s,l=1&n,u=2&n,c=4&n;if(r&&(s=o?r(e,i,o,a):r(e)),void 0!==s)return s;if(!G(e))return e;var h=zt(e);if(h){if(s=Ue(e),!l)return ge(e,s)}else{var d=Be(e),f="[object Function]"==d||"[object GeneratorFunction]"==d;if(Gt(e))return pe(e,l);if("[object Object]"==d||"[object Arguments]"==d||f&&!o){if(s=u||f?{}:tn(e),!l)return u?Ce(e,fe(s,e)):xe(e,le(s,e))}else{if(!ln[d])return o?e:{};s=Ke(e,d,l)}}a||(a=new Mt);var p=a.get(e);if(p)return p;a.set(e,s),sn(e)?e.forEach((function(i){s.add(t(i,n,r,i,e,a))})):rn(e)&&e.forEach((function(i,o){s.set(o,t(i,n,r,o,e,a))}));var g=h?void 0:(c?u?Ae:Te:u?de:se)(e);return Tt(g||e,(function(i,o){g&&(i=e[o=i]),It(s,o,t(i,n,r,o,e,a))})),s},cn=function(t){return un(t,4)},hn=function(t){return function(){return t}},dn=function(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var l=a[t?s:++i];if(!1===n(o[l],l,o))break}return e}}(),fn=function(t,e){return t&&dn(t,e,se)},pn=function(t,e){return function(n,r){if(null==n)return n;if(!ae(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}(fn),gn=function(t){return t},mn=function(t){return"function"==typeof t?t:gn},yn=function(t,e){return(zt(t)?Tt:pn)(t,mn(e))},vn=yn,bn=function(t,e){var n=[];return pn(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n},_n=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},xn=function(t){return this.__data__.has(t)};function wn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new St;++e<n;)this.add(t[e])}wn.prototype.add=wn.prototype.push=_n,wn.prototype.has=xn;var Sn=wn,En=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1},Cn=function(t,e){return t.has(e)},Mn=function(t,e,n,r,i,o){var a=1&n,s=t.length,l=e.length;if(s!=l&&!(a&&l>s))return!1;var u=o.get(t),c=o.get(e);if(u&&c)return u==e&&c==t;var h=-1,d=!0,f=2&n?new Sn:void 0;for(o.set(t,e),o.set(e,t);++h<s;){var p=t[h],g=e[h];if(r)var m=a?r(g,p,h,e,t,o):r(p,g,h,t,e,o);if(void 0!==m){if(m)continue;d=!1;break}if(f){if(!En(e,(function(t,e){if(!Cn(f,e)&&(p===t||i(p,t,n,r,o)))return f.push(e)}))){d=!1;break}}else if(p!==g&&!i(p,g,n,r,o)){d=!1;break}}return o.delete(t),o.delete(e),d},Tn=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n},An=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n},On=P?P.prototype:void 0,kn=On?On.valueOf:void 0,In=function(t,e,n,r,i,o,a){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new Ge(t),new Ge(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return g(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=Tn;case"[object Set]":var l=1&r;if(s||(s=An),t.size!=e.size&&!l)return!1;var u=a.get(t);if(u)return u==e;r|=2,a.set(t,e);var c=Mn(s(t),s(e),r,i,o,a);return a.delete(t),c;case"[object Symbol]":if(kn)return kn.call(t)==kn.call(e)}return!1},Pn=Object.prototype.hasOwnProperty,Ln=function(t,e,n,r,i,o){var a=1&n,s=Te(t),l=s.length;if(l!=Te(e).length&&!a)return!1;for(var u=l;u--;){var c=s[u];if(!(a?c in e:Pn.call(e,c)))return!1}var h=o.get(t),d=o.get(e);if(h&&d)return h==e&&d==t;var f=!0;o.set(t,e),o.set(e,t);for(var p=a;++u<l;){var g=t[c=s[u]],m=e[c];if(r)var y=a?r(m,g,c,e,t,o):r(g,m,c,t,e,o);if(!(void 0===y?g===m||i(g,m,n,r,o):y)){f=!1;break}p||(p="constructor"==c)}if(f&&!p){var v=t.constructor,b=e.constructor;v==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b||(f=!1)}return o.delete(t),o.delete(e),f},Nn=Object.prototype.hasOwnProperty,Rn=function(t,e,n,r,i,o){var a=zt(t),s=zt(e),l=a?"[object Array]":Be(t),u=s?"[object Array]":Be(e),c="[object Object]"==(l="[object Arguments]"==l?"[object Object]":l),h="[object Object]"==(u="[object Arguments]"==u?"[object Object]":u),d=l==u;if(d&&Gt(t)){if(!Gt(e))return!1;a=!0,c=!1}if(d&&!c)return o||(o=new Mt),a||Kt(t)?Mn(t,e,n,r,i,o):In(t,e,l,n,r,i,o);if(!(1&n)){var f=c&&Nn.call(t,"__wrapped__"),p=h&&Nn.call(e,"__wrapped__");if(f||p){var g=f?t.value():t,m=p?e.value():e;return o||(o=new Mt),i(g,m,n,r,o)}}return!!d&&(o||(o=new Mt),Ln(t,e,n,r,i,o))},Dn=function t(e,n,r,i,o){return e===n||(null==e||null==n||!Nt(e)&&!Nt(n)?e!=e&&n!=n:Rn(e,n,r,i,t,o))},Fn=function(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=Object(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){var l=(s=n[i])[0],u=t[l],c=s[1];if(a&&s[2]){if(void 0===u&&!(l in t))return!1}else{var h=new Mt;if(r)var d=r(u,c,l,t,e,h);if(!(void 0===d?Dn(c,u,3,r,h):d))return!1}}return!0},jn=function(t){return t==t&&!G(t)},Bn=function(t){for(var e=se(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,jn(i)]}return e},zn=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}},Un=function(t){var e=Bn(t);return 1==e.length&&e[0][2]?zn(e[0][0],e[0][1]):function(n){return n===t||Fn(n,t,e)}},Gn=function(t){return"symbol"==typeof t||Nt(t)&&"[object Symbol]"==U(t)},qn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Vn=/^\w*$/,Hn=function(t,e){if(zt(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Gn(t))||Vn.test(t)||!qn.test(t)||null!=e&&t in Object(e)};function Wn(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Wn.Cache||St),n}Wn.Cache=St;var Yn,Xn=Wn,Jn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Zn=/\\(\\)?/g,Kn=function(t){var e=Xn(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Jn,(function(t,n,r,i){e.push(r?i.replace(Zn,"$1"):n||t)})),e})),Qn=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i},$n=P?P.prototype:void 0,tr=$n?$n.toString:void 0,er=function t(e){if("string"==typeof e)return e;if(zt(e))return Qn(e,t)+"";if(Gn(e))return tr?tr.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n},nr=function(t){return null==t?"":er(t)},rr=function(t,e){return zt(t)?t:Hn(t,e)?[t]:Kn(nr(t))},ir=function(t){if("string"==typeof t||Gn(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e},or=function(t,e){for(var n=0,r=(e=rr(e,t)).length;null!=t&&n<r;)t=t[ir(e[n++])];return n&&n==r?t:void 0},ar=function(t,e,n){var r=null==t?void 0:or(t,e);return void 0===r?n:r},sr=function(t,e){return null!=t&&e in Object(t)},lr=function(t,e,n){for(var r=-1,i=(e=rr(e,t)).length,o=!1;++r<i;){var a=ir(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Ht(i)&&Vt(a,i)&&(zt(t)||Bt(t))},ur=function(t,e){return null!=t&&lr(t,e,sr)},cr=function(t,e){return Hn(t)&&jn(e)?zn(ir(t),e):function(n){var r=ar(n,t);return void 0===r&&r===e?ur(n,t):Dn(e,r,3)}},hr=function(t){return function(e){return null==e?void 0:e[t]}},dr=function(t){return function(e){return or(e,t)}},fr=function(t){return Hn(t)?hr(ir(t)):dr(t)},pr=function(t){return"function"==typeof t?t:null==t?gn:"object"==typeof t?zt(t)?cr(t[0],t[1]):Un(t):fr(t)},gr=function(t,e){return(zt(t)?me:bn)(t,pr(e))},mr=Object.prototype.hasOwnProperty,yr=function(t,e){return null!=t&&mr.call(t,e)},vr=function(t,e){return null!=t&&lr(t,e,yr)},br=Object.prototype.hasOwnProperty,_r=function(t){if(null==t)return!0;if(ae(t)&&(zt(t)||"string"==typeof t||"function"==typeof t.splice||Gt(t)||Kt(t)||Bt(t)))return!t.length;var e=Be(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(ee(t))return!oe(t).length;for(var n in t)if(br.call(t,n))return!1;return!0},xr=function(t){return void 0===t},wr=function(t,e){var n=-1,r=ae(t)?Array(t.length):[];return pn(t,(function(t,i,o){r[++n]=e(t,i,o)})),r},Sr=function(t,e){return(zt(t)?Qn:wr)(t,pr(e))},Er=function(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n},Cr=function(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n},Mr=function(t,e,n){var r=zt(t)?Er:Cr,i=arguments.length<3;return r(t,pr(e),n,i,pn)},Tr=function(t){return"string"==typeof t||!zt(t)&&Nt(t)&&"[object String]"==U(t)},Ar=hr("length"),Or=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),kr=function(t){return Or.test(t)},Ir="[\\ud800-\\udfff]",Pr="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Lr="\\ud83c[\\udffb-\\udfff]",Nr="[^\\ud800-\\udfff]",Rr="(?:\\ud83c[\\udde6-\\uddff]){2}",Dr="[\\ud800-\\udbff][\\udc00-\\udfff]",Fr="(?:"+Pr+"|"+Lr+")?",jr="[\\ufe0e\\ufe0f]?"+Fr+"(?:\\u200d(?:"+[Nr,Rr,Dr].join("|")+")[\\ufe0e\\ufe0f]?"+Fr+")*",Br="(?:"+[Nr+Pr+"?",Pr,Rr,Dr,Ir].join("|")+")",zr=RegExp(Lr+"(?="+Lr+")|"+Br+jr,"g"),Ur=function(t){for(var e=zr.lastIndex=0;zr.test(t);)++e;return e},Gr=function(t){return kr(t)?Ur(t):Ar(t)},qr=function(t){if(null==t)return 0;if(ae(t))return Tr(t)?Gr(t):t.length;var e=Be(t);return"[object Map]"==e||"[object Set]"==e?t.size:oe(t).length},Vr=function(t,e,n){var r=zt(t),i=r||Gt(t)||Kt(t);if(e=pr(e),null==n){var o=t&&t.constructor;n=i?r?new o:[]:G(t)&&q(o)?$e(Se(t)):{}}return(i?Tt:fn)(t,(function(t,r,i){return e(n,t,r,i)})),n},Hr=P?P.isConcatSpreadable:void 0,Wr=function(t){return zt(t)||Bt(t)||!!(Hr&&t&&t[Hr])},Yr=function t(e,n,r,i,o){var a=-1,s=e.length;for(r||(r=Wr),o||(o=[]);++a<s;){var l=e[a];n>0&&r(l)?n>1?t(l,n-1,r,i,o):we(o,l):i||(o[o.length]=l)}return o},Xr=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},Jr=Math.max,Zr=function(t,e,n){return e=Jr(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=Jr(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),Xr(t,this,s)}},Kr=At?function(t,e){return At(t,"toString",{configurable:!0,enumerable:!1,value:hn(e),writable:!0})}:gn,Qr=Date.now,$r=function(t){var e=0,n=0;return function(){var r=Qr(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(Kr),ti=function(t,e){return $r(Zr(t,e,gn),t+"")},ei=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1},ni=function(t){return t!=t},ri=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1},ii=function(t,e,n){return e==e?ri(t,e,n):ei(t,ni,n)},oi=function(t,e){return!(null==t||!t.length)&&ii(t,e,0)>-1},ai=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1},si=function(){},li=Ie&&1/An(new Ie([,-0]))[1]==1/0?function(t){return new Ie(t)}:si,ui=function(t,e,n){var r=-1,i=oi,o=t.length,a=!0,s=[],l=s;if(n)a=!1,i=ai;else if(o>=200){var u=e?null:li(t);if(u)return An(u);a=!1,i=Cn,l=new Sn}else l=e?[]:s;t:for(;++r<o;){var c=t[r],h=e?e(c):c;if(c=n||0!==c?c:0,a&&h==h){for(var d=l.length;d--;)if(l[d]===h)continue t;e&&l.push(h),s.push(c)}else i(l,h,n)||(l!==s&&l.push(h),s.push(c))}return s},ci=function(t){return Nt(t)&&ae(t)},hi=ti((function(t){return ui(Yr(t,1,ci,!0))})),di=function(t,e){return Qn(e,(function(e){return t[e]}))},fi=function(t){return null==t?[]:di(t,se(t))};try{Yn={clone:cn,constant:hn,each:vn,filter:gr,has:vr,isArray:zt,isEmpty:_r,isFunction:q,isUndefined:xr,keys:se,map:Sr,reduce:Mr,size:qr,transform:Vr,union:hi,values:fi}}catch(r){}Yn||(Yn=window._);var pi=Yn,gi=mi;function mi(t){this._isDirected=!pi.has(t,"directed")||t.directed,this._isMultigraph=!!pi.has(t,"multigraph")&&t.multigraph,this._isCompound=!!pi.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=pi.constant(void 0),this._defaultEdgeLabelFn=pi.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function yi(t,e){t[e]?t[e]++:t[e]=1}function vi(t,e){--t[e]||delete t[e]}function bi(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var a=i;i=o,o=a}return i+""+o+""+(pi.isUndefined(r)?"\0":r)}function _i(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var a=i;i=o,o=a}var s={v:i,w:o};return r&&(s.name=r),s}function xi(t,e){return bi(t,e.v,e.w,e.name)}mi.prototype._nodeCount=0,mi.prototype._edgeCount=0,mi.prototype.isDirected=function(){return this._isDirected},mi.prototype.isMultigraph=function(){return this._isMultigraph},mi.prototype.isCompound=function(){return this._isCompound},mi.prototype.setGraph=function(t){return this._label=t,this},mi.prototype.graph=function(){return this._label},mi.prototype.setDefaultNodeLabel=function(t){return pi.isFunction(t)||(t=pi.constant(t)),this._defaultNodeLabelFn=t,this},mi.prototype.nodeCount=function(){return this._nodeCount},mi.prototype.nodes=function(){return pi.keys(this._nodes)},mi.prototype.sources=function(){var t=this;return pi.filter(this.nodes(),(function(e){return pi.isEmpty(t._in[e])}))},mi.prototype.sinks=function(){var t=this;return pi.filter(this.nodes(),(function(e){return pi.isEmpty(t._out[e])}))},mi.prototype.setNodes=function(t,e){var n=arguments,r=this;return pi.each(t,(function(t){n.length>1?r.setNode(t,e):r.setNode(t)})),this},mi.prototype.setNode=function(t,e){return pi.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]="\0",this._children[t]={},this._children["\0"][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},mi.prototype.node=function(t){return this._nodes[t]},mi.prototype.hasNode=function(t){return pi.has(this._nodes,t)},mi.prototype.removeNode=function(t){var e=this;if(pi.has(this._nodes,t)){var n=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],pi.each(this.children(t),(function(t){e.setParent(t)})),delete this._children[t]),pi.each(pi.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],pi.each(pi.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},mi.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(pi.isUndefined(e))e="\0";else{for(var n=e+="";!pi.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},mi.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},mi.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if("\0"!==e)return e}},mi.prototype.children=function(t){if(pi.isUndefined(t)&&(t="\0"),this._isCompound){var e=this._children[t];if(e)return pi.keys(e)}else{if("\0"===t)return this.nodes();if(this.hasNode(t))return[]}},mi.prototype.predecessors=function(t){var e=this._preds[t];if(e)return pi.keys(e)},mi.prototype.successors=function(t){var e=this._sucs[t];if(e)return pi.keys(e)},mi.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return pi.union(e,this.successors(t))},mi.prototype.isLeaf=function(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length},mi.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var n=this;pi.each(this._nodes,(function(n,r){t(r)&&e.setNode(r,n)})),pi.each(this._edgeObjs,(function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,n.edge(t))}));var r={};function i(t){var o=n.parent(t);return void 0===o||e.hasNode(o)?(r[t]=o,o):o in r?r[o]:i(o)}return this._isCompound&&pi.each(e.nodes(),(function(t){e.setParent(t,i(t))})),e},mi.prototype.setDefaultEdgeLabel=function(t){return pi.isFunction(t)||(t=pi.constant(t)),this._defaultEdgeLabelFn=t,this},mi.prototype.edgeCount=function(){return this._edgeCount},mi.prototype.edges=function(){return pi.values(this._edgeObjs)},mi.prototype.setPath=function(t,e){var n=this,r=arguments;return pi.reduce(t,(function(t,i){return r.length>1?n.setEdge(t,i,e):n.setEdge(t,i),i})),this},mi.prototype.setEdge=function(){var t,e,n,r,i=!1,o=arguments[0];"object"==typeof o&&null!==o&&"v"in o?(t=o.v,e=o.w,n=o.name,2===arguments.length&&(r=arguments[1],i=!0)):(t=o,e=arguments[1],n=arguments[3],arguments.length>2&&(r=arguments[2],i=!0)),t=""+t,e=""+e,pi.isUndefined(n)||(n=""+n);var a=bi(this._isDirected,t,e,n);if(pi.has(this._edgeLabels,a))return i&&(this._edgeLabels[a]=r),this;if(!pi.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[a]=i?r:this._defaultEdgeLabelFn(t,e,n);var s=_i(this._isDirected,t,e,n);return t=s.v,e=s.w,Object.freeze(s),this._edgeObjs[a]=s,yi(this._preds[e],t),yi(this._sucs[t],e),this._in[e][a]=s,this._out[t][a]=s,this._edgeCount++,this},mi.prototype.edge=function(t,e,n){var r=1===arguments.length?xi(this._isDirected,arguments[0]):bi(this._isDirected,t,e,n);return this._edgeLabels[r]},mi.prototype.hasEdge=function(t,e,n){var r=1===arguments.length?xi(this._isDirected,arguments[0]):bi(this._isDirected,t,e,n);return pi.has(this._edgeLabels,r)},mi.prototype.removeEdge=function(t,e,n){var r=1===arguments.length?xi(this._isDirected,arguments[0]):bi(this._isDirected,t,e,n),i=this._edgeObjs[r];return i&&(t=i.v,e=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],vi(this._preds[e],t),vi(this._sucs[t],e),delete this._in[e][r],delete this._out[t][r],this._edgeCount--),this},mi.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var r=pi.values(n);return e?pi.filter(r,(function(t){return t.v===e})):r}},mi.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var r=pi.values(n);return e?pi.filter(r,(function(t){return t.w===e})):r}},mi.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))};var wi={Graph:gi,version:"2.1.8"},Si={write:function(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:Ei(t),edges:Ci(t)};return pi.isUndefined(t.graph())||(e.value=pi.clone(t.graph())),e},read:function(t){var e=new gi(t.options).setGraph(t.value);return pi.each(t.nodes,(function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)})),pi.each(t.edges,(function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)})),e}};function Ei(t){return pi.map(t.nodes(),(function(e){var n=t.node(e),r=t.parent(e),i={v:e};return pi.isUndefined(n)||(i.value=n),pi.isUndefined(r)||(i.parent=r),i}))}function Ci(t){return pi.map(t.edges(),(function(e){var n=t.edge(e),r={v:e.v,w:e.w};return pi.isUndefined(e.name)||(r.name=e.name),pi.isUndefined(n)||(r.value=n),r}))}var Mi=function(t){var e,n={},r=[];function i(r){pi.has(n,r)||(n[r]=!0,e.push(r),pi.each(t.successors(r),i),pi.each(t.predecessors(r),i))}return pi.each(t.nodes(),(function(t){e=[],i(t),e.length&&r.push(e)})),r},Ti=Ai;function Ai(){this._arr=[],this._keyIndices={}}Ai.prototype.size=function(){return this._arr.length},Ai.prototype.keys=function(){return this._arr.map((function(t){return t.key}))},Ai.prototype.has=function(t){return pi.has(this._keyIndices,t)},Ai.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},Ai.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},Ai.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),!pi.has(n,t)){var r=this._arr,i=r.length;return n[t]=i,r.push({key:t,priority:e}),this._decrease(i),!0}return!1},Ai.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},Ai.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)},Ai.prototype._heapify=function(t){var e=this._arr,n=2*t,r=n+1,i=t;n<e.length&&(i=e[n].priority<e[i].priority?n:i,r<e.length&&(i=e[r].priority<e[i].priority?r:i),i!==t&&(this._swap(t,i),this._heapify(i)))},Ai.prototype._decrease=function(t){for(var e,n=this._arr,r=n[t].priority;0!==t&&!(n[e=t>>1].priority<r);)this._swap(t,e),t=e},Ai.prototype._swap=function(t,e){var n=this._arr,r=this._keyIndices,i=n[t],o=n[e];n[t]=o,n[e]=i,r[o.key]=t,r[i.key]=e};var Oi=function(t,e,n,r){return function(t,e,n,r){var i,o,a={},s=new Ti,l=function(t){var e=t.v!==i?t.v:t.w,r=a[e],l=n(t),u=o.distance+l;if(l<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+l);u<r.distance&&(r.distance=u,r.predecessor=i,s.decrease(e,u))};for(t.nodes().forEach((function(t){var n=t===e?0:Number.POSITIVE_INFINITY;a[t]={distance:n},s.add(t,n)}));s.size()>0&&(i=s.removeMin(),(o=a[i]).distance!==Number.POSITIVE_INFINITY);)r(i).forEach(l);return a}(t,String(e),n||ki,r||function(e){return t.outEdges(e)})},ki=pi.constant(1),Ii=function(t,e,n){return pi.transform(t.nodes(),(function(r,i){r[i]=Oi(t,i,e,n)}),{})},Pi=function(t){var e=0,n=[],r={},i=[];function o(a){var s=r[a]={onStack:!0,lowlink:e,index:e++};if(n.push(a),t.successors(a).forEach((function(t){pi.has(r,t)?r[t].onStack&&(s.lowlink=Math.min(s.lowlink,r[t].index)):(o(t),s.lowlink=Math.min(s.lowlink,r[t].lowlink))})),s.lowlink===s.index){var l,u=[];do{l=n.pop(),r[l].onStack=!1,u.push(l)}while(a!==l);i.push(u)}}return t.nodes().forEach((function(t){pi.has(r,t)||o(t)})),i},Li=function(t){return pi.filter(Pi(t),(function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])}))},Ni=function(t,e,n){return function(t,e,n){var r={},i=t.nodes();return i.forEach((function(t){r[t]={},r[t][t]={distance:0},i.forEach((function(e){t!==e&&(r[t][e]={distance:Number.POSITIVE_INFINITY})})),n(t).forEach((function(n){var i=n.v===t?n.w:n.v,o=e(n);r[t][i]={distance:o,predecessor:t}}))})),i.forEach((function(t){var e=r[t];i.forEach((function(n){var o=r[n];i.forEach((function(n){var r=o[t],i=e[n],a=o[n],s=r.distance+i.distance;s<a.distance&&(a.distance=s,a.predecessor=i.predecessor)}))}))})),r}(t,e||Ri,n||function(e){return t.outEdges(e)})},Ri=pi.constant(1),Di=Fi;function Fi(t){var e={},n={},r=[];if(pi.each(t.sinks(),(function i(o){if(pi.has(n,o))throw new ji;pi.has(e,o)||(n[o]=!0,e[o]=!0,pi.each(t.predecessors(o),i),delete n[o],r.push(o))})),pi.size(e)!==t.nodeCount())throw new ji;return r}function ji(){}Fi.CycleException=ji,ji.prototype=new Error;var Bi=function(t,e,n){pi.isArray(e)||(e=[e]);var r=(t.isDirected()?t.successors:t.neighbors).bind(t),i=[],o={};return pi.each(e,(function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);zi(t,e,"post"===n,o,r,i)})),i};function zi(t,e,n,r,i,o){pi.has(r,e)||(r[e]=!0,n||o.push(e),pi.each(i(e),(function(e){zi(t,e,n,r,i,o)})),n&&o.push(e))}var Ui,Gi={Graph:wi.Graph,json:Si,alg:{components:Mi,dijkstra:Oi,dijkstraAll:Ii,findCycles:Li,floydWarshall:Ni,isAcyclic:function(t){try{Di(t)}catch(t){if(t instanceof Di.CycleException)return!1;throw t}return!0},postorder:function(t,e){return Bi(t,e,"post")},preorder:function(t,e){return Bi(t,e,"pre")},prim:function(t,e){var n,r=new gi,i={},o=new Ti;function a(t){var r=t.v===n?t.w:t.v,a=o.priority(r);if(void 0!==a){var s=e(t);s<a&&(i[r]=n,o.decrease(r,s))}}if(0===t.nodeCount())return r;pi.each(t.nodes(),(function(t){o.add(t,Number.POSITIVE_INFINITY),r.setNode(t)})),o.decrease(t.nodes()[0],0);for(var s=!1;o.size()>0;){if(n=o.removeMin(),pi.has(i,n))r.setEdge(n,i[n]);else{if(s)throw new Error("Input graph is not connected: "+t);s=!0}t.nodeEdges(n).forEach(a)}return r},tarjan:Pi,topsort:Di},version:wi.version};try{Ui=Gi}catch(r){}Ui||(Ui=window.graphlib);var qi,Vi=Ui,Hi=function(t){return un(t,5)},Wi=function(t,e,n){if(!G(n))return!1;var r=typeof e;return!!("number"==r?ae(n)&&Vt(e,n.length):"string"==r&&e in n)&&g(n[e],t)},Yi=Object.prototype,Xi=Yi.hasOwnProperty,Ji=ti((function(t,e){t=Object(t);var n=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&Wi(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],a=de(o),s=-1,l=a.length;++s<l;){var u=a[s],c=t[u];(void 0===c||g(c,Yi[u])&&!Xi.call(t,u))&&(t[u]=o[u])}return t})),Zi=function(t){return function(e,n,r){var i=Object(e);if(!ae(e)){var o=pr(n);e=se(e),n=function(t){return o(i[t],t,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:void 0}},Ki=/^\s+|\s+$/g,Qi=/^[-+]0x[0-9a-f]+$/i,$i=/^0b[01]+$/i,to=/^0o[0-7]+$/i,eo=parseInt,no=function(t){if("number"==typeof t)return t;if(Gn(t))return NaN;if(G(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=G(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Ki,"");var n=$i.test(t);return n||to.test(t)?eo(t.slice(2),n?2:8):Qi.test(t)?NaN:+t},ro=function(t){return t?1/0===(t=no(t))||-1/0===t?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0},io=function(t){var e=ro(t),n=e%1;return e==e?n?e-n:e:0},oo=Math.max,ao=Zi((function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:io(n);return i<0&&(i=oo(r+i,0)),ei(t,pr(e),i)})),so=function(t){return null!=t&&t.length?Yr(t,1):[]},lo=function(t,e){return null==t?t:dn(t,mn(e),de)},uo=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0},co=function(t,e){var n={};return e=pr(e),fn(t,(function(t,r,i){Ot(n,r,e(t,r,i))})),n},ho=function(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(void 0===s?a==a&&!Gn(a):n(a,s)))var s=a,l=o}return l},fo=function(t,e){return t>e},po=function(t){return t&&t.length?ho(t,gn,fo):void 0},go=function(t,e,n){(void 0!==n&&!g(t[e],n)||void 0===n&&!(e in t))&&Ot(t,e,n)},mo=Function.prototype,yo=Object.prototype,vo=mo.toString,bo=yo.hasOwnProperty,_o=vo.call(Object),xo=function(t){if(!Nt(t)||"[object Object]"!=U(t))return!1;var e=Se(t);if(null===e)return!0;var n=bo.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&vo.call(n)==_o},wo=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]},So=function(t){return Pt(t,de(t))},Eo=function(t,e,n,r,i,o,a){var s=wo(t,n),l=wo(e,n),u=a.get(l);if(u)go(t,n,u);else{var c=o?o(s,l,n+"",t,e,a):void 0,h=void 0===c;if(h){var d=zt(l),f=!d&&Gt(l),p=!d&&!f&&Kt(l);c=l,d||f||p?zt(s)?c=s:ci(s)?c=ge(s):f?(h=!1,c=pe(l,!0)):p?(h=!1,c=Ze(l,!0)):c=[]:xo(l)||Bt(l)?(c=s,Bt(s)?c=So(s):G(s)&&!q(s)||(c=tn(l))):h=!1}h&&(a.set(l,c),i(c,l,r,o,a),a.delete(l)),go(t,n,c)}},Co=function t(e,n,r,i,o){e!==n&&dn(n,(function(a,s){if(o||(o=new Mt),G(a))Eo(e,n,s,r,t,i,o);else{var l=i?i(wo(e,s),a,s+"",e,n,o):void 0;void 0===l&&(l=a),go(e,s,l)}}),de)},Mo=function(t){return ti((function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,a&&Wi(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e}))}((function(t,e,n){Co(t,e,n)})),To=function(t,e){return t<e},Ao=function(t){return t&&t.length?ho(t,gn,To):void 0},Oo=function(t,e){return t&&t.length?ho(t,pr(e),To):void 0},ko=function(){return I.Date.now()},Io=function(t,e,n,r){if(!G(t))return t;for(var i=-1,o=(e=rr(e,t)).length,a=o-1,s=t;null!=s&&++i<o;){var l=ir(e[i]),u=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(i!=a){var c=s[l];void 0===(u=r?r(c,l,s):void 0)&&(u=G(c)?c:Vt(e[i+1])?[]:{})}It(s,l,u),s=s[l]}return t},Po=function(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=or(t,a);n(s,a)&&Io(o,rr(a,t),s)}return o},Lo=function(t,e){return Po(t,e,(function(e,n){return ur(t,n)}))},No=function(t){return $r(Zr(t,void 0,so),t+"")}((function(t,e){return null==t?{}:Lo(t,e)})),Ro=Math.ceil,Do=Math.max,Fo=function(t,e,n,r){for(var i=-1,o=Do(Ro((e-t)/(n||1)),0),a=Array(o);o--;)a[r?o:++i]=t,t+=n;return a},jo=function(t){return function(e,n,r){return r&&"number"!=typeof r&&Wi(e,n,r)&&(n=r=void 0),e=ro(e),void 0===n?(n=e,e=0):n=ro(n),r=void 0===r?e<n?1:-1:ro(r),Fo(e,n,r,t)}}(),Bo=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t},zo=function(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t==t,o=Gn(t),a=void 0!==e,s=null===e,l=e==e,u=Gn(e);if(!s&&!u&&!o&&t>e||o&&a&&l&&!s&&!u||r&&a&&l||!n&&l||!i)return 1;if(!r&&!o&&!u&&t<e||u&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!l)return-1}return 0},Uo=function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var l=zo(i[r],o[r]);if(l)return r>=s?l:l*("desc"==n[r]?-1:1)}return t.index-e.index},Go=function(t,e,n){e=e.length?Qn(e,(function(t){return zt(t)?function(e){return or(e,1===t.length?t[0]:t)}:t})):[gn];var r=-1;e=Qn(e,Xt(pr));var i=wr(t,(function(t,n,i){return{criteria:Qn(e,(function(e){return e(t)})),index:++r,value:t}}));return Bo(i,(function(t,e){return Uo(t,e,n)}))},qo=ti((function(t,e){if(null==t)return[];var n=e.length;return n>1&&Wi(t,e[0],e[1])?e=[]:n>2&&Wi(e[0],e[1],e[2])&&(e=[e[0]]),Go(t,Yr(e,1),[])})),Vo=0,Ho=function(t){var e=++Vo;return nr(t)+e},Wo=function(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;){var s=r<o?e[r]:void 0;n(a,t[r],s)}return a},Yo=function(t,e){return Wo(t||[],e||[],It)};try{qi={cloneDeep:Hi,constant:hn,defaults:Ji,each:vn,filter:gr,find:ao,flatten:so,forEach:yn,forIn:lo,has:vr,isUndefined:xr,last:uo,map:Sr,mapValues:co,max:po,merge:Mo,min:Ao,minBy:Oo,now:ko,pick:No,range:jo,reduce:Mr,sortBy:qo,uniqueId:Ho,values:fi,zipObject:Yo}}catch(r){}qi||(qi=window._);var Xo=qi,Jo=Zo;function Zo(){var t={};t._next=t._prev=t,this._sentinel=t}function Ko(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function Qo(t,e){if("_next"!==t&&"_prev"!==t)return e}Zo.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return Ko(e),e},Zo.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&Ko(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},Zo.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,Qo)),n=n._prev;return"["+t.join(", ")+"]"};var $o=Vi.Graph,ta=function(t,e){if(t.nodeCount()<=1)return[];var n=function(t,e){var n=new $o,r=0,i=0;Xo.forEach(t.nodes(),(function(t){n.setNode(t,{v:t,in:0,out:0})})),Xo.forEach(t.edges(),(function(t){var o=n.edge(t.v,t.w)||0,a=e(t),s=o+a;n.setEdge(t.v,t.w,s),i=Math.max(i,n.node(t.v).out+=a),r=Math.max(r,n.node(t.w).in+=a)}));var o=Xo.range(i+r+3).map((function(){return new Jo})),a=r+1;return Xo.forEach(n.nodes(),(function(t){ra(o,a,n.node(t))})),{graph:n,buckets:o,zeroIdx:a}}(t,e||ea),r=function(t,e,n){for(var r,i=[],o=e[e.length-1],a=e[0];t.nodeCount();){for(;r=a.dequeue();)na(t,e,n,r);for(;r=o.dequeue();)na(t,e,n,r);if(t.nodeCount())for(var s=e.length-2;s>0;--s)if(r=e[s].dequeue()){i=i.concat(na(t,e,n,r,!0));break}}return i}(n.graph,n.buckets,n.zeroIdx);return Xo.flatten(Xo.map(r,(function(e){return t.outEdges(e.v,e.w)})),!0)},ea=Xo.constant(1);function na(t,e,n,r,i){var o=i?[]:void 0;return Xo.forEach(t.inEdges(r.v),(function(r){var a=t.edge(r),s=t.node(r.v);i&&o.push({v:r.v,w:r.w}),s.out-=a,ra(e,n,s)})),Xo.forEach(t.outEdges(r.v),(function(r){var i=t.edge(r),o=r.w,a=t.node(o);a.in-=i,ra(e,n,a)})),t.removeNode(r.v),o}function ra(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}var ia={run:function(t){var e="greedy"===t.graph().acyclicer?ta(t,function(t){return function(e){return t.edge(e).weight}}(t)):function(t){var e=[],n={},r={};function i(o){Xo.has(r,o)||(r[o]=!0,n[o]=!0,Xo.forEach(t.outEdges(o),(function(t){Xo.has(n,t.w)?e.push(t):i(t.w)})),delete n[o])}return Xo.forEach(t.nodes(),i),e}(t);Xo.forEach(e,(function(e){var n=t.edge(e);t.removeEdge(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,Xo.uniqueId("rev"))}))},undo:function(t){Xo.forEach(t.edges(),(function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}}))}},oa=Vi.Graph,aa={addDummyNode:sa,simplify:function(t){var e=(new oa).setGraph(t.graph());return Xo.forEach(t.nodes(),(function(n){e.setNode(n,t.node(n))})),Xo.forEach(t.edges(),(function(n){var r=e.edge(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})})),e},asNonCompoundGraph:function(t){var e=new oa({multigraph:t.isMultigraph()}).setGraph(t.graph());return Xo.forEach(t.nodes(),(function(n){t.children(n).length||e.setNode(n,t.node(n))})),Xo.forEach(t.edges(),(function(n){e.setEdge(n,t.edge(n))})),e},successorWeights:function(t){var e=Xo.map(t.nodes(),(function(e){var n={};return Xo.forEach(t.outEdges(e),(function(e){n[e.w]=(n[e.w]||0)+t.edge(e).weight})),n}));return Xo.zipObject(t.nodes(),e)},predecessorWeights:function(t){var e=Xo.map(t.nodes(),(function(e){var n={};return Xo.forEach(t.inEdges(e),(function(e){n[e.v]=(n[e.v]||0)+t.edge(e).weight})),n}));return Xo.zipObject(t.nodes(),e)},intersectRect:function(t,e){var n,r,i=t.x,o=t.y,a=e.x-i,s=e.y-o,l=t.width/2,u=t.height/2;if(!a&&!s)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(s)*l>Math.abs(a)*u?(s<0&&(u=-u),n=u*a/s,r=u):(a<0&&(l=-l),n=l,r=l*s/a),{x:i+n,y:o+r}},buildLayerMatrix:function(t){var e=Xo.map(Xo.range(la(t)+1),(function(){return[]}));return Xo.forEach(t.nodes(),(function(n){var r=t.node(n),i=r.rank;Xo.isUndefined(i)||(e[i][r.order]=n)})),e},normalizeRanks:function(t){var e=Xo.min(Xo.map(t.nodes(),(function(e){return t.node(e).rank})));Xo.forEach(t.nodes(),(function(n){var r=t.node(n);Xo.has(r,"rank")&&(r.rank-=e)}))},removeEmptyRanks:function(t){var e=Xo.min(Xo.map(t.nodes(),(function(e){return t.node(e).rank}))),n=[];Xo.forEach(t.nodes(),(function(r){var i=t.node(r).rank-e;n[i]||(n[i]=[]),n[i].push(r)}));var r=0,i=t.graph().nodeRankFactor;Xo.forEach(n,(function(e,n){Xo.isUndefined(e)&&n%i!=0?--r:r&&Xo.forEach(e,(function(e){t.node(e).rank+=r}))}))},addBorderNode:function(t,e,n,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),sa(t,"border",i,e)},maxRank:la,partition:function(t,e){var n={lhs:[],rhs:[]};return Xo.forEach(t,(function(t){e(t)?n.lhs.push(t):n.rhs.push(t)})),n},time:function(t,e){var n=Xo.now();try{return e()}finally{console.log(t+" time: "+(Xo.now()-n)+"ms")}},notime:function(t,e){return e()}};function sa(t,e,n,r){var i;do{i=Xo.uniqueId(r)}while(t.hasNode(i));return n.dummy=e,t.setNode(i,n),i}function la(t){return Xo.max(Xo.map(t.nodes(),(function(e){var n=t.node(e).rank;if(!Xo.isUndefined(n))return n})))}var ua={run:function(t){t.graph().dummyChains=[],Xo.forEach(t.edges(),(function(e){!function(t,e){var n,r,i,o=e.v,a=t.node(o).rank,s=e.w,l=t.node(s).rank,u=e.name,c=t.edge(e),h=c.labelRank;if(l!==a+1){for(t.removeEdge(e),i=0,++a;a<l;++i,++a)c.points=[],r={width:0,height:0,edgeLabel:c,edgeObj:e,rank:a},n=aa.addDummyNode(t,"edge",r,"_d"),a===h&&(r.width=c.width,r.height=c.height,r.dummy="edge-label",r.labelpos=c.labelpos),t.setEdge(o,n,{weight:c.weight},u),0===i&&t.graph().dummyChains.push(n),o=n;t.setEdge(o,s,{weight:c.weight},u)}}(t,e)}))},undo:function(t){Xo.forEach(t.graph().dummyChains,(function(e){var n,r=t.node(e),i=r.edgeLabel;for(t.setEdge(r.edgeObj,i);r.dummy;)n=t.successors(e)[0],t.removeNode(e),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),e=n,r=t.node(e)}))}},ca=function(t){var e={};Xo.forEach(t.sources(),(function n(r){var i=t.node(r);if(Xo.has(e,r))return i.rank;e[r]=!0;var o=Xo.min(Xo.map(t.outEdges(r),(function(e){return n(e.w)-t.edge(e).minlen})));return o!==Number.POSITIVE_INFINITY&&null!=o||(o=0),i.rank=o}))},ha=function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen},da=Vi.Graph,fa=ha,pa=function(t){var e,n,r=new da({directed:!1}),i=t.nodes()[0],o=t.nodeCount();for(r.setNode(i,{});ga(r,t)<o;)e=ma(r,t),n=r.hasNode(e.v)?fa(t,e):-fa(t,e),ya(r,t,n);return r};function ga(t,e){return Xo.forEach(t.nodes(),(function n(r){Xo.forEach(e.nodeEdges(r),(function(i){var o=i.v,a=r===o?i.w:o;t.hasNode(a)||fa(e,i)||(t.setNode(a,{}),t.setEdge(r,a,{}),n(a))}))})),t.nodeCount()}function ma(t,e){return Xo.minBy(e.edges(),(function(n){if(t.hasNode(n.v)!==t.hasNode(n.w))return fa(e,n)}))}function ya(t,e,n){Xo.forEach(t.nodes(),(function(t){e.node(t).rank+=n}))}var va=ha,ba=ca,_a=Vi.alg.preorder,xa=Vi.alg.postorder,wa=aa.simplify,Sa=Ea;function Ea(t){t=wa(t),ba(t);var e,n=pa(t);for(Ta(n),Ca(n,t);e=Oa(n);)Ia(n,t,e,ka(n,t,e))}function Ca(t,e){var n=xa(t,t.nodes());n=n.slice(0,n.length-1),Xo.forEach(n,(function(n){!function(t,e,n){var r=t.node(n).parent;t.edge(n,r).cutvalue=Ma(t,e,n)}(t,e,n)}))}function Ma(t,e,n){var r=t.node(n).parent,i=!0,o=e.edge(n,r),a=0;return o||(i=!1,o=e.edge(r,n)),a=o.weight,Xo.forEach(e.nodeEdges(n),(function(o){var s,l,u=o.v===n,c=u?o.w:o.v;if(c!==r){var h=u===i,d=e.edge(o).weight;if(a+=h?d:-d,s=n,l=c,t.hasEdge(s,l)){var f=t.edge(n,c).cutvalue;a+=h?-f:f}}})),a}function Ta(t,e){arguments.length<2&&(e=t.nodes()[0]),Aa(t,{},1,e)}function Aa(t,e,n,r,i){var o=n,a=t.node(r);return e[r]=!0,Xo.forEach(t.neighbors(r),(function(i){Xo.has(e,i)||(n=Aa(t,e,n,i,r))})),a.low=o,a.lim=n++,i?a.parent=i:delete a.parent,n}function Oa(t){return Xo.find(t.edges(),(function(e){return t.edge(e).cutvalue<0}))}function ka(t,e,n){var r=n.v,i=n.w;e.hasEdge(r,i)||(r=n.w,i=n.v);var o=t.node(r),a=t.node(i),s=o,l=!1;o.lim>a.lim&&(s=a,l=!0);var u=Xo.filter(e.edges(),(function(e){return l===Pa(t,t.node(e.v),s)&&l!==Pa(t,t.node(e.w),s)}));return Xo.minBy(u,(function(t){return va(e,t)}))}function Ia(t,e,n,r){var i=n.v,o=n.w;t.removeEdge(i,o),t.setEdge(r.v,r.w,{}),Ta(t),Ca(t,e),function(t,e){var n=Xo.find(t.nodes(),(function(t){return!e.node(t).parent})),r=_a(t,n);r=r.slice(1),Xo.forEach(r,(function(n){var r=t.node(n).parent,i=e.edge(n,r),o=!1;i||(i=e.edge(r,n),o=!0),e.node(n).rank=e.node(r).rank+(o?i.minlen:-i.minlen)}))}(t,e)}function Pa(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}Ea.initLowLimValues=Ta,Ea.initCutValues=Ca,Ea.calcCutValue=Ma,Ea.leaveEdge=Oa,Ea.enterEdge=ka,Ea.exchangeEdges=Ia;var La=ca,Na=function(t){switch(t.graph().ranker){case"network-simplex":Da(t);break;case"tight-tree":!function(t){La(t),pa(t)}(t);break;case"longest-path":Ra(t);break;default:Da(t)}},Ra=La;function Da(t){Sa(t)}var Fa=function(t){var e=function(t){var e={},n=0;function r(i){var o=n;Xo.forEach(t.children(i),r),e[i]={low:o,lim:n++}}return Xo.forEach(t.children(),r),e}(t);Xo.forEach(t.graph().dummyChains,(function(n){for(var r=t.node(n),i=r.edgeObj,o=function(t,e,n,r){var i,o,a=[],s=[],l=Math.min(e[n].low,e[r].low),u=Math.max(e[n].lim,e[r].lim);i=n;do{i=t.parent(i),a.push(i)}while(i&&(e[i].low>l||u>e[i].lim));for(o=i,i=r;(i=t.parent(i))!==o;)s.push(i);return{path:a.concat(s.reverse()),lca:o}}(t,e,i.v,i.w),a=o.path,s=o.lca,l=0,u=a[l],c=!0;n!==i.w;){if(r=t.node(n),c){for(;(u=a[l])!==s&&t.node(u).maxRank<r.rank;)l++;u===s&&(c=!1)}if(!c){for(;l<a.length-1&&t.node(u=a[l+1]).minRank<=r.rank;)l++;u=a[l]}t.setParent(n,u),n=t.successors(n)[0]}}))},ja={run:function(t){var e=aa.addDummyNode(t,"root",{},"_root"),n=function(t){var e={};function n(r,i){var o=t.children(r);o&&o.length&&Xo.forEach(o,(function(t){n(t,i+1)})),e[r]=i}return Xo.forEach(t.children(),(function(t){n(t,1)})),e}(t),r=Xo.max(Xo.values(n))-1,i=2*r+1;t.graph().nestingRoot=e,Xo.forEach(t.edges(),(function(e){t.edge(e).minlen*=i}));var o=function(t){return Xo.reduce(t.edges(),(function(e,n){return e+t.edge(n).weight}),0)}(t)+1;Xo.forEach(t.children(),(function(a){Ba(t,e,i,o,r,n,a)})),t.graph().nodeRankFactor=i},cleanup:function(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,Xo.forEach(t.edges(),(function(e){t.edge(e).nestingEdge&&t.removeEdge(e)}))}};function Ba(t,e,n,r,i,o,a){var s=t.children(a);if(s.length){var l=aa.addBorderNode(t,"_bt"),u=aa.addBorderNode(t,"_bb"),c=t.node(a);t.setParent(l,a),c.borderTop=l,t.setParent(u,a),c.borderBottom=u,Xo.forEach(s,(function(s){Ba(t,e,n,r,i,o,s);var c=t.node(s),h=c.borderTop?c.borderTop:s,d=c.borderBottom?c.borderBottom:s,f=c.borderTop?r:2*r,p=h!==d?1:i-o[a]+1;t.setEdge(l,h,{weight:f,minlen:p,nestingEdge:!0}),t.setEdge(d,u,{weight:f,minlen:p,nestingEdge:!0})})),t.parent(a)||t.setEdge(e,l,{weight:0,minlen:i+o[a]})}else a!==e&&t.setEdge(e,a,{weight:0,minlen:n})}var za=function(t){Xo.forEach(t.children(),(function e(n){var r=t.children(n),i=t.node(n);if(r.length&&Xo.forEach(r,e),Xo.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var o=i.minRank,a=i.maxRank+1;o<a;++o)Ua(t,"borderLeft","_bl",n,i,o),Ua(t,"borderRight","_br",n,i,o)}}))};function Ua(t,e,n,r,i,o){var a={width:0,height:0,rank:o,borderType:e},s=i[e][o-1],l=aa.addDummyNode(t,"border",a,n);i[e][o]=l,t.setParent(l,r),s&&t.setEdge(s,l,{weight:1})}var Ga={adjust:function(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||qa(t)},undo:function(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||function(t){Xo.forEach(t.nodes(),(function(e){Ha(t.node(e))})),Xo.forEach(t.edges(),(function(e){var n=t.edge(e);Xo.forEach(n.points,Ha),Xo.has(n,"y")&&Ha(n)}))}(t),"lr"!==e&&"rl"!==e||(function(t){Xo.forEach(t.nodes(),(function(e){Wa(t.node(e))})),Xo.forEach(t.edges(),(function(e){var n=t.edge(e);Xo.forEach(n.points,Wa),Xo.has(n,"x")&&Wa(n)}))}(t),qa(t))}};function qa(t){Xo.forEach(t.nodes(),(function(e){Va(t.node(e))})),Xo.forEach(t.edges(),(function(e){Va(t.edge(e))}))}function Va(t){var e=t.width;t.width=t.height,t.height=e}function Ha(t){t.y=-t.y}function Wa(t){var e=t.x;t.x=t.y,t.y=e}var Ya=function(t){var e={},n=Xo.filter(t.nodes(),(function(e){return!t.children(e).length})),r=Xo.max(Xo.map(n,(function(e){return t.node(e).rank}))),i=Xo.map(Xo.range(r+1),(function(){return[]}));function o(n){if(!Xo.has(e,n)){e[n]=!0;var r=t.node(n);i[r.rank].push(n),Xo.forEach(t.successors(n),o)}}var a=Xo.sortBy(n,(function(e){return t.node(e).rank}));return Xo.forEach(a,o),i},Xa=function(t,e){for(var n=0,r=1;r<e.length;++r)n+=Ja(t,e[r-1],e[r]);return n};function Ja(t,e,n){for(var r=Xo.zipObject(n,Xo.map(n,(function(t,e){return e}))),i=Xo.flatten(Xo.map(e,(function(e){return Xo.sortBy(Xo.map(t.outEdges(e),(function(e){return{pos:r[e.w],weight:t.edge(e).weight}})),"pos")})),!0),o=1;o<n.length;)o<<=1;var a=2*o-1;o-=1;var s=Xo.map(new Array(a),(function(){return 0})),l=0;return Xo.forEach(i.forEach((function(t){var e=t.pos+o;s[e]+=t.weight;for(var n=0;e>0;)e%2&&(n+=s[e+1]),s[e=e-1>>1]+=t.weight;l+=t.weight*n}))),l}var Za=function(t,e){return Xo.map(e,(function(e){var n=t.inEdges(e);if(n.length){var r=Xo.reduce(n,(function(e,n){var r=t.edge(n),i=t.node(n.v);return{sum:e.sum+r.weight*i.order,weight:e.weight+r.weight}}),{sum:0,weight:0});return{v:e,barycenter:r.sum/r.weight,weight:r.weight}}return{v:e}}))},Ka=function(t,e){var n={};return Xo.forEach(t,(function(t,e){var r=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};Xo.isUndefined(t.barycenter)||(r.barycenter=t.barycenter,r.weight=t.weight)})),Xo.forEach(e.edges(),(function(t){var e=n[t.v],r=n[t.w];Xo.isUndefined(e)||Xo.isUndefined(r)||(r.indegree++,e.out.push(n[t.w]))})),function(t){var e=[];function n(t){return function(e){e.merged||(Xo.isUndefined(e.barycenter)||Xo.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&function(t,e){var n=0,r=0;t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.vs=e.vs.concat(t.vs),t.barycenter=n/r,t.weight=r,t.i=Math.min(e.i,t.i),e.merged=!0}(t,e)}}function r(e){return function(n){n.in.push(e),0==--n.indegree&&t.push(n)}}for(;t.length;){var i=t.pop();e.push(i),Xo.forEach(i.in.reverse(),n(i)),Xo.forEach(i.out,r(i))}return Xo.map(Xo.filter(e,(function(t){return!t.merged})),(function(t){return Xo.pick(t,["vs","i","barycenter","weight"])}))}(Xo.filter(n,(function(t){return!t.indegree})))},Qa=function(t,e){var n,r=aa.partition(t,(function(t){return Xo.has(t,"barycenter")})),i=r.lhs,o=Xo.sortBy(r.rhs,(function(t){return-t.i})),a=[],s=0,l=0,u=0;i.sort((n=!!e,function(t,e){return t.barycenter<e.barycenter?-1:t.barycenter>e.barycenter?1:n?e.i-t.i:t.i-e.i})),u=$a(a,o,u),Xo.forEach(i,(function(t){u+=t.vs.length,a.push(t.vs),s+=t.barycenter*t.weight,l+=t.weight,u=$a(a,o,u)}));var c={vs:Xo.flatten(a,!0)};return l&&(c.barycenter=s/l,c.weight=l),c};function $a(t,e,n){for(var r;e.length&&(r=Xo.last(e)).i<=n;)e.pop(),t.push(r.vs),n++;return n}var ts=function t(e,n,r,i){var o=e.children(n),a=e.node(n),s=a?a.borderLeft:void 0,l=a?a.borderRight:void 0,u={};s&&(o=Xo.filter(o,(function(t){return t!==s&&t!==l})));var c=Za(e,o);Xo.forEach(c,(function(n){if(e.children(n.v).length){var o=t(e,n.v,r,i);u[n.v]=o,Xo.has(o,"barycenter")&&(a=n,s=o,Xo.isUndefined(a.barycenter)?(a.barycenter=s.barycenter,a.weight=s.weight):(a.barycenter=(a.barycenter*a.weight+s.barycenter*s.weight)/(a.weight+s.weight),a.weight+=s.weight))}var a,s}));var h=Ka(c,r);!function(t,e){Xo.forEach(t,(function(t){t.vs=Xo.flatten(t.vs.map((function(t){return e[t]?e[t].vs:t})),!0)}))}(h,u);var d=Qa(h,i);if(s&&(d.vs=Xo.flatten([s,d.vs,l],!0),e.predecessors(s).length)){var f=e.node(e.predecessors(s)[0]),p=e.node(e.predecessors(l)[0]);Xo.has(d,"barycenter")||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+f.order+p.order)/(d.weight+2),d.weight+=2}return d},es=Vi.Graph,ns=function(t,e,n){var r=function(t){for(var e;t.hasNode(e=Xo.uniqueId("_root")););return e}(t),i=new es({compound:!0}).setGraph({root:r}).setDefaultNodeLabel((function(e){return t.node(e)}));return Xo.forEach(t.nodes(),(function(o){var a=t.node(o),s=t.parent(o);(a.rank===e||a.minRank<=e&&e<=a.maxRank)&&(i.setNode(o),i.setParent(o,s||r),Xo.forEach(t[n](o),(function(e){var n=e.v===o?e.w:e.v,r=i.edge(n,o),a=Xo.isUndefined(r)?0:r.weight;i.setEdge(n,o,{weight:t.edge(e).weight+a})})),Xo.has(a,"minRank")&&i.setNode(o,{borderLeft:a.borderLeft[e],borderRight:a.borderRight[e]}))})),i},rs=function(t,e,n){var r,i={};Xo.forEach(n,(function(n){for(var o,a,s=t.parent(n);s;){if((o=t.parent(s))?(a=i[o],i[o]=s):(a=r,r=s),a&&a!==s)return void e.setEdge(a,s);s=o}}))},is=Vi.Graph,os=function(t){var e=aa.maxRank(t),n=as(t,Xo.range(1,e+1),"inEdges"),r=as(t,Xo.range(e-1,-1,-1),"outEdges"),i=Ya(t);ls(t,i);for(var o,a=Number.POSITIVE_INFINITY,s=0,l=0;l<4;++s,++l){ss(s%2?n:r,s%4>=2),i=aa.buildLayerMatrix(t);var u=Xa(t,i);u<a&&(l=0,o=Xo.cloneDeep(i),a=u)}ls(t,o)};function as(t,e,n){return Xo.map(e,(function(e){return ns(t,e,n)}))}function ss(t,e){var n=new is;Xo.forEach(t,(function(t){var r=t.graph().root,i=ts(t,r,n,e);Xo.forEach(i.vs,(function(e,n){t.node(e).order=n})),rs(t,n,i.vs)}))}function ls(t,e){Xo.forEach(e,(function(e){Xo.forEach(e,(function(e,n){t.node(e).order=n}))}))}var us=Vi.Graph,cs=function(t){var e,n=aa.buildLayerMatrix(t),r=Xo.merge(hs(t,n),ds(t,n)),i={};Xo.forEach(["u","d"],(function(o){e="u"===o?n:Xo.values(n).reverse(),Xo.forEach(["l","r"],(function(n){"r"===n&&(e=Xo.map(e,(function(t){return Xo.values(t).reverse()})));var a=("u"===o?t.predecessors:t.successors).bind(t),s=gs(t,e,r,a),l=ms(t,e,s.root,s.align,"r"===n);"r"===n&&(l=Xo.mapValues(l,(function(t){return-t}))),i[o+n]=l}))}));var o=ys(t,i);return vs(i,o),bs(i,t.graph().align)};function hs(t,e){var n={};return Xo.reduce(e,(function(e,r){var i=0,o=0,a=e.length,s=Xo.last(r);return Xo.forEach(r,(function(e,l){var u=function(t,e){if(t.node(e).dummy)return Xo.find(t.predecessors(e),(function(e){return t.node(e).dummy}))}(t,e),c=u?t.node(u).order:a;(u||e===s)&&(Xo.forEach(r.slice(o,l+1),(function(e){Xo.forEach(t.predecessors(e),(function(r){var o=t.node(r),a=o.order;!(a<i||c<a)||o.dummy&&t.node(e).dummy||fs(n,r,e)}))})),o=l+1,i=c)})),r})),n}function ds(t,e){var n={};function r(e,r,i,o,a){var s;Xo.forEach(Xo.range(r,i),(function(r){s=e[r],t.node(s).dummy&&Xo.forEach(t.predecessors(s),(function(e){var r=t.node(e);r.dummy&&(r.order<o||r.order>a)&&fs(n,e,s)}))}))}return Xo.reduce(e,(function(e,n){var i,o=-1,a=0;return Xo.forEach(n,(function(s,l){if("border"===t.node(s).dummy){var u=t.predecessors(s);u.length&&(i=t.node(u[0]).order,r(n,a,l,o,i),a=l,o=i)}r(n,a,n.length,i,e.length)})),n})),n}function fs(t,e,n){if(e>n){var r=e;e=n,n=r}var i=t[e];i||(t[e]=i={}),i[n]=!0}function ps(t,e,n){if(e>n){var r=e;e=n,n=r}return Xo.has(t[e],n)}function gs(t,e,n,r){var i={},o={},a={};return Xo.forEach(e,(function(t){Xo.forEach(t,(function(t,e){i[t]=t,o[t]=t,a[t]=e}))})),Xo.forEach(e,(function(t){var e=-1;Xo.forEach(t,(function(t){var s=r(t);if(s.length)for(var l=((s=Xo.sortBy(s,(function(t){return a[t]}))).length-1)/2,u=Math.floor(l),c=Math.ceil(l);u<=c;++u){var h=s[u];o[t]===t&&e<a[h]&&!ps(n,t,h)&&(o[h]=t,o[t]=i[t]=i[h],e=a[h])}}))})),{root:i,align:o}}function ms(t,e,n,r,i){var o={},a=function(t,e,n,r){var i=new us,o=t.graph(),a=function(t,e,n){return function(r,i,o){var a,s=r.node(i),l=r.node(o),u=0;if(u+=s.width/2,Xo.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":a=-s.width/2;break;case"r":a=s.width/2}if(a&&(u+=n?a:-a),a=0,u+=(s.dummy?e:t)/2,u+=(l.dummy?e:t)/2,u+=l.width/2,Xo.has(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":a=l.width/2;break;case"r":a=-l.width/2}return a&&(u+=n?a:-a),a=0,u}}(o.nodesep,o.edgesep,r);return Xo.forEach(e,(function(e){var r;Xo.forEach(e,(function(e){var o=n[e];if(i.setNode(o),r){var s=n[r],l=i.edge(s,o);i.setEdge(s,o,Math.max(a(t,e,r),l||0))}r=e}))})),i}(t,e,n,i),s=i?"borderLeft":"borderRight";function l(t,e){for(var n=a.nodes(),r=n.pop(),i={};r;)i[r]?t(r):(i[r]=!0,n.push(r),n=n.concat(e(r))),r=n.pop()}return l((function(t){o[t]=a.inEdges(t).reduce((function(t,e){return Math.max(t,o[e.v]+a.edge(e))}),0)}),a.predecessors.bind(a)),l((function(e){var n=a.outEdges(e).reduce((function(t,e){return Math.min(t,o[e.w]-a.edge(e))}),Number.POSITIVE_INFINITY),r=t.node(e);n!==Number.POSITIVE_INFINITY&&r.borderType!==s&&(o[e]=Math.max(o[e],n))}),a.successors.bind(a)),Xo.forEach(r,(function(t){o[t]=o[n[t]]})),o}function ys(t,e){return Xo.minBy(Xo.values(e),(function(e){var n=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;return Xo.forIn(e,(function(e,i){var o=function(t,e){return t.node(e).width}(t,i)/2;n=Math.max(e+o,n),r=Math.min(e-o,r)})),n-r}))}function vs(t,e){var n=Xo.values(e),r=Xo.min(n),i=Xo.max(n);Xo.forEach(["u","d"],(function(n){Xo.forEach(["l","r"],(function(o){var a,s=n+o,l=t[s];if(l!==e){var u=Xo.values(l);(a="l"===o?r-Xo.min(u):i-Xo.max(u))&&(t[s]=Xo.mapValues(l,(function(t){return t+a})))}}))}))}function bs(t,e){return Xo.mapValues(t.ul,(function(n,r){if(e)return t[e.toLowerCase()][r];var i=Xo.sortBy(Xo.map(t,r));return(i[1]+i[2])/2}))}var _s=cs,xs=function(t){(function(t){var e=aa.buildLayerMatrix(t),n=t.graph().ranksep,r=0;Xo.forEach(e,(function(e){var i=Xo.max(Xo.map(e,(function(e){return t.node(e).height})));Xo.forEach(e,(function(e){t.node(e).y=r+i/2})),r+=i+n}))})(t=aa.asNonCompoundGraph(t)),Xo.forEach(_s(t),(function(e,n){t.node(n).x=e}))},ws=aa.normalizeRanks,Ss=aa.removeEmptyRanks,Es=aa,Cs=Vi.Graph,Ms=function(t,e){var n=e&&e.debugTiming?Es.time:Es.notime;n("layout",(function(){var e=n("  buildLayoutGraph",(function(){return function(t){var e=new Cs({multigraph:!0,compound:!0}),n=Ds(t.graph());return e.setGraph(Xo.merge({},As,Rs(n,Ts),Xo.pick(n,Os))),Xo.forEach(t.nodes(),(function(n){var r=Ds(t.node(n));e.setNode(n,Xo.defaults(Rs(r,ks),Is)),e.setParent(n,t.parent(n))})),Xo.forEach(t.edges(),(function(n){var r=Ds(t.edge(n));e.setEdge(n,Xo.merge({},Ls,Rs(r,Ps),Xo.pick(r,Ns)))})),e}(t)}));n("  runLayout",(function(){!function(t,e){e("    makeSpaceForEdgeLabels",(function(){!function(t){var e=t.graph();e.ranksep/=2,Xo.forEach(t.edges(),(function(n){var r=t.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)}))}(t)})),e("    removeSelfEdges",(function(){!function(t){Xo.forEach(t.edges(),(function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}}))}(t)})),e("    acyclic",(function(){ia.run(t)})),e("    nestingGraph.run",(function(){ja.run(t)})),e("    rank",(function(){Na(Es.asNonCompoundGraph(t))})),e("    injectEdgeLabelProxies",(function(){!function(t){Xo.forEach(t.edges(),(function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),i={rank:(t.node(e.w).rank-r.rank)/2+r.rank,e:e};Es.addDummyNode(t,"edge-proxy",i,"_ep")}}))}(t)})),e("    removeEmptyRanks",(function(){Ss(t)})),e("    nestingGraph.cleanup",(function(){ja.cleanup(t)})),e("    normalizeRanks",(function(){ws(t)})),e("    assignRankMinMax",(function(){!function(t){var e=0;Xo.forEach(t.nodes(),(function(n){var r=t.node(n);r.borderTop&&(r.minRank=t.node(r.borderTop).rank,r.maxRank=t.node(r.borderBottom).rank,e=Xo.max(e,r.maxRank))})),t.graph().maxRank=e}(t)})),e("    removeEdgeLabelProxies",(function(){!function(t){Xo.forEach(t.nodes(),(function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))}))}(t)})),e("    normalize.run",(function(){ua.run(t)})),e("    parentDummyChains",(function(){Fa(t)})),e("    addBorderSegments",(function(){za(t)})),e("    order",(function(){os(t)})),e("    insertSelfEdges",(function(){!function(t){var e=Es.buildLayerMatrix(t);Xo.forEach(e,(function(e){var n=0;Xo.forEach(e,(function(e,r){var i=t.node(e);i.order=r+n,Xo.forEach(i.selfEdges,(function(e){Es.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:i.rank,order:r+ ++n,e:e.e,label:e.label},"_se")})),delete i.selfEdges}))}))}(t)})),e("    adjustCoordinateSystem",(function(){Ga.adjust(t)})),e("    position",(function(){xs(t)})),e("    positionSelfEdges",(function(){!function(t){Xo.forEach(t.nodes(),(function(e){var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),i=r.x+r.width/2,o=r.y,a=n.x-i,s=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*a/3,y:o-s},{x:i+5*a/6,y:o-s},{x:i+a,y:o},{x:i+5*a/6,y:o+s},{x:i+2*a/3,y:o+s}],n.label.x=n.x,n.label.y=n.y}}))}(t)})),e("    removeBorderNodes",(function(){!function(t){Xo.forEach(t.nodes(),(function(e){if(t.children(e).length){var n=t.node(e),r=t.node(n.borderTop),i=t.node(n.borderBottom),o=t.node(Xo.last(n.borderLeft)),a=t.node(Xo.last(n.borderRight));n.width=Math.abs(a.x-o.x),n.height=Math.abs(i.y-r.y),n.x=o.x+n.width/2,n.y=r.y+n.height/2}})),Xo.forEach(t.nodes(),(function(e){"border"===t.node(e).dummy&&t.removeNode(e)}))}(t)})),e("    normalize.undo",(function(){ua.undo(t)})),e("    fixupEdgeLabelCoords",(function(){!function(t){Xo.forEach(t.edges(),(function(e){var n=t.edge(e);if(Xo.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}}))}(t)})),e("    undoCoordinateSystem",(function(){Ga.undo(t)})),e("    translateGraph",(function(){!function(t){var e=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,i=0,o=t.graph(),a=o.marginx||0,s=o.marginy||0;function l(t){var o=t.x,a=t.y,s=t.width,l=t.height;e=Math.min(e,o-s/2),n=Math.max(n,o+s/2),r=Math.min(r,a-l/2),i=Math.max(i,a+l/2)}Xo.forEach(t.nodes(),(function(e){l(t.node(e))})),Xo.forEach(t.edges(),(function(e){var n=t.edge(e);Xo.has(n,"x")&&l(n)})),e-=a,r-=s,Xo.forEach(t.nodes(),(function(n){var i=t.node(n);i.x-=e,i.y-=r})),Xo.forEach(t.edges(),(function(n){var i=t.edge(n);Xo.forEach(i.points,(function(t){t.x-=e,t.y-=r})),Xo.has(i,"x")&&(i.x-=e),Xo.has(i,"y")&&(i.y-=r)})),o.width=n-e+a,o.height=i-r+s}(t)})),e("    assignNodeIntersects",(function(){!function(t){Xo.forEach(t.edges(),(function(e){var n,r,i=t.edge(e),o=t.node(e.v),a=t.node(e.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=a,r=o),i.points.unshift(Es.intersectRect(o,n)),i.points.push(Es.intersectRect(a,r))}))}(t)})),e("    reversePoints",(function(){!function(t){Xo.forEach(t.edges(),(function(e){var n=t.edge(e);n.reversed&&n.points.reverse()}))}(t)})),e("    acyclic.undo",(function(){ia.undo(t)}))}(e,n)})),n("  updateInputGraph",(function(){!function(t,e){Xo.forEach(t.nodes(),(function(n){var r=t.node(n),i=e.node(n);r&&(r.x=i.x,r.y=i.y,e.children(n).length&&(r.width=i.width,r.height=i.height))})),Xo.forEach(t.edges(),(function(n){var r=t.edge(n),i=e.edge(n);r.points=i.points,Xo.has(i,"x")&&(r.x=i.x,r.y=i.y)})),t.graph().width=e.graph().width,t.graph().height=e.graph().height}(t,e)}))}))},Ts=["nodesep","edgesep","ranksep","marginx","marginy"],As={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Os=["acyclicer","ranker","rankdir","align"],ks=["width","height"],Is={width:0,height:0},Ps=["minlen","weight","width","height","labeloffset"],Ls={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Ns=["labelpos"];function Rs(t,e){return Xo.mapValues(Xo.pick(t,e),Number)}function Ds(t){var e={};return Xo.forEach(t,(function(t,n){e[n.toLowerCase()]=t})),e}var Fs=Vi.Graph,js={graphlib:Vi,layout:Ms,debug:{debugOrdering:function(t){var e=aa.buildLayerMatrix(t),n=new Fs({compound:!0,multigraph:!0}).setGraph({});return Xo.forEach(t.nodes(),(function(e){n.setNode(e,{label:e}),n.setParent(e,"layer"+t.node(e).rank)})),Xo.forEach(t.edges(),(function(t){n.setEdge(t.v,t.w,{},t.name)})),Xo.forEach(e,(function(t,e){var r="layer"+e;n.setNode(r,{rank:"same"}),Xo.reduce(t,(function(t,e){return n.setEdge(t,e,{style:"invis"}),e}))})),n}},util:{time:aa.time,notime:aa.notime},version:"0.8.5"},Bs=js.graphlib,zs=js.layout;class Us{constructor(t){this.cardinality=1,this.include=u.UNSPECIFIED,this.isGroupNode=!1,this.parentNode=null,this.type=l.NODE,this.name=t.name,this.attr=t.attr||{},this.inputs=t.inputs,this.path=t.path||[],this.width=t.width,this.height=t.height}}class Gs{constructor(){this.nodes={},this.edges=[],this.nodes={},this.edges=[]}}function qs(t){const e=new Gs;return t.nodes.map(t=>new Us(t)).forEach(t=>{e.nodes[t.name]=t,t.inputs.forEach(n=>{!function(t,e,n){n.name!==e.name&&t.edges.push(Object.assign(Object.assign({},n.attr),{v:n.name,w:e.name}))}(e,t,n)})}),e}class Vs{constructor(t,e={}){this.attr=null,this.bridgeGraph=null,this.cardinality=0,this.depth=1,this.include=u.UNSPECIFIED,this.isGroupNode=!0,this.parentNode=null,this.type=l.META,this.path=[],this.name=t,this.metaGraph=Xs(t,c.META,e)}getFirstChild(){return this.metaGraph.node(this.metaGraph.nodes()[0])}getChildren(){return this.metaGraph.nodes().map(t=>this.metaGraph.node(t))}leaves(){let t,e=[],n=[this];for(;n.length;){let r=n.shift();r.isGroupNode?(t=r.metaGraph,t.nodes().forEach(e=>n.push(t.node(e)))):e.push(r.name)}return e}}class Hs{constructor(t,e){this.v=t,this.w=e,this.baseEdgeList=[],this.inbound=null,this.name=null}addBaseEdge(t,e){this.baseEdgeList.push(t)}}function Ws(t,e={}){return new Vs(t,e)}function Ys(t,e){return new Hs(t,e)}function Xs(t,e,n){const r=n||{},i=new Bs.Graph(r);return i.setGraph({name:t,rankdir:r.rankdir,type:e,align:r.align}),i}class Js{constructor(t={}){this.graphOptions=t,this.index={},this.graphOptions.compound=!0,this.root=Ws(a,this.graphOptions),this.index[a]=this.root}getNodeMap(){return this.index}node(t){return this.index[t]}setNode(t,e){this.index[t]=e}getBridgeGraph(t){const e=this.index[t];if(!e)throw Error("Could not find node in hierarchy: "+t);if(!("metaGraph"in e))return null;const n=e;if(n.bridgeGraph)return n.bridgeGraph;const r=Xs(s,c.BRIDGE,this.graphOptions);if(n.bridgeGraph=r,!e.parentNode||!("metaGraph"in e.parentNode))return r;const i=e.parentNode;return[i.metaGraph,this.getBridgeGraph(i.name)].forEach(e=>{e.edges().filter(e=>e.v===t||e.w===t).forEach(n=>{const i=n.w===t;e.edge(n).baseEdgeList.forEach(e=>{const[o,a]=i?[e.w,n.v]:[e.v,n.w],s=this.getChildName(t,o),l={v:i?a:s,w:i?s:a};let u=r.edge(l);u||(u=Ys(l.v,l.w),u.inbound=i,r.setEdge(l.v,l.w,u)),u.addBaseEdge(e,this)})})}),r}getChildName(t,e){let n=this.index[e];for(;n;){if(n.parentNode&&n.parentNode.name===t)return n.name;n=n.parentNode}throw Error("Could not find immediate child for descendant: "+e)}getPredecessors(t){const e=this.index[t];if(!e)throw Error("Could not find node with name: "+t);return this.getOneWayEdges(e,!0)}getSuccessors(t){const e=this.index[t];if(!e)throw Error("Could not find node with name: "+t);return this.getOneWayEdges(e,!1)}getOneWayEdges(t,e){const n=[];if(!t.parentNode||!t.parentNode.isGroupNode)return n;const r=t.parentNode,i=r.metaGraph,o=this.getBridgeGraph(r.name);return Ks(i,t,e,n),Ks(o,t,e,n),n}}function Zs(t,e){const{rankDirection:n,align:r}=e,i=new Js({rankdir:n,align:r});return function(t,e){Object.keys(e.nodes).forEach(n=>{const r=e.nodes[n],i=r.path;let o=t.root;o.depth=Math.max(i.length,o.depth);for(let e=0;e<i.length&&(o.depth=Math.max(o.depth,i.length-e),o.cardinality+=r.cardinality,e!==i.length-1);e++){const n=i[e];let a=t.node(n);a||(a=Ws(n,t.graphOptions),a.path=r.path.slice(0,e+1),a.parentNode=o,t.setNode(n,a),o.metaGraph.setNode(n,a)),o=a}t.setNode(r.name,r),r.parentNode=o,o.metaGraph.setNode(r.name,r)})}(i,t),function(t,e){const n=t.getNodeMap();let r=[],i=[];const o=(t,e)=>{let n=0;for(;t;)e[n++]=t.name,t=t.parentNode;return n-1};e.edges.forEach(a=>{r=[],i=[];let s=o(e.nodes[a.v],r),l=o(e.nodes[a.w],i);for(;r[s]===i[l];)if(s--,l--,s<0||l<0)throw Error("No difference found between ancestor paths.");const u=n[r[s+1]],c=r[s],h=i[l];let d=u.metaGraph.edge(c,h);d||(d=Ys(c,h),u.metaGraph.setEdge(c,h,d)),d.addBaseEdge(a,t)})}(i,t),i}function Ks(t,e,n,r){(n?t.inEdges(e.name):t.outEdges(e.name)).forEach(e=>{const n=t.edge(e);r.push(n)})}class Qs{constructor(t){this.hierarchy=t,this.index={},this.hasSubHierarchy={},this.root=new el(this.hierarchy.root,this.hierarchy.graphOptions),this.index[t.root.name]=this.root,this.buildSubHierarchy(t.root.name),this.root.expanded=!0}getRenderInfoNodes(){return Object.values(this.index)}getSubHierarchy(){return this.hasSubHierarchy}buildSubHierarchy(t){if(t in this.hasSubHierarchy)return;this.hasSubHierarchy[t]=!0;const e=this.index[t];if(e.node.type!==l.META)return;const n=e,r=n.node.metaGraph,i=n.coreGraph;r.nodes().forEach(t=>{const e=this.getOrCreateRenderNodeByName(t);i.setNode(t,e)}),r.edges().forEach(t=>{const e=r.edge(t),n=new tl(e);i.setEdge(t.v,t.w,n)});const o=n.node.parentNode;if(!o)return;const a=this.getRenderNodeByName(o.name),s=(t,...e)=>e.concat([t?"IN":"OUT"]).join("~~"),c=this.hierarchy.getBridgeGraph(t);c.edges().forEach(e=>{const n=c.edge(e),h=!!r.node(e.w),[d,f]=h?[e.w,e.v]:[e.v,e.w],p=e=>{const n=h?{v:e,w:t}:{v:t,w:e};return a.coreGraph.edge(n)};let g=p(f);g||(g=p(s(h,f,o.name)));const m=s(h,t),y=s(h,f,t);let v=i.node(y);if(!v){let t=i.node(m);if(!t){const e={name:m,type:l.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,include:u.UNSPECIFIED,inbound:h,attr:{}};t=new $s(e),this.index[m]=t,i.setNode(m,t)}const e={name:y,type:l.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,include:u.UNSPECIFIED,inbound:h,attr:{}};v=new $s(e),this.index[y]=v,i.setNode(y,v),i.setParent(y,m),t.node.cardinality++}const b=new tl(n);b.adjoiningMetaEdge=g,h?i.setEdge(y,d,b):i.setEdge(d,y,b)})}getOrCreateRenderNodeByName(t){if(!t)return null;if(t in this.index)return this.index[t];const e=this.getNodeByName(t);return e?(this.index[t]=e.isGroupNode?new el(e,this.hierarchy.graphOptions):new $s(e),this.index[t]):null}getRenderNodeByName(t){return this.index[t]}getNodeByName(t){return this.hierarchy.node(t)}}class $s{constructor(t){this.node=t,this.expanded=!1,this.x=0,this.y=0,this.coreBox={width:0,height:0},this.outboxWidth=0,this.labelOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.width=t.width||0,this.height=t.height||0,this.displayName=t.name,this.attr=t.attr}}class tl{constructor(t){this.metaEdge=t,this.adjoiningMetaEdge=null,this.weight=1,this.points=[]}}class el extends $s{constructor(t,e){super(t);const n=t.metaGraph.graph();e.compound=!0,this.coreGraph=Xs(n.name,c.CORE,e)}}function nl(t,e){t.node.isGroupNode&&function(t,e){const n=i(e);t.coreGraph.nodes().map(e=>t.coreGraph.node(e)).forEach(t=>{var r,i,o,a,s,u;const{height:c,width:h}=t;switch(t.node.type){case l.NODE:Object.assign(t,n.nodeSize.node),t.height=c||n.nodeSize.node.height,t.width=h||n.nodeSize.node.width;break;case l.BRIDGE:Object.assign(t,n.nodeSize.bridge);break;case l.META:t.expanded?nl(t,e):(Object.assign(t,n.nodeSize.meta),t.height=n.nodeSize.meta.height,t.width=n.nodeSize.meta.width);break;default:throw Error("Unrecognized node type: "+t.node.type)}if(!t.expanded){const n=t.attr;!function(t,e=!1){if(t.coreBox.width=t.width,t.coreBox.height=t.height,!e){const e=(""+t.displayName).length,n=3;t.width=Math.max(t.coreBox.width,e*n)}}(t,e&&(0===t.node.type&&!!(null===(i=null===(r=null==e?void 0:e.nodeSize)||void 0===r?void 0:r.meta)||void 0===i?void 0:i.width)||1===t.node.type&&(!!(null===(a=null===(o=null==e?void 0:e.nodeSize)||void 0===o?void 0:o.node)||void 0===a?void 0:a.width)||!!n.width)||2===t.node.type&&!!(null===(u=null===(s=null==e?void 0:e.nodeSize)||void 0===s?void 0:s.bridge)||void 0===u?void 0:u.width)))}})}(t,e),t.node.type===l.META&&function(t,e){const n=i(e),r=n.subScene.meta;Object.assign(t,r);const{nodeSep:o,rankSep:a,edgeSep:s,align:u}=n.graph.meta,c={nodesep:o,ranksep:a,edgesep:s,align:u};Object.assign(t.coreBox,function(t,e){const{ranksep:n,nodesep:r,edgesep:i,align:o}=e;Object.assign(t.graph(),{ranksep:n,nodesep:r,edgesep:i,align:o});const a=[];if(t.nodes().forEach(e=>{t.node(e).node.type!==l.BRIDGE&&a.push(e)}),!a.length)return{width:0,height:0};zs(t);let s=1/0,u=1/0,c=-1/0,h=-1/0;return a.forEach(e=>{const n=t.node(e),r=.5*n.width,i=n.x-r,o=n.x+r;s=i<s?i:s,c=o>c?o:c;const a=.5*n.height,l=n.y-a,d=n.y+a;u=l<u?l:u,h=d>h?d:h}),t.edges().forEach(e=>{const n=t.edge(e),r=t.node(n.metaEdge.v),i=t.node(n.metaEdge.w);if(3===n.points.length&&function(t){let e=rl(t[0],t[1]);for(let n=1;n<t.length-1;n++){const r=rl(t[n],t[n+1]);if(Math.abs(r-e)>1)return!1;e=r}return!0}(n.points)){if(null!=r){const t=r.expanded?r.x:il(r);n.points[0].x=t}if(null!=i){const t=i.expanded?i.x:il(i);n.points[2].x=t}n.points=[n.points[0],n.points[1]]}const o=n.points[n.points.length-2];null!=i&&(n.points[n.points.length-1]=ol(o,i));const a=n.points[1];null!=r&&(n.points[0]=ol(a,r)),n.points.forEach(t=>{s=t.x<s?t.x:s,c=t.x>c?t.x:c,u=t.y<u?t.y:u,h=t.y>h?t.y:h})}),t.nodes().forEach(e=>{const n=t.node(e);n.x-=s,n.y-=u}),t.edges().forEach(e=>{t.edge(e).points.forEach(t=>{t.x-=s,t.y-=u})}),{width:c-s,height:h-u}}(t.coreGraph,c));let h=0;t.coreGraph.nodeCount()>0&&h++;const d=h<=1?0:h;t.coreBox.width+=d+d,t.coreBox.height=r.labelHeight+t.coreBox.height,t.width=t.coreBox.width+r.paddingLeft+r.paddingRight,t.height=t.paddingTop+t.coreBox.height+t.paddingBottom}(t,e)}function rl(t,e){const n=e.x-t.x,r=e.y-t.y;return 180*Math.atan(r/n)/Math.PI}function il(t){return t.expanded?t.x:t.x-t.width/2+0+t.coreBox.width/2}function ol(t,e){const n=e.expanded?e.x:il(e),r=e.y,i=t.x-n,o=t.y-r;let a,s,l=e.expanded?e.width:e.coreBox.width,u=e.expanded?e.height:e.coreBox.height;return Math.abs(o)*l/2>Math.abs(i)*u/2?(o<0&&(u=-u),a=0===o?0:u/2*i/o,s=u/2):(i<0&&(l=-l),a=l/2,s=0===i?0:l/2*o/i),{x:n+a,y:r+s}}function al(t,e,n){var i,o,a,s;const l=t.nodes.filter((t,e,n)=>n.findIndex(e=>e.id===t.id)!==e).map(t=>t.id);if(l.length)throw new Error("Duplicated ids found: "+l.join(", "));const u=function(t){const e={nodes:[]},n=t.compound,r=Object.keys(n||{}),i=new Map,o=(t,e=[])=>{if(i.has(t))return i.get(t);for(let i=0;i<r.length;i++){let a=r[i];if(n&&-1!==n[a].indexOf(t))return e.unshift(a),o(a,e)}return 0===e.length&&i.set(t,e),e},a=e=>t.edges.filter(t=>t.w===e).map(t=>({name:t.v}));return t.nodes.forEach(t=>{const n=t.id,r=[...o(n),n];let i=a(n);e.nodes.push({name:n,path:r,inputs:i,width:t.width,height:t.height,attr:Object.assign({},t)})}),e}(t),c=function(t,e){const n=(t,e)=>{for(let n of e.values())if(n.includes(t))return!0;return!1},r=(t,e=[])=>{if(0===Object.keys(t).length)return[...new Set(e)];const i=new Map(Object.keys(t).map(e=>[e,t[e]])),o={};for(let[r,a]of i)n(r,i)?o[r]=a:e=e.concat(r,a);return r(o,e)};return r(t).filter(t=>e.includes(t))}(t.compound||{},(null==e?void 0:e.expanded)||[]),h=function(t,e){return function(t){return new Qs(t)}(Zs(qs(t),e))}(u,{rankDirection:(null===(o=null===(i=null==n?void 0:n.graph)||void 0===i?void 0:i.meta)||void 0===o?void 0:o.rankDir)||(null==e?void 0:e.rankDirection)||r.graph.meta.rankDir,align:(null===(s=null===(a=null==n?void 0:n.graph)||void 0===a?void 0:a.meta)||void 0===s?void 0:s.align)||r.graph.meta.align});return function(t,e){e.forEach(e=>{const n=t.getRenderInfoNodes().find(t=>t.displayName===e);let r=n&&n.node&&n.node.name||"";const i=t.getRenderNodeByName(r);if(!i)throw new Error("No nodes found: "+r);i.expanded=!0,t.buildSubHierarchy(r)})}(h,c),nl(h.root,n),ul(h.root)}function sl(t,e=!1){const n=JSON.parse(JSON.stringify(t)),r={nodes:[n],edges:[...n.edges]};return n.nodes.forEach((function t(e){(0===e.type||1===e.type)&&r.nodes.push(e),0===e.type&&(r.edges=r.edges.concat(e.edges)),Array.isArray(e.nodes)&&e.nodes.forEach(t)})),e&&r.nodes.forEach(t=>{const e=r.nodes.find(e=>e.id===t.parentNodeName);if(e){const n=e.x-e.width/2+e.paddingLeft,r=e.y-e.height/2+e.labelHeight+e.paddingTop;e.id!==a&&(t.x+=n,t.y+=r),0===t.type&&t.edges.forEach(e=>{e.points.forEach(e=>{e.x+=t.x-t.width/2+t.paddingLeft,e.y+=t.y-t.height/2+t.labelHeight+t.paddingTop})})}}),r}function ll(t,e,n,r){var i,o;let s=[];const l=(null===(i=n.find(e=>e.id===t))||void 0===i?void 0:i.path)||[],u=(null===(o=n.find(t=>t.id===e))||void 0===o?void 0:o.path)||[],c=[a,...l].slice(0,l.length).reverse(),h=[a,...u].slice(0,u.length);return c.forEach(i=>{const o=n.find(t=>t.id===i);s=s.concat(o.edges.filter(n=>n.baseEdgeList.some(n=>n.v===((null==r?void 0:r.v)||t)&&n.w===((null==r?void 0:r.w)||e))))}),h.filter(t=>!c.includes(t)).forEach(i=>{const o=n.find(t=>t.id===i);s=s.concat(o.edges.filter(n=>n.baseEdgeList.some(n=>n.v===((null==r?void 0:r.v)||t)&&n.w===((null==r?void 0:r.w)||e))))}),s}function ul(t){const e=t.coreGraph.nodes().map(e=>t.coreGraph.node(e));return Object.assign(Object.assign({},cl(t)),{expanded:t.expanded,nodes:t.expanded?(n=e,n.map(t=>t.node.type===l.META?ul(t):cl(t))):[],edges:t.expanded?hl(t):[]});var n}function cl(t){return{id:t.node.name,name:t.node.name,type:t.node.type,cardinality:t.node.cardinality,attr:t.attr,parentNodeName:t.node.parentNode?t.node.parentNode.name:null,coreBox:Object.assign({},t.coreBox),x:t.x,y:t.y,width:t.width,height:t.height,radius:t.radius,labelHeight:t.labelHeight,labelOffset:t.labelOffset,outboxWidth:t.outboxWidth,paddingLeft:t.paddingLeft,paddingTop:t.paddingTop,paddingRight:t.paddingRight,paddingBottom:t.paddingBottom,path:t.node.path}}function hl(t){return t.coreGraph.edges().map(e=>({renderInfoEdge:t.coreGraph.edge(e),edge:e})).filter(({renderInfoEdge:t})=>t.metaEdge).map(({edge:e,renderInfoEdge:n})=>{const r=function(t,e){const n=e.points.map(t=>Object.assign({},t));if(e.adjoiningMetaEdge){const r=e.adjoiningMetaEdge.points,i=e.metaEdge.inbound,o=i?r[r.length-1]:r[0],a=n[i?0:n.length-1],s=t.x-t.width/2,l=t.y-t.height/2,u=o.x-s,c=o.y-l,h=-t.paddingLeft,d=-(t.paddingTop+t.labelHeight);a.x=u+h,a.y=c+d}return n}(t,n);return{adjoiningEdge:n.adjoiningMetaEdge?{w:n.adjoiningMetaEdge.metaEdge.w,v:n.adjoiningMetaEdge.metaEdge.v}:null,inbound:n.metaEdge.inbound,w:e.w,v:e.v,points:r,weight:n.weight,baseEdgeList:n.metaEdge.baseEdgeList,parentNodeName:t.node.name}})}}.call(this,n("c8ba"))},"1de0":function(t,e,n){"use strict";n.r(e),n.d(e,"Graph",(function(){return C})),n.d(e,"GraphWithEvent",(function(){return B})),n.d(e,"algorithm",(function(){return r})),n.d(e,"comparision",(function(){return o})),n.d(e,"essence",(function(){return i})),n.d(e,"generate",(function(){return s}));var r={};n.r(r),n.d(r,"components",(function(){return Y})),n.d(r,"dfs",(function(){return Z})),n.d(r,"dijkstra",(function(){return at})),n.d(r,"dijkstraAll",(function(){return lt})),n.d(r,"findCycles",(function(){return dt})),n.d(r,"tarjan",(function(){return ct})),n.d(r,"isAcyclic",(function(){return It})),n.d(r,"postorder",(function(){return Lt})),n.d(r,"preorder",(function(){return Rt})),n.d(r,"prim",(function(){return H})),n.d(r,"topsort",(function(){return Ot})),n.d(r,"floydWarshall",(function(){return Bt}));var i={};n.r(i),n.d(i,"isGraph",(function(){return ee})),n.d(i,"isSimpleGraph",(function(){return ne})),n.d(i,"isNullGraph",(function(){return re})),n.d(i,"hasSelfLoop",(function(){return ie}));var o={};n.r(o),n.d(o,"containAllSameEdges",(function(){return Wt})),n.d(o,"containAllSameNodes",(function(){return Ht})),n.d(o,"containSameEdges",(function(){return Ut})),n.d(o,"containSameNodes",(function(){return zt})),n.d(o,"isGraphComplement",(function(){return oe})),n.d(o,"isGraphOptionSame",(function(){return Vt})),n.d(o,"getSameEdges",(function(){return qt})),n.d(o,"getSameNodes",(function(){return Gt})),n.d(o,"isGraphSame",(function(){return Yt})),n.d(o,"isGraphContainsAnother",(function(){return Xt}));var a,s={};function l(t,e){var n=t.get(e)||0;t.set(e,n+1)}function u(t,e){var n=t.get(e);void 0!==n&&(n-=1,n>0?t.set(e,n):t.delete(e))}function c(t,e,n,r){var i=String(e),o=String(n);if(!t&&i>o){var s=i;i=o,o=s}return i+a.EDGE_KEY_DELIM+o+a.EDGE_KEY_DELIM+(void 0===r?a.DEFAULT_EDGE_NAME:r)}function h(t,e,n,r){var i=String(e),o=String(n),a={v:e,w:n};if(!t&&i>o){var s=a.v;a.v=a.w,a.w=s}return void 0!==r&&(a.name=r),a}function d(t,e){return c(t,e.v,e.w,e.name)}function f(t){return"function"===typeof t}n.r(s),n.d(s,"getGraphComplement",(function(){return ae})),function(t){t["DEFAULT_EDGE_NAME"]="\0",t["GRAPH_NODE"]="\0",t["EDGE_KEY_DELIM"]=""}(a||(a={}));var p=function(t){return t.nodes().map((function(e){var n=t.node(e),r=t.parent(e),i={id:e,value:n,parent:r};return void 0===i.value&&delete i.value,void 0===i.parent&&delete i.parent,i}))},g=function(t){return t.edges().map((function(e){var n=t.edge(e),r={v:e.v,w:e.w,value:n,name:e.name};return void 0===r.name&&delete r.name,void 0===r.value&&delete r.value,r}))},m=function(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:p(t),edges:g(t),value:t.graph()};return void 0===e.value&&delete e.value,e},y=function(t){var e=new C(t.options);return void 0!==t.value&&e.setGraph(t.value),t.nodes.forEach((function(t){e.setNode(t.id,t.value),t.parent&&e.setParent(t.id,t.parent)})),t.edges.forEach((function(t){e.setEdge(t.v,t.w,t.value,t.name)})),e};function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function x(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function S(t,e,n){return e&&w(t.prototype,e),n&&w(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var E={compound:!1,multigraph:!1,directed:!0},C=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};x(this,t),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=a.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return e.directed},this.isMultigraph=function(){return e.multigraph},this.isCompound=function(){return e.compound},this.setGraph=function(t){return e.label=t,e},this.graph=function(){return e.label},this.setDefaultNodeLabel=function(t){return f(t)?e.defaultNodeLabelFn=t:e.defaultNodeLabelFn=function(){return t},e},this.nodeCount=function(){return e.nodeCountNum},this.node=function(t){return e.nodesLabelMap.get(t)},this.nodes=function(){return Array.from(e.nodesLabelMap.keys())},this.sources=function(){return e.nodes().filter((function(t){var n;return!(null===(n=e.inEdgesMap.get(t))||void 0===n?void 0:n.size)}))},this.sinks=function(){return e.nodes().filter((function(t){var n;return!(null===(n=e.outEdgesMap.get(t))||void 0===n?void 0:n.size)}))},this.setNodes=function(t,n){return t.map((function(t){return e.setNode(t,n)})),e},this.hasNode=function(t){return e.nodesLabelMap.has(t)},this.checkCompound=function(){if(!e.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(t){if(e.isCompound()){var n,r=null===(n=e.parentMap)||void 0===n?void 0:n.get(t);if(r!==e.GRAPH_NODE)return r}},this.removeFromParentsChildList=function(t){var n=e.parentMap.get(t);e.childrenMap.get(n).delete(t)},this.setParent=function(t,n){var r,i;e.checkCompound();var o=void 0===n?e.GRAPH_NODE:n,a=e.parent(o);while(a){if(t===a)throw new Error("Setting "+n+" as parent of "+t+" would create a cycle");a=e.parent(a)}n&&e.setNode(n),e.setNode(t),e.removeFromParentsChildList(t),null===(r=e.parentMap)||void 0===r||r.set(t,o);var s=e.childrenMap.get(o);return s.set(t,!0),null===(i=e.childrenMap)||void 0===i||i.set(o,s),e},this.children=function(t){var n=void 0===t?e.GRAPH_NODE:t;if(e.isCompound()){var r,i=null===(r=e.childrenMap)||void 0===r?void 0:r.get(n);return i?Array.from(i.keys()):void 0}return n===e.GRAPH_NODE?e.nodes():t&&e.hasNode(t)?[]:void 0},this.predecessors=function(t){var n=e.predecessorsMap.get(t);return n?Array.from(n.keys()):void 0},this.successors=function(t){var n=e.successorsMap.get(t);return n?Array.from(n.keys()):void 0},this.neighbors=function(t){var n;if(e.hasNode(t))return Array.from(new Set(null===(n=e.predecessors(t))||void 0===n?void 0:n.concat(e.successors(t))))},this.isLeaf=function(t){var n,r;return e.isDirected()?!(null===(r=e.successors(t))||void 0===r?void 0:r.length):!(null===(n=e.neighbors(t))||void 0===n?void 0:n.length)},this.filterNodes=function(n){var r=e.directed,i=e.multigraph,o=e.compound,a=new t({directed:r,multigraph:i,compound:o});if(a.setGraph(e.graph()),e.nodes().forEach((function(t){n(t)&&a.setNode(t,e.node(t))})),e.edges().forEach((function(t){a.hasNode(t.v)&&a.hasNode(t.w)&&a.setEdgeObj(t,e.edge(t))})),o){var s=function(t){var n=e.parent(t);while(void 0!==n&&!a.hasNode(n))n=e.parent(n);return n};a.nodes().forEach((function(t){a.setParent(t,s(t))}))}return a},this.setDefaultEdgeLabel=function(t){return f(t)?e.defaultEdgeLabelFn=t:e.defaultEdgeLabelFn=function(){return t},e},this.edgeCount=function(){return e.edgeCountNum},this.setEdgeObj=function(t,n){return e.setEdge(t.v,t.w,n,t.name)},this.setPath=function(t,n){return t.reduce((function(t,r){return e.setEdge(t,r,n),r})),e},this.edgeFromArgs=function(t,n,r){return e.edge({v:t,w:n,name:r})},this.edge=function(t){return e.edgesLabelsMap.get(d(e.isDirected(),t))},this.hasEdge=function(t,n,r){return e.edgesLabelsMap.has(d(e.isDirected(),{v:t,w:n,name:r}))},this.removeEdgeObj=function(t){var n=t.v,r=t.w,i=t.name;return e.removeEdge(n,r,i)},this.edges=function(){return Array.from(e.edgesMap.values())},this.inEdges=function(t,n){var r=e.inEdgesMap.get(t);if(r)return Array.from(r.values()).filter((function(t){return!n||t.v===n}))},this.outEdges=function(t,n){var r=e.outEdgesMap.get(t);if(r)return Array.from(r.values()).filter((function(t){return!n||t.w===n}))},this.nodeEdges=function(t,n){var r;if(e.hasNode(t))return null===(r=e.inEdges(t,n))||void 0===r?void 0:r.concat(e.outEdges(t,n))},this.toJSON=function(){return m(e)},this.nodeInDegree=function(t){var n=e.inEdgesMap.get(t);return n?n.size:0},this.nodeOutDegree=function(t){var n=e.outEdgesMap.get(t);return n?n.size:0},this.nodeDegree=function(t){return e.nodeInDegree(t)+e.nodeOutDegree(t)},this.source=function(t){return t.v},this.target=function(t){return t.w};var r=b(b({},E),n);this.compound=r.compound,this.directed=r.directed,this.multigraph=r.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return S(t,[{key:"setNode",value:function(t,e){var n,r=this.nodesLabelMap,i=this.defaultNodeLabelFn,o=this.isCompound,a=this.parentMap,s=this.childrenMap,l=this.inEdgesMap,u=this.outEdgesMap,c=this.predecessorsMap,h=this.successorsMap;if(r.has(t))return void 0!==e&&r.set(t,e),this;(r.set(t,e||i(t)),o())&&(null===a||void 0===a||a.set(t,this.GRAPH_NODE),null===s||void 0===s||s.set(t,new Map),(null===s||void 0===s?void 0:s.has(this.GRAPH_NODE))||null===s||void 0===s||s.set(this.GRAPH_NODE,new Map),null===s||void 0===s||null===(n=s.get(this.GRAPH_NODE))||void 0===n||n.set(t,!0));return[l,u,c,h].forEach((function(e){return e.set(t,new Map)})),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(t){var e=this;if(this.hasNode(t)){var n,r,i,o=function(t){e.removeEdge(t.v,t.w,t.name)},a=this.inEdgesMap,s=this.outEdgesMap,l=this.predecessorsMap,u=this.successorsMap,c=this.nodesLabelMap;if(this.isCompound())this.removeFromParentsChildList(t),null===(n=this.parentMap)||void 0===n||n.delete(t),null===(r=this.children(t))||void 0===r||r.forEach((function(t){return e.setParent(t)})),null===(i=this.childrenMap)||void 0===i||i.delete(t);var h=a.get(t),d=s.get(t);Array.from(h.values()).forEach((function(t){return o(t)})),Array.from(d.values()).forEach((function(t){return o(t)})),c.delete(t),a.delete(t),s.delete(t),l.delete(t),u.delete(t),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(t,e,n,r){var i,o,a=h(this.isDirected(),t,e,r),s=d(this.isDirected(),a),u=a.v,c=a.w;if(this.edgesLabelsMap.has(s))return this.edgesLabelsMap.set(s,n),this;if(void 0!==r&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(u),this.setNode(c),this.edgesLabelsMap.set(s,n||this.defaultEdgeLabelFn(u,c,r)),Object.freeze(a),this.edgesMap.set(s,a);var f=this.predecessorsMap.get(c),p=this.successorsMap.get(u);return l(f,u),l(p,c),null===(i=this.inEdgesMap.get(c))||void 0===i||i.set(s,a),null===(o=this.outEdgesMap.get(u))||void 0===o||o.set(s,a),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(t,e,n){var r=c(this.isDirected(),t,e,n),i=this.edgesMap.get(r);if(i){var o=h(this.isDirected(),t,e,n),a=o.v,s=o.w;this.edgesLabelsMap.delete(r),this.edgesMap.delete(r);var l=this.predecessorsMap.get(s),d=this.successorsMap.get(a);u(l,a),u(d,s),this.inEdgesMap.get(s).delete(r),this.outEdgesMap.get(a).delete(r),this.edgeCountNum-=1}return this}}]),t}();function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function O(t,e,n){return e&&A(t.prototype,e),n&&A(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function k(){return k="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=I(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},k.apply(this,arguments)}function I(t,e){while(!Object.prototype.hasOwnProperty.call(t,e))if(t=j(t),null===t)break;return t}function P(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&L(t,e)}function L(t,e){return L=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},L(t,e)}function N(t){var e=F();return function(){var n,r=j(t);if(e){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R(this,n)}}function R(t,e){if(e&&("object"===M(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return D(t)}function D(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function F(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function j(t){return j=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},j(t)}C.fromJSON=y;var B=function(t){P(n,t);var e=N(n);function n(){var t;T(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),t.eventPool={},t}return O(n,[{key:"appendEvent",value:function(t,e){this.eventPool[t]||(this.eventPool[t]=[]),this.eventPool[t].push(e)}},{key:"removeEvent",value:function(t,e){if(this.eventPool[t]){var n=this.eventPool[t].indexOf(e);n>-1&&this.eventPool[t].splice(n,1)}}},{key:"emitEvent",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.eventPool[t]&&this.eventPool[t].forEach((function(t){t.apply(void 0,n)}))}},{key:"setNode",value:function(t,e){return k(j(n.prototype),"setNode",this).call(this,t,e),this.emitEvent("nodeAdd",t,e),this}},{key:"removeNode",value:function(t){return k(j(n.prototype),"removeNode",this).call(this,t),this.emitEvent("nodeRemove",t),this}},{key:"setEdge",value:function(t,e,r,i){return k(j(n.prototype),"setEdge",this).call(this,t,e,r,i),this.emitEvent("edgeAdd",t,e,r,i),this}},{key:"removeEdge",value:function(t,e,r){return k(j(n.prototype),"removeEdge",this).call(this,t,e,r),this.emitEvent("edgeRemove",t,e,r),this}}]),n}(C);function z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function U(t,e,n){return e&&z(t.prototype,e),n&&z(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function G(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var q=U((function t(){var e=this;G(this,t),this.arr=[],this.keyIndice=new Map,this.size=function(){return e.arr.length},this.keys=function(){return e.arr.map((function(t){return t.key}))},this.has=function(t){return e.keyIndice.has(t)},this.priority=function(t){var n=e.keyIndice.get(t);if(void 0!==n)return e.arr[n].priority},this.swap=function(t,n){var r=e.arr,i=e.keyIndice,o=[r[t],r[n]],a=o[0],s=o[1];r[t]=s,r[n]=a,i.set(a.key,n),i.set(s.key,t)},this.innerDecrease=function(t){var n,r=e.arr,i=r[t].priority,o=t;while(0!==o){var a;if(n=o>>1,(null===(a=r[n])||void 0===a?void 0:a.priority)<i)break;e.swap(o,n),o=n}},this.heapify=function(t){var n=e.arr,r=t<<1,i=r+1,o=t;r<n.length&&(o=n[r].priority<n[o].priority?r:o,i<n.length&&(o=n[i].priority<n[o].priority?i:o),o!==t&&(e.swap(t,o),e.heapify(o)))},this.min=function(){if(0===e.size())throw new Error("Queue underflow");return e.arr[0].key},this.add=function(t,n){var r=e.keyIndice,i=e.arr;if(!r.has(t)){var o=i.length;return r.set(t,o),i.push({key:t,priority:n}),e.innerDecrease(o),!0}return!1},this.removeMin=function(){e.swap(0,e.arr.length-1);var t=e.arr.pop();return e.keyIndice.delete(t.key),e.heapify(0),t.key},this.decrease=function(t,n){if(!e.has(t))throw new Error("There's no key named ".concat(t));var r=e.keyIndice.get(t);if(n>e.arr[r].priority)throw new Error("New priority is greater than current priority.Key: ".concat(t," Old: + ").concat(e.arr[r].priority," New: ").concat(n));e.arr[r].priority=n,e.innerDecrease(r)}})),V=function(t,e){var n,r=new C,i=new Map,o=new q;function a(t){var r=t.v===n?t.w:t.v,a=o.priority(r);if(void 0!==a){var s=e(t);s<a&&(i.set(r,n),o.decrease(r,s))}}if(0===t.nodeCount())return r;t.nodes().forEach((function(t){o.add(t,Number.POSITIVE_INFINITY),r.setNode(t)})),o.decrease(t.nodes()[0],0);var s=!1;while(o.size()>0){var l;if(n=o.removeMin(),i.has(n))r.setEdge(n,i.get(n));else{if(s)throw new Error("Input graph is not connected: "+t.graph());s=!0}null===(l=t.nodeEdges(n))||void 0===l||l.forEach(a)}return r},H=V,W=function(t){var e=new Set,n=[],r=t.nodes();return r.forEach((function(r){var i=[],o=[r];while(o.length>0){var a,s,l=o.pop();if(!e.has(l))e.add(l),i.push(l),null===(a=t.successors(l))||void 0===a||a.forEach((function(t){return o.push(t)})),null===(s=t.predecessors(l))||void 0===s||s.forEach((function(t){return o.push(t)}))}i.length&&n.push(i)})),n},Y=W,X=function t(e,n,r,i,o,a){i.includes(n)||(i.push(n),r||a.push(n),o(n).forEach((function(n){return t(e,n,r,i,o,a)})),r&&a.push(n))},J=function(t,e,n){var r=Array.isArray(e)?e:[e],i=function(e){return t.isDirected()?t.successors(e):t.neighbors(e)},o=[],a=[];return r.forEach((function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);X(t,e,"post"===n,a,i,o)})),o},Z=J;function K(t,e){return nt(t)||et(t,e)||$(t,e)||Q()}function Q(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function $(t,e){if(t){if("string"===typeof t)return tt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tt(t,e):void 0}}function tt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function et(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(l){s=!0,i=l}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function nt(t){if(Array.isArray(t))return t}var rt=function(){return 1},it=function(t,e,n,r){return ot(t,e,n||rt,r||function(e){return t.outEdges(e)})},ot=function(t,e,n,r){var i,o,a=new Map,s=new q,l=function(t){var e=t.v!==i?t.v:t.w,r=a.get(e),l=n(t),u=o.distance+l;if(l<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+l);u<r.distance&&(r.distance=u,r.predecessor=i,s.decrease(e,u))};t.nodes().forEach((function(t){var n=t===e?0:Number.POSITIVE_INFINITY;a.set(t,{distance:n}),s.add(t,n)}));while(s.size()>0){if(i=s.removeMin(),o=a.get(i),o&&o.distance===Number.POSITIVE_INFINITY)break;r(i).forEach(l)}var u={};return Array.from(a.entries()).forEach((function(t){var e=K(t,2),n=e[0],r=e[1];return u[String(n)]=r,u})),u},at=it,st=function(t,e,n){var r={};return t.nodes().forEach((function(i){return r[String(i)]=at(t,i,e,n),r})),r},lt=st,ut=function(t){var e=0,n=[],r=new Map,i=[];function o(a){var s,l={onStack:!0,lowlink:e,index:e};if(r.set(a,l),e+=1,n.push(a),null===(s=t.successors(a))||void 0===s||s.forEach((function(t){var e;if(r.has(t)){if(null===(e=r.get(t))||void 0===e?void 0:e.onStack){var n=r.get(t);l.lowlink=Math.min(l.lowlink,n.index)}}else{o(t);var i=r.get(t);l.lowlink=Math.min(l.lowlink,i.lowlink)}})),l.lowlink===l.index){var u,c=[];do{u=n.pop();var h=r.get(u);h.onStack=!1,c.push(u)}while(a!==u);i.push(c)}}return t.nodes().forEach((function(t){r.has(t)||o(t)})),i},ct=ut,ht=function(t){return ct(t).filter((function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])}))},dt=ht;function ft(t){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ft(t)}function pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function gt(t,e,n){return e&&pt(t.prototype,e),n&&pt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function mt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yt(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ct(t,e)}function vt(t){var e=St();return function(){var n,r=Mt(t);if(e){var i=Mt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bt(this,n)}}function bt(t,e){if(e&&("object"===ft(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _t(t)}function _t(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xt(t){var e="function"===typeof Map?new Map:void 0;return xt=function(t){if(null===t||!Et(t))return t;if("function"!==typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return wt(t,arguments,Mt(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Ct(n,t)},xt(t)}function wt(t,e,n){return wt=St()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=Function.bind.apply(t,r),o=new i;return n&&Ct(o,n.prototype),o},wt.apply(null,arguments)}function St(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Et(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function Ct(t,e){return Ct=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ct(t,e)}function Mt(t){return Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Mt(t)}var Tt=function(t){yt(n,t);var e=vt(n);function n(){return mt(this,n),e.apply(this,arguments)}return gt(n)}(xt(Error));function At(t){var e=new Set,n=new Set,r=[];function i(o){if(n.has(o))throw new Tt;var a;e.has(o)||(n.add(o),e.add(o),null===(a=t.predecessors(o))||void 0===a||a.forEach(i),n.delete(o),r.push(o))}if(t.sinks().forEach(i),e.size!==t.nodeCount())throw new Tt;return r}var Ot=At,kt=function(t){try{Ot(t)}catch(e){if(e instanceof Tt)return!1;throw e}return!0},It=kt,Pt=function(t,e){return Z(t,e,"post")},Lt=Pt,Nt=function(t,e){return Z(t,e,"pre")},Rt=Nt,Dt=function(){return 1};function Ft(t,e,n){return jt(t,e||Dt,n||function(e){return t.outEdges(e)})}function jt(t,e,n){var r={},i=t.nodes();return i.forEach((function(t){var o=String(t);r[o]={},r[o][o]={distance:0},i.forEach((function(e){t!==e&&(r[o][String(e)]={distance:Number.POSITIVE_INFINITY})})),n(t).forEach((function(n){var i=n.v===t?n.w:n.v,a=e(n);r[o][String(i)]={distance:a,predecessor:t}}))})),i.forEach((function(t){var e=String(t),n=r[e];i.forEach((function(t){var o=String(t),a=r[o];i.forEach((function(t){var r=String(t),i=a[e],o=n[r],s=a[r],l=i.distance+o.distance;l<s.distance&&(s.distance=l,s.predecessor=o.predecessor)}))}))})),r}var Bt=Ft,zt=function(t,e){for(var n=t.nodes(),r=0;r<n.length;r++){var i=n[r];if(e.hasNode(i))return!0}return!1},Ut=function(t,e){for(var n=t.edges(),r=0;r<n.length;r++){var i=n[r];if(e.hasEdge(i.v,i.w,i.name))return!0}return!1},Gt=function(t,e){var n=t.nodes(),r=n.filter((function(t){return e.hasNode(t)}));return r},qt=function(t,e){var n=t.edges(),r=n.filter((function(t){return e.hasEdge(t.v,t.w,t.name)}));return r},Vt=function(t,e){return t.isCompound()===e.isCompound()&&t.isDirected()===e.isDirected()&&t.isMultigraph()===e.isMultigraph()},Ht=function(t,e){var n=Gt(t,e);return n.length===t.nodes().length},Wt=function(t,e){var n=qt(t,e);return n.length===t.edges().length},Yt=function(t,e){return Vt(t,e)&&t.nodeCount()===e.nodeCount()&&Ht(t,e)&&t.edgeCount()===e.edgeCount()&&Wt(t,e)},Xt=function(t,e){return Ht(t,e)&&Wt(t,e)};function Jt(t,e){return te(t)||$t(t,e)||Kt(t,e)||Zt()}function Zt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Kt(t,e){if(t){if("string"===typeof t)return Qt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qt(t,e):void 0}}function Qt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $t(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(l){s=!0,i=l}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function te(t){if(Array.isArray(t))return t}function ee(t){return t instanceof C}function ne(t){if(t.isMultigraph())return!1;for(var e=t.edges(),n=new Map,r=0;r<e.length;r++){var i=e[r];if(i.v===i.w)return!1;var o=[i.v,i.w].sort(),a=Jt(o,2),s=a[0],l=a[1],u="".concat(s,"-").concat(l);if(n.has(u))return!1;n.set(u,!0)}return!0}function re(t){return 0===t.nodes().length}function ie(t){for(var e=t.edges(),n=0;n<e.length;n++){var r=e[n];if(r.v===r.w)return!0}return!1}var oe=function(t,e){if(!ne(t)||!ne(e))return!1;if(!Ht(t,e))return!1;if(Ut(t,e))return!1;var n=t.nodeCount();return t.edgeCount()+e.edgeCount()===n*(n-1)/2},ae=function(t){if(!ne(t))return null;for(var e=t.nodeCount(),n=new C({compound:t.isCompound(),directed:t.isDirected(),multigraph:t.isMultigraph()}),r=t.nodes(),i=0;i<e;i++){var o=r[i];n.setNode(o,t.node(o));for(var a=i+1;a<e;a++){var s=r[a];t.hasEdge(o,s)||n.setEdge(o,s)}}return n}},"1dfc":function(t,e,n){"use strict";var r=n("c674");function i(t,e,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=i,t.readFields(o,this,e)}function o(t,e,n){1==t?e.id=n.readVarint():2==t?a(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function a(t,e){var n=t.readVarint()+t.pos;while(t.pos<n){var r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}function s(t){var e=t.length;if(e<=1)return[t];for(var n,r,i=[],o=0;o<e;o++){var a=l(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[t[o]]):n.push(t[o]))}return n&&i.push(n),i}function l(t){for(var e,n,r=0,i=0,o=t.length,a=o-1;i<o;a=i++)e=t[i],n=t[a],r+=(n.x-e.x)*(e.y+n.y);return r}t.exports=i,i.types=["Unknown","Point","LineString","Polygon"],i.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;var e,n=t.readVarint()+t.pos,i=1,o=0,a=0,s=0,l=[];while(t.pos<n){if(o<=0){var u=t.readVarint();i=7&u,o=u>>3}if(o--,1===i||2===i)a+=t.readSVarint(),s+=t.readSVarint(),1===i&&(e&&l.push(e),e=[]),e.push(new r(a,s));else{if(7!==i)throw new Error("unknown command "+i);e&&e.push(e[0].clone())}}return e&&l.push(e),l},i.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;var e=t.readVarint()+t.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,l=1/0,u=-1/0;while(t.pos<e){if(r<=0){var c=t.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)i+=t.readSVarint(),o+=t.readSVarint(),i<a&&(a=i),i>s&&(s=i),o<l&&(l=o),o>u&&(u=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,l,s,u]},i.prototype.toGeoJSON=function(t,e,n){var r,o,a=this.extent*Math.pow(2,n),l=this.extent*t,u=this.extent*e,c=this.loadGeometry(),h=i.types[this.type];function d(t){for(var e=0;e<t.length;e++){var n=t[e],r=180-360*(n.y+u)/a;t[e]=[360*(n.x+l)/a-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}switch(this.type){case 1:var f=[];for(r=0;r<c.length;r++)f[r]=c[r][0];c=f,d(c);break;case 2:for(r=0;r<c.length;r++)d(c[r]);break;case 3:for(c=s(c),r=0;r<c.length;r++)for(o=0;o<c[r].length;o++)d(c[r][o]);break}1===c.length?c=c[0]:h="Multi"+h;var p={type:"Feature",geometry:{type:h,coordinates:c},properties:this.properties};return"id"in this&&(p.id=this.id),p}},"1e16":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["search_type","typed_keys","max_concurrent_searches","pretty","human","error_trace","source","filter_path"],a={searchType:"search_type",typedKeys:"typed_keys",maxConcurrentSearches:"max_concurrent_searches",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["body"]){const t=new n("Missing required parameter: body");return r(t,l)}if(null!=t["type"]&&null==t["index"]){const t=new n("Missing required parameter of the url: index");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,type:f,...p}=t;p=i(o,a,p,u),null==c&&(c=null==h?"GET":"POST");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m=null!=d&&null!=f?"/"+encodeURIComponent(d)+"/"+encodeURIComponent(f)+"/_msearch/template":null!=d?"/"+encodeURIComponent(d)+"/_msearch/template":"/_msearch/template";const y={method:c,path:m,bulkBody:h,querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},"1ee8":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["nodes","actions","parent_node","parent_task_id","pretty","human","error_trace","source","filter_path"],a={parentNode:"parent_node",parentTaskId:"parent_task_id",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,taskId:d,task_id:f,...p}=t;p=i(o,a,p,u),null==c&&(c="POST");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m=null!=(f||d)?"/_tasks/"+encodeURIComponent(f||d)+"/_cancel":"/_tasks/_cancel";const y={method:c,path:m,body:"",querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},"20e73":function(t,e,n){"use strict";n.r(e),n.d(e,"glMatrix",(function(){return c})),n.d(e,"mat2",(function(){return r})),n.d(e,"mat2d",(function(){return i})),n.d(e,"mat3",(function(){return o})),n.d(e,"mat4",(function(){return a})),n.d(e,"quat",(function(){return l})),n.d(e,"quat2",(function(){return u})),n.d(e,"vec2",(function(){return Zr})),n.d(e,"vec3",(function(){return Fe})),n.d(e,"vec4",(function(){return s}));var r={};n.r(r),n.d(r,"create",(function(){return h})),n.d(r,"clone",(function(){return d})),n.d(r,"copy",(function(){return f})),n.d(r,"identity",(function(){return p})),n.d(r,"fromValues",(function(){return g})),n.d(r,"set",(function(){return m})),n.d(r,"transpose",(function(){return y})),n.d(r,"invert",(function(){return v})),n.d(r,"adjoint",(function(){return b})),n.d(r,"determinant",(function(){return _})),n.d(r,"multiply",(function(){return x})),n.d(r,"rotate",(function(){return w})),n.d(r,"scale",(function(){return S})),n.d(r,"fromRotation",(function(){return E})),n.d(r,"fromScaling",(function(){return C})),n.d(r,"str",(function(){return M})),n.d(r,"frob",(function(){return T})),n.d(r,"LDU",(function(){return A})),n.d(r,"add",(function(){return O})),n.d(r,"subtract",(function(){return k})),n.d(r,"exactEquals",(function(){return I})),n.d(r,"equals",(function(){return P})),n.d(r,"multiplyScalar",(function(){return L})),n.d(r,"multiplyScalarAndAdd",(function(){return N})),n.d(r,"mul",(function(){return R})),n.d(r,"sub",(function(){return D}));var i={};n.r(i),n.d(i,"create",(function(){return F})),n.d(i,"clone",(function(){return j})),n.d(i,"copy",(function(){return B})),n.d(i,"identity",(function(){return z})),n.d(i,"fromValues",(function(){return U})),n.d(i,"set",(function(){return G})),n.d(i,"invert",(function(){return q})),n.d(i,"determinant",(function(){return V})),n.d(i,"multiply",(function(){return H})),n.d(i,"rotate",(function(){return W})),n.d(i,"scale",(function(){return Y})),n.d(i,"translate",(function(){return X})),n.d(i,"fromRotation",(function(){return J})),n.d(i,"fromScaling",(function(){return Z})),n.d(i,"fromTranslation",(function(){return K})),n.d(i,"str",(function(){return Q})),n.d(i,"frob",(function(){return $})),n.d(i,"add",(function(){return tt})),n.d(i,"subtract",(function(){return et})),n.d(i,"multiplyScalar",(function(){return nt})),n.d(i,"multiplyScalarAndAdd",(function(){return rt})),n.d(i,"exactEquals",(function(){return it})),n.d(i,"equals",(function(){return ot})),n.d(i,"mul",(function(){return at})),n.d(i,"sub",(function(){return st}));var o={};n.r(o),n.d(o,"create",(function(){return lt})),n.d(o,"fromMat4",(function(){return ut})),n.d(o,"clone",(function(){return ct})),n.d(o,"copy",(function(){return ht})),n.d(o,"fromValues",(function(){return dt})),n.d(o,"set",(function(){return ft})),n.d(o,"identity",(function(){return pt})),n.d(o,"transpose",(function(){return gt})),n.d(o,"invert",(function(){return mt})),n.d(o,"adjoint",(function(){return yt})),n.d(o,"determinant",(function(){return vt})),n.d(o,"multiply",(function(){return bt})),n.d(o,"translate",(function(){return _t})),n.d(o,"rotate",(function(){return xt})),n.d(o,"scale",(function(){return wt})),n.d(o,"fromTranslation",(function(){return St})),n.d(o,"fromRotation",(function(){return Et})),n.d(o,"fromScaling",(function(){return Ct})),n.d(o,"fromMat2d",(function(){return Mt})),n.d(o,"fromQuat",(function(){return Tt})),n.d(o,"normalFromMat4",(function(){return At})),n.d(o,"projection",(function(){return Ot})),n.d(o,"str",(function(){return kt})),n.d(o,"frob",(function(){return It})),n.d(o,"add",(function(){return Pt})),n.d(o,"subtract",(function(){return Lt})),n.d(o,"multiplyScalar",(function(){return Nt})),n.d(o,"multiplyScalarAndAdd",(function(){return Rt})),n.d(o,"exactEquals",(function(){return Dt})),n.d(o,"equals",(function(){return Ft})),n.d(o,"mul",(function(){return jt})),n.d(o,"sub",(function(){return Bt}));var a={};n.r(a),n.d(a,"create",(function(){return zt})),n.d(a,"clone",(function(){return Ut})),n.d(a,"copy",(function(){return Gt})),n.d(a,"fromValues",(function(){return qt})),n.d(a,"set",(function(){return Vt})),n.d(a,"identity",(function(){return Ht})),n.d(a,"transpose",(function(){return Wt})),n.d(a,"invert",(function(){return Yt})),n.d(a,"adjoint",(function(){return Xt})),n.d(a,"determinant",(function(){return Jt})),n.d(a,"multiply",(function(){return Zt})),n.d(a,"translate",(function(){return Kt})),n.d(a,"scale",(function(){return Qt})),n.d(a,"rotate",(function(){return $t})),n.d(a,"rotateX",(function(){return te})),n.d(a,"rotateY",(function(){return ee})),n.d(a,"rotateZ",(function(){return ne})),n.d(a,"fromTranslation",(function(){return re})),n.d(a,"fromScaling",(function(){return ie})),n.d(a,"fromRotation",(function(){return oe})),n.d(a,"fromXRotation",(function(){return ae})),n.d(a,"fromYRotation",(function(){return se})),n.d(a,"fromZRotation",(function(){return le})),n.d(a,"fromRotationTranslation",(function(){return ue})),n.d(a,"fromQuat2",(function(){return ce})),n.d(a,"getTranslation",(function(){return he})),n.d(a,"getScaling",(function(){return de})),n.d(a,"getRotation",(function(){return fe})),n.d(a,"fromRotationTranslationScale",(function(){return pe})),n.d(a,"fromRotationTranslationScaleOrigin",(function(){return ge})),n.d(a,"fromQuat",(function(){return me})),n.d(a,"frustum",(function(){return ye})),n.d(a,"perspectiveNO",(function(){return ve})),n.d(a,"perspective",(function(){return be})),n.d(a,"perspectiveZO",(function(){return _e})),n.d(a,"perspectiveFromFieldOfView",(function(){return xe})),n.d(a,"orthoNO",(function(){return we})),n.d(a,"ortho",(function(){return Se})),n.d(a,"orthoZO",(function(){return Ee})),n.d(a,"lookAt",(function(){return Ce})),n.d(a,"targetTo",(function(){return Me})),n.d(a,"str",(function(){return Te})),n.d(a,"frob",(function(){return Ae})),n.d(a,"add",(function(){return Oe})),n.d(a,"subtract",(function(){return ke})),n.d(a,"multiplyScalar",(function(){return Ie})),n.d(a,"multiplyScalarAndAdd",(function(){return Pe})),n.d(a,"exactEquals",(function(){return Le})),n.d(a,"equals",(function(){return Ne})),n.d(a,"mul",(function(){return Re})),n.d(a,"sub",(function(){return De}));var s={};n.r(s),n.d(s,"create",(function(){return je})),n.d(s,"clone",(function(){return Be})),n.d(s,"fromValues",(function(){return ze})),n.d(s,"copy",(function(){return Ue})),n.d(s,"set",(function(){return Ge})),n.d(s,"add",(function(){return qe})),n.d(s,"subtract",(function(){return Ve})),n.d(s,"multiply",(function(){return He})),n.d(s,"divide",(function(){return We})),n.d(s,"ceil",(function(){return Ye})),n.d(s,"floor",(function(){return Xe})),n.d(s,"min",(function(){return Je})),n.d(s,"max",(function(){return Ze})),n.d(s,"round",(function(){return Ke})),n.d(s,"scale",(function(){return Qe})),n.d(s,"scaleAndAdd",(function(){return $e})),n.d(s,"distance",(function(){return tn})),n.d(s,"squaredDistance",(function(){return en})),n.d(s,"length",(function(){return nn})),n.d(s,"squaredLength",(function(){return rn})),n.d(s,"negate",(function(){return on})),n.d(s,"inverse",(function(){return an})),n.d(s,"normalize",(function(){return sn})),n.d(s,"dot",(function(){return ln})),n.d(s,"cross",(function(){return un})),n.d(s,"lerp",(function(){return cn})),n.d(s,"random",(function(){return hn})),n.d(s,"transformMat4",(function(){return dn})),n.d(s,"transformQuat",(function(){return fn})),n.d(s,"zero",(function(){return pn})),n.d(s,"str",(function(){return gn})),n.d(s,"exactEquals",(function(){return mn})),n.d(s,"equals",(function(){return yn})),n.d(s,"sub",(function(){return vn})),n.d(s,"mul",(function(){return bn})),n.d(s,"div",(function(){return _n})),n.d(s,"dist",(function(){return xn})),n.d(s,"sqrDist",(function(){return wn})),n.d(s,"len",(function(){return Sn})),n.d(s,"sqrLen",(function(){return En})),n.d(s,"forEach",(function(){return Cn}));var l={};n.r(l),n.d(l,"create",(function(){return Mn})),n.d(l,"identity",(function(){return Tn})),n.d(l,"setAxisAngle",(function(){return An})),n.d(l,"getAxisAngle",(function(){return On})),n.d(l,"getAngle",(function(){return kn})),n.d(l,"multiply",(function(){return In})),n.d(l,"rotateX",(function(){return Pn})),n.d(l,"rotateY",(function(){return Ln})),n.d(l,"rotateZ",(function(){return Nn})),n.d(l,"calculateW",(function(){return Rn})),n.d(l,"exp",(function(){return Dn})),n.d(l,"ln",(function(){return Fn})),n.d(l,"pow",(function(){return jn})),n.d(l,"slerp",(function(){return Bn})),n.d(l,"random",(function(){return zn})),n.d(l,"invert",(function(){return Un})),n.d(l,"conjugate",(function(){return Gn})),n.d(l,"fromMat3",(function(){return qn})),n.d(l,"fromEuler",(function(){return Vn})),n.d(l,"str",(function(){return Hn})),n.d(l,"clone",(function(){return Wn})),n.d(l,"fromValues",(function(){return Yn})),n.d(l,"copy",(function(){return Xn})),n.d(l,"set",(function(){return Jn})),n.d(l,"add",(function(){return Zn})),n.d(l,"mul",(function(){return Kn})),n.d(l,"scale",(function(){return Qn})),n.d(l,"dot",(function(){return $n})),n.d(l,"lerp",(function(){return tr})),n.d(l,"length",(function(){return er})),n.d(l,"len",(function(){return nr})),n.d(l,"squaredLength",(function(){return rr})),n.d(l,"sqrLen",(function(){return ir})),n.d(l,"normalize",(function(){return or})),n.d(l,"exactEquals",(function(){return ar})),n.d(l,"equals",(function(){return sr})),n.d(l,"rotationTo",(function(){return lr})),n.d(l,"sqlerp",(function(){return ur})),n.d(l,"setAxes",(function(){return cr}));var u={};n.r(u),n.d(u,"create",(function(){return hr})),n.d(u,"clone",(function(){return dr})),n.d(u,"fromValues",(function(){return fr})),n.d(u,"fromRotationTranslationValues",(function(){return pr})),n.d(u,"fromRotationTranslation",(function(){return gr})),n.d(u,"fromTranslation",(function(){return mr})),n.d(u,"fromRotation",(function(){return yr})),n.d(u,"fromMat4",(function(){return vr})),n.d(u,"copy",(function(){return br})),n.d(u,"identity",(function(){return _r})),n.d(u,"set",(function(){return xr})),n.d(u,"getReal",(function(){return wr})),n.d(u,"getDual",(function(){return Sr})),n.d(u,"setReal",(function(){return Er})),n.d(u,"setDual",(function(){return Cr})),n.d(u,"getTranslation",(function(){return Mr})),n.d(u,"translate",(function(){return Tr})),n.d(u,"rotateX",(function(){return Ar})),n.d(u,"rotateY",(function(){return Or})),n.d(u,"rotateZ",(function(){return kr})),n.d(u,"rotateByQuatAppend",(function(){return Ir})),n.d(u,"rotateByQuatPrepend",(function(){return Pr})),n.d(u,"rotateAroundAxis",(function(){return Lr})),n.d(u,"add",(function(){return Nr})),n.d(u,"multiply",(function(){return Rr})),n.d(u,"mul",(function(){return Dr})),n.d(u,"scale",(function(){return Fr})),n.d(u,"dot",(function(){return jr})),n.d(u,"lerp",(function(){return Br})),n.d(u,"invert",(function(){return zr})),n.d(u,"conjugate",(function(){return Ur})),n.d(u,"length",(function(){return Gr})),n.d(u,"len",(function(){return qr})),n.d(u,"squaredLength",(function(){return Vr})),n.d(u,"sqrLen",(function(){return Hr})),n.d(u,"normalize",(function(){return Wr})),n.d(u,"str",(function(){return Yr})),n.d(u,"exactEquals",(function(){return Xr})),n.d(u,"equals",(function(){return Jr}));var c=n("c94d");function h(){var t=new c["ARRAY_TYPE"](4);return c["ARRAY_TYPE"]!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function d(t){var e=new c["ARRAY_TYPE"](4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function f(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function p(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function g(t,e,n,r){var i=new c["ARRAY_TYPE"](4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function m(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function y(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function v(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*o-i*r;return a?(a=1/a,t[0]=o*a,t[1]=-r*a,t[2]=-i*a,t[3]=n*a,t):null}function b(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t}function _(t){return t[0]*t[3]-t[2]*t[1]}function x(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],l=n[1],u=n[2],c=n[3];return t[0]=r*s+o*l,t[1]=i*s+a*l,t[2]=r*u+o*c,t[3]=i*u+a*c,t}function w(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=r*l+o*s,t[1]=i*l+a*s,t[2]=r*-s+o*l,t[3]=i*-s+a*l,t}function S(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],l=n[1];return t[0]=r*s,t[1]=i*s,t[2]=o*l,t[3]=a*l,t}function E(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t}function C(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function M(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function T(t){return Math.hypot(t[0],t[1],t[2],t[3])}function A(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]}function O(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function k(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function I(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function P(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=e[0],s=e[1],l=e[2],u=e[3];return Math.abs(n-a)<=c["EPSILON"]*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=c["EPSILON"]*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-l)<=c["EPSILON"]*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(o-u)<=c["EPSILON"]*Math.max(1,Math.abs(o),Math.abs(u))}function L(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function N(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}var R=x,D=k;function F(){var t=new c["ARRAY_TYPE"](6);return c["ARRAY_TYPE"]!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function j(t){var e=new c["ARRAY_TYPE"](6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function B(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function z(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function U(t,e,n,r,i,o){var a=new c["ARRAY_TYPE"](6);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a[4]=i,a[5]=o,a}function G(t,e,n,r,i,o,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t}function q(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=n*o-r*i;return l?(l=1/l,t[0]=o*l,t[1]=-r*l,t[2]=-i*l,t[3]=n*l,t[4]=(i*s-o*a)*l,t[5]=(r*a-n*s)*l,t):null}function V(t){return t[0]*t[3]-t[1]*t[2]}function H(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=n[0],c=n[1],h=n[2],d=n[3],f=n[4],p=n[5];return t[0]=r*u+o*c,t[1]=i*u+a*c,t[2]=r*h+o*d,t[3]=i*h+a*d,t[4]=r*f+o*p+s,t[5]=i*f+a*p+l,t}function W(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=Math.sin(n),c=Math.cos(n);return t[0]=r*c+o*u,t[1]=i*c+a*u,t[2]=r*-u+o*c,t[3]=i*-u+a*c,t[4]=s,t[5]=l,t}function Y(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=n[0],c=n[1];return t[0]=r*u,t[1]=i*u,t[2]=o*c,t[3]=a*c,t[4]=s,t[5]=l,t}function X(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=n[0],c=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=r*u+o*c+s,t[5]=i*u+a*c+l,t}function J(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t}function Z(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function K(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function Q(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function $(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function tt(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t}function et(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}function nt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t}function rt(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t}function it(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function ot(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=e[0],u=e[1],h=e[2],d=e[3],f=e[4],p=e[5];return Math.abs(n-l)<=c["EPSILON"]*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-u)<=c["EPSILON"]*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(i-h)<=c["EPSILON"]*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(o-d)<=c["EPSILON"]*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(a-f)<=c["EPSILON"]*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(s-p)<=c["EPSILON"]*Math.max(1,Math.abs(s),Math.abs(p))}var at=H,st=et;function lt(){var t=new c["ARRAY_TYPE"](9);return c["ARRAY_TYPE"]!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function ut(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function ct(t){var e=new c["ARRAY_TYPE"](9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function ht(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function dt(t,e,n,r,i,o,a,s,l){var u=new c["ARRAY_TYPE"](9);return u[0]=t,u[1]=e,u[2]=n,u[3]=r,u[4]=i,u[5]=o,u[6]=a,u[7]=s,u[8]=l,u}function ft(t,e,n,r,i,o,a,s,l,u){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=l,t[8]=u,t}function pt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function gt(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function mt(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=c*a-s*u,d=-c*o+s*l,f=u*o-a*l,p=n*h+r*d+i*f;return p?(p=1/p,t[0]=h*p,t[1]=(-c*r+i*u)*p,t[2]=(s*r-i*a)*p,t[3]=d*p,t[4]=(c*n-i*l)*p,t[5]=(-s*n+i*o)*p,t[6]=f*p,t[7]=(-u*n+r*l)*p,t[8]=(a*n-r*o)*p,t):null}function yt(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8];return t[0]=a*c-s*u,t[1]=i*u-r*c,t[2]=r*s-i*a,t[3]=s*l-o*c,t[4]=n*c-i*l,t[5]=i*o-n*s,t[6]=o*u-a*l,t[7]=r*l-n*u,t[8]=n*a-r*o,t}function vt(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],l=t[7],u=t[8];return e*(u*o-a*l)+n*(-u*i+a*s)+r*(l*i-o*s)}function bt(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=n[0],f=n[1],p=n[2],g=n[3],m=n[4],y=n[5],v=n[6],b=n[7],_=n[8];return t[0]=d*r+f*a+p*u,t[1]=d*i+f*s+p*c,t[2]=d*o+f*l+p*h,t[3]=g*r+m*a+y*u,t[4]=g*i+m*s+y*c,t[5]=g*o+m*l+y*h,t[6]=v*r+b*a+_*u,t[7]=v*i+b*s+_*c,t[8]=v*o+b*l+_*h,t}function _t(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=n[0],f=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=d*r+f*a+u,t[7]=d*i+f*s+c,t[8]=d*o+f*l+h,t}function xt(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=Math.sin(n),f=Math.cos(n);return t[0]=f*r+d*a,t[1]=f*i+d*s,t[2]=f*o+d*l,t[3]=f*a-d*r,t[4]=f*s-d*i,t[5]=f*l-d*o,t[6]=u,t[7]=c,t[8]=h,t}function wt(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function St(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function Et(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Ct(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Mt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function Tt(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,l=i+i,u=n*a,c=r*a,h=r*s,d=i*a,f=i*s,p=i*l,g=o*a,m=o*s,y=o*l;return t[0]=1-h-p,t[3]=c-y,t[6]=d+m,t[1]=c+y,t[4]=1-u-p,t[7]=f-g,t[2]=d-m,t[5]=f+g,t[8]=1-u-h,t}function At(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],d=e[10],f=e[11],p=e[12],g=e[13],m=e[14],y=e[15],v=n*s-r*a,b=n*l-i*a,_=n*u-o*a,x=r*l-i*s,w=r*u-o*s,S=i*u-o*l,E=c*g-h*p,C=c*m-d*p,M=c*y-f*p,T=h*m-d*g,A=h*y-f*g,O=d*y-f*m,k=v*O-b*A+_*T+x*M-w*C+S*E;return k?(k=1/k,t[0]=(s*O-l*A+u*T)*k,t[1]=(l*M-a*O-u*C)*k,t[2]=(a*A-s*M+u*E)*k,t[3]=(i*A-r*O-o*T)*k,t[4]=(n*O-i*M+o*C)*k,t[5]=(r*M-n*A-o*E)*k,t[6]=(g*S-m*w+y*x)*k,t[7]=(m*_-p*S-y*b)*k,t[8]=(p*w-g*_+y*v)*k,t):null}function Ot(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function kt(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function It(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function Pt(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function Lt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function Nt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function Rt(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function Dt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function Ft(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],h=t[8],d=e[0],f=e[1],p=e[2],g=e[3],m=e[4],y=e[5],v=e[6],b=e[7],_=e[8];return Math.abs(n-d)<=c["EPSILON"]*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(r-f)<=c["EPSILON"]*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(i-p)<=c["EPSILON"]*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(o-g)<=c["EPSILON"]*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(a-m)<=c["EPSILON"]*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(s-y)<=c["EPSILON"]*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(l-v)<=c["EPSILON"]*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(u-b)<=c["EPSILON"]*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(h-_)<=c["EPSILON"]*Math.max(1,Math.abs(h),Math.abs(_))}var jt=bt,Bt=Lt;function zt(){var t=new c["ARRAY_TYPE"](16);return c["ARRAY_TYPE"]!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Ut(t){var e=new c["ARRAY_TYPE"](16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Gt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function qt(t,e,n,r,i,o,a,s,l,u,h,d,f,p,g,m){var y=new c["ARRAY_TYPE"](16);return y[0]=t,y[1]=e,y[2]=n,y[3]=r,y[4]=i,y[5]=o,y[6]=a,y[7]=s,y[8]=l,y[9]=u,y[10]=h,y[11]=d,y[12]=f,y[13]=p,y[14]=g,y[15]=m,y}function Vt(t,e,n,r,i,o,a,s,l,u,c,h,d,f,p,g,m){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=l,t[8]=u,t[9]=c,t[10]=h,t[11]=d,t[12]=f,t[13]=p,t[14]=g,t[15]=m,t}function Ht(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Wt(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function Yt(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],d=e[10],f=e[11],p=e[12],g=e[13],m=e[14],y=e[15],v=n*s-r*a,b=n*l-i*a,_=n*u-o*a,x=r*l-i*s,w=r*u-o*s,S=i*u-o*l,E=c*g-h*p,C=c*m-d*p,M=c*y-f*p,T=h*m-d*g,A=h*y-f*g,O=d*y-f*m,k=v*O-b*A+_*T+x*M-w*C+S*E;return k?(k=1/k,t[0]=(s*O-l*A+u*T)*k,t[1]=(i*A-r*O-o*T)*k,t[2]=(g*S-m*w+y*x)*k,t[3]=(d*w-h*S-f*x)*k,t[4]=(l*M-a*O-u*C)*k,t[5]=(n*O-i*M+o*C)*k,t[6]=(m*_-p*S-y*b)*k,t[7]=(c*S-d*_+f*b)*k,t[8]=(a*A-s*M+u*E)*k,t[9]=(r*M-n*A-o*E)*k,t[10]=(p*w-g*_+y*v)*k,t[11]=(h*_-c*w-f*v)*k,t[12]=(s*C-a*T-l*E)*k,t[13]=(n*T-r*C+i*E)*k,t[14]=(g*b-p*x-m*v)*k,t[15]=(c*x-h*b+d*v)*k,t):null}function Xt(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],d=e[10],f=e[11],p=e[12],g=e[13],m=e[14],y=e[15];return t[0]=s*(d*y-f*m)-h*(l*y-u*m)+g*(l*f-u*d),t[1]=-(r*(d*y-f*m)-h*(i*y-o*m)+g*(i*f-o*d)),t[2]=r*(l*y-u*m)-s*(i*y-o*m)+g*(i*u-o*l),t[3]=-(r*(l*f-u*d)-s*(i*f-o*d)+h*(i*u-o*l)),t[4]=-(a*(d*y-f*m)-c*(l*y-u*m)+p*(l*f-u*d)),t[5]=n*(d*y-f*m)-c*(i*y-o*m)+p*(i*f-o*d),t[6]=-(n*(l*y-u*m)-a*(i*y-o*m)+p*(i*u-o*l)),t[7]=n*(l*f-u*d)-a*(i*f-o*d)+c*(i*u-o*l),t[8]=a*(h*y-f*g)-c*(s*y-u*g)+p*(s*f-u*h),t[9]=-(n*(h*y-f*g)-c*(r*y-o*g)+p*(r*f-o*h)),t[10]=n*(s*y-u*g)-a*(r*y-o*g)+p*(r*u-o*s),t[11]=-(n*(s*f-u*h)-a*(r*f-o*h)+c*(r*u-o*s)),t[12]=-(a*(h*m-d*g)-c*(s*m-l*g)+p*(s*d-l*h)),t[13]=n*(h*m-d*g)-c*(r*m-i*g)+p*(r*d-i*h),t[14]=-(n*(s*m-l*g)-a*(r*m-i*g)+p*(r*l-i*s)),t[15]=n*(s*d-l*h)-a*(r*d-i*h)+c*(r*l-i*s),t}function Jt(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],h=t[10],d=t[11],f=t[12],p=t[13],g=t[14],m=t[15],y=e*a-n*o,v=e*s-r*o,b=e*l-i*o,_=n*s-r*a,x=n*l-i*a,w=r*l-i*s,S=u*p-c*f,E=u*g-h*f,C=u*m-d*f,M=c*g-h*p,T=c*m-d*p,A=h*m-d*g;return y*A-v*T+b*M+_*C-x*E+w*S}function Zt(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=e[9],f=e[10],p=e[11],g=e[12],m=e[13],y=e[14],v=e[15],b=n[0],_=n[1],x=n[2],w=n[3];return t[0]=b*r+_*s+x*h+w*g,t[1]=b*i+_*l+x*d+w*m,t[2]=b*o+_*u+x*f+w*y,t[3]=b*a+_*c+x*p+w*v,b=n[4],_=n[5],x=n[6],w=n[7],t[4]=b*r+_*s+x*h+w*g,t[5]=b*i+_*l+x*d+w*m,t[6]=b*o+_*u+x*f+w*y,t[7]=b*a+_*c+x*p+w*v,b=n[8],_=n[9],x=n[10],w=n[11],t[8]=b*r+_*s+x*h+w*g,t[9]=b*i+_*l+x*d+w*m,t[10]=b*o+_*u+x*f+w*y,t[11]=b*a+_*c+x*p+w*v,b=n[12],_=n[13],x=n[14],w=n[15],t[12]=b*r+_*s+x*h+w*g,t[13]=b*i+_*l+x*d+w*m,t[14]=b*o+_*u+x*f+w*y,t[15]=b*a+_*c+x*p+w*v,t}function Kt(t,e,n){var r,i,o,a,s,l,u,c,h,d,f,p,g=n[0],m=n[1],y=n[2];return e===t?(t[12]=e[0]*g+e[4]*m+e[8]*y+e[12],t[13]=e[1]*g+e[5]*m+e[9]*y+e[13],t[14]=e[2]*g+e[6]*m+e[10]*y+e[14],t[15]=e[3]*g+e[7]*m+e[11]*y+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=e[9],f=e[10],p=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=u,t[7]=c,t[8]=h,t[9]=d,t[10]=f,t[11]=p,t[12]=r*g+s*m+h*y+e[12],t[13]=i*g+l*m+d*y+e[13],t[14]=o*g+u*m+f*y+e[14],t[15]=a*g+c*m+p*y+e[15]),t}function Qt(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function $t(t,e,n,r){var i,o,a,s,l,u,h,d,f,p,g,m,y,v,b,_,x,w,S,E,C,M,T,A,O=r[0],k=r[1],I=r[2],P=Math.hypot(O,k,I);return P<c["EPSILON"]?null:(P=1/P,O*=P,k*=P,I*=P,i=Math.sin(n),o=Math.cos(n),a=1-o,s=e[0],l=e[1],u=e[2],h=e[3],d=e[4],f=e[5],p=e[6],g=e[7],m=e[8],y=e[9],v=e[10],b=e[11],_=O*O*a+o,x=k*O*a+I*i,w=I*O*a-k*i,S=O*k*a-I*i,E=k*k*a+o,C=I*k*a+O*i,M=O*I*a+k*i,T=k*I*a-O*i,A=I*I*a+o,t[0]=s*_+d*x+m*w,t[1]=l*_+f*x+y*w,t[2]=u*_+p*x+v*w,t[3]=h*_+g*x+b*w,t[4]=s*S+d*E+m*C,t[5]=l*S+f*E+y*C,t[6]=u*S+p*E+v*C,t[7]=h*S+g*E+b*C,t[8]=s*M+d*T+m*A,t[9]=l*M+f*T+y*A,t[10]=u*M+p*T+v*A,t[11]=h*M+g*T+b*A,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function te(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],h=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+u*r,t[5]=a*i+c*r,t[6]=s*i+h*r,t[7]=l*i+d*r,t[8]=u*i-o*r,t[9]=c*i-a*r,t[10]=h*i-s*r,t[11]=d*i-l*r,t}function ee(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],l=e[3],u=e[8],c=e[9],h=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-u*r,t[1]=a*i-c*r,t[2]=s*i-h*r,t[3]=l*i-d*r,t[8]=o*r+u*i,t[9]=a*r+c*i,t[10]=s*r+h*i,t[11]=l*r+d*i,t}function ne(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],l=e[3],u=e[4],c=e[5],h=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+u*r,t[1]=a*i+c*r,t[2]=s*i+h*r,t[3]=l*i+d*r,t[4]=u*i-o*r,t[5]=c*i-a*r,t[6]=h*i-s*r,t[7]=d*i-l*r,t}function re(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function ie(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function oe(t,e,n){var r,i,o,a=n[0],s=n[1],l=n[2],u=Math.hypot(a,s,l);return u<c["EPSILON"]?null:(u=1/u,a*=u,s*=u,l*=u,r=Math.sin(e),i=Math.cos(e),o=1-i,t[0]=a*a*o+i,t[1]=s*a*o+l*r,t[2]=l*a*o-s*r,t[3]=0,t[4]=a*s*o-l*r,t[5]=s*s*o+i,t[6]=l*s*o+a*r,t[7]=0,t[8]=a*l*o+s*r,t[9]=s*l*o-a*r,t[10]=l*l*o+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function ae(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function se(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function le(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ue(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=r+r,l=i+i,u=o+o,c=r*s,h=r*l,d=r*u,f=i*l,p=i*u,g=o*u,m=a*s,y=a*l,v=a*u;return t[0]=1-(f+g),t[1]=h+v,t[2]=d-y,t[3]=0,t[4]=h-v,t[5]=1-(c+g),t[6]=p+m,t[7]=0,t[8]=d+y,t[9]=p-m,t[10]=1-(c+f),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function ce(t,e){var n=new c["ARRAY_TYPE"](3),r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],l=e[5],u=e[6],h=e[7],d=r*r+i*i+o*o+a*a;return d>0?(n[0]=2*(s*a+h*r+l*o-u*i)/d,n[1]=2*(l*a+h*i+u*r-s*o)/d,n[2]=2*(u*a+h*o+s*i-l*r)/d):(n[0]=2*(s*a+h*r+l*o-u*i),n[1]=2*(l*a+h*i+u*r-s*o),n[2]=2*(u*a+h*o+s*i-l*r)),ue(t,e,n),t}function he(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function de(t,e){var n=e[0],r=e[1],i=e[2],o=e[4],a=e[5],s=e[6],l=e[8],u=e[9],c=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(o,a,s),t[2]=Math.hypot(l,u,c),t}function fe(t,e){var n=new c["ARRAY_TYPE"](3);de(n,e);var r=1/n[0],i=1/n[1],o=1/n[2],a=e[0]*r,s=e[1]*i,l=e[2]*o,u=e[4]*r,h=e[5]*i,d=e[6]*o,f=e[8]*r,p=e[9]*i,g=e[10]*o,m=a+h+g,y=0;return m>0?(y=2*Math.sqrt(m+1),t[3]=.25*y,t[0]=(d-p)/y,t[1]=(f-l)/y,t[2]=(s-u)/y):a>h&&a>g?(y=2*Math.sqrt(1+a-h-g),t[3]=(d-p)/y,t[0]=.25*y,t[1]=(s+u)/y,t[2]=(f+l)/y):h>g?(y=2*Math.sqrt(1+h-a-g),t[3]=(f-l)/y,t[0]=(s+u)/y,t[1]=.25*y,t[2]=(d+p)/y):(y=2*Math.sqrt(1+g-a-h),t[3]=(s-u)/y,t[0]=(f+l)/y,t[1]=(d+p)/y,t[2]=.25*y),t}function pe(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3],l=i+i,u=o+o,c=a+a,h=i*l,d=i*u,f=i*c,p=o*u,g=o*c,m=a*c,y=s*l,v=s*u,b=s*c,_=r[0],x=r[1],w=r[2];return t[0]=(1-(p+m))*_,t[1]=(d+b)*_,t[2]=(f-v)*_,t[3]=0,t[4]=(d-b)*x,t[5]=(1-(h+m))*x,t[6]=(g+y)*x,t[7]=0,t[8]=(f+v)*w,t[9]=(g-y)*w,t[10]=(1-(h+p))*w,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function ge(t,e,n,r,i){var o=e[0],a=e[1],s=e[2],l=e[3],u=o+o,c=a+a,h=s+s,d=o*u,f=o*c,p=o*h,g=a*c,m=a*h,y=s*h,v=l*u,b=l*c,_=l*h,x=r[0],w=r[1],S=r[2],E=i[0],C=i[1],M=i[2],T=(1-(g+y))*x,A=(f+_)*x,O=(p-b)*x,k=(f-_)*w,I=(1-(d+y))*w,P=(m+v)*w,L=(p+b)*S,N=(m-v)*S,R=(1-(d+g))*S;return t[0]=T,t[1]=A,t[2]=O,t[3]=0,t[4]=k,t[5]=I,t[6]=P,t[7]=0,t[8]=L,t[9]=N,t[10]=R,t[11]=0,t[12]=n[0]+E-(T*E+k*C+L*M),t[13]=n[1]+C-(A*E+I*C+N*M),t[14]=n[2]+M-(O*E+P*C+R*M),t[15]=1,t}function me(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,l=i+i,u=n*a,c=r*a,h=r*s,d=i*a,f=i*s,p=i*l,g=o*a,m=o*s,y=o*l;return t[0]=1-h-p,t[1]=c+y,t[2]=d-m,t[3]=0,t[4]=c-y,t[5]=1-u-p,t[6]=f+g,t[7]=0,t[8]=d+m,t[9]=f-g,t[10]=1-u-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ye(t,e,n,r,i,o,a){var s=1/(n-e),l=1/(i-r),u=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*l,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*l,t[10]=(a+o)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*u,t[15]=0,t}function ve(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}var be=ve;function _e(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=i*o,t[14]=i*r*o):(t[10]=-1,t[14]=-r),t}function xe(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),l=2/(a+s),u=2/(i+o);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-(a-s)*l*.5,t[9]=(i-o)*u*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function we(t,e,n,r,i,o,a){var s=1/(e-n),l=1/(r-i),u=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*l,t[14]=(a+o)*u,t[15]=1,t}var Se=we;function Ee(t,e,n,r,i,o,a){var s=1/(e-n),l=1/(r-i),u=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=u,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*l,t[14]=o*u,t[15]=1,t}function Ce(t,e,n,r){var i,o,a,s,l,u,h,d,f,p,g=e[0],m=e[1],y=e[2],v=r[0],b=r[1],_=r[2],x=n[0],w=n[1],S=n[2];return Math.abs(g-x)<c["EPSILON"]&&Math.abs(m-w)<c["EPSILON"]&&Math.abs(y-S)<c["EPSILON"]?Ht(t):(h=g-x,d=m-w,f=y-S,p=1/Math.hypot(h,d,f),h*=p,d*=p,f*=p,i=b*f-_*d,o=_*h-v*f,a=v*d-b*h,p=Math.hypot(i,o,a),p?(p=1/p,i*=p,o*=p,a*=p):(i=0,o=0,a=0),s=d*a-f*o,l=f*i-h*a,u=h*o-d*i,p=Math.hypot(s,l,u),p?(p=1/p,s*=p,l*=p,u*=p):(s=0,l=0,u=0),t[0]=i,t[1]=s,t[2]=h,t[3]=0,t[4]=o,t[5]=l,t[6]=d,t[7]=0,t[8]=a,t[9]=u,t[10]=f,t[11]=0,t[12]=-(i*g+o*m+a*y),t[13]=-(s*g+l*m+u*y),t[14]=-(h*g+d*m+f*y),t[15]=1,t)}function Me(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=r[0],l=r[1],u=r[2],c=i-n[0],h=o-n[1],d=a-n[2],f=c*c+h*h+d*d;f>0&&(f=1/Math.sqrt(f),c*=f,h*=f,d*=f);var p=l*d-u*h,g=u*c-s*d,m=s*h-l*c;return f=p*p+g*g+m*m,f>0&&(f=1/Math.sqrt(f),p*=f,g*=f,m*=f),t[0]=p,t[1]=g,t[2]=m,t[3]=0,t[4]=h*m-d*g,t[5]=d*p-c*m,t[6]=c*g-h*p,t[7]=0,t[8]=c,t[9]=h,t[10]=d,t[11]=0,t[12]=i,t[13]=o,t[14]=a,t[15]=1,t}function Te(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Ae(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function Oe(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function ke(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function Ie(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function Pe(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function Le(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Ne(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],h=t[8],d=t[9],f=t[10],p=t[11],g=t[12],m=t[13],y=t[14],v=t[15],b=e[0],_=e[1],x=e[2],w=e[3],S=e[4],E=e[5],C=e[6],M=e[7],T=e[8],A=e[9],O=e[10],k=e[11],I=e[12],P=e[13],L=e[14],N=e[15];return Math.abs(n-b)<=c["EPSILON"]*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(r-_)<=c["EPSILON"]*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(i-x)<=c["EPSILON"]*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(o-w)<=c["EPSILON"]*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(a-S)<=c["EPSILON"]*Math.max(1,Math.abs(a),Math.abs(S))&&Math.abs(s-E)<=c["EPSILON"]*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(l-C)<=c["EPSILON"]*Math.max(1,Math.abs(l),Math.abs(C))&&Math.abs(u-M)<=c["EPSILON"]*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(h-T)<=c["EPSILON"]*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(d-A)<=c["EPSILON"]*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(f-O)<=c["EPSILON"]*Math.max(1,Math.abs(f),Math.abs(O))&&Math.abs(p-k)<=c["EPSILON"]*Math.max(1,Math.abs(p),Math.abs(k))&&Math.abs(g-I)<=c["EPSILON"]*Math.max(1,Math.abs(g),Math.abs(I))&&Math.abs(m-P)<=c["EPSILON"]*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(y-L)<=c["EPSILON"]*Math.max(1,Math.abs(y),Math.abs(L))&&Math.abs(v-N)<=c["EPSILON"]*Math.max(1,Math.abs(v),Math.abs(N))}var Re=Zt,De=ke,Fe=n("9fe7");function je(){var t=new c["ARRAY_TYPE"](4);return c["ARRAY_TYPE"]!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Be(t){var e=new c["ARRAY_TYPE"](4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function ze(t,e,n,r){var i=new c["ARRAY_TYPE"](4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function Ue(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Ge(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function qe(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function Ve(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function He(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function We(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function Ye(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function Xe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function Je(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function Ze(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function Ke(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function Qe(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function $e(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function tn(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.hypot(n,r,i,o)}function en(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+i*i+o*o}function nn(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.hypot(e,n,r,i)}function rn(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function on(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function an(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function sn(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a,t}function ln(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function un(t,e,n,r){var i=n[0]*r[1]-n[1]*r[0],o=n[0]*r[2]-n[2]*r[0],a=n[0]*r[3]-n[3]*r[0],s=n[1]*r[2]-n[2]*r[1],l=n[1]*r[3]-n[3]*r[1],u=n[2]*r[3]-n[3]*r[2],c=e[0],h=e[1],d=e[2],f=e[3];return t[0]=h*u-d*l+f*s,t[1]=-c*u+d*a-f*o,t[2]=c*l-h*a+f*i,t[3]=-c*s+h*o-d*i,t}function cn(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t[3]=s+r*(n[3]-s),t}function hn(t,e){var n,r,i,o,a,s;e=e||1;do{n=2*c["RANDOM"]()-1,r=2*c["RANDOM"]()-1,a=n*n+r*r}while(a>=1);do{i=2*c["RANDOM"]()-1,o=2*c["RANDOM"]()-1,s=i*i+o*o}while(s>=1);var l=Math.sqrt((1-a)/s);return t[0]=e*n,t[1]=e*r,t[2]=e*i*l,t[3]=e*o*l,t}function dn(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}function fn(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],l=n[2],u=n[3],c=u*r+s*o-l*i,h=u*i+l*r-a*o,d=u*o+a*i-s*r,f=-a*r-s*i-l*o;return t[0]=c*u+f*-a+h*-l-d*-s,t[1]=h*u+f*-s+d*-a-c*-l,t[2]=d*u+f*-l+c*-s-h*-a,t[3]=e[3],t}function pn(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function gn(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function mn(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function yn(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=e[0],s=e[1],l=e[2],u=e[3];return Math.abs(n-a)<=c["EPSILON"]*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=c["EPSILON"]*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-l)<=c["EPSILON"]*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(o-u)<=c["EPSILON"]*Math.max(1,Math.abs(o),Math.abs(u))}var vn=Ve,bn=He,_n=We,xn=tn,wn=en,Sn=nn,En=rn,Cn=function(){var t=je();return function(e,n,r,i,o,a){var s,l;for(n||(n=4),r||(r=0),l=i?Math.min(i*n+r,e.length):e.length,s=r;s<l;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}();function Mn(){var t=new c["ARRAY_TYPE"](4);return c["ARRAY_TYPE"]!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Tn(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function An(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function On(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return r>c["EPSILON"]?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function kn(t,e){var n=$n(t,e);return Math.acos(2*n*n-1)}function In(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],l=n[1],u=n[2],c=n[3];return t[0]=r*c+a*s+i*u-o*l,t[1]=i*c+a*l+o*s-r*u,t[2]=o*c+a*u+r*l-i*s,t[3]=a*c-r*s-i*l-o*u,t}function Pn(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=r*l+a*s,t[1]=i*l+o*s,t[2]=o*l-i*s,t[3]=a*l-r*s,t}function Ln(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=r*l-o*s,t[1]=i*l+a*s,t[2]=o*l+r*s,t[3]=a*l-i*s,t}function Nn(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=r*l+i*s,t[1]=i*l-r*s,t[2]=o*l+a*s,t[3]=a*l-o*s,t}function Rn(t,e){var n=e[0],r=e[1],i=e[2];return t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),t}function Dn(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=Math.sqrt(n*n+r*r+i*i),s=Math.exp(o),l=a>0?s*Math.sin(a)/a:0;return t[0]=n*l,t[1]=r*l,t[2]=i*l,t[3]=s*Math.cos(a),t}function Fn(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=Math.sqrt(n*n+r*r+i*i),s=a>0?Math.atan2(a,o)/a:0;return t[0]=n*s,t[1]=r*s,t[2]=i*s,t[3]=.5*Math.log(n*n+r*r+i*i+o*o),t}function jn(t,e,n){return Fn(t,e),Qn(t,t,n),Dn(t,t),t}function Bn(t,e,n,r){var i,o,a,s,l,u=e[0],h=e[1],d=e[2],f=e[3],p=n[0],g=n[1],m=n[2],y=n[3];return o=u*p+h*g+d*m+f*y,o<0&&(o=-o,p=-p,g=-g,m=-m,y=-y),1-o>c["EPSILON"]?(i=Math.acos(o),a=Math.sin(i),s=Math.sin((1-r)*i)/a,l=Math.sin(r*i)/a):(s=1-r,l=r),t[0]=s*u+l*p,t[1]=s*h+l*g,t[2]=s*d+l*m,t[3]=s*f+l*y,t}function zn(t){var e=c["RANDOM"](),n=c["RANDOM"](),r=c["RANDOM"](),i=Math.sqrt(1-e),o=Math.sqrt(e);return t[0]=i*Math.sin(2*Math.PI*n),t[1]=i*Math.cos(2*Math.PI*n),t[2]=o*Math.sin(2*Math.PI*r),t[3]=o*Math.cos(2*Math.PI*r),t}function Un(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o,s=a?1/a:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-i*s,t[3]=o*s,t}function Gn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function qn(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;n=Math.sqrt(e[3*i+i]-e[3*o+o]-e[3*a+a]+1),t[i]=.5*n,n=.5/n,t[3]=(e[3*o+a]-e[3*a+o])*n,t[o]=(e[3*o+i]+e[3*i+o])*n,t[a]=(e[3*a+i]+e[3*i+a])*n}return t}function Vn(t,e,n,r){var i=.5*Math.PI/180;e*=i,n*=i,r*=i;var o=Math.sin(e),a=Math.cos(e),s=Math.sin(n),l=Math.cos(n),u=Math.sin(r),c=Math.cos(r);return t[0]=o*l*c-a*s*u,t[1]=a*s*c+o*l*u,t[2]=a*l*u-o*s*c,t[3]=a*l*c+o*s*u,t}function Hn(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var Wn=Be,Yn=ze,Xn=Ue,Jn=Ge,Zn=qe,Kn=In,Qn=Qe,$n=ln,tr=cn,er=nn,nr=er,rr=rn,ir=rr,or=sn,ar=mn,sr=yn,lr=function(){var t=Fe["create"](),e=Fe["fromValues"](1,0,0),n=Fe["fromValues"](0,1,0);return function(r,i,o){var a=Fe["dot"](i,o);return a<-.999999?(Fe["cross"](t,e,i),Fe["len"](t)<1e-6&&Fe["cross"](t,n,i),Fe["normalize"](t,t),An(r,t,Math.PI),r):a>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(Fe["cross"](t,i,o),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+a,or(r,r))}}(),ur=function(){var t=Mn(),e=Mn();return function(n,r,i,o,a,s){return Bn(t,r,a,s),Bn(e,i,o,s),Bn(n,t,e,2*s*(1-s)),n}}(),cr=function(){var t=lt();return function(e,n,r,i){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],or(e,qn(e,t))}}();function hr(){var t=new c["ARRAY_TYPE"](8);return c["ARRAY_TYPE"]!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function dr(t){var e=new c["ARRAY_TYPE"](8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function fr(t,e,n,r,i,o,a,s){var l=new c["ARRAY_TYPE"](8);return l[0]=t,l[1]=e,l[2]=n,l[3]=r,l[4]=i,l[5]=o,l[6]=a,l[7]=s,l}function pr(t,e,n,r,i,o,a){var s=new c["ARRAY_TYPE"](8);s[0]=t,s[1]=e,s[2]=n,s[3]=r;var l=.5*i,u=.5*o,h=.5*a;return s[4]=l*r+u*n-h*e,s[5]=u*r+h*t-l*n,s[6]=h*r+l*e-u*t,s[7]=-l*t-u*e-h*n,s}function gr(t,e,n){var r=.5*n[0],i=.5*n[1],o=.5*n[2],a=e[0],s=e[1],l=e[2],u=e[3];return t[0]=a,t[1]=s,t[2]=l,t[3]=u,t[4]=r*u+i*l-o*s,t[5]=i*u+o*a-r*l,t[6]=o*u+r*s-i*a,t[7]=-r*a-i*s-o*l,t}function mr(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function yr(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function vr(t,e){var n=Mn();fe(n,e);var r=new c["ARRAY_TYPE"](3);return he(r,e),gr(t,n,r),t}function br(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function _r(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function xr(t,e,n,r,i,o,a,s,l){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=l,t}var wr=Xn;function Sr(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var Er=Xn;function Cr(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function Mr(t,e){var n=e[4],r=e[5],i=e[6],o=e[7],a=-e[0],s=-e[1],l=-e[2],u=e[3];return t[0]=2*(n*u+o*a+r*l-i*s),t[1]=2*(r*u+o*s+i*a-n*l),t[2]=2*(i*u+o*l+n*s-r*a),t}function Tr(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=.5*n[0],l=.5*n[1],u=.5*n[2],c=e[4],h=e[5],d=e[6],f=e[7];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=a*s+i*u-o*l+c,t[5]=a*l+o*s-r*u+h,t[6]=a*u+r*l-i*s+d,t[7]=-r*s-i*l-o*u+f,t}function Ar(t,e,n){var r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=s*a+c*r+l*o-u*i,d=l*a+c*i+u*r-s*o,f=u*a+c*o+s*i-l*r,p=c*a-s*r-l*i-u*o;return Pn(t,e,n),r=t[0],i=t[1],o=t[2],a=t[3],t[4]=h*a+p*r+d*o-f*i,t[5]=d*a+p*i+f*r-h*o,t[6]=f*a+p*o+h*i-d*r,t[7]=p*a-h*r-d*i-f*o,t}function Or(t,e,n){var r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=s*a+c*r+l*o-u*i,d=l*a+c*i+u*r-s*o,f=u*a+c*o+s*i-l*r,p=c*a-s*r-l*i-u*o;return Ln(t,e,n),r=t[0],i=t[1],o=t[2],a=t[3],t[4]=h*a+p*r+d*o-f*i,t[5]=d*a+p*i+f*r-h*o,t[6]=f*a+p*o+h*i-d*r,t[7]=p*a-h*r-d*i-f*o,t}function kr(t,e,n){var r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=s*a+c*r+l*o-u*i,d=l*a+c*i+u*r-s*o,f=u*a+c*o+s*i-l*r,p=c*a-s*r-l*i-u*o;return Nn(t,e,n),r=t[0],i=t[1],o=t[2],a=t[3],t[4]=h*a+p*r+d*o-f*i,t[5]=d*a+p*i+f*r-h*o,t[6]=f*a+p*o+h*i-d*r,t[7]=p*a-h*r-d*i-f*o,t}function Ir(t,e,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],l=e[1],u=e[2],c=e[3];return t[0]=s*a+c*r+l*o-u*i,t[1]=l*a+c*i+u*r-s*o,t[2]=u*a+c*o+s*i-l*r,t[3]=c*a-s*r-l*i-u*o,s=e[4],l=e[5],u=e[6],c=e[7],t[4]=s*a+c*r+l*o-u*i,t[5]=l*a+c*i+u*r-s*o,t[6]=u*a+c*o+s*i-l*r,t[7]=c*a-s*r-l*i-u*o,t}function Pr(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],l=n[1],u=n[2],c=n[3];return t[0]=r*c+a*s+i*u-o*l,t[1]=i*c+a*l+o*s-r*u,t[2]=o*c+a*u+r*l-i*s,t[3]=a*c-r*s-i*l-o*u,s=n[4],l=n[5],u=n[6],c=n[7],t[4]=r*c+a*s+i*u-o*l,t[5]=i*c+a*l+o*s-r*u,t[6]=o*c+a*u+r*l-i*s,t[7]=a*c-r*s-i*l-o*u,t}function Lr(t,e,n,r){if(Math.abs(r)<c["EPSILON"])return br(t,e);var i=Math.hypot(n[0],n[1],n[2]);r*=.5;var o=Math.sin(r),a=o*n[0]/i,s=o*n[1]/i,l=o*n[2]/i,u=Math.cos(r),h=e[0],d=e[1],f=e[2],p=e[3];t[0]=h*u+p*a+d*l-f*s,t[1]=d*u+p*s+f*a-h*l,t[2]=f*u+p*l+h*s-d*a,t[3]=p*u-h*a-d*s-f*l;var g=e[4],m=e[5],y=e[6],v=e[7];return t[4]=g*u+v*a+m*l-y*s,t[5]=m*u+v*s+y*a-g*l,t[6]=y*u+v*l+g*s-m*a,t[7]=v*u-g*a-m*s-y*l,t}function Nr(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t}function Rr(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[4],l=n[5],u=n[6],c=n[7],h=e[4],d=e[5],f=e[6],p=e[7],g=n[0],m=n[1],y=n[2],v=n[3];return t[0]=r*v+a*g+i*y-o*m,t[1]=i*v+a*m+o*g-r*y,t[2]=o*v+a*y+r*m-i*g,t[3]=a*v-r*g-i*m-o*y,t[4]=r*c+a*s+i*u-o*l+h*v+p*g+d*y-f*m,t[5]=i*c+a*l+o*s-r*u+d*v+p*m+f*g-h*y,t[6]=o*c+a*u+r*l-i*s+f*v+p*y+h*m-d*g,t[7]=a*c-r*s-i*l-o*u+p*v-h*g-d*m-f*y,t}var Dr=Rr;function Fr(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t}var jr=$n;function Br(t,e,n,r){var i=1-r;return jr(e,n)<0&&(r=-r),t[0]=e[0]*i+n[0]*r,t[1]=e[1]*i+n[1]*r,t[2]=e[2]*i+n[2]*r,t[3]=e[3]*i+n[3]*r,t[4]=e[4]*i+n[4]*r,t[5]=e[5]*i+n[5]*r,t[6]=e[6]*i+n[6]*r,t[7]=e[7]*i+n[7]*r,t}function zr(t,e){var n=Vr(e);return t[0]=-e[0]/n,t[1]=-e[1]/n,t[2]=-e[2]/n,t[3]=e[3]/n,t[4]=-e[4]/n,t[5]=-e[5]/n,t[6]=-e[6]/n,t[7]=e[7]/n,t}function Ur(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var Gr=er,qr=Gr,Vr=rr,Hr=Vr;function Wr(t,e){var n=Vr(e);if(n>0){n=Math.sqrt(n);var r=e[0]/n,i=e[1]/n,o=e[2]/n,a=e[3]/n,s=e[4],l=e[5],u=e[6],c=e[7],h=r*s+i*l+o*u+a*c;t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=(s-r*h)/n,t[5]=(l-i*h)/n,t[6]=(u-o*h)/n,t[7]=(c-a*h)/n}return t}function Yr(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function Xr(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function Jr(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],h=e[0],d=e[1],f=e[2],p=e[3],g=e[4],m=e[5],y=e[6],v=e[7];return Math.abs(n-h)<=c["EPSILON"]*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(r-d)<=c["EPSILON"]*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(i-f)<=c["EPSILON"]*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(o-p)<=c["EPSILON"]*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-g)<=c["EPSILON"]*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(s-m)<=c["EPSILON"]*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(l-y)<=c["EPSILON"]*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(u-v)<=c["EPSILON"]*Math.max(1,Math.abs(u),Math.abs(v))}var Zr=n("6711")},2236:function(t,e,n){var r=n("5a43");function i(t){if(Array.isArray(t))return r(t)}t.exports=i,t.exports.__esModule=!0,t.exports["default"]=t.exports},"22e2":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["master_timeout","timeout","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["id"]){const t=new n("Missing required parameter: id");return r(t,l)}if(null==t["body"]){const t=new n("Missing required parameter: body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,id:d,...f}=t;f=i(o,a,f,u),null==c&&(c="PUT");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g="/_ingest/pipeline/"+encodeURIComponent(d);const m={method:c,path:g,body:h||"",querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},"22f9":function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i}));var r={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},i={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"}},"23c1":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["completion_fields","fielddata_fields","fields","groups","level","types","timeout","include_segment_file_sizes","pretty","human","error_trace","source","filter_path"],a={completionFields:"completion_fields",fielddataFields:"fielddata_fields",includeSegmentFileSizes:"include_segment_file_sizes",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,metric:d,indexMetric:f,index_metric:p,nodeId:g,node_id:m,...y}=t;y=i(o,a,y,u),null==c&&(c="GET");var v=s.ignore;"number"===typeof v&&(s.ignore=[v]);var b="";b=null!=(m||g)&&null!=d&&null!=(p||f)?"/_nodes/"+encodeURIComponent(m||g)+"/stats/"+encodeURIComponent(d)+"/"+encodeURIComponent(p||f):null!=(m||g)&&null!=d?"/_nodes/"+encodeURIComponent(m||g)+"/stats/"+encodeURIComponent(d):null!=d&&null!=(p||f)?"/_nodes/stats/"+encodeURIComponent(d)+"/"+encodeURIComponent(p||f):null!=(m||g)?"/_nodes/"+encodeURIComponent(m||g)+"/stats":null!=d?"/_nodes/stats/"+encodeURIComponent(d):"/_nodes/stats";const _={method:c,path:b,body:null,querystring:y};return s.warnings=0===u.length?null:u,e(_,s,l)}}t.exports=r},"23e1":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["routing","preference","ignore_unavailable","allow_no_indices","expand_wildcards","percolate_index","percolate_type","percolate_routing","percolate_preference","percolate_format","version","version_type","pretty","human","error_trace","source","filter_path"],a={ignoreUnavailable:"ignore_unavailable",allowNoIndices:"allow_no_indices",expandWildcards:"expand_wildcards",percolateIndex:"percolate_index",percolateType:"percolate_type",percolateRouting:"percolate_routing",percolatePreference:"percolate_preference",percolateFormat:"percolate_format",versionType:"version_type",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["index"]){const t=new n("Missing required parameter: index");return r(t,l)}if(null==t["type"]){const t=new n("Missing required parameter: type");return r(t,l)}if(null!=t["id"]&&(null==t["type"]||null==t["index"])){const t=new n("Missing required parameter of the url: type, index");return r(t,l)}if(null!=t["type"]&&null==t["index"]){const t=new n("Missing required parameter of the url: index");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,type:f,id:p,...g}=t;g=i(o,a,g,u),null==c&&(c=null==h?"GET":"POST");var m=s.ignore;"number"===typeof m&&(s.ignore=[m]);var y="";y=null!=d&&null!=f&&null!=p?"/"+encodeURIComponent(d)+"/"+encodeURIComponent(f)+"/"+encodeURIComponent(p)+"/_percolate":"/"+encodeURIComponent(d)+"/"+encodeURIComponent(f)+"/_percolate";const v={method:c,path:y,body:h||"",querystring:g};return s.warnings=0===u.length?null:u,e(v,s,l)}}t.exports=r},2483:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["routing","preference","ignore_unavailable","allow_no_indices","expand_wildcards","percolate_index","percolate_type","version","version_type","pretty","human","error_trace","source","filter_path"],a={ignoreUnavailable:"ignore_unavailable",allowNoIndices:"allow_no_indices",expandWildcards:"expand_wildcards",percolateIndex:"percolate_index",percolateType:"percolate_type",versionType:"version_type",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["index"]){const t=new n("Missing required parameter: index");return r(t,l)}if(null==t["type"]){const t=new n("Missing required parameter: type");return r(t,l)}if(null!=t["id"]&&(null==t["type"]||null==t["index"])){const t=new n("Missing required parameter of the url: type, index");return r(t,l)}if(null!=t["type"]&&null==t["index"]){const t=new n("Missing required parameter of the url: index");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,type:f,id:p,...g}=t;g=i(o,a,g,u),null==c&&(c=null==h?"GET":"POST");var m=s.ignore;"number"===typeof m&&(s.ignore=[m]);var y="";y=null!=d&&null!=f&&null!=p?"/"+encodeURIComponent(d)+"/"+encodeURIComponent(f)+"/"+encodeURIComponent(p)+"/_percolate/count":"/"+encodeURIComponent(d)+"/"+encodeURIComponent(f)+"/_percolate/count";const v={method:c,path:y,body:h||"",querystring:g};return s.warnings=0===u.length?null:u,e(v,s,l)}}t.exports=r},"24f8":function(t,e,n){var r=n("9490"),i=n("0b16"),o=t.exports;for(var a in r)r.hasOwnProperty(a)&&(o[a]=r[a]);function s(t){if("string"===typeof t&&(t=i.parse(t)),t.protocol||(t.protocol="https:"),"https:"!==t.protocol)throw new Error('Protocol "'+t.protocol+'" not supported. Expected "https:"');return t}o.request=function(t,e){return t=s(t),r.request.call(this,t,e)},o.get=function(t,e){return t=s(t),r.get.call(this,t,e)}},2514:function(t,e,n){"use strict";var r=n("b8fa"),i=Array.prototype.concat,o=Array.prototype.slice,a=t.exports=function(t){for(var e=[],n=0,a=t.length;n<a;n++){var s=t[n];r(s)?e=i.call(e,o.call(s)):e.push(s)}return e};a.wrap=function(t){return function(){return t(a(arguments))}}},"264e":function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"GADDI",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(e,"breadthFirstSearch",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"connectedComponent",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"depthFirstSearch",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"detectCycle",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"dijkstra",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"findAllPath",{enumerable:!0,get:function(){return h.findAllPath}}),Object.defineProperty(e,"findShortestPath",{enumerable:!0,get:function(){return h.findShortestPath}}),Object.defineProperty(e,"floydWarshall",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"getAdjMatrix",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"getDegree",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"getInDegree",{enumerable:!0,get:function(){return s.getInDegree}}),Object.defineProperty(e,"getNeighbors",{enumerable:!0,get:function(){return v.getNeighbors}}),Object.defineProperty(e,"getOutDegree",{enumerable:!0,get:function(){return s.getOutDegree}}),Object.defineProperty(e,"labelPropagation",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"louvain",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(e,"minimumSpanningTree",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(e,"pageRank",{enumerable:!0,get:function(){return m.default}});var i=x(n("16c7")),o=x(n("3872")),a=x(n("862e")),s=_(n("d9c5")),l=x(n("5140")),u=x(n("fe51")),c=x(n("9b96")),h=n("98e2"),d=x(n("0253")),f=x(n("61bc")),p=x(n("b14b")),g=x(n("3ef9")),m=x(n("0765")),y=x(n("649f")),v=n("dcfe");function b(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(b=function(t){return t?n:e})(t)}function _(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!==typeof t)return{default:t};var n=b(e);if(n&&n.has(t))return n.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=t[a]}return i.default=t,n&&n.set(t,i),i}function x(t){return t&&t.__esModule?t:{default:t}}},"27bf":function(t,e,n){"use strict";t.exports=s;var r=n("b19a"),i=n("3a7c");function o(t){this.afterTransform=function(e,n){return a(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function a(t,e,n){var r=t._transformState;r.transforming=!1;var i=r.writecb;if(!i)return t.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&t.push(n),i(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function s(t){if(!(this instanceof s))return new s(t);r.call(this,t),this._transformState=new o(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"===typeof t.transform&&(this._transform=t.transform),"function"===typeof t.flush&&(this._flush=t.flush)),this.once("prefinish",(function(){"function"===typeof this._flush?this._flush((function(t){l(e,t)})):l(e)}))}function l(t,e){if(e)return t.emit("error",e);var n=t._writableState,r=t._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(r.transforming)throw new Error("calling transform done when still transforming");return t.push(null)}i.inherits=n("3fb5"),i.inherits(s,r),s.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},s.prototype._transform=function(t,e,n){throw new Error("not implemented")},s.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},s.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},"27f4":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getPropertyWeight=e.getAllSortProperties=e.getAllProperties=e.default=void 0;var r=n("869c"),i=function(t,e){void 0===t&&(t=[]),void 0===e&&(e=100);var n={};t.forEach((function(t){t.properties&&Object.keys(t.properties).forEach((function(e){"id"===e||!"".concat(t.properties[e]).match(r.secondReg)&&!"".concat(t.properties[e]).match(r.dateReg)&&isNaN(Number(t.properties[e]))?n.hasOwnProperty(e)&&delete n[e]:n.hasOwnProperty(e)?n[e]+=1:n[e]=1}))}));var i=Object.keys(n).sort((function(t,e){return n[e]-n[t]}));return i.length<e?i:i.slice(0,e)};e.getAllSortProperties=i;var o=function(t,e){return e.map((function(e){return t.hasOwnProperty(e)?t[e]:0}))},a=function(t){for(var e=i(t),n=[],r=0;r<t.length;r++)n[r]=o(t[r].properties,e);return n};e.getPropertyWeight=a;var s=function(t,e){void 0===e&&(e=void 0);var n=[];return t.forEach((function(t){void 0===e&&n.push(t),void 0!==t[e]&&n.push(t[e])})),n};e.getAllProperties=s;var l={getAllSortProperties:i,getPropertyWeight:a,getAllProperties:s};e.default=l},"28a0":function(t,e){"function"===typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},"28bb":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("f893e"),i=function(t){for(var e={},n=t.nodes().filter((function(e){var n;return!(null===(n=t.children(e))||void 0===n?void 0:n.length)})),i=n.map((function(e){return t.node(e).rank})),o=(0,r.max)(i),a=[],s=0;s<o+1;s++)a.push([]);var l=function(n){var r;if(!e.hasOwnProperty(n)){e[n]=!0;var i=t.node(n);isNaN(i.rank)||a[i.rank].push(n),null===(r=t.successors(n))||void 0===r||r.forEach((function(t){return l(t)}))}},u=n.sort((function(e,n){return t.node(e).rank-t.node(n).rank})),c=u.filter((function(e){return void 0!==t.node(e).fixorder})),h=c.sort((function(e,n){return t.node(e).fixorder-t.node(n).fixorder}));return null===h||void 0===h||h.forEach((function(n){isNaN(t.node(n).rank)||a[t.node(n).rank].push(n),e[n]=!0})),null===u||void 0===u||u.forEach(l),a};e.default=i},"291d":function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.clone=e.isObject=void 0;var i=function(t){return null!==t&&"object"===typeof t};e.isObject=i;var o=function(t){if(null===t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof Array){var n=[];return t.forEach((function(t){n.push(t)})),n.map((function(t){return(0,e.clone)(t)}))}if("object"===typeof t&&Object.keys(t).length){var i=r({},t);return Object.keys(i).forEach((function(t){i[t]=(0,e.clone)(i[t])})),i}return t};e.clone=o},"29f3":function(t,e){var n=Object.prototype,r=n.toString;function i(t){return r.call(t)}t.exports=i},"2a24":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["wait_for_active_shards","timeout","master_timeout","update_all_types","pretty","human","error_trace","source","filter_path"],a={waitForActiveShards:"wait_for_active_shards",masterTimeout:"master_timeout",updateAllTypes:"update_all_types",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["index"]){const t=new n("Missing required parameter: index");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,...f}=t;f=i(o,a,f,u),null==c&&(c="PUT");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g="/"+encodeURIComponent(d);const m={method:c,path:g,body:h||"",querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},"2a9e":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["timeout","master_timeout","wait_for_active_shards","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",waitForActiveShards:"wait_for_active_shards",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["index"]){const t=new n("Missing required parameter: index");return r(t,l)}if(null==t["target"]){const t=new n("Missing required parameter: target");return r(t,l)}if(null!=t["target"]&&null==t["index"]){const t=new n("Missing required parameter of the url: index");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,target:f,...p}=t;p=i(o,a,p,u),null==c&&(c="PUT");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m="/"+encodeURIComponent(d)+"/_shrink/"+encodeURIComponent(f);const y={method:c,path:m,body:h||"",querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},"2b3e":function(t,e,n){var r=n("585a"),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},"2ceb":function(t,e,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},"2d6c":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["parent","preference","realtime","refresh","routing","_source","_source_exclude","_source_include","version","version_type","pretty","human","error_trace","source","filter_path"],a={_sourceExclude:"_source_exclude",_sourceInclude:"_source_include",versionType:"version_type",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["id"]){const t=new n("Missing required parameter: id");return r(t,l)}if(null==t["index"]){const t=new n("Missing required parameter: index");return r(t,l)}if(null==t["type"]){const t=new n("Missing required parameter: type");return r(t,l)}if(null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,id:d,index:f,type:p,...g}=t;g=i(o,a,g,u),null==c&&(c="GET");var m=s.ignore;"number"===typeof m&&(s.ignore=[m]);var y="";y="/"+encodeURIComponent(f)+"/"+encodeURIComponent(p)+"/"+encodeURIComponent(d)+"/_source";const v={method:c,path:y,body:null,querystring:g};return s.warnings=0===u.length?null:u,e(v,s,l)}}t.exports=r},"2dcb":function(t,e,n){var r=n("91e9"),i=r(Object.getPrototypeOf,Object);t.exports=i},"2dcf":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["master_timeout","ignore_unavailable","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",ignoreUnavailable:"ignore_unavailable",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=t["snapshot"]&&null==t["repository"]){const t=new n("Missing required parameter of the url: repository");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,repository:d,snapshot:f,...p}=t;p=i(o,a,p,u),null==c&&(c="GET");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m=null!=d&&null!=f?"/_snapshot/"+encodeURIComponent(d)+"/"+encodeURIComponent(f)+"/_status":null!=d?"/_snapshot/"+encodeURIComponent(d)+"/_status":"/_snapshot/_status";const y={method:c,path:m,body:null,querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},"2e4c":function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.getLayoutByName=e.unRegisterLayout=e.registerLayout=void 0;var o=n("7049");Object.defineProperty(e,"registerLayout",{enumerable:!0,get:function(){return o.registerLayout}}),Object.defineProperty(e,"unRegisterLayout",{enumerable:!0,get:function(){return o.unRegisterLayout}}),Object.defineProperty(e,"getLayoutByName",{enumerable:!0,get:function(){return o.getLayoutByName}}),i(n("ccec"),e)},"2e60":function(t,e,n){"use strict";var r=n("9ab4"),i=n("7fa2"),o=n("b2cb"),a=function(t){function e(e){var n=t.call(this)||this;n.destroyed=!1;var r=n.getDefaultCfg();return n.cfg=Object(o["i"])(r,e),n}return Object(r["__extends"])(e,t),e.prototype.getDefaultCfg=function(){return{}},e.prototype.get=function(t){return this.cfg[t]},e.prototype.set=function(t,e){this.cfg[t]=e},e.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},e}(i["a"]);e["a"]=a},"2ef1":function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return g})),n.d(e,"c",(function(){return v})),n.d(e,"d",(function(){return C}));var r=n("8937"),i=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,o=/[^\s\,]+/gi;function a(t){var e=t||[];return Object(r["isArray"])(e)?e:Object(r["isString"])(e)?(e=e.match(i),Object(r["each"])(e,(function(t,n){if(t=t.match(o),t[0].length>1){var i=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=i}Object(r["each"])(t,(function(e,n){isNaN(e)||(t[n]=+e)})),e[n]=t})),e):void 0}var s=a,l=n("20e73");function u(t,e,n,r){var i,o,a,s,u,c,h,d=[],f=!!r;if(f){a=r[0],s=r[1];for(var p=0,g=t.length;p<g;p+=1){var m=t[p];a=l["vec2"].min([0,0],a,m),s=l["vec2"].max([0,0],s,m)}}p=0;for(var y=t.length;p<y;p+=1){m=t[p];if(0!==p||n)if(p!==y-1||n){var v=[p?p-1:y-1,p-1][n?0:1];i=t[v],o=t[n?(p+1)%y:p+1];var b=[0,0];b=l["vec2"].sub(b,o,i),b=l["vec2"].scale(b,b,e);var _=l["vec2"].distance(m,i),x=l["vec2"].distance(m,o),w=_+x;0!==w&&(_/=w,x/=w);var S=l["vec2"].scale([0,0],b,-_),E=l["vec2"].scale([0,0],b,x);c=l["vec2"].add([0,0],m,S),u=l["vec2"].add([0,0],m,E),u=l["vec2"].min([0,0],u,l["vec2"].max([0,0],o,m)),u=l["vec2"].max([0,0],u,l["vec2"].min([0,0],o,m)),S=l["vec2"].sub([0,0],u,m),S=l["vec2"].scale([0,0],S,-_/x),c=l["vec2"].add([0,0],m,S),c=l["vec2"].min([0,0],c,l["vec2"].max([0,0],i,m)),c=l["vec2"].max([0,0],c,l["vec2"].min([0,0],i,m)),E=l["vec2"].sub([0,0],m,c),E=l["vec2"].scale([0,0],E,x/_),u=l["vec2"].add([0,0],m,E),f&&(c=l["vec2"].max([0,0],c,a),c=l["vec2"].min([0,0],c,s),u=l["vec2"].max([0,0],u,a),u=l["vec2"].min([0,0],u,s)),d.push(h),d.push(c),h=u}else c=m,d.push(h),d.push(c);else h=m}return n&&d.push(d.shift()),d}function c(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=[[0,0],[1,1]]);for(var r=!!e,i=[],o=0,a=t.length;o<a;o+=2)i.push([t[o],t[o+1]]);var s,l,c,h=u(i,.4,r,n),d=i.length,f=[];for(o=0;o<d-1;o+=1)s=h[2*o],l=h[2*o+1],c=i[o+1],f.push(["C",s[0],s[1],l[0],l[1],c[0],c[1]]);return r&&(s=h[d],l=h[d+1],c=i[0],f.push(["C",s[0],s[1],l[0],l[1],c[0],c[1]])),f}var h=c;var d="\t\n\v\f\r   ᠎             　\u2028\u2029",f=new RegExp("([a-z])["+d+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+d+"]*,?["+d+"]*)+)","ig"),p=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+d+"]*,?["+d+"]*","ig");function g(t){if(!t)return null;if(Object(r["isArray"])(t))return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(t).replace(f,(function(t,r,i){var o=[],a=r.toLowerCase();if(i.replace(p,(function(t,e){e&&o.push(+e)})),"m"===a&&o.length>2&&(n.push([r].concat(o.splice(0,2))),a="l",r="m"===r?"l":"L"),"o"===a&&1===o.length&&n.push([r,o[0]]),"r"===a)n.push([r].concat(o));else while(o.length>=e[a])if(n.push([r].concat(o.splice(0,e[a]))),!e[a])break;return""})),n}var m=/[a-z]/;function y(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}function v(t){var e=g(t);if(!e||!e.length)return[["M",0,0]];for(var n=!1,r=0;r<e.length;r++){var i=e[r][0];if(m.test(i)||["V","H","T","S"].indexOf(i)>=0){n=!0;break}}if(!n)return e;var o=[],a=0,s=0,l=0,u=0,c=0,h=e[0];"M"!==h[0]&&"m"!==h[0]||(a=+h[1],s=+h[2],l=a,u=s,c++,o[0]=["M",a,s]);r=c;for(var d=e.length;r<d;r++){var f=e[r],p=o[r-1],v=[],b=(i=f[0],i.toUpperCase());if(i!==b)switch(v[0]=b,b){case"A":v[1]=f[1],v[2]=f[2],v[3]=f[3],v[4]=f[4],v[5]=f[5],v[6]=+f[6]+a,v[7]=+f[7]+s;break;case"V":v[1]=+f[1]+s;break;case"H":v[1]=+f[1]+a;break;case"M":l=+f[1]+a,u=+f[2]+s,v[1]=l,v[2]=u;break;default:for(var _=1,x=f.length;_<x;_++)v[_]=+f[_]+(_%2?a:s)}else v=e[r];switch(b){case"Z":a=+l,s=+u;break;case"H":a=v[1],v=["L",a,s];break;case"V":s=v[1],v=["L",a,s];break;case"T":a=v[1],s=v[2];var w=y([p[1],p[2]],[p[3],p[4]]);v=["Q",w[0],w[1],a,s];break;case"S":a=v[v.length-2],s=v[v.length-1];var S=p.length,E=y([p[S-4],p[S-3]],[p[S-2],p[S-1]]);v=["C",E[0],E[1],v[1],v[2],a,s];break;case"M":l=v[v.length-2],u=v[v.length-1];break;default:a=v[v.length-2],s=v[v.length-1]}o.push(v)}return o}Math.PI;function b(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function _(t,e){return b(t)*b(e)?(t[0]*e[0]+t[1]*e[1])/(b(t)*b(e)):1}function x(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(_(t,e))}function w(t,e){return t[0]===e[0]&&t[1]===e[1]}function S(t,e){var n=e[1],i=e[2],o=Object(r["mod"])(Object(r["toRadian"])(e[3]),2*Math.PI),a=e[4],s=e[5],l=t[0],u=t[1],c=e[6],h=e[7],d=Math.cos(o)*(l-c)/2+Math.sin(o)*(u-h)/2,f=-1*Math.sin(o)*(l-c)/2+Math.cos(o)*(u-h)/2,p=d*d/(n*n)+f*f/(i*i);p>1&&(n*=Math.sqrt(p),i*=Math.sqrt(p));var g=n*n*(f*f)+i*i*(d*d),m=g?Math.sqrt((n*n*(i*i)-g)/g):1;a===s&&(m*=-1),isNaN(m)&&(m=0);var y=i?m*n*f/i:0,v=n?m*-i*d/n:0,b=(l+c)/2+Math.cos(o)*y-Math.sin(o)*v,S=(u+h)/2+Math.sin(o)*y+Math.cos(o)*v,E=[(d-y)/n,(f-v)/i],C=[(-1*d-y)/n,(-1*f-v)/i],M=x([1,0],E),T=x(E,C);return _(E,C)<=-1&&(T=Math.PI),_(E,C)>=1&&(T=0),0===s&&T>0&&(T-=2*Math.PI),1===s&&T<0&&(T+=2*Math.PI),{cx:b,cy:S,rx:w(t,[c,h])?0:n,ry:w(t,[c,h])?0:i,startAngle:M,endAngle:M+T,xRotation:o,arcFlag:a,sweepFlag:s}}function E(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}function C(t){t=s(t);for(var e=[],n=null,r=null,i=null,o=0,a=t.length,l=0;l<a;l++){var u=t[l];r=t[l+1];var c=u[0],h={command:c,prePoint:n,params:u,startTangent:null,endTangent:null};switch(c){case"M":i=[u[1],u[2]],o=l;break;case"A":var d=S(n,u);h["arcParams"]=d;break;default:break}if("Z"===c)n=i,r=t[o+1];else{var f=u.length;n=[u[f-2],u[f-1]]}r&&"Z"===r[0]&&(r=t[o],e[o]&&(e[o].prePoint=n)),h["currentPoint"]=n,e[o]&&w(n,e[o].currentPoint)&&(e[o].prePoint=h.prePoint);var p=r?[r[r.length-2],r[r.length-1]]:null;h["nextPoint"]=p;var g=h.prePoint;if(["L","H","V"].includes(c))h.startTangent=[g[0]-n[0],g[1]-n[1]],h.endTangent=[n[0]-g[0],n[1]-g[1]];else if("Q"===c){var m=[u[1],u[2]];h.startTangent=[g[0]-m[0],g[1]-m[1]],h.endTangent=[n[0]-m[0],n[1]-m[1]]}else if("T"===c){var y=e[l-1];m=E(y.currentPoint,g);"Q"===y.command?(h.command="Q",h.startTangent=[g[0]-m[0],g[1]-m[1]],h.endTangent=[n[0]-m[0],n[1]-m[1]]):(h.command="TL",h.startTangent=[g[0]-n[0],g[1]-n[1]],h.endTangent=[n[0]-g[0],n[1]-g[1]])}else if("C"===c){var v=[u[1],u[2]],b=[u[3],u[4]];h.startTangent=[g[0]-v[0],g[1]-v[1]],h.endTangent=[n[0]-b[0],n[1]-b[1]],0===h.startTangent[0]&&0===h.startTangent[1]&&(h.startTangent=[v[0]-b[0],v[1]-b[1]]),0===h.endTangent[0]&&0===h.endTangent[1]&&(h.endTangent=[b[0]-v[0],b[1]-v[1]])}else if("S"===c){y=e[l-1],v=E(y.currentPoint,g),b=[u[1],u[2]];"C"===y.command?(h.command="C",h.startTangent=[g[0]-v[0],g[1]-v[1]],h.endTangent=[n[0]-b[0],n[1]-b[1]]):(h.command="SQ",h.startTangent=[g[0]-b[0],g[1]-b[1]],h.endTangent=[n[0]-b[0],n[1]-b[1]])}else if("A"===c){var _=.001,x=h["arcParams"]||{},C=x.cx,M=void 0===C?0:C,T=x.cy,A=void 0===T?0:T,O=x.rx,k=void 0===O?0:O,I=x.ry,P=void 0===I?0:I,L=x.sweepFlag,N=void 0===L?0:L,R=x.startAngle,D=void 0===R?0:R,F=x.endAngle,j=void 0===F?0:F;0===N&&(_*=-1);var B=k*Math.cos(D-_)+M,z=P*Math.sin(D-_)+A;h.startTangent=[B-i[0],z-i[1]];var U=k*Math.cos(D+j+_)+M,G=P*Math.sin(D+j-_)+A;h.endTangent=[g[0]-U,g[1]-G]}e.push(h)}return e}},3022:function(t,e,n){(function(t){var r=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++)n[e[r]]=Object.getOwnPropertyDescriptor(t,e[r]);return n},i=/%[sdj%]/g;e.format=function(t){if(!w(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(s(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,o=r.length,a=String(t).replace(i,(function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return t}})),l=r[n];n<o;l=r[++n])b(l)||!M(l)?a+=" "+l:a+=" "+s(l);return a},e.deprecate=function(n,r){if("undefined"!==typeof t&&!0===t.noDeprecation)return n;if("undefined"===typeof t)return function(){return e.deprecate(n,r).apply(this,arguments)};var i=!1;function o(){if(!i){if(t.throwDeprecation)throw new Error(r);t.traceDeprecation?console.trace(r):console.error(r),i=!0}return n.apply(this,arguments)}return o};var o,a={};function s(t,n){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),v(n)?r.showHidden=n:n&&e._extend(r,n),E(r.showHidden)&&(r.showHidden=!1),E(r.depth)&&(r.depth=2),E(r.colors)&&(r.colors=!1),E(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=l),h(r,t,r.depth)}function l(t,e){var n=s.styles[e];return n?"["+s.colors[n][0]+"m"+t+"["+s.colors[n][1]+"m":t}function u(t,e){return t}function c(t){var e={};return t.forEach((function(t,n){e[t]=!0})),e}function h(t,n,r){if(t.customInspect&&n&&O(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return w(i)||(i=h(t,i,r)),i}var o=d(t,n);if(o)return o;var a=Object.keys(n),s=c(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(n)),A(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return f(n);if(0===a.length){if(O(n)){var l=n.name?": "+n.name:"";return t.stylize("[Function"+l+"]","special")}if(C(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(T(n))return t.stylize(Date.prototype.toString.call(n),"date");if(A(n))return f(n)}var u,v="",b=!1,_=["{","}"];if(y(n)&&(b=!0,_=["[","]"]),O(n)){var x=n.name?": "+n.name:"";v=" [Function"+x+"]"}return C(n)&&(v=" "+RegExp.prototype.toString.call(n)),T(n)&&(v=" "+Date.prototype.toUTCString.call(n)),A(n)&&(v=" "+f(n)),0!==a.length||b&&0!=n.length?r<0?C(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),u=b?p(t,n,r,s,a):a.map((function(e){return g(t,n,r,s,e,b)})),t.seen.pop(),m(u,v,_)):_[0]+v+_[1]}function d(t,e){if(E(e))return t.stylize("undefined","undefined");if(w(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return x(e)?t.stylize(""+e,"number"):v(e)?t.stylize(""+e,"boolean"):b(e)?t.stylize("null","null"):void 0}function f(t){return"["+Error.prototype.toString.call(t)+"]"}function p(t,e,n,r,i){for(var o=[],a=0,s=e.length;a<s;++a)R(e,String(a))?o.push(g(t,e,n,r,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(g(t,e,n,r,i,!0))})),o}function g(t,e,n,r,i,o){var a,s,l;if(l=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},l.get?s=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(s=t.stylize("[Setter]","special")),R(r,i)||(a="["+i+"]"),s||(t.seen.indexOf(l.value)<0?(s=b(n)?h(t,l.value,null):h(t,l.value,n-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+s.split("\n").map((function(t){return"   "+t})).join("\n"))):s=t.stylize("[Circular]","special")),E(a)){if(o&&i.match(/^\d+$/))return s;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function m(t,e,n){var r=t.reduce((function(t,e){return e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0);return r>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function y(t){return Array.isArray(t)}function v(t){return"boolean"===typeof t}function b(t){return null===t}function _(t){return null==t}function x(t){return"number"===typeof t}function w(t){return"string"===typeof t}function S(t){return"symbol"===typeof t}function E(t){return void 0===t}function C(t){return M(t)&&"[object RegExp]"===I(t)}function M(t){return"object"===typeof t&&null!==t}function T(t){return M(t)&&"[object Date]"===I(t)}function A(t){return M(t)&&("[object Error]"===I(t)||t instanceof Error)}function O(t){return"function"===typeof t}function k(t){return null===t||"boolean"===typeof t||"number"===typeof t||"string"===typeof t||"symbol"===typeof t||"undefined"===typeof t}function I(t){return Object.prototype.toString.call(t)}function P(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(n){if(E(o)&&(o=Object({NODE_ENV:"production",VUE_APP_BASE_API:"",VUE_APP_TITLE:"奉贤消防救援支队远程侦查系统",BASE_URL:"/"}).NODE_DEBUG||""),n=n.toUpperCase(),!a[n])if(new RegExp("\\b"+n+"\\b","i").test(o)){var r=t.pid;a[n]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",n,r,t)}}else a[n]=function(){};return a[n]},e.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=y,e.isBoolean=v,e.isNull=b,e.isNullOrUndefined=_,e.isNumber=x,e.isString=w,e.isSymbol=S,e.isUndefined=E,e.isRegExp=C,e.isObject=M,e.isDate=T,e.isError=A,e.isFunction=O,e.isPrimitive=k,e.isBuffer=n("d60a");var L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function N(){var t=new Date,e=[P(t.getHours()),P(t.getMinutes()),P(t.getSeconds())].join(":");return[t.getDate(),L[t.getMonth()],e].join(" ")}function R(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",N(),e.format.apply(e,arguments))},e.inherits=n("28a0"),e._extend=function(t,e){if(!e||!M(e))return t;var n=Object.keys(e),r=n.length;while(r--)t[n[r]]=e[n[r]];return t};var D="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;function F(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}function j(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if("function"!==typeof i)throw new TypeError("The last argument must be of type Function");var o=this,a=function(){return i.apply(o,arguments)};e.apply(this,n).then((function(e){t.nextTick(a,null,e)}),(function(e){t.nextTick(F,e,a)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),Object.defineProperties(n,r(e)),n}e.promisify=function(t){if("function"!==typeof t)throw new TypeError('The "original" argument must be of type Function');if(D&&t[D]){var e=t[D];if("function"!==typeof e)throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,D,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,n,r=new Promise((function(t,r){e=t,n=r})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(t,r){t?n(t):e(r)}));try{t.apply(this,i)}catch(a){n(a)}return r}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),D&&Object.defineProperty(e,D,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,r(t))},e.promisify.custom=D,e.callbackify=j}).call(this,n("4362"))},"31a1":function(t,e,n){"use strict";var r=n("9ab4"),i=n("ccaf"),o=n("6928"),a=function(t){function e(e){return t.call(this,e)||this}return Object(r["__extends"])(e,t),e.prototype._isInBBox=function(t,e){var n=this.getBBox();return n.minX<=t&&n.maxX>=t&&n.minY<=e&&n.maxY>=e},e.prototype.afterAttrsChange=function(e){t.prototype.afterAttrsChange.call(this,e),this.clearCacheBBox()},e.prototype.getBBox=function(){var t=this.cfg.bbox;return t||(t=this.calculateBBox(),this.set("bbox",t)),t},e.prototype.getCanvasBBox=function(){var t=this.cfg.canvasBBox;return t||(t=this.calculateCanvasBBox(),this.set("canvasBBox",t)),t},e.prototype.applyMatrix=function(e){t.prototype.applyMatrix.call(this,e),this.set("canvasBBox",null)},e.prototype.calculateCanvasBBox=function(){var t=this.getBBox(),e=this.getTotalMatrix(),n=t.minX,r=t.minY,i=t.maxX,a=t.maxY;if(e){var s=Object(o["c"])(e,[t.minX,t.minY]),l=Object(o["c"])(e,[t.maxX,t.minY]),u=Object(o["c"])(e,[t.minX,t.maxY]),c=Object(o["c"])(e,[t.maxX,t.maxY]);n=Math.min(s[0],l[0],u[0],c[0]),i=Math.max(s[0],l[0],u[0],c[0]),r=Math.min(s[1],l[1],u[1],c[1]),a=Math.max(s[1],l[1],u[1],c[1])}var h=this.attrs;if(h.shadowColor){var d=h.shadowBlur,f=void 0===d?0:d,p=h.shadowOffsetX,g=void 0===p?0:p,m=h.shadowOffsetY,y=void 0===m?0:m,v=n-f+g,b=i+f+g,_=r-f+y,x=a+f+y;n=Math.min(n,v),i=Math.max(i,b),r=Math.min(r,_),a=Math.max(a,x)}return{x:n,y:r,minX:n,minY:r,maxX:i,maxY:a,width:i-n,height:a-r}},e.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},e.prototype.isClipShape=function(){return this.get("isClipShape")},e.prototype.isInShape=function(t,e){return!1},e.prototype.isOnlyHitBox=function(){return!1},e.prototype.isHit=function(t,e){var n=this.get("startArrowShape"),r=this.get("endArrowShape"),i=[t,e,1];i=this.invertFromMatrix(i);var o=i[0],a=i[1],s=this._isInBBox(o,a);if(this.isOnlyHitBox())return s;if(s&&!this.isClipped(o,a)){if(this.isInShape(o,a))return!0;if(n&&n.isHit(o,a))return!0;if(r&&r.isHit(o,a))return!0}return!1},e}(i["a"]);e["a"]=a},"320c":function(t,e,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function s(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(e).map((function(t){return e[t]}));if("0123456789"!==r.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(t){i[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(o){return!1}}t.exports=s()?Object.assign:function(t,e){for(var n,s,l=a(t),u=1;u<arguments.length;u++){for(var c in n=Object(arguments[u]),n)i.call(n,c)&&(l[c]=n[c]);if(r){s=r(n);for(var h=0;h<s.length;h++)o.call(n,s[h])&&(l[s[h]]=n[s[h]])}}return l}},"330d":function(t,e,n){"use strict";var r=n("9ab4"),i=n("ccaf"),o=n("b2cb"),a={},s="_INDEX";function l(t,e){if(t.set("canvas",e),t.isGroup()){var n=t.get("children");n.length&&n.forEach((function(t){l(t,e)}))}}function u(t,e){if(t.set("timeline",e),t.isGroup()){var n=t.get("children");n.length&&n.forEach((function(t){u(t,e)}))}}function c(t,e,n){void 0===n&&(n=!0),n?e.destroy():(e.set("parent",null),e.set("canvas",null)),Object(o["j"])(t.getChildren(),e)}function h(t){return function(e,n){var r=t(e,n);return 0===r?e[s]-n[s]:r}}var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r["__extends"])(e,t),e.prototype.isCanvas=function(){return!1},e.prototype.getBBox=function(){var t=1/0,e=-1/0,n=1/0,r=-1/0,i=this.getChildren().filter((function(t){return t.get("visible")&&(!t.isGroup()||t.isGroup()&&t.getChildren().length>0)}));i.length>0?Object(o["a"])(i,(function(i){var o=i.getBBox(),a=o.minX,s=o.maxX,l=o.minY,u=o.maxY;a<t&&(t=a),s>e&&(e=s),l<n&&(n=l),u>r&&(r=u)})):(t=0,e=0,n=0,r=0);var a={x:t,y:n,minX:t,minY:n,maxX:e,maxY:r,width:e-t,height:r-n};return a},e.prototype.getCanvasBBox=function(){var t=1/0,e=-1/0,n=1/0,r=-1/0,i=this.getChildren().filter((function(t){return t.get("visible")&&(!t.isGroup()||t.isGroup()&&t.getChildren().length>0)}));i.length>0?Object(o["a"])(i,(function(i){var o=i.getCanvasBBox(),a=o.minX,s=o.maxX,l=o.minY,u=o.maxY;a<t&&(t=a),s>e&&(e=s),l<n&&(n=l),u>r&&(r=u)})):(t=0,e=0,n=0,r=0);var a={x:t,y:n,minX:t,minY:n,maxX:e,maxY:r,width:e-t,height:r-n};return a},e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e["children"]=[],e},e.prototype.onAttrChange=function(e,n,r){if(t.prototype.onAttrChange.call(this,e,n,r),"matrix"===e){var i=this.getTotalMatrix();this._applyChildrenMarix(i)}},e.prototype.applyMatrix=function(e){var n=this.getTotalMatrix();t.prototype.applyMatrix.call(this,e);var r=this.getTotalMatrix();r!==n&&this._applyChildrenMarix(r)},e.prototype._applyChildrenMarix=function(t){var e=this.getChildren();Object(o["a"])(e,(function(e){e.applyMatrix(t)}))},e.prototype.addShape=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[0],r=t[1];Object(o["f"])(n)?r=n:r["type"]=n;var i=a[r.type];i||(i=Object(o["k"])(r.type),a[r.type]=i);var s=this.getShapeBase(),l=new s[i](r);return this.add(l),l},e.prototype.addGroup=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n,r=t[0],i=t[1];if(Object(o["d"])(r))n=new r(i||{parent:this});else{var a=r||{},s=this.getGroupBase();n=new s(a)}return this.add(n),n},e.prototype.getCanvas=function(){var t;return t=this.isCanvas()?this:this.get("canvas"),t},e.prototype.getShape=function(t,e,n){if(!Object(o["b"])(this))return null;var r,i=this.getChildren();if(this.isCanvas())r=this._findShape(i,t,e,n);else{var a=[t,e,1];a=this.invertFromMatrix(a),this.isClipped(a[0],a[1])||(r=this._findShape(i,a[0],a[1],n))}return r},e.prototype._findShape=function(t,e,n,r){for(var i=null,a=t.length-1;a>=0;a--){var s=t[a];if(Object(o["b"])(s)&&(s.isGroup()?i=s.getShape(e,n,r):s.isHit(e,n)&&(i=s)),i)break}return i},e.prototype.add=function(t){var e=this.getCanvas(),n=this.getChildren(),r=this.get("timeline"),i=t.getParent();i&&c(i,t,!1),t.set("parent",this),e&&l(t,e),r&&u(t,r),n.push(t),t.onCanvasChange("add"),this._applyElementMatrix(t)},e.prototype._applyElementMatrix=function(t){var e=this.getTotalMatrix();e&&t.applyMatrix(e)},e.prototype.getChildren=function(){return this.get("children")},e.prototype.sort=function(){var t=this.getChildren();Object(o["a"])(t,(function(t,e){return t[s]=e,t})),t.sort(h((function(t,e){return t.get("zIndex")-e.get("zIndex")}))),this.onCanvasChange("sort")},e.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var t=this.getChildren(),e=t.length-1;e>=0;e--)t[e].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},e.prototype.destroy=function(){this.get("destroyed")||(this.clear(),t.prototype.destroy.call(this))},e.prototype.getFirst=function(){return this.getChildByIndex(0)},e.prototype.getLast=function(){var t=this.getChildren();return this.getChildByIndex(t.length-1)},e.prototype.getChildByIndex=function(t){var e=this.getChildren();return e[t]},e.prototype.getCount=function(){var t=this.getChildren();return t.length},e.prototype.contain=function(t){var e=this.getChildren();return e.indexOf(t)>-1},e.prototype.removeChild=function(t,e){void 0===e&&(e=!0),this.contain(t)&&t.remove(e)},e.prototype.findAll=function(t){var e=[],n=this.getChildren();return Object(o["a"])(n,(function(n){t(n)&&e.push(n),n.isGroup()&&(e=e.concat(n.findAll(t)))})),e},e.prototype.find=function(t){var e=null,n=this.getChildren();return Object(o["a"])(n,(function(n){if(t(n)?e=n:n.isGroup()&&(e=n.find(t)),e)return!1})),e},e.prototype.findById=function(t){return this.find((function(e){return e.get("id")===t}))},e.prototype.findByClassName=function(t){return this.find((function(e){return e.get("className")===t}))},e.prototype.findAllByName=function(t){return this.findAll((function(e){return e.get("name")===t}))},e}(i["a"]);e["a"]=d},3486:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n("57a2")),o=n("7908");e.default={layout:i.default,util:{time:o.time,notime:o.notime}}},"34eb":function(t,e,n){(function(r){function i(){return!("undefined"===typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"===typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function o(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,t=>{"%%"!==t&&(r++,"%c"===t&&(i=r))}),e.splice(i,0,n)}function a(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(n){}}function s(){let t;try{t=e.storage.getItem("debug")}catch(n){}return!t&&"undefined"!==typeof r&&"env"in r&&(t=Object({NODE_ENV:"production",VUE_APP_BASE_API:"",VUE_APP_TITLE:"奉贤消防救援支队远程侦查系统",BASE_URL:"/"}).DEBUG),t}function l(){try{return localStorage}catch(t){}}e.formatArgs=o,e.save=a,e.load=s,e.useColors=i,e.storage=l(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=n("dc90")(e);const{formatters:u}=t.exports;u.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,n("4362"))},3503:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["pretty","human","error_trace","source","filter_path"],a={errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["id"]){const t=new n("Missing required parameter: id");return r(t,l)}if(null==t["lang"]){const t=new n("Missing required parameter: lang");return r(t,l)}if(null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=t["id"]&&null==t["lang"]){const t=new n("Missing required parameter of the url: lang");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,id:d,lang:f,...p}=t;p=i(o,a,p,u),null==c&&(c="GET");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m=null!=f&&null!=d?"/_scripts/"+encodeURIComponent(f)+"/"+encodeURIComponent(d):"/_scripts/"+encodeURIComponent(f);const y={method:c,path:m,body:null,querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},3729:function(t,e,n){var r=n("9e69"),i=n("00fd"),o=n("29f3"),a="[object Null]",s="[object Undefined]",l=r?r.toStringTag:void 0;function u(t){return null==t?void 0===t?s:a:l&&l in Object(t)?i(t):o(t)}t.exports=u},3872:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n("52b3")),i=n("dcfe");function o(t){return t&&t.__esModule?t:{default:t}}function a(t){void 0===t&&(t={});var e=t,n=function(){},r=function(){var t={};return function(e){var n=e.next,r=n;return!t[r]&&(t[r]=!0,!0)}}();return e.allowTraversal=t.allowTraversal||r,e.enter=t.enter||n,e.leave=t.leave||n,e}var s=function(t,e,n,o){void 0===o&&(o=!0);var s=a(n),l=new r.default,u=t.edges,c=void 0===u?[]:u;l.enqueue(e);var h="",d=function(){var t=l.dequeue();s.enter({current:t,previous:h}),(0,i.getNeighbors)(t,c,o?"target":void 0).forEach((function(e){s.allowTraversal({previous:h,current:t,next:e})&&l.enqueue(e)})),s.leave({current:t,previous:h}),h=t};while(!l.isEmpty())d()},l=s;e.default=l},3888:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FORCE_LAYOUT_TYPE_MAP=e.LAYOUT_MESSAGE=void 0,e.LAYOUT_MESSAGE={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"},e.FORCE_LAYOUT_TYPE_MAP={gForce:!0,force2:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0}},3913:function(t,e,n){"use strict";(function(e){function n(t,n,r,i){if("function"!==typeof t)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,n)}));case 3:return e.nextTick((function(){t.call(null,n,r)}));case 4:return e.nextTick((function(){t.call(null,n,r,i)}));default:o=new Array(s-1),a=0;while(a<o.length)o[a++]=arguments[a];return e.nextTick((function(){t.apply(null,o)}))}}"undefined"===typeof e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:n}:t.exports=e}).call(this,n("4362"))},3979:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=void 0;var i=n("1de0"),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(i.Graph);e.Graph=o},"39b2":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["interval","snapshots","threads","ignore_idle_threads","type","timeout","pretty","human","error_trace","source","filter_path"],a={ignoreIdleThreads:"ignore_idle_threads",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,nodeId:d,node_id:f,...p}=t;p=i(o,a,p,u),null==c&&(c="GET");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m=null!=(f||d)?"/_cluster/nodes/"+encodeURIComponent(f||d)+"/hotthreads":null!=(f||d)?"/_cluster/nodes/"+encodeURIComponent(f||d)+"/hot_threads":null!=(f||d)?"/_nodes/"+encodeURIComponent(f||d)+"/hotthreads":null!=(f||d)?"/_nodes/"+encodeURIComponent(f||d)+"/hot_threads":"/_cluster/nodes/hotthreads";const y={method:c,path:m,body:null,querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},"39c8":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["pretty","human","error_trace","source","filter_path"],a={errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,...d}=t;d=i(o,a,d,u),null==c&&(c="GET");var f=s.ignore;"number"===typeof f&&(s.ignore=[f]);var p="";p="/_remote/info";const g={method:c,path:p,body:null,querystring:d};return s.warnings=0===u.length?null:u,e(g,s,l)}}t.exports=r},"3a7c":function(t,e,n){function r(t){return Array.isArray?Array.isArray(t):"[object Array]"===y(t)}function i(t){return"boolean"===typeof t}function o(t){return null===t}function a(t){return null==t}function s(t){return"number"===typeof t}function l(t){return"string"===typeof t}function u(t){return"symbol"===typeof t}function c(t){return void 0===t}function h(t){return"[object RegExp]"===y(t)}function d(t){return"object"===typeof t&&null!==t}function f(t){return"[object Date]"===y(t)}function p(t){return"[object Error]"===y(t)||t instanceof Error}function g(t){return"function"===typeof t}function m(t){return null===t||"boolean"===typeof t||"number"===typeof t||"string"===typeof t||"symbol"===typeof t||"undefined"===typeof t}function y(t){return Object.prototype.toString.call(t)}e.isArray=r,e.isBoolean=i,e.isNull=o,e.isNullOrUndefined=a,e.isNumber=s,e.isString=l,e.isSymbol=u,e.isUndefined=c,e.isRegExp=h,e.isObject=d,e.isDate=f,e.isError=p,e.isFunction=g,e.isPrimitive=m,e.isBuffer=n("b639").Buffer.isBuffer},"3ab3":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["timeout","master_timeout","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["id"]){const t=new n("Missing required parameter: id");return r(t,l)}if(null==t["lang"]){const t=new n("Missing required parameter: lang");return r(t,l)}if(null==t["body"]){const t=new n("Missing required parameter: body");return r(t,l)}if(null!=t["id"]&&null==t["lang"]){const t=new n("Missing required parameter of the url: lang");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,id:d,lang:f,...p}=t;p=i(o,a,p,u),null==c&&(c="PUT");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m=null!=f&&null!=d?"/_scripts/"+encodeURIComponent(f)+"/"+encodeURIComponent(d):"/_scripts/"+encodeURIComponent(f);const y={method:c,path:m,body:h||"",querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},"3c0e":function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},i.apply(this,arguments)},o=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.DagreCompoundLayout=void 0;var a=n("5bc9"),s=n("1d89"),l=n("f271"),u=function(t){function e(e){var n=t.call(this)||this;return n.rankdir="TB",n.nodesep=50,n.edgesep=5,n.ranksep=50,n.controlPoints=!0,n.anchorPoint=!0,n.nodes=[],n.edges=[],n.combos=[],n.onLayoutEnd=function(){},n.updateCfg(e),n}return r(e,t),e.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,begin:void 0,nodeSize:void 0,nodesep:50,ranksep:50,controlPoints:!0,anchorPoint:!0}},e.prototype.init=function(t){var e=t.hiddenNodes||[],n=t.hiddenEdges||[],r=t.hiddenCombos||[];this.nodes=this.getDataByOrder((t.nodes||[]).concat(e)),this.edges=this.getDataByOrder((t.edges||[]).concat(n)),this.combos=(t.combos||[]).concat(r.map((function(t){return i(i({},t),{collapsed:!0})})))},e.prototype.execute=function(){var t=this,e=t.nodes,n=t.edges;if(e){var r=t.getLayoutConfig(),i=r.graphDef,o=r.graphOption,a=r.graphSettings,l=(0,s.buildGraph)(i,o,a),u=(0,s.flatGraph)(l,!0);return this.updatePosition(u),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n}}},e.prototype.getNodePath=function(t){var e=this,n=e.nodes,r=e.combos,i=n.find((function(e){return e.id===t})),o=function(t,e){void 0===e&&(e=[]);var n=r.find((function(e){return e.id===t}));return n?(e.unshift(t),n.parentId?o(n.parentId,e):e):e};return i&&i.comboId?o(i.comboId,[t]):[t]},e.prototype.getLayoutConfig=function(){var t,e,n,r,a=this,u=a.nodes,c=a.edges,h=a.combos,d=a.nodeSize,f=a.rankdir,p=a.align,g=a.edgesep,m=a.nodesep,y=a.ranksep,v=a.settings,b=(h||[]).reduce((function(t,e){var n=u.filter((function(t){return t.comboId===e.id})).map((function(t){return t.id})),r=(h||[]).filter((function(t){return t.parentId===e.id})).map((function(t){return t.id}));return(n.length||r.length)&&(t[e.id]=o(o([],n,!0),r,!0)),t}),{});r=d?(0,l.isArray)(d)?function(){return d}:function(){return[d,d]}:function(t){return t&&t.size?(0,l.isArray)(t.size)?t.size:(0,l.isObject)(t.size)?[t.size.width||40,t.size.height||40]:[t.size,t.size]:[40,40]};var _=function(t){return t&&t.size?(0,l.isArray)(t.size)?t.size:[t.size,t.size]:[80,40]},x=_(null===h||void 0===h?void 0:h[0]),w=x[0],S=x[1],E=null===(e=null===(t=a.graphSettings)||void 0===t?void 0:t.subScene)||void 0===e?void 0:e.meta,C=(null===(n=h.find((function(t){return!t.collapsed})))||void 0===n?void 0:n.padding)||[20,20,20,20],M=C[0],T=C[1],A=C[2],O=C[3],k={compound:b,nodes:o([],(u||[]).map((function(t){var e=r(t),n=e[0],o=e[1];return i(i({},t),{width:n,height:o})})),!0),edges:o([],(c||[]).map((function(t){return i(i({},t),{v:t.source,w:t.target})})),!0)},I={expanded:(h||[]).filter((function(t){return!t.collapsed})).map((function(t){return t.id}))},P={graph:{meta:{align:p,rankDir:f,nodeSep:m,edgeSep:g,rankSep:y}},subScene:{meta:{paddingTop:M||(null===E||void 0===E?void 0:E.paddingTop)||20,paddingRight:T||(null===E||void 0===E?void 0:E.paddingRight)||20,paddingBottom:A||(null===E||void 0===E?void 0:E.paddingBottom)||20,paddingLeft:O||(null===E||void 0===E?void 0:E.paddingLeft)||20,labelHeight:0}},nodeSize:{meta:{width:w,height:S}}},L=(0,s.mergeConfig)(v,i({},(0,s.mergeConfig)(P,s.LAYOUT_CONFIG)));return a.graphSettings=L,{graphDef:k,graphOption:I,graphSettings:L}},e.prototype.updatePosition=function(t){var e=t.nodes,n=t.edges;this.updateNodePosition(e,n),this.updateEdgePosition(e,n)},e.prototype.getBegin=function(t,e){var n=this,r=n.begin,i=[0,0];if(r){var o=1/0,a=1/0;t.forEach((function(t){o>t.x&&(o=t.x),a>t.y&&(a=t.y)})),e.forEach((function(t){t.points.forEach((function(t){o>t.x&&(o=t.x),a>t.y&&(a=t.y)}))})),i[0]=r[0]-o,i[1]=r[1]-a}return i},e.prototype.updateNodePosition=function(t,e){var n=this,r=n.combos,i=n.nodes,o=n.edges,a=n.anchorPoint,l=n.graphSettings,u=this.getBegin(t,e);t.forEach((function(t){var n,c=t.x,h=t.y,d=t.id,f=t.type,p=t.coreBox;if(f===s.HierarchyNodeType.META&&d!==s.ROOT_NAME){var g=r.findIndex((function(t){return t.id===d})),m=null===(n=null===l||void 0===l?void 0:l.subScene)||void 0===n?void 0:n.meta;r[g].offsetX=c+u[0],r[g].offsetY=h+u[1],r[g].fixSize=[p.width,p.height],r[g].fixCollapseSize=[p.width,p.height],t.expanded?r[g].padding=[null===m||void 0===m?void 0:m.paddingTop,null===m||void 0===m?void 0:m.paddingRight,null===m||void 0===m?void 0:m.paddingBottom,null===m||void 0===m?void 0:m.paddingLeft]:r[g].padding=[0,0,0,0]}else if(f===s.HierarchyNodeType.OP){g=i.findIndex((function(t){return t.id===d}));if(i[g].x=c+u[0],i[g].y=h+u[1],a){var y=[],v=e.filter((function(t){return t.v===d})),b=e.filter((function(t){return t.w===d}));v.length>0&&v.forEach((function(e){var n=e.points[0],r=(n.x-c)/t.width+.5,i=(n.y-h)/t.height+.5;y.push([r,i]),e.baseEdgeList.forEach((function(t){var e=o.find((function(e){return e.source===t.v&&e.target===t.w}));e&&(e.sourceAnchor=y.length-1)}))})),b.length>0&&b.forEach((function(e){var n=e.points[e.points.length-1],r=(n.x-c)/t.width+.5,i=(n.y-h)/t.height+.5;y.push([r,i]),e.baseEdgeList.forEach((function(t){var e=o.find((function(e){return e.source===t.v&&e.target===t.w}));e&&(e.targetAnchor=y.length-1)}))})),i[g].anchorPoints=y.length>0?y:i[g].anchorPoints||[]}}}))},e.prototype.updateEdgePosition=function(t,e){var n=this,r=n.combos,a=n.edges,l=n.controlPoints,u=this.getBegin(t,e);l&&(r.forEach((function(t){t.inEdges=[],t.outEdges=[]})),a.forEach((function(e){var a,l,c,h,d=t.find((function(t){return t.id===e.source})),f=t.find((function(t){return t.id===e.target})),p=[],g=[];if(d&&f)g=(0,s.getEdges)(null===d||void 0===d?void 0:d.id,null===f||void 0===f?void 0:f.id,t);else if(!d||!f){var m=n.getNodePath(e.source),y=n.getNodePath(e.target),v=m.reverse().slice(d?0:1).find((function(e){return t.find((function(t){return t.id===e}))})),b=y.reverse().slice(f?0:1).find((function(e){return t.find((function(t){return t.id===e}))}));d=t.find((function(t){return t.id===v})),f=t.find((function(t){return t.id===b})),g=(0,s.getEdges)(null===d||void 0===d?void 0:d.id,null===f||void 0===f?void 0:f.id,t,{v:e.source,w:e.target})}if(p=g.reduce((function(t,e){return o(o([],t,!0),e.points.map((function(t){return i(i({},t),{x:t.x+u[0],y:t.y+u[1]})})),!0)}),[]),p=p.slice(1,-1),e.controlPoints=p,(null===f||void 0===f?void 0:f.type)===s.NodeType.META){var _=r.findIndex((function(t){return t.id===(null===f||void 0===f?void 0:f.id)}));if(!r[_]||(null===(a=r[_].inEdges)||void 0===a?void 0:a.some((function(t){return t.source===d.id&&t.target===f.id}))))return;null===(l=r[_].inEdges)||void 0===l||l.push({source:d.id,target:f.id,controlPoints:p})}if((null===d||void 0===d?void 0:d.type)===s.NodeType.META){_=r.findIndex((function(t){return t.id===(null===d||void 0===d?void 0:d.id)}));if(!r[_]||(null===(c=r[_].outEdges)||void 0===c?void 0:c.some((function(t){return t.source===d.id&&t.target===f.id}))))return;null===(h=r[_].outEdges)||void 0===h||h.push({source:d.id,target:f.id,controlPoints:p})}})))},e.prototype.getType=function(){return"dagreCompound"},e.prototype.getDataByOrder=function(t){return t.every((function(t){return void 0!==t.layoutOrder}))||t.forEach((function(t,e){t.layoutOrder=e})),t.sort((function(t,e){return t.layoutOrder-e.layoutOrder}))},e}(a.Base);e.DagreCompoundLayout=u},"3c43":function(t,e){e.endianness=function(){return"LE"},e.hostname=function(){return"undefined"!==typeof location?location.hostname:""},e.loadavg=function(){return[]},e.uptime=function(){return 0},e.freemem=function(){return Number.MAX_VALUE},e.totalmem=function(){return Number.MAX_VALUE},e.cpus=function(){return[]},e.type=function(){return"Browser"},e.release=function(){return"undefined"!==typeof navigator?navigator.appVersion:""},e.networkInterfaces=e.getNetworkInterfaces=function(){return{}},e.arch=function(){return"javascript"},e.platform=function(){return"browser"},e.tmpdir=e.tmpDir=function(){return"/tmp"},e.EOL="\n",e.homedir=function(){return"/"}},"3cc9":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["pretty","human","error_trace","source","filter_path"],a={errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,scrollId:d,scroll_id:f,...p}=t;p=i(o,a,p,u),null==c&&(c="DELETE");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m=null!=(f||d)?"/_search/scroll/"+encodeURIComponent(f||d):"/_search/scroll";const y={method:c,path:m,body:h||"",querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},"3d1b":function(t,e,n){e=t.exports=n("8b77"),e.Stream=e,e.Readable=e,e.Writable=n("5bc2"),e.Duplex=n("1715"),e.Transform=n("4e92"),e.PassThrough=n("461a")},"3ddc":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("b4ae"),i=function(){function t(t){this.distances=t.distances,this.dimension=t.dimension||2,this.linkDistance=t.linkDistance}return t.prototype.layout=function(){var t=this,e=t.dimension,n=t.distances,i=t.linkDistance;try{var o=r.Matrix.mul(r.Matrix.pow(n,2),-.5),a=o.mean("row"),s=o.mean("column"),l=o.mean();o.add(l).subRowVector(a).subColumnVector(s);var u=new r.SingularValueDecomposition(o),c=r.Matrix.sqrt(u.diagonalMatrix).diagonal();return u.leftSingularVectors.toJSON().map((function(t){return r.Matrix.mul([t],[c]).toJSON()[0].splice(0,e)}))}catch(g){for(var h=[],d=0;d<n.length;d++){var f=Math.random()*i,p=Math.random()*i;h.push([f,p])}return h}},t}();e.default=i},"3e09":function(t,e,n){"use strict";const r=n("f654"),{URL:i}=n("0b16"),o=n("34eb")("elasticsearch"),a=n("d917"),s=()=>{};class l{constructor(t={}){this.connections=new Map,this.dead=[],this.selector=t.selector,this._auth=null,this._ssl=t.ssl,this._agent=t.agent,this.resurrectTimeout=6e4,this.resurrectTimeoutCutoff=5,this.pingTimeout=t.pingTimeout,this.Connection=t.Connection,this.emit=t.emit||s,this._sniffEnabled=t.sniffEnabled||!1;const e=t.resurrectStrategy||"ping";this.resurrectStrategy=l.resurrectStrategies[e],r(null!=this.resurrectStrategy,`Invalid resurrection strategy: '${e}'`)}markAlive(t){if(!1===this._sniffEnabled&&1===this.connections.size)return;const{id:e}=t;o(`Marking as 'alive' connection '${e}'`);const n=this.dead.indexOf(e);n>-1&&this.dead.splice(n,1),t.status=a.statuses.ALIVE,t.deadCount=0,t.resurrectTimeout=0}markDead(t){if(!1===this._sniffEnabled&&1===this.connections.size)return;const{id:e}=t;o(`Marking as 'dead' connection '${e}'`),-1===this.dead.indexOf(e)&&this.dead.push(e),t.status=a.statuses.DEAD,t.deadCount++,t.resurrectTimeout=Date.now()+this.resurrectTimeout*Math.pow(2,Math.min(t.deadCount-1,this.resurrectTimeoutCutoff)),this.dead.sort((t,e)=>{const n=this.connections.get(t),r=this.connections.get(e);return n.resurrectTimeout-r.resurrectTimeout})}resurrect(t,e=s){if(0===this.resurrectStrategy||0===this.dead.length)return o("Nothing to resurrect"),void e(null,null);const n=this.connections.get(this.dead[0]);if((t.now||Date.now())<n.resurrectTimeout)return o("Nothing to resurrect"),void e(null,null);const{id:r}=n;1===this.resurrectStrategy?n.request({method:"HEAD",path:"/",timeout:this.pingTimeout},(i,a)=>{var s=!0;const l=null!==a?a.statusCode:0;null!=i||502===l||503===l||504===l?(o(`Resurrect: connection '${r}' is still dead`),this.markDead(n),s=!1):(o(`Resurrect: connection '${r}' is now alive`),this.markAlive(n)),this.emit("resurrect",null,{strategy:"ping",name:t.name,request:{id:t.requestId},isAlive:s,connection:n}),e(s,n)}):(o(`Resurrect: optimistic resurrection for connection '${r}'`),this.dead.splice(this.dead.indexOf(r),1),n.status=a.statuses.ALIVE,this.emit("resurrect",null,{strategy:"optimistic",name:t.name,request:{id:t.requestId},isAlive:!0,connection:n}),e(!0,n))}getConnection(t={}){const e=t.filter||(()=>!0),n=t.selector||(t=>t[0]),r=[];for(var i of this.connections.values())i.status===a.statuses.ALIVE&&!0===e(i)&&r.push(i);return 0===r.length?null:n(r)}addConnection(t){if(Array.isArray(t))return void t.forEach(t=>this.addConnection(t));"string"===typeof t&&(t=this.urlToHost(t)),""!==t.url.username&&""!==t.url.password&&(this._auth={username:decodeURIComponent(t.url.username),password:decodeURIComponent(t.url.password)},t.auth=this._auth),null!=this._auth&&(null==t.auth||null==t.auth.username&&null==t.auth.password)&&(t.auth=this._auth,t.url.username=this._auth.username,t.url.password=this._auth.password),null==t.ssl&&(t.ssl=this._ssl),null==t.agent&&(t.agent=this._agent);const e=new this.Connection(t);if(o("Adding a new connection",e),this.connections.has(e.id))throw new Error(`Connection with id '${e.id}' is already present`);return this.connections.set(e.id,e),e}removeConnection(t){o("Removing connection",t),t.close(s);const{id:e}=t;this.connections.delete(e);var n=this.dead.indexOf(e);return n>-1&&this.dead.splice(n,1),this}empty(t){o("Emptying the connection pool");var e=this.connections.size;this.connections.forEach(n=>{n.close(()=>{0===--e&&(this.connections=new Map,this.dead=[],t())})})}update(t){o("Updating the connection pool");for(var e=0;e<t.length;e++){const n=t[e];if(!0===this.connections.has(n.id)){o(`The connection with id '${n.id}' is already present`);const t=this.connections.get(n.id);t.status===a.statuses.DEAD&&this.markAlive(t)}else if(!0===this.connections.has(n.url.href)){const t=this.connections.get(n.url.href);this.connections.delete(n.url.href),t.id=n.id,this.connections.set(n.id,t),t.status===a.statuses.DEAD&&this.markAlive(t)}else this.addConnection(n)}const n=t.map(t=>t.id);for(const r of this.connections.values())-1===n.indexOf(r.id)&&this.removeConnection(r);return this}nodesToHost(t,e){const n=Object.keys(t),r=[];for(var o=0,s=n.length;o<s;o++){const s=t[n[o]];var l=s.http.publish_address;const u=l.split("/");if(u.length>1){const t=u[0],e=u[1].match(/((?::))(?:[0-9]+)$/g)[0].slice(1);l=`${t}:${e}`}l="http"===l.slice(0,4)?l:`${e}//${l}`;const c=s.roles.reduce((t,e)=>(t[e]=!0,t),{});r.push({url:new i(l),id:n[o],roles:Object.assign({[a.roles.MASTER]:!1,[a.roles.DATA]:!1,[a.roles.INGEST]:!1,[a.roles.ML]:!1},c)})}return r}urlToHost(t){return{url:new i(t)}}}l.resurrectStrategies={none:0,ping:1,optimistic:2},t.exports=l},"3ee2":function(t,e,n){
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var r=n("b639"),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function a(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=a),a.prototype=Object.create(i.prototype),o(i,a),a.from=function(t,e,n){if("number"===typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},a.alloc=function(t,e,n){if("number"!==typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"===typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},a.allocUnsafe=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return i(t)},a.allocUnsafeSlow=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},"3ef9":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(n("83ad")),i=a(n("9c2f")),o=n("dcfe");function a(t){return t&&t.__esModule?t:{default:t}}var s=function(t,e){var n=[],r=t.nodes,a=void 0===r?[]:r,s=t.edges,l=void 0===s?[]:s;if(0===a.length)return n;var u=a[0],c=new Set;c.add(u);var h=function(t,n){return e?t.weight-n.weight:0},d=new i.default(h);(0,o.getEdgesByNodeId)(u.id,l).forEach((function(t){d.insert(t)}));while(!d.isEmpty()){var f=d.delMin(),p=f.source,g=f.target;c.has(p)&&c.has(g)||(n.push(f),c.has(p)||(c.add(p),(0,o.getEdgesByNodeId)(p,l).forEach((function(t){d.insert(t)}))),c.has(g)||(c.add(g),(0,o.getEdgesByNodeId)(g,l).forEach((function(t){d.insert(t)}))))}return n},l=function(t,e){var n=[],i=t.nodes,o=void 0===i?[]:i,a=t.edges,s=void 0===a?[]:a;if(0===o.length)return n;var l=s.map((function(t){return t}));e&&l.sort((function(t,e){return t.weight-e.weight}));var u=new r.default(o.map((function(t){return t.id})));while(l.length>0){var c=l.shift(),h=c.source,d=c.target;u.connected(h,d)||(n.push(c),u.union(h,d))}return n},u=function(t,e,n){var r={prim:s,kruskal:l};return n?r[n](t,e):l(t,e)},c=u;e.default=c},"3fb5":function(t,e){"function"===typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},"3fed":function(t,e,n){t.exports=n("b19a")},"409d":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["timeout","master_timeout","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["index"]){const t=new n("Missing required parameter: index");return r(t,l)}if(null==t["name"]){const t=new n("Missing required parameter: name");return r(t,l)}if(null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=t["name"]&&null==t["index"]){const t=new n("Missing required parameter of the url: index");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,name:f,...p}=t;p=i(o,a,p,u),null==c&&(c="DELETE");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m=null!=d&&null!=f?"/"+encodeURIComponent(d)+"/_alias/"+encodeURIComponent(f):"/"+encodeURIComponent(d)+"/_aliases/"+encodeURIComponent(f);const y={method:c,path:m,body:"",querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},4237:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.camelize=e.isString=void 0;var r=function(t){return"string"===typeof t};e.isString=r;var i=function(t){var e=Object.create(null);return function(n){var r=e[n];return r||(e[n]=t(n))}},o=/-(\w)/g;e.camelize=i((function(t){return t.replace(o,(function(t,e){return e?e.toUpperCase():""}))}))},"42b4e":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["master_timeout","timeout","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["repository"]){const t=new n("Missing required parameter: repository");return r(t,l)}if(null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,repository:d,...f}=t;f=i(o,a,f,u),null==c&&(c="POST");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g="/_snapshot/"+encodeURIComponent(d)+"/_verify";const m={method:c,path:g,body:"",querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},"42f9":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["local","master_timeout","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,...d}=t;d=i(o,a,d,u),null==c&&(c="GET");var f=s.ignore;"number"===typeof f&&(s.ignore=[f]);var p="";p="/_cluster/pending_tasks";const g={method:c,path:p,body:null,querystring:d};return s.warnings=0===u.length?null:u,e(g,s,l)}}t.exports=r},"431f":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.xmid=t.xmid,this.ymid=t.ymid,this.length=t.length,this.massCenter=t.massCenter||[0,0],this.mass=t.mass||1}return t.prototype.getLength=function(){return this.length},t.prototype.contains=function(t,e){var n=this.length/2;return t<=this.xmid+n&&t>=this.xmid-n&&e<=this.ymid+n&&e>=this.ymid-n},t.prototype.NW=function(){var e=this.xmid-this.length/4,n=this.ymid+this.length/4,r=this.length/2,i={xmid:e,ymid:n,length:r},o=new t(i);return o},t.prototype.NE=function(){var e=this.xmid+this.length/4,n=this.ymid+this.length/4,r=this.length/2,i={xmid:e,ymid:n,length:r},o=new t(i);return o},t.prototype.SW=function(){var e=this.xmid-this.length/4,n=this.ymid-this.length/4,r=this.length/2,i={xmid:e,ymid:n,length:r},o=new t(i);return o},t.prototype.SE=function(){var e=this.xmid+this.length/4,n=this.ymid-this.length/4,r=this.length/2,i={xmid:e,ymid:n,length:r},o=new t(i);return o},t}();e.default=r},"432d":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.slack=e.longestPathWithLayer=e.longestPath=void 0;var r=function(t){var e,n={},r=function(e){var i,o,a=t.node(e);return a?n[e]?a.rank:(n[e]=!0,null===(i=t.outEdges(e))||void 0===i||i.forEach((function(e){var n=r(e.w),i=t.edge(e).minlen,a=n-i;a&&(void 0===o||a<o)&&(o=a)})),o||(o=0),a.rank=o,o):0};null===(e=t.sources())||void 0===e||e.forEach((function(t){return r(t)}))};e.longestPath=r;var i=function(t){var e,n,r={},i=function(e){var o,a,s=t.node(e);return s?r[e]?s.rank:(r[e]=!0,null===(o=t.outEdges(e))||void 0===o||o.forEach((function(e){var n=i(e.w),r=t.edge(e).minlen,o=n-r;o&&(void 0===a||o<a)&&(a=o)})),a||(a=0),(void 0===n||a<n)&&(n=a),s.rank=a,a):0};null===(e=t.sources())||void 0===e||e.forEach((function(e){t.node(e)&&i(e)})),void 0===n&&(n=0);var o={},a=function(e,n){var r,i=t.node(e),s=isNaN(i.layer)?n:i.layer;(void 0===i.rank||i.rank<s)&&(i.rank=s),o[e]||(o[e]=!0,null===(r=t.outEdges(e))||void 0===r||r.map((function(e){a(e.w,s+t.edge(e).minlen)})))};t.nodes().forEach((function(e){var r=t.node(e);r&&(isNaN(r.layer)?r.rank-=n:a(e,r.layer))}))};e.longestPathWithLayer=i;var o=function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen};e.slack=o,e.default={longestPath:r,longestPathWithLayer:i,slack:o}},4332:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["wait_for_active_shards","parent","refresh","routing","timeout","timestamp","ttl","version","version_type","pipeline","pretty","human","error_trace","source","filter_path"],a={waitForActiveShards:"wait_for_active_shards",versionType:"version_type",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["id"]){const t=new n("Missing required parameter: id");return r(t,l)}if(null==t["index"]){const t=new n("Missing required parameter: index");return r(t,l)}if(null==t["type"]){const t=new n("Missing required parameter: type");return r(t,l)}if(null==t["body"]){const t=new n("Missing required parameter: body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,id:d,index:f,type:p,...g}=t;g=i(o,a,g,u),null==c&&(c="PUT");var m=s.ignore;"number"===typeof m&&(s.ignore=[m]);var y="";y="/"+encodeURIComponent(f)+"/"+encodeURIComponent(p)+"/"+encodeURIComponent(d)+"/_create";const v={method:c,path:y,body:h||"",querystring:g};return s.warnings=0===u.length?null:u,e(v,s,l)}}t.exports=r},4365:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n("8707").Buffer,o=n(4);function a(t,e,n){t.copy(e,n)}t.exports=function(){function t(){r(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";var e=this.head,n=""+e.data;while(e=e.next)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return i.alloc(0);var e=i.allocUnsafe(t>>>0),n=this.head,r=0;while(n)a(n.data,e,r),r+=n.data.length,n=n.next;return e},t}(),o&&o.inspect&&o.inspect.custom&&(t.exports.prototype[o.inspect.custom]=function(){var t=o.inspect({length:this.length});return this.constructor.name+" "+t})},"43da":function(t,e){function n(t){return Object.prototype.toString.call(t)}function r(t){return"[object Date]"===n(t)}function i(t){return"[object String]"===n(t)}function o(t){return i(t)&&!isNaN(Date.parse(t))}function a(t){return"number"===typeof t}function s(t){return Date.parse(t)}t.exports={getObjectType:n,isDate:r,isString:i,isDateString:o,parseDateFromString:s,isNumber:a}},4447:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["ignore_unavailable","allow_no_indices","expand_wildcards","local","pretty","human","error_trace","source","filter_path"],a={ignoreUnavailable:"ignore_unavailable",allowNoIndices:"allow_no_indices",expandWildcards:"expand_wildcards",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,name:f,...p}=t;p=i(o,a,p,u),null==c&&(c="HEAD");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m=null!=d&&null!=f?"/"+encodeURIComponent(d)+"/_alias/"+encodeURIComponent(f):"/_alias/"+encodeURIComponent(f);const y={method:c,path:m,body:null,querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},"448a":function(t,e,n){var r=n("2236"),i=n("11b0"),o=n("6613"),a=n("0676");function s(t){return r(t)||i(t)||o(t)||a()}t.exports=s,t.exports.__esModule=!0,t.exports["default"]=t.exports},4499:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["field_data","fielddata","fields","query","ignore_unavailable","allow_no_indices","expand_wildcards","index","recycler","request_cache","request","pretty","human","error_trace","source","filter_path"],a={fieldData:"field_data",ignoreUnavailable:"ignore_unavailable",allowNoIndices:"allow_no_indices",expandWildcards:"expand_wildcards",requestCache:"request_cache",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,...f}=t;f=i(o,a,f,u),null==c&&(c=null==h?"GET":"POST");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g=null!=d?"/"+encodeURIComponent(d)+"/_cache/clear":"/_cache/clear";const m={method:c,path:g,body:"",querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},"455a":function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.ConcentricLayout=void 0;var i=n("f271"),o=n("5bc9"),a=function(t){function e(e){var n=t.call(this)||this;return n.nodeSize=30,n.minNodeSpacing=10,n.nodeSpacing=10,n.preventOverlap=!1,n.equidistant=!1,n.startAngle=1.5*Math.PI,n.clockwise=!0,n.sortBy="degree",n.nodes=[],n.edges=[],n.width=300,n.height=300,n.onLayoutEnd=function(){},n.updateCfg(e),n}return r(e,t),e.prototype.getDefaultCfg=function(){return{nodeSize:30,minNodeSpacing:10,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:1.5*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}},e.prototype.execute=function(){var t,e,n=this,r=n.nodes,o=n.edges,a=r.length;if(0!==a){n.width||"undefined"===typeof window||(n.width=window.innerWidth),n.height||"undefined"===typeof window||(n.height=window.innerHeight),n.center||(n.center=[n.width/2,n.height/2]);var s=n.center;if(1===a)return r[0].x=s[0],r[0].y=s[1],void(null===(e=n.onLayoutEnd)||void 0===e||e.call(n));var l,u=n.nodeSize,c=n.nodeSpacing,h=[],d=0;l=(0,i.isArray)(u)?Math.max(u[0],u[1]):u,(0,i.isArray)(c)?d=Math.max(c[0],c[1]):(0,i.isNumber)(c)&&(d=c),r.forEach((function(t){h.push(t);var e=l;(0,i.isArray)(t.size)?e=Math.max(t.size[0],t.size[1]):(0,i.isNumber)(t.size)?e=t.size:(0,i.isObject)(t.size)&&(e=Math.max(t.size.width,t.size.height)),l=Math.max(l,e),(0,i.isFunction)(c)&&(d=Math.max(c(t),d))})),n.clockwise=void 0!==n.counterclockwise?!n.counterclockwise:n.clockwise;var f={},p={};if(h.forEach((function(t,e){f[t.id]=t,p[t.id]=e})),("degree"===n.sortBy||!(0,i.isString)(n.sortBy)||void 0===h[0][n.sortBy])&&(n.sortBy="degree",!(0,i.isNumber)(r[0].degree))){var g=(0,i.getDegree)(r.length,p,o);h.forEach((function(t,e){t.degree=g[e].all}))}h.sort((function(t,e){return e[n.sortBy]-t[n.sortBy]})),n.maxValueNode=h[0],n.maxLevelDiff=n.maxLevelDiff||n.maxValueNode[n.sortBy]/4;var m=[[]],y=m[0];h.forEach((function(t){if(y.length>0){var e=Math.abs(y[0][n.sortBy]-t[n.sortBy]);n.maxLevelDiff&&e>=n.maxLevelDiff&&(y=[],m.push(y))}y.push(t)}));var v=l+(d||n.minNodeSpacing);if(!n.preventOverlap){var b=m.length>0&&m[0].length>1,_=Math.min(n.width,n.height)/2-v,x=_/(m.length+(b?1:0));v=Math.min(v,x)}var w=0;if(m.forEach((function(t){var e=n.sweep;void 0===e&&(e=2*Math.PI-2*Math.PI/t.length);var r=t.dTheta=e/Math.max(1,t.length-1);if(t.length>1&&n.preventOverlap){var i=Math.cos(r)-Math.cos(0),o=Math.sin(r)-Math.sin(0),a=Math.sqrt(v*v/(i*i+o*o));w=Math.max(a,w)}t.r=w,w+=v})),n.equidistant){for(var S=0,E=0,C=0;C<m.length;C++){var M=m[C],T=M.r-E;S=Math.max(S,T)}E=0,m.forEach((function(t,e){0===e&&(E=t.r),t.r=E,E+=S}))}return m.forEach((function(t){var e=t.dTheta,r=t.r;t.forEach((function(t,i){var o=n.startAngle+(n.clockwise?1:-1)*e*i;t.x=s[0]+r*Math.cos(o),t.y=s[1]+r*Math.sin(o)}))})),n.onLayoutEnd&&n.onLayoutEnd(),{nodes:r,edges:o}}null===(t=n.onLayoutEnd)||void 0===t||t.call(n)},e.prototype.getType=function(){return"concentric"},e}(o.Base);e.ConcentricLayout=a},"461a":function(t,e,n){"use strict";t.exports=o;var r=n("4e92"),i=Object.create(n("3a7c"));function o(t){if(!(this instanceof o))return new o(t);r.call(this,t)}i.inherits=n("3fb5"),i.inherits(o,r),o.prototype._transform=function(t,e,n){n(null,t)}},"470b":function(t,e,n){"use strict";(function(t){var r=n("b639").Buffer,i=n("d485").Transform,o=n("6b75e"),a=n("3022"),s=n("f654").ok,l=n("b639").kMaxLength,u="Cannot create final Buffer. It would be larger than 0x"+l.toString(16)+" bytes";o.Z_MIN_WINDOWBITS=8,o.Z_MAX_WINDOWBITS=15,o.Z_DEFAULT_WINDOWBITS=15,o.Z_MIN_CHUNK=64,o.Z_MAX_CHUNK=1/0,o.Z_DEFAULT_CHUNK=16384,o.Z_MIN_MEMLEVEL=1,o.Z_MAX_MEMLEVEL=9,o.Z_DEFAULT_MEMLEVEL=8,o.Z_MIN_LEVEL=-1,o.Z_MAX_LEVEL=9,o.Z_DEFAULT_LEVEL=o.Z_DEFAULT_COMPRESSION;for(var c=Object.keys(o),h=0;h<c.length;h++){var d=c[h];d.match(/^Z/)&&Object.defineProperty(e,d,{enumerable:!0,value:o[d],writable:!1})}for(var f={Z_OK:o.Z_OK,Z_STREAM_END:o.Z_STREAM_END,Z_NEED_DICT:o.Z_NEED_DICT,Z_ERRNO:o.Z_ERRNO,Z_STREAM_ERROR:o.Z_STREAM_ERROR,Z_DATA_ERROR:o.Z_DATA_ERROR,Z_MEM_ERROR:o.Z_MEM_ERROR,Z_BUF_ERROR:o.Z_BUF_ERROR,Z_VERSION_ERROR:o.Z_VERSION_ERROR},p=Object.keys(f),g=0;g<p.length;g++){var m=p[g];f[f[m]]=m}function y(t,e,n){var i=[],o=0;function a(){var e;while(null!==(e=t.read()))i.push(e),o+=e.length;t.once("readable",a)}function s(e){t.removeListener("end",c),t.removeListener("readable",a),n(e)}function c(){var e,a=null;o>=l?a=new RangeError(u):e=r.concat(i,o),i=[],t.close(),n(a,e)}t.on("error",s),t.on("end",c),t.end(e),a()}function v(t,e){if("string"===typeof e&&(e=r.from(e)),!r.isBuffer(e))throw new TypeError("Not a string or buffer");var n=t._finishFlushFlag;return t._processChunk(e,n)}function b(t){if(!(this instanceof b))return new b(t);T.call(this,t,o.DEFLATE)}function _(t){if(!(this instanceof _))return new _(t);T.call(this,t,o.INFLATE)}function x(t){if(!(this instanceof x))return new x(t);T.call(this,t,o.GZIP)}function w(t){if(!(this instanceof w))return new w(t);T.call(this,t,o.GUNZIP)}function S(t){if(!(this instanceof S))return new S(t);T.call(this,t,o.DEFLATERAW)}function E(t){if(!(this instanceof E))return new E(t);T.call(this,t,o.INFLATERAW)}function C(t){if(!(this instanceof C))return new C(t);T.call(this,t,o.UNZIP)}function M(t){return t===o.Z_NO_FLUSH||t===o.Z_PARTIAL_FLUSH||t===o.Z_SYNC_FLUSH||t===o.Z_FULL_FLUSH||t===o.Z_FINISH||t===o.Z_BLOCK}function T(t,n){var a=this;if(this._opts=t=t||{},this._chunkSize=t.chunkSize||e.Z_DEFAULT_CHUNK,i.call(this,t),t.flush&&!M(t.flush))throw new Error("Invalid flush flag: "+t.flush);if(t.finishFlush&&!M(t.finishFlush))throw new Error("Invalid flush flag: "+t.finishFlush);if(this._flushFlag=t.flush||o.Z_NO_FLUSH,this._finishFlushFlag="undefined"!==typeof t.finishFlush?t.finishFlush:o.Z_FINISH,t.chunkSize&&(t.chunkSize<e.Z_MIN_CHUNK||t.chunkSize>e.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+t.chunkSize);if(t.windowBits&&(t.windowBits<e.Z_MIN_WINDOWBITS||t.windowBits>e.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+t.windowBits);if(t.level&&(t.level<e.Z_MIN_LEVEL||t.level>e.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+t.level);if(t.memLevel&&(t.memLevel<e.Z_MIN_MEMLEVEL||t.memLevel>e.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+t.memLevel);if(t.strategy&&t.strategy!=e.Z_FILTERED&&t.strategy!=e.Z_HUFFMAN_ONLY&&t.strategy!=e.Z_RLE&&t.strategy!=e.Z_FIXED&&t.strategy!=e.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+t.strategy);if(t.dictionary&&!r.isBuffer(t.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new o.Zlib(n);var s=this;this._hadError=!1,this._handle.onerror=function(t,n){A(s),s._hadError=!0;var r=new Error(t);r.errno=n,r.code=e.codes[n],s.emit("error",r)};var l=e.Z_DEFAULT_COMPRESSION;"number"===typeof t.level&&(l=t.level);var u=e.Z_DEFAULT_STRATEGY;"number"===typeof t.strategy&&(u=t.strategy),this._handle.init(t.windowBits||e.Z_DEFAULT_WINDOWBITS,l,t.memLevel||e.Z_DEFAULT_MEMLEVEL,u,t.dictionary),this._buffer=r.allocUnsafe(this._chunkSize),this._offset=0,this._level=l,this._strategy=u,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!a._handle},configurable:!0,enumerable:!0})}function A(e,n){n&&t.nextTick(n),e._handle&&(e._handle.close(),e._handle=null)}function O(t){t.emit("close")}Object.defineProperty(e,"codes",{enumerable:!0,value:Object.freeze(f),writable:!1}),e.Deflate=b,e.Inflate=_,e.Gzip=x,e.Gunzip=w,e.DeflateRaw=S,e.InflateRaw=E,e.Unzip=C,e.createDeflate=function(t){return new b(t)},e.createInflate=function(t){return new _(t)},e.createDeflateRaw=function(t){return new S(t)},e.createInflateRaw=function(t){return new E(t)},e.createGzip=function(t){return new x(t)},e.createGunzip=function(t){return new w(t)},e.createUnzip=function(t){return new C(t)},e.deflate=function(t,e,n){return"function"===typeof e&&(n=e,e={}),y(new b(e),t,n)},e.deflateSync=function(t,e){return v(new b(e),t)},e.gzip=function(t,e,n){return"function"===typeof e&&(n=e,e={}),y(new x(e),t,n)},e.gzipSync=function(t,e){return v(new x(e),t)},e.deflateRaw=function(t,e,n){return"function"===typeof e&&(n=e,e={}),y(new S(e),t,n)},e.deflateRawSync=function(t,e){return v(new S(e),t)},e.unzip=function(t,e,n){return"function"===typeof e&&(n=e,e={}),y(new C(e),t,n)},e.unzipSync=function(t,e){return v(new C(e),t)},e.inflate=function(t,e,n){return"function"===typeof e&&(n=e,e={}),y(new _(e),t,n)},e.inflateSync=function(t,e){return v(new _(e),t)},e.gunzip=function(t,e,n){return"function"===typeof e&&(n=e,e={}),y(new w(e),t,n)},e.gunzipSync=function(t,e){return v(new w(e),t)},e.inflateRaw=function(t,e,n){return"function"===typeof e&&(n=e,e={}),y(new E(e),t,n)},e.inflateRawSync=function(t,e){return v(new E(e),t)},a.inherits(T,i),T.prototype.params=function(n,r,i){if(n<e.Z_MIN_LEVEL||n>e.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+n);if(r!=e.Z_FILTERED&&r!=e.Z_HUFFMAN_ONLY&&r!=e.Z_RLE&&r!=e.Z_FIXED&&r!=e.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+r);if(this._level!==n||this._strategy!==r){var a=this;this.flush(o.Z_SYNC_FLUSH,(function(){s(a._handle,"zlib binding closed"),a._handle.params(n,r),a._hadError||(a._level=n,a._strategy=r,i&&i())}))}else t.nextTick(i)},T.prototype.reset=function(){return s(this._handle,"zlib binding closed"),this._handle.reset()},T.prototype._flush=function(t){this._transform(r.alloc(0),"",t)},T.prototype.flush=function(e,n){var i=this,a=this._writableState;("function"===typeof e||void 0===e&&!n)&&(n=e,e=o.Z_FULL_FLUSH),a.ended?n&&t.nextTick(n):a.ending?n&&this.once("end",n):a.needDrain?n&&this.once("drain",(function(){return i.flush(e,n)})):(this._flushFlag=e,this.write(r.alloc(0),"",n))},T.prototype.close=function(e){A(this,e),t.nextTick(O,this)},T.prototype._transform=function(t,e,n){var i,a=this._writableState,s=a.ending||a.ended,l=s&&(!t||a.length===t.length);return null===t||r.isBuffer(t)?this._handle?(l?i=this._finishFlushFlag:(i=this._flushFlag,t.length>=a.length&&(this._flushFlag=this._opts.flush||o.Z_NO_FLUSH)),void this._processChunk(t,i,n)):n(new Error("zlib binding closed")):n(new Error("invalid input"))},T.prototype._processChunk=function(t,e,n){var i=t&&t.length,o=this._chunkSize-this._offset,a=0,c=this,h="function"===typeof n;if(!h){var d,f=[],p=0;this.on("error",(function(t){d=t})),s(this._handle,"zlib binding closed");do{var g=this._handle.writeSync(e,t,a,i,this._buffer,this._offset,o)}while(!this._hadError&&v(g[0],g[1]));if(this._hadError)throw d;if(p>=l)throw A(this),new RangeError(u);var m=r.concat(f,p);return A(this),m}s(this._handle,"zlib binding closed");var y=this._handle.write(e,t,a,i,this._buffer,this._offset,o);function v(l,u){if(this&&(this.buffer=null,this.callback=null),!c._hadError){var d=o-u;if(s(d>=0,"have should not go down"),d>0){var g=c._buffer.slice(c._offset,c._offset+d);c._offset+=d,h?c.push(g):(f.push(g),p+=g.length)}if((0===u||c._offset>=c._chunkSize)&&(o=c._chunkSize,c._offset=0,c._buffer=r.allocUnsafe(c._chunkSize)),0===u){if(a+=i-l,i=l,!h)return!0;var m=c._handle.write(e,t,a,i,c._buffer,c._offset,c._chunkSize);return m.callback=v,void(m.buffer=t)}if(!h)return!1;n()}}y.buffer=t,y.callback=v},a.inherits(b,T),a.inherits(_,T),a.inherits(x,T),a.inherits(w,T),a.inherits(S,T),a.inherits(E,T),a.inherits(C,T)}).call(this,n("4362"))},4744:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n("e1ff")),o=function(t){var e=function(t){return function(e){var n;return(null===(n=t.edge(e))||void 0===n?void 0:n.weight)||1}},n="greedy"===t.graph().acyclicer?(0,i.default)(t,e(t)):a(t);null===n||void 0===n||n.forEach((function(e){var n=t.edge(e);t.removeEdgeObj(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,"rev-".concat(Math.random()))}))},a=function(t){var e=[],n={},r={},i=function(o){var a;r[o]||(r[o]=!0,n[o]=!0,null===(a=t.outEdges(o))||void 0===a||a.forEach((function(t){n[t.w]?e.push(t):i(t.w)})),delete n[o])};return t.nodes().forEach(i),e},s=function(t){t.edges().forEach((function(e){var n=t.edge(e);if(n.reversed){t.removeEdgeObj(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}}))};e.default={run:o,undo:s}},4799:function(t,e,n){"use strict";n.r(e),n.d(e,"Base",(function(){return c})),n.d(e,"Circle",(function(){return d})),n.d(e,"Ellipse",(function(){return g})),n.d(e,"Image",(function(){return v})),n.d(e,"Line",(function(){return S})),n.d(e,"Marker",(function(){return A})),n.d(e,"Path",(function(){return V})),n.d(e,"Polygon",(function(){return Y})),n.d(e,"Polyline",(function(){return J})),n.d(e,"Rect",(function(){return tt})),n.d(e,"Text",(function(){return nt}));var r={};n.r(r),n.d(r,"Base",(function(){return c})),n.d(r,"Circle",(function(){return d})),n.d(r,"Ellipse",(function(){return g})),n.d(r,"Image",(function(){return v})),n.d(r,"Line",(function(){return S})),n.d(r,"Marker",(function(){return A})),n.d(r,"Path",(function(){return V})),n.d(r,"Polygon",(function(){return Y})),n.d(r,"Polyline",(function(){return J})),n.d(r,"Rect",(function(){return tt})),n.d(r,"Text",(function(){return nt}));var i=n("9ab4"),o=n("6855"),a=n("7326"),s=n("f5e5"),l=n("c2ad"),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i["__extends"])(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Object(i["__assign"])(Object(i["__assign"])({},e),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.getShapeBase=function(){return r},e.prototype.getGroupBase=function(){return l["a"]},e.prototype.onCanvasChange=function(t){Object(s["h"])(this,t)},e.prototype.calculateBBox=function(){var t=this.get("type"),e=this.getHitLineWidth(),n=Object(o["getBBoxMethod"])(t),r=n(this),i=e/2,a=r.x-i,s=r.y-i,l=r.x+r.width+i,u=r.y+r.height+i;return{x:a,minX:a,y:s,minY:s,width:r.width+e,height:r.height+e,maxX:l,maxY:u}},e.prototype.isFill=function(){return!!this.attrs["fill"]||this.isClipShape()},e.prototype.isStroke=function(){return!!this.attrs["stroke"]},e.prototype._applyClip=function(t,e){e&&(t.save(),Object(s["a"])(t,e),e.createPath(t),t.restore(),t.clip(),e._afterDraw())},e.prototype.draw=function(t,e){var n=this.cfg.clipShape;if(e){if(!1===this.cfg.refresh)return void this.set("hasChanged",!1);var r=this.getCanvasBBox();if(!Object(a["f"])(e,r))return this.set("hasChanged",!1),void(this.cfg.isInView&&this._afterDraw())}t.save(),Object(s["a"])(t,this),this._applyClip(t,n),this.drawPath(t),t.restore(),this._afterDraw()},e.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},e.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var e=this.getCanvasBBox(),n=Object(a["f"])(e,t);this.set("isInView",n),n?this.set("cacheCanvasBBox",e):this.set("cacheCanvasBBox",null)}},e.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},e.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},e.prototype.fill=function(t){t.fill()},e.prototype.stroke=function(t){t.stroke()},e.prototype.strokeAndFill=function(t){var e=this.attrs,n=e.lineWidth,r=e.opacity,i=e.strokeOpacity,o=e.fillOpacity;this.isFill()&&(Object(a["i"])(o)||1===o?this.fill(t):(t.globalAlpha=o,this.fill(t),t.globalAlpha=r)),this.isStroke()&&n>0&&(Object(a["i"])(i)||1===i||(t.globalAlpha=i),this.stroke(t)),this.afterDrawPath(t)},e.prototype.createPath=function(t){},e.prototype.afterDrawPath=function(t){},e.prototype.isInShape=function(t,e){var n=this.isStroke(),r=this.isFill(),i=this.getHitLineWidth();return this.isInStrokeOrPath(t,e,n,r,i)},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){return!1},e.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t["lineWidth"]+t["lineAppendWidth"]},e}(o["AbstractShape"]),c=u,h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i["__extends"])(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Object(i["__assign"])(Object(i["__assign"])({},e),{x:0,y:0,r:0})},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.attr(),s=o.x,l=o.y,u=o.r,c=i/2,h=Object(a["b"])(s,l,t,e);return r&&n?h<=u+c:r?h<=u:!!n&&(h>=u-c&&h<=u+c)},e.prototype.createPath=function(t){var e=this.attr(),n=e.x,r=e.y,i=e.r;t.beginPath(),t.arc(n,r,i,0,2*Math.PI,!1),t.closePath()},e}(c),d=h;function f(t,e,n,r){return t/(n*n)+e/(r*r)}var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i["__extends"])(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Object(i["__assign"])(Object(i["__assign"])({},e),{x:0,y:0,rx:0,ry:0})},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.attr(),a=i/2,s=o.x,l=o.y,u=o.rx,c=o.ry,h=(t-s)*(t-s),d=(e-l)*(e-l);return r&&n?f(h,d,u+a,c+a)<=1:r?f(h,d,u,c)<=1:!!n&&(f(h,d,u-a,c-a)>=1&&f(h,d,u+a,c+a)<=1)},e.prototype.createPath=function(t){var e=this.attr(),n=e.x,r=e.y,i=e.rx,o=e.ry;if(t.beginPath(),t.ellipse)t.ellipse(n,r,i,o,0,0,2*Math.PI,!1);else{var a=i>o?i:o,s=i>o?1:i/o,l=i>o?o/i:1;t.save(),t.translate(n,r),t.scale(s,l),t.arc(0,0,a,0,2*Math.PI),t.restore(),t.closePath()}},e}(c),g=p;function m(t){return t instanceof HTMLElement&&Object(a["k"])(t.nodeName)&&"CANVAS"===t.nodeName.toUpperCase()}var y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i["__extends"])(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Object(i["__assign"])(Object(i["__assign"])({},e),{x:0,y:0,width:0,height:0})},e.prototype.initAttrs=function(t){this._setImage(t.img)},e.prototype.isStroke=function(){return!1},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._afterLoading=function(){if(!0===this.get("toDraw")){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},e.prototype._setImage=function(t){var e=this,n=this.attrs;if(Object(a["k"])(t)){var r=new Image;r.onload=function(){if(e.destroyed)return!1;e.attr("img",r),e.set("loading",!1),e._afterLoading();var t=e.get("callback");t&&t.call(e)},r.crossOrigin="Anonymous",r.src=t,this.set("loading",!0)}else t instanceof Image?(n.width||(n.width=t.width),n.height||(n.height=t.height)):m(t)&&(n.width||(n.width=Number(t.getAttribute("width"))),n.height||(n.height,Number(t.getAttribute("height"))))},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),"img"===e&&this._setImage(n)},e.prototype.createPath=function(t){if(this.get("loading"))return this.set("toDraw",!0),void this.set("context",t);var e=this.attr(),n=e.x,r=e.y,i=e.width,o=e.height,s=e.sx,l=e.sy,u=e.swidth,c=e.sheight,h=e.img;(h instanceof Image||m(h))&&(Object(a["i"])(s)||Object(a["i"])(l)||Object(a["i"])(u)||Object(a["i"])(c)?t.drawImage(h,n,r,i,o):t.drawImage(h,s,l,u,c,n,r,i,o))},e}(c),v=y,b=n("1183");function _(t,e,n,r,i,o,a){var s=Math.min(t,n),l=Math.max(t,n),u=Math.min(e,r),c=Math.max(e,r),h=i/2;return o>=s-h&&o<=l+h&&a>=u-h&&a<=c+h&&b["c"].pointToLine(t,e,n,r,o,a)<=i/2}var x=n("9f27"),w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i["__extends"])(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Object(i["__assign"])(Object(i["__assign"])({},e),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),this.setArrow()},e.prototype.setArrow=function(){var t=this.attr(),e=t.x1,n=t.y1,r=t.x2,i=t.y2,o=t.startArrow,a=t.endArrow;o&&x["b"](this,t,r,i,e,n),a&&x["a"](this,t,e,n,r,i)},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){if(!n||!i)return!1;var o=this.attr(),a=o.x1,s=o.y1,l=o.x2,u=o.y2;return _(a,s,l,u,i,t,e)},e.prototype.createPath=function(t){var e=this.attr(),n=e.x1,r=e.y1,i=e.x2,o=e.y2,a=e.startArrow,s=e.endArrow,l={dx:0,dy:0},u={dx:0,dy:0};a&&a.d&&(l=x["c"](n,r,i,o,e.startArrow.d)),s&&s.d&&(u=x["c"](n,r,i,o,e.endArrow.d)),t.beginPath(),t.moveTo(n+l.dx,r+l.dy),t.lineTo(i-u.dx,o-u.dy)},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr(),e=t.x1,n=t.y1,r=t.x2,i=t.y2;return b["c"].length(e,n,r,i)},e.prototype.getPoint=function(t){var e=this.attr(),n=e.x1,r=e.y1,i=e.x2,o=e.y2;return b["c"].pointAt(n,r,i,o,t)},e}(c),S=w,E=n("8937"),C=n("2ef1"),M={circle:function(t,e,n){return[["M",t-n,e],["A",n,n,0,1,0,t+n,e],["A",n,n,0,1,0,t-n,e]]},square:function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]},diamond:function(t,e,n){return[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]},triangle:function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["Z"]]},"triangle-down":function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]}},T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i["__extends"])(e,t),e.prototype.initAttrs=function(t){this._resetParamsCache()},e.prototype._resetParamsCache=function(){this.set("paramsCache",{})},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),-1!==["symbol","x","y","r","radius"].indexOf(e)&&this._resetParamsCache()},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._getR=function(t){return Object(E["isNil"])(t.r)?t.radius:t.r},e.prototype._getPath=function(){var t,n,r=this.attr(),i=r.x,o=r.y,s=r.symbol||"circle",l=this._getR(r);if(Object(a["h"])(s))t=s,n=t(i,o,l),n=Object(C["c"])(n);else{if(t=e.Symbols[s],!t)return console.warn(s+" marker is not supported."),null;n=t(i,o,l)}return n},e.prototype.createPath=function(t){var e=this._getPath(),n=this.get("paramsCache");Object(s["e"])(this,t,{path:e},n)},e.Symbols=M,e}(c),A=T;function O(t,e,n){var r=Object(o["getOffScreenContext"])();return t.createPath(r),r.isPointInPath(e,n)}var k=1e-6;function I(t){return Math.abs(t)<k?0:t<0?-1:1}function P(t,e,n){return(n[0]-t[0])*(e[1]-t[1])===(e[0]-t[0])*(n[1]-t[1])&&Math.min(t[0],e[0])<=n[0]&&n[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=n[1]&&n[1]<=Math.max(t[1],e[1])}function L(t,e,n){var r=!1,i=t.length;if(i<=2)return!1;for(var o=0;o<i;o++){var a=t[o],s=t[(o+1)%i];if(P(a,s,[e,n]))return!0;I(a[1]-n)>0!==I(s[1]-n)>0&&I(e-(n-a[1])*(a[0]-s[0])/(a[1]-s[1])-a[0])<0&&(r=!r)}return r}var N=n("e897"),R=n("9fe7");function D(t,e,n,r,i,o,s,l){var u=(Math.atan2(l-e,s-t)+2*Math.PI)%(2*Math.PI);if(u<r||u>i)return!1;var c={x:t+n*Math.cos(u),y:e+n*Math.sin(u)};return Object(a["b"])(c.x,c.y,s,l)<=o/2}var F=N["a"].transform;function j(t){for(var e=!1,n=t.length,r=0;r<n;r++){var i=t[r],o=i[0];if("C"===o||"A"===o||"Q"===o){e=!0;break}}return e}function B(t,e,n,r,i){for(var o=!1,s=e/2,l=0;l<t.length;l++){var u=t[l],c=u.currentPoint,h=u.params,d=u.prePoint,f=u.box;if(!f||Object(a["e"])(f.x-s,f.y-s,f.width+e,f.height+e,n,r)){switch(u.command){case"L":case"Z":o=_(d[0],d[1],c[0],c[1],e,n,r);break;case"Q":var p=b["e"].pointDistance(d[0],d[1],h[1],h[2],h[3],h[4],n,r);o=p<=e/2;break;case"C":var g=b["b"].pointDistance(d[0],d[1],h[1],h[2],h[3],h[4],h[5],h[6],n,r,i);o=g<=e/2;break;case"A":var m=u.arcParams,y=m.cx,v=m.cy,x=m.rx,w=m.ry,S=m.startAngle,E=m.endAngle,C=m.xRotation,M=[n,r,1],T=x>w?x:w,A=x>w?1:x/w,O=x>w?w/x:1,k=F(null,[["t",-y,-v],["r",-C],["s",1/A,1/O]]);R["transformMat3"](M,M,k),o=D(0,0,T,S,E,e,M[0],M[1]);break;default:break}if(o)break}}return o}function z(t){for(var e=t.length,n=[],r=[],i=[],o=0;o<e;o++){var a=t[o],s=a[0];"M"===s?(i.length&&(r.push(i),i=[]),i.push([a[1],a[2]])):"Z"===s?i.length&&(n.push(i),i=[]):i.push([a[1],a[2]])}return i.length>0&&r.push(i),{polygons:n,polylines:r}}var U=Object(i["__assign"])({hasArc:j,extractPolygons:z,isPointInStroke:B},o["PathUtil"]);function G(t,e,n){for(var r=!1,i=0;i<t.length;i++){var o=t[i];if(r=L(o,e,n),r)break}return r}var q=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i["__extends"])(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Object(i["__assign"])(Object(i["__assign"])({},e),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),"path"===e&&this._setPathArr(n),this.setArrow()},e.prototype._setPathArr=function(t){this.attrs.path=Object(C["c"])(t);var e=U.hasArc(t);this.set("hasArc",e),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},e.prototype.getSegments=function(){var t=this.get("segements");return t||(t=Object(C["d"])(this.attr("path")),this.set("segments",t)),t},e.prototype.setArrow=function(){var t=this.attr(),e=t.startArrow,n=t.endArrow;if(e){var r=this.getStartTangent();x["b"](this,t,r[0][0],r[0][1],r[1][0],r[1][1])}if(n){r=this.getEndTangent();x["a"](this,t,r[0][0],r[0][1],r[1][0],r[1][1])}},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.getSegments(),a=this.get("hasArc"),s=!1;if(n){var l=this.getTotalLength();s=U.isPointInStroke(o,i,t,e,l)}if(!s&&r)if(a)s=O(this,t,e);else{var u=this.attr("path"),c=U.extractPolygons(u);s=G(c.polygons,t,e)||G(c.polylines,t,e)}return s},e.prototype.createPath=function(t){var e=this.attr(),n=this.get("paramsCache");Object(s["e"])(this,t,e,n)},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.get("totalLength");return Object(E["isNil"])(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},e.prototype.getPoint=function(t){var e,n,r=this.get("tCache");r||(this._calculateCurve(),this._setTcache(),r=this.get("tCache"));var i=this.get("curve");if(!r||0===r.length)return i?{x:i[0][1],y:i[0][2]}:null;Object(E["each"])(r,(function(r,i){t>=r[0]&&t<=r[1]&&(e=(t-r[0])/(r[1]-r[0]),n=i)}));var o=i[n];if(Object(E["isNil"])(o)||Object(E["isNil"])(n))return null;var a=o.length,s=i[n+1];return b["b"].pointAt(o[a-2],o[a-1],s[1],s[2],s[3],s[4],s[5],s[6],e)},e.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",U.pathToCurve(t))},e.prototype._setTcache=function(){var t,e,n,r,i=0,o=0,a=[],s=this.get("curve");s&&(Object(E["each"])(s,(function(t,e){n=s[e+1],r=t.length,n&&(i+=b["b"].length(t[r-2],t[r-1],n[1],n[2],n[3],n[4],n[5],n[6])||0)})),this.set("totalLength",i),0!==i?(Object(E["each"])(s,(function(l,u){n=s[u+1],r=l.length,n&&(t=[],t[0]=o/i,e=b["b"].length(l[r-2],l[r-1],n[1],n[2],n[3],n[4],n[5],n[6]),o+=e||0,t[1]=o/i,a.push(t))})),this.set("tCache",a)):this.set("tCache",[]))},e.prototype.getStartTangent=function(){var t,e=this.getSegments();if(e.length>1){var n=e[0].currentPoint,r=e[1].currentPoint,i=e[1].startTangent;t=[],i?(t.push([n[0]-i[0],n[1]-i[1]]),t.push([n[0],n[1]])):(t.push([r[0],r[1]]),t.push([n[0],n[1]]))}return t},e.prototype.getEndTangent=function(){var t,e=this.getSegments(),n=e.length;if(n>1){var r=e[n-2].currentPoint,i=e[n-1].currentPoint,o=e[n-1].endTangent;t=[],o?(t.push([i[0]-o[0],i[1]-o[1]]),t.push([i[0],i[1]])):(t.push([r[0],r[1]]),t.push([i[0],i[1]]))}return t},e}(c),V=q;function H(t,e,n,r,i){var o=t.length;if(o<2)return!1;for(var a=0;a<o-1;a++){var s=t[a][0],l=t[a][1],u=t[a+1][0],c=t[a+1][1];if(_(s,l,u,c,e,n,r))return!0}if(i){var h=t[0],d=t[o-1];if(_(h[0],h[1],d[0],d[1],e,n,r))return!0}return!1}var W=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i["__extends"])(e,t),e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.attr().points,a=!1;return n&&(a=H(o,i,t,e,!0)),!a&&r&&(a=L(o,t,e)),a},e.prototype.createPath=function(t){var e=this.attr(),n=e.points;if(!(n.length<2)){t.beginPath();for(var r=0;r<n.length;r++){var i=n[r];0===r?t.moveTo(i[0],i[1]):t.lineTo(i[0],i[1])}t.closePath()}},e}(c),Y=W,X=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i["__extends"])(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Object(i["__assign"])(Object(i["__assign"])({},e),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),this.setArrow(),-1!==["points"].indexOf(e)&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.setArrow=function(){var t=this.attr(),e=this.attrs,n=e.points,r=e.startArrow,i=e.endArrow,o=n.length,a=n[0][0],s=n[0][1],l=n[o-1][0],u=n[o-1][1];r&&x["b"](this,t,n[1][0],n[1][1],a,s),i&&x["a"](this,t,n[o-2][0],n[o-2][1],l,u)},e.prototype.isFill=function(){return!1},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){if(!n||!i)return!1;var o=this.attr().points;return H(o,i,t,e,!1)},e.prototype.isStroke=function(){return!0},e.prototype.createPath=function(t){var e=this.attr(),n=e.points,r=e.startArrow,i=e.endArrow,o=n.length;if(!(n.length<2)){var a=n[0][0],s=n[0][1],l=n[o-1][0],u=n[o-1][1];if(r&&r.d){var c=x["c"](a,s,n[1][0],n[1][1],r.d);a+=c.dx,s+=c.dy}if(i&&i.d){c=x["c"](n[o-2][0],n[o-2][1],l,u,i.d);l-=c.dx,u-=c.dy}t.beginPath(),t.moveTo(a,s);for(var h=0;h<o-1;h++){var d=n[h];t.lineTo(d[0],d[1])}t.lineTo(l,u)}},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr().points,e=this.get("totalLength");return Object(E["isNil"])(e)?(this.set("totalLength",b["d"].length(t)),this.get("totalLength")):e},e.prototype.getPoint=function(t){var e,n,r=this.attr().points,i=this.get("tCache");return i||(this._setTcache(),i=this.get("tCache")),Object(E["each"])(i,(function(r,i){t>=r[0]&&t<=r[1]&&(e=(t-r[0])/(r[1]-r[0]),n=i)})),b["c"].pointAt(r[n][0],r[n][1],r[n+1][0],r[n+1][1],e)},e.prototype._setTcache=function(){var t=this.attr().points;if(t&&0!==t.length){var e=this.getTotalLength();if(!(e<=0)){var n,r,i=0,o=[];Object(E["each"])(t,(function(a,s){t[s+1]&&(n=[],n[0]=i/e,r=b["c"].length(a[0],a[1],t[s+1][0],t[s+1][1]),i+=r,n[1]=i/e,o.push(n))})),this.set("tCache",o)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},e.prototype.getEndTangent=function(){var t=this.attr().points,e=t.length-1,n=[];return n.push([t[e-1][0],t[e-1][1]]),n.push([t[e][0],t[e][1]]),n},e}(c),J=X,Z=n("af40");function K(t,e,n,r,i,o,s){var l=i/2;return Object(a["e"])(t-l,e-l,n,i,o,s)||Object(a["e"])(t+n-l,e-l,i,r,o,s)||Object(a["e"])(t+l,e+r-l,n,i,o,s)||Object(a["e"])(t-l,e+l,i,r,o,s)}function Q(t,e,n,r,i,o,a,s){return _(t+i,e,t+n-i,e,o,a,s)||_(t+n,e+i,t+n,e+r-i,o,a,s)||_(t+n-i,e+r,t+i,e+r,o,a,s)||_(t,e+r-i,t,e+i,o,a,s)||D(t+n-i,e+i,i,1.5*Math.PI,2*Math.PI,o,a,s)||D(t+n-i,e+r-i,i,0,.5*Math.PI,o,a,s)||D(t+i,e+r-i,i,.5*Math.PI,Math.PI,o,a,s)||D(t+i,e+i,i,Math.PI,1.5*Math.PI,o,a,s)}var $=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i["__extends"])(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Object(i["__assign"])(Object(i["__assign"])({},e),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.attr(),s=o.x,l=o.y,u=o.width,c=o.height,h=o.radius;if(h){var d=!1;return n&&(d=Q(s,l,u,c,h,i,t,e)),!d&&r&&(d=O(this,t,e)),d}var f=i/2;return r&&n?Object(a["e"])(s-f,l-f,u+f,c+f,t,e):r?Object(a["e"])(s,l,u,c,t,e):n?K(s,l,u,c,i,t,e):void 0},e.prototype.createPath=function(t){var e=this.attr(),n=e.x,r=e.y,i=e.width,o=e.height,a=e.radius;if(t.beginPath(),0===a)t.rect(n,r,i,o);else{var s=Object(Z["a"])(a),l=s[0],u=s[1],c=s[2],h=s[3];t.moveTo(n+l,r),t.lineTo(n+i-u,r),0!==u&&t.arc(n+i-u,r+u,u,-Math.PI/2,0),t.lineTo(n+i,r+o-c),0!==c&&t.arc(n+i-c,r+o-c,c,0,Math.PI/2),t.lineTo(n+h,r+o),0!==h&&t.arc(n+h,r+o-h,h,Math.PI/2,Math.PI),t.lineTo(n,r+l),0!==l&&t.arc(n+l,r+l,l,Math.PI,1.5*Math.PI),t.closePath()}},e}(c),tt=$,et=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i["__extends"])(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Object(i["__assign"])(Object(i["__assign"])({},e),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.isOnlyHitBox=function(){return!0},e.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},e.prototype._assembleFont=function(){var t=this.attrs;t.font=Object(o["assembleFont"])(t)},e.prototype._setText=function(t){var e=null;Object(a["k"])(t)&&-1!==t.indexOf("\n")&&(e=t.split("\n")),this.set("textArr",e)},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),e.startsWith("font")&&this._assembleFont(),"text"===e&&this._setText(n)},e.prototype._getSpaceingY=function(){var t=this.attrs,e=t.lineHeight,n=1*t.fontSize;return e?e-n:.14*n},e.prototype._drawTextArr=function(t,e,n){var r,i=this.attrs,s=i.textBaseline,l=i.x,u=i.y,c=1*i.fontSize,h=this._getSpaceingY(),d=Object(o["getTextHeight"])(i.text,i.fontSize,i.lineHeight);Object(a["c"])(e,(function(e,i){r=u+i*(h+c)-d+c,"middle"===s&&(r+=d-c-(d-c)/2),"top"===s&&(r+=d-c),Object(a["i"])(e)||(n?t.fillText(e,l,r):t.strokeText(e,l,r))}))},e.prototype._drawText=function(t,e){var n=this.attr(),r=n.x,i=n.y,o=this.get("textArr");if(o)this._drawTextArr(t,o,e);else{var s=n.text;Object(a["i"])(s)||(e?t.fillText(s,r,i):t.strokeText(s,r,i))}},e.prototype.strokeAndFill=function(t){var e=this.attrs,n=e.lineWidth,r=e.opacity,i=e.strokeOpacity,o=e.fillOpacity;this.isStroke()&&n>0&&(Object(a["i"])(i)||1===i||(t.globalAlpha=r),this.stroke(t)),this.isFill()&&(Object(a["i"])(o)||1===o?this.fill(t):(t.globalAlpha=o,this.fill(t),t.globalAlpha=r)),this.afterDrawPath(t)},e.prototype.fill=function(t){this._drawText(t,!0)},e.prototype.stroke=function(t){this._drawText(t,!1)},e}(c),nt=et},"47eb":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.exchangeEdges=e.enterEdge=e.leaveEdge=e.initLowLimValues=e.calcCutValue=e.initCutValues=void 0;var r=n("ef9c"),i=n("432d"),o=n("7908"),a=n("1de0"),s=a.algorithm.preorder,l=a.algorithm.postorder,u=function(t){var n=(0,o.simplify)(t);(0,i.longestPath)(n);var a,s,l=(0,r.feasibleTree)(n);(0,e.initLowLimValues)(l),(0,e.initCutValues)(l,n);while(a=(0,e.leaveEdge)(l))s=(0,e.enterEdge)(l,n,a),(0,e.exchangeEdges)(l,n,a,s)},c=function(t,e){var n=l(t,t.nodes());n=null===n||void 0===n?void 0:n.slice(0,(null===n||void 0===n?void 0:n.length)-1),null===n||void 0===n||n.forEach((function(n){h(t,e,n)}))};e.initCutValues=c;var h=function(t,n,r){var i=t.node(r),o=i.parent;t.edgeFromArgs(r,o).cutvalue=(0,e.calcCutValue)(t,n,r)},d=function(t,e,n){var r,i=t.node(n),o=i.parent,a=!0,s=e.edgeFromArgs(n,o),l=0;return s||(a=!1,s=e.edgeFromArgs(o,n)),l=s.weight,null===(r=e.nodeEdges(n))||void 0===r||r.forEach((function(r){var i=r.v===n,s=i?r.w:r.v;if(s!==o){var u=i===a,c=e.edge(r).weight;if(l+=u?c:-c,b(t,n,s)){var h=t.edgeFromArgs(n,s).cutvalue;l+=u?-h:h}}})),l};e.calcCutValue=d;var f=function(t,e){void 0===e&&(e=t.nodes()[0]),p(t,{},1,e)};e.initLowLimValues=f;var p=function(t,e,n,r,i){var o,a=n,s=n,l=t.node(r);return e[r]=!0,null===(o=t.neighbors(r))||void 0===o||o.forEach((function(n){e[n]||(s=p(t,e,s,n,r))})),l.low=a,l.lim=s++,i?l.parent=i:delete l.parent,s},g=function(t){return t.edges().find((function(e){return t.edge(e).cutvalue<0}))};e.leaveEdge=g;var m=function(t,e,n){var r=n.v,a=n.w;e.hasEdge(r,a)||(r=n.w,a=n.v);var s=t.node(r),l=t.node(a),u=s,c=!1;s.lim>l.lim&&(u=l,c=!0);var h=e.edges().filter((function(e){return c===_(t,t.node(e.v),u)&&c!==_(t,t.node(e.w),u)}));return(0,o.minBy)(h,(function(t){return(0,i.slack)(e,t)}))};e.enterEdge=m;var y=function(t,n,r,i){var o=r.v,a=r.w;t.removeEdge(o,a),t.setEdge(i.v,i.w,{}),(0,e.initLowLimValues)(t),(0,e.initCutValues)(t,n),v(t,n)};e.exchangeEdges=y;var v=function(t,e){var n=t.nodes().find((function(t){var n;return!(null===(n=e.node(t))||void 0===n?void 0:n.parent)})),r=s(t,n);r=null===r||void 0===r?void 0:r.slice(1),null===r||void 0===r||r.forEach((function(n){var r=t.node(n).parent,i=e.edgeFromArgs(n,r),o=!1;i||(i=e.edgeFromArgs(r,n),o=!0),e.node(n).rank=e.node(r).rank+(o?i.minlen:-i.minlen)}))},b=function(t,e,n){return t.hasEdge(e,n)},_=function(t,e,n){return n.low<=e.lim&&e.lim<=n.lim};e.default=u},"47f3":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["analyzer","analyze_wildcard","default_operator","df","explain","stored_fields","docvalue_fields","fielddata_fields","from","ignore_unavailable","allow_no_indices","expand_wildcards","lenient","preference","q","routing","scroll","search_type","size","sort","_source","_source_exclude","_source_include","terminate_after","stats","suggest_field","suggest_mode","suggest_size","suggest_text","timeout","track_scores","typed_keys","version","request_cache","batched_reduce_size","max_concurrent_shard_requests","pre_filter_shard_size","pretty","human","error_trace","source","filter_path"],a={analyzeWildcard:"analyze_wildcard",defaultOperator:"default_operator",storedFields:"stored_fields",docvalueFields:"docvalue_fields",fielddataFields:"fielddata_fields",ignoreUnavailable:"ignore_unavailable",allowNoIndices:"allow_no_indices",expandWildcards:"expand_wildcards",searchType:"search_type",_sourceExclude:"_source_exclude",_sourceInclude:"_source_include",terminateAfter:"terminate_after",suggestField:"suggest_field",suggestMode:"suggest_mode",suggestSize:"suggest_size",suggestText:"suggest_text",trackScores:"track_scores",typedKeys:"typed_keys",requestCache:"request_cache",batchedReduceSize:"batched_reduce_size",maxConcurrentShardRequests:"max_concurrent_shard_requests",preFilterShardSize:"pre_filter_shard_size",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t["type"]&&null==t["index"]){const t=new n("Missing required parameter of the url: index");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,type:f,...p}=t;p=i(o,a,p,u),null==c&&(c=null==h?"GET":"POST");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m=null!=d&&null!=f?"/"+encodeURIComponent(d)+"/"+encodeURIComponent(f)+"/_search":null!=d?"/"+encodeURIComponent(d)+"/_search":"/_search";const y={method:c,path:m,body:h||"",querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},"4b03":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toNumber=e.isNaN=e.isNumber=void 0;var r=function(t){return"number"===typeof t};e.isNumber=r;var i=function(t){return Number.isNaN(Number(t))};e.isNaN=i;var o=function(t){var n=parseFloat(t);return(0,e.isNaN)(n)?t:n};e.toNumber=o},"4b3a":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["timeout","master_timeout","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["index"]){const t=new n("Missing required parameter: index");return r(t,l)}if(null==t["name"]){const t=new n("Missing required parameter: name");return r(t,l)}if(null!=t["name"]&&null==t["index"]){const t=new n("Missing required parameter of the url: index");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,name:f,...p}=t;p=i(o,a,p,u),null==c&&(c="PUT");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m=null!=d&&null!=f?"/"+encodeURIComponent(d)+"/_alias/"+encodeURIComponent(f):"/"+encodeURIComponent(d)+"/_aliases/"+encodeURIComponent(f);const y={method:c,path:m,body:h||"",querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},"4d1a":function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n("ccb2"),e)},"4da8":function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.RandomLayout=void 0;var i=n("5bc9"),o=function(t){function e(e){var n=t.call(this)||this;return n.center=[0,0],n.width=300,n.height=300,n.nodes=[],n.edges=[],n.onLayoutEnd=function(){},n.updateCfg(e),n}return r(e,t),e.prototype.getDefaultCfg=function(){return{center:[0,0],width:300,height:300}},e.prototype.execute=function(){var t=this,e=t.nodes,n=.9,r=t.center;return t.width||"undefined"===typeof window||(t.width=window.innerWidth),t.height||"undefined"===typeof window||(t.height=window.innerHeight),e&&e.forEach((function(e){e.x=(Math.random()-.5)*n*t.width+r[0],e.y=(Math.random()-.5)*n*t.height+r[1]})),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:this.edges}},e.prototype.getType=function(){return"random"},e}(i.Base);e.RandomLayout=o},"4dc6":function(t,e,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},"4dde":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["format","local","master_timeout","h","help","s","v","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,...d}=t;d=i(o,a,d,u),null==c&&(c="GET");var f=s.ignore;"number"===typeof f&&(s.ignore=[f]);var p="";p="/_cat/nodeattrs";const g={method:c,path:p,body:null,querystring:d};return s.warnings=0===u.length?null:u,e(g,s,l)}}t.exports=r},"4e2a":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Layouts=e.Layout=void 0;var r=n("7049"),i=n("9a24"),o=n("4da8"),a=n("8b72"),s=n("aac1"),l=n("4d1a"),u=n("7c66"),c=n("13d2e"),h=n("634b"),d=n("455a"),f=n("82cc"),p=n("fa97"),g=n("077d"),m=n("0376"),y=n("c7ea"),v=n("7d0a"),b=n("0717"),_=n("927c"),x=n("3c0e"),w=n("f271"),S=function(){function t(t){var e=(0,r.getLayoutByName)(t.type);this.layoutInstance=new e(t)}return t.prototype.layout=function(t){return this.layoutInstance.layout(t)},t.prototype.updateCfg=function(t){this.layoutInstance.updateCfg(t)},t.prototype.init=function(t){this.correctLayers(t.nodes),this.layoutInstance.init(t)},t.prototype.correctLayers=function(t){if(null===t||void 0===t?void 0:t.length){var e=1/0,n=[];if(t.forEach((function(t){(0,w.isString)(t.layer)&&(t.layer=parseInt(t.layer,10)),void 0===t.layer||isNaN(t.layer)||(n.push(t),t.layer<e&&(e=t.layer))})),e<=0){var r=Math.abs(e)+1;n.forEach((function(t){return t.layer+=r}))}}},t.prototype.execute=function(){this.layoutInstance.execute()},t.prototype.getDefaultCfg=function(){return this.layoutInstance.getDefaultCfg()},t.prototype.destroy=function(){return this.layoutInstance.destroy()},t}();e.Layout=S,e.Layouts={force:l.ForceLayout,fruchterman:p.FruchtermanLayout,forceAtlas2:b.ForceAtlas2Layout,gForce:s.GForceLayout,force2:a.Force2Layout,dagre:c.DagreLayout,dagreCompound:x.DagreCompoundLayout,circular:u.CircularLayout,radial:h.RadialLayout,concentric:d.ConcentricLayout,grid:i.GridLayout,mds:f.MDSLayout,comboForce:y.ComboForceLayout,comboCombined:v.ComboCombinedLayout,random:o.RandomLayout,"gForce-gpu":m.GForceGPULayout,"fruchterman-gpu":g.FruchtermanGPULayout,er:_.ERLayout}},"4e92":function(t,e,n){"use strict";t.exports=a;var r=n("1715"),i=Object.create(n("3a7c"));function o(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=e&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function a(t){if(!(this instanceof a))return new a(t);r.call(this,t),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"===typeof t.transform&&(this._transform=t.transform),"function"===typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",s)}function s(){var t=this;"function"===typeof this._flush?this._flush((function(e,n){l(t,e,n)})):l(this,null,null)}function l(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=n("3fb5"),i.inherits(a,r),a.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},a.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},a.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},a.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},a.prototype._destroy=function(t,e){var n=this;r.prototype._destroy.call(this,t,(function(t){e(t),n.emit("close")}))}},"4ee5":function(t,e,n){t.exports=n("dc14")},"4f4d":function(t,e,n){"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},"501e":function(t,e,n){var r=n("3729"),i=n("1310"),o="[object Number]";function a(t){return"number"==typeof t||i(t)&&r(t)==o}t.exports=a},5140:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.detectAllUndirectedCycle=e.detectAllDirectedCycle=e.detectAllCycles=e.default=void 0;var i=u(n("fe51")),o=l(n("862e")),a=n("dcfe");function s(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(s=function(t){return t?n:e})(t)}function l(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!==typeof t)return{default:t};var n=s(e);if(n&&n.has(t))return n.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var l=o?Object.getOwnPropertyDescriptor(t,a):null;l&&(l.get||l.set)?Object.defineProperty(i,a,l):i[a]=t[a]}return i.default=t,n&&n.set(t,i),i}function u(t){return t&&t.__esModule?t:{default:t}}var c=function(t){var e=null,n=t.nodes,r=void 0===n?[]:n,o={},a={},s={},l={};r.forEach((function(t){a[t.id]=t}));var u={enter:function(t){var n=t.current,r=t.previous;if(s[n]){e={};var i=n,l=r;while(l!==n)e[i]=l,i=l,l=o[l];e[i]=l}else s[n]=n,delete a[n],o[n]=r},leave:function(t){var e=t.current;l[e]=e,delete s[e]},allowTraversal:function(t){var n=t.next;return!e&&!l[n]}};while(Object.keys(a).length){var c=Object.keys(a)[0];(0,i.default)(t,c,u)}return e},h=function(t,e,n){var r,i;void 0===n&&(n=!0);for(var s=[],l=(0,o.default)(t,!1),u=0,c=l;u<c.length;u++){var h=c[u];if(h.length){var d=h[0],f=d.id,p=[d],g=(r={},r[f]=d,r),m=(i={},i[f]=new Set,i);while(p.length>0)for(var y=p.pop(),v=y.id,b=(0,a.getNeighbors)(v,t.edges),_=function(r){var i,o=b[r],a=t.nodes.find((function(t){return t.id===o}));if(o===v)s.push((i={},i[o]=y,i));else if(o in m){if(!m[v].has(a)){var l=!0,u=[a,y],c=g[v];while(m[o].size&&!m[o].has(c)){if(u.push(c),c===g[c.id])break;c=g[c.id]}if(u.push(c),e&&n?(l=!1,u.findIndex((function(t){return e.indexOf(t.id)>-1}))>-1&&(l=!0)):e&&!n&&u.findIndex((function(t){return e.indexOf(t.id)>-1}))>-1&&(l=!1),l){for(var h={},d=1;d<u.length;d+=1)h[u[d-1].id]=u[d];u.length&&(h[u[u.length-1].id]=u[0]),s.push(h)}m[o].add(y)}}else g[o]=y,p.push(a),m[o]=new Set([y])},x=0;x<b.length;x+=1)_(x)}}return s};e.detectAllUndirectedCycle=h;var d=function(t,e,n){void 0===n&&(n=!0);for(var r=[],i=new Set,s=[],l=[],u={},c={},h=function(t){var e=[t];while(e.length>0){var n=e.pop();i.has(n)&&(i.delete(n),s[n.id].forEach((function(t){e.push(t)})),s[n.id].clear())}},d=function t(o,a,c){var d=!1;if(e&&!1===n&&e.indexOf(o.id)>-1)return d;r.push(o),i.add(o);for(var f=c[o.id],p=0;p<f.length;p+=1){var g=u[f[p]];if(g===a){for(var m={},y=1;y<r.length;y+=1)m[r[y-1].id]=r[y];r.length&&(m[r[r.length-1].id]=r[0]),l.push(m),d=!0}else i.has(g)||t(g,a,c)&&(d=!0)}if(d)h(o);else for(p=0;p<f.length;p+=1){g=u[f[p]];s[g.id].has(o)||s[g.id].add(o)}return r.pop(),d},f=t.nodes,p=void 0===f?[]:f,g=0;g<p.length;g+=1){var m=p[g],y=m.id;c[y]=g,u[g]=m}if(e&&n){var v=function(t){var n=e[t];c[p[t].id]=c[n],c[n]=0,u[0]=p.find((function(t){return t.id===n})),u[c[p[t].id]]=p[t]};for(g=0;g<e.length;g++)v(g)}var b=function(r){for(var i,o,s=1/0,u=0;u<r.length;u+=1)for(var h=r[u],d=0;d<h.length;d++){var f=c[h[d].id];f<s&&(s=f,o=u)}var p=r[o],g=[];for(u=0;u<p.length;u+=1){var m=p[u];g[m.id]=[];for(var y=0,v=(0,a.getNeighbors)(m.id,t.edges,"target").filter((function(t){return p.map((function(t){return t.id})).indexOf(t)>-1}));y<v.length;y++){var b=v[y];b!==m.id||!1===n&&e.indexOf(m.id)>-1?g[m.id].push(c[b]):l.push((i={},i[m.id]=m,i))}}return{component:p,adjList:g,minIdx:s}},_=0;while(_<p.length){var x=p.filter((function(t){return c[t.id]>=_})),w=(0,o.detectStrongConnectComponents)({nodes:x,edges:t.edges}).filter((function(t){return t.length>1}));if(0===w.length)break;var S=b(w),E=S.minIdx,C=S.adjList,M=S.component;if(!(M.length>1))break;M.forEach((function(t){s[t.id]=new Set}));var T=u[E];if(e&&n&&-1===e.indexOf(T.id))return l;d(T,T,C),_=E+1}return l};e.detectAllDirectedCycle=d;var f=function(t,e,n,r){return void 0===r&&(r=!0),e?d(t,n,r):h(t,n,r)};e.detectAllCycles=f;var p=c;e.default=p},"52b3":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(n("5cb0"));function i(t){return t&&t.__esModule?t:{default:t}}var o=function(){function t(){this.linkedList=new r.default}return t.prototype.isEmpty=function(){return!this.linkedList.head},t.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},t.prototype.enqueue=function(t){this.linkedList.append(t)},t.prototype.dequeue=function(){var t=this.linkedList.deleteHead();return t?t.value:null},t.prototype.toString=function(t){return this.linkedList.toString(t)},t}(),a=o;e.default=a},"53a8":function(t,e){t.exports=r;var n=Object.prototype.hasOwnProperty;function r(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var i in r)n.call(r,i)&&(t[i]=r[i])}return t}},"53c8":function(t,e,n){"use strict";n("4799"),n("6855");var r=n("b182");n.d(e,"Canvas",(function(){return r["a"]}));n("c2ad"),n("9c29")},5401:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=800,i=function(){function t(t){this.disp=[],this.positions=t.positions,this.adjMatrix=t.adjMatrix,this.focusID=t.focusID,this.radii=t.radii,this.iterations=t.iterations||10,this.height=t.height||10,this.width=t.width||10,this.speed=t.speed||100,this.gravity=t.gravity||10,this.nodeSizeFunc=t.nodeSizeFunc,this.k=t.k||5,this.strictRadial=t.strictRadial,this.nodes=t.nodes}return t.prototype.layout=function(){var t=this,e=t.positions,n=[],r=t.iterations,i=t.width/10;t.maxDisplace=i,t.disp=n;for(var o=0;o<r;o++)e.forEach((function(t,e){n[e]={x:0,y:0}})),t.getRepulsion(),t.updatePositions();return e},t.prototype.getRepulsion=function(){var t=this,e=t.positions,n=t.nodes,r=t.disp,i=t.k,o=t.radii||[];e.forEach((function(a,s){r[s]={x:0,y:0},e.forEach((function(e,l){if(s!==l&&o[s]===o[l]){var u=a[0]-e[0],c=a[1]-e[1],h=Math.sqrt(u*u+c*c);if(0===h){h=1;var d=s>l?1:-1;u=.01*d,c=.01*d}if(h<t.nodeSizeFunc(n[s])/2+t.nodeSizeFunc(n[l])/2){var f=i*i/h;r[s].x+=u/h*f,r[s].y+=c/h*f}}}))}))},t.prototype.updatePositions=function(){var t=this,e=t.positions,n=t.disp,i=t.speed,o=t.strictRadial,a=t.focusID,s=t.maxDisplace||t.width/10;o&&n.forEach((function(t,n){var r=e[n][0]-e[a][0],i=e[n][1]-e[a][1],o=Math.sqrt(r*r+i*i),s=i/o,l=-r/o,u=Math.sqrt(t.x*t.x+t.y*t.y),c=Math.acos((s*t.x+l*t.y)/u);c>Math.PI/2&&(c-=Math.PI/2,s*=-1,l*=-1);var h=Math.cos(c)*u;t.x=s*h,t.y=l*h}));var l=t.radii;e.forEach((function(t,u){if(u!==a){var c=Math.sqrt(n[u].x*n[u].x+n[u].y*n[u].y);if(c>0&&u!==a){var h=Math.min(s*(i/r),c);if(t[0]+=n[u].x/c*h,t[1]+=n[u].y/c*h,o){var d=t[0]-e[a][0],f=t[1]-e[a][1],p=Math.sqrt(d*d+f*f);d=d/p*l[u],f=f/p*l[u],t[0]=e[a][0]+d,t[1]=e[a][1]+f}}}}))},t}();e.default=i},"54ca":function(t,e,n){"use strict";n.d(e,"a",(function(){return K}));var r={};function i(t){return+t}function o(t){return t*t}function a(t){return t*(2-t)}function s(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function l(t){return t*t*t}function u(t){return--t*t*t+1}function c(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}n.r(r),n.d(r,"easeLinear",(function(){return i})),n.d(r,"easeQuad",(function(){return s})),n.d(r,"easeQuadIn",(function(){return o})),n.d(r,"easeQuadOut",(function(){return a})),n.d(r,"easeQuadInOut",(function(){return s})),n.d(r,"easeCubic",(function(){return c})),n.d(r,"easeCubicIn",(function(){return l})),n.d(r,"easeCubicOut",(function(){return u})),n.d(r,"easeCubicInOut",(function(){return c})),n.d(r,"easePoly",(function(){return p})),n.d(r,"easePolyIn",(function(){return d})),n.d(r,"easePolyOut",(function(){return f})),n.d(r,"easePolyInOut",(function(){return p})),n.d(r,"easeSin",(function(){return b})),n.d(r,"easeSinIn",(function(){return y})),n.d(r,"easeSinOut",(function(){return v})),n.d(r,"easeSinInOut",(function(){return b})),n.d(r,"easeExp",(function(){return S})),n.d(r,"easeExpIn",(function(){return x})),n.d(r,"easeExpOut",(function(){return w})),n.d(r,"easeExpInOut",(function(){return S})),n.d(r,"easeCircle",(function(){return M})),n.d(r,"easeCircleIn",(function(){return E})),n.d(r,"easeCircleOut",(function(){return C})),n.d(r,"easeCircleInOut",(function(){return M})),n.d(r,"easeBounce",(function(){return j})),n.d(r,"easeBounceIn",(function(){return F})),n.d(r,"easeBounceOut",(function(){return j})),n.d(r,"easeBounceInOut",(function(){return B})),n.d(r,"easeBack",(function(){return q})),n.d(r,"easeBackIn",(function(){return U})),n.d(r,"easeBackOut",(function(){return G})),n.d(r,"easeBackInOut",(function(){return q})),n.d(r,"easeElastic",(function(){return X})),n.d(r,"easeElasticIn",(function(){return Y})),n.d(r,"easeElasticOut",(function(){return X})),n.d(r,"easeElasticInOut",(function(){return J}));var h=3,d=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(h),f=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(h),p=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(h),g=Math.PI,m=g/2;function y(t){return 1===+t?1:1-Math.cos(t*m)}function v(t){return Math.sin(t*m)}function b(t){return(1-Math.cos(g*t))/2}function _(t){return 1.0009775171065494*(Math.pow(2,-10*t)-.0009765625)}function x(t){return _(1-+t)}function w(t){return 1-_(t)}function S(t){return((t*=2)<=1?_(1-t):2-_(t-1))/2}function E(t){return 1-Math.sqrt(1-t*t)}function C(t){return Math.sqrt(1- --t*t)}function M(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var T=4/11,A=6/11,O=8/11,k=3/4,I=9/11,P=10/11,L=15/16,N=21/22,R=63/64,D=1/T/T;function F(t){return 1-j(1-t)}function j(t){return(t=+t)<T?D*t*t:t<O?D*(t-=A)*t+k:t<P?D*(t-=I)*t+L:D*(t-=N)*t+R}function B(t){return((t*=2)<=1?1-j(1-t):j(t-1)+1)/2}var z=1.70158,U=function t(e){function n(t){return(t=+t)*t*(e*(t-1)+t)}return e=+e,n.overshoot=t,n}(z),G=function t(e){function n(t){return--t*t*((t+1)*e+t)+1}return e=+e,n.overshoot=t,n}(z),q=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(z),V=2*Math.PI,H=1,W=.3,Y=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=V);function i(t){return e*_(- --t)*Math.sin((r-t)/n)}return i.amplitude=function(e){return t(e,n*V)},i.period=function(n){return t(e,n)},i}(H,W),X=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=V);function i(t){return 1-e*_(t=+t)*Math.sin((t+r)/n)}return i.amplitude=function(e){return t(e,n*V)},i.period=function(n){return t(e,n)},i}(H,W),J=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=V);function i(t){return((t=2*t-1)<0?e*_(-t)*Math.sin((r-t)/n):2-e*_(t)*Math.sin((r+t)/n))/2}return i.amplitude=function(e){return t(e,n*V)},i.period=function(n){return t(e,n)},i}(H,W),Z={};function K(t){return Z[t.toLowerCase()]||r[t]}},5596:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["master_timeout","timeout","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["id"]){const t=new n("Missing required parameter: id");return r(t,l)}if(null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,id:d,...f}=t;f=i(o,a,f,u),null==c&&(c="DELETE");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g="/_ingest/pipeline/"+encodeURIComponent(d);const m={method:c,path:g,body:"",querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},"566b":function(t,e,n){var r=n("d633");function i(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function o(t){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},n=t.name||"Function wrapped with `once`";return e.onceError=n+" shouldn't be called more than once",e.called=!1,e}t.exports=r(i),t.exports.strict=r(o),i.proto=i((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return i(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return o(this)},configurable:!0})}))},"57a2":function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(n("4744")),a=i(n("5c2e")),s=i(n("a618")),l=n("7908"),u=i(n("78b1")),c=i(n("0a3c")),h=i(n("c323")),d=i(n("09da")),f=i(n("7927")),p=i(n("e8ee")),g=i(n("743a")),m=n("3979"),y=function(t,e){var n=e&&e.debugTiming?l.time:l.notime;n("layout",(function(){e&&!e.keepNodeOrder&&e.prevGraph&&n("  inheritOrder",(function(){b(t,e.prevGraph)}));var r=n("  buildLayoutGraph",(function(){return O(t)}));e&&!1===e.edgeLabelSpace||n("  makeSpaceForEdgeLabels",(function(){k(r)}));try{n("  runLayout",(function(){v(r,n,e)}))}catch(i){if("Not possible to find intersection inside of the rectangle"===i.message)return void console.error("The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:\n",i);throw i}n("  updateInputGraph",(function(){_(t,r)}))}))},v=function(t,e,n){e("    removeSelfEdges",(function(){B(t)})),e("    acyclic",(function(){o.default.run(t)})),e("    nestingGraph.run",(function(){c.default.run(t)})),e("    rank",(function(){(0,s.default)((0,l.asNonCompoundGraph)(t))})),e("    injectEdgeLabelProxies",(function(){I(t)})),e("    removeEmptyRanks",(function(){(0,l.removeEmptyRanks)(t)})),e("    nestingGraph.cleanup",(function(){c.default.cleanup(t)})),e("    normalizeRanks",(function(){(0,l.normalizeRanks)(t)})),e("    assignRankMinMax",(function(){P(t)})),e("    removeEdgeLabelProxies",(function(){L(t)})),e("    normalize.run",(function(){a.default.run(t)})),e("    parentDummyChains",(function(){(0,u.default)(t)})),e("    addBorderSegments",(function(){(0,h.default)(t)})),n&&n.keepNodeOrder&&e("    initDataOrder",(function(){(0,g.default)(t,n.nodeOrder)})),e("    order",(function(){(0,f.default)(t,null===n||void 0===n?void 0:n.keepNodeOrder)})),e("    insertSelfEdges",(function(){z(t)})),e("    adjustCoordinateSystem",(function(){d.default.adjust(t)})),e("    position",(function(){(0,p.default)(t)})),e("    positionSelfEdges",(function(){U(t)})),e("    removeBorderNodes",(function(){j(t)})),e("    normalize.undo",(function(){a.default.undo(t)})),e("    fixupEdgeLabelCoords",(function(){D(t)})),e("    undoCoordinateSystem",(function(){d.default.undo(t)})),e("    translateGraph",(function(){N(t)})),e("    assignNodeIntersects",(function(){R(t)})),e("    reversePoints",(function(){F(t)})),e("    acyclic.undo",(function(){o.default.undo(t)}))},b=function(t,e){t.nodes().forEach((function(n){var r=t.node(n),i=e.node(n);void 0!==i?(r.fixorder=i._order,delete i._order):delete r.fixorder}))},_=function(t,e){t.nodes().forEach((function(n){var r,i=t.node(n);if(i){var o=e.node(n);i.x=o.x,i.y=o.y,i._order=o.order,i._rank=o.rank,(null===(r=e.children(n))||void 0===r?void 0:r.length)&&(i.width=o.width,i.height=o.height)}})),t.edges().forEach((function(n){var r=t.edge(n),i=e.edge(n);r.points=i?i.points:[],i&&i.hasOwnProperty("x")&&(r.x=i.x,r.y=i.y)})),t.graph().width=e.graph().width,t.graph().height=e.graph().height},x=["nodesep","edgesep","ranksep","marginx","marginy"],w={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},S=["acyclicer","ranker","rankdir","align"],E=["width","height","layer","fixorder"],C={width:0,height:0},M=["minlen","weight","width","height","labeloffset"],T={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},A=["labelpos"],O=function(t){var e=new m.Graph({multigraph:!0,compound:!0}),n=q(t.graph()),i={};return null===S||void 0===S||S.forEach((function(t){void 0!==n[t]&&(i[t]=n[t])})),e.setGraph(Object.assign({},w,G(n,x),i)),t.nodes().forEach((function(n){var i=q(t.node(n)),o=r(r({},C),i),a=G(o,E);e.setNode(n,a),e.setParent(n,t.parent(n))})),t.edges().forEach((function(n){var r=q(t.edge(n)),i={};null===A||void 0===A||A.forEach((function(t){void 0!==r[t]&&(i[t]=r[t])})),e.setEdgeObj(n,Object.assign({},T,G(r,M),i))})),e},k=function(t){var e=t.graph();e.ranksep||(e.ranksep=0),e.ranksep/=2,t.nodes().forEach((function(e){var n=t.node(e);isNaN(n.layer)||n.layer||(n.layer=0)})),t.edges().forEach((function(n){var r,i=t.edge(n);i.minlen*=2,"c"!==(null===(r=i.labelpos)||void 0===r?void 0:r.toLowerCase())&&("TB"===e.rankdir||"BT"===e.rankdir?i.width+=i.labeloffset:i.height+=i.labeloffset)}))},I=function(t){t.edges().forEach((function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),i=t.node(e.w),o={e:e,rank:(i.rank-r.rank)/2+r.rank};(0,l.addDummyNode)(t,"edge-proxy",o,"_ep")}}))},P=function(t){var e=0;t.nodes().forEach((function(n){var r,i,o=t.node(n);o.borderTop&&(o.minRank=null===(r=t.node(o.borderTop))||void 0===r?void 0:r.rank,o.maxRank=null===(i=t.node(o.borderBottom))||void 0===i?void 0:i.rank,e=Math.max(e,o.maxRank||-1/0))})),t.graph().maxRank=e},L=function(t){t.nodes().forEach((function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))}))},N=function(t){var e,n,r=0,i=0,o=t.graph(),a=o.marginx||0,s=o.marginy||0,l=function(t){if(t){var o=t.x,a=t.y,s=t.width,l=t.height;isNaN(o)||isNaN(s)||(void 0===e&&(e=o-s/2),e=Math.min(e,o-s/2),r=Math.max(r,o+s/2)),isNaN(a)||isNaN(l)||(void 0===n&&(n=a-l/2),n=Math.min(n,a-l/2),i=Math.max(i,a+l/2))}};t.nodes().forEach((function(e){l(t.node(e))})),t.edges().forEach((function(e){var n=t.edge(e);(null===n||void 0===n?void 0:n.hasOwnProperty("x"))&&l(n)})),e-=a,n-=s,t.nodes().forEach((function(r){var i=t.node(r);i&&(i.x-=e,i.y-=n)})),t.edges().forEach((function(r){var i,o=t.edge(r);null===(i=o.points)||void 0===i||i.forEach((function(t){t.x-=e,t.y-=n})),o.hasOwnProperty("x")&&(o.x-=e),o.hasOwnProperty("y")&&(o.y-=n)})),o.width=r-e+a,o.height=i-n+s},R=function(t){t.edges().forEach((function(e){var n,r,i=t.edge(e),o=t.node(e.v),a=t.node(e.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=a,r=o),i.points.unshift((0,l.intersectRect)(o,n)),i.points.push((0,l.intersectRect)(a,r))}))},D=function(t){t.edges().forEach((function(e){var n=t.edge(e);if(null===n||void 0===n?void 0:n.hasOwnProperty("x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}}))},F=function(t){t.edges().forEach((function(e){var n,r=t.edge(e);r.reversed&&(null===(n=r.points)||void 0===n||n.reverse())}))},j=function(t){t.nodes().forEach((function(e){var n,r,i;if(null===(n=t.children(e))||void 0===n?void 0:n.length){var o=t.node(e),a=t.node(o.borderTop),s=t.node(o.borderBottom),l=t.node(o.borderLeft[(null===(r=o.borderLeft)||void 0===r?void 0:r.length)-1]),u=t.node(o.borderRight[(null===(i=o.borderRight)||void 0===i?void 0:i.length)-1]);o.width=Math.abs((null===u||void 0===u?void 0:u.x)-(null===l||void 0===l?void 0:l.x))||10,o.height=Math.abs((null===s||void 0===s?void 0:s.y)-(null===a||void 0===a?void 0:a.y))||10,o.x=((null===l||void 0===l?void 0:l.x)||0)+o.width/2,o.y=((null===a||void 0===a?void 0:a.y)||0)+o.height/2}})),t.nodes().forEach((function(e){var n;"border"===(null===(n=t.node(e))||void 0===n?void 0:n.dummy)&&t.removeNode(e)}))},B=function(t){t.edges().forEach((function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdgeObj(e)}}))},z=function(t){var e=(0,l.buildLayerMatrix)(t);null===e||void 0===e||e.forEach((function(e){var n=0;null===e||void 0===e||e.forEach((function(e,r){var i,o=t.node(e);o.order=r+n,null===(i=o.selfEdges)||void 0===i||i.forEach((function(e){(0,l.addDummyNode)(t,"selfedge",{width:e.label.width,height:e.label.height,rank:o.rank,order:r+ ++n,e:e.e,label:e.label},"_se")})),delete o.selfEdges}))}))},U=function(t){t.nodes().forEach((function(e){var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),i=r.x+r.width/2,o=r.y,a=n.x-i,s=r.height/2;t.setEdgeObj(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*a/3,y:o-s},{x:i+5*a/6,y:o-s},{y:o,x:i+a},{x:i+5*a/6,y:o+s},{x:i+2*a/3,y:o+s}],n.label.x=n.x,n.label.y=n.y}}))},G=function(t,e){var n={};return null===e||void 0===e||e.forEach((function(e){void 0!==t[e]&&(n[e]=+t[e])})),n},q=function(t){void 0===t&&(t={});var e={};return Object.keys(t).forEach((function(n){e[n.toLowerCase()]=t[n]})),e};e.default=y},"585a":function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n("c8ba"))},5861:function(t,e,n){(function(e,n){t.exports=n()})(0,(function(){"use strict";function t(t,n,i,o,a){e(t,n,i||0,o||t.length-1,a||r)}function e(t,r,i,o,a){while(o>i){if(o-i>600){var s=o-i+1,l=r-i+1,u=Math.log(s),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(s-c)/s)*(l-s/2<0?-1:1),d=Math.max(i,Math.floor(r-l*c/s+h)),f=Math.min(o,Math.floor(r+(s-l)*c/s+h));e(t,r,d,f,a)}var p=t[r],g=i,m=o;n(t,i,r),a(t[o],p)>0&&n(t,i,o);while(g<m){n(t,g,m),g++,m--;while(a(t[g],p)<0)g++;while(a(t[m],p)>0)m--}0===a(t[i],p)?n(t,i,m):(m++,n(t,m,o)),m<=r&&(i=m+1),r<=m&&(o=m-1)}}function n(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function r(t,e){return t<e?-1:t>e?1:0}return t}))},"595b":function(t,e,n){(function(t){!function(t,n){n(e)}(0,(function(e){"use strict";var n=6371008.8,r={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:39.37*n,kilometers:6371.0088,kilometres:6371.0088,meters:n,metres:n,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:n/1852,radians:1,yards:6967335.223679999},i={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/n,yards:1.0936133},o={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function a(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function s(t,e,n){switch(t){case"Point":return l(e).geometry;case"LineString":return d(e).geometry;case"Polygon":return c(e).geometry;case"MultiPoint":return m(e).geometry;case"MultiLineString":return g(e).geometry;case"MultiPolygon":return y(e).geometry;default:throw new Error(t+" is invalid")}}function l(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!A(t[0])||!A(t[1]))throw new Error("coordinates must contain numbers");return a({type:"Point",coordinates:t},e,n)}function u(t,e,n){return void 0===n&&(n={}),p(t.map((function(t){return l(t,e)})),n)}function c(t,e,n){void 0===n&&(n={});for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<o[o.length-1].length;s++)if(o[o.length-1][s]!==o[0][s])throw new Error("First and last Position are not equivalent.")}return a({type:"Polygon",coordinates:t},e,n)}function h(t,e,n){return void 0===n&&(n={}),p(t.map((function(t){return c(t,e)})),n)}function d(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return a({type:"LineString",coordinates:t},e,n)}function f(t,e,n){return void 0===n&&(n={}),p(t.map((function(t){return d(t,e)})),n)}function p(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function g(t,e,n){return void 0===n&&(n={}),a({type:"MultiLineString",coordinates:t},e,n)}function m(t,e,n){return void 0===n&&(n={}),a({type:"MultiPoint",coordinates:t},e,n)}function y(t,e,n){return void 0===n&&(n={}),a({type:"MultiPolygon",coordinates:t},e,n)}function v(t,e,n){return void 0===n&&(n={}),a({type:"GeometryCollection",geometries:t},e,n)}function b(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function _(t,e){void 0===e&&(e="kilometers");var n=r[e];if(!n)throw new Error(e+" units is invalid");return t*n}function x(t,e){void 0===e&&(e="kilometers");var n=r[e];if(!n)throw new Error(e+" units is invalid");return t/n}function w(t,e){return E(x(t,e))}function S(t){var e=t%360;return e<0&&(e+=360),e}function E(t){return t%(2*Math.PI)*180/Math.PI}function C(t){return t%360*Math.PI/180}function M(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return _(x(t,e),n)}function T(t,e,n){if(void 0===e&&(e="meters"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("area must be a positive number");var r=o[e];if(!r)throw new Error("invalid original units");var i=o[n];if(!i)throw new Error("invalid final units");return t/r*i}function A(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function O(t){return!!t&&t.constructor===Object}function k(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!A(t))throw new Error("bbox must only contain numbers")}))}function I(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}var P=Object.freeze({__proto__:null,earthRadius:n,factors:r,unitsFactors:i,areaFactors:o,feature:a,geometry:s,point:l,points:u,polygon:c,polygons:h,lineString:d,lineStrings:f,featureCollection:p,multiLineString:g,multiPoint:m,multiPolygon:y,geometryCollection:v,round:b,radiansToLength:_,lengthToRadians:x,lengthToDegrees:w,bearingToAzimuth:S,radiansToDegrees:E,degreesToRadians:C,convertLength:M,convertArea:T,isNumber:A,isObject:O,validateBBox:k,validateId:I});function L(t,e,n){if(null!==t)for(var r,i,o,a,s,l,u,c,h=0,d=0,f=t.type,p="FeatureCollection"===f,g="Feature"===f,m=p?t.features.length:1,y=0;y<m;y++){s=(c=!!(u=p?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var v=0;v<s;v++){var b=0,_=0;if(null!==(a=c?u.geometries[v]:u)){l=a.coordinates;var x=a.type;switch(h=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(l,d,y,b,_))return!1;d++,b++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(!1===e(l[r],d,y,b,_))return!1;d++,"MultiPoint"===x&&b++}"LineString"===x&&b++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++){if(!1===e(l[r][i],d,y,b,_))return!1;d++}"MultiLineString"===x&&b++,"Polygon"===x&&_++}"Polygon"===x&&b++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(_=0,i=0;i<l[r].length;i++){for(o=0;o<l[r][i].length-h;o++){if(!1===e(l[r][i][o],d,y,b,_))return!1;d++}_++}b++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===L(a.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function N(t,e,n,r){var i=n;return L(t,(function(t,r,o,a,s){i=0===r&&void 0===n?t:e(i,t,r,o,a,s)}),r),i}function R(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function D(t,e,n){var r=n;return R(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r}function F(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function j(t,e,n){var r=n;return F(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r}function B(t){var e=[];return L(t,(function(t){e.push(t)})),e}function z(t,e){var n,r,i,o,a,s,l,u,c,h,d=0,f="FeatureCollection"===t.type,p="Feature"===t.type,g=f?t.features.length:1;for(n=0;n<g;n++){for(s=f?t.features[n].geometry:p?t.geometry:t,u=f?t.features[n].properties:p?t.properties:{},c=f?t.features[n].bbox:p?t.bbox:void 0,h=f?t.features[n].id:p?t.id:void 0,a=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=l?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,d,u,c,h))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],d,u,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,d,u,c,h))return!1;d++}}function U(t,e,n){var r=n;return z(t,(function(t,i,o,a,s){r=0===i&&void 0===n?t:e(r,t,i,o,a,s)})),r}function G(t,e){z(t,(function(t,n,r,i,o){var s,l=null===t?null:t.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return!1!==e(a(t,r,{bbox:i,id:o}),n,0)&&void 0}switch(l){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var u=0;u<t.coordinates.length;u++){var c=t.coordinates[u];if(!1===e(a({type:s,coordinates:c},r),n,u))return!1}}))}function q(t,e,n){var r=n;return G(t,(function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)})),r}function V(t,e){G(t,(function(t,n,r){var i=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var a,s=0,l=0,u=0;return!1!==L(t,(function(o,c,h,f,p){if(void 0===a||n>s||f>l||p>u)return a=o,s=n,l=f,u=p,void(i=0);var g=d([a,o],t.properties);if(!1===e(g,n,r,p,i))return!1;i++,a=o}))&&void 0}}}))}function H(t,e,n){var r=n,i=!1;return V(t,(function(t,o,a,s,l){r=!1===i&&void 0===n?t:e(r,t,o,a,s,l),i=!0})),r}function W(t,e){if(!t)throw new Error("geojson is required");G(t,(function(t,n,r){if(null!==t.geometry){var i=t.geometry.type,o=t.geometry.coordinates;switch(i){case"LineString":if(!1===e(t,n,r,0,0))return!1;break;case"Polygon":for(var a=0;a<o.length;a++)if(!1===e(d(o[a],t.properties),n,r,a))return!1}}}))}function Y(t,e,n){var r=n;return W(t,(function(t,i,o,a){r=0===i&&void 0===n?t:e(r,t,i,o,a)})),r}function X(t,e){if(!O(e=e||{}))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,a=e.segmentIndex||0,s=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),s=s||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":s=s||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var l=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=l.length+a-1),d([l[a],l[a+1]],s,e);case"Polygon":return o<0&&(o=l.length+o),a<0&&(a=l[o].length+a-1),d([l[o][a],l[o][a+1]],s,e);case"MultiLineString":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a-1),d([l[i][a],l[i][a+1]],s,e);case"MultiPolygon":return i<0&&(i=l.length+i),o<0&&(o=l[i].length+o),a<0&&(a=l[i][o].length-a-1),d([l[i][o][a],l[i][o][a+1]],s,e)}throw new Error("geojson is invalid")}function J(t,e){if(!O(e=e||{}))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,a=e.coordIndex||0,s=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),s=s||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":s=s||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":return l(u,s,e);case"MultiPoint":return i<0&&(i=u.length+i),l(u[i],s,e);case"LineString":return a<0&&(a=u.length+a),l(u[a],s,e);case"Polygon":return o<0&&(o=u.length+o),a<0&&(a=u[o].length+a),l(u[o][a],s,e);case"MultiLineString":return i<0&&(i=u.length+i),a<0&&(a=u[i].length+a),l(u[i][a],s,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),a<0&&(a=u[i][o].length-a),l(u[i][o][a],s,e)}throw new Error("geojson is invalid")}var Z=Object.freeze({__proto__:null,coordAll:B,coordEach:L,coordReduce:N,featureEach:F,featureReduce:j,findPoint:J,findSegment:X,flattenEach:G,flattenReduce:q,geomEach:z,geomReduce:U,lineEach:W,lineReduce:Y,propEach:R,propReduce:D,segmentEach:V,segmentReduce:H});function K(t){var e=[1/0,1/0,-1/0,-1/0];return L(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}function Q(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function $(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function tt(t){if(t.length>1&&A(t[0])&&A(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return tt(t[0]);throw new Error("coordinates must only contain numbers")}function et(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function nt(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function rt(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0,i=t.features;r<i.length;r++){var o=i[r];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+o.geometry.type)}}function it(t){return"Feature"===t.type?t.geometry:t}function ot(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}K.default=K;var at=Object.freeze({__proto__:null,getCoord:Q,getCoords:$,containsNumber:tt,geojsonType:et,featureOf:nt,collectionOf:rt,getGeom:it,getType:ot}),st=Object.getOwnPropertySymbols,lt=Object.prototype.hasOwnProperty,ut=Object.prototype.propertyIsEnumerable;
/*
    object-assign
    (c) Sindre Sorhus
    @license MIT
    */function ct(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var ht=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,r,i=ct(t),o=1;o<arguments.length;o++){for(var a in n=Object(arguments[o]))lt.call(n,a)&&(i[a]=n[a]);if(st){r=st(n);for(var s=0;s<r.length;s++)ut.call(n,r[s])&&(i[r[s]]=n[r[s]])}}return i},dt={successCallback:null,verbose:!1},ft={};
/**
     * @license GNU Affero General Public License.
     * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
     * v. 1.2.0
     * https://github.com/RaumZeit/MarchingSquares.js
     *
     * MarchingSquaresJS is free software: you can redistribute it and/or modify
     * it under the terms of the GNU Affero General Public License as published by
     * the Free Software Foundation, either version 3 of the License, or
     * (at your option) any later version.
     *
     * MarchingSquaresJS is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     * GNU Affero General Public License for more details.
     *
     * As additional permission under GNU Affero General Public License version 3
     * section 7, third-party projects (personal or commercial) may distribute,
     * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
     * requirement that said third-party project for that reason alone becomes
     * subject to any requirement of the GNU Affero General Public License version 3.
     * Any modifications to MarchingSquaresJS, however, must be shared with the public
     * and made available.
     *
     * In summary this:
     * - allows you to use MarchingSquaresJS at no cost
     * - allows you to use MarchingSquaresJS for both personal and commercial purposes
     * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
     *   license as long as this license notice is included
     * - enables you to keep the source code of your program that uses MarchingSquaresJS
     *   undisclosed
     * - forces you to share any modifications you have made to MarchingSquaresJS,
     *   e.g. bug-fixes
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
     */function pt(t,e,n){n=n||{};for(var r=Object.keys(dt),i=0;i<r.length;i++){var o=r[i],a=n[o];a=null!=a?a:dt[o],ft[o]=a}ft.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e);var s=function(t){var e=[],n=0,r=1e-7;return t.cells.forEach((function(i,o){i.forEach((function(i,a){if(void 0!==i&&5!==(f=i).cval&&10!==f.cval&&!mt(i)){var s=function(t,e,n){var r,i,o=t.length,a=[],s=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],l=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],u=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"],c=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],h=t[e][n],d=h.cval,f=u[d],p=vt(h,f);a.push([n+p[0],e+p[1]]),f=c[d],p=vt(h,f),a.push([n+p[0],e+p[1]]),yt(h);for(var g=n+s[d],m=e+l[d],y=d;g>=0&&m>=0&&m<o&&(g!=n||m!=e)&&void 0!==(h=t[m][g]);){if(0===(d=h.cval)||15===d)return{path:a,info:"mergeable"};f=c[d],r=s[d],i=l[d],5!==d&&10!==d||(5===d?h.flipped?-1===l[y]?(f="left",r=-1,i=0):(f="right",r=1,i=0):-1===s[y]&&(f="bottom",r=0,i=-1):10===d&&(h.flipped?-1===s[y]?(f="top",r=0,i=1):(f="bottom",r=0,i=-1):1===l[y]&&(f="left",r=-1,i=0))),p=vt(h,f),a.push([g+p[0],m+p[1]]),yt(h),g+=r,m+=i,y=d}return{path:a,info:"closed"}}(t.cells,o,a),l=!1;if("mergeable"===s.info)for(var u=s.path[s.path.length-1][0],c=s.path[s.path.length-1][1],h=n-1;h>=0;h--)if(Math.abs(e[h][0][0]-u)<=r&&Math.abs(e[h][0][1]-c)<=r){for(var d=s.path.length-2;d>=0;--d)e[h].unshift(s.path[d]);l=!0;break}l||(e[n++]=s.path)}var f}))})),e}(function(t,e){for(var n=t.length-1,r=t[0].length-1,i={rows:n,cols:r,cells:[]},o=0;o<n;++o){i.cells[o]=[];for(var a=0;a<r;++a){var s=0,l=t[o+1][a],u=t[o+1][a+1],c=t[o][a+1],h=t[o][a];if(!(isNaN(l)||isNaN(u)||isNaN(c)||isNaN(h))){s|=l>=e?8:0,s|=u>=e?4:0,s|=c>=e?2:0;var d,f,p,g,m=!1;if(5===(s|=h>=e?1:0)||10===s){var y=(l+u+c+h)/4;5===s&&y<e?(s=10,m=!0):10===s&&y<e&&(s=5,m=!0)}0!==s&&15!==s&&(d=f=p=g=.5,1===s?(p=1-gt(e,l,h),f=1-gt(e,c,h)):2===s?(f=gt(e,h,c),g=1-gt(e,u,c)):3===s?(p=1-gt(e,l,h),g=1-gt(e,u,c)):4===s?(d=gt(e,l,u),g=gt(e,c,u)):5===s?(d=gt(e,l,u),g=gt(e,c,u),f=1-gt(e,c,h),p=1-gt(e,l,h)):6===s?(f=gt(e,h,c),d=gt(e,l,u)):7===s?(p=1-gt(e,l,h),d=gt(e,l,u)):8===s?(p=gt(e,h,l),d=1-gt(e,u,l)):9===s?(f=1-gt(e,c,h),d=1-gt(e,u,l)):10===s?(d=1-gt(e,u,l),g=1-gt(e,u,c),f=gt(e,h,c),p=gt(e,h,l)):11===s?(d=1-gt(e,u,l),g=1-gt(e,u,c)):12===s?(p=gt(e,h,l),g=gt(e,c,u)):13===s?(f=1-gt(e,c,h),g=gt(e,c,u)):14===s?(p=gt(e,h,l),f=gt(e,h,c)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+s),i.cells[o][a]={cval:s,flipped:m,top:d,right:g,bottom:f,left:p})}}}return i}(t,e));return"function"==typeof ft.successCallback&&ft.successCallback(s),s}function gt(t,e,n){return(t-e)/(n-e)}function mt(t){return 0===t.cval||15===t.cval}function yt(t){mt(t)||5===t.cval||10===t.cval||(t.cval=15)}function vt(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}function bt(t,e){if(!O(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;rt(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return F(t,(function(t){var e=$(t)[1];n[e]||(n[e]=[]),n[e].push(t)})),Object.keys(n).map((function(t){return n[t].sort((function(t,e){return $(t)[0]-$(e)[0]}))})).sort((function(t,n){return e?$(t[0])[1]-$(n[0])[1]:$(n[0])[1]-$(t[0])[1]}))}(t,r),a=[],s=0;s<o.length;s++){for(var l=o[s],u=[],c=0;c<l.length;c++){var h=l[c];h.properties[n]?u.push(h.properties[n]):u.push(0),!0===i&&(h.properties.matrixPosition=[s,c])}a.push(u)}return a}var _t=wt,xt=wt;function wt(t,e,n,r,i){St(t,e,n||0,r||t.length-1,i||Ct)}function St(t,e,n,r,i){for(;r>n;){if(r-n>600){var o=r-n+1,a=e-n+1,s=Math.log(o),l=.5*Math.exp(2*s/3),u=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);St(t,e,Math.max(n,Math.floor(e-a*l/o+u)),Math.min(r,Math.floor(e+(o-a)*l/o+u)),i)}var c=t[e],h=n,d=r;for(Et(t,n,e),i(t[r],c)>0&&Et(t,n,r);h<d;){for(Et(t,h,d),h++,d--;i(t[h],c)<0;)h++;for(;i(t[d],c)>0;)d--}0===i(t[n],c)?Et(t,n,d):Et(t,++d,r),d<=e&&(n=d+1),e<=d&&(r=d-1)}}function Et(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function Ct(t,e){return t<e?-1:t>e?1:0}_t.default=xt;var Mt=At,Tt=At;function At(t,e){if(!(this instanceof At))return new At(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function Ot(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function kt(t,e){It(t,0,t.children.length,e,t)}function It(t,e,n,r,i){i||(i=Bt(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,a=e;a<n;a++)o=t.children[a],Pt(i,t.leaf?r(o):o);return i}function Pt(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Lt(t,e){return t.minX-e.minX}function Nt(t,e){return t.minY-e.minY}function Rt(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Dt(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Ft(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function jt(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Bt(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function zt(t,e,n,r,i){for(var o,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=r||(o=e+Math.ceil((n-e)/r/2)*r,_t(t,o,e,n,i),a.push(e,o,o,n))}function Ut(t){var e={exports:{}};return t(e,e.exports),e.exports}At.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!jt(t,e))return n;for(var i,o,a,s,l=[];e;){for(i=0,o=e.children.length;i<o;i++)a=e.children[i],jt(t,s=e.leaf?r(a):a)&&(e.leaf?n.push(a):Ft(t,s)?this._all(a,n):l.push(a));e=l.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!jt(t,e))return!1;for(var r,i,o,a,s=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],jt(t,a=e.leaf?n(o):o)){if(e.leaf||Ft(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Bt([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,a=this.data,s=this.toBBox(t),l=[],u=[];a||l.length;){if(a||(a=l.pop(),r=l[l.length-1],n=u.pop(),o=!0),a.leaf&&-1!==(i=Ot(t,a.children,e)))return a.children.splice(i,1),l.push(a),this._condense(l),this;o||a.leaf||!Ft(a,s)?r?(n++,a=r.children[n],o=!1):a=null:(l.push(a),u.push(n),n=0,r=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:Lt,compareMinY:Nt,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,a=this._maxEntries;if(o<=a)return kt(i=Bt(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),(i=Bt([])).leaf=!1,i.height=r;var s,l,u,c,h=Math.ceil(o/a),d=h*Math.ceil(Math.sqrt(a));for(zt(t,e,n,d,this.compareMinX),s=e;s<=n;s+=d)for(zt(t,s,u=Math.min(s+d-1,n),h,this.compareMinY),l=s;l<=u;l+=h)c=Math.min(l+h-1,u),i.children.push(this._build(t,l,c,r-1));return kt(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,a,s,l,u,c,h,d,f;r.push(e),!e.leaf&&r.length-1!==n;){for(c=h=1/0,i=0,o=e.children.length;i<o;i++)l=Rt(a=e.children[i]),d=t,f=a,(u=(Math.max(f.maxX,d.maxX)-Math.min(f.minX,d.minX))*(Math.max(f.maxY,d.maxY)-Math.min(f.minY,d.minY))-l)<h?(h=u,c=l<c?l:c,s=a):u===h&&l<c&&(c=l,s=a);e=s||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],a=this._chooseSubtree(i,this.data,e,o);for(a.children.push(t),Pt(a,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),a=Bt(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,kt(n,this.toBBox),kt(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data=Bt([t,e]),this.data.height=t.height+1,this.data.leaf=!1,kt(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,a,s,l,u,c,h,d,f,p,g,m;for(l=u=1/0,r=e;r<=n-e;r++)i=It(t,0,r,this.toBBox),o=It(t,r,n,this.toBBox),h=i,d=o,f=void 0,p=void 0,g=void 0,m=void 0,f=Math.max(h.minX,d.minX),p=Math.max(h.minY,d.minY),g=Math.min(h.maxX,d.maxX),m=Math.min(h.maxY,d.maxY),a=Math.max(0,g-f)*Math.max(0,m-p),s=Rt(i)+Rt(o),a<l?(l=a,c=r,u=s<u?s:u):a===l&&s<u&&(u=s,c=r);return c},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:Lt,i=t.leaf?this.compareMinY:Nt;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,a=this.toBBox,s=It(t,0,e,a),l=It(t,n-e,n,a),u=Dt(s)+Dt(l);for(i=e;i<n-e;i++)o=t.children[i],Pt(s,t.leaf?a(o):o),u+=Dt(s);for(i=n-e-1;i>=e;i--)o=t.children[i],Pt(l,t.leaf?a(o):o),u+=Dt(l);return u},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)Pt(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():kt(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}},Mt.default=Tt;var Gt=function(t,e,n){var r=t*e,i=qt*t,o=i-(i-t),a=t-o,s=qt*e,l=s-(s-e),u=e-l,c=a*u-(r-o*l-a*l-o*u);return n?(n[0]=c,n[1]=r,n):[c,r]},qt=+(Math.pow(2,27)+1),Vt=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],e[0]);var i,o,a=new Array(n+r),s=0,l=0,u=0,c=Math.abs,h=t[l],d=c(h),f=e[u],p=c(f);d<p?(o=h,(l+=1)<n&&(h=t[l],d=c(h))):(o=f,(u+=1)<r&&(f=e[u],p=c(f))),l<n&&d<p||u>=r?(i=h,(l+=1)<n&&(h=t[l],d=c(h))):(i=f,(u+=1)<r&&(f=e[u],p=c(f)));for(var g,m,y=i+o,v=y-i,b=o-v,_=b,x=y;l<n&&u<r;)d<p?(i=h,(l+=1)<n&&(h=t[l],d=c(h))):(i=f,(u+=1)<r&&(f=e[u],p=c(f))),(b=(o=_)-(v=(y=i+o)-i))&&(a[s++]=b),_=x-((g=x+y)-(m=g-x))+(y-m),x=g;for(;l<n;)(b=(o=_)-(v=(y=(i=h)+o)-i))&&(a[s++]=b),_=x-((g=x+y)-(m=g-x))+(y-m),x=g,(l+=1)<n&&(h=t[l]);for(;u<r;)(b=(o=_)-(v=(y=(i=f)+o)-i))&&(a[s++]=b),_=x-((g=x+y)-(m=g-x))+(y-m),x=g,(u+=1)<r&&(f=e[u]);return _&&(a[s++]=_),x&&(a[s++]=x),s||(a[s++]=0),a.length=s,a},Ht=function(t,e,n){var r=t+e,i=r-t,o=e-i,a=t-(r-i);return n?(n[0]=a+o,n[1]=r,n):[a+o,r]},Wt=function(t,e){var n=t.length;if(1===n){var r=Gt(t[0],e);return r[0]?r:[r[1]]}var i=new Array(2*n),o=[.1,.1],a=[.1,.1],s=0;Gt(t[0],e,o),o[0]&&(i[s++]=o[0]);for(var l=1;l<n;++l){Gt(t[l],e,a);var u=o[1];Ht(u,a[0],o),o[0]&&(i[s++]=o[0]);var c=a[1],h=o[1],d=c+h,f=h-(d-c);o[1]=d,f&&(i[s++]=f)}return o[1]&&(i[s++]=o[1]),0===s&&(i[s++]=0),i.length=s,i},Yt=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],-e[0]);var i,o,a=new Array(n+r),s=0,l=0,u=0,c=Math.abs,h=t[l],d=c(h),f=-e[u],p=c(f);d<p?(o=h,(l+=1)<n&&(h=t[l],d=c(h))):(o=f,(u+=1)<r&&(f=-e[u],p=c(f))),l<n&&d<p||u>=r?(i=h,(l+=1)<n&&(h=t[l],d=c(h))):(i=f,(u+=1)<r&&(f=-e[u],p=c(f)));for(var g,m,y=i+o,v=y-i,b=o-v,_=b,x=y;l<n&&u<r;)d<p?(i=h,(l+=1)<n&&(h=t[l],d=c(h))):(i=f,(u+=1)<r&&(f=-e[u],p=c(f))),(b=(o=_)-(v=(y=i+o)-i))&&(a[s++]=b),_=x-((g=x+y)-(m=g-x))+(y-m),x=g;for(;l<n;)(b=(o=_)-(v=(y=(i=h)+o)-i))&&(a[s++]=b),_=x-((g=x+y)-(m=g-x))+(y-m),x=g,(l+=1)<n&&(h=t[l]);for(;u<r;)(b=(o=_)-(v=(y=(i=f)+o)-i))&&(a[s++]=b),_=x-((g=x+y)-(m=g-x))+(y-m),x=g,(u+=1)<r&&(f=-e[u]);return _&&(a[s++]=_),x&&(a[s++]=x),s||(a[s++]=0),a.length=s,a},Xt=Ut((function(t){function e(t,e){for(var n=new Array(t.length-1),r=1;r<t.length;++r)for(var i=n[r-1]=new Array(t.length-1),o=0,a=0;o<t.length;++o)o!==e&&(i[a++]=t[r][o]);return n}function n(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",n(t.slice(0,e)),",",n(t.slice(e)),")"].join("")}function r(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var i=[],o=0;o<t.length;++o)i.push(["scale(",n(r(e(t,o))),",",(a=o,1&a?"-":""),t[0][o],")"].join(""));return i;var a}function i(t){for(var i=[],o=[],a=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var r=0;r<t;++r)e[n][r]=["m",r,"[",t-n-1,"]"].join("")}return e}(t),s=[],l=0;l<t;++l)0==(1&l)?i.push.apply(i,r(e(a,l))):o.push.apply(o,r(e(a,l))),s.push("m"+l);var u=n(i),c=n(o),h="orientation"+t+"Exact",d=["function ",h,"(",s.join(),"){var p=",u,",n=",c,",d=sub(p,n);return d[d.length-1];};return ",h].join("");return new Function("sum","prod","scale","sub",d)(Vt,Gt,Wt,Yt)}var o=i(3),a=i(4),s=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var r,i=(t[1]-n[1])*(e[0]-n[0]),a=(t[0]-n[0])*(e[1]-n[1]),s=i-a;if(i>0){if(a<=0)return s;r=i+a}else{if(!(i<0))return s;if(a>=0)return s;r=-(i+a)}var l=33306690738754716e-32*r;return s>=l||s<=-l?s:o(t,e,n)},function(t,e,n,r){var i=t[0]-r[0],o=e[0]-r[0],s=n[0]-r[0],l=t[1]-r[1],u=e[1]-r[1],c=n[1]-r[1],h=t[2]-r[2],d=e[2]-r[2],f=n[2]-r[2],p=o*c,g=s*u,m=s*l,y=i*c,v=i*u,b=o*l,_=h*(p-g)+d*(m-y)+f*(v-b),x=7771561172376103e-31*((Math.abs(p)+Math.abs(g))*Math.abs(h)+(Math.abs(m)+Math.abs(y))*Math.abs(d)+(Math.abs(v)+Math.abs(b))*Math.abs(f));return _>x||-_>x?_:a(t,e,n,r)}];function l(t){var e=s[t.length];return e||(e=s[t.length]=i(t.length)),e.apply(void 0,t)}!function(){for(;s.length<=5;)s.push(i(s.length));for(var e=[],n=["slow"],r=0;r<=5;++r)e.push("a"+r),n.push("o"+r);var o=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(r=2;r<=5;++r)o.push("case ",r,":return o",r,"(",e.slice(0,r).join(),");");o.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(o.join(""));var a=Function.apply(void 0,n);for(t.exports=a.apply(void 0,[l].concat(s)),r=0;r<=5;++r)t.exports[r]=s[r]}()})),Jt=function(t){var e=t.length;if(e<3){for(var n=new Array(e),r=0;r<e;++r)n[r]=r;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n}var i=new Array(e);for(r=0;r<e;++r)i[r]=r;i.sort((function(e,n){var r=t[e][0]-t[n][0];return r||t[e][1]-t[n][1]}));var o=[i[0],i[1]],a=[i[0],i[1]];for(r=2;r<e;++r){for(var s=i[r],l=t[s],u=o.length;u>1&&Zt(t[o[u-2]],t[o[u-1]],l)<=0;)u-=1,o.pop();for(o.push(s),u=a.length;u>1&&Zt(t[a[u-2]],t[a[u-1]],l)>=0;)u-=1,a.pop();a.push(s)}n=new Array(a.length+o.length-2);for(var c=0,h=(r=0,o.length);r<h;++r)n[c++]=o[r];for(var d=a.length-2;d>0;--d)n[c++]=a[d];return n},Zt=Xt[3],Kt=$t,Qt=$t;function $t(t,e){if(!(this instanceof $t))return new $t(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||te,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function te(t,e){return t<e?-1:t>e?1:0}$t.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r},_down:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),a=o+1,s=e[o];if(a<this.length&&n(e[a],s)<0&&(o=a,s=e[a]),n(s,i)>=0)break;e[t]=s,t=o}e[t]=i}},Kt.default=Qt;var ee=function(t,e){for(var n=t[0],r=t[1],i=!1,o=0,a=e.length-1;o<e.length;a=o++){var s=e[o][0],l=e[o][1],u=e[a][0],c=e[a][1];l>r!=c>r&&n<(u-s)*(r-l)/(c-l)+s&&(i=!i)}return i},ne=Xt[3],re=oe,ie=oe;function oe(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;for(var r,i=function(t){for(var e=t[0],n=t[0],r=t[0],i=t[0],o=0;o<t.length;o++){var a=t[o];a[0]<e[0]&&(e=a),a[0]>r[0]&&(r=a),a[1]<n[1]&&(n=a),a[1]>i[1]&&(i=a)}var s=[e,n,r,i],l=s.slice();for(o=0;o<t.length;o++)ee(t[o],s)||l.push(t[o]);var u=Jt(l),c=[];for(o=0;o<u.length;o++)c.push(l[u[o]]);return c}(t),o=Mt(16,["[0]","[1]","[0]","[1]"]).load(t),a=[],s=0;s<i.length;s++){var l=i[s];o.remove(l),r=de(l,r),a.push(r)}var u=Mt(16);for(s=0;s<a.length;s++)u.insert(he(a[s]));for(var c=e*e,h=n*n;a.length;){var d=a.shift(),f=d.p,p=d.next.p,g=fe(f,p);if(!(g<h)){var m=g/c;(l=ae(o,d.prev.p,f,p,d.next.next.p,m,u))&&Math.min(fe(l,f),fe(l,p))<=m&&(a.push(d),a.push(de(l,d)),o.remove(l),u.remove(d),u.insert(he(d)),u.insert(he(d.next)))}}d=r;var y=[];do{y.push(d.p),d=d.next}while(d!==r);return y.push(d.p),y}function ae(t,e,n,r,i,o,a){for(var s=new Kt(null,se),l=t.data;l;){for(var u=0;u<l.children.length;u++){var c=l.children[u],h=l.leaf?pe(c,n,r):le(n,r,c);h>o||s.push({node:c,dist:h})}for(;s.length&&!s.peek().node.children;){var d=s.pop(),f=d.node,p=pe(f,e,n),g=pe(f,r,i);if(d.dist<p&&d.dist<g&&ce(n,f,a)&&ce(r,f,a))return f}(l=s.pop())&&(l=l.node)}return null}function se(t,e){return t.dist-e.dist}function le(t,e,n){if(ue(t,n)||ue(e,n))return 0;var r=ge(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=ge(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=ge(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var a=ge(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===a?0:Math.min(r,i,o,a)}function ue(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function ce(t,e,n){for(var r,i,o,a,s=Math.min(t[0],e[0]),l=Math.min(t[1],e[1]),u=Math.max(t[0],e[0]),c=Math.max(t[1],e[1]),h=n.search({minX:s,minY:l,maxX:u,maxY:c}),d=0;d<h.length;d++)if(r=h[d].p,i=h[d].next.p,o=t,r!==(a=e)&&i!==o&&ne(r,i,o)>0!=ne(r,i,a)>0&&ne(o,a,r)>0!=ne(o,a,i)>0)return!1;return!0}function he(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function de(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function fe(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function pe(t,e,n){var r=e[0],i=e[1],o=n[0]-r,a=n[1]-i;if(0!==o||0!==a){var s=((t[0]-r)*o+(t[1]-i)*a)/(o*o+a*a);s>1?(r=n[0],i=n[1]):s>0&&(r+=o*s,i+=a*s)}return(o=t[0]-r)*o+(a=t[1]-i)*a}function ge(t,e,n,r,i,o,a,s){var l,u,c,h,d=n-t,f=r-e,p=a-i,g=s-o,m=t-i,y=e-o,v=d*d+f*f,b=d*p+f*g,_=p*p+g*g,x=d*m+f*y,w=p*m+g*y,S=v*_-b*b,E=S,C=S;0===S?(u=0,E=1,h=w,C=_):(h=v*w-b*x,(u=b*w-_*x)<0?(u=0,h=w,C=_):u>E&&(u=E,h=w+b,C=_)),h<0?(h=0,-x<0?u=0:-x>v?u=E:(u=-x,E=v)):h>C&&(h=C,-x+b<0?u=0:-x+b>v?u=E:(u=-x+b,E=v));var M=(1-(c=0===h?0:h/C))*i+c*a-((1-(l=0===u?0:u/E))*t+l*n),T=(1-c)*o+c*s-((1-l)*e+l*r);return M*M+T*T}function me(t,e){void 0===e&&(e={}),e.concavity=e.concavity||1/0;var n=[];if(L(t,(function(t){n.push([t[0],t[1]])})),!n.length)return null;var r=re(n,e.concavity);return r.length>3?c([r]):null}function ye(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var r=Q(t),i=it(e),o=i.type,a=e.bbox,s=i.coordinates;if(a&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(r,a))return!1;"Polygon"===o&&(s=[s]);for(var l=!1,u=0;u<s.length&&!l;u++)if(ve(r,s[u][0],n.ignoreBoundary)){for(var c=!1,h=1;h<s[u].length&&!c;)ve(r,s[u][h],!n.ignoreBoundary)&&(c=!0),h++;c||(l=!0)}return l}function ve(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var a=e[i][0],s=e[i][1],l=e[o][0],u=e[o][1];if(t[1]*(a-l)+s*(l-t[0])+u*(t[0]-a)==0&&(a-t[0])*(l-t[0])<=0&&(s-t[1])*(u-t[1])<=0)return!n;s>t[1]!=u>t[1]&&t[0]<(l-a)*(t[1]-s)/(u-s)+a&&(r=!r)}return r}function be(t,e){var n=[];return F(t,(function(t){var r=!1;if("Point"===t.geometry.type)z(e,(function(e){ye(t,e)&&(r=!0)})),r&&n.push(t);else{if("MultiPoint"!==t.geometry.type)throw new Error("Input geometry must be a Point or MultiPoint");var i=[];z(e,(function(e){L(t,(function(t){ye(t,e)&&(r=!0,i.push(t))}))})),r&&n.push(m(i))}})),p(n)}function _e(t,e,n){void 0===n&&(n={});var r=Q(t),i=Q(e),o=C(i[1]-r[1]),a=C(i[0]-r[0]),s=C(r[1]),l=C(i[1]),u=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(s)*Math.cos(l);return _(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)),n.units)}function xe(t,e){var n=!1;return p(function(t){if(t.length<3)return[];t.sort(Se);for(var e,n,r,i,o,a,s=t.length-1,l=t[s].x,u=t[0].x,c=t[s].y,h=c,d=1e-12;s--;)t[s].y<c&&(c=t[s].y),t[s].y>h&&(h=t[s].y);var f,p=u-l,g=h-c,m=p>g?p:g,y=.5*(u+l),v=.5*(h+c),b=[new we({__sentinel:!0,x:y-20*m,y:v-m},{__sentinel:!0,x:y,y:v+20*m},{__sentinel:!0,x:y+20*m,y:v-m})],_=[],x=[];for(s=t.length;s--;){for(x.length=0,f=b.length;f--;)(p=t[s].x-b[f].x)>0&&p*p>b[f].r?(_.push(b[f]),b.splice(f,1)):p*p+(g=t[s].y-b[f].y)*g>b[f].r||(x.push(b[f].a,b[f].b,b[f].b,b[f].c,b[f].c,b[f].a),b.splice(f,1));for(Ee(x),f=x.length;f;)n=x[--f],e=x[--f],r=t[s],i=n.x-e.x,o=n.y-e.y,a=2*(i*(r.y-n.y)-o*(r.x-n.x)),Math.abs(a)>d&&b.push(new we(e,n,r))}for(Array.prototype.push.apply(_,b),s=_.length;s--;)(_[s].a.__sentinel||_[s].b.__sentinel||_[s].c.__sentinel)&&_.splice(s,1);return _}(t.features.map((function(t){var r={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e?r.z=t.properties[e]:3===t.geometry.coordinates.length&&(n=!0,r.z=t.geometry.coordinates[2]),r}))).map((function(t){var e=[t.a.x,t.a.y],r=[t.b.x,t.b.y],i=[t.c.x,t.c.y],o={};return n?(e.push(t.a.z),r.push(t.b.z),i.push(t.c.z)):o={a:t.a.z,b:t.b.z,c:t.c.z},c([[e,r,i,e]],o)})))}re.default=ie;var we=function(t,e,n){this.a=t,this.b=e,this.c=n;var r,i,o=e.x-t.x,a=e.y-t.y,s=n.x-t.x,l=n.y-t.y,u=o*(t.x+e.x)+a*(t.y+e.y),c=s*(t.x+n.x)+l*(t.y+n.y),h=2*(o*(n.y-e.y)-a*(n.x-e.x));this.x=(l*u-a*c)/h,this.y=(o*c-s*u)/h,r=this.x-t.x,i=this.y-t.y,this.r=r*r+i*i};function Se(t,e){return e.x-t.x}function Ee(t){var e,n,r,i,o,a=t.length;t:for(;a;)for(n=t[--a],e=t[--a],r=a;r;)if(o=t[--r],e===(i=t[--r])&&n===o||e===o&&n===i){t.splice(a,2),t.splice(r,2),a-=2;continue t}}function Ce(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return Me(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}})),e.features=t.features.map((function(t){return Me(t)})),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Ae(t);default:throw new Error("unknown GeoJSON type")}}function Me(t){var e={type:"Feature"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}})),e.properties=Te(t.properties),e.geometry=Ae(t.geometry),e}function Te(t){var e={};return t?(Object.keys(t).forEach((function(n){var r=t[n];"object"==typeof r?null===r?e[n]=null:Array.isArray(r)?e[n]=r.map((function(t){return t})):e[n]=Te(r):e[n]=r})),e):e}function Ae(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return Ae(t)})),e):(e.coordinates=Oe(t.coordinates),e)}function Oe(t){var e=t;return"object"!=typeof e[0]?e.slice():e.map((function(t){return Oe(t)}))}function ke(t,e){if(void 0===e&&(e={}),!O(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==ot(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Ce(t));var r=[],i=Y(t,(function(t,e){var n=function(t,e){var n,r=t.geometry.coordinates,i=e.geometry.coordinates,o=Ie(r[0]),a=Ie(r[r.length-1]),s=Ie(i[0]),l=Ie(i[i.length-1]);if(o===l)n=i.concat(r.slice(1));else if(s===a)n=r.concat(i.slice(1));else if(o===s)n=r.slice(1).reverse().concat(i);else{if(a!==l)return null;n=r.concat(i.reverse().slice(1))}return d(n)}(t,e);return n||(r.push(t),e)}));return i&&r.push(i),r.length?1===r.length?r[0]:g(r.map((function(t){return t.coordinates}))):null}function Ie(t){return t[0].toString()+","+t[1].toString()}function Pe(t){return t}function Le(t,e){var n=function(t){if(null==t)return Pe;var e,n,r=t.scale[0],i=t.scale[1],o=t.translate[0],a=t.translate[1];return function(t,s){s||(e=n=0);var l=2,u=t.length,c=new Array(u);for(c[0]=(e+=t[0])*r+o,c[1]=(n+=t[1])*i+a;l<u;)c[l]=t[l],++l;return c}}(t.transform),r=t.arcs;function i(t,e){e.length&&e.pop();for(var i=r[t<0?~t:t],o=0,a=i.length;o<a;++o)e.push(n(i[o],o));t<0&&function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n}(e,a)}function o(t){return n(t)}function a(t){for(var e=[],n=0,r=t.length;n<r;++n)i(t[n],e);return e.length<2&&e.push(e[0]),e}function s(t){for(var e=a(t);e.length<4;)e.push(e[0]);return e}function l(t){return t.map(s)}return function t(e){var n,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":n=o(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(o);break;case"LineString":n=a(e.arcs);break;case"MultiLineString":n=e.arcs.map(a);break;case"Polygon":n=l(e.arcs);break;case"MultiPolygon":n=e.arcs.map(l);break;default:return null}return{type:r,coordinates:n}}(e)}function Ne(t,e){var n={},r={},i={},o=[],a=-1;function s(t,e){for(var r in t){var i=t[r];delete e[i.start],delete i.start,delete i.end,i.forEach((function(t){n[t<0?~t:t]=1})),o.push(i)}}return e.forEach((function(n,r){var i,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++a],e[a]=n,e[r]=i)})),e.forEach((function(e){var n,o,a=function(e){var n,r=t.arcs[e<0?~e:e],i=r[0];return t.transform?(n=[0,0],r.forEach((function(t){n[0]+=t[0],n[1]+=t[1]}))):n=r[r.length-1],e<0?[n,i]:[i,n]}(e),s=a[0],l=a[1];if(n=i[s])if(delete i[n.end],n.push(e),n.end=l,o=r[l]){delete r[o.start];var u=o===n?n:n.concat(o);r[u.start=n.start]=i[u.end=o.end]=u}else r[n.start]=i[n.end]=n;else if(n=r[l])if(delete r[n.start],n.unshift(e),n.start=s,o=i[s]){delete i[o.end];var c=o===n?n:o.concat(n);r[c.start=o.start]=i[c.end=n.end]=c}else r[n.start]=i[n.end]=n;else r[(n=[e]).start=s]=i[n.end=l]=n})),s(i,r),s(r,i),e.forEach((function(t){n[t<0?~t:t]||o.push([t])})),o}function Re(t,e){var n={},r=[],i=[];function o(t){t.forEach((function(e){e.forEach((function(e){(n[e=e<0?~e:e]||(n[e]=[])).push(t)}))})),r.push(t)}function a(e){return function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[0]*i[1]-e[1]*i[0];return Math.abs(o)}(Le(t,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach((function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":o(e.arcs);break;case"MultiPolygon":e.arcs.forEach(o)}})),r.forEach((function(t){if(!t._){var e=[],r=[t];for(t._=1,i.push(e);t=r.pop();)e.push(t),t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].forEach((function(t){t._||(t._=1,r.push(t))}))}))}))}})),r.forEach((function(t){delete t._})),{type:"MultiPolygon",arcs:i.map((function(e){var r,i=[];if(e.forEach((function(t){t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].length<2&&i.push(t)}))}))})),(r=(i=Ne(t,i)).length)>1)for(var o,s,l=1,u=a(i[0]);l<r;++l)(o=a(i[l]))>u&&(s=i[0],i[0]=i[l],i[l]=s,u=o);return i})).filter((function(t){return t.length>0}))}}var De=Object.prototype.hasOwnProperty;function Fe(t,e,n,r,i,o){3===arguments.length&&(r=o=Array,i=null);for(var a=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=new o(t),l=t-1,u=0;u<t;++u)a[u]=i;function c(r,o){for(var u=e(r)&l,c=a[u],h=0;c!=i;){if(n(c,r))return s[u]=o;if(++h>=t)throw new Error("full hashmap");c=a[u=u+1&l]}return a[u]=r,s[u]=o,o}function h(r,o){for(var u=e(r)&l,c=a[u],h=0;c!=i;){if(n(c,r))return s[u];if(++h>=t)throw new Error("full hashmap");c=a[u=u+1&l]}return a[u]=r,s[u]=o,o}function d(r,o){for(var u=e(r)&l,c=a[u],h=0;c!=i;){if(n(c,r))return s[u];if(++h>=t)break;c=a[u=u+1&l]}return o}function f(){for(var t=[],e=0,n=a.length;e<n;++e){var r=a[e];r!=i&&t.push(r)}return t}return{set:c,maybeSet:h,get:d,keys:f}}function je(t,e){return t[0]===e[0]&&t[1]===e[1]}var Be=new ArrayBuffer(16),ze=new Float64Array(Be),Ue=new Uint32Array(Be);function Ge(t){ze[0]=t[0],ze[1]=t[1];var e=Ue[0]^Ue[1];return 2147483647&(e<<5^e>>7^Ue[2]^Ue[3])}function qe(t){var e,n,r,i,o=t.coordinates,a=t.lines,s=t.rings,l=function(){for(var t=Fe(1.4*o.length,x,w,Int32Array,-1,Int32Array),e=new Int32Array(o.length),n=0,r=o.length;n<r;++n)e[n]=t.maybeSet(n,n);return e}(),u=new Int32Array(o.length),c=new Int32Array(o.length),h=new Int32Array(o.length),d=new Int8Array(o.length),f=0;for(e=0,n=o.length;e<n;++e)u[e]=c[e]=h[e]=-1;for(e=0,n=a.length;e<n;++e){var p=a[e],g=p[0],m=p[1];for(r=l[g],i=l[++g],++f,d[r]=1;++g<=m;)_(e,r,r=i,i=l[g]);++f,d[i]=1}for(e=0,n=o.length;e<n;++e)u[e]=-1;for(e=0,n=s.length;e<n;++e){var y=s[e],v=y[0]+1,b=y[1];for(_(e,l[b-1],r=l[v-1],i=l[v]);++v<=b;)_(e,r,r=i,i=l[v])}function _(t,e,n,r){if(u[n]!==t){u[n]=t;var i=c[n];if(i>=0){var o=h[n];i===e&&o===r||i===r&&o===e||(++f,d[n]=1)}else c[n]=e,h[n]=r}}function x(t){return Ge(o[t])}function w(t,e){return je(o[t],o[e])}u=c=h=null;var S,E=function(t,e,n,r,i){3===arguments.length&&(r=Array,i=null);for(var o=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=t-1,s=0;s<t;++s)o[s]=i;function l(r){for(var s=e(r)&a,l=o[s],u=0;l!=i;){if(n(l,r))return!0;if(++u>=t)throw new Error("full hashset");l=o[s=s+1&a]}return o[s]=r,!0}function u(r){for(var s=e(r)&a,l=o[s],u=0;l!=i;){if(n(l,r))return!0;if(++u>=t)break;l=o[s=s+1&a]}return!1}function c(){for(var t=[],e=0,n=o.length;e<n;++e){var r=o[e];r!=i&&t.push(r)}return t}return{add:l,has:u,values:c}}(1.4*f,Ge,je);for(e=0,n=o.length;e<n;++e)d[S=l[e]]&&E.add(o[S]);return E}function Ve(t,e,n,r){He(t,e,n),He(t,e,e+r),He(t,e+r,n)}function He(t,e,n){for(var r,i=e+(n---e>>1);e<i;++e,--n)r=t[e],t[e]=t[n],t[n]=r}function We(t){var e,n,r={};for(e in t)r[e]=null==(n=t[e])?{type:null}:("FeatureCollection"===n.type?Ye:"Feature"===n.type?Xe:Je)(n);return r}function Ye(t){var e={type:"GeometryCollection",geometries:t.features.map(Xe)};return null!=t.bbox&&(e.bbox=t.bbox),e}function Xe(t){var e,n=Je(t.geometry);for(e in null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),t.properties){n.properties=t.properties;break}return n}function Je(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(Je)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function Ze(t,e){var n=function(t){var e=1/0,n=1/0,r=-1/0,i=-1/0;function o(t){null!=t&&De.call(a,t.type)&&a[t.type](t)}var a={GeometryCollection:function(t){t.geometries.forEach(o)},Point:function(t){s(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(s)},LineString:function(t){l(t.arcs)},MultiLineString:function(t){t.arcs.forEach(l)},Polygon:function(t){t.arcs.forEach(l)},MultiPolygon:function(t){t.arcs.forEach(u)}};function s(t){var o=t[0],a=t[1];o<e&&(e=o),o>r&&(r=o),a<n&&(n=a),a>i&&(i=a)}function l(t){t.forEach(s)}function u(t){t.forEach(l)}for(var c in t)o(t[c]);return r>=e&&i>=n?[e,n,r,i]:void 0}(t=We(t)),r=e>0&&n&&function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=o-r?(n-1)/(o-r):1,l=a-i?(n-1)/(a-i):1;function u(t){return[Math.round((t[0]-r)*s),Math.round((t[1]-i)*l)]}function c(t,e){for(var n,o,a,u,c,h=-1,d=0,f=t.length,p=new Array(f);++h<f;)n=t[h],u=Math.round((n[0]-r)*s),c=Math.round((n[1]-i)*l),u===o&&c===a||(p[d++]=[o=u,a=c]);for(p.length=d;d<e;)d=p.push([p[0][0],p[0][1]]);return p}function h(t){return c(t,2)}function d(t){return c(t,4)}function f(t){return t.map(d)}function p(t){null!=t&&De.call(g,t.type)&&g[t.type](t)}var g={GeometryCollection:function(t){t.geometries.forEach(p)},Point:function(t){t.coordinates=u(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(u)},LineString:function(t){t.arcs=h(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(h)},Polygon:function(t){t.arcs=f(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(f)}};for(var m in t)p(t[m]);return{scale:[1/s,1/l],translate:[r,i]}}(t,n,e),i=function(t){var e,n,r,i,o=t.coordinates,a=t.lines,s=t.rings,l=a.length+s.length;for(delete t.lines,delete t.rings,r=0,i=a.length;r<i;++r)for(e=a[r];e=e.next;)++l;for(r=0,i=s.length;r<i;++r)for(n=s[r];n=n.next;)++l;var u=Fe(2*l*1.4,Ge,je),c=t.arcs=[];for(r=0,i=a.length;r<i;++r){e=a[r];do{h(e)}while(e=e.next)}for(r=0,i=s.length;r<i;++r)if((n=s[r]).next)do{h(n)}while(n=n.next);else d(n);function h(t){var e,n,r,i,a,s,l,h;if(r=u.get(e=o[t[0]]))for(l=0,h=r.length;l<h;++l)if(f(i=r[l],t))return t[0]=i[0],void(t[1]=i[1]);if(a=u.get(n=o[t[1]]))for(l=0,h=a.length;l<h;++l)if(p(s=a[l],t))return t[1]=s[0],void(t[0]=s[1]);r?r.push(t):u.set(e,[t]),a?a.push(t):u.set(n,[t]),c.push(t)}function d(t){var e,n,r,i,a;if(n=u.get(o[t[0]]))for(i=0,a=n.length;i<a;++i){if(g(r=n[i],t))return t[0]=r[0],void(t[1]=r[1]);if(m(r,t))return t[0]=r[1],void(t[1]=r[0])}if(n=u.get(e=o[t[0]+y(t)]))for(i=0,a=n.length;i<a;++i){if(g(r=n[i],t))return t[0]=r[0],void(t[1]=r[1]);if(m(r,t))return t[0]=r[1],void(t[1]=r[0])}n?n.push(t):u.set(e,[t]),c.push(t)}function f(t,e){var n=t[0],r=e[0],i=t[1];if(n-i!=r-e[1])return!1;for(;n<=i;++n,++r)if(!je(o[n],o[r]))return!1;return!0}function p(t,e){var n=t[0],r=e[0],i=t[1],a=e[1];if(n-i!=r-a)return!1;for(;n<=i;++n,--a)if(!je(o[n],o[a]))return!1;return!0}function g(t,e){var n=t[0],r=e[0],i=t[1]-n;if(i!==e[1]-r)return!1;for(var a=y(t),s=y(e),l=0;l<i;++l)if(!je(o[n+(l+a)%i],o[r+(l+s)%i]))return!1;return!0}function m(t,e){var n=t[0],r=e[0],i=t[1],a=e[1],s=i-n;if(s!==a-r)return!1;for(var l=y(t),u=s-y(e),c=0;c<s;++c)if(!je(o[n+(c+l)%s],o[a-(c+u)%s]))return!1;return!0}function y(t){for(var e=t[0],n=t[1],r=e,i=r,a=o[r];++r<n;){var s=o[r];(s[0]<a[0]||s[0]===a[0]&&s[1]<a[1])&&(i=r,a=s)}return i-e}return t}(function(t){var e,n,r,i=qe(t),o=t.coordinates,a=t.lines,s=t.rings;for(n=0,r=a.length;n<r;++n)for(var l=a[n],u=l[0],c=l[1];++u<c;)i.has(o[u])&&(e={0:u,1:l[1]},l[1]=u,l=l.next=e);for(n=0,r=s.length;n<r;++n)for(var h=s[n],d=h[0],f=d,p=h[1],g=i.has(o[d]);++f<p;)i.has(o[f])&&(g?(e={0:f,1:h[1]},h[1]=f,h=h.next=e):(Ve(o,d,p,p-f),o[p]=o[d],g=!0,f=d));return t}(function(t){var e=-1,n=[],r=[],i=[];function o(t){t&&De.call(a,t.type)&&a[t.type](t)}var a={GeometryCollection:function(t){t.geometries.forEach(o)},LineString:function(t){t.arcs=s(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(s)},Polygon:function(t){t.arcs=t.arcs.map(l)},MultiPolygon:function(t){t.arcs=t.arcs.map(u)}};function s(t){for(var r=0,o=t.length;r<o;++r)i[++e]=t[r];var a={0:e-o+1,1:e};return n.push(a),a}function l(t){for(var n=0,o=t.length;n<o;++n)i[++e]=t[n];var a={0:e-o+1,1:e};return r.push(a),a}function u(t){return t.map(l)}for(var c in t)o(t[c]);return{type:"Topology",coordinates:i,lines:n,rings:r,objects:t}}(t))),o=i.coordinates,a=Fe(1.4*i.arcs.length,Ke,Qe);function s(t){t&&De.call(l,t.type)&&l[t.type](t)}t=i.objects,i.bbox=n,i.arcs=i.arcs.map((function(t,e){return a.set(t,e),o.slice(t[0],t[1]+1)})),delete i.coordinates,o=null;var l={GeometryCollection:function(t){t.geometries.forEach(s)},LineString:function(t){t.arcs=u(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(u)},Polygon:function(t){t.arcs=t.arcs.map(u)},MultiPolygon:function(t){t.arcs=t.arcs.map(c)}};function u(t){var e=[];do{var n=a.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function c(t){return t.map(u)}for(var h in t)s(t[h]);return r&&(i.transform=r,i.arcs=function(t){for(var e=-1,n=t.length;++e<n;){for(var r,i,o=t[e],a=0,s=1,l=o.length,u=o[0],c=u[0],h=u[1];++a<l;)r=(u=o[a])[0],i=u[1],r===c&&i===h||(o[s++]=[r-c,i-h],c=r,h=i);1===s&&(o[s++]=[0,0]),o.length=s}return t}(i.arcs)),i}function Ke(t){var e,n=t[0],r=t[1];return r<n&&(e=n,n=r,r=e),n+31*r}function Qe(t,e){var n,r=t[0],i=t[1],o=e[0],a=e[1];return i<r&&(n=r,r=i,i=n),a<o&&(n=o,o=a,a=n),r===o&&i===a}function $e(t,e){if(void 0===e&&(e={}),"FeatureCollection"!==ot(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==e.mutate&&void 0!==e.mutate||(t=Ce(t));var n=[];G(t,(function(t){n.push(t.geometry)}));var r=Ze({geoms:v(n).geometry});return function(t){return Le(t,Re.apply(this,arguments))}(r,r.objects.geoms.geometries)}function tn(t,e){if(void 0===e&&(e={}),!O(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==ot(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Ce(t));var r=function(t){var e={};G(t,(function(t){e[t.geometry.type]=!0}));var n=Object.keys(e);return 1===n.length?n[0]:null}(t);if(!r)throw new Error("geojson must be homogenous");var i=t;switch(r){case"LineString":return ke(i,e);case"Polygon":return $e(i,e);default:throw new Error(r+" is not supported")}}function en(t,e){void 0===e&&(e={});var n="object"==typeof e?e.mutate:e;if(!t)throw new Error("geojson is required");var r=ot(t),i=[];switch(r){case"LineString":i=nn(t);break;case"MultiLineString":case"Polygon":$(t).forEach((function(t){i.push(nn(t))}));break;case"MultiPolygon":$(t).forEach((function(t){var e=[];t.forEach((function(t){e.push(nn(t))})),i.push(e)}));break;case"Point":return t;case"MultiPoint":var o={};$(t).forEach((function(t){var e=t.join("-");Object.prototype.hasOwnProperty.call(o,e)||(i.push(t),o[e]=!0)}));break;default:throw new Error(r+" geometry not supported")}return t.coordinates?!0===n?(t.coordinates=i,t):{type:r,coordinates:i}:!0===n?(t.geometry.coordinates=i,t):a({type:r,coordinates:i},t.properties,{bbox:t.bbox,id:t.id})}function nn(t){var e=$(t);if(2===e.length&&!rn(e[0],e[1]))return e;var n=[],r=e.length-1,i=n.length;n.push(e[0]);for(var o=1;o<r;o++){var a=n[n.length-1];e[o][0]===a[0]&&e[o][1]===a[1]||(n.push(e[o]),(i=n.length)>2&&on(n[i-3],n[i-1],n[i-2])&&n.splice(n.length-2,1))}if(n.push(e[e.length-1]),i=n.length,rn(e[0],e[e.length-1])&&i<4)throw new Error("invalid polygon");return on(n[i-3],n[i-1],n[i-2])&&n.splice(n.length-2,1),n}function rn(t,e){return t[0]===e[0]&&t[1]===e[1]}function on(t,e,n){var r=n[0],i=n[1],o=t[0],a=t[1],s=e[0],l=e[1],u=s-o,c=l-a;return 0===(r-o)*c-(i-a)*u&&(Math.abs(u)>=Math.abs(c)?u>0?o<=r&&r<=s:s<=r&&r<=o:c>0?a<=i&&i<=l:l<=i&&i<=a)}function an(t,e,n){var r=e.x,i=e.y,o=n.x-r,a=n.y-i;if(0!==o||0!==a){var s=((t.x-r)*o+(t.y-i)*a)/(o*o+a*a);s>1?(r=n.x,i=n.y):s>0&&(r+=o*s,i+=a*s)}return(o=t.x-r)*o+(a=t.y-i)*a}function sn(t,e,n,r,i){for(var o,a=r,s=e+1;s<n;s++){var l=an(t[s],t[e],t[n]);l>a&&(o=s,a=l)}a>r&&(o-e>1&&sn(t,e,o,r,i),i.push(t[o]),n-o>1&&sn(t,o,n,r,i))}function ln(t,e){var n=t.length-1,r=[t[0]];return sn(t,0,n,e,r),r.push(t[n]),r}function un(t,e,n){if(t.length<=2)return t;var r=void 0!==e?e*e:1;return ln(t=n?t:function(t,e){for(var n,r,i,o,a,s=t[0],l=[s],u=1,c=t.length;u<c;u++)n=t[u],i=s,o=void 0,a=void 0,o=(r=n).x-i.x,a=r.y-i.y,o*o+a*a>e&&(l.push(n),s=n);return s!==n&&l.push(n),l}(t,r),r)}function cn(t,e,n){return un(t.map((function(t){return{x:t[0],y:t[1],z:t[2]}})),e,n).map((function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]}))}function hn(t,e,n){return t.map((function(t){var r=t.map((function(t){return{x:t[0],y:t[1]}}));if(r.length<4)throw new Error("invalid polygon");for(var i=un(r,e,n).map((function(t){return[t.x,t.y]}));!dn(i);)i=un(r,e-=.01*e,n).map((function(t){return[t.x,t.y]}));return i[i.length-1][0]===i[0][0]&&i[i.length-1][1]===i[0][1]||i.push(i[0]),i}))}function dn(t){return!(t.length<3)&&!(3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}var fn=function(){function t(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],r=this.points[e+1];this.centers.push({x:(n.x+r.x)/2,y:(n.y+r.y)/2,z:(n.z+r.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){var i=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,a=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+a)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+a)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return t.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var i=this.pos(r);Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z))>t&&(e.push(r),n=i)}return e},t.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},t.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*n);return function(t,e,n,r,i){var o=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:i.x*o[0]+r.x*o[1]+n.x*o[2]+e.x*o[3],y:i.y*o[0]+r.y*o[1]+n.y*o[2]+e.y*o[3],z:i.z*o[0]+r.z*o[1]+n.z*o[2]+e.z*o[3]}}((this.length-1)*n-r,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])},t}();function pn(t,e){void 0===e&&(e={});for(var n=e.resolution||1e4,r=e.sharpness||.85,i=[],o=it(t).coordinates.map((function(t){return{x:t[0],y:t[1]}})),a=new fn({duration:n,points:o,sharpness:r}),s=function(t){var e=a.pos(t);Math.floor(t/100)%2==0&&i.push([e.x,e.y])},l=0;l<a.duration;l+=10)s(l);return s(a.duration),d(i,e.properties)}function gn(t,e){void 0===e&&(e={});var n=Number(t[0]),r=Number(t[1]),i=Number(t[2]),o=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var a=[n,r];return c([[a,[i,r],[i,o],[n,o],a]],e.properties,{bbox:t,id:e.id})}function mn(t){return gn(K(t))}function yn(t){var e=t[0],n=t[1],r=t[2],i=t[3];if(_e(t.slice(0,2),[r,n])>=_e(t.slice(0,2),[e,i])){var o=(n+i)/2;return[e,o-(r-e)/2,r,o+(r-e)/2]}var a=(e+r)/2;return[a-(i-n)/2,n,a+(i-n)/2,i]}function vn(t,e,n,r){void 0===r&&(r={});var i=Q(t),o=C(i[0]),a=C(i[1]),s=C(n),u=x(e,r.units),c=Math.asin(Math.sin(a)*Math.cos(u)+Math.cos(a)*Math.sin(u)*Math.cos(s));return l([E(o+Math.atan2(Math.sin(s)*Math.sin(u)*Math.cos(a),Math.cos(u)-Math.sin(a)*Math.sin(c))),E(c)],r.properties)}function bn(t,e,n){void 0===n&&(n={});for(var r=n.steps||64,i=n.properties?n.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},o=[],a=0;a<r;a++)o.push(vn(t,e,-360*a/r,n).geometry.coordinates);return o.push(o[0]),c([o],i)}function _n(t,e,n){if(void 0===n&&(n={}),!0===n.final)return function(t,e){var n=_n(e,t);return(n+180)%360}(t,e);var r=Q(t),i=Q(e),o=C(r[0]),a=C(i[0]),s=C(r[1]),l=C(i[1]),u=Math.sin(a-o)*Math.cos(l),c=Math.cos(s)*Math.sin(l)-Math.sin(s)*Math.cos(l)*Math.cos(a-o);return E(Math.atan2(u,c))}function xn(t,e){void 0===e&&(e={});var n=K(t);return l([(n[0]+n[2])/2,(n[1]+n[3])/2],e.properties,e)}function wn(t,e){void 0===e&&(e={});var n=0,r=0,i=0;return L(t,(function(t){n+=t[0],r+=t[1],i++}),!0),l([n/i,r/i],e.properties)}function Sn(t){var e=[];return"FeatureCollection"===t.type?F(t,(function(t){L(t,(function(n){e.push(l(n,t.properties))}))})):L(t,(function(n){e.push(l(n,t.properties))})),p(e)}var En=Mn,Cn=Mn;function Mn(t,e,n){n=n||2;var r,i,o,a,s,l,u,c=e&&e.length,h=c?e[0]*n:t.length,d=Tn(t,0,h,n,!0),f=[];if(!d)return f;if(c&&(d=function(t,e,n,r){var i,o,a,s=[];for(i=0,o=e.length;i<o;i++)(a=Tn(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),s.push(Fn(a));for(s.sort(Nn),i=0;i<s.length;i++)Rn(s[i],n),n=An(n,n.next);return n}(t,e,d,n)),t.length>80*n){r=o=t[0],i=a=t[1];for(var p=n;p<h;p+=n)(s=t[p])<r&&(r=s),(l=t[p+1])<i&&(i=l),s>o&&(o=s),l>a&&(a=l);u=0!==(u=Math.max(o-r,a-i))?1/u:0}return On(d,f,n,r,i,u),f}function Tn(t,e,n,r,i){var o,a;if(i===Xn(t,e,n,r)>0)for(o=e;o<n;o+=r)a=Hn(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=Hn(o,t[o],t[o+1],a);return a&&Un(a,a.next)&&(Wn(a),a=a.next),a}function An(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!Un(r,r.next)&&0!==zn(r.prev,r,r.next))r=r.next;else{if(Wn(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function On(t,e,n,r,i,o,a){if(t){!a&&o&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=Dn(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,l,u=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<u&&(s++,r=r.nextZ);e++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(a>1)}(i)}(t,r,i,o);for(var s,l,u=t;t.prev!==t.next;)if(s=t.prev,l=t.next,o?In(t,r,i,o):kn(t))e.push(s.i/n),e.push(t.i/n),e.push(l.i/n),Wn(t),t=l.next,u=l.next;else if((t=l)===u){a?1===a?On(t=Pn(t,e,n),e,n,r,i,o,2):2===a&&Ln(t,e,n,r,i,o):On(An(t),e,n,r,i,o,1);break}}}function kn(t){var e=t.prev,n=t,r=t.next;if(zn(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(jn(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&zn(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function In(t,e,n,r){var i=t.prev,o=t,a=t.next;if(zn(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,l=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,u=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=Dn(s,l,e,n,r),d=Dn(u,c,e,n,r),f=t.prevZ,p=t.nextZ;f&&f.z>=h&&p&&p.z<=d;){if(f!==t.prev&&f!==t.next&&jn(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&zn(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,p!==t.prev&&p!==t.next&&jn(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&zn(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;f&&f.z>=h;){if(f!==t.prev&&f!==t.next&&jn(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&zn(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&jn(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&zn(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function Pn(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!Un(i,o)&&Gn(i,r,r.next,o)&&qn(i,o)&&qn(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),Wn(r),Wn(r.next),r=t=o),r=r.next}while(r!==t);return r}function Ln(t,e,n,r,i,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Bn(a,s)){var l=Vn(a,s);return a=An(a,a.next),l=An(l,l.next),On(a,e,n,r,i,o),void On(l,e,n,r,i,o)}s=s.next}a=a.next}while(a!==t)}function Nn(t,e){return t.x-e.x}function Rn(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n.prev;var l,u=n,c=n.x,h=n.y,d=1/0;for(r=n.next;r!==u;)i>=r.x&&r.x>=c&&i!==r.x&&jn(o<h?i:a,o,c,h,o<h?a:i,o,r.x,r.y)&&((l=Math.abs(o-r.y)/(i-r.x))<d||l===d&&r.x>n.x)&&qn(r,t)&&(n=r,d=l),r=r.next;return n}(t,e)){var n=Vn(e,t);An(n,n.next)}}function Dn(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Fn(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function jn(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function Bn(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Gn(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&qn(t,e)&&qn(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)}function zn(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Un(t,e){return t.x===e.x&&t.y===e.y}function Gn(t,e,n,r){return!!(Un(t,e)&&Un(n,r)||Un(t,r)&&Un(n,e))||zn(t,e,n)>0!=zn(t,e,r)>0&&zn(n,r,t)>0!=zn(n,r,e)>0}function qn(t,e){return zn(t.prev,t,t.next)<0?zn(t,e,t.next)>=0&&zn(t,t.prev,e)>=0:zn(t,e,t.prev)<0||zn(t,t.next,e)<0}function Vn(t,e){var n=new Yn(t.i,t.x,t.y),r=new Yn(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Hn(t,e,n,r){var i=new Yn(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Wn(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Yn(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Xn(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}function Jn(t){var e=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}(t),n=En(e.vertices,e.holes,2),r=[],i=[];n.forEach((function(t,r){var o=n[r];i.push([e.vertices[2*o],e.vertices[2*o+1]])}));for(var o=0;o<i.length;o+=3){var a=i.slice(o,o+3);a.push(i[o]),r.push(c([a]))}return r}function Zn(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var n,r=1/0,i=0;return F(e,(function(e,n){var o=_e(t,e);o<r&&(i=n,r=o)})),(n=Ce(e.features[i])).properties.featureIndex=i,n.properties.distanceToPoint=r,n}function Kn(t){if(!t)throw new Error("geojson is required");var e=[];return G(t,(function(t){!function(t,e){var n=[],r=t.geometry;if(null!==r){switch(r.type){case"Polygon":n=$(r);break;case"LineString":n=[$(r)]}n.forEach((function(n){(function(t,e){var n=[];return t.reduce((function(t,r){var i=d([t,r],e);return i.bbox=function(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return[n<i?n:i,r<o?r:o,n>i?n:i,r>o?r:o]}(t,r),n.push(i),r})),n})(n,t.properties).forEach((function(t){t.id=e.length,e.push(t)}))}))}}(t,e)})),p(e)}Mn.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(Xn(t,0,o,n));if(i)for(var s=0,l=e.length;s<l;s++){var u=e[s]*n,c=s<l-1?e[s+1]*n:t.length;a-=Math.abs(Xn(t,u,c,n))}var h=0;for(s=0;s<r.length;s+=3){var d=r[s]*n,f=r[s+1]*n,p=r[s+2]*n;h+=Math.abs((t[d]-t[p])*(t[f+1]-t[d+1])-(t[d]-t[f])*(t[p+1]-t[d+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},Mn.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n},En.default=Cn;var Qn=Ut((function(t,e){function n(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function r(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!f(t[0])||!f(t[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:t},e,r)}function i(t,e,r){void 0===r&&(r={});for(var i=0,o=t;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:t},e,r)}function o(t,e,r){if(void 0===r&&(r={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:t},e,r)}function a(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function s(t,e,r){return void 0===r&&(r={}),n({type:"MultiLineString",coordinates:t},e,r)}function l(t,e,r){return void 0===r&&(r={}),n({type:"MultiPoint",coordinates:t},e,r)}function u(t,e,r){return void 0===r&&(r={}),n({type:"MultiPolygon",coordinates:t},e,r)}function c(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t*r}function h(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t/r}function d(t){return t%(2*Math.PI)*180/Math.PI}function f(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:1.0936*e.earthRadius},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=n,e.geometry=function(t,e,n){switch(t){case"Point":return r(e).geometry;case"LineString":return o(e).geometry;case"Polygon":return i(e).geometry;case"MultiPoint":return l(e).geometry;case"MultiLineString":return s(e).geometry;case"MultiPolygon":return u(e).geometry;default:throw new Error(t+" is invalid")}},e.point=r,e.points=function(t,e,n){return void 0===n&&(n={}),a(t.map((function(t){return r(t,e)})),n)},e.polygon=i,e.polygons=function(t,e,n){return void 0===n&&(n={}),a(t.map((function(t){return i(t,e)})),n)},e.lineString=o,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),a(t.map((function(t){return o(t,e)})),n)},e.featureCollection=a,e.multiLineString=s,e.multiPoint=l,e.multiPolygon=u,e.geometryCollection=function(t,e,r){return void 0===r&&(r={}),n({type:"GeometryCollection",geometries:t},e,r)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},e.radiansToLength=c,e.lengthToRadians=h,e.lengthToDegrees=function(t,e){return d(h(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=d,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return c(h(t,e),n)},e.convertArea=function(t,n,r){if(void 0===n&&(n="meters"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=e.areaFactors[n];if(!i)throw new Error("invalid original units");var o=e.areaFactors[r];if(!o)throw new Error("invalid final units");return t/i*o},e.isNumber=f,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!f(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}}));function $n(t,e,n){if(null!==t)for(var r,i,o,a,s,l,u,c,h=0,d=0,f=t.type,p="FeatureCollection"===f,g="Feature"===f,m=p?t.features.length:1,y=0;y<m;y++){s=(c=!!(u=p?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var v=0;v<s;v++){var b=0,_=0;if(null!==(a=c?u.geometries[v]:u)){l=a.coordinates;var x=a.type;switch(h=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(l,d,y,b,_))return!1;d++,b++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(!1===e(l[r],d,y,b,_))return!1;d++,"MultiPoint"===x&&b++}"LineString"===x&&b++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++){if(!1===e(l[r][i],d,y,b,_))return!1;d++}"MultiLineString"===x&&b++,"Polygon"===x&&_++}"Polygon"===x&&b++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(_=0,i=0;i<l[r].length;i++){for(o=0;o<l[r][i].length-h;o++){if(!1===e(l[r][i][o],d,y,b,_))return!1;d++}_++}b++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===$n(a.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function tr(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function er(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function nr(t,e){var n,r,i,o,a,s,l,u,c,h,d=0,f="FeatureCollection"===t.type,p="Feature"===t.type,g=f?t.features.length:1;for(n=0;n<g;n++){for(s=f?t.features[n].geometry:p?t.geometry:t,u=f?t.features[n].properties:p?t.properties:{},c=f?t.features[n].bbox:p?t.bbox:void 0,h=f?t.features[n].id:p?t.id:void 0,a=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=l?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,d,u,c,h))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],d,u,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,d,u,c,h))return!1;d++}}function rr(t,e){nr(t,(function(t,n,r,i,o){var a,s=null===t?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==e(Qn.feature(t,r,{bbox:i,id:o}),n,0)&&void 0}switch(s){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var l=0;l<t.coordinates.length;l++){var u={type:a,coordinates:t.coordinates[l]};if(!1===e(Qn.feature(u,r),n,l))return!1}}))}function ir(t,e){rr(t,(function(t,n,r){var i=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var a,s=0,l=0,u=0;return!1!==$n(t,(function(o,c,h,d,f){if(void 0===a||n>s||d>l||f>u)return a=o,s=n,l=d,u=f,void(i=0);var p=Qn.lineString([a,o],t.properties);if(!1===e(p,n,r,f,i))return!1;i++,a=o}))&&void 0}}}))}function or(t,e){if(!t)throw new Error("geojson is required");rr(t,(function(t,n,r){if(null!==t.geometry){var i=t.geometry.type,o=t.geometry.coordinates;switch(i){case"LineString":if(!1===e(t,n,r,0,0))return!1;break;case"Polygon":for(var a=0;a<o.length;a++)if(!1===e(Qn.lineString(o[a],t.properties),n,r,a))return!1}}}))}var ar=function(t){var e=[];return $n(t,(function(t){e.push(t)})),e},sr=$n,lr=function(t,e,n,r){var i=n;return $n(t,(function(t,r,o,a,s){i=0===r&&void 0===n?t:e(i,t,r,o,a,s)}),r),i},ur=er,cr=function(t,e,n){var r=n;return er(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},hr=function(t,e){if(e=e||{},!Qn.isObject(e))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,a=e.coordIndex||0,s=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),s=s||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":s=s||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var l=n.coordinates;switch(n.type){case"Point":return Qn.point(l,s,e);case"MultiPoint":return i<0&&(i=l.length+i),Qn.point(l[i],s,e);case"LineString":return a<0&&(a=l.length+a),Qn.point(l[a],s,e);case"Polygon":return o<0&&(o=l.length+o),a<0&&(a=l[o].length+a),Qn.point(l[o][a],s,e);case"MultiLineString":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a),Qn.point(l[i][a],s,e);case"MultiPolygon":return i<0&&(i=l.length+i),o<0&&(o=l[i].length+o),a<0&&(a=l[i][o].length-a),Qn.point(l[i][o][a],s,e)}throw new Error("geojson is invalid")},dr=function(t,e){if(e=e||{},!Qn.isObject(e))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,a=e.segmentIndex||0,s=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),s=s||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":s=s||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var l=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=l.length+a-1),Qn.lineString([l[a],l[a+1]],s,e);case"Polygon":return o<0&&(o=l.length+o),a<0&&(a=l[o].length+a-1),Qn.lineString([l[o][a],l[o][a+1]],s,e);case"MultiLineString":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a-1),Qn.lineString([l[i][a],l[i][a+1]],s,e);case"MultiPolygon":return i<0&&(i=l.length+i),o<0&&(o=l[i].length+o),a<0&&(a=l[i][o].length-a-1),Qn.lineString([l[i][o][a],l[i][o][a+1]],s,e)}throw new Error("geojson is invalid")},fr=rr,pr=function(t,e,n){var r=n;return rr(t,(function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)})),r},gr=nr,mr=function(t,e,n){var r=n;return nr(t,(function(t,i,o,a,s){r=0===i&&void 0===n?t:e(r,t,i,o,a,s)})),r},yr=or,vr=function(t,e,n){var r=n;return or(t,(function(t,i,o,a){r=0===i&&void 0===n?t:e(r,t,i,o,a)})),r},br=tr,_r=function(t,e,n){var r=n;return tr(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},xr=ir,wr=function(t,e,n){var r=n,i=!1;return ir(t,(function(t,o,a,s,l){r=!1===i&&void 0===n?t:e(r,t,o,a,s,l),i=!0})),r},Sr=Object.defineProperty({coordAll:ar,coordEach:sr,coordReduce:lr,featureEach:ur,featureReduce:cr,findPoint:hr,findSegment:dr,flattenEach:fr,flattenReduce:pr,geomEach:gr,geomReduce:mr,lineEach:yr,lineReduce:vr,propEach:br,propReduce:_r,segmentEach:xr,segmentReduce:wr},"__esModule",{value:!0});function Er(t){var e=[1/0,1/0,-1/0,-1/0];return Sr.coordEach(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}Er.default=Er;var Cr=Er,Mr=Object.defineProperty({default:Cr},"__esModule",{value:!0}).default,Tr=Sr.featureEach,Ar=(Sr.coordEach,Qn.polygon,Qn.featureCollection);function Or(t){var e=Mt(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:Mr(t),Mt.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:Mr(t),e.push(t)})):Tr(t,(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:Mr(t),e.push(t)})),Mt.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:Mr(t),Mt.prototype.remove.call(this,t,e)},e.clear=function(){return Mt.prototype.clear.call(this)},e.search=function(t){var e=Mt.prototype.search.call(this,this.toBBox(t));return Ar(e)},e.collides=function(t){return Mt.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=Mt.prototype.all.call(this);return Ar(t)},e.toJSON=function(){return Mt.prototype.toJSON.call(this)},e.fromJSON=function(t){return Mt.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=Mr(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=Mr(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}var kr=Or,Ir=Or;function Pr(t,e){var n={},r=[];if("LineString"===t.type&&(t=a(t)),"LineString"===e.type&&(e=a(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var i=Lr(t,e);return i&&r.push(i),p(r)}var o=kr();return o.load(Kn(e)),F(Kn(t),(function(t){F(o.search(t),(function(e){var i=Lr(t,e);if(i){var o=$(i).join(",");n[o]||(n[o]=!0,r.push(i))}}))})),p(r)}function Lr(t,e){var n=$(t),r=$(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==r.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=n[0][0],o=n[0][1],a=n[1][0],s=n[1][1],u=r[0][0],c=r[0][1],h=r[1][0],d=r[1][1],f=(d-c)*(a-i)-(h-u)*(s-o),p=(h-u)*(o-c)-(d-c)*(i-u),g=(a-i)*(o-c)-(s-o)*(i-u);if(0===f)return null;var m=p/f,y=g/f;return m>=0&&m<=1&&y>=0&&y<=1?l([i+m*(a-i),o+m*(s-o)]):null}function Nr(t,e,n){void 0===n&&(n={});var r=l([1/0,1/0],{dist:1/0}),i=0;return G(t,(function(t){for(var o=$(t),a=0;a<o.length-1;a++){var s=l(o[a]);s.properties.dist=_e(e,s,n);var u=l(o[a+1]);u.properties.dist=_e(e,u,n);var c=_e(s,u,n),h=Math.max(s.properties.dist,u.properties.dist),f=_n(s,u),p=vn(e,h,f+90,n),g=vn(e,h,f-90,n),m=Pr(d([p.geometry.coordinates,g.geometry.coordinates]),d([s.geometry.coordinates,u.geometry.coordinates])),y=null;m.features.length>0&&((y=m.features[0]).properties.dist=_e(e,y,n),y.properties.location=i+_e(s,y,n)),s.properties.dist<r.properties.dist&&((r=s).properties.index=a,r.properties.location=i),u.properties.dist<r.properties.dist&&((r=u).properties.index=a+1,r.properties.location=i+c),y&&y.properties.dist<r.properties.dist&&((r=y).properties.index=a),i+=c}})),r}function Rr(t,e,r){void 0===r&&(r={});var i=Q(t),o=Q(e);return o[0]+=o[0]-i[0]>180?-360:i[0]-o[0]>180?360:0,M(function(t,e,r){var i=r=void 0===r?n:Number(r),o=t[1]*Math.PI/180,a=e[1]*Math.PI/180,s=a-o,l=Math.abs(e[0]-t[0])*Math.PI/180;l>Math.PI&&(l-=2*Math.PI);var u=Math.log(Math.tan(a/2+Math.PI/4)/Math.tan(o/2+Math.PI/4)),c=Math.abs(u)>1e-11?s/u:Math.cos(o);return Math.sqrt(s*s+c*c*l*l)*i}(i,o),"meters",r.units)}function Dr(t,e,n){if(void 0===n&&(n={}),n.method||(n.method="geodesic"),n.units||(n.units="kilometers"),!t)throw new Error("pt is required");if(Array.isArray(t)?t=l(t):"Point"===t.type?t=a(t):nt(t,"Point","point"),!e)throw new Error("line is required");Array.isArray(e)?e=d(e):"LineString"===e.type?e=a(e):nt(e,"LineString","line");var r=1/0,i=t.geometry.coordinates;return V(e,(function(t){var e=t.geometry.coordinates[0],o=t.geometry.coordinates[1],a=function(t,e,n,r){var i=[n[0]-e[0],n[1]-e[1]],o=Fr([t[0]-e[0],t[1]-e[1]],i);if(o<=0)return jr(t,e,{method:r.method,units:"degrees"});var a=Fr(i,i);if(a<=o)return jr(t,n,{method:r.method,units:"degrees"});var s=o/a,l=[e[0]+s*i[0],e[1]+s*i[1]];return jr(t,l,{method:r.method,units:"degrees"})}(i,e,o,n);a<r&&(r=a)})),M(r,"degrees",n.units)}function Fr(t,e){return t[0]*e[0]+t[1]*e[1]}function jr(t,e,n){return"planar"===n.method?Rr(t,e,n):_e(t,e,n)}function Br(t,e,n,r,i,o,a,s){var l,u,c,h,d={x:null,y:null,onLine1:!1,onLine2:!1};return 0===(l=(s-o)*(n-t)-(a-i)*(r-e))?null!==d.x&&null!==d.y&&d:(h=(n-t)*(u=e-o)-(r-e)*(c=t-i),u=((a-i)*u-(s-o)*c)/l,c=h/l,d.x=t+u*(n-t),d.y=e+u*(r-e),u>=0&&u<=1&&(d.onLine1=!0),c>=0&&c<=1&&(d.onLine2=!0),!(!d.onLine1||!d.onLine2)&&[d.x,d.y])}function zr(t){for(var e=function(t){return"FeatureCollection"!==t.type?"Feature"!==t.type?p([a(t)]):p([t]):t}(t),n=xn(e),r=!1,i=0;!r&&i<e.features.length;){var o,s=e.features[i].geometry,u=!1;if("Point"===s.type)n.geometry.coordinates[0]===s.coordinates[0]&&n.geometry.coordinates[1]===s.coordinates[1]&&(r=!0);else if("MultiPoint"===s.type){var c=!1;for(o=0;!c&&o<s.coordinates.length;)n.geometry.coordinates[0]===s.coordinates[o][0]&&n.geometry.coordinates[1]===s.coordinates[o][1]&&(r=!0,c=!0),o++}else if("LineString"===s.type)for(o=0;!u&&o<s.coordinates.length-1;)Ur(n.geometry.coordinates[0],n.geometry.coordinates[1],s.coordinates[o][0],s.coordinates[o][1],s.coordinates[o+1][0],s.coordinates[o+1][1])&&(u=!0,r=!0),o++;else if("MultiLineString"===s.type)for(var h=0;h<s.coordinates.length;){u=!1,o=0;for(var d=s.coordinates[h];!u&&o<d.length-1;)Ur(n.geometry.coordinates[0],n.geometry.coordinates[1],d[o][0],d[o][1],d[o+1][0],d[o+1][1])&&(u=!0,r=!0),o++;h++}else"Polygon"!==s.type&&"MultiPolygon"!==s.type||ye(n,s)&&(r=!0);i++}if(r)return n;var f=p([]);for(i=0;i<e.features.length;i++)f.features=f.features.concat(Sn(e.features[i]).features);return l(Zn(n,f).geometry.coordinates)}function Ur(t,e,n,r,i,o){return Math.sqrt((i-n)*(i-n)+(o-r)*(o-r))===Math.sqrt((t-n)*(t-n)+(e-r)*(e-r))+Math.sqrt((i-t)*(i-t)+(o-e)*(o-e))}kr.default=Ir;var Gr=6378137;function qr(t){return U(t,(function(t,e){return t+function(t){var e,n=0;switch(t.type){case"Polygon":return Vr(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=Vr(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(e)}),0)}function Vr(t){var e=0;if(t&&t.length>0){e+=Math.abs(Hr(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(Hr(t[n]))}return e}function Hr(t){var e,n,r,i,o,a,s=0,l=t.length;if(l>2){for(a=0;a<l;a++)a===l-2?(r=l-2,i=l-1,o=0):a===l-1?(r=l-1,i=0,o=1):(r=a,i=a+1,o=a+2),e=t[r],n=t[i],s+=(Wr(t[o][0])-Wr(e[0]))*Math.sin(Wr(n[1]));s=s*Gr*Gr/2}return s}function Wr(t){return t*Math.PI/180}function Yr(t,e){return void 0===e&&(e={}),H(t,(function(t,n){var r=n.geometry.coordinates;return t+_e(r[0],r[1],e)}),0)}function Xr(t,e,n,r){if(!O(r=r||{}))throw new Error("options is invalid");var i,o=[];if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}for(var a,s,l,u=i.length,c=0,h=0;h<i.length&&!(e>=c&&h===i.length-1);h++){if(c>e&&0===o.length){if(!(a=e-c))return o.push(i[h]),d(o);s=_n(i[h],i[h-1])-180,l=vn(i[h],a,s,r),o.push(l.geometry.coordinates)}if(c>=n)return(a=n-c)?(s=_n(i[h],i[h-1])-180,l=vn(i[h],a,s,r),o.push(l.geometry.coordinates),d(o)):(o.push(i[h]),d(o));if(c>=e&&o.push(i[h]),h===i.length-1)return d(o);c+=_e(i[h],i[h+1],r)}if(c<e&&i.length===u)throw new Error("Start position is beyond line");var f=i[i.length-1];return d([f,f])}function Jr(t,e,n){void 0===n&&(n={});for(var r=Q(t),i=$(e),o=0;o<i.length-1;o++){var a=!1;if(n.ignoreEndVertices&&(0===o&&(a="start"),o===i.length-2&&(a="end"),0===o&&o+1===i.length-1&&(a="both")),Zr(i[o],i[o+1],r,a,void 0===n.epsilon?null:n.epsilon))return!0}return!1}function Zr(t,e,n,r,i){var o=n[0],a=n[1],s=t[0],l=t[1],u=e[0],c=e[1],h=u-s,d=c-l,f=(n[0]-s)*d-(n[1]-l)*h;if(null!==i){if(Math.abs(f)>i)return!1}else if(0!==f)return!1;return r?"start"===r?Math.abs(h)>=Math.abs(d)?h>0?s<o&&o<=u:u<=o&&o<s:d>0?l<a&&a<=c:c<=a&&a<l:"end"===r?Math.abs(h)>=Math.abs(d)?h>0?s<=o&&o<u:u<o&&o<=s:d>0?l<=a&&a<c:c<a&&a<=l:"both"===r&&(Math.abs(h)>=Math.abs(d)?h>0?s<o&&o<u:u<o&&o<s:d>0?l<a&&a<c:c<a&&a<l):Math.abs(h)>=Math.abs(d)?h>0?s<=o&&o<=u:u<=o&&o<=s:d>0?l<=a&&a<=c:c<=a&&a<=l}function Kr(t,e){var n=it(t),r=it(e),i=n.type,o=r.type;switch(i){case"Point":switch(o){case"MultiPoint":return function(t,e){var n,r=!1;for(n=0;n<e.coordinates.length;n++)if($r(e.coordinates[n],t.coordinates)){r=!0;break}return r}(n,r);case"LineString":return Jr(n,r,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return ye(n,r,{ignoreBoundary:!0});default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"MultiPoint":return function(t,e){for(var n=0;n<t.coordinates.length;n++){for(var r=!1,i=0;i<e.coordinates.length;i++)$r(t.coordinates[n],e.coordinates[i])&&(r=!0);if(!r)return!1}return!0}(n,r);case"LineString":return function(t,e){for(var n=!1,r=0;r<t.coordinates.length;r++){if(!Jr(t.coordinates[r],e))return!1;n||(n=Jr(t.coordinates[r],e,{ignoreEndVertices:!0}))}return n}(n,r);case"Polygon":case"MultiPolygon":return function(t,e){for(var n=!0,r=!1,i=0;i<t.coordinates.length;i++){if(!(r=ye(t.coordinates[1],e))){n=!1;break}r=ye(t.coordinates[1],e,{ignoreBoundary:!0})}return n&&r}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"LineString":return function(t,e){for(var n=0;n<t.coordinates.length;n++)if(!Jr(t.coordinates[n],e))return!1;return!0}(n,r);case"Polygon":case"MultiPolygon":return function(t,e){var n=K(e),r=K(t);if(!Qr(n,r))return!1;for(var i=!1,o=0;o<t.coordinates.length-1;o++){if(!ye(t.coordinates[o],e))return!1;i||(i=ye(t.coordinates[o],e,{ignoreBoundary:!0})),i||(i=ye(ti(t.coordinates[o],t.coordinates[o+1]),e,{ignoreBoundary:!0}))}return i}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Polygon":case"MultiPolygon":return function(t,e){var n=K(t);if(!Qr(K(e),n))return!1;for(var r=0;r<t.coordinates[0].length;r++)if(!ye(t.coordinates[0][r],e))return!1;return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function Qr(t,e){return!(t[0]>e[0])&&!(t[2]<e[2])&&!(t[1]>e[1])&&!(t[3]<e[3])}function $r(t,e){return t[0]===e[0]&&t[1]===e[1]}function ti(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function ei(t,e,n){void 0===n&&(n={}),n.mask&&!n.units&&(n.units="kilometers");for(var r=[],i=t[0],o=t[1],a=t[2],s=t[3],u=e/_e([i,o],[a,o],n)*(a-i),c=e/_e([i,o],[i,s],n)*(s-o),h=a-i,d=s-o,f=Math.floor(h/u),g=(d-Math.floor(d/c)*c)/2,m=i+(h-f*u)/2;m<=a;){for(var y=o+g;y<=s;){var v=l([m,y],n.properties);n.mask?Kr(v,n.mask)&&r.push(v):r.push(v),y+=c}m+=u}return p(r)}function ni(t,e){void 0===e&&(e={});var n=e.precision,r=e.coordinates,i=e.mutate;if(n=null==n||isNaN(n)?6:n,r=null==r||isNaN(r)?3:r,!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof r)throw new Error("<coordinates> must be a number");!1!==i&&void 0!==i||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,n);return L(t,(function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length);for(var r=0;r<t.length;r++)t[r]=Math.round(t[r]*e)/e}(t,o,r)})),t}function ri(t){if(!t)throw new Error("geojson is required");var e=[];return G(t,(function(t){e.push(t)})),p(e)}function ii(t,e,n){if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===n&&(n=1);var r=t.geometry.coordinates,i=[],o={};if(n){for(var a=[],s=0;s<r.length;s++)for(var l=0;l<r[s].length-1;l++)a.push(g(s,l));var u=Mt();u.load(a)}for(var c=0;c<r.length;c++)for(var h=0;h<r[c].length-1;h++)if(n)u.search(g(c,h)).forEach((function(t){var e=t.ring,n=t.edge;p(c,h,e,n)}));else for(var d=0;d<r.length;d++)for(var f=0;f<r[d].length-1;f++)p(c,h,d,f);return e||(i={type:"Feature",geometry:{type:"MultiPoint",coordinates:i}}),i;function p(t,n,a,s){var l,u,c=r[t][n],h=r[t][n+1],d=r[a][s],f=r[a][s+1],p=function(t,e,n,r){if(oi(t,n)||oi(t,r)||oi(e,n)||oi(r,n))return null;var i=t[0],o=t[1],a=e[0],s=e[1],l=n[0],u=n[1],c=r[0],h=r[1],d=(i-a)*(u-h)-(o-s)*(l-c);return 0===d?null:[((i*s-o*a)*(l-c)-(i-a)*(l*h-u*c))/d,((i*s-o*a)*(u-h)-(o-s)*(l*h-u*c))/d]}(c,h,d,f);if(null!==p&&(l=h[0]!==c[0]?(p[0]-c[0])/(h[0]-c[0]):(p[1]-c[1])/(h[1]-c[1]),u=f[0]!==d[0]?(p[0]-d[0])/(f[0]-d[0]):(p[1]-d[1])/(f[1]-d[1]),!(l>=1||l<=0||u>=1||u<=0))){var g=p,m=!o[g];m&&(o[g]=!0),e?i.push(e(p,t,n,c,h,l,a,s,d,f,u,m)):i.push(p)}}function g(t,e){var n,i,o,a,s=r[t][e],l=r[t][e+1];return s[0]<l[0]?(n=s[0],i=l[0]):(n=l[0],i=s[0]),s[1]<l[1]?(o=s[1],a=l[1]):(o=l[1],a=s[1]),{minX:n,minY:o,maxX:i,maxY:a,ring:t,edge:e}}}function oi(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!oi(t[n],e[n]))return!1}else if(t[n]!==e[n])return!1;return!0}function ai(t){if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var e=t.geometry.coordinates.length,n=[],r=0;r<e;r++){var i=t.geometry.coordinates[r];hi(i[0],i[i.length-1])||i.push(i[0]),n.push.apply(n,i.slice(0,i.length-1))}if(!function(t){for(var e={},n=1,r=0,i=t.length;r<i;++r){if(Object.prototype.hasOwnProperty.call(e,t[r])){n=0;break}e[t[r]]=1}return n}(n))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var o=n.length,a=ii(t,(function(t,e,n,r,i,o,a,s,l,u,c,h){return[t,e,n,r,i,o,a,s,l,u,c,h]})),s=a.length;if(0==s){var l=[];for(r=0;r<e;r++)l.push(c([t.geometry.coordinates[r]],{parent:-1,winding:ci(t.geometry.coordinates[r])}));var u=p(l);return j(),B(),u}var h=[],d=[];for(r=0;r<e;r++){h.push([]);for(var f=0;f<t.geometry.coordinates[r].length-1;f++)h[r].push([new si(t.geometry.coordinates[r][di(f+1,t.geometry.coordinates[r].length-1)],1,[r,f],[r,di(f+1,t.geometry.coordinates[r].length-1)],void 0)]),d.push(new li(t.geometry.coordinates[r][f],[r,di(f-1,t.geometry.coordinates[r].length-1)],[r,f],void 0,void 0,!1,!0))}for(r=0;r<s;r++)h[a[r][1]][a[r][2]].push(new si(a[r][0],a[r][5],[a[r][1],a[r][2]],[a[r][6],a[r][7]],void 0)),a[r][11]&&d.push(new li(a[r][0],[a[r][1],a[r][2]],[a[r][6],a[r][7]],void 0,void 0,!0,!0));var g=d.length;for(r=0;r<h.length;r++)for(f=0;f<h[r].length;f++)h[r][f].sort((function(t,e){return t.param<e.param?-1:1}));var m=[];for(r=0;r<g;r++)m.push({minX:d[r].coord[0],minY:d[r].coord[1],maxX:d[r].coord[0],maxY:d[r].coord[1],index:r});var y=Mt();for(y.load(m),r=0;r<h.length;r++)for(f=0;f<h[r].length;f++)for(var v=0;v<h[r][f].length;v++){_=v==h[r][f].length-1?h[r][di(f+1,t.geometry.coordinates[r].length-1)][0].coord:h[r][f][v+1].coord;var b=y.search({minX:_[0],minY:_[1],maxX:_[0],maxY:_[1]})[0];h[r][f][v].nxtIsectAlongEdgeIn=b.index}for(r=0;r<h.length;r++)for(f=0;f<h[r].length;f++)for(v=0;v<h[r][f].length;v++){var _=h[r][f][v].coord,x=(b=y.search({minX:_[0],minY:_[1],maxX:_[0],maxY:_[1]})[0]).index;x<o?d[x].nxtIsectAlongRingAndEdge2=h[r][f][v].nxtIsectAlongEdgeIn:hi(d[x].ringAndEdge1,h[r][f][v].ringAndEdgeIn)?d[x].nxtIsectAlongRingAndEdge1=h[r][f][v].nxtIsectAlongEdgeIn:d[x].nxtIsectAlongRingAndEdge2=h[r][f][v].nxtIsectAlongEdgeIn}var w=[];for(r=0,f=0;f<e;f++){var S=r;for(v=0;v<t.geometry.coordinates[f].length-1;v++)d[r].coord[0]<d[S].coord[0]&&(S=r),r++;var E=d[S].nxtIsectAlongRingAndEdge2;for(v=0;v<d.length;v++)if(d[v].nxtIsectAlongRingAndEdge1==S||d[v].nxtIsectAlongRingAndEdge2==S){var C=v;break}var M=ui([d[C].coord,d[S].coord,d[E].coord],!0)?1:-1;w.push({isect:S,parent:-1,winding:M})}for(w.sort((function(t,e){return d[t.isect].coord>d[e.isect].coord?-1:1})),l=[];w.length>0;){var T=w.pop(),A=T.isect,O=T.parent,k=T.winding,I=l.length,P=[d[A].coord],L=A;if(d[A].ringAndEdge1Walkable)var N=d[A].ringAndEdge1,R=d[A].nxtIsectAlongRingAndEdge1;else N=d[A].ringAndEdge2,R=d[A].nxtIsectAlongRingAndEdge2;for(;!hi(d[A].coord,d[R].coord);){P.push(d[R].coord);var D=void 0;for(r=0;r<w.length;r++)if(w[r].isect==R){D=r;break}if(null!=D&&w.splice(D,1),hi(N,d[R].ringAndEdge1)){if(N=d[R].ringAndEdge2,d[R].ringAndEdge2Walkable=!1,d[R].ringAndEdge1Walkable){var F={isect:R};ui([d[L].coord,d[R].coord,d[d[R].nxtIsectAlongRingAndEdge2].coord],1==k)?(F.parent=O,F.winding=-k):(F.parent=I,F.winding=k),w.push(F)}L=R,R=d[R].nxtIsectAlongRingAndEdge2}else N=d[R].ringAndEdge1,d[R].ringAndEdge1Walkable=!1,d[R].ringAndEdge2Walkable&&(F={isect:R},ui([d[L].coord,d[R].coord,d[d[R].nxtIsectAlongRingAndEdge1].coord],1==k)?(F.parent=O,F.winding=-k):(F.parent=I,F.winding=k),w.push(F)),L=R,R=d[R].nxtIsectAlongRingAndEdge1}P.push(d[R].coord),l.push(c([P],{index:I,parent:O,winding:k,netWinding:void 0}))}function j(){for(var t=[],e=0;e<u.features.length;e++)-1==u.features[e].properties.parent&&t.push(e);if(t.length>1)for(e=0;e<t.length;e++){for(var n=-1,r=0;r<u.features.length;r++)t[e]!=r&&ye(u.features[t[e]].geometry.coordinates[0][0],u.features[r],{ignoreBoundary:!0})&&qr(u.features[r])<1/0&&(n=r);u.features[t[e]].properties.parent=n}}function B(){for(var t=0;t<u.features.length;t++)if(-1==u.features[t].properties.parent){var e=u.features[t].properties.winding;u.features[t].properties.netWinding=e,z(t,e)}}function z(t,e){for(var n=0;n<u.features.length;n++)if(u.features[n].properties.parent==t){var r=e+u.features[n].properties.winding;u.features[n].properties.netWinding=r,z(n,r)}}return u=p(l),j(),B(),u}var si=function(t,e,n,r,i){this.coord=t,this.param=e,this.ringAndEdgeIn=n,this.ringAndEdgeOut=r,this.nxtIsectAlongEdgeIn=i},li=function(t,e,n,r,i,o,a){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=r,this.nxtIsectAlongRingAndEdge2=i,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=a};function ui(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function ci(t){for(var e=0,n=0;n<t.length-1;n++)t[n][0]<t[e][0]&&(e=n);if(ui([t[di(e-1,t.length-1)],t[e],t[di(e+1,t.length-1)]],!0))var r=1;else r=-1;return r}function hi(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!hi(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0}function di(t,e){return(t%e+e)%e}var fi=Math.PI/180,pi=180/Math.PI,gi=function(t,e){this.lon=t,this.lat=e,this.x=fi*t,this.y=fi*e};gi.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},gi.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new gi(e,t)};var mi=function(){this.coords=[],this.length=0};mi.prototype.move_to=function(t){this.length++,this.coords.push(t)};var yi=function(t){this.properties=t||{},this.geometries=[]};yi.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},yi.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return"LINESTRING(empty)";this.geometries[r].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var vi=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new gi(t.x,t.y),this.end=new gi(e.x,e.y),this.properties=n||{};var r=this.start.x-this.end.x,i=this.start.y-this.end.y,o=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};function bi(t,e){var n=[],r=kr();return G(e,(function(e){if(n.forEach((function(t,e){t.id=e})),n.length){var i=r.search(e);if(i.features.length){var o=xi(e,i);n=n.filter((function(t){return t.id!==o.id})),r.remove(o),F(_i(o,e),(function(t){n.push(t),r.insert(t)}))}}else(n=_i(t,e).features).forEach((function(t){t.bbox||(t.bbox=yn(K(t)))})),r.load(p(n))})),p(n)}function _i(t,e){var n=[],r=$(t)[0],i=$(t)[t.geometry.coordinates.length-1];if(wi(r,Q(e))||wi(i,Q(e)))return p([t]);var o=kr(),a=Kn(t);o.load(a);var s=o.search(e);if(!s.features.length)return p([t]);var l=xi(e,s),u=j(a,(function(t,r,i){var o=$(r)[1],a=Q(e);return i===l.id?(t.push(a),n.push(d(t)),wi(a,o)?[a]:[a,o]):(t.push(o),t)}),[r]);return u.length>1&&n.push(d(u)),p(n)}function xi(t,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var n,r=1/0;return F(e,(function(e){var i=Nr(e,t).properties.dist;i<r&&(n=e,r=i)})),n}function wi(t,e){return t[0]===e[0]&&t[1]===e[1]}function Si(t,e,n,r,i){void 0===i&&(i={});var o=i.steps||64,a=Ei(n),s=Ei(r),l=Array.isArray(t)||"Feature"!==t.type?{}:t.properties;if(a===s)return d(bn(t,e,i).geometry.coordinates[0],l);for(var u=a,c=a<s?s:s+360,h=u,f=[],p=0;h<c;)f.push(vn(t,e,h,i).geometry.coordinates),h=u+360*++p/o;return h>c&&f.push(vn(t,e,c,i).geometry.coordinates),d(f,l)}function Ei(t){var e=t%360;return e<0&&(e+=360),e}function Ci(t,e){void 0===e&&(e={});var n=it(t);switch(e.properties||"Feature"!==t.type||(e.properties=t.properties),n.type){case"Polygon":return Mi(n,e);case"MultiPolygon":return function(t,e){void 0===e&&(e={});var n=it(t).coordinates,r=e.properties?e.properties:"Feature"===t.type?t.properties:{},i=[];return n.forEach((function(t){i.push(Ti(t,r))})),p(i)}(n,e);default:throw new Error("invalid poly")}}function Mi(t,e){return void 0===e&&(e={}),Ti(it(t).coordinates,e.properties?e.properties:"Feature"===t.type?t.properties:{})}function Ti(t,e){return t.length>1?g(t,e):d(t[0],e)}function Ai(t,e){var n,r,i;void 0===e&&(e={});var o=e.properties,a=null===(n=e.autoComplete)||void 0===n||n,s=null===(r=e.orderCoords)||void 0===r||r;switch(null!==(i=e.mutate)&&void 0!==i&&i||(t=Ce(t)),t.type){case"FeatureCollection":var l=[];return t.features.forEach((function(t){l.push($(Oi(t,{},a,s)))})),y(l,o);default:return Oi(t,o,a,s)}}function Oi(t,e,n,r){e=e||("Feature"===t.type?t.properties:{});var i=it(t),o=i.coordinates,a=i.type;if(!o.length)throw new Error("line must contain coordinates");switch(a){case"LineString":return n&&(o=ki(o)),c([o],e);case"MultiLineString":var s=[],l=0;return o.forEach((function(t){if(n&&(t=ki(t)),r){var e=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.abs(e-r)*Math.abs(n-i)}(K(d(t)));e>l?(s.unshift(t),l=e):s.push(t)}else s.push(t)})),c(s,e);default:throw new Error("geometry type "+a+" is not supported")}}function ki(t){var e=t[0],n=e[0],r=e[1],i=t[t.length-1],o=i[0],a=i[1];return n===o&&r===a||t.push(e),t}function Ii(t,e){var n,r,i,o,a,s,l;for(r=1;r<=8;r*=2){for(n=[],o=!(Li(i=t[t.length-1],e)&r),a=0;a<t.length;a++)(l=!(Li(s=t[a],e)&r))!==o&&n.push(Pi(i,s,r,e)),l&&n.push(s),i=s,o=l;if(!(t=n).length)break}return n}function Pi(t,e,n,r){return 8&n?[t[0]+(e[0]-t[0])*(r[3]-t[1])/(e[1]-t[1]),r[3]]:4&n?[t[0]+(e[0]-t[0])*(r[1]-t[1])/(e[1]-t[1]),r[1]]:2&n?[r[2],t[1]+(e[1]-t[1])*(r[2]-t[0])/(e[0]-t[0])]:1&n?[r[0],t[1]+(e[1]-t[1])*(r[0]-t[0])/(e[0]-t[0])]:null}function Li(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function Ni(t,e){for(var n=[],r=0,i=t;r<i.length;r++){var o=Ii(i[r],e);o.length>0&&(o[0][0]===o[o.length-1][0]&&o[0][1]===o[o.length-1][1]||o.push(o[0]),o.length>=4&&n.push(o))}return n}vi.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),r=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),i=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),a=pi*Math.atan2(o,Math.sqrt(Math.pow(r,2)+Math.pow(i,2)));return[pi*Math.atan2(i,r),a]},vi.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var r=1/(t-1),i=0;i<t;++i){var o=r*i,a=this.interpolate(o);n.push(a)}for(var s=!1,l=0,u=e&&e.offset?e.offset:10,c=180-u,h=-180+u,d=360-u,f=1;f<n.length;++f){var p=n[f-1][0],g=n[f][0],m=Math.abs(g-p);m>d&&(g>c&&p<h||p>c&&g<h)?s=!0:m>l&&(l=m)}var y=[];if(s&&l<u){var v=[];y.push(v);for(var b=0;b<n.length;++b){var _=parseFloat(n[b][0]);if(b>0&&Math.abs(_-n[b-1][0])>d){var x=parseFloat(n[b-1][0]),w=parseFloat(n[b-1][1]),S=parseFloat(n[b][0]),E=parseFloat(n[b][1]);if(x>-180&&x<h&&180===S&&b+1<n.length&&n[b-1][0]>-180&&n[b-1][0]<h){v.push([-180,n[b][1]]),b++,v.push([n[b][0],n[b][1]]);continue}if(x>c&&x<180&&-180===S&&b+1<n.length&&n[b-1][0]>c&&n[b-1][0]<180){v.push([180,n[b][1]]),b++,v.push([n[b][0],n[b][1]]);continue}if(x<h&&S>c){var C=x;x=S,S=C;var M=w;w=E,E=M}if(x>c&&S<h&&(S+=360),x<=180&&S>=180&&x<S){var T=(180-x)/(S-x),A=T*E+(1-T)*w;v.push([n[b-1][0]>c?180:-180,A]),(v=[]).push([n[b-1][0]>c?-180:180,A]),y.push(v)}else v=[],y.push(v);v.push([_,n[b][1]])}else v.push([n[b][0],n[b][1]])}}else{var O=[];y.push(O);for(var k=0;k<n.length;++k)O.push([n[k][0],n[k][1]])}for(var I=new yi(this.properties),P=0;P<y.length;++P){var L=new mi;I.geometries.push(L);for(var N=y[P],R=0;R<N.length;++R)L.move_to(N[R])}return I};var Ri=Ut((function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n})),Di=Ut((function(t,e){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function r(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function i(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}(e=t.exports=n?r:i).supported=r,e.unsupported=i})),Fi=Ut((function(t){var e=Array.prototype.slice,n=t.exports=function(t,o,a){return a||(a={}),t===o||(t instanceof Date&&o instanceof Date?t.getTime()===o.getTime():!t||!o||"object"!=typeof t&&"object"!=typeof o?a.strict?t===o:t==o:function(t,o,a){var s,l;if(r(t)||r(o))return!1;if(t.prototype!==o.prototype)return!1;if(Di(t))return!!Di(o)&&(t=e.call(t),o=e.call(o),n(t,o,a));if(i(t)){if(!i(o))return!1;if(t.length!==o.length)return!1;for(s=0;s<t.length;s++)if(t[s]!==o[s])return!1;return!0}try{var u=Ri(t),c=Ri(o)}catch(t){return!1}if(u.length!=c.length)return!1;for(u.sort(),c.sort(),s=u.length-1;s>=0;s--)if(u[s]!=c[s])return!1;for(s=u.length-1;s>=0;s--)if(l=u[s],!n(t[l],o[l],a))return!1;return typeof t==typeof o}(t,o,a))};function r(t){return null==t}function i(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&"function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0])}}));function ji(t,e,n){if(void 0===n&&(n={}),!O(n=n||{}))throw new Error("options is invalid");var r,i=n.tolerance||0,o=[],a=kr(),s=Kn(t);return a.load(s),V(e,(function(t){var e=!1;t&&(F(a.search(t),(function(n){if(!1===e){var o=$(t).sort(),a=$(n).sort();Fi(o,a)||(0===i?Jr(o[0],n)&&Jr(o[1],n):Nr(n,o[0]).properties.dist<=i&&Nr(n,o[1]).properties.dist<=i)?(e=!0,r=r?Bi(r,t):t):(0===i?Jr(a[0],t)&&Jr(a[1],t):Nr(t,a[0]).properties.dist<=i&&Nr(t,a[1]).properties.dist<=i)&&(r=r?Bi(r,n):n)}})),!1===e&&r&&(o.push(r),r=void 0))})),r&&o.push(r),p(o)}function Bi(t,e){var n=$(e),r=$(t),i=r[0],o=r[r.length-1],a=t.geometry.coordinates;return Fi(n[0],i)?a.unshift(n[1]):Fi(n[0],o)?a.push(n[1]):Fi(n[1],i)?a.unshift(n[0]):Fi(n[1],o)&&a.push(n[0]),t}function zi(t){var e=t%360;return e<0&&(e+=360),e}function Ui(t,e,n){var r;return void 0===n&&(n={}),(r=n.final?Gi(Q(e),Q(t)):Gi(Q(t),Q(e)))>180?-(360-r):r}function Gi(t,e){var n=C(t[1]),r=C(e[1]),i=C(e[0]-t[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return(E(Math.atan2(i,o))+360)%360}function qi(t,e,r,i){void 0===i&&(i={});var o=e<0,a=M(Math.abs(e),i.units,"meters");o&&(a=-Math.abs(a));var s=Q(t),u=function(t,e,r,i){i=void 0===i?n:Number(i);var o=e/i,a=t[0]*Math.PI/180,s=C(t[1]),l=C(r),u=o*Math.cos(l),c=s+u;Math.abs(c)>Math.PI/2&&(c=c>0?Math.PI-c:-Math.PI-c);var h=Math.log(Math.tan(c/2+Math.PI/4)/Math.tan(s/2+Math.PI/4)),d=Math.abs(h)>1e-11?u/h:Math.cos(s),f=o*Math.sin(l)/d;return[(180*(a+f)/Math.PI+540)%360-180,180*c/Math.PI]}(s,a,r);return u[0]+=u[0]-s[0]>180?-360:s[0]-u[0]>180?360:0,l(u,i.properties)}function Vi(t,e,n,r,i,o){for(var a=0;a<t.length;a++){var s=t[a],l=t[a+1];a===t.length-1&&(l=t[0]),r=Wi(s,l,e),n<=0&&r>0?Wi(e,s,i)<0||(i=s):n>0&&r<=0&&(Hi(e,s,o)||(o=s)),n=r}return[i,o]}function Hi(t,e,n){return Wi(t,e,n)>0}function Wi(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function Yi(t){for(var e,n,r=$(t),i=0,o=1;o<r.length;)e=n||r[0],i+=((n=r[o])[0]-e[0])*(n[1]+e[1]),o++;return i>0}function Xi(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return z(t,(function(t){Xi(t,e)})),t;case"LineString":return Ji($(t),e),t;case"Polygon":return Zi($(t),e),t;case"MultiLineString":return $(t).forEach((function(t){Ji(t,e)})),t;case"MultiPolygon":return $(t).forEach((function(t){Zi(t,e)})),t;case"Point":case"MultiPoint":return t}}function Ji(t,e){Yi(t)===e&&t.reverse()}function Zi(t,e){Yi(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)Yi(t[n])===e&&t[n].reverse()}function Ki(t,e){if(!O(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;rt(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return F(t,(function(t){var e=$(t)[1];n[e]||(n[e]=[]),n[e].push(t)})),Object.keys(n).map((function(t){return n[t].sort((function(t,e){return $(t)[0]-$(e)[0]}))})).sort((function(t,n){return e?$(t[0])[1]-$(n[0])[1]:$(n[0])[1]-$(t[0])[1]}))}
/*!
     * @license GNU Affero General Public License.
     * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
     * v. 1.2.0
     * https://github.com/RaumZeit/MarchingSquares.js
     *
     * MarchingSquaresJS is free software: you can redistribute it and/or modify
     * it under the terms of the GNU Affero General Public License as published by
     * the Free Software Foundation, either version 3 of the License, or
     * (at your option) any later version.
     *
     * MarchingSquaresJS is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     * GNU Affero General Public License for more details.
     *
     * As additional permission under GNU Affero General Public License version 3
     * section 7, third-party projects (personal or commercial) may distribute,
     * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
     * requirement that said third-party project for that reason alone becomes
     * subject to any requirement of the GNU Affero General Public License version 3.
     * Any modifications to MarchingSquaresJS, however, must be shared with the public
     * and made available.
     *
     * In summary this:
     * - allows you to use MarchingSquaresJS at no cost
     * - allows you to use MarchingSquaresJS for both personal and commercial purposes
     * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
     *   license as long as this license notice is included
     * - enables you to keep the source code of your program that uses MarchingSquaresJS
     *   undisclosed
     * - forces you to share any modifications you have made to MarchingSquaresJS,
     *   e.g. bug-fixes
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
     */(t,r),a=[],s=0;s<o.length;s++){for(var l=o[s],u=[],c=0;c<l.length;c++){var h=l[c];h.properties[n]?u.push(h.properties[n]):u.push(0),!0===i&&(h.properties.matrixPosition=[s,c])}a.push(u)}return a}var Qi={successCallback:null,verbose:!1,polygons:!1},$i={};function to(t,e,n,r){r=r||{};for(var i=Object.keys(Qi),o=0;o<i.length;o++){var a=i[o],s=r[a];s=null!=s?s:Qi[a],$i[a]=s}$i.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+n)+"]");var l,u=function(t,e,n){for(var r=t.length-1,i=t[0].length-1,o={rows:r,cols:i,cells:[]},a=e+Math.abs(n),s=0;s<r;++s){o.cells[s]=[];for(var l=0;l<i;++l){var u=0,c=t[s+1][l],h=t[s+1][l+1],d=t[s][l+1],f=t[s][l];if(!(isNaN(c)||isNaN(h)||isNaN(d)||isNaN(f))){u|=c<e?0:c>a?128:64,u|=h<e?0:h>a?32:16,u|=d<e?0:d>a?8:4;var p=+(u|=f<e?0:f>a?2:1),g=0;if(17===u||18===u||33===u||34===u||38===u||68===u||72===u||98===u||102===u||132===u||136===u||137===u||152===u||153===u){var m=(c+h+d+f)/4;g=m>a?2:m<e?0:1,34===u?1===g?u=35:0===g&&(u=136):136===u?1===g?(u=35,g=4):0===g&&(u=34):17===u?1===g?(u=155,g=4):0===g&&(u=153):68===u?1===g?(u=103,g=4):0===g&&(u=102):153===u?1===g&&(u=155):102===u?1===g&&(u=103):152===u?g<2&&(u=156,g=1):137===u?g<2&&(u=139,g=1):98===u?g<2&&(u=99,g=1):38===u?g<2&&(u=39,g=1):18===u?g>0?(u=156,g=4):u=152:33===u?g>0?(u=139,g=4):u=137:72===u?g>0?(u=99,g=4):u=98:132===u&&(g>0?(u=39,g=4):u=38)}if(0!=u&&170!=u){var y,v,b,_,x,w,S,E;y=v=b=_=x=w=S=E=.5;var C=[];1===u?(b=1-Ho(e,d,f),E=1-Ho(e,c,f),C.push(Bo[u])):169===u?(b=Ho(a,f,d),E=Ho(a,f,c),C.push(Bo[u])):4===u?(w=1-Ho(e,h,d),_=Ho(e,f,d),C.push(Fo[u])):166===u?(w=Ho(a,d,h),_=1-Ho(a,d,f),C.push(Fo[u])):16===u?(x=Ho(e,d,h),v=Ho(e,c,h),C.push(Do[u])):154===u?(x=1-Ho(a,h,d),v=1-Ho(a,h,c),C.push(Do[u])):64===u?(S=Ho(e,f,c),y=1-Ho(e,h,c),C.push(Uo[u])):106===u?(S=1-Ho(a,c,f),y=Ho(a,c,h),C.push(Uo[u])):168===u?(_=Ho(a,f,d),b=Ho(e,f,d),E=Ho(e,f,c),S=Ho(a,f,c),C.push(jo[u]),C.push(Bo[u])):2===u?(_=1-Ho(e,d,f),b=1-Ho(a,d,f),E=1-Ho(a,c,f),S=1-Ho(e,c,f),C.push(jo[u]),C.push(Bo[u])):162===u?(x=Ho(a,d,h),w=Ho(e,d,h),_=1-Ho(e,d,f),b=1-Ho(a,d,f),C.push(jo[u]),C.push(Bo[u])):8===u?(x=1-Ho(e,h,d),w=1-Ho(a,h,d),_=Ho(a,f,d),b=Ho(e,f,d),C.push(Do[u]),C.push(Fo[u])):138===u?(x=1-Ho(e,h,d),w=1-Ho(a,h,d),y=1-Ho(a,h,c),v=1-Ho(e,h,c),C.push(Do[u]),C.push(Fo[u])):32===u?(x=Ho(a,d,h),w=Ho(e,d,h),y=Ho(e,c,h),v=Ho(a,c,h),C.push(Do[u]),C.push(Fo[u])):42===u?(E=1-Ho(a,c,f),S=1-Ho(e,c,f),y=Ho(e,c,h),v=Ho(a,c,h),C.push(zo[u]),C.push(Uo[u])):128===u&&(E=Ho(e,f,c),S=Ho(a,f,c),y=1-Ho(a,h,c),v=1-Ho(e,h,c),C.push(zo[u]),C.push(Uo[u])),5===u?(w=1-Ho(e,h,d),E=1-Ho(e,c,f),C.push(Fo[u])):165===u?(w=Ho(a,d,h),E=Ho(a,f,c),C.push(Fo[u])):20===u?(_=Ho(e,f,d),v=Ho(e,c,h),C.push(jo[u])):150===u?(_=1-Ho(a,d,f),v=1-Ho(a,h,c),C.push(jo[u])):80===u?(x=Ho(e,d,h),S=Ho(e,f,c),C.push(Do[u])):90===u?(x=1-Ho(a,h,d),S=1-Ho(a,c,f),C.push(Do[u])):65===u?(b=1-Ho(e,d,f),y=1-Ho(e,h,c),C.push(Bo[u])):105===u?(b=Ho(a,f,d),y=Ho(a,c,h),C.push(Bo[u])):160===u?(x=Ho(a,d,h),w=Ho(e,d,h),E=Ho(e,f,c),S=Ho(a,f,c),C.push(Do[u]),C.push(Fo[u])):10===u?(x=1-Ho(e,h,d),w=1-Ho(a,h,d),E=1-Ho(a,c,f),S=1-Ho(e,c,f),C.push(Do[u]),C.push(Fo[u])):130===u?(_=1-Ho(e,d,f),b=1-Ho(a,d,f),y=1-Ho(a,h,c),v=1-Ho(e,h,c),C.push(jo[u]),C.push(Bo[u])):40===u?(_=Ho(a,f,d),b=Ho(e,f,d),y=Ho(e,c,h),v=Ho(a,c,h),C.push(jo[u]),C.push(Bo[u])):101===u?(w=Ho(a,d,h),y=Ho(a,c,h),C.push(Fo[u])):69===u?(w=1-Ho(e,h,d),y=1-Ho(e,h,c),C.push(Fo[u])):149===u?(E=Ho(a,f,c),v=1-Ho(a,h,c),C.push(zo[u])):21===u?(E=1-Ho(e,c,f),v=Ho(e,c,h),C.push(zo[u])):86===u?(_=1-Ho(a,d,f),S=1-Ho(a,c,f),C.push(jo[u])):84===u?(_=Ho(e,f,d),S=Ho(e,f,c),C.push(jo[u])):89===u?(x=1-Ho(a,h,d),b=Ho(a,f,d),C.push(Bo[u])):81===u?(x=Ho(e,d,h),b=1-Ho(e,d,f),C.push(Bo[u])):96===u?(x=Ho(a,d,h),w=Ho(e,d,h),S=Ho(e,f,c),y=Ho(a,c,h),C.push(Do[u]),C.push(Fo[u])):74===u?(x=1-Ho(e,h,d),w=1-Ho(a,h,d),S=1-Ho(a,c,f),y=1-Ho(e,h,c),C.push(Do[u]),C.push(Fo[u])):24===u?(x=1-Ho(a,h,d),_=Ho(a,f,d),b=Ho(e,f,d),v=Ho(e,c,h),C.push(Do[u]),C.push(Bo[u])):146===u?(x=Ho(e,d,h),_=1-Ho(e,d,f),b=1-Ho(a,d,f),v=1-Ho(a,h,c),C.push(Do[u]),C.push(Bo[u])):6===u?(w=1-Ho(e,h,d),_=1-Ho(a,d,f),E=1-Ho(a,c,f),S=1-Ho(e,c,f),C.push(Fo[u]),C.push(jo[u])):164===u?(w=Ho(a,d,h),_=Ho(e,f,d),E=Ho(e,f,c),S=Ho(a,f,c),C.push(Fo[u]),C.push(jo[u])):129===u?(b=1-Ho(e,d,f),E=Ho(a,f,c),y=1-Ho(a,h,c),v=1-Ho(e,h,c),C.push(Bo[u]),C.push(zo[u])):41===u?(b=Ho(a,f,d),E=1-Ho(e,c,f),y=Ho(e,c,h),v=Ho(a,c,h),C.push(Bo[u]),C.push(zo[u])):66===u?(_=1-Ho(e,d,f),b=1-Ho(a,d,f),S=1-Ho(a,c,f),y=1-Ho(e,h,c),C.push(jo[u]),C.push(Bo[u])):104===u?(_=Ho(a,f,d),b=Ho(e,f,d),S=Ho(e,f,c),y=Ho(a,c,h),C.push(Bo[u]),C.push(Go[u])):144===u?(x=Ho(e,d,h),E=Ho(e,f,c),S=Ho(a,f,c),v=1-Ho(a,h,c),C.push(Do[u]),C.push(Uo[u])):26===u?(x=1-Ho(a,h,d),E=1-Ho(a,c,f),S=1-Ho(e,c,f),v=Ho(e,c,h),C.push(Do[u]),C.push(Uo[u])):36===u?(w=Ho(a,d,h),_=Ho(e,f,d),y=Ho(e,c,h),v=Ho(a,c,h),C.push(Fo[u]),C.push(jo[u])):134===u?(w=1-Ho(e,h,d),_=1-Ho(a,d,f),y=1-Ho(a,h,c),v=1-Ho(e,h,c),C.push(Fo[u]),C.push(jo[u])):9===u?(x=1-Ho(e,h,d),w=1-Ho(a,h,d),b=Ho(a,f,d),E=1-Ho(e,c,f),C.push(Do[u]),C.push(Fo[u])):161===u?(x=Ho(a,d,h),w=Ho(e,d,h),b=1-Ho(e,d,f),E=Ho(a,f,c),C.push(Do[u]),C.push(Fo[u])):37===u?(w=Ho(a,d,h),E=1-Ho(e,c,f),y=Ho(e,c,h),v=Ho(a,c,h),C.push(Fo[u]),C.push(zo[u])):133===u?(w=1-Ho(e,h,d),E=Ho(a,f,c),y=1-Ho(a,h,c),v=1-Ho(e,h,c),C.push(Fo[u]),C.push(zo[u])):148===u?(_=Ho(e,f,d),E=Ho(e,f,c),S=Ho(a,f,c),v=1-Ho(a,h,c),C.push(jo[u]),C.push(Uo[u])):22===u?(_=1-Ho(a,d,f),E=1-Ho(a,c,f),S=1-Ho(e,c,f),v=Ho(e,c,h),C.push(jo[u]),C.push(Uo[u])):82===u?(x=Ho(e,d,h),_=1-Ho(e,d,f),b=1-Ho(a,d,f),S=1-Ho(a,c,f),C.push(Do[u]),C.push(Bo[u])):88===u?(x=1-Ho(a,h,d),_=Ho(a,f,d),b=Ho(e,f,d),S=Ho(e,f,c),C.push(Do[u]),C.push(Bo[u])):73===u?(x=1-Ho(e,h,d),w=1-Ho(a,h,d),b=Ho(a,f,d),y=1-Ho(e,h,c),C.push(Do[u]),C.push(Fo[u])):97===u?(x=Ho(a,d,h),w=Ho(e,d,h),b=1-Ho(e,d,f),y=Ho(a,c,h),C.push(Do[u]),C.push(Fo[u])):145===u?(x=Ho(e,d,h),b=1-Ho(e,d,f),E=Ho(a,f,c),v=1-Ho(a,h,c),C.push(Do[u]),C.push(zo[u])):25===u?(x=1-Ho(a,h,d),b=Ho(a,f,d),E=1-Ho(e,c,f),v=Ho(e,c,h),C.push(Do[u]),C.push(zo[u])):70===u?(w=1-Ho(e,h,d),_=1-Ho(a,d,f),S=1-Ho(a,c,f),y=1-Ho(e,h,c),C.push(Fo[u]),C.push(jo[u])):100===u?(w=Ho(a,d,h),_=Ho(e,f,d),S=Ho(e,f,c),y=Ho(a,c,h),C.push(Fo[u]),C.push(jo[u])):34===u?(0===g?(x=1-Ho(e,h,d),w=1-Ho(a,h,d),_=Ho(a,f,d),b=Ho(e,f,d),E=Ho(e,f,c),S=Ho(a,f,c),y=1-Ho(a,h,c),v=1-Ho(e,h,c)):(x=Ho(a,d,h),w=Ho(e,d,h),_=1-Ho(e,d,f),b=1-Ho(a,d,f),E=1-Ho(a,c,f),S=1-Ho(e,c,f),y=Ho(e,c,h),v=Ho(a,c,h)),C.push(Do[u]),C.push(Fo[u]),C.push(zo[u]),C.push(Uo[u])):35===u?(4===g?(x=1-Ho(e,h,d),w=1-Ho(a,h,d),_=Ho(a,f,d),b=Ho(e,f,d),E=Ho(e,f,c),S=Ho(a,f,c),y=1-Ho(a,h,c),v=1-Ho(e,h,c)):(x=Ho(a,d,h),w=Ho(e,d,h),_=1-Ho(e,d,f),b=1-Ho(a,d,f),E=1-Ho(a,c,f),S=1-Ho(e,c,f),y=Ho(e,c,h),v=Ho(a,c,h)),C.push(Do[u]),C.push(Fo[u]),C.push(Bo[u]),C.push(Uo[u])):136===u?(0===g?(x=Ho(a,d,h),w=Ho(e,d,h),_=1-Ho(e,d,f),b=1-Ho(a,d,f),E=1-Ho(a,c,f),S=1-Ho(e,c,f),y=Ho(e,c,h),v=Ho(a,c,h)):(x=1-Ho(e,h,d),w=1-Ho(a,h,d),_=Ho(a,f,d),b=Ho(e,f,d),E=Ho(e,f,c),S=Ho(a,f,c),y=1-Ho(a,h,c),v=1-Ho(e,h,c)),C.push(Do[u]),C.push(Fo[u]),C.push(zo[u]),C.push(Uo[u])):153===u?(0===g?(x=Ho(e,d,h),b=1-Ho(e,d,f),E=1-Ho(e,c,f),v=Ho(e,c,h)):(x=1-Ho(a,h,d),b=Ho(a,f,d),E=Ho(a,f,c),v=1-Ho(a,h,c)),C.push(Do[u]),C.push(Bo[u])):102===u?(0===g?(w=1-Ho(e,h,d),_=Ho(e,f,d),S=Ho(e,f,c),y=1-Ho(e,h,c)):(w=Ho(a,d,h),_=1-Ho(a,d,f),S=1-Ho(a,c,f),y=Ho(a,c,h)),C.push(Fo[u]),C.push(Uo[u])):155===u?(4===g?(x=Ho(e,d,h),b=1-Ho(e,d,f),E=1-Ho(e,c,f),v=Ho(e,c,h)):(x=1-Ho(a,h,d),b=Ho(a,f,d),E=Ho(a,f,c),v=1-Ho(a,h,c)),C.push(Do[u]),C.push(zo[u])):103===u?(4===g?(w=1-Ho(e,h,d),_=Ho(e,f,d),S=Ho(e,f,c),y=1-Ho(e,h,c)):(w=Ho(a,d,h),_=1-Ho(a,d,f),S=1-Ho(a,c,f),y=Ho(a,c,h)),C.push(Fo[u]),C.push(jo[u])):152===u?(0===g?(x=Ho(e,d,h),_=1-Ho(e,d,f),b=1-Ho(a,d,f),E=1-Ho(a,c,f),S=1-Ho(e,c,f),v=Ho(e,c,h)):(x=1-Ho(a,h,d),_=Ho(a,f,d),b=Ho(e,f,d),E=Ho(e,f,c),S=Ho(a,f,c),v=1-Ho(a,h,c)),C.push(Do[u]),C.push(jo[u]),C.push(Bo[u])):156===u?(4===g?(x=Ho(e,d,h),_=1-Ho(e,d,f),b=1-Ho(a,d,f),E=1-Ho(a,c,f),S=1-Ho(e,c,f),v=Ho(e,c,h)):(x=1-Ho(a,h,d),_=Ho(a,f,d),b=Ho(e,f,d),E=Ho(e,f,c),S=Ho(a,f,c),v=1-Ho(a,h,c)),C.push(Do[u]),C.push(Bo[u]),C.push(Uo[u])):137===u?(0===g?(x=Ho(a,d,h),w=Ho(e,d,h),b=1-Ho(e,d,f),E=1-Ho(e,c,f),y=Ho(e,c,h),v=Ho(a,c,h)):(x=1-Ho(e,h,d),w=1-Ho(a,h,d),b=Ho(a,f,d),E=Ho(a,f,c),y=1-Ho(a,h,c),v=1-Ho(e,h,c)),C.push(Do[u]),C.push(Fo[u]),C.push(Bo[u])):139===u?(4===g?(x=Ho(a,d,h),w=Ho(e,d,h),b=1-Ho(e,d,f),E=1-Ho(e,c,f),y=Ho(e,c,h),v=Ho(a,c,h)):(x=1-Ho(e,h,d),w=1-Ho(a,h,d),b=Ho(a,f,d),E=Ho(a,f,c),y=1-Ho(a,h,c),v=1-Ho(e,h,c)),C.push(Do[u]),C.push(Fo[u]),C.push(zo[u])):98===u?(0===g?(x=1-Ho(e,h,d),w=1-Ho(a,h,d),_=Ho(a,f,d),b=Ho(e,f,d),S=Ho(e,f,c),y=1-Ho(e,h,c)):(x=Ho(a,d,h),w=Ho(e,d,h),_=1-Ho(e,d,f),b=1-Ho(a,d,f),S=1-Ho(a,c,f),y=Ho(a,c,h)),C.push(Do[u]),C.push(Fo[u]),C.push(Uo[u])):99===u?(4===g?(x=1-Ho(e,h,d),w=1-Ho(a,h,d),_=Ho(a,f,d),b=Ho(e,f,d),S=Ho(e,f,c),y=1-Ho(e,h,c)):(x=Ho(a,d,h),w=Ho(e,d,h),_=1-Ho(e,d,f),b=1-Ho(a,d,f),S=1-Ho(a,c,f),y=Ho(a,c,h)),C.push(Do[u]),C.push(Fo[u]),C.push(Bo[u])):38===u?(0===g?(w=1-Ho(e,h,d),_=Ho(e,f,d),E=Ho(e,f,c),S=Ho(a,f,c),y=1-Ho(a,h,c),v=1-Ho(e,h,c)):(w=Ho(a,d,h),_=1-Ho(a,d,f),E=1-Ho(a,c,f),S=1-Ho(e,c,f),y=Ho(e,c,h),v=Ho(a,c,h)),C.push(Fo[u]),C.push(zo[u]),C.push(Uo[u])):39===u?(4===g?(w=1-Ho(e,h,d),_=Ho(e,f,d),E=Ho(e,f,c),S=Ho(a,f,c),y=1-Ho(a,h,c),v=1-Ho(e,h,c)):(w=Ho(a,d,h),_=1-Ho(a,d,f),E=1-Ho(a,c,f),S=1-Ho(e,c,f),y=Ho(e,c,h),v=Ho(a,c,h)),C.push(Fo[u]),C.push(jo[u]),C.push(Uo[u])):85===u&&(x=1,w=0,_=1,b=0,E=0,S=1,y=0,v=1),(y<0||y>1||v<0||v>1||x<0||x>1||_<0||_>1||E<0||E>1||S<0||S>1)&&console.log("MarchingSquaresJS-isoBands: "+u+" "+p+" "+c+","+h+","+d+","+f+" "+g+" "+y+" "+v+" "+x+" "+w+" "+_+" "+b+" "+E+" "+S),o.cells[s][l]={cval:u,cval_real:p,flipped:g,topleft:y,topright:v,righttop:x,rightbottom:w,bottomright:_,bottomleft:b,leftbottom:E,lefttop:S,edges:C}}}}}return o}(t,e,n);return $i.polygons?($i.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),l=function(t){var e=[],n=0;return t.cells.forEach((function(t,r){t.forEach((function(t,i){if(void 0!==t){var o=Vo[t.cval](t);"object"==typeof o&&Wo(o)?"object"==typeof o[0]&&Wo(o[0])?"object"==typeof o[0][0]&&Wo(o[0][0])?o.forEach((function(t){t.forEach((function(t){t[0]+=i,t[1]+=r})),e[n++]=t})):(o.forEach((function(t){t[0]+=i,t[1]+=r})),e[n++]=o):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}}))})),e}(u)):($i.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),l=function(t){for(var e=[],n=t.rows,r=t.cols,i=[],o=0;o<n;o++)for(var a=0;a<r;a++)if(void 0!==t.cells[o][a]&&t.cells[o][a].edges.length>0){var s=Xo(t.cells[o][a]),l=null,u=a,c=o;null!==s&&i.push([s.p[0]+u,s.p[1]+c]);do{if(null===(l=Jo(t.cells[c][u],s.x,s.y,s.o)))break;if(i.push([l.p[0]+u,l.p[1]+c]),u+=l.x,s=l,(c+=l.y)<0||c>=n||u<0||u>=r||void 0===t.cells[c][u]){var h=Yo(t,u-=l.x,c-=l.y,l.x,l.y,l.o);if(null===h)break;h.path.forEach((function(t){i.push(t)})),u=h.i,c=h.j,s=h}}while(void 0!==t.cells[c][u]&&t.cells[c][u].edges.length>0);e.push(i),i=[],t.cells[o][a].edges.length>0&&a--}return e}(u)),"function"==typeof $i.successCallback&&$i.successCallback(l),l}var eo=64,no=16,ro=[],io=[],oo=[],ao=[],so=[],lo=[],uo=[],co=[],ho=[],fo=[],po=[],go=[],mo=[],yo=[],vo=[],bo=[],_o=[],xo=[],wo=[],So=[],Eo=[],Co=[],Mo=[],To=[];uo[85]=fo[85]=-1,co[85]=po[85]=0,ho[85]=go[85]=1,wo[85]=Co[85]=1,So[85]=Mo[85]=0,Eo[85]=To[85]=1,ro[85]=ao[85]=0,io[85]=so[85]=-1,oo[85]=vo[85]=0,bo[85]=mo[85]=0,_o[85]=yo[85]=1,lo[85]=xo[85]=1,Co[1]=Co[169]=0,Mo[1]=Mo[169]=-1,To[1]=To[169]=0,mo[1]=mo[169]=-1,yo[1]=yo[169]=0,vo[1]=vo[169]=0,fo[4]=fo[166]=0,po[4]=po[166]=-1,go[4]=go[166]=1,bo[4]=bo[166]=1,_o[4]=_o[166]=0,xo[4]=xo[166]=0,uo[16]=uo[154]=0,co[16]=co[154]=1,ho[16]=ho[154]=1,ao[16]=ao[154]=1,so[16]=so[154]=0,lo[16]=lo[154]=1,wo[64]=wo[106]=0,So[64]=So[106]=1,Eo[64]=Eo[106]=0,ro[64]=ro[106]=-1,io[64]=io[106]=0,oo[64]=oo[106]=1,wo[2]=wo[168]=0,So[2]=So[168]=-1,Eo[2]=Eo[168]=1,Co[2]=Co[168]=0,Mo[2]=Mo[168]=-1,To[2]=To[168]=0,mo[2]=mo[168]=-1,yo[2]=yo[168]=0,vo[2]=vo[168]=0,bo[2]=bo[168]=-1,_o[2]=_o[168]=0,xo[2]=xo[168]=1,uo[8]=uo[162]=0,co[8]=co[162]=-1,ho[8]=ho[162]=0,fo[8]=fo[162]=0,po[8]=po[162]=-1,go[8]=go[162]=1,mo[8]=mo[162]=1,yo[8]=yo[162]=0,vo[8]=vo[162]=1,bo[8]=bo[162]=1,_o[8]=_o[162]=0,xo[8]=xo[162]=0,uo[32]=uo[138]=0,co[32]=co[138]=1,ho[32]=ho[138]=1,fo[32]=fo[138]=0,po[32]=po[138]=1,go[32]=go[138]=0,ro[32]=ro[138]=1,io[32]=io[138]=0,oo[32]=oo[138]=0,ao[32]=ao[138]=1,so[32]=so[138]=0,lo[32]=lo[138]=1,Co[128]=Co[42]=0,Mo[128]=Mo[42]=1,To[128]=To[42]=1,wo[128]=wo[42]=0,So[128]=So[42]=1,Eo[128]=Eo[42]=0,ro[128]=ro[42]=-1,io[128]=io[42]=0,oo[128]=oo[42]=1,ao[128]=ao[42]=-1,so[128]=so[42]=0,lo[128]=lo[42]=0,fo[5]=fo[165]=-1,po[5]=po[165]=0,go[5]=go[165]=0,Co[5]=Co[165]=1,Mo[5]=Mo[165]=0,To[5]=To[165]=0,bo[20]=bo[150]=0,_o[20]=_o[150]=1,xo[20]=xo[150]=1,ao[20]=ao[150]=0,so[20]=so[150]=-1,lo[20]=lo[150]=1,uo[80]=uo[90]=-1,co[80]=co[90]=0,ho[80]=ho[90]=1,wo[80]=wo[90]=1,So[80]=So[90]=0,Eo[80]=Eo[90]=1,mo[65]=mo[105]=0,yo[65]=yo[105]=1,vo[65]=vo[105]=0,ro[65]=ro[105]=0,io[65]=io[105]=-1,oo[65]=oo[105]=0,uo[160]=uo[10]=-1,co[160]=co[10]=0,ho[160]=ho[10]=1,fo[160]=fo[10]=-1,po[160]=po[10]=0,go[160]=go[10]=0,Co[160]=Co[10]=1,Mo[160]=Mo[10]=0,To[160]=To[10]=0,wo[160]=wo[10]=1,So[160]=So[10]=0,Eo[160]=Eo[10]=1,bo[130]=bo[40]=0,_o[130]=_o[40]=1,xo[130]=xo[40]=1,mo[130]=mo[40]=0,yo[130]=yo[40]=1,vo[130]=vo[40]=0,ro[130]=ro[40]=0,io[130]=io[40]=-1,oo[130]=oo[40]=0,ao[130]=ao[40]=0,so[130]=so[40]=-1,lo[130]=lo[40]=1,fo[37]=fo[133]=0,po[37]=po[133]=1,go[37]=go[133]=1,Co[37]=Co[133]=0,Mo[37]=Mo[133]=1,To[37]=To[133]=0,ro[37]=ro[133]=-1,io[37]=io[133]=0,oo[37]=oo[133]=0,ao[37]=ao[133]=1,so[37]=so[133]=0,lo[37]=lo[133]=0,bo[148]=bo[22]=-1,_o[148]=_o[22]=0,xo[148]=xo[22]=0,Co[148]=Co[22]=0,Mo[148]=Mo[22]=-1,To[148]=To[22]=1,wo[148]=wo[22]=0,So[148]=So[22]=1,Eo[148]=Eo[22]=1,ao[148]=ao[22]=-1,so[148]=so[22]=0,lo[148]=lo[22]=1,uo[82]=uo[88]=0,co[82]=co[88]=-1,ho[82]=ho[88]=1,bo[82]=bo[88]=1,_o[82]=_o[88]=0,xo[82]=xo[88]=1,mo[82]=mo[88]=-1,yo[82]=yo[88]=0,vo[82]=vo[88]=1,wo[82]=wo[88]=0,So[82]=So[88]=-1,Eo[82]=Eo[88]=0,uo[73]=uo[97]=0,co[73]=co[97]=1,ho[73]=ho[97]=0,fo[73]=fo[97]=0,po[73]=po[97]=-1,go[73]=go[97]=0,mo[73]=mo[97]=1,yo[73]=yo[97]=0,vo[73]=vo[97]=0,ro[73]=ro[97]=1,io[73]=io[97]=0,oo[73]=oo[97]=1,uo[145]=uo[25]=0,co[145]=co[25]=-1,ho[145]=ho[25]=0,mo[145]=mo[25]=1,yo[145]=yo[25]=0,vo[145]=vo[25]=1,Co[145]=Co[25]=0,Mo[145]=Mo[25]=1,To[145]=To[25]=1,ao[145]=ao[25]=-1,so[145]=so[25]=0,lo[145]=lo[25]=0,fo[70]=fo[100]=0,po[70]=po[100]=1,go[70]=go[100]=0,bo[70]=bo[100]=-1,_o[70]=_o[100]=0,xo[70]=xo[100]=1,wo[70]=wo[100]=0,So[70]=So[100]=-1,Eo[70]=Eo[100]=1,ro[70]=ro[100]=1,io[70]=io[100]=0,oo[70]=oo[100]=0,fo[101]=fo[69]=0,po[101]=po[69]=1,go[101]=go[69]=0,ro[101]=ro[69]=1,io[101]=io[69]=0,oo[101]=oo[69]=0,Co[149]=Co[21]=0,Mo[149]=Mo[21]=1,To[149]=To[21]=1,ao[149]=ao[21]=-1,so[149]=so[21]=0,lo[149]=lo[21]=0,bo[86]=bo[84]=-1,_o[86]=_o[84]=0,xo[86]=xo[84]=1,wo[86]=wo[84]=0,So[86]=So[84]=-1,Eo[86]=Eo[84]=1,uo[89]=uo[81]=0,co[89]=co[81]=-1,ho[89]=ho[81]=0,mo[89]=mo[81]=1,yo[89]=yo[81]=0,vo[89]=vo[81]=1,uo[96]=uo[74]=0,co[96]=co[74]=1,ho[96]=ho[74]=0,fo[96]=fo[74]=-1,po[96]=po[74]=0,go[96]=go[74]=1,wo[96]=wo[74]=1,So[96]=So[74]=0,Eo[96]=Eo[74]=0,ro[96]=ro[74]=1,io[96]=io[74]=0,oo[96]=oo[74]=1,uo[24]=uo[146]=0,co[24]=co[146]=-1,ho[24]=ho[146]=1,bo[24]=bo[146]=1,_o[24]=_o[146]=0,xo[24]=xo[146]=1,mo[24]=mo[146]=0,yo[24]=yo[146]=1,vo[24]=vo[146]=1,ao[24]=ao[146]=0,so[24]=so[146]=-1,lo[24]=lo[146]=0,fo[6]=fo[164]=-1,po[6]=po[164]=0,go[6]=go[164]=1,bo[6]=bo[164]=-1,_o[6]=_o[164]=0,xo[6]=xo[164]=0,Co[6]=Co[164]=0,Mo[6]=Mo[164]=-1,To[6]=To[164]=1,wo[6]=wo[164]=1,So[6]=So[164]=0,Eo[6]=Eo[164]=0,mo[129]=mo[41]=0,yo[129]=yo[41]=1,vo[129]=vo[41]=1,Co[129]=Co[41]=0,Mo[129]=Mo[41]=1,To[129]=To[41]=0,ro[129]=ro[41]=-1,io[129]=io[41]=0,oo[129]=oo[41]=0,ao[129]=ao[41]=0,so[129]=so[41]=-1,lo[129]=lo[41]=0,bo[66]=bo[104]=0,_o[66]=_o[104]=1,xo[66]=xo[104]=0,mo[66]=mo[104]=-1,yo[66]=yo[104]=0,vo[66]=vo[104]=1,wo[66]=wo[104]=0,So[66]=So[104]=-1,Eo[66]=Eo[104]=0,ro[66]=ro[104]=0,io[66]=io[104]=-1,oo[66]=oo[104]=1,uo[144]=uo[26]=-1,co[144]=co[26]=0,ho[144]=ho[26]=0,Co[144]=Co[26]=1,Mo[144]=Mo[26]=0,To[144]=To[26]=1,wo[144]=wo[26]=0,So[144]=So[26]=1,Eo[144]=Eo[26]=1,ao[144]=ao[26]=-1,so[144]=so[26]=0,lo[144]=lo[26]=1,fo[36]=fo[134]=0,po[36]=po[134]=1,go[36]=go[134]=1,bo[36]=bo[134]=0,_o[36]=_o[134]=1,xo[36]=xo[134]=0,ro[36]=ro[134]=0,io[36]=io[134]=-1,oo[36]=oo[134]=1,ao[36]=ao[134]=1,so[36]=so[134]=0,lo[36]=lo[134]=0,uo[9]=uo[161]=-1,co[9]=co[161]=0,ho[9]=ho[161]=0,fo[9]=fo[161]=0,po[9]=po[161]=-1,go[9]=go[161]=0,mo[9]=mo[161]=1,yo[9]=yo[161]=0,vo[9]=vo[161]=0,Co[9]=Co[161]=1,Mo[9]=Mo[161]=0,To[9]=To[161]=1,uo[136]=0,co[136]=1,ho[136]=1,fo[136]=0,po[136]=1,go[136]=0,bo[136]=-1,_o[136]=0,xo[136]=1,mo[136]=-1,yo[136]=0,vo[136]=0,Co[136]=0,Mo[136]=-1,To[136]=0,wo[136]=0,So[136]=-1,Eo[136]=1,ro[136]=1,io[136]=0,oo[136]=0,ao[136]=1,so[136]=0,lo[136]=1,uo[34]=0,co[34]=-1,ho[34]=0,fo[34]=0,po[34]=-1,go[34]=1,bo[34]=1,_o[34]=0,xo[34]=0,mo[34]=1,yo[34]=0,vo[34]=1,Co[34]=0,Mo[34]=1,To[34]=1,wo[34]=0,So[34]=1,Eo[34]=0,ro[34]=-1,io[34]=0,oo[34]=1,ao[34]=-1,so[34]=0,lo[34]=0,uo[35]=0,co[35]=1,ho[35]=1,fo[35]=0,po[35]=-1,go[35]=1,bo[35]=1,_o[35]=0,xo[35]=0,mo[35]=-1,yo[35]=0,vo[35]=0,Co[35]=0,Mo[35]=-1,To[35]=0,wo[35]=0,So[35]=1,Eo[35]=0,ro[35]=-1,io[35]=0,oo[35]=1,ao[35]=1,so[35]=0,lo[35]=1,uo[153]=0,co[153]=1,ho[153]=1,mo[153]=-1,yo[153]=0,vo[153]=0,Co[153]=0,Mo[153]=-1,To[153]=0,ao[153]=1,so[153]=0,lo[153]=1,fo[102]=0,po[102]=-1,go[102]=1,bo[102]=1,_o[102]=0,xo[102]=0,wo[102]=0,So[102]=1,Eo[102]=0,ro[102]=-1,io[102]=0,oo[102]=1,uo[155]=0,co[155]=-1,ho[155]=0,mo[155]=1,yo[155]=0,vo[155]=1,Co[155]=0,Mo[155]=1,To[155]=1,ao[155]=-1,so[155]=0,lo[155]=0,fo[103]=0,po[103]=1,go[103]=0,bo[103]=-1,_o[103]=0,xo[103]=1,wo[103]=0,So[103]=-1,Eo[103]=1,ro[103]=1,io[103]=0,oo[103]=0,uo[152]=0,co[152]=1,ho[152]=1,bo[152]=-1,_o[152]=0,xo[152]=1,mo[152]=-1,yo[152]=0,vo[152]=0,Co[152]=0,Mo[152]=-1,To[152]=0,wo[152]=0,So[152]=-1,Eo[152]=1,ao[152]=1,so[152]=0,lo[152]=1,uo[156]=0,co[156]=-1,ho[156]=1,bo[156]=1,_o[156]=0,xo[156]=1,mo[156]=-1,yo[156]=0,vo[156]=0,Co[156]=0,Mo[156]=-1,To[156]=0,wo[156]=0,So[156]=1,Eo[156]=1,ao[156]=-1,so[156]=0,lo[156]=1,uo[137]=0,co[137]=1,ho[137]=1,fo[137]=0,po[137]=1,go[137]=0,mo[137]=-1,yo[137]=0,vo[137]=0,Co[137]=0,Mo[137]=-1,To[137]=0,ro[137]=1,io[137]=0,oo[137]=0,ao[137]=1,so[137]=0,lo[137]=1,uo[139]=0,co[139]=1,ho[139]=1,fo[139]=0,po[139]=-1,go[139]=0,mo[139]=1,yo[139]=0,vo[139]=0,Co[139]=0,Mo[139]=1,To[139]=0,ro[139]=-1,io[139]=0,oo[139]=0,ao[139]=1,so[139]=0,lo[139]=1,uo[98]=0,co[98]=-1,ho[98]=0,fo[98]=0,po[98]=-1,go[98]=1,bo[98]=1,_o[98]=0,xo[98]=0,mo[98]=1,yo[98]=0,vo[98]=1,wo[98]=0,So[98]=1,Eo[98]=0,ro[98]=-1,io[98]=0,oo[98]=1,uo[99]=0,co[99]=1,ho[99]=0,fo[99]=0,po[99]=-1,go[99]=1,bo[99]=1,_o[99]=0,xo[99]=0,mo[99]=-1,yo[99]=0,vo[99]=1,wo[99]=0,So[99]=-1,Eo[99]=0,ro[99]=1,io[99]=0,oo[99]=1,fo[38]=0,po[38]=-1,go[38]=1,bo[38]=1,_o[38]=0,xo[38]=0,Co[38]=0,Mo[38]=1,To[38]=1,wo[38]=0,So[38]=1,Eo[38]=0,ro[38]=-1,io[38]=0,oo[38]=1,ao[38]=-1,so[38]=0,lo[38]=0,fo[39]=0,po[39]=1,go[39]=1,bo[39]=-1,_o[39]=0,xo[39]=0,Co[39]=0,Mo[39]=-1,To[39]=1,wo[39]=0,So[39]=1,Eo[39]=0,ro[39]=-1,io[39]=0,oo[39]=1,ao[39]=1,so[39]=0,lo[39]=0;var Ao=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},Oo=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},ko=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},Io=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},Po=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},Lo=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},No=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},Ro=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Do=[],Fo=[],jo=[],Bo=[],zo=[],Uo=[],Go=[],qo=[];Bo[1]=zo[1]=18,Bo[169]=zo[169]=18,jo[4]=Fo[4]=12,jo[166]=Fo[166]=12,Do[16]=qo[16]=4,Do[154]=qo[154]=4,Uo[64]=Go[64]=22,Uo[106]=Go[106]=22,jo[2]=Uo[2]=17,Bo[2]=zo[2]=18,jo[168]=Uo[168]=17,Bo[168]=zo[168]=18,Do[8]=Bo[8]=9,Fo[8]=jo[8]=12,Do[162]=Bo[162]=9,Fo[162]=jo[162]=12,Do[32]=qo[32]=4,Fo[32]=Go[32]=1,Do[138]=qo[138]=4,Fo[138]=Go[138]=1,zo[128]=qo[128]=21,Uo[128]=Go[128]=22,zo[42]=qo[42]=21,Uo[42]=Go[42]=22,Fo[5]=zo[5]=14,Fo[165]=zo[165]=14,jo[20]=qo[20]=6,jo[150]=qo[150]=6,Do[80]=Uo[80]=11,Do[90]=Uo[90]=11,Bo[65]=Go[65]=3,Bo[105]=Go[105]=3,Do[160]=Uo[160]=11,Fo[160]=zo[160]=14,Do[10]=Uo[10]=11,Fo[10]=zo[10]=14,jo[130]=qo[130]=6,Bo[130]=Go[130]=3,jo[40]=qo[40]=6,Bo[40]=Go[40]=3,Fo[101]=Go[101]=1,Fo[69]=Go[69]=1,zo[149]=qo[149]=21,zo[21]=qo[21]=21,jo[86]=Uo[86]=17,jo[84]=Uo[84]=17,Do[89]=Bo[89]=9,Do[81]=Bo[81]=9,Do[96]=Go[96]=0,Fo[96]=Uo[96]=15,Do[74]=Go[74]=0,Fo[74]=Uo[74]=15,Do[24]=jo[24]=8,Bo[24]=qo[24]=7,Do[146]=jo[146]=8,Bo[146]=qo[146]=7,Fo[6]=Uo[6]=15,jo[6]=zo[6]=16,Fo[164]=Uo[164]=15,jo[164]=zo[164]=16,Bo[129]=qo[129]=7,zo[129]=Go[129]=20,Bo[41]=qo[41]=7,zo[41]=Go[41]=20,jo[66]=Go[66]=2,Bo[66]=Uo[66]=19,jo[104]=Go[104]=2,Bo[104]=Uo[104]=19,Do[144]=zo[144]=10,Uo[144]=qo[144]=23,Do[26]=zo[26]=10,Uo[26]=qo[26]=23,Fo[36]=qo[36]=5,jo[36]=Go[36]=2,Fo[134]=qo[134]=5,jo[134]=Go[134]=2,Do[9]=zo[9]=10,Fo[9]=Bo[9]=13,Do[161]=zo[161]=10,Fo[161]=Bo[161]=13,Fo[37]=qo[37]=5,zo[37]=Go[37]=20,Fo[133]=qo[133]=5,zo[133]=Go[133]=20,jo[148]=zo[148]=16,Uo[148]=qo[148]=23,jo[22]=zo[22]=16,Uo[22]=qo[22]=23,Do[82]=jo[82]=8,Bo[82]=Uo[82]=19,Do[88]=jo[88]=8,Bo[88]=Uo[88]=19,Do[73]=Go[73]=0,Fo[73]=Bo[73]=13,Do[97]=Go[97]=0,Fo[97]=Bo[97]=13,Do[145]=Bo[145]=9,zo[145]=qo[145]=21,Do[25]=Bo[25]=9,zo[25]=qo[25]=21,Fo[70]=Go[70]=1,jo[70]=Uo[70]=17,Fo[100]=Go[100]=1,jo[100]=Uo[100]=17,Do[34]=Bo[34]=9,Fo[34]=jo[34]=12,zo[34]=qo[34]=21,Uo[34]=Go[34]=22,Do[136]=qo[136]=4,Fo[136]=Go[136]=1,jo[136]=Uo[136]=17,Bo[136]=zo[136]=18,Do[35]=qo[35]=4,Fo[35]=jo[35]=12,Bo[35]=zo[35]=18,Uo[35]=Go[35]=22,Do[153]=qo[153]=4,Bo[153]=zo[153]=18,Fo[102]=jo[102]=12,Uo[102]=Go[102]=22,Do[155]=Bo[155]=9,zo[155]=qo[155]=23,Fo[103]=Go[103]=1,jo[103]=Uo[103]=17,Do[152]=qo[152]=4,jo[152]=Uo[152]=17,Bo[152]=zo[152]=18,Do[156]=jo[156]=8,Bo[156]=zo[156]=18,Uo[156]=qo[156]=23,Do[137]=qo[137]=4,Fo[137]=Go[137]=1,Bo[137]=zo[137]=18,Do[139]=qo[139]=4,Fo[139]=Bo[139]=13,zo[139]=Go[139]=20,Do[98]=Bo[98]=9,Fo[98]=jo[98]=12,Uo[98]=Go[98]=22,Do[99]=Go[99]=0,Fo[99]=jo[99]=12,Bo[99]=Uo[99]=19,Fo[38]=jo[38]=12,zo[38]=qo[38]=21,Uo[38]=Go[38]=22,Fo[39]=qo[39]=5,jo[39]=zo[39]=16,Uo[39]=Go[39]=22;var Vo=[];function Ho(t,e,n){return(t-e)/(n-e)}function Wo(t){return t.constructor.toString().indexOf("Array")>-1}function Yo(t,e,n,r,i,o){for(var a=t.cells[n][e],s=a.cval_real,l=e+r,u=n+i,c=[],h=!1;!h;){if(void 0===t.cells[u]||void 0===t.cells[u][l])if(u-=i,l-=r,s=(a=t.cells[u][l]).cval_real,-1===i)if(0===o)if(1&s)c.push([l,u]),r=-1,i=0,o=0;else{if(!(4&s)){c.push([l+a.bottomright,u]),r=0,i=1,o=1,h=!0;break}c.push([l+1,u]),r=1,i=0,o=0}else{if(!(1&s)){if(4&s){c.push([l+a.bottomright,u]),r=0,i=1,o=1,h=!0;break}c.push([l+a.bottomleft,u]),r=0,i=1,o=0,h=!0;break}c.push([l,u]),r=-1,i=0,o=0}else if(1===i)if(0===o){if(!(s&no)){if(s&eo){c.push([l+a.topleft,u+1]),r=0,i=-1,o=0,h=!0;break}c.push([l+a.topright,u+1]),r=0,i=-1,o=1,h=!0;break}c.push([l+1,u+1]),r=1,i=0,o=1}else c.push([l+1,u+1]),r=1,i=0,o=1;else if(-1===r)if(0===o){if(!(s&eo)){if(1&s){c.push([l,u+a.leftbottom]),r=1,i=0,o=0,h=!0;break}c.push([l,u+a.lefttop]),r=1,i=0,o=1,h=!0;break}c.push([l,u+1]),r=0,i=1,o=0}else{if(!(s&eo)){console.log("MarchingSquaresJS-isoBands: wtf");break}c.push([l,u+1]),r=0,i=1,o=0}else{if(1!==r){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===o){if(!(4&s)){c.push([l+1,u+a.rightbottom]),r=-1,i=0,o=0,h=!0;break}c.push([l+1,u]),r=0,i=-1,o=1}else{if(!(4&s)){if(s&no){c.push([l+1,u+a.righttop]),r=-1,i=0,o=1;break}c.push([l+1,u+a.rightbottom]),r=-1,i=0,o=0,h=!0;break}c.push([l+1,u]),r=0,i=-1,o=1}}else if(s=(a=t.cells[u][l]).cval_real,-1===r)if(0===o)if(void 0!==t.cells[u-1]&&void 0!==t.cells[u-1][l])r=0,i=-1,o=1;else{if(!(1&s)){c.push([l+a.bottomright,u]),r=0,i=1,o=1,h=!0;break}c.push([l,u])}else{if(!(s&eo)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+l+","+u);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===r){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[u+1]&&void 0!==t.cells[u+1][l])r=0,i=1,o=0;else{if(!(s&no)){c.push([l+a.topleft,u+1]),r=0,i=-1,o=0,h=!0;break}c.push([l+1,u+1]),r=1,i=0,o=1}}else if(-1===i){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[u][l+1])r=1,i=0,o=1;else{if(!(4&s)){c.push([l+1,u+a.righttop]),r=-1,i=0,o=1,h=!0;break}c.push([l+1,u]),r=0,i=-1,o=1}}else{if(1!==i){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[u][l-1])r=-1,i=0,o=0;else{if(!(s&eo)){c.push([l,u+a.leftbottom]),r=1,i=0,o=0,h=!0;break}c.push([l,u+1]),r=0,i=1,o=0}}if(u+=i,(l+=r)===e&&u===n)break}return{path:c,i:l,j:u,x:r,y:i,o:o}}function Xo(t){if(t.edges.length>0){var e=t.edges[t.edges.length-1],n=t.cval_real;switch(e){case 0:return n&no?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 1:return 4&n?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 2:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 3:return 1&n?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 4:return n&no?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 5:return 4&n?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 6:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 7:return 1&n?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 8:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1};case 9:return 1&n?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 10:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1};case 11:return n&eo?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 12:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 13:return 1&n?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 14:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 15:return n&eo?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 16:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 17:return n&eo?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 18:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 19:return n&eo?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 20:return n&eo?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 21:return n&no?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1};case 22:return n&eo?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 23:return n&no?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}function Jo(t,e,n,r){var i,o,a,s,l,u=t.cval;switch(e){case-1:switch(r){case 0:i=Fo[u],a=fo[u],s=po[u],l=go[u];break;default:i=Do[u],a=uo[u],s=co[u],l=ho[u]}break;case 1:switch(r){case 0:i=zo[u],a=Co[u],s=Mo[u],l=To[u];break;default:i=Uo[u],a=wo[u],s=So[u],l=Eo[u]}break;default:switch(n){case-1:switch(r){case 0:i=Go[u],a=ro[u],s=io[u],l=oo[u];break;default:i=qo[u],a=ao[u],s=so[u],l=lo[u]}break;case 1:switch(r){case 0:i=Bo[u],a=mo[u],s=yo[u],l=vo[u];break;default:i=jo[u],a=bo[u],s=_o[u],l=xo[u]}}}if(o=t.edges.indexOf(i),void 0===t.edges[o])return null;switch(function(t,e){delete t.edges[e];for(var n=e+1;n<t.edges.length;n++)t.edges[n-1]=t.edges[n];t.edges.pop()}(t,o),u=t.cval_real,i){case 0:u&no?(e=t.topleft,n=1):(e=1,n=t.righttop);break;case 1:4&u?(e=1,n=t.rightbottom):(e=t.topleft,n=1);break;case 2:4&u?(e=t.topleft,n=1):(e=t.bottomright,n=0);break;case 3:1&u?(e=t.bottomleft,n=0):(e=t.topleft,n=1);break;case 4:u&no?(e=t.topright,n=1):(e=1,n=t.righttop);break;case 5:4&u?(e=1,n=t.rightbottom):(e=t.topright,n=1);break;case 6:4&u?(e=t.topright,n=1):(e=t.bottomright,n=0);break;case 7:1&u?(e=t.bottomleft,n=0):(e=t.topright,n=1);break;case 8:4&u?(e=1,n=t.righttop):(e=t.bottomright,n=0);break;case 9:1&u?(e=t.bottomleft,n=0):(e=1,n=t.righttop);break;case 10:1&u?(e=1,n=t.righttop):(e=0,n=t.leftbottom);break;case 11:u&eo?(e=0,n=t.lefttop):(e=1,n=t.righttop);break;case 12:4&u?(e=1,n=t.rightbottom):(e=t.bottomright,n=0);break;case 13:1&u?(e=t.bottomleft,n=0):(e=1,n=t.rightbottom);break;case 14:1&u?(e=1,n=t.rightbottom):(e=0,n=t.leftbottom);break;case 15:u&eo?(e=0,n=t.lefttop):(e=1,n=t.rightbottom);break;case 16:4&u?(e=0,n=t.leftbottom):(e=t.bottomright,n=0);break;case 17:u&eo?(e=0,n=t.lefttop):(e=t.bottomright,n=0);break;case 18:1&u?(e=t.bottomleft,n=0):(e=0,n=t.leftbottom);break;case 19:u&eo?(e=0,n=t.lefttop):(e=t.bottomleft,n=0);break;case 20:u&eo?(e=0,n=t.leftbottom):(e=t.topleft,n=1);break;case 21:u&no?(e=t.topright,n=1):(e=0,n=t.leftbottom);break;case 22:u&eo?(e=0,n=t.lefttop):(e=t.topleft,n=1);break;case 23:u&no?(e=t.topright,n=1):(e=0,n=t.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}return void 0!==e&&void 0!==n&&void 0!==a&&void 0!==s&&void 0!==l||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+n+" "+a+" "+s+" "+l)),{p:[e,n],x:a,y:s,o:l}}function Zo(t){var e=[],n=[];t.forEach((function(t){var r=qr(c([t]));n.push(r),e.push({ring:t,area:r})})),n.sort((function(t,e){return e-t}));var r=[];return n.forEach((function(t){for(var n=0;n<e.length;n++)if(e[n].area===t){r.push(e[n].ring),e.splice(n,1);break}})),r}function Ko(t){for(var e=t.map((function(t){return{lrCoordinates:t,grouped:!1}})),n=[];!$o(e);)for(var r=0;r<e.length;r++)if(!e[r].grouped){var i=[];i.push(e[r].lrCoordinates),e[r].grouped=!0;for(var o=c([e[r].lrCoordinates]),a=r+1;a<e.length;a++)e[a].grouped||Qo(c([e[a].lrCoordinates]),o)&&(i.push(e[a].lrCoordinates),e[a].grouped=!0);n.push(i)}return n}function Qo(t,e){for(var n=Sn(t),r=0;r<n.features.length;r++)if(!ye(n.features[r],e))return!1;return!0}function $o(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}function ta(t,e,n){if(!O(n=n||{}))throw new Error("options is invalid");var r=n.pivot,i=n.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("angle is required");return 0===e||(r||(r=wn(t)),!1!==i&&void 0!==i||(t=Ce(t)),L(t,(function(t){var n=Ui(r,t)+e,i=Rr(r,t),o=$(qi(r,i,n));t[0]=o[0],t[1]=o[1]}))),t}function ea(t,e,n){if(!O(n=n||{}))throw new Error("options is invalid");var r=n.origin,i=n.mutate;if(!t)throw new Error("geojson required");if("number"!=typeof e||0===e)throw new Error("invalid factor");var o=Array.isArray(r)||"object"==typeof r;return!0!==i&&(t=Ce(t)),"FeatureCollection"!==t.type||o?na(t,e,r):(F(t,(function(n,i){t.features[i]=na(n,e,r)})),t)}function na(t,e,n){var r="Point"===ot(t);return n=function(t,e){if(null==e&&(e="centroid"),Array.isArray(e)||"object"==typeof e)return Q(e);var n=t.bbox?t.bbox:K(t),r=n[0],i=n[1],o=n[2],a=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return l([r,i]);case"se":case"southeast":case"eastsouth":case"bottomright":return l([o,i]);case"nw":case"northwest":case"westnorth":case"topleft":return l([r,a]);case"ne":case"northeast":case"eastnorth":case"topright":return l([o,a]);case"center":return xn(t);case void 0:case null:case"centroid":return wn(t);default:throw new Error("invalid origin")}}(t,n),1===e||r||L(t,(function(t){var r=Rr(n,t),i=Ui(n,t),o=$(qi(n,r*e,i));t[0]=o[0],t[1]=o[1],3===t.length&&(t[2]*=e)})),t}function ra(t){var e=t[0],n=t[1];return[n[0]-e[0],n[1]-e[1]]}function ia(t,e){return t[0]*e[1]-e[0]*t[1]}function oa(t,e){return!function(t,e){return 0===ia(ra(t),ra(e))}(t,e)&&function(t,e){var n,r,i=t[0],o=ra(t),a=e[0],s=ra(e),l=ia(o,s);return function(t,e){return[t[0]+e[0],t[1]+e[1]]}(i,function(t,e){return[t*e[0],t*e[1]]}(ia((r=i,[(n=a)[0]-r[0],n[1]-r[1]]),s)/l,o))}(t,e)}function aa(t,e,n){var r=[],i=w(e,n),o=$(t),a=[];return o.forEach((function(t,e){if(e!==o.length-1){var n=(u=t,c=o[e+1],h=i,d=Math.sqrt((u[0]-c[0])*(u[0]-c[0])+(u[1]-c[1])*(u[1]-c[1])),f=u[0]+h*(c[1]-u[1])/d,p=c[0]+h*(c[1]-u[1])/d,g=u[1]+h*(u[0]-c[0])/d,m=c[1]+h*(u[0]-c[0])/d,[[f,g],[p,m]]);if(r.push(n),e>0){var s=r[e-1],l=oa(n,s);!1!==l&&(s[1]=l,n[0]=l),a.push(s[0]),e===o.length-2&&(a.push(n[0]),a.push(n[1]))}2===o.length&&(a.push(n[0]),a.push(n[1]))}var u,c,h,d,f,p,g,m})),d(a,t.properties)}function sa(t,e,n){var r=e[0]-t[0],i=e[1]-t[1],o=n[0]-e[0];return function(t){return(t>0)-(t<0)||+t}(r*(n[1]-e[1])-o*i)}function la(t,e){return e.geometry.coordinates[0].every((function(e){return ye(l(e),t)}))}Vo[1]=Vo[169]=Ao,Vo[4]=Vo[166]=Oo,Vo[16]=Vo[154]=ko,Vo[64]=Vo[106]=Io,Vo[168]=Vo[2]=Po,Vo[162]=Vo[8]=Lo,Vo[138]=Vo[32]=No,Vo[42]=Vo[128]=Ro,Vo[5]=Vo[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},Vo[20]=Vo[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},Vo[80]=Vo[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},Vo[65]=Vo[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},Vo[160]=Vo[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},Vo[130]=Vo[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},Vo[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},Vo[101]=Vo[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},Vo[149]=Vo[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},Vo[86]=Vo[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},Vo[89]=Vo[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},Vo[96]=Vo[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},Vo[24]=Vo[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},Vo[6]=Vo[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},Vo[129]=Vo[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},Vo[66]=Vo[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Vo[144]=Vo[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Vo[36]=Vo[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},Vo[9]=Vo[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},Vo[37]=Vo[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},Vo[148]=Vo[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Vo[82]=Vo[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},Vo[73]=Vo[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},Vo[145]=Vo[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},Vo[70]=Vo[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Vo[34]=function(t){return[Ro(t),Lo(t)]},Vo[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Vo[136]=function(t){return[No(t),Po(t)]},Vo[153]=function(t){return[ko(t),Ao(t)]},Vo[102]=function(t){return[Oo(t),Io(t)]},Vo[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},Vo[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Vo[152]=function(t){return[ko(t),Po(t)]},Vo[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Vo[137]=function(t){return[No(t),Ao(t)]},Vo[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},Vo[98]=function(t){return[Lo(t),Io(t)]},Vo[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Vo[38]=function(t){return[Oo(t),Ro(t)]},Vo[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};var ua=function(){function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return t.buildId=function(t){return t.join(",")},t.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter((function(e){return e.from.id!==t.from.id}))},t.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter((function(e){return e.to.id!==t.to.id}))},t.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},t.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort((function(e,n){var r=e.to,i=n.to;if(r.coordinates[0]-t.coordinates[0]>=0&&i.coordinates[0]-t.coordinates[0]<0)return 1;if(r.coordinates[0]-t.coordinates[0]<0&&i.coordinates[0]-t.coordinates[0]>=0)return-1;if(r.coordinates[0]-t.coordinates[0]==0&&i.coordinates[0]-t.coordinates[0]==0)return r.coordinates[1]-t.coordinates[1]>=0||i.coordinates[1]-t.coordinates[1]>=0?r.coordinates[1]-i.coordinates[1]:i.coordinates[1]-r.coordinates[1];var o=sa(t.coordinates,r.coordinates,i.coordinates);return o<0?1:o>0?-1:Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2)-(Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2))})),this.outerEdgesSorted=!0)},t.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},t.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},t.prototype.addInnerEdge=function(t){this.innerEdges.push(t)},t}(),ca=function(){function t(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return t.prototype.getSymetric=function(){return this.symetric||(this.symetric=new t(this.to,this.from),this.symetric.symetric=this),this.symetric},t.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},t.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},t.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},t.prototype.toLineString=function(){return d([this.from.coordinates,this.to.coordinates])},t.prototype.compareTo=function(t){return sa(t.from.coordinates,t.to.coordinates,this.to.coordinates)},t}(),ha=function(){function t(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return t.prototype.push=function(t){this.edges.push(t),this.polygon=this.envelope=void 0},t.prototype.get=function(t){return this.edges[t]},Object.defineProperty(t.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.edges.forEach(t)},t.prototype.map=function(t){return this.edges.map(t)},t.prototype.some=function(t){return this.edges.some(t)},t.prototype.isValid=function(){return!0},t.prototype.isHole=function(){var t=this,e=this.edges.reduce((function(e,n,r){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=r),e}),0),n=(0===e?this.length:e)-1,r=(e+1)%this.length,i=sa(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[r].from.coordinates);return 0===i?this.edges[n].from.coordinates[0]>this.edges[r].from.coordinates[0]:i>0},t.prototype.toMultiPoint=function(){return m(this.edges.map((function(t){return t.from.coordinates})))},t.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map((function(t){return t.from.coordinates}));return t.push(this.edges[0].from.coordinates),this.polygon=c([t])},t.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=mn(this.toPolygon())},t.findEdgeRingContaining=function(t,e){var n,r,i=t.getEnvelope();return e.forEach((function(e){var o,a,s,u,c,h,d=e.getEnvelope();if(r&&(n=r.getEnvelope()),a=i,s=(o=d).geometry.coordinates[0].map((function(t){return t[0]})),u=o.geometry.coordinates[0].map((function(t){return t[1]})),c=a.geometry.coordinates[0].map((function(t){return t[0]})),h=a.geometry.coordinates[0].map((function(t){return t[1]})),(Math.max.apply(null,s)!==Math.max.apply(null,c)||Math.max.apply(null,u)!==Math.max.apply(null,h)||Math.min.apply(null,s)!==Math.min.apply(null,c)||Math.min.apply(null,u)!==Math.min.apply(null,h))&&la(d,i)){for(var f=t.map((function(t){return t.from.coordinates})),p=void 0,g=function(t){e.some((function(e){return n=t,r=e.from.coordinates,n[0]===r[0]&&n[1]===r[1];var n,r}))||(p=t)},m=0,y=f;m<y.length;m++)g(y[m]);p&&e.inside(l(p))&&(r&&!la(n,d)||(r=e))}})),r},t.prototype.inside=function(t){return ye(t,this.toPolygon())},t}(),da=function(){function t(){this.edges=[],this.nodes={}}return t.fromGeoJson=function(e){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(e);var n=new t;return G(e,(function(t){nt(t,"LineString","Graph::fromGeoJson"),N(t,(function(t,e){if(t){var r=n.getNode(t),i=n.getNode(e);n.addEdge(r,i)}return e}))})),n},t.prototype.getNode=function(t){var e=ua.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new ua(t)),n},t.prototype.addEdge=function(t,e){var n=new ca(t,e),r=n.getSymetric();this.edges.push(n),this.edges.push(r)},t.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map((function(e){return t.nodes[e]})).forEach((function(e){return t._removeIfDangle(e)}))},t.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map((function(t){return t.to}));this.removeNode(t),n.forEach((function(t){return e._removeIfDangle(t)}))}},t.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach((function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))}))},t.prototype._computeNextCWEdges=function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach((function(t){return e._computeNextCWEdges(e.nodes[t])})):t.getOuterEdges().forEach((function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e}))},t.prototype._computeNextCCWEdges=function(t,e){for(var n,r,i=t.getOuterEdges(),o=i.length-1;o>=0;--o){var a=i[o],s=a.symetric,l=void 0,u=void 0;a.label===e&&(l=a),s.label===e&&(u=s),l&&u&&(u&&(r=u),l&&(r&&(r.next=l,r=void 0),n||(n=l)))}r&&(r.next=n)},t.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach((function(n){if(!(n.label>=0)){t.push(n);var r=n;do{r.label=e,r=r.next}while(!n.isEqual(r));e++}})),t},t.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach((function(t){t.label=void 0})),this._findLabeledEdgeRings().forEach((function(e){t._findIntersectionNodes(e).forEach((function(n){t._computeNextCCWEdges(n,e.label)}))}));var e=[];return this.edges.forEach((function(n){n.ring||e.push(t._findEdgeRing(n))})),e},t.prototype._findIntersectionNodes=function(t){var e=[],n=t,r=function(){var r=0;n.from.getOuterEdges().forEach((function(e){e.label===t.label&&++r})),r>1&&e.push(n.from),n=n.next};do{r()}while(!t.isEqual(n));return e},t.prototype._findEdgeRing=function(t){var e=t,n=new ha;do{n.push(e),e.ring=n,e=e.next}while(!t.isEqual(e));return n},t.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach((function(t){return e.removeEdge(t)})),t.innerEdges.forEach((function(t){return e.removeEdge(t)})),delete this.nodes[t.id]},t.prototype.removeEdge=function(t){this.edges=this.edges.filter((function(e){return!e.isEqual(t)})),t.deleteEdge()},t}();function fa(t,e){var n=!0;return G(t,(function(t){G(e,(function(e){if(!1===n)return!1;n=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return n=t.coordinates,r=e.coordinates,!(n[0]===r[0]&&n[1]===r[1]);case"LineString":return!pa(e,t);case"Polygon":return!ye(t,e)}break;case"LineString":switch(e.type){case"Point":return!pa(t,e);case"LineString":return!function(t,e){return Pr(t,e).features.length>0}(t,e);case"Polygon":return!ga(e,t)}break;case"Polygon":switch(e.type){case"Point":return!ye(e,t);case"LineString":return!ga(t,e);case"Polygon":return!function(t,e){for(var n=0,r=t.coordinates[0];n<r.length;n++)if(ye(r[n],e))return!0;for(var i=0,o=e.coordinates[0];i<o.length;i++)if(ye(o[i],t))return!0;return Pr(Ci(t),Ci(e)).features.length>0}(e,t)}}var n,r;return!1}(t.geometry,e.geometry)}))})),n}function pa(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(ma(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function ga(t,e){for(var n=0,r=e.coordinates;n<r.length;n++)if(ye(r[n],t))return!0;return Pr(e,Ci(t)).features.length>0}function ma(t,e,n){var r=n[0]-t[0],i=n[1]-t[1],o=e[0]-t[0],a=e[1]-t[1];return 0==r*a-i*o&&(Math.abs(o)>=Math.abs(a)?o>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:a>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1])}function ya(t,e){return!(t[0]>e[0])&&!(t[2]<e[2])&&!(t[1]>e[1])&&!(t[3]<e[3])}function va(t,e){return t[0]===e[0]&&t[1]===e[1]}function ba(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function _a(t,e){for(var n=!1,r=!1,i=t.coordinates.length,o=0;o<i&&!n&&!r;){for(var a=0;a<e.coordinates.length-1;a++){var s=!0;0!==a&&a!==e.coordinates.length-2||(s=!1),Sa(e.coordinates[a],e.coordinates[a+1],t.coordinates[o],s)?n=!0:r=!0}o++}return n&&r}function xa(t,e){return Pr(t,Mi(e)).features.length>0}function wa(t,e){for(var n=!1,r=!1,i=t.coordinates.length,o=0;o<i&&(!n||!r);o++)ye(l(t.coordinates[o]),e)?n=!0:r=!0;return r&&n}function Sa(t,e,n,r){var i=n[0]-t[0],o=n[1]-t[1],a=e[0]-t[0],s=e[1]-t[1];return 0==i*s-o*a&&(r?Math.abs(a)>=Math.abs(s)?a>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:s>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(a)>=Math.abs(s)?a>0?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:s>0?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1])}var Ea=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:Ta};function Ca(t){return t.coordinates.map((function(e){return{type:t.type.replace("Multi",""),coordinates:e}}))}function Ma(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function Ta(t,e){return Fi(t,e,{strict:!0})}Ea.prototype.compare=function(t,e){if(t.type!==e.type||!Ma(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,r=Ca(t),i=Ca(e);return r.every((function(t){return this.some((function(e){return n.compare(t,e)}))}),i)}}return!1},Ea.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},Ea.prototype.compareLine=function(t,e,n,r){if(!Ma(t,e))return!1;var i=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!r||this.compareCoord(i[0],o[0])||(o=this.fixStartIndex(o,i))){var a=this.compareCoord(i[n],o[n]);return this.direction||a?this.comparePath(i,o):!!this.compareCoord(i[n],o[o.length-(1+n)])&&this.comparePath(i.slice().reverse(),o)}},Ea.prototype.fixStartIndex=function(t,e){for(var n,r=-1,i=0;i<t.length;i++)if(this.compareCoord(t[i],e[0])){r=i;break}return r>=0&&(n=[].concat(t.slice(r,t.length),t.slice(1,r+1))),n},Ea.prototype.comparePath=function(t,e){var n=this;return t.every((function(t,e){return n.compareCoord(t,this[e])}),e)},Ea.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),r=e.coordinates.slice(1,e.coordinates.length),i=this;return n.every((function(t){return this.some((function(e){return i.compareLine(t,e,1,!0)}))}),r)}return!1},Ea.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},Ea.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},Ea.prototype.removePseudo=function(t){return t};var Aa=Ea;function Oa(t,e){var n=!1;return G(t,(function(t){G(e,(function(e){if(!0===n)return!0;n=!fa(t.geometry,e.geometry)}))})),n}var ka=Ut((function(t){function e(t,e,n,r){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,r)}e.prototype.run=function(t,e,n,r){this._init(t,e,n,r);for(var i=0;i<this._datasetLength;i++)if(1!==this._visited[i]){this._visited[i]=1;var o=this._regionQuery(i);if(o.length<this.minPts)this.noise.push(i);else{var a=this.clusters.length;this.clusters.push([]),this._addToCluster(i,a),this._expandCluster(a,o)}}return this.clusters},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(1!==this._visited[r]){this._visited[r]=1;var i=this._regionQuery(r);i.length>=this.minPts&&(e=this._mergeArrays(e,i))}1!==this._assigned[r]&&this._addToCluster(r,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++)this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n);return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,r=0;r<n;r++){var i=e[r];t.indexOf(i)<0&&t.push(i)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)})),Ia=Ut((function(t){function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,r=0;r<this.k;r++)this.centroids[r]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var o=0;o<this.k;o++){for(var a=new Array(c),s=0,l=0;l<c;l++)a[l]=0;for(var u=0;u<n;u++){var c=this.dataset[u].length;if(o===this.assignments[u]){for(l=0;l<c;l++)a[l]+=this.dataset[u][l];s++}}if(s>0){for(l=0;l<c;l++)a[l]/=s;this.centroids[o]=a}else this.centroids[o]=this.randomCentroid(),i=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,n=this.dataset.length-1;do{e=Math.round(Math.random()*n),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,r=0;r<n;r++)(t=this.argmin(this.dataset[r],this.centroids,this.distance))!=this.assignments[r]&&(this.assignments[r]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)void 0===e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var r,i=Number.MAX_VALUE,o=0,a=e.length,s=0;s<a;s++)(r=n(t,e[s]))<i&&(i=r,o=s);return o},e.prototype.distance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;){var i=t[r]-e[r];n+=i*i}return Math.sqrt(n)},t.exports&&(t.exports=e)})),Pa=Ut((function(t){function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,r=n;r--;){var i=this._priorities[r];"desc"===this._sorting?e>i&&(n=r):e<i&&(n=r)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;)if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var r=0;r<t.length;r++)this.insert(t[r],e[r])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)})),La=Ut((function(t){if(t.exports)var e=Pa;function n(t,e,n,r){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,r)}n.prototype.run=function(t,n,r,i){this._init(t,n,r,i);for(var o=0,a=this.dataset.length;o<a;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var s=this.clusters.length-1;this._orderedList.push(o);var l=new e(null,null,"asc"),u=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,u,l),this._expandCluster(s,l))}return this.clusters},n.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var r=this._orderedList[e],i=this._reachability[r];t.push([r,i])}return t},n.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},n.prototype._updateQueue=function(t,e,n){var r=this;this._coreDistance=this._distanceToCore(t),e.forEach((function(e){if(void 0===r._processed[e]){var i=r.distance(r.dataset[t],r.dataset[e]),o=Math.max(r._coreDistance,i);void 0===r._reachability[e]?(r._reachability[e]=o,n.insert(e,o)):o<r._reachability[e]&&(r._reachability[e]=o,n.remove(e),n.insert(e,o))}}))},n.prototype._expandCluster=function(t,e){for(var n=e.getElements(),r=0,i=n.length;r<i;r++){var o=n[r];if(void 0===this._processed[o]){var a=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,a,e),this._expandCluster(t,e))}}},n.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++)if(this._regionQuery(t,n).length>=this.minPts)return n},n.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],r=0,i=this.dataset.length;r<i;r++)this.distance(this.dataset[t],this.dataset[r])<e&&n.push(r);return n},n.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=n)})),Na=Ut((function(t){t.exports&&(t.exports={DBSCAN:ka,KMEANS:Ia,OPTICS:La,PriorityQueue:Pa})})),Ra=function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++){var a=(t[o]||0)-(e[o]||0);i+=a*a}return n?Math.sqrt(i):i},Da=Ra,Fa=function(t,e,n){var r=Math.abs(t-e);return n?r:r*r},ja=Ra,Ba=function(t,e){for(var n={},r=[],i=e<<2,o=t.length,a=t[0].length>0;r.length<e&&i-- >0;){var s=t[Math.floor(Math.random()*o)],l=a?s.join("_"):""+s;n[l]||(n[l]=!0,r.push(s))}if(r.length<e)throw new Error("Error initializating clusters");return r},za=function(t,e){var n=t[0].length?Da:Fa,r=[],i=t.length,o=t[0].length>0,a=t[Math.floor(Math.random()*i)];for(o&&a.join("_"),r.push(a);r.length<e;){for(var s=[],l=r.length,u=0,c=[],h=0;h<i;h++){for(var d=1/0,f=0;f<l;f++){var p=n(t[h],r[f]);p<=d&&(d=p)}s[h]=d}for(var g=0;g<i;g++)u+=s[g];for(var m=0;m<i;m++)c[m]={i:m,v:t[m],pr:s[m]/u,cs:0};c.sort((function(t,e){return t.pr-e.pr})),c[0].cs=c[0].pr;for(var y=1;y<i;y++)c[y].cs=c[y-1].cs+c[y].pr;for(var v=Math.random(),b=0;b<i-1&&c[b++].cs<v;);r.push(c[b-1].v)}return r};function Ua(t,e,n){n=n||[];for(var r=0;r<t;r++)n[r]=e;return n}var Ga=function(t,e,n,r){var i=[],o=[],a=[],s=[],l=!1,u=r||1e4,c=t.length,h=t[0].length,d=h>0,f=[];if(n)i="kmrand"==n?Ba(t,e):"kmpp"==n?za(t,e):n;else for(var p={};i.length<e;){var g=Math.floor(Math.random()*c);p[g]||(p[g]=!0,i.push(t[g]))}do{Ua(e,0,f);for(var m=0;m<c;m++){for(var y=1/0,v=0,b=0;b<e;b++)(s=d?ja(t[m],i[b]):Math.abs(t[m]-i[b]))<=y&&(y=s,v=b);a[m]=v,f[v]++}for(var _=[],x=(o=[],0);x<e;x++)_[x]=d?Ua(h,0,_[x]):0,o[x]=i[x];if(d){for(var w=0;w<e;w++)i[w]=[];for(var S=0;S<c;S++)for(var E=_[a[S]],C=t[S],M=0;M<h;M++)E[M]+=C[M];l=!0;for(var T=0;T<e;T++){for(var A=i[T],O=_[T],k=o[T],I=f[T],P=0;P<h;P++)A[P]=O[P]/I||0;if(l)for(var L=0;L<h;L++)if(k[L]!=A[L]){l=!1;break}}}else{for(var N=0;N<c;N++)_[a[N]]+=t[N];for(var R=0;R<e;R++)i[R]=_[R]/f[R]||0;l=!0;for(var D=0;D<e;D++)if(o[D]!=i[D]){l=!1;break}}l=l||--u<=0}while(!l);return{it:1e4-u,k:e,idxs:a,centroids:i}};function qa(t,e){return S(Ui(t[0],t[1]))===S(Ui(e[0],e[1]))}function Va(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function Ha(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}var Wa={search:function(t,e,n,r){t.cleanDirty();var i=(r=r||{}).heuristic||Wa.heuristics.manhattan,o=r.closest||!1,a=new Ja((function(t){return t.f})),s=e;for(e.h=i(e,n),a.push(e);a.size()>0;){var l=a.pop();if(l===n)return Ha(l);l.closed=!0;for(var u=t.neighbors(l),c=0,h=u.length;c<h;++c){var d=u[c];if(!d.closed&&!d.isWall()){var f=l.g+d.getCost(l),p=d.visited;(!p||f<d.g)&&(d.visited=!0,d.parent=l,d.h=d.h||i(d,n),d.g=f,d.f=d.g+d.h,t.markDirty(d),o&&(d.h<s.h||d.h===s.h&&d.g<s.g)&&(s=d),p?a.rescoreElement(d):a.push(d))}}}return o?Ha(s):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),r=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return 1*(r+i)+(n-2)*Math.min(r,i)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function Ya(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var r=0,i=t[n];r<i.length;r++){var o=new Xa(n,r,i[r]);this.grid[n][r]=o,this.nodes.push(o)}}this.init()}function Xa(t,e,n){this.x=t,this.y=e,this.weight=n}function Ja(t){this.content=[],this.scoreFunction=t}function Za(t,e){for(var n=0;n<e.features.length;n++)if(ye(t,e.features[n]))return!0;return!1}function Ka(t){return function(){return t}}function Qa(t){return t[0]}function $a(t){return t[1]}function ts(){this._=null}function es(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function ns(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function rs(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function is(t){for(;t.L;)t=t.L;return t}function os(t,e,n,r){var i=[null,null],o=Os.push(i)-1;return i.left=t,i.right=e,n&&ss(i,t,e,n),r&&ss(i,e,t,r),Ts[t.index].halfedges.push(o),Ts[e.index].halfedges.push(o),i}function as(t,e,n){var r=[e,n];return r.left=t,r}function ss(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function ls(t,e,n,r,i){var o,a=t[0],s=t[1],l=a[0],u=a[1],c=0,h=1,d=s[0]-l,f=s[1]-u;if(o=e-l,d||!(o>0)){if(o/=d,d<0){if(o<c)return;o<h&&(h=o)}else if(d>0){if(o>h)return;o>c&&(c=o)}if(o=r-l,d||!(o<0)){if(o/=d,d<0){if(o>h)return;o>c&&(c=o)}else if(d>0){if(o<c)return;o<h&&(h=o)}if(o=n-u,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<h&&(h=o)}else if(f>0){if(o>h)return;o>c&&(c=o)}if(o=i-u,f||!(o<0)){if(o/=f,f<0){if(o>h)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<h&&(h=o)}return!(c>0||h<1)||(c>0&&(t[0]=[l+c*d,u+c*f]),h<1&&(t[1]=[l+h*d,u+h*f]),!0)}}}}}function us(t,e,n,r,i){var o=t[1];if(o)return!0;var a,s,l=t[0],u=t.left,c=t.right,h=u[0],d=u[1],f=c[0],p=c[1],g=(h+f)/2,m=(d+p)/2;if(p===d){if(g<e||g>=r)return;if(h>f){if(l){if(l[1]>=i)return}else l=[g,n];o=[g,i]}else{if(l){if(l[1]<n)return}else l=[g,i];o=[g,n]}}else if(s=m-(a=(h-f)/(p-d))*g,a<-1||a>1)if(h>f){if(l){if(l[1]>=i)return}else l=[(n-s)/a,n];o=[(i-s)/a,i]}else{if(l){if(l[1]<n)return}else l=[(i-s)/a,i];o=[(n-s)/a,n]}else if(d<p){if(l){if(l[0]>=r)return}else l=[e,a*e+s];o=[r,a*r+s]}else{if(l){if(l[0]<e)return}else l=[r,a*r+s];o=[e,a*e+s]}return t[0]=l,t[1]=o,!0}function cs(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function hs(t,e){return e[+(e.left!==t.site)]}function ds(t,e){return e[+(e.left===t.site)]}Ya.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)Wa.cleanNode(this.nodes[t])},Ya.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)Wa.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},Ya.prototype.markDirty=function(t){this.dirtyNodes.push(t)},Ya.prototype.neighbors=function(t){var e=[],n=t.x,r=t.y,i=this.grid;return i[n-1]&&i[n-1][r]&&e.push(i[n-1][r]),i[n+1]&&i[n+1][r]&&e.push(i[n+1][r]),i[n]&&i[n][r-1]&&e.push(i[n][r-1]),i[n]&&i[n][r+1]&&e.push(i[n][r+1]),this.diagonal&&(i[n-1]&&i[n-1][r-1]&&e.push(i[n-1][r-1]),i[n+1]&&i[n+1][r-1]&&e.push(i[n+1][r-1]),i[n-1]&&i[n-1][r+1]&&e.push(i[n-1][r+1]),i[n+1]&&i[n+1][r+1]&&e.push(i[n+1][r+1])),e},Ya.prototype.toString=function(){for(var t,e,n,r,i=[],o=this.grid,a=0,s=o.length;a<s;a++){for(t=[],n=0,r=(e=o[a]).length;n<r;n++)t.push(e[n].weight);i.push(t.join(" "))}return i.join("\n")},Xa.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},Xa.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},Xa.prototype.isWall=function(){return 0===this.weight},Ja.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var i,o=t+1<<1,a=o-1,s=null;if(a<e){var l=this.content[a];(i=this.scoreFunction(l))<r&&(s=a)}if(o<e){var u=this.content[o];this.scoreFunction(u)<(null===s?r:i)&&(s=o)}if(null===s)break;this.content[t]=this.content[s],this.content[s]=n,t=s}}},ts.prototype={constructor:ts,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=is(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(ns(this,n),n=(t=n).U),n.C=!1,r.C=!0,rs(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(rs(this,n),n=(t=n).U),n.C=!1,r.C=!0,ns(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?is(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,ns(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,rs(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,ns(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,rs(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,ns(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,rs(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var fs,ps=[];function gs(){es(this),this.x=this.y=this.arc=this.site=this.cy=null}function ms(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i[0],s=i[1],l=r[0]-a,u=r[1]-s,c=o[0]-a,h=o[1]-s,d=2*(l*h-u*c);if(!(d>=-Is)){var f=l*l+u*u,p=c*c+h*h,g=(h*f-u*p)/d,m=(l*p-c*f)/d,y=ps.pop()||new gs;y.arc=t,y.site=i,y.x=g+a,y.y=(y.cy=m+s)+Math.sqrt(g*g+m*m),t.circle=y;for(var v=null,b=As._;b;)if(y.y<b.y||y.y===b.y&&y.x<=b.x){if(!b.L){v=b.P;break}b=b.L}else{if(!b.R){v=b;break}b=b.R}As.insert(v,y),v||(fs=y)}}}}function ys(t){var e=t.circle;e&&(e.P||(fs=e.N),As.remove(e),ps.push(e),es(e),t.circle=null)}var vs=[];function bs(){es(this),this.edge=this.site=this.circle=null}function _s(t){var e=vs.pop()||new bs;return e.site=t,e}function xs(t){ys(t),Ms.remove(t),vs.push(t),es(t)}function ws(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,a=t.N,s=[t];xs(t);for(var l=o;l.circle&&Math.abs(n-l.circle.x)<ks&&Math.abs(r-l.circle.cy)<ks;)o=l.P,s.unshift(l),xs(l),l=o;s.unshift(l),ys(l);for(var u=a;u.circle&&Math.abs(n-u.circle.x)<ks&&Math.abs(r-u.circle.cy)<ks;)a=u.N,s.push(u),xs(u),u=a;s.push(u),ys(u);var c,h=s.length;for(c=1;c<h;++c)u=s[c],l=s[c-1],ss(u.edge,l.site,u.site,i);l=s[0],(u=s[h-1]).edge=os(l.site,u.site,null,i),ms(l),ms(u)}function Ss(t){for(var e,n,r,i,o=t[0],a=t[1],s=Ms._;s;)if((r=Es(s,a)-o)>ks)s=s.L;else{if(!((i=o-Cs(s,a))>ks)){r>-ks?(e=s.P,n=s):i>-ks?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}!function(t){Ts[t.index]={site:t,halfedges:[]}}(t);var l=_s(t);if(Ms.insert(e,l),e||n){if(e===n)return ys(e),n=_s(e.site),Ms.insert(l,n),l.edge=n.edge=os(e.site,l.site),ms(e),void ms(n);if(n){ys(e),ys(n);var u=e.site,c=u[0],h=u[1],d=t[0]-c,f=t[1]-h,p=n.site,g=p[0]-c,m=p[1]-h,y=2*(d*m-f*g),v=d*d+f*f,b=g*g+m*m,_=[(m*v-f*b)/y+c,(d*b-g*v)/y+h];ss(n.edge,u,p,_),l.edge=os(u,t,null,_),n.edge=os(t,p,null,_),ms(e),ms(n)}else l.edge=os(e.site,l.site)}}function Es(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;var s=(n=a.site)[0],l=n[1],u=l-e;if(!u)return s;var c=s-r,h=1/o-1/u,d=c/u;return h?(-d+Math.sqrt(d*d-2*h*(c*c/(-2*u)-l+u/2+i-o/2)))/h+r:(r+s)/2}function Cs(t,e){var n=t.N;if(n)return Es(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var Ms,Ts,As,Os,ks=1e-6,Is=1e-12;function Ps(t,e){return e[1]-t[1]||e[0]-t[0]}function Ls(t,e){var n,r,i,o=t.sort(Ps).pop();for(Os=[],Ts=new Array(t.length),Ms=new ts,As=new ts;;)if(i=fs,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(Ss(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;ws(i.arc)}if(function(){for(var t,e,n,r,i=0,o=Ts.length;i<o;++i)if((t=Ts[i])&&(r=(e=t.halfedges).length)){var a=new Array(r),s=new Array(r);for(n=0;n<r;++n)a[n]=n,s[n]=cs(t,Os[e[n]]);for(a.sort((function(t,e){return s[e]-s[t]})),n=0;n<r;++n)s[n]=e[a[n]];for(n=0;n<r;++n)e[n]=s[n]}}(),e){var a=+e[0][0],s=+e[0][1],l=+e[1][0],u=+e[1][1];!function(t,e,n,r){for(var i,o=Os.length;o--;)us(i=Os[o],t,e,n,r)&&ls(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>ks||Math.abs(i[0][1]-i[1][1])>ks)||delete Os[o]}(a,s,l,u),function(t,e,n,r){var i,o,a,s,l,u,c,h,d,f,p,g,m=Ts.length,y=!0;for(i=0;i<m;++i)if(o=Ts[i]){for(a=o.site,s=(l=o.halfedges).length;s--;)Os[l[s]]||l.splice(s,1);for(s=0,u=l.length;s<u;)p=(f=ds(o,Os[l[s]]))[0],g=f[1],h=(c=hs(o,Os[l[++s%u]]))[0],d=c[1],(Math.abs(p-h)>ks||Math.abs(g-d)>ks)&&(l.splice(s,0,Os.push(as(a,f,Math.abs(p-t)<ks&&r-g>ks?[t,Math.abs(h-t)<ks?d:r]:Math.abs(g-r)<ks&&n-p>ks?[Math.abs(d-r)<ks?h:n,r]:Math.abs(p-n)<ks&&g-e>ks?[n,Math.abs(h-n)<ks?d:e]:Math.abs(g-e)<ks&&p-t>ks?[Math.abs(d-e)<ks?h:t,e]:null))-1),++u);u&&(y=!1)}if(y){var v,b,_,x=1/0;for(i=0,y=null;i<m;++i)(o=Ts[i])&&(_=(v=(a=o.site)[0]-t)*v+(b=a[1]-e)*b)<x&&(x=_,y=o);if(y){var w=[t,e],S=[t,r],E=[n,r],C=[n,e];y.halfedges.push(Os.push(as(a=y.site,w,S))-1,Os.push(as(a,S,E))-1,Os.push(as(a,E,C))-1,Os.push(as(a,C,w))-1)}}for(i=0;i<m;++i)(o=Ts[i])&&(o.halfedges.length||delete Ts[i])}(a,s,l,u)}this.edges=Os,this.cells=Ts,Ms=As=Os=Ts=null}function Ns(t){return(t=t.slice()).push(t[0]),c([t])}function Rs(t,e,n,r){var i=(r=r||{}).steps||64,o=r.units||"kilometers",a=r.angle||0,s=r.pivot||t,l=r.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!O(r))throw new Error("options must be an object");if(!A(i))throw new Error("steps must be a number");if(!A(a))throw new Error("angle must be a number");var u=Q(t);if("degrees"===o)var h=C(a);else e=qi(t,e,90,{units:o}),n=qi(t,n,0,{units:o}),e=Q(e)[0]-u[0],n=Q(n)[1]-u[1];for(var d=[],f=0;f<i;f+=1){var p=-360*f/i,g=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(Ds(p),2)),m=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(Ds(p),2));if(p<-90&&p>=-270&&(g=-g),p<-180&&p>=-360&&(m=-m),"degrees"===o){var y=g*Math.cos(h)+m*Math.sin(h),v=m*Math.cos(h)-g*Math.sin(h);g=y,m=v}d.push([g+u[0],m+u[1]])}return d.push(d[0]),"degrees"===o?c([d],l):ta(c([d],l),a,{pivot:s})}function Ds(t){var e=t*Math.PI/180;return Math.tan(e)}function Fs(t,e){void 0===e&&(e={});var n=0,r=0,i=0;return z(t,(function(t,o,a){var s=e.weight?null==a?void 0:a[e.weight]:void 0;if(!A(s=null==s?1:s))throw new Error("weight value must be a number for feature index "+o);(s=Number(s))>0&&L(t,(function(t){n+=t[0]*s,r+=t[1]*s,i+=s}))})),l([n/i,r/i],e.properties,e)}function js(t,e,n,r,i){var o=r.tolerance||.001,a=0,s=0,u=0,c=0;if(F(n,(function(e){var n,r=null===(n=e.properties)||void 0===n?void 0:n.weight,i=null==r?1:r;if(!A(i=Number(i)))throw new Error("weight value must be a number");if(i>0){c+=1;var o=i*_e(e,t);0===o&&(o=1);var l=i/o;a+=e.geometry.coordinates[0]*l,s+=e.geometry.coordinates[1]*l,u+=l}})),c<1)throw new Error("no features to measure");var h=a/u,d=s/u;return 1===c||0===i||Math.abs(h-e[0])<o&&Math.abs(d-e[1])<o?l([h,d],{medianCandidates:r.medianCandidates}):(r.medianCandidates.push([h,d]),js([h,d],t,n,r,i-1))}function Bs(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}function zs(t,e){var n=0,r=0;L(t,(function(i,o,a,s,l){l>n&&(n=l,r=o,e.push([]));var u=o-r,c=t.coordinates[l][u+1],h=i[0],d=i[1],f=c[0],p=c[1];e[l].push([.75*h+.25*f,.75*d+.25*p]),e[l].push([.25*h+.75*f,.25*d+.75*p])}),!0),e.forEach((function(t){t.push(t[0])}))}function Us(t,e){var n=0,r=0,i=0;L(t,(function(o,a,s,l,u){l>i&&(i=l,r=a,e.push([[]])),u>n&&(n=u,r=a,e[l].push([]));var c=a-r,h=t.coordinates[l][u][c+1],d=o[0],f=o[1],p=h[0],g=h[1];e[l][u].push([.75*d+.25*p,.75*f+.25*g]),e[l][u].push([.25*d+.75*p,.25*f+.75*g])}),!0),e.forEach((function(t){t.forEach((function(t){t.push(t[0])}))}))}function Gs(t,e,n){void 0===n&&(n=2);var r=Q(t),i=Q(e),o=r[0]-i[0],a=r[1]-i[1];return 1===n?Math.abs(o)+Math.abs(a):Math.pow(Math.pow(o,n)+Math.pow(a,n),1/n)}function qs(t,e){var n=(e=e||{}).threshold||1e4,r=e.p||2,i=e.binary||!1,o=e.alpha||-1,a=e.standardization||!1,s=[];F(t,(function(t){s.push(wn(t))}));for(var l=[],u=0;u<s.length;u++)l[u]=[];for(u=0;u<s.length;u++)for(var c=u;c<s.length;c++){u===c&&(l[u][c]=0);var h=Gs(s[u],s[c],r);l[u][c]=h,l[c][u]=h}for(u=0;u<s.length;u++)for(c=0;c<s.length;c++)0!==(h=l[u][c])&&(l[u][c]=i?h<=n?1:0:h<=n?Math.pow(h,o):0);if(a)for(u=0;u<s.length;u++){var d=l[u].reduce((function(t,e){return t+e}),0);for(c=0;c<s.length;c++)l[u][c]=l[u][c]/d}return l}function Vs(t){for(var e=0,n=0,r=t;n<r.length;n++)e+=r[n];return e/t.length}function Hs(t,e){return void 0===e&&(e={}),Ys(t,"mercator",e)}function Ws(t,e){return void 0===e&&(e={}),Ys(t,"wgs84",e)}function Ys(t,e,n){void 0===n&&(n={});var r=(n=n||{}).mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&A(t[0])?t="mercator"===e?Xs(t):Js(t):(!0!==r&&(t=Ce(t)),L(t,(function(t){var n="mercator"===e?Xs(t):Js(t);t[0]=n[0],t[1]=n[1]}))),t}function Xs(t){var e=Math.PI/180,n=6378137,r=20037508.342789244,i=[n*(Math.abs(t[0])<=180?t[0]:t[0]-360*function(t){return t<0?-1:t>0?1:0}(t[0]))*e,n*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return i[0]>r&&(i[0]=r),i[0]<-r&&(i[0]=-r),i[1]>r&&(i[1]=r),i[1]<-r&&(i[1]=-r),i}function Js(t){var e=180/Math.PI,n=6378137;return[t[0]*e/n,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/n)))*e]}Ls.prototype={constructor:Ls,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return hs(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,r){if(o=(i=n.halfedges).length)for(var i,o,a,s,l,u,c=n.site,h=-1,d=e[i[o-1]],f=d.left===c?d.right:d.left;++h<o;)a=f,f=(d=e[i[h]]).left===c?d.right:d.left,a&&f&&r<a.index&&r<f.index&&(l=a,u=f,((s=c)[0]-u[0])*(l[1]-s[1])-(s[0]-l[0])*(u[1]-s[1])<0)&&t.push([c.data,a.data,f.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var r,i,o=this,a=o._found||0,s=o.cells.length;!(i=o.cells[a]);)if(++a>=s)return null;var l=t-i.site[0],u=e-i.site[1],c=l*l+u*u;do{i=o.cells[r=a],a=null,i.halfedges.forEach((function(n){var r=o.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var l=t-s[0],u=e-s[1],h=l*l+u*u;h<c&&(c=h,a=s.index)}}))}while(null!==a);return o._found=r,null==n||c<=n*n?i.site:null}};var Zs=Object.freeze({__proto__:null,toMercator:Hs,toWgs84:Ws}),Ks=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};function Qs(t){return Array.isArray(t)?rl(t):t&&t.bbox?rl(t.bbox):[360*nl(),180*nl()]}function $s(t,e){void 0===e&&(e={}),null==t&&(t=1);for(var n=[],r=0;r<t;r++)n.push(l(Qs(e.bbox)));return p(n)}function tl(t,e){void 0===e&&(e={}),null==t&&(t=1),A(e.num_vertices)&&void 0!==e.num_vertices||(e.num_vertices=10),A(e.max_radial_length)&&void 0!==e.max_radial_length||(e.max_radial_length=10);for(var n=[],r=function(t){var r,i=[],o=Ks(Array(e.num_vertices+1)).map(Math.random);o.forEach((function(t,e,n){n[e]=e>0?t+n[e-1]:t})),o.forEach((function(t){t=2*t*Math.PI/o[o.length-1];var n=Math.random();i.push([n*(e.max_radial_length||10)*Math.sin(t),n*(e.max_radial_length||10)*Math.cos(t)])})),i[i.length-1]=i[0],i=i.map((r=Qs(e.bbox),function(t){return[t[0]+r[0],t[1]+r[1]]})),n.push(c([i]))},i=0;i<t;i++)r();return p(n)}function el(t,e){if(void 0===e&&(e={}),!O(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.num_vertices,i=e.max_length,o=e.max_rotation;null==t&&(t=1),(!A(r)||void 0===r||r<2)&&(r=10),A(i)&&void 0!==i||(i=1e-4),A(o)&&void 0!==o||(o=Math.PI/8);for(var a=[],s=0;s<t;s++){for(var l=[Qs(n)],u=0;u<r-1;u++){var c=(0===u?2*Math.random()*Math.PI:Math.tan((l[u][1]-l[u-1][1])/(l[u][0]-l[u-1][0])))+(Math.random()-.5)*o*2,h=Math.random()*i;l.push([l[u][0]+h*Math.cos(c),l[u][1]+h*Math.sin(c)])}a.push(d(l))}return p(a)}function nl(){return Math.random()-.5}function rl(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}var il=Object.freeze({__proto__:null,randomPosition:Qs,randomPoint:$s,randomPolygon:tl,randomLineString:el});function ol(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("filter is required");var n=[];return F(t,(function(t){ul(t.properties,e)&&n.push(t)})),p(n)}function al(t,e,n){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("property is required");for(var r=ll(t,e),i=Object.keys(r),o=0;o<i.length;o++){for(var a=i[o],s=r[a],l=[],u=0;u<s.length;u++)l.push(t.features[s[u]]);n(p(l),a,o)}}function sl(t,e,n,r){var i=r;return al(t,e,(function(t,e,o){i=0===o&&void 0===r?t:n(i,t,e,o)})),i}function ll(t,e){var n={};return F(t,(function(t,r){var i=t.properties||{};if(Object.prototype.hasOwnProperty.call(i,String(e))){var o=i[e];Object.prototype.hasOwnProperty.call(n,o)?n[o].push(r):n[o]=[r]}})),n}function ul(t,e){if(void 0===t)return!1;var n=typeof e;if("number"===n||"string"===n)return Object.prototype.hasOwnProperty.call(t,e);if(Array.isArray(e)){for(var r=0;r<e.length;r++)if(!ul(t,e[r]))return!1;return!0}return cl(t,e)}function cl(t,e){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];if(t[i]!==e[i])return!1}return!0}function hl(t,e){if(!e)return{};if(!e.length)return{};for(var n={},r=0;r<e.length;r++){var i=e[r];Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n}var dl=Object.freeze({__proto__:null,getCluster:ol,clusterEach:al,clusterReduce:sl,createBins:ll,applyFilter:ul,propertiesContainsFilter:cl,filterProperties:hl}),fl=function(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null
/**
     * splaytree v3.1.0
     * Fast Splay tree for Node and browser
     *
     * @author Alexander Milevski <info@w8r.name>
     * @license MIT
     * @preserve
     */};function pl(t,e){return t>e?1:t<e?-1:0}function gl(t,e,n){for(var r=new fl(null,null),i=r,o=r;;){var a=n(t,e.key);if(a<0){if(null===e.left)break;if(n(t,e.left.key)<0){var s=e.left;if(e.left=s.right,s.right=e,null===(e=s).left)break}o.left=e,o=e,e=e.left}else{if(!(a>0))break;if(null===e.right)break;if(n(t,e.right.key)>0&&(s=e.right,e.right=s.left,s.left=e,null===(e=s).right))break;i.right=e,i=e,e=e.right}}return i.right=e.left,o.left=e.right,e.left=r.right,e.right=r.left,e}function ml(t,e,n,r){var i=new fl(t,e);if(null===n)return i.left=i.right=null,i;var o=r(t,(n=gl(t,n,r)).key);return o<0?(i.left=n.left,i.right=n,n.left=null):o>=0&&(i.right=n.right,i.left=n,n.right=null),i}function yl(t,e,n){var r=null,i=null;if(e){var o=n((e=gl(t,e,n)).key,t);0===o?(r=e.left,i=e.right):o<0?(i=e.right,e.right=null,r=e):(r=e.left,e.left=null,i=e)}return{left:r,right:i}}function vl(t,e,n,r,i){if(t){r(e+(n?"└── ":"├── ")+i(t)+"\n");var o=e+(n?"    ":"│   ");t.left&&vl(t.left,o,!1,r,i),t.right&&vl(t.right,o,!0,r,i)}}var bl=function(){function t(t){void 0===t&&(t=pl),this._root=null,this._size=0,this._comparator=t}return t.prototype.insert=function(t,e){return this._size++,this._root=ml(t,e,this._root,this._comparator)},t.prototype.add=function(t,e){var n=new fl(t,e);null===this._root&&(n.left=n.right=null,this._size++,this._root=n);var r=this._comparator,i=gl(t,this._root,r),o=r(t,i.key);return 0===o?this._root=i:(o<0?(n.left=i.left,n.right=i,i.left=null):o>0&&(n.right=i.right,n.left=i,i.right=null),this._size++,this._root=n),this._root},t.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},t.prototype._remove=function(t,e,n){var r;return null===e?null:0===n(t,(e=gl(t,e,n)).key)?(null===e.left?r=e.right:(r=gl(t,e.left,n)).right=e.right,this._size--,r):e},t.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=gl(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},t.prototype.findStatic=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return e;e=r<0?e.left:e.right}return null},t.prototype.find=function(t){return this._root&&(this._root=gl(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},t.prototype.contains=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return!0;e=r<0?e.left:e.right}return!1},t.prototype.forEach=function(t,e){for(var n=this._root,r=[],i=!1;!i;)null!==n?(r.push(n),n=n.left):0!==r.length?(n=r.pop(),t.call(e,n),n=n.right):i=!0;return this},t.prototype.range=function(t,e,n,r){for(var i=[],o=this._comparator,a=this._root;0!==i.length||a;)if(a)i.push(a),a=a.left;else{if(o((a=i.pop()).key,e)>0)break;if(o(a.key,t)>=0&&n.call(r,a))return this;a=a.right}return this},t.prototype.keys=function(){var t=[];return this.forEach((function(e){var n=e.key;return t.push(n)})),t},t.prototype.values=function(){var t=[];return this.forEach((function(e){var n=e.data;return t.push(n)})),t},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},t.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},t.prototype.at=function(t){for(var e=this._root,n=!1,r=0,i=[];!n;)if(e)i.push(e),e=e.left;else if(i.length>0){if(e=i.pop(),r===t)return e;r++,e=e.right}else n=!0;return null},t.prototype.next=function(t){var e=this._root,n=null;if(t.right){for(n=t.right;n.left;)n=n.left;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?(n=e,e=e.left):e=e.right}return n},t.prototype.prev=function(t){var e=this._root,n=null;if(null!==t.left){for(n=t.left;n.right;)n=n.right;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?e=e.left:(n=e,e=e.right)}return n},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return function(t){for(var e=t,n=[],r=!1,i=new fl(null,null),o=i;!r;)e?(n.push(e),e=e.left):n.length>0?e=(e=o=o.next=n.pop()).right:r=!0;return o.next=null,i.next}(this._root)},t.prototype.load=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=!1);var r=t.length,i=this._comparator;if(n&&wl(t,e,0,r-1,i),null===this._root)this._root=_l(t,e,0,r),this._size=r;else{var o=function(t,e,n){for(var r=new fl(null,null),i=r,o=t,a=e;null!==o&&null!==a;)n(o.key,a.key)<0?(i.next=o,o=o.next):(i.next=a,a=a.next),i=i.next;return null!==o?i.next=o:null!==a&&(i.next=a),r.next}(this.toList(),function(t,e){for(var n=new fl(null,null),r=n,i=0;i<t.length;i++)r=r.next=new fl(t[i],e[i]);return r.next=null,n.next}(t,e),i);r=this._size+r,this._root=xl({head:o},0,r)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return vl(this._root,"",!0,(function(t){return e.push(t)}),t),e.join("")},t.prototype.update=function(t,e,n){var r=this._comparator,i=yl(t,this._root,r),o=i.left,a=i.right;r(t,e)<0?a=ml(e,n,a,r):o=ml(e,n,o,r),this._root=function(t,e,n){return null===e?t:(null===t||((e=gl(t.key,e,n)).left=t),e)}(o,a,r)},t.prototype.split=function(t){return yl(t,this._root,this._comparator)},t}();function _l(t,e,n,r){var i=r-n;if(i>0){var o=n+Math.floor(i/2),a=t[o],s=e[o],l=new fl(a,s);return l.left=_l(t,e,n,o),l.right=_l(t,e,o+1,r),l}return null}function xl(t,e,n){var r=n-e;if(r>0){var i=e+Math.floor(r/2),o=xl(t,e,i),a=t.head;return a.left=o,t.head=t.head.next,a.right=xl(t,i+1,n),a}return null}function wl(t,e,n,r,i){if(!(n>=r)){for(var o=t[n+r>>1],a=n-1,s=r+1;;){do{a++}while(i(t[a],o)<0);do{s--}while(i(t[s],o)>0);if(a>=s)break;var l=t[a];t[a]=t[s],t[s]=l,l=e[a],e[a]=e[s],e[s]=l}wl(t,e,n,s,i),wl(t,e,s+1,r,i)}}function Sl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function El(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Cl(t,e,n){return e&&El(t.prototype,e),n&&El(t,n),t}var Ml=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},Tl=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var n=t.ll.x<e.ll.x?e.ll.x:t.ll.x,r=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:n,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:r,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}},Al=Number.EPSILON;void 0===Al&&(Al=Math.pow(2,-52));var Ol=Al*Al,kl=function(t,e){if(-Al<t&&t<Al&&-Al<e&&e<Al)return 0;var n=t-e;return n*n<Ol*t*e?0:t<e?-1:1},Il=function(){function t(){Sl(this,t),this.reset()}return Cl(t,[{key:"reset",value:function(){this.xRounder=new Pl,this.yRounder=new Pl}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),t}(),Pl=function(){function t(){Sl(this,t),this.tree=new bl,this.round(0)}return Cl(t,[{key:"round",value:function(t){var e=this.tree.add(t),n=this.tree.prev(e);if(null!==n&&0===kl(e.key,n.key))return this.tree.remove(t),n.key;var r=this.tree.next(e);return null!==r&&0===kl(e.key,r.key)?(this.tree.remove(t),r.key):t}}]),t}(),Ll=new Il,Nl=function(t,e){return t.x*e.y-t.y*e.x},Rl=function(t,e){return t.x*e.x+t.y*e.y},Dl=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y},o=Nl(r,i);return kl(o,0)},Fl=function(t){return Math.sqrt(Rl(t,t))},jl=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return Rl(i,r)/Fl(i)/Fl(r)},Bl=function(t,e,n){return 0===e.y?null:{x:t.x+e.x/e.y*(n-t.y),y:n}},zl=function(t,e,n){return 0===e.x?null:{x:n,y:t.y+e.y/e.x*(n-t.x)}},Ul=function(){function t(e,n){Sl(this,t),void 0===e.events?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=n}return Cl(t,null,[{key:"compare",value:function(e,n){var r=t.comparePoints(e.point,n.point);return 0!==r?r:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:ql.compare(e.segment,n.segment))}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),Cl(t,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,n=0,r=e.length;n<r;n++){var i=e[n];this.point.events.push(i),i.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var n=this.point.events[e];if(void 0===n.segment.consumedBy)for(var r=e+1;r<t;r++){var i=this.point.events[r];void 0===i.consumedBy&&n.otherSE.point.events===i.otherSE.point.events&&n.segment.consume(i.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,n=this.point.events.length;e<n;e++){var r=this.point.events[e];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&t.push(r)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,n=new Map,r=function(r){var i,o,a,s,l,u=r.otherSE;n.set(r,{sine:(i=e.point,o=t.point,a=u.point,s={x:o.x-i.x,y:o.y-i.y},l={x:a.x-i.x,y:a.y-i.y},Nl(l,s)/Fl(l)/Fl(s)),cosine:jl(e.point,t.point,u.point)})};return function(t,e){n.has(t)||r(t),n.has(e)||r(e);var i=n.get(t),o=i.sine,a=i.cosine,s=n.get(e),l=s.sine,u=s.cosine;return o>=0&&l>=0?a<u?1:a>u?-1:0:o<0&&l<0?a<u?-1:a>u?1:0:l<o?-1:l>o?1:0}}}]),t}(),Gl=0,ql=function(){function t(e,n,r,i){Sl(this,t),this.id=++Gl,this.leftSE=e,e.segment=this,e.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=e,this.rings=r,this.windings=i}return Cl(t,null,[{key:"compare",value:function(t,e){var n=t.leftSE.point.x,r=e.leftSE.point.x,i=t.rightSE.point.x,o=e.rightSE.point.x;if(o<n)return 1;if(i<r)return-1;var a=t.leftSE.point.y,s=e.leftSE.point.y,l=t.rightSE.point.y,u=e.rightSE.point.y;if(n<r){if(s<a&&s<l)return 1;if(s>a&&s>l)return-1;var c=t.comparePoint(e.leftSE.point);if(c<0)return 1;if(c>0)return-1;var h=e.comparePoint(t.rightSE.point);return 0!==h?h:-1}if(n>r){if(a<s&&a<u)return-1;if(a>s&&a>u)return 1;var d=e.comparePoint(t.leftSE.point);if(0!==d)return d;var f=t.comparePoint(e.rightSE.point);return f<0?1:f>0?-1:1}if(a<s)return-1;if(a>s)return 1;if(i<o){var p=e.comparePoint(t.rightSE.point);if(0!==p)return p}if(i>o){var g=t.comparePoint(e.rightSE.point);if(g<0)return 1;if(g>0)return-1}if(i!==o){var m=l-a,y=i-n,v=u-s,b=o-r;if(m>y&&v<b)return 1;if(m<y&&v>b)return-1}return i>o?1:i<o||l<u?-1:l>u?1:t.id<e.id?-1:t.id>e.id?1:0}}]),Cl(t,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,n=this.rightSE.point,r=this.vector();if(e.x===n.x)return t.x===e.x?0:t.x<e.x?1:-1;var i=(t.y-e.y)/r.y,o=e.x+i*r.x;if(t.x===o)return 0;var a=(t.x-e.x)/r.x,s=e.y+a*r.y;return t.y===s?0:t.y<s?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),n=t.bbox(),r=Tl(e,n);if(null===r)return null;var i=this.leftSE.point,o=this.rightSE.point,a=t.leftSE.point,s=t.rightSE.point,l=Ml(e,a)&&0===this.comparePoint(a),u=Ml(n,i)&&0===t.comparePoint(i),c=Ml(e,s)&&0===this.comparePoint(s),h=Ml(n,o)&&0===t.comparePoint(o);if(u&&l)return h&&!c?o:!h&&c?s:null;if(u)return c&&i.x===s.x&&i.y===s.y?null:i;if(l)return h&&o.x===a.x&&o.y===a.y?null:a;if(h&&c)return null;if(h)return o;if(c)return s;var d=function(t,e,n,r){if(0===e.x)return zl(n,r,t.x);if(0===r.x)return zl(t,e,n.x);if(0===e.y)return Bl(n,r,t.y);if(0===r.y)return Bl(t,e,n.y);var i=Nl(e,r);if(0==i)return null;var o={x:n.x-t.x,y:n.y-t.y},a=Nl(o,e)/i,s=Nl(o,r)/i;return{x:(t.x+s*e.x+(n.x+a*r.x))/2,y:(t.y+s*e.y+(n.y+a*r.y))/2}}(i,this.vector(),a,t.vector());return null===d?null:Ml(r,d)?Ll.round(d.x,d.y):null}},{key:"split",value:function(e){var n=[],r=void 0!==e.events,i=new Ul(e,!0),o=new Ul(e,!1),a=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(i);var s=new t(i,a,this.rings.slice(),this.windings.slice());return Ul.comparePoints(s.leftSE.point,s.rightSE.point)>0&&s.swapEvents(),Ul.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,n=this.windings.length;e<n;e++)this.windings[e]*=-1}},{key:"consume",value:function(e){for(var n=this,r=e;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var i=t.compare(n,r);if(0!==i){if(i>0){var o=n;n=r,r=o}if(n.prev===r){var a=n;n=r,r=a}for(var s=0,l=r.rings.length;s<l;s++){var u=r.rings[s],c=r.windings[s],h=n.rings.indexOf(u);-1===h?(n.rings.push(u),n.windings.push(c)):n.windings[h]+=c}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,n=this._afterState.windings,r=this._afterState.multiPolys,i=0,o=this.rings.length;i<o;i++){var a=this.rings[i],s=this.windings[i],l=e.indexOf(a);-1===l?(e.push(a),n.push(s)):n[l]+=s}for(var u=[],c=[],h=0,d=e.length;h<d;h++)if(0!==n[h]){var f=e[h],p=f.poly;if(-1===c.indexOf(p))if(f.isExterior)u.push(p);else{-1===c.indexOf(p)&&c.push(p);var g=u.indexOf(f.poly);-1!==g&&u.splice(g,1)}}for(var m=0,y=u.length;m<y;m++){var v=u[m].multiPoly;-1===r.indexOf(v)&&r.push(v)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch($l.type){case"union":var n=0===t.length,r=0===e.length;this._isInResult=n!==r;break;case"intersection":var i,o;t.length<e.length?(i=t.length,o=e.length):(i=e.length,o=t.length),this._isInResult=o===$l.numMultiPolys&&i<o;break;case"xor":var a=Math.abs(t.length-e.length);this._isInResult=a%2==1;break;case"difference":var s=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=s(t)!==s(e);break;default:throw new Error("Unrecognized operation type found ".concat($l.type))}return this._isInResult}}],[{key:"fromRing",value:function(e,n,r){var i,o,a,s=Ul.comparePoints(e,n);if(s<0)i=e,o=n,a=1;else{if(!(s>0))throw new Error("Tried to create degenerate segment at [".concat(e.x,", ").concat(e.y,"]"));i=n,o=e,a=-1}return new t(new Ul(i,!0),new Ul(o,!1),[r],[a])}}]),t}(),Vl=function(){function t(e,n,r){if(Sl(this,t),!Array.isArray(e)||0===e.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=r,this.segments=[],"number"!=typeof e[0][0]||"number"!=typeof e[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var i=Ll.round(e[0][0],e[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};for(var o=i,a=1,s=e.length;a<s;a++){if("number"!=typeof e[a][0]||"number"!=typeof e[a][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var l=Ll.round(e[a][0],e[a][1]);l.x===o.x&&l.y===o.y||(this.segments.push(ql.fromRing(o,l,this)),l.x<this.bbox.ll.x&&(this.bbox.ll.x=l.x),l.y<this.bbox.ll.y&&(this.bbox.ll.y=l.y),l.x>this.bbox.ur.x&&(this.bbox.ur.x=l.x),l.y>this.bbox.ur.y&&(this.bbox.ur.y=l.y),o=l)}i.x===o.x&&i.y===o.y||this.segments.push(ql.fromRing(o,i,this))}return Cl(t,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.segments.length;e<n;e++){var r=this.segments[e];t.push(r.leftSE),t.push(r.rightSE)}return t}}]),t}(),Hl=function(){function t(e,n){if(Sl(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Vl(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var r=1,i=e.length;r<i;r++){var o=new Vl(e[r],this,!1);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=n}return Cl(t,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,n=this.interiorRings.length;e<n;e++)for(var r=this.interiorRings[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),t}(),Wl=function(){function t(e,n){if(Sl(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof e[0][0][0]&&(e=[e])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var r=0,i=e.length;r<i;r++){var o=new Hl(e[r],this);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=n}return Cl(t,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++)for(var r=this.polys[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),t}(),Yl=function(){function t(e){Sl(this,t),this.events=e;for(var n=0,r=e.length;n<r;n++)e[n].segment.ringOut=this;this.poly=null}return Cl(t,null,[{key:"factory",value:function(e){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];if(o.isInResult()&&!o.ringOut){for(var a=null,s=o.leftSE,l=o.rightSE,u=[s],c=s.point,h=[];a=s,s=l,u.push(s),s.point!==c;)for(;;){var d=s.getAvailableLinkedEvents();if(0===d.length){var f=u[0].point,p=u[u.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(f.x,",")+" ".concat(f.y,"]. Last matching segment found ends at")+" [".concat(p.x,", ").concat(p.y,"]."))}if(1===d.length){l=d[0].otherSE;break}for(var g=null,m=0,y=h.length;m<y;m++)if(h[m].point===s.point){g=m;break}if(null===g){h.push({index:u.length,point:s.point});var v=s.getLeftmostComparator(a);l=d.sort(v)[0].otherSE;break}var b=h.splice(g)[0],_=u.splice(b.index);_.unshift(_[0].otherSE),n.push(new t(_.reverse()))}n.push(new t(u))}}return n}}]),Cl(t,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],n=1,r=this.events.length-1;n<r;n++){var i=this.events[n].point,o=this.events[n+1].point;0!==Dl(i,t,o)&&(e.push(i),t=i)}if(1===e.length)return null;var a=e[0],s=e[1];0===Dl(a,t,s)&&e.shift(),e.push(e[0]);for(var l=this.isExteriorRing()?1:-1,u=this.isExteriorRing()?0:e.length-1,c=this.isExteriorRing()?e.length:-1,h=[],d=u;d!=c;d+=l)h.push([e[d].x,e[d].y]);return h}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,n=this.events.length;e<n;e++){var r=this.events[e];Ul.compare(t,r)>0&&(t=r)}for(var i=t.segment.prevInResult(),o=i?i.prevInResult():null;;){if(!i)return null;if(!o)return i.ringOut;if(o.ringOut!==i.ringOut)return o.ringOut.enclosingRing()!==i.ringOut?i.ringOut:i.ringOut.enclosingRing();i=o.prevInResult(),o=i?i.prevInResult():null}}}]),t}(),Xl=function(){function t(e){Sl(this,t),this.exteriorRing=e,e.poly=this,this.interiorRings=[]}return Cl(t,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,n=this.interiorRings.length;e<n;e++){var r=this.interiorRings[e].getGeom();null!==r&&t.push(r)}return t}}]),t}(),Jl=function(){function t(e){Sl(this,t),this.rings=e,this.polys=this._composePolys(e)}return Cl(t,[{key:"getGeom",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++){var r=this.polys[e].getGeom();null!==r&&t.push(r)}return t}},{key:"_composePolys",value:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];if(!i.poly)if(i.isExteriorRing())e.push(new Xl(i));else{var o=i.enclosingRing();o.poly||e.push(new Xl(o)),o.poly.addInterior(i)}}return e}}]),t}(),Zl=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ql.compare;Sl(this,t),this.queue=e,this.tree=new bl(n),this.segments=[]}return Cl(t,[{key:"process",value:function(t){var e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),n;var r=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!r)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var i=r,o=r,a=void 0,s=void 0;void 0===a;)null===(i=this.tree.prev(i))?a=null:void 0===i.key.consumedBy&&(a=i.key);for(;void 0===s;)null===(o=this.tree.next(o))?s=null:void 0===o.key.consumedBy&&(s=o.key);if(t.isLeft){var l=null;if(a){var u=a.getIntersection(e);if(null!==u&&(e.isAnEndpoint(u)||(l=u),!a.isAnEndpoint(u)))for(var c=this._splitSafely(a,u),h=0,d=c.length;h<d;h++)n.push(c[h])}var f=null;if(s){var p=s.getIntersection(e);if(null!==p&&(e.isAnEndpoint(p)||(f=p),!s.isAnEndpoint(p)))for(var g=this._splitSafely(s,p),m=0,y=g.length;m<y;m++)n.push(g[m])}if(null!==l||null!==f){var v=null;v=null===l?f:null===f||Ul.comparePoints(l,f)<=0?l:f,this.queue.remove(e.rightSE),n.push(e.rightSE);for(var b=e.split(v),_=0,x=b.length;_<x;_++)n.push(b[_])}n.length>0?(this.tree.remove(e),n.push(t)):(this.segments.push(e),e.prev=a)}else{if(a&&s){var w=a.getIntersection(s);if(null!==w){if(!a.isAnEndpoint(w))for(var S=this._splitSafely(a,w),E=0,C=S.length;E<C;E++)n.push(S[E]);if(!s.isAnEndpoint(w))for(var M=this._splitSafely(s,w),T=0,A=M.length;T<A;T++)n.push(M[T])}}this.tree.remove(e)}return n}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var n=t.rightSE;this.queue.remove(n);var r=t.split(e);return r.push(n),void 0===t.consumedBy&&this.tree.insert(t),r}}]),t}(),Kl="undefined"!=typeof t&&Object({NODE_ENV:"production",VUE_APP_BASE_API:"",VUE_APP_TITLE:"奉贤消防救援支队远程侦查系统",BASE_URL:"/"}).POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Ql="undefined"!=typeof t&&Object({NODE_ENV:"production",VUE_APP_BASE_API:"",VUE_APP_TITLE:"奉贤消防救援支队远程侦查系统",BASE_URL:"/"}).POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,$l=new(function(){function t(){Sl(this,t)}return Cl(t,[{key:"run",value:function(t,e,n){$l.type=t,Ll.reset();for(var r=[new Wl(e,!0)],i=0,o=n.length;i<o;i++)r.push(new Wl(n[i],!1));if($l.numMultiPolys=r.length,"difference"===$l.type)for(var a=r[0],s=1;s<r.length;)null!==Tl(r[s].bbox,a.bbox)?s++:r.splice(s,1);if("intersection"===$l.type)for(var l=0,u=r.length;l<u;l++)for(var c=r[l],h=l+1,d=r.length;h<d;h++)if(null===Tl(c.bbox,r[h].bbox))return[];for(var f=new bl(Ul.compare),p=0,g=r.length;p<g;p++)for(var m=r[p].getSweepEvents(),y=0,v=m.length;y<v;y++)if(f.insert(m[y]),f.size>Kl)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var b=new Zl(f),_=f.size,x=f.pop();x;){var w=x.key;if(f.size===_){var S=w.segment;throw new Error("Unable to pop() ".concat(w.isLeft?"left":"right"," SweepEvent ")+"[".concat(w.point.x,", ").concat(w.point.y,"] from segment #").concat(S.id," ")+"[".concat(S.leftSE.point.x,", ").concat(S.leftSE.point.y,"] -> ")+"[".concat(S.rightSE.point.x,", ").concat(S.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(f.size>Kl)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(b.segments.length>Ql)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var E=b.process(w),C=0,M=E.length;C<M;C++){var T=E[C];void 0===T.consumedBy&&f.insert(T)}_=f.size,x=f.pop()}Ll.reset();var A=Yl.factory(b.segments);return new Jl(A).getGeom()}}]),t}()),tu={union:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return $l.run("union",t,n)},intersection:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return $l.run("intersection",t,n)},xor:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return $l.run("xor",t,n)},difference:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return $l.run("difference",t,n)}};"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var eu=function(){};eu.prototype.interfaces_=function(){return[]},eu.prototype.getClass=function(){return eu},eu.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var nu=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),ru=function(){},iu={MAX_VALUE:{configurable:!0}};ru.isNaN=function(t){return Number.isNaN(t)},ru.doubleToLongBits=function(t){return t},ru.longBitsToDouble=function(t){return t},ru.isInfinite=function(t){return!Number.isFinite(t)},iu.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(ru,iu);var ou=function(){},au=function(){},su=function(){};function lu(){}var uu=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},cu={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};uu.prototype.setOrdinate=function(t,e){switch(t){case uu.X:this.x=e;break;case uu.Y:this.y=e;break;case uu.Z:this.z=e;break;default:throw new nu("Invalid ordinate index: "+t)}},uu.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!eu.equalsWithTolerance(this.x,e.x,n)&&!!eu.equalsWithTolerance(this.y,e.y,n)}},uu.prototype.getOrdinate=function(t){switch(t){case uu.X:return this.x;case uu.Y:return this.y;case uu.Z:return this.z}throw new nu("Invalid ordinate index: "+t)},uu.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||ru.isNaN(this.z))&&ru.isNaN(t.z)},uu.prototype.equals=function(t){return t instanceof uu&&this.equals2D(t)},uu.prototype.equalInZ=function(t,e){return eu.equalsWithTolerance(this.z,t.z,e)},uu.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},uu.prototype.clone=function(){},uu.prototype.copy=function(){return new uu(this)},uu.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},uu.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},uu.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},uu.prototype.hashCode=function(){var t=17;return 37*(t=37*t+uu.hashCode(this.x))+uu.hashCode(this.y)},uu.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},uu.prototype.interfaces_=function(){return[ou,au,lu]},uu.prototype.getClass=function(){return uu},uu.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=ru.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},cu.DimensionalComparator.get=function(){return hu},cu.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},cu.NULL_ORDINATE.get=function(){return ru.NaN},cu.X.get=function(){return 0},cu.Y.get=function(){return 1},cu.Z.get=function(){return 2},Object.defineProperties(uu,cu);var hu=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new nu("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};hu.prototype.compare=function(t,e){var n=t,r=e,i=hu.compare(n.x,r.x);if(0!==i)return i;var o=hu.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:hu.compare(n.z,r.z)},hu.prototype.interfaces_=function(){return[su]},hu.prototype.getClass=function(){return hu},hu.compare=function(t,e){return t<e?-1:t>e?1:ru.isNaN(t)?ru.isNaN(e)?0:-1:ru.isNaN(e)?1:0};var du=function(){};du.prototype.create=function(){},du.prototype.interfaces_=function(){return[]},du.prototype.getClass=function(){return du};var fu=function(){},pu={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};fu.prototype.interfaces_=function(){return[]},fu.prototype.getClass=function(){return fu},fu.toLocationSymbol=function(t){switch(t){case fu.EXTERIOR:return"e";case fu.BOUNDARY:return"b";case fu.INTERIOR:return"i";case fu.NONE:return"-"}throw new nu("Unknown location value: "+t)},pu.INTERIOR.get=function(){return 0},pu.BOUNDARY.get=function(){return 1},pu.EXTERIOR.get=function(){return 2},pu.NONE.get=function(){return-1},Object.defineProperties(fu,pu);var gu=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},mu=function(){},yu={LOG_10:{configurable:!0}};mu.prototype.interfaces_=function(){return[]},mu.prototype.getClass=function(){return mu},mu.log10=function(t){var e=Math.log(t);return ru.isInfinite(e)||ru.isNaN(e)?e:e/mu.LOG_10},mu.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},mu.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},mu.wrap=function(t,e){return t<0?e- -t%e:t%e},mu.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=t;return e>r&&(r=e),n>r&&(r=n),r}if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],l=i;return o>l&&(l=o),a>l&&(l=a),s>l&&(l=s),l}},mu.average=function(t,e){return(t+e)/2},yu.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(mu,yu);var vu=function(t){this.str=t};vu.prototype.append=function(t){this.str+=t},vu.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},vu.prototype.toString=function(t){return this.str};var bu=function(t){this.value=t};bu.prototype.intValue=function(){return this.value},bu.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},bu.isNaN=function(t){return Number.isNaN(t)};var _u=function(){};_u.isWhitespace=function(t){return t<=32&&t>=0||127===t},_u.toUpperCase=function(t){return t.toUpperCase()};var xu=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else if("string"==typeof arguments[0]){var r=arguments[0];t.call(this,t.parse(r))}}else if(2===arguments.length){var i=arguments[0],o=arguments[1];this.init(i,o)}},wu={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};xu.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},xu.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=xu.magnitude(n._hi),i=xu.TEN.pow(r);(n=n.divide(i)).gt(xu.TEN)?(n=n.divide(xu.TEN),r+=1):n.lt(xu.ONE)&&(n=n.multiply(xu.TEN),r-=1);for(var o=r+1,a=new vu,s=xu.MAX_PRINT_DIGITS-1,l=0;l<=s;l++){t&&l===o&&a.append(".");var u=Math.trunc(n._hi);if(u<0)break;var c=!1,h=0;u>9?(c=!0,h="9"):h="0"+u,a.append(h),n=n.subtract(xu.valueOf(u)).multiply(xu.TEN),c&&n.selfAdd(xu.TEN);var d=!0,f=xu.magnitude(n._hi);if(f<0&&Math.abs(f)>=s-l&&(d=!1),!d)break}return e[0]=r,a.toString()},xu.prototype.sqr=function(){return this.multiply(this)},xu.prototype.doubleValue=function(){return this._hi+this._lo},xu.prototype.subtract=function(){if(arguments[0]instanceof xu){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},xu.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},xu.prototype.isZero=function(){return 0===this._hi&&0===this._lo},xu.prototype.selfSubtract=function(){if(arguments[0]instanceof xu){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},xu.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},xu.prototype.min=function(t){return this.le(t)?this:t},xu.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof xu){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,l=null,u=null,c=null,h=null;return l=this._hi/n,h=(i=(u=xu.SPLIT*l)-(i=u-l))*(a=(h=xu.SPLIT*n)-(a=h-n))-(c=l*n)+i*(s=n-a)+(o=l-i)*a+o*s,h=l+(u=(this._hi-c-h+this._lo-l*r)/n),this._hi=h,this._lo=l-h+u,this}},xu.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},xu.prototype.divide=function(){if(arguments[0]instanceof xu){var t=arguments[0],e=null,n=null,r=null,i=null,o=null,a=null,s=null,l=null;n=(o=this._hi/t._hi)-(e=(a=xu.SPLIT*o)-(e=a-o)),l=e*(r=(l=xu.SPLIT*t._hi)-(r=l-t._hi))-(s=o*t._hi)+e*(i=t._hi-r)+n*r+n*i;var u=l=o+(a=(this._hi-s-l+this._lo-o*t._lo)/t._hi),c=o-l+a;return new xu(u,c)}if("number"==typeof arguments[0]){var h=arguments[0];return ru.isNaN(h)?xu.createNaN():xu.copy(this).selfDivide(h,0)}},xu.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},xu.prototype.pow=function(t){if(0===t)return xu.valueOf(1);var e=new xu(this),n=xu.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},xu.prototype.ceil=function(){if(this.isNaN())return xu.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new xu(t,e)},xu.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},xu.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},xu.prototype.setValue=function(){if(arguments[0]instanceof xu){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},xu.prototype.max=function(t){return this.ge(t)?this:t},xu.prototype.sqrt=function(){if(this.isZero())return xu.valueOf(0);if(this.isNegative())return xu.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=xu.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},xu.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof xu){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,i=null,o=null,a=null,s=null;return o=(i=this._hi+e)-(a=i-this._hi),r=(s=(o=e-a+(this._hi-o))+this._lo)+(i-(n=i+s)),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var l=arguments[0],u=arguments[1],c=null,h=null,d=null,f=null,p=null,g=null,m=null;f=this._hi+l,h=this._lo+u,p=f-(g=f-this._hi),d=h-(m=h-this._lo);var y=(c=f+(g=(p=l-g+(this._hi-p))+h))+(g=(d=u-m+(this._lo-d))+(g+(f-c))),v=g+(c-y);return this._hi=y,this._lo=v,this}},xu.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof xu){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,l=null,u=null;i=(l=xu.SPLIT*this._hi)-this._hi,u=xu.SPLIT*n,i=l-i,o=this._hi-i,a=u-n;var c=(l=this._hi*n)+(u=i*(a=u-a)-l+i*(s=n-a)+o*a+o*s+(this._hi*r+this._lo*n)),h=u+(i=l-c);return this._hi=c,this._lo=h,this}},xu.prototype.selfSqr=function(){return this.selfMultiply(this)},xu.prototype.floor=function(){if(this.isNaN())return xu.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new xu(t,e)},xu.prototype.negate=function(){return this.isNaN()?this:new xu(-this._hi,-this._lo)},xu.prototype.clone=function(){},xu.prototype.multiply=function(){if(arguments[0]instanceof xu){var t=arguments[0];return t.isNaN()?xu.createNaN():xu.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return ru.isNaN(e)?xu.createNaN():xu.copy(this).selfMultiply(e,0)}},xu.prototype.isNaN=function(){return ru.isNaN(this._hi)},xu.prototype.intValue=function(){return Math.trunc(this._hi)},xu.prototype.toString=function(){var t=xu.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},xu.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+xu.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+xu.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},xu.prototype.reciprocal=function(){var t,e,n,r,i=null,o=null,a=null,s=null;t=(n=1/this._hi)-(i=(a=xu.SPLIT*n)-(i=a-n)),o=(s=xu.SPLIT*this._hi)-this._hi;var l=n+(a=(1-(r=n*this._hi)-(s=i*(o=s-o)-r+i*(e=this._hi-o)+t*o+t*e)-n*this._lo)/this._hi);return new xu(l,n-l+a)},xu.prototype.toSciNotation=function(){if(this.isZero())return xu.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=xu.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},xu.prototype.abs=function(){return this.isNaN()?xu.NaN:this.isNegative()?this.negate():new xu(this)},xu.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},xu.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},xu.prototype.add=function(){if(arguments[0]instanceof xu){var t=arguments[0];return xu.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return xu.copy(this).selfAdd(e)}},xu.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof xu){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},xu.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},xu.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},xu.prototype.trunc=function(){return this.isNaN()?xu.NaN:this.isPositive()?this.floor():this.ceil()},xu.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},xu.prototype.interfaces_=function(){return[lu,ou,au]},xu.prototype.getClass=function(){return xu},xu.sqr=function(t){return xu.valueOf(t).selfMultiply(t)},xu.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return xu.parse(t)}if("number"==typeof arguments[0]){var e=arguments[0];return new xu(e)}},xu.sqrt=function(t){return xu.valueOf(t).sqrt()},xu.parse=function(t){for(var e=0,n=t.length;_u.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new xu,a=0,s=0,l=0;!(e>=n);){var u=t.charAt(e);if(e++,_u.isDigit(u)){var c=u-"0";o.selfMultiply(xu.TEN),o.selfAdd(c),a++}else{if("."!==u){if("e"===u||"E"===u){var h=t.substring(e);try{l=bu.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}throw new Error("Unexpected character '"+u+"' at position "+e+" in string "+t)}s=a}}var d=o,f=a-s-l;if(0===f)d=o;else if(f>0){var p=xu.TEN.pow(f);d=o.divide(p)}else if(f<0){var g=xu.TEN.pow(-f);d=o.multiply(g)}return r?d.negate():d},xu.createNaN=function(){return new xu(ru.NaN,ru.NaN)},xu.copy=function(t){return new xu(t)},xu.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},xu.stringOfChar=function(t,e){for(var n=new vu,r=0;r<e;r++)n.append(t);return n.toString()},wu.PI.get=function(){return new xu(3.141592653589793,12246467991473532e-32)},wu.TWO_PI.get=function(){return new xu(6.283185307179586,24492935982947064e-32)},wu.PI_2.get=function(){return new xu(1.5707963267948966,6123233995736766e-32)},wu.E.get=function(){return new xu(2.718281828459045,14456468917292502e-32)},wu.NaN.get=function(){return new xu(ru.NaN,ru.NaN)},wu.EPS.get=function(){return 123259516440783e-46},wu.SPLIT.get=function(){return 134217729},wu.MAX_PRINT_DIGITS.get=function(){return 32},wu.TEN.get=function(){return xu.valueOf(10)},wu.ONE.get=function(){return xu.valueOf(1)},wu.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},wu.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(xu,wu);var Su=function(){},Eu={DP_SAFE_EPSILON:{configurable:!0}};Su.prototype.interfaces_=function(){return[]},Su.prototype.getClass=function(){return Su},Su.orientationIndex=function(t,e,n){var r=Su.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=xu.valueOf(e.x).selfAdd(-t.x),o=xu.valueOf(e.y).selfAdd(-t.y),a=xu.valueOf(n.x).selfAdd(-e.x),s=xu.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()},Su.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},Su.intersection=function(t,e,n,r){var i=xu.valueOf(r.y).selfSubtract(n.y).selfMultiply(xu.valueOf(e.x).selfSubtract(t.x)),o=xu.valueOf(r.x).selfSubtract(n.x).selfMultiply(xu.valueOf(e.y).selfSubtract(t.y)),a=i.subtract(o),s=xu.valueOf(r.x).selfSubtract(n.x).selfMultiply(xu.valueOf(t.y).selfSubtract(n.y)),l=xu.valueOf(r.y).selfSubtract(n.y).selfMultiply(xu.valueOf(t.x).selfSubtract(n.x)),u=s.subtract(l).selfDivide(a).doubleValue(),c=xu.valueOf(t.x).selfAdd(xu.valueOf(e.x).selfSubtract(t.x).selfMultiply(u)).doubleValue(),h=xu.valueOf(e.x).selfSubtract(t.x).selfMultiply(xu.valueOf(t.y).selfSubtract(n.y)),d=xu.valueOf(e.y).selfSubtract(t.y).selfMultiply(xu.valueOf(t.x).selfSubtract(n.x)),f=h.subtract(d).selfDivide(a).doubleValue(),p=xu.valueOf(n.y).selfAdd(xu.valueOf(r.y).selfSubtract(n.y).selfMultiply(f)).doubleValue();return new uu(c,p)},Su.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),a=i-o;if(i>0){if(o<=0)return Su.signum(a);r=i+o}else{if(!(i<0))return Su.signum(a);if(o>=0)return Su.signum(a);r=-i-o}var s=Su.DP_SAFE_EPSILON*r;return a>=s||-a>=s?Su.signum(a):2},Su.signum=function(t){return t>0?1:t<0?-1:0},Eu.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(Su,Eu);var Cu=function(){},Mu={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};Mu.X.get=function(){return 0},Mu.Y.get=function(){return 1},Mu.Z.get=function(){return 2},Mu.M.get=function(){return 3},Cu.prototype.setOrdinate=function(t,e,n){},Cu.prototype.size=function(){},Cu.prototype.getOrdinate=function(t,e){},Cu.prototype.getCoordinate=function(){},Cu.prototype.getCoordinateCopy=function(t){},Cu.prototype.getDimension=function(){},Cu.prototype.getX=function(t){},Cu.prototype.clone=function(){},Cu.prototype.expandEnvelope=function(t){},Cu.prototype.copy=function(){},Cu.prototype.getY=function(t){},Cu.prototype.toCoordinateArray=function(){},Cu.prototype.interfaces_=function(){return[au]},Cu.prototype.getClass=function(){return Cu},Object.defineProperties(Cu,Mu);var Tu=function(){},Au=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Tu),Ou=function(){};Ou.arraycopy=function(t,e,n,r,i){for(var o=0,a=e;a<e+i;a++)n[r+o]=t[a],o++},Ou.getProperty=function(t){return{"line.separator":"\n"}[t]};var ku=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof uu&&arguments[1]instanceof uu){var a=arguments[0],s=arguments[1];this.x=a.y-s.y,this.y=s.x-a.x,this.w=a.x*s.y-s.x*a.y}}else if(3===arguments.length){var l=arguments[0],u=arguments[1],c=arguments[2];this.x=l,this.y=u,this.w=c}else if(4===arguments.length){var h=arguments[0],d=arguments[1],f=arguments[2],p=arguments[3],g=h.y-d.y,m=d.x-h.x,y=h.x*d.y-d.x*h.y,v=f.y-p.y,b=p.x-f.x,_=f.x*p.y-p.x*f.y;this.x=m*_-b*y,this.y=v*y-g*_,this.w=g*b-v*m}};ku.prototype.getY=function(){var t=this.y/this.w;if(ru.isNaN(t)||ru.isInfinite(t))throw new Au;return t},ku.prototype.getX=function(){var t=this.x/this.w;if(ru.isNaN(t)||ru.isInfinite(t))throw new Au;return t},ku.prototype.getCoordinate=function(){var t=new uu;return t.x=this.getX(),t.y=this.getY(),t},ku.prototype.interfaces_=function(){return[]},ku.prototype.getClass=function(){return ku},ku.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,a=t.x*e.y-e.x*t.y,s=n.y-r.y,l=r.x-n.x,u=n.x*r.y-r.x*n.y,c=i*l-s*o,h=(o*u-l*a)/c,d=(s*a-i*u)/c;if(ru.isNaN(h)||ru.isInfinite(h)||ru.isNaN(d)||ru.isInfinite(d))throw new Au;return new uu(h,d)};var Iu=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof uu){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],l=arguments[3];this.init(o,a,s,l)}},Pu={serialVersionUID:{configurable:!0}};Iu.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Iu.prototype.equals=function(t){if(!(t instanceof Iu))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},Iu.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new Iu;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new Iu(e,r,n,i)},Iu.prototype.isNull=function(){return this._maxx<this._minx},Iu.prototype.getMaxX=function(){return this._maxx},Iu.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof uu){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof Iu){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},Iu.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof Iu){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof uu){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},Iu.prototype.getMinY=function(){return this._miny},Iu.prototype.getMinX=function(){return this._minx},Iu.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof uu){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof Iu){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},Iu.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},Iu.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Iu.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},Iu.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},Iu.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Iu.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Iu.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Iu.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},Iu.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Iu.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof Iu){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof uu){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},Iu.prototype.centre=function(){return this.isNull()?null:new uu((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Iu.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof uu){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof Iu){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),a<s?(this._miny=a,this._maxy=s):(this._miny=s,this._maxy=a)}},Iu.prototype.getMaxY=function(){return this._maxy},Iu.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},Iu.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+uu.hashCode(this._minx))+uu.hashCode(this._maxx))+uu.hashCode(this._miny))+uu.hashCode(this._maxy)},Iu.prototype.interfaces_=function(){return[ou,lu]},Iu.prototype.getClass=function(){return Iu},Iu.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),l=Math.max(o.x,a.x),u=Math.min(r.x,i.x),c=Math.max(r.x,i.x);return!(u>l)&&!(c<s)&&(s=Math.min(o.y,a.y),l=Math.max(o.y,a.y),u=Math.min(r.y,i.y),c=Math.max(r.y,i.y),!(u>l)&&!(c<s))}},Pu.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(Iu,Pu);var Lu={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Nu=function(t){this.geometryFactory=t||new bh};Nu.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=Lu.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=Lu.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],Du[n]&&(e=Du[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},Nu.prototype.write=function(t){return this.extractGeometry(t)},Nu.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Ru[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+Ru[e].apply(this,[t])+")"};var Ru={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Ru.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Ru.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Ru.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Ru.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Ru.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Ru.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+Ru.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Ru.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},Du={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(Lu.spaces);return this.geometryFactory.createPoint(new uu(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPoint();for(var n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Lu.trimParens,"$1"),r.push(Du.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Lu.spaces),r.push(new uu(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Lu.spaces),r.push(new uu(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiLineString();for(var n=t.trim().split(Lu.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Lu.trimParens,"$1"),r.push(Du.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){var e,n,r;if(void 0===t)return this.geometryFactory.createPolygon();for(var i,o=t.trim().split(Lu.parenComma),a=[],s=0,l=o.length;s<l;++s)e=o[s].replace(Lu.trimParens,"$1"),n=Du.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===s?i=r:a.push(r);return this.geometryFactory.createPolygon(i,a)},multipolygon:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var n=t.trim().split(Lu.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Lu.trimParens,"$1"),r.push(Du.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},Fu=function(t){this.parser=new Nu(t)};Fu.prototype.write=function(t){return this.parser.write(t)},Fu.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var ju=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),Bu=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ju),zu=function(){};zu.prototype.interfaces_=function(){return[]},zu.prototype.getClass=function(){return zu},zu.shouldNeverReachHere=function(){if(0===arguments.length)zu.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new Bu("Should never reach here"+(null!==t?": "+t:""))}},zu.isTrue=function(){var t;if(1===arguments.length)zu.isTrue(arguments[0],null);else if(2===arguments.length&&(t=arguments[1],!arguments[0]))throw null===t?new Bu:new Bu(t)},zu.equals=function(){var t,e,n;if(2===arguments.length)zu.equals(t=arguments[0],e=arguments[1],null);else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new Bu("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var Uu=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new uu,this._intPt[1]=new uu,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},Gu={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};Uu.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},Uu.prototype.getTopologySummary=function(){var t=new vu;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},Uu.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},Uu.prototype.getIntersectionNum=function(){return this._result},Uu.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0],e=this.getEdgeDistance(t,0),n=this.getEdgeDistance(t,1);e>n?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},Uu.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},Uu.prototype.setPrecisionModel=function(t){this._precisionModel=t},Uu.prototype.isInteriorIntersection=function(){var t=this;if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var e=arguments[0],n=0;n<this._result;n++)if(!t._intPt[n].equals2D(t._inputLines[e][0])&&!t._intPt[n].equals2D(t._inputLines[e][1]))return!0;return!1}},Uu.prototype.getIntersection=function(t){return this._intPt[t]},Uu.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},Uu.prototype.hasIntersection=function(){return this._result!==Uu.NO_INTERSECTION},Uu.prototype.getEdgeDistance=function(t,e){return Uu.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},Uu.prototype.isCollinear=function(){return this._result===Uu.COLLINEAR_INTERSECTION},Uu.prototype.toString=function(){return Fu.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Fu.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},Uu.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},Uu.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},Uu.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},Uu.prototype.interfaces_=function(){return[]},Uu.prototype.getClass=function(){return Uu},Uu.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);0!==(o=r>i?a:s)||t.equals(e)||(o=Math.max(a,s))}return zu.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},Uu.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return zu.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},Gu.DONT_INTERSECT.get=function(){return 0},Gu.DO_INTERSECT.get=function(){return 1},Gu.COLLINEAR.get=function(){return 2},Gu.NO_INTERSECTION.get=function(){return 0},Gu.POINT_INTERSECTION.get=function(){return 1},Gu.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(Uu,Gu);var qu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new Iu(this._inputLines[0][0],this._inputLines[0][1]),n=new Iu(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,Iu.intersects(n,r,e)&&0===Wu.orientationIndex(n,r,e)&&0===Wu.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=ku.intersection(t,n,r,i)}catch(s){if(!(s instanceof Au))throw s;o=e.nearestEndpoint(t,n,r,i)}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new uu(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=Su.intersection(t,e,n,r),a=this.isInSegmentEnvelopes(o);Ou.out.println("DD in env = "+a+"  --------------------- "+o),i.distance(o)>1e-4&&Ou.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new uu(t),o=new uu(e),a=new uu(n),s=new uu(r),l=new uu;this.normalizeToEnvCentre(i,o,a,s,l);var u=this.safeHCoordinateIntersection(i,o,a,s);return u.x+=l.x,u.y+=l.y,u},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=Iu.intersects(e,n,r),a=Iu.intersects(e,n,i),s=Iu.intersects(r,i,e),l=Iu.intersects(r,i,n);return o&&a?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):s&&l?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&s?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||a||l?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&l?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||a||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&s?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||l?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&l?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,a=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,l=t.y>e.y?t.y:e.y,u=n.x<r.x?n.x:r.x,c=n.y<r.y?n.y:r.y,h=n.x>r.x?n.x:r.x,d=n.y>r.y?n.y:r.y,f=((o>u?o:u)+(s<h?s:h))/2,p=((a>c?a:c)+(l<d?l:d))/2;i.x=f,i.y=p,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!Iu.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=Wu.orientationIndex(e,n,r),a=Wu.orientationIndex(e,n,i);if(o>0&&a>0||o<0&&a<0)return t.NO_INTERSECTION;var s=Wu.orientationIndex(r,i,e),l=Wu.orientationIndex(r,i,n);return s>0&&l>0||s<0&&l<0?t.NO_INTERSECTION:0===o&&0===a&&0===s&&0===l?this.computeCollinearIntersection(e,n,r,i):(0===o||0===a||0===s||0===l?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new uu(r):0===a?this._intPt[0]=new uu(i):0===s?this._intPt[0]=new uu(e):0===l&&(this._intPt[0]=new uu(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=Wu.distancePointLine(t,n,r),a=Wu.distancePointLine(e,n,r);return a<o&&(o=a,i=e),(a=Wu.distancePointLine(n,t,e))<o&&(o=a,i=n),(a=Wu.distancePointLine(r,t,e))<o&&(o=a,i=r),i},e}(Uu),Vu=function(){};Vu.prototype.interfaces_=function(){return[]},Vu.prototype.getClass=function(){return Vu},Vu.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,a=n.y-e.y;return Vu.signOfDet2x2(r,i,o,a)},Vu.signOfDet2x2=function(t,e,n,r){var i=null,o=null,a=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0))return i;if(!(t<=n))return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if((r-=(a=Math.floor(n/t))*e)<0)return-i;if(r>e)return i;if(t>(n-=a*t)+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if((e-=(a=Math.floor(t/n))*r)<0)return i;if(e>r)return-i;if(n>(t-=a*n)+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var Hu=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};Hu.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,a=e.x-this._p.x,s=e.y-this._p.y,l=Vu.signOfDet2x2(i,o,a,s);if(0===l)return this._isPointOnSegment=!0,null;s<o&&(l=-l),l>0&&this._crossingCount++}},Hu.prototype.isPointInPolygon=function(){return this.getLocation()!==fu.EXTERIOR},Hu.prototype.getLocation=function(){return this._isPointOnSegment?fu.BOUNDARY:this._crossingCount%2==1?fu.INTERIOR:fu.EXTERIOR},Hu.prototype.isOnSegment=function(){return this._isPointOnSegment},Hu.prototype.interfaces_=function(){return[]},Hu.prototype.getClass=function(){return Hu},Hu.locatePointInRing=function(){if(arguments[0]instanceof uu&&gu(arguments[1],Cu)){for(var t=arguments[0],e=arguments[1],n=new Hu(t),r=new uu,i=new uu,o=1;o<e.size();o++)if(e.getCoordinate(o,r),e.getCoordinate(o-1,i),n.countSegment(r,i),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof uu&&arguments[1]instanceof Array){for(var a=arguments[0],s=arguments[1],l=new Hu(a),u=1;u<s.length;u++){var c=s[u],h=s[u-1];if(l.countSegment(c,h),l.isOnSegment())return l.getLocation()}return l.getLocation()}};var Wu=function(){},Yu={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};Wu.prototype.interfaces_=function(){return[]},Wu.prototype.getClass=function(){return Wu},Wu.orientationIndex=function(t,e,n){return Su.orientationIndex(t,e,n)},Wu.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y,a=t[r-1].y;e+=i*(a-o)}return e/2}if(gu(arguments[0],Cu)){var s=arguments[0],l=s.size();if(l<3)return 0;var u=new uu,c=new uu,h=new uu;s.getCoordinate(0,c),s.getCoordinate(1,h);var d=c.x;h.x-=d;for(var f=0,p=1;p<l-1;p++)u.y=c.y,c.x=h.x,c.y=h.y,s.getCoordinate(p+1,h),h.x-=d,f+=c.x*(u.y-h.y);return f/2}},Wu.distanceLineLine=function(t,e,n,r){if(t.equals(e))return Wu.distancePointLine(t,n,r);if(n.equals(r))return Wu.distancePointLine(r,t,e);var i=!1;if(Iu.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var a=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),s=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,l=a/o;(l<0||l>1||s<0||s>1)&&(i=!0)}}else i=!0;return i?mu.min(Wu.distancePointLine(t,n,r),Wu.distancePointLine(e,n,r),Wu.distancePointLine(n,t,e),Wu.distancePointLine(r,t,e)):0},Wu.isPointInRing=function(t,e){return Wu.locatePointInRing(t,e)!==fu.EXTERIOR},Wu.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new uu;t.getCoordinate(0,r);for(var i=r.x,o=r.y,a=1;a<e;a++){t.getCoordinate(a,r);var s=r.x,l=r.y,u=s-i,c=l-o;n+=Math.sqrt(u*u+c*c),i=s,o=l}return n},Wu.isCCW=function(t){var e=t.length-1;if(e<3)throw new nu("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var a=r;do{(a-=1)<0&&(a=e)}while(t[a].equals2D(n)&&a!==r);var s=r;do{s=(s+1)%e}while(t[s].equals2D(n)&&s!==r);var l=t[a],u=t[s];if(l.equals2D(n)||u.equals2D(n)||l.equals2D(u))return!1;var c=Wu.computeOrientation(l,n,u),h=!1;return h=0===c?l.x>u.x:c>0,h},Wu.locatePointInRing=function(t,e){return Hu.locatePointInRing(t,e)},Wu.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},Wu.computeOrientation=function(t,e,n){return Wu.orientationIndex(t,e,n)},Wu.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new nu("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=Wu.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];if(a.x===s.x&&a.y===s.y)return o.distance(a);var l=(s.x-a.x)*(s.x-a.x)+(s.y-a.y)*(s.y-a.y),u=((o.x-a.x)*(s.x-a.x)+(o.y-a.y)*(s.y-a.y))/l;if(u<=0)return o.distance(a);if(u>=1)return o.distance(s);var c=((a.y-o.y)*(s.x-a.x)-(a.x-o.x)*(s.y-a.y))/l;return Math.abs(c)*Math.sqrt(l)}},Wu.isOnLine=function(t,e){for(var n=new qu,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},Yu.CLOCKWISE.get=function(){return-1},Yu.RIGHT.get=function(){return Wu.CLOCKWISE},Yu.COUNTERCLOCKWISE.get=function(){return 1},Yu.LEFT.get=function(){return Wu.COUNTERCLOCKWISE},Yu.COLLINEAR.get=function(){return 0},Yu.STRAIGHT.get=function(){return Wu.COLLINEAR},Object.defineProperties(Wu,Yu);var Xu=function(){};Xu.prototype.filter=function(t){},Xu.prototype.interfaces_=function(){return[]},Xu.prototype.getClass=function(){return Xu};var Ju=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},Zu={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};Ju.prototype.isGeometryCollection=function(){return this.getSortIndex()===Ju.SORTINDEX_GEOMETRYCOLLECTION},Ju.prototype.getFactory=function(){return this._factory},Ju.prototype.getGeometryN=function(t){return this},Ju.prototype.getArea=function(){return 0},Ju.prototype.isRectangle=function(){return!1},Ju.prototype.equals=function(){if(arguments[0]instanceof Ju){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof Ju))return!1;var n=e;return this.equalsExact(n)}},Ju.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},Ju.prototype.geometryChanged=function(){this.apply(Ju.geometryChangedFilter)},Ju.prototype.geometryChangedAction=function(){this._envelope=null},Ju.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},Ju.prototype.getLength=function(){return 0},Ju.prototype.getNumGeometries=function(){return 1},Ju.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},Ju.prototype.getUserData=function(){return this._userData},Ju.prototype.getSRID=function(){return this._SRID},Ju.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},Ju.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===Ju.SORTINDEX_GEOMETRYCOLLECTION)throw new nu("This method does not support GeometryCollection arguments")},Ju.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},Ju.prototype.norm=function(){var t=this.copy();return t.normalize(),t},Ju.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},Ju.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new Iu(this._envelope)},Ju.prototype.setSRID=function(t){this._SRID=t},Ju.prototype.setUserData=function(t){this._userData=t},Ju.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),a=i.compareTo(o);if(0!==a)return a}return n.hasNext()?1:r.hasNext()?-1:0},Ju.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},Ju.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===Ju.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Ju.SORTINDEX_MULTIPOINT||this.getSortIndex()===Ju.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Ju.SORTINDEX_MULTIPOLYGON},Ju.prototype.interfaces_=function(){return[au,ou,lu]},Ju.prototype.getClass=function(){return Ju},Ju.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},Ju.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},Zu.serialVersionUID.get=function(){return 0x799ea46522854c00},Zu.SORTINDEX_POINT.get=function(){return 0},Zu.SORTINDEX_MULTIPOINT.get=function(){return 1},Zu.SORTINDEX_LINESTRING.get=function(){return 2},Zu.SORTINDEX_LINEARRING.get=function(){return 3},Zu.SORTINDEX_MULTILINESTRING.get=function(){return 4},Zu.SORTINDEX_POLYGON.get=function(){return 5},Zu.SORTINDEX_MULTIPOLYGON.get=function(){return 6},Zu.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},Zu.geometryChangedFilter.get=function(){return Ku},Object.defineProperties(Ju,Zu);var Ku=function(){};Ku.interfaces_=function(){return[Xu]},Ku.filter=function(t){t.geometryChangedAction()};var Qu=function(){};Qu.prototype.filter=function(t){},Qu.prototype.interfaces_=function(){return[]},Qu.prototype.getClass=function(){return Qu};var $u=function(){},tc={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};$u.prototype.isInBoundary=function(t){},$u.prototype.interfaces_=function(){return[]},$u.prototype.getClass=function(){return $u},tc.Mod2BoundaryNodeRule.get=function(){return ec},tc.EndPointBoundaryNodeRule.get=function(){return nc},tc.MultiValentEndPointBoundaryNodeRule.get=function(){return rc},tc.MonoValentEndPointBoundaryNodeRule.get=function(){return ic},tc.MOD2_BOUNDARY_RULE.get=function(){return new ec},tc.ENDPOINT_BOUNDARY_RULE.get=function(){return new nc},tc.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new rc},tc.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new ic},tc.OGC_SFS_BOUNDARY_RULE.get=function(){return $u.MOD2_BOUNDARY_RULE},Object.defineProperties($u,tc);var ec=function(){};ec.prototype.isInBoundary=function(t){return t%2==1},ec.prototype.interfaces_=function(){return[$u]},ec.prototype.getClass=function(){return ec};var nc=function(){};nc.prototype.isInBoundary=function(t){return t>0},nc.prototype.interfaces_=function(){return[$u]},nc.prototype.getClass=function(){return nc};var rc=function(){};rc.prototype.isInBoundary=function(t){return t>1},rc.prototype.interfaces_=function(){return[$u]},rc.prototype.getClass=function(){return rc};var ic=function(){};ic.prototype.isInBoundary=function(t){return 1===t},ic.prototype.interfaces_=function(){return[$u]},ic.prototype.getClass=function(){return ic};var oc=function(){};function ac(t){this.message=t||""}oc.prototype.add=function(){},oc.prototype.addAll=function(){},oc.prototype.isEmpty=function(){},oc.prototype.iterator=function(){},oc.prototype.size=function(){},oc.prototype.toArray=function(){},oc.prototype.remove=function(){},ac.prototype=new Error,ac.prototype.name="IndexOutOfBoundsException";var sc=function(){};sc.prototype.hasNext=function(){},sc.prototype.next=function(){},sc.prototype.remove=function(){};var lc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(oc);function uc(t){this.message=t||""}uc.prototype=new Error,uc.prototype.name="NoSuchElementException";var cc=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof oc&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,oc]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new hc(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new ac;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(lc),hc=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new uc;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(sc),dc=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){var e=this;if(2===arguments.length){for(var n=arguments[0],r=arguments[1],i=!1,o=n.iterator();o.hasNext();)e.add(o.next(),r),i=!0;return i}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){var e=this;if(1===arguments.length){var n=arguments[0];t.prototype.add.call(this,n)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var r=arguments[0],i=arguments[1];return this.add(r,i,!0),!0}if(arguments[0]instanceof uu&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1];if(!a&&this.size()>=1){var s=this.get(this.size()-1);if(s.equals2D(o))return null}t.prototype.add.call(this,o)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var l=arguments[0],u=arguments[1];return this.add(l,u),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var c=arguments[0],h=arguments[1],d=arguments[2];if(d)for(var f=0;f<c.length;f++)e.add(c[f],h);else for(var p=c.length-1;p>=0;p--)e.add(c[p],h);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof uu){var g=arguments[0],m=arguments[1],y=arguments[2];if(!y){var v=this.size();if(v>0){if(g>0){var b=this.get(g-1);if(b.equals2D(m))return null}if(g<v){var _=this.get(g);if(_.equals2D(m))return null}}}t.prototype.add.call(this,g,m)}}else if(4===arguments.length){var x=arguments[0],w=arguments[1],S=arguments[2],E=arguments[3],C=1;S>E&&(C=-1);for(var M=S;M!==E;M+=C)e.add(x[M],w);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new uu(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(cc),fc=function(){},pc={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};pc.ForwardComparator.get=function(){return gc},pc.BidirectionalComparator.get=function(){return mc},pc.coordArrayType.get=function(){return new Array(0).fill(null)},fc.prototype.interfaces_=function(){return[]},fc.prototype.getClass=function(){return fc},fc.isRing=function(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])},fc.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(fc.indexOf(r,e)<0)return r}return null},fc.scroll=function(t,e){var n=fc.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);Ou.arraycopy(t,n,r,0,t.length-n),Ou.arraycopy(t,0,r,t.length-n,n),Ou.arraycopy(r,0,t,0,t.length)},fc.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(0!==o.compare(r[a],i[a]))return!1;return!0}},fc.intersection=function(t,e){for(var n=new dc,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},fc.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},fc.removeRepeatedPoints=function(t){return fc.hasRepeatedPoints(t)?new dc(t,!1).toCoordinateArray():t},fc.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},fc.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},fc.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new uu(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],l=0;l<s;l++)o[a+l]=new uu(r[i+l])},fc.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},fc.envelope=function(t){for(var e=new Iu,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},fc.toCoordinateArray=function(t){return t.toArray(fc.coordArrayType)},fc.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},fc.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},fc.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},fc.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},fc.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},fc.extract=function(t,e,n){e=mu.clamp(e,0,t.length);var r=(n=mu.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,a=e;a<=n;a++)i[o++]=t[a];return i},Object.defineProperties(fc,pc);var gc=function(){};gc.prototype.compare=function(t,e){return fc.compare(t,e)},gc.prototype.interfaces_=function(){return[su]},gc.prototype.getClass=function(){return gc};var mc=function(){};mc.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=fc.compare(n,r);return fc.isEqualReversed(n,r)?0:i},mc.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=fc.increasingDirection(n),o=fc.increasingDirection(r),a=i>0?0:n.length-1,s=o>0?0:n.length-1,l=0;l<n.length;l++){var u=n[a].compareTo(r[s]);if(0!==u)return u;a+=i,s+=o}return 0},mc.prototype.interfaces_=function(){return[su]},mc.prototype.getClass=function(){return mc};var yc=function(){};yc.prototype.get=function(){},yc.prototype.put=function(){},yc.prototype.size=function(){},yc.prototype.values=function(){},yc.prototype.entrySet=function(){};var vc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(yc);function bc(t){this.message=t||""}function _c(){}bc.prototype=new Error,bc.prototype.name="OperationNotSupported",_c.prototype=new oc,_c.prototype.contains=function(){};var xc=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof oc&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new wc(this)},e}(_c),wc=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new uc;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new bc},e}(sc);function Sc(t){return null===t?0:t.color}function Ec(t){return null===t?null:t.parent}function Cc(t,e){null!==t&&(t.color=e)}function Mc(t){return null===t?null:t.left}function Tc(t){return null===t?null:t.right}function Ac(){this.root_=null,this.size_=0}Ac.prototype=new vc,Ac.prototype.get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},Ac.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var a={key:t,left:null,right:null,value:e,parent:n,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null},Ac.prototype.fixAfterInsertion=function(t){var e=this;for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(Ec(t)===Mc(Ec(Ec(t)))){var n=Tc(Ec(Ec(t)));1===Sc(n)?(Cc(Ec(t),0),Cc(n,0),Cc(Ec(Ec(t)),1),t=Ec(Ec(t))):(t===Tc(Ec(t))&&(t=Ec(t),e.rotateLeft(t)),Cc(Ec(t),0),Cc(Ec(Ec(t)),1),e.rotateRight(Ec(Ec(t))))}else{var r=Mc(Ec(Ec(t)));1===Sc(r)?(Cc(Ec(t),0),Cc(r,0),Cc(Ec(Ec(t)),1),t=Ec(Ec(t))):(t===Mc(Ec(t))&&(t=Ec(t),e.rotateRight(t)),Cc(Ec(t),0),Cc(Ec(Ec(t)),1),e.rotateLeft(Ec(Ec(t))))}this.root_.color=0},Ac.prototype.values=function(){var t=new cc,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=Ac.successor(e));)t.add(e.value);return t},Ac.prototype.entrySet=function(){var t=new xc,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=Ac.successor(e));)t.add(e);return t},Ac.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},Ac.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},Ac.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},Ac.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},Ac.prototype.size=function(){return this.size_};var Oc=function(){};function kc(){}function Ic(){this.array_=[],arguments[0]instanceof oc&&this.addAll(arguments[0])}Oc.prototype.interfaces_=function(){return[]},Oc.prototype.getClass=function(){return Oc},kc.prototype=new _c,Ic.prototype=new kc,Ic.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},Ic.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},Ic.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},Ic.prototype.remove=function(t){throw new bc},Ic.prototype.size=function(){return this.array_.length},Ic.prototype.isEmpty=function(){return 0===this.array_.length},Ic.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},Ic.prototype.iterator=function(){return new Pc(this)};var Pc=function(t){this.treeSet_=t,this.position_=0};Pc.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new uc;return this.treeSet_.array_[this.position_++]},Pc.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Pc.prototype.remove=function(){throw new bc};var Lc=function(){};Lc.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},Lc.asList=function(t){for(var e=new cc,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var Nc=function(){},Rc={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Rc.P.get=function(){return 0},Rc.L.get=function(){return 1},Rc.A.get=function(){return 2},Rc.FALSE.get=function(){return-1},Rc.TRUE.get=function(){return-2},Rc.DONTCARE.get=function(){return-3},Rc.SYM_FALSE.get=function(){return"F"},Rc.SYM_TRUE.get=function(){return"T"},Rc.SYM_DONTCARE.get=function(){return"*"},Rc.SYM_P.get=function(){return"0"},Rc.SYM_L.get=function(){return"1"},Rc.SYM_A.get=function(){return"2"},Nc.prototype.interfaces_=function(){return[]},Nc.prototype.getClass=function(){return Nc},Nc.toDimensionSymbol=function(t){switch(t){case Nc.FALSE:return Nc.SYM_FALSE;case Nc.TRUE:return Nc.SYM_TRUE;case Nc.DONTCARE:return Nc.SYM_DONTCARE;case Nc.P:return Nc.SYM_P;case Nc.L:return Nc.SYM_L;case Nc.A:return Nc.SYM_A}throw new nu("Unknown dimension value: "+t)},Nc.toDimensionValue=function(t){switch(_u.toUpperCase(t)){case Nc.SYM_FALSE:return Nc.FALSE;case Nc.SYM_TRUE:return Nc.TRUE;case Nc.SYM_DONTCARE:return Nc.DONTCARE;case Nc.SYM_P:return Nc.P;case Nc.SYM_L:return Nc.L;case Nc.SYM_A:return Nc.A}throw new nu("Unknown dimension symbol: "+t)},Object.defineProperties(Nc,Rc);var Dc=function(){};Dc.prototype.filter=function(t){},Dc.prototype.interfaces_=function(){return[]},Dc.prototype.getClass=function(){return Dc};var Fc=function(){};Fc.prototype.filter=function(t,e){},Fc.prototype.isDone=function(){},Fc.prototype.isGeometryChanged=function(){},Fc.prototype.interfaces_=function(){return[]},Fc.prototype.getClass=function(){return Fc};var jc=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new nu("geometries must not contain null elements")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new Iu,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],r=arguments[1];if(!this.isEquivalentClass(n))return!1;var i=n;if(this._geometries.length!==i._geometries.length)return!1;for(var o=0;o<this._geometries.length;o++)if(!e._geometries[o].equalsExact(i._geometries[o],r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Lc.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=Nc.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=Nc.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=new Ic(Lc.asList(this._geometries)),r=new Ic(Lc.asList(e._geometries));return this.compare(n,r)}if(2===arguments.length){for(var i=arguments[0],o=arguments[1],a=i,s=this.getNumGeometries(),l=a.getNumGeometries(),u=0;u<s&&u<l;){var c=t.getGeometryN(u),h=a.getGeometryN(u),d=c.compareToSameClass(h,o);if(0!==d)return d;u++}return u<s?1:u<l?-1:0}},e.prototype.apply=function(){var t=this;if(gu(arguments[0],Qu))for(var e=arguments[0],n=0;n<this._geometries.length;n++)t._geometries[n].apply(e);else if(gu(arguments[0],Fc)){var r=arguments[0];if(0===this._geometries.length)return null;for(var i=0;i<this._geometries.length&&(t._geometries[i].apply(r),!r.isDone());i++);r.isGeometryChanged()&&this.geometryChanged()}else if(gu(arguments[0],Dc)){var o=arguments[0];o.filter(this);for(var a=0;a<this._geometries.length;a++)t._geometries[a].apply(o)}else if(gu(arguments[0],Xu)){var s=arguments[0];s.filter(this);for(var l=0;l<this._geometries.length;l++)t._geometries[l].apply(s)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),zu.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(Ju),Bc=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Ju.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Nc.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new zc(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Oc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(jc),zc=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=$u.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};zc.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},zc.prototype.getBoundary=function(){return this._geom instanceof Kc?this.boundaryLineString(this._geom):this._geom instanceof Bc?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},zc.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},zc.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},zc.prototype.computeBoundaryCoordinates=function(t){var e=this,n=new cc;this._endpointMap=new Ac;for(var r=0;r<t.getNumGeometries();r++){var i=t.getGeometryN(r);0!==i.getNumPoints()&&(e.addEndpoint(i.getCoordinateN(0)),e.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var o=this._endpointMap.entrySet().iterator();o.hasNext();){var a=o.next(),s=a.getValue().count;e._bnRule.isInBoundary(s)&&n.add(a.getKey())}return fc.toCoordinateArray(n)},zc.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Uc,this._endpointMap.put(t,e)),e.count++},zc.prototype.interfaces_=function(){return[]},zc.prototype.getClass=function(){return zc},zc.getBoundary=function(){if(1===arguments.length){var t=arguments[0],e=new zc(t);return e.getBoundary()}if(2===arguments.length){var n=arguments[0],r=arguments[1],i=new zc(n,r);return i.getBoundary()}};var Uc=function(){this.count=null};function Gc(){}function qc(){}Uc.prototype.interfaces_=function(){return[]},Uc.prototype.getClass=function(){return Uc};var Vc=function(){};function Hc(){}function Wc(){}function Yc(){}var Xc=function(){},Jc={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Xc.prototype.interfaces_=function(){return[]},Xc.prototype.getClass=function(){return Xc},Xc.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},Xc.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new Hc,n=new Gc(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o="",a=new qc(Xc.getStackTrace(r)),s=new Yc(a),l=0;l<i;l++)try{o+=s.readLine()+Xc.NEWLINE}catch(t){if(!(t instanceof Wc))throw t;zu.shouldNeverReachHere()}return o}},Xc.split=function(t,e){for(var n=e.length,r=new cc,i=""+t,o=i.indexOf(e);o>=0;){var a=i.substring(0,o);r.add(a),o=(i=i.substring(o+n)).indexOf(e)}i.length>0&&r.add(i);for(var s=new Array(r.size()).fill(null),l=0;l<s.length;l++)s[l]=r.get(l);return s},Xc.toString=function(){if(1===arguments.length){var t=arguments[0];return Xc.SIMPLE_ORDINATE_FORMAT.format(t)}},Xc.spaces=function(t){return Xc.chars(" ",t)},Jc.NEWLINE.get=function(){return Ou.getProperty("line.separator")},Jc.SIMPLE_ORDINATE_FORMAT.get=function(){return new Vc("0.#")},Object.defineProperties(Xc,Jc);var Zc=function(){};Zc.prototype.interfaces_=function(){return[]},Zc.prototype.getClass=function(){return Zc},Zc.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},Zc.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,Cu.X)===t.getOrdinate(e-1,Cu.X)&&t.getOrdinate(0,Cu.Y)===t.getOrdinate(e-1,Cu.Y)},Zc.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var a=t.getOrdinate(i,o),s=e.getOrdinate(i,o);if(t.getOrdinate(i,o)!==e.getOrdinate(i,o)&&(!ru.isNaN(a)||!ru.isNaN(s)))return!1}return!0},Zc.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(Zc.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)Zc.copy(e,i-1,r,o,1);return r},Zc.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)Zc.swap(t,r,e-r)},Zc.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},Zc.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)Zc.copyCoord(t,e+o,n,r+o)},Zc.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new vu;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(Xc.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},Zc.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Zc.createClosedRing(t,e,4):e.getOrdinate(0,Cu.X)===e.getOrdinate(n-1,Cu.X)&&e.getOrdinate(0,Cu.Y)===e.getOrdinate(n-1,Cu.Y)?e:Zc.createClosedRing(t,e,n+1)},Zc.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();Zc.copy(e,0,r,0,i);for(var o=i;o<n;o++)Zc.copy(e,0,r,o,1);return r};var Kc=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Iu:this._points.expandEnvelope(new Iu)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],r=arguments[1];if(!this.isEquivalentClass(n))return!1;var i=n;if(this._points.size()!==i._points.size())return!1;for(var o=0;o<this._points.size();o++)if(!e.equal(e._points.getCoordinate(o),i._points.getCoordinate(o),r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=this,e=0;e<Math.trunc(this._points.size()/2);e++){var n=t._points.size()-1-e;if(!t._points.getCoordinate(e).equals(t._points.getCoordinate(n)))return t._points.getCoordinate(e).compareTo(t._points.getCoordinate(n))>0&&Zc.reverse(t._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Nc.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return Wu.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Zc.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=e,r=0,i=0;r<this._points.size()&&i<n._points.size();){var o=t._points.getCoordinate(r).compareTo(n._points.getCoordinate(i));if(0!==o)return o;r++,i++}return r<this._points.size()?1:i<n._points.size()?-1:0}if(2===arguments.length){var a=arguments[0],s=arguments[1],l=a;return s.compare(this._points,l._points)}},e.prototype.apply=function(){var t=this;if(gu(arguments[0],Qu))for(var e=arguments[0],n=0;n<this._points.size();n++)e.filter(t._points.getCoordinate(n));else if(gu(arguments[0],Fc)){var r=arguments[0];if(0===this._points.size())return null;for(var i=0;i<this._points.size()&&(r.filter(t._points,i),!r.isDone());i++);r.isGeometryChanged()&&this.geometryChanged()}else if(gu(arguments[0],Dc)){var o=arguments[0];o.filter(this)}else if(gu(arguments[0],Xu)){var a=arguments[0];a.filter(this)}},e.prototype.getBoundary=function(){return new zc(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new nu("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Oc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(Ju),Qc=function(){};Qc.prototype.interfaces_=function(){return[]},Qc.prototype.getClass=function(){return Qc};var $c=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Iu;var t=new Iu;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return Nc.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getCoordinate().compareTo(e.getCoordinate())}if(2===arguments.length){var n=arguments[0],r=arguments[1],i=n;return r.compare(this._coordinates,i._coordinates)}},e.prototype.apply=function(){if(gu(arguments[0],Qu)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(gu(arguments[0],Fc)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else if(gu(arguments[0],Dc)){var n=arguments[0];n.filter(this)}else if(gu(arguments[0],Xu)){var r=arguments[0];r.filter(this)}},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),zu.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Qc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(Ju),th=function(){};th.prototype.interfaces_=function(){return[]},th.prototype.getClass=function(){return th};var eh=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new nu("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new nu("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),a=0;a<o.length;a++)t[++e]=o[a];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(Wu.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(Wu.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),a=t.getY(0),s=1;s<=4;s++){var l=t.getX(s),u=t.getY(s);if(l!==o===(u!==a))return!1;o=l,a=u}return!0},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],r=arguments[1];if(!this.isEquivalentClass(n))return!1;var i=n,o=this._shell,a=i._shell;if(!o.equalsExact(a,r))return!1;if(this._holes.length!==i._holes.length)return!1;for(var s=0;s<this._holes.length;s++)if(!e._holes[s].equalsExact(i._holes[s],r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){var t=this;if(0===arguments.length){this.normalize(this._shell,!0);for(var e=0;e<this._holes.length;e++)t.normalize(t._holes[e],!1);Lc.sort(this._holes)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];if(n.isEmpty())return null;var i=new Array(n.getCoordinates().length-1).fill(null);Ou.arraycopy(n.getCoordinates(),0,i,0,i.length);var o=fc.minCoordinate(n.getCoordinates());fc.scroll(i,o),Ou.arraycopy(i,0,n.getCoordinates(),0,i.length),n.getCoordinates()[i.length]=i[0],Wu.isCCW(n.getCoordinates())===r&&fc.reverse(n.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=this._shell,r=e._shell;return n.compareToSameClass(r)}if(2===arguments.length){var i=arguments[0],o=arguments[1],a=i,s=this._shell,l=a._shell,u=s.compareToSameClass(l,o);if(0!==u)return u;for(var c=this.getNumInteriorRing(),h=a.getNumInteriorRing(),d=0;d<c&&d<h;){var f=t.getInteriorRingN(d),p=a.getInteriorRingN(d),g=f.compareToSameClass(p,o);if(0!==g)return g;d++}return d<c?1:d<h?-1:0}},e.prototype.apply=function(t){var e=this;if(gu(t,Qu)){this._shell.apply(t);for(var n=0;n<this._holes.length;n++)e._holes[n].apply(t)}else if(gu(t,Fc)){if(this._shell.apply(t),!t.isDone())for(var r=0;r<this._holes.length&&(e._holes[r].apply(t),!t.isDone());r++);t.isGeometryChanged()&&this.geometryChanged()}else if(gu(t,Dc))t.filter(this);else if(gu(t,Xu)){t.filter(this),this._shell.apply(t);for(var i=0;i<this._holes.length;i++)e._holes[i].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[th]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(Ju),nh=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Ju.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return Nc.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Qc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(jc),rh=function(t){function e(e,n){e instanceof uu&&n instanceof bh&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Ju.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return Nc.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Zc.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new nu("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new nu("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(Kc),ih=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Ju.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new cc,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[th]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(jc),oh=function(t){this._factory=t||null,this._isUserDataCopied=!1},ah={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};oh.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},oh.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},oh.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof jc?this.editGeometryCollection(t,e):t instanceof eh?this.editPolygon(t,e):t instanceof $c||t instanceof Kc?e.edit(t,this._factory):(zu.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},oh.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new cc,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===nh?this._factory.createMultiPoint(r.toArray([])):n.getClass()===Bc?this._factory.createMultiLineString(r.toArray([])):n.getClass()===ih?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},oh.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new cc,o=0;o<n.getNumInteriorRing();o++){var a=this.edit(n.getInteriorRingN(o),e);null===a||a.isEmpty()||i.add(a)}return this._factory.createPolygon(r,i.toArray([]))},oh.prototype.interfaces_=function(){return[]},oh.prototype.getClass=function(){return oh},oh.GeometryEditorOperation=function(){},ah.NoOpGeometryOperation.get=function(){return sh},ah.CoordinateOperation.get=function(){return lh},ah.CoordinateSequenceOperation.get=function(){return uh},Object.defineProperties(oh,ah);var sh=function(){};sh.prototype.edit=function(t,e){return t},sh.prototype.interfaces_=function(){return[oh.GeometryEditorOperation]},sh.prototype.getClass=function(){return sh};var lh=function(){};lh.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof rh?e.createLinearRing(n):t instanceof Kc?e.createLineString(n):t instanceof $c?n.length>0?e.createPoint(n[0]):e.createPoint():t},lh.prototype.interfaces_=function(){return[oh.GeometryEditorOperation]},lh.prototype.getClass=function(){return lh};var uh=function(){};uh.prototype.edit=function(t,e){return t instanceof rh?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Kc?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof $c?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},uh.prototype.interfaces_=function(){return[oh.GeometryEditorOperation]},uh.prototype.getClass=function(){return uh};var ch=function(){var t=this;if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var e=arguments[0];this._coordinates=new Array(e).fill(null);for(var n=0;n<e;n++)t._coordinates[n]=new uu}else if(gu(arguments[0],Cu)){var r=arguments[0];if(null===r)return this._coordinates=new Array(0).fill(null),null;this._dimension=r.getDimension(),this._coordinates=new Array(r.size()).fill(null);for(var i=0;i<this._coordinates.length;i++)t._coordinates[i]=r.getCoordinateCopy(i)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var o=arguments[0],a=arguments[1];this._coordinates=o,this._dimension=a,null===o&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var s=arguments[0],l=arguments[1];this._coordinates=new Array(s).fill(null),this._dimension=l;for(var u=0;u<s;u++)t._coordinates[u]=new uu}},hh={serialVersionUID:{configurable:!0}};ch.prototype.setOrdinate=function(t,e,n){switch(e){case Cu.X:this._coordinates[t].x=n;break;case Cu.Y:this._coordinates[t].y=n;break;case Cu.Z:this._coordinates[t].z=n;break;default:throw new nu("invalid ordinateIndex")}},ch.prototype.size=function(){return this._coordinates.length},ch.prototype.getOrdinate=function(t,e){switch(e){case Cu.X:return this._coordinates[t].x;case Cu.Y:return this._coordinates[t].y;case Cu.Z:return this._coordinates[t].z}return ru.NaN},ch.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},ch.prototype.getCoordinateCopy=function(t){return new uu(this._coordinates[t])},ch.prototype.getDimension=function(){return this._dimension},ch.prototype.getX=function(t){return this._coordinates[t].x},ch.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new ch(t,this._dimension)},ch.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},ch.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new ch(t,this._dimension)},ch.prototype.toString=function(){if(this._coordinates.length>0){var t=new vu(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},ch.prototype.getY=function(t){return this._coordinates[t].y},ch.prototype.toCoordinateArray=function(){return this._coordinates},ch.prototype.interfaces_=function(){return[Cu,lu]},ch.prototype.getClass=function(){return ch},hh.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(ch,hh);var dh=function(){},fh={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};dh.prototype.readResolve=function(){return dh.instance()},dh.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new ch(t)}if(gu(arguments[0],Cu)){var e=arguments[0];return new ch(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return r>3&&(r=3),r<2?new ch(n):new ch(n,r)}},dh.prototype.interfaces_=function(){return[du,lu]},dh.prototype.getClass=function(){return dh},dh.instance=function(){return dh.instanceObject},fh.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},fh.instanceObject.get=function(){return new dh},Object.defineProperties(dh,fh);var ph=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new cc,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new xc;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(yc),gh=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof yh){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},mh={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};gh.prototype.equals=function(t){if(!(t instanceof gh))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},gh.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new bu(n).compareTo(new bu(r))},gh.prototype.getScale=function(){return this._scale},gh.prototype.isFloating=function(){return this._modelType===gh.FLOATING||this._modelType===gh.FLOATING_SINGLE},gh.prototype.getType=function(){return this._modelType},gh.prototype.toString=function(){var t="UNKNOWN";return this._modelType===gh.FLOATING?t="Floating":this._modelType===gh.FLOATING_SINGLE?t="Floating-Single":this._modelType===gh.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},gh.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return ru.isNaN(t)||this._modelType===gh.FLOATING_SINGLE?t:this._modelType===gh.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof uu){var e=arguments[0];if(this._modelType===gh.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},gh.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===gh.FLOATING?t=16:this._modelType===gh.FLOATING_SINGLE?t=6:this._modelType===gh.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},gh.prototype.setScale=function(t){this._scale=Math.abs(t)},gh.prototype.interfaces_=function(){return[lu,ou]},gh.prototype.getClass=function(){return gh},gh.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},mh.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},mh.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(gh,mh);var yh=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},vh={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};yh.prototype.readResolve=function(){return yh.nameToTypeMap.get(this._name)},yh.prototype.toString=function(){return this._name},yh.prototype.interfaces_=function(){return[lu]},yh.prototype.getClass=function(){return yh},vh.serialVersionUID.get=function(){return-552860263173159e4},vh.nameToTypeMap.get=function(){return new ph},Object.defineProperties(yh,vh),gh.Type=yh,gh.FIXED=new yh("FIXED"),gh.FLOATING=new yh("FLOATING"),gh.FLOATING_SINGLE=new yh("FLOATING SINGLE");var bh=function t(){this._precisionModel=new gh,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?gu(arguments[0],du)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof gh&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},_h={serialVersionUID:{configurable:!0}};bh.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new uu(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new uu(t.getMinX(),t.getMinY()),new uu(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new uu(t.getMinX(),t.getMinY()),new uu(t.getMinX(),t.getMaxY()),new uu(t.getMaxX(),t.getMaxY()),new uu(t.getMaxX(),t.getMinY()),new uu(t.getMinX(),t.getMinY())]),null)},bh.prototype.createLineString=function(t){return t?t instanceof Array?new Kc(this.getCoordinateSequenceFactory().create(t),this):gu(t,Cu)?new Kc(t,this):void 0:new Kc(this.getCoordinateSequenceFactory().create([]),this)},bh.prototype.createMultiLineString=function(){if(0===arguments.length)return new Bc(null,this);if(1===arguments.length){var t=arguments[0];return new Bc(t,this)}},bh.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),a=o.getClass();null===e&&(e=a),a!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(bh.toGeometryArray(t));var s=t.iterator().next();if(t.size()>1){if(s instanceof eh)return this.createMultiPolygon(bh.toPolygonArray(t));if(s instanceof Kc)return this.createMultiLineString(bh.toLineStringArray(t));if(s instanceof $c)return this.createMultiPoint(bh.toPointArray(t));zu.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},bh.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},bh.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof uu){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(gu(arguments[0],Cu)){var e=arguments[0];return new $c(e,this)}}},bh.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},bh.prototype.createPolygon=function(){if(0===arguments.length)return new eh(null,null,this);if(1===arguments.length){if(gu(arguments[0],Cu)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof rh){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];return new eh(r,i,this)}},bh.prototype.getSRID=function(){return this._SRID},bh.prototype.createGeometryCollection=function(){if(0===arguments.length)return new jc(null,this);if(1===arguments.length){var t=arguments[0];return new jc(t,this)}},bh.prototype.createGeometry=function(t){return new oh(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},bh.prototype.getPrecisionModel=function(){return this._precisionModel},bh.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(gu(arguments[0],Cu)){var e=arguments[0];return new rh(e,this)}}},bh.prototype.createMultiPolygon=function(){if(0===arguments.length)return new ih(null,this);if(1===arguments.length){var t=arguments[0];return new ih(t,this)}},bh.prototype.createMultiPoint=function(){var t=this;if(0===arguments.length)return new nh(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];return new nh(e,this)}if(arguments[0]instanceof Array){var n=arguments[0];return this.createMultiPoint(null!==n?this.getCoordinateSequenceFactory().create(n):null)}if(gu(arguments[0],Cu)){var r=arguments[0];if(null===r)return this.createMultiPoint(new Array(0).fill(null));for(var i=new Array(r.size()).fill(null),o=0;o<r.size();o++){var a=t.getCoordinateSequenceFactory().create(1,r.getDimension());Zc.copy(r,o,a,0,1),i[o]=t.createPoint(a)}return this.createMultiPoint(i)}}},bh.prototype.interfaces_=function(){return[lu]},bh.prototype.getClass=function(){return bh},bh.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},bh.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},bh.getDefaultCoordinateSequenceFactory=function(){return dh.instance()},bh.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},bh.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},bh.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},bh.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},bh.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},bh.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},bh.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},_h.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(bh,_h);var xh=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],wh=function(t){this.geometryFactory=t||new bh};wh.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!Sh[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==xh.indexOf(n)?Sh[n].apply(this,[e.coordinates]):"GeometryCollection"===n?Sh[n].apply(this,[e.geometries]):Sh[n].apply(this,[e])},wh.prototype.write=function(t){var e=t.getGeometryType();if(!Eh[e])throw new Error("Geometry is not supported");return Eh[e].apply(this,[t])};var Sh={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!Sh[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=Sh.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new uu(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new uu(t[0],t[1]),new uu(t[2],t[1]),new uu(t[2],t[3]),new uu(t[0],t[3]),new uu(t[0],t[1])])},Point:function(t){var e=new uu(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Sh.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=Sh.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Sh.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=Sh.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],a=Sh.coordinates.apply(this,[o]),s=this.geometryFactory.createLinearRing(a);r.push(s)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(Sh.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},Eh={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:Eh.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=Eh.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(Eh.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=Eh.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=Eh.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=Eh.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=Eh.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(Eh[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},Ch=function(t){this.geometryFactory=t||new bh,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new wh(this.geometryFactory)};Ch.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===gh.FIXED&&this.reducePrecision(e),e},Ch.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Mh=function(){this.parser=new wh(this.geometryFactory)};Mh.prototype.write=function(t){return this.parser.write(t)};var Th=function(){},Ah={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};function Oh(t){this.message=t||""}function kh(){this.array_=[]}Th.prototype.interfaces_=function(){return[]},Th.prototype.getClass=function(){return Th},Th.opposite=function(t){return t===Th.LEFT?Th.RIGHT:t===Th.RIGHT?Th.LEFT:t},Ah.ON.get=function(){return 0},Ah.LEFT.get=function(){return 1},Ah.RIGHT.get=function(){return 2},Object.defineProperties(Th,Ah),Oh.prototype=new Error,Oh.prototype.name="EmptyStackException",kh.prototype=new lc,kh.prototype.add=function(t){return this.array_.push(t),!0},kh.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},kh.prototype.push=function(t){return this.array_.push(t),t},kh.prototype.pop=function(t){if(0===this.array_.length)throw new Oh;return this.array_.pop()},kh.prototype.peek=function(){if(0===this.array_.length)throw new Oh;return this.array_[this.array_.length-1]},kh.prototype.empty=function(){return 0===this.array_.length},kh.prototype.isEmpty=function(){return this.empty()},kh.prototype.search=function(t){return this.array_.indexOf(t)},kh.prototype.size=function(){return this.array_.length},kh.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Ih=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Ih.prototype.getCoordinate=function(){return this._minCoord},Ih.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Ih.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();zu.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=Wu.computeOrientation(this._minCoord,n,e),i=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===Wu.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===Wu.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Ih.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=Th.LEFT;return n[e].y<n[e+1].y&&(r=Th.RIGHT),r},Ih.prototype.getEdge=function(){return this._orientedDe},Ih.prototype.checkForRightmostCoordinate=function(t){for(var e=this,n=t.getEdge().getCoordinates(),r=0;r<n.length-1;r++)(null===e._minCoord||n[r].x>e._minCoord.x)&&(e._minDe=t,e._minIndex=r,e._minCoord=n[r])},Ih.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Ih.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}zu.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Th.LEFT&&(this._orientedDe=this._minDe.getSym())},Ih.prototype.interfaces_=function(){return[]},Ih.prototype.getClass=function(){return Ih};var Ph=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new uu(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(ju),Lh=function(){this.array_=[]};Lh.prototype.addLast=function(t){this.array_.push(t)},Lh.prototype.removeFirst=function(){return this.array_.shift()},Lh.prototype.isEmpty=function(){return 0===this.array_.length};var Nh=function(){this._finder=null,this._dirEdgeList=new cc,this._nodes=new cc,this._rightMostCoord=null,this._env=null,this._finder=new Ih};Nh.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Nh.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Nh.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new Ph("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Nh.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Th.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Nh.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Nh.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Th.RIGHT)>=1&&e.getDepth(Th.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Nh.prototype.computeDepths=function(t){var e=new xc,n=new Lh,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();e.contains(s)||(n.addLast(s),e.add(s))}}}},Nh.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Nh.prototype.getEnvelope=function(){if(null===this._env){for(var t=new Iu,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},Nh.prototype.addReachable=function(t){var e=new kh;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Nh.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Th.LEFT,t.getDepth(Th.RIGHT)),e.setDepth(Th.RIGHT,t.getDepth(Th.LEFT))},Nh.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},Nh.prototype.getNodes=function(){return this._nodes},Nh.prototype.getDirectedEdges=function(){return this._dirEdgeList},Nh.prototype.interfaces_=function(){return[ou]},Nh.prototype.getClass=function(){return Nh};var Rh=function t(){var e=this;if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var n=arguments[0];this.init(n.length)}else if(Number.isInteger(arguments[0])){var r=arguments[0];this.init(1),this.location[Th.ON]=r}else if(arguments[0]instanceof t){var i=arguments[0];if(this.init(i.location.length),null!==i)for(var o=0;o<this.location.length;o++)e.location[o]=i.location[o]}}else if(3===arguments.length){var a=arguments[0],s=arguments[1],l=arguments[2];this.init(3),this.location[Th.ON]=a,this.location[Th.LEFT]=s,this.location[Th.RIGHT]=l}};Rh.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Rh.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==fu.NONE)return!1;return!0},Rh.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===fu.NONE&&(this.location[e]=t)},Rh.prototype.isLine=function(){return 1===this.location.length},Rh.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Th.ON]=this.location[Th.ON],e[Th.LEFT]=fu.NONE,e[Th.RIGHT]=fu.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===fu.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Rh.prototype.getLocations=function(){return this.location},Rh.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Th.LEFT];this.location[Th.LEFT]=this.location[Th.RIGHT],this.location[Th.RIGHT]=t},Rh.prototype.toString=function(){var t=new vu;return this.location.length>1&&t.append(fu.toLocationSymbol(this.location[Th.LEFT])),t.append(fu.toLocationSymbol(this.location[Th.ON])),this.location.length>1&&t.append(fu.toLocationSymbol(this.location[Th.RIGHT])),t.toString()},Rh.prototype.setLocations=function(t,e,n){this.location[Th.ON]=t,this.location[Th.LEFT]=e,this.location[Th.RIGHT]=n},Rh.prototype.get=function(t){return t<this.location.length?this.location[t]:fu.NONE},Rh.prototype.isArea=function(){return this.location.length>1},Rh.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===fu.NONE)return!0;return!1},Rh.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Th.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},Rh.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(fu.NONE)},Rh.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Rh.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Rh.prototype.interfaces_=function(){return[]},Rh.prototype.getClass=function(){return Rh};var Dh=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Rh(e),this.elt[1]=new Rh(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Rh(n.elt[0]),this.elt[1]=new Rh(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new Rh(fu.NONE),this.elt[1]=new Rh(fu.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.elt[0]=new Rh(o,a,s),this.elt[1]=new Rh(o,a,s)}else if(4===arguments.length){var l=arguments[0],u=arguments[1],c=arguments[2],h=arguments[3];this.elt[0]=new Rh(fu.NONE,fu.NONE,fu.NONE),this.elt[1]=new Rh(fu.NONE,fu.NONE,fu.NONE),this.elt[l].setLocations(u,c,h)}};Dh.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Dh.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Dh.prototype.isNull=function(t){return this.elt[t].isNull()},Dh.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},Dh.prototype.isLine=function(t){return this.elt[t].isLine()},Dh.prototype.merge=function(t){for(var e=this,n=0;n<2;n++)null===e.elt[n]&&null!==t.elt[n]?e.elt[n]=new Rh(t.elt[n]):e.elt[n].merge(t.elt[n])},Dh.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Dh.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Th.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},Dh.prototype.toString=function(){var t=new vu;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Dh.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Dh.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Dh.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Th.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},Dh.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Dh.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Dh.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Rh(this.elt[t].location[0]))},Dh.prototype.interfaces_=function(){return[]},Dh.prototype.getClass=function(){return Dh},Dh.toLineLabel=function(t){for(var e=new Dh(fu.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var Fh=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new cc,this._pts=new cc,this._label=new Dh(fu.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new cc,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};Fh.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=Wu.isCCW(this._ring.getCoordinates())},Fh.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Fh.prototype.computePoints=function(t){var e=this;this._startDe=t;var n=t,r=!0;do{if(null===n)throw new Ph("Found null DirectedEdge");if(n.getEdgeRing()===e)throw new Ph("Directed Edge visited twice during ring-building at "+n.getCoordinate());e._edges.add(n);var i=n.getLabel();zu.isTrue(i.isArea()),e.mergeLabel(i),e.addPoints(n.getEdge(),n.isForward(),r),r=!1,e.setEdgeRing(n,e),n=e.getNext(n)}while(n!==this._startDe)},Fh.prototype.getLinearRing=function(){return this._ring},Fh.prototype.getCoordinate=function(t){return this._pts.get(t)},Fh.prototype.computeMaxNodeDegree=function(){var t=this;this._maxNodeDegree=0;var e=this._startDe;do{var n=e.getNode().getEdges().getOutgoingDegree(t);n>t._maxNodeDegree&&(t._maxNodeDegree=n),e=t.getNext(e)}while(e!==this._startDe);this._maxNodeDegree*=2},Fh.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var a=r.length-2;n&&(a=r.length-1);for(var s=a;s>=0;s--)this._pts.add(r[s])}},Fh.prototype.isHole=function(){return this._isHole},Fh.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},Fh.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!Wu.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},Fh.prototype.addHole=function(t){this._holes.add(t)},Fh.prototype.isShell=function(){return null===this._shell},Fh.prototype.getLabel=function(){return this._label},Fh.prototype.getEdges=function(){return this._edges},Fh.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Fh.prototype.getShell=function(){return this._shell},Fh.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=e.getLocation(n,Th.RIGHT);if(r===fu.NONE)return null;if(this._label.getLocation(n)===fu.NONE)return this._label.setLocation(n,r),null}},Fh.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Fh.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Fh.prototype.interfaces_=function(){return[]},Fh.prototype.getClass=function(){return Fh};var jh=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Fh),Bh=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new cc,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new jh(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Fh),zh=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};zh.prototype.setVisited=function(t){this._isVisited=t},zh.prototype.setInResult=function(t){this._isInResult=t},zh.prototype.isCovered=function(){return this._isCovered},zh.prototype.isCoveredSet=function(){return this._isCoveredSet},zh.prototype.setLabel=function(t){this._label=t},zh.prototype.getLabel=function(){return this._label},zh.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},zh.prototype.updateIM=function(t){zu.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},zh.prototype.isInResult=function(){return this._isInResult},zh.prototype.isVisited=function(){return this._isVisited},zh.prototype.interfaces_=function(){return[]},zh.prototype.getClass=function(){return zh};var Uh=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new Dh(0,fu.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=fu.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==fu.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new Dh(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){var t=this;if(arguments[0]instanceof e){var n=arguments[0];this.mergeLabel(n._label)}else if(arguments[0]instanceof Dh)for(var r=arguments[0],i=0;i<2;i++){var o=t.computeMergedLocation(r,i),a=t._label.getLocation(i);a===fu.NONE&&t._label.setLocation(i,o)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=fu.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case fu.BOUNDARY:n=fu.INTERIOR;break;case fu.INTERIOR:default:n=fu.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(zh),Gh=function(){this.nodeMap=new Ac,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};Gh.prototype.find=function(t){return this.nodeMap.get(t)},Gh.prototype.addNode=function(){if(arguments[0]instanceof uu){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Uh){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},Gh.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},Gh.prototype.iterator=function(){return this.nodeMap.values().iterator()},Gh.prototype.values=function(){return this.nodeMap.values()},Gh.prototype.getBoundaryNodes=function(t){for(var e=new cc,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===fu.BOUNDARY&&e.add(r)}return e},Gh.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},Gh.prototype.interfaces_=function(){return[]},Gh.prototype.getClass=function(){return Gh};var qh=function(){},Vh={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};qh.prototype.interfaces_=function(){return[]},qh.prototype.getClass=function(){return qh},qh.isNorthern=function(t){return t===qh.NE||t===qh.NW},qh.isOpposite=function(t,e){return t!==e&&2===(t-e+4)%4},qh.commonHalfPlane=function(t,e){if(t===e)return t;if(2===(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},qh.isInHalfPlane=function(t,e){return e===qh.SE?t===qh.SE||t===qh.SW:t===e||t===e+1},qh.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new nu("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?qh.NE:qh.SE:e>=0?qh.NW:qh.SW}if(arguments[0]instanceof uu&&arguments[1]instanceof uu){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new nu("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?qh.NE:qh.SE:r.y>=n.y?qh.NW:qh.SW}},Vh.NE.get=function(){return 0},Vh.NW.get=function(){return 1},Vh.SW.get=function(){return 2},Vh.SE.get=function(){return 3},Object.defineProperties(qh,Vh);var Hh=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=null;this._edge=e,this.init(n,r),this._label=i}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],l=arguments[3];this._edge=o,this.init(a,s),this._label=l}};Hh.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:Wu.computeOrientation(t._p0,t._p1,this._p1)},Hh.prototype.getDy=function(){return this._dy},Hh.prototype.getCoordinate=function(){return this._p0},Hh.prototype.setNode=function(t){this._node=t},Hh.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Hh.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},Hh.prototype.getDirectedCoordinate=function(){return this._p1},Hh.prototype.getDx=function(){return this._dx},Hh.prototype.getLabel=function(){return this._label},Hh.prototype.getEdge=function(){return this._edge},Hh.prototype.getQuadrant=function(){return this._quadrant},Hh.prototype.getNode=function(){return this._node},Hh.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Hh.prototype.computeLabel=function(t){},Hh.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=qh.quadrant(this._dx,this._dy),zu.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Hh.prototype.interfaces_=function(){return[ou]},Hh.prototype.getClass=function(){return Hh};var Wh=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Dh(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Ph("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=this,e=!0,n=0;n<2;n++)t._label.isArea(n)&&t._label.getLocation(n,Th.LEFT)===fu.INTERIOR&&t._label.getLocation(n,Th.RIGHT)===fu.INTERIOR||(e=!1);return e},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Th.LEFT]+"/"+this._depth[Th.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,fu.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,fu.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===Th.LEFT&&(r=-1);var i=Th.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===fu.EXTERIOR&&e===fu.INTERIOR?1:t===fu.INTERIOR&&e===fu.EXTERIOR?-1:0},e}(Hh),Yh=function(){};Yh.prototype.createNode=function(t){return new Uh(t,null)},Yh.prototype.interfaces_=function(){return[]},Yh.prototype.getClass=function(){return Yh};var Xh=function(){if(this._edges=new cc,this._nodes=null,this._edgeEndList=new cc,0===arguments.length)this._nodes=new Gh(new Yh);else if(1===arguments.length){var t=arguments[0];this._nodes=new Gh(t)}};Xh.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},Xh.prototype.find=function(t){return this._nodes.find(t)},Xh.prototype.addNode=function(){if(arguments[0]instanceof Uh){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof uu){var e=arguments[0];return this._nodes.addNode(e)}},Xh.prototype.getNodeIterator=function(){return this._nodes.iterator()},Xh.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},Xh.prototype.debugPrintln=function(t){Ou.out.println(t)},Xh.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===fu.BOUNDARY},Xh.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},Xh.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&Wu.computeOrientation(t,e,r)===Wu.COLLINEAR&&qh.quadrant(t,e)===qh.quadrant(n,r)},Xh.prototype.getEdgeEnds=function(){return this._edgeEndList},Xh.prototype.debugPrint=function(t){Ou.out.print(t)},Xh.prototype.getEdgeIterator=function(){return this._edges.iterator()},Xh.prototype.findEdgeInSameDirection=function(t,e){for(var n=this,r=0;r<this._edges.size();r++){var i=n._edges.get(r),o=i.getCoordinates();if(n.matchInSameDirection(t,e,o[0],o[1]))return i;if(n.matchInSameDirection(t,e,o[o.length-1],o[o.length-2]))return i}return null},Xh.prototype.insertEdge=function(t){this._edges.add(t)},Xh.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},Xh.prototype.addEdges=function(t){for(var e=this,n=t.iterator();n.hasNext();){var r=n.next();e._edges.add(r);var i=new Wh(r,!0),o=new Wh(r,!1);i.setSym(o),o.setSym(i),e.add(i),e.add(o)}},Xh.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Xh.prototype.getNodes=function(){return this._nodes.values()},Xh.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},Xh.prototype.interfaces_=function(){return[]},Xh.prototype.getClass=function(){return Xh},Xh.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var Jh=function(){this._geometryFactory=null,this._shellList=new cc;var t=arguments[0];this._geometryFactory=t};Jh.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},Jh.prototype.computePolygons=function(t){for(var e=new cc,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},Jh.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new Ph("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},Jh.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new cc,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),e.add(s)):n.addAll(a)}else r.add(o)}return r},Jh.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},Jh.prototype.buildMaximalEdgeRings=function(t){for(var e=new cc,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new Bh(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},Jh.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},Jh.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Jh.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var l=s.next(),u=l.getLinearRing(),c=u.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(r)&&Wu.isPointInRing(i,u.getCoordinates())&&(h=!0),h&&(null===o||a.contains(c))&&(o=l)}return o},Jh.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return zu.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},Jh.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Xh.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new cc,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},Jh.prototype.interfaces_=function(){return[]},Jh.prototype.getClass=function(){return Jh};var Zh=function(){};Zh.prototype.getBounds=function(){},Zh.prototype.interfaces_=function(){return[]},Zh.prototype.getClass=function(){return Zh};var Kh=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};Kh.prototype.getItem=function(){return this._item},Kh.prototype.getBounds=function(){return this._bounds},Kh.prototype.interfaces_=function(){return[Zh,lu]},Kh.prototype.getClass=function(){return Kh};var Qh=function(){this._size=null,this._items=null,this._size=0,this._items=new cc,this._items.add(null)};Qh.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},Qh.prototype.size=function(){return this._size},Qh.prototype.reorder=function(t){for(var e=this,n=null,r=this._items.get(t);2*t<=this._size&&((n=2*t)!==e._size&&e._items.get(n+1).compareTo(e._items.get(n))<0&&n++,e._items.get(n).compareTo(r)<0);t=n)e._items.set(t,e._items.get(n));this._items.set(t,r)},Qh.prototype.clear=function(){this._size=0,this._items.clear()},Qh.prototype.isEmpty=function(){return 0===this._size},Qh.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},Qh.prototype.interfaces_=function(){return[]},Qh.prototype.getClass=function(){return Qh};var $h=function(){};$h.prototype.visitItem=function(t){},$h.prototype.interfaces_=function(){return[]},$h.prototype.getClass=function(){return $h};var td=function(){};td.prototype.insert=function(t,e){},td.prototype.remove=function(t,e){},td.prototype.query=function(){},td.prototype.interfaces_=function(){return[]},td.prototype.getClass=function(){return td};var ed=function(){if(this._childBoundables=new cc,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},nd={serialVersionUID:{configurable:!0}};ed.prototype.getLevel=function(){return this._level},ed.prototype.size=function(){return this._childBoundables.size()},ed.prototype.getChildBoundables=function(){return this._childBoundables},ed.prototype.addChildBoundable=function(t){zu.isTrue(null===this._bounds),this._childBoundables.add(t)},ed.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},ed.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},ed.prototype.interfaces_=function(){return[Zh,lu]},ed.prototype.getClass=function(){return ed},nd.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(ed,nd);var rd=function(){};rd.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},rd.min=function(t){return rd.sort(t),t.get(0)},rd.sort=function(t,e){var n=t.toArray();e?Lc.sort(n,e):Lc.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},rd.singletonList=function(t){var e=new cc;return e.add(t),e};var id=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};id.prototype.expandToQueue=function(t,e){var n=id.isComposite(this._boundable1),r=id.isComposite(this._boundable2);if(n&&r)return id.area(this._boundable1)>id.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new nu("neither boundable is composite")},id.prototype.isLeaves=function(){return!(id.isComposite(this._boundable1)||id.isComposite(this._boundable2))},id.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},id.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),a=new id(o,e,this._itemDistance);a.getDistance()<r&&n.add(a)}},id.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},id.prototype.getDistance=function(){return this._distance},id.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},id.prototype.interfaces_=function(){return[ou]},id.prototype.getClass=function(){return id},id.area=function(t){return t.getBounds().getArea()},id.isComposite=function(t){return t instanceof ed};var od=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new cc,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];zu.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},ad={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};od.prototype.getNodeCapacity=function(){return this._nodeCapacity},od.prototype.lastNode=function(t){return t.get(t.size()-1)},od.prototype.size=function(){var t=this;if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var e=arguments[0],n=0,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof ed?n+=t.size(i):i instanceof Kh&&(n+=1)}return n}},od.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Kh&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},od.prototype.itemsTree=function(){var t=this;if(0===arguments.length){this.build();var e=this.itemsTree(this._root);return null===e?new cc:e}if(1===arguments.length){for(var n=arguments[0],r=new cc,i=n.getChildBoundables().iterator();i.hasNext();){var o=i.next();if(o instanceof ed){var a=t.itemsTree(o);null!==a&&r.add(a)}else o instanceof Kh?r.add(o.getItem()):zu.shouldNeverReachHere()}return r.size()<=0?null:r}},od.prototype.insert=function(t,e){zu.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Kh(t,e))},od.prototype.boundablesAtLevel=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=new cc;return this.boundablesAtLevel(e,this._root,n),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(zu.isTrue(r>-2),i.getLevel()===r)return o.add(i),null;for(var a=i.getChildBoundables().iterator();a.hasNext();){var s=a.next();s instanceof ed?t.boundablesAtLevel(r,s,o):(zu.isTrue(s instanceof Kh),-1===r&&o.add(s))}return null}},od.prototype.query=function(){var t=this;if(1===arguments.length){var e=arguments[0];this.build();var n=new cc;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.query(e,this._root,n),n}if(2===arguments.length){var r=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),r)&&this.query(r,this._root,i)}else if(3===arguments.length)if(gu(arguments[2],$h)&&arguments[0]instanceof Object&&arguments[1]instanceof ed)for(var o=arguments[0],a=arguments[1],s=arguments[2],l=a.getChildBoundables(),u=0;u<l.size();u++){var c=l.get(u);t.getIntersectsOp().intersects(c.getBounds(),o)&&(c instanceof ed?t.query(o,c,s):c instanceof Kh?s.visitItem(c.getItem()):zu.shouldNeverReachHere())}else if(gu(arguments[2],lc)&&arguments[0]instanceof Object&&arguments[1]instanceof ed)for(var h=arguments[0],d=arguments[1],f=arguments[2],p=d.getChildBoundables(),g=0;g<p.size();g++){var m=p.get(g);t.getIntersectsOp().intersects(m.getBounds(),h)&&(m instanceof ed?t.query(h,m,f):m instanceof Kh?f.add(m.getItem()):zu.shouldNeverReachHere())}},od.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},od.prototype.getRoot=function(){return this.build(),this._root},od.prototype.remove=function(){var t=this;if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.remove(e,this._root,n)}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=this.removeItem(i,o);if(a)return!0;for(var s=null,l=i.getChildBoundables().iterator();l.hasNext();){var u=l.next();if(t.getIntersectsOp().intersects(u.getBounds(),r)&&u instanceof ed&&(a=t.remove(r,u,o))){s=u;break}}return null!==s&&s.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(s),a}},od.prototype.createHigherLevels=function(t,e){zu.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},od.prototype.depth=function(){var t=this;if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var e=arguments[0],n=0,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof ed){var o=t.depth(i);o>n&&(n=o)}}return n+1}},od.prototype.createParentBoundables=function(t,e){var n=this;zu.isTrue(!t.isEmpty());var r=new cc;r.add(this.createNode(e));var i=new cc(t);rd.sort(i,this.getComparator());for(var o=i.iterator();o.hasNext();){var a=o.next();n.lastNode(r).getChildBoundables().size()===n.getNodeCapacity()&&r.add(n.createNode(e)),n.lastNode(r).addChildBoundable(a)}return r},od.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},od.prototype.interfaces_=function(){return[lu]},od.prototype.getClass=function(){return od},od.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},ad.IntersectsOp.get=function(){return sd},ad.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},ad.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(od,ad);var sd=function(){},ld=function(){};ld.prototype.distance=function(t,e){},ld.prototype.interfaces_=function(){return[]},ld.prototype.getClass=function(){return ld};var ud=function(t){function e(n){n=n||e.DEFAULT_NODE_CAPACITY,t.call(this,n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(t,e){zu.isTrue(t.length>0);for(var n=new cc,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},e.prototype.createNode=function(t){return new cd(t)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new cc;for(var a=0;i.hasNext()&&a<n;){var s=i.next();r[o].add(s),a++}}return r},e.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];t.prototype.query.call(this,n,r)}else if(3===arguments.length)if(gu(arguments[2],$h)&&arguments[0]instanceof Object&&arguments[1]instanceof ed){var i=arguments[0],o=arguments[1],a=arguments[2];t.prototype.query.call(this,i,o,a)}else if(gu(arguments[2],lc)&&arguments[0]instanceof Object&&arguments[1]instanceof ed){var s=arguments[0],l=arguments[1],u=arguments[2];t.prototype.query.call(this,s,l,u)}},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},e.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(t,n){zu.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new cc(t);rd.sort(i,e.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,n)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(gu(arguments[0],ld)){var t=arguments[0],n=new id(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(n)}if(arguments[0]instanceof id){var r=arguments[0];return this.nearestNeighbour(r,ru.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof e&&gu(arguments[1],ld)){var i=arguments[0],o=arguments[1],a=new id(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(a)}if(arguments[0]instanceof id&&"number"==typeof arguments[1]){var s=arguments[0],l=arguments[1],u=l,c=null,h=new Qh;for(h.add(s);!h.isEmpty()&&u>0;){var d=h.poll(),f=d.getDistance();if(f>=u)break;d.isLeaves()?(u=f,c=d):d.expandToQueue(h,u)}return[c.getBoundable(0).getItem(),c.getBoundable(1).getItem()]}}else if(3===arguments.length){var p=arguments[0],g=arguments[1],m=arguments[2],y=new Kh(p,g),v=new id(this.getRoot(),y,m);return this.nearestNeighbour(v)[0]}},e.prototype.interfaces_=function(){return[td,lu]},e.prototype.getClass=function(){return e},e.centreX=function(t){return e.avg(t.getMinX(),t.getMaxX())},e.avg=function(t,e){return(t+e)/2},e.centreY=function(t){return e.avg(t.getMinY(),t.getMaxY())},n.STRtreeNode.get=function(){return cd},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[su]},compare:function(n,r){return t.compareDoubles(e.centreX(n.getBounds()),e.centreX(r.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[su]},compare:function(n,r){return t.compareDoubles(e.centreY(n.getBounds()),e.centreY(r.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,n),e}(od),cd=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new Iu(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ed),hd=function(){};hd.prototype.interfaces_=function(){return[]},hd.prototype.getClass=function(){return hd},hd.relativeSign=function(t,e){return t<e?-1:t>e?1:0},hd.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=hd.relativeSign(e.x,n.x),i=hd.relativeSign(e.y,n.y);switch(t){case 0:return hd.compareValue(r,i);case 1:return hd.compareValue(i,r);case 2:return hd.compareValue(i,-r);case 3:return hd.compareValue(-r,i);case 4:return hd.compareValue(-r,-i);case 5:return hd.compareValue(-i,-r);case 6:return hd.compareValue(-i,r);case 7:return hd.compareValue(r,-i)}return zu.shouldNeverReachHere("invalid octant value"),0},hd.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var dd=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new uu(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};dd.prototype.getCoordinate=function(){return this.coord},dd.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},dd.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:hd.compare(this._segmentOctant,this.coord,e.coord)},dd.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},dd.prototype.isInterior=function(){return this._isInterior},dd.prototype.interfaces_=function(){return[ou]},dd.prototype.getClass=function(){return dd};var fd=function(){this._nodeMap=new Ac,this._edge=null;var t=arguments[0];this._edge=t};fd.prototype.getSplitCoordinates=function(){var t=new dc;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},fd.prototype.addCollapsedNodes=function(){var t=new cc;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},fd.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},fd.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new bu(e+1))}},fd.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new uu(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new uu(e.coord))},fd.prototype.iterator=function(){return this._nodeMap.values().iterator()},fd.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},fd.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},fd.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new bu(e[0])),r=i}},fd.prototype.getEdge=function(){return this._edge},fd.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},fd.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new uu(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return i&&(o[a]=new uu(e.coord)),new yd(o,this._edge.getData())},fd.prototype.add=function(t,e){var n=new dd(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(zu.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},fd.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new ju("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new ju("bad split edge end point at "+i)},fd.prototype.interfaces_=function(){return[]},fd.prototype.getClass=function(){return fd};var pd=function(){};pd.prototype.interfaces_=function(){return[]},pd.prototype.getClass=function(){return pd},pd.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new nu("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof uu&&arguments[1]instanceof uu){var i=arguments[0],o=arguments[1],a=o.x-i.x,s=o.y-i.y;if(0===a&&0===s)throw new nu("Cannot compute the octant for two identical points "+i);return pd.octant(a,s)}};var gd=function(){};gd.prototype.getCoordinates=function(){},gd.prototype.size=function(){},gd.prototype.getCoordinate=function(t){},gd.prototype.isClosed=function(){},gd.prototype.setData=function(t){},gd.prototype.getData=function(){},gd.prototype.interfaces_=function(){return[]},gd.prototype.getClass=function(){return gd};var md=function(){};md.prototype.addIntersection=function(t,e){},md.prototype.interfaces_=function(){return[gd]},md.prototype.getClass=function(){return md};var yd=function(){this._nodeList=new fd(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};yd.prototype.getCoordinates=function(){return this._pts},yd.prototype.size=function(){return this._pts.length},yd.prototype.getCoordinate=function(t){return this._pts[t]},yd.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},yd.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},yd.prototype.setData=function(t){this._data=t},yd.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:pd.octant(t,e)},yd.prototype.getData=function(){return this._data},yd.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[3],o=new uu(n.getIntersection(i));this.addIntersection(o,r)}},yd.prototype.toString=function(){return Fu.toLineString(new ch(this._pts))},yd.prototype.getNodeList=function(){return this._nodeList},yd.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)},yd.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},yd.prototype.interfaces_=function(){return[md]},yd.prototype.getClass=function(){return yd},yd.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new cc;return yd.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();){var o=i.next();o.getNodeList().addSplitEdges(r)}};var vd=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new uu,this.p1=new uu;else if(1===arguments.length){var t=arguments[0];this.p0=new uu(t.p0),this.p1=new uu(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new uu(e,n),this.p1=new uu(r,i)}},bd={serialVersionUID:{configurable:!0}};vd.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},vd.prototype.orientationIndex=function(){if(arguments[0]instanceof vd){var t=arguments[0],e=Wu.orientationIndex(this.p0,this.p1,t.p0),n=Wu.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof uu){var r=arguments[0];return Wu.orientationIndex(this.p0,this.p1,r)}},vd.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},vd.prototype.isVertical=function(){return this.p0.x===this.p1.x},vd.prototype.equals=function(t){if(!(t instanceof vd))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},vd.prototype.intersection=function(t){var e=new qu;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},vd.prototype.project=function(){if(arguments[0]instanceof uu){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new uu(t);var e=this.projectionFactor(t),n=new uu;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof vd){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var a=this.project(r.p0);i<0&&(a=this.p0),i>1&&(a=this.p1);var s=this.project(r.p1);return o<0&&(s=this.p0),o>1&&(s=this.p1),new vd(a,s)}},vd.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},vd.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},vd.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},vd.prototype.distancePerpendicular=function(t){return Wu.distancePointLinePerpendicular(t,this.p0,this.p1)},vd.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},vd.prototype.midPoint=function(){return vd.midPoint(this.p0,this.p1)},vd.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?ru.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},vd.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=ru.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var a=this.closestPoint(t.p1);(i=a.distance(t.p1))<r&&(r=i,n[0]=a,n[1]=t.p1);var s=t.closestPoint(this.p0);(i=s.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=s);var l=t.closestPoint(this.p1);return(i=l.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=l),n},vd.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},vd.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},vd.prototype.getLength=function(){return this.p0.distance(this.p1)},vd.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},vd.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},vd.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},vd.prototype.lineIntersection=function(t){try{return ku.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof Au))throw t}return null},vd.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},vd.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(i*i+o*o),s=0,l=0;if(0!==e){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");s=e*i/a,l=e*o/a}return new uu(n-l,r+s)},vd.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},vd.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||ru.isNaN(e))&&(e=1),e},vd.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},vd.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},vd.prototype.distance=function(){if(arguments[0]instanceof vd){var t=arguments[0];return Wu.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof uu){var e=arguments[0];return Wu.distancePointLine(e,this.p0,this.p1)}},vd.prototype.pointAlong=function(t){var e=new uu;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},vd.prototype.hashCode=function(){var t=ru.doubleToLongBits(this.p0.x);t^=31*ru.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=ru.doubleToLongBits(this.p1.x);return n^=31*ru.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},vd.prototype.interfaces_=function(){return[ou,lu]},vd.prototype.getClass=function(){return vd},vd.midPoint=function(t,e){return new uu((t.x+e.x)/2,(t.y+e.y)/2)},bd.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(vd,bd);var _d=function(){this.tempEnv1=new Iu,this.tempEnv2=new Iu,this._overlapSeg1=new vd,this._overlapSeg2=new vd};_d.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];t.getLineSegment(e,this._overlapSeg1),n.getLineSegment(r,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},_d.prototype.interfaces_=function(){return[]},_d.prototype.getClass=function(){return _d};var xd=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};xd.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},xd.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var a=Math.trunc((e+n)/2);e<a&&this.computeSelect(t,e,a,r),a<n&&this.computeSelect(t,a,n,r)},xd.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},xd.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},xd.prototype.setId=function(t){this._id=t},xd.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},xd.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new Iu(t,e)}return this._env},xd.prototype.getEndIndex=function(){return this._end},xd.prototype.getStartIndex=function(){return this._start},xd.prototype.getContext=function(){return this._context},xd.prototype.getId=function(){return this._id},xd.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var a=this._pts[t],s=this._pts[e],l=n._pts[r],u=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(l,u),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),h=Math.trunc((r+i)/2);t<c&&(r<h&&this.computeOverlapsInternal(t,c,n,r,h,o),h<i&&this.computeOverlapsInternal(t,c,n,h,i,o)),c<e&&(r<h&&this.computeOverlapsInternal(c,e,n,r,h,o),h<i&&this.computeOverlapsInternal(c,e,n,h,i,o))},xd.prototype.interfaces_=function(){return[]},xd.prototype.getClass=function(){return xd};var wd=function(){};wd.prototype.interfaces_=function(){return[]},wd.prototype.getClass=function(){return wd},wd.getChainStartIndices=function(t){var e=0,n=new cc;n.add(new bu(e));do{var r=wd.findChainEnd(t,e);n.add(new bu(r)),e=r}while(e<t.length-1);return wd.toIntArray(n)},wd.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=qh.quadrant(t[n],t[n+1]),i=e+1;i<t.length;){if(!t[i-1].equals2D(t[i])&&qh.quadrant(t[i-1],t[i])!==r)break;i++}return i-1},wd.getChains=function(){if(1===arguments.length){var t=arguments[0];return wd.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new cc,i=wd.getChainStartIndices(e),o=0;o<i.length-1;o++){var a=new xd(e,i[o],i[o+1],n);r.add(a)}return r}},wd.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Sd=function(){};Sd.prototype.computeNodes=function(t){},Sd.prototype.getNodedSubstrings=function(){},Sd.prototype.interfaces_=function(){return[]},Sd.prototype.getClass=function(){return Sd};var Ed=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};Ed.prototype.setSegmentIntersector=function(t){this._segInt=t},Ed.prototype.interfaces_=function(){return[Sd]},Ed.prototype.getClass=function(){return Ed};var Cd=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new cc,this._index=new ud,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return yd.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=this,n=wd.getChains(t.getCoordinates(),t).iterator();n.hasNext();){var r=n.next();r.setId(e._idCounter++),e._index.insert(r.getEnvelope(),r),e._monoChains.add(r)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=this,e=new Md(this._segInt),n=this._monoChains.iterator();n.hasNext();)for(var r=n.next(),i=t._index.query(r.getEnvelope()).iterator();i.hasNext();){var o=i.next();if(o.getId()>r.getId()&&(r.computeOverlaps(o,e),t._nOverlaps++),t._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return Md},Object.defineProperties(e,n),e}(Ed),Md=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3],o=e.getContext(),a=r.getContext();this._si.processIntersections(o,n,a,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(_d),Td=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(a),this.setMitreLimit(s)}},Ad={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Td.prototype.getEndCapStyle=function(){return this._endCapStyle},Td.prototype.isSingleSided=function(){return this._isSingleSided},Td.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Td.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Td.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Td.JOIN_ROUND&&(this._quadrantSegments=Td.DEFAULT_QUADRANT_SEGMENTS)},Td.prototype.getJoinStyle=function(){return this._joinStyle},Td.prototype.setJoinStyle=function(t){this._joinStyle=t},Td.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Td.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Td.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Td.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Td.prototype.getMitreLimit=function(){return this._mitreLimit},Td.prototype.setMitreLimit=function(t){this._mitreLimit=t},Td.prototype.setSingleSided=function(t){this._isSingleSided=t},Td.prototype.interfaces_=function(){return[]},Td.prototype.getClass=function(){return Td},Td.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Ad.CAP_ROUND.get=function(){return 1},Ad.CAP_FLAT.get=function(){return 2},Ad.CAP_SQUARE.get=function(){return 3},Ad.JOIN_ROUND.get=function(){return 1},Ad.JOIN_MITRE.get=function(){return 2},Ad.JOIN_BEVEL.get=function(){return 3},Ad.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Ad.DEFAULT_MITRE_LIMIT.get=function(){return 5},Ad.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Td,Ad);var Od=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Wu.COUNTERCLOCKWISE,this._inputLine=t||null},kd={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Od.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],a=this._inputLine[n];return!!this.isConcave(i,o,a)&&!!this.isShallow(i,o,a,r)&&this.isShallowSampled(i,o,t,n,r)},Od.prototype.deleteShallowConcavities=function(){for(var t=this,e=1,n=this.findNextNonDeletedIndex(e),r=this.findNextNonDeletedIndex(n),i=!1;r<this._inputLine.length;){var o=!1;t.isDeletable(e,n,r,t._distanceTol)&&(t._isDeleted[n]=Od.DELETE,o=!0,i=!0),e=o?r:n,n=t.findNextNonDeletedIndex(e),r=t.findNextNonDeletedIndex(n)}return i},Od.prototype.isShallowConcavity=function(t,e,n,r){return Wu.computeOrientation(t,e,n)===this._angleOrientation&&Wu.distancePointLine(e,t,n)<r},Od.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/Od.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=n;a<r;a+=o)if(!this.isShallow(t,e,this._inputLine[a],i))return!1;return!0},Od.prototype.isConcave=function(t,e,n){var r=Wu.computeOrientation(t,e,n)===this._angleOrientation;return r},Od.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=Wu.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Od.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Od.DELETE;)e++;return e},Od.prototype.isShallow=function(t,e,n,r){return Wu.distancePointLine(e,t,n)<r},Od.prototype.collapseLine=function(){for(var t=new dc,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Od.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Od.prototype.interfaces_=function(){return[]},Od.prototype.getClass=function(){return Od},Od.simplify=function(t,e){return new Od(t).simplify(e)},kd.INIT.get=function(){return 0},kd.DELETE.get=function(){return 1},kd.KEEP.get=function(){return 1},kd.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Od,kd);var Id=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new cc},Pd={COORDINATE_ARRAY_TYPE:{configurable:!0}};Id.prototype.getCoordinates=function(){return this._ptList.toArray(Id.COORDINATE_ARRAY_TYPE)},Id.prototype.setPrecisionModel=function(t){this._precisionModel=t},Id.prototype.addPt=function(t){var e=new uu(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Id.prototype.revere=function(){},Id.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},Id.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Id.prototype.toString=function(){return(new bh).createLineString(this.getCoordinates()).toString()},Id.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new uu(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Id.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Id.prototype.interfaces_=function(){return[]},Id.prototype.getClass=function(){return Id},Pd.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Id,Pd);var Ld=function(){},Nd={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Ld.prototype.interfaces_=function(){return[]},Ld.prototype.getClass=function(){return Ld},Ld.toDegrees=function(t){return 180*t/Math.PI},Ld.normalize=function(t){for(;t>Math.PI;)t-=Ld.PI_TIMES_2;for(;t<=-Math.PI;)t+=Ld.PI_TIMES_2;return t},Ld.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},Ld.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)>0},Ld.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},Ld.interiorAngle=function(t,e,n){var r=Ld.angle(e,t),i=Ld.angle(e,n);return Math.abs(i-r)},Ld.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Ld.PI_TIMES_2;t>=Ld.PI_TIMES_2&&(t=0)}else{for(;t>=Ld.PI_TIMES_2;)t-=Ld.PI_TIMES_2;t<0&&(t=0)}return t},Ld.angleBetween=function(t,e,n){var r=Ld.angle(e,t),i=Ld.angle(e,n);return Ld.diff(r,i)},Ld.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Ld.toRadians=function(t){return t*Math.PI/180},Ld.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?Ld.COUNTERCLOCKWISE:n<0?Ld.CLOCKWISE:Ld.NONE},Ld.angleBetweenOriented=function(t,e,n){var r=Ld.angle(e,t),i=Ld.angle(e,n)-r;return i<=-Math.PI?i+Ld.PI_TIMES_2:i>Math.PI?i-Ld.PI_TIMES_2:i},Nd.PI_TIMES_2.get=function(){return 2*Math.PI},Nd.PI_OVER_2.get=function(){return Math.PI/2},Nd.PI_OVER_4.get=function(){return Math.PI/4},Nd.COUNTERCLOCKWISE.get=function(){return Wu.COUNTERCLOCKWISE},Nd.CLOCKWISE.get=function(){return Wu.CLOCKWISE},Nd.NONE.get=function(){return Wu.COLLINEAR},Object.defineProperties(Ld,Nd);var Rd=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new vd,this._seg1=new vd,this._offset0=new vd,this._offset1=new vd,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new qu,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===Td.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},Dd={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Rd.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=Wu.computeOrientation(this._s0,this._s1,this._s2),r=n===Wu.CLOCKWISE&&this._side===Th.LEFT||n===Wu.COUNTERCLOCKWISE&&this._side===Th.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Rd.prototype.addLineEndCap=function(t,e){var n=new vd(t,e),r=new vd;this.computeOffsetSegment(n,Th.LEFT,this._distance,r);var i=new vd;this.computeOffsetSegment(n,Th.RIGHT,this._distance,i);var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o);switch(this._bufParams.getEndCapStyle()){case Td.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,s+Math.PI/2,s-Math.PI/2,Wu.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case Td.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case Td.CAP_SQUARE:var l=new uu;l.x=Math.abs(this._distance)*Math.cos(s),l.y=Math.abs(this._distance)*Math.sin(s);var u=new uu(r.p1.x+l.x,r.p1.y+l.y),c=new uu(i.p1.x+l.x,i.p1.y+l.y);this._segList.addPt(u),this._segList.addPt(c)}},Rd.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Rd.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=ku.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof Au))throw t;o=new uu(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},Rd.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o),l=n.x-t.x,u=n.y-t.y,c=Math.atan2(u,l);r===Wu.CLOCKWISE?s<=c&&(s+=2*Math.PI):s>=c&&(s-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,s,c,r,i),this._segList.addPt(n)},Rd.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Rd.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Td.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Td.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Rd.prototype.createSquare=function(t){this._segList.addPt(new uu(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new uu(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new uu(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new uu(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Rd.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Rd.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Rd.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Rd.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Rd.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=Ld.angle(i,this._seg0.p0),a=Ld.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,s=Ld.normalize(o+a),l=Ld.normalize(s+Math.PI),u=r*n,c=n-u*Math.abs(Math.sin(a)),h=i.x+u*Math.cos(l),d=i.y+u*Math.sin(l),f=new uu(h,d),p=new vd(i,f),g=p.pointAlongOffset(1,c),m=p.pointAlongOffset(1,-c);this._side===Th.LEFT?(this._segList.addPt(g),this._segList.addPt(m)):(this._segList.addPt(m),this._segList.addPt(g))},Rd.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===Th.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,s=Math.sqrt(o*o+a*a),l=i*n*o/s,u=i*n*a/s;r.p0.x=t.p0.x-u,r.p0.y=t.p0.y+l,r.p1.x=t.p1.x-u,r.p1.y=t.p1.y+l},Rd.prototype.addFilletArc=function(t,e,n,r,i){var o=r===Wu.CLOCKWISE?-1:1,a=Math.abs(e-n),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var l=a/s,u=0,c=new uu;u<a;){var h=e+o*u;c.x=t.x+i*Math.cos(h),c.y=t.y+i*Math.sin(h),this._segList.addPt(c),u+=l}},Rd.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Rd.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new uu((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new uu((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Rd.prototype.createCircle=function(t){var e=new uu(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Rd.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Rd.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Id,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Rd.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Rd.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Td.JOIN_BEVEL||this._bufParams.getJoinStyle()===Td.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,Wu.CLOCKWISE,this._distance))},Rd.prototype.closeRing=function(){this._segList.closeRing()},Rd.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Rd.prototype.interfaces_=function(){return[]},Rd.prototype.getClass=function(){return Rd},Dd.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Dd.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Dd.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Dd.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Rd,Dd);var Fd=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};Fd.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&fc.reverse(o),o},Fd.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=Od.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Th.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{n.addSegments(t,!1);var s=Od.simplify(t,r),l=s.length-1;n.initSideSegments(s[0],s[1],Th.LEFT),n.addFirstSegment();for(var u=2;u<=l;u++)n.addNextSegment(s[u],!0)}n.addLastSegment(),n.closeRing()},Fd.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===Th.RIGHT&&(r=-r);var i=Od.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var a=1;a<=o;a++){var s=1!==a;n.addNextSegment(i[a],s)}n.closeRing()},Fd.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=Od.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],Th.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var a=Od.simplify(t,-n),s=a.length-1;e.initSideSegments(a[s],a[s-1],Th.LEFT);for(var l=s-2;l>=0;l--)e.addNextSegment(a[l],!0);e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing()},Fd.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Td.CAP_ROUND:e.createCircle(t);break;case Td.CAP_SQUARE:e.createSquare(t)}},Fd.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},Fd.prototype.getBufferParameters=function(){return this._bufParams},Fd.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Fd.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Fd.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},Fd.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=Od.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Th.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{var s=Od.simplify(t,r),l=s.length-1;n.initSideSegments(s[0],s[1],Th.LEFT),n.addFirstSegment();for(var u=2;u<=l;u++)n.addNextSegment(s[u],!0)}n.addLastSegment()},Fd.prototype.getSegGen=function(t){return new Rd(this._precisionModel,this._bufParams,t)},Fd.prototype.interfaces_=function(){return[]},Fd.prototype.getClass=function(){return Fd},Fd.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new uu(t[n]);return e};var jd=function(){this._subgraphs=null,this._seg=new vd,this._cga=new Wu;var t=arguments[0];this._subgraphs=t},Bd={DepthSegment:{configurable:!0}};jd.prototype.findStabbedSegments=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=new cc,r=this._subgraphs.iterator();r.hasNext();){var i=r.next(),o=i.getEnvelope();e.y<o.getMinY()||e.y>o.getMaxY()||t.findStabbedSegments(e,i.getDirectedEdges(),n)}return n}if(3===arguments.length)if(gu(arguments[2],lc)&&arguments[0]instanceof uu&&arguments[1]instanceof Wh)for(var a=arguments[0],s=arguments[1],l=arguments[2],u=s.getEdge().getCoordinates(),c=0;c<u.length-1;c++){t._seg.p0=u[c],t._seg.p1=u[c+1],t._seg.p0.y>t._seg.p1.y&&t._seg.reverse();var h=Math.max(t._seg.p0.x,t._seg.p1.x);if(!(h<a.x)&&!(t._seg.isHorizontal()||a.y<t._seg.p0.y||a.y>t._seg.p1.y||Wu.computeOrientation(t._seg.p0,t._seg.p1,a)===Wu.RIGHT)){var d=s.getDepth(Th.LEFT);t._seg.p0.equals(u[c])||(d=s.getDepth(Th.RIGHT));var f=new zd(t._seg,d);l.add(f)}}else if(gu(arguments[2],lc)&&arguments[0]instanceof uu&&gu(arguments[1],lc))for(var p=arguments[0],g=arguments[1],m=arguments[2],y=g.iterator();y.hasNext();){var v=y.next();v.isForward()&&t.findStabbedSegments(p,v,m)}},jd.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:rd.min(e)._leftDepth},jd.prototype.interfaces_=function(){return[]},jd.prototype.getClass=function(){return jd},Bd.DepthSegment.get=function(){return zd},Object.defineProperties(jd,Bd);var zd=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new vd(t),this._leftDepth=e};zd.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!==(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},zd.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},zd.prototype.toString=function(){return this._upwardSeg.toString()},zd.prototype.interfaces_=function(){return[ou]},zd.prototype.getClass=function(){return zd};var Ud=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};Ud.prototype.area=function(){return Ud.area(this.p0,this.p1,this.p2)},Ud.prototype.signedArea=function(){return Ud.signedArea(this.p0,this.p1,this.p2)},Ud.prototype.interpolateZ=function(t){if(null===t)throw new nu("Supplied point is null.");return Ud.interpolateZ(t,this.p0,this.p1,this.p2)},Ud.prototype.longestSideLength=function(){return Ud.longestSideLength(this.p0,this.p1,this.p2)},Ud.prototype.isAcute=function(){return Ud.isAcute(this.p0,this.p1,this.p2)},Ud.prototype.circumcentre=function(){return Ud.circumcentre(this.p0,this.p1,this.p2)},Ud.prototype.area3D=function(){return Ud.area3D(this.p0,this.p1,this.p2)},Ud.prototype.centroid=function(){return Ud.centroid(this.p0,this.p1,this.p2)},Ud.prototype.inCentre=function(){return Ud.inCentre(this.p0,this.p1,this.p2)},Ud.prototype.interfaces_=function(){return[]},Ud.prototype.getClass=function(){return Ud},Ud.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},Ud.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},Ud.det=function(t,e,n,r){return t*r-e*n},Ud.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,a=n.x-i,s=r.x-i,l=n.y-o,u=r.y-o,c=a*u-s*l,h=t.x-i,d=t.y-o,f=(u*h-s*d)/c,p=(-l*h+a*d)/c;return e.z+f*(n.z-e.z)+p*(r.z-e.z)},Ud.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),a=r;return i>a&&(a=i),o>a&&(a=o),a},Ud.isAcute=function(t,e,n){return!!Ld.isAcute(t,e,n)&&!!Ld.isAcute(e,n,t)&&!!Ld.isAcute(n,t,e)},Ud.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,a=t.y-i,s=e.x-r,l=e.y-i,u=2*Ud.det(o,a,s,l),c=Ud.det(a,o*o+a*a,l,s*s+l*l),h=Ud.det(o,o*o+a*a,s,s*s+l*l);return new uu(r-c/u,i+h/u)},Ud.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new ku(t.x+n/2,t.y+r/2,1),o=new ku(t.x-r+n/2,t.y+n+r/2,1);return new ku(i,o)},Ud.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,a=n.y-t.y;return new uu(t.x+i*o,t.y+i*a)},Ud.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,a=n.x-t.x,s=n.y-t.y,l=n.z-t.z,u=i*l-o*s,c=o*a-r*l,h=r*s-i*a,d=u*u+c*c+h*h,f=Math.sqrt(d)/2;return f},Ud.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new uu(r,i)},Ud.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),a=r+i+o,s=(r*t.x+i*e.x+o*n.x)/a,l=(r*t.y+i*e.y+o*n.y)/a;return new uu(s,l)};var Gd=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new cc;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};Gd.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,fu.EXTERIOR,fu.INTERIOR)},Gd.prototype.addPolygon=function(t){var e=this,n=this._distance,r=Th.LEFT;this._distance<0&&(n=-this._distance,r=Th.RIGHT);var i=t.getExteriorRing(),o=fc.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance))return null;if(this._distance<=0&&o.length<3)return null;this.addPolygonRing(o,n,r,fu.EXTERIOR,fu.INTERIOR);for(var a=0;a<t.getNumInteriorRing();a++){var s=t.getInteriorRingN(a),l=fc.removeRepeatedPoints(s.getCoordinates());e._distance>0&&e.isErodedCompletely(s,-e._distance)||e.addPolygonRing(l,n,Th.opposite(r),fu.INTERIOR,fu.EXTERIOR)}},Gd.prototype.isTriangleErodedCompletely=function(t,e){var n=new Ud(t[0],t[1],t[2]),r=n.inCentre();return Wu.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},Gd.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=fc.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,fu.EXTERIOR,fu.INTERIOR)},Gd.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new yd(t,new Dh(0,fu.BOUNDARY,e,n));this._curveList.add(r)},Gd.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Gd.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<rh.MINIMUM_VALID_SIZE)return null;var o=r,a=i;t.length>=rh.MINIMUM_VALID_SIZE&&Wu.isCCW(t)&&(o=i,a=r,n=Th.opposite(n));var s=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(s,o,a)},Gd.prototype.add=function(t){if(t.isEmpty())return null;t instanceof eh?this.addPolygon(t):t instanceof Kc?this.addLineString(t):t instanceof $c?this.addPoint(t):(t instanceof nh||t instanceof Bc||t instanceof ih||t instanceof jc)&&this.addCollection(t)},Gd.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},Gd.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},Gd.prototype.interfaces_=function(){return[]},Gd.prototype.getClass=function(){return Gd};var qd=function(){};qd.prototype.locate=function(t){},qd.prototype.interfaces_=function(){return[]},qd.prototype.getClass=function(){return qd};var Vd=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Vd.prototype.next=function(){if(this._atStart)return this._atStart=!1,Vd.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new uc;var t=this._parent.getGeometryN(this._index++);return t instanceof jc?(this._subcollectionIterator=new Vd(t),this._subcollectionIterator.next()):t},Vd.prototype.remove=function(){throw new Error(this.getClass().getName())},Vd.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Vd.prototype.interfaces_=function(){return[sc]},Vd.prototype.getClass=function(){return Vd},Vd.isAtomic=function(t){return!(t instanceof jc)};var Hd=function(){this._geom=null;var t=arguments[0];this._geom=t};Hd.prototype.locate=function(t){return Hd.locate(t,this._geom)},Hd.prototype.interfaces_=function(){return[qd]},Hd.prototype.getClass=function(){return Hd},Hd.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&Wu.isPointInRing(t,e.getCoordinates())},Hd.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!Hd.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(Hd.isPointInRing(t,i))return!1}return!0},Hd.containsPoint=function(t,e){if(e instanceof eh)return Hd.containsPointInPolygon(t,e);if(e instanceof jc)for(var n=new Vd(e);n.hasNext();){var r=n.next();if(r!==e&&Hd.containsPoint(t,r))return!0}return!1},Hd.locate=function(t,e){return e.isEmpty()?fu.EXTERIOR:Hd.containsPoint(t,e)?fu.INTERIOR:fu.EXTERIOR};var Wd=function(){this._edgeMap=new Ac,this._edgeList=null,this._ptInAreaLocation=[fu.NONE,fu.NONE]};Wd.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},Wd.prototype.propagateSideLabels=function(t){for(var e=fu.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,Th.LEFT)!==fu.NONE&&(e=r.getLocation(t,Th.LEFT))}if(e===fu.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(t,Th.ON)===fu.NONE&&s.setLocation(t,Th.ON,i),s.isArea(t)){var l=s.getLocation(t,Th.LEFT),u=s.getLocation(t,Th.RIGHT);if(u!==fu.NONE){if(u!==i)throw new Ph("side location conflict",a.getCoordinate());l===fu.NONE&&zu.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),i=l}else zu.isTrue(s.getLocation(t,Th.LEFT)===fu.NONE,"found single null side"),s.setLocation(t,Th.RIGHT,i),s.setLocation(t,Th.LEFT,i)}}},Wd.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},Wd.prototype.print=function(t){Ou.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},Wd.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Wd.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,Th.LEFT);zu.isTrue(r!==fu.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var a=o.next().getLabel();zu.isTrue(a.isArea(t),"Found non-area edge");var s=a.getLocation(t,Th.LEFT),l=a.getLocation(t,Th.RIGHT);if(s===l)return!1;if(l!==i)return!1;i=s}return!0},Wd.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},Wd.prototype.iterator=function(){return this.getEdges().iterator()},Wd.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new cc(this._edgeMap.values())),this._edgeList},Wd.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===fu.NONE&&(this._ptInAreaLocation[t]=Hd.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},Wd.prototype.toString=function(){var t=new vu;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},Wd.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},Wd.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===fu.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel(),l=0;l<2;l++)if(s.isAnyNull(l)){var u=fu.NONE;if(e[l])u=fu.EXTERIOR;else{var c=a.getCoordinate();u=this.getLocation(l,c,t)}s.setAllLocationsIfNull(l,u)}},Wd.prototype.getDegree=function(){return this._edgeMap.size()},Wd.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},Wd.prototype.interfaces_=function(){return[]},Wd.prototype.getClass=function(){return Wd};var Yd=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){var t=this;this.getResultAreaEdges();for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=0;i<this._resultAreaEdgeList.size();i++){var o=t._resultAreaEdgeList.get(i),a=o.getSym();if(o.getLabel().isArea())switch(null===e&&o.isInResult()&&(e=o),r){case t._SCANNING_FOR_INCOMING:if(!a.isInResult())continue;n=a,r=t._LINKING_TO_OUTGOING;break;case t._LINKING_TO_OUTGOING:if(!o.isInResult())continue;n.setNext(o),r=t._SCANNING_FOR_INCOMING}}if(r===this._LINKING_TO_OUTGOING){if(null===e)throw new Ph("no outgoing dirEdge found",this.getCoordinate());zu.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),n.setNext(e)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return qh.isNorthern(i)&&qh.isNorthern(o)?n:qh.isNorthern(i)||qh.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(zu.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){Ou.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new cc;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=this.findIndex(e),r=e.getDepth(Th.LEFT),i=e.getDepth(Th.RIGHT),o=this.computeDepths(n+1,this._edgeList.size(),r),a=this.computeDepths(0,n,o);if(a!==i)throw new Ph("depth mismatch at "+e.getCoordinate())}else if(3===arguments.length){for(var s=arguments[0],l=arguments[1],u=arguments[2],c=u,h=s;h<l;h++){var d=t._edgeList.get(h);d.setEdgeDepths(Th.RIGHT,c),c=d.getDepth(Th.LEFT)}return c}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=this,n=null,r=null,i=this._SCANNING_FOR_INCOMING,o=this._resultAreaEdgeList.size()-1;o>=0;o--){var a=e._resultAreaEdgeList.get(o),s=a.getSym();switch(null===n&&a.getEdgeRing()===t&&(n=a),i){case e._SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue;r=s,i=e._LINKING_TO_OUTGOING;break;case e._LINKING_TO_OUTGOING:if(a.getEdgeRing()!==t)continue;r.setNextMin(a),i=e._SCANNING_FOR_INCOMING}}i===this._LINKING_TO_OUTGOING&&(zu.isTrue(null!==n,"found null for first outgoing dirEdge"),zu.isTrue(n.getEdgeRing()===t,"unable to link last incoming dirEdge"),r.setNextMin(n))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();){var n=e.next();n.isInResult()&&t++}return t}if(1===arguments.length){for(var r=arguments[0],i=0,o=this.iterator();o.hasNext();){var a=o.next();a.getEdgeRing()===r&&i++}return i}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=fu.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=fu.INTERIOR;break}if(r.isInResult()){t=fu.EXTERIOR;break}}}if(t===fu.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(i===fu.INTERIOR):(a.isInResult()&&(i=fu.EXTERIOR),s.isInResult()&&(i=fu.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Dh(fu.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==fu.INTERIOR&&o!==fu.BOUNDARY||this._label.setLocation(i,fu.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Wd),Xd=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new Uh(t,new Yd)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Yh),Jd=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Jd.prototype.compareTo=function(t){var e=t;return Jd.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Jd.prototype.interfaces_=function(){return[ou]},Jd.prototype.getClass=function(){return Jd},Jd.orientation=function(t){return 1===fc.increasingDirection(t)},Jd.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,a=e?t.length:-1,s=r?n.length:-1,l=e?0:t.length-1,u=r?0:n.length-1;;){var c=t[l].compareTo(n[u]);if(0!==c)return c;var h=(l+=i)===a,d=(u+=o)===s;if(h&&!d)return-1;if(!h&&d)return 1;if(h&&d)return 0}};var Zd=function(){this._edges=new cc,this._ocaMap=new Ac};Zd.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},Zd.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Zd.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Zd.prototype.iterator=function(){return this._edges.iterator()},Zd.prototype.getEdges=function(){return this._edges},Zd.prototype.get=function(t){return this._edges.get(t)},Zd.prototype.findEqualEdge=function(t){var e=new Jd(t.getCoordinates());return this._ocaMap.get(e)},Zd.prototype.add=function(t){this._edges.add(t);var e=new Jd(t.getCoordinates());this._ocaMap.put(e,t)},Zd.prototype.interfaces_=function(){return[]},Zd.prototype.getClass=function(){return Zd};var Kd=function(){};Kd.prototype.processIntersections=function(t,e,n,r){},Kd.prototype.isDone=function(){},Kd.prototype.interfaces_=function(){return[]},Kd.prototype.getClass=function(){return Kd};var Qd=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Qd.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Qd.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Qd.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Qd.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Qd.prototype.getLineIntersector=function(){return this._li},Qd.prototype.hasProperIntersection=function(){return this._hasProper},Qd.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Qd.prototype.hasIntersection=function(){return this._hasIntersection},Qd.prototype.isDone=function(){return!1},Qd.prototype.hasInteriorIntersection=function(){return this._hasInterior},Qd.prototype.interfaces_=function(){return[Kd]},Qd.prototype.getClass=function(){return Qd},Qd.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var $d=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new uu(t),this.segmentIndex=e,this.dist=n};$d.prototype.getSegmentIndex=function(){return this.segmentIndex},$d.prototype.getCoordinate=function(){return this.coord},$d.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},$d.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},$d.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},$d.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},$d.prototype.getDistance=function(){return this.dist},$d.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},$d.prototype.interfaces_=function(){return[ou]},$d.prototype.getClass=function(){return $d};var tf=function(){this._nodeMap=new Ac,this.edge=null;var t=arguments[0];this.edge=t};tf.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},tf.prototype.iterator=function(){return this._nodeMap.values().iterator()},tf.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},tf.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},tf.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new uu(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this.edge.pts[s];return i&&(o[a]=e.coord),new af(o,new Dh(this.edge._label))},tf.prototype.add=function(t,e,n){var r=new $d(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},tf.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},tf.prototype.interfaces_=function(){return[]},tf.prototype.getClass=function(){return tf};var ef=function(){};ef.prototype.getChainStartIndices=function(t){var e=0,n=new cc;n.add(new bu(e));do{var r=this.findChainEnd(t,e);n.add(new bu(r)),e=r}while(e<t.length-1);return ef.toIntArray(n)},ef.prototype.findChainEnd=function(t,e){for(var n=qh.quadrant(t[e],t[e+1]),r=e+1;r<t.length;){if(qh.quadrant(t[r-1],t[r])!==n)break;r++}return r-1},ef.prototype.interfaces_=function(){return[]},ef.prototype.getClass=function(){return ef},ef.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var nf=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Iu,this.env2=new Iu;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new ef;this.startIndex=e.getChainStartIndices(this.pts)};nf.prototype.getCoordinates=function(){return this.pts},nf.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},nf.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},nf.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],l=arguments[4],u=arguments[5],c=this.pts[i],h=this.pts[o],d=a.pts[s],f=a.pts[l];if(o-i==1&&l-s==1)return u.addIntersections(this.e,i,a.e,s),null;if(this.env1.init(c,h),this.env2.init(d,f),!this.env1.intersects(this.env2))return null;var p=Math.trunc((i+o)/2),g=Math.trunc((s+l)/2);i<p&&(s<g&&this.computeIntersectsForChain(i,p,a,s,g,u),g<l&&this.computeIntersectsForChain(i,p,a,g,l,u)),p<o&&(s<g&&this.computeIntersectsForChain(p,o,a,s,g,u),g<l&&this.computeIntersectsForChain(p,o,a,g,l,u))}},nf.prototype.getStartIndexes=function(){return this.startIndex},nf.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},nf.prototype.interfaces_=function(){return[]},nf.prototype.getClass=function(){return nf};var rf=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},of={NULL_VALUE:{configurable:!0}};rf.prototype.getDepth=function(t,e){return this._depth[t][e]},rf.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},rf.prototype.isNull=function(){var t=this;if(0===arguments.length){for(var e=0;e<2;e++)for(var n=0;n<3;n++)if(t._depth[e][n]!==rf.NULL_VALUE)return!1;return!0}if(1===arguments.length){var r=arguments[0];return this._depth[r][1]===rf.NULL_VALUE}if(2===arguments.length){var i=arguments[0],o=arguments[1];return this._depth[i][o]===rf.NULL_VALUE}},rf.prototype.normalize=function(){for(var t=this,e=0;e<2;e++)if(!t.isNull(e)){var n=t._depth[e][1];t._depth[e][2]<n&&(n=t._depth[e][2]),n<0&&(n=0);for(var r=1;r<3;r++){var i=0;t._depth[e][r]>n&&(i=1),t._depth[e][r]=i}}},rf.prototype.getDelta=function(t){return this._depth[t][Th.RIGHT]-this._depth[t][Th.LEFT]},rf.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?fu.EXTERIOR:fu.INTERIOR},rf.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},rf.prototype.add=function(){var t=this;if(1===arguments.length)for(var e=arguments[0],n=0;n<2;n++)for(var r=1;r<3;r++){var i=e.getLocation(n,r);i!==fu.EXTERIOR&&i!==fu.INTERIOR||(t.isNull(n,r)?t._depth[n][r]=rf.depthAtLocation(i):t._depth[n][r]+=rf.depthAtLocation(i))}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];s===fu.INTERIOR&&this._depth[o][a]++}},rf.prototype.interfaces_=function(){return[]},rf.prototype.getClass=function(){return rf},rf.depthAtLocation=function(t){return t===fu.EXTERIOR?0:t===fu.INTERIOR?1:rf.NULL_VALUE},of.NULL_VALUE.get=function(){return-1},Object.defineProperties(rf,of);var af=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new tf(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new rf,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Dh.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,a=0;a<this.pts.length;a++)if(this.pts[a].equals2D(n.pts[a])||(r=!1),this.pts[a].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new nf(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new Iu;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new uu(t.getIntersection(r)),o=e,a=t.getEdgeDistance(n,r),s=o+1;if(s<this.pts.length){var l=this.pts[s];i.equals2D(l)&&(o=s,a=0)}this.eiList.add(i,o,a)},e.prototype.toString=function(){var t=new vu;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Th.ON),e.getLocation(1,Th.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Th.LEFT),e.getLocation(1,Th.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Th.RIGHT),e.getLocation(1,Th.RIGHT),2))},e}(zh),sf=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Zd,this._bufParams=t||null};sf.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},sf.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Dh(t.getLabel())).flip(),n.merge(r);var i=sf.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(sf.depthDelta(t.getLabel()))},sf.prototype.buildSubgraphs=function(t,e){for(var n=new cc,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),a=new jd(n).getDepth(o);i.computeDepth(a),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},sf.prototype.createSubgraphs=function(t){for(var e=new cc,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Nh;i.create(r),e.add(i)}}return rd.sort(e,rd.reverseOrder()),e},sf.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},sf.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new Cd,n=new qu;return n.setPrecisionModel(t),e.setSegmentIntersector(new Qd(n)),e},sf.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new Fd(n,this._bufParams),i=new Gd(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new Xh(new Xd),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new Jh(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)},sf.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=i.getData(),s=new af(i.getCoordinates(),new Dh(a));this.insertUniqueEdge(s)}}},sf.prototype.setNoder=function(t){this._workingNoder=t},sf.prototype.interfaces_=function(){return[]},sf.prototype.getClass=function(){return sf},sf.depthDelta=function(t){var e=t.getLocation(0,Th.LEFT),n=t.getLocation(0,Th.RIGHT);return e===fu.INTERIOR&&n===fu.EXTERIOR?1:e===fu.EXTERIOR&&n===fu.INTERIOR?-1:0},sf.convertSegStrings=function(t){for(var e=new bh,n=new cc;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var lf=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};lf.prototype.rescale=function(){var t=this;if(gu(arguments[0],oc))for(var e=arguments[0],n=e.iterator();n.hasNext();){var r=n.next();t.rescale(r.getCoordinates())}else if(arguments[0]instanceof Array){for(var i=arguments[0],o=0;o<i.length;o++)i[o].x=i[o].x/t._scaleFactor+t._offsetX,i[o].y=i[o].y/t._scaleFactor+t._offsetY;2===i.length&&i[0].equals2D(i[1])&&Ou.out.println(i)}},lf.prototype.scale=function(){var t=this;if(gu(arguments[0],oc)){for(var e=arguments[0],n=new cc,r=e.iterator();r.hasNext();){var i=r.next();n.add(new yd(t.scale(i.getCoordinates()),i.getData()))}return n}if(arguments[0]instanceof Array){for(var o=arguments[0],a=new Array(o.length).fill(null),s=0;s<o.length;s++)a[s]=new uu(Math.round((o[s].x-t._offsetX)*t._scaleFactor),Math.round((o[s].y-t._offsetY)*t._scaleFactor),o[s].z);var l=fc.removeRepeatedPoints(a);return l}},lf.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},lf.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},lf.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},lf.prototype.interfaces_=function(){return[Sd]},lf.prototype.getClass=function(){return lf};var uf=function(){this._li=new qu,this._segStrings=null;var t=arguments[0];this._segStrings=t},cf={fact:{configurable:!0}};uf.prototype.checkEndPtVertexIntersections=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next(),r=n.getCoordinates();t.checkEndPtVertexIntersections(r[0],t._segStrings),t.checkEndPtVertexIntersections(r[r.length-1],t._segStrings)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],a=o.iterator();a.hasNext();)for(var s=a.next(),l=s.getCoordinates(),u=1;u<l.length-1;u++)if(l[u].equals(i))throw new ju("found endpt/interior pt intersection at index "+u+" :pt "+i)},uf.prototype.checkInteriorIntersections=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();)for(var n=e.next(),r=this._segStrings.iterator();r.hasNext();){var i=r.next();t.checkInteriorIntersections(n,i)}else if(2===arguments.length)for(var o=arguments[0],a=arguments[1],s=o.getCoordinates(),l=a.getCoordinates(),u=0;u<s.length-1;u++)for(var c=0;c<l.length-1;c++)t.checkInteriorIntersections(o,u,a,c);else if(4===arguments.length){var h=arguments[0],d=arguments[1],f=arguments[2],p=arguments[3];if(h===f&&d===p)return null;var g=h.getCoordinates()[d],m=h.getCoordinates()[d+1],y=f.getCoordinates()[p],v=f.getCoordinates()[p+1];if(this._li.computeIntersection(g,m,y,v),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,g,m)||this.hasInteriorIntersection(this._li,y,v)))throw new ju("found non-noded intersection at "+g+"-"+m+" and "+y+"-"+v)}},uf.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},uf.prototype.checkCollapses=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next();t.checkCollapses(n)}else if(1===arguments.length)for(var r=arguments[0],i=r.getCoordinates(),o=0;o<i.length-2;o++)t.checkCollapse(i[o],i[o+1],i[o+2])},uf.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},uf.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new ju("found non-noded collapse at "+uf.fact.createLineString([t,e,n]))},uf.prototype.interfaces_=function(){return[]},uf.prototype.getClass=function(){return uf},cf.fact.get=function(){return new bh},Object.defineProperties(uf,cf);var hf=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new nu("Scale factor must be non-zero");1!==e&&(this._pt=new uu(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new uu,this._p1Scaled=new uu),this.initCorners(this._pt)},df={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};hf.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(t,e);return zu.isTrue(!(a&&s),"Found bad envelope test"),s},hf.prototype.initCorners=function(t){var e=.5;this._minx=t.x-e,this._maxx=t.x+e,this._miny=t.y-e,this._maxy=t.y+e,this._corner[0]=new uu(this._maxx,this._maxy),this._corner[1]=new uu(this._minx,this._maxy),this._corner[2]=new uu(this._minx,this._miny),this._corner[3]=new uu(this._maxx,this._miny)},hf.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},hf.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},hf.prototype.getCoordinate=function(){return this._originalPt},hf.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},hf.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=hf.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Iu(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},hf.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},hf.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!n||!r)||!!t.equals(this._pt)||!!e.equals(this._pt))))},hf.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},hf.prototype.interfaces_=function(){return[]},hf.prototype.getClass=function(){return hf},df.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(hf,df);var ff=function(){this.tempEnv1=new Iu,this.selectedSegment=new vd};ff.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},ff.prototype.interfaces_=function(){return[]},ff.prototype.getClass=function(){return ff};var pf=function(){this._index=null;var t=arguments[0];this._index=t},gf={HotPixelSnapAction:{configurable:!0}};pf.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new mf(e,n,r);return this._index.query(i,{interfaces_:function(){return[$h]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},pf.prototype.interfaces_=function(){return[]},pf.prototype.getClass=function(){return pf},gf.HotPixelSnapAction.get=function(){return mf},Object.defineProperties(pf,gf);var mf=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[0],n=arguments[1],r=e.getContext();if(null!==this._parentEdge&&r===this._parentEdge&&n===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(r,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ff),yf=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new cc};yf.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var l=0;l<this._li.getIntersectionNum();l++)this._interiorIntersections.add(this._li.getIntersection(l));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},yf.prototype.isDone=function(){return!1},yf.prototype.getInteriorIntersections=function(){return this._interiorIntersections},yf.prototype.interfaces_=function(){return[Kd]},yf.prototype.getClass=function(){return yf};var vf=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new qu,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};vf.prototype.checkCorrectness=function(t){var e=yd.getNodedSubstrings(t),n=new uf(e);try{n.checkValid()}catch(t){if(!(t instanceof Tu))throw t;t.printStackTrace()}},vf.prototype.getNodedSubstrings=function(){return yd.getNodedSubstrings(this._nodedSegStrings)},vf.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},vf.prototype.findInteriorIntersections=function(t,e){var n=new yf(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},vf.prototype.computeVertexSnaps=function(){var t=this;if(gu(arguments[0],oc))for(var e=arguments[0],n=e.iterator();n.hasNext();){var r=n.next();t.computeVertexSnaps(r)}else if(arguments[0]instanceof yd)for(var i=arguments[0],o=i.getCoordinates(),a=0;a<o.length;a++){var s=new hf(o[a],t._scaleFactor,t._li),l=t._pointSnapper.snap(s,i,a);l&&i.addIntersection(o[a],a)}},vf.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new Cd,this._pointSnapper=new pf(this._noder.getIndex()),this.snapRound(t,this._li)},vf.prototype.computeIntersectionSnaps=function(t){for(var e=this,n=t.iterator();n.hasNext();){var r=n.next(),i=new hf(r,e._scaleFactor,e._li);e._pointSnapper.snap(i)}},vf.prototype.interfaces_=function(){return[Sd]},vf.prototype.getClass=function(){return vf};var bf=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Td,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},_f={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};bf.prototype.bufferFixedPrecision=function(t){var e=new lf(new vf(new gh(1)),t.getScale()),n=new sf(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},bf.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=bf.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Ph))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=bf.precisionScaleFactor(this._argGeom,this._distance,n),i=new gh(r);this.bufferFixedPrecision(i)}},bf.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===gh.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},bf.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},bf.prototype.bufferOriginalPrecision=function(){try{var t=new sf(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof ju))throw t;this._saveException=t}},bf.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},bf.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},bf.prototype.interfaces_=function(){return[]},bf.prototype.getClass=function(){return bf},bf.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new bf(t),r=n.getResultGeometry(e);return r}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Ju&&"number"==typeof arguments[1]){var i=arguments[0],o=arguments[1],a=arguments[2],s=new bf(i);s.setQuadrantSegments(a);var l=s.getResultGeometry(o);return l}if(arguments[2]instanceof Td&&arguments[0]instanceof Ju&&"number"==typeof arguments[1]){var u=arguments[0],c=arguments[1],h=arguments[2],d=new bf(u,h),f=d.getResultGeometry(c);return f}}else if(4===arguments.length){var p=arguments[0],g=arguments[1],m=arguments[2],y=arguments[3],v=new bf(p);v.setQuadrantSegments(m),v.setEndCapStyle(y);var b=v.getResultGeometry(g);return b}},bf.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=mu.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},_f.CAP_ROUND.get=function(){return Td.CAP_ROUND},_f.CAP_BUTT.get=function(){return Td.CAP_FLAT},_f.CAP_FLAT.get=function(){return Td.CAP_FLAT},_f.CAP_SQUARE.get=function(){return Td.CAP_SQUARE},_f.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(bf,_f);var xf=function(){this._pt=[new uu,new uu],this._distance=ru.NaN,this._isNull=!0};xf.prototype.getCoordinates=function(){return this._pt},xf.prototype.getCoordinate=function(t){return this._pt[t]},xf.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},xf.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},xf.prototype.getDistance=function(){return this._distance},xf.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},xf.prototype.interfaces_=function(){return[]},xf.prototype.getClass=function(){return xf};var wf=function(){};wf.prototype.interfaces_=function(){return[]},wf.prototype.getClass=function(){return wf},wf.computeDistance=function(){if(arguments[2]instanceof xf&&arguments[0]instanceof Kc&&arguments[1]instanceof uu)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=t.getCoordinates(),i=new vd,o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var a=i.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof xf&&arguments[0]instanceof eh&&arguments[1]instanceof uu){var s=arguments[0],l=arguments[1],u=arguments[2];wf.computeDistance(s.getExteriorRing(),l,u);for(var c=0;c<s.getNumInteriorRing();c++)wf.computeDistance(s.getInteriorRingN(c),l,u)}else if(arguments[2]instanceof xf&&arguments[0]instanceof Ju&&arguments[1]instanceof uu){var h=arguments[0],d=arguments[1],f=arguments[2];if(h instanceof Kc)wf.computeDistance(h,d,f);else if(h instanceof eh)wf.computeDistance(h,d,f);else if(h instanceof jc)for(var p=h,g=0;g<p.getNumGeometries();g++){var m=p.getGeometryN(g);wf.computeDistance(m,d,f)}else f.setMinimum(h.getCoordinate(),d)}else if(arguments[2]instanceof xf&&arguments[0]instanceof vd&&arguments[1]instanceof uu){var y=arguments[0],v=arguments[1],b=arguments[2],_=y.closestPoint(v);b.setMinimum(_,v)}};var Sf=function(t){this._maxPtDist=new xf,this._inputGeom=t||null},Ef={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Sf.prototype.computeMaxMidpointDistance=function(t){var e=new Mf(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Sf.prototype.computeMaxVertexDistance=function(t){var e=new Cf(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Sf.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},Sf.prototype.getDistancePoints=function(){return this._maxPtDist},Sf.prototype.interfaces_=function(){return[]},Sf.prototype.getClass=function(){return Sf},Ef.MaxPointDistanceFilter.get=function(){return Cf},Ef.MaxMidpointDistanceFilter.get=function(){return Mf},Object.defineProperties(Sf,Ef);var Cf=function(t){this._maxPtDist=new xf,this._minPtDist=new xf,this._geom=t||null};Cf.prototype.filter=function(t){this._minPtDist.initialize(),wf.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Cf.prototype.getMaxPointDistance=function(){return this._maxPtDist},Cf.prototype.interfaces_=function(){return[Qu]},Cf.prototype.getClass=function(){return Cf};var Mf=function(t){this._maxPtDist=new xf,this._minPtDist=new xf,this._geom=t||null};Mf.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new uu((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),wf.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Mf.prototype.isDone=function(){return!1},Mf.prototype.isGeometryChanged=function(){return!1},Mf.prototype.getMaxPointDistance=function(){return this._maxPtDist},Mf.prototype.interfaces_=function(){return[Fc]},Mf.prototype.getClass=function(){return Mf};var Tf=function(t){this._comps=t||null};Tf.prototype.filter=function(t){t instanceof eh&&this._comps.add(t)},Tf.prototype.interfaces_=function(){return[Dc]},Tf.prototype.getClass=function(){return Tf},Tf.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Tf.getPolygons(t,new cc)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof eh?n.add(e):e instanceof jc&&e.apply(new Tf(n)),n}};var Af=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};Af.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof rh){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Kc&&this._lines.add(t)},Af.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Af.prototype.interfaces_=function(){return[Xu]},Af.prototype.getClass=function(){return Af},Af.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Af.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Af.getLines(e,n))}},Af.getLines=function(){if(1===arguments.length){var t=arguments[0];return Af.getLines(t,!1)}if(2===arguments.length){if(gu(arguments[0],oc)&&gu(arguments[1],oc)){for(var e=arguments[0],n=arguments[1],r=e.iterator();r.hasNext();){var i=r.next();Af.getLines(i,n)}return n}if(arguments[0]instanceof Ju&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1],s=new cc;return o.apply(new Af(s,a)),s}if(arguments[0]instanceof Ju&&gu(arguments[1],oc)){var l=arguments[0],u=arguments[1];return l instanceof Kc?u.add(l):l.apply(new Af(u)),u}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&gu(arguments[0],oc)&&gu(arguments[1],oc)){for(var c=arguments[0],h=arguments[1],d=arguments[2],f=c.iterator();f.hasNext();){var p=f.next();Af.getLines(p,h,d)}return h}if("boolean"==typeof arguments[2]&&arguments[0]instanceof Ju&&gu(arguments[1],oc)){var g=arguments[0],m=arguments[1],y=arguments[2];return g.apply(new Af(m,y)),m}}};var Of=function(){if(this._boundaryRule=$u.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new nu("Rule must be non-null");this._boundaryRule=t}};Of.prototype.locateInternal=function(){var t=this;if(arguments[0]instanceof uu&&arguments[1]instanceof eh){var e=arguments[0],n=arguments[1];if(n.isEmpty())return fu.EXTERIOR;var r=n.getExteriorRing(),i=this.locateInPolygonRing(e,r);if(i===fu.EXTERIOR)return fu.EXTERIOR;if(i===fu.BOUNDARY)return fu.BOUNDARY;for(var o=0;o<n.getNumInteriorRing();o++){var a=n.getInteriorRingN(o),s=t.locateInPolygonRing(e,a);if(s===fu.INTERIOR)return fu.EXTERIOR;if(s===fu.BOUNDARY)return fu.BOUNDARY}return fu.INTERIOR}if(arguments[0]instanceof uu&&arguments[1]instanceof Kc){var l=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(l))return fu.EXTERIOR;var c=u.getCoordinates();return u.isClosed()||!l.equals(c[0])&&!l.equals(c[c.length-1])?Wu.isOnLine(l,c)?fu.INTERIOR:fu.EXTERIOR:fu.BOUNDARY}if(arguments[0]instanceof uu&&arguments[1]instanceof $c){var h=arguments[0],d=arguments[1],f=d.getCoordinate();return f.equals2D(h)?fu.INTERIOR:fu.EXTERIOR}},Of.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?Wu.locatePointInRing(t,e.getCoordinates()):fu.EXTERIOR},Of.prototype.intersects=function(t,e){return this.locate(t,e)!==fu.EXTERIOR},Of.prototype.updateLocationInfo=function(t){t===fu.INTERIOR&&(this._isIn=!0),t===fu.BOUNDARY&&this._numBoundaries++},Of.prototype.computeLocation=function(t,e){var n=this;if(e instanceof $c&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Kc)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof eh)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Bc)for(var r=e,i=0;i<r.getNumGeometries();i++){var o=r.getGeometryN(i);n.updateLocationInfo(n.locateInternal(t,o))}else if(e instanceof ih)for(var a=e,s=0;s<a.getNumGeometries();s++){var l=a.getGeometryN(s);n.updateLocationInfo(n.locateInternal(t,l))}else if(e instanceof jc)for(var u=new Vd(e);u.hasNext();){var c=u.next();c!==e&&n.computeLocation(t,c)}},Of.prototype.locate=function(t,e){return e.isEmpty()?fu.EXTERIOR:e instanceof Kc||e instanceof eh?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?fu.BOUNDARY:this._numBoundaries>0||this._isIn?fu.INTERIOR:fu.EXTERIOR)},Of.prototype.interfaces_=function(){return[]},Of.prototype.getClass=function(){return Of};var kf=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var e=arguments[0],n=arguments[1];t.call(this,e,t.INSIDE_AREA,n)}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._component=r,this._segIndex=i,this._pt=o}},If={INSIDE_AREA:{configurable:!0}};kf.prototype.isInsideArea=function(){return this._segIndex===kf.INSIDE_AREA},kf.prototype.getCoordinate=function(){return this._pt},kf.prototype.getGeometryComponent=function(){return this._component},kf.prototype.getSegmentIndex=function(){return this._segIndex},kf.prototype.interfaces_=function(){return[]},kf.prototype.getClass=function(){return kf},If.INSIDE_AREA.get=function(){return-1},Object.defineProperties(kf,If);var Pf=function(t){this._pts=t||null};Pf.prototype.filter=function(t){t instanceof $c&&this._pts.add(t)},Pf.prototype.interfaces_=function(){return[Dc]},Pf.prototype.getClass=function(){return Pf},Pf.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof $c?rd.singletonList(t):Pf.getPoints(t,new cc)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof $c?n.add(e):e instanceof jc&&e.apply(new Pf(n)),n}};var Lf=function(){this._locations=null;var t=arguments[0];this._locations=t};Lf.prototype.filter=function(t){(t instanceof $c||t instanceof Kc||t instanceof eh)&&this._locations.add(new kf(t,0,t.getCoordinate()))},Lf.prototype.interfaces_=function(){return[Dc]},Lf.prototype.getClass=function(){return Lf},Lf.getLocations=function(t){var e=new cc;return t.apply(new Lf(e)),e};var Nf=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Of,this._minDistanceLocation=null,this._minDistance=ru.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};Nf.prototype.computeContainmentDistance=function(){var t=this;if(0===arguments.length){var e=new Array(2).fill(null);if(this.computeContainmentDistance(0,e),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=1-n,o=Tf.getPolygons(this._geom[n]);if(o.size()>0){var a=Lf.getLocations(this._geom[i]);if(this.computeContainmentDistance(a,o,r),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[i]=r[0],this._minDistanceLocation[n]=r[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&gu(arguments[0],lc)&&gu(arguments[1],lc)){for(var s=arguments[0],l=arguments[1],u=arguments[2],c=0;c<s.size();c++)for(var h=s.get(c),d=0;d<l.size();d++)if(t.computeContainmentDistance(h,l.get(d),u),t._minDistance<=t._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof kf&&arguments[1]instanceof eh){var f=arguments[0],p=arguments[1],g=arguments[2],m=f.getCoordinate();if(fu.EXTERIOR!==this._ptLocator.locate(m,p))return this._minDistance=0,g[0]=f,g[1]=new kf(p,m),null}},Nf.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),a=0;a<e.size();a++){var s=e.get(a);if(r.computeMinDistance(o,s,n),r._minDistance<=r._terminateDistance)return null}},Nf.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Af.getLines(this._geom[0]),n=Af.getLines(this._geom[1]),r=Pf.getPoints(this._geom[0]),i=Pf.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},Nf.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Nf.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Nf.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Nf.prototype.computeMinDistance=function(){var t=this;if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Kc&&arguments[1]instanceof $c){var e=arguments[0],n=arguments[1],r=arguments[2];if(e.getEnvelopeInternal().distance(n.getEnvelopeInternal())>this._minDistance)return null;for(var i=e.getCoordinates(),o=n.getCoordinate(),a=0;a<i.length-1;a++){var s=Wu.distancePointLine(o,i[a],i[a+1]);if(s<t._minDistance){t._minDistance=s;var l=new vd(i[a],i[a+1]),u=l.closestPoint(o);r[0]=new kf(e,a,u),r[1]=new kf(n,0,o)}if(t._minDistance<=t._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Kc&&arguments[1]instanceof Kc){var c=arguments[0],h=arguments[1],d=arguments[2];if(c.getEnvelopeInternal().distance(h.getEnvelopeInternal())>this._minDistance)return null;for(var f=c.getCoordinates(),p=h.getCoordinates(),g=0;g<f.length-1;g++)for(var m=0;m<p.length-1;m++){var y=Wu.distanceLineLine(f[g],f[g+1],p[m],p[m+1]);if(y<t._minDistance){t._minDistance=y;var v=new vd(f[g],f[g+1]),b=new vd(p[m],p[m+1]),_=v.closestPoints(b);d[0]=new kf(c,g,_[0]),d[1]=new kf(h,m,_[1])}if(t._minDistance<=t._terminateDistance)return null}}},Nf.prototype.computeMinDistancePoints=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),a=0;a<e.size();a++){var s=e.get(a),l=o.getCoordinate().distance(s.getCoordinate());if(l<r._minDistance&&(r._minDistance=l,n[0]=new kf(o,0,o.getCoordinate()),n[1]=new kf(s,0,s.getCoordinate())),r._minDistance<=r._terminateDistance)return null}},Nf.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new nu("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Nf.prototype.computeMinDistanceLines=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),a=0;a<e.size();a++){var s=e.get(a);if(r.computeMinDistance(o,s,n),r._minDistance<=r._terminateDistance)return null}},Nf.prototype.interfaces_=function(){return[]},Nf.prototype.getClass=function(){return Nf},Nf.distance=function(t,e){return new Nf(t,e).distance()},Nf.isWithinDistance=function(t,e,n){return new Nf(t,e,n).distance()<=n},Nf.nearestPoints=function(t,e){return new Nf(t,e).nearestPoints()};var Rf=function(){this._pt=[new uu,new uu],this._distance=ru.NaN,this._isNull=!0};Rf.prototype.getCoordinates=function(){return this._pt},Rf.prototype.getCoordinate=function(t){return this._pt[t]},Rf.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Rf.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Rf.prototype.toString=function(){return Fu.toLineString(this._pt[0],this._pt[1])},Rf.prototype.getDistance=function(){return this._distance},Rf.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Rf.prototype.interfaces_=function(){return[]},Rf.prototype.getClass=function(){return Rf};var Df=function(){};Df.prototype.interfaces_=function(){return[]},Df.prototype.getClass=function(){return Df},Df.computeDistance=function(){if(arguments[2]instanceof Rf&&arguments[0]instanceof Kc&&arguments[1]instanceof uu)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new vd,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var a=r.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof Rf&&arguments[0]instanceof eh&&arguments[1]instanceof uu){var s=arguments[0],l=arguments[1],u=arguments[2];Df.computeDistance(s.getExteriorRing(),l,u);for(var c=0;c<s.getNumInteriorRing();c++)Df.computeDistance(s.getInteriorRingN(c),l,u)}else if(arguments[2]instanceof Rf&&arguments[0]instanceof Ju&&arguments[1]instanceof uu){var h=arguments[0],d=arguments[1],f=arguments[2];if(h instanceof Kc)Df.computeDistance(h,d,f);else if(h instanceof eh)Df.computeDistance(h,d,f);else if(h instanceof jc)for(var p=h,g=0;g<p.getNumGeometries();g++){var m=p.getGeometryN(g);Df.computeDistance(m,d,f)}else f.setMinimum(h.getCoordinate(),d)}else if(arguments[2]instanceof Rf&&arguments[0]instanceof vd&&arguments[1]instanceof uu){var y=arguments[0],v=arguments[1],b=arguments[2],_=y.closestPoint(v);b.setMinimum(_,v)}};var Ff=function(){this._g0=null,this._g1=null,this._ptDist=new Rf,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},jf={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Ff.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Ff.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new nu("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Ff.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Ff.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Ff.prototype.computeOrientedDistance=function(t,e,n){var r=new Bf(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new zf(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},Ff.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Ff.prototype.interfaces_=function(){return[]},Ff.prototype.getClass=function(){return Ff},Ff.distance=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Ff(t,e);return n.distance()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=new Ff(r,i);return a.setDensifyFraction(o),a.distance()}},jf.MaxPointDistanceFilter.get=function(){return Bf},jf.MaxDensifiedByFractionDistanceFilter.get=function(){return zf},Object.defineProperties(Ff,jf);var Bf=function(){this._maxPtDist=new Rf,this._minPtDist=new Rf,this._euclideanDist=new Df,this._geom=null;var t=arguments[0];this._geom=t};Bf.prototype.filter=function(t){this._minPtDist.initialize(),Df.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Bf.prototype.getMaxPointDistance=function(){return this._maxPtDist},Bf.prototype.interfaces_=function(){return[Qu]},Bf.prototype.getClass=function(){return Bf};var zf=function(){this._maxPtDist=new Rf,this._minPtDist=new Rf,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};zf.prototype.filter=function(t,e){var n=this;if(0===e)return null;for(var r=t.getCoordinate(e-1),i=t.getCoordinate(e),o=(i.x-r.x)/this._numSubSegs,a=(i.y-r.y)/this._numSubSegs,s=0;s<this._numSubSegs;s++){var l=r.x+s*o,u=r.y+s*a,c=new uu(l,u);n._minPtDist.initialize(),Df.computeDistance(n._geom,c,n._minPtDist),n._maxPtDist.setMaximum(n._minPtDist)}},zf.prototype.isDone=function(){return!1},zf.prototype.isGeometryChanged=function(){return!1},zf.prototype.getMaxPointDistance=function(){return this._maxPtDist},zf.prototype.interfaces_=function(){return[Fc]},zf.prototype.getClass=function(){return zf};var Uf=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},Gf={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Uf.prototype.checkMaximumDistance=function(t,e,n){var r=new Ff(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Fu.toLineString(i[0],i[1])+")"}},Uf.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Uf.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Uf.VERBOSE&&Ou.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Uf.prototype.checkNegativeValid=function(){if(!(this._input instanceof eh||this._input instanceof ih||this._input instanceof jc))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Uf.prototype.getErrorIndicator=function(){return this._errorIndicator},Uf.prototype.checkMinimumDistance=function(t,e,n){var r=new Nf(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Fu.toLineString(i[0],i[1])+" )"}},Uf.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Uf.prototype.getErrorLocation=function(){return this._errorLocation},Uf.prototype.getPolygonLines=function(t){for(var e=new cc,n=new Af(e),r=Tf.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},Uf.prototype.getErrorMessage=function(){return this._errMsg},Uf.prototype.interfaces_=function(){return[]},Uf.prototype.getClass=function(){return Uf},Gf.VERBOSE.get=function(){return!1},Gf.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Uf,Gf);var qf=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},Vf={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};qf.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},qf.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*qf.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new Iu(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new Iu(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},qf.prototype.checkDistance=function(){var t=new Uf(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},qf.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},qf.prototype.checkPolygonal=function(){this._result instanceof eh||this._result instanceof ih||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},qf.prototype.getErrorIndicator=function(){return this._errorIndicator},qf.prototype.getErrorLocation=function(){return this._errorLocation},qf.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},qf.prototype.report=function(t){if(!qf.VERBOSE)return null;Ou.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},qf.prototype.getErrorMessage=function(){return this._errorMsg},qf.prototype.interfaces_=function(){return[]},qf.prototype.getClass=function(){return qf},qf.isValidMsg=function(t,e,n){var r=new qf(t,e,n);return r.isValid()?null:r.getErrorMessage()},qf.isValid=function(t,e,n){return!!new qf(t,e,n).isValid()},Vf.VERBOSE.get=function(){return!1},Vf.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(qf,Vf);var Hf=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Hf.prototype.getCoordinates=function(){return this._pts},Hf.prototype.size=function(){return this._pts.length},Hf.prototype.getCoordinate=function(t){return this._pts[t]},Hf.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Hf.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:pd.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Hf.prototype.setData=function(t){this._data=t},Hf.prototype.getData=function(){return this._data},Hf.prototype.toString=function(){return Fu.toLineString(new ch(this._pts))},Hf.prototype.interfaces_=function(){return[gd]},Hf.prototype.getClass=function(){return Hf};var Wf=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new cc,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};Wf.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Wf.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},Wf.prototype.getIntersectionSegments=function(){return this._intSegments},Wf.prototype.count=function(){return this._intersectionCount},Wf.prototype.getIntersections=function(){return this._intersections},Wf.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Wf.prototype.setKeepIntersections=function(t){this._keepIntersections=t},Wf.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Wf.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},Wf.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Wf.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Wf.prototype.interfaces_=function(){return[Kd]},Wf.prototype.getClass=function(){return Wf},Wf.createAllIntersectionsFinder=function(t){var e=new Wf(t);return e.setFindAllIntersections(!0),e},Wf.createAnyIntersectionFinder=function(t){return new Wf(t)},Wf.createIntersectionCounter=function(t){var e=new Wf(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var Yf=function(){this._li=new qu,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};Yf.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Yf.prototype.getIntersections=function(){return this._segInt.getIntersections()},Yf.prototype.isValid=function(){return this.execute(),this._isValid},Yf.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Yf.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Wf(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new Cd;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Yf.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Ph(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Yf.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Fu.toLineString(t[0],t[1])+" and "+Fu.toLineString(t[2],t[3])},Yf.prototype.interfaces_=function(){return[]},Yf.prototype.getClass=function(){return Yf},Yf.computeIntersections=function(t){var e=new Yf(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Xf=function t(){this._nv=null;var e=arguments[0];this._nv=new Yf(t.toSegmentStrings(e))};Xf.prototype.checkValid=function(){this._nv.checkValid()},Xf.prototype.interfaces_=function(){return[]},Xf.prototype.getClass=function(){return Xf},Xf.toSegmentStrings=function(t){for(var e=new cc,n=t.iterator();n.hasNext();){var r=n.next();e.add(new Hf(r.getCoordinates(),r))}return e},Xf.checkValid=function(t){new Xf(t).checkValid()};var Jf=function(t){this._mapOp=t};Jf.prototype.map=function(t){for(var e=new cc,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(bh.toGeometryArray(e))},Jf.prototype.interfaces_=function(){return[]},Jf.prototype.getClass=function(){return Jf},Jf.map=function(t,e){return new Jf(e).map(t)};var Zf=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new cc,this._resultLineList=new cc;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};Zf.prototype.collectLines=function(t){for(var e=this,n=this._op.getGraph().getEdgeEnds().iterator();n.hasNext();){var r=n.next();e.collectLineEdge(r,t,e._lineEdgesList),e.collectBoundaryTouchEdge(r,t,e._lineEdgesList)}},Zf.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Zf.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Zf.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!kp.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},Zf.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},Zf.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Zf.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},Zf.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(zu.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(kp.isResultOfOp(r,e)&&e===kp.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Zf.prototype.interfaces_=function(){return[]},Zf.prototype.getClass=function(){return Zf};var Kf=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new cc;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Kf.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},Kf.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!n.isInResult()&&!n.isIncidentEdgeInResult()&&(0===n.getEdges().getDegree()||t===kp.INTERSECTION)){var r=n.getLabel();kp.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},Kf.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Kf.prototype.interfaces_=function(){return[]},Kf.prototype.getClass=function(){return Kf};var Qf=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Qf.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Qf.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof rh&&!r.isEmpty()||(n=!1);for(var i=new cc,o=0;o<t.getNumInteriorRing();o++){var a=this.transformLinearRing(t.getInteriorRingN(o),t);null===a||a.isEmpty()||(a instanceof rh||(n=!1),i.add(a))}if(n)return this._factory.createPolygon(r,i.toArray([]));var s=new cc;return null!==r&&s.add(r),s.addAll(i),this._factory.buildGeometry(s)},Qf.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Qf.prototype.getInputGeometry=function(){return this._inputGeom},Qf.prototype.transformMultiLineString=function(t,e){for(var n=new cc,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Qf.prototype.transformCoordinates=function(t,e){return this.copy(t)},Qf.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Qf.prototype.transformMultiPoint=function(t,e){for(var n=new cc,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Qf.prototype.transformMultiPolygon=function(t,e){for(var n=new cc,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Qf.prototype.copy=function(t){return t.copy()},Qf.prototype.transformGeometryCollection=function(t,e){for(var n=new cc,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(bh.toGeometryArray(n)):this._factory.buildGeometry(n)},Qf.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof $c)return this.transformPoint(t,null);if(t instanceof nh)return this.transformMultiPoint(t,null);if(t instanceof rh)return this.transformLinearRing(t,null);if(t instanceof Kc)return this.transformLineString(t,null);if(t instanceof Bc)return this.transformMultiLineString(t,null);if(t instanceof eh)return this.transformPolygon(t,null);if(t instanceof ih)return this.transformMultiPolygon(t,null);if(t instanceof jc)return this.transformGeometryCollection(t,null);throw new nu("Unknown Geometry subtype: "+t.getClass().getName())},Qf.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Qf.prototype.interfaces_=function(){return[]},Qf.prototype.getClass=function(){return Qf};var $f=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new vd,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Kc&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];t.call(this,e.getCoordinates(),n)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var r=arguments[0],i=arguments[1];this._srcPts=r,this._isClosed=t.isClosed(r),this._snapTolerance=i}};$f.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new uu(o)),0===r&&this._isClosed&&t.set(t.size()-1,new uu(o)))}},$f.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},$f.prototype.snapTo=function(t){var e=new dc(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},$f.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new uu(i),!1)}},$f.prototype.findSegmentIndexToSnap=function(t,e){for(var n=this,r=ru.MAX_VALUE,i=-1,o=0;o<e.size()-1;o++){if(n._seg.p0=e.get(o),n._seg.p1=e.get(o+1),n._seg.p0.equals2D(t)||n._seg.p1.equals2D(t)){if(n._allowSnappingToSourceVertices)continue;return-1}var a=n._seg.distance(t);a<n._snapTolerance&&a<r&&(r=a,i=o)}return i},$f.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},$f.prototype.interfaces_=function(){return[]},$f.prototype.getClass=function(){return $f},$f.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var tp=function(t){this._srcGeom=t||null},ep={SNAP_PRECISION_FACTOR:{configurable:!0}};tp.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new np(e,n).transform(this._srcGeom)},tp.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new np(t,n,!0).transform(this._srcGeom),i=r;return e&&gu(i,th)&&(i=r.buffer(0)),i},tp.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},tp.prototype.extractTargetCoordinates=function(t){for(var e=new Ic,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},tp.prototype.computeMinimumSegmentLength=function(t){for(var e=ru.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},tp.prototype.interfaces_=function(){return[]},tp.prototype.getClass=function(){return tp},tp.snap=function(t,e,n){var r=new Array(2).fill(null),i=new tp(t);r[0]=i.snapTo(e,n);var o=new tp(e);return r[1]=o.snapTo(r[0],n),r},tp.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=tp.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===gh.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(tp.computeOverlaySnapTolerance(i),tp.computeOverlaySnapTolerance(o))}},tp.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*tp.SNAP_PRECISION_FACTOR},tp.snapToSelf=function(t,e,n){return new tp(t).snapToSelf(e,n)},ep.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(tp,ep);var np=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new $f(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Qf),rp=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};rp.prototype.getCommon=function(){return ru.longBitsToDouble(this._commonBits)},rp.prototype.add=function(t){var e=ru.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=rp.signExpBits(this._commonBits),this._isFirst=!1,null):rp.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=rp.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=rp.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},rp.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=ru.longBitsToDouble(t),n=ru.toBinaryString(t),r="0000000000000000000000000000000000000000000000000000000000000000"+n,i=r.substring(r.length-64),o=i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+e+" ]";return o}},rp.prototype.interfaces_=function(){return[]},rp.prototype.getClass=function(){return rp},rp.getBit=function(t,e){return 0!=(t&1<<e)?1:0},rp.signExpBits=function(t){return t>>52},rp.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},rp.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(rp.getBit(t,r)!==rp.getBit(e,r))return n;n++}return 52};var ip=function(){this._commonCoord=null,this._ccFilter=new ap},op={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};ip.prototype.addCommonBits=function(t){var e=new sp(this._commonCoord);t.apply(e),t.geometryChanged()},ip.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new uu(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new sp(e);return t.apply(n),t.geometryChanged(),t},ip.prototype.getCommonCoordinate=function(){return this._commonCoord},ip.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},ip.prototype.interfaces_=function(){return[]},ip.prototype.getClass=function(){return ip},op.CommonCoordinateFilter.get=function(){return ap},op.Translater.get=function(){return sp},Object.defineProperties(ip,op);var ap=function(){this._commonBitsX=new rp,this._commonBitsY=new rp};ap.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},ap.prototype.getCommonCoordinate=function(){return new uu(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},ap.prototype.interfaces_=function(){return[Qu]},ap.prototype.getClass=function(){return ap};var sp=function(){this.trans=null;var t=arguments[0];this.trans=t};sp.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},sp.prototype.isDone=function(){return!1},sp.prototype.isGeometryChanged=function(){return!0},sp.prototype.interfaces_=function(){return[Fc]},sp.prototype.getClass=function(){return sp};var lp=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};lp.prototype.selfSnap=function(t){return new tp(t).snapTo(t,this._snapTolerance)},lp.prototype.removeCommonBits=function(t){this._cbr=new ip,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},lp.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},lp.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=kp.overlayOp(e[0],e[1],t);return this.prepareResult(n)},lp.prototype.checkValid=function(t){t.isValid()||Ou.out.println("Snapped geometry is invalid")},lp.prototype.computeSnapTolerance=function(){this._snapTolerance=tp.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},lp.prototype.snap=function(t){var e=this.removeCommonBits(t);return tp.snap(e[0],e[1],this._snapTolerance)},lp.prototype.interfaces_=function(){return[]},lp.prototype.getClass=function(){return lp},lp.overlayOp=function(t,e,n){return new lp(t,e).getResultGeometry(n)},lp.union=function(t,e){return lp.overlayOp(t,e,kp.UNION)},lp.intersection=function(t,e){return lp.overlayOp(t,e,kp.INTERSECTION)},lp.symDifference=function(t,e){return lp.overlayOp(t,e,kp.SYMDIFFERENCE)},lp.difference=function(t,e){return lp.overlayOp(t,e,kp.DIFFERENCE)};var up=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};up.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=kp.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof ju))throw t;r=t}if(!n)try{e=lp.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof ju?r:t}return e},up.prototype.interfaces_=function(){return[]},up.prototype.getClass=function(){return up},up.overlayOp=function(t,e,n){return new up(t,e).getResultGeometry(n)},up.union=function(t,e){return up.overlayOp(t,e,kp.UNION)},up.intersection=function(t,e){return up.overlayOp(t,e,kp.INTERSECTION)},up.symDifference=function(t,e){return up.overlayOp(t,e,kp.SYMDIFFERENCE)},up.difference=function(t,e){return up.overlayOp(t,e,kp.DIFFERENCE)};var cp=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};cp.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},cp.prototype.interfaces_=function(){return[]},cp.prototype.getClass=function(){return cp};var hp=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},dp={INSERT:{configurable:!0},DELETE:{configurable:!0}};hp.prototype.isDelete=function(){return this._eventType===hp.DELETE},hp.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},hp.prototype.getObject=function(){return this._obj},hp.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},hp.prototype.getInsertEvent=function(){return this._insertEvent},hp.prototype.isInsert=function(){return this._eventType===hp.INSERT},hp.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},hp.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},hp.prototype.interfaces_=function(){return[ou]},hp.prototype.getClass=function(){return hp},dp.INSERT.get=function(){return 1},dp.DELETE.get=function(){return 2},Object.defineProperties(hp,dp);var fp=function(){};fp.prototype.interfaces_=function(){return[]},fp.prototype.getClass=function(){return fp};var pp=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};pp.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(pp.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},pp.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},pp.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},pp.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},pp.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},pp.prototype.hasProperIntersection=function(){return this._hasProper},pp.prototype.hasIntersection=function(){return this._hasIntersection},pp.prototype.isDone=function(){return this._isDone},pp.prototype.isBoundaryPoint=function(t,e){return null!==e&&(!!this.isBoundaryPointInternal(t,e[0])||!!this.isBoundaryPointInternal(t,e[1]))},pp.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},pp.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},pp.prototype.interfaces_=function(){return[]},pp.prototype.getClass=function(){return pp},pp.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var gp=function(t){function e(){t.call(this),this.events=new cc,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){rd.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){var t=this;if(1===arguments.length){var e=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var n=0;n<this.events.size();n++){var r=t.events.get(n);if(r.isInsert()&&t.processOverlaps(n,r.getDeleteEventIndex(),r,e),e.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof pp&&gu(arguments[0],lc)&&gu(arguments[1],lc)){var i=arguments[0],o=arguments[1],a=arguments[2];this.addEdges(i,i),this.addEdges(o,o),this.computeIntersections(a)}else if("boolean"==typeof arguments[2]&&gu(arguments[0],lc)&&arguments[1]instanceof pp){var s=arguments[0],l=arguments[1],u=arguments[2];u?this.addEdges(s,null):this.addEdges(s),this.computeIntersections(l)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new cp(n,i),a=new hp(e,n.getMinX(i),o);this.events.add(a),this.events.add(new hp(n.getMaxX(i),a))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();n.isSameLabel(a)||(i.computeIntersections(s,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){var t=this;if(1===arguments.length)for(var e=arguments[0],n=e.iterator();n.hasNext();){var r=n.next();t.addEdge(r,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],a=i.iterator();a.hasNext();){var s=a.next();t.addEdge(s,o)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fp),mp=function(){this._min=ru.POSITIVE_INFINITY,this._max=ru.NEGATIVE_INFINITY},yp={NodeComparator:{configurable:!0}};mp.prototype.getMin=function(){return this._min},mp.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},mp.prototype.getMax=function(){return this._max},mp.prototype.toString=function(){return Fu.toLineString(new uu(this._min,0),new uu(this._max,0))},mp.prototype.interfaces_=function(){return[]},mp.prototype.getClass=function(){return mp},yp.NodeComparator.get=function(){return vp},Object.defineProperties(mp,yp);var vp=function(){};vp.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0},vp.prototype.interfaces_=function(){return[su]},vp.prototype.getClass=function(){return vp};var bp=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],r=arguments[2];this._min=e,this._max=n,this._item=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(mp),_p=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(mp),xp=function(){this._leaves=new cc,this._root=null,this._level=0};xp.prototype.buildTree=function(){rd.sort(this._leaves,new mp.NodeComparator);for(var t=this._leaves,e=null,n=new cc;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},xp.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new bp(t,e,n))},xp.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},xp.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},xp.prototype.printNode=function(t){Ou.out.println(Fu.toLineString(new uu(t._min,this._level),new uu(t._max,this._level)))},xp.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},xp.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new _p(t.get(n),t.get(n+1));e.add(i)}}},xp.prototype.interfaces_=function(){return[]},xp.prototype.getClass=function(){return xp};var wp=function(){this._items=new cc};wp.prototype.visitItem=function(t){this._items.add(t)},wp.prototype.getItems=function(){return this._items},wp.prototype.interfaces_=function(){return[$h]},wp.prototype.getClass=function(){return wp};var Sp=function(){this._index=null;var t=arguments[0];if(!gu(t,th))throw new nu("Argument must be Polygonal");this._index=new Mp(t)},Ep={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Sp.prototype.locate=function(t){var e=new Hu(t),n=new Cp(e);return this._index.query(t.y,t.y,n),e.getLocation()},Sp.prototype.interfaces_=function(){return[qd]},Sp.prototype.getClass=function(){return Sp},Ep.SegmentVisitor.get=function(){return Cp},Ep.IntervalIndexedGeometry.get=function(){return Mp},Object.defineProperties(Sp,Ep);var Cp=function(){this._counter=null;var t=arguments[0];this._counter=t};Cp.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},Cp.prototype.interfaces_=function(){return[$h]},Cp.prototype.getClass=function(){return Cp};var Mp=function(){this._index=new xp;var t=arguments[0];this.init(t)};Mp.prototype.init=function(t){for(var e=Af.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},Mp.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new vd(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},Mp.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new wp;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},Mp.prototype.interfaces_=function(){return[]},Mp.prototype.getClass=function(){return Mp};var Tp=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new ph,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Of,2===arguments.length){var e=arguments[0],n=arguments[1],r=$u.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=a,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;r.getLocation(t,Th.ON)===fu.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=new pp(n,!0,!1);o.setIsDoneIfProperInt(i);var a=this.createEdgeSetIntersector(),s=this._parentGeom instanceof rh||this._parentGeom instanceof eh||this._parentGeom instanceof ih,l=r||!s;return a.computeIntersections(this._edges,o,l),this.addSelfIntersectionNodes(this._argIndex),o}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new pp(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof $c){var t=arguments[0],e=t.getCoordinate();this.insertPoint(this._argIndex,e,fu.INTERIOR)}else if(arguments[0]instanceof uu){var n=arguments[0];this.insertPoint(this._argIndex,n,fu.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),fu.EXTERIOR,fu.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,fu.INTERIOR,fu.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],fu.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],fu.BOUNDARY)},e.prototype.addLineString=function(t){var e=fc.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new af(e,new Dh(this._argIndex,fu.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),zu.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===fu.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=fc.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;Wu.isCCW(r)&&(i=n,o=e);var a=new af(r,new Dh(this._argIndex,fu.BOUNDARY,i,o));this._lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this._argIndex,r[0],fu.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new Dh(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new gp},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof ih&&(this._useBoundaryDeterminationRule=!1),e instanceof eh)this.addPolygon(e);else if(e instanceof Kc)this.addLineString(e);else if(e instanceof $c)this.addPoint(e);else if(e instanceof nh)this.addCollection(e);else if(e instanceof Bc)this.addCollection(e);else if(e instanceof ih)this.addCollection(e);else{if(!(e instanceof jc))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return gu(this._parentGeom,th)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new Sp(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?fu.BOUNDARY:fu.INTERIOR},e}(Xh),Ap=function(){if(this._li=new qu,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Tp(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=$u.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Tp(0,e,r),this._arg[1]=new Tp(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Tp(0,i,a),this._arg[1]=new Tp(1,o,a)}};Ap.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Ap.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Ap.prototype.interfaces_=function(){return[]},Ap.prototype.getClass=function(){return Ap};var Op=function(){};Op.prototype.interfaces_=function(){return[]},Op.prototype.getClass=function(){return Op},Op.map=function(){if(arguments[0]instanceof Ju&&gu(arguments[1],Op.MapOp)){for(var t=arguments[0],e=arguments[1],n=new cc,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(gu(arguments[0],oc)&&gu(arguments[1],Op.MapOp)){for(var o=arguments[0],a=arguments[1],s=new cc,l=o.iterator();l.hasNext();){var u=l.next(),c=a.map(u);null!==c&&s.add(c)}return s}},Op.MapOp=function(){};var kp=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new Of,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Zd,this._resultPolyList=new cc,this._resultLineList=new cc,this._resultPointList=new cc,this._graph=new Xh(new Xd),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Dh(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new cc;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==fu.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new cc,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new cc;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Xf.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Jh(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new Zf(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new Kf(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,Th.RIGHT),i.getLocation(1,Th.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(zu.isTrue(!r.isNull(i,Th.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Th.LEFT,r.getLocation(i,Th.LEFT)),zu.isTrue(!r.isNull(i,Th.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Th.RIGHT,r.getLocation(i,Th.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ap);kp.overlayOp=function(t,e,n){return new kp(t,e).getResultGeometry(n)},kp.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return kp.createEmptyResult(kp.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Jf.map(t,{interfaces_:function(){return[Op.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),up.overlayOp(t,e,kp.INTERSECTION)},kp.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return kp.createEmptyResult(kp.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),up.overlayOp(t,e,kp.SYMDIFFERENCE)},kp.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case kp.INTERSECTION:o=Math.min(r,i);break;case kp.UNION:o=Math.max(r,i);break;case kp.DIFFERENCE:o=r;break;case kp.SYMDIFFERENCE:o=Math.max(r,i)}return o},kp.createEmptyResult=function(t,e,n,r){var i=null;switch(kp.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},kp.difference=function(t,e){return t.isEmpty()?kp.createEmptyResult(kp.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),up.overlayOp(t,e,kp.DIFFERENCE))},kp.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return kp.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];switch(i===fu.BOUNDARY&&(i=fu.INTERIOR),o===fu.BOUNDARY&&(o=fu.INTERIOR),a){case kp.INTERSECTION:return i===fu.INTERIOR&&o===fu.INTERIOR;case kp.UNION:return i===fu.INTERIOR||o===fu.INTERIOR;case kp.DIFFERENCE:return i===fu.INTERIOR&&o!==fu.INTERIOR;case kp.SYMDIFFERENCE:return i===fu.INTERIOR&&o!==fu.INTERIOR||i!==fu.INTERIOR&&o===fu.INTERIOR}return!1}},kp.INTERSECTION=1,kp.UNION=2,kp.DIFFERENCE=3,kp.SYMDIFFERENCE=4;var Ip=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Of,this._seg=new vd;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Ip.prototype.isWithinToleranceOfBoundary=function(t){for(var e=this,n=0;n<this._linework.getNumGeometries();n++)for(var r=e._linework.getGeometryN(n).getCoordinateSequence(),i=0;i<r.size()-1;i++)if(r.getCoordinate(i,e._seg.p0),r.getCoordinate(i+1,e._seg.p1),e._seg.distance(t)<=e._boundaryDistanceTolerance)return!0;return!1},Ip.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?fu.BOUNDARY:this._ptLocator.locate(t,this._g)},Ip.prototype.extractLinework=function(t){var e=new Pp;t.apply(e);var n=e.getLinework(),r=bh.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},Ip.prototype.interfaces_=function(){return[]},Ip.prototype.getClass=function(){return Ip};var Pp=function(){this._linework=null,this._linework=new cc};Pp.prototype.getLinework=function(){return this._linework},Pp.prototype.filter=function(t){if(t instanceof eh){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Pp.prototype.interfaces_=function(){return[Dc]},Pp.prototype.getClass=function(){return Pp};var Lp=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Lp.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},Lp.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Lp.prototype.getPoints=function(t){for(var e=new cc,n=Af.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},Lp.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,a=Math.sqrt(i*i+o*o),s=n*i/a,l=n*o/a,u=(e.x+t.x)/2,c=(e.y+t.y)/2;if(this._doLeft){var h=new uu(u-l,c+s);r.add(h)}if(this._doRight){var d=new uu(u+l,c-s);r.add(d)}},Lp.prototype.interfaces_=function(){return[]},Lp.prototype.getClass=function(){return Lp};var Np=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new cc;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new Ip(this._geom[0],this._boundaryDistanceTolerance),new Ip(this._geom[1],this._boundaryDistanceTolerance),new Ip(this._geom[2],this._boundaryDistanceTolerance)]},Rp={TOLERANCE:{configurable:!0}};Np.prototype.reportResult=function(t,e,n){Ou.out.println("Overlay result invalid - A:"+fu.toLocationSymbol(e[0])+" B:"+fu.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+fu.toLocationSymbol(e[2]))},Np.prototype.isValid=function(t){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var e=this.checkValid(t);return e},Np.prototype.checkValid=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=0;n<this._testCoords.size();n++){var r=t._testCoords.get(n);if(!t.checkValid(e,r))return t._invalidLocation=r,!1}return!0}if(2===arguments.length){var i=arguments[0],o=arguments[1];return this._location[0]=this._locFinder[0].getLocation(o),this._location[1]=this._locFinder[1].getLocation(o),this._location[2]=this._locFinder[2].getLocation(o),!!Np.hasLocation(this._location,fu.BOUNDARY)||this.isValidResult(i,this._location)}},Np.prototype.addTestPts=function(t){var e=new Lp(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Np.prototype.isValidResult=function(t,e){var n=kp.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===fu.INTERIOR);return r||this.reportResult(t,e,n),r},Np.prototype.getInvalidLocation=function(){return this._invalidLocation},Np.prototype.interfaces_=function(){return[]},Np.prototype.getClass=function(){return Np},Np.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Np.computeBoundaryDistanceTolerance=function(t,e){return Math.min(tp.computeSizeBasedSnapTolerance(t),tp.computeSizeBasedSnapTolerance(e))},Np.isValid=function(t,e,n,r){return new Np(t,e,r).isValid(n)},Rp.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Np,Rp);var Dp=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Dp.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},Dp.prototype.combine=function(){for(var t=new cc,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Dp.prototype.interfaces_=function(){return[]},Dp.prototype.getClass=function(){return Dp},Dp.combine=function(){if(1===arguments.length){var t=arguments[0],e=new Dp(t);return e.combine()}if(2===arguments.length){var n=arguments[0],r=arguments[1],i=new Dp(Dp.createList(n,r));return i.combine()}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],l=new Dp(Dp.createList(o,a,s));return l.combine()}},Dp.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Dp.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new cc;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=new cc;return a.add(r),a.add(i),a.add(o),a}};var Fp=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new cc)},jp={STRTREE_NODE_CAPACITY:{configurable:!0}};Fp.prototype.reduceToGeometries=function(t){for(var e=new cc,n=t.iterator();n.hasNext();){var r=n.next(),i=null;gu(r,lc)?i=this.unionTree(r):r instanceof Ju&&(i=r),e.add(i)}return e},Fp.prototype.extractByEnvelope=function(t,e,n){for(var r=new cc,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},Fp.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return Dp.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},Fp.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new ud(Fp.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},Fp.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=Fp.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(Fp.getGeometry(e,n),Fp.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),a=this.binaryUnion(e,n,o),s=this.binaryUnion(e,o,r);return this.unionSafe(a,s)}},Fp.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},Fp.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Fp.prototype.unionActual=function(t,e){return Fp.restrictToPolygons(t.union(e))},Fp.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Fp.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new cc,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),a=this.unionActual(i,o);return r.add(a),Dp.combine(r)},Fp.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0],e=t.get(0).getFactory(),n=e.buildGeometry(t),r=n.buffer(0);return r}if(2===arguments.length){var i=arguments[0],o=arguments[1],a=i.getFactory(),s=a.createGeometryCollection([i,o]),l=s.buffer(0);return l}},Fp.prototype.interfaces_=function(){return[]},Fp.prototype.getClass=function(){return Fp},Fp.restrictToPolygons=function(t){if(gu(t,th))return t;var e=Tf.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(bh.toPolygonArray(e))},Fp.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Fp.union=function(t){return new Fp(t).union()},jp.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Fp,jp);var Bp=function(){};function zp(){return new Up}function Up(){this.reset()}Bp.prototype.interfaces_=function(){return[]},Bp.prototype.getClass=function(){return Bp},Bp.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return kp.createEmptyResult(kp.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),up.overlayOp(t,e,kp.UNION)},Up.prototype={constructor:Up,reset:function(){this.s=this.t=0},add:function(t){qp(Gp,t,this.t),qp(this,Gp.s,this.s),this.s?this.t+=Gp.t:this.s=Gp.t},valueOf:function(){return this.s}};var Gp=new Up;function qp(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}var Vp=1e-6,Hp=Math.PI,Wp=Hp/2,Yp=Hp/4,Xp=2*Hp,Jp=180/Hp,Zp=Hp/180,Kp=Math.abs,Qp=Math.atan,$p=Math.atan2,tg=Math.cos,eg=Math.sin,ng=Math.sqrt;function rg(t){return t>1?0:t<-1?Hp:Math.acos(t)}function ig(t){return t>1?Wp:t<-1?-Wp:Math.asin(t)}function og(){}function ag(t,e){t&&cg.hasOwnProperty(t.type)&&cg[t.type](t,e)}var sg,lg,ug={Feature:function(t,e){ag(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)ag(n[r].geometry,e)}},cg={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){hg(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)hg(n[r],e,0)},Polygon:function(t,e){dg(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)dg(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)ag(n[r],e)}};function hg(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function dg(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)hg(t[n],e,1);e.polygonEnd()}function fg(t){return[$p(t[1],t[0]),ig(t[2])]}function pg(t){var e=t[0],n=t[1],r=tg(n);return[r*tg(e),r*eg(e),eg(n)]}function gg(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function mg(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function yg(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function vg(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function bg(t){var e=ng(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function _g(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function xg(t,e){return[t>Hp?t-Xp:t<-Hp?t+Xp:t,e]}function wg(t){return function(e,n){return[(e+=t)>Hp?e-Xp:e<-Hp?e+Xp:e,n]}}function Sg(t){var e=wg(t);return e.invert=wg(-t),e}function Eg(t,e){var n=tg(t),r=eg(t),i=tg(e),o=eg(e);function a(t,e){var a=tg(e),s=tg(t)*a,l=eg(t)*a,u=eg(e),c=u*n+s*r;return[$p(l*i-c*o,s*n-u*r),ig(c*i+l*o)]}return a.invert=function(t,e){var a=tg(e),s=tg(t)*a,l=eg(t)*a,u=eg(e),c=u*i-l*o;return[$p(l*i+u*o,s*n+c*r),ig(c*n-s*r)]},a}function Cg(t,e){(e=pg(e))[0]-=t,bg(e);var n=rg(-e[1]);return((-e[2]<0?-n:n)+Xp-Vp)%Xp}function Mg(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:og,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Tg(t,e){return Kp(t[0]-e[0])<Vp&&Kp(t[1]-e[1])<Vp}function Ag(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Og(t,e,n,r,i){var o,a,s=[],l=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(Tg(r,a)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else s.push(n=new Ag(r,t,null,!0)),l.push(n.o=new Ag(r,null,n,!1)),s.push(n=new Ag(a,t,null,!1)),l.push(n.o=new Ag(a,null,n,!0))}})),s.length){for(l.sort(e),kg(s),kg(l),o=0,a=l.length;o<a;++o)l[o].e=n=!n;for(var u,c,h=s[0];;){for(var d=h,f=!0;d.v;)if((d=d.n)===h)return;u=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(f)for(o=0,a=u.length;o<a;++o)i.point((c=u[o])[0],c[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(f)for(u=d.p.z,o=u.length-1;o>=0;--o)i.point((c=u[o])[0],c[1]);else r(d.x,d.p.x,-1,i);d=d.p}u=(d=d.o).z,f=!f}while(!d.v);i.lineEnd()}}}function kg(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Ig(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Pg(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--a]=r[e];return n}zp(),zp(),zp(),xg.invert=xg,1===(sg=Ig).length&&(lg=sg,sg=function(t,e){return Ig(lg(t),e)});var Lg=1e9,Ng=-Lg;function Rg(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,u){var c=0,h=0;if(null==i||(c=a(i,s))!==(h=a(o,s))||l(i,o)<0^s>0)do{u.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+s+4)%4)!==h);else u.point(o[0],o[1])}function a(r,i){return Kp(r[0]-t)<Vp?i>0?0:3:Kp(r[0]-n)<Vp?i>0?2:1:Kp(r[1]-e)<Vp?i>0?1:0:i>0?3:2}function s(t,e){return l(t.x,e.x)}function l(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var l,u,c,h,d,f,p,g,m,y,v,b=a,_=Mg(),x={point:w,lineStart:function(){x.point=S,u&&u.push(c=[]),y=!0,m=!1,p=g=NaN},lineEnd:function(){l&&(S(h,d),f&&m&&_.rejoin(),l.push(_.result())),x.point=w,m&&b.lineEnd()},polygonStart:function(){b=_,l=[],u=[],v=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=u.length;n<i;++n)for(var o,a,s=u[n],l=1,c=s.length,h=s[0],d=h[0],f=h[1];l<c;++l)o=d,a=f,d=(h=s[l])[0],f=h[1],a<=r?f>r&&(d-o)*(r-a)>(f-a)*(t-o)&&++e:f<=r&&(d-o)*(r-a)<(f-a)*(t-o)&&--e;return e}(),n=v&&e,i=(l=Pg(l)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&Og(l,s,e,o,a),a.polygonEnd()),b=a,l=u=c=null}};function w(t,e){i(t,e)&&b.point(t,e)}function S(o,a){var s=i(o,a);if(u&&c.push([o,a]),y)h=o,d=a,f=s,y=!1,s&&(b.lineStart(),b.point(o,a));else if(s&&m)b.point(o,a);else{var l=[p=Math.max(Ng,Math.min(Lg,p)),g=Math.max(Ng,Math.min(Lg,g))],_=[o=Math.max(Ng,Math.min(Lg,o)),a=Math.max(Ng,Math.min(Lg,a))];!function(t,e,n,r,i,o){var a,s=t[0],l=t[1],u=0,c=1,h=e[0]-s,d=e[1]-l;if(a=n-s,h||!(a>0)){if(a/=h,h<0){if(a<u)return;a<c&&(c=a)}else if(h>0){if(a>c)return;a>u&&(u=a)}if(a=i-s,h||!(a<0)){if(a/=h,h<0){if(a>c)return;a>u&&(u=a)}else if(h>0){if(a<u)return;a<c&&(c=a)}if(a=r-l,d||!(a>0)){if(a/=d,d<0){if(a<u)return;a<c&&(c=a)}else if(d>0){if(a>c)return;a>u&&(u=a)}if(a=o-l,d||!(a<0)){if(a/=d,d<0){if(a>c)return;a>u&&(u=a)}else if(d>0){if(a<u)return;a<c&&(c=a)}return u>0&&(t[0]=s+u*h,t[1]=l+u*d),c<1&&(e[0]=s+c*h,e[1]=l+c*d),!0}}}}}(l,_,t,e,n,r)?s&&(b.lineStart(),b.point(o,a),v=!1):(m||(b.lineStart(),b.point(l[0],l[1])),b.point(_[0],_[1]),s||b.lineEnd(),v=!1)}p=o,g=a,m=s}return x}}var Dg=zp();function Fg(t){return t}zp(),zp(),zp();var jg=1/0,Bg=jg,zg=-jg,Ug=zg,Gg={point:function(t,e){t<jg&&(jg=t),t>zg&&(zg=t),e<Bg&&(Bg=e),e>Ug&&(Ug=e)},lineStart:og,lineEnd:og,polygonStart:og,polygonEnd:og,result:function(){var t=[[jg,Bg],[zg,Ug]];return zg=Ug=-(Bg=jg=1/0),t}};function qg(t,e,n,r){return function(i,o){var a,s,l,u=e(o),c=i.invert(r[0],r[1]),h=Mg(),d=e(h),f=!1,p={point:g,lineStart:y,lineEnd:v,polygonStart:function(){p.point=b,p.lineStart=_,p.lineEnd=x,s=[],a=[]},polygonEnd:function(){p.point=g,p.lineStart=y,p.lineEnd=v,s=Pg(s);var t=function(t,e){var n=e[0],r=e[1],i=[eg(n),-tg(n),0],o=0,a=0;Dg.reset();for(var s=0,l=t.length;s<l;++s)if(c=(u=t[s]).length)for(var u,c,h=u[c-1],d=h[0],f=h[1]/2+Yp,p=eg(f),g=tg(f),m=0;m<c;++m,d=v,p=_,g=x,h=y){var y=u[m],v=y[0],b=y[1]/2+Yp,_=eg(b),x=tg(b),w=v-d,S=w>=0?1:-1,E=S*w,C=E>Hp,M=p*_;if(Dg.add($p(M*S*eg(E),g*x+M*tg(E))),o+=C?w+S*Xp:w,C^d>=n^v>=n){var T=mg(pg(h),pg(y));bg(T);var A=mg(i,T);bg(A);var O=(C^w>=0?-1:1)*ig(A[2]);(r>O||r===O&&(T[0]||T[1]))&&(a+=C^w>=0?1:-1)}}return(o<-1e-6||o<Vp&&Dg<-1e-6)^1&a}(a,c);s.length?(f||(o.polygonStart(),f=!0),Og(s,Hg,t,n,o)):t&&(f||(o.polygonStart(),f=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),f&&(o.polygonEnd(),f=!1),s=a=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function g(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function m(t,e){var n=i(t,e);u.point(n[0],n[1])}function y(){p.point=m,u.lineStart()}function v(){p.point=g,u.lineEnd()}function b(t,e){l.push([t,e]);var n=i(t,e);d.point(n[0],n[1])}function _(){d.lineStart(),l=[]}function x(){b(l[0][0],l[0][1]),d.lineEnd();var t,e,n,r,i=d.clean(),u=h.result(),c=u.length;if(l.pop(),a.push(l),l=null,c)if(1&i){if((e=(n=u[0]).length-1)>0){for(f||(o.polygonStart(),f=!0),o.lineStart(),t=0;t<e;++t)o.point((r=n[t])[0],r[1]);o.lineEnd()}}else c>1&&2&i&&u.push(u.pop().concat(u.shift())),s.push(u.filter(Vg))}return p}}function Vg(t){return t.length>1}function Hg(t,e){return((t=t.x)[0]<0?t[1]-Wp-Vp:Wp-t[1])-((e=e.x)[0]<0?e[1]-Wp-Vp:Wp-e[1])}zp();var Wg=qg((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?Hp:-Hp,l=Kp(o-n);Kp(l-Hp)<Vp?(t.point(n,r=(r+a)/2>0?Wp:-Wp),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&l>=Hp&&(Kp(n-i)<Vp&&(n-=i*Vp),Kp(o-s)<Vp&&(o-=s*Vp),r=function(t,e,n,r){var i,o,a=eg(t-n);return Kp(a)>Vp?Qp((eg(e)*(o=tg(r))*eg(n)-eg(r)*(i=tg(e))*eg(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*Wp,r.point(-Hp,i),r.point(0,i),r.point(Hp,i),r.point(Hp,0),r.point(Hp,-i),r.point(0,-i),r.point(-Hp,-i),r.point(-Hp,0),r.point(-Hp,i);else if(Kp(t[0]-e[0])>Vp){var o=t[0]<e[0]?Hp:-Hp;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}),[-Hp,-Wp]);function Yg(t,e){var n=tg(t),r=n>0,i=Kp(n)>Vp;function o(t,e){return tg(t)*tg(e)>n}function a(t,e,r){var i=[1,0,0],o=mg(pg(t),pg(e)),a=gg(o,o),s=o[0],l=a-s*s;if(!l)return!r&&t;var u=n*a/l,c=-n*s/l,h=mg(i,o),d=vg(i,u);yg(d,vg(o,c));var f=h,p=gg(d,f),g=gg(f,f),m=p*p-g*(gg(d,d)-1);if(!(m<0)){var y=ng(m),v=vg(f,(-p-y)/g);if(yg(v,d),v=fg(v),!r)return v;var b,_=t[0],x=e[0],w=t[1],S=e[1];x<_&&(b=_,_=x,x=b);var E=x-_,C=Kp(E-Hp)<Vp;if(!C&&S<w&&(b=w,w=S,S=b),C||E<Vp?C?w+S>0^v[1]<(Kp(v[0]-_)<Vp?w:S):w<=v[1]&&v[1]<=S:E>Hp^(_<=v[0]&&v[0]<=x)){var M=vg(f,(-p+y)/g);return yg(M,d),[v,fg(M)]}}}function s(e,n){var i=r?t:Hp-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return qg(o,(function(t){var e,n,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(h,d){var f,p=[h,d],g=o(h,d),m=r?g?0:s(h,d):g?s(h+(h<0?Hp:-Hp),d):0;if(!e&&(u=l=g)&&t.lineStart(),g!==l&&(!(f=a(e,p))||Tg(e,f)||Tg(p,f))&&(p[0]+=Vp,p[1]+=Vp,g=o(p[0],p[1])),g!==l)c=0,g?(t.lineStart(),f=a(p,e),t.point(f[0],f[1])):(f=a(e,p),t.point(f[0],f[1]),t.lineEnd()),e=f;else if(i&&e&&r^g){var y;m&n||!(y=a(p,e,!0))||(c=0,r?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!g||e&&Tg(e,p)||t.point(p[0],p[1]),e=p,l=g,n=m},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return c|(u&&l)<<1}}}),(function(n,r,i,o){!function(t,e,n,r,i,o){if(n){var a=tg(e),s=eg(e),l=r*n;null==i?(i=e+r*Xp,o=e-l/2):(i=Cg(a,i),o=Cg(a,o),(r>0?i<o:i>o)&&(i+=r*Xp));for(var u,c=i;r>0?c>o:c<o;c-=l)u=fg([a,-s*tg(c),-s*eg(c)]),t.point(u[0],u[1])}}(o,t,e,i,n,r)}),r?[0,-t]:[-Hp,t-Hp])}function Xg(t){return function(e){var n=new Jg;for(var r in t)n[r]=t[r];return n.stream=e,n}}function Jg(){}function Zg(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),function(t,e){t&&ug.hasOwnProperty(t.type)?ug[t.type](t,e):ag(t,e)}(n,t.stream(Gg));var a=Gg.result(),s=Math.min(r/(a[1][0]-a[0][0]),i/(a[1][1]-a[0][1])),l=+e[0][0]+(r-s*(a[1][0]+a[0][0]))/2,u=+e[0][1]+(i-s*(a[1][1]+a[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*s).translate([l,u])}Jg.prototype={constructor:Jg,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Kg=tg(30*Zp);function Qg(t,e){return+e?function(t,e){function n(r,i,o,a,s,l,u,c,h,d,f,p,g,m){var y=u-r,v=c-i,b=y*y+v*v;if(b>4*e&&g--){var _=a+d,x=s+f,w=l+p,S=ng(_*_+x*x+w*w),E=ig(w/=S),C=Kp(Kp(w)-1)<Vp||Kp(o-h)<Vp?(o+h)/2:$p(x,_),M=t(C,E),T=M[0],A=M[1],O=T-r,k=A-i,I=v*O-y*k;(I*I/b>e||Kp((y*O+v*k)/b-.5)>.3||a*d+s*f+l*p<Kg)&&(n(r,i,o,a,s,l,T,A,C,_/=S,x/=S,w,g,m),m.point(T,A),n(T,A,C,_,x,w,u,c,h,d,f,p,g,m))}}return function(e){var r,i,o,a,s,l,u,c,h,d,f,p,g={point:m,lineStart:y,lineEnd:b,polygonStart:function(){e.polygonStart(),g.lineStart=_},polygonEnd:function(){e.polygonEnd(),g.lineStart=y}};function m(n,r){n=t(n,r),e.point(n[0],n[1])}function y(){c=NaN,g.point=v,e.lineStart()}function v(r,i){var o=pg([r,i]),a=t(r,i);n(c,h,u,d,f,p,c=a[0],h=a[1],u=r,d=o[0],f=o[1],p=o[2],16,e),e.point(c,h)}function b(){g.point=m,e.lineEnd()}function _(){y(),g.point=x,g.lineEnd=w}function x(t,e){v(r=t,e),i=c,o=h,a=d,s=f,l=p,g.point=v}function w(){n(c,h,u,d,f,p,i,o,r,a,s,l,16,e),g.lineEnd=b,b()}return g}}(t,e):function(t){return Xg({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var $g=Xg({point:function(t,e){this.stream.point(t*Zp,e*Zp)}});function tm(t){return function(t){var e,n,r,i,o,a,s,l,u,c,h=150,d=480,f=250,p=0,g=0,m=0,y=0,v=0,b=null,_=Wg,x=null,w=Fg,S=.5,E=Qg(T,S);function C(t){return[(t=o(t[0]*Zp,t[1]*Zp))[0]*h+n,r-t[1]*h]}function M(t){return(t=o.invert((t[0]-n)/h,(r-t[1])/h))&&[t[0]*Jp,t[1]*Jp]}function T(t,i){return[(t=e(t,i))[0]*h+n,r-t[1]*h]}function A(){o=_g(i=function(t,e,n){return(t%=Xp)?e||n?_g(Sg(t),Eg(e,n)):Sg(t):e||n?Eg(e,n):xg}(m,y,v),e);var t=e(p,g);return n=d-t[0]*h,r=f+t[1]*h,O()}function O(){return u=c=null,C}return C.stream=function(t){return u&&c===t?u:u=$g(_(i,E(w(c=t))))},C.clipAngle=function(t){return arguments.length?(_=+t?Yg(b=t*Zp,6*Zp):(b=null,Wg),O()):b*Jp},C.clipExtent=function(t){return arguments.length?(w=null==t?(x=a=s=l=null,Fg):Rg(x=+t[0][0],a=+t[0][1],s=+t[1][0],l=+t[1][1]),O()):null==x?null:[[x,a],[s,l]]},C.scale=function(t){return arguments.length?(h=+t,A()):h},C.translate=function(t){return arguments.length?(d=+t[0],f=+t[1],A()):[d,f]},C.center=function(t){return arguments.length?(p=t[0]%360*Zp,g=t[1]%360*Zp,A()):[p*Jp,g*Jp]},C.rotate=function(t){return arguments.length?(m=t[0]%360*Zp,y=t[1]%360*Zp,v=t.length>2?t[2]%360*Zp:0,A()):[m*Jp,y*Jp,v*Jp]},C.precision=function(t){return arguments.length?(E=Qg(T,S=t*t),O()):ng(S)},C.fitExtent=function(t,e){return Zg(C,t,e)},C.fitSize=function(t,e){return function(t,e,n){return Zg(t,[[0,0],e],n)}(C,t,e)},function(){return e=t.apply(this,arguments),C.invert=e.invert&&M,A()}}((function(){return t}))()}var em=function(t){return function(e,n){var r=tg(e),i=tg(n),o=t(r*i);return[o*i*eg(e),o*eg(n)]}}((function(t){return(t=rg(t))&&t/eg(t)}));function nm(){return tm(em).scale(79.4188).clipAngle(179.999)}function rm(t,e,r,i){var o=t.properties||{},s="Feature"===t.type?t.geometry:t;if("GeometryCollection"===s.type){var l=[];return z(t,(function(t){var n=rm(t,e,r,i);n&&l.push(n)})),p(l)}var u=function(t){var e=xn(t).geometry.coordinates,r=[-e[0],-e[1]];return nm().rotate(r).scale(n)}(s),c={type:s.type,coordinates:om(s.coordinates,u)},h=(new Ch).read(c),d=_(x(e,r),"meters"),f=bf.bufferOp(h,d,i);if(!im((f=(new Mh).write(f)).coordinates))return a({type:f.type,coordinates:am(f.coordinates,u)},o)}function im(t){return Array.isArray(t[0])?im(t[0]):isNaN(t[0])}function om(t,e){return"object"!=typeof t[0]?e(t):t.map((function(t){return om(t,e)}))}function am(t,e){return"object"!=typeof t[0]?e.invert(t):t.map((function(t){return am(t,e)}))}function sm(t,e,n){void 0===n&&(n={});var r=it(t),i=it(e),o=tu.intersection(r.coordinates,i.coordinates);return 0===o.length?null:1===o.length?c(o[0],n.properties):y(o,n.properties)}function lm(t,e,n){void 0===n&&(n={});var r=JSON.stringify(n.properties||{}),i=t[0],o=t[1],a=t[2],s=t[3],l=(o+s)/2,u=(i+a)/2,c=2*e/_e([i,l],[a,l],n)*(a-i),h=2*e/_e([u,o],[u,s],n)*(s-o),d=c/2,f=2*d,g=Math.sqrt(3)/2*h,m=a-i,y=s-o,v=3/4*f,b=g,_=(m-f)/(f-d/2),x=Math.floor(_),w=(x*v-d/2-m)/2-d/2+v/2,S=Math.floor((y-g)/g),E=(y-S*g)/2,C=S*g-y>g/2;C&&(E-=g/4);for(var M=[],T=[],A=0;A<6;A++){var O=2*Math.PI/6*A;M.push(Math.cos(O)),T.push(Math.sin(O))}for(var k=[],I=0;I<=x;I++)for(var P=0;P<=S;P++){var L=I%2==1;if((0!==P||!L)&&(0!==P||!C)){var N=I*v+i-w,R=P*b+o+E;if(L&&(R-=g/2),!0===n.triangles)cm([N,R],c/2,h/2,JSON.parse(r),M,T).forEach((function(t){n.mask?sm(n.mask,t)&&k.push(t):k.push(t)}));else{var D=um([N,R],c/2,h/2,JSON.parse(r),M,T);n.mask?sm(n.mask,D)&&k.push(D):k.push(D)}}}return p(k)}function um(t,e,n,r,i,o){for(var a=[],s=0;s<6;s++){var l=t[0]+e*i[s],u=t[1]+n*o[s];a.push([l,u])}return a.push(a[0].slice()),c([a],r)}function cm(t,e,n,r,i,o){for(var a=[],s=0;s<6;s++){var l=[];l.push(t),l.push([t[0]+e*i[s],t[1]+n*o[s]]),l.push([t[0]+e*i[(s+1)%6],t[1]+n*o[(s+1)%6]]),l.push(t),a.push(c([l],r))}return a}function hm(t){return y(t)}function dm(t){return c(t&&t.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]])}function fm(t,e,n){return void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});for(var i=[],o=t[0],a=t[1],s=t[2],l=t[3],u=e/_e([o,a],[s,a],r)*(s-o),h=n/_e([o,a],[o,l],r)*(l-a),d=s-o,f=l-a,g=Math.floor(d/u),m=Math.floor(f/h),y=(f-m*h)/2,v=o+(d-g*u)/2,b=0;b<g;b++){for(var _=a+y,x=0;x<m;x++){var w=c([[[v,_],[v,_+h],[v+u,_+h],[v+u,_],[v,_]]],r.properties);r.mask?Oa(r.mask,w)&&i.push(w):i.push(w),_+=h}v+=u}return p(i)}(t,e,e,n)}function pm(t,e,n){void 0===n&&(n={});for(var r=[],i=e/_e([t[0],t[1]],[t[2],t[1]],n)*(t[2]-t[0]),o=e/_e([t[0],t[1]],[t[0],t[3]],n)*(t[3]-t[1]),a=0,s=t[0];s<=t[2];){for(var l=0,u=t[1];u<=t[3];){var h=null,d=null;a%2==0&&l%2==0?(h=c([[[s,u],[s,u+o],[s+i,u],[s,u]]],n.properties),d=c([[[s,u+o],[s+i,u+o],[s+i,u],[s,u+o]]],n.properties)):a%2==0&&l%2==1?(h=c([[[s,u],[s+i,u+o],[s+i,u],[s,u]]],n.properties),d=c([[[s,u],[s,u+o],[s+i,u+o],[s,u]]],n.properties)):l%2==0&&a%2==1?(h=c([[[s,u],[s,u+o],[s+i,u+o],[s,u]]],n.properties),d=c([[[s,u],[s+i,u+o],[s+i,u],[s,u]]],n.properties)):l%2==1&&a%2==1&&(h=c([[[s,u],[s,u+o],[s+i,u],[s,u]]],n.properties),d=c([[[s,u+o],[s+i,u+o],[s+i,u],[s,u+o]]],n.properties)),n.mask?(sm(n.mask,h)&&r.push(h),sm(n.mask,d)&&r.push(d)):(r.push(h),r.push(d)),u+=o,l++}a++,s+=i}return p(r)}em.invert=function(t){return function(e,n){var r=ng(e*e+n*n),i=t(r),o=eg(i),a=tg(i);return[$p(e*o,r*a),ig(r&&n*o/r)]}}((function(t){return t})),e.along=function(t,e,n){void 0===n&&(n={});for(var r=it(t).coordinates,i=0,o=0;o<r.length&&!(e>=i&&o===r.length-1);o++){if(i>=e){var a=e-i;if(a){var s=_n(r[o],r[o-1])-180;return vn(r[o],a,s,n)}return l(r[o])}i+=_e(r[o],r[o+1],n)}return l(r[r.length-1])},e.angle=function(t,e,n,r){if(void 0===r&&(r={}),!O(r))throw new Error("options is invalid");if(!t)throw new Error("startPoint is required");if(!e)throw new Error("midPoint is required");if(!n)throw new Error("endPoint is required");var i=t,o=e,a=n,s=S(!0!==r.mercator?_n(i,o):Ui(i,o)),l=S(!0!==r.mercator?_n(a,o):Ui(a,o)),u=Math.abs(s-l);return!0===r.explementary?360-u:u},e.applyFilter=ul,e.area=qr,e.areaFactors=o,e.bbox=K,e.bboxClip=function(t,e){var n=it(t),r=n.type,i="Feature"===t.type?t.properties:{},o=n.coordinates;switch(r){case"LineString":case"MultiLineString":var a=[];return"LineString"===r&&(o=[o]),o.forEach((function(t){!function(t,e,n){var r,i,o,a,s,l=t.length,u=Li(t[0],e),c=[];for(n||(n=[]),r=1;r<l;r++){for(a=t[r-1],i=o=Li(s=t[r],e);;){if(!(u|i)){c.push(a),i!==o?(c.push(s),r<l-1&&(n.push(c),c=[])):r===l-1&&c.push(s);break}if(u&i)break;u?u=Li(a=Pi(a,s,u,e),e):i=Li(s=Pi(a,s,i,e),e)}u=o}c.length&&n.push(c)}(t,e,a)})),1===a.length?d(a[0],i):g(a,i);case"Polygon":return c(Ni(o,e),i);case"MultiPolygon":return y(o.map((function(t){return Ni(t,e)})),i);default:throw new Error("geometry "+r+" not supported")}},e.bboxPolygon=gn,e.bearing=_n,e.bearingToAngle=S,e.bearingToAzimuth=S,e.bezier=pn,e.bezierSpline=pn,e.booleanClockwise=Yi,e.booleanContains=function(t,e){var n=it(t),r=it(e),i=n.type,o=r.type,a=n.coordinates,s=r.coordinates;switch(i){case"Point":switch(o){case"Point":return va(a,s);default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"Point":return function(t,e){var n,r=!1;for(n=0;n<t.coordinates.length;n++)if(va(t.coordinates[n],e.coordinates)){r=!0;break}return r}(n,r);case"MultiPoint":return function(t,e){for(var n=0,r=e.coordinates;n<r.length;n++){for(var i=r[n],o=!1,a=0,s=t.coordinates;a<s.length;a++)if(va(i,s[a])){o=!0;break}if(!o)return!1}return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return Jr(r,n,{ignoreEndVertices:!0});case"LineString":return function(t,e){for(var n=!1,r=0,i=e.coordinates;r<i.length;r++){var o=i[r];if(Jr({type:"Point",coordinates:o},t,{ignoreEndVertices:!0})&&(n=!0),!Jr({type:"Point",coordinates:o},t,{ignoreEndVertices:!1}))return!1}return n}(n,r);case"MultiPoint":return function(t,e){for(var n=!1,r=0,i=e.coordinates;r<i.length;r++){var o=i[r];if(Jr(o,t,{ignoreEndVertices:!0})&&(n=!0),!Jr(o,t))return!1}return!!n}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":return ye(r,n,{ignoreBoundary:!0});case"LineString":return function(t,e){var n=!1,r=0,i=K(t),o=K(e);if(!ya(i,o))return!1;for(;r<e.coordinates.length-1;r++)if(ye({type:"Point",coordinates:ba(e.coordinates[r],e.coordinates[r+1])},t,{ignoreBoundary:!0})){n=!0;break}return n}(n,r);case"Polygon":return function(t,e){if("Feature"===t.type&&null===t.geometry)return!1;if("Feature"===e.type&&null===e.geometry)return!1;var n=K(t),r=K(e);if(!ya(n,r))return!1;for(var i=it(e).coordinates,o=0,a=i;o<a.length;o++)for(var s=0,l=a[o];s<l.length;s++)if(!ye(l[s],t))return!1;return!0}(n,r);case"MultiPoint":return function(t,e){for(var n=0,r=e.coordinates;n<r.length;n++)if(!ye(r[n],t,{ignoreBoundary:!0}))return!1;return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}},e.booleanCrosses=function(t,e){var n=it(t),r=it(e),i=n.type,o=r.type;switch(i){case"MultiPoint":switch(o){case"LineString":return _a(n,r);case"Polygon":return wa(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"MultiPoint":return _a(r,n);case"LineString":return function(t,e){if(Pr(t,e).features.length>0)for(var n=0;n<t.coordinates.length-1;n++)for(var r=0;r<e.coordinates.length-1;r++){var i=!0;if(0!==r&&r!==e.coordinates.length-2||(i=!1),Sa(t.coordinates[n],t.coordinates[n+1],e.coordinates[r],i))return!0}return!1}(n,r);case"Polygon":return xa(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"MultiPoint":return wa(r,n);case"LineString":return xa(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}},e.booleanDisjoint=fa,e.booleanEqual=function(t,e){return it(t).type===it(e).type&&new Aa({precision:6}).compare(en(t),en(e))},e.booleanIntersects=Oa,e.booleanOverlap=function(t,e){var n=it(t),r=it(e),i=n.type,o=r.type;if("MultiPoint"===i&&"MultiPoint"!==o||("LineString"===i||"MultiLineString"===i)&&"LineString"!==o&&"MultiLineString"!==o||("Polygon"===i||"MultiPolygon"===i)&&"Polygon"!==o&&"MultiPolygon"!==o)throw new Error("features must be of the same type");if("Point"===i)throw new Error("Point geometry not supported");if(new Aa({precision:6}).compare(t,e))return!1;var a=0;switch(i){case"MultiPoint":for(var s=0;s<n.coordinates.length;s++)for(var l=0;l<r.coordinates.length;l++){var u=n.coordinates[s],c=r.coordinates[l];if(u[0]===c[0]&&u[1]===c[1])return!0}return!1;case"LineString":case"MultiLineString":V(t,(function(t){V(e,(function(e){ji(t,e).features.length&&a++}))}));break;case"Polygon":case"MultiPolygon":V(t,(function(t){V(e,(function(e){Pr(t,e).features.length&&a++}))}))}return a>0},e.booleanParallel=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==Va(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==Va(e,"line2"))throw new Error("line2 must be a LineString");for(var n=Kn(en(t)).features,r=Kn(en(e)).features,i=0;i<n.length;i++){var o=n[i].geometry.coordinates;if(!r[i])break;if(!qa(o,r[i].geometry.coordinates))return!1}return!0},e.booleanPointInPolygon=ye,e.booleanPointOnLine=Jr,e.booleanWithin=Kr,e.buffer=function(t,e,n){var r=(n=n||{}).units||"kilometers",i=n.steps||8;if(!t)throw new Error("geojson is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(t.type){case"GeometryCollection":return z(t,(function(t){var n=rm(t,e,r,i);n&&o.push(n)})),p(o);case"FeatureCollection":return F(t,(function(t){var n=rm(t,e,r,i);n&&F(n,(function(t){t&&o.push(t)}))})),p(o)}return rm(t,e,r,i)},e.center=xn,e.centerMean=Fs,e.centerMedian=function(t,e){if(void 0===e&&(e={}),!O(e=e||{}))throw new Error("options is invalid");var n=e.counter||10;if(!A(n))throw new Error("counter must be a number");var r=e.weight,i=Fs(t,{weight:e.weight}),o=p([]);F(t,(function(t){var e;o.features.push(wn(t,{properties:{weight:null===(e=t.properties)||void 0===e?void 0:e[r]}}))}));var a={tolerance:e.tolerance,medianCandidates:[]};return js(i.geometry.coordinates,[0,0],o,a,n)},e.centerOfMass=function t(e,n){switch(void 0===n&&(n={}),ot(e)){case"Point":return l(Q(e),n.properties);case"Polygon":var r=[];L(e,(function(t){r.push(t)}));var i,o,a,s,u,c,h,d,f=wn(e,{properties:n.properties}),p=f.geometry.coordinates,g=0,m=0,y=0,v=r.map((function(t){return[t[0]-p[0],t[1]-p[1]]}));for(i=0;i<r.length-1;i++)s=(o=v[i])[0],c=o[1],u=(a=v[i+1])[0],y+=d=s*(h=a[1])-u*c,g+=(s+u)*d,m+=(c+h)*d;if(0===y)return f;var b=1/(.5*y*6);return l([p[0]+b*g,p[1]+b*m],n.properties);default:var _=me(e);return _?t(_,{properties:n.properties}):wn(e,{properties:n.properties})}},e.centroid=wn,e.circle=bn,e.cleanCoords=en,e.clone=Ce,e.clusterEach=al,e.clusterReduce=sl,e.clusters=dl,e.clustersDbscan=function(t,e,n){void 0===n&&(n={}),!0!==n.mutate&&(t=Ce(t)),n.minPoints=n.minPoints||3;var r=new Na.DBSCAN,i=r.run(B(t),M(e,n.units),n.minPoints,_e),o=-1;return i.forEach((function(e){o++,e.forEach((function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster=o,n.properties.dbscan="core"}))})),r.noise.forEach((function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster?n.properties.dbscan="edge":n.properties.dbscan="noise"})),t},e.clustersKmeans=function(t,e){void 0===e&&(e={});var n=t.features.length;e.numberOfClusters=e.numberOfClusters||Math.round(Math.sqrt(n/2)),e.numberOfClusters>n&&(e.numberOfClusters=n),!0!==e.mutate&&(t=Ce(t));var r=B(t),i=r.slice(0,e.numberOfClusters),o=Ga(r,e.numberOfClusters,i),a={};return o.centroids.forEach((function(t,e){a[e]=t})),F(t,(function(t,e){var n=o.idxs[e];t.properties.cluster=n,t.properties.centroid=a[n]})),t},e.collect=function(t,e,n,r){var i=Mt(6),o=e.features.map((function(t){var e;return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:null===(e=t.properties)||void 0===e?void 0:e[n]}}));return i.load(o),t.features.forEach((function(t){t.properties||(t.properties={});var e=K(t),n=i.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}),o=[];n.forEach((function(e){ye([e.minX,e.minY],t)&&o.push(e.property)})),t.properties[r]=o})),t},e.collectionOf=rt,e.combine=function(t){var e={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return F(t,(function(t){var n,r,i,o;switch(null===(o=t.geometry)||void 0===o?void 0:o.type){case"Point":e.MultiPoint.coordinates.push(t.geometry.coordinates),e.MultiPoint.properties.push(t.properties);break;case"MultiPoint":(n=e.MultiPoint.coordinates).push.apply(n,t.geometry.coordinates),e.MultiPoint.properties.push(t.properties);break;case"LineString":e.MultiLineString.coordinates.push(t.geometry.coordinates),e.MultiLineString.properties.push(t.properties);break;case"MultiLineString":(r=e.MultiLineString.coordinates).push.apply(r,t.geometry.coordinates),e.MultiLineString.properties.push(t.properties);break;case"Polygon":e.MultiPolygon.coordinates.push(t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties);break;case"MultiPolygon":(i=e.MultiPolygon.coordinates).push.apply(i,t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties)}})),p(Object.keys(e).filter((function(t){return e[t].coordinates.length})).sort().map((function(t){return a({type:t,coordinates:e[t].coordinates},{collectedProperties:e[t].properties})})))},e.concave=function(t,e){void 0===e&&(e={});var n=e.maxEdge||1/0,r=xe(function(t){var e=[],n={};return F(t,(function(t){if(t.geometry){var r=t.geometry.coordinates.join("-");Object.prototype.hasOwnProperty.call(n,r)||(e.push(t),n[r]=!0)}})),p(e)}(t));if(r.features=r.features.filter((function(t){var r=t.geometry.coordinates[0][0],i=t.geometry.coordinates[0][1],o=t.geometry.coordinates[0][2],a=_e(r,i,e),s=_e(i,o,e),l=_e(r,o,e);return a<=n&&s<=n&&l<=n})),r.features.length<1)return null;var i=tn(r);return 1===i.coordinates.length&&(i.coordinates=i.coordinates[0],i.type="Polygon"),a(i)},e.containsNumber=tt,e.convertArea=T,e.convertDistance=M,e.convertLength=M,e.convex=me,e.coordAll=B,e.coordEach=L,e.coordReduce=N,e.createBins=ll,e.degrees2radians=C,e.degreesToRadians=C,e.destination=vn,e.difference=function(t,e){var n=it(t),r=it(e),i=t.properties||{},o=tu.difference(n.coordinates,r.coordinates);return 0===o.length?null:1===o.length?c(o[0],i):y(o,i)},e.dissolve=function(t,e){if(!O(e=e||{}))throw new Error("options is invalid");var n=e.propertyName;rt(t,"Polygon","dissolve");var r=[];if(!e.propertyName)return ri(y(tu.union.apply(null,t.features.map((function(t){return t.geometry.coordinates})))));var i={};F(t,(function(t){Object.prototype.hasOwnProperty.call(i,t.properties[n])||(i[t.properties[n]]=[]),i[t.properties[n]].push(t)}));for(var o=Object.keys(i),a=0;a<o.length;a++){var s=y(tu.union.apply(null,i[o[a]].map((function(t){return t.geometry.coordinates}))));s.properties[n]=o[a],r.push(s)}return ri(p(r))},e.distance=_e,e.distanceToDegrees=w,e.distanceToRadians=x,e.distanceWeight=qs,e.earthRadius=n,e.ellipse=Rs,e.envelope=mn,e.explode=Sn,e.factors=r,e.feature=a,e.featureCollection=p,e.featureEach=F,e.featureOf=nt,e.featureReduce=j,e.filterProperties=hl,e.findPoint=J,e.findSegment=X,e.flatten=ri,e.flattenEach=G,e.flattenReduce=q,e.flip=function(t,e){if(!O(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if(!t)throw new Error("geojson is required");return!1!==n&&void 0!==n||(t=Ce(t)),L(t,(function(t){var e=t[0],n=t[1];t[0]=n,t[1]=e})),t},e.geojsonType=et,e.geomEach=z,e.geomReduce=U,e.geometry=s,e.geometryCollection=v,e.getCluster=ol,e.getCoord=Q,e.getCoords=$,e.getGeom=it,e.getType=ot,e.greatCircle=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.npoints,o=n.offset;return t=Q(t),e=Q(e),r=r||{},i=i||100,o=o||10,new vi({x:t[0],y:t[1]},{x:e[0],y:e[1]},r).Arc(i,{offset:o}).json()},e.helpers=P,e.hexGrid=lm,e.inside=ye,e.interpolate=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.gridType,i=n.property,o=n.weight;if(!t)throw new Error("points is required");if(rt(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(void 0!==o&&"number"!=typeof o)throw new Error("weight must be a number");i=i||"elevation",r=r||"square",o=o||1;var a,s=K(t);switch(r){case"point":case"points":a=ei(s,e,n);break;case"square":case"squares":a=fm(s,e,n);break;case"hex":case"hexes":a=lm(s,e,n);break;case"triangle":case"triangles":a=pm(s,e,n);break;default:throw new Error("invalid gridType")}var l=[];return F(a,(function(e){var a=0,s=0;F(t,(function(t){var l,u=_e("point"===r?e:wn(e),t,n);if(void 0!==i&&(l=t.properties[i]),void 0===l&&(l=t.geometry.coordinates[2]),void 0===l)throw new Error("zValue is missing");0===u&&(a=l);var c=1/Math.pow(u,o);s+=c,a+=c*l}));var u=Ce(e);u.properties[i]=a/s,l.push(u)})),p(l)},e.intersect=sm,e.invariant=at,e.isNumber=A,e.isObject=O,e.isobands=function(t,e,n){if(!O(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(rt(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!O(i))throw new Error("commonProperties is not an Object");if(!Array.isArray(o))throw new Error("breaksProperties is not an Array");var a=Ki(t,{zProperty:r,flip:!0}),s=function(t,e,n){for(var r=[],i=1;i<e.length;i++){var o=+e[i-1],a=+e[i],s=Ko(Zo(to(t,o,a-o))),l={};l.groupedRings=s,l[n]=o+"-"+a,r.push(l)}return r}(a,e,r);return p((s=function(t,e,n){var r=K(n),i=r[2]-r[0],o=r[3]-r[1],a=r[0],s=r[1],l=e[0].length-1,u=e.length-1,c=i/l,h=o/u,d=function(t){t[0]=t[0]*c+a,t[1]=t[1]*h+s};return t.forEach((function(t){t.groupedRings.forEach((function(t){t.forEach((function(t){t.forEach(d)}))}))})),t}(s,a,t)).map((function(t,e){if(o[e]&&!O(o[e]))throw new Error("Each mappedProperty is required to be an Object");var n=ht({},i,o[e]);return n[r]=t[r],y(t.groupedRings,n)})))},e.isolines=function(t,e,n){if(!O(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(rt(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!O(i))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var a=bt(t,{zProperty:r,flip:!0});return p(function(t,e,n){var r=K(n),i=r[2]-r[0],o=r[3]-r[1],a=r[0],s=r[1],l=e[0].length-1,u=e.length-1,c=i/l,h=o/u,d=function(t){t[0]=t[0]*c+a,t[1]=t[1]*h+s};return t.forEach((function(t){L(t,d)})),t}(function(t,e,n,r,i){for(var o=[],a=1;a<e.length;a++){var s=+e[a],l=ht({},r,i[a]);l[n]=s;var u=g(pt(t,s),l);o.push(u)}return o}(a,e,r,i,o),a,t))},e.kinks=function(t){var e,n,r={type:"FeatureCollection",features:[]};if("LineString"===(n="Feature"===t.type?t.geometry:t).type)e=[n.coordinates];else if("MultiLineString"===n.type)e=n.coordinates;else if("MultiPolygon"===n.type)e=[].concat.apply([],n.coordinates);else{if("Polygon"!==n.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=n.coordinates}return e.forEach((function(t){e.forEach((function(e){for(var n=0;n<t.length-1;n++)for(var i=n;i<e.length-1;i++){if(t===e){if(1===Math.abs(n-i))continue;if(0===n&&i===t.length-2&&t[n][0]===t[t.length-1][0]&&t[n][1]===t[t.length-1][1])continue}var o=Br(t[n][0],t[n][1],t[n+1][0],t[n+1][1],e[i][0],e[i][1],e[i+1][0],e[i+1][1]);o&&r.features.push(l([o[0],o[1]]))}}))})),r},e.length=Yr,e.lengthToDegrees=w,e.lengthToRadians=x,e.lineArc=Si,e.lineChunk=function(t,e,n){if(!O(n=n||{}))throw new Error("options is invalid");var r=n.units,i=n.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var o=[];return G(t,(function(t){i&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,n,r){var i=Yr(t,{units:n});if(i<=e)return r(t);var o=i/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var a=0;a<o;a++)r(Xr(t,e*a,e*(a+1),{units:n}),a)}(t,e,r,(function(t){o.push(t)}))})),p(o)},e.lineDistance=Yr,e.lineEach=W,e.lineIntersect=Pr,e.lineOffset=function(t,e,n){if(!O(n=n||{}))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");var i=ot(t),o=t.properties;switch(i){case"LineString":return aa(t,e,r);case"MultiLineString":var a=[];return G(t,(function(t){a.push(aa(t,e,r).geometry.coordinates)})),g(a,o);default:throw new Error("geometry "+i+" is not supported")}},e.lineOverlap=ji,e.lineReduce=Y,e.lineSegment=Kn,e.lineSlice=function(t,e,n){var r=$(n);if("LineString"!==ot(n))throw new Error("line must be a LineString");for(var i,o=Nr(n,t),a=Nr(n,e),s=[(i=o.properties.index<=a.properties.index?[o,a]:[a,o])[0].geometry.coordinates],l=i[0].properties.index+1;l<i[1].properties.index+1;l++)s.push(r[l]);return s.push(i[1].geometry.coordinates),d(s,n.properties)},e.lineSliceAlong=Xr,e.lineSplit=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=ot(t),r=ot(e);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===r)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===r)throw new Error("splitter cannot be a GeometryCollection");var i=ni(e,{precision:7});switch(r){case"Point":return _i(t,i);case"MultiPoint":return bi(t,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return bi(t,Pr(t,i))}},e.lineString=d,e.lineStringToPolygon=Ai,e.lineStrings=f,e.lineToPolygon=Ai,e.mask=function(t,e){var n,r=dm(e),i=null;return i="FeatureCollection"===t.type?hm(2===(n=t).features.length?tu.union(n.features[0].geometry.coordinates,n.features[1].geometry.coordinates):tu.union.apply(tu,n.features.map((function(t){return t.geometry.coordinates})))):hm(tu.union(t.geometry.coordinates)),i.geometry.coordinates.forEach((function(t){r.geometry.coordinates.push(t[0])})),r},e.meta=Z,e.midpoint=function(t,e){return vn(t,_e(t,e)/2,_n(t,e))},e.moranIndex=function(t,e){var n=e.inputField,r=e.threshold||1e5,i=e.p||2,o=e.binary||!1,a=qs(t,{alpha:e.alpha||-1,binary:o,p:i,standardization:e.standardization||!0,threshold:r}),s=[];F(t,(function(t){var e=t.properties||{};s.push(e[n])}));for(var l=Vs(s),u=function(t){for(var e=Vs(t),n=0,r=0,i=t;r<i.length;r++){var o=i[r];n+=Math.pow(o-e,2)}return n/t.length}(s),c=0,h=0,d=0,f=0,p=a.length,g=0;g<p;g++){for(var m=0,y=0;y<p;y++)c+=a[g][y]*(s[g]-l)*(s[y]-l),h+=a[g][y],d+=Math.pow(a[g][y]+a[y][g],2),m+=a[g][y]+a[y][g];f+=Math.pow(m,2)}var v=c/h/u,b=-1/(p-1),_=(p*p*(d*=.5)-p*f+h*h*3)/((p-1)*(p+1)*(h*h))-b*b,x=Math.sqrt(_);return{expectedMoranIndex:b,moranIndex:v,stdNorm:x,zNorm:(v-b)/x}},e.multiLineString=g,e.multiPoint=m,e.multiPolygon=y,e.nearest=Zn,e.nearestPoint=Zn,e.nearestPointOnLine=Nr,e.nearestPointToLine=function(t,e,n){void 0===n&&(n={});var r=n.units,i=n.properties||{},o=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return z(t,(function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})})),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter((function(t){return"Point"===t.geometry.type})),t;default:throw new Error("points must be a Point Collection")}}(t);if(!o.features.length)throw new Error("points must contain features");if(!e)throw new Error("line is required");if("LineString"!==ot(e))throw new Error("line must be a LineString");var a=1/0,s=null;return F(o,(function(t){var n=Dr(t,e,{units:r});n<a&&(a=n,s=t)})),s&&(s.properties=ht({dist:a},s.properties,i)),s},e.planepoint=function(t,e){var n=Q(t),r=it(e).coordinates[0];if(r.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var i=e.properties||{},o=i.a,a=i.b,s=i.c,l=n[0],u=n[1],c=r[0][0],h=r[0][1],d=void 0!==o?o:r[0][2],f=r[1][0],p=r[1][1],g=void 0!==a?a:r[1][2],m=r[2][0],y=r[2][1],v=void 0!==s?s:r[2][2];return(v*(l-c)*(u-p)+d*(l-f)*(u-y)+g*(l-m)*(u-h)-g*(l-c)*(u-y)-v*(l-f)*(u-h)-d*(l-m)*(u-p))/((l-c)*(u-p)+(l-f)*(u-y)+(l-m)*(u-h)-(l-c)*(u-y)-(l-f)*(u-h)-(l-m)*(u-p))},e.point=l,e.pointGrid=ei,e.pointOnFeature=zr,e.pointOnLine=Nr,e.pointOnSurface=zr,e.pointToLineDistance=Dr,e.points=u,e.pointsWithinPolygon=be,e.polygon=c,e.polygonSmooth=function(t,e){var n=[],r=e.iterations||1;if(!t)throw new Error("inputPolys is required");return z(t,(function(t,e,i){var o,a,s;switch(t.type){case"Polygon":o=[[]];for(var l=0;l<r;l++)s=[[]],a=t,l>0&&(a=c(o).geometry),zs(a,s),o=s.slice(0);n.push(c(o,i));break;case"MultiPolygon":o=[[[]]];for(var u=0;u<r;u++)s=[[[]]],a=t,u>0&&(a=y(o).geometry),Us(a,s),o=s.slice(0);n.push(y(o,i));break;default:throw new Error("geometry is invalid, must be Polygon or MultiPolygon")}})),p(n)},e.polygonTangents=function(t,e){var n,r,i,o,a=$(t),s=$(e),u=K(e),c=0,h=null;switch(a[0]>u[0]&&a[0]<u[2]&&a[1]>u[1]&&a[1]<u[3]&&(c=(h=Zn(t,Sn(e))).properties.featureIndex),ot(e)){case"Polygon":n=s[0][c],r=s[0][0],null!==h&&h.geometry.coordinates[1]<a[1]&&(r=s[0][c]),o=Wi(s[0][0],s[0][s[0].length-1],a);var d=Vi(s[0],a,o,i,n,r);n=d[0],r=d[1];break;case"MultiPolygon":for(var f=0,g=0,m=0,y=0;y<s[0].length;y++){f=y;for(var v=!1,b=0;b<s[0][y].length;b++){if(g=b,m===c){v=!0;break}m++}if(v)break}n=s[0][f][g],r=s[0][f][g],o=Wi(s[0][0][0],s[0][0][s[0][0].length-1],a),s.forEach((function(t){var e=Vi(t[0],a,o,i,n,r);n=e[0],r=e[1]}))}return p([l(n),l(r)])},e.polygonToLine=Ci,e.polygonToLineString=Ci,e.polygonize=function(t){var e=da.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var n=[],r=[];return e.getEdgeRings().filter((function(t){return t.isValid()})).forEach((function(t){t.isHole()?n.push(t):r.push(t)})),n.forEach((function(t){ha.findEdgeRingContaining(t,r)&&r.push(t)})),p(r.map((function(t){return t.toPolygon()})))},e.polygons=h,e.projection=Zs,e.propEach=R,e.propReduce=D,e.propertiesContainsFilter=cl,e.radians2degrees=E,e.radiansToDegrees=E,e.radiansToDistance=_,e.radiansToLength=_,e.random=il,e.randomLineString=el,e.randomPoint=$s,e.randomPolygon=tl,e.randomPosition=Qs,e.rewind=function(t,e){if(!O(e=e||{}))throw new Error("options is invalid");var n=e.reverse||!1,r=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof r)throw new Error("<mutate> must be a boolean");!1===r&&(t=Ce(t));var i=[];switch(t.type){case"GeometryCollection":return z(t,(function(t){Xi(t,n)})),t;case"FeatureCollection":return F(t,(function(t){F(Xi(t,n),(function(t){i.push(t)}))})),p(i)}return Xi(t,n)},e.rhumbBearing=Ui,e.rhumbDestination=qi,e.rhumbDistance=Rr,e.round=b,e.sample=function(t,e){if(!t)throw new Error("featurecollection is required");if(null==e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");return p(function(t,e){for(var n,r,i=t.slice(0),o=t.length,a=o-e;o-- >a;)n=i[r=Math.floor((o+1)*Math.random())],i[r]=i[o],i[o]=n;return i.slice(a)}(t.features,e))},e.sector=function(t,e,n,r,i){if(!O(i=i||{}))throw new Error("options is invalid");var o=i.properties;if(!t)throw new Error("center is required");if(null==n)throw new Error("bearing1 is required");if(null==r)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=typeof i)throw new Error("options must be an object");if(zi(n)===zi(r))return bn(t,e,i);var a=$(t),s=Si(t,e,n,r,i),l=[[a]];return L(s,(function(t){l[0].push(t)})),l[0].push(a),c(l,o)},e.segmentEach=V,e.segmentReduce=H,e.shortestPath=function(t,e,n){if(!O(n=n||{}))throw new Error("options is invalid");var r=n.resolution,i=n.minDistance,o=n.obstacles||p([]);if(!t)throw new Error("start is required");if(!e)throw new Error("end is required");if(r&&!A(r)||r<=0)throw new Error("options.resolution must be a number, greater than 0");if(i)throw new Error("options.minDistance is not yet implemented");var s=Q(t),u=Q(e);switch(t=l(s),e=l(u),ot(o)){case"FeatureCollection":if(0===o.features.length)return d([s,u]);break;case"Polygon":o=p([a(it(o))]);break;default:throw new Error("invalid obstacles")}var c=o;c.features.push(t),c.features.push(e);var h=K(ea(gn(K(c)),1.15));r||(r=_e([h[0],h[1]],[h[2],h[1]],n)/100),c.features.pop(),c.features.pop();for(var f=h[0],g=h[1],m=h[2],y=h[3],v=r/_e([f,g],[m,g],n)*(m-f),b=r/_e([f,g],[f,y],n)*(y-g),_=m-f,x=y-g,w=Math.floor(_/v),S=Math.floor(x/b),E=(_-w*v)/2,C=[],M=[],T=[],k=[],I=1/0,P=1/0,L=y-(x-S*b)/2,N=0;L>=g;){for(var R=[],D=[],F=f+E,j=0;F<=m;){var B=l([F,L]),z=Za(B,o);R.push(z?0:1),D.push(F+"|"+L);var U=_e(B,t);!z&&U<I&&(I=U,T={x:j,y:N});var G=_e(B,e);!z&&G<P&&(P=G,k={x:j,y:N}),F+=v,j++}M.push(R),C.push(D),L-=b,N++}var q=new Ya(M,{diagonal:!0}),V=q.grid[T.y][T.x],H=q.grid[k.y][k.x],W=Wa.search(q,V,H),Y=[s];return W.forEach((function(t){var e=C[t.x][t.y].split("|");Y.push([+e[0],+e[1]])})),Y.push(u),en(d(Y))},e.simplify=function(t,e){if(!O(e=e||{}))throw new Error("options is invalid");var n=void 0!==e.tolerance?e.tolerance:1,r=e.highQuality||!1,i=e.mutate||!1;if(!t)throw new Error("geojson is required");if(n&&n<0)throw new Error("invalid tolerance");return!0!==i&&(t=Ce(t)),z(t,(function(t){!function(t,e,n){var r=t.type;if("Point"===r||"MultiPoint"===r)return t;en(t,!0);var i=t.coordinates;switch(r){case"LineString":t.coordinates=cn(i,e,n);break;case"MultiLineString":t.coordinates=i.map((function(t){return cn(t,e,n)}));break;case"Polygon":t.coordinates=hn(i,e,n);break;case"MultiPolygon":t.coordinates=i.map((function(t){return hn(t,e,n)}))}}(t,n,r)})),t},e.square=yn,e.squareGrid=fm,e.standardDeviationalEllipse=function(t,e){if(!O(e=e||{}))throw new Error("options is invalid");var n=e.steps||64,r=e.weight,i=e.properties||{};if(!A(n))throw new Error("steps must be a number");if(!O(i))throw new Error("properties must be a number");var o=B(t).length,a=Fs(t,{weight:r}),s=0,l=0,u=0;F(t,(function(t){var e=t.properties[r]||1,n=Bs($(t),$(a));s+=Math.pow(n.x,2)*e,l+=Math.pow(n.y,2)*e,u+=n.x*n.y*e}));var c=s-l,h=Math.sqrt(Math.pow(c,2)+4*Math.pow(u,2)),d=2*u,f=Math.atan((c+h)/d),g=180*f/Math.PI,m=0,y=0,v=0;F(t,(function(t){var e=t.properties[r]||1,n=Bs($(t),$(a));m+=Math.pow(n.x*Math.cos(f)-n.y*Math.sin(f),2)*e,y+=Math.pow(n.x*Math.sin(f)+n.y*Math.cos(f),2)*e,v+=e}));var b=Math.sqrt(2*m/v),_=Math.sqrt(2*y/v),x=Rs(a,b,_,{units:"degrees",angle:g,steps:n,properties:i}),w=be(t,p([x])),S={meanCenterCoordinates:$(a),semiMajorAxis:b,semiMinorAxis:_,numberOfFeatures:o,angle:g,percentageWithinEllipse:100*B(w).length/o};return x.properties.standardDeviationalEllipse=S,x},e.tag=function(t,e,n,r){return t=Ce(t),e=Ce(e),F(t,(function(t){t.properties||(t.properties={}),F(e,(function(e){void 0===t.properties[r]&&ye(t,e)&&(t.properties[r]=e.properties[n])}))})),t},e.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=Jn(t.geometry.coordinates):t.geometry.coordinates.forEach((function(t){e.features=e.features.concat(Jn(t))})),e},e.tin=xe,e.toMercator=Hs,e.toWgs84=Ws,e.transformRotate=ta,e.transformScale=ea,e.transformTranslate=function(t,e,n,r){if(!O(r=r||{}))throw new Error("options is invalid");var i=r.units,o=r.zTranslation,a=r.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===e&&0===o)return t;if(null==n||isNaN(n))throw new Error("direction is required");return e<0&&(e=-e,n+=180),!1!==a&&void 0!==a||(t=Ce(t)),L(t,(function(t){var r=$(qi(t,e,n,{units:i}));t[0]=r[0],t[1]=r[1],o&&3===t.length&&(t[2]+=o)})),t},e.triangleGrid=pm,e.truncate=ni,e.union=function(t,e,n){void 0===n&&(n={});var r=it(t),i=it(e),o=tu.union(r.coordinates,i.coordinates);return 0===o.length?null:1===o.length?c(o[0],n.properties):y(o,n.properties)},e.unitsFactors=i,e.unkinkPolygon=function(t){var e=[];return G(t,(function(t){"Polygon"===t.geometry.type&&F(ai(t),(function(n){e.push(c(n.geometry.coordinates,t.properties))}))})),p(e)},e.validateBBox=k,e.validateId=I,e.voronoi=function(t,e){if(!O(e=e||{}))throw new Error("options is invalid");var n=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(n))throw new Error("bbox is invalid");return rt(t,"Point","points"),p(function(){var t=Qa,e=$a,n=null;function r(r){return new Ls(r.map((function(n,i){var o=[Math.round(t(n,i,r)/ks)*ks,Math.round(e(n,i,r)/ks)*ks];return o.index=i,o.data=n,o})),n)}return r.polygons=function(t){return r(t).polygons()},r.links=function(t){return r(t).links()},r.triangles=function(t){return r(t).triangles()},r.x=function(e){return arguments.length?(t="function"==typeof e?e:Ka(+e),r):t},r.y=function(t){return arguments.length?(e="function"==typeof t?t:Ka(+t),r):e},r.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],r):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},r.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],r):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},r}().x((function(t){return t.geometry.coordinates[0]})).y((function(t){return t.geometry.coordinates[1]})).extent([[n[0],n[1]],[n[2],n[3]]]).polygons(t.features).map(Ns))},e.within=be,Object.defineProperty(e,"__esModule",{value:!0})}))}).call(this,n("4362"))},"5a43":function(t,e){function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}t.exports=n,t.exports.__esModule=!0,t.exports["default"]=t.exports},"5bc2":function(t,e,n){"use strict";(function(e,r){var i=n("3913");function o(t){var e=this;this.next=null,this.entry=null,this.finish=function(){D(e,t)}}t.exports=b;var a,s=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?setImmediate:i.nextTick;b.WritableState=v;var l=Object.create(n("3a7c"));l.inherits=n("3fb5");var u={deprecate:n("b7d1")},c=n("1ad6"),h=n("8707").Buffer,d=("undefined"!==typeof r?r:"undefined"!==typeof window?window:"undefined"!==typeof self?self:{}).Uint8Array||function(){};function f(t){return h.from(t)}function p(t){return h.isBuffer(t)||t instanceof d}var g,m=n("c69f");function y(){}function v(t,e){a=a||n("1715"),t=t||{};var r=e instanceof a;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,s=t.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(s||0===s)?s:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var u=!1===t.decodeStrings;this.decodeStrings=!u,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){T(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function b(t){if(a=a||n("1715"),!g.call(b,this)&&!(this instanceof a))return new b(t);this._writableState=new v(t,this),this.writable=!0,t&&("function"===typeof t.write&&(this._write=t.write),"function"===typeof t.writev&&(this._writev=t.writev),"function"===typeof t.destroy&&(this._destroy=t.destroy),"function"===typeof t.final&&(this._final=t.final)),c.call(this)}function _(t,e){var n=new Error("write after end");t.emit("error",n),i.nextTick(e,n)}function x(t,e,n,r){var o=!0,a=!1;return null===n?a=new TypeError("May not write null values to stream"):"string"===typeof n||void 0===n||e.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(t.emit("error",a),i.nextTick(r,a),o=!1),o}function w(t,e,n){return t.objectMode||!1===t.decodeStrings||"string"!==typeof e||(e=h.from(e,n)),e}function S(t,e,n,r,i,o){if(!n){var a=w(e,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=e.objectMode?1:r.length;e.length+=s;var l=e.length<e.highWaterMark;if(l||(e.needDrain=!0),e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else E(t,e,!1,s,r,i,o);return l}function E(t,e,n,r,i,o,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function C(t,e,n,r,o){--e.pendingcb,n?(i.nextTick(o,r),i.nextTick(N,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(o(r),t._writableState.errorEmitted=!0,t.emit("error",r),N(t,e))}function M(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function T(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(M(n),e)C(t,n,r,e,i);else{var o=I(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||k(t,n),r?s(A,t,n,o,i):A(t,n,o,i)}}function A(t,e,n,r){n||O(t,e),e.pendingcb--,r(),N(t,e)}function O(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function k(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),a=e.corkedRequestsFree;a.entry=n;var s=0,l=!0;while(n)i[s]=n,n.isBuf||(l=!1),n=n.next,s+=1;i.allBuffers=l,E(t,e,!0,e.length,i,"",a.finish),e.pendingcb++,e.lastBufferedRequest=null,a.next?(e.corkedRequestsFree=a.next,a.next=null):e.corkedRequestsFree=new o(e),e.bufferedRequestCount=0}else{while(n){var u=n.chunk,c=n.encoding,h=n.callback,d=e.objectMode?1:u.length;if(E(t,e,!1,d,u,c,h),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function I(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function P(t,e){t._final((function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),N(t,e)}))}function L(t,e){e.prefinished||e.finalCalled||("function"===typeof t._final?(e.pendingcb++,e.finalCalled=!0,i.nextTick(P,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function N(t,e){var n=I(e);return n&&(L(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}function R(t,e,n){e.ending=!0,N(t,e),n&&(e.finished?i.nextTick(n):t.once("finish",n)),e.ended=!0,t.writable=!1}function D(t,e,n){var r=t.entry;t.entry=null;while(r){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree.next=t}l.inherits(b,c),v.prototype.getBuffer=function(){var t=this.bufferedRequest,e=[];while(t)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(v.prototype,"buffer",{get:u.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(g=Function.prototype[Symbol.hasInstance],Object.defineProperty(b,Symbol.hasInstance,{value:function(t){return!!g.call(this,t)||this===b&&(t&&t._writableState instanceof v)}})):g=function(t){return t instanceof this},b.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},b.prototype.write=function(t,e,n){var r=this._writableState,i=!1,o=!r.objectMode&&p(t);return o&&!h.isBuffer(t)&&(t=f(t)),"function"===typeof e&&(n=e,e=null),o?e="buffer":e||(e=r.defaultEncoding),"function"!==typeof n&&(n=y),r.ended?_(this,n):(o||x(this,r,t,n))&&(r.pendingcb++,i=S(this,r,o,t,e,n)),i},b.prototype.cork=function(){var t=this._writableState;t.corked++},b.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||k(this,t))},b.prototype.setDefaultEncoding=function(t){if("string"===typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(b.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),b.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},b.prototype._writev=null,b.prototype.end=function(t,e,n){var r=this._writableState;"function"===typeof t?(n=t,t=null,e=null):"function"===typeof e&&(n=e,e=null),null!==t&&void 0!==t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||R(this,r,n)},Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),b.prototype.destroy=m.destroy,b.prototype._undestroy=m.undestroy,b.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,n("4362"),n("c8ba"))},"5bc3":function(t,e,n){var r=n("a395");function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,r(i.key),i)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}t.exports=o,t.exports.__esModule=!0,t.exports["default"]=t.exports},"5bc9":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Base=void 0;var r=function(){function t(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}return t.prototype.layout=function(t){return this.init(t),this.execute(!0)},t.prototype.init=function(t){this.nodes=t.nodes||[],this.edges=t.edges||[],this.combos=t.combos||[],this.comboEdges=t.comboEdges||[],this.hiddenNodes=t.hiddenNodes||[],this.hiddenEdges=t.hiddenEdges||[],this.hiddenCombos=t.hiddenCombos||[],this.vedges=t.vedges||[]},t.prototype.execute=function(t){},t.prototype.executeWithWorker=function(){},t.prototype.getDefaultCfg=function(){return{}},t.prototype.updateCfg=function(t){t&&Object.assign(this,t)},t.prototype.getType=function(){return"base"},t.prototype.destroy=function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0},t}();e.Base=r},"5bd7":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["ignore_unavailable","allow_no_indices","expand_wildcards","flat_settings","local","include_defaults","pretty","human","error_trace","source","filter_path"],a={ignoreUnavailable:"ignore_unavailable",allowNoIndices:"allow_no_indices",expandWildcards:"expand_wildcards",flatSettings:"flat_settings",includeDefaults:"include_defaults",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,name:f,...p}=t;p=i(o,a,p,u),null==c&&(c="GET");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m=null!=d&&null!=f?"/"+encodeURIComponent(d)+"/_settings/"+encodeURIComponent(f):null!=d?"/"+encodeURIComponent(d)+"/_settings":null!=f?"/_settings/"+encodeURIComponent(f):"/_settings";const y={method:c,path:m,body:null,querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},"5beb":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["refresh","timeout","wait_for_active_shards","wait_for_completion","requests_per_second","slices","pretty","human","error_trace","source","filter_path"],a={waitForActiveShards:"wait_for_active_shards",waitForCompletion:"wait_for_completion",requestsPerSecond:"requests_per_second",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["body"]){const t=new n("Missing required parameter: body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,...d}=t;d=i(o,a,d,u),null==c&&(c="POST");var f=s.ignore;"number"===typeof f&&(s.ignore=[f]);var p="";p="/_reindex";const g={method:c,path:p,body:h||"",querystring:d};return s.warnings=0===u.length?null:u,e(g,s,l)}}t.exports=r},"5c29":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["format","bytes","local","master_timeout","h","health","help","pri","s","v","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,...f}=t;f=i(o,a,f,u),null==c&&(c="GET");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g=null!=d?"/_cat/indices/"+encodeURIComponent(d):"/_cat/indices";const m={method:c,path:g,body:null,querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},"5c2e":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("7908"),i=function(t){t.graph().dummyChains=[],t.edges().forEach((function(e){return o(t,e)}))},o=function(t,e){var n=e.v,i=t.node(n).rank,o=e.w,a=t.node(o).rank,s=e.name,l=t.edge(e),u=l.labelRank;if(a!==i+1){t.removeEdgeObj(e);var c,h,d,f=t.graph();for(d=0,++i;i<a;++d,++i)l.points=[],h={edgeLabel:l,width:0,height:0,edgeObj:e,rank:i},c=(0,r.addDummyNode)(t,"edge",h,"_d"),i===u&&(h.width=l.width,h.height=l.height,h.dummy="edge-label",h.labelpos=l.labelpos),t.setEdge(n,c,{weight:l.weight},s),0===d&&(f.dummyChains||(f.dummyChains=[]),f.dummyChains.push(c)),n=c;t.setEdge(n,o,{weight:l.weight},s)}},a=function(t){var e;null===(e=t.graph().dummyChains)||void 0===e||e.forEach((function(e){var n,r=t.node(e),i=r.edgeLabel;r.edgeObj&&t.setEdgeObj(r.edgeObj,i);var o=e;while(r.dummy)n=t.successors(o)[0],t.removeNode(o),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),o=n,r=t.node(o)}))};e.default={run:i,undo:a}},"5c64":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["verbose","pretty","human","error_trace","source","filter_path"],a={errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["body"]){const t=new n("Missing required parameter: body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,id:d,...f}=t;f=i(o,a,f,u),null==c&&(c=null==h?"GET":"POST");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g=null!=d?"/_ingest/pipeline/"+encodeURIComponent(d)+"/_simulate":"/_ingest/pipeline/_simulate";const m={method:c,path:g,body:h||"",querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},"5c88":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["explain","ignore_unavailable","allow_no_indices","expand_wildcards","operation_threading","q","analyzer","analyze_wildcard","default_operator","df","lenient","rewrite","all_shards","pretty","human","error_trace","source","filter_path"],a={ignoreUnavailable:"ignore_unavailable",allowNoIndices:"allow_no_indices",expandWildcards:"expand_wildcards",operationThreading:"operation_threading",analyzeWildcard:"analyze_wildcard",defaultOperator:"default_operator",allShards:"all_shards",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t["type"]&&null==t["index"]){const t=new n("Missing required parameter of the url: index");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,type:f,...p}=t;p=i(o,a,p,u),null==c&&(c=null==h?"GET":"POST");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m=null!=d&&null!=f?"/"+encodeURIComponent(d)+"/"+encodeURIComponent(f)+"/_validate/query":null!=d?"/"+encodeURIComponent(d)+"/_validate/query":"/_validate/query";const y={method:c,path:m,body:h||"",querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},"5c9f":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["preference","routing","local","ignore_unavailable","allow_no_indices","expand_wildcards","pretty","human","error_trace","source","filter_path"],a={ignoreUnavailable:"ignore_unavailable",allowNoIndices:"allow_no_indices",expandWildcards:"expand_wildcards",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=t["type"]&&null==t["index"]){const t=new n("Missing required parameter of the url: index");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,type:f,...p}=t;p=i(o,a,p,u),null==c&&(c=null==h?"GET":"POST");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m=null!=d&&null!=f?"/"+encodeURIComponent(d)+"/"+encodeURIComponent(f)+"/_search_shards":null!=d?"/"+encodeURIComponent(d)+"/_search_shards":"/_search_shards";const y={method:c,path:m,body:"",querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},"5cb0":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.LinkedListNode=void 0;var r=function(t,e){return t===e},i=function(){function t(t,e){void 0===e&&(e=null),this.value=t,this.next=e}return t.prototype.toString=function(t){return t?t(this.value):"".concat(this.value)},t}();e.LinkedListNode=i;var o=function(){function t(t){void 0===t&&(t=r),this.head=null,this.tail=null,this.compare=t}return t.prototype.prepend=function(t){var e=new i(t,this.head);return this.head=e,this.tail||(this.tail=e),this},t.prototype.append=function(t){var e=new i(t);return this.head?(this.tail.next=e,this.tail=e,this):(this.head=e,this.tail=e,this)},t.prototype.delete=function(t){if(!this.head)return null;var e=null;while(this.head&&this.compare(this.head.value,t))e=this.head,this.head=this.head.next;var n=this.head;if(null!==n)while(n.next)this.compare(n.next.value,t)?(e=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,t)&&(this.tail=n),e},t.prototype.find=function(t){var e=t.value,n=void 0===e?void 0:e,r=t.callback,i=void 0===r?void 0:r;if(!this.head)return null;var o=this.head;while(o){if(i&&i(o.value))return o;if(void 0!==n&&this.compare(o.value,n))return o;o=o.next}return null},t.prototype.deleteTail=function(){var t=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,t;var e=this.head;while(e.next)e.next.next?e=e.next:e.next=null;return this.tail=e,t},t.prototype.deleteHead=function(){if(!this.head)return null;var t=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),t},t.prototype.fromArray=function(t){var e=this;return t.forEach((function(t){return e.append(t)})),this},t.prototype.toArray=function(){var t=[],e=this.head;while(e)t.push(e),e=e.next;return t},t.prototype.reverse=function(){var t=this.head,e=null,n=null;while(t)n=t.next,t.next=e,e=t,t=n;this.tail=this.head,this.head=e},t.prototype.toString=function(t){return void 0===t&&(t=void 0),this.toArray().map((function(e){return e.toString(t)})).toString()},t}(),a=o;e.default=a},"5d6f":function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.DistanceType=void 0,e.DistanceType=r,function(t){t["EuclideanDistance"]="euclideanDistance"}(r||(e.DistanceType=r={}))},"5f33":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("7908"),i=function(t,e,n){var i=(0,r.zipObject)(n,n.map((function(t,e){return e}))),o=e.map((function(e){var n,r=null===(n=t.outEdges(e))||void 0===n?void 0:n.map((function(e){return{pos:i[e.w]||0,weight:t.edge(e).weight}}));return null===r||void 0===r?void 0:r.sort((function(t,e){return t.pos-e.pos}))})),a=o.flat().filter((function(t){return void 0!==t})),s=1;while(s<n.length)s<<=1;var l=2*s-1;s-=1;var u=Array(l).fill(0,0,l),c=0;return null===a||void 0===a||a.forEach((function(t){if(t){var e=t.pos+s;u[e]+=t.weight;var n=0;while(e>0)e%2&&(n+=u[e+1]),e=e-1>>1,u[e]+=t.weight;c+=t.weight*n}})),c},o=function(t,e){for(var n=0,r=1;r<(null===e||void 0===e?void 0:e.length);r+=1)n+=i(t,e[r-1],e[r]);return n};e.default=o},6098:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t["default"]=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var l=a(n("0a4a")),u=s(n("7ef3")),c=s(n("cb77")),h=n("13d2e");function d(t,e){var n=t.nodes,i=t.edges,o=e.width,a=e.height;if(!(null===n||void 0===n?void 0:n.length))return Promise.resolve();var s=[];n.forEach((function(t){var e=i.filter((function(e){return e.source===t.id||e.target===t.id}));if(e.length>1){var n=r({},t);delete n.size,s.push(n)}}));var d=[];i.forEach((function(t){var e=s.find((function(e){return e.id===t.source})),n=s.find((function(e){return e.id===t.target}));e&&n&&d.push(t)}));var f=new h.DagreLayout({type:"dagre",ranksep:e.nodeMinGap,nodesep:e.nodeMinGap}),p=f.layout({nodes:s,edges:d}).nodes;n.forEach((function(t){var e=(p||[]).find((function(e){return e.id===t.id}));t.x=(null===e||void 0===e?void 0:e.x)||o/2,t.y=(null===e||void 0===e?void 0:e.y)||a/2}));var g=JSON.parse(JSON.stringify(n)),m=JSON.parse(JSON.stringify(i)),y=l.forceSimulation().nodes(g).force("link",l.forceLink(m).id((function(t){return t.id})).distance((function(t){var e=d.find((function(e){return e.source===t.source&&e.target===t.target}));return e?30:20}))).force("charge",l.forceManyBody()).force("center",l.forceCenter(o/2,a/2)).force("x",l.forceX(o/2)).force("y",l.forceY(a/2)).alpha(.3).alphaDecay(.08).alphaMin(.001),v=new Promise((function(t){y.on("end",(function(){n.forEach((function(t){var e=g.find((function(e){return e.id===t.id}));e&&(t.x=e.x,t.y=e.y)}));var r=Math.min.apply(Math,n.map((function(t){return t.x}))),s=Math.max.apply(Math,n.map((function(t){return t.x}))),l=Math.min.apply(Math,n.map((function(t){return t.y}))),h=Math.max.apply(Math,n.map((function(t){return t.y}))),d=o/(s-r),f=a/(h-l);n.forEach((function(t){void 0!==t.x&&d<1&&(t.x=(t.x-r)*d),void 0!==t.y&&f<1&&(t.y=(t.y-l)*f)})),n.forEach((function(t){t.sizeTemp=t.size,t.size=[10,10]})),(0,c.default)(n,i),n.forEach((function(t){t.size=t.sizeTemp||[],delete t.sizeTemp})),(0,u.default)({nodes:n,edges:i},e),t()}))}));return v}e.default=d},"60d9":function(t,e,n){"use strict";const{PassThrough:r}=n("d485"),i=n("470b"),o=n("aacb"),a=t=>{const e=(t.headers["content-encoding"]||"").toLowerCase();if(!["gzip","deflate","br"].includes(e))return t;const n="br"===e;if(n&&"function"!==typeof i.createBrotliDecompress)return t;const a=n?i.createBrotliDecompress():i.createUnzip(),s=new r;return o(t,s),a.on("error",t=>{"Z_BUF_ERROR"!==t.code?s.emit("error",t):s.end()}),t.pipe(a).pipe(s),s};t.exports=a,t.exports.default=a},"60ed":function(t,e,n){var r=n("3729"),i=n("2dcb"),o=n("1310"),a="[object Object]",s=Function.prototype,l=Object.prototype,u=s.toString,c=l.hasOwnProperty,h=u.call(Object);function d(t){if(!o(t)||r(t)!=a)return!1;var e=i(t);if(null===e)return!0;var n=c.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==h}t.exports=d},"61bc":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n("16c7")),i=n("dcfe");function o(t){return t&&t.__esModule?t:{default:t}}var a=function(t,e,n,o){void 0===e&&(e=!1),void 0===n&&(n="weight"),void 0===o&&(o=1e3);var a=t.nodes,s=void 0===a?[]:a,l=t.edges,u=void 0===l?[]:l,c={},h={};s.forEach((function(t,e){var n=(0,i.uniqueId)();t.clusterId=n,c[n]={id:n,nodes:[t]},h[t.id]={node:t,idx:e}}));var d=(0,r.default)(t,e),f=[],p={};d.forEach((function(t,e){var n=0,r=s[e].id;p[r]={},t.forEach((function(t,e){if(t){n+=t;var i=s[e].id;p[r][i]=t}})),f.push(n)}));var g=0,m=function(){var t=!1;if(s.forEach((function(e){var n={};Object.keys(p[e.id]).forEach((function(t){var r=p[e.id][t],i=h[t].node,o=i.clusterId;n[o]||(n[o]=0),n[o]+=r}));var r=-1/0,i=[];if(Object.keys(n).forEach((function(t){r<n[t]?(r=n[t],i=[t]):r===n[t]&&i.push(t)})),1!==i.length||i[0]!==e.clusterId){var o=i.indexOf(e.clusterId);if(o>=0&&i.splice(o,1),i&&i.length){t=!0;var a=c[e.clusterId],s=a.nodes.indexOf(e);a.nodes.splice(s,1);var l=Math.floor(Math.random()*i.length),u=c[i[l]];u.nodes.push(e),e.clusterId=u.id}}})),!t)return"break";g++};while(g<o){var y=m();if("break"===y)break}Object.keys(c).forEach((function(t){var e=c[t];e.nodes&&e.nodes.length||delete c[t]}));var v=[],b={};u.forEach((function(t){var e=t.source,r=t.target,i=t[n]||1,o=h[e].node.clusterId,a=h[r].node.clusterId,s="".concat(o,"---").concat(a);if(b[s])b[s].weight+=i,b[s].count++;else{var l={source:o,target:a,weight:i,count:1};b[s]=l,v.push(l)}}));var _=[];return Object.keys(c).forEach((function(t){_.push(c[t])})),{clusters:_,clusterEdges:v}},s=a;e.default=s},6299:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.arrayToTextureData=e.attributesToTextureData=e.buildTextureDataWithTwoEdgeAttr=e.buildTextureData=e.proccessToFunc=void 0;var r=n("f271"),i=n("19d2"),o=function(t,e){var n;return n=t?(0,r.isNumber)(t)?function(){return t}:t:function(){return e||1},n};e.proccessToFunc=o;var a=function(t,e){var n=[],r=[],o={},a=0;for(a=0;a<t.length;a++){var s=t[a];o[s.id]=a,n.push(s.x),n.push(s.y),n.push(0),n.push(0),r.push([])}for(a=0;a<e.length;a++){var l=e[a],u=(0,i.getEdgeTerminal)(l,"source"),c=(0,i.getEdgeTerminal)(l,"target");isNaN(o[u])||isNaN(o[c])||(r[o[u]].push(o[c]),r[o[c]].push(o[u]))}var h=0;for(a=0;a<t.length;a++){var d=n.length,f=r[a],p=f.length;n[4*a+2]=d,n[4*a+3]=p,h=Math.max(h,p);for(var g=0;g<p;++g){var m=f[g];n.push(+m)}}while(n.length%4!==0)n.push(0);return{maxEdgePerVetex:h,array:new Float32Array(n)}};e.buildTextureData=a;var s=function(t,e,n,r){var o=[],a=[],s={},l=0;for(l=0;l<t.length;l++){var u=t[l];s[u.id]=l,o.push(u.x),o.push(u.y),o.push(0),o.push(0),a.push([])}for(l=0;l<e.length;l++){var c=e[l],h=(0,i.getEdgeTerminal)(c,"source"),d=(0,i.getEdgeTerminal)(c,"target");a[s[h]].push(s[d]),a[s[h]].push(n(c)),a[s[h]].push(r(c)),a[s[h]].push(0),a[s[d]].push(s[h]),a[s[d]].push(n(c)),a[s[d]].push(r(c)),a[s[d]].push(0)}var f=0;for(l=0;l<t.length;l++){var p=o.length,g=a[l],m=g.length;o[4*l+2]=p+1048576*m/4,o[4*l+3]=0,f=Math.max(f,m/4);for(var y=0;y<m;++y){var v=g[y];o.push(+v)}}while(o.length%4!==0)o.push(0);return{maxEdgePerVetex:f,array:new Float32Array(o)}};e.buildTextureDataWithTwoEdgeAttr=s;var l=function(t,e){var n=[],r=t.length,i={};return e.forEach((function(e){t.forEach((function(t,o){if(void 0===i[e[t]]&&(i[e[t]]=Object.keys(i).length),n.push(i[e[t]]),o===r-1)while(n.length%4!==0)n.push(0)}))})),{array:new Float32Array(n),count:Object.keys(i).length}};e.attributesToTextureData=l;var u=function(t){for(var e=[],n=t.length,r=t[0].length,i=function(r){t.forEach((function(t,i){if(e.push(t[r]),i===n-1)while(e.length%4!==0)e.push(0)}))},o=0;o<r;o++)i(o);return new Float32Array(e)};e.arrayToTextureData=u},"62a7":function(t,e,n){"use strict";t.exports=i,t.exports.default=i;var r=n("5861");function i(t,e){if(!(this instanceof i))return new i(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function o(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function a(t,e){s(t,0,t.children.length,e,t)}function s(t,e,n,r,i){i||(i=y(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,a=e;a<n;a++)o=t.children[a],l(i,t.leaf?r(o):o);return i}function l(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function u(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function h(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function d(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function p(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}function g(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function m(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function y(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(t,e,n,i,o){var a,s=[e,n];while(s.length)n=s.pop(),e=s.pop(),n-e<=i||(a=e+Math.ceil((n-e)/i/2)*i,r(t,a,e,n,o),s.push(e,a,a,n))}i.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!m(t,e))return n;var i,o,a,s,l=[];while(e){for(i=0,o=e.children.length;i<o;i++)a=e.children[i],s=e.leaf?r(a):a,m(t,s)&&(e.leaf?n.push(a):g(t,s)?this._all(a,n):l.push(a));e=l.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!m(t,e))return!1;var r,i,o,a,s=[];while(e){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],a=e.leaf?n(o):o,m(t,a)){if(e.leaf||g(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=y([]),this},remove:function(t,e){if(!t)return this;var n,r,i,a,s=this.data,l=this.toBBox(t),u=[],c=[];while(s||u.length){if(s||(s=u.pop(),r=u[u.length-1],n=c.pop(),a=!0),s.leaf&&(i=o(t,s.children,e),-1!==i))return s.children.splice(i,1),u.push(s),this._condense(u),this;a||s.leaf||!g(s,l)?r?(n++,s=r.children[n],a=!1):s=null:(u.push(s),c.push(n),n=0,r=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:u,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){var n=[];while(t)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return i=y(t.slice(e,n+1)),a(i,this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),i=y([]),i.leaf=!1,i.height=r;var l,u,c,h,d=Math.ceil(o/s),f=d*Math.ceil(Math.sqrt(s));for(v(t,e,n,f,this.compareMinX),l=e;l<=n;l+=f)for(c=Math.min(l+f-1,n),v(t,l,c,d,this.compareMinY),u=l;u<=c;u+=d)h=Math.min(u+d-1,c),i.children.push(this._build(t,u,h,r-1));return a(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){var i,o,a,s,l,u,c,d;while(1){if(r.push(e),e.leaf||r.length-1===n)break;for(c=d=1/0,i=0,o=e.children.length;i<o;i++)a=e.children[i],l=h(a),u=f(t,a)-l,u<d?(d=u,c=l<c?l:c,s=a):u===d&&l<c&&(c=l,s=a);e=s||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],a=this._chooseSubtree(i,this.data,e,o);a.children.push(t),l(a,i);while(e>=0){if(!(o[e].children.length>this._maxEntries))break;this._split(o,e),e--}this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=y(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,a(n,this.toBBox),a(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=y([t,e]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,a,l,u,c,d;for(u=c=1/0,r=e;r<=n-e;r++)i=s(t,0,r,this.toBBox),o=s(t,r,n,this.toBBox),a=p(i,o),l=h(i)+h(o),a<u?(u=a,d=r,c=l<c?l:c):a===u&&l<c&&(c=l,d=r);return d},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:u,i=t.leaf?this.compareMinY:c,o=this._allDistMargin(t,e,n,r),a=this._allDistMargin(t,e,n,i);o<a&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,a=this.toBBox,u=s(t,0,e,a),c=s(t,n-e,n,a),h=d(u)+d(c);for(i=e;i<n-e;i++)o=t.children[i],l(u,t.leaf?a(o):o),h+=d(u);for(i=n-e-1;i>=e;i--)o=t.children[i],l(c,t.leaf?a(o):o),h+=d(c);return h},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)l(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children,e.splice(e.indexOf(t[n]),1)):this.clear():a(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},"634b":function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n("711c"),e)},"649f":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n("9ab4"),i=l(n("0253")),o=l(n("ada5")),a=l(n("9b96")),s=n("dcfe");function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t,e,n,r){void 0===n&&(n="cluster"),void 0===r&&(r=2);var i=[],o=t.nodes;return e.forEach((function(t,e){i.push(c(o,t,e,n,r))})),i},c=function(t,e,n,r,i){var o=[n],a=[],s={};return e.forEach((function(e,l){if(e<=i&&n!==l){o.push(l),a.push(t[l]);var u=t[l][r];s[u]?(s[u].count++,s[u].dists.push(e)):s[u]={count:1,dists:[e]}}})),Object.keys(s).forEach((function(t){s[t].dists=s[t].dists.sort((function(t,e){return t-e}))})),{nodeIdx:n,nodeId:t[n].id,nodeIdxs:o,neighbors:a,neighborNum:o.length-1,nodeLabelCountMap:s}},h=function(t,e,n,r,i){var o=Math.ceil(n/e),a={},s=0;return r.forEach((function(t,r){var l=0,u=0,c=t.nodeIdxs,h=t.neighborNum-1;while(l<o){var d=c[1+Math.floor(Math.random()*h)],f=0;while(a["".concat(r,"-").concat(d)]||a["".concat(d,"-").concat(r)])if(d=Math.floor(Math.random()*e),f++,f>2*e)break;if(f<2*e&&(a["".concat(r,"-").concat(d)]={start:r,end:d,distance:i[r][d]},l++,s++,s>=n))return a;if(u++,u>2*e)break}if(l<o){var p=o-l;o=(o+p)/(e-r-1)}})),a},d=function(t,e,n,r){var i=n.nodes;return r||(r={}),Object.keys(t).forEach((function(o){var a,s;if(!r||!r[o]){r[o]={nodes:[],edges:[]};var l=t[o],u=null===(a=e[l.start])||void 0===a?void 0:a.nodeIdxs,c=null===(s=e[l.end])||void 0===s?void 0:s.nodeIdxs;if(u&&c){var h=new Set(c),d=u.filter((function(t){return h.has(t)}));if(d&&d.length){for(var f={},p=d.length,g=0;g<p;g++){var m=i[d[g]];r[o].nodes.push(m),f[m.id]=!0}n.edges.forEach((function(t){f[t.source]&&f[t.target]&&r[o].edges.push(t)}))}}}})),r},f=function(t,e,n,r){var i,o,a={};t.nodes.forEach((function(t){a[t.id]=t}));var s=0;return!(null===(i=null===e||void 0===e?void 0:e.edges)||void 0===i?void 0:i.length)||(null===(o=null===e||void 0===e?void 0:e.nodes)||void 0===o?void 0:o.length)<2?0:(t.edges.forEach((function(t){var i=a[t.source][n],o=a[t.target][n],l=null===e||void 0===e?void 0:e.nodes[0][n],u=null===e||void 0===e?void 0:e.nodes[1][n],c=null===e||void 0===e?void 0:e.edges[0][r];t[r]===c&&(i===l&&o===u||i===u&&o===l)&&s++})),s)},p=function(t,e,n){for(var r=1/0,i=0,o=function(e){var n=t[e],o=Object.keys(n).sort((function(t,e){return n[t]-n[e]})),a=10,s=[];o.forEach((function(t,e){s[e%a]||(s[e%a]={graphs:[],totalCount:0,aveCount:0}),s[e%a].graphs.push(t),s[e%a].totalCount+=n[t]}));var l=0,u=[];s.forEach((function(t){var e=t.totalCount/t.graphs.length;t.aveCount=e,u.push(e);var r=0,i=t.length;t.graphs.forEach((function(e,i){var o=n[e];t.graphs.forEach((function(t,e){i!==e&&(r+=Math.abs(o-n[t]))}))})),r/=i*(i-1)/2,l+=r})),l/=s.length;var c=0;u.forEach((function(t,e){u.forEach((function(n,r){e!==r&&(c+=Math.abs(t-n))})),c/=u.length*(u.length-1)/2}));var h=c-l;r<h&&(r=h,i=e)},a=0;a<e;a++)o(a);return{structure:n[i],structureCountMap:t[i]}},g=function(t,e){var n={},r={};return t.forEach((function(t,i){n[t.id]={idx:i,node:t,degree:0,inDegree:0,outDegree:0};var o=t[e];r[o]||(r[o]=[]),r[o].push(t)})),{nodeMap:n,nodeLabelMap:r}},m=function(t,e,n){var r={},i={};return t.forEach((function(t,o){r["".concat(s.uniqueId)]={idx:o,edge:t};var a=t[e];i[a]||(i[a]=[]),i[a].push(t);var l=n[t.source];l&&(l.degree++,l.outDegree++);var u=n[t.target];u&&(u.degree++,u.inDegree++)})),{edgeMap:r,edgeLabelMap:i}},y=function(t,e,n){var r=e.length,i={};return e.forEach((function(e,o){for(var a=n?0:o+1,s=t[o].id,l=a;l<r;l++)if(o!==l){var u=t[l].id,c=e[l];i["".concat(s,"-").concat(u)]=c,n||(i["".concat(u,"-").concat(s)]=c)}})),i},v=function(t,e,n,r,i,o,a,s,l,u,c){var h,p="".concat(e.id,"-").concat(n.id);if(u&&u[p])return u[p];var g=c?c[p]:void 0;if(!g){var m=(h={},h[p]={start:r[e.id].idx,end:r[n.id].idx,distance:i},h);c=d(m,o,t,c),g=c[p]}return f(g,a,s,l)},b=function(t,e,n,r){var i,o,a,s=null===(i=t[e])||void 0===i?void 0:i.degree,l=null===(o=t[e])||void 0===o?void 0:o.inDegree,u=null===(a=t[e])||void 0===a?void 0:a.outDegree;return void 0===t[e]&&(s=1/0,l=1/0,u=1/0,r[e].forEach((function(t){var e=n[t.id].degree;s>e&&(s=e);var r=n[t.id].inDegree;l>r&&(l=r);var i=n[t.id].outDegree;u>i&&(u=i)})),t[e]={degree:s,inDegree:l,outDegree:u}),{minPatternNodeLabelDegree:s,minPatternNodeLabelInDegree:l,minPatternNodeLabelOutDegree:u}},_=function(t,e,n,s,l,_,x){var w;if(void 0===n&&(n=!1),void 0===_&&(_="cluster"),void 0===x&&(x="cluster"),t&&t.nodes){var S=t.nodes.length;if(S){var E=(0,i.default)(t,n),C=(0,i.default)(e,n),M=y(t.nodes,E,n),T=y(e.nodes,C,n),A=g(t.nodes,_),O=A.nodeMap,k=A.nodeLabelMap,I=g(e.nodes,_),P=I.nodeMap,L=I.nodeLabelMap;m(t.edges,x,O);var N=m(e.edges,x,P).edgeLabelMap,R=[];null===C||void 0===C||C.forEach((function(t){R=R.concat(t)})),l||(l=Math.max.apply(Math,(0,r.__spreadArray)((0,r.__spreadArray)([],R,!1),[2],!1))),s||(s=l);var D=u(t,E,_,s),F=u(e,C,_,s),j=Math.min(100,S*(S-1)/2),B=h(s,S,j,D,E),z=d(B,D,t),U=10,G=1,q=1,V=4,H={graphs:z,nodeLabelProp:_,edgeLabelProp:x,minSupport:G,minNodeNum:q,maxNodeNum:V,directed:n},W=(0,o.default)(H).slice(0,U),Y=W.length,X=[];W.forEach((function(t,e){X[e]={},Object.keys(z).forEach((function(n){var r=z[n],i=f(r,t,_,x);X[e][n]=i}))}));var J=p(X,Y,W),Z=J.structure,K=J.structureCountMap,Q=e.nodes[0],$=[],tt=null===(w=e.nodes[0])||void 0===w?void 0:w[_],et=-1/0;e.nodes.forEach((function(t){var e=t[_],n=k[e];(null===n||void 0===n?void 0:n.length)>et&&(et=n.length,$=n,tt=e,Q=t)}));var nt={},rt={},it={},ot={},at={},st={};Object.keys(L).forEach((function(r,i){at[r]=[],n&&(st[r]=[]);var o=-1/0,a=L[r],s={};a.forEach((function(t){var e=T["".concat(Q.id,"-").concat(t.id)];if(e&&at[r].push(e),o<e&&(o=e),s["".concat(Q.id,"-").concat(t.id)]={start:0,end:P[t.id].idx,distance:e},n){var i=T["".concat(t.id,"-").concat(Q.id)];i&&st[r].push(i)}})),at[r]=at[r].sort((function(t,e){return t-e})),n&&(st[r]=st[r].sort((function(t,e){return t-e}))),rt=d(s,F,e,rt);var l=[];if(Object.keys(s).forEach((function(t){if(it[t])l.push(it[t]);else{var e=rt[t];it[t]=f(e,Z,_,x),l.push(it[t])}})),l=l.sort((function(t,e){return e-t})),ot["".concat(Q.id,"-").concat(r)]=l,r!==tt)for(var u=(null===$||void 0===$?void 0:$.length)||0,c=function(e){var n=$[e],i=D[O[n.id].idx],o=i.nodeLabelCountMap[r],a=L[r].length;if(!o||o.count<a)return $.splice(e,1),"continue";for(var s=!1,u=0;u<a;u++)if(o.dists[u]>at[r][u]){s=!0;break}if(s)return $.splice(e,1),"continue";var c={};i.neighbors.forEach((function(t){var e=M["".concat(n.id,"-").concat(t.id)];c["".concat(n.id,"-").concat(t.id)]={start:O[n.id].idx,end:O[t.id].idx,distance:e}})),z=d(c,D,t,z);var h=[];Object.keys(c).forEach((function(t){if(K[t])h.push(K[t]);else{var e=z[t];K[t]=f(e,Z,_,x),h.push(K[t])}})),h=h.sort((function(t,e){return e-t}));var p=!1;for(u=0;u<a;u++)if(h[u]<l[u]){p=!0;break}return p?($.splice(e,1),"continue"):void 0},h=u-1;h>=0;h--)c(h)}));var lt=[];null===$||void 0===$||$.forEach((function(r){for(var i=O[r.id].idx,o=c(t.nodes,E[i],i,_,l),a=o.neighbors,s=a.length,u=!1,h=s-1;h>=0;h--){if(a.length+1<e.nodes.length)return void(u=!0);var d=a[h],f=d[_];if(L[f]&&L[f].length)if(at[f]&&at[f].length){var p="".concat(r.id,"-").concat(d.id),g=M[p],m=at[f].length-1,y=at[f][m];if(g>y)a.splice(h,1);else{if(n){var w="".concat(d.id,"-").concat(r.id),S=M[w];m=st[f].length-1;var C=st[f][m];if(S>C){a.splice(h,1);continue}}var T=K[p]?K[p]:v(t,r,d,O,g,D,Z,_,x,K,z),A="".concat(Q.id,"-").concat(f),k=ot[A][ot[A].length-1];if(T<k)a.splice(h,1);else{var I=b(nt,f,P,L),N=I.minPatternNodeLabelDegree;I.minPatternNodeLabelInDegree,I.minPatternNodeLabelOutDegree;O[d.id].degree<N&&a.splice(h,1)}}}else a.splice(h,1);else a.splice(h,1)}u||lt.push({nodes:[r].concat(a)})}));var ut=(0,a.default)(e,Q.id,!1).length,ct={};n?(Object.keys(ut).forEach((function(t){var e=P[t].node[_];ct[e]?ct[e].push(ut[t]):ct[e]=[ut[t]]})),Object.keys(ct).forEach((function(t){ct[t].sort((function(t,e){return t-e}))}))):ct=at;for(var ht=lt.length,dt=function(r){var i=lt[r],o=i.nodes[0],s={},l={};i.nodes.forEach((function(t,e){l[t.id]={idx:e,node:t,degree:0,inDegree:0,outDegree:0};var n=t[_];s[n]?s[n]++:s[n]=1}));var u=[],c={};t.edges.forEach((function(t){l[t.source]&&l[t.target]&&(u.push(t),c[t[x]]?c[t[x]]++:c[t[x]]=1,l[t.source].degree++,l[t.target].degree++,l[t.source].outDegree++,l[t.target].inDegree++)}));for(var h=Object.keys(N).length,d=!1,f=0;f<h;f++){var p=Object.keys(N)[f];if(!c[p]||c[p]<N[p].length){d=!0;break}}if(d)return lt.splice(r,1),"continue";var g=u.length;if(g<e.edges.length)return lt.splice(r,1),"break";var m=!1,y=function(t){var e=u[t],r=e[x],i=N[r];if(!i||!i.length)return c[r]--,i&&c[r]<i.length?(m=!0,"break"):(u.splice(t,1),l[e.source].degree--,l[e.target].degree--,l[e.source].outDegree--,l[e.target].inDegree--,"continue");var o=l[e.source].node[_],a=l[e.target].node[_],s=!1;return i.forEach((function(t){var e=P[t.source].node,r=P[t.target].node;e[_]===o&&r[_]===a&&(s=!0),n||e[_]!==a||r[_]!==o||(s=!0)})),s?void 0:(c[r]--,i&&c[r]<i.length?(m=!0,"break"):(u.splice(t,1),l[e.source].degree--,l[e.target].degree--,l[e.source].outDegree--,l[e.target].inDegree--,"continue"))};for(f=g-1;f>=0;f--){var v=y(f);if("break"===v)break}if(m)return lt.splice(r,1),"continue";i.edges=u;var w=(0,a.default)(i,i.nodes[0].id,!1).length;if(Object.keys(w).reverse().forEach((function(t){if(t!==i.nodes[0].id&&!m){if(w[t]===1/0){var e=l[t].node[_];if(s[e]--,s[e]<L[e].length)return void(m=!0);var n=i.nodes.indexOf(l[t].node);return i.nodes.splice(n,1),void(l[t]=void 0)}var r=O[t].node[_];if(!ct[r]||!ct[r].length||w[t]>ct[r][ct[r].length-1]){e=l[t].node[_];if(s[e]--,s[e]<L[e].length)return void(m=!0);n=i.nodes.indexOf(l[t].node);i.nodes.splice(n,1),l[t]=void 0}}})),m)return lt.splice(r,1),"continue";var S=!0,E=0;while(S&&!m){S=!1;var C=n?l[o.id].degree<P[Q.id].degree||l[o.id].inDegree<P[Q.id].inDegree||l[o.id].outDegree<P[Q.id].outDegree:l[o.id].degree<P[Q.id].degree;if(C){m=!0;break}if(s[o[_]]<L[o[_]].length){m=!0;break}for(var M=i.nodes.length,T=M-1;T>=0;T--){var A=i.nodes[T],k=l[A.id].degree,I=l[A.id].inDegree,R=l[A.id].outDegree,D=A[_],F=b(nt,D,P,L),j=F.minPatternNodeLabelDegree,B=F.minPatternNodeLabelInDegree,z=F.minPatternNodeLabelOutDegree,U=n?k<j||I<B||R<z:k<j;if(U){if(s[A[_]]--,s[A[_]]<L[A[_]].length){m=!0;break}i.nodes.splice(T,1),l[A.id]=void 0,S=!0}}if(m||!S&&0!==E)break;g=u.length;for(var G=g-1;G>=0;G--){var q=u[G];if(!l[q.source]||!l[q.target]){u.splice(G,1);var V=q[x];if(c[V]--,l[q.source]&&(l[q.source].degree--,l[q.source].outDegree--),l[q.target]&&(l[q.target].degree--,l[q.target].inDegree--),N[V]&&c[V]<N[V].length){m=!0;break}S=!0}}E++}return m||m||i.nodes.length<e.nodes.length||u.length<e.edges.length?(lt.splice(r,1),"continue"):void 0},ft=ht-1;ft>=0;ft--){var pt=dt(ft);if("break"===pt)break}var gt=lt.length,mt=function(t){var e=lt[t],n={};e.edges.forEach((function(t){var e="".concat(t.source,"-").concat(t.target,"-").concat(t.label);n[e]?n[e]++:n[e]=1}));for(var r=function(t){var e=lt[t],r={};e.edges.forEach((function(t){var e="".concat(t.source,"-").concat(t.target,"-").concat(t.label);r[e]?r[e]++:r[e]=1}));var i=!0;Object.keys(r).length!==Object.keys(n).length?i=!1:Object.keys(n).forEach((function(t){r[t]!==n[t]&&(i=!1)})),i&&lt.splice(t,1)},i=gt-1;i>t;i--)r(i);gt=lt.length};for(ft=0;ft<=gt-1;ft++)mt(ft);return lt}}},x=_;e.default=x},6613:function(t,e,n){n("fb6a"),n("d3b7"),n("25f0"),n("b0c0"),n("a630"),n("3ca3"),n("ac1f"),n("00b4");var r=n("5a43");function i(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}t.exports=i,t.exports.__esModule=!0,t.exports["default"]=t.exports},6711:function(t,e,n){"use strict";n.r(e),n.d(e,"create",(function(){return i})),n.d(e,"clone",(function(){return o})),n.d(e,"fromValues",(function(){return a})),n.d(e,"copy",(function(){return s})),n.d(e,"set",(function(){return l})),n.d(e,"add",(function(){return u})),n.d(e,"subtract",(function(){return c})),n.d(e,"multiply",(function(){return h})),n.d(e,"divide",(function(){return d})),n.d(e,"ceil",(function(){return f})),n.d(e,"floor",(function(){return p})),n.d(e,"min",(function(){return g})),n.d(e,"max",(function(){return m})),n.d(e,"round",(function(){return y})),n.d(e,"scale",(function(){return v})),n.d(e,"scaleAndAdd",(function(){return b})),n.d(e,"distance",(function(){return _})),n.d(e,"squaredDistance",(function(){return x})),n.d(e,"length",(function(){return w})),n.d(e,"squaredLength",(function(){return S})),n.d(e,"negate",(function(){return E})),n.d(e,"inverse",(function(){return C})),n.d(e,"normalize",(function(){return M})),n.d(e,"dot",(function(){return T})),n.d(e,"cross",(function(){return A})),n.d(e,"lerp",(function(){return O})),n.d(e,"random",(function(){return k})),n.d(e,"transformMat2",(function(){return I})),n.d(e,"transformMat2d",(function(){return P})),n.d(e,"transformMat3",(function(){return L})),n.d(e,"transformMat4",(function(){return N})),n.d(e,"rotate",(function(){return R})),n.d(e,"angle",(function(){return D})),n.d(e,"zero",(function(){return F})),n.d(e,"str",(function(){return j})),n.d(e,"exactEquals",(function(){return B})),n.d(e,"equals",(function(){return z})),n.d(e,"len",(function(){return U})),n.d(e,"sub",(function(){return G})),n.d(e,"mul",(function(){return q})),n.d(e,"div",(function(){return V})),n.d(e,"dist",(function(){return H})),n.d(e,"sqrDist",(function(){return W})),n.d(e,"sqrLen",(function(){return Y})),n.d(e,"forEach",(function(){return X}));var r=n("c94d");function i(){var t=new r["ARRAY_TYPE"](2);return r["ARRAY_TYPE"]!=Float32Array&&(t[0]=0,t[1]=0),t}function o(t){var e=new r["ARRAY_TYPE"](2);return e[0]=t[0],e[1]=t[1],e}function a(t,e){var n=new r["ARRAY_TYPE"](2);return n[0]=t,n[1]=e,n}function s(t,e){return t[0]=e[0],t[1]=e[1],t}function l(t,e,n){return t[0]=e,t[1]=n,t}function u(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function c(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function h(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function d(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function f(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function p(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function g(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function m(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function y(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function v(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function b(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function _(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.hypot(n,r)}function x(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function w(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function S(t){var e=t[0],n=t[1];return e*e+n*n}function E(t,e){return t[0]=-e[0],t[1]=-e[1],t}function C(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function M(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t}function T(t,e){return t[0]*e[0]+t[1]*e[1]}function A(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}function O(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t}function k(t,e){e=e||1;var n=2*r["RANDOM"]()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function I(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t}function P(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}function L(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}function N(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}function R(t,e,n,r){var i=e[0]-n[0],o=e[1]-n[1],a=Math.sin(r),s=Math.cos(r);return t[0]=i*s-o*a+n[0],t[1]=i*a+o*s+n[1],t}function D(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=Math.sqrt(n*n+r*r)*Math.sqrt(i*i+o*o),s=a&&(n*i+r*o)/a;return Math.acos(Math.min(Math.max(s,-1),1))}function F(t){return t[0]=0,t[1]=0,t}function j(t){return"vec2("+t[0]+", "+t[1]+")"}function B(t,e){return t[0]===e[0]&&t[1]===e[1]}function z(t,e){var n=t[0],i=t[1],o=e[0],a=e[1];return Math.abs(n-o)<=r["EPSILON"]*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-a)<=r["EPSILON"]*Math.max(1,Math.abs(i),Math.abs(a))}var U=w,G=c,q=h,V=d,H=_,W=x,Y=S,X=function(){var t=i();return function(e,n,r,i,o,a){var s,l;for(n||(n=2),r||(r=0),l=i?Math.min(i*n+r,e.length):e.length,s=r;s<l;s+=n)t[0]=e[s],t[1]=e[s+1],o(t,t,a),e[s]=t[0],e[s+1]=t[1];return e}}()},6747:function(t,e){var n=Array.isArray;t.exports=n},"682d":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["ignore_unavailable","allow_no_indices","expand_wildcards","pretty","human","error_trace","source","filter_path"],a={ignoreUnavailable:"ignore_unavailable",allowNoIndices:"allow_no_indices",expandWildcards:"expand_wildcards",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,...f}=t;f=i(o,a,f,u),null==c&&(c="GET");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g=null!=d?"/"+encodeURIComponent(d)+"/_upgrade":"/_upgrade";const m={method:c,path:g,body:null,querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},6853:function(t,e,n){"use strict";var r=n("be7f"),i=15,o=852,a=592,s=0,l=1,u=2,c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],h=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,n,p,g,m,y,v){var b,_,x,w,S,E,C,M,T,A=v.bits,O=0,k=0,I=0,P=0,L=0,N=0,R=0,D=0,F=0,j=0,B=null,z=0,U=new r.Buf16(i+1),G=new r.Buf16(i+1),q=null,V=0;for(O=0;O<=i;O++)U[O]=0;for(k=0;k<p;k++)U[e[n+k]]++;for(L=A,P=i;P>=1;P--)if(0!==U[P])break;if(L>P&&(L=P),0===P)return g[m++]=20971520,g[m++]=20971520,v.bits=1,0;for(I=1;I<P;I++)if(0!==U[I])break;for(L<I&&(L=I),D=1,O=1;O<=i;O++)if(D<<=1,D-=U[O],D<0)return-1;if(D>0&&(t===s||1!==P))return-1;for(G[1]=0,O=1;O<i;O++)G[O+1]=G[O]+U[O];for(k=0;k<p;k++)0!==e[n+k]&&(y[G[e[n+k]]++]=k);if(t===s?(B=q=y,E=19):t===l?(B=c,z-=257,q=h,V-=257,E=256):(B=d,q=f,E=-1),j=0,k=0,O=I,S=m,N=L,R=0,x=-1,F=1<<L,w=F-1,t===l&&F>o||t===u&&F>a)return 1;for(;;){C=O-R,y[k]<E?(M=0,T=y[k]):y[k]>E?(M=q[V+y[k]],T=B[z+y[k]]):(M=96,T=0),b=1<<O-R,_=1<<N,I=_;do{_-=b,g[S+(j>>R)+_]=C<<24|M<<16|T|0}while(0!==_);b=1<<O-1;while(j&b)b>>=1;if(0!==b?(j&=b-1,j+=b):j=0,k++,0===--U[O]){if(O===P)break;O=e[n+y[k]]}if(O>L&&(j&w)!==x){0===R&&(R=L),S+=I,N=O-R,D=1<<N;while(N+R<P){if(D-=U[N+R],D<=0)break;N++,D<<=1}if(F+=1<<N,t===l&&F>o||t===u&&F>a)return 1;x=j&w,g[x]=L<<24|N<<16|S-m|0}}return 0!==j&&(g[S+j]=O-R<<24|64<<16|0),v.bits=L,0}},6855:function(t,e,n){"use strict";var r=n("b6fb");n.d(e,"PathUtil",(function(){return r}));n("e1c6"),n("b5d5");var i=n("e5e2");n.d(e,"Event",(function(){return i["a"]}));n("2e60");var o=n("1243");n.d(e,"AbstractCanvas",(function(){return o["a"]}));var a=n("f83c");n.d(e,"AbstractGroup",(function(){return a["a"]}));var s=n("31a1");n.d(e,"AbstractShape",(function(){return s["a"]}));var l=n("d4c65");n.d(e,"getBBoxMethod",(function(){return l["a"]}));var u=n("bc88");n.d(e,"getTextHeight",(function(){return u["b"]})),n.d(e,"assembleFont",(function(){return u["a"]}));var c=n("b2cb");n.d(e,"isAllowCapture",(function(){return c["b"]}));var h=n("6928");n.d(e,"multiplyVec2",(function(){return h["c"]})),n.d(e,"invert",(function(){return h["a"]}));var d=n("96de");n.d(e,"getOffScreenContext",(function(){return d["a"]}));n("54ca")},"68de":function(t,e,n){"use strict";n.r(e),n.d(e,"Base",(function(){return d})),n.d(e,"Circle",(function(){return g})),n.d(e,"Dom",(function(){return y})),n.d(e,"Ellipse",(function(){return b})),n.d(e,"Image",(function(){return x})),n.d(e,"Line",(function(){return E})),n.d(e,"Marker",(function(){return A})),n.d(e,"Path",(function(){return k})),n.d(e,"Polygon",(function(){return P})),n.d(e,"Polyline",(function(){return N})),n.d(e,"Rect",(function(){return F})),n.d(e,"Text",(function(){return V}));var r={};n.r(r),n.d(r,"Base",(function(){return d})),n.d(r,"Circle",(function(){return g})),n.d(r,"Dom",(function(){return y})),n.d(r,"Ellipse",(function(){return b})),n.d(r,"Image",(function(){return x})),n.d(r,"Line",(function(){return E})),n.d(r,"Marker",(function(){return A})),n.d(r,"Path",(function(){return k})),n.d(r,"Polygon",(function(){return P})),n.d(r,"Polyline",(function(){return N})),n.d(r,"Rect",(function(){return F})),n.d(r,"Text",(function(){return V}));var i=n("9ab4"),o=n("6855"),a=n("00f9"),s=n("73ec"),l=n("7349"),u=n("22f9"),c=n("e73e"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="svg",e.canFill=!1,e.canStroke=!1,e}return Object(i["__extends"])(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Object(i["__assign"])(Object(i["__assign"])({},e),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.afterAttrsChange=function(e){t.prototype.afterAttrsChange.call(this,e);var n=this.get("canvas");if(n&&n.get("autoDraw")){var r=n.get("context");this.draw(r,e)}},e.prototype.getShapeBase=function(){return r},e.prototype.getGroupBase=function(){return c["a"]},e.prototype.onCanvasChange=function(t){Object(l["b"])(this,t)},e.prototype.calculateBBox=function(){var t=this.get("el"),e=null;if(t)e=t.getBBox();else{var n=Object(o["getBBoxMethod"])(this.get("type"));n&&(e=n(this))}if(e){var r=e.x,i=e.y,a=e.width,s=e.height,l=this.getHitLineWidth(),u=l/2,c=r-u,h=i-u,d=r+a+u,f=i+s+u;return{x:c,y:h,minX:c,minY:h,maxX:d,maxY:f,width:a+l,height:s+l}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},e.prototype.isFill=function(){var t=this.attr(),e=t.fill,n=t.fillStyle;return(e||n||this.isClipShape())&&this.canFill},e.prototype.isStroke=function(){var t=this.attr(),e=t.stroke,n=t.strokeStyle;return(e||n)&&this.canStroke},e.prototype.draw=function(t,e){var n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||Object(s["a"])(this),Object(a["a"])(this,t),this.createPath(t,e),this.shadow(t,e),this.strokeAndFill(t,e),this.transform(e))},e.prototype.createPath=function(t,e){},e.prototype.strokeAndFill=function(t,e){var n=e||this.attr(),r=n.fill,i=n.fillStyle,o=n.stroke,a=n.strokeStyle,s=n.fillOpacity,l=n.strokeOpacity,c=n.lineWidth,h=this.get("el");this.canFill&&(e?"fill"in n?this._setColor(t,"fill",r):"fillStyle"in n&&this._setColor(t,"fill",i):this._setColor(t,"fill",r||i),s&&h.setAttribute(u["b"]["fillOpacity"],s)),this.canStroke&&c>0&&(e?"stroke"in n?this._setColor(t,"stroke",o):"strokeStyle"in n&&this._setColor(t,"stroke",a):this._setColor(t,"stroke",o||a),l&&h.setAttribute(u["b"]["strokeOpacity"],l),c&&h.setAttribute(u["b"]["lineWidth"],c))},e.prototype._setColor=function(t,e,n){var r=this.get("el");if(n)if(n=n.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(n)){var i=t.find("gradient",n);i||(i=t.addGradient(n)),r.setAttribute(u["b"][e],"url(#"+i+")")}else if(/^[p,P]{1}[\s]*\(/.test(n)){i=t.find("pattern",n);i||(i=t.addPattern(n)),r.setAttribute(u["b"][e],"url(#"+i+")")}else r.setAttribute(u["b"][e],n);else r.setAttribute(u["b"][e],"none")},e.prototype.shadow=function(t,e){var n=this.attr(),r=e||n,i=r.shadowOffsetX,o=r.shadowOffsetY,s=r.shadowBlur,l=r.shadowColor;(i||o||s||l)&&Object(a["b"])(this,t)},e.prototype.transform=function(t){var e=this.attr(),n=(t||e).matrix;n&&Object(a["c"])(this)},e.prototype.isInShape=function(t,e){return this.isPointInPath(t,e)},e.prototype.isPointInPath=function(t,e){var n=this.get("el"),r=this.get("canvas"),i=r.get("el").getBoundingClientRect(),o=t+i.left,a=e+i.top,s=document.elementFromPoint(o,a);return!(!s||!s.isEqualNode(n))},e.prototype.getHitLineWidth=function(){var t=this.attrs,e=t.lineWidth,n=t.lineAppendWidth;return this.isStroke()?e+n:0},e}(o["AbstractShape"]),d=h,f=n("8937"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="circle",e.canFill=!0,e.canStroke=!0,e}return Object(i["__extends"])(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Object(i["__assign"])(Object(i["__assign"])({},e),{x:0,y:0,r:0})},e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");Object(f["each"])(e||n,(function(t,e){"x"===e||"y"===e?r.setAttribute("c"+e,t):u["b"][e]&&r.setAttribute(u["b"][e],t)}))},e}(d),g=p,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dom",e.canFill=!1,e.canStroke=!1,e}return Object(i["__extends"])(e,t),e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");if(Object(f["each"])(e||n,(function(t,e){u["b"][e]&&r.setAttribute(u["b"][e],t)})),"function"===typeof n["html"]){var i=n["html"].call(this,n);if(i instanceof Element||i instanceof HTMLDocument){for(var o=r.childNodes,a=o.length-1;a>=0;a--)r.removeChild(o[a]);r.appendChild(i)}else r.innerHTML=i}else r.innerHTML=n["html"]},e}(d),y=m,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="ellipse",e.canFill=!0,e.canStroke=!0,e}return Object(i["__extends"])(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Object(i["__assign"])(Object(i["__assign"])({},e),{x:0,y:0,rx:0,ry:0})},e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");Object(f["each"])(e||n,(function(t,e){"x"===e||"y"===e?r.setAttribute("c"+e,t):u["b"][e]&&r.setAttribute(u["b"][e],t)}))},e}(d),b=v,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="image",e.canFill=!1,e.canStroke=!1,e}return Object(i["__extends"])(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Object(i["__assign"])(Object(i["__assign"])({},e),{x:0,y:0,width:0,height:0})},e.prototype.createPath=function(t,e){var n=this,r=this.attr(),i=this.get("el");Object(f["each"])(e||r,(function(t,e){"img"===e?n._setImage(r.img):u["b"][e]&&i.setAttribute(u["b"][e],t)}))},e.prototype.setAttr=function(t,e){this.attrs[t]=e,"img"===t&&this._setImage(e)},e.prototype._setImage=function(t){var e=this.attr(),n=this.get("el");if(Object(f["isString"])(t))n.setAttribute("href",t);else if(t instanceof window.Image)e.width||(n.setAttribute("width",t.width),this.attr("width",t.width)),e.height||(n.setAttribute("height",t.height),this.attr("height",t.height)),n.setAttribute("href",t.src);else if(t instanceof HTMLElement&&Object(f["isString"])(t.nodeName)&&"CANVAS"===t.nodeName.toUpperCase())n.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var r=document.createElement("canvas");r.setAttribute("width",""+t.width),r.setAttribute("height",""+t.height),r.getContext("2d").putImageData(t,0,0),e.width||(n.setAttribute("width",""+t.width),this.attr("width",t.width)),e.height||(n.setAttribute("height",""+t.height),this.attr("height",t.height)),n.setAttribute("href",r.toDataURL())}},e}(d),x=_,w=n("1183"),S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="line",e.canFill=!1,e.canStroke=!0,e}return Object(i["__extends"])(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Object(i["__assign"])(Object(i["__assign"])({},e),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");Object(f["each"])(e||n,(function(e,i){if("startArrow"===i||"endArrow"===i)if(e){var o=Object(f["isObject"])(e)?t.addArrow(n,u["b"][i]):t.getDefaultArrow(n,u["b"][i]);r.setAttribute(u["b"][i],"url(#"+o+")")}else r.removeAttribute(u["b"][i]);else u["b"][i]&&r.setAttribute(u["b"][i],e)}))},e.prototype.getTotalLength=function(){var t=this.attr(),e=t.x1,n=t.y1,r=t.x2,i=t.y2;return w["c"].length(e,n,r,i)},e.prototype.getPoint=function(t){var e=this.attr(),n=e.x1,r=e.y1,i=e.x2,o=e.y2;return w["c"].pointAt(n,r,i,o,t)},e}(d),E=S,C={circle:function(t,e,n){return[["M",t,e],["m",-n,0],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0]]},square:function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]},diamond:function(t,e,n){return[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]},triangle:function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["z"]]},triangleDown:function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]}},M={get:function(t){return C[t]},register:function(t,e){C[t]=e},remove:function(t){delete C[t]},getAll:function(){return C}},T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="marker",e.canFill=!0,e.canStroke=!0,e}return Object(i["__extends"])(e,t),e.prototype.createPath=function(t){var e=this.get("el");e.setAttribute("d",this._assembleMarker())},e.prototype._assembleMarker=function(){var t=this._getPath();return Object(f["isArray"])(t)?t.map((function(t){return t.join(" ")})).join(""):t},e.prototype._getPath=function(){var t,e=this.attr(),n=e.x,r=e.y,i=e.r||e.radius,o=e.symbol||"circle";return t=Object(f["isFunction"])(o)?o:M.get(o),t?t(n,r,i):(console.warn(t+" symbol is not exist."),null)},e.symbolsFactory=M,e}(d),A=T,O=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="path",e.canFill=!0,e.canStroke=!0,e}return Object(i["__extends"])(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Object(i["__assign"])(Object(i["__assign"])({},e),{startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,e){var n=this,r=this.attr(),i=this.get("el");Object(f["each"])(e||r,(function(e,o){if("path"===o&&Object(f["isArray"])(e))i.setAttribute("d",n._formatPath(e));else if("startArrow"===o||"endArrow"===o)if(e){var a=Object(f["isObject"])(e)?t.addArrow(r,u["b"][o]):t.getDefaultArrow(r,u["b"][o]);i.setAttribute(u["b"][o],"url(#"+a+")")}else i.removeAttribute(u["b"][o]);else u["b"][o]&&i.setAttribute(u["b"][o],e)}))},e.prototype._formatPath=function(t){var e=t.map((function(t){return t.join(" ")})).join("");return~e.indexOf("NaN")?"":e},e.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},e.prototype.getPoint=function(t){var e=this.get("el"),n=this.getTotalLength();if(0===n)return null;var r=e?e.getPointAtLength(t*n):null;return r?{x:r.x,y:r.y}:null},e}(d),k=O,I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="polygon",e.canFill=!0,e.canStroke=!0,e}return Object(i["__extends"])(e,t),e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");Object(f["each"])(e||n,(function(t,e){"points"===e&&Object(f["isArray"])(t)&&t.length>=2?r.setAttribute("points",t.map((function(t){return t[0]+","+t[1]})).join(" ")):u["b"][e]&&r.setAttribute(u["b"][e],t)}))},e}(d),P=I,L=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="polyline",e.canFill=!0,e.canStroke=!0,e}return Object(i["__extends"])(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Object(i["__assign"])(Object(i["__assign"])({},e),{startArrow:!1,endArrow:!1})},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),-1!==["points"].indexOf(e)&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");Object(f["each"])(e||n,(function(t,e){"points"===e&&Object(f["isArray"])(t)&&t.length>=2?r.setAttribute("points",t.map((function(t){return t[0]+","+t[1]})).join(" ")):u["b"][e]&&r.setAttribute(u["b"][e],t)}))},e.prototype.getTotalLength=function(){var t=this.attr().points,e=this.get("totalLength");return Object(f["isNil"])(e)?(this.set("totalLength",w["d"].length(t)),this.get("totalLength")):e},e.prototype.getPoint=function(t){var e,n,r=this.attr().points,i=this.get("tCache");return i||(this._setTcache(),i=this.get("tCache")),Object(f["each"])(i,(function(r,i){t>=r[0]&&t<=r[1]&&(e=(t-r[0])/(r[1]-r[0]),n=i)})),w["c"].pointAt(r[n][0],r[n][1],r[n+1][0],r[n+1][1],e)},e.prototype._setTcache=function(){var t=this.attr().points;if(t&&0!==t.length){var e=this.getTotalLength();if(!(e<=0)){var n,r,i=0,o=[];Object(f["each"])(t,(function(a,s){t[s+1]&&(n=[],n[0]=i/e,r=w["c"].length(a[0],a[1],t[s+1][0],t[s+1][1]),i+=r,n[1]=i/e,o.push(n))})),this.set("tCache",o)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},e.prototype.getEndTangent=function(){var t=this.attr().points,e=t.length-1,n=[];return n.push([t[e-1][0],t[e-1][1]]),n.push([t[e][0],t[e][1]]),n},e}(d),N=L;function R(t){var e=0,n=0,r=0,i=0;return Object(f["isArray"])(t)?1===t.length?e=n=r=i=t[0]:2===t.length?(e=r=t[0],n=i=t[1]):3===t.length?(e=t[0],n=i=t[1],r=t[2]):(e=t[0],n=t[1],r=t[2],i=t[3]):e=n=r=i=t,{r1:e,r2:n,r3:r,r4:i}}var D=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="rect",e.canFill=!0,e.canStroke=!0,e}return Object(i["__extends"])(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Object(i["__assign"])(Object(i["__assign"])({},e),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.createPath=function(t,e){var n=this,r=this.attr(),i=this.get("el"),o=!1,a=["x","y","width","height","radius"];Object(f["each"])(e||r,(function(t,e){-1===a.indexOf(e)||o?-1===a.indexOf(e)&&u["b"][e]&&i.setAttribute(u["b"][e],t):(i.setAttribute("d",n._assembleRect(r)),o=!0)}))},e.prototype._assembleRect=function(t){var e=t.x,n=t.y,r=t.width,i=t.height,o=t.radius;if(!o)return"M "+e+","+n+" l "+r+",0 l 0,"+i+" l"+-r+" 0 z";var a=R(o);Object(f["isArray"])(o)?1===o.length?a.r1=a.r2=a.r3=a.r4=o[0]:2===o.length?(a.r1=a.r3=o[0],a.r2=a.r4=o[1]):3===o.length?(a.r1=o[0],a.r2=a.r4=o[1],a.r3=o[2]):(a.r1=o[0],a.r2=o[1],a.r3=o[2],a.r4=o[3]):a.r1=a.r2=a.r3=a.r4=o;var s=[["M "+(e+a.r1)+","+n],["l "+(r-a.r1-a.r2)+",0"],["a "+a.r2+","+a.r2+",0,0,1,"+a.r2+","+a.r2],["l 0,"+(i-a.r2-a.r3)],["a "+a.r3+","+a.r3+",0,0,1,"+-a.r3+","+a.r3],["l "+(a.r3+a.r4-r)+",0"],["a "+a.r4+","+a.r4+",0,0,1,"+-a.r4+","+-a.r4],["l 0,"+(a.r4+a.r1-i)],["a "+a.r1+","+a.r1+",0,0,1,"+a.r1+","+-a.r1],["z"]];return s.join(" ")},e}(d),F=D,j=n("7b46"),B=.3,z={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},U={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},G={left:"left",start:"left",center:"middle",right:"end",end:"end"},q=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="text",e.canFill=!0,e.canStroke=!0,e}return Object(i["__extends"])(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Object(i["__assign"])(Object(i["__assign"])({},e),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.createPath=function(t,e){var n=this,r=this.attr(),i=this.get("el");this._setFont(),Object(f["each"])(e||r,(function(t,e){"text"===e?n._setText(""+t):"matrix"===e&&t?Object(a["c"])(n):u["b"][e]&&i.setAttribute(u["b"][e],t)})),i.setAttribute("paint-order","stroke"),i.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},e.prototype._setFont=function(){var t=this.get("el"),e=this.attr(),n=e.textBaseline,r=e.textAlign,i=Object(j["a"])();i&&"firefox"===i.name?t.setAttribute("dominant-baseline",U[n]||"alphabetic"):t.setAttribute("alignment-baseline",z[n]||"baseline"),t.setAttribute("text-anchor",G[r]||"left")},e.prototype._setText=function(t){var e=this.get("el"),n=this.attr(),r=n.x,i=n.textBaseline,o=void 0===i?"bottom":i;if(t)if(~t.indexOf("\n")){var a=t.split("\n"),s=a.length-1,l="";Object(f["each"])(a,(function(t,e){0===e?"alphabetic"===o?l+='<tspan x="'+r+'" dy="'+-s+'em">'+t+"</tspan>":"top"===o?l+='<tspan x="'+r+'" dy="0.9em">'+t+"</tspan>":"middle"===o?l+='<tspan x="'+r+'" dy="'+-(s-1)/2+'em">'+t+"</tspan>":"bottom"===o?l+='<tspan x="'+r+'" dy="-'+(s+B)+'em">'+t+"</tspan>":"hanging"===o&&(l+='<tspan x="'+r+'" dy="'+(-(s-1)-B)+'em">'+t+"</tspan>"):l+='<tspan x="'+r+'" dy="1em">'+t+"</tspan>"})),e.innerHTML=l}else e.innerHTML=t;else e.innerHTML=""},e}(d),V=q},6928:function(t,e,n){"use strict";function r(t,e){var n=[],r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],h=t[8],d=e[0],f=e[1],p=e[2],g=e[3],m=e[4],y=e[5],v=e[6],b=e[7],_=e[8];return n[0]=d*r+f*a+p*u,n[1]=d*i+f*s+p*c,n[2]=d*o+f*l+p*h,n[3]=g*r+m*a+y*u,n[4]=g*i+m*s+y*c,n[5]=g*o+m*l+y*h,n[6]=v*r+b*a+_*u,n[7]=v*i+b*s+_*c,n[8]=v*o+b*l+_*h,n}function i(t,e){var n=[],r=e[0],i=e[1];return n[0]=t[0]*r+t[3]*i+t[6],n[1]=t[1]*r+t[4]*i+t[7],n}function o(t){var e=[],n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],h=c*a-s*u,d=-c*o+s*l,f=u*o-a*l,p=n*h+r*d+i*f;return p?(p=1/p,e[0]=h*p,e[1]=(-c*r+i*u)*p,e[2]=(s*r-i*a)*p,e[3]=d*p,e[4]=(c*n-i*l)*p,e[5]=(-s*n+i*o)*p,e[6]=f*p,e[7]=(-u*n+r*l)*p,e[8]=(a*n-r*o)*p,e):null}n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o}))},6929:function(t,e,n){"use strict";var r=n("1ab9"),i=n("bb15"),o=[].slice,a=["keyword","gray","hex"],s={};Object.keys(i).forEach((function(t){s[o.call(i[t].labels).sort().join("")]=t}));var l={};function u(t,e){if(!(this instanceof u))return new u(t,e);if(e&&e in a&&(e=null),e&&!(e in i))throw new Error("Unknown model: "+e);var n,c;if(null==t)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof u)this.model=t.model,this.color=t.color.slice(),this.valpha=t.valpha;else if("string"===typeof t){var h=r.get(t);if(null===h)throw new Error("Unable to parse color from string: "+t);this.model=h.model,c=i[this.model].channels,this.color=h.value.slice(0,c),this.valpha="number"===typeof h.value[c]?h.value[c]:1}else if(t.length){this.model=e||"rgb",c=i[this.model].channels;var d=o.call(t,0,c);this.color=g(d,c),this.valpha="number"===typeof t[c]?t[c]:1}else if("number"===typeof t)t&=16777215,this.model="rgb",this.color=[t>>16&255,t>>8&255,255&t],this.valpha=1;else{this.valpha=1;var f=Object.keys(t);"alpha"in t&&(f.splice(f.indexOf("alpha"),1),this.valpha="number"===typeof t.alpha?t.alpha:0);var p=f.sort().join("");if(!(p in s))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=s[p];var m=i[this.model].labels,y=[];for(n=0;n<m.length;n++)y.push(t[m[n]]);this.color=g(y)}if(l[this.model])for(c=i[this.model].channels,n=0;n<c;n++){var v=l[this.model][n];v&&(this.color[n]=v(this.color[n]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function c(t,e){return Number(t.toFixed(e))}function h(t){return function(e){return c(e,t)}}function d(t,e,n){return t=Array.isArray(t)?t:[t],t.forEach((function(t){(l[t]||(l[t]=[]))[e]=n})),t=t[0],function(r){var i;return arguments.length?(n&&(r=n(r)),i=this[t](),i.color[e]=r,i):(i=this[t]().color[e],n&&(i=n(i)),i)}}function f(t){return function(e){return Math.max(0,Math.min(t,e))}}function p(t){return Array.isArray(t)?t:[t]}function g(t,e){for(var n=0;n<e;n++)"number"!==typeof t[n]&&(t[n]=0);return t}u.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(t){var e=this.model in r.to?this:this.rgb();e=e.round("number"===typeof t?t:1);var n=1===e.valpha?e.color:e.color.concat(this.valpha);return r.to[e.model](n)},percentString:function(t){var e=this.rgb().round("number"===typeof t?t:1),n=1===e.valpha?e.color:e.color.concat(this.valpha);return r.to.rgb.percent(n)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var t={},e=i[this.model].channels,n=i[this.model].labels,r=0;r<e;r++)t[n[r]]=this.color[r];return 1!==this.valpha&&(t.alpha=this.valpha),t},unitArray:function(){var t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,1!==this.valpha&&t.push(this.valpha),t},unitObject:function(){var t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,1!==this.valpha&&(t.alpha=this.valpha),t},round:function(t){return t=Math.max(t||0,0),new u(this.color.map(h(t)).concat(this.valpha),this.model)},alpha:function(t){return arguments.length?new u(this.color.concat(Math.max(0,Math.min(1,t))),this.model):this.valpha},red:d("rgb",0,f(255)),green:d("rgb",1,f(255)),blue:d("rgb",2,f(255)),hue:d(["hsl","hsv","hsl","hwb","hcg"],0,(function(t){return(t%360+360)%360})),saturationl:d("hsl",1,f(100)),lightness:d("hsl",2,f(100)),saturationv:d("hsv",1,f(100)),value:d("hsv",2,f(100)),chroma:d("hcg",1,f(100)),gray:d("hcg",2,f(100)),white:d("hwb",1,f(100)),wblack:d("hwb",2,f(100)),cyan:d("cmyk",0,f(100)),magenta:d("cmyk",1,f(100)),yellow:d("cmyk",2,f(100)),black:d("cmyk",3,f(100)),x:d("xyz",0,f(100)),y:d("xyz",1,f(100)),z:d("xyz",2,f(100)),l:d("lab",0,f(100)),a:d("lab",1),b:d("lab",2),keyword:function(t){return arguments.length?new u(t):i[this.model].keyword(this.color)},hex:function(t){return arguments.length?new u(t):r.to.hex(this.rgb().round().color)},rgbNumber:function(){var t=this.rgb().color;return(255&t[0])<<16|(255&t[1])<<8|255&t[2]},luminosity:function(){for(var t=this.rgb().color,e=[],n=0;n<t.length;n++){var r=t[n]/255;e[n]=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),n=t.luminosity();return e>n?(e+.05)/(n+.05):(n+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},isDark:function(){var t=this.rgb().color,e=(299*t[0]+587*t[1]+114*t[2])/1e3;return e<128},isLight:function(){return!this.isDark()},negate:function(){for(var t=this.rgb(),e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten:function(t){var e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken:function(t){var e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate:function(t){var e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate:function(t){var e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten:function(t){var e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken:function(t){var e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale:function(){var t=this.rgb().color,e=.3*t[0]+.59*t[1]+.11*t[2];return u.rgb(e,e,e)},fade:function(t){return this.alpha(this.valpha-this.valpha*t)},opaquer:function(t){return this.alpha(this.valpha+this.valpha*t)},rotate:function(t){var e=this.hsl(),n=e.color[0];return n=(n+t)%360,n=n<0?360+n:n,e.color[0]=n,e},mix:function(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);var n=t.rgb(),r=this.rgb(),i=void 0===e?.5:e,o=2*i-1,a=n.alpha()-r.alpha(),s=((o*a===-1?o:(o+a)/(1+o*a))+1)/2,l=1-s;return u.rgb(s*n.red()+l*r.red(),s*n.green()+l*r.green(),s*n.blue()+l*r.blue(),n.alpha()*i+r.alpha()*(1-i))}},Object.keys(i).forEach((function(t){if(-1===a.indexOf(t)){var e=i[t].channels;u.prototype[t]=function(){if(this.model===t)return new u(this);if(arguments.length)return new u(arguments,t);var n="number"===typeof arguments[e]?e:this.valpha;return new u(p(i[this.model][t].raw(this.color)).concat(n),t)},u[t]=function(n){return"number"===typeof n&&(n=g(o.call(arguments),e)),new u(n,t)}}})),t.exports=u},6999:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["pretty","human","error_trace","source","filter_path"],a={errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,...d}=t;d=i(o,a,d,u),null==c&&(c="GET");var f=s.ignore;"number"===typeof f&&(s.ignore=[f]);var p="";p="/";const g={method:c,path:p,body:null,querystring:d};return s.warnings=0===u.length?null:u,e(g,s,l)}}t.exports=r},"69cf":function(t,e,n){var r=function(){try{return n("d485")}catch(t){}}();e=t.exports=n("ad71"),e.Stream=r||e,e.Readable=e,e.Writable=n("dc14"),e.Duplex=n("b19a"),e.Transform=n("27bf"),e.PassThrough=n("780f")},"6ab1":function(t,e,n){"use strict";(function(e){const r=n("8a21"),i=n("d8f3"),o=t=>{let n,o;function a(r){t=r,(t instanceof ArrayBuffer||ArrayBuffer.isView(t)&&!e.isBuffer(t))&&(t=e.from(t)),n=i(t)?t:null;const a=!n&&t[Symbol.iterator]&&"string"!==typeof t&&!e.isBuffer(t);o=a?t[Symbol.iterator]():null}return Array.isArray(t)&&(t=t.slice()),a(t),r((function e(r,i){if(n)return void(async()=>{try{await a(await n),e.call(this,r,i)}catch(t){i(t)}})();if(o){const t=o.next();return void setImmediate(i,null,t.done?null:t.value)}if(0===t.length)return void setImmediate(i,null,null);const s=t.slice(0,r);t=t.slice(r),setImmediate(i,null,s)}))};t.exports=o,t.exports.default=o,t.exports.object=t=>{let e,n;function o(r){t=r,e=i(t)?t:null,n=!e&&t[Symbol.iterator]?t[Symbol.iterator]():null}return Array.isArray(t)&&(t=t.slice()),o(t),r.obj((function r(i,a){if(e)(async()=>{try{await o(await e),r.call(this,i,a)}catch(t){a(t)}})();else if(n){const t=n.next();setImmediate(a,null,t.done?null:t.value)}else this.push(t),setImmediate(a,null,null)}))}}).call(this,n("b639").Buffer)},"6b16":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["format","local","master_timeout","h","help","s","v","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,name:d,...f}=t;f=i(o,a,f,u),null==c&&(c="GET");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g=null!=d?"/_cat/aliases/"+encodeURIComponent(d):"/_cat/aliases";const m={method:c,path:g,body:null,querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},"6b75e":function(t,e,n){"use strict";(function(t,r){var i=n("f654"),o=n("8936"),a=n("a177"),s=n("9e6e"),l=n("2ceb");for(var u in l)e[u]=l[u];e.NONE=0,e.DEFLATE=1,e.INFLATE=2,e.GZIP=3,e.GUNZIP=4,e.DEFLATERAW=5,e.INFLATERAW=6,e.UNZIP=7;var c=31,h=139;function d(t){if("number"!==typeof t||t<e.DEFLATE||t>e.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=t,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}d.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,i(this.init_done,"close before init"),i(this.mode<=e.UNZIP),this.mode===e.DEFLATE||this.mode===e.GZIP||this.mode===e.DEFLATERAW?a.deflateEnd(this.strm):this.mode!==e.INFLATE&&this.mode!==e.GUNZIP&&this.mode!==e.INFLATERAW&&this.mode!==e.UNZIP||s.inflateEnd(this.strm),this.mode=e.NONE,this.dictionary=null)},d.prototype.write=function(t,e,n,r,i,o,a){return this._write(!0,t,e,n,r,i,o,a)},d.prototype.writeSync=function(t,e,n,r,i,o,a){return this._write(!1,t,e,n,r,i,o,a)},d.prototype._write=function(n,o,a,s,l,u,c,h){if(i.equal(arguments.length,8),i(this.init_done,"write before init"),i(this.mode!==e.NONE,"already finalized"),i.equal(!1,this.write_in_progress,"write already in progress"),i.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,i.equal(!1,void 0===o,"must provide flush value"),this.write_in_progress=!0,o!==e.Z_NO_FLUSH&&o!==e.Z_PARTIAL_FLUSH&&o!==e.Z_SYNC_FLUSH&&o!==e.Z_FULL_FLUSH&&o!==e.Z_FINISH&&o!==e.Z_BLOCK)throw new Error("Invalid flush value");if(null==a&&(a=t.alloc(0),l=0,s=0),this.strm.avail_in=l,this.strm.input=a,this.strm.next_in=s,this.strm.avail_out=h,this.strm.output=u,this.strm.next_out=c,this.flush=o,!n)return this._process(),this._checkError()?this._afterSync():void 0;var d=this;return r.nextTick((function(){d._process(),d._after()})),this},d.prototype._afterSync=function(){var t=this.strm.avail_out,e=this.strm.avail_in;return this.write_in_progress=!1,[e,t]},d.prototype._process=function(){var t=null;switch(this.mode){case e.DEFLATE:case e.GZIP:case e.DEFLATERAW:this.err=a.deflate(this.strm,this.flush);break;case e.UNZIP:switch(this.strm.avail_in>0&&(t=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===t)break;if(this.strm.input[t]!==c){this.mode=e.INFLATE;break}if(this.gzip_id_bytes_read=1,t++,1===this.strm.avail_in)break;case 1:if(null===t)break;this.strm.input[t]===h?(this.gzip_id_bytes_read=2,this.mode=e.GUNZIP):this.mode=e.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case e.INFLATE:case e.GUNZIP:case e.INFLATERAW:this.err=s.inflate(this.strm,this.flush),this.err===e.Z_NEED_DICT&&this.dictionary&&(this.err=s.inflateSetDictionary(this.strm,this.dictionary),this.err===e.Z_OK?this.err=s.inflate(this.strm,this.flush):this.err===e.Z_DATA_ERROR&&(this.err=e.Z_NEED_DICT));while(this.strm.avail_in>0&&this.mode===e.GUNZIP&&this.err===e.Z_STREAM_END&&0!==this.strm.next_in[0])this.reset(),this.err=s.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},d.prototype._checkError=function(){switch(this.err){case e.Z_OK:case e.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===e.Z_FINISH)return this._error("unexpected end of file"),!1;break;case e.Z_STREAM_END:break;case e.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},d.prototype._after=function(){if(this._checkError()){var t=this.strm.avail_out,e=this.strm.avail_in;this.write_in_progress=!1,this.callback(e,t),this.pending_close&&this.close()}},d.prototype._error=function(t){this.strm.msg&&(t=this.strm.msg),this.onerror(t,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},d.prototype.init=function(t,n,r,o,a){i(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),i(t>=8&&t<=15,"invalid windowBits"),i(n>=-1&&n<=9,"invalid compression level"),i(r>=1&&r<=9,"invalid memlevel"),i(o===e.Z_FILTERED||o===e.Z_HUFFMAN_ONLY||o===e.Z_RLE||o===e.Z_FIXED||o===e.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(n,t,r,o,a),this._setDictionary()},d.prototype.params=function(){throw new Error("deflateParams Not supported")},d.prototype.reset=function(){this._reset(),this._setDictionary()},d.prototype._init=function(t,n,r,i,l){switch(this.level=t,this.windowBits=n,this.memLevel=r,this.strategy=i,this.flush=e.Z_NO_FLUSH,this.err=e.Z_OK,this.mode!==e.GZIP&&this.mode!==e.GUNZIP||(this.windowBits+=16),this.mode===e.UNZIP&&(this.windowBits+=32),this.mode!==e.DEFLATERAW&&this.mode!==e.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new o,this.mode){case e.DEFLATE:case e.GZIP:case e.DEFLATERAW:this.err=a.deflateInit2(this.strm,this.level,e.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case e.INFLATE:case e.GUNZIP:case e.INFLATERAW:case e.UNZIP:this.err=s.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==e.Z_OK&&this._error("Init error"),this.dictionary=l,this.write_in_progress=!1,this.init_done=!0},d.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=e.Z_OK,this.mode){case e.DEFLATE:case e.DEFLATERAW:this.err=a.deflateSetDictionary(this.strm,this.dictionary);break;default:break}this.err!==e.Z_OK&&this._error("Failed to set dictionary")}},d.prototype._reset=function(){switch(this.err=e.Z_OK,this.mode){case e.DEFLATE:case e.DEFLATERAW:case e.GZIP:this.err=a.deflateReset(this.strm);break;case e.INFLATE:case e.INFLATERAW:case e.GUNZIP:this.err=s.inflateReset(this.strm);break;default:break}this.err!==e.Z_OK&&this._error("Failed to reset stream")},e.Zlib=d}).call(this,n("b639").Buffer,n("4362"))},"6c57":function(t,e,n){var r=n("23e7"),i=n("da84");r({global:!0,forced:i.globalThis!==i},{globalThis:i})},"6c73":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("3979"),i=function(t,e,n){var i=o(t),a=new r.Graph({compound:!0}).setGraph({root:i}).setDefaultNodeLabel((function(e){return t.node(e)}));return t.nodes().forEach((function(r){var o,s=t.node(r),l=t.parent(r);(s.rank===e||s.minRank<=e&&e<=s.maxRank)&&(a.setNode(r),a.setParent(r,l||i),null===(o=t[n](r))||void 0===o||o.forEach((function(e){var n=e.v===r?e.w:e.v,i=a.edgeFromArgs(n,r),o=void 0!==i?i.weight:0;a.setEdge(n,r,{weight:t.edge(e).weight+o})})),s.hasOwnProperty("minRank")&&a.setNode(r,{borderLeft:s.borderLeft[e],borderRight:s.borderRight[e]}))})),a},o=function(t){var e;while(t.hasNode(e="_root".concat(Math.random())));return e};e.default=i},"6f59":function(t,e,n){(function(e){var r=n("566b"),i=n("ab52"),o=n(5),a=function(){},s=/^v?\.0/.test(e.version),l=function(t){return"function"===typeof t},u=function(t){return!!s&&(!!o&&((t instanceof(o.ReadStream||a)||t instanceof(o.WriteStream||a))&&l(t.close)))},c=function(t){return t.setHeader&&l(t.abort)},h=function(t,e,n,o){o=r(o);var s=!1;t.on("close",(function(){s=!0})),i(t,{readable:e,writable:n},(function(t){if(t)return o(t);s=!0,o()}));var h=!1;return function(e){if(!s&&!h)return h=!0,u(t)?t.close(a):c(t)?t.abort():l(t.destroy)?t.destroy():void o(e||new Error("stream was destroyed"))}},d=function(t){t()},f=function(t,e){return t.pipe(e)},p=function(){var t,e=Array.prototype.slice.call(arguments),n=l(e[e.length-1]||a)&&e.pop()||a;if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Error("pump requires two streams per minimum");var r=e.map((function(i,o){var a=o<e.length-1,s=o>0;return h(i,a,s,(function(e){t||(t=e),e&&r.forEach(d),a||(r.forEach(d),n(t))}))}));return e.reduce(f)};t.exports=p}).call(this,n("4362"))},"6fc0":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){if("next"!==t&&"prev"!==t)return e},i=function(t){t.prev.next=t.next,t.next.prev=t.prev,delete t.next,delete t.prev},o=function(){function t(){var t={};t.prev=t,t.next=t.prev,this.shortcut=t}return t.prototype.dequeue=function(){var t=this.shortcut,e=t.prev;if(e&&e!==t)return i(e),e},t.prototype.enqueue=function(t){var e=this.shortcut;t.prev&&t.next&&i(t),t.next=e.next,e.next.prev=t,e.next=t,t.prev=e},t.prototype.toString=function(){var t=[],e=this.shortcut,n=e.prev;while(n!==e)t.push(JSON.stringify(n,r)),n=null===n||void 0===n?void 0:n.prev;return"[".concat(t.join(", "),"]")},t}();e.default=o},7037:function(t,e,n){function r(e){return t.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports["default"]=t.exports,r(e)}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),t.exports=r,t.exports.__esModule=!0,t.exports["default"]=t.exports},7049:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.getLayoutByName=e.unRegisterLayout=e.registerLayout=void 0;var i=n("5bc9"),o=n("f271"),a=new Map,s=function(t,e){if(a.get(t)&&console.warn("The layout with the name ".concat(t," exists already, it will be overridden")),(0,o.isObject)(e)){var n=function(t){function n(n){var r,i=this;i=t.call(this)||this;var o=i,a={},s=Object.assign({},o.getDefaultCfg(),(null===(r=e.getDefaultCfg)||void 0===r?void 0:r.call(e))||{});return Object.assign(a,s,e,n),Object.keys(a).forEach((function(t){var e=a[t];o[t]=e})),i}return r(n,t),n}(i.Base);a.set(t,n)}else a.set(t,e);return a.get(t)};e.registerLayout=s;var l=function(t){a.has(t)&&a.delete(t)};e.unRegisterLayout=l;var u=function(t){return a.has(t)?a.get(t):null};e.getLayoutByName=u},7080:function(t,e,n){"use strict";(function(e){const{EventEmitter:r}=n("faa1"),i=n("34eb")("elasticsearch"),o=n("94c2"),a=n("d917"),s=n("3e09"),l=n("fd7c"),u=n("e9f1"),{ConfigurationError:c}=u,h=Symbol("elasticsearchjs-initial-options"),d=Symbol("elasticsearchjs-child"),f=Symbol("elasticsearchjs-extensions"),p=n("0a7c");class g extends r{constructor(t={}){if(super(),t.cloud){const{id:n,username:r,password:i}=t.cloud,o=e.from(n.split(":")[1],"base64").toString().split("$");t.node=`https://${r}:${i}@${o[1]}.${o[0]}`,null==t.compression&&(t.compression="gzip"),null==t.suggestCompression&&(t.suggestCompression=!0),(null==t.ssl||t.ssl&&null==t.ssl.secureProtocol)&&(t.ssl=t.ssl||{},t.ssl.secureProtocol="TLSv1_2_method")}if(!t.node&&!t.nodes)throw new c("Missing node(s) option");const n=Object.assign({},{Connection:a,ConnectionPool:s,Transport:o,Serializer:l,maxRetries:3,requestTimeout:3e4,pingTimeout:3e3,sniffInterval:!1,sniffOnStart:!1,sniffEndpoint:"_nodes/_all/http",sniffOnConnectionFault:!1,resurrectStrategy:"ping",suggestCompression:!1,compression:!1,ssl:null,agent:null,headers:{},nodeFilter:null,nodeSelector:"round-robin",generateRequestId:null,name:"elasticsearch-js"},t);this[h]=n,this[f]=[],this.name=n.name,this.serializer=new n.Serializer,this.connectionPool=new n.ConnectionPool({pingTimeout:n.pingTimeout,resurrectStrategy:n.resurrectStrategy,ssl:n.ssl,agent:n.agent,Connection:n.Connection,emit:this.emit.bind(this),sniffEnabled:!1!==n.sniffInterval||!1!==n.sniffOnStart||!1!==n.sniffOnConnectionFault}),!0!==t[d]&&this.connectionPool.addConnection(n.node||n.nodes),this.transport=new n.Transport({emit:this.emit.bind(this),connectionPool:this.connectionPool,serializer:this.serializer,maxRetries:n.maxRetries,requestTimeout:n.requestTimeout,sniffInterval:n.sniffInterval,sniffOnStart:n.sniffOnStart,sniffOnConnectionFault:n.sniffOnConnectionFault,sniffEndpoint:n.sniffEndpoint,suggestCompression:n.suggestCompression,compression:n.compression,headers:n.headers,nodeFilter:n.nodeFilter,nodeSelector:n.nodeSelector,generateRequestId:n.generateRequestId,name:n.name});const r=p({makeRequest:this.transport.request.bind(this.transport),result:{body:null,statusCode:null,headers:null,warnings:null},ConfigurationError:c});Object.keys(r).forEach(t=>{this[t]=r[t]})}extend(t,e,n){"function"===typeof e&&(n=e,e={});var[r,i]=t.split(".");if(null==i&&(i=r,r=null),null!=r){if(null!=this[r]&&null!=this[r][i]&&!0!==e.force)throw new Error(`The method "${i}" already exists on namespace "${r}"`);this[r]=this[r]||{},this[r][i]=n({makeRequest:this.transport.request.bind(this.transport),result:{body:null,statusCode:null,headers:null,warnings:null},ConfigurationError:c})}else{if(null!=this[i]&&!0!==e.force)throw new Error(`The method "${i}" already exists`);this[i]=n({makeRequest:this.transport.request.bind(this.transport),result:{body:null,statusCode:null,headers:null,warnings:null},ConfigurationError:c})}this[f].push({name:t,opts:e,fn:n})}child(t){const e=Object.assign({},this[h],t);e[d]=!0;const n=new g(e);n.connectionPool=this.connectionPool,n.transport.connectionPool=this.connectionPool;const r=this.emit.bind(this);return n.emit=r,n.connectionPool.emit=r,n.transport.emit=r,n.on=this.on.bind(this),this[f].forEach(({name:t,opts:e,fn:r})=>{n.extend(t,e,r)}),n}close(t){if(null==t)return new Promise((t,e)=>{this.close(t)});i("Closing the client"),this.connectionPool.empty(t)}}const m={RESPONSE:"response",REQUEST:"request",SNIFF:"sniff",RESURRECT:"resurrect"};t.exports={Client:g,Transport:o,ConnectionPool:s,Connection:a,Serializer:l,events:m,errors:u}}).call(this,n("b639").Buffer)},"711c":function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.RadialLayout=void 0;var o=n("f271"),a=n("5bc9"),s=i(n("3ddc")),l=i(n("5401"));function u(t){for(var e=t.length,n=t[0].length,r=[],i=0;i<e;i++){for(var o=[],a=0;a<n;a++)0!==t[i][a]?o.push(1/(t[i][a]*t[i][a])):o.push(0);r.push(o)}return r}function c(t,e){var n=-1;return t.forEach((function(t,r){t.id===e&&(n=r)})),n}function h(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}var d=function(t){function e(e){var n=t.call(this)||this;return n.maxIteration=1e3,n.focusNode=null,n.unitRadius=null,n.linkDistance=50,n.preventOverlap=!1,n.strictRadial=!0,n.maxPreventOverlapIteration=200,n.sortStrength=10,n.nodes=[],n.edges=[],n.updateCfg(e),n}return r(e,t),e.prototype.getDefaultCfg=function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}},e.prototype.execute=function(){var t=this,e=t.nodes,n=t.edges||[];if(e&&0!==e.length){t.width||"undefined"===typeof window||(t.width=window.innerWidth),t.height||"undefined"===typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);var r=t.center;if(1===e.length)return e[0].x=r[0],e[0].y=r[1],void(t.onLayoutEnd&&t.onLayoutEnd());var i=t.linkDistance,a=null;if((0,o.isString)(t.focusNode)){for(var h=!1,d=0;d<e.length;d++)e[d].id===t.focusNode&&(a=e[d],t.focusNode=a,h=!0,d=e.length);h||(a=null)}else a=t.focusNode;a||(a=e[0],t.focusNode=a);var f=c(e,a.id);f<0&&(f=0),t.focusIndex=f;var p=(0,o.getAdjMatrix)({nodes:e,edges:n},!1),g=(0,o.floydWarshall)(p),m=t.maxToFocus(g,f);t.handleInfinity(g,f,m+1),t.distances=g;var y=g[f],v=t.width||500,b=t.height||500,_=v-r[0]>r[0]?r[0]:v-r[0],x=b-r[1]>r[1]?r[1]:b-r[1];0===_&&(_=v/2),0===x&&(x=b/2);var w=x>_?_:x,S=Math.max.apply(Math,y),E=[];y.forEach((function(e,n){t.unitRadius||(t.unitRadius=w/S),E[n]=e*t.unitRadius})),t.radii=E;var C=t.eIdealDisMatrix();t.eIdealDistances=C;var M=u(C);t.weights=M;var T=new s.default({linkDistance:i,distances:C}),A=T.layout();A.forEach((function(t){(0,o.isNaN)(t[0])&&(t[0]=Math.random()*i),(0,o.isNaN)(t[1])&&(t[1]=Math.random()*i)})),t.positions=A,A.forEach((function(t,n){e[n].x=t[0]+r[0],e[n].y=t[1]+r[1]})),A.forEach((function(t){t[0]-=A[f][0],t[1]-=A[f][1]})),t.run();var O,k=t.preventOverlap,I=t.nodeSize,P=t.strictRadial;if(k){var L,N=t.nodeSpacing;L=(0,o.isNumber)(N)?function(){return N}:(0,o.isFunction)(N)?N:function(){return 0},O=I?(0,o.isArray)(I)?function(t){var e=I[0]>I[1]?I[0]:I[1];return e+L(t)}:function(t){return I+L(t)}:function(t){if(t.size){if((0,o.isArray)(t.size)){var e=t.size[0]>t.size[1]?t.size[0]:t.size[1];return e+L(t)}if((0,o.isObject)(t.size)){e=t.size.width>t.size.height?t.size.width:t.size.height;return e+L(t)}return t.size+L(t)}return 10+L(t)};var R={nodes:e,nodeSizeFunc:O,adjMatrix:p,positions:A,radii:E,height:b,width:v,strictRadial:P,focusID:f,iterations:t.maxPreventOverlapIteration||200,k:A.length/4.5},D=new l.default(R);A=D.layout()}return A.forEach((function(t,n){e[n].x=t[0]+r[0],e[n].y=t[1]+r[1]})),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n}}t.onLayoutEnd&&t.onLayoutEnd()},e.prototype.run=function(){for(var t=this,e=t.maxIteration,n=t.positions||[],r=t.weights||[],i=t.eIdealDistances||[],o=t.radii||[],a=0;a<=e;a++){var s=a/e;t.oneIteration(s,n,o,i,r)}},e.prototype.oneIteration=function(t,e,n,r,i){var o=this,a=1-t,s=o.focusIndex;e.forEach((function(o,l){var u=h(o,[0,0]),c=0===u?0:1/u;if(l!==s){var d=0,f=0,p=0;e.forEach((function(t,e){if(l!==e){var n=h(o,t),a=0===n?0:1/n,s=r[e][l];p+=i[l][e],d+=i[l][e]*(t[0]+s*(o[0]-t[0])*a),f+=i[l][e]*(t[1]+s*(o[1]-t[1])*a)}}));var g=0===n[l]?0:1/n[l];p*=a,p+=t*g*g,d*=a,d+=t*g*o[0]*c,o[0]=d/p,f*=a,f+=t*g*o[1]*c,o[1]=f/p}}))},e.prototype.eIdealDisMatrix=function(){var t=this,e=t.nodes;if(!e)return[];var n=t.distances,r=t.linkDistance,i=t.radii||[],a=t.unitRadius||50,s=[];return n&&n.forEach((function(n,l){var u=[];n.forEach((function(n,s){if(l===s)u.push(0);else if(i[l]===i[s])if("data"===t.sortBy)u.push(n*(Math.abs(l-s)*t.sortStrength)/(i[l]/a));else if(t.sortBy){var c=e[l][t.sortBy]||0,h=e[s][t.sortBy]||0;(0,o.isString)(c)&&(c=c.charCodeAt(0)),(0,o.isString)(h)&&(h=h.charCodeAt(0)),u.push(n*(Math.abs(c-h)*t.sortStrength)/(i[l]/a))}else u.push(n*r/(i[l]/a));else{var d=(r+a)/2;u.push(n*d)}})),s.push(u)})),s},e.prototype.handleInfinity=function(t,e,n){for(var r=t.length,i=0;i<r;i++)if(t[e][i]===1/0){t[e][i]=n,t[i][e]=n;for(var o=0;o<r;o++)t[i][o]!==1/0&&t[e][o]===1/0&&(t[e][o]=n+t[i][o],t[o][e]=n+t[i][o])}for(i=0;i<r;i++)if(i!==e)for(o=0;o<r;o++)if(t[i][o]===1/0){var a=Math.abs(t[e][i]-t[e][o]);a=0===a?1:a,t[i][o]=a}},e.prototype.maxToFocus=function(t,e){for(var n=0,r=0;r<t[e].length;r++)t[e][r]!==1/0&&(n=t[e][r]>n?t[e][r]:n);return n},e.prototype.getType=function(){return"radial"},e}(a.Base);e.RadialLayout=d},7162:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.oneHot=e.getDistance=e.getAllKeyValueMap=e.default=void 0;var r=n("8937"),i=n("5d6f"),o=a(n("0c62"));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(t,e,n){var i=[];(null===e||void 0===e?void 0:e.length)?i=e:(t.forEach((function(t){i=i.concat(Object.keys(t))})),i=(0,r.uniq)(i));var o={};return i.forEach((function(e){var i=[];t.forEach((function(t){void 0!==t[e]&&""!==t[e]&&i.push(t[e])})),i.length&&!(null===n||void 0===n?void 0:n.includes(e))&&(o[e]=(0,r.uniq)(i))})),o};e.getAllKeyValueMap=s;var l=function(t,e,n){var r=s(t,e,n),i=[];if(!Object.keys(r).length)return i;var o=Object.values(r),a=o.every((function(t){return t.every((function(t){return"number"===typeof t}))}));return t.forEach((function(t,e){var n=[];Object.keys(r).forEach((function(e){var i=t[e],o=r[e],s=o.findIndex((function(t){return i===t})),l=[];if(a)l.push(i);else for(var u=0;u<o.length;u++)u===s?l.push(1):l.push(0);n=n.concat(l)})),i[e]=n})),i};e.oneHot=l;var u=function(t,e,n,r){void 0===n&&(n=i.DistanceType.EuclideanDistance);var a=0;switch(n){case i.DistanceType.EuclideanDistance:a=new o.default(t).euclideanDistance(new o.default(e));break;default:break}return a};e.getDistance=u;var c={getAllKeyValueMap:s,oneHot:l,getDistance:u};e.default=c},7326:function(t,e,n){"use strict";n.d(e,"d",(function(){return i})),n.d(e,"b",(function(){return o})),n.d(e,"e",(function(){return a})),n.d(e,"f",(function(){return s})),n.d(e,"l",(function(){return l})),n.d(e,"j",(function(){return u}));var r=n("8937");function i(){return window?window.devicePixelRatio:1}function o(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}function a(t,e,n,r,i,o){return i>=t&&i<=t+n&&o>=e&&o<=e+r}function s(t,e){return!(e.minX>t.maxX||e.maxX<t.minX||e.minY>t.maxY||e.maxY<t.minY)}function l(t,e){return t&&e?{minX:Math.min(t.minX,e.minX),minY:Math.min(t.minY,e.minY),maxX:Math.max(t.maxX,e.maxX),maxY:Math.max(t.maxY,e.maxY)}:t||e}function u(t,e){return t[0]===e[0]&&t[1]===e[1]}n.d(e,"i",(function(){return r["isNil"]})),n.d(e,"k",(function(){return r["isString"]})),n.d(e,"h",(function(){return r["isFunction"]})),n.d(e,"g",(function(){return r["isArray"]})),n.d(e,"c",(function(){return r["each"]})),n.d(e,"o",(function(){return r["toRadian"]})),n.d(e,"m",(function(){return r["mod"]})),n.d(e,"n",(function(){return r["requestAnimationFrame"]})),n.d(e,"a",(function(){return r["clearAnimationFrame"]}))},7349:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a}));var r=n("00f9"),i=n("73ec");function o(t,e){e.forEach((function(e){e.draw(t)}))}function a(t,e){var n=t.get("canvas");if(n&&n.get("autoDraw")){var o=n.get("context"),a=t.getParent(),s=a?a.getChildren():[n],l=t.get("el");if("remove"===e){var u=t.get("isClipShape");if(u){var c=l&&l.parentNode,h=c&&c.parentNode;c&&h&&h.removeChild(c)}else l&&l.parentNode&&l.parentNode.removeChild(l)}else if("show"===e)l.setAttribute("visibility","visible");else if("hide"===e)l.setAttribute("visibility","hidden");else if("zIndex"===e)Object(i["c"])(l,s.indexOf(t));else if("sort"===e){var d=t.get("children");d&&d.length&&Object(i["d"])(t,(function(t,e){return d.indexOf(t)-d.indexOf(e)?1:0}))}else"clear"===e?l&&(l.innerHTML=""):"matrix"===e?Object(r["c"])(t):"clip"===e?Object(r["a"])(t,o):"attr"===e||"add"===e&&t.draw(o)}}},"73ac":function(t,e,n){var r=n("743f"),i=n("b047"),o=n("99d3"),a=o&&o.isTypedArray,s=a?i(a):r;t.exports=s},"73ec":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return a})),n.d(e,"d",(function(){return s})),n.d(e,"c",(function(){return l}));var r=n("8937"),i=n("22f9");function o(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function a(t){var e=i["a"][t.type],n=t.getParent();if(!e)throw new Error("the type "+t.type+" is not supported by svg");var r=o(e);if(t.get("id")&&(r.id=t.get("id")),t.set("el",r),t.set("attrs",{}),n){var a=n.get("el");a||(a=n.createDom(),n.set("el",a)),a.appendChild(r)}return r}function s(t,e){var n=t.get("el"),i=Object(r["toArray"])(n.children).sort(e),o=document.createDocumentFragment();i.forEach((function(t){o.appendChild(t)})),n.appendChild(o)}function l(t,e){var n=t.parentNode,r=Array.from(n.childNodes).filter((function(t){return 1===t.nodeType&&"defs"!==t.nodeName.toLowerCase()})),i=r[e],o=r.indexOf(t);if(i){if(o>e)n.insertBefore(t,i);else if(o<e){var a=r[e+1];a?n.insertBefore(t,a):n.appendChild(t)}}else n.appendChild(t)}},"740e":function(t,e,n){t.exports.VectorTile=n("07dd"),t.exports.VectorTileFeature=n("1dfc"),t.exports.VectorTileLayer=n("0e21")},"743a":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){for(var n=t.nodes().filter((function(e){var n;return!(null===(n=t.children(e))||void 0===n?void 0:n.length)})),r=n.map((function(e){return t.node(e).rank})),i=Math.max.apply(Math,r),o=[],a=0;a<i+1;a++)o[a]=[];null===e||void 0===e||e.forEach((function(e){var n=t.node(e);n&&!(null===n||void 0===n?void 0:n.dummy)&&(isNaN(n.rank)||(n.fixorder=o[n.rank].length,o[n.rank].push(e)))}))};e.default=r},"743f":function(t,e,n){var r=n("3729"),i=n("b218"),o=n("1310"),a="[object Arguments]",s="[object Array]",l="[object Boolean]",u="[object Date]",c="[object Error]",h="[object Function]",d="[object Map]",f="[object Number]",p="[object Object]",g="[object RegExp]",m="[object Set]",y="[object String]",v="[object WeakMap]",b="[object ArrayBuffer]",_="[object DataView]",x="[object Float32Array]",w="[object Float64Array]",S="[object Int8Array]",E="[object Int16Array]",C="[object Int32Array]",M="[object Uint8Array]",T="[object Uint8ClampedArray]",A="[object Uint16Array]",O="[object Uint32Array]",k={};function I(t){return o(t)&&i(t.length)&&!!k[r(t)]}k[x]=k[w]=k[S]=k[E]=k[C]=k[M]=k[T]=k[A]=k[O]=!0,k[a]=k[s]=k[b]=k[l]=k[_]=k[u]=k[c]=k[h]=k[d]=k[f]=k[p]=k[g]=k[m]=k[y]=k[v]=!1,t.exports=I},7456:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["order","create","timeout","master_timeout","flat_settings","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",flatSettings:"flat_settings",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["name"]){const t=new n("Missing required parameter: name");return r(t,l)}if(null==t["body"]){const t=new n("Missing required parameter: body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,name:d,...f}=t;f=i(o,a,f,u),null==c&&(c="PUT");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g="/_template/"+encodeURIComponent(d);const m={method:c,path:g,body:h||"",querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},"74f4":function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var r,i,o=0,a=0,s=0,l=1e3,u=0,c=0,h=0,d="object"===typeof performance&&performance.now?performance:Date,f="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function p(){return c||(f(g),c=d.now()+h)}function g(){c=0}function m(){this._call=this._time=this._next=null}function y(t,e,n){var r=new m;return r.restart(t,e,n),r}function v(){p(),++o;var t,e=r;while(e)(t=c-e._time)>=0&&e._call.call(null,t),e=e._next;--o}function b(){c=(u=d.now())+h,o=a=0;try{v()}finally{o=0,x(),c=0}}function _(){var t=d.now(),e=t-u;e>l&&(h-=e,u=t)}function x(){var t,e,n=r,o=1/0;while(n)n._call?(o>n._time&&(o=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:r=e);i=t,w(o)}function w(t){if(!o){a&&(a=clearTimeout(a));var e=t-c;e>24?(t<1/0&&(a=setTimeout(b,t-d.now()-h)),s&&(s=clearInterval(s))):(s||(u=d.now(),s=setInterval(_,l)),o=1,f(b))}}m.prototype=y.prototype={constructor:m,restart:function(t,e,n){if("function"!==typeof t)throw new TypeError("callback is not a function");n=(null==n?p():+n)+(null==e?0:+e),this._next||i===this||(i?i._next=this:r=this,i=this),this._call=t,this._time=n,w()},stop:function(){this._call&&(this._call=null,this._time=1/0,w())}}},7572:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["pretty","human","error_trace","source","filter_path"],a={errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,...d}=t;d=i(o,a,d,u),null==c&&(c="GET");var f=s.ignore;"number"===typeof f&&(s.ignore=[f]);var p="";p="/_ingest/processor/grok";const g={method:c,path:p,body:null,querystring:d};return s.warnings=0===u.length?null:u,e(g,s,l)}}t.exports=r},"75d6":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["flat_settings","master_timeout","timeout","include_defaults","pretty","human","error_trace","source","filter_path"],a={flatSettings:"flat_settings",masterTimeout:"master_timeout",includeDefaults:"include_defaults",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,...d}=t;d=i(o,a,d,u),null==c&&(c="GET");var f=s.ignore;"number"===typeof f&&(s.ignore=[f]);var p="";p="/_cluster/settings";const g={method:c,path:p,body:null,querystring:d};return s.warnings=0===u.length?null:u,e(g,s,l)}}t.exports=r},"780f":function(t,e,n){"use strict";t.exports=o;var r=n("27bf"),i=n("3a7c");function o(t){if(!(this instanceof o))return new o(t);r.call(this,t)}i.inherits=n("3fb5"),i.inherits(o,r),o.prototype._transform=function(t,e,n){n(null,t)}},"78b1":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){var e,n={},r=0,i=function(e){var o,a=r;null===(o=t.children(e))||void 0===o||o.forEach(i),n[e]={low:a,lim:r++}};return null===(e=t.children())||void 0===e||e.forEach(i),n},i=function(t,e,n,r){var i,o,a=[],s=[],l=Math.min(e[n].low,e[r].low),u=Math.max(e[n].lim,e[r].lim);i=n;do{i=t.parent(i),a.push(i)}while(i&&(e[i].low>l||u>e[i].lim));o=i,i=r;while(i&&i!==o)s.push(i),i=t.parent(i);return{lca:o,path:a.concat(s.reverse())}},o=function(t){var e,n=r(t);null===(e=t.graph().dummyChains)||void 0===e||e.forEach((function(e){var r,o,a=e,s=t.node(a),l=s.edgeObj;if(l){var u=i(t,n,l.v,l.w),c=u.path,h=u.lca,d=0,f=c[d],p=!0;while(a!==l.w){if(s=t.node(a),p){while(f!==h&&(null===(r=t.node(f))||void 0===r?void 0:r.maxRank)<s.rank)d++,f=c[d];f===h&&(p=!1)}if(!p){while(d<c.length-1&&(null===(o=t.node(c[d+1]))||void 0===o?void 0:o.minRank)<=s.rank)d++;f=c[d]}t.setParent(a,f),a=t.successors(a)[0]}}}))};e.default=o},"78bd":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["analyzer","analyze_wildcard","default_operator","df","from","ignore_unavailable","allow_no_indices","conflicts","expand_wildcards","lenient","pipeline","preference","q","routing","scroll","search_type","search_timeout","size","sort","_source","_source_exclude","_source_include","terminate_after","stats","version","version_type","request_cache","refresh","timeout","wait_for_active_shards","scroll_size","wait_for_completion","requests_per_second","slices","pretty","human","error_trace","source","filter_path"],a={analyzeWildcard:"analyze_wildcard",defaultOperator:"default_operator",ignoreUnavailable:"ignore_unavailable",allowNoIndices:"allow_no_indices",expandWildcards:"expand_wildcards",searchType:"search_type",searchTimeout:"search_timeout",_sourceExclude:"_source_exclude",_sourceInclude:"_source_include",terminateAfter:"terminate_after",versionType:"version_type",requestCache:"request_cache",waitForActiveShards:"wait_for_active_shards",scrollSize:"scroll_size",waitForCompletion:"wait_for_completion",requestsPerSecond:"requests_per_second",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["index"]){const t=new n("Missing required parameter: index");return r(t,l)}if(null!=t["type"]&&null==t["index"]){const t=new n("Missing required parameter of the url: index");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,type:f,...p}=t;p=i(o,a,p,u),null==c&&(c="POST");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m=null!=d&&null!=f?"/"+encodeURIComponent(d)+"/"+encodeURIComponent(f)+"/_update_by_query":"/"+encodeURIComponent(d)+"/_update_by_query";const y={method:c,path:m,body:h||"",querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},7908:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.minBy=e.notime=e.time=e.partition=e.maxRank=e.addBorderNode=e.removeEmptyRanks=e.normalizeRanks=e.buildLayerMatrix=e.intersectRect=e.predecessorWeights=e.successorWeights=e.zipObject=e.asNonCompoundGraph=e.simplify=e.addDummyNode=void 0;var r=n("f271"),i=n("3979"),o=function(t,e){return Number(t)-Number(e)},a=function(t,e,n,r){var i;do{i="".concat(r).concat(Math.random())}while(t.hasNode(i));return n.dummy=e,t.setNode(i,n),i};e.addDummyNode=a;var s=function(t){var e=(new i.Graph).setGraph(t.graph());return t.nodes().forEach((function(n){e.setNode(n,t.node(n))})),t.edges().forEach((function(n){var r=e.edgeFromArgs(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})})),e};e.simplify=s;var l=function(t){var e=new i.Graph({multigraph:t.isMultigraph()}).setGraph(t.graph());return t.nodes().forEach((function(n){var r;(null===(r=t.children(n))||void 0===r?void 0:r.length)||e.setNode(n,t.node(n))})),t.edges().forEach((function(n){e.setEdgeObj(n,t.edge(n))})),e};e.asNonCompoundGraph=l;var u=function(t,e){return null===t||void 0===t?void 0:t.reduce((function(t,n,r){return t[n]=e[r],t}),{})};e.zipObject=u;var c=function(t){var e={};return t.nodes().forEach((function(n){var r,i={};null===(r=t.outEdges(n))||void 0===r||r.forEach((function(e){var n;i[e.w]=(i[e.w]||0)+((null===(n=t.edge(e))||void 0===n?void 0:n.weight)||0)})),e[n]=i})),e};e.successorWeights=c;var h=function(t){var n=t.nodes(),r=n.map((function(e){var n,r={};return null===(n=t.inEdges(e))||void 0===n||n.forEach((function(e){r[e.v]=(r[e.v]||0)+t.edge(e).weight})),r}));return(0,e.zipObject)(n,r)};e.predecessorWeights=h;var d=function(t,e){var n,r,i=Number(t.x),o=Number(t.y),a=Number(e.x)-i,s=Number(e.y)-o,l=Number(t.width)/2,u=Number(t.height)/2;return a||s?(Math.abs(s)*l>Math.abs(a)*u?(s<0&&(u=-u),n=u*a/s,r=u):(a<0&&(l=-l),n=l,r=l*s/a),{x:i+n,y:o+r}):{x:0,y:0}};e.intersectRect=d;var f=function(t){for(var n=[],r=(0,e.maxRank)(t)+1,i=0;i<r;i++)n.push([]);t.nodes().forEach((function(e){var r=t.node(e);if(r){var i=r.rank;void 0!==i&&n[i]&&n[i].push(e)}}));for(i=0;i<r;i++)n[i]=n[i].sort((function(e,n){var r,i;return o(null===(r=t.node(e))||void 0===r?void 0:r.order,null===(i=t.node(n))||void 0===i?void 0:i.order)}));return n};e.buildLayerMatrix=f;var p=function(t){var e=t.nodes().filter((function(e){var n;return void 0!==(null===(n=t.node(e))||void 0===n?void 0:n.rank)})).map((function(e){return t.node(e).rank})),n=Math.min.apply(Math,e);t.nodes().forEach((function(e){var r=t.node(e);r.hasOwnProperty("rank")&&n!==1/0&&(r.rank-=n)}))};e.normalizeRanks=p;var g=function(t){var e=t.nodes(),n=e.filter((function(e){var n;return void 0!==(null===(n=t.node(e))||void 0===n?void 0:n.rank)})).map((function(e){return t.node(e).rank})),r=Math.min.apply(Math,n),i=[];e.forEach((function(e){var n,o=((null===(n=t.node(e))||void 0===n?void 0:n.rank)||0)-r;i[o]||(i[o]=[]),i[o].push(e)}));for(var o=0,a=t.graph().nodeRankFactor||0,s=0;s<i.length;s++){var l=i[s];void 0===l?s%a!==0&&(o-=1):o&&(null===l||void 0===l||l.forEach((function(e){var n=t.node(e);n&&(n.rank=n.rank||0,n.rank+=o)})))}};e.removeEmptyRanks=g;var m=function(t,n,i,o){var a={width:0,height:0};return(0,r.isNumber)(i)&&(0,r.isNumber)(o)&&(a.rank=i,a.order=o),(0,e.addDummyNode)(t,"border",a,n)};e.addBorderNode=m;var y=function(t){var e;return t.nodes().forEach((function(n){var r,i=null===(r=t.node(n))||void 0===r?void 0:r.rank;void 0!==i&&(void 0===e||i>e)&&(e=i)})),e||(e=0),e};e.maxRank=y;var v=function(t,e){var n={lhs:[],rhs:[]};return null===t||void 0===t||t.forEach((function(t){e(t)?n.lhs.push(t):n.rhs.push(t)})),n};e.partition=v;var b=function(t,e){var n=Date.now();try{return e()}finally{console.log("".concat(t," time: ").concat(Date.now()-n,"ms"))}};e.time=b;var _=function(t,e){return e()};e.notime=_;var x=function(t,e){return t.reduce((function(t,n){var r=e(t),i=e(n);return r>i?n:t}))};e.minBy=x},7915:function(t,e,n){"use strict";t.exports=i;var r=n("9152");function i(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var o=4294967296,a=1/o,s=12,l="undefined"===typeof TextDecoder?null:new TextDecoder("utf8");function u(t,e,n){var r,i,o=n.buf;if(i=o[n.pos++],r=(112&i)>>4,i<128)return h(t,r,e);if(i=o[n.pos++],r|=(127&i)<<3,i<128)return h(t,r,e);if(i=o[n.pos++],r|=(127&i)<<10,i<128)return h(t,r,e);if(i=o[n.pos++],r|=(127&i)<<17,i<128)return h(t,r,e);if(i=o[n.pos++],r|=(127&i)<<24,i<128)return h(t,r,e);if(i=o[n.pos++],r|=(1&i)<<31,i<128)return h(t,r,e);throw new Error("Expected varint not more than 10 bytes")}function c(t){return t.type===i.Bytes?t.readVarint()+t.pos:t.pos+1}function h(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function d(t,e){var n,r;if(t>=0?(n=t%4294967296|0,r=t/4294967296|0):(n=~(-t%4294967296),r=~(-t/4294967296),4294967295^n?n=n+1|0:(n=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),f(n,r,e),p(r,e)}function f(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos]=127&t}function p(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}function g(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function m(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function y(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function v(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function b(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function _(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function x(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function w(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function S(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function E(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function C(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function M(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function T(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function A(t,e,n){var r="",i=e;while(i<n){var o,a,s,l=t[i],u=null,c=l>239?4:l>223?3:l>191?2:1;if(i+c>n)break;1===c?l<128&&(u=l):2===c?(o=t[i+1],128===(192&o)&&(u=(31&l)<<6|63&o,u<=127&&(u=null))):3===c?(o=t[i+1],a=t[i+2],128===(192&o)&&128===(192&a)&&(u=(15&l)<<12|(63&o)<<6|63&a,(u<=2047||u>=55296&&u<=57343)&&(u=null))):4===c&&(o=t[i+1],a=t[i+2],s=t[i+3],128===(192&o)&&128===(192&a)&&128===(192&s)&&(u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s,(u<=65535||u>=1114112)&&(u=null))),null===u?(u=65533,c=1):u>65535&&(u-=65536,r+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),r+=String.fromCharCode(u),i+=c}return r}function O(t,e,n){return l.decode(t.subarray(e,n))}function k(t,e,n){for(var r,i,o=0;o<e.length;o++){if(r=e.charCodeAt(o),r>55295&&r<57344){if(!i){r>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}i.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){n=n||this.length;while(this.pos<n){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,t(i,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=C(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=T(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=C(this.buf,this.pos)+C(this.buf,this.pos+4)*o;return this.pos+=8,t},readSFixed64:function(){var t=C(this.buf,this.pos)+T(this.buf,this.pos+4)*o;return this.pos+=8,t},readFloat:function(){var t=r.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=r.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,r=this.buf;return n=r[this.pos++],e=127&n,n<128?e:(n=r[this.pos++],e|=(127&n)<<7,n<128?e:(n=r[this.pos++],e|=(127&n)<<14,n<128?e:(n=r[this.pos++],e|=(127&n)<<21,n<128?e:(n=r[this.pos],e|=(15&n)<<28,u(e,t,this)))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2===1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=s&&l?O(this.buf,e,t):A(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==i.Bytes)return t.push(this.readVarint(e));var n=c(this);t=t||[];while(this.pos<n)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==i.Bytes)return t.push(this.readSVarint());var e=c(this);t=t||[];while(this.pos<e)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==i.Bytes)return t.push(this.readBoolean());var e=c(this);t=t||[];while(this.pos<e)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==i.Bytes)return t.push(this.readFloat());var e=c(this);t=t||[];while(this.pos<e)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==i.Bytes)return t.push(this.readDouble());var e=c(this);t=t||[];while(this.pos<e)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed32());var e=c(this);t=t||[];while(this.pos<e)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed32());var e=c(this);t=t||[];while(this.pos<e)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed64());var e=c(this);t=t||[];while(this.pos<e)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed64());var e=c(this);t=t||[];while(this.pos<e)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===i.Varint)while(this.buf[this.pos++]>127);else if(e===i.Bytes)this.pos=this.readVarint()+this.pos;else if(e===i.Fixed32)this.pos+=4;else{if(e!==i.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){var e=this.length||16;while(e<this.pos+t)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),M(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),M(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),M(this.buf,-1&t,this.pos),M(this.buf,Math.floor(t*a),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),M(this.buf,-1&t,this.pos),M(this.buf,Math.floor(t*a),this.pos+4),this.pos+=8},writeVarint:function(t){t=+t||0,t>268435455||t<0?d(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=k(this.buf,t,this.pos);var n=this.pos-e;n>=128&&g(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),r.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),r.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&g(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,i.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,m,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,y,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,_,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,v,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,b,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,x,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,w,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,S,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,E,e)},writeBytesField:function(t,e){this.writeTag(t,i.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,i.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,i.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,i.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},7927:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n("28bb")),o=r(n("5f33")),a=r(n("6c73")),s=r(n("ef77")),l=r(n("b88d")),u=n("f271"),c=n("3979"),h=n("7908"),d=function(t,e){for(var n=(0,h.maxRank)(t),r=[],a=[],s=1;s<n+1;s++)r.push(s);for(s=n-1;s>-1;s--)a.push(s);var l=f(t,r,"inEdges"),c=f(t,a,"outEdges"),d=(0,i.default)(t);g(t,d);for(var m,y=Number.POSITIVE_INFINITY,v=(s=0,0);v<4;++s,++v){p(s%2?l:c,s%4>=2,!1,e),d=(0,h.buildLayerMatrix)(t);var b=(0,o.default)(t,d);b<y&&(v=0,m=(0,u.clone)(d),y=b)}d=(0,i.default)(t),g(t,d);for(s=0,v=0;v<4;++s,++v){p(s%2?l:c,s%4>=2,!0,e),d=(0,h.buildLayerMatrix)(t);b=(0,o.default)(t,d);b<y&&(v=0,m=(0,u.clone)(d),y=b)}g(t,m)},f=function(t,e,n){return e.map((function(e){return(0,a.default)(t,e,n)}))},p=function(t,e,n,r){var i=new c.Graph;null===t||void 0===t||t.forEach((function(t){for(var o,a=t.graph().root,u=(0,l.default)(t,a,i,e,n,r),c=0;c<(null===(o=u.vs)||void 0===o?void 0:o.length);c++){var h=t.node(u.vs[c]);h&&(h.order=c)}(0,s.default)(t,i,u.vs)}))},g=function(t,e){null===e||void 0===e||e.forEach((function(e){null===e||void 0===e||e.forEach((function(e,n){t.node(e).order=n}))}))};e.default=d},"7b46":function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return p}));var r=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},i=function(){function t(t,e,n){this.name=t,this.version=e,this.os=n,this.type="browser"}return t}(),o=function(){function e(e){this.version=e,this.type="node",this.name="node",this.os=t.platform}return e}(),a=function(){function t(t,e,n,r){this.name=t,this.version=e,this.os=n,this.bot=r,this.type="bot-device"}return t}(),s=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),l=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),u=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,c=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,h=3,d=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",u]],f=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function p(t){return t?m(t):"undefined"===typeof document&&"undefined"!==typeof navigator&&"ReactNative"===navigator.product?new l:"undefined"!==typeof navigator?m(navigator.userAgent):v()}function g(t){return""!==t&&d.reduce((function(e,n){var r=n[0],i=n[1];if(e)return e;var o=i.exec(t);return!!o&&[r,o]}),!1)}function m(t){var e=g(t);if(!e)return null;var n=e[0],o=e[1];if("searchbot"===n)return new s;var l=o[1]&&o[1].split(".").join("_").split("_").slice(0,3);l?l.length<h&&(l=r(r([],l,!0),b(h-l.length),!0)):l=[];var u=l.join("."),d=y(t),f=c.exec(t);return f&&f[1]?new a(n,u,d,f[1]):new i(n,u,d)}function y(t){for(var e=0,n=f.length;e<n;e++){var r=f[e],i=r[0],o=r[1],a=o.exec(t);if(a)return i}return null}function v(){var e="undefined"!==typeof t&&t.version;return e?new o(t.version.slice(1)):null}function b(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}}).call(this,n("4362"))},"7c38":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["allow_no_indices","expand_wildcards","ignore_unavailable","wait_for_completion","only_ancient_segments","pretty","human","error_trace","source","filter_path"],a={allowNoIndices:"allow_no_indices",expandWildcards:"expand_wildcards",ignoreUnavailable:"ignore_unavailable",waitForCompletion:"wait_for_completion",onlyAncientSegments:"only_ancient_segments",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,...f}=t;f=i(o,a,f,u),null==c&&(c="POST");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g=null!=d?"/"+encodeURIComponent(d)+"/_upgrade":"/_upgrade";const m={method:c,path:g,body:"",querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},"7c66":function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.CircularLayout=void 0;var i=n("5bc9"),o=n("f271");function a(t,e,n,r){t.forEach((function(e,n){t[n].children=[],t[n].parent=[]})),r?e.forEach((function(e){var r=(0,o.getEdgeTerminal)(e,"source"),i=(0,o.getEdgeTerminal)(e,"target"),a=0;r&&(a=n[r]);var s=0;i&&(s=n[i]);var l=t[a].children,u=t[s].parent;l.push(t[s].id),u.push(t[a].id)})):e.forEach((function(e){var r=(0,o.getEdgeTerminal)(e,"source"),i=(0,o.getEdgeTerminal)(e,"target"),a=0;r&&(a=n[r]);var s=0;i&&(s=n[i]);var l=t[a].children,u=t[s].children;l.push(t[s].id),u.push(t[a].id)}))}function s(t,e,n){for(var r=n.length,i=0;i<r;i++){var a=(0,o.getEdgeTerminal)(n[i],"source"),s=(0,o.getEdgeTerminal)(n[i],"target");if(t.id===a&&e.id===s||e.id===a&&t.id===s)return!0}return!1}function l(t,e){var n=t.degree,r=e.degree;return n<r?-1:n>r?1:0}var u=function(t){function e(e){var n=t.call(this)||this;return n.radius=null,n.nodeSize=void 0,n.startRadius=null,n.endRadius=null,n.startAngle=0,n.endAngle=2*Math.PI,n.clockwise=!0,n.divisions=1,n.ordering=null,n.angleRatio=1,n.nodes=[],n.edges=[],n.nodeMap={},n.degrees=[],n.width=300,n.height=300,n.updateCfg(e),n}return r(e,t),e.prototype.getDefaultCfg=function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}},e.prototype.execute=function(){var t,e=this,n=e.nodes,r=e.edges,i=n.length;if(0!==i){e.width||"undefined"===typeof window||(e.width=window.innerWidth),e.height||"undefined"===typeof window||(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]);var a=e.center;if(1===i)return n[0].x=a[0],n[0].y=a[1],void(e.onLayoutEnd&&e.onLayoutEnd());var s=e.radius,l=e.startRadius,u=e.endRadius,c=e.divisions,h=e.startAngle,d=e.endAngle,f=e.angleRatio,p=e.ordering,g=e.clockwise,m=e.nodeSpacing,y=e.nodeSize,v=(d-h)/i,b={};n.forEach((function(t,e){b[t.id]=e})),e.nodeMap=b;var _=(0,o.getDegree)(n.length,b,r);if(e.degrees=_,m){var x=(0,o.getFuncByUnknownType)(10,m),w=(0,o.getFuncByUnknownType)(10,y),S=-1/0;n.forEach((function(t){var e=w(t);S<e&&(S=e)}));var E=0;n.forEach((function(t,e){E+=0===e?S||10:(x(t)||0)+(S||10)})),s=E/(2*Math.PI)}else s||l||u?!l&&u?l=u:l&&!u&&(u=l):s=e.height>e.width?e.width/2:e.height/2;var C=v*f,M=[];M="topology"===p?e.topologyOrdering():"topology-directed"===p?e.topologyOrdering(!0):"degree"===p?e.degreeOrdering():n;for(var T=Math.ceil(i/c),A=0;A<i;++A){var O=s;O||null===l||null===u||(O=l+A*(u-l)/(i-1)),O||(O=10+100*A/(i-1));var k=h+A%T*C+2*Math.PI/c*Math.floor(A/T);g||(k=d-A%T*C-2*Math.PI/c*Math.floor(A/T)),M[A].x=a[0]+Math.cos(k)*O,M[A].y=a[1]+Math.sin(k)*O,M[A].weight=_[A].all}return null===(t=e.onLayoutEnd)||void 0===t||t.call(e),{nodes:M,edges:this.edges}}e.onLayoutEnd&&e.onLayoutEnd()},e.prototype.topologyOrdering=function(t){void 0===t&&(t=!1);var e=this,n=e.degrees,r=e.edges,i=e.nodes,l=(0,o.clone)(i),u=e.nodeMap,c=[l[0]],h=[i[0]],d=[],f=i.length;d[0]=!0,a(l,r,u,t);var p=0;return l.forEach((function(t,e){if(0!==e)if(e!==f-1&&n[e].all===n[e+1].all&&!s(c[p],t,r)||d[e]){for(var o=c[p].children,a=!1,g=0;g<o.length;g++){var m=u[o[g]];if(n[m].all===n[e].all&&!d[m]){c.push(l[m]),h.push(i[u[l[m].id]]),d[m]=!0,a=!0;break}}var y=0;while(!a)if(d[y]||(c.push(l[y]),h.push(i[u[l[y].id]]),d[y]=!0,a=!0),y++,y===f)break}else c.push(t),h.push(i[u[t.id]]),d[e]=!0,p++})),h},e.prototype.degreeOrdering=function(){var t=this,e=t.nodes,n=[],r=t.degrees;return e.forEach((function(t,e){t.degree=r[e].all,n.push(t)})),n.sort(l),n},e.prototype.getType=function(){return"circular"},e}(i.Base);e.CircularLayout=u},"7d0a":function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.ComboCombinedLayout=void 0;var o=n("3888"),a=n("5bc9"),s=n("f271"),l=n("ccec"),u=function(t){function e(e){var n=t.call(this)||this;return n.center=[0,0],n.nodes=[],n.edges=[],n.combos=[],n.comboEdges=[],n.comboPadding=10,n.comboTrees=[],n.updateCfg(e),n}return r(e,t),e.prototype.getDefaultCfg=function(){return{}},e.prototype.execute=function(){var t=this,e=t.nodes,n=t.center;if(e&&0!==e.length){if(1===e.length)return e[0].x=n[0],e[0].y=n[1],void(t.onLayoutEnd&&t.onLayoutEnd());t.initVals(),t.run(),t.onLayoutEnd&&t.onLayoutEnd()}else t.onLayoutEnd&&t.onLayoutEnd()},e.prototype.run=function(){var t,e=this,n=e.nodes,r=e.edges,a=e.combos,u=e.comboEdges,c=e.center,h={};n.forEach((function(t){h[t.id]=t}));var d={};a.forEach((function(t){d[t.id]=t}));var f=e.getInnerGraphs(h),p=[],g=[],m={},y=!0;this.comboTrees.forEach((function(t){var e=f[t.id],n=i(i({},t),{x:e.x||d[t.id].x,y:e.y||d[t.id].y,fx:e.fx||d[t.id].fx,fy:e.fy||d[t.id].fy,mass:e.mass||d[t.id].mass,size:e.size});g.push(n),isNaN(n.x)||0===n.x||isNaN(n.y)||0===n.y?(n.x=100*Math.random(),n.y=100*Math.random()):y=!1,p.push(t.id),(0,s.traverseTreeUp)(t,(function(e){return e.id!==t.id&&(m[e.id]=t.id),!0}))})),n.forEach((function(t){if(!t.comboId||!d[t.comboId]){var e=i({},t);g.push(e),isNaN(e.x)||0===e.x||isNaN(e.y)||0===e.y?(e.x=100*Math.random(),e.y=100*Math.random()):y=!1,p.push(t.id)}}));var v=[];if(r.concat(u).forEach((function(t){var e=m[t.source]||t.source,n=m[t.target]||t.target;e!==n&&p.includes(e)&&p.includes(n)&&v.push({source:e,target:n})})),null===g||void 0===g?void 0:g.length){if(1===g.length)g[0].x=c[0],g[0].y=c[1];else{var b={nodes:g,edges:v},_=this.outerLayout||new l.GForceLayout({gravity:1,factor:4,linkDistance:function(t,e,n){var r,i,o=(((null===(r=e.size)||void 0===r?void 0:r[0])||30)+((null===(i=n.size)||void 0===i?void 0:i[0])||30))/2;return Math.min(1.5*o,700)}}),x=null===(t=_.getType)||void 0===t?void 0:t.call(_);if(_.updateCfg({center:c,kg:5,preventOverlap:!0,animate:!1}),y&&o.FORCE_LAYOUT_TYPE_MAP[x]){var w=g.length<100?new l.MDSLayout:new l.GridLayout;w.layout(b)}_.layout(b)}g.forEach((function(t){var e=f[t.id];if(e)e.visited=!0,e.x=t.x,e.y=t.y,e.nodes.forEach((function(e){e.x+=t.x,e.y+=t.y}));else{var n=h[t.id];n&&(n.x=t.x,n.y=t.y)}}))}for(var S=Object.keys(f),E=function(t){var e=S[t],n=f[e];if(!n)return"continue";n.nodes.forEach((function(t){n.visited||(t.x+=n.x||0,t.y+=n.y||0),h[t.id]&&(h[t.id].x=t.x,h[t.id].y=t.y)})),d[e]&&(d[e].x=n.x,d[e].y=n.y)},C=S.length-1;C>=0;C--)E(C);return{nodes:n,edges:r,combos:a,comboEdges:u}},e.prototype.getInnerGraphs=function(t){var e=this,n=e.comboTrees,r=e.nodeSize,o=e.edges,a=e.comboPadding,u=e.spacing,c={},h=this.innerLayout||new l.ConcentricLayout({type:"concentric",sortBy:"id"});return h.center=[0,0],h.preventOverlap=!0,h.nodeSpacing=u,(n||[]).forEach((function(e){(0,s.traverseTreeUp)(e,(function(e){var n,l=(null===a||void 0===a?void 0:a(e))||10;if((0,s.isArray)(l)&&(l=Math.max.apply(Math,l)),null===(n=e.children)||void 0===n?void 0:n.length){var u=e.children.map((function(e){if("combo"===e.itemType)return c[e.id];var n=t[e.id]||{};return i(i({},n),e)})),d=u.map((function(t){return t.id})),f={nodes:u,edges:o.filter((function(t){return d.includes(t.source)&&d.includes(t.target)}))},p=1/0;u.forEach((function(t){var e;t.size||(t.size=(null===(e=c[t.id])||void 0===e?void 0:e.size)||(null===r||void 0===r?void 0:r(t))||[30,30]),(0,s.isNumber)(t.size)&&(t.size=[t.size,t.size]),p>t.size[0]&&(p=t.size[0]),p>t.size[1]&&(p=t.size[1])})),h.layout(f);var g=(0,s.getLayoutBBox)(u),m=g.minX,y=g.minY,v=g.maxX,b=g.maxY,_={x:(v+m)/2,y:(b+y)/2};f.nodes.forEach((function(t){t.x-=_.x,t.y-=_.y}));var x=Math.max(v-m,p)+2*l,w=Math.max(b-y,p)+2*l;c[e.id]={id:e.id,nodes:u,size:[x,w]}}else if("combo"===e.itemType){var S=l?[2*l,2*l]:[30,30];c[e.id]={id:e.id,nodes:[],size:S}}return!0}))})),c},e.prototype.initVals=function(){var t,e,n=this,r=n.nodeSize,i=n.spacing;if(e=(0,s.isNumber)(i)?function(){return i}:(0,s.isFunction)(i)?i:function(){return 0},this.spacing=e,r)if((0,s.isFunction)(r))t=function(t){var n=r(t),i=e(t);if((0,s.isArray)(t.size)){var o=t.size[0]>t.size[1]?t.size[0]:t.size[1];return(o+i)/2}return((n||10)+i)/2};else if((0,s.isArray)(r)){var o=r[0]>r[1]?r[0]:r[1],a=o/2;t=function(t){return a+e(t)/2}}else{var l=r/2;t=function(t){return l+e(t)/2}}else t=function(t){var n=e(t);if(t.size){if((0,s.isArray)(t.size)){var r=t.size[0]>t.size[1]?t.size[0]:t.size[1];return(r+n)/2}if((0,s.isObject)(t.size)){r=t.size.width>t.size.height?t.size.width:t.size.height;return(r+n)/2}return(t.size+n)/2}return 10+n/2};this.nodeSize=t;var u,c=n.comboPadding;u=(0,s.isNumber)(c)?function(){return c}:(0,s.isArray)(c)?function(){return Math.max.apply(null,c)}:(0,s.isFunction)(c)?c:function(){return 0},this.comboPadding=u},e.prototype.getType=function(){return"comboCombined"},e}(a.Base);e.ComboCombinedLayout=u},"7d22":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["ignore_unavailable","allow_no_indices","expand_wildcards","local","pretty","human","error_trace","source","filter_path"],a={ignoreUnavailable:"ignore_unavailable",allowNoIndices:"allow_no_indices",expandWildcards:"expand_wildcards",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,name:f,...p}=t;p=i(o,a,p,u),null==c&&(c="GET");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m=null!=d&&null!=f?"/"+encodeURIComponent(d)+"/_alias/"+encodeURIComponent(f):null!=f?"/_alias/"+encodeURIComponent(f):null!=d?"/"+encodeURIComponent(d)+"/_alias":"/_alias";const y={method:c,path:m,body:null,querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},"7d30":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["scroll","scroll_id","pretty","human","error_trace","source","filter_path"],a={scrollId:"scroll_id",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,scrollId:d,scroll_id:f,...p}=t;p=i(o,a,p,u),null==c&&(c=null==h?"GET":"POST");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m=null!=(f||d)?"/_search/scroll/"+encodeURIComponent(f||d):"/_search/scroll";const y={method:c,path:m,body:h||"",querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},"7dbb":function(t,e,n){(function(e,n){t.exports=n()})(0,(function(){"use strict";var t=function(t){return t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Float32Array||t instanceof Float64Array||t instanceof Uint8ClampedArray},e=function(t,e){for(var n=Object.keys(e),r=0;r<n.length;++r)t[n[r]]=e[n[r]];return t},n="\n";function r(t){return"undefined"!==typeof atob?atob(t):"base64:"+t}function i(t){var e=new Error("(regl) "+t);throw console.error(e),e}function o(t,e){t||i(e)}function a(t){return t?": "+t:""}function s(t,e,n){t in e||i("unknown parameter ("+t+")"+a(n)+". possible values: "+Object.keys(e).join())}function l(e,n){t(e)||i("invalid parameter type"+a(n)+". must be a typed array")}function u(t,e){switch(e){case"number":return"number"===typeof t;case"object":return"object"===typeof t;case"string":return"string"===typeof t;case"boolean":return"boolean"===typeof t;case"function":return"function"===typeof t;case"undefined":return"undefined"===typeof t;case"symbol":return"symbol"===typeof t}}function c(t,e,n){u(t,e)||i("invalid parameter type"+a(n)+". expected "+e+", got "+typeof t)}function h(t,e){t>=0&&(0|t)===t||i("invalid parameter type, ("+t+")"+a(e)+". must be a nonnegative integer")}function d(t,e,n){e.indexOf(t)<0&&i("invalid value"+a(n)+". must be one of: "+e)}var f=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function p(t){Object.keys(t).forEach((function(t){f.indexOf(t)<0&&i('invalid regl constructor argument "'+t+'". must be one of '+f)}))}function g(t,e){t+="";while(t.length<e)t=" "+t;return t}function m(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function y(t,e){this.number=t,this.line=e,this.errors=[]}function v(t,e,n){this.file=t,this.line=e,this.message=n}function b(){var t=new Error,e=(t.stack||t).toString(),n=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(e);if(n)return n[1];var r=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(e);return r?r[1]:"unknown"}function _(){var t=new Error,e=(t.stack||t).toString(),n=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(e);if(n)return n[1];var r=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(e);return r?r[1]:"unknown"}function x(t,e){var n=t.split("\n"),i=1,o=0,a={unknown:new m,0:new m};a.unknown.name=a[0].name=e||b(),a.unknown.lines.push(new y(0,""));for(var s=0;s<n.length;++s){var l=n[s],u=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(l);if(u)switch(u[1]){case"line":var c=/(\d+)(\s+\d+)?/.exec(u[2]);c&&(i=0|c[1],c[2]&&(o=0|c[2],o in a||(a[o]=new m)));break;case"define":var h=/SHADER_NAME(_B64)?\s+(.*)$/.exec(u[2]);h&&(a[o].name=h[1]?r(h[2]):h[2]);break}a[o].lines.push(new y(i++,l))}return Object.keys(a).forEach((function(t){var e=a[t];e.lines.forEach((function(t){e.index[t.number]=t}))})),a}function w(t){var e=[];return t.split("\n").forEach((function(t){if(!(t.length<5)){var n=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(t);n?e.push(new v(0|n[1],0|n[2],n[3].trim())):t.length>0&&e.push(new v("unknown",0,t))}})),e}function S(t,e){e.forEach((function(e){var n=t[e.file];if(n){var r=n.index[e.line];if(r)return r.errors.push(e),void(n.hasErrors=!0)}t.unknown.hasErrors=!0,t.unknown.lines[0].errors.push(e)}))}function E(t,e,r,i,a){if(!t.getShaderParameter(e,t.COMPILE_STATUS)){var s=t.getShaderInfoLog(e),l=i===t.FRAGMENT_SHADER?"fragment":"vertex";I(r,"string",l+" shader source must be a string",a);var u=x(r,a),c=w(s);S(u,c),Object.keys(u).forEach((function(t){var e=u[t];if(e.hasErrors){var r=[""],i=[""];o("file number "+t+": "+e.name+"\n","color:red;text-decoration:underline;font-weight:bold"),e.lines.forEach((function(t){if(t.errors.length>0){o(g(t.number,4)+"|  ","background-color:yellow; font-weight:bold"),o(t.line+n,"color:red; background-color:yellow; font-weight:bold");var e=0;t.errors.forEach((function(r){var i=r.message,a=/^\s*'(.*)'\s*:\s*(.*)$/.exec(i);if(a){var s=a[1];switch(i=a[2],s){case"assign":s="=";break}e=Math.max(t.line.indexOf(s,e),0)}else e=0;o(g("| ",6)),o(g("^^^",e+3)+n,"font-weight:bold"),o(g("| ",6)),o(i+n,"font-weight:bold")})),o(g("| ",6)+n)}else o(g(t.number,4)+"|  "),o(t.line+n,"color:red")})),"undefined"===typeof document||window.chrome?console.log(r.join("")):(i[0]=r.join("%c"),console.log.apply(console,i))}function o(t,e){r.push(t),i.push(e||"")}})),o.raise("Error compiling "+l+" shader, "+u[0].name)}}function C(t,e,r,i,a){if(!t.getProgramParameter(e,t.LINK_STATUS)){var s=t.getProgramInfoLog(e),l=x(r,a),u=x(i,a),c='Error linking program with vertex shader, "'+u[0].name+'", and fragment shader "'+l[0].name+'"';"undefined"!==typeof document?console.log("%c"+c+n+"%c"+s,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(c+n+s),o.raise(c)}}function M(t){t._commandRef=b()}function T(t,e,n,r){function i(t){return t?r.id(t):0}function o(t,e){Object.keys(e).forEach((function(e){t[r.id(e)]=!0}))}M(t),t._fragId=i(t.static.frag),t._vertId=i(t.static.vert);var a=t._uniformSet={};o(a,e.static),o(a,e.dynamic);var s=t._attributeSet={};o(s,n.static),o(s,n.dynamic),t._hasCount="count"in t.static||"count"in t.dynamic||"elements"in t.static||"elements"in t.dynamic}function A(t,e){var n=_();i(t+" in command "+(e||b())+("unknown"===n?"":" called from "+n))}function O(t,e,n){t||A(e,n||b())}function k(t,e,n,r){t in e||A("unknown parameter ("+t+")"+a(n)+". possible values: "+Object.keys(e).join(),r||b())}function I(t,e,n,r){u(t,e)||A("invalid parameter type"+a(n)+". expected "+e+", got "+typeof t,r||b())}function P(t){t()}function L(t,e,n){t.texture?d(t.texture._texture.internalformat,e,"unsupported texture format for attachment"):d(t.renderbuffer._renderbuffer.format,n,"unsupported renderbuffer format for attachment")}var N=33071,R=9728,D=9984,F=9985,j=9986,B=9987,z=5120,U=5121,G=5122,q=5123,V=5124,H=5125,W=5126,Y=32819,X=32820,J=33635,Z=34042,K=36193,Q={};function $(t,e){return t===X||t===Y||t===J?2:t===Z?4:Q[t]*e}function tt(t){return!(t&t-1)&&!!t}function et(t,e,n){var r,i=e.width,a=e.height,s=e.channels;o(i>0&&i<=n.maxTextureSize&&a>0&&a<=n.maxTextureSize,"invalid texture shape"),t.wrapS===N&&t.wrapT===N||o(tt(i)&&tt(a),"incompatible wrap mode for texture, both width and height must be power of 2"),1===e.mipmask?1!==i&&1!==a&&o(t.minFilter!==D&&t.minFilter!==j&&t.minFilter!==F&&t.minFilter!==B,"min filter requires mipmap"):(o(tt(i)&&tt(a),"texture must be a square power of 2 to support mipmapping"),o(e.mipmask===(i<<1)-1,"missing or incomplete mipmap data")),e.type===W&&(n.extensions.indexOf("oes_texture_float_linear")<0&&o(t.minFilter===R&&t.magFilter===R,"filter not supported, must enable oes_texture_float_linear"),o(!t.genMipmaps,"mipmap generation not supported with float textures"));var l=e.images;for(r=0;r<16;++r)if(l[r]){var u=i>>r,c=a>>r;o(e.mipmask&1<<r,"missing mipmap data");var h=l[r];if(o(h.width===u&&h.height===c,"invalid shape for mip images"),o(h.format===e.format&&h.internalformat===e.internalformat&&h.type===e.type,"incompatible type for mip image"),h.compressed);else if(h.data){var d=Math.ceil($(h.type,s)*u/h.unpackAlignment)*h.unpackAlignment;o(h.data.byteLength===d*c,"invalid data for image, buffer size is inconsistent with image format")}else h.element||h.copy}else t.genMipmaps||o(0===(e.mipmask&1<<r),"extra mipmap data");e.compressed&&o(!t.genMipmaps,"mipmap generation for compressed images not supported")}function nt(t,e,n,r){var i=t.width,a=t.height,s=t.channels;o(i>0&&i<=r.maxTextureSize&&a>0&&a<=r.maxTextureSize,"invalid texture shape"),o(i===a,"cube map must be square"),o(e.wrapS===N&&e.wrapT===N,"wrap mode not supported by cube map");for(var l=0;l<n.length;++l){var u=n[l];o(u.width===i&&u.height===a,"inconsistent cube map face shape"),e.genMipmaps&&(o(!u.compressed,"can not generate mipmap for compressed textures"),o(1===u.mipmask,"can not specify mipmaps and generate mipmaps"));for(var c=u.images,h=0;h<16;++h){var d=c[h];if(d){var f=i>>h,p=a>>h;o(u.mipmask&1<<h,"missing mipmap data"),o(d.width===f&&d.height===p,"invalid shape for mip images"),o(d.format===t.format&&d.internalformat===t.internalformat&&d.type===t.type,"incompatible type for mip image"),d.compressed||(d.data?o(d.data.byteLength===f*p*Math.max($(d.type,s),d.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):d.element||d.copy)}}}}Q[z]=Q[U]=1,Q[G]=Q[q]=Q[K]=Q[J]=Q[Y]=Q[X]=2,Q[V]=Q[H]=Q[W]=Q[Z]=4;var rt=e(o,{optional:P,raise:i,commandRaise:A,command:O,parameter:s,commandParameter:k,constructor:p,type:c,commandType:I,isTypedArray:l,nni:h,oneOf:d,shaderError:E,linkError:C,callSite:_,saveCommandRef:M,saveDrawInfo:T,framebufferFormat:L,guessCommand:b,texture2D:et,textureCube:nt}),it=0,ot=0,at=5,st=6;function lt(t,e){this.id=it++,this.type=t,this.data=e}function ut(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function ct(t){if(0===t.length)return[];var e=t.charAt(0),n=t.charAt(t.length-1);if(t.length>1&&e===n&&('"'===e||"'"===e))return['"'+ut(t.substr(1,t.length-2))+'"'];var r=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(t);if(r)return ct(t.substr(0,r.index)).concat(ct(r[1])).concat(ct(t.substr(r.index+r[0].length)));var i=t.split(".");if(1===i.length)return['"'+ut(t)+'"'];for(var o=[],a=0;a<i.length;++a)o=o.concat(ct(i[a]));return o}function ht(t){return"["+ct(t).join("][")+"]"}function dt(t,e){return new lt(t,ht(e+""))}function ft(t){return"function"===typeof t&&!t._reglType||t instanceof lt}function pt(t,e){return"function"===typeof t?new lt(ot,t):"number"===typeof t||"boolean"===typeof t?new lt(at,t):Array.isArray(t)?new lt(st,t.map((t,n)=>pt(t,e+"["+n+"]"))):t instanceof lt?t:void rt(!1,"invalid option type in uniform "+e)}var gt={DynamicVariable:lt,define:dt,isDynamic:ft,unbox:pt,accessor:ht},mt={next:"function"===typeof requestAnimationFrame?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,16)},cancel:"function"===typeof cancelAnimationFrame?function(t){return cancelAnimationFrame(t)}:clearTimeout},yt="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date};function vt(){var t={"":0},e=[""];return{id:function(n){var r=t[n];return r||(r=t[n]=e.length,e.push(n),r)},str:function(t){return e[t]}}}function bt(t,n,r){var i,o=document.createElement("canvas");function a(){var n=window.innerWidth,i=window.innerHeight;if(t!==document.body){var a=t.getBoundingClientRect();n=a.right-a.left,i=a.bottom-a.top}o.width=r*n,o.height=r*i,e(o.style,{width:n+"px",height:i+"px"})}function s(){i?i.disconnect():window.removeEventListener("resize",a),t.removeChild(o)}return e(o.style,{border:0,margin:0,padding:0,top:0,left:0}),t.appendChild(o),t===document.body&&(o.style.position="absolute",e(t.style,{margin:0,padding:0})),t!==document.body&&"function"===typeof ResizeObserver?(i=new ResizeObserver((function(){setTimeout(a)})),i.observe(t)):window.addEventListener("resize",a,!1),a(),{canvas:o,onDestroy:s}}function _t(t,e){function n(n){try{return t.getContext(n,e)}catch(r){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}function xt(t){return"string"===typeof t.nodeName&&"function"===typeof t.appendChild&&"function"===typeof t.getBoundingClientRect}function wt(t){return"function"===typeof t.drawArrays||"function"===typeof t.drawElements}function St(t){return"string"===typeof t?t.split():(rt(Array.isArray(t),"invalid extension array"),t)}function Et(t){return"string"===typeof t?(rt("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(t)):t}function Ct(t){var e,n,r,i,o=t||{},a={},s=[],l=[],u="undefined"===typeof window?1:window.devicePixelRatio,c=!1,h=function(t){t&&rt.raise(t)},d=function(){};if("string"===typeof o?(rt("undefined"!==typeof document,"selector queries only supported in DOM enviroments"),e=document.querySelector(o),rt(e,"invalid query string for element")):"object"===typeof o?xt(o)?e=o:wt(o)?(i=o,r=i.canvas):(rt.constructor(o),"gl"in o?i=o.gl:"canvas"in o?r=Et(o.canvas):"container"in o&&(n=Et(o.container)),"attributes"in o&&(a=o.attributes,rt.type(a,"object","invalid context attributes")),"extensions"in o&&(s=St(o.extensions)),"optionalExtensions"in o&&(l=St(o.optionalExtensions)),"onDone"in o&&(rt.type(o.onDone,"function","invalid or missing onDone callback"),h=o.onDone),"profile"in o&&(c=!!o.profile),"pixelRatio"in o&&(u=+o.pixelRatio,rt(u>0,"invalid pixel ratio"))):rt.raise("invalid arguments to regl"),e&&("canvas"===e.nodeName.toLowerCase()?r=e:n=e),!i){if(!r){rt("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");var f=bt(n||document.body,h,u);if(!f)return null;r=f.canvas,d=f.onDestroy}void 0===a.premultipliedAlpha&&(a.premultipliedAlpha=!0),i=_t(r,a)}return i?{gl:i,canvas:r,container:n,extensions:s,optionalExtensions:l,pixelRatio:u,profile:c,onDone:h,onDestroy:d}:(d(),h("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Mt(t,e){var n={};function r(e){rt.type(e,"string","extension name must be string");var r,i=e.toLowerCase();try{r=n[i]=t.getExtension(i)}catch(o){}return!!r}for(var i=0;i<e.extensions.length;++i){var o=e.extensions[i];if(!r(o))return e.onDestroy(),e.onDone('"'+o+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return e.optionalExtensions.forEach(r),{extensions:n,restore:function(){Object.keys(n).forEach((function(t){if(n[t]&&!r(t))throw new Error("(regl): error restoring extension "+t)}))}}}function Tt(t,e){for(var n=Array(t),r=0;r<t;++r)n[r]=e(r);return n}var At=5120,Ot=5121,kt=5122,It=5123,Pt=5124,Lt=5125,Nt=5126;function Rt(t){for(var e=16;e<=1<<28;e*=16)if(t<=e)return e;return 0}function Dt(t){var e,n;return e=(t>65535)<<4,t>>>=e,n=(t>255)<<3,t>>>=n,e|=n,n=(t>15)<<2,t>>>=n,e|=n,n=(t>3)<<1,t>>>=n,e|=n,e|t>>1}function Ft(){var t=Tt(8,(function(){return[]}));function e(e){var n=Rt(e),r=t[Dt(n)>>2];return r.length>0?r.pop():new ArrayBuffer(n)}function n(e){t[Dt(e.byteLength)>>2].push(e)}function r(t,n){var r=null;switch(t){case At:r=new Int8Array(e(n),0,n);break;case Ot:r=new Uint8Array(e(n),0,n);break;case kt:r=new Int16Array(e(2*n),0,n);break;case It:r=new Uint16Array(e(2*n),0,n);break;case Pt:r=new Int32Array(e(4*n),0,n);break;case Lt:r=new Uint32Array(e(4*n),0,n);break;case Nt:r=new Float32Array(e(4*n),0,n);break;default:return null}return r.length!==n?r.subarray(0,n):r}function i(t){n(t.buffer)}return{alloc:e,free:n,allocType:r,freeType:i}}var jt=Ft();jt.zero=Ft();var Bt=3408,zt=3410,Ut=3411,Gt=3412,qt=3413,Vt=3414,Ht=3415,Wt=33901,Yt=33902,Xt=3379,Jt=3386,Zt=34921,Kt=36347,Qt=36348,$t=35661,te=35660,ee=34930,ne=36349,re=34076,ie=34024,oe=7936,ae=7937,se=7938,le=35724,ue=34047,ce=36063,he=34852,de=3553,fe=34067,pe=34069,ge=33984,me=6408,ye=5126,ve=5121,be=36160,_e=36053,xe=36064,we=16384,Se=function(t,e){var n=1;e.ext_texture_filter_anisotropic&&(n=t.getParameter(ue));var r=1,i=1;e.webgl_draw_buffers&&(r=t.getParameter(he),i=t.getParameter(ce));var o=!!e.oes_texture_float;if(o){var a=t.createTexture();t.bindTexture(de,a),t.texImage2D(de,0,me,1,1,0,me,ye,null);var s=t.createFramebuffer();if(t.bindFramebuffer(be,s),t.framebufferTexture2D(be,xe,de,a,0),t.bindTexture(de,null),t.checkFramebufferStatus(be)!==_e)o=!1;else{t.viewport(0,0,1,1),t.clearColor(1,0,0,1),t.clear(we);var l=jt.allocType(ye,4);t.readPixels(0,0,1,1,me,ye,l),t.getError()?o=!1:(t.deleteFramebuffer(s),t.deleteTexture(a),o=1===l[0]),jt.freeType(l)}}var u="undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),c=!0;if(!u){var h=t.createTexture(),d=jt.allocType(ve,36);t.activeTexture(ge),t.bindTexture(fe,h),t.texImage2D(pe,0,me,3,3,0,me,ve,d),jt.freeType(d),t.bindTexture(fe,null),t.deleteTexture(h),c=!t.getError()}return{colorBits:[t.getParameter(zt),t.getParameter(Ut),t.getParameter(Gt),t.getParameter(qt)],depthBits:t.getParameter(Vt),stencilBits:t.getParameter(Ht),subpixelBits:t.getParameter(Bt),extensions:Object.keys(e).filter((function(t){return!!e[t]})),maxAnisotropic:n,maxDrawbuffers:r,maxColorAttachments:i,pointSizeDims:t.getParameter(Wt),lineWidthDims:t.getParameter(Yt),maxViewportDims:t.getParameter(Jt),maxCombinedTextureUnits:t.getParameter($t),maxCubeMapSize:t.getParameter(re),maxRenderbufferSize:t.getParameter(ie),maxTextureUnits:t.getParameter(ee),maxTextureSize:t.getParameter(Xt),maxAttributes:t.getParameter(Zt),maxVertexUniforms:t.getParameter(Kt),maxVertexTextureUnits:t.getParameter(te),maxVaryingVectors:t.getParameter(Qt),maxFragmentUniforms:t.getParameter(ne),glsl:t.getParameter(le),renderer:t.getParameter(ae),vendor:t.getParameter(oe),version:t.getParameter(se),readFloat:o,npotTextureCube:c}};function Ee(e){return!!e&&"object"===typeof e&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"===typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||t(e.data))}var Ce=function(t){return Object.keys(t).map((function(e){return t[e]}))},Me={shape:Pe,flatten:Ie};function Te(t,e,n){for(var r=0;r<e;++r)n[r]=t[r]}function Ae(t,e,n,r){for(var i=0,o=0;o<e;++o)for(var a=t[o],s=0;s<n;++s)r[i++]=a[s]}function Oe(t,e,n,r,i,o){for(var a=o,s=0;s<e;++s)for(var l=t[s],u=0;u<n;++u)for(var c=l[u],h=0;h<r;++h)i[a++]=c[h]}function ke(t,e,n,r,i){for(var o=1,a=n+1;a<e.length;++a)o*=e[a];var s=e[n];if(e.length-n===4){var l=e[n+1],u=e[n+2],c=e[n+3];for(a=0;a<s;++a)Oe(t[a],l,u,c,r,i),i+=o}else for(a=0;a<s;++a)ke(t[a],e,n+1,r,i),i+=o}function Ie(t,e,n,r){var i=1;if(e.length)for(var o=0;o<e.length;++o)i*=e[o];else i=0;var a=r||jt.allocType(n,i);switch(e.length){case 0:break;case 1:Te(t,e[0],a);break;case 2:Ae(t,e[0],e[1],a);break;case 3:Oe(t,e[0],e[1],e[2],a,0);break;default:ke(t,e,0,a,0)}return a}function Pe(t){for(var e=[],n=t;n.length;n=n[0])e.push(n.length);return e}var Le={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Ne=5120,Re=5122,De=5124,Fe=5121,je=5123,Be=5125,ze=5126,Ue=5126,Ge={int8:Ne,int16:Re,int32:De,uint8:Fe,uint16:je,uint32:Be,float:ze,float32:Ue},qe=35048,Ve=35040,He={dynamic:qe,stream:Ve,static:35044},We=Me.flatten,Ye=Me.shape,Xe=35044,Je=35040,Ze=5121,Ke=5126,Qe=[];function $e(t){return 0|Le[Object.prototype.toString.call(t)]}function tn(t,e){for(var n=0;n<e.length;++n)t[n]=e[n]}function en(t,e,n,r,i,o,a){for(var s=0,l=0;l<n;++l)for(var u=0;u<r;++u)t[s++]=e[i*l+o*u+a]}function nn(e,n,r,i){var o=0,a={};function s(t){this.id=o++,this.buffer=e.createBuffer(),this.type=t,this.usage=Xe,this.byteLength=0,this.dimension=1,this.dtype=Ze,this.persistentData=null,r.profile&&(this.stats={size:0})}s.prototype.bind=function(){e.bindBuffer(this.type,this.buffer)},s.prototype.destroy=function(){f(this)};var l=[];function u(t,e){var n=l.pop();return n||(n=new s(t)),n.bind(),d(n,e,Je,0,1,!1),n}function c(t){l.push(t)}function h(t,n,r){t.byteLength=n.byteLength,e.bufferData(t.type,n,r)}function d(e,n,r,i,o,a){var s,l;if(e.usage=r,Array.isArray(n)){if(e.dtype=i||Ke,n.length>0)if(Array.isArray(n[0])){s=Ye(n);for(var u=1,c=1;c<s.length;++c)u*=s[c];e.dimension=u,l=We(n,s,e.dtype),h(e,l,r),a?e.persistentData=l:jt.freeType(l)}else if("number"===typeof n[0]){e.dimension=o;var d=jt.allocType(e.dtype,n.length);tn(d,n),h(e,d,r),a?e.persistentData=d:jt.freeType(d)}else t(n[0])?(e.dimension=n[0].length,e.dtype=i||$e(n[0])||Ke,l=We(n,[n.length,n[0].length],e.dtype),h(e,l,r),a?e.persistentData=l:jt.freeType(l)):rt.raise("invalid buffer data")}else if(t(n))e.dtype=i||$e(n),e.dimension=o,h(e,n,r),a&&(e.persistentData=new Uint8Array(new Uint8Array(n.buffer)));else if(Ee(n)){s=n.shape;var f=n.stride,p=n.offset,g=0,m=0,y=0,v=0;1===s.length?(g=s[0],m=1,y=f[0],v=0):2===s.length?(g=s[0],m=s[1],y=f[0],v=f[1]):rt.raise("invalid shape"),e.dtype=i||$e(n.data)||Ke,e.dimension=m;var b=jt.allocType(e.dtype,g*m);en(b,n.data,g,m,y,v,p),h(e,b,r),a?e.persistentData=b:jt.freeType(b)}else n instanceof ArrayBuffer?(e.dtype=Ze,e.dimension=o,h(e,n,r),a&&(e.persistentData=new Uint8Array(new Uint8Array(n)))):rt.raise("invalid buffer data")}function f(t){n.bufferCount--,i(t);var r=t.buffer;rt(r,"buffer must not be deleted already"),e.deleteBuffer(r),t.buffer=null,delete a[t.id]}function p(i,o,l,u){n.bufferCount++;var c=new s(o);function h(n){var i=Xe,o=null,a=0,s=0,l=1;return Array.isArray(n)||t(n)||Ee(n)||n instanceof ArrayBuffer?o=n:"number"===typeof n?a=0|n:n&&(rt.type(n,"object","buffer arguments must be an object, a number or an array"),"data"in n&&(rt(null===o||Array.isArray(o)||t(o)||Ee(o),"invalid data for buffer"),o=n.data),"usage"in n&&(rt.parameter(n.usage,He,"invalid buffer usage"),i=He[n.usage]),"type"in n&&(rt.parameter(n.type,Ge,"invalid buffer type"),s=Ge[n.type]),"dimension"in n&&(rt.type(n.dimension,"number","invalid dimension"),l=0|n.dimension),"length"in n&&(rt.nni(a,"buffer length must be a nonnegative integer"),a=0|n.length)),c.bind(),o?d(c,o,i,s,l,u):(a&&e.bufferData(c.type,a,i),c.dtype=s||Ze,c.usage=i,c.dimension=l,c.byteLength=a),r.profile&&(c.stats.size=c.byteLength*Qe[c.dtype]),h}function p(t,n){rt(n+t.byteLength<=c.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+t.byteLength+" starting from offset "+n+" to a buffer of size "+c.byteLength),e.bufferSubData(c.type,n,t)}function g(e,n){var r,i=0|(n||0);if(c.bind(),t(e)||e instanceof ArrayBuffer)p(e,i);else if(Array.isArray(e)){if(e.length>0)if("number"===typeof e[0]){var o=jt.allocType(c.dtype,e.length);tn(o,e),p(o,i),jt.freeType(o)}else if(Array.isArray(e[0])||t(e[0])){r=Ye(e);var a=We(e,r,c.dtype);p(a,i),jt.freeType(a)}else rt.raise("invalid buffer data")}else if(Ee(e)){r=e.shape;var s=e.stride,l=0,u=0,d=0,f=0;1===r.length?(l=r[0],u=1,d=s[0],f=0):2===r.length?(l=r[0],u=r[1],d=s[0],f=s[1]):rt.raise("invalid shape");var g=Array.isArray(e.data)?c.dtype:$e(e.data),m=jt.allocType(g,l*u);en(m,e.data,l,u,d,f,e.offset),p(m,i),jt.freeType(m)}else rt.raise("invalid data for buffer subdata");return h}return a[c.id]=c,l||h(i),h._reglType="buffer",h._buffer=c,h.subdata=g,r.profile&&(h.stats=c.stats),h.destroy=function(){f(c)},h}function g(){Ce(a).forEach((function(t){t.buffer=e.createBuffer(),e.bindBuffer(t.type,t.buffer),e.bufferData(t.type,t.persistentData||t.byteLength,t.usage)}))}return r.profile&&(n.getTotalBufferSize=function(){var t=0;return Object.keys(a).forEach((function(e){t+=a[e].stats.size})),t}),{create:p,createStream:u,destroyStream:c,clear:function(){Ce(a).forEach(f),l.forEach(f)},getBuffer:function(t){return t&&t._buffer instanceof s?t._buffer:null},restore:g,_initBuffer:d}}Qe[5120]=1,Qe[5122]=2,Qe[5124]=4,Qe[5121]=1,Qe[5123]=2,Qe[5125]=4,Qe[5126]=4;var rn=0,on=0,an=1,sn=1,ln=4,un=4,cn={points:rn,point:on,lines:an,line:sn,triangles:ln,triangle:un,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},hn=0,dn=1,fn=4,pn=5120,gn=5121,mn=5122,yn=5123,vn=5124,bn=5125,_n=34963,xn=35040,wn=35044;function Sn(e,n,r,i){var o={},a=0,s={uint8:gn,uint16:yn};function l(t){this.id=a++,o[this.id]=this,this.buffer=t,this.primType=fn,this.vertCount=0,this.type=0}n.oes_element_index_uint&&(s.uint32=bn),l.prototype.bind=function(){this.buffer.bind()};var u=[];function c(t){var e=u.pop();return e||(e=new l(r.create(null,_n,!0,!1)._buffer)),d(e,t,xn,-1,-1,0,0),e}function h(t){u.push(t)}function d(i,o,a,s,l,u,c){var h;if(i.buffer.bind(),o){var d=c;c||t(o)&&(!Ee(o)||t(o.data))||(d=n.oes_element_index_uint?bn:yn),r._initBuffer(i.buffer,o,a,d,3)}else e.bufferData(_n,u,a),i.buffer.dtype=h||gn,i.buffer.usage=a,i.buffer.dimension=3,i.buffer.byteLength=u;if(h=c,!c){switch(i.buffer.dtype){case gn:case pn:h=gn;break;case yn:case mn:h=yn;break;case bn:case vn:h=bn;break;default:rt.raise("unsupported type for element array")}i.buffer.dtype=h}i.type=h,rt(h!==bn||!!n.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var f=l;f<0&&(f=i.buffer.byteLength,h===yn?f>>=1:h===bn&&(f>>=2)),i.vertCount=f;var p=s;if(s<0){p=fn;var g=i.buffer.dimension;1===g&&(p=hn),2===g&&(p=dn),3===g&&(p=fn)}i.primType=p}function f(t){i.elementsCount--,rt(null!==t.buffer,"must not double destroy elements"),delete o[t.id],t.buffer.destroy(),t.buffer=null}function p(e,n){var o=r.create(null,_n,!0),a=new l(o._buffer);function u(e){if(e)if("number"===typeof e)o(e),a.primType=fn,a.vertCount=0|e,a.type=gn;else{var n=null,r=wn,i=-1,l=-1,c=0,h=0;Array.isArray(e)||t(e)||Ee(e)?n=e:(rt.type(e,"object","invalid arguments for elements"),"data"in e&&(n=e.data,rt(Array.isArray(n)||t(n)||Ee(n),"invalid data for element buffer")),"usage"in e&&(rt.parameter(e.usage,He,"invalid element buffer usage"),r=He[e.usage]),"primitive"in e&&(rt.parameter(e.primitive,cn,"invalid element buffer primitive"),i=cn[e.primitive]),"count"in e&&(rt("number"===typeof e.count&&e.count>=0,"invalid vertex count for elements"),l=0|e.count),"type"in e&&(rt.parameter(e.type,s,"invalid buffer type"),h=s[e.type]),"length"in e?c=0|e.length:(c=l,h===yn||h===mn?c*=2:h!==bn&&h!==vn||(c*=4))),d(a,n,r,i,l,c,h)}else o(),a.primType=fn,a.vertCount=0,a.type=gn;return u}return i.elementsCount++,u(e),u._reglType="elements",u._elements=a,u.subdata=function(t,e){return o.subdata(t,e),u},u.destroy=function(){f(a)},u}return{create:p,createStream:c,destroyStream:h,getElements:function(t){return"function"===typeof t&&t._elements instanceof l?t._elements:null},clear:function(){Ce(o).forEach(f)}}}var En=new Float32Array(1),Cn=new Uint32Array(En.buffer),Mn=5123;function Tn(t){for(var e=jt.allocType(Mn,t.length),n=0;n<t.length;++n)if(isNaN(t[n]))e[n]=65535;else if(t[n]===1/0)e[n]=31744;else if(t[n]===-1/0)e[n]=64512;else{En[0]=t[n];var r=Cn[0],i=r>>>31<<15,o=(r<<1>>>24)-127,a=r>>13&1023;if(o<-24)e[n]=i;else if(o<-14){var s=-14-o;e[n]=i+(a+1024>>s)}else e[n]=o>15?i+31744:i+(o+15<<10)+a}return e}function An(e){return Array.isArray(e)||t(e)}var On=function(t){return!(t&t-1)&&!!t},kn=34467,In=3553,Pn=34067,Ln=34069,Nn=6408,Rn=6406,Dn=6407,Fn=6409,jn=6410,Bn=32854,zn=32855,Un=36194,Gn=32819,qn=32820,Vn=33635,Hn=34042,Wn=6402,Yn=34041,Xn=35904,Jn=35906,Zn=36193,Kn=33776,Qn=33777,$n=33778,tr=33779,er=35986,nr=35987,rr=34798,ir=35840,or=35841,ar=35842,sr=35843,lr=36196,ur=5121,cr=5123,hr=5125,dr=5126,fr=10242,pr=10243,gr=10497,mr=33071,yr=33648,vr=10240,br=10241,_r=9728,xr=9729,wr=9984,Sr=9985,Er=9986,Cr=9987,Mr=33170,Tr=4352,Ar=4353,Or=4354,kr=34046,Ir=3317,Pr=37440,Lr=37441,Nr=37443,Rr=37444,Dr=33984,Fr=[wr,Er,Sr,Cr],jr=[0,Fn,jn,Dn,Nn],Br={};function zr(t){return"[object "+t+"]"}Br[Fn]=Br[Rn]=Br[Wn]=1,Br[Yn]=Br[jn]=2,Br[Dn]=Br[Xn]=3,Br[Nn]=Br[Jn]=4;var Ur=zr("HTMLCanvasElement"),Gr=zr("OffscreenCanvas"),qr=zr("CanvasRenderingContext2D"),Vr=zr("ImageBitmap"),Hr=zr("HTMLImageElement"),Wr=zr("HTMLVideoElement"),Yr=Object.keys(Le).concat([Ur,Gr,qr,Vr,Hr,Wr]),Xr=[];Xr[ur]=1,Xr[dr]=4,Xr[Zn]=2,Xr[cr]=2,Xr[hr]=4;var Jr=[];function Zr(t){return Array.isArray(t)&&(0===t.length||"number"===typeof t[0])}function Kr(t){if(!Array.isArray(t))return!1;var e=t.length;return!(0===e||!An(t[0]))}function Qr(t){return Object.prototype.toString.call(t)}function $r(t){return Qr(t)===Ur}function ti(t){return Qr(t)===Gr}function ei(t){return Qr(t)===qr}function ni(t){return Qr(t)===Vr}function ri(t){return Qr(t)===Hr}function ii(t){return Qr(t)===Wr}function oi(t){if(!t)return!1;var e=Qr(t);return Yr.indexOf(e)>=0||(Zr(t)||Kr(t)||Ee(t))}function ai(t){return 0|Le[Object.prototype.toString.call(t)]}function si(t,e){var n=e.length;switch(t.type){case ur:case cr:case hr:case dr:var r=jt.allocType(t.type,n);r.set(e),t.data=r;break;case Zn:t.data=Tn(e);break;default:rt.raise("unsupported texture type, must specify a typed array")}}function li(t,e){return jt.allocType(t.type===Zn?dr:t.type,e)}function ui(t,e){t.type===Zn?(t.data=Tn(e),jt.freeType(e)):t.data=e}function ci(t,e,n,r,i,o){for(var a=t.width,s=t.height,l=t.channels,u=a*s*l,c=li(t,u),h=0,d=0;d<s;++d)for(var f=0;f<a;++f)for(var p=0;p<l;++p)c[h++]=e[n*f+r*d+i*p+o];ui(t,c)}function hi(t,e,n,r,i,o){var a;if(a="undefined"!==typeof Jr[t]?Jr[t]:Br[t]*Xr[e],o&&(a*=6),i){var s=0,l=n;while(l>=1)s+=a*l*l,l/=2;return s}return a*n*r}function di(n,r,i,o,a,s,l){var u={"don't care":Tr,"dont care":Tr,nice:Or,fast:Ar},c={repeat:gr,clamp:mr,mirror:yr},h={nearest:_r,linear:xr},d=e({mipmap:Cr,"nearest mipmap nearest":wr,"linear mipmap nearest":Sr,"nearest mipmap linear":Er,"linear mipmap linear":Cr},h),f={none:0,browser:Rr},p={uint8:ur,rgba4:Gn,rgb565:Vn,"rgb5 a1":qn},g={alpha:Rn,luminance:Fn,"luminance alpha":jn,rgb:Dn,rgba:Nn,rgba4:Bn,"rgb5 a1":zn,rgb565:Un},m={};r.ext_srgb&&(g.srgb=Xn,g.srgba=Jn),r.oes_texture_float&&(p.float32=p.float=dr),r.oes_texture_half_float&&(p["float16"]=p["half float"]=Zn),r.webgl_depth_texture&&(e(g,{depth:Wn,"depth stencil":Yn}),e(p,{uint16:cr,uint32:hr,"depth stencil":Hn})),r.webgl_compressed_texture_s3tc&&e(m,{"rgb s3tc dxt1":Kn,"rgba s3tc dxt1":Qn,"rgba s3tc dxt3":$n,"rgba s3tc dxt5":tr}),r.webgl_compressed_texture_atc&&e(m,{"rgb atc":er,"rgba atc explicit alpha":nr,"rgba atc interpolated alpha":rr}),r.webgl_compressed_texture_pvrtc&&e(m,{"rgb pvrtc 4bppv1":ir,"rgb pvrtc 2bppv1":or,"rgba pvrtc 4bppv1":ar,"rgba pvrtc 2bppv1":sr}),r.webgl_compressed_texture_etc1&&(m["rgb etc1"]=lr);var y=Array.prototype.slice.call(n.getParameter(kn));Object.keys(m).forEach((function(t){var e=m[t];y.indexOf(e)>=0&&(g[t]=e)}));var v=Object.keys(g);i.textureFormats=v;var b=[];Object.keys(g).forEach((function(t){var e=g[t];b[e]=t}));var _=[];Object.keys(p).forEach((function(t){var e=p[t];_[e]=t}));var x=[];Object.keys(h).forEach((function(t){var e=h[t];x[e]=t}));var w=[];Object.keys(d).forEach((function(t){var e=d[t];w[e]=t}));var S=[];Object.keys(c).forEach((function(t){var e=c[t];S[e]=t}));var E=v.reduce((function(t,e){var n=g[e];return n===Fn||n===Rn||n===Fn||n===jn||n===Wn||n===Yn||r.ext_srgb&&(n===Xn||n===Jn)?t[n]=n:n===zn||e.indexOf("rgba")>=0?t[n]=Nn:t[n]=Dn,t}),{});function C(){this.internalformat=Nn,this.format=Nn,this.type=ur,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Rr,this.width=0,this.height=0,this.channels=0}function M(t,e){t.internalformat=e.internalformat,t.format=e.format,t.type=e.type,t.compressed=e.compressed,t.premultiplyAlpha=e.premultiplyAlpha,t.flipY=e.flipY,t.unpackAlignment=e.unpackAlignment,t.colorSpace=e.colorSpace,t.width=e.width,t.height=e.height,t.channels=e.channels}function T(t,e){if("object"===typeof e&&e){if("premultiplyAlpha"in e&&(rt.type(e.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),t.premultiplyAlpha=e.premultiplyAlpha),"flipY"in e&&(rt.type(e.flipY,"boolean","invalid texture flip"),t.flipY=e.flipY),"alignment"in e&&(rt.oneOf(e.alignment,[1,2,4,8],"invalid texture unpack alignment"),t.unpackAlignment=e.alignment),"colorSpace"in e&&(rt.parameter(e.colorSpace,f,"invalid colorSpace"),t.colorSpace=f[e.colorSpace]),"type"in e){var n=e.type;rt(r.oes_texture_float||!("float"===n||"float32"===n),"you must enable the OES_texture_float extension in order to use floating point textures."),rt(r.oes_texture_half_float||!("half float"===n||"float16"===n),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),rt(r.webgl_depth_texture||!("uint16"===n||"uint32"===n||"depth stencil"===n),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),rt.parameter(n,p,"invalid texture type"),t.type=p[n]}var o=t.width,a=t.height,s=t.channels,l=!1;"shape"in e?(rt(Array.isArray(e.shape)&&e.shape.length>=2,"shape must be an array"),o=e.shape[0],a=e.shape[1],3===e.shape.length&&(s=e.shape[2],rt(s>0&&s<=4,"invalid number of channels"),l=!0),rt(o>=0&&o<=i.maxTextureSize,"invalid width"),rt(a>=0&&a<=i.maxTextureSize,"invalid height")):("radius"in e&&(o=a=e.radius,rt(o>=0&&o<=i.maxTextureSize,"invalid radius")),"width"in e&&(o=e.width,rt(o>=0&&o<=i.maxTextureSize,"invalid width")),"height"in e&&(a=e.height,rt(a>=0&&a<=i.maxTextureSize,"invalid height")),"channels"in e&&(s=e.channels,rt(s>0&&s<=4,"invalid number of channels"),l=!0)),t.width=0|o,t.height=0|a,t.channels=0|s;var u=!1;if("format"in e){var c=e.format;rt(r.webgl_depth_texture||!("depth"===c||"depth stencil"===c),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),rt.parameter(c,g,"invalid texture format");var h=t.internalformat=g[c];t.format=E[h],c in p&&("type"in e||(t.type=p[c])),c in m&&(t.compressed=!0),u=!0}!l&&u?t.channels=Br[t.format]:l&&!u?t.channels!==jr[t.format]&&(t.format=t.internalformat=jr[t.channels]):u&&l&&rt(t.channels===Br[t.format],"number of channels inconsistent with specified format")}}function A(t){n.pixelStorei(Pr,t.flipY),n.pixelStorei(Lr,t.premultiplyAlpha),n.pixelStorei(Nr,t.colorSpace),n.pixelStorei(Ir,t.unpackAlignment)}function O(){C.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function k(e,n){var r=null;if(oi(n)?r=n:n&&(rt.type(n,"object","invalid pixel data type"),T(e,n),"x"in n&&(e.xOffset=0|n.x),"y"in n&&(e.yOffset=0|n.y),oi(n.data)&&(r=n.data)),rt(!e.compressed||r instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),n.copy){rt(!r,"can not specify copy and data field for the same texture");var o=a.viewportWidth,s=a.viewportHeight;e.width=e.width||o-e.xOffset,e.height=e.height||s-e.yOffset,e.needsCopy=!0,rt(e.xOffset>=0&&e.xOffset<o&&e.yOffset>=0&&e.yOffset<s&&e.width>0&&e.width<=o&&e.height>0&&e.height<=s,"copy texture read out of bounds")}else if(r){if(t(r))e.channels=e.channels||4,e.data=r,"type"in n||e.type!==ur||(e.type=ai(r));else if(Zr(r))e.channels=e.channels||4,si(e,r),e.alignment=1,e.needsFree=!0;else if(Ee(r)){var l=r.data;Array.isArray(l)||e.type!==ur||(e.type=ai(l));var u,c,h,d,f,p,g=r.shape,m=r.stride;3===g.length?(h=g[2],p=m[2]):(rt(2===g.length,"invalid ndarray pixel data, must be 2 or 3D"),h=1,p=1),u=g[0],c=g[1],d=m[0],f=m[1],e.alignment=1,e.width=u,e.height=c,e.channels=h,e.format=e.internalformat=jr[h],e.needsFree=!0,ci(e,l,d,f,p,r.offset)}else if($r(r)||ti(r)||ei(r))$r(r)||ti(r)?e.element=r:e.element=r.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if(ni(r))e.element=r,e.width=r.width,e.height=r.height,e.channels=4;else if(ri(r))e.element=r,e.width=r.naturalWidth,e.height=r.naturalHeight,e.channels=4;else if(ii(r))e.element=r,e.width=r.videoWidth,e.height=r.videoHeight,e.channels=4;else if(Kr(r)){var y=e.width||r[0].length,v=e.height||r.length,b=e.channels;b=An(r[0][0])?b||r[0][0].length:b||1;for(var _=Me.shape(r),x=1,w=0;w<_.length;++w)x*=_[w];var S=li(e,x);Me.flatten(r,_,"",S),ui(e,S),e.alignment=1,e.width=y,e.height=v,e.channels=b,e.format=e.internalformat=jr[b],e.needsFree=!0}}else e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4;e.type===dr?rt(i.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):e.type===Zn&&rt(i.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function I(t,e,r){var i=t.element,a=t.data,s=t.internalformat,l=t.format,u=t.type,c=t.width,h=t.height;A(t),i?n.texImage2D(e,r,l,l,u,i):t.compressed?n.compressedTexImage2D(e,r,s,c,h,0,a):t.needsCopy?(o(),n.copyTexImage2D(e,r,l,t.xOffset,t.yOffset,c,h,0)):n.texImage2D(e,r,l,c,h,0,l,u,a||null)}function P(t,e,r,i,a){var s=t.element,l=t.data,u=t.internalformat,c=t.format,h=t.type,d=t.width,f=t.height;A(t),s?n.texSubImage2D(e,a,r,i,c,h,s):t.compressed?n.compressedTexSubImage2D(e,a,r,i,u,d,f,l):t.needsCopy?(o(),n.copyTexSubImage2D(e,a,r,i,t.xOffset,t.yOffset,d,f)):n.texSubImage2D(e,a,r,i,d,f,c,h,l)}var L=[];function N(){return L.pop()||new O}function R(t){t.needsFree&&jt.freeType(t.data),O.call(t),L.push(t)}function D(){C.call(this),this.genMipmaps=!1,this.mipmapHint=Tr,this.mipmask=0,this.images=Array(16)}function F(t,e,n){var r=t.images[0]=N();t.mipmask=1,r.width=t.width=e,r.height=t.height=n,r.channels=t.channels=4}function j(t,e){var n=null;if(oi(e))n=t.images[0]=N(),M(n,t),k(n,e),t.mipmask=1;else if(T(t,e),Array.isArray(e.mipmap))for(var r=e.mipmap,i=0;i<r.length;++i)n=t.images[i]=N(),M(n,t),n.width>>=i,n.height>>=i,k(n,r[i]),t.mipmask|=1<<i;else n=t.images[0]=N(),M(n,t),k(n,e),t.mipmask=1;M(t,t.images[0]),!t.compressed||t.internalformat!==Kn&&t.internalformat!==Qn&&t.internalformat!==$n&&t.internalformat!==tr||rt(t.width%4===0&&t.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function B(t,e){for(var n=t.images,r=0;r<n.length;++r){if(!n[r])return;I(n[r],e,r)}}var z=[];function U(){var t=z.pop()||new D;C.call(t),t.mipmask=0;for(var e=0;e<16;++e)t.images[e]=null;return t}function G(t){for(var e=t.images,n=0;n<e.length;++n)e[n]&&R(e[n]),e[n]=null;z.push(t)}function q(){this.minFilter=_r,this.magFilter=_r,this.wrapS=mr,this.wrapT=mr,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Tr}function V(t,e){if("min"in e){var n=e.min;rt.parameter(n,d),t.minFilter=d[n],Fr.indexOf(t.minFilter)>=0&&!("faces"in e)&&(t.genMipmaps=!0)}if("mag"in e){var r=e.mag;rt.parameter(r,h),t.magFilter=h[r]}var o=t.wrapS,a=t.wrapT;if("wrap"in e){var s=e.wrap;"string"===typeof s?(rt.parameter(s,c),o=a=c[s]):Array.isArray(s)&&(rt.parameter(s[0],c),rt.parameter(s[1],c),o=c[s[0]],a=c[s[1]])}else{if("wrapS"in e){var l=e.wrapS;rt.parameter(l,c),o=c[l]}if("wrapT"in e){var f=e.wrapT;rt.parameter(f,c),a=c[f]}}if(t.wrapS=o,t.wrapT=a,"anisotropic"in e){var p=e.anisotropic;rt("number"===typeof p&&p>=1&&p<=i.maxAnisotropic,"aniso samples must be between 1 and "),t.anisotropic=e.anisotropic}if("mipmap"in e){var g=!1;switch(typeof e.mipmap){case"string":rt.parameter(e.mipmap,u,"invalid mipmap hint"),t.mipmapHint=u[e.mipmap],t.genMipmaps=!0,g=!0;break;case"boolean":g=t.genMipmaps=e.mipmap;break;case"object":rt(Array.isArray(e.mipmap),"invalid mipmap type"),t.genMipmaps=!1,g=!0;break;default:rt.raise("invalid mipmap type")}g&&!("min"in e)&&(t.minFilter=wr)}}function H(t,e){n.texParameteri(e,br,t.minFilter),n.texParameteri(e,vr,t.magFilter),n.texParameteri(e,fr,t.wrapS),n.texParameteri(e,pr,t.wrapT),r.ext_texture_filter_anisotropic&&n.texParameteri(e,kr,t.anisotropic),t.genMipmaps&&(n.hint(Mr,t.mipmapHint),n.generateMipmap(e))}var W=0,Y={},X=i.maxTextureUnits,J=Array(X).map((function(){return null}));function Z(t){C.call(this),this.mipmask=0,this.internalformat=Nn,this.id=W++,this.refCount=1,this.target=t,this.texture=n.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new q,l.profile&&(this.stats={size:0})}function K(t){n.activeTexture(Dr),n.bindTexture(t.target,t.texture)}function Q(){var t=J[0];t?n.bindTexture(t.target,t.texture):n.bindTexture(In,null)}function $(t){var e=t.texture;rt(e,"must not double destroy texture");var r=t.unit,i=t.target;r>=0&&(n.activeTexture(Dr+r),n.bindTexture(i,null),J[r]=null),n.deleteTexture(e),t.texture=null,t.params=null,t.pixels=null,t.refCount=0,delete Y[t.id],s.textureCount--}function tt(t,e){var r=new Z(In);function o(t,e){var n=r.texInfo;q.call(n);var a=U();return"number"===typeof t?F(a,0|t,"number"===typeof e?0|e:0|t):t?(rt.type(t,"object","invalid arguments to regl.texture"),V(n,t),j(a,t)):F(a,1,1),n.genMipmaps&&(a.mipmask=(a.width<<1)-1),r.mipmask=a.mipmask,M(r,a),rt.texture2D(n,a,i),r.internalformat=a.internalformat,o.width=a.width,o.height=a.height,K(r),B(a,In),H(n,In),Q(),G(a),l.profile&&(r.stats.size=hi(r.internalformat,r.type,a.width,a.height,n.genMipmaps,!1)),o.format=b[r.internalformat],o.type=_[r.type],o.mag=x[n.magFilter],o.min=w[n.minFilter],o.wrapS=S[n.wrapS],o.wrapT=S[n.wrapT],o}function a(t,e,n,i){rt(!!t,"must specify image data");var a=0|e,s=0|n,l=0|i,u=N();return M(u,r),u.width=0,u.height=0,k(u,t),u.width=u.width||(r.width>>l)-a,u.height=u.height||(r.height>>l)-s,rt(r.type===u.type&&r.format===u.format&&r.internalformat===u.internalformat,"incompatible format for texture.subimage"),rt(a>=0&&s>=0&&a+u.width<=r.width&&s+u.height<=r.height,"texture.subimage write out of bounds"),rt(r.mipmask&1<<l,"missing mipmap data"),rt(u.data||u.element||u.needsCopy,"missing image data"),K(r),P(u,In,a,s,l),Q(),R(u),o}function u(t,e){var i=0|t,a=0|e||i;if(i===r.width&&a===r.height)return o;o.width=r.width=i,o.height=r.height=a,K(r);for(var s=0;r.mipmask>>s;++s){var u=i>>s,c=a>>s;if(!u||!c)break;n.texImage2D(In,s,r.format,u,c,0,r.format,r.type,null)}return Q(),l.profile&&(r.stats.size=hi(r.internalformat,r.type,i,a,!1,!1)),o}return Y[r.id]=r,s.textureCount++,o(t,e),o.subimage=a,o.resize=u,o._reglType="texture2d",o._texture=r,l.profile&&(o.stats=r.stats),o.destroy=function(){r.decRef()},o}function et(t,e,r,o,a,u){var c=new Z(Pn);Y[c.id]=c,s.cubeCount++;var h=new Array(6);function d(t,e,n,r,o,a){var s,u=c.texInfo;for(q.call(u),s=0;s<6;++s)h[s]=U();if("number"!==typeof t&&t)if("object"===typeof t)if(e)j(h[0],t),j(h[1],e),j(h[2],n),j(h[3],r),j(h[4],o),j(h[5],a);else if(V(u,t),T(c,t),"faces"in t){var f=t.faces;for(rt(Array.isArray(f)&&6===f.length,"cube faces must be a length 6 array"),s=0;s<6;++s)rt("object"===typeof f[s]&&!!f[s],"invalid input for cube map face"),M(h[s],c),j(h[s],f[s])}else for(s=0;s<6;++s)j(h[s],t);else rt.raise("invalid arguments to cube map");else{var p=0|t||1;for(s=0;s<6;++s)F(h[s],p,p)}for(M(c,h[0]),i.npotTextureCube||rt(On(c.width)&&On(c.height),"your browser does not support non power or two texture dimensions"),u.genMipmaps?c.mipmask=(h[0].width<<1)-1:c.mipmask=h[0].mipmask,rt.textureCube(c,u,h,i),c.internalformat=h[0].internalformat,d.width=h[0].width,d.height=h[0].height,K(c),s=0;s<6;++s)B(h[s],Ln+s);for(H(u,Pn),Q(),l.profile&&(c.stats.size=hi(c.internalformat,c.type,d.width,d.height,u.genMipmaps,!0)),d.format=b[c.internalformat],d.type=_[c.type],d.mag=x[u.magFilter],d.min=w[u.minFilter],d.wrapS=S[u.wrapS],d.wrapT=S[u.wrapT],s=0;s<6;++s)G(h[s]);return d}function f(t,e,n,r,i){rt(!!e,"must specify image data"),rt("number"===typeof t&&t===(0|t)&&t>=0&&t<6,"invalid face");var o=0|n,a=0|r,s=0|i,l=N();return M(l,c),l.width=0,l.height=0,k(l,e),l.width=l.width||(c.width>>s)-o,l.height=l.height||(c.height>>s)-a,rt(c.type===l.type&&c.format===l.format&&c.internalformat===l.internalformat,"incompatible format for texture.subimage"),rt(o>=0&&a>=0&&o+l.width<=c.width&&a+l.height<=c.height,"texture.subimage write out of bounds"),rt(c.mipmask&1<<s,"missing mipmap data"),rt(l.data||l.element||l.needsCopy,"missing image data"),K(c),P(l,Ln+t,o,a,s),Q(),R(l),d}function p(t){var e=0|t;if(e!==c.width){d.width=c.width=e,d.height=c.height=e,K(c);for(var r=0;r<6;++r)for(var i=0;c.mipmask>>i;++i)n.texImage2D(Ln+r,i,c.format,e>>i,e>>i,0,c.format,c.type,null);return Q(),l.profile&&(c.stats.size=hi(c.internalformat,c.type,d.width,d.height,!1,!0)),d}}return d(t,e,r,o,a,u),d.subimage=f,d.resize=p,d._reglType="textureCube",d._texture=c,l.profile&&(d.stats=c.stats),d.destroy=function(){c.decRef()},d}function nt(){for(var t=0;t<X;++t)n.activeTexture(Dr+t),n.bindTexture(In,null),J[t]=null;Ce(Y).forEach($),s.cubeCount=0,s.textureCount=0}function it(){for(var t=0;t<X;++t){var e=J[t];e&&(e.bindCount=0,e.unit=-1,J[t]=null)}Ce(Y).forEach((function(t){t.texture=n.createTexture(),n.bindTexture(t.target,t.texture);for(var e=0;e<32;++e)if(0!==(t.mipmask&1<<e))if(t.target===In)n.texImage2D(In,e,t.internalformat,t.width>>e,t.height>>e,0,t.internalformat,t.type,null);else for(var r=0;r<6;++r)n.texImage2D(Ln+r,e,t.internalformat,t.width>>e,t.height>>e,0,t.internalformat,t.type,null);H(t.texInfo,t.target)}))}function ot(){for(var t=0;t<X;++t){var e=J[t];e&&(e.bindCount=0,e.unit=-1,J[t]=null),n.activeTexture(Dr+t),n.bindTexture(In,null),n.bindTexture(Pn,null)}}return e(Z.prototype,{bind:function(){var t=this;t.bindCount+=1;var e=t.unit;if(e<0){for(var r=0;r<X;++r){var i=J[r];if(i){if(i.bindCount>0)continue;i.unit=-1}J[r]=t,e=r;break}e>=X&&rt.raise("insufficient number of texture units"),l.profile&&s.maxTextureUnits<e+1&&(s.maxTextureUnits=e+1),t.unit=e,n.activeTexture(Dr+e),n.bindTexture(t.target,t.texture)}return e},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&$(this)}}),l.profile&&(s.getTotalTextureSize=function(){var t=0;return Object.keys(Y).forEach((function(e){t+=Y[e].stats.size})),t}),{create2D:tt,createCube:et,clear:nt,getTexture:function(t){return null},restore:it,refresh:ot}}Jr[Bn]=2,Jr[zn]=2,Jr[Un]=2,Jr[Yn]=4,Jr[Kn]=.5,Jr[Qn]=.5,Jr[$n]=1,Jr[tr]=1,Jr[er]=.5,Jr[nr]=1,Jr[rr]=1,Jr[ir]=.5,Jr[or]=.25,Jr[ar]=.5,Jr[sr]=.25,Jr[lr]=.5;var fi=36161,pi=32854,gi=32855,mi=36194,yi=33189,vi=36168,bi=34041,_i=35907,xi=34836,wi=34842,Si=34843,Ei=[];function Ci(t,e,n){return Ei[t]*e*n}Ei[pi]=2,Ei[gi]=2,Ei[mi]=2,Ei[yi]=2,Ei[vi]=1,Ei[bi]=4,Ei[_i]=4,Ei[xi]=16,Ei[wi]=8,Ei[Si]=6;var Mi=function(t,e,n,r,i){var o={rgba4:pi,rgb565:mi,"rgb5 a1":gi,depth:yi,stencil:vi,"depth stencil":bi};e.ext_srgb&&(o["srgba"]=_i),e.ext_color_buffer_half_float&&(o["rgba16f"]=wi,o["rgb16f"]=Si),e.webgl_color_buffer_float&&(o["rgba32f"]=xi);var a=[];Object.keys(o).forEach((function(t){var e=o[t];a[e]=t}));var s=0,l={};function u(t){this.id=s++,this.refCount=1,this.renderbuffer=t,this.format=pi,this.width=0,this.height=0,i.profile&&(this.stats={size:0})}function c(e){var n=e.renderbuffer;rt(n,"must not double destroy renderbuffer"),t.bindRenderbuffer(fi,null),t.deleteRenderbuffer(n),e.renderbuffer=null,e.refCount=0,delete l[e.id],r.renderbufferCount--}function h(e,s){var c=new u(t.createRenderbuffer());function h(e,r){var s=0,l=0,u=pi;if("object"===typeof e&&e){var d=e;if("shape"in d){var f=d.shape;rt(Array.isArray(f)&&f.length>=2,"invalid renderbuffer shape"),s=0|f[0],l=0|f[1]}else"radius"in d&&(s=l=0|d.radius),"width"in d&&(s=0|d.width),"height"in d&&(l=0|d.height);"format"in d&&(rt.parameter(d.format,o,"invalid renderbuffer format"),u=o[d.format])}else"number"===typeof e?(s=0|e,l="number"===typeof r?0|r:s):e?rt.raise("invalid arguments to renderbuffer constructor"):s=l=1;if(rt(s>0&&l>0&&s<=n.maxRenderbufferSize&&l<=n.maxRenderbufferSize,"invalid renderbuffer size"),s!==c.width||l!==c.height||u!==c.format)return h.width=c.width=s,h.height=c.height=l,c.format=u,t.bindRenderbuffer(fi,c.renderbuffer),t.renderbufferStorage(fi,u,s,l),rt(0===t.getError(),"invalid render buffer format"),i.profile&&(c.stats.size=Ci(c.format,c.width,c.height)),h.format=a[c.format],h}function d(e,r){var o=0|e,a=0|r||o;return o===c.width&&a===c.height||(rt(o>0&&a>0&&o<=n.maxRenderbufferSize&&a<=n.maxRenderbufferSize,"invalid renderbuffer size"),h.width=c.width=o,h.height=c.height=a,t.bindRenderbuffer(fi,c.renderbuffer),t.renderbufferStorage(fi,c.format,o,a),rt(0===t.getError(),"invalid render buffer format"),i.profile&&(c.stats.size=Ci(c.format,c.width,c.height))),h}return l[c.id]=c,r.renderbufferCount++,h(e,s),h.resize=d,h._reglType="renderbuffer",h._renderbuffer=c,i.profile&&(h.stats=c.stats),h.destroy=function(){c.decRef()},h}function d(){Ce(l).forEach((function(e){e.renderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(fi,e.renderbuffer),t.renderbufferStorage(fi,e.format,e.width,e.height)})),t.bindRenderbuffer(fi,null)}return u.prototype.decRef=function(){--this.refCount<=0&&c(this)},i.profile&&(r.getTotalRenderbufferSize=function(){var t=0;return Object.keys(l).forEach((function(e){t+=l[e].stats.size})),t}),{create:h,clear:function(){Ce(l).forEach(c)},restore:d}},Ti=36160,Ai=36161,Oi=3553,ki=34069,Ii=36064,Pi=36096,Li=36128,Ni=33306,Ri=36053,Di=36054,Fi=36055,ji=36057,Bi=36061,zi=36193,Ui=5121,Gi=5126,qi=6407,Vi=6408,Hi=6402,Wi=[qi,Vi],Yi=[];Yi[Vi]=4,Yi[qi]=3;var Xi=[];Xi[Ui]=1,Xi[Gi]=4,Xi[zi]=2;var Ji=32854,Zi=32855,Ki=36194,Qi=33189,$i=36168,to=34041,eo=35907,no=34836,ro=34842,io=34843,oo=[Ji,Zi,Ki,eo,ro,io,no],ao={};function so(t,n,r,i,o,a){var s={cur:null,next:null,dirty:!1,setFBO:null},l=["rgba"],u=["rgba4","rgb565","rgb5 a1"];n.ext_srgb&&u.push("srgba"),n.ext_color_buffer_half_float&&u.push("rgba16f","rgb16f"),n.webgl_color_buffer_float&&u.push("rgba32f");var c=["uint8"];function h(t,e,n){this.target=t,this.texture=e,this.renderbuffer=n;var r=0,i=0;e?(r=e.width,i=e.height):n&&(r=n.width,i=n.height),this.width=r,this.height=i}function d(t){t&&(t.texture&&t.texture._texture.decRef(),t.renderbuffer&&t.renderbuffer._renderbuffer.decRef())}function f(t,e,n){if(t)if(t.texture){var r=t.texture._texture,i=Math.max(1,r.width),o=Math.max(1,r.height);rt(i===e&&o===n,"inconsistent width/height for supplied texture"),r.refCount+=1}else{var a=t.renderbuffer._renderbuffer;rt(a.width===e&&a.height===n,"inconsistent width/height for renderbuffer"),a.refCount+=1}}function p(e,n){n&&(n.texture?t.framebufferTexture2D(Ti,e,n.target,n.texture._texture.texture,0):t.framebufferRenderbuffer(Ti,e,Ai,n.renderbuffer._renderbuffer.renderbuffer))}function g(t){var e=Oi,n=null,r=null,i=t;"object"===typeof t&&(i=t.data,"target"in t&&(e=0|t.target)),rt.type(i,"function","invalid attachment data");var o=i._reglType;return"texture2d"===o?(n=i,rt(e===Oi)):"textureCube"===o?(n=i,rt(e>=ki&&e<ki+6,"invalid cube map target")):"renderbuffer"===o?(r=i,e=Ai):rt.raise("invalid regl object for attachment"),new h(e,n,r)}function m(t,e,n,r,a){if(n){var s=i.create2D({width:t,height:e,format:r,type:a});return s._texture.refCount=0,new h(Oi,s,null)}var l=o.create({width:t,height:e,format:r});return l._renderbuffer.refCount=0,new h(Ai,null,l)}function y(t){return t&&(t.texture||t.renderbuffer)}function v(t,e,n){t&&(t.texture?t.texture.resize(e,n):t.renderbuffer&&t.renderbuffer.resize(e,n),t.width=e,t.height=n)}n.oes_texture_half_float&&c.push("half float","float16"),n.oes_texture_float&&c.push("float","float32");var b=0,_={};function x(){this.id=b++,_[this.id]=this,this.framebuffer=t.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function w(t){t.colorAttachments.forEach(d),d(t.depthAttachment),d(t.stencilAttachment),d(t.depthStencilAttachment)}function S(e){var n=e.framebuffer;rt(n,"must not double destroy framebuffer"),t.deleteFramebuffer(n),e.framebuffer=null,a.framebufferCount--,delete _[e.id]}function E(e){var n;t.bindFramebuffer(Ti,e.framebuffer);var i=e.colorAttachments;for(n=0;n<i.length;++n)p(Ii+n,i[n]);for(n=i.length;n<r.maxColorAttachments;++n)t.framebufferTexture2D(Ti,Ii+n,Oi,null,0);t.framebufferTexture2D(Ti,Ni,Oi,null,0),t.framebufferTexture2D(Ti,Pi,Oi,null,0),t.framebufferTexture2D(Ti,Li,Oi,null,0),p(Pi,e.depthAttachment),p(Li,e.stencilAttachment),p(Ni,e.depthStencilAttachment);var o=t.checkFramebufferStatus(Ti);t.isContextLost()||o===Ri||rt.raise("framebuffer configuration not supported, status = "+ao[o]),t.bindFramebuffer(Ti,s.next?s.next.framebuffer:null),s.cur=s.next,t.getError()}function C(t,i){var o=new x;function h(t,e){var i;rt(s.next!==o,"can not update framebuffer which is currently in use");var a=0,d=0,p=!0,v=!0,b=null,_=!0,x="rgba",S="uint8",C=1,M=null,T=null,A=null,O=!1;if("number"===typeof t)a=0|t,d=0|e||a;else if(t){rt.type(t,"object","invalid arguments for framebuffer");var k=t;if("shape"in k){var I=k.shape;rt(Array.isArray(I)&&I.length>=2,"invalid shape for framebuffer"),a=I[0],d=I[1]}else"radius"in k&&(a=d=k.radius),"width"in k&&(a=k.width),"height"in k&&(d=k.height);("color"in k||"colors"in k)&&(b=k.color||k.colors,Array.isArray(b)&&rt(1===b.length||n.webgl_draw_buffers,"multiple render targets not supported")),b||("colorCount"in k&&(C=0|k.colorCount,rt(C>0,"invalid color buffer count")),"colorTexture"in k&&(_=!!k.colorTexture,x="rgba4"),"colorType"in k&&(S=k.colorType,_?(rt(n.oes_texture_float||!("float"===S||"float32"===S),"you must enable OES_texture_float in order to use floating point framebuffer objects"),rt(n.oes_texture_half_float||!("half float"===S||"float16"===S),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===S||"float16"===S?(rt(n.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),x="rgba16f"):"float"!==S&&"float32"!==S||(rt(n.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),x="rgba32f"),rt.oneOf(S,c,"invalid color type")),"colorFormat"in k&&(x=k.colorFormat,l.indexOf(x)>=0?_=!0:u.indexOf(x)>=0?_=!1:_?rt.oneOf(k.colorFormat,l,"invalid color format for texture"):rt.oneOf(k.colorFormat,u,"invalid color format for renderbuffer"))),("depthTexture"in k||"depthStencilTexture"in k)&&(O=!(!k.depthTexture&&!k.depthStencilTexture),rt(!O||n.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in k&&("boolean"===typeof k.depth?p=k.depth:(M=k.depth,v=!1)),"stencil"in k&&("boolean"===typeof k.stencil?v=k.stencil:(T=k.stencil,p=!1)),"depthStencil"in k&&("boolean"===typeof k.depthStencil?p=v=k.depthStencil:(A=k.depthStencil,p=!1,v=!1))}else a=d=1;var P=null,L=null,N=null,R=null;if(Array.isArray(b))P=b.map(g);else if(b)P=[g(b)];else for(P=new Array(C),i=0;i<C;++i)P[i]=m(a,d,_,x,S);rt(n.webgl_draw_buffers||P.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),rt(P.length<=r.maxColorAttachments,"too many color attachments, not supported"),a=a||P[0].width,d=d||P[0].height,M?L=g(M):p&&!v&&(L=m(a,d,O,"depth","uint32")),T?N=g(T):v&&!p&&(N=m(a,d,!1,"stencil","uint8")),A?R=g(A):!M&&!T&&v&&p&&(R=m(a,d,O,"depth stencil","depth stencil")),rt(!!M+!!T+!!A<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var D=null;for(i=0;i<P.length;++i)if(f(P[i],a,d),rt(!P[i]||P[i].texture&&Wi.indexOf(P[i].texture._texture.format)>=0||P[i].renderbuffer&&oo.indexOf(P[i].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+i+" is invalid"),P[i]&&P[i].texture){var F=Yi[P[i].texture._texture.format]*Xi[P[i].texture._texture.type];null===D?D=F:rt(D===F,"all color attachments much have the same number of bits per pixel.")}return f(L,a,d),rt(!L||L.texture&&L.texture._texture.format===Hi||L.renderbuffer&&L.renderbuffer._renderbuffer.format===Qi,"invalid depth attachment for framebuffer object"),f(N,a,d),rt(!N||N.renderbuffer&&N.renderbuffer._renderbuffer.format===$i,"invalid stencil attachment for framebuffer object"),f(R,a,d),rt(!R||R.texture&&R.texture._texture.format===to||R.renderbuffer&&R.renderbuffer._renderbuffer.format===to,"invalid depth-stencil attachment for framebuffer object"),w(o),o.width=a,o.height=d,o.colorAttachments=P,o.depthAttachment=L,o.stencilAttachment=N,o.depthStencilAttachment=R,h.color=P.map(y),h.depth=y(L),h.stencil=y(N),h.depthStencil=y(R),h.width=o.width,h.height=o.height,E(o),h}function d(t,e){rt(s.next!==o,"can not resize a framebuffer which is currently in use");var n=Math.max(0|t,1),r=Math.max(0|e||n,1);if(n===o.width&&r===o.height)return h;for(var i=o.colorAttachments,a=0;a<i.length;++a)v(i[a],n,r);return v(o.depthAttachment,n,r),v(o.stencilAttachment,n,r),v(o.depthStencilAttachment,n,r),o.width=h.width=n,o.height=h.height=r,E(o),h}return a.framebufferCount++,h(t,i),e(h,{resize:d,_reglType:"framebuffer",_framebuffer:o,destroy:function(){S(o),w(o)},use:function(t){s.setFBO({framebuffer:h},t)}})}function M(t){var o=Array(6);function a(t){var r;rt(o.indexOf(s.next)<0,"can not update framebuffer which is currently in use");var u,h={color:null},d=0,f=null,p="rgba",g="uint8",m=1;if("number"===typeof t)d=0|t;else if(t){rt.type(t,"object","invalid arguments for framebuffer");var y=t;if("shape"in y){var v=y.shape;rt(Array.isArray(v)&&v.length>=2,"invalid shape for framebuffer"),rt(v[0]===v[1],"cube framebuffer must be square"),d=v[0]}else"radius"in y&&(d=0|y.radius),"width"in y?(d=0|y.width,"height"in y&&rt(y.height===d,"must be square")):"height"in y&&(d=0|y.height);("color"in y||"colors"in y)&&(f=y.color||y.colors,Array.isArray(f)&&rt(1===f.length||n.webgl_draw_buffers,"multiple render targets not supported")),f||("colorCount"in y&&(m=0|y.colorCount,rt(m>0,"invalid color buffer count")),"colorType"in y&&(rt.oneOf(y.colorType,c,"invalid color type"),g=y.colorType),"colorFormat"in y&&(p=y.colorFormat,rt.oneOf(y.colorFormat,l,"invalid color format for texture"))),"depth"in y&&(h.depth=y.depth),"stencil"in y&&(h.stencil=y.stencil),"depthStencil"in y&&(h.depthStencil=y.depthStencil)}else d=1;if(f)if(Array.isArray(f))for(u=[],r=0;r<f.length;++r)u[r]=f[r];else u=[f];else{u=Array(m);var b={radius:d,format:p,type:g};for(r=0;r<m;++r)u[r]=i.createCube(b)}for(h.color=Array(u.length),r=0;r<u.length;++r){var _=u[r];rt("function"===typeof _&&"textureCube"===_._reglType,"invalid cube map"),d=d||_.width,rt(_.width===d&&_.height===d,"invalid cube map shape"),h.color[r]={target:ki,data:u[r]}}for(r=0;r<6;++r){for(var x=0;x<u.length;++x)h.color[x].target=ki+r;r>0&&(h.depth=o[0].depth,h.stencil=o[0].stencil,h.depthStencil=o[0].depthStencil),o[r]?o[r](h):o[r]=C(h)}return e(a,{width:d,height:d,color:u})}function u(t){var e,n=0|t;if(rt(n>0&&n<=r.maxCubeMapSize,"invalid radius for cube fbo"),n===a.width)return a;var i=a.color;for(e=0;e<i.length;++e)i[e].resize(n);for(e=0;e<6;++e)o[e].resize(n);return a.width=a.height=n,a}return a(t),e(a,{faces:o,resize:u,_reglType:"framebufferCube",destroy:function(){o.forEach((function(t){t.destroy()}))}})}function T(){s.cur=null,s.next=null,s.dirty=!0,Ce(_).forEach((function(e){e.framebuffer=t.createFramebuffer(),E(e)}))}return e(s,{getFramebuffer:function(t){if("function"===typeof t&&"framebuffer"===t._reglType){var e=t._framebuffer;if(e instanceof x)return e}return null},create:C,createCube:M,clear:function(){Ce(_).forEach(S)},restore:T})}ao[Ri]="complete",ao[Di]="incomplete attachment",ao[ji]="incomplete dimensions",ao[Fi]="incomplete, missing attachment",ao[Bi]="unsupported";var lo=5126,uo=34962;function co(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=lo,this.offset=0,this.stride=0,this.divisor=0}function ho(e,n,r,i,o){for(var a=r.maxAttributes,s=new Array(a),l=0;l<a;++l)s[l]=new co;var u=0,c={},h={Record:co,scope:{},state:s,currentVAO:null,targetVAO:null,restore:f()?_:function(){},createVAO:x,getVAO:g,destroyBuffer:d,setVAO:f()?m:y,clear:f()?v:function(){}};function d(t){for(var n=0;n<s.length;++n){var r=s[n];r.buffer===t&&(e.disableVertexAttribArray(n),r.buffer=null)}}function f(){return n.oes_vertex_array_object}function p(){return n.angle_instanced_arrays}function g(t){return"function"===typeof t&&t._vao?t._vao:null}function m(t){if(t!==h.currentVAO){var e=f();t?e.bindVertexArrayOES(t.vao):e.bindVertexArrayOES(null),h.currentVAO=t}}function y(t){if(t!==h.currentVAO){if(t)t.bindAttrs();else for(var n=p(),r=0;r<s.length;++r){var i=s[r];i.buffer?(e.enableVertexAttribArray(r),e.vertexAttribPointer(r,i.size,i.type,i.normalized,i.stride,i.offfset),n&&i.divisor&&n.vertexAttribDivisorANGLE(r,i.divisor)):(e.disableVertexAttribArray(r),e.vertexAttrib4f(r,i.x,i.y,i.z,i.w))}h.currentVAO=t}}function v(){Ce(c).forEach((function(t){t.destroy()}))}function b(){this.id=++u,this.attributes=[];var t=f();this.vao=t?t.createVertexArrayOES():null,c[this.id]=this,this.buffers=[]}function _(){var t=f();t&&Ce(c).forEach((function(t){t.refresh()}))}function x(e){var r=new b;function s(e){rt(Array.isArray(e),"arguments to vertex array constructor must be an array"),rt(e.length<a,"too many attributes"),rt(e.length>0,"must specify at least one attribute");var i={},l=r.attributes;l.length=e.length;for(var u=0;u<e.length;++u){var c,h=e[u],d=l[u]=new co,f=h.data||h;if(Array.isArray(f)||t(f)||Ee(f))r.buffers[u]&&(c=r.buffers[u],t(f)&&c._buffer.byteLength>=f.byteLength?c.subdata(f):(c.destroy(),r.buffers[u]=null)),r.buffers[u]||(c=r.buffers[u]=o.create(h,uo,!1,!0)),d.buffer=o.getBuffer(c),d.size=0|d.buffer.dimension,d.normalized=!1,d.type=d.buffer.dtype,d.offset=0,d.stride=0,d.divisor=0,d.state=1,i[u]=1;else o.getBuffer(h)?(d.buffer=o.getBuffer(h),d.size=0|d.buffer.dimension,d.normalized=!1,d.type=d.buffer.dtype,d.offset=0,d.stride=0,d.divisor=0,d.state=1):o.getBuffer(h.buffer)?(d.buffer=o.getBuffer(h.buffer),d.size=0|(+h.size||d.buffer.dimension),d.normalized=!!h.normalized||!1,"type"in h?(rt.parameter(h.type,Ge,"invalid buffer type"),d.type=Ge[h.type]):d.type=d.buffer.dtype,d.offset=0|(h.offset||0),d.stride=0|(h.stride||0),d.divisor=0|(h.divisor||0),d.state=1,rt(d.size>=1&&d.size<=4,"size must be between 1 and 4"),rt(d.offset>=0,"invalid offset"),rt(d.stride>=0&&d.stride<=255,"stride must be between 0 and 255"),rt(d.divisor>=0,"divisor must be positive"),rt(!d.divisor||!!n.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in h?(rt(u>0,"first attribute must not be a constant"),d.x=+h.x||0,d.y=+h.y||0,d.z=+h.z||0,d.w=+h.w||0,d.state=2):rt(!1,"invalid attribute spec for location "+u)}for(var p=0;p<r.buffers.length;++p)!i[p]&&r.buffers[p]&&(r.buffers[p].destroy(),r.buffers[p]=null);return r.refresh(),s}return i.vaoCount+=1,s.destroy=function(){for(var t=0;t<r.buffers.length;++t)r.buffers[t]&&r.buffers[t].destroy();r.buffers.length=0,r.destroy()},s._vao=r,s._reglType="vao",s(e)}return b.prototype.bindAttrs=function(){for(var t=p(),n=this.attributes,r=0;r<n.length;++r){var i=n[r];i.buffer?(e.enableVertexAttribArray(r),e.bindBuffer(uo,i.buffer.buffer),e.vertexAttribPointer(r,i.size,i.type,i.normalized,i.stride,i.offset),t&&i.divisor&&t.vertexAttribDivisorANGLE(r,i.divisor)):(e.disableVertexAttribArray(r),e.vertexAttrib4f(r,i.x,i.y,i.z,i.w))}for(var o=n.length;o<a;++o)e.disableVertexAttribArray(o)},b.prototype.refresh=function(){var t=f();t&&(t.bindVertexArrayOES(this.vao),this.bindAttrs(),h.currentVAO=this)},b.prototype.destroy=function(){if(this.vao){var t=f();this===h.currentVAO&&(h.currentVAO=null,t.bindVertexArrayOES(null)),t.deleteVertexArrayOES(this.vao),this.vao=null}c[this.id]&&(delete c[this.id],i.vaoCount-=1)},h}var fo=35632,po=35633,go=35718,mo=35721;function yo(t,n,r,i){var o={},a={};function s(t,e,n,r){this.name=t,this.id=e,this.location=n,this.info=r}function l(t,e){for(var n=0;n<t.length;++n)if(t[n].id===e.id)return void(t[n].location=e.location);t.push(e)}function u(e,r,i){var s=e===fo?o:a,l=s[r];if(!l){var u=n.str(r);l=t.createShader(e),t.shaderSource(l,u),t.compileShader(l),rt.shaderError(t,l,u,e,i),s[r]=l}return l}var c={},h=[],d=0;function f(t,e){this.id=d++,this.fragId=t,this.vertId=e,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,i.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function p(e,r,o){var a,c,h=u(fo,e.fragId),d=u(po,e.vertId),f=e.program=t.createProgram();if(t.attachShader(f,h),t.attachShader(f,d),o)for(a=0;a<o.length;++a){var p=o[a];t.bindAttribLocation(f,p[0],p[1])}t.linkProgram(f),rt.linkError(t,f,n.str(e.fragId),n.str(e.vertId),r);var g=t.getProgramParameter(f,go);i.profile&&(e.stats.uniformsCount=g);var m=e.uniforms;for(a=0;a<g;++a)if(c=t.getActiveUniform(f,a),c)if(c.size>1)for(var y=0;y<c.size;++y){var v=c.name.replace("[0]","["+y+"]");l(m,new s(v,n.id(v),t.getUniformLocation(f,v),c))}else l(m,new s(c.name,n.id(c.name),t.getUniformLocation(f,c.name),c));var b=t.getProgramParameter(f,mo);i.profile&&(e.stats.attributesCount=b);var _=e.attributes;for(a=0;a<b;++a)c=t.getActiveAttrib(f,a),c&&l(_,new s(c.name,n.id(c.name),t.getAttribLocation(f,c.name),c))}function g(){o={},a={};for(var t=0;t<h.length;++t)p(h[t],null,h[t].attributes.map((function(t){return[t.location,t.name]})))}return i.profile&&(r.getMaxUniformsCount=function(){var t=0;return h.forEach((function(e){e.stats.uniformsCount>t&&(t=e.stats.uniformsCount)})),t},r.getMaxAttributesCount=function(){var t=0;return h.forEach((function(e){e.stats.attributesCount>t&&(t=e.stats.attributesCount)})),t}),{clear:function(){var e=t.deleteShader.bind(t);Ce(o).forEach(e),o={},Ce(a).forEach(e),a={},h.forEach((function(e){t.deleteProgram(e.program)})),h.length=0,c={},r.shaderCount=0},program:function(n,i,s,l){rt.command(n>=0,"missing vertex shader",s),rt.command(i>=0,"missing fragment shader",s);var u=c[i];u||(u=c[i]={});var d=u[n];if(d&&(d.refCount++,!l))return d;var g=new f(i,n);return r.shaderCount++,p(g,s,l),d||(u[n]=g),h.push(g),e(g,{destroy:function(){if(g.refCount--,g.refCount<=0){t.deleteProgram(g.program);var e=h.indexOf(g);h.splice(e,1),r.shaderCount--}u[g.vertId].refCount<=0&&(t.deleteShader(a[g.vertId]),delete a[g.vertId],delete c[g.fragId][g.vertId]),Object.keys(c[g.fragId]).length||(t.deleteShader(o[g.fragId]),delete o[g.fragId],delete c[g.fragId])}})},restore:g,shader:u,frag:-1,vert:-1}}var vo=6408,bo=5121,_o=3333,xo=5126;function wo(e,n,r,i,o,a,s){function l(l){var u;null===n.next?(rt(o.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),u=bo):(rt(null!==n.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),u=n.next.colorAttachments[0].texture._texture.type,a.oes_texture_float?(rt(u===bo||u===xo,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),u===xo&&rt(s.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):rt(u===bo,"Reading from a framebuffer is only allowed for the type 'uint8'"));var c=0,h=0,d=i.framebufferWidth,f=i.framebufferHeight,p=null;t(l)?p=l:l&&(rt.type(l,"object","invalid arguments to regl.read()"),c=0|l.x,h=0|l.y,rt(c>=0&&c<i.framebufferWidth,"invalid x offset for regl.read"),rt(h>=0&&h<i.framebufferHeight,"invalid y offset for regl.read"),d=0|(l.width||i.framebufferWidth-c),f=0|(l.height||i.framebufferHeight-h),p=l.data||null),p&&(u===bo?rt(p instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):u===xo&&rt(p instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),rt(d>0&&d+c<=i.framebufferWidth,"invalid width for read pixels"),rt(f>0&&f+h<=i.framebufferHeight,"invalid height for read pixels"),r();var g=d*f*4;return p||(u===bo?p=new Uint8Array(g):u===xo&&(p=p||new Float32Array(g))),rt.isTypedArray(p,"data buffer for regl.read() must be a typedarray"),rt(p.byteLength>=g,"data buffer for regl.read() too small"),e.pixelStorei(_o,4),e.readPixels(c,h,d,f,vo,u,p),p}function u(t){var e;return n.setFBO({framebuffer:t.framebuffer},(function(){e=l(t)})),e}function c(t){return t&&"framebuffer"in t?u(t):l(t)}return c}function So(t){return Array.prototype.slice.call(t)}function Eo(t){return So(t).join("")}function Co(){var t=0,n=[],r=[];function i(e){for(var i=0;i<r.length;++i)if(r[i]===e)return n[i];var o="g"+t++;return n.push(o),r.push(e),o}function o(){var n=[];function r(){n.push.apply(n,So(arguments))}var i=[];function o(){var e="v"+t++;return i.push(e),arguments.length>0&&(n.push(e,"="),n.push.apply(n,So(arguments)),n.push(";")),e}return e(r,{def:o,toString:function(){return Eo([i.length>0?"var "+i.join(",")+";":"",Eo(n)])}})}function a(){var t=o(),n=o(),r=t.toString,i=n.toString;function a(e,r){n(e,r,"=",t.def(e,r),";")}return e((function(){t.apply(t,So(arguments))}),{def:t.def,entry:t,exit:n,save:a,set:function(e,n,r){a(e,n),t(e,n,"=",r,";")},toString:function(){return r()+i()}})}function s(){var t=Eo(arguments),n=a(),r=a(),i=n.toString,o=r.toString;return e(n,{then:function(){return n.apply(n,So(arguments)),this},else:function(){return r.apply(r,So(arguments)),this},toString:function(){var e=o();return e&&(e="else{"+e+"}"),Eo(["if(",t,"){",i(),"}",e])}})}var l=o(),u={};function c(t,n){var r=[];function i(){var t="a"+r.length;return r.push(t),t}n=n||0;for(var o=0;o<n;++o)i();var s=a(),l=s.toString,c=u[t]=e(s,{arg:i,toString:function(){return Eo(["function(",r.join(),"){",l(),"}"])}});return c}function h(){var t=['"use strict";',l,"return {"];Object.keys(u).forEach((function(e){t.push('"',e,'":',u[e].toString(),",")})),t.push("}");var e=Eo(t).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n"),i=Function.apply(null,n.concat(e));return i.apply(null,r)}return{global:l,link:i,block:o,proc:c,scope:a,cond:s,compile:h}}var Mo="xyzw".split(""),To=5121,Ao=1,Oo=2,ko=0,Io=1,Po=2,Lo=3,No=4,Ro=5,Do=6,Fo="dither",jo="blend.enable",Bo="blend.color",zo="blend.equation",Uo="blend.func",Go="depth.enable",qo="depth.func",Vo="depth.range",Ho="depth.mask",Wo="colorMask",Yo="cull.enable",Xo="cull.face",Jo="frontFace",Zo="lineWidth",Ko="polygonOffset.enable",Qo="polygonOffset.offset",$o="sample.alpha",ta="sample.enable",ea="sample.coverage",na="stencil.enable",ra="stencil.mask",ia="stencil.func",oa="stencil.opFront",aa="stencil.opBack",sa="scissor.enable",la="scissor.box",ua="viewport",ca="profile",ha="framebuffer",da="vert",fa="frag",pa="elements",ga="primitive",ma="count",ya="offset",va="instances",ba="vao",_a="Width",xa="Height",wa=ha+_a,Sa=ha+xa,Ea=ua+_a,Ca=ua+xa,Ma="drawingBuffer",Ta=Ma+_a,Aa=Ma+xa,Oa=[Uo,zo,ia,oa,aa,ea,ua,la,Qo],ka=34962,Ia=34963,Pa=35632,La=35633,Na=3553,Ra=34067,Da=2884,Fa=3042,ja=3024,Ba=2960,za=2929,Ua=3089,Ga=32823,qa=32926,Va=32928,Ha=5126,Wa=35664,Ya=35665,Xa=35666,Ja=5124,Za=35667,Ka=35668,Qa=35669,$a=35670,ts=35671,es=35672,ns=35673,rs=35674,is=35675,os=35676,as=35678,ss=35680,ls=4,us=1028,cs=1029,hs=2304,ds=2305,fs=32775,ps=32776,gs=519,ms=7680,ys=0,vs=1,bs=32774,_s=513,xs=36160,ws=36064,Ss={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Es=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Cs={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Ms={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Ts={frag:Pa,vert:La},As={cw:hs,ccw:ds};function Os(e){return Array.isArray(e)||t(e)||Ee(e)}function ks(t){return t.sort((function(t,e){return t===ua?-1:e===ua?1:t<e?-1:1}))}function Is(t,e,n,r){this.thisDep=t,this.contextDep=e,this.propDep=n,this.append=r}function Ps(t){return t&&!(t.thisDep||t.contextDep||t.propDep)}function Ls(t){return new Is(!1,!1,!1,t)}function Ns(t,e){var n=t.type;if(n===ko){var r=t.data.length;return new Is(!0,r>=1,r>=2,e)}if(n===No){var i=t.data;return new Is(i.thisDep,i.contextDep,i.propDep,e)}if(n===Ro)return new Is(!1,!1,!1,e);if(n===Do){for(var o=!1,a=!1,s=!1,l=0;l<t.data.length;++l){var u=t.data[l];if(u.type===Io)s=!0;else if(u.type===Po)a=!0;else if(u.type===Lo)o=!0;else if(u.type===ko){o=!0;var c=u.data;c>=1&&(a=!0),c>=2&&(s=!0)}else u.type===No&&(o=o||u.data.thisDep,a=a||u.data.contextDep,s=s||u.data.propDep)}return new Is(o,a,s,e)}return new Is(n===Lo,n===Po,n===Io,e)}var Rs=new Is(!1,!1,!1,(function(){}));function Ds(t,n,r,i,o,a,s,l,u,c,h,d,f,p,g){var m=c.Record,y={add:32774,subtract:32778,"reverse subtract":32779};r.ext_blend_minmax&&(y.min=fs,y.max=ps);var v=r.angle_instanced_arrays,b=r.webgl_draw_buffers,_={dirty:!0,profile:g.profile},x={},w=[],S={},E={};function C(t){return t.replace(".","_")}function M(t,e,n){var r=C(t);w.push(t),x[r]=_[r]=!!n,S[r]=e}function T(t,e,n){var r=C(t);w.push(t),Array.isArray(n)?(_[r]=n.slice(),x[r]=n.slice()):_[r]=x[r]=n,E[r]=e}M(Fo,ja),M(jo,Fa),T(Bo,"blendColor",[0,0,0,0]),T(zo,"blendEquationSeparate",[bs,bs]),T(Uo,"blendFuncSeparate",[vs,ys,vs,ys]),M(Go,za,!0),T(qo,"depthFunc",_s),T(Vo,"depthRange",[0,1]),T(Ho,"depthMask",!0),T(Wo,Wo,[!0,!0,!0,!0]),M(Yo,Da),T(Xo,"cullFace",cs),T(Jo,Jo,ds),T(Zo,Zo,1),M(Ko,Ga),T(Qo,"polygonOffset",[0,0]),M($o,qa),M(ta,Va),T(ea,"sampleCoverage",[1,!1]),M(na,Ba),T(ra,"stencilMask",-1),T(ia,"stencilFunc",[gs,0,-1]),T(oa,"stencilOpSeparate",[us,ms,ms,ms]),T(aa,"stencilOpSeparate",[cs,ms,ms,ms]),M(sa,Ua),T(la,"scissor",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]),T(ua,ua,[0,0,t.drawingBufferWidth,t.drawingBufferHeight]);var A={gl:t,context:f,strings:n,next:x,current:_,draw:d,elements:a,buffer:o,shader:h,attributes:c.state,vao:c,uniforms:u,framebuffer:l,extensions:r,timer:p,isBufferArgs:Os},O={primTypes:cn,compareFuncs:Cs,blendFuncs:Ss,blendEquations:y,stencilOps:Ms,glTypes:Ge,orientationType:As};rt.optional((function(){A.isArrayLike=An})),b&&(O.backBuffer=[cs],O.drawBuffer=Tt(i.maxDrawbuffers,(function(t){return 0===t?[0]:Tt(t,(function(t){return ws+t}))})));var k=0;function I(){var t=Co(),e=t.link,r=t.global;t.id=k++,t.batchId="0";var i=e(A),o=t.shared={props:"a0"};Object.keys(A).forEach((function(t){o[t]=r.def(i,".",t)})),rt.optional((function(){t.CHECK=e(rt),t.commandStr=rt.guessCommand(),t.command=e(t.commandStr),t.assert=function(t,n,r){t("if(!(",n,"))",this.CHECK,".commandRaise(",e(r),",",this.command,");")},O.invalidBlendCombinations=Es}));var a=t.next={},s=t.current={};Object.keys(E).forEach((function(t){Array.isArray(_[t])&&(a[t]=r.def(o.next,".",t),s[t]=r.def(o.current,".",t))}));var l=t.constants={};Object.keys(O).forEach((function(t){l[t]=r.def(JSON.stringify(O[t]))})),t.invoke=function(n,r){switch(r.type){case ko:var i=["this",o.context,o.props,t.batchId];return n.def(e(r.data),".call(",i.slice(0,Math.max(r.data.length+1,4)),")");case Io:return n.def(o.props,r.data);case Po:return n.def(o.context,r.data);case Lo:return n.def("this",r.data);case No:return r.data.append(t,n),r.data.ref;case Ro:return r.data.toString();case Do:return r.data.map((function(e){return t.invoke(n,e)}))}},t.attribCache={};var u={};return t.scopeAttrib=function(t){var r=n.id(t);if(r in u)return u[r];var i=c.scope[r];i||(i=c.scope[r]=new m);var o=u[r]=e(i);return o},t}function P(t){var e,n=t.static,r=t.dynamic;if(ca in n){var i=!!n[ca];e=Ls((function(t,e){return i})),e.enable=i}else if(ca in r){var o=r[ca];e=Ns(o,(function(t,e){return t.invoke(e,o)}))}return e}function L(t,e){var n=t.static,r=t.dynamic;if(ha in n){var i=n[ha];return i?(i=l.getFramebuffer(i),rt.command(i,"invalid framebuffer object"),Ls((function(t,e){var n=t.link(i),r=t.shared;e.set(r.framebuffer,".next",n);var o=r.context;return e.set(o,"."+wa,n+".width"),e.set(o,"."+Sa,n+".height"),n}))):Ls((function(t,e){var n=t.shared;e.set(n.framebuffer,".next","null");var r=n.context;return e.set(r,"."+wa,r+"."+Ta),e.set(r,"."+Sa,r+"."+Aa),"null"}))}if(ha in r){var o=r[ha];return Ns(o,(function(t,e){var n=t.invoke(e,o),r=t.shared,i=r.framebuffer,a=e.def(i,".getFramebuffer(",n,")");rt.optional((function(){t.assert(e,"!"+n+"||"+a,"invalid framebuffer object")})),e.set(i,".next",a);var s=r.context;return e.set(s,"."+wa,a+"?"+a+".width:"+s+"."+Ta),e.set(s,"."+Sa,a+"?"+a+".height:"+s+"."+Aa),a}))}return null}function N(t,e,n){var r=t.static,i=t.dynamic;function o(t){if(t in r){var o=r[t];rt.commandType(o,"object","invalid "+t,n.commandStr);var a,s,l=!0,u=0|o.x,c=0|o.y;return"width"in o?(a=0|o.width,rt.command(a>=0,"invalid "+t,n.commandStr)):l=!1,"height"in o?(s=0|o.height,rt.command(s>=0,"invalid "+t,n.commandStr)):l=!1,new Is(!l&&e&&e.thisDep,!l&&e&&e.contextDep,!l&&e&&e.propDep,(function(t,e){var n=t.shared.context,r=a;"width"in o||(r=e.def(n,".",wa,"-",u));var i=s;return"height"in o||(i=e.def(n,".",Sa,"-",c)),[u,c,r,i]}))}if(t in i){var h=i[t],d=Ns(h,(function(e,n){var r=e.invoke(n,h);rt.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)}));var i=e.shared.context,o=n.def(r,".x|0"),a=n.def(r,".y|0"),s=n.def('"width" in ',r,"?",r,".width|0:","(",i,".",wa,"-",o,")"),l=n.def('"height" in ',r,"?",r,".height|0:","(",i,".",Sa,"-",a,")");return rt.optional((function(){e.assert(n,s+">=0&&"+l+">=0","invalid "+t)})),[o,a,s,l]}));return e&&(d.thisDep=d.thisDep||e.thisDep,d.contextDep=d.contextDep||e.contextDep,d.propDep=d.propDep||e.propDep),d}return e?new Is(e.thisDep,e.contextDep,e.propDep,(function(t,e){var n=t.shared.context;return[0,0,e.def(n,".",wa),e.def(n,".",Sa)]})):null}var a=o(ua);if(a){var s=a;a=new Is(a.thisDep,a.contextDep,a.propDep,(function(t,e){var n=s.append(t,e),r=t.shared.context;return e.set(r,"."+Ea,n[2]),e.set(r,"."+Ca,n[3]),n}))}return{viewport:a,scissor_box:o(la)}}function R(t,e){var n=t.static,r="string"===typeof n[fa]&&"string"===typeof n[da];if(r){if(Object.keys(e.dynamic).length>0)return null;var i=e.static,o=Object.keys(i);if(o.length>0&&"number"===typeof i[o[0]]){for(var a=[],s=0;s<o.length;++s)rt("number"===typeof i[o[s]],"must specify all vertex attribute locations when using vaos"),a.push([0|i[o[s]],o[s]]);return a}}return null}function D(t,e,r){var i=t.static,o=t.dynamic;function a(t){if(t in i){var e=n.id(i[t]);rt.optional((function(){h.shader(Ts[t],e,rt.guessCommand())}));var r=Ls((function(){return e}));return r.id=e,r}if(t in o){var a=o[t];return Ns(a,(function(e,n){var r=e.invoke(n,a),i=n.def(e.shared.strings,".id(",r,")");return rt.optional((function(){n(e.shared.shader,".shader(",Ts[t],",",i,",",e.command,");")})),i}))}return null}var s,l=a(fa),u=a(da),c=null;return Ps(l)&&Ps(u)?(c=h.program(u.id,l.id,null,r),s=Ls((function(t,e){return t.link(c)}))):s=new Is(l&&l.thisDep||u&&u.thisDep,l&&l.contextDep||u&&u.contextDep,l&&l.propDep||u&&u.propDep,(function(t,e){var n,r,i=t.shared.shader;n=l?l.append(t,e):e.def(i,".",fa),r=u?u.append(t,e):e.def(i,".",da);var o=i+".program("+r+","+n;return rt.optional((function(){o+=","+t.command})),e.def(o+")")})),{frag:l,vert:u,progVar:s,program:c}}function F(t,e){var n=t.static,r=t.dynamic;function i(){if(pa in n){var t=n[pa];Os(t)?t=a.getElements(a.create(t,!0)):t&&(t=a.getElements(t),rt.command(t,"invalid elements",e.commandStr));var i=Ls((function(e,n){if(t){var r=e.link(t);return e.ELEMENTS=r,r}return e.ELEMENTS=null,null}));return i.value=t,i}if(pa in r){var o=r[pa];return Ns(o,(function(t,e){var n=t.shared,r=n.isBufferArgs,i=n.elements,a=t.invoke(e,o),s=e.def("null"),l=e.def(r,"(",a,")"),u=t.cond(l).then(s,"=",i,".createStream(",a,");").else(s,"=",i,".getElements(",a,");");return rt.optional((function(){t.assert(u.else,"!"+a+"||"+s,"invalid elements")})),e.entry(u),e.exit(t.cond(l).then(i,".destroyStream(",s,");")),t.ELEMENTS=s,s}))}return null}var o=i();function s(){if(ga in n){var t=n[ga];return rt.commandParameter(t,cn,"invalid primitve",e.commandStr),Ls((function(e,n){return cn[t]}))}if(ga in r){var i=r[ga];return Ns(i,(function(t,e){var n=t.constants.primTypes,r=t.invoke(e,i);return rt.optional((function(){t.assert(e,r+" in "+n,"invalid primitive, must be one of "+Object.keys(cn))})),e.def(n,"[",r,"]")}))}return o?Ps(o)?o.value?Ls((function(t,e){return e.def(t.ELEMENTS,".primType")})):Ls((function(){return ls})):new Is(o.thisDep,o.contextDep,o.propDep,(function(t,e){var n=t.ELEMENTS;return e.def(n,"?",n,".primType:",ls)})):null}function l(t,i){if(t in n){var a=0|n[t];return rt.command(!i||a>=0,"invalid "+t,e.commandStr),Ls((function(t,e){return i&&(t.OFFSET=a),a}))}if(t in r){var s=r[t];return Ns(s,(function(e,n){var r=e.invoke(n,s);return i&&(e.OFFSET=r,rt.optional((function(){e.assert(n,r+">=0","invalid "+t)}))),r}))}return i&&o?Ls((function(t,e){return t.OFFSET="0",0})):null}var u=l(ya,!0);function c(){if(ma in n){var t=0|n[ma];return rt.command("number"===typeof t&&t>=0,"invalid vertex count",e.commandStr),Ls((function(){return t}))}if(ma in r){var i=r[ma];return Ns(i,(function(t,e){var n=t.invoke(e,i);return rt.optional((function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">=0&&"+n+"===("+n+"|0)","invalid vertex count")})),n}))}if(o){if(Ps(o)){if(o)return u?new Is(u.thisDep,u.contextDep,u.propDep,(function(t,e){var n=e.def(t.ELEMENTS,".vertCount-",t.OFFSET);return rt.optional((function(){t.assert(e,n+">=0","invalid vertex offset/element buffer too small")})),n})):Ls((function(t,e){return e.def(t.ELEMENTS,".vertCount")}));var a=Ls((function(){return-1}));return rt.optional((function(){a.MISSING=!0})),a}var s=new Is(o.thisDep||u.thisDep,o.contextDep||u.contextDep,o.propDep||u.propDep,(function(t,e){var n=t.ELEMENTS;return t.OFFSET?e.def(n,"?",n,".vertCount-",t.OFFSET,":-1"):e.def(n,"?",n,".vertCount:-1")}));return rt.optional((function(){s.DYNAMIC=!0})),s}return null}return{elements:o,primitive:s(),count:c(),instances:l(va,!1),offset:u}}function j(t,e){var n=t.static,r=t.dynamic,o={};return w.forEach((function(t){var a=C(t);function s(e,i){if(t in n){var s=e(n[t]);o[a]=Ls((function(){return s}))}else if(t in r){var l=r[t];o[a]=Ns(l,(function(t,e){return i(t,e,t.invoke(e,l))}))}}switch(t){case Yo:case jo:case Fo:case na:case Go:case sa:case Ko:case $o:case ta:case Ho:return s((function(n){return rt.commandType(n,"boolean",t,e.commandStr),n}),(function(e,n,r){return rt.optional((function(){e.assert(n,"typeof "+r+'==="boolean"',"invalid flag "+t,e.commandStr)})),r}));case qo:return s((function(n){return rt.commandParameter(n,Cs,"invalid "+t,e.commandStr),Cs[n]}),(function(e,n,r){var i=e.constants.compareFuncs;return rt.optional((function(){e.assert(n,r+" in "+i,"invalid "+t+", must be one of "+Object.keys(Cs))})),n.def(i,"[",r,"]")}));case Vo:return s((function(t){return rt.command(An(t)&&2===t.length&&"number"===typeof t[0]&&"number"===typeof t[1]&&t[0]<=t[1],"depth range is 2d array",e.commandStr),t}),(function(t,e,n){rt.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===2&&typeof "+n+'[0]==="number"&&typeof '+n+'[1]==="number"&&'+n+"[0]<="+n+"[1]","depth range must be a 2d array")}));var r=e.def("+",n,"[0]"),i=e.def("+",n,"[1]");return[r,i]}));case Uo:return s((function(t){rt.commandType(t,"object","blend.func",e.commandStr);var n="srcRGB"in t?t.srcRGB:t.src,r="srcAlpha"in t?t.srcAlpha:t.src,i="dstRGB"in t?t.dstRGB:t.dst,o="dstAlpha"in t?t.dstAlpha:t.dst;return rt.commandParameter(n,Ss,a+".srcRGB",e.commandStr),rt.commandParameter(r,Ss,a+".srcAlpha",e.commandStr),rt.commandParameter(i,Ss,a+".dstRGB",e.commandStr),rt.commandParameter(o,Ss,a+".dstAlpha",e.commandStr),rt.command(-1===Es.indexOf(n+", "+i),"unallowed blending combination (srcRGB, dstRGB) = ("+n+", "+i+")",e.commandStr),[Ss[n],Ss[i],Ss[r],Ss[o]]}),(function(e,n,r){var i=e.constants.blendFuncs;function o(o,a){var s=n.def('"',o,a,'" in ',r,"?",r,".",o,a,":",r,".",o);return rt.optional((function(){e.assert(n,s+" in "+i,"invalid "+t+"."+o+a+", must be one of "+Object.keys(Ss))})),s}rt.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid blend func, must be an object")}));var a=o("src","RGB"),s=o("dst","RGB");rt.optional((function(){var t=e.constants.invalidBlendCombinations;e.assert(n,t+".indexOf("+a+'+", "+'+s+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")}));var l=n.def(i,"[",a,"]"),u=n.def(i,"[",o("src","Alpha"),"]"),c=n.def(i,"[",s,"]"),h=n.def(i,"[",o("dst","Alpha"),"]");return[l,c,u,h]}));case zo:return s((function(n){return"string"===typeof n?(rt.commandParameter(n,y,"invalid "+t,e.commandStr),[y[n],y[n]]):"object"===typeof n?(rt.commandParameter(n.rgb,y,t+".rgb",e.commandStr),rt.commandParameter(n.alpha,y,t+".alpha",e.commandStr),[y[n.rgb],y[n.alpha]]):void rt.commandRaise("invalid blend.equation",e.commandStr)}),(function(e,n,r){var i=e.constants.blendEquations,o=n.def(),a=n.def(),s=e.cond("typeof ",r,'==="string"');return rt.optional((function(){function n(t,n,r){e.assert(t,r+" in "+i,"invalid "+n+", must be one of "+Object.keys(y))}n(s.then,t,r),e.assert(s.else,r+"&&typeof "+r+'==="object"',"invalid "+t),n(s.else,t+".rgb",r+".rgb"),n(s.else,t+".alpha",r+".alpha")})),s.then(o,"=",a,"=",i,"[",r,"];"),s.else(o,"=",i,"[",r,".rgb];",a,"=",i,"[",r,".alpha];"),n(s),[o,a]}));case Bo:return s((function(t){return rt.command(An(t)&&4===t.length,"blend.color must be a 4d array",e.commandStr),Tt(4,(function(e){return+t[e]}))}),(function(t,e,n){return rt.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","blend.color must be a 4d array")})),Tt(4,(function(t){return e.def("+",n,"[",t,"]")}))}));case ra:return s((function(t){return rt.commandType(t,"number",a,e.commandStr),0|t}),(function(t,e,n){return rt.optional((function(){t.assert(e,"typeof "+n+'==="number"',"invalid stencil.mask")})),e.def(n,"|0")}));case ia:return s((function(n){rt.commandType(n,"object",a,e.commandStr);var r=n.cmp||"keep",i=n.ref||0,o="mask"in n?n.mask:-1;return rt.commandParameter(r,Cs,t+".cmp",e.commandStr),rt.commandType(i,"number",t+".ref",e.commandStr),rt.commandType(o,"number",t+".mask",e.commandStr),[Cs[r],i,o]}),(function(t,e,n){var r=t.constants.compareFuncs;rt.optional((function(){function i(){t.assert(e,Array.prototype.join.call(arguments,""),"invalid stencil.func")}i(n+"&&typeof ",n,'==="object"'),i('!("cmp" in ',n,")||(",n,".cmp in ",r,")")}));var i=e.def('"cmp" in ',n,"?",r,"[",n,".cmp]",":",ms),o=e.def(n,".ref|0"),a=e.def('"mask" in ',n,"?",n,".mask|0:-1");return[i,o,a]}));case oa:case aa:return s((function(n){rt.commandType(n,"object",a,e.commandStr);var r=n.fail||"keep",i=n.zfail||"keep",o=n.zpass||"keep";return rt.commandParameter(r,Ms,t+".fail",e.commandStr),rt.commandParameter(i,Ms,t+".zfail",e.commandStr),rt.commandParameter(o,Ms,t+".zpass",e.commandStr),[t===aa?cs:us,Ms[r],Ms[i],Ms[o]]}),(function(e,n,r){var i=e.constants.stencilOps;function o(o){return rt.optional((function(){e.assert(n,'!("'+o+'" in '+r+")||("+r+"."+o+" in "+i+")","invalid "+t+"."+o+", must be one of "+Object.keys(Ms))})),n.def('"',o,'" in ',r,"?",i,"[",r,".",o,"]:",ms)}return rt.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)})),[t===aa?cs:us,o("fail"),o("zfail"),o("zpass")]}));case Qo:return s((function(t){rt.commandType(t,"object",a,e.commandStr);var n=0|t.factor,r=0|t.units;return rt.commandType(n,"number",a+".factor",e.commandStr),rt.commandType(r,"number",a+".units",e.commandStr),[n,r]}),(function(e,n,r){rt.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)}));var i=n.def(r,".factor|0"),o=n.def(r,".units|0");return[i,o]}));case Xo:return s((function(t){var n=0;return"front"===t?n=us:"back"===t&&(n=cs),rt.command(!!n,a,e.commandStr),n}),(function(t,e,n){return rt.optional((function(){t.assert(e,n+'==="front"||'+n+'==="back"',"invalid cull.face")})),e.def(n,'==="front"?',us,":",cs)}));case Zo:return s((function(t){return rt.command("number"===typeof t&&t>=i.lineWidthDims[0]&&t<=i.lineWidthDims[1],"invalid line width, must be a positive number between "+i.lineWidthDims[0]+" and "+i.lineWidthDims[1],e.commandStr),t}),(function(t,e,n){return rt.optional((function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">="+i.lineWidthDims[0]+"&&"+n+"<="+i.lineWidthDims[1],"invalid line width")})),n}));case Jo:return s((function(t){return rt.commandParameter(t,As,a,e.commandStr),As[t]}),(function(t,e,n){return rt.optional((function(){t.assert(e,n+'==="cw"||'+n+'==="ccw"',"invalid frontFace, must be one of cw,ccw")})),e.def(n+'==="cw"?'+hs+":"+ds)}));case Wo:return s((function(t){return rt.command(An(t)&&4===t.length,"color.mask must be length 4 array",e.commandStr),t.map((function(t){return!!t}))}),(function(t,e,n){return rt.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","invalid color.mask")})),Tt(4,(function(t){return"!!"+n+"["+t+"]"}))}));case ea:return s((function(t){rt.command("object"===typeof t&&t,a,e.commandStr);var n="value"in t?t.value:1,r=!!t.invert;return rt.command("number"===typeof n&&n>=0&&n<=1,"sample.coverage.value must be a number between 0 and 1",e.commandStr),[n,r]}),(function(t,e,n){rt.optional((function(){t.assert(e,n+"&&typeof "+n+'==="object"',"invalid sample.coverage")}));var r=e.def('"value" in ',n,"?+",n,".value:1"),i=e.def("!!",n,".invert");return[r,i]}))}})),o}function B(t,e){var n=t.static,r=t.dynamic,i={};return Object.keys(n).forEach((function(t){var r,o=n[t];if("number"===typeof o||"boolean"===typeof o)r=Ls((function(){return o}));else if("function"===typeof o){var a=o._reglType;"texture2d"===a||"textureCube"===a?r=Ls((function(t){return t.link(o)})):"framebuffer"===a||"framebufferCube"===a?(rt.command(o.color.length>0,'missing color attachment for framebuffer sent to uniform "'+t+'"',e.commandStr),r=Ls((function(t){return t.link(o.color[0])}))):rt.commandRaise('invalid data for uniform "'+t+'"',e.commandStr)}else An(o)?r=Ls((function(e){var n=e.global.def("[",Tt(o.length,(function(n){return rt.command("number"===typeof o[n]||"boolean"===typeof o[n],"invalid uniform "+t,e.commandStr),o[n]})),"]");return n})):rt.commandRaise('invalid or missing data for uniform "'+t+'"',e.commandStr);r.value=o,i[t]=r})),Object.keys(r).forEach((function(t){var e=r[t];i[t]=Ns(e,(function(t,n){return t.invoke(n,e)}))})),i}function z(t,e){var r=t.static,i=t.dynamic,a={};return Object.keys(r).forEach((function(t){var i=r[t],s=n.id(t),l=new m;if(Os(i))l.state=Ao,l.buffer=o.getBuffer(o.create(i,ka,!1,!0)),l.type=0;else{var u=o.getBuffer(i);if(u)l.state=Ao,l.buffer=u,l.type=0;else if(rt.command("object"===typeof i&&i,"invalid data for attribute "+t,e.commandStr),"constant"in i){var c=i.constant;l.buffer="null",l.state=Oo,"number"===typeof c?l.x=c:(rt.command(An(c)&&c.length>0&&c.length<=4,"invalid constant for attribute "+t,e.commandStr),Mo.forEach((function(t,e){e<c.length&&(l[t]=c[e])})))}else{u=Os(i.buffer)?o.getBuffer(o.create(i.buffer,ka,!1,!0)):o.getBuffer(i.buffer),rt.command(!!u,'missing buffer for attribute "'+t+'"',e.commandStr);var h=0|i.offset;rt.command(h>=0,'invalid offset for attribute "'+t+'"',e.commandStr);var d=0|i.stride;rt.command(d>=0&&d<256,'invalid stride for attribute "'+t+'", must be integer betweeen [0, 255]',e.commandStr);var f=0|i.size;rt.command(!("size"in i)||f>0&&f<=4,'invalid size for attribute "'+t+'", must be 1,2,3,4',e.commandStr);var p=!!i.normalized,g=0;"type"in i&&(rt.commandParameter(i.type,Ge,"invalid type for attribute "+t,e.commandStr),g=Ge[i.type]);var y=0|i.divisor;"divisor"in i&&(rt.command(0===y||v,'cannot specify divisor for attribute "'+t+'", instancing not supported',e.commandStr),rt.command(y>=0,'invalid divisor for attribute "'+t+'"',e.commandStr)),rt.optional((function(){var n=e.commandStr,r=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(i).forEach((function(e){rt.command(r.indexOf(e)>=0,'unknown parameter "'+e+'" for attribute pointer "'+t+'" (valid parameters are '+r+")",n)}))})),l.buffer=u,l.state=Ao,l.size=f,l.normalized=p,l.type=g||u.dtype,l.offset=h,l.stride=d,l.divisor=y}}a[t]=Ls((function(t,e){var n=t.attribCache;if(s in n)return n[s];var r={isStream:!1};return Object.keys(l).forEach((function(t){r[t]=l[t]})),l.buffer&&(r.buffer=t.link(l.buffer),r.type=r.type||r.buffer+".dtype"),n[s]=r,r}))})),Object.keys(i).forEach((function(t){var e=i[t];function n(n,r){var i=n.invoke(r,e),o=n.shared,a=n.constants,s=o.isBufferArgs,l=o.buffer;rt.optional((function(){n.assert(r,i+"&&(typeof "+i+'==="object"||typeof '+i+'==="function")&&('+s+"("+i+")||"+l+".getBuffer("+i+")||"+l+".getBuffer("+i+".buffer)||"+s+"("+i+'.buffer)||("constant" in '+i+"&&(typeof "+i+'.constant==="number"||'+o.isArrayLike+"("+i+".constant))))",'invalid dynamic attribute "'+t+'"')}));var u={isStream:r.def(!1)},c=new m;c.state=Ao,Object.keys(c).forEach((function(t){u[t]=r.def(""+c[t])}));var h=u.buffer,d=u.type;function f(t){r(u[t],"=",i,".",t,"|0;")}return r("if(",s,"(",i,")){",u.isStream,"=true;",h,"=",l,".createStream(",ka,",",i,");",d,"=",h,".dtype;","}else{",h,"=",l,".getBuffer(",i,");","if(",h,"){",d,"=",h,".dtype;",'}else if("constant" in ',i,"){",u.state,"=",Oo,";","if(typeof "+i+'.constant === "number"){',u[Mo[0]],"=",i,".constant;",Mo.slice(1).map((function(t){return u[t]})).join("="),"=0;","}else{",Mo.map((function(t,e){return u[t]+"="+i+".constant.length>"+e+"?"+i+".constant["+e+"]:0;"})).join(""),"}}else{","if(",s,"(",i,".buffer)){",h,"=",l,".createStream(",ka,",",i,".buffer);","}else{",h,"=",l,".getBuffer(",i,".buffer);","}",d,'="type" in ',i,"?",a.glTypes,"[",i,".type]:",h,".dtype;",u.normalized,"=!!",i,".normalized;"),f("size"),f("offset"),f("stride"),f("divisor"),r("}}"),r.exit("if(",u.isStream,"){",l,".destroyStream(",h,");","}"),u}a[t]=Ns(e,n)})),a}function U(t,e){var n=t.static,r=t.dynamic;if(ba in n){var i=n[ba];return null!==i&&null===c.getVAO(i)&&(i=c.createVAO(i)),Ls((function(t){return t.link(c.getVAO(i))}))}if(ba in r){var o=r[ba];return Ns(o,(function(t,e){var n=t.invoke(e,o);return e.def(t.shared.vao+".getVAO("+n+")")}))}return null}function G(t){var e=t.static,n=t.dynamic,r={};return Object.keys(e).forEach((function(t){var n=e[t];r[t]=Ls((function(t,e){return"number"===typeof n||"boolean"===typeof n?""+n:t.link(n)}))})),Object.keys(n).forEach((function(t){var e=n[t];r[t]=Ns(e,(function(t,n){return t.invoke(n,e)}))})),r}function q(t,e,n,i,o){var a=t.static,s=t.dynamic;rt.optional((function(){var t=[ha,da,fa,pa,ga,ya,ma,va,ca,ba].concat(w);function e(e){Object.keys(e).forEach((function(e){rt.command(t.indexOf(e)>=0,'unknown parameter "'+e+'"',o.commandStr)}))}e(a),e(s)}));var l=R(t,e),u=L(t,o),h=N(t,u,o),d=F(t,o),f=j(t,o),p=D(t,o,l);function g(t){var e=h[t];e&&(f[t]=e)}g(ua),g(C(la));var m=Object.keys(f).length>0,y={framebuffer:u,draw:d,shader:p,state:f,dirty:m,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(y.profile=P(t,o),y.uniforms=B(n,o),y.drawVAO=y.scopeVAO=U(t,o),!y.drawVAO&&p.program&&!l&&r.angle_instanced_arrays){var v=!0,b=p.program.attributes.map((function(t){var n=e.static[t];return v=v&&!!n,n}));if(v&&b.length>0){var _=c.getVAO(c.createVAO(b));y.drawVAO=new Is(null,null,null,(function(t,e){return t.link(_)})),y.useVAO=!0}}return l?y.useVAO=!0:y.attributes=z(e,o),y.context=G(i,o),y}function V(t,e,n){var r=t.shared,i=r.context,o=t.scope();Object.keys(n).forEach((function(r){e.save(i,"."+r);var a=n[r],s=a.append(t,e);Array.isArray(s)?o(i,".",r,"=[",s.join(),"];"):o(i,".",r,"=",s,";")})),e(o)}function H(t,e,n,r){var i,o=t.shared,a=o.gl,s=o.framebuffer;b&&(i=e.def(o.extensions,".webgl_draw_buffers"));var l,u=t.constants,c=u.drawBuffer,h=u.backBuffer;l=n?n.append(t,e):e.def(s,".next"),r||e("if(",l,"!==",s,".cur){"),e("if(",l,"){",a,".bindFramebuffer(",xs,",",l,".framebuffer);"),b&&e(i,".drawBuffersWEBGL(",c,"[",l,".colorAttachments.length]);"),e("}else{",a,".bindFramebuffer(",xs,",null);"),b&&e(i,".drawBuffersWEBGL(",h,");"),e("}",s,".cur=",l,";"),r||e("}")}function W(t,e,n){var r=t.shared,i=r.gl,o=t.current,a=t.next,s=r.current,l=r.next,u=t.cond(s,".dirty");w.forEach((function(e){var r,c,h=C(e);if(!(h in n.state))if(h in a){r=a[h],c=o[h];var d=Tt(_[h].length,(function(t){return u.def(r,"[",t,"]")}));u(t.cond(d.map((function(t,e){return t+"!=="+c+"["+e+"]"})).join("||")).then(i,".",E[h],"(",d,");",d.map((function(t,e){return c+"["+e+"]="+t})).join(";"),";"))}else{r=u.def(l,".",h);var f=t.cond(r,"!==",s,".",h);u(f),h in S?f(t.cond(r).then(i,".enable(",S[h],");").else(i,".disable(",S[h],");"),s,".",h,"=",r,";"):f(i,".",E[h],"(",r,");",s,".",h,"=",r,";")}})),0===Object.keys(n.state).length&&u(s,".dirty=false;"),e(u)}function Y(t,e,n,r){var i=t.shared,o=t.current,a=i.current,s=i.gl;ks(Object.keys(n)).forEach((function(i){var l=n[i];if(!r||r(l)){var u=l.append(t,e);if(S[i]){var c=S[i];Ps(l)?e(s,u?".enable(":".disable(",c,");"):e(t.cond(u).then(s,".enable(",c,");").else(s,".disable(",c,");")),e(a,".",i,"=",u,";")}else if(An(u)){var h=o[i];e(s,".",E[i],"(",u,");",u.map((function(t,e){return h+"["+e+"]="+t})).join(";"),";")}else e(s,".",E[i],"(",u,");",a,".",i,"=",u,";")}}))}function X(t,e){v&&(t.instancing=e.def(t.shared.extensions,".angle_instanced_arrays"))}function J(t,e,n,r,i){var o,a,s,l=t.shared,u=t.stats,c=l.current,h=l.timer,d=n.profile;function f(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function g(t){o=e.def(),t(o,"=",f(),";"),"string"===typeof i?t(u,".count+=",i,";"):t(u,".count++;"),p&&(r?(a=e.def(),t(a,"=",h,".getNumPendingQueries();")):t(h,".beginQuery(",u,");"))}function m(t){t(u,".cpuTime+=",f(),"-",o,";"),p&&(r?t(h,".pushScopeStats(",a,",",h,".getNumPendingQueries(),",u,");"):t(h,".endQuery();"))}function y(t){var n=e.def(c,".profile");e(c,".profile=",t,";"),e.exit(c,".profile=",n,";")}if(d){if(Ps(d))return void(d.enable?(g(e),m(e.exit),y("true")):y("false"));s=d.append(t,e),y(s)}else s=e.def(c,".profile");var v=t.block();g(v),e("if(",s,"){",v,"}");var b=t.block();m(b),e.exit("if(",s,"){",b,"}")}function Z(t,e,n,r,i){var o=t.shared;function a(t){switch(t){case Wa:case Za:case ts:return 2;case Ya:case Ka:case es:return 3;case Xa:case Qa:case ns:return 4;default:return 1}}function s(n,r,i){var a=o.gl,s=e.def(n,".location"),l=e.def(o.attributes,"[",s,"]"),u=i.state,c=i.buffer,h=[i.x,i.y,i.z,i.w],d=["buffer","normalized","offset","stride"];function f(){e("if(!",l,".buffer){",a,".enableVertexAttribArray(",s,");}");var n,o=i.type;if(n=i.size?e.def(i.size,"||",r):r,e("if(",l,".type!==",o,"||",l,".size!==",n,"||",d.map((function(t){return l+"."+t+"!=="+i[t]})).join("||"),"){",a,".bindBuffer(",ka,",",c,".buffer);",a,".vertexAttribPointer(",[s,n,o,i.normalized,i.stride,i.offset],");",l,".type=",o,";",l,".size=",n,";",d.map((function(t){return l+"."+t+"="+i[t]+";"})).join(""),"}"),v){var u=i.divisor;e("if(",l,".divisor!==",u,"){",t.instancing,".vertexAttribDivisorANGLE(",[s,u],");",l,".divisor=",u,";}")}}function p(){e("if(",l,".buffer){",a,".disableVertexAttribArray(",s,");",l,".buffer=null;","}if(",Mo.map((function(t,e){return l+"."+t+"!=="+h[e]})).join("||"),"){",a,".vertexAttrib4f(",s,",",h,");",Mo.map((function(t,e){return l+"."+t+"="+h[e]+";"})).join(""),"}")}u===Ao?f():u===Oo?p():(e("if(",u,"===",Ao,"){"),f(),e("}else{"),p(),e("}"))}r.forEach((function(r){var o,l=r.name,u=n.attributes[l];if(u){if(!i(u))return;o=u.append(t,e)}else{if(!i(Rs))return;var c=t.scopeAttrib(l);rt.optional((function(){t.assert(e,c+".state","missing attribute "+l)})),o={},Object.keys(new m).forEach((function(t){o[t]=e.def(c,".",t)}))}s(t.link(r),a(r.info.type),o)}))}function K(t,e,r,i,o){for(var a,s=t.shared,l=s.gl,u=0;u<i.length;++u){var c,h=i[u],d=h.name,f=h.info.type,p=r.uniforms[d],g=t.link(h),m=g+".location";if(p){if(!o(p))continue;if(Ps(p)){var y=p.value;if(rt.command(null!==y&&"undefined"!==typeof y,'missing uniform "'+d+'"',t.commandStr),f===as||f===ss){rt.command("function"===typeof y&&(f===as&&("texture2d"===y._reglType||"framebuffer"===y._reglType)||f===ss&&("textureCube"===y._reglType||"framebufferCube"===y._reglType)),"invalid texture for uniform "+d,t.commandStr);var v=t.link(y._texture||y.color[0]._texture);e(l,".uniform1i(",m,",",v+".bind());"),e.exit(v,".unbind();")}else if(f===rs||f===is||f===os){rt.optional((function(){rt.command(An(y),"invalid matrix for uniform "+d,t.commandStr),rt.command(f===rs&&4===y.length||f===is&&9===y.length||f===os&&16===y.length,"invalid length for matrix uniform "+d,t.commandStr)}));var b=t.global.def("new Float32Array(["+Array.prototype.slice.call(y)+"])"),_=2;f===is?_=3:f===os&&(_=4),e(l,".uniformMatrix",_,"fv(",m,",false,",b,");")}else{switch(f){case Ha:rt.commandType(y,"number","uniform "+d,t.commandStr),a="1f";break;case Wa:rt.command(An(y)&&2===y.length,"uniform "+d,t.commandStr),a="2f";break;case Ya:rt.command(An(y)&&3===y.length,"uniform "+d,t.commandStr),a="3f";break;case Xa:rt.command(An(y)&&4===y.length,"uniform "+d,t.commandStr),a="4f";break;case $a:rt.commandType(y,"boolean","uniform "+d,t.commandStr),a="1i";break;case Ja:rt.commandType(y,"number","uniform "+d,t.commandStr),a="1i";break;case ts:rt.command(An(y)&&2===y.length,"uniform "+d,t.commandStr),a="2i";break;case Za:rt.command(An(y)&&2===y.length,"uniform "+d,t.commandStr),a="2i";break;case es:rt.command(An(y)&&3===y.length,"uniform "+d,t.commandStr),a="3i";break;case Ka:rt.command(An(y)&&3===y.length,"uniform "+d,t.commandStr),a="3i";break;case ns:rt.command(An(y)&&4===y.length,"uniform "+d,t.commandStr),a="4i";break;case Qa:rt.command(An(y)&&4===y.length,"uniform "+d,t.commandStr),a="4i";break}e(l,".uniform",a,"(",m,",",An(y)?Array.prototype.slice.call(y):y,");")}continue}c=p.append(t,e)}else{if(!o(Rs))continue;c=e.def(s.uniforms,"[",n.id(d),"]")}f===as?(rt(!Array.isArray(c),"must specify a scalar prop for textures"),e("if(",c,"&&",c,'._reglType==="framebuffer"){',c,"=",c,".color[0];","}")):f===ss&&(rt(!Array.isArray(c),"must specify a scalar prop for cube maps"),e("if(",c,"&&",c,'._reglType==="framebufferCube"){',c,"=",c,".color[0];","}")),rt.optional((function(){function n(n,r){t.assert(e,n,'bad data or missing for uniform "'+d+'".  '+r)}function r(t){rt(!Array.isArray(c),"must not specify an array type for uniform"),n("typeof "+c+'==="'+t+'"',"invalid type, expected "+t)}function i(e,r){Array.isArray(c)?rt(c.length===e,"must have length "+e):n(s.isArrayLike+"("+c+")&&"+c+".length==="+e,"invalid vector, should have length "+e,t.commandStr)}function o(e){rt(!Array.isArray(c),"must not specify a value type"),n("typeof "+c+'==="function"&&'+c+'._reglType==="texture'+(e===Na?"2d":"Cube")+'"',"invalid texture type",t.commandStr)}switch(f){case Ja:r("number");break;case Za:i(2,"number");break;case Ka:i(3,"number");break;case Qa:i(4,"number");break;case Ha:r("number");break;case Wa:i(2,"number");break;case Ya:i(3,"number");break;case Xa:i(4,"number");break;case $a:r("boolean");break;case ts:i(2,"boolean");break;case es:i(3,"boolean");break;case ns:i(4,"boolean");break;case rs:i(4,"number");break;case is:i(9,"number");break;case os:i(16,"number");break;case as:o(Na);break;case ss:o(Ra);break}}));var x=1;switch(f){case as:case ss:var w=e.def(c,"._texture");e(l,".uniform1i(",m,",",w,".bind());"),e.exit(w,".unbind();");continue;case Ja:case $a:a="1i";break;case Za:case ts:a="2i",x=2;break;case Ka:case es:a="3i",x=3;break;case Qa:case ns:a="4i",x=4;break;case Ha:a="1f";break;case Wa:a="2f",x=2;break;case Ya:a="3f",x=3;break;case Xa:a="4f",x=4;break;case rs:a="Matrix2fv";break;case is:a="Matrix3fv";break;case os:a="Matrix4fv";break}if(e(l,".uniform",a,"(",m,","),"M"===a.charAt(0)){var S=Math.pow(f-rs+2,2),E=t.global.def("new Float32Array(",S,")");Array.isArray(c)?e("false,(",Tt(S,(function(t){return E+"["+t+"]="+c[t]})),",",E,")"):e("false,(Array.isArray(",c,")||",c," instanceof Float32Array)?",c,":(",Tt(S,(function(t){return E+"["+t+"]="+c+"["+t+"]"})),",",E,")")}else x>1?e(Tt(x,(function(t){return Array.isArray(c)?c[t]:c+"["+t+"]"}))):(rt(!Array.isArray(c),"uniform value must not be an array"),e(c));e(");")}}function Q(t,e,n,r){var i=t.shared,o=i.gl,a=i.draw,s=r.draw;function l(){var i,l=s.elements,u=e;return l?((l.contextDep&&r.contextDynamic||l.propDep)&&(u=n),i=l.append(t,u)):i=u.def(a,".",pa),i&&u("if("+i+")"+o+".bindBuffer("+Ia+","+i+".buffer.buffer);"),i}function u(){var i,o=s.count,l=e;return o?((o.contextDep&&r.contextDynamic||o.propDep)&&(l=n),i=o.append(t,l),rt.optional((function(){o.MISSING&&t.assert(e,"false","missing vertex count"),o.DYNAMIC&&t.assert(l,i+">=0","missing vertex count")}))):(i=l.def(a,".",ma),rt.optional((function(){t.assert(l,i+">=0","missing vertex count")}))),i}var c=l();function h(i){var o=s[i];return o?o.contextDep&&r.contextDynamic||o.propDep?o.append(t,n):o.append(t,e):e.def(a,".",i)}var d,f,p=h(ga),g=h(ya),m=u();if("number"===typeof m){if(0===m)return}else n("if(",m,"){"),n.exit("}");v&&(d=h(va),f=t.instancing);var y=c+".type",b=s.elements&&Ps(s.elements);function _(){function t(){n(f,".drawElementsInstancedANGLE(",[p,m,y,g+"<<(("+y+"-"+To+")>>1)",d],");")}function e(){n(f,".drawArraysInstancedANGLE(",[p,g,m,d],");")}c?b?t():(n("if(",c,"){"),t(),n("}else{"),e(),n("}")):e()}function x(){function t(){n(o+".drawElements("+[p,m,y,g+"<<(("+y+"-"+To+")>>1)"]+");")}function e(){n(o+".drawArrays("+[p,g,m]+");")}c?b?t():(n("if(",c,"){"),t(),n("}else{"),e(),n("}")):e()}v&&("number"!==typeof d||d>=0)?"string"===typeof d?(n("if(",d,">0){"),_(),n("}else if(",d,"<0){"),x(),n("}")):_():x()}function $(t,e,n,r,i){var o=I(),a=o.proc("body",i);return rt.optional((function(){o.commandStr=e.commandStr,o.command=o.link(e.commandStr)})),v&&(o.instancing=a.def(o.shared.extensions,".angle_instanced_arrays")),t(o,a,n,r),o.compile().body}function tt(t,e,n,r){X(t,e),n.useVAO?n.drawVAO?e(t.shared.vao,".setVAO(",n.drawVAO.append(t,e),");"):e(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(e(t.shared.vao,".setVAO(null);"),Z(t,e,n,r.attributes,(function(){return!0}))),K(t,e,n,r.uniforms,(function(){return!0})),Q(t,e,e,n)}function et(t,e){var n=t.proc("draw",1);X(t,n),V(t,n,e.context),H(t,n,e.framebuffer),W(t,n,e),Y(t,n,e.state),J(t,n,e,!1,!0);var r=e.shader.progVar.append(t,n);if(n(t.shared.gl,".useProgram(",r,".program);"),e.shader.program)tt(t,n,e,e.shader.program);else{n(t.shared.vao,".setVAO(null);");var i=t.global.def("{}"),o=n.def(r,".id"),a=n.def(i,"[",o,"]");n(t.cond(a).then(a,".call(this,a0);").else(a,"=",i,"[",o,"]=",t.link((function(n){return $(tt,t,e,n,1)})),"(",r,");",a,".call(this,a0);"))}Object.keys(e.state).length>0&&n(t.shared.current,".dirty=true;")}function nt(t,e,n,r){function i(){return!0}t.batchId="a1",X(t,e),Z(t,e,n,r.attributes,i),K(t,e,n,r.uniforms,i),Q(t,e,e,n)}function it(t,e,n,r){X(t,e);var i=n.contextDep,o=e.def(),a="a0",s="a1",l=e.def();t.shared.props=l,t.batchId=o;var u=t.scope(),c=t.scope();function h(t){return t.contextDep&&i||t.propDep}function d(t){return!h(t)}if(e(u.entry,"for(",o,"=0;",o,"<",s,";++",o,"){",l,"=",a,"[",o,"];",c,"}",u.exit),n.needsContext&&V(t,c,n.context),n.needsFramebuffer&&H(t,c,n.framebuffer),Y(t,c,n.state,h),n.profile&&h(n.profile)&&J(t,c,n,!1,!0),r)n.useVAO?n.drawVAO?h(n.drawVAO)?c(t.shared.vao,".setVAO(",n.drawVAO.append(t,c),");"):u(t.shared.vao,".setVAO(",n.drawVAO.append(t,u),");"):u(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(u(t.shared.vao,".setVAO(null);"),Z(t,u,n,r.attributes,d),Z(t,c,n,r.attributes,h)),K(t,u,n,r.uniforms,d),K(t,c,n,r.uniforms,h),Q(t,u,c,n);else{var f=t.global.def("{}"),p=n.shader.progVar.append(t,c),g=c.def(p,".id"),m=c.def(f,"[",g,"]");c(t.shared.gl,".useProgram(",p,".program);","if(!",m,"){",m,"=",f,"[",g,"]=",t.link((function(e){return $(nt,t,n,e,2)})),"(",p,");}",m,".call(this,a0[",o,"],",o,");")}}function ot(t,e){var n=t.proc("batch",2);t.batchId="0",X(t,n);var r=!1,i=!0;Object.keys(e.context).forEach((function(t){r=r||e.context[t].propDep})),r||(V(t,n,e.context),i=!1);var o=e.framebuffer,a=!1;function s(t){return t.contextDep&&r||t.propDep}o?(o.propDep?r=a=!0:o.contextDep&&r&&(a=!0),a||H(t,n,o)):H(t,n,null),e.state.viewport&&e.state.viewport.propDep&&(r=!0),W(t,n,e),Y(t,n,e.state,(function(t){return!s(t)})),e.profile&&s(e.profile)||J(t,n,e,!1,"a1"),e.contextDep=r,e.needsContext=i,e.needsFramebuffer=a;var l=e.shader.progVar;if(l.contextDep&&r||l.propDep)it(t,n,e,null);else{var u=l.append(t,n);if(n(t.shared.gl,".useProgram(",u,".program);"),e.shader.program)it(t,n,e,e.shader.program);else{n(t.shared.vao,".setVAO(null);");var c=t.global.def("{}"),h=n.def(u,".id"),d=n.def(c,"[",h,"]");n(t.cond(d).then(d,".call(this,a0,a1);").else(d,"=",c,"[",h,"]=",t.link((function(n){return $(it,t,e,n,2)})),"(",u,");",d,".call(this,a0,a1);"))}}Object.keys(e.state).length>0&&n(t.shared.current,".dirty=true;")}function at(t,e){var r=t.proc("scope",3);t.batchId="a2";var i=t.shared,o=i.current;function a(n){var o=e.shader[n];o&&r.set(i.shader,"."+n,o.append(t,r))}V(t,r,e.context),e.framebuffer&&e.framebuffer.append(t,r),ks(Object.keys(e.state)).forEach((function(n){var o=e.state[n],a=o.append(t,r);An(a)?a.forEach((function(e,i){r.set(t.next[n],"["+i+"]",e)})):r.set(i.next,"."+n,a)})),J(t,r,e,!0,!0),[pa,ya,ma,va,ga].forEach((function(n){var o=e.draw[n];o&&r.set(i.draw,"."+n,""+o.append(t,r))})),Object.keys(e.uniforms).forEach((function(o){var a=e.uniforms[o].append(t,r);Array.isArray(a)&&(a="["+a.join()+"]"),r.set(i.uniforms,"["+n.id(o)+"]",a)})),Object.keys(e.attributes).forEach((function(n){var i=e.attributes[n].append(t,r),o=t.scopeAttrib(n);Object.keys(new m).forEach((function(t){r.set(o,"."+t,i[t])}))})),e.scopeVAO&&r.set(i.vao,".targetVAO",e.scopeVAO.append(t,r)),a(da),a(fa),Object.keys(e.state).length>0&&(r(o,".dirty=true;"),r.exit(o,".dirty=true;")),r("a1(",t.shared.context,",a0,",t.batchId,");")}function st(t){if("object"===typeof t&&!An(t)){for(var e=Object.keys(t),n=0;n<e.length;++n)if(gt.isDynamic(t[e[n]]))return!0;return!1}}function lt(t,e,n){var r=e.static[n];if(r&&st(r)){var i=t.global,o=Object.keys(r),a=!1,s=!1,l=!1,u=t.global.def("{}");o.forEach((function(e){var n=r[e];if(gt.isDynamic(n)){"function"===typeof n&&(n=r[e]=gt.unbox(n));var o=Ns(n,null);a=a||o.thisDep,l=l||o.propDep,s=s||o.contextDep}else{switch(i(u,".",e,"="),typeof n){case"number":i(n);break;case"string":i('"',n,'"');break;case"object":Array.isArray(n)&&i("[",n.join(),"]");break;default:i(t.link(n));break}i(";")}})),e.dynamic[n]=new gt.DynamicVariable(No,{thisDep:a,contextDep:s,propDep:l,ref:u,append:c}),delete e.static[n]}function c(t,e){o.forEach((function(n){var i=r[n];if(gt.isDynamic(i)){var o=t.invoke(e,i);e(u,".",n,"=",o,";")}}))}}function ut(t,n,r,i,o){var a=I();a.stats=a.link(o),Object.keys(n.static).forEach((function(t){lt(a,n,t)})),Oa.forEach((function(e){lt(a,t,e)}));var s=q(t,n,r,i,a);return et(a,s),at(a,s),ot(a,s),e(a.compile(),{destroy:function(){s.shader.program.destroy()}})}return{next:x,current:_,procs:function(){var t=I(),e=t.proc("poll"),n=t.proc("refresh"),o=t.block();e(o),n(o);var a,s=t.shared,l=s.gl,u=s.next,c=s.current;o(c,".dirty=false;"),H(t,e),H(t,n,null,!0),v&&(a=t.link(v)),r.oes_vertex_array_object&&n(t.link(r.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var h=0;h<i.maxAttributes;++h){var d=n.def(s.attributes,"[",h,"]"),f=t.cond(d,".buffer");f.then(l,".enableVertexAttribArray(",h,");",l,".bindBuffer(",ka,",",d,".buffer.buffer);",l,".vertexAttribPointer(",h,",",d,".size,",d,".type,",d,".normalized,",d,".stride,",d,".offset);").else(l,".disableVertexAttribArray(",h,");",l,".vertexAttrib4f(",h,",",d,".x,",d,".y,",d,".z,",d,".w);",d,".buffer=null;"),n(f),v&&n(a,".vertexAttribDivisorANGLE(",h,",",d,".divisor);")}return n(t.shared.vao,".currentVAO=null;",t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"),Object.keys(S).forEach((function(r){var i=S[r],a=o.def(u,".",r),s=t.block();s("if(",a,"){",l,".enable(",i,")}else{",l,".disable(",i,")}",c,".",r,"=",a,";"),n(s),e("if(",a,"!==",c,".",r,"){",s,"}")})),Object.keys(E).forEach((function(r){var i,a,s=E[r],h=_[r],d=t.block();if(d(l,".",s,"("),An(h)){var f=h.length;i=t.global.def(u,".",r),a=t.global.def(c,".",r),d(Tt(f,(function(t){return i+"["+t+"]"})),");",Tt(f,(function(t){return a+"["+t+"]="+i+"["+t+"];"})).join("")),e("if(",Tt(f,(function(t){return i+"["+t+"]!=="+a+"["+t+"]"})).join("||"),"){",d,"}")}else i=o.def(u,".",r),a=o.def(c,".",r),d(i,");",c,".",r,"=",i,";"),e("if(",i,"!==",a,"){",d,"}");n(d)})),t.compile()}(),compile:ut}}function Fs(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var js=34918,Bs=34919,zs=35007,Us=function(t,e){if(!e.ext_disjoint_timer_query)return null;var n=[];function r(){return n.pop()||e.ext_disjoint_timer_query.createQueryEXT()}function i(t){n.push(t)}var o=[];function a(t){var n=r();e.ext_disjoint_timer_query.beginQueryEXT(zs,n),o.push(n),f(o.length-1,o.length,t)}function s(){e.ext_disjoint_timer_query.endQueryEXT(zs)}function l(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var u=[];function c(){return u.pop()||new l}function h(t){u.push(t)}var d=[];function f(t,e,n){var r=c();r.startQueryIndex=t,r.endQueryIndex=e,r.sum=0,r.stats=n,d.push(r)}var p=[],g=[];function m(){var t,n,r=o.length;if(0!==r){g.length=Math.max(g.length,r+1),p.length=Math.max(p.length,r+1),p[0]=0,g[0]=0;var a=0;for(t=0,n=0;n<o.length;++n){var s=o[n];e.ext_disjoint_timer_query.getQueryObjectEXT(s,Bs)?(a+=e.ext_disjoint_timer_query.getQueryObjectEXT(s,js),i(s)):o[t++]=s,p[n+1]=a,g[n+1]=t}for(o.length=t,t=0,n=0;n<d.length;++n){var l=d[n],u=l.startQueryIndex,c=l.endQueryIndex;l.sum+=p[c]-p[u];var f=g[u],m=g[c];m===f?(l.stats.gpuTime+=l.sum/1e6,h(l)):(l.startQueryIndex=f,l.endQueryIndex=m,d[t++]=l)}d.length=t}}return{beginQuery:a,endQuery:s,pushScopeStats:f,update:m,getNumPendingQueries:function(){return o.length},clear:function(){n.push.apply(n,o);for(var t=0;t<n.length;t++)e.ext_disjoint_timer_query.deleteQueryEXT(n[t]);o.length=0,n.length=0},restore:function(){o.length=0,n.length=0}}},Gs=16384,qs=256,Vs=1024,Hs=34962,Ws="webglcontextlost",Ys="webglcontextrestored",Xs=1,Js=2,Zs=3;function Ks(t,e){for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}function Qs(t){var n=Ct(t);if(!n)return null;var r=n.gl,i=r.getContextAttributes(),o=r.isContextLost(),a=Mt(r,n);if(!a)return null;var s=vt(),l=Fs(),u=a.extensions,c=Us(r,u),h=yt(),d=r.drawingBufferWidth,f=r.drawingBufferHeight,p={tick:0,time:0,viewportWidth:d,viewportHeight:f,framebufferWidth:d,framebufferHeight:f,drawingBufferWidth:d,drawingBufferHeight:f,pixelRatio:n.pixelRatio},g={},m={elements:null,primitive:4,count:-1,offset:0,instances:-1},y=Se(r,u),v=nn(r,l,n,_),b=ho(r,u,y,l,v);function _(t){return b.destroyBuffer(t)}var x=Sn(r,u,v,l),w=yo(r,s,l,n),S=di(r,u,y,(function(){M.procs.poll()}),p,l,n),E=Mi(r,u,y,l,n),C=so(r,u,y,S,E,l),M=Ds(r,s,u,y,v,x,S,C,g,b,w,m,p,c,n),T=wo(r,C,M.procs.poll,p,i,u,y),A=M.next,O=r.canvas,k=[],I=[],P=[],L=[n.onDestroy],N=null;function R(){if(0===k.length)return c&&c.update(),void(N=null);N=mt.next(R),Y();for(var t=k.length-1;t>=0;--t){var e=k[t];e&&e(p,null,0)}r.flush(),c&&c.update()}function D(){!N&&k.length>0&&(N=mt.next(R))}function F(){N&&(mt.cancel(R),N=null)}function j(t){t.preventDefault(),o=!0,F(),I.forEach((function(t){t()}))}function B(t){r.getError(),o=!1,a.restore(),w.restore(),v.restore(),S.restore(),E.restore(),C.restore(),b.restore(),c&&c.restore(),M.procs.refresh(),D(),P.forEach((function(t){t()}))}function z(){k.length=0,F(),O&&(O.removeEventListener(Ws,j),O.removeEventListener(Ys,B)),w.clear(),C.clear(),E.clear(),S.clear(),x.clear(),v.clear(),b.clear(),c&&c.clear(),L.forEach((function(t){t()}))}function U(t){function n(t){var n=e({},t);function r(t){if(t in n){var e=n[t];delete n[t],Object.keys(e).forEach((function(r){n[t+"."+r]=e[r]}))}}return delete n.uniforms,delete n.attributes,delete n.context,delete n.vao,"stencil"in n&&n.stencil.op&&(n.stencil.opBack=n.stencil.opFront=n.stencil.op,delete n.stencil.op),r("blend"),r("depth"),r("cull"),r("stencil"),r("polygonOffset"),r("scissor"),r("sample"),"vao"in t&&(n.vao=t.vao),n}function r(t,e){var n={},r={};return Object.keys(t).forEach((function(i){var o=t[i];if(gt.isDynamic(o))r[i]=gt.unbox(o,i);else{if(e&&Array.isArray(o))for(var a=0;a<o.length;++a)if(gt.isDynamic(o[a]))return void(r[i]=gt.unbox(o,i));n[i]=o}})),{dynamic:r,static:n}}rt(!!t,"invalid args to regl({...})"),rt.type(t,"object","invalid args to regl({...})");var i=r(t.context||{},!0),a=r(t.uniforms||{},!0),s=r(t.attributes||{},!1),l=r(n(t),!1),u={gpuTime:0,cpuTime:0,count:0},c=M.compile(l,s,a,i,u),h=c.draw,d=c.batch,f=c.scope,p=[];function g(t){while(p.length<t)p.push(null);return p}function m(t,e){var n;if(o&&rt.raise("context lost"),"function"===typeof t)return f.call(this,null,t,0);if("function"===typeof e)if("number"===typeof t)for(n=0;n<t;++n)f.call(this,null,e,n);else{if(!Array.isArray(t))return f.call(this,t,e,0);for(n=0;n<t.length;++n)f.call(this,t[n],e,n)}else if("number"===typeof t){if(t>0)return d.call(this,g(0|t),0|t)}else{if(!Array.isArray(t))return h.call(this,t);if(t.length)return d.call(this,t,t.length)}}return e(m,{stats:u,destroy:function(){c.destroy()}})}O&&(O.addEventListener(Ws,j,!1),O.addEventListener(Ys,B,!1));var G=C.setFBO=U({framebuffer:gt.define.call(null,Xs,"framebuffer")});function q(t,e){var n=0;M.procs.poll();var i=e.color;i&&(r.clearColor(+i[0]||0,+i[1]||0,+i[2]||0,+i[3]||0),n|=Gs),"depth"in e&&(r.clearDepth(+e.depth),n|=qs),"stencil"in e&&(r.clearStencil(0|e.stencil),n|=Vs),rt(!!n,"called regl.clear with no buffer specified"),r.clear(n)}function V(t){if(rt("object"===typeof t&&t,"regl.clear() takes an object as input"),"framebuffer"in t)if(t.framebuffer&&"framebufferCube"===t.framebuffer_reglType)for(var n=0;n<6;++n)G(e({framebuffer:t.framebuffer.faces[n]},t),q);else G(t,q);else q(null,t)}function H(t){function e(){var e=Ks(k,t);function n(){var t=Ks(k,n);k[t]=k[k.length-1],k.length-=1,k.length<=0&&F()}rt(e>=0,"cannot cancel a frame twice"),k[e]=n}return rt.type(t,"function","regl.frame() callback must be a function"),k.push(t),D(),{cancel:e}}function W(){var t=A.viewport,e=A.scissor_box;t[0]=t[1]=e[0]=e[1]=0,p.viewportWidth=p.framebufferWidth=p.drawingBufferWidth=t[2]=e[2]=r.drawingBufferWidth,p.viewportHeight=p.framebufferHeight=p.drawingBufferHeight=t[3]=e[3]=r.drawingBufferHeight}function Y(){p.tick+=1,p.time=J(),W(),M.procs.poll()}function X(){S.refresh(),W(),M.procs.refresh(),c&&c.update()}function J(){return(yt()-h)/1e3}function Z(t,e){var n;switch(rt.type(e,"function","listener callback must be a function"),t){case"frame":return H(e);case"lost":n=I;break;case"restore":n=P;break;case"destroy":n=L;break;default:rt.raise("invalid event, must be one of frame,lost,restore,destroy")}return n.push(e),{cancel:function(){for(var t=0;t<n.length;++t)if(n[t]===e)return n[t]=n[n.length-1],void n.pop()}}}X();var K=e(U,{clear:V,prop:gt.define.bind(null,Xs),context:gt.define.bind(null,Js),this:gt.define.bind(null,Zs),draw:U({}),buffer:function(t){return v.create(t,Hs,!1,!1)},elements:function(t){return x.create(t,!1)},texture:S.create2D,cube:S.createCube,renderbuffer:E.create,framebuffer:C.create,framebufferCube:C.createCube,vao:b.createVAO,attributes:i,frame:H,on:Z,limits:y,hasExtension:function(t){return y.extensions.indexOf(t.toLowerCase())>=0},read:T,destroy:z,_gl:r,_refresh:X,poll:function(){Y(),c&&c.update()},now:J,stats:l});return n.onDone(null,K),K}return Qs}))},"7df9":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["format","local","master_timeout","h","help","s","v","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,...d}=t;d=i(o,a,d,u),null==c&&(c="GET");var f=s.ignore;"number"===typeof f&&(s.ignore=[f]);var p="";p="/_cat/repositories";const g={method:c,path:p,body:null,querystring:d};return s.warnings=0===u.length?null:u,e(g,s,l)}}t.exports=r},"7eb1":function(t,e,n){"use strict";var r=30,i=12;t.exports=function(t,e){var n,o,a,s,l,u,c,h,d,f,p,g,m,y,v,b,_,x,w,S,E,C,M,T,A;n=t.state,o=t.next_in,T=t.input,a=o+(t.avail_in-5),s=t.next_out,A=t.output,l=s-(e-t.avail_out),u=s+(t.avail_out-257),c=n.dmax,h=n.wsize,d=n.whave,f=n.wnext,p=n.window,g=n.hold,m=n.bits,y=n.lencode,v=n.distcode,b=(1<<n.lenbits)-1,_=(1<<n.distbits)-1;t:do{m<15&&(g+=T[o++]<<m,m+=8,g+=T[o++]<<m,m+=8),x=y[g&b];e:for(;;){if(w=x>>>24,g>>>=w,m-=w,w=x>>>16&255,0===w)A[s++]=65535&x;else{if(!(16&w)){if(0===(64&w)){x=y[(65535&x)+(g&(1<<w)-1)];continue e}if(32&w){n.mode=i;break t}t.msg="invalid literal/length code",n.mode=r;break t}S=65535&x,w&=15,w&&(m<w&&(g+=T[o++]<<m,m+=8),S+=g&(1<<w)-1,g>>>=w,m-=w),m<15&&(g+=T[o++]<<m,m+=8,g+=T[o++]<<m,m+=8),x=v[g&_];n:for(;;){if(w=x>>>24,g>>>=w,m-=w,w=x>>>16&255,!(16&w)){if(0===(64&w)){x=v[(65535&x)+(g&(1<<w)-1)];continue n}t.msg="invalid distance code",n.mode=r;break t}if(E=65535&x,w&=15,m<w&&(g+=T[o++]<<m,m+=8,m<w&&(g+=T[o++]<<m,m+=8)),E+=g&(1<<w)-1,E>c){t.msg="invalid distance too far back",n.mode=r;break t}if(g>>>=w,m-=w,w=s-l,E>w){if(w=E-w,w>d&&n.sane){t.msg="invalid distance too far back",n.mode=r;break t}if(C=0,M=p,0===f){if(C+=h-w,w<S){S-=w;do{A[s++]=p[C++]}while(--w);C=s-E,M=A}}else if(f<w){if(C+=h+f-w,w-=f,w<S){S-=w;do{A[s++]=p[C++]}while(--w);if(C=0,f<S){w=f,S-=w;do{A[s++]=p[C++]}while(--w);C=s-E,M=A}}}else if(C+=f-w,w<S){S-=w;do{A[s++]=p[C++]}while(--w);C=s-E,M=A}while(S>2)A[s++]=M[C++],A[s++]=M[C++],A[s++]=M[C++],S-=3;S&&(A[s++]=M[C++],S>1&&(A[s++]=M[C++]))}else{C=s-E;do{A[s++]=A[C++],A[s++]=A[C++],A[s++]=A[C++],S-=3}while(S>2);S&&(A[s++]=A[C++],S>1&&(A[s++]=A[C++]))}break}}break}}while(o<a&&s<u);S=m>>3,o-=S,m-=S<<3,g&=(1<<m)-1,t.next_in=o,t.next_out=s,t.avail_in=o<a?a-o+5:5-(o-a),t.avail_out=s<u?u-s+257:257-(s-u),n.hold=g,n.bits=m}},"7ec2":function(t,e,n){n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("b636"),n("944a"),n("0c47"),n("23dc"),n("3410"),n("d9e2"),n("14d9"),n("159b"),n("b0c0"),n("131a"),n("1f68"),n("fb6a");var r=n("7037")["default"];function i(){"use strict";
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t.exports=i=function(){return e},t.exports.__esModule=!0,t.exports["default"]=t.exports;var e={},n=Object.prototype,o=n.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},s="function"==typeof Symbol?Symbol:{},l=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function h(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(k){h=function(t,e,n){return t[e]=n}}function d(t,e,n,r){var i=e&&e.prototype instanceof g?e:g,o=Object.create(i.prototype),s=new A(r||[]);return a(o,"_invoke",{value:E(t,n,s)}),o}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=d;var p={};function g(){}function m(){}function y(){}var v={};h(v,l,(function(){return this}));var b=Object.getPrototypeOf,_=b&&b(b(O([])));_&&_!==n&&o.call(_,l)&&(v=_);var x=y.prototype=g.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,a,s,l){var u=f(t[i],t,a);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==r(h)&&o.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,s,l)}),(function(t){n("throw",t,s,l)})):e.resolve(h).then((function(t){c.value=t,s(c)}),(function(t){return n("throw",t,s,l)}))}l(u.arg)}var i;a(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}})}function E(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return{value:void 0,done:!0}}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=C(a,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=f(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function C(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator["return"]&&(e.method="return",e.arg=void 0,C(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=f(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,p;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function O(t){if(t||""===t){var e=t[l];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(o.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}throw new TypeError(r(t)+" is not iterable")}return m.prototype=y,a(x,"constructor",{value:y,configurable:!0}),a(y,"constructor",{value:m,configurable:!0}),m.displayName=h(y,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,h(t,c,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},w(S.prototype),h(S.prototype,u,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(d(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(x),h(x,c,"Generator"),h(x,l,(function(){return this})),h(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),l=o.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:O(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}t.exports=i,t.exports.__esModule=!0,t.exports["default"]=t.exports},"7ef3":function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n("1231"));function o(t,e){if(!t.nodes||0===t.nodes.length)return t;var n=e.width,r=e.height,o=e.nodeMinGap,a=1e4,s=1e4;t.nodes.forEach((function(t){var e=t.size[0]||50,n=t.size[1]||50;a=Math.min(e,a),s=Math.min(n,s)}));var l=new i.default;l.init(n,r,{CELL_H:s,CELL_W:a}),t.nodes.forEach((function(t){var e=l.occupyNearest(t);e&&(e.node={id:t.id,size:t.size},t.x=e.x,t.y=e.y,t.dx=e.dx,t.dy=e.dy)}));for(var u=0;u<t.nodes.length;u++){var c=t.nodes[u],h=l.findGridByNodeId(c.id);if(!h)throw new Error("can not find node cell");var d=h.column,f=h.row;if(c.size[0]+o>a){for(var p=Math.ceil((c.size[0]+o)/a)-1,g=p,m=0;m<p;m++){var y=l.additionColumn.indexOf(d+m+1)>-1;if(!y||l.cells[d+m+1][f].node)break;g--}l.insertColumn(d,g)}if(c.size[1]+o>s){for(p=Math.ceil((c.size[1]+o)/s)-1,g=p,m=0;m<p;m++){y=l.additionRow.indexOf(f+m+1)>-1;if(!y||l.cells[d][f+m+1].node)break;g--}l.insertRow(f,g)}}for(u=0;u<l.columnNum;u++){var v=function(e){var n=l.cells[u][e];if(n.node){var r=t.nodes.find((function(t){var e;return t.id===(null===(e=null===n||void 0===n?void 0:n.node)||void 0===e?void 0:e.id)}));r&&(r.x=n.x+r.size[0]/2,r.y=n.y+r.size[1]/2)}};for(m=0;m<l.rowNum;m++)v(m)}}e.default=o},"7f3a":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["format","bytes","local","master_timeout","h","help","s","v","fields","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,fields:d,...f}=t;f=i(o,a,f,u),null==c&&(c="GET");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g=null!=d?"/_cat/fielddata/"+encodeURIComponent(d):"/_cat/fielddata";const m={method:c,path:g,body:null,querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},"7fa2":function(t,e,n){"use strict";var r="*",i=function(){function t(){this._events={}}return t.prototype.on=function(t,e,n){return this._events[t]||(this._events[t]=[]),this._events[t].push({callback:e,once:!!n}),this},t.prototype.once=function(t,e){return this.on(t,e,!0)},t.prototype.emit=function(t){for(var e=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=this._events[t]||[],a=this._events[r]||[],s=function(r){for(var i=r.length,o=0;o<i;o++)if(r[o]){var a=r[o],s=a.callback,l=a.once;l&&(r.splice(o,1),0===r.length&&delete e._events[t],i--,o--),s.apply(e,n)}};s(o),s(a)},t.prototype.off=function(t,e){if(t)if(e){for(var n=this._events[t]||[],r=n.length,i=0;i<r;i++)n[i].callback===e&&(n.splice(i,1),r--,i--);0===n.length&&delete this._events[t]}else delete this._events[t];else this._events={};return this},t.prototype.getEvents=function(){return this._events},t}();e["a"]=i},"80ef":function(t,e,n){"use strict";n.r(e);var r=n("cfa1");n.d(e,"quadtree",(function(){return r["a"]}))},8100:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["ignore_unavailable","allow_no_indices","expand_wildcards","min_score","preference","routing","q","analyzer","analyze_wildcard","default_operator","df","lenient","terminate_after","pretty","human","error_trace","source","filter_path"],a={ignoreUnavailable:"ignore_unavailable",allowNoIndices:"allow_no_indices",expandWildcards:"expand_wildcards",minScore:"min_score",analyzeWildcard:"analyze_wildcard",defaultOperator:"default_operator",terminateAfter:"terminate_after",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t["type"]&&null==t["index"]){const t=new n("Missing required parameter of the url: index");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,type:f,...p}=t;p=i(o,a,p,u),null==c&&(c=null==h?"GET":"POST");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m=null!=d&&null!=f?"/"+encodeURIComponent(d)+"/"+encodeURIComponent(f)+"/_count":null!=d?"/"+encodeURIComponent(d)+"/_count":"/_count";const y={method:c,path:m,body:h||"",querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},"82cc":function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.MDSLayout=void 0;var i=n("b4ae"),o=n("f271"),a=n("5bc9"),s=function(t){function e(e){var n=t.call(this)||this;return n.center=[0,0],n.linkDistance=50,n.nodes=[],n.edges=[],n.onLayoutEnd=function(){},n.updateCfg(e),n}return r(e,t),e.prototype.getDefaultCfg=function(){return{center:[0,0],linkDistance:50}},e.prototype.execute=function(){var t=this,e=t.nodes,n=t.edges,r=void 0===n?[]:n,i=t.center;if(e&&0!==e.length){if(1===e.length)return e[0].x=i[0],e[0].y=i[1],void(t.onLayoutEnd&&t.onLayoutEnd());var a=t.linkDistance,s=(0,o.getAdjMatrix)({nodes:e,edges:r},!1),l=(0,o.floydWarshall)(s);t.handleInfinity(l);var u=(0,o.scaleMatrix)(l,a);t.scaledDistances=u;var c=t.runMDS();return t.positions=c,c.forEach((function(t,n){e[n].x=t[0]+i[0],e[n].y=t[1]+i[1]})),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:r}}t.onLayoutEnd&&t.onLayoutEnd()},e.prototype.runMDS=function(){var t=this,e=2,n=t.scaledDistances,r=i.Matrix.mul(i.Matrix.pow(n,2),-.5),o=r.mean("row"),a=r.mean("column"),s=r.mean();r.add(s).subRowVector(o).subColumnVector(a);var l=new i.SingularValueDecomposition(r),u=i.Matrix.sqrt(l.diagonalMatrix).diagonal();return l.leftSingularVectors.toJSON().map((function(t){return i.Matrix.mul([t],[u]).toJSON()[0].splice(0,e)}))},e.prototype.handleInfinity=function(t){var e=-999999;t.forEach((function(t){t.forEach((function(t){t!==1/0&&e<t&&(e=t)}))})),t.forEach((function(n,r){n.forEach((function(n,i){n===1/0&&(t[r][i]=e)}))}))},e.prototype.getType=function(){return"mds"},e}(a.Base);e.MDSLayout=s},"83ad":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(){function t(t){this.count=t.length,this.parent={};for(var e=0,n=t;e<n.length;e++){var r=n[e];this.parent[r]=r}}return t.prototype.find=function(t){while(this.parent[t]!==t)t=this.parent[t];return t},t.prototype.union=function(t,e){var n=this.find(t),r=this.find(e);n!==r&&(n<r?(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]):(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]))},t.prototype.connected=function(t,e){return this.find(t)===this.find(e)},t}(),i=r;e.default=i},"83ee":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["timeout","master_timeout","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["body"]){const t=new n("Missing required parameter: body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,...d}=t;d=i(o,a,d,u),null==c&&(c="POST");var f=s.ignore;"number"===typeof f&&(s.ignore=[f]);var p="";p="/_aliases";const g={method:c,path:p,body:h||"",querystring:d};return s.warnings=0===u.length?null:u,e(g,s,l)}}t.exports=r},"84cd":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["fields","level","ignore_unavailable","allow_no_indices","expand_wildcards","pretty","human","error_trace","source","filter_path"],a={ignoreUnavailable:"ignore_unavailable",allowNoIndices:"allow_no_indices",expandWildcards:"expand_wildcards",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,...f}=t;f=i(o,a,f,u),null==c&&(c=null==h?"GET":"POST");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g=null!=d?"/"+encodeURIComponent(d)+"/_field_stats":"/_field_stats";const m={method:c,path:g,body:h||"",querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},"85df":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["format","local","master_timeout","h","help","s","v","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,...d}=t;d=i(o,a,d,u),null==c&&(c="GET");var f=s.ignore;"number"===typeof f&&(s.ignore=[f]);var p="";p="/_cat/plugins";const g={method:c,path:p,body:null,querystring:d};return s.warnings=0===u.length?null:u,e(g,s,l)}}t.exports=r},"862e":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=a,e.detectStrongConnectComponents=e.detectConnectedComponents=void 0;var r=n("dcfe"),i=function(t){for(var e=t.nodes,n=void 0===e?[]:e,i=t.edges,o=void 0===i?[]:i,a=[],s={},l=[],u=function t(e){l.push(e),s[e.id]=!0;for(var i=(0,r.getNeighbors)(e.id,o),a=function(e){var r=i[e];if(!s[r]){var o=n.filter((function(t){return t.id===r}));o.length>0&&t(o[0])}},u=0;u<i.length;++u)a(u)},c=0;c<n.length;c++){var h=n[c];if(!s[h.id]){u(h);var d=[];while(l.length>0)d.push(l.pop());a.push(d)}}return a};e.detectConnectedComponents=i;var o=function(t){for(var e=t.nodes,n=void 0===e?[]:e,i=t.edges,o=void 0===i?[]:i,a=[],s={},l={},u={},c=[],h=0,d=function t(e){l[e.id]=h,u[e.id]=h,h+=1,a.push(e),s[e.id]=!0;for(var i=(0,r.getNeighbors)(e.id,o,"target").filter((function(t){return n.map((function(t){return t.id})).indexOf(t)>-1})),d=function(r){var o=i[r];if(l[o]||0===l[o])s[o]&&(u[e.id]=Math.min(u[e.id],l[o]));else{var a=n.filter((function(t){return t.id===o}));a.length>0&&t(a[0]),u[e.id]=Math.min(u[e.id],u[o])}},f=0;f<i.length;f++)d(f);if(u[e.id]===l[e.id]){var p=[];while(a.length>0){var g=a.pop();if(s[g.id]=!1,p.push(g),g===e)break}p.length>0&&c.push(p)}},f=0,p=n;f<p.length;f++){var g=p[f];l[g.id]||0===l[g.id]||d(g)}return c};function a(t,e){return e?o(t):i(t)}e.detectStrongConnectComponents=o},"869c":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.secondReg=e.dateReg=void 0;var r=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/;e.secondReg=r;var i=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/;e.dateReg=i},"86bc":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["help","s","pretty","human","error_trace","source","filter_path"],a={errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,...d}=t;d=i(o,a,d,u),null==c&&(c="GET");var f=s.ignore;"number"===typeof f&&(s.ignore=[f]);var p="";p="/_cat";const g={method:c,path:p,body:null,querystring:d};return s.warnings=0===u.length?null:u,e(g,s,l)}}t.exports=r},"86e5":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["timeout","dry_run","master_timeout","wait_for_active_shards","pretty","human","error_trace","source","filter_path"],a={dryRun:"dry_run",masterTimeout:"master_timeout",waitForActiveShards:"wait_for_active_shards",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["alias"]){const t=new n("Missing required parameter: alias");return r(t,l)}if((null!=t["new_index"]||null!=t["newIndex"])&&null==t["alias"]){const t=new n("Missing required parameter of the url: alias");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,alias:d,newIndex:f,new_index:p,...g}=t;g=i(o,a,g,u),null==c&&(c="POST");var m=s.ignore;"number"===typeof m&&(s.ignore=[m]);var y="";y=null!=d&&null!=(p||f)?"/"+encodeURIComponent(d)+"/_rollover/"+encodeURIComponent(p||f):"/"+encodeURIComponent(d)+"/_rollover";const v={method:c,path:y,body:h||"",querystring:g};return s.warnings=0===u.length?null:u,e(v,s,l)}}t.exports=r},8707:function(t,e,n){var r=n("b639"),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function a(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=a),o(i,a),a.from=function(t,e,n){if("number"===typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},a.alloc=function(t,e,n){if("number"!==typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"===typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},a.allocUnsafe=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return i(t)},a.allocUnsafeSlow=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},"871d":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,null!=t&&(this.quad=t)}return t.prototype.insert=function(e){null!=this.body?this._isExternal()?(this.quad&&(this.NW=new t(this.quad.NW()),this.NE=new t(this.quad.NE()),this.SW=new t(this.quad.SW()),this.SE=new t(this.quad.SE())),this._putBody(this.body),this._putBody(e),this.body=this.body.add(e)):(this.body=this.body.add(e),this._putBody(e)):this.body=e},t.prototype._putBody=function(t){this.quad&&(t.in(this.quad.NW())&&this.NW?this.NW.insert(t):t.in(this.quad.NE())&&this.NE?this.NE.insert(t):t.in(this.quad.SW())&&this.SW?this.SW.insert(t):t.in(this.quad.SE())&&this.SE&&this.SE.insert(t))},t.prototype._isExternal=function(){return null==this.NW&&null==this.NE&&null==this.SW&&null==this.SE},t.prototype.updateForce=function(t){if(null!=this.body&&t!==this.body)if(this._isExternal())t.addForce(this.body);else{var e=this.quad?this.quad.getLength():0,n=this.body.distanceTo(t);e/n<this.theta?t.addForce(this.body):(this.NW&&this.NW.updateForce(t),this.NE&&this.NE.updateForce(t),this.SW&&this.SW.updateForce(t),this.SE&&this.SE.updateForce(t))}},t}();e.default=r},8936:function(t,e,n){"use strict";function r(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}t.exports=r},8937:function(t,e,n){"use strict";n.r(e),n.d(e,"contains",(function(){return a})),n.d(e,"includes",(function(){return a})),n.d(e,"difference",(function(){return c})),n.d(e,"find",(function(){return k})),n.d(e,"findIndex",(function(){return P})),n.d(e,"firstValue",(function(){return N})),n.d(e,"flatten",(function(){return D})),n.d(e,"flattenDeep",(function(){return j})),n.d(e,"getRange",(function(){return G})),n.d(e,"pull",(function(){return Y})),n.d(e,"pullAt",(function(){return Z})),n.d(e,"reduce",(function(){return Q})),n.d(e,"remove",(function(){return tt})),n.d(e,"sortBy",(function(){return rt})),n.d(e,"union",(function(){return at})),n.d(e,"uniq",(function(){return it})),n.d(e,"valuesOfKey",(function(){return st})),n.d(e,"head",(function(){return lt})),n.d(e,"last",(function(){return ut})),n.d(e,"startsWith",(function(){return ht})),n.d(e,"endsWith",(function(){return ft})),n.d(e,"filter",(function(){return l})),n.d(e,"every",(function(){return gt})),n.d(e,"some",(function(){return yt})),n.d(e,"group",(function(){return wt})),n.d(e,"groupBy",(function(){return _t})),n.d(e,"groupToMap",(function(){return xt})),n.d(e,"getWrapBehavior",(function(){return Et})),n.d(e,"wrapBehavior",(function(){return Mt})),n.d(e,"number2color",(function(){return Ot})),n.d(e,"parseRadius",(function(){return It})),n.d(e,"clamp",(function(){return Lt})),n.d(e,"fixedBase",(function(){return Rt})),n.d(e,"isDecimal",(function(){return Bt})),n.d(e,"isEven",(function(){return Ut})),n.d(e,"isInteger",(function(){return qt})),n.d(e,"isNegative",(function(){return Ht})),n.d(e,"isNumberEqual",(function(){return Yt})),n.d(e,"isOdd",(function(){return Jt})),n.d(e,"isPositive",(function(){return Kt})),n.d(e,"max",(function(){return B})),n.d(e,"maxBy",(function(){return Qt})),n.d(e,"min",(function(){return z})),n.d(e,"minBy",(function(){return $t})),n.d(e,"mod",(function(){return ee})),n.d(e,"toDegree",(function(){return ie})),n.d(e,"toInteger",(function(){return oe})),n.d(e,"toRadian",(function(){return le})),n.d(e,"forIn",(function(){return ue})),n.d(e,"has",(function(){return ce})),n.d(e,"hasKey",(function(){return he})),n.d(e,"hasValue",(function(){return pe})),n.d(e,"keys",(function(){return w})),n.d(e,"isMatch",(function(){return E})),n.d(e,"values",(function(){return fe})),n.d(e,"lowerCase",(function(){return ye})),n.d(e,"lowerFirst",(function(){return be})),n.d(e,"substitute",(function(){return xe})),n.d(e,"upperCase",(function(){return Se})),n.d(e,"upperFirst",(function(){return Ce})),n.d(e,"getType",(function(){return Ae})),n.d(e,"isArguments",(function(){return ke})),n.d(e,"isArray",(function(){return y})),n.d(e,"isArrayLike",(function(){return i})),n.d(e,"isBoolean",(function(){return Pe})),n.d(e,"isDate",(function(){return Ne})),n.d(e,"isError",(function(){return De})),n.d(e,"isFunction",(function(){return p})),n.d(e,"isFinite",(function(){return Fe})),n.d(e,"isNil",(function(){return m})),n.d(e,"isNull",(function(){return Be})),n.d(e,"isNumber",(function(){return Ft})),n.d(e,"isObject",(function(){return v})),n.d(e,"isObjectLike",(function(){return M})),n.d(e,"isPlainObject",(function(){return A})),n.d(e,"isPrototype",(function(){return Ge})),n.d(e,"isRegExp",(function(){return Ve})),n.d(e,"isString",(function(){return et})),n.d(e,"isType",(function(){return f})),n.d(e,"isUndefined",(function(){return We})),n.d(e,"isElement",(function(){return Xe})),n.d(e,"requestAnimationFrame",(function(){return Je})),n.d(e,"clearAnimationFrame",(function(){return Ze})),n.d(e,"augment",(function(){return tn})),n.d(e,"clone",(function(){return nn})),n.d(e,"debounce",(function(){return on})),n.d(e,"memoize",(function(){return an})),n.d(e,"deepMix",(function(){return cn})),n.d(e,"each",(function(){return _})),n.d(e,"extend",(function(){return dn})),n.d(e,"indexOf",(function(){return pn})),n.d(e,"isEmpty",(function(){return yn})),n.d(e,"isEqual",(function(){return bn})),n.d(e,"isEqualWith",(function(){return _n})),n.d(e,"map",(function(){return wn})),n.d(e,"mapValues",(function(){return En})),n.d(e,"mix",(function(){return Qe})),n.d(e,"assign",(function(){return Qe})),n.d(e,"get",(function(){return Cn})),n.d(e,"set",(function(){return Mn})),n.d(e,"pick",(function(){return An})),n.d(e,"omit",(function(){return On})),n.d(e,"throttle",(function(){return kn})),n.d(e,"toArray",(function(){return In})),n.d(e,"toString",(function(){return ge})),n.d(e,"uniqueId",(function(){return Ln})),n.d(e,"noop",(function(){return Nn})),n.d(e,"identity",(function(){return Rn})),n.d(e,"size",(function(){return Dn})),n.d(e,"measureTextWidth",(function(){return Bn})),n.d(e,"getEllipsisText",(function(){return zn})),n.d(e,"Cache",(function(){return Gn}));var r=function(t){return null!==t&&"function"!==typeof t&&isFinite(t.length)},i=r,o=function(t,e){return!!i(t)&&t.indexOf(e)>-1},a=o,s=function(t,e){if(!i(t))return t;for(var n=[],r=0;r<t.length;r++){var o=t[r];e(o,r)&&n.push(o)}return n},l=s,u=function(t,e){return void 0===e&&(e=[]),l(t,(function(t){return!a(e,t)}))},c=u,h={}.toString,d=function(t,e){return h.call(t)==="[object "+e+"]"},f=d,p=function(t){return f(t,"Function")},g=function(t){return null===t||void 0===t},m=g,y=function(t){return Array.isArray?Array.isArray(t):f(t,"Array")},v=function(t){var e=typeof t;return null!==t&&"object"===e||"function"===e};function b(t,e){var n;if(t)if(y(t)){for(var r=0,i=t.length;r<i;r++)if(n=e(t[r],r),!1===n)break}else if(v(t))for(var o in t)if(t.hasOwnProperty(o)&&(n=e(t[o],o),!1===n))break}var _=b,x=Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];return _(t,(function(n,r){p(t)&&"prototype"===r||e.push(r)})),e},w=x;function S(t,e){var n=w(e),r=n.length;if(m(t))return!r;for(var i=0;i<r;i+=1){var o=n[i];if(e[o]!==t[o]||!(o in t))return!1}return!0}var E=S,C=function(t){return"object"===typeof t&&null!==t},M=C,T=function(t){if(!M(t)||!f(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;var e=t;while(null!==Object.getPrototypeOf(e))e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},A=T;function O(t,e){if(!y(t))return null;var n;if(p(e)&&(n=e),A(e)&&(n=function(t){return E(t,e)}),n)for(var r=0;r<t.length;r+=1)if(n(t[r]))return t[r];return null}var k=O;function I(t,e,n){void 0===n&&(n=0);for(var r=n;r<t.length;r++)if(e(t[r],r))return r;return-1}var P=I,L=function(t,e){for(var n=null,r=0;r<t.length;r++){var i=t[r],o=i[e];if(!m(o)){n=y(o)?o[0]:o;break}}return n},N=L,R=function(t){if(!y(t))return[];for(var e=[],n=0;n<t.length;n++)e=e.concat(t[n]);return e},D=R,F=function(t,e){if(void 0===e&&(e=[]),y(t))for(var n=0;n<t.length;n+=1)F(t[n],e);else e.push(t);return e},j=F,B=function(t){if(y(t))return t.reduce((function(t,e){return Math.max(t,e)}),t[0])},z=function(t){if(y(t))return t.reduce((function(t,e){return Math.min(t,e)}),t[0])},U=function(t){var e=t.filter((function(t){return!isNaN(t)}));if(!e.length)return{min:0,max:0};if(y(t[0])){for(var n=[],r=0;r<t.length;r++)n=n.concat(t[r]);e=n}var i=B(e),o=z(e);return{min:o,max:i}},G=U,q=Array.prototype,V=q.splice,H=q.indexOf,W=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r++){var i=e[r],o=-1;while((o=H.call(t,i))>-1)V.call(t,o,1)}return t},Y=W,X=Array.prototype.splice,J=function(t,e){if(!i(t))return[];var n=t?e.length:0,r=n-1;while(n--){var o=void 0,a=e[n];n!==r&&a===o||(o=a,X.call(t,a,1))}return t},Z=J,K=function(t,e,n){if(!y(t)&&!A(t))return t;var r=n;return _(t,(function(t,n){r=e(r,t,n)})),r},Q=K,$=function(t,e){var n=[];if(!i(t))return n;var r=-1,o=[],a=t.length;while(++r<a){var s=t[r];e(s,r,t)&&(n.push(s),o.push(r))}return Z(t,o),n},tt=$,et=function(t){return f(t,"String")};function nt(t,e){var n;if(p(e))n=function(t,n){return e(t)-e(n)};else{var r=[];et(e)?r.push(e):y(e)&&(r=e),n=function(t,e){for(var n=0;n<r.length;n+=1){var i=r[n];if(t[i]>e[i])return 1;if(t[i]<e[i])return-1}return 0}}return t.sort(n),t}var rt=nt;function it(t,e){void 0===e&&(e=new Map);var n=[];if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++){var o=t[r];e.has(o)||(n.push(o),e.set(o,!0))}return n}var ot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return it([].concat.apply([],t))},at=ot,st=function(t,e){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],a=o[e];if(!m(a)){y(a)||(a=[a]);for(var s=0;s<a.length;s++){var l=a[s];r[l]||(n.push(l),r[l]=!0)}}}return n};function lt(t){if(i(t))return t[0]}function ut(t){if(i(t)){var e=t;return e[e.length-1]}}function ct(t,e){return!(!y(t)&&!et(t))&&t[0]===e}var ht=ct;function dt(t,e){return!(!y(t)&&!et(t))&&t[t.length-1]===e}var ft=dt,pt=function(t,e){for(var n=0;n<t.length;n++)if(!e(t[n],n))return!1;return!0},gt=pt,mt=function(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n))return!0;return!1},yt=mt,vt=Object.prototype.hasOwnProperty;function bt(t,e){if(!e||!y(t))return{};for(var n,r={},i=p(e)?e:function(t){return t[e]},o=0;o<t.length;o++){var a=t[o];n=i(a),vt.call(r,n)?r[n].push(a):r[n]=[a]}return r}var _t=bt;function xt(t,e){if(!e)return{0:t};if(!p(e)){var n=y(e)?e:e.replace(/\s+/g,"").split("*");e=function(t){for(var e="_",r=0,i=n.length;r<i;r++)e+=t[n[r]]&&t[n[r]].toString();return e}}return _t(t,e)}var wt=function(t,e){if(!e)return[t];var n=xt(t,e),r=[];for(var i in n)r.push(n[i]);return r};function St(t,e){return t["_wrap_"+e]}var Et=St;function Ct(t,e){if(t["_wrap_"+e])return t["_wrap_"+e];var n=function(n){t[e](n)};return t["_wrap_"+e]=n,n}var Mt=Ct,Tt={};function At(t){var e=Tt[t];if(!e){for(var n=t.toString(16),r=n.length;r<6;r++)n="0"+n;e="#"+n,Tt[t]=e}return e}var Ot=At;function kt(t){var e=0,n=0,r=0,i=0;return y(t)?1===t.length?e=n=r=i=t[0]:2===t.length?(e=r=t[0],n=i=t[1]):3===t.length?(e=t[0],n=i=t[1],r=t[2]):(e=t[0],n=t[1],r=t[2],i=t[3]):e=n=r=i=t,{r1:e,r2:n,r3:r,r4:i}}var It=kt,Pt=function(t,e,n){return t<e?e:t>n?n:t},Lt=Pt,Nt=function(t,e){var n=e.toString(),r=n.indexOf(".");if(-1===r)return Math.round(t);var i=n.substr(r+1).length;return i>20&&(i=20),parseFloat(t.toFixed(i))},Rt=Nt,Dt=function(t){return f(t,"Number")},Ft=Dt,jt=function(t){return Ft(t)&&t%1!==0},Bt=jt,zt=function(t){return Ft(t)&&t%2===0},Ut=zt,Gt=Number.isInteger?Number.isInteger:function(t){return Ft(t)&&t%1===0},qt=Gt,Vt=function(t){return Ft(t)&&t<0},Ht=Vt,Wt=1e-5;function Yt(t,e,n){return void 0===n&&(n=Wt),Math.abs(t-e)<n}var Xt=function(t){return Ft(t)&&t%2!==0},Jt=Xt,Zt=function(t){return Ft(t)&&t>0},Kt=Zt,Qt=function(t,e){if(y(t)){for(var n,r=-1/0,i=0;i<t.length;i++){var o=t[i],a=p(e)?e(o):o[e];a>r&&(n=o,r=a)}return n}},$t=function(t,e){if(y(t)){for(var n,r=1/0,i=0;i<t.length;i++){var o=t[i],a=p(e)?e(o):o[e];a<r&&(n=o,r=a)}return n}},te=function(t,e){return(t%e+e)%e},ee=te,ne=180/Math.PI,re=function(t){return ne*t},ie=re,oe=parseInt,ae=Math.PI/180,se=function(t){return ae*t},le=se,ue=_,ce=function(t,e){return t.hasOwnProperty(e)},he=ce,de=Object.values?function(t){return Object.values(t)}:function(t){var e=[];return _(t,(function(n,r){p(t)&&"prototype"===r||e.push(n)})),e},fe=de,pe=function(t,e){return a(fe(t),e)},ge=function(t){return m(t)?"":t.toString()},me=function(t){return ge(t).toLowerCase()},ye=me,ve=function(t){var e=ge(t);return e.charAt(0).toLowerCase()+e.substring(1)},be=ve;function _e(t,e){return t&&e?t.replace(/\\?\{([^{}]+)\}/g,(function(t,n){return"\\"===t.charAt(0)?t.slice(1):void 0===e[n]?"":e[n]})):t}var xe=_e,we=function(t){return ge(t).toUpperCase()},Se=we,Ee=function(t){var e=ge(t);return e.charAt(0).toUpperCase()+e.substring(1)},Ce=Ee,Me={}.toString,Te=function(t){return Me.call(t).replace(/^\[object /,"").replace(/]$/,"")},Ae=Te,Oe=function(t){return f(t,"Arguments")},ke=Oe,Ie=function(t){return f(t,"Boolean")},Pe=Ie,Le=function(t){return f(t,"Date")},Ne=Le,Re=function(t){return f(t,"Error")},De=Re,Fe=function(t){return Ft(t)&&isFinite(t)},je=function(t){return null===t},Be=je,ze=Object.prototype,Ue=function(t){var e=t&&t.constructor,n="function"===typeof e&&e.prototype||ze;return t===n},Ge=Ue,qe=function(t){return f(t,"RegExp")},Ve=qe,He=function(t){return void 0===t},We=He,Ye=function(t){return t instanceof Element||t instanceof HTMLDocument},Xe=Ye;function Je(t){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)};return e(t)}function Ze(t){var e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;e(t)}function Ke(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&void 0!==e[n]&&(t[n]=e[n])}function Qe(t,e,n,r){return e&&Ke(t,e),n&&Ke(t,n),r&&Ke(t,r),t}var $e=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t[0],r=1;r<t.length;r++){var i=t[r];p(i)&&(i=i.prototype),Qe(n.prototype,i)}},tn=$e,en=function(t){if("object"!==typeof t||null===t)return t;var e;if(y(t)){e=[];for(var n=0,r=t.length;n<r;n++)"object"===typeof t[n]&&null!=t[n]?e[n]=en(t[n]):e[n]=t[n]}else for(var i in e={},t)"object"===typeof t[i]&&null!=t[i]?e[i]=en(t[i]):e[i]=t[i];return e},nn=en;function rn(t,e,n){var r;return function(){var i=this,o=arguments,a=function(){r=null,n||t.apply(i,o)},s=n&&!r;clearTimeout(r),r=setTimeout(a,e),s&&t.apply(i,o)}}var on=rn,an=function(t,e){if(!p(t))throw new TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=e?e.apply(this,r):r[0],a=n.cache;if(a.has(o))return a.get(o);var s=t.apply(this,r);return a.set(o,s),s};return n.cache=new Map,n},sn=5;function ln(t,e,n,r){for(var i in n=n||0,r=r||sn,e)if(e.hasOwnProperty(i)){var o=e[i];null!==o&&A(o)?(A(t[i])||(t[i]={}),n<r?ln(t[i],o,n+1,r):t[i]=e[i]):y(o)?(t[i]=[],t[i]=t[i].concat(o)):void 0!==o&&(t[i]=o)}}var un=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)ln(t,e[r]);return t},cn=un,hn=function(t,e,n,r){p(e)||(n=e,e=t,t=function(){});var i=Object.create?function(t,e){return Object.create(t,{constructor:{value:e}})}:function(t,e){function n(){}n.prototype=t;var r=new n;return r.constructor=e,r},o=i(e.prototype,t);return t.prototype=Qe(o,t.prototype),t.superclass=i(e.prototype,e),Qe(o,n),Qe(t,r),t},dn=hn,fn=function(t,e){if(!i(t))return-1;var n=Array.prototype.indexOf;if(n)return n.call(t,e);for(var r=-1,o=0;o<t.length;o++)if(t[o]===e){r=o;break}return r},pn=fn,gn=Object.prototype.hasOwnProperty;function mn(t){if(m(t))return!0;if(i(t))return!t.length;var e=Ae(t);if("Map"===e||"Set"===e)return!t.size;if(Ge(t))return!Object.keys(t).length;for(var n in t)if(gn.call(t,n))return!1;return!0}var yn=mn,vn=function(t,e){if(t===e)return!0;if(!t||!e)return!1;if(et(t)||et(e))return!1;if(i(t)||i(e)){if(t.length!==e.length)return!1;for(var n=!0,r=0;r<t.length;r++)if(n=vn(t[r],e[r]),!n)break;return n}if(M(t)||M(e)){var o=Object.keys(t),a=Object.keys(e);if(o.length!==a.length)return!1;for(n=!0,r=0;r<o.length;r++)if(n=vn(t[o[r]],e[o[r]]),!n)break;return n}return!1},bn=vn,_n=function(t,e,n){return p(n)?!!n(t,e):bn(t,e)},xn=function(t,e){if(!i(t))return t;for(var n=[],r=0;r<t.length;r++){var o=t[r];n.push(e(o,r))}return n},wn=xn,Sn=function(t){return t},En=function(t,e){void 0===e&&(e=Sn);var n={};return v(t)&&!m(t)&&Object.keys(t).forEach((function(r){n[r]=e(t[r],r)})),n},Cn=function(t,e,n){var r=0,i=et(e)?e.split("."):e;while(t&&r<i.length)t=t[i[r++]];return void 0===t||r<i.length?n:t},Mn=function(t,e,n){var r=t,i=et(e)?e.split("."):e;return i.forEach((function(t,e){e<i.length-1?(v(r[t])||(r[t]=Ft(i[e+1])?[]:{}),r=r[t]):r[t]=n})),t},Tn=Object.prototype.hasOwnProperty,An=function(t,e){if(null===t||!A(t))return{};var n={};return _(e,(function(e){Tn.call(t,e)&&(n[e]=t[e])})),n},On=function(t,e){return Q(t,(function(t,n,r){return e.includes(r)||(t[r]=n),t}),{})},kn=function(t,e,n){var r,i,o,a,s=0;n||(n={});var l=function(){s=!1===n.leading?0:Date.now(),r=null,a=t.apply(i,o),r||(i=o=null)},u=function(){var u=Date.now();s||!1!==n.leading||(s=u);var c=e-(u-s);return i=this,o=arguments,c<=0||c>e?(r&&(clearTimeout(r),r=null),s=u,a=t.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(l,c)),a};return u.cancel=function(){clearTimeout(r),s=0,r=i=o=null},u},In=function(t){return i(t)?Array.prototype.slice.call(t):[]},Pn={},Ln=function(t){return t=t||"g",Pn[t]?Pn[t]+=1:Pn[t]=1,t+Pn[t]},Nn=function(){},Rn=function(t){return t};function Dn(t){return m(t)?0:i(t)?t.length:Object.keys(t).length}var Fn,jn=n("9ab4"),Bn=an((function(t,e){void 0===e&&(e={});var n=e.fontSize,r=e.fontFamily,i=e.fontWeight,o=e.fontStyle,a=e.fontVariant;return Fn||(Fn=document.createElement("canvas").getContext("2d")),Fn.font=[o,a,i,n+"px",r].join(" "),Fn.measureText(et(t)?t:"").width}),(function(t,e){return void 0===e&&(e={}),Object(jn["__spreadArrays"])([t],fe(e)).join("")})),zn=function(t,e,n,r){void 0===r&&(r="...");var i,o,a=16,s=Bn(r,n),l=et(t)?t:ge(t),u=e,c=[];if(Bn(t,n)<=e)return t;while(1){if(i=l.substr(0,a),o=Bn(i,n),o+s>u&&o>u)break;if(c.push(i),u-=o,l=l.substr(a),!l)return c.join("")}while(1){if(i=l.substr(0,1),o=Bn(i,n),o+s>u)break;if(c.push(i),u-=o,l=l.substr(1),!l)return c.join("")}return""+c.join("")+r},Un=function(){function t(){this.map={}}return t.prototype.has=function(t){return void 0!==this.map[t]},t.prototype.get=function(t,e){var n=this.map[t];return void 0===n?e:n},t.prototype.set=function(t,e){this.map[t]=e},t.prototype.clear=function(){this.map={}},t.prototype.delete=function(t){delete this.map[t]},t.prototype.size=function(){return Object.keys(this.map).length},t}(),Gn=Un},"8a21":function(t,e,n){(function(e){var r=n("69cf").Readable,i=n("3fb5");t.exports=s,s.ctor=l,s.obj=u;var o=l();function a(t){return t=t.slice(),function(e,n){var r=null,i=t.length?t.shift():null;i instanceof Error&&(r=i,i=null),n(r,i)}}function s(t,e){("object"!==typeof t||Array.isArray(t))&&(e=t,t={});var n=new o(t);return n._from=Array.isArray(e)?a(e):e||c,n}function l(t,n){function o(e){if(!(this instanceof o))return new o(e);this._reading=!1,this._callback=a,this.destroyed=!1,r.call(this,e||t);var n=this,i=this._readableState.highWaterMark;function a(t,e){if(!n.destroyed){if(t)return n.destroy(t);if(null===e)return n.push(null);n._reading=!1,n.push(e)&&n._read(i)}}}return"function"===typeof t&&(n=t,t={}),t=h(t),i(o,r),o.prototype._from=n||c,o.prototype._read=function(t){this._reading||this.destroyed||(this._reading=!0,this._from(t,this._callback))},o.prototype.destroy=function(t){if(!this.destroyed){this.destroyed=!0;var n=this;e.nextTick((function(){t&&n.emit("error",t),n.emit("close")}))}},o}function u(t,e){return("function"===typeof t||Array.isArray(t))&&(e=t,t={}),t=h(t),t.objectMode=!0,t.highWaterMark=16,s(t,e)}function c(){}function h(t){return t=t||{},t}}).call(this,n("4362"))},"8b0c":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["ignore_unavailable","allow_no_indices","expand_wildcards","preference","routing","scroll","search_type","explain","profile","typed_keys","pretty","human","error_trace","source","filter_path"],a={ignoreUnavailable:"ignore_unavailable",allowNoIndices:"allow_no_indices",expandWildcards:"expand_wildcards",searchType:"search_type",typedKeys:"typed_keys",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t["type"]&&null==t["index"]){const t=new n("Missing required parameter of the url: index");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,type:f,...p}=t;p=i(o,a,p,u),null==c&&(c=null==h?"GET":"POST");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m=null!=d&&null!=f?"/"+encodeURIComponent(d)+"/"+encodeURIComponent(f)+"/_search/template":null!=d?"/"+encodeURIComponent(d)+"/_search/template":"/_search/template";const y={method:c,path:m,body:h||"",querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},"8b72":function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Force2Layout=void 0;var o=n("5bc9"),a=n("f271"),s=n("15b5"),l=function(t,e){var n;return n=t?(0,a.isNumber)(t)?function(e){return t}:t:function(t){return e||1},n},u=function(t){function e(e){var n=t.call(this)||this;n.maxIteration=1e3,n.workerEnabled=!1,n.edgeStrength=200,n.nodeStrength=1e3,n.coulombDisScale=.005,n.damping=.9,n.maxSpeed=500,n.minMovement=.4,n.interval=.02,n.factor=1,n.linkDistance=200,n.gravity=0,n.clusterNodeStrength=20,n.preventOverlap=!0,n.distanceThresholdMode="mean",n.tick=function(){},n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.judgingDistance=0,n.centripetalOptions={leaf:2,single:2,others:1,center:function(t){return{x:n.width/2,y:n.height/2}}};var r=e.getMass;return n.propsGetMass=r,n.updateCfg(e),n}return r(e,t),e.prototype.getCentripetalOptions=function(){var t,e=this,n=e.leafCluster,r=e.clustering,o=e.nodeClusterBy,s=e.nodes,l=e.nodeMap,u=e.clusterNodeStrength,c=function(t){return"function"===typeof u?u(t):u},h={};if(n){t=this.getSameTypeLeafMap()||{};var d=Array.from(new Set(null===s||void 0===s?void 0:s.map((function(t){return t[o]}))))||[];h={single:100,leaf:function(e,n,r){var i=t[e.id]||{},o=i.relativeLeafNodes,a=i.sameTypeLeafNodes;return(null===a||void 0===a?void 0:a.length)===(null===o||void 0===o?void 0:o.length)||1===(null===d||void 0===d?void 0:d.length)?1:c(e)},others:1,center:function(e,n,r){var i,o,s=((null===(i=e.data)||void 0===i?void 0:i.layout)||{}).degree;if(!s)return{x:100,y:100};if(1===s){var l=(t[e.id]||{}).sameTypeLeafNodes,u=void 0===l?[]:l;1===u.length?o=void 0:u.length>1&&(o=(0,a.getAvgNodePosition)(u))}else o=void 0;return{x:null===o||void 0===o?void 0:o.x,y:null===o||void 0===o?void 0:o.y}}}}if(r){t||(t=this.getSameTypeLeafMap());var f=Array.from(new Set(s.map((function(t,e){return t[o]})))).filter((function(t){return void 0!==t})),p={};f.forEach((function(t){var e=s.filter((function(e){return e[o]===t})).map((function(t){return l[t.id]}));p[t]=(0,a.getAvgNodePosition)(e)})),h={single:function(t){return c(t)},leaf:function(t){return c(t)},others:function(t){return c(t)},center:function(t,e,n){var r=p[t[o]];return{x:null===r||void 0===r?void 0:r.x,y:null===r||void 0===r?void 0:r.y}}}}this.centripetalOptions=i(i({},this.centripetalOptions),h);var g=this.centripetalOptions,m=g.leaf,y=g.single,v=g.others;m&&"function"!==typeof m&&(this.centripetalOptions.leaf=function(){return m}),y&&"function"!==typeof y&&(this.centripetalOptions.single=function(){return y}),v&&"function"!==typeof v&&(this.centripetalOptions.others=function(){return v})},e.prototype.updateCfg=function(t){t&&Object.assign(this,t)},e.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},e.prototype.execute=function(){var t=this;t.stop();var e=t.nodes,n=t.edges,r=t.defSpringLen;if(t.judgingDistance=0,e&&0!==e.length){t.width||"undefined"===typeof window||(t.width=window.innerWidth),t.height||"undefined"===typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);var o=t.center;if(1===e.length)return e[0].x=o[0],e[0].y=o[1],void t.onLayoutEnd([i({},e[0])]);t.degreesMap=(0,a.getDegreeMap)(e,n),t.propsGetMass?t.getMass=t.propsGetMass:t.getMass=function(e){var n=1;(0,a.isNumber)(e.mass)&&(n=e.mass);var r=t.degreesMap[e.id].all;return!r||r<5?n:5*r*n};var s,u=t.nodeSize;if(t.preventOverlap){var c,h=t.nodeSpacing;c=(0,a.isNumber)(h)?function(){return h}:(0,a.isFunction)(h)?h:function(){return 0},s=u?(0,a.isArray)(u)?function(t){return Math.max(u[0],u[1])+c(t)}:function(t){return u+c(t)}:function(t){return t.size?(0,a.isArray)(t.size)?Math.max(t.size[0],t.size[1])+c(t):(0,a.isObject)(t.size)?Math.max(t.size.width,t.size.height)+c(t):t.size+c(t):10+c(t)}}t.nodeSize=s,t.linkDistance=l(t.linkDistance,1),t.nodeStrength=l(t.nodeStrength,1),t.edgeStrength=l(t.edgeStrength,1);var d={},f={};e.forEach((function(e,r){(0,a.isNumber)(e.x)||(e.x=Math.random()*t.width),(0,a.isNumber)(e.y)||(e.y=Math.random()*t.height);var o=t.degreesMap[e.id];d[e.id]=i(i({},e),{data:i(i({},e.data),{size:t.nodeSize(e)||30,layout:{inDegree:o.in,outDegree:o.out,degree:o.all,tDegree:o.in,sDegree:o.out,force:{mass:t.getMass(e),nodeStrength:t.nodeStrength(e,n)}}})}),f[e.id]=r})),t.nodeMap=d,t.nodeIdxMap=f,t.edgeInfos=[],null===n||void 0===n||n.forEach((function(e){var n=d[e.source],o=d[e.target];n&&o?t.edgeInfos.push({edgeStrength:t.edgeStrength(e),linkDistance:r?r(i(i({},e),{source:n,target:o}),n,o):t.linkDistance(e,n,o)||1+(u(n)+u(n)||0)/2}):elf.edgeInfos.push({})})),this.getCentripetalOptions(),t.onLayoutEnd=t.onLayoutEnd||function(){},t.run()}else t.onLayoutEnd([])},e.prototype.run=function(){var t=this,e=t.maxIteration,n=t.nodes,r=t.edges,i=t.workerEnabled,o=t.minMovement,a=t.animate,s=t.nodeMap,l=t.height;if(t.currentMinY=0,t.currentMaxY=l,n){var u=[];if(n.forEach((function(t,e){u[2*e]=0,u[2*e+1]=0})),this.defSideCoe&&"function"===typeof this.defSideCoe){var c={};r.forEach((function(t){var e=t.source,n=t.target;c[e]=c[e]||[],c[e].push(t),c[n]=c[n]||[],c[n].push(t)})),this.relatedEdges=c}var h=e,d=!a;if(i||d){for(var f=0;(t.judgingDistance>o||f<1)&&f<h;f++)f,t.runOneStep(f,u);t.onLayoutEnd(Object.values(s))}else{if("undefined"===typeof window)return;var p=0;this.timeInterval=window.setInterval((function(){n&&(t.runOneStep(p,u),p++,(p>=h||t.judgingDistance<o)&&(t.onLayoutEnd(Object.values(s)),window.clearInterval(t.timeInterval)))}),0)}}},e.prototype.runOneStep=function(t,e){var n,r=this,i=r.nodes,o=r.edges,a=(r.nodeMap,r.monitor),s=[];if(null===i||void 0===i?void 0:i.length){r.calRepulsive(s),o&&r.calAttractive(s),r.calGravity(s),r.attractToSide(s);var l=r.interval;if(r.updateVelocity(s,e,l),r.updatePosition(e,l),null===(n=r.tick)||void 0===n||n.call(r),a){var u=this.calTotalEnergy(s);a({energy:u,nodes:i,edges:o,iterations:t})}}},e.prototype.calTotalEnergy=function(t){var e=this,n=e.nodes,r=e.nodeMap;if(!(null===n||void 0===n?void 0:n.length))return 0;var i=0;return n.forEach((function(e,n){var o=t[2*n],a=t[2*n+1],s=o*o+a*a,l=r[e.id].data.layout.force.mass,u=void 0===l?1:l;i+=u*s*.5})),i},e.prototype.calRepulsive=function(t){var e=this,n=e.nodes,r=e.nodeMap,i=e.factor,o=e.coulombDisScale;e.nodeSize;(0,s.forceNBody)(n,r,i,o*o,t)},e.prototype.calAttractive=function(t){var e=this,n=e.edges,r=e.nodeMap,i=e.nodeIdxMap,o=e.edgeInfos;e.nodeSize;n.forEach((function(e,n){var s=(0,a.getEdgeTerminal)(e,"source"),l=(0,a.getEdgeTerminal)(e,"target"),u=r[s],c=r[l];if(u&&c){var h=c.x-u.x,d=c.y-u.y;h||d||(h=.01*Math.random(),d=.01*Math.random());var f=Math.sqrt(h*h+d*d),p=h/f,g=d/f,m=o[n]||{},y=m.linkDistance,v=void 0===y?200:y,b=m.edgeStrength,_=void 0===b?200:b,x=v-f,w=x*_,S=u.data.layout.force.mass||1,E=c.data.layout.force.mass||1,C=1/S,M=1/E,T=p*w,A=g*w,O=2*i[s],k=2*i[l];t[O]-=T*C,t[O+1]-=A*C,t[k]+=T*M,t[k+1]+=A*M}}))},e.prototype.calGravity=function(t){var e,n=this,r=n.nodes,i=n.edges,o=void 0===i?[]:i,s=n.nodeMap,l=n.width,u=n.height,c=n.center,h=n.gravity,d=n.degreesMap,f=n.centripetalOptions;if(r)for(var p=r.length,g=0;g<p;g++){var m=2*g,y=s[r[g].id],v=y.data.layout.force.mass,b=void 0===v?1:v,_=0,x=0,w=h,S=d[y.id],E=S.in,C=S.out,M=S.all,T=null===(e=n.getCenter)||void 0===e?void 0:e.call(n,y,M);if(T){var A=T[0],O=T[1],k=T[2];_=y.x-A,x=y.y-O,w=k}else _=y.x-c[0],x=y.y-c[1];if(w&&(t[m]-=w*_/b,t[m+1]-=w*x/b),f){var I=f.leaf,P=f.single,L=f.others,N=f.center,R=(null===N||void 0===N?void 0:N(y,r,o,l,u))||{x:0,y:0,centerStrength:0},D=R.x,F=R.y,j=R.centerStrength;if(!(0,a.isNumber)(D)||!(0,a.isNumber)(F))continue;var B=(y.x-D)/b,z=(y.y-F)/b;if(j&&(t[m]-=j*B,t[m+1]-=j*z),0===M){var U=P(y);if(!U)continue;t[m]-=U*B,t[m+1]-=U*z;continue}if(0===E||0===C){var G=I(y,r,o);if(!G)continue;t[m]-=G*B,t[m+1]-=G*z;continue}var q=L(y);if(!q)continue;t[m]-=q*B,t[m+1]-=q*z}}},e.prototype.attractToSide=function(t){var e=this,n=e.defSideCoe,r=(e.height,e.nodes),i=e.relatedEdges,o=e.currentMinY,a=void 0===o?0:o,s=e.currentMaxY,l=void 0===s?this.height:s;n&&"function"===typeof n&&(null===r||void 0===r?void 0:r.length)&&r.forEach((function(e,r){var o=n(e,i[e.id]||[]);if(0!==o){var s=o<0?a:l,u=Math.abs(o);t[2*r+1]-=u*(e.y-s)}}))},e.prototype.updateVelocity=function(t,e,n){var r=this,i=r.nodes,o=r.damping,a=r.maxSpeed;(null===i||void 0===i?void 0:i.length)&&i.forEach((function(r,i){var s=(e[2*i]+t[2*i]*n)*o||.01,l=(e[2*i+1]+t[2*i+1]*n)*o||.01,u=Math.sqrt(s*s+l*l);if(u>a){var c=a/u;s*=c,l*=c}e[2*i]=s,e[2*i+1]=l}))},e.prototype.updatePosition=function(t,e){var n=this,r=n.nodes,i=n.distanceThresholdMode,o=n.nodeMap;if(null===r||void 0===r?void 0:r.length){var s=0;"max"===i?n.judgingDistance=-1/0:"min"===i&&(n.judgingDistance=1/0);var l=1/0,u=-1/0;r.forEach((function(r,c){var h=o[r.id];if((0,a.isNumber)(r.fx)&&(0,a.isNumber)(r.fy))return r.x=r.fx,r.y=r.fy,h.x=r.x,void(h.y=r.y);var d=t[2*c]*e,f=t[2*c+1]*e;r.x+=d,r.y+=f,h.x=r.x,h.y=r.y,r.y<l&&(l=r.y),r.y>u&&(u=r.y);var p=Math.sqrt(d*d+f*f);switch(i){case"max":n.judgingDistance<p&&(n.judgingDistance=p);break;case"min":n.judgingDistance>p&&(n.judgingDistance=p);break;default:s+=p;break}})),this.currentMinY=l,this.currentMaxY=u,i&&"mean"!==i||(n.judgingDistance=s/r.length)}else this.judgingDistance=0},e.prototype.stop=function(){this.timeInterval&&"undefined"!==typeof window&&window.clearInterval(this.timeInterval)},e.prototype.destroy=function(){var t=this;t.stop(),t.tick=null,t.nodes=null,t.edges=null,t.destroyed=!0},e.prototype.getType=function(){return"force2"},e.prototype.getSameTypeLeafMap=function(){var t=this,e=t.nodeClusterBy,n=t.nodes,r=t.edges,i=t.nodeMap,o=t.degreesMap;if(null===n||void 0===n?void 0:n.length){var s={};return n.forEach((function(t,n){var l=o[t.id].all;1===l&&(s[t.id]=(0,a.getCoreNodeAndRelativeLeafNodes)("leaf",t,r,e,o,i))})),s}},e}(o.Base);e.Force2Layout=u},"8b77":function(t,e,n){"use strict";(function(e,r){var i=n("3913");t.exports=w;var o,a=n("e3db");w.ReadableState=x;n("faa1").EventEmitter;var s=function(t,e){return t.listeners(e).length},l=n("1ad6"),u=n("8707").Buffer,c=("undefined"!==typeof e?e:"undefined"!==typeof window?window:"undefined"!==typeof self?self:{}).Uint8Array||function(){};function h(t){return u.from(t)}function d(t){return u.isBuffer(t)||t instanceof c}var f=Object.create(n("3a7c"));f.inherits=n("3fb5");var p=n(3),g=void 0;g=p&&p.debuglog?p.debuglog("stream"):function(){};var m,y=n("4365"),v=n("c69f");f.inherits(w,l);var b=["error","close","destroy","pause","resume"];function _(t,e,n){if("function"===typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?a(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}function x(t,e){o=o||n("1715"),t=t||{};var r=e instanceof o;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,a=t.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(a||0===a)?a:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new y,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(m||(m=n("aa22").StringDecoder),this.decoder=new m(t.encoding),this.encoding=t.encoding)}function w(t){if(o=o||n("1715"),!(this instanceof w))return new w(t);this._readableState=new x(t,this),this.readable=!0,t&&("function"===typeof t.read&&(this._read=t.read),"function"===typeof t.destroy&&(this._destroy=t.destroy)),l.call(this)}function S(t,e,n,r,i){var o,a=t._readableState;null===e?(a.reading=!1,k(t,a)):(i||(o=C(a,e)),o?t.emit("error",o):a.objectMode||e&&e.length>0?("string"===typeof e||a.objectMode||Object.getPrototypeOf(e)===u.prototype||(e=h(e)),r?a.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):E(t,a,e,!0):a.ended?t.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!n?(e=a.decoder.write(e),a.objectMode||0!==e.length?E(t,a,e,!1):L(t,a)):E(t,a,e,!1))):r||(a.reading=!1));return M(a)}function E(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&I(t)),L(t,e)}function C(t,e){var n;return d(e)||"string"===typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function M(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}Object.defineProperty(w.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),w.prototype.destroy=v.destroy,w.prototype._undestroy=v.undestroy,w.prototype._destroy=function(t,e){this.push(null),e(t)},w.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"===typeof t&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=u.from(t,e),e=""),n=!0),S(this,t,e,!1,n)},w.prototype.unshift=function(t){return S(this,t,null,!0,!1)},w.prototype.isPaused=function(){return!1===this._readableState.flowing},w.prototype.setEncoding=function(t){return m||(m=n("aa22").StringDecoder),this._readableState.decoder=new m(t),this._readableState.encoding=t,this};var T=8388608;function A(t){return t>=T?t=T:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function O(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=A(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function k(t,e){if(!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,I(t)}}function I(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(g("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?i.nextTick(P,t):P(t))}function P(t){g("emit readable"),t.emit("readable"),B(t)}function L(t,e){e.readingMore||(e.readingMore=!0,i.nextTick(N,t,e))}function N(t,e){var n=e.length;while(!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark){if(g("maybeReadMore read 0"),t.read(0),n===e.length)break;n=e.length}e.readingMore=!1}function R(t){return function(){var e=t._readableState;g("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&s(t,"data")&&(e.flowing=!0,B(t))}}function D(t){g("readable nexttick read 0"),t.read(0)}function F(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i.nextTick(j,t,e))}function j(t,e){e.reading||(g("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),B(t),e.flowing&&!e.reading&&t.read(0)}function B(t){var e=t._readableState;g("flow",e.flowing);while(e.flowing&&null!==t.read());}function z(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=U(t,e.buffer,e.decoder),n);var n}function U(t,e,n){var r;return t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?G(t,e):q(t,e),r}function G(t,e){var n=e.head,r=1,i=n.data;t-=i.length;while(n=n.next){var o=n.data,a=t>o.length?o.length:t;if(a===o.length?i+=o:i+=o.slice(0,t),t-=a,0===t){a===o.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(a));break}++r}return e.length-=r,i}function q(t,e){var n=u.allocUnsafe(t),r=e.head,i=1;r.data.copy(n),t-=r.data.length;while(r=r.next){var o=r.data,a=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,a),t-=a,0===t){a===o.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(a));break}++i}return e.length-=i,n}function V(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,i.nextTick(H,e,t))}function H(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function W(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}w.prototype.read=function(t){g("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return g("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?V(this):I(this),null;if(t=O(t,e),0===t&&e.ended)return 0===e.length&&V(this),null;var r,i=e.needReadable;return g("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&(i=!0,g("length less than watermark",i)),e.ended||e.reading?(i=!1,g("reading or ended",i)):i&&(g("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=O(n,e))),r=t>0?z(t,e):null,null===r?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&V(this)),null!==r&&this.emit("data",r),r},w.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},w.prototype.pipe=function(t,e){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=t;break;case 1:o.pipes=[o.pipes,t];break;default:o.pipes.push(t);break}o.pipesCount+=1,g("pipe count=%d opts=%j",o.pipesCount,e);var a=(!e||!1!==e.end)&&t!==r.stdout&&t!==r.stderr,l=a?c:x;function u(t,e){g("onunpipe"),t===n&&e&&!1===e.hasUnpiped&&(e.hasUnpiped=!0,f())}function c(){g("onend"),t.end()}o.endEmitted?i.nextTick(l):n.once("end",l),t.on("unpipe",u);var h=R(n);t.on("drain",h);var d=!1;function f(){g("cleanup"),t.removeListener("close",v),t.removeListener("finish",b),t.removeListener("drain",h),t.removeListener("error",y),t.removeListener("unpipe",u),n.removeListener("end",c),n.removeListener("end",x),n.removeListener("data",m),d=!0,!o.awaitDrain||t._writableState&&!t._writableState.needDrain||h()}var p=!1;function m(e){g("ondata"),p=!1;var r=t.write(e);!1!==r||p||((1===o.pipesCount&&o.pipes===t||o.pipesCount>1&&-1!==W(o.pipes,t))&&!d&&(g("false write response, pause",o.awaitDrain),o.awaitDrain++,p=!0),n.pause())}function y(e){g("onerror",e),x(),t.removeListener("error",y),0===s(t,"error")&&t.emit("error",e)}function v(){t.removeListener("finish",b),x()}function b(){g("onfinish"),t.removeListener("close",v),x()}function x(){g("unpipe"),n.unpipe(t)}return n.on("data",m),_(t,"error",y),t.once("close",v),t.once("finish",b),t.emit("pipe",n),o.flowing||(g("pipe resume"),n.resume()),t},w.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=W(e.pipes,t);return-1===a||(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n)),this},w.prototype.on=function(t,e){var n=l.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&I(this):i.nextTick(D,this))}return n},w.prototype.addListener=w.prototype.on,w.prototype.resume=function(){var t=this._readableState;return t.flowing||(g("resume"),t.flowing=!0,F(this,t)),this},w.prototype.pause=function(){return g("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(g("pause"),this._readableState.flowing=!1,this.emit("pause")),this},w.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;for(var i in t.on("end",(function(){if(g("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){if(g("wrapped data"),n.decoder&&(i=n.decoder.write(i)),(!n.objectMode||null!==i&&void 0!==i)&&(n.objectMode||i&&i.length)){var o=e.push(i);o||(r=!0,t.pause())}})),t)void 0===this[i]&&"function"===typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<b.length;o++)t.on(b[o],this.emit.bind(this,b[o]));return this._read=function(e){g("wrapped _read",e),r&&(r=!1,t.resume())},this},Object.defineProperty(w.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),w._fromList=z}).call(this,n("c8ba"),n("4362"))},"8bd2":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["fields","ignore_unavailable","allow_no_indices","expand_wildcards","pretty","human","error_trace","source","filter_path"],a={ignoreUnavailable:"ignore_unavailable",allowNoIndices:"allow_no_indices",expandWildcards:"expand_wildcards",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,...f}=t;f=i(o,a,f,u),null==c&&(c=null==h?"GET":"POST");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g=null!=d?"/"+encodeURIComponent(d)+"/_field_caps":"/_field_caps";const m={method:c,path:g,body:h||"",querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},"8c05":function(t,e){t.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},"8f00":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["analyze_wildcard","analyzer","default_operator","df","stored_fields","lenient","parent","preference","q","routing","_source","_source_exclude","_source_include","pretty","human","error_trace","source","filter_path"],a={analyzeWildcard:"analyze_wildcard",defaultOperator:"default_operator",storedFields:"stored_fields",_sourceExclude:"_source_exclude",_sourceInclude:"_source_include",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["id"]){const t=new n("Missing required parameter: id");return r(t,l)}if(null==t["index"]){const t=new n("Missing required parameter: index");return r(t,l)}if(null==t["type"]){const t=new n("Missing required parameter: type");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,id:d,index:f,type:p,...g}=t;g=i(o,a,g,u),null==c&&(c=null==h?"GET":"POST");var m=s.ignore;"number"===typeof m&&(s.ignore=[m]);var y="";y="/"+encodeURIComponent(f)+"/"+encodeURIComponent(p)+"/"+encodeURIComponent(d)+"/_explain";const v={method:c,path:y,body:h||"",querystring:g};return s.warnings=0===u.length?null:u,e(v,s,l)}}t.exports=r},"8f6f":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["pretty","human","error_trace","source","filter_path"],a={errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["id"]){const t=new n("Missing required parameter: id");return r(t,l)}if(null==t["body"]){const t=new n("Missing required parameter: body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,id:d,...f}=t;f=i(o,a,f,u),null==c&&(c="PUT");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g="/_search/template/"+encodeURIComponent(d);const m={method:c,path:g,body:h||"",querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},9023:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MESSAGE=e.ALGORITHM=void 0;var r={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"};e.ALGORITHM=r;var i={SUCCESS:"SUCCESS",FAILURE:"FAILURE"};e.MESSAGE=i},"910e":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isArray=void 0,e.isArray=Array.isArray},9154:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VACANT_NODE_LABEL=e.VACANT_NODE_ID=e.VACANT_GRAPH_ID=e.VACANT_EDGE_LABEL=e.VACANT_EDGE_ID=e.Node=e.Graph=e.Edge=e.AUTO_EDGE_ID=void 0;var r=-1;e.VACANT_EDGE_ID=r;var i=-1;e.VACANT_NODE_ID=i;var o="-1";e.VACANT_EDGE_LABEL=o;var a="-1";e.VACANT_NODE_LABEL=a;var s=-1;e.VACANT_GRAPH_ID=s;var l="-1";e.AUTO_EDGE_ID=l;var u=function(){function t(t,e,n,a){void 0===t&&(t=r),void 0===e&&(e=i),void 0===n&&(n=i),void 0===a&&(a=o),this.id=t,this.from=e,this.to=n,this.label=a}return t}();e.Edge=u;var c=function(){function t(t,e){void 0===t&&(t=i),void 0===e&&(e=a),this.id=t,this.label=e,this.edges=[],this.edgeMap={}}return t.prototype.addEdge=function(t){this.edges.push(t),this.edgeMap[t.id]=t},t}();e.Node=c;var h=function(){function t(t,e,n){void 0===t&&(t=i),void 0===e&&(e=!0),void 0===n&&(n=!1),this.id=t,this.edgeIdAutoIncrease=e,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}return t.prototype.getNodeNum=function(){return this.nodes.length},t.prototype.addNode=function(t,e){if(!this.nodeMap[t]){var n=new c(t,e);this.nodes.push(n),this.nodeMap[t]=n,this.nodeLabelMap[e]||(this.nodeLabelMap[e]=[]),this.nodeLabelMap[e].push(t)}},t.prototype.addEdge=function(t,e,n,r){if((this.edgeIdAutoIncrease||void 0===t)&&(t=this.counter++),!(this.nodeMap[e]&&this.nodeMap[n]&&this.nodeMap[n].edgeMap[t])){var i=new u(t,e,n,r);if(this.edges.push(i),this.edgeMap[t]=i,this.nodeMap[e].addEdge(i),this.edgeLabelMap[r]||(this.edgeLabelMap[r]=[]),this.edgeLabelMap[r].push(i),!this.directed){var o=new u(t,n,e,r);this.nodeMap[n].addEdge(o),this.edgeLabelMap[r].push(o)}}},t}();e.Graph=h},"91dd":function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,o){e=e||"&",n=n||"=";var a={};if("string"!==typeof t||0===t.length)return a;var s=/\+/g;t=t.split(e);var l=1e3;o&&"number"===typeof o.maxKeys&&(l=o.maxKeys);var u=t.length;l>0&&u>l&&(u=l);for(var c=0;c<u;++c){var h,d,f,p,g=t[c].replace(s,"%20"),m=g.indexOf(n);m>=0?(h=g.substr(0,m),d=g.substr(m+1)):(h=g,d=""),f=decodeURIComponent(h),p=decodeURIComponent(d),r(a,f)?i(a[f])?a[f].push(p):a[f]=[a[f],p]:a[f]=p}return a};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},"91e9":function(t,e){function n(t,e){return function(n){return t(e(n))}}t.exports=n},"925e":function(t,e,n){(function(e,r,i){var o=n("a9f1"),a=n("3fb5"),s=n("c90b"),l=n("3d1b"),u=n("d938"),c=s.IncomingMessage,h=s.readyStates;function d(t,e){return o.fetch&&e?"fetch":o.mozchunkedarraybuffer?"moz-chunked-arraybuffer":o.msstream?"ms-stream":o.arraybuffer&&t?"arraybuffer":o.vbArray&&t?"text:vbarray":"text"}var f=t.exports=function(t){var n,r=this;l.Writable.call(r),r._opts=t,r._body=[],r._headers={},t.auth&&r.setHeader("Authorization","Basic "+new e(t.auth).toString("base64")),Object.keys(t.headers).forEach((function(e){r.setHeader(e,t.headers[e])}));var i=!0;if("disable-fetch"===t.mode||"requestTimeout"in t&&!o.abortController)i=!1,n=!0;else if("prefer-streaming"===t.mode)n=!1;else if("allow-wrong-content-type"===t.mode)n=!o.overrideMimeType;else{if(t.mode&&"default"!==t.mode&&"prefer-fast"!==t.mode)throw new Error("Invalid value for opts.mode");n=!0}r._mode=d(n,i),r._fetchTimer=null,r.on("finish",(function(){r._onFinish()}))};function p(t){try{var e=t.status;return null!==e&&0!==e}catch(n){return!1}}a(f,l.Writable),f.prototype.setHeader=function(t,e){var n=this,r=t.toLowerCase();-1===g.indexOf(r)&&(n._headers[r]={name:t,value:e})},f.prototype.getHeader=function(t){var e=this._headers[t.toLowerCase()];return e?e.value:null},f.prototype.removeHeader=function(t){var e=this;delete e._headers[t.toLowerCase()]},f.prototype._onFinish=function(){var t=this;if(!t._destroyed){var n=t._opts,a=t._headers,s=null;"GET"!==n.method&&"HEAD"!==n.method&&(s=o.arraybuffer?u(e.concat(t._body)):o.blobConstructor?new r.Blob(t._body.map((function(t){return u(t)})),{type:(a["content-type"]||{}).value||""}):e.concat(t._body).toString());var l=[];if(Object.keys(a).forEach((function(t){var e=a[t].name,n=a[t].value;Array.isArray(n)?n.forEach((function(t){l.push([e,t])})):l.push([e,n])})),"fetch"===t._mode){var c=null;if(o.abortController){var d=new AbortController;c=d.signal,t._fetchAbortController=d,"requestTimeout"in n&&0!==n.requestTimeout&&(t._fetchTimer=r.setTimeout((function(){t.emit("requestTimeout"),t._fetchAbortController&&t._fetchAbortController.abort()}),n.requestTimeout))}r.fetch(t._opts.url,{method:t._opts.method,headers:l,body:s||void 0,mode:"cors",credentials:n.withCredentials?"include":"same-origin",signal:c}).then((function(e){t._fetchResponse=e,t._connect()}),(function(e){r.clearTimeout(t._fetchTimer),t._destroyed||t.emit("error",e)}))}else{var f=t._xhr=new r.XMLHttpRequest;try{f.open(t._opts.method,t._opts.url,!0)}catch(p){return void i.nextTick((function(){t.emit("error",p)}))}"responseType"in f&&(f.responseType=t._mode.split(":")[0]),"withCredentials"in f&&(f.withCredentials=!!n.withCredentials),"text"===t._mode&&"overrideMimeType"in f&&f.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in n&&(f.timeout=n.requestTimeout,f.ontimeout=function(){t.emit("requestTimeout")}),l.forEach((function(t){f.setRequestHeader(t[0],t[1])})),t._response=null,f.onreadystatechange=function(){switch(f.readyState){case h.LOADING:case h.DONE:t._onXHRProgress();break}},"moz-chunked-arraybuffer"===t._mode&&(f.onprogress=function(){t._onXHRProgress()}),f.onerror=function(){t._destroyed||t.emit("error",new Error("XHR error"))};try{f.send(s)}catch(p){return void i.nextTick((function(){t.emit("error",p)}))}}}},f.prototype._onXHRProgress=function(){var t=this;p(t._xhr)&&!t._destroyed&&(t._response||t._connect(),t._response._onXHRProgress())},f.prototype._connect=function(){var t=this;t._destroyed||(t._response=new c(t._xhr,t._fetchResponse,t._mode,t._fetchTimer),t._response.on("error",(function(e){t.emit("error",e)})),t.emit("response",t._response))},f.prototype._write=function(t,e,n){var r=this;r._body.push(t),n()},f.prototype.abort=f.prototype.destroy=function(){var t=this;t._destroyed=!0,r.clearTimeout(t._fetchTimer),t._response&&(t._response._destroyed=!0),t._xhr?t._xhr.abort():t._fetchAbortController&&t._fetchAbortController.abort()},f.prototype.end=function(t,e,n){var r=this;"function"===typeof t&&(n=t,t=void 0),l.Writable.prototype.end.call(r,t,e,n)},f.prototype.flushHeaders=function(){},f.prototype.setTimeout=function(){},f.prototype.setNoDelay=function(){},f.prototype.setSocketKeepAlive=function(){};var g=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this,n("b639").Buffer,n("c8ba"),n("4362"))},"927c":function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ERLayout=void 0;var o=n("5bc9"),a=i(n("6098")),s=function(t){function e(e){var n=t.call(this)||this;return n.width=300,n.height=300,n.nodeMinGap=50,n.onLayoutEnd=function(){},e&&n.updateCfg(e),n}return r(e,t),e.prototype.getDefaultCfg=function(){return{width:300,height:300,nodeMinGap:50}},e.prototype.execute=function(){var t=this,e=t.nodes,n=t.edges;return null===e||void 0===e||e.forEach((function(t){t.size||(t.size=[50,50])})),(0,a.default)({nodes:e,edges:n},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then((function(){t.onLayoutEnd&&t.onLayoutEnd()}))},e.prototype.getType=function(){return"er"},e}(o.Base);e.ERLayout=s},9490:function(t,e,n){(function(t){var r=n("925e"),i=n("c90b"),o=n("53a8"),a=n("8c05"),s=n("0b16"),l=e;l.request=function(e,n){e="string"===typeof e?s.parse(e):o(e);var i=-1===t.location.protocol.search(/^https?:$/)?"http:":"",a=e.protocol||i,l=e.hostname||e.host,u=e.port,c=e.path||"/";l&&-1!==l.indexOf(":")&&(l="["+l+"]"),e.url=(l?a+"//"+l:"")+(u?":"+u:"")+c,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var h=new r(e);return n&&h.on("response",n),h},l.get=function(t,e){var n=l.request(t,e);return n.end(),n},l.ClientRequest=r,l.IncomingMessage=i.IncomingMessage,l.Agent=function(){},l.Agent.defaultMaxSockets=4,l.globalAgent=new l.Agent,l.STATUS_CODES=a,l.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,n("c8ba"))},"94c2":function(t,e,n){"use strict";(function(e,r){const i=n("34eb")("elasticsearch"),o=n("3c43"),a=n("566b"),{createGzip:s}=n("470b"),l=n("6ab1"),u=n("1468"),{ConnectionError:c,TimeoutError:h,NoLivingConnectionsError:d,ResponseError:f,ConfigurationError:p}=n("e9f1"),g=()=>{},m=n("0892").version,y=`elasticsearch-js/${m} (${o.platform()} ${o.release()}-${o.arch()}; Node.js ${e.version})`;class v{constructor(t={}){if("string"===typeof t.compression&&"gzip"!==t.compression)throw new p(`Invalid compression: '${t.compression}'`);this.emit=t.emit,this.connectionPool=t.connectionPool,this.serializer=t.serializer,this.maxRetries=t.maxRetries,this.requestTimeout=b(t.requestTimeout),this.suggestCompression=!0===t.suggestCompression,this.compression=t.compression||!1,this.headers=Object.assign({},{"User-Agent":y},t.headers),this.sniffInterval=t.sniffInterval,this.sniffOnConnectionFault=t.sniffOnConnectionFault,this.sniffEndpoint=t.sniffEndpoint,this.generateRequestId=t.generateRequestId||C(),this.name=t.name,this.nodeFilter=t.nodeFilter||w,"function"===typeof t.nodeSelector?this.nodeSelector=t.nodeSelector:"round-robin"===t.nodeSelector?this.nodeSelector=S():"random"===t.nodeSelector?this.nodeSelector=E:this.nodeSelector=S(),this._sniffEnabled="number"===typeof this.sniffInterval,this._nextSniff=this._sniffEnabled?Date.now()+this.sniffInterval:0,this._isSniffing=!1,!0===t.sniffOnStart&&this.sniff({reason:v.sniffReasons.SNIFF_ON_START})}request(t,e,n){if(e=e||{},"function"===typeof e&&(n=e,e={}),null==n)return new Promise((n,r)=>{this.request(t,e,(t,e)=>{t?r(t):n(e)})});n=a(n);const o={context:e.context||null,request:{params:null,options:null,id:e.id||this.generateRequestId(t,e)},name:this.name,connection:null,attempts:0,aborted:!1},u={body:null,statusCode:null,headers:null,warnings:e.warnings||null,meta:o},p=e.maxRetries||this.maxRetries,m=e.compression||this.compression;var y={abort:g};const w=()=>{if(!0===o.aborted)return;if(o.connection=this.getConnection({requestId:o.request.id}),null===o.connection)return n(new d("There are no living connections"),u);const i=Object.assign({},this.headers,e.headers);if(null!=t.body){if(!0===_(t.body))try{t.body=this.serializer.serialize(t.body)}catch(a){return n(a,u)}""!==t.body&&(i["Content-Type"]=i["Content-Type"]||"application/json","gzip"===m&&(!1===x(t.body)?t.body=l(t.body).pipe(s()):t.body=t.body.pipe(s()),i["Content-Encoding"]=m)),!1===x(t.body)&&(i["Content-Length"]=""+r.byteLength(t.body))}else if(null!=t.bulkBody){if(!0===_(t.bulkBody))try{t.body=this.serializer.ndserialize(t.bulkBody)}catch(a){return n(a,u)}else t.body=t.bulkBody;i["Content-Type"]=i["Content-Type"]||"application/x-ndjson",!1===x(t.body)&&(i["Content-Length"]=""+r.byteLength(t.body))}return!0===this.suggestCompression&&(i["Accept-Encoding"]="gzip,deflate"),t.headers=i,null==e.querystring?t.querystring=this.serializer.qserialize(t.querystring):t.querystring=this.serializer.qserialize(Object.assign({},t.querystring,e.querystring)),o.request.params=t,o.request.options=e,this.emit("request",null,u),t.timeout=b(e.requestTimeout||this.requestTimeout),!0===e.asStream&&(t.asStream=!0),o.connection.request(t,S)},S=(r,a)=>{if(null!==r){if(this.connectionPool.markDead(o.connection),!0===this.sniffOnConnectionFault&&this.sniff({reason:v.sniffReasons.SNIFF_ON_CONNECTION_FAULT,requestId:o.request.id}),o.attempts<p)return o.attempts++,i(`Retrying request, there are still ${p-o.attempts} attempts`,t),void(y=w(t,n));const e=r instanceof h?r:new c(r.message,u);return"TimeoutError"===r.name&&(r.meta=u),this.emit("response",e,u),n(e,u)}const{statusCode:s,headers:l}=a;if(u.statusCode=s,u.headers=l,null!=l["warning"]&&(u.warnings=u.warnings||[],u.warnings.push.apply(u.warnings,l["warning"].split(/(?!\B"[^"]*),(?![^"]*"\B)/))),!0===e.asStream)return u.body=a,this.emit("response",null,u),void n(null,u);var d="";a.setEncoding("utf8"),a.on("data",t=>{d+=t}),a.on("error",t=>{const e=new c(t.message,u);this.emit("response",e,u),n(e,u)}),a.on("end",()=>{const a="HEAD"===t.method;if(null!=l["content-type"]&&l["content-type"].indexOf("application/json")>-1&&!1===a&&""!==d)try{u.body=this.serializer.deserialize(d)}catch(r){return this.emit("response",r,u),n(r,u)}else u.body=!0===a||d;const c=Array.isArray(e.ignore)&&e.ignore.indexOf(s)>-1||!0===a&&404===s;if(!1!==c||502!==s&&503!==s&&504!==s)this.connectionPool.markAlive(o.connection);else if(this.connectionPool.markDead(o.connection),o.attempts<p&&429!==s)return o.attempts++,i(`Retrying request, there are still ${p-o.attempts} attempts`,t),void(y=w(t,n));if(!1===c&&s>=400){const t=new f(u);this.emit("response",t,u),n(t,u)}else!0===a&&404===s&&(u.body=!1),this.emit("response",null,u),n(null,u)})};return y=w(),{abort:()=>{o.aborted=!0,y.abort(),i("Aborting request",t)}}}getConnection(t){const e=Date.now();return!0===this._sniffEnabled&&e>this._nextSniff&&this.sniff({reason:v.sniffReasons.SNIFF_INTERVAL,requestId:t.requestId}),this.connectionPool.resurrect({now:e,requestId:t.requestId,name:this.name}),this.connectionPool.getConnection({filter:this.nodeFilter,selector:this.nodeSelector})}sniff(t,e=g){if(!0===this._isSniffing)return;this._isSniffing=!0,i("Started sniffing request"),"function"===typeof t&&(e=t,t={reason:v.sniffReasons.DEFAULT});const{reason:n}=t,r={method:"GET",path:this.sniffEndpoint};this.request(r,{id:t.requestId},(t,r)=>{if(this._isSniffing=!1,!0===this._sniffEnabled&&(this._nextSniff=Date.now()+this.sniffInterval),null!=t)return i("Sniffing errored",t),r.meta.sniff={hosts:[],reason:n},this.emit("sniff",t,r),e(t);i("Sniffing ended successfully",r.body);const o=r.meta.connection.url.protocol||"http:",a=this.connectionPool.nodesToHost(r.body.nodes,o);this.connectionPool.update(a),r.meta.sniff={hosts:a,reason:n},this.emit("sniff",null,r),e(null,a)})}}function b(t){return"string"===typeof t?u(t):t}function _(t){return"string"!==typeof t&&"function"!==typeof t.pipe&&!1===r.isBuffer(t)}function x(t){return"function"===typeof t.pipe}function w(t){return!0!==t.roles.master||!1!==t.roles.data||!1!==t.roles.ingest}function S(){var t=-1;return function(e){return++t>=e.length&&(t=0),e[t]}}function E(t){const e=Math.floor(Math.random()*t.length);return t[e]}function C(){var t=2147483647,e=0;return function(n,r){return e=e+1&t}}v.sniffReasons={SNIFF_ON_START:"sniff-on-start",SNIFF_INTERVAL:"sniff-interval",SNIFF_ON_CONNECTION_FAULT:"sniff-on-connection-fault",DEFAULT:"default"},t.exports=v,t.exports.internals={defaultNodeFilter:w,roundRobinSelector:S,randomSelector:E,generateRequestId:C}}).call(this,n("4362"),n("b639").Buffer)},"94c7":function(t,e,n){(function(e,n){t.exports=n()})(0,(function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}var e=/^\s+/,n=/\s+$/;function r(t,e){if(t=t||"",e=e||{},t instanceof r)return t;if(!(this instanceof r))return new r(t,e);var n=i(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}function i(e){var n={r:0,g:0,b:0},r=1,i=null,a=null,l=null,c=!1,h=!1;return"string"==typeof e&&(e=z(e)),"object"==t(e)&&(B(e.r)&&B(e.g)&&B(e.b)?(n=o(e.r,e.g,e.b),c=!0,h="%"===String(e.r).substr(-1)?"prgb":"rgb"):B(e.h)&&B(e.s)&&B(e.v)?(i=R(e.s),a=R(e.v),n=u(e.h,i,a),c=!0,h="hsv"):B(e.h)&&B(e.s)&&B(e.l)&&(i=R(e.s),l=R(e.l),n=s(e.h,i,l),c=!0,h="hsl"),e.hasOwnProperty("a")&&(r=e.a)),r=A(r),{ok:c,format:e.format||h,r:Math.min(255,Math.max(n.r,0)),g:Math.min(255,Math.max(n.g,0)),b:Math.min(255,Math.max(n.b,0)),a:r}}function o(t,e,n){return{r:255*O(t,255),g:255*O(e,255),b:255*O(n,255)}}function a(t,e,n){t=O(t,255),e=O(e,255),n=O(n,255);var r,i,o=Math.max(t,e,n),a=Math.min(t,e,n),s=(o+a)/2;if(o==a)r=i=0;else{var l=o-a;switch(i=s>.5?l/(2-o-a):l/(o+a),o){case t:r=(e-n)/l+(e<n?6:0);break;case e:r=(n-t)/l+2;break;case n:r=(t-e)/l+4;break}r/=6}return{h:r,s:i,l:s}}function s(t,e,n){var r,i,o;function a(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=O(t,360),e=O(e,100),n=O(n,100),0===e)r=i=o=n;else{var s=n<.5?n*(1+e):n+e-n*e,l=2*n-s;r=a(l,s,t+1/3),i=a(l,s,t),o=a(l,s,t-1/3)}return{r:255*r,g:255*i,b:255*o}}function l(t,e,n){t=O(t,255),e=O(e,255),n=O(n,255);var r,i,o=Math.max(t,e,n),a=Math.min(t,e,n),s=o,l=o-a;if(i=0===o?0:l/o,o==a)r=0;else{switch(o){case t:r=(e-n)/l+(e<n?6:0);break;case e:r=(n-t)/l+2;break;case n:r=(t-e)/l+4;break}r/=6}return{h:r,s:i,v:s}}function u(t,e,n){t=6*O(t,360),e=O(e,100),n=O(n,100);var r=Math.floor(t),i=t-r,o=n*(1-e),a=n*(1-i*e),s=n*(1-(1-i)*e),l=r%6,u=[n,a,o,o,s,n][l],c=[s,n,n,a,o,o][l],h=[o,o,s,n,n,a][l];return{r:255*u,g:255*c,b:255*h}}function c(t,e,n,r){var i=[N(Math.round(t).toString(16)),N(Math.round(e).toString(16)),N(Math.round(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function h(t,e,n,r,i){var o=[N(Math.round(t).toString(16)),N(Math.round(e).toString(16)),N(Math.round(n).toString(16)),N(D(r))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function d(t,e,n,r){var i=[N(D(r)),N(Math.round(t).toString(16)),N(Math.round(e).toString(16)),N(Math.round(n).toString(16))];return i.join("")}function f(t,e){e=0===e?0:e||10;var n=r(t).toHsl();return n.s-=e/100,n.s=k(n.s),r(n)}function p(t,e){e=0===e?0:e||10;var n=r(t).toHsl();return n.s+=e/100,n.s=k(n.s),r(n)}function g(t){return r(t).desaturate(100)}function m(t,e){e=0===e?0:e||10;var n=r(t).toHsl();return n.l+=e/100,n.l=k(n.l),r(n)}function y(t,e){e=0===e?0:e||10;var n=r(t).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-e/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-e/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-e/100*255))),r(n)}function v(t,e){e=0===e?0:e||10;var n=r(t).toHsl();return n.l-=e/100,n.l=k(n.l),r(n)}function b(t,e){var n=r(t).toHsl(),i=(n.h+e)%360;return n.h=i<0?360+i:i,r(n)}function _(t){var e=r(t).toHsl();return e.h=(e.h+180)%360,r(e)}function x(t,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var n=r(t).toHsl(),i=[r(t)],o=360/e,a=1;a<e;a++)i.push(r({h:(n.h+a*o)%360,s:n.s,l:n.l}));return i}function w(t){var e=r(t).toHsl(),n=e.h;return[r(t),r({h:(n+72)%360,s:e.s,l:e.l}),r({h:(n+216)%360,s:e.s,l:e.l})]}function S(t,e,n){e=e||6,n=n||30;var i=r(t).toHsl(),o=360/n,a=[r(t)];for(i.h=(i.h-(o*e>>1)+720)%360;--e;)i.h=(i.h+o)%360,a.push(r(i));return a}function E(t,e){e=e||6;var n=r(t).toHsv(),i=n.h,o=n.s,a=n.v,s=[],l=1/e;while(e--)s.push(r({h:i,s:o,v:a})),a=(a+l)%1;return s}r.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,n,r,i,o,a=this.toRgb();return t=a.r/255,e=a.g/255,n=a.b/255,r=t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4),i=e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4),o=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4),.2126*r+.7152*i+.0722*o},setAlpha:function(t){return this._a=A(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=l(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=l(this._r,this._g,this._b),e=Math.round(360*t.h),n=Math.round(100*t.s),r=Math.round(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+r+"%)":"hsva("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var t=a(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=a(this._r,this._g,this._b),e=Math.round(360*t.h),n=Math.round(100*t.s),r=Math.round(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+r+"%)":"hsla("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(t){return c(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return h(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*O(this._r,255))+"%",g:Math.round(100*O(this._g,255))+"%",b:Math.round(100*O(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*O(this._r,255))+"%, "+Math.round(100*O(this._g,255))+"%, "+Math.round(100*O(this._b,255))+"%)":"rgba("+Math.round(100*O(this._r,255))+"%, "+Math.round(100*O(this._g,255))+"%, "+Math.round(100*O(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(M[c(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+d(this._r,this._g,this._b,this._a),n=e,i=this._gradientType?"GradientType = 1, ":"";if(t){var o=r(t);n="#"+d(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,r=this._a<1&&this._a>=0,i=!e&&r&&("hex"===t||"hex6"===t||"hex3"===t||"hex4"===t||"hex8"===t||"name"===t);return i?"name"===t&&0===this._a?this.toName():this.toRgbString():("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return r(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(m,arguments)},brighten:function(){return this._applyModification(y,arguments)},darken:function(){return this._applyModification(v,arguments)},desaturate:function(){return this._applyModification(f,arguments)},saturate:function(){return this._applyModification(p,arguments)},greyscale:function(){return this._applyModification(g,arguments)},spin:function(){return this._applyModification(b,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(S,arguments)},complement:function(){return this._applyCombination(_,arguments)},monochromatic:function(){return this._applyCombination(E,arguments)},splitcomplement:function(){return this._applyCombination(w,arguments)},triad:function(){return this._applyCombination(x,[3])},tetrad:function(){return this._applyCombination(x,[4])}},r.fromRatio=function(e,n){if("object"==t(e)){var i={};for(var o in e)e.hasOwnProperty(o)&&(i[o]="a"===o?e[o]:R(e[o]));e=i}return r(e,n)},r.equals=function(t,e){return!(!t||!e)&&r(t).toRgbString()==r(e).toRgbString()},r.random=function(){return r.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},r.mix=function(t,e,n){n=0===n?0:n||50;var i=r(t).toRgb(),o=r(e).toRgb(),a=n/100,s={r:(o.r-i.r)*a+i.r,g:(o.g-i.g)*a+i.g,b:(o.b-i.b)*a+i.b,a:(o.a-i.a)*a+i.a};return r(s)},r.readability=function(t,e){var n=r(t),i=r(e);return(Math.max(n.getLuminance(),i.getLuminance())+.05)/(Math.min(n.getLuminance(),i.getLuminance())+.05)},r.isReadable=function(t,e,n){var i,o,a=r.readability(t,e);switch(o=!1,i=U(n),i.level+i.size){case"AAsmall":case"AAAlarge":o=a>=4.5;break;case"AAlarge":o=a>=3;break;case"AAAsmall":o=a>=7;break}return o},r.mostReadable=function(t,e,n){var i,o,a,s,l=null,u=0;n=n||{},o=n.includeFallbackColors,a=n.level,s=n.size;for(var c=0;c<e.length;c++)i=r.readability(t,e[c]),i>u&&(u=i,l=r(e[c]));return r.isReadable(t,l,{level:a,size:s})||!o?l:(n.includeFallbackColors=!1,r.mostReadable(t,["#fff","#000"],n))};var C=r.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},M=r.hexNames=T(C);function T(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function A(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function O(t,e){P(t)&&(t="100%");var n=L(t);return t=Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function k(t){return Math.min(1,Math.max(0,t))}function I(t){return parseInt(t,16)}function P(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)}function L(t){return"string"===typeof t&&-1!=t.indexOf("%")}function N(t){return 1==t.length?"0"+t:""+t}function R(t){return t<=1&&(t=100*t+"%"),t}function D(t){return Math.round(255*parseFloat(t)).toString(16)}function F(t){return I(t)/255}var j=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",n="(?:"+e+")|(?:"+t+")",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{CSS_UNIT:new RegExp(n),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function B(t){return!!j.CSS_UNIT.exec(t)}function z(t){t=t.replace(e,"").replace(n,"").toLowerCase();var r,i=!1;if(C[t])t=C[t],i=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};return(r=j.rgb.exec(t))?{r:r[1],g:r[2],b:r[3]}:(r=j.rgba.exec(t))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=j.hsl.exec(t))?{h:r[1],s:r[2],l:r[3]}:(r=j.hsla.exec(t))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=j.hsv.exec(t))?{h:r[1],s:r[2],v:r[3]}:(r=j.hsva.exec(t))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=j.hex8.exec(t))?{r:I(r[1]),g:I(r[2]),b:I(r[3]),a:F(r[4]),format:i?"name":"hex8"}:(r=j.hex6.exec(t))?{r:I(r[1]),g:I(r[2]),b:I(r[3]),format:i?"name":"hex"}:(r=j.hex4.exec(t))?{r:I(r[1]+""+r[1]),g:I(r[2]+""+r[2]),b:I(r[3]+""+r[3]),a:F(r[4]+""+r[4]),format:i?"name":"hex8"}:!!(r=j.hex3.exec(t))&&{r:I(r[1]+""+r[1]),g:I(r[2]+""+r[2]),b:I(r[3]+""+r[3]),format:i?"name":"hex"}}function U(t){var e,n;return t=t||{level:"AA",size:"small"},e=(t.level||"AA").toUpperCase(),n=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA"),"small"!==n&&"large"!==n&&(n="small"),{level:e,size:n}}return r}))},9523:function(t,e,n){var r=n("a395");function i(t,e,n){return e=r(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}t.exports=i,t.exports.__esModule=!0,t.exports["default"]=t.exports},9626:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){var n,r,o,a={};null===t||void 0===t||t.forEach((function(t,e){a[t.v]={i:e,indegree:0,in:[],out:[],vs:[t.v]};var n=a[t.v];void 0!==t.barycenter&&(n.barycenter=t.barycenter,n.weight=t.weight)})),null===(n=e.edges())||void 0===n||n.forEach((function(t){var e=a[t.v],n=a[t.w];void 0!==e&&void 0!==n&&(n.indegree++,e.out.push(a[t.w]))}));var s=null===(o=(r=Object.values(a)).filter)||void 0===o?void 0:o.call(r,(function(t){return!t.indegree}));return i(s)},i=function(t){var e,n,r=[],i=function(t){return function(e){e.merged||(void 0===e.barycenter||void 0===t.barycenter||e.barycenter>=t.barycenter)&&o(t,e)}},a=function(e){return function(n){n["in"].push(e),0===--n.indegree&&t.push(n)}},s=function(){var o=t.pop();r.push(o),null===(e=o["in"].reverse())||void 0===e||e.forEach((function(t){return i(o)(t)})),null===(n=o.out)||void 0===n||n.forEach((function(t){return a(o)(t)}))};while(null===t||void 0===t?void 0:t.length)s();var l=r.filter((function(t){return!t.merged})),u=["vs","i","barycenter","weight"];return l.map((function(t){var e={};return null===u||void 0===u||u.forEach((function(n){void 0!==t[n]&&(e[n]=t[n])})),e}))},o=function(t,e){var n,r=0,i=0;t.weight&&(r+=t.barycenter*t.weight,i+=t.weight),e.weight&&(r+=e.barycenter*e.weight,i+=e.weight),t.vs=null===(n=e.vs)||void 0===n?void 0:n.concat(t.vs),t.barycenter=r/i,t.weight=i,t.i=Math.min(e.i,t.i),e.merged=!0};e.default=r},"966d":function(t,e,n){"use strict";(function(e){function n(t,n,r,i){if("function"!==typeof t)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,n)}));case 3:return e.nextTick((function(){t.call(null,n,r)}));case 4:return e.nextTick((function(){t.call(null,n,r,i)}));default:o=new Array(s-1),a=0;while(a<o.length)o[a++]=arguments[a];return e.nextTick((function(){t.apply(null,o)}))}}!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports=n:t.exports=e.nextTick}).call(this,n("4362"))},"96de":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=null;function i(){if(!r){var t=document.createElement("canvas");t.width=1,t.height=1,r=t.getContext("2d")}return r}},"96ee":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["format","size","local","master_timeout","h","help","s","v","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,threadPoolPatterns:d,thread_pool_patterns:f,...p}=t;p=i(o,a,p,u),null==c&&(c="GET");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m=null!=(f||d)?"/_cat/thread_pool/"+encodeURIComponent(f||d):"/_cat/thread_pool";const y={method:c,path:m,body:null,querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},"970b":function(t,e,n){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n("d9e2"),t.exports=r,t.exports.__esModule=!0,t.exports["default"]=t.exports},"98e2":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.findShortestPath=e.findAllPath=void 0;var r=o(n("9b96")),i=n("dcfe");function o(t){return t&&t.__esModule?t:{default:t}}var a=function(t,e,n,i,o){var a=(0,r.default)(t,e,i,o),s=a.length,l=a.path,u=a.allPath;return{length:s[n],path:l[n],allPath:u[n]}};e.findShortestPath=a;var s=function(t,e,n,r){var o;if(e===n)return[[e]];var a=t.edges,s=void 0===a?[]:a,l=[e],u=(o={},o[e]=!0,o),c=[],h=[],d=r?(0,i.getNeighbors)(e,s,"target"):(0,i.getNeighbors)(e,s);c.push(d);while(l.length>0&&c.length>0){var f=c[c.length-1];if(f.length){var p=f.shift();if(p&&(l.push(p),u[p]=!0,d=r?(0,i.getNeighbors)(p,s,"target"):(0,i.getNeighbors)(p,s),c.push(d.filter((function(t){return!u[t]})))),l[l.length-1]===n){var g=l.map((function(t){return t}));h.push(g);m=l.pop();u[m]=!1,c.pop()}}else{var m=l.pop();u[m]=!1,c.pop()}}return h};e.findAllPath=s},"99d3":function(t,e,n){(function(t){var r=n("585a"),i=e&&!e.nodeType&&e,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i,s=a&&r.process,l=function(){try{var t=o&&o.require&&o.require("util").types;return t||s&&s.binding&&s.binding("util")}catch(e){}}();t.exports=l}).call(this,n("62e4")(t))},"9a24":function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.GridLayout=void 0;var i=n("f271"),o=n("5bc9"),a=function(t){function e(e){var n=t.call(this)||this;return n.begin=[0,0],n.preventOverlap=!0,n.preventOverlapPadding=10,n.condense=!1,n.sortBy="degree",n.nodes=[],n.edges=[],n.width=300,n.height=300,n.row=0,n.col=0,n.cellWidth=0,n.cellHeight=0,n.cellUsed={},n.id2manPos={},n.onLayoutEnd=function(){},n.updateCfg(e),n}return r(e,t),e.prototype.getDefaultCfg=function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}},e.prototype.execute=function(){var t=this,e=t.nodes,n=t.edges,r=t.begin,o=e.length;if(0===o)return t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n};if(1===o)return e[0].x=r[0],e[0].y=r[1],t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n};var a=t.sortBy,s=t.width,l=t.height,u=t.condense,c=t.preventOverlapPadding,h=t.preventOverlap,d=t.nodeSpacing,f=t.nodeSize,p=[];e.forEach((function(t){p.push(t)}));var g={};if(p.forEach((function(t,e){g[t.id]=e})),("degree"===a||!(0,i.isString)(a)||void 0===p[0][a])&&(a="degree",(0,i.isNaN)(e[0].degree))){var m=(0,i.getDegree)(p.length,g,n);p.forEach((function(t,e){t.degree=m[e].all}))}p.sort((function(t,e){return e[a]-t[a]})),s||"undefined"===typeof window||(s=window.innerWidth),l||"undefined"===typeof window||(l=window.innerHeight);var y=t.rows,v=null!=t.cols?t.cols:t.columns;if(t.cells=o,null!=y&&null!=v?(t.rows=y,t.cols=v):null!=y&&null==v?(t.rows=y,t.cols=Math.ceil(t.cells/t.rows)):null==y&&null!=v?(t.cols=v,t.rows=Math.ceil(t.cells/t.cols)):(t.splits=Math.sqrt(t.cells*t.height/t.width),t.rows=Math.round(t.splits),t.cols=Math.round(t.width/t.height*t.splits)),t.rows=Math.max(t.rows,1),t.cols=Math.max(t.cols,1),t.cols*t.rows>t.cells){var b=t.small(),_=t.large();(b-1)*_>=t.cells?t.small(b-1):(_-1)*b>=t.cells&&t.large(_-1)}else while(t.cols*t.rows<t.cells){b=t.small(),_=t.large();(_+1)*b>=t.cells?t.large(_+1):t.small(b+1)}if(t.cellWidth=s/t.cols,t.cellHeight=l/t.rows,u&&(t.cellWidth=0,t.cellHeight=0),h||d){var x=(0,i.getFuncByUnknownType)(10,d),w=(0,i.getFuncByUnknownType)(30,f,!1);p.forEach((function(e){e.x&&e.y||(e.x=0,e.y=0);var n,r,o=w(e)||30;(0,i.isArray)(o)?(n=o[0],r=o[1]):(n=o,r=o);var a=void 0!==x?x(e):c,s=n+a,l=r+a;t.cellWidth=Math.max(t.cellWidth,s),t.cellHeight=Math.max(t.cellHeight,l)}))}t.cellUsed={},t.row=0,t.col=0,t.id2manPos={};for(var S=0;S<p.length;S++){var E=p[S],C=void 0;if(t.position&&(C=t.position(E)),C&&(void 0!==C.row||void 0!==C.col)){var M={row:C.row,col:C.col};if(void 0===M.col){M.col=0;while(t.used(M.row,M.col))M.col++}else if(void 0===M.row){M.row=0;while(t.used(M.row,M.col))M.row++}t.id2manPos[E.id]=M,t.use(M.row,M.col)}t.getPos(E)}return t.onLayoutEnd&&t.onLayoutEnd(),{edges:n,nodes:p}},e.prototype.small=function(t){var e,n=this,r=n.rows||5,i=n.cols||5;if(null==t)e=Math.min(r,i);else{var o=Math.min(r,i);o===n.rows?n.rows=t:n.cols=t}return e},e.prototype.large=function(t){var e,n=this,r=n.rows||5,i=n.cols||5;if(null==t)e=Math.max(r,i);else{var o=Math.max(r,i);o===n.rows?n.rows=t:n.cols=t}return e},e.prototype.used=function(t,e){var n=this;return n.cellUsed["c-".concat(t,"-").concat(e)]||!1},e.prototype.use=function(t,e){var n=this;n.cellUsed["c-".concat(t,"-").concat(e)]=!0},e.prototype.moveToNextCell=function(){var t=this,e=t.cols||5;t.col++,t.col>=e&&(t.col=0,t.row++)},e.prototype.getPos=function(t){var e,n,r=this,i=r.begin,o=r.cellWidth,a=r.cellHeight,s=r.id2manPos[t.id];if(s)e=s.col*o+o/2+i[0],n=s.row*a+a/2+i[1];else{while(r.used(r.row,r.col))r.moveToNextCell();e=r.col*o+o/2+i[0],n=r.row*a+a/2+i[1],r.use(r.row,r.col),r.moveToNextCell()}t.x=e,t.y=n},e.prototype.getType=function(){return"grid"},e}(o.Base);e.GridLayout=a},"9b96":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n("9ab4"),i=n("8937"),o=n("dcfe"),a=function(t,e,n){for(var r,i=1/0,o=0;o<e.length;o++){var a=e[o].id;!n[a]&&t[a]<=i&&(i=t[a],r=e[o])}return r},s=function(t,e,n,r){var i=t.nodes,s=void 0===i?[]:i,l=t.edges,c=void 0===l?[]:l,h=[],d={},f={},p={};s.forEach((function(t,n){var r=t.id;h.push(r),f[r]=1/0,r===e&&(f[r]=0)}));for(var g=s.length,m=function(t){var e=a(f,s,d),i=e.id;if(d[i]=!0,f[i]===1/0)return"continue";var l=[];l=n?(0,o.getOutEdgesNodeId)(i,c):(0,o.getEdgesByNodeId)(i,c),l.forEach((function(t){var n=t.target,o=t.source,a=n===i?o:n,s=r&&t[r]?t[r]:1;f[a]>f[e.id]+s?(f[a]=f[e.id]+s,p[a]=[e.id]):f[a]===f[e.id]+s&&p[a].push(e.id)}))},y=0;y<g;y++)m(y);p[e]=[e];var v={};for(var b in f)f[b]!==1/0&&u(e,b,p,v);var _={};for(var b in v)_[b]=v[b][0];return{length:f,path:_,allPath:v}},l=s;function u(t,e,n,o){if(t===e)return[t];if(o[e])return o[e];for(var a=[],s=0,l=n[e];s<l.length;s++){var c=l[s],h=u(t,c,n,o);if(!h)return;for(var d=0,f=h;d<f.length;d++){var p=f[d];(0,i.isArray)(p)?a.push((0,r.__spreadArray)((0,r.__spreadArray)([],p,!0),[e],!1)):a.push([p,e])}}return o[e]=a,o[e]}e.default=l},"9c29":function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("7326");function i(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function o(t,e){return i(t)*i(e)?(t[0]*e[0]+t[1]*e[1])/(i(t)*i(e)):1}function a(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(o(t,e))}function s(t,e){var n=e[1],i=e[2],s=Object(r["m"])(Object(r["o"])(e[3]),2*Math.PI),l=e[4],u=e[5],c=t[0],h=t[1],d=e[6],f=e[7],p=Math.cos(s)*(c-d)/2+Math.sin(s)*(h-f)/2,g=-1*Math.sin(s)*(c-d)/2+Math.cos(s)*(h-f)/2,m=p*p/(n*n)+g*g/(i*i);m>1&&(n*=Math.sqrt(m),i*=Math.sqrt(m));var y=n*n*(g*g)+i*i*(p*p),v=y?Math.sqrt((n*n*(i*i)-y)/y):1;l===u&&(v*=-1),isNaN(v)&&(v=0);var b=i?v*n*g/i:0,_=n?v*-i*p/n:0,x=(c+d)/2+Math.cos(s)*b-Math.sin(s)*_,w=(h+f)/2+Math.sin(s)*b+Math.cos(s)*_,S=[(p-b)/n,(g-_)/i],E=[(-1*p-b)/n,(-1*g-_)/i],C=a([1,0],S),M=a(S,E);return o(S,E)<=-1&&(M=Math.PI),o(S,E)>=1&&(M=0),0===u&&M>0&&(M-=2*Math.PI),1===u&&M<0&&(M+=2*Math.PI),{cx:x,cy:w,rx:Object(r["j"])(t,[d,f])?0:n,ry:Object(r["j"])(t,[d,f])?0:i,startAngle:C,endAngle:C+M,xRotation:s,arcFlag:l,sweepFlag:u}}},"9c2f":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t,e){return t-e},i=function(){function t(t){void 0===t&&(t=r),this.compareFn=t,this.list=[]}return t.prototype.getLeft=function(t){return 2*t+1},t.prototype.getRight=function(t){return 2*t+2},t.prototype.getParent=function(t){return 0===t?null:Math.floor((t-1)/2)},t.prototype.isEmpty=function(){return this.list.length<=0},t.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},t.prototype.delMin=function(){var t=this.top(),e=this.list.pop();return this.list.length>0&&(this.list[0]=e,this.moveDown(0)),t},t.prototype.insert=function(t){if(null!==t){this.list.push(t);var e=this.list.length-1;return this.moveUp(e),!0}return!1},t.prototype.moveUp=function(t){var e=this.getParent(t);while(t&&t>0&&this.compareFn(this.list[e],this.list[t])>0){var n=this.list[e];this.list[e]=this.list[t],this.list[t]=n,t=e,e=this.getParent(t)}},t.prototype.moveDown=function(t){var e,n=t,r=this.getLeft(t),i=this.getRight(t),o=this.list.length;null!==r&&r<o&&this.compareFn(this.list[n],this.list[r])>0?n=r:null!==i&&i<o&&this.compareFn(this.list[n],this.list[i])>0&&(n=i),t!==n&&(e=[this.list[n],this.list[t]],this.list[t]=e[0],this.list[n]=e[1],this.moveDown(n))},t}(),o=i;e.default=o},"9c80":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["include_defaults","ignore_unavailable","allow_no_indices","expand_wildcards","local","pretty","human","error_trace","source","filter_path"],a={includeDefaults:"include_defaults",ignoreUnavailable:"ignore_unavailable",allowNoIndices:"allow_no_indices",expandWildcards:"expand_wildcards",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["fields"]){const t=new n("Missing required parameter: fields");return r(t,l)}if(null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,type:f,fields:p,...g}=t;g=i(o,a,g,u),null==c&&(c="GET");var m=s.ignore;"number"===typeof m&&(s.ignore=[m]);var y="";y=null!=d&&null!=f&&null!=p?"/"+encodeURIComponent(d)+"/_mapping/"+encodeURIComponent(f)+"/field/"+encodeURIComponent(p):null!=d&&null!=p?"/"+encodeURIComponent(d)+"/_mapping/field/"+encodeURIComponent(p):null!=f&&null!=p?"/_mapping/"+encodeURIComponent(f)+"/field/"+encodeURIComponent(p):"/_mapping/field/"+encodeURIComponent(p);const v={method:c,path:y,body:null,querystring:g};return s.warnings=0===u.length?null:u,e(v,s,l)}}t.exports=r},"9dd7":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["format","local","master_timeout","h","help","s","v","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,...d}=t;d=i(o,a,d,u),null==c&&(c="GET");var f=s.ignore;"number"===typeof f&&(s.ignore=[f]);var p="";p="/_cat/master";const g={method:c,path:p,body:null,querystring:d};return s.warnings=0===u.length?null:u,e(g,s,l)}}t.exports=r},"9dfd":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["ignore_unavailable","allow_no_indices","expand_wildcards","pretty","human","error_trace","source","filter_path"],a={ignoreUnavailable:"ignore_unavailable",allowNoIndices:"allow_no_indices",expandWildcards:"expand_wildcards",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,...f}=t;f=i(o,a,f,u),null==c&&(c=null==h?"GET":"POST");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g=null!=d?"/"+encodeURIComponent(d)+"/_flush/synced":"/_flush/synced";const m={method:c,path:g,body:"",querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},"9e69":function(t,e,n){var r=n("2b3e"),i=r.Symbol;t.exports=i},"9e6e":function(t,e,n){"use strict";var r=n("be7f"),i=n("c834"),o=n("eeda"),a=n("7eb1"),s=n("6853"),l=0,u=1,c=2,h=4,d=5,f=6,p=0,g=1,m=2,y=-2,v=-3,b=-4,_=-5,x=8,w=1,S=2,E=3,C=4,M=5,T=6,A=7,O=8,k=9,I=10,P=11,L=12,N=13,R=14,D=15,F=16,j=17,B=18,z=19,U=20,G=21,q=22,V=23,H=24,W=25,Y=26,X=27,J=28,Z=29,K=30,Q=31,$=32,tt=852,et=592,nt=15,rt=nt;function it(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function ot(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function at(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=w,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new r.Buf32(tt),e.distcode=e.distdyn=new r.Buf32(et),e.sane=1,e.back=-1,p):y}function st(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,at(t)):y}function lt(t,e){var n,r;return t&&t.state?(r=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?y:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,st(t))):y}function ut(t,e){var n,r;return t?(r=new ot,t.state=r,r.window=null,n=lt(t,e),n!==p&&(t.state=null),n):y}function ct(t){return ut(t,rt)}var ht,dt,ft=!0;function pt(t){if(ft){var e;ht=new r.Buf32(512),dt=new r.Buf32(32),e=0;while(e<144)t.lens[e++]=8;while(e<256)t.lens[e++]=9;while(e<280)t.lens[e++]=7;while(e<288)t.lens[e++]=8;s(u,t.lens,0,288,ht,0,t.work,{bits:9}),e=0;while(e<32)t.lens[e++]=5;s(c,t.lens,0,32,dt,0,t.work,{bits:5}),ft=!1}t.lencode=ht,t.lenbits=9,t.distcode=dt,t.distbits=5}function gt(t,e,n,i){var o,a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new r.Buf8(a.wsize)),i>=a.wsize?(r.arraySet(a.window,e,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(o=a.wsize-a.wnext,o>i&&(o=i),r.arraySet(a.window,e,n-i,o,a.wnext),i-=o,i?(r.arraySet(a.window,e,n-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}function mt(t,e){var n,tt,et,nt,rt,ot,at,st,lt,ut,ct,ht,dt,ft,mt,yt,vt,bt,_t,xt,wt,St,Et,Ct,Mt=0,Tt=new r.Buf8(4),At=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return y;n=t.state,n.mode===L&&(n.mode=N),rt=t.next_out,et=t.output,at=t.avail_out,nt=t.next_in,tt=t.input,ot=t.avail_in,st=n.hold,lt=n.bits,ut=ot,ct=at,St=p;t:for(;;)switch(n.mode){case w:if(0===n.wrap){n.mode=N;break}while(lt<16){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}if(2&n.wrap&&35615===st){n.check=0,Tt[0]=255&st,Tt[1]=st>>>8&255,n.check=o(n.check,Tt,2,0),st=0,lt=0,n.mode=S;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&st)<<8)+(st>>8))%31){t.msg="incorrect header check",n.mode=K;break}if((15&st)!==x){t.msg="unknown compression method",n.mode=K;break}if(st>>>=4,lt-=4,wt=8+(15&st),0===n.wbits)n.wbits=wt;else if(wt>n.wbits){t.msg="invalid window size",n.mode=K;break}n.dmax=1<<wt,t.adler=n.check=1,n.mode=512&st?I:L,st=0,lt=0;break;case S:while(lt<16){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}if(n.flags=st,(255&n.flags)!==x){t.msg="unknown compression method",n.mode=K;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=K;break}n.head&&(n.head.text=st>>8&1),512&n.flags&&(Tt[0]=255&st,Tt[1]=st>>>8&255,n.check=o(n.check,Tt,2,0)),st=0,lt=0,n.mode=E;case E:while(lt<32){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}n.head&&(n.head.time=st),512&n.flags&&(Tt[0]=255&st,Tt[1]=st>>>8&255,Tt[2]=st>>>16&255,Tt[3]=st>>>24&255,n.check=o(n.check,Tt,4,0)),st=0,lt=0,n.mode=C;case C:while(lt<16){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}n.head&&(n.head.xflags=255&st,n.head.os=st>>8),512&n.flags&&(Tt[0]=255&st,Tt[1]=st>>>8&255,n.check=o(n.check,Tt,2,0)),st=0,lt=0,n.mode=M;case M:if(1024&n.flags){while(lt<16){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}n.length=st,n.head&&(n.head.extra_len=st),512&n.flags&&(Tt[0]=255&st,Tt[1]=st>>>8&255,n.check=o(n.check,Tt,2,0)),st=0,lt=0}else n.head&&(n.head.extra=null);n.mode=T;case T:if(1024&n.flags&&(ht=n.length,ht>ot&&(ht=ot),ht&&(n.head&&(wt=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,tt,nt,ht,wt)),512&n.flags&&(n.check=o(n.check,tt,ht,nt)),ot-=ht,nt+=ht,n.length-=ht),n.length))break t;n.length=0,n.mode=A;case A:if(2048&n.flags){if(0===ot)break t;ht=0;do{wt=tt[nt+ht++],n.head&&wt&&n.length<65536&&(n.head.name+=String.fromCharCode(wt))}while(wt&&ht<ot);if(512&n.flags&&(n.check=o(n.check,tt,ht,nt)),ot-=ht,nt+=ht,wt)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=O;case O:if(4096&n.flags){if(0===ot)break t;ht=0;do{wt=tt[nt+ht++],n.head&&wt&&n.length<65536&&(n.head.comment+=String.fromCharCode(wt))}while(wt&&ht<ot);if(512&n.flags&&(n.check=o(n.check,tt,ht,nt)),ot-=ht,nt+=ht,wt)break t}else n.head&&(n.head.comment=null);n.mode=k;case k:if(512&n.flags){while(lt<16){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}if(st!==(65535&n.check)){t.msg="header crc mismatch",n.mode=K;break}st=0,lt=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=L;break;case I:while(lt<32){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}t.adler=n.check=it(st),st=0,lt=0,n.mode=P;case P:if(0===n.havedict)return t.next_out=rt,t.avail_out=at,t.next_in=nt,t.avail_in=ot,n.hold=st,n.bits=lt,m;t.adler=n.check=1,n.mode=L;case L:if(e===d||e===f)break t;case N:if(n.last){st>>>=7&lt,lt-=7&lt,n.mode=X;break}while(lt<3){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}switch(n.last=1&st,st>>>=1,lt-=1,3&st){case 0:n.mode=R;break;case 1:if(pt(n),n.mode=U,e===f){st>>>=2,lt-=2;break t}break;case 2:n.mode=j;break;case 3:t.msg="invalid block type",n.mode=K}st>>>=2,lt-=2;break;case R:st>>>=7&lt,lt-=7&lt;while(lt<32){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}if((65535&st)!==(st>>>16^65535)){t.msg="invalid stored block lengths",n.mode=K;break}if(n.length=65535&st,st=0,lt=0,n.mode=D,e===f)break t;case D:n.mode=F;case F:if(ht=n.length,ht){if(ht>ot&&(ht=ot),ht>at&&(ht=at),0===ht)break t;r.arraySet(et,tt,nt,ht,rt),ot-=ht,nt+=ht,at-=ht,rt+=ht,n.length-=ht;break}n.mode=L;break;case j:while(lt<14){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}if(n.nlen=257+(31&st),st>>>=5,lt-=5,n.ndist=1+(31&st),st>>>=5,lt-=5,n.ncode=4+(15&st),st>>>=4,lt-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=K;break}n.have=0,n.mode=B;case B:while(n.have<n.ncode){while(lt<3){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}n.lens[At[n.have++]]=7&st,st>>>=3,lt-=3}while(n.have<19)n.lens[At[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Et={bits:n.lenbits},St=s(l,n.lens,0,19,n.lencode,0,n.work,Et),n.lenbits=Et.bits,St){t.msg="invalid code lengths set",n.mode=K;break}n.have=0,n.mode=z;case z:while(n.have<n.nlen+n.ndist){for(;;){if(Mt=n.lencode[st&(1<<n.lenbits)-1],mt=Mt>>>24,yt=Mt>>>16&255,vt=65535&Mt,mt<=lt)break;if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}if(vt<16)st>>>=mt,lt-=mt,n.lens[n.have++]=vt;else{if(16===vt){Ct=mt+2;while(lt<Ct){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}if(st>>>=mt,lt-=mt,0===n.have){t.msg="invalid bit length repeat",n.mode=K;break}wt=n.lens[n.have-1],ht=3+(3&st),st>>>=2,lt-=2}else if(17===vt){Ct=mt+3;while(lt<Ct){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}st>>>=mt,lt-=mt,wt=0,ht=3+(7&st),st>>>=3,lt-=3}else{Ct=mt+7;while(lt<Ct){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}st>>>=mt,lt-=mt,wt=0,ht=11+(127&st),st>>>=7,lt-=7}if(n.have+ht>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=K;break}while(ht--)n.lens[n.have++]=wt}}if(n.mode===K)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=K;break}if(n.lenbits=9,Et={bits:n.lenbits},St=s(u,n.lens,0,n.nlen,n.lencode,0,n.work,Et),n.lenbits=Et.bits,St){t.msg="invalid literal/lengths set",n.mode=K;break}if(n.distbits=6,n.distcode=n.distdyn,Et={bits:n.distbits},St=s(c,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Et),n.distbits=Et.bits,St){t.msg="invalid distances set",n.mode=K;break}if(n.mode=U,e===f)break t;case U:n.mode=G;case G:if(ot>=6&&at>=258){t.next_out=rt,t.avail_out=at,t.next_in=nt,t.avail_in=ot,n.hold=st,n.bits=lt,a(t,ct),rt=t.next_out,et=t.output,at=t.avail_out,nt=t.next_in,tt=t.input,ot=t.avail_in,st=n.hold,lt=n.bits,n.mode===L&&(n.back=-1);break}for(n.back=0;;){if(Mt=n.lencode[st&(1<<n.lenbits)-1],mt=Mt>>>24,yt=Mt>>>16&255,vt=65535&Mt,mt<=lt)break;if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}if(yt&&0===(240&yt)){for(bt=mt,_t=yt,xt=vt;;){if(Mt=n.lencode[xt+((st&(1<<bt+_t)-1)>>bt)],mt=Mt>>>24,yt=Mt>>>16&255,vt=65535&Mt,bt+mt<=lt)break;if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}st>>>=bt,lt-=bt,n.back+=bt}if(st>>>=mt,lt-=mt,n.back+=mt,n.length=vt,0===yt){n.mode=Y;break}if(32&yt){n.back=-1,n.mode=L;break}if(64&yt){t.msg="invalid literal/length code",n.mode=K;break}n.extra=15&yt,n.mode=q;case q:if(n.extra){Ct=n.extra;while(lt<Ct){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}n.length+=st&(1<<n.extra)-1,st>>>=n.extra,lt-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=V;case V:for(;;){if(Mt=n.distcode[st&(1<<n.distbits)-1],mt=Mt>>>24,yt=Mt>>>16&255,vt=65535&Mt,mt<=lt)break;if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}if(0===(240&yt)){for(bt=mt,_t=yt,xt=vt;;){if(Mt=n.distcode[xt+((st&(1<<bt+_t)-1)>>bt)],mt=Mt>>>24,yt=Mt>>>16&255,vt=65535&Mt,bt+mt<=lt)break;if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}st>>>=bt,lt-=bt,n.back+=bt}if(st>>>=mt,lt-=mt,n.back+=mt,64&yt){t.msg="invalid distance code",n.mode=K;break}n.offset=vt,n.extra=15&yt,n.mode=H;case H:if(n.extra){Ct=n.extra;while(lt<Ct){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}n.offset+=st&(1<<n.extra)-1,st>>>=n.extra,lt-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=K;break}n.mode=W;case W:if(0===at)break t;if(ht=ct-at,n.offset>ht){if(ht=n.offset-ht,ht>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=K;break}ht>n.wnext?(ht-=n.wnext,dt=n.wsize-ht):dt=n.wnext-ht,ht>n.length&&(ht=n.length),ft=n.window}else ft=et,dt=rt-n.offset,ht=n.length;ht>at&&(ht=at),at-=ht,n.length-=ht;do{et[rt++]=ft[dt++]}while(--ht);0===n.length&&(n.mode=G);break;case Y:if(0===at)break t;et[rt++]=n.length,at--,n.mode=G;break;case X:if(n.wrap){while(lt<32){if(0===ot)break t;ot--,st|=tt[nt++]<<lt,lt+=8}if(ct-=at,t.total_out+=ct,n.total+=ct,ct&&(t.adler=n.check=n.flags?o(n.check,et,ct,rt-ct):i(n.check,et,ct,rt-ct)),ct=at,(n.flags?st:it(st))!==n.check){t.msg="incorrect data check",n.mode=K;break}st=0,lt=0}n.mode=J;case J:if(n.wrap&&n.flags){while(lt<32){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}if(st!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=K;break}st=0,lt=0}n.mode=Z;case Z:St=g;break t;case K:St=v;break t;case Q:return b;case $:default:return y}return t.next_out=rt,t.avail_out=at,t.next_in=nt,t.avail_in=ot,n.hold=st,n.bits=lt,(n.wsize||ct!==t.avail_out&&n.mode<K&&(n.mode<X||e!==h))&&gt(t,t.output,t.next_out,ct-t.avail_out)?(n.mode=Q,b):(ut-=t.avail_in,ct-=t.avail_out,t.total_in+=ut,t.total_out+=ct,n.total+=ct,n.wrap&&ct&&(t.adler=n.check=n.flags?o(n.check,et,ct,t.next_out-ct):i(n.check,et,ct,t.next_out-ct)),t.data_type=n.bits+(n.last?64:0)+(n.mode===L?128:0)+(n.mode===U||n.mode===D?256:0),(0===ut&&0===ct||e===h)&&St===p&&(St=_),St)}function yt(t){if(!t||!t.state)return y;var e=t.state;return e.window&&(e.window=null),t.state=null,p}function vt(t,e){var n;return t&&t.state?(n=t.state,0===(2&n.wrap)?y:(n.head=e,e.done=!1,p)):y}function bt(t,e){var n,r,o,a=e.length;return t&&t.state?(n=t.state,0!==n.wrap&&n.mode!==P?y:n.mode===P&&(r=1,r=i(r,e,a,0),r!==n.check)?v:(o=gt(t,e,a,a),o?(n.mode=Q,b):(n.havedict=1,p))):y}e.inflateReset=st,e.inflateReset2=lt,e.inflateResetKeep=at,e.inflateInit=ct,e.inflateInit2=ut,e.inflate=mt,e.inflateEnd=yt,e.inflateGetHeader=vt,e.inflateSetDictionary=bt,e.inflateInfo="pako inflate (from Nodeca project)"},"9e6f":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["wait_for_active_shards","op_type","parent","refresh","routing","timeout","timestamp","ttl","version","version_type","pipeline","pretty","human","error_trace","source","filter_path"],a={waitForActiveShards:"wait_for_active_shards",opType:"op_type",versionType:"version_type",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["index"]){const t=new n("Missing required parameter: index");return r(t,l)}if(null==t["type"]){const t=new n("Missing required parameter: type");return r(t,l)}if(null==t["body"]){const t=new n("Missing required parameter: body");return r(t,l)}if(null!=t["id"]&&(null==t["type"]||null==t["index"])){const t=new n("Missing required parameter of the url: type, index");return r(t,l)}if(null!=t["type"]&&null==t["index"]){const t=new n("Missing required parameter of the url: index");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,id:d,index:f,type:p,...g}=t;g=i(o,a,g,u),null==c&&(c="POST");var m=s.ignore;"number"===typeof m&&(s.ignore=[m]);var y="";y=null!=f&&null!=p&&null!=d?"/"+encodeURIComponent(f)+"/"+encodeURIComponent(p)+"/"+encodeURIComponent(d):"/"+encodeURIComponent(f)+"/"+encodeURIComponent(p);const v={method:c,path:y,body:h||"",querystring:g};return s.warnings=0===u.length?null:u,e(v,s,l)}}t.exports=r},"9e88":function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["timeout","master_timeout","ignore_unavailable","allow_no_indices","expand_wildcards","update_all_types","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",ignoreUnavailable:"ignore_unavailable",allowNoIndices:"allow_no_indices",expandWildcards:"expand_wildcards",updateAllTypes:"update_all_types",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["type"]){const t=new n("Missing required parameter: type");return r(t,l)}if(null==t["body"]){const t=new n("Missing required parameter: body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,type:f,...p}=t;p=i(o,a,p,u),null==c&&(c="PUT");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m=null!=d&&null!=f?"/"+encodeURIComponent(d)+"/"+encodeURIComponent(f)+"/_mapping":null!=d&&null!=f?"/"+encodeURIComponent(d)+"/_mapping/"+encodeURIComponent(f):null!=d&&null!=f?"/"+encodeURIComponent(d)+"/"+encodeURIComponent(f)+"/_mappings":null!=d&&null!=f?"/"+encodeURIComponent(d)+"/_mappings/"+encodeURIComponent(f):null!=f?"/_mapping/"+encodeURIComponent(f):"/_mappings/"+encodeURIComponent(f);const y={method:c,path:m,body:h||"",querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},"9f27":function(t,e,n){"use strict";n.d(e,"c",(function(){return h})),n.d(e,"b",(function(){return d})),n.d(e,"a",(function(){return f}));var r=n("9ab4"),i=n("4799"),o=Math.sin,a=Math.cos,s=Math.atan2,l=Math.PI;function u(t,e,n,r,u,c,h){var d=e.stroke,f=e.lineWidth,p=n-u,g=r-c,m=s(g,p),y=new i["Path"]({type:"path",canvas:t.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*a(l/6)+","+10*o(l/6)+" L0,0 L"+10*a(l/6)+",-"+10*o(l/6),stroke:d,lineWidth:f}});y.translate(u,c),y.rotateAtPoint(u,c,m),t.set(h?"startArrowShape":"endArrowShape",y)}function c(t,e,n,l,u,c,h){var d=e.startArrow,f=e.endArrow,p=e.stroke,g=e.lineWidth,m=h?d:f,y=m.d,v=m.fill,b=m.stroke,_=m.lineWidth,x=Object(r["__rest"])(m,["d","fill","stroke","lineWidth"]),w=n-u,S=l-c,E=s(S,w);y&&(u-=a(E)*y,c-=o(E)*y);var C=new i["Path"]({type:"path",canvas:t.get("canvas"),isArrowShape:!0,attrs:Object(r["__assign"])(Object(r["__assign"])({},x),{stroke:b||p,lineWidth:_||g,fill:v})});C.translate(u,c),C.rotateAtPoint(u,c,E),t.set(h?"startArrowShape":"endArrowShape",C)}function h(t,e,n,r,i){var l=s(r-e,n-t);return{dx:a(l)*i,dy:o(l)*i}}function d(t,e,n,r,i,o){"object"===typeof e.startArrow?c(t,e,n,r,i,o,!0):e.startArrow?u(t,e,n,r,i,o,!0):t.set("startArrowShape",null)}function f(t,e,n,r,i,o){"object"===typeof e.endArrow?c(t,e,n,r,i,o,!1):e.endArrow?u(t,e,n,r,i,o,!1):t.set("startArrowShape",null)}},"9fba":function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=s(n("264e")),o=n("9023");function a(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(a=function(t){return t?n:e})(t)}function s(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!==typeof t)return{default:t};var n=a(e);if(n&&n.has(t))return n.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if("default"!==s&&Object.prototype.hasOwnProperty.call(t,s)){var l=o?Object.getOwnPropertyDescriptor(t,s):null;l&&(l.get||l.set)?Object.defineProperty(i,s,l):i[s]=t[s]}return i.default=t,n&&n.set(t,i),i}var l="undefined"!==typeof self?self:{};l.onmessage=function(t){var e=t.data,n=e._algorithmType,r=e.data;if(n)if("function"!==typeof i[n])l.postMessage({_algorithmType:o.MESSAGE.FAILURE});else{var a=i[n].apply(i,r);l.postMessage({_algorithmType:o.MESSAGE.SUCCESS,data:a})}};var u=null;e.default=u},"9fe7":function(t,e,n){"use strict";n.r(e),n.d(e,"create",(function(){return i})),n.d(e,"clone",(function(){return o})),n.d(e,"length",(function(){return a})),n.d(e,"fromValues",(function(){return s})),n.d(e,"copy",(function(){return l})),n.d(e,"set",(function(){return u})),n.d(e,"add",(function(){return c})),n.d(e,"subtract",(function(){return h})),n.d(e,"multiply",(function(){return d})),n.d(e,"divide",(function(){return f})),n.d(e,"ceil",(function(){return p})),n.d(e,"floor",(function(){return g})),n.d(e,"min",(function(){return m})),n.d(e,"max",(function(){return y})),n.d(e,"round",(function(){return v})),n.d(e,"scale",(function(){return b})),n.d(e,"scaleAndAdd",(function(){return _})),n.d(e,"distance",(function(){return x})),n.d(e,"squaredDistance",(function(){return w})),n.d(e,"squaredLength",(function(){return S})),n.d(e,"negate",(function(){return E})),n.d(e,"inverse",(function(){return C})),n.d(e,"normalize",(function(){return M})),n.d(e,"dot",(function(){return T})),n.d(e,"cross",(function(){return A})),n.d(e,"lerp",(function(){return O})),n.d(e,"hermite",(function(){return k})),n.d(e,"bezier",(function(){return I})),n.d(e,"random",(function(){return P})),n.d(e,"transformMat4",(function(){return L})),n.d(e,"transformMat3",(function(){return N})),n.d(e,"transformQuat",(function(){return R})),n.d(e,"rotateX",(function(){return D})),n.d(e,"rotateY",(function(){return F})),n.d(e,"rotateZ",(function(){return j})),n.d(e,"angle",(function(){return B})),n.d(e,"zero",(function(){return z})),n.d(e,"str",(function(){return U})),n.d(e,"exactEquals",(function(){return G})),n.d(e,"equals",(function(){return q})),n.d(e,"sub",(function(){return V})),n.d(e,"mul",(function(){return H})),n.d(e,"div",(function(){return W})),n.d(e,"dist",(function(){return Y})),n.d(e,"sqrDist",(function(){return X})),n.d(e,"len",(function(){return J})),n.d(e,"sqrLen",(function(){return Z})),n.d(e,"forEach",(function(){return K}));var r=n("c94d");function i(){var t=new r["ARRAY_TYPE"](3);return r["ARRAY_TYPE"]!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function o(t){var e=new r["ARRAY_TYPE"](3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function a(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function s(t,e,n){var i=new r["ARRAY_TYPE"](3);return i[0]=t,i[1]=e,i[2]=n,i}function l(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function u(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function c(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function h(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function d(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function f(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function p(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function g(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function m(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function y(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function v(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function b(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function _(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function x(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.hypot(n,r,i)}function w(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function S(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function E(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function C(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function M(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function T(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function A(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],l=n[2];return t[0]=i*l-o*s,t[1]=o*a-r*l,t[2]=r*s-i*a,t}function O(t,e,n,r){var i=e[0],o=e[1],a=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t}function k(t,e,n,r,i,o){var a=o*o,s=a*(2*o-3)+1,l=a*(o-2)+o,u=a*(o-1),c=a*(3-2*o);return t[0]=e[0]*s+n[0]*l+r[0]*u+i[0]*c,t[1]=e[1]*s+n[1]*l+r[1]*u+i[1]*c,t[2]=e[2]*s+n[2]*l+r[2]*u+i[2]*c,t}function I(t,e,n,r,i,o){var a=1-o,s=a*a,l=o*o,u=s*a,c=3*o*s,h=3*l*a,d=l*o;return t[0]=e[0]*u+n[0]*c+r[0]*h+i[0]*d,t[1]=e[1]*u+n[1]*c+r[1]*h+i[1]*d,t[2]=e[2]*u+n[2]*c+r[2]*h+i[2]*d,t}function P(t,e){e=e||1;var n=2*r["RANDOM"]()*Math.PI,i=2*r["RANDOM"]()-1,o=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(n)*o,t[1]=Math.sin(n)*o,t[2]=i*e,t}function L(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t}function N(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}function R(t,e,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],l=e[1],u=e[2],c=i*u-o*l,h=o*s-r*u,d=r*l-i*s,f=i*d-o*h,p=o*c-r*d,g=r*h-i*c,m=2*a;return c*=m,h*=m,d*=m,f*=2,p*=2,g*=2,t[0]=s+c+f,t[1]=l+h+p,t[2]=u+d+g,t}function D(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function F(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function j(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function B(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],s=e[2],l=Math.sqrt(n*n+r*r+i*i),u=Math.sqrt(o*o+a*a+s*s),c=l*u,h=c&&T(t,e)/c;return Math.acos(Math.min(Math.max(h,-1),1))}function z(t){return t[0]=0,t[1]=0,t[2]=0,t}function U(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function G(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function q(t,e){var n=t[0],i=t[1],o=t[2],a=e[0],s=e[1],l=e[2];return Math.abs(n-a)<=r["EPSILON"]*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-s)<=r["EPSILON"]*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-l)<=r["EPSILON"]*Math.max(1,Math.abs(o),Math.abs(l))}var V=h,H=d,W=f,Y=x,X=w,J=a,Z=S,K=function(){var t=i();return function(e,n,r,i,o,a){var s,l;for(n||(n=3),r||(r=0),l=i?Math.min(i*n+r,e.length):e.length,s=r;s<l;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}()},a030:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["analyzer","char_filter","field","filter","index","prefer_local","text","tokenizer","explain","attributes","format","pretty","human","error_trace","source","filter_path"],a={charFilter:"char_filter",preferLocal:"prefer_local",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,...f}=t;f=i(o,a,f,u),null==c&&(c=null==h?"GET":"POST");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g=null!=d?"/"+encodeURIComponent(d)+"/_analyze":"/_analyze";const m={method:c,path:g,body:h||"",querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},a177:function(t,e,n){"use strict";var r,i=n("be7f"),o=n("07f4"),a=n("c834"),s=n("eeda"),l=n("4dc6"),u=0,c=1,h=3,d=4,f=5,p=0,g=1,m=-2,y=-3,v=-5,b=-1,_=1,x=2,w=3,S=4,E=0,C=2,M=8,T=9,A=15,O=8,k=29,I=256,P=I+1+k,L=30,N=19,R=2*P+1,D=15,F=3,j=258,B=j+F+1,z=32,U=42,G=69,q=73,V=91,H=103,W=113,Y=666,X=1,J=2,Z=3,K=4,Q=3;function $(t,e){return t.msg=l[e],e}function tt(t){return(t<<1)-(t>4?9:0)}function et(t){var e=t.length;while(--e>=0)t[e]=0}function nt(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(i.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function rt(t,e){o._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,nt(t.strm)}function it(t,e){t.pending_buf[t.pending++]=e}function ot(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function at(t,e,n,r){var o=t.avail_in;return o>r&&(o=r),0===o?0:(t.avail_in-=o,i.arraySet(e,t.input,t.next_in,o,n),1===t.state.wrap?t.adler=a(t.adler,e,o,n):2===t.state.wrap&&(t.adler=s(t.adler,e,o,n)),t.next_in+=o,t.total_in+=o,o)}function st(t,e){var n,r,i=t.max_chain_length,o=t.strstart,a=t.prev_length,s=t.nice_match,l=t.strstart>t.w_size-B?t.strstart-(t.w_size-B):0,u=t.window,c=t.w_mask,h=t.prev,d=t.strstart+j,f=u[o+a-1],p=u[o+a];t.prev_length>=t.good_match&&(i>>=2),s>t.lookahead&&(s=t.lookahead);do{if(n=e,u[n+a]===p&&u[n+a-1]===f&&u[n]===u[o]&&u[++n]===u[o+1]){o+=2,n++;do{}while(u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&o<d);if(r=j-(d-o),o=d-j,r>a){if(t.match_start=e,a=r,r>=s)break;f=u[o+a-1],p=u[o+a]}}}while((e=h[e&c])>l&&0!==--i);return a<=t.lookahead?a:t.lookahead}function lt(t){var e,n,r,o,a,s=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=s+(s-B)){i.arraySet(t.window,t.window,s,s,0),t.match_start-=s,t.strstart-=s,t.block_start-=s,n=t.hash_size,e=n;do{r=t.head[--e],t.head[e]=r>=s?r-s:0}while(--n);n=s,e=n;do{r=t.prev[--e],t.prev[e]=r>=s?r-s:0}while(--n);o+=s}if(0===t.strm.avail_in)break;if(n=at(t.strm,t.window,t.strstart+t.lookahead,o),t.lookahead+=n,t.lookahead+t.insert>=F){a=t.strstart-t.insert,t.ins_h=t.window[a],t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+1])&t.hash_mask;while(t.insert)if(t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+F-1])&t.hash_mask,t.prev[a&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=a,a++,t.insert--,t.lookahead+t.insert<F)break}}while(t.lookahead<B&&0!==t.strm.avail_in)}function ut(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(lt(t),0===t.lookahead&&e===u)return X;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+n;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,rt(t,!1),0===t.strm.avail_out))return X;if(t.strstart-t.block_start>=t.w_size-B&&(rt(t,!1),0===t.strm.avail_out))return X}return t.insert=0,e===d?(rt(t,!0),0===t.strm.avail_out?Z:K):(t.strstart>t.block_start&&(rt(t,!1),t.strm.avail_out),X)}function ct(t,e){for(var n,r;;){if(t.lookahead<B){if(lt(t),t.lookahead<B&&e===u)return X;if(0===t.lookahead)break}if(n=0,t.lookahead>=F&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+F-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-B&&(t.match_length=st(t,n)),t.match_length>=F)if(r=o._tr_tally(t,t.strstart-t.match_start,t.match_length-F),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=F){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+F-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else r=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(rt(t,!1),0===t.strm.avail_out))return X}return t.insert=t.strstart<F-1?t.strstart:F-1,e===d?(rt(t,!0),0===t.strm.avail_out?Z:K):t.last_lit&&(rt(t,!1),0===t.strm.avail_out)?X:J}function ht(t,e){for(var n,r,i;;){if(t.lookahead<B){if(lt(t),t.lookahead<B&&e===u)return X;if(0===t.lookahead)break}if(n=0,t.lookahead>=F&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+F-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=F-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-B&&(t.match_length=st(t,n),t.match_length<=5&&(t.strategy===_||t.match_length===F&&t.strstart-t.match_start>4096)&&(t.match_length=F-1)),t.prev_length>=F&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-F,r=o._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-F),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+F-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!==--t.prev_length);if(t.match_available=0,t.match_length=F-1,t.strstart++,r&&(rt(t,!1),0===t.strm.avail_out))return X}else if(t.match_available){if(r=o._tr_tally(t,0,t.window[t.strstart-1]),r&&rt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return X}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=o._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<F-1?t.strstart:F-1,e===d?(rt(t,!0),0===t.strm.avail_out?Z:K):t.last_lit&&(rt(t,!1),0===t.strm.avail_out)?X:J}function dt(t,e){for(var n,r,i,a,s=t.window;;){if(t.lookahead<=j){if(lt(t),t.lookahead<=j&&e===u)return X;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=F&&t.strstart>0&&(i=t.strstart-1,r=s[i],r===s[++i]&&r===s[++i]&&r===s[++i])){a=t.strstart+j;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<a);t.match_length=j-(a-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=F?(n=o._tr_tally(t,1,t.match_length-F),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(rt(t,!1),0===t.strm.avail_out))return X}return t.insert=0,e===d?(rt(t,!0),0===t.strm.avail_out?Z:K):t.last_lit&&(rt(t,!1),0===t.strm.avail_out)?X:J}function ft(t,e){for(var n;;){if(0===t.lookahead&&(lt(t),0===t.lookahead)){if(e===u)return X;break}if(t.match_length=0,n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(rt(t,!1),0===t.strm.avail_out))return X}return t.insert=0,e===d?(rt(t,!0),0===t.strm.avail_out?Z:K):t.last_lit&&(rt(t,!1),0===t.strm.avail_out)?X:J}function pt(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i}function gt(t){t.window_size=2*t.w_size,et(t.head),t.max_lazy_match=r[t.level].max_lazy,t.good_match=r[t.level].good_length,t.nice_match=r[t.level].nice_length,t.max_chain_length=r[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=F-1,t.match_available=0,t.ins_h=0}function mt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=M,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*R),this.dyn_dtree=new i.Buf16(2*(2*L+1)),this.bl_tree=new i.Buf16(2*(2*N+1)),et(this.dyn_ltree),et(this.dyn_dtree),et(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(D+1),this.heap=new i.Buf16(2*P+1),et(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*P+1),et(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function yt(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=C,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?U:W,t.adler=2===e.wrap?0:1,e.last_flush=u,o._tr_init(e),p):$(t,m)}function vt(t){var e=yt(t);return e===p&&gt(t.state),e}function bt(t,e){return t&&t.state?2!==t.state.wrap?m:(t.state.gzhead=e,p):m}function _t(t,e,n,r,o,a){if(!t)return m;var s=1;if(e===b&&(e=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),o<1||o>T||n!==M||r<8||r>15||e<0||e>9||a<0||a>S)return $(t,m);8===r&&(r=9);var l=new mt;return t.state=l,l.strm=t,l.wrap=s,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+F-1)/F),l.window=new i.Buf8(2*l.w_size),l.head=new i.Buf16(l.hash_size),l.prev=new i.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new i.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=a,l.method=n,vt(t)}function xt(t,e){return _t(t,e,M,A,O,E)}function wt(t,e){var n,i,a,l;if(!t||!t.state||e>f||e<0)return t?$(t,m):m;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||i.status===Y&&e!==d)return $(t,0===t.avail_out?v:m);if(i.strm=t,n=i.last_flush,i.last_flush=e,i.status===U)if(2===i.wrap)t.adler=0,it(i,31),it(i,139),it(i,8),i.gzhead?(it(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),it(i,255&i.gzhead.time),it(i,i.gzhead.time>>8&255),it(i,i.gzhead.time>>16&255),it(i,i.gzhead.time>>24&255),it(i,9===i.level?2:i.strategy>=x||i.level<2?4:0),it(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(it(i,255&i.gzhead.extra.length),it(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=s(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=G):(it(i,0),it(i,0),it(i,0),it(i,0),it(i,0),it(i,9===i.level?2:i.strategy>=x||i.level<2?4:0),it(i,Q),i.status=W);else{var y=M+(i.w_bits-8<<4)<<8,b=-1;b=i.strategy>=x||i.level<2?0:i.level<6?1:6===i.level?2:3,y|=b<<6,0!==i.strstart&&(y|=z),y+=31-y%31,i.status=W,ot(i,y),0!==i.strstart&&(ot(i,t.adler>>>16),ot(i,65535&t.adler)),t.adler=1}if(i.status===G)if(i.gzhead.extra){a=i.pending;while(i.gzindex<(65535&i.gzhead.extra.length)){if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),nt(t),a=i.pending,i.pending===i.pending_buf_size))break;it(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++}i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=q)}else i.status=q;if(i.status===q)if(i.gzhead.name){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),nt(t),a=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,it(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),0===l&&(i.gzindex=0,i.status=V)}else i.status=V;if(i.status===V)if(i.gzhead.comment){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),nt(t),a=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,it(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),0===l&&(i.status=H)}else i.status=H;if(i.status===H&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&nt(t),i.pending+2<=i.pending_buf_size&&(it(i,255&t.adler),it(i,t.adler>>8&255),t.adler=0,i.status=W)):i.status=W),0!==i.pending){if(nt(t),0===t.avail_out)return i.last_flush=-1,p}else if(0===t.avail_in&&tt(e)<=tt(n)&&e!==d)return $(t,v);if(i.status===Y&&0!==t.avail_in)return $(t,v);if(0!==t.avail_in||0!==i.lookahead||e!==u&&i.status!==Y){var _=i.strategy===x?ft(i,e):i.strategy===w?dt(i,e):r[i.level].func(i,e);if(_!==Z&&_!==K||(i.status=Y),_===X||_===Z)return 0===t.avail_out&&(i.last_flush=-1),p;if(_===J&&(e===c?o._tr_align(i):e!==f&&(o._tr_stored_block(i,0,0,!1),e===h&&(et(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),nt(t),0===t.avail_out))return i.last_flush=-1,p}return e!==d?p:i.wrap<=0?g:(2===i.wrap?(it(i,255&t.adler),it(i,t.adler>>8&255),it(i,t.adler>>16&255),it(i,t.adler>>24&255),it(i,255&t.total_in),it(i,t.total_in>>8&255),it(i,t.total_in>>16&255),it(i,t.total_in>>24&255)):(ot(i,t.adler>>>16),ot(i,65535&t.adler)),nt(t),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?p:g)}function St(t){var e;return t&&t.state?(e=t.state.status,e!==U&&e!==G&&e!==q&&e!==V&&e!==H&&e!==W&&e!==Y?$(t,m):(t.state=null,e===W?$(t,y):p)):m}function Et(t,e){var n,r,o,s,l,u,c,h,d=e.length;if(!t||!t.state)return m;if(n=t.state,s=n.wrap,2===s||1===s&&n.status!==U||n.lookahead)return m;1===s&&(t.adler=a(t.adler,e,d,0)),n.wrap=0,d>=n.w_size&&(0===s&&(et(n.head),n.strstart=0,n.block_start=0,n.insert=0),h=new i.Buf8(n.w_size),i.arraySet(h,e,d-n.w_size,n.w_size,0),e=h,d=n.w_size),l=t.avail_in,u=t.next_in,c=t.input,t.avail_in=d,t.next_in=0,t.input=e,lt(n);while(n.lookahead>=F){r=n.strstart,o=n.lookahead-(F-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+F-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--o);n.strstart=r,n.lookahead=F-1,lt(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=F-1,n.match_available=0,t.next_in=u,t.input=c,t.avail_in=l,n.wrap=s,p}r=[new pt(0,0,0,0,ut),new pt(4,4,8,4,ct),new pt(4,5,16,8,ct),new pt(4,6,32,32,ct),new pt(4,4,16,16,ht),new pt(8,16,32,32,ht),new pt(8,16,128,128,ht),new pt(8,32,128,256,ht),new pt(32,128,258,1024,ht),new pt(32,258,258,4096,ht)],e.deflateInit=xt,e.deflateInit2=_t,e.deflateReset=vt,e.deflateResetKeep=yt,e.deflateSetHeader=bt,e.deflate=wt,e.deflateEnd=St,e.deflateSetDictionary=Et,e.deflateInfo="pako deflate (from Nodeca project)"},a196:function(t,e,n){"use strict";n.r(e),n.d(e,"World",(function(){return It})),n.d(e,"Kernel",(function(){return H}));var r=n("c973"),i=n.n(r),o=n("9523"),a=n.n(o),s=n("970b"),l=n.n(s),u=n("5bc3"),c=n.n(u),h=n("73ac"),d=n.n(h),f=n("501e"),p=n.n(f),g=n("6747"),m=n.n(g),y=n("a34a"),v=n.n(y),b=1;function _(){return b++}var x;(function(t){t[t["DEPTH_BUFFER_BIT"]=256]="DEPTH_BUFFER_BIT",t[t["STENCIL_BUFFER_BIT"]=1024]="STENCIL_BUFFER_BIT",t[t["COLOR_BUFFER_BIT"]=16384]="COLOR_BUFFER_BIT",t[t["POINTS"]=0]="POINTS",t[t["LINES"]=1]="LINES",t[t["LINE_LOOP"]=2]="LINE_LOOP",t[t["LINE_STRIP"]=3]="LINE_STRIP",t[t["TRIANGLES"]=4]="TRIANGLES",t[t["TRIANGLE_STRIP"]=5]="TRIANGLE_STRIP",t[t["TRIANGLE_FAN"]=6]="TRIANGLE_FAN",t[t["ZERO"]=0]="ZERO",t[t["ONE"]=1]="ONE",t[t["SRC_COLOR"]=768]="SRC_COLOR",t[t["ONE_MINUS_SRC_COLOR"]=769]="ONE_MINUS_SRC_COLOR",t[t["SRC_ALPHA"]=770]="SRC_ALPHA",t[t["ONE_MINUS_SRC_ALPHA"]=771]="ONE_MINUS_SRC_ALPHA",t[t["DST_ALPHA"]=772]="DST_ALPHA",t[t["ONE_MINUS_DST_ALPHA"]=773]="ONE_MINUS_DST_ALPHA",t[t["DST_COLOR"]=774]="DST_COLOR",t[t["ONE_MINUS_DST_COLOR"]=775]="ONE_MINUS_DST_COLOR",t[t["SRC_ALPHA_SATURATE"]=776]="SRC_ALPHA_SATURATE",t[t["FUNC_ADD"]=32774]="FUNC_ADD",t[t["BLEND_EQUATION"]=32777]="BLEND_EQUATION",t[t["BLEND_EQUATION_RGB"]=32777]="BLEND_EQUATION_RGB",t[t["BLEND_EQUATION_ALPHA"]=34877]="BLEND_EQUATION_ALPHA",t[t["FUNC_SUBTRACT"]=32778]="FUNC_SUBTRACT",t[t["FUNC_REVERSE_SUBTRACT"]=32779]="FUNC_REVERSE_SUBTRACT",t[t["MAX_EXT"]=32776]="MAX_EXT",t[t["MIN_EXT"]=32775]="MIN_EXT",t[t["BLEND_DST_RGB"]=32968]="BLEND_DST_RGB",t[t["BLEND_SRC_RGB"]=32969]="BLEND_SRC_RGB",t[t["BLEND_DST_ALPHA"]=32970]="BLEND_DST_ALPHA",t[t["BLEND_SRC_ALPHA"]=32971]="BLEND_SRC_ALPHA",t[t["CONSTANT_COLOR"]=32769]="CONSTANT_COLOR",t[t["ONE_MINUS_CONSTANT_COLOR"]=32770]="ONE_MINUS_CONSTANT_COLOR",t[t["CONSTANT_ALPHA"]=32771]="CONSTANT_ALPHA",t[t["ONE_MINUS_CONSTANT_ALPHA"]=32772]="ONE_MINUS_CONSTANT_ALPHA",t[t["BLEND_COLOR"]=32773]="BLEND_COLOR",t[t["ARRAY_BUFFER"]=34962]="ARRAY_BUFFER",t[t["ELEMENT_ARRAY_BUFFER"]=34963]="ELEMENT_ARRAY_BUFFER",t[t["ARRAY_BUFFER_BINDING"]=34964]="ARRAY_BUFFER_BINDING",t[t["ELEMENT_ARRAY_BUFFER_BINDING"]=34965]="ELEMENT_ARRAY_BUFFER_BINDING",t[t["STREAM_DRAW"]=35040]="STREAM_DRAW",t[t["STATIC_DRAW"]=35044]="STATIC_DRAW",t[t["DYNAMIC_DRAW"]=35048]="DYNAMIC_DRAW",t[t["BUFFER_SIZE"]=34660]="BUFFER_SIZE",t[t["BUFFER_USAGE"]=34661]="BUFFER_USAGE",t[t["CURRENT_VERTEX_ATTRIB"]=34342]="CURRENT_VERTEX_ATTRIB",t[t["FRONT"]=1028]="FRONT",t[t["BACK"]=1029]="BACK",t[t["FRONT_AND_BACK"]=1032]="FRONT_AND_BACK",t[t["CULL_FACE"]=2884]="CULL_FACE",t[t["BLEND"]=3042]="BLEND",t[t["DITHER"]=3024]="DITHER",t[t["STENCIL_TEST"]=2960]="STENCIL_TEST",t[t["DEPTH_TEST"]=2929]="DEPTH_TEST",t[t["SCISSOR_TEST"]=3089]="SCISSOR_TEST",t[t["POLYGON_OFFSET_FILL"]=32823]="POLYGON_OFFSET_FILL",t[t["SAMPLE_ALPHA_TO_COVERAGE"]=32926]="SAMPLE_ALPHA_TO_COVERAGE",t[t["SAMPLE_COVERAGE"]=32928]="SAMPLE_COVERAGE",t[t["NO_ERROR"]=0]="NO_ERROR",t[t["INVALID_ENUM"]=1280]="INVALID_ENUM",t[t["INVALID_VALUE"]=1281]="INVALID_VALUE",t[t["INVALID_OPERATION"]=1282]="INVALID_OPERATION",t[t["OUT_OF_MEMORY"]=1285]="OUT_OF_MEMORY",t[t["CW"]=2304]="CW",t[t["CCW"]=2305]="CCW",t[t["LINE_WIDTH"]=2849]="LINE_WIDTH",t[t["ALIASED_POINT_SIZE_RANGE"]=33901]="ALIASED_POINT_SIZE_RANGE",t[t["ALIASED_LINE_WIDTH_RANGE"]=33902]="ALIASED_LINE_WIDTH_RANGE",t[t["CULL_FACE_MODE"]=2885]="CULL_FACE_MODE",t[t["FRONT_FACE"]=2886]="FRONT_FACE",t[t["DEPTH_RANGE"]=2928]="DEPTH_RANGE",t[t["DEPTH_WRITEMASK"]=2930]="DEPTH_WRITEMASK",t[t["DEPTH_CLEAR_VALUE"]=2931]="DEPTH_CLEAR_VALUE",t[t["DEPTH_FUNC"]=2932]="DEPTH_FUNC",t[t["STENCIL_CLEAR_VALUE"]=2961]="STENCIL_CLEAR_VALUE",t[t["STENCIL_FUNC"]=2962]="STENCIL_FUNC",t[t["STENCIL_FAIL"]=2964]="STENCIL_FAIL",t[t["STENCIL_PASS_DEPTH_FAIL"]=2965]="STENCIL_PASS_DEPTH_FAIL",t[t["STENCIL_PASS_DEPTH_PASS"]=2966]="STENCIL_PASS_DEPTH_PASS",t[t["STENCIL_REF"]=2967]="STENCIL_REF",t[t["STENCIL_VALUE_MASK"]=2963]="STENCIL_VALUE_MASK",t[t["STENCIL_WRITEMASK"]=2968]="STENCIL_WRITEMASK",t[t["STENCIL_BACK_FUNC"]=34816]="STENCIL_BACK_FUNC",t[t["STENCIL_BACK_FAIL"]=34817]="STENCIL_BACK_FAIL",t[t["STENCIL_BACK_PASS_DEPTH_FAIL"]=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",t[t["STENCIL_BACK_PASS_DEPTH_PASS"]=34819]="STENCIL_BACK_PASS_DEPTH_PASS",t[t["STENCIL_BACK_REF"]=36003]="STENCIL_BACK_REF",t[t["STENCIL_BACK_VALUE_MASK"]=36004]="STENCIL_BACK_VALUE_MASK",t[t["STENCIL_BACK_WRITEMASK"]=36005]="STENCIL_BACK_WRITEMASK",t[t["VIEWPORT"]=2978]="VIEWPORT",t[t["SCISSOR_BOX"]=3088]="SCISSOR_BOX",t[t["COLOR_CLEAR_VALUE"]=3106]="COLOR_CLEAR_VALUE",t[t["COLOR_WRITEMASK"]=3107]="COLOR_WRITEMASK",t[t["UNPACK_ALIGNMENT"]=3317]="UNPACK_ALIGNMENT",t[t["PACK_ALIGNMENT"]=3333]="PACK_ALIGNMENT",t[t["MAX_TEXTURE_SIZE"]=3379]="MAX_TEXTURE_SIZE",t[t["MAX_VIEWPORT_DIMS"]=3386]="MAX_VIEWPORT_DIMS",t[t["SUBPIXEL_BITS"]=3408]="SUBPIXEL_BITS",t[t["RED_BITS"]=3410]="RED_BITS",t[t["GREEN_BITS"]=3411]="GREEN_BITS",t[t["BLUE_BITS"]=3412]="BLUE_BITS",t[t["ALPHA_BITS"]=3413]="ALPHA_BITS",t[t["DEPTH_BITS"]=3414]="DEPTH_BITS",t[t["STENCIL_BITS"]=3415]="STENCIL_BITS",t[t["POLYGON_OFFSET_UNITS"]=10752]="POLYGON_OFFSET_UNITS",t[t["POLYGON_OFFSET_FACTOR"]=32824]="POLYGON_OFFSET_FACTOR",t[t["TEXTURE_BINDING_2D"]=32873]="TEXTURE_BINDING_2D",t[t["SAMPLE_BUFFERS"]=32936]="SAMPLE_BUFFERS",t[t["SAMPLES"]=32937]="SAMPLES",t[t["SAMPLE_COVERAGE_VALUE"]=32938]="SAMPLE_COVERAGE_VALUE",t[t["SAMPLE_COVERAGE_INVERT"]=32939]="SAMPLE_COVERAGE_INVERT",t[t["COMPRESSED_TEXTURE_FORMATS"]=34467]="COMPRESSED_TEXTURE_FORMATS",t[t["DONT_CARE"]=4352]="DONT_CARE",t[t["FASTEST"]=4353]="FASTEST",t[t["NICEST"]=4354]="NICEST",t[t["GENERATE_MIPMAP_HINT"]=33170]="GENERATE_MIPMAP_HINT",t[t["BYTE"]=5120]="BYTE",t[t["UNSIGNED_BYTE"]=5121]="UNSIGNED_BYTE",t[t["SHORT"]=5122]="SHORT",t[t["UNSIGNED_SHORT"]=5123]="UNSIGNED_SHORT",t[t["INT"]=5124]="INT",t[t["UNSIGNED_INT"]=5125]="UNSIGNED_INT",t[t["FLOAT"]=5126]="FLOAT",t[t["DEPTH_COMPONENT"]=6402]="DEPTH_COMPONENT",t[t["ALPHA"]=6406]="ALPHA",t[t["RGB"]=6407]="RGB",t[t["RGBA"]=6408]="RGBA",t[t["LUMINANCE"]=6409]="LUMINANCE",t[t["LUMINANCE_ALPHA"]=6410]="LUMINANCE_ALPHA",t[t["UNSIGNED_SHORT_4_4_4_4"]=32819]="UNSIGNED_SHORT_4_4_4_4",t[t["UNSIGNED_SHORT_5_5_5_1"]=32820]="UNSIGNED_SHORT_5_5_5_1",t[t["UNSIGNED_SHORT_5_6_5"]=33635]="UNSIGNED_SHORT_5_6_5",t[t["FRAGMENT_SHADER"]=35632]="FRAGMENT_SHADER",t[t["VERTEX_SHADER"]=35633]="VERTEX_SHADER",t[t["MAX_VERTEX_ATTRIBS"]=34921]="MAX_VERTEX_ATTRIBS",t[t["MAX_VERTEX_UNIFORM_VECTORS"]=36347]="MAX_VERTEX_UNIFORM_VECTORS",t[t["MAX_VARYING_VECTORS"]=36348]="MAX_VARYING_VECTORS",t[t["MAX_COMBINED_TEXTURE_IMAGE_UNITS"]=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",t[t["MAX_VERTEX_TEXTURE_IMAGE_UNITS"]=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",t[t["MAX_TEXTURE_IMAGE_UNITS"]=34930]="MAX_TEXTURE_IMAGE_UNITS",t[t["MAX_FRAGMENT_UNIFORM_VECTORS"]=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",t[t["SHADER_TYPE"]=35663]="SHADER_TYPE",t[t["DELETE_STATUS"]=35712]="DELETE_STATUS",t[t["LINK_STATUS"]=35714]="LINK_STATUS",t[t["VALIDATE_STATUS"]=35715]="VALIDATE_STATUS",t[t["ATTACHED_SHADERS"]=35717]="ATTACHED_SHADERS",t[t["ACTIVE_UNIFORMS"]=35718]="ACTIVE_UNIFORMS",t[t["ACTIVE_ATTRIBUTES"]=35721]="ACTIVE_ATTRIBUTES",t[t["SHADING_LANGUAGE_VERSION"]=35724]="SHADING_LANGUAGE_VERSION",t[t["CURRENT_PROGRAM"]=35725]="CURRENT_PROGRAM",t[t["NEVER"]=512]="NEVER",t[t["LESS"]=513]="LESS",t[t["EQUAL"]=514]="EQUAL",t[t["LEQUAL"]=515]="LEQUAL",t[t["GREATER"]=516]="GREATER",t[t["NOTEQUAL"]=517]="NOTEQUAL",t[t["GEQUAL"]=518]="GEQUAL",t[t["ALWAYS"]=519]="ALWAYS",t[t["KEEP"]=7680]="KEEP",t[t["REPLACE"]=7681]="REPLACE",t[t["INCR"]=7682]="INCR",t[t["DECR"]=7683]="DECR",t[t["INVERT"]=5386]="INVERT",t[t["INCR_WRAP"]=34055]="INCR_WRAP",t[t["DECR_WRAP"]=34056]="DECR_WRAP",t[t["VENDOR"]=7936]="VENDOR",t[t["RENDERER"]=7937]="RENDERER",t[t["VERSION"]=7938]="VERSION",t[t["NEAREST"]=9728]="NEAREST",t[t["LINEAR"]=9729]="LINEAR",t[t["NEAREST_MIPMAP_NEAREST"]=9984]="NEAREST_MIPMAP_NEAREST",t[t["LINEAR_MIPMAP_NEAREST"]=9985]="LINEAR_MIPMAP_NEAREST",t[t["NEAREST_MIPMAP_LINEAR"]=9986]="NEAREST_MIPMAP_LINEAR",t[t["LINEAR_MIPMAP_LINEAR"]=9987]="LINEAR_MIPMAP_LINEAR",t[t["TEXTURE_MAG_FILTER"]=10240]="TEXTURE_MAG_FILTER",t[t["TEXTURE_MIN_FILTER"]=10241]="TEXTURE_MIN_FILTER",t[t["TEXTURE_WRAP_S"]=10242]="TEXTURE_WRAP_S",t[t["TEXTURE_WRAP_T"]=10243]="TEXTURE_WRAP_T",t[t["TEXTURE_2D"]=3553]="TEXTURE_2D",t[t["TEXTURE"]=5890]="TEXTURE",t[t["TEXTURE_CUBE_MAP"]=34067]="TEXTURE_CUBE_MAP",t[t["TEXTURE_BINDING_CUBE_MAP"]=34068]="TEXTURE_BINDING_CUBE_MAP",t[t["TEXTURE_CUBE_MAP_POSITIVE_X"]=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t["TEXTURE_CUBE_MAP_NEGATIVE_X"]=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t["TEXTURE_CUBE_MAP_POSITIVE_Y"]=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t["TEXTURE_CUBE_MAP_NEGATIVE_Y"]=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t["TEXTURE_CUBE_MAP_POSITIVE_Z"]=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t["TEXTURE_CUBE_MAP_NEGATIVE_Z"]=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t[t["MAX_CUBE_MAP_TEXTURE_SIZE"]=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",t[t["TEXTURE0"]=33984]="TEXTURE0",t[t["TEXTURE1"]=33985]="TEXTURE1",t[t["TEXTURE2"]=33986]="TEXTURE2",t[t["TEXTURE3"]=33987]="TEXTURE3",t[t["TEXTURE4"]=33988]="TEXTURE4",t[t["TEXTURE5"]=33989]="TEXTURE5",t[t["TEXTURE6"]=33990]="TEXTURE6",t[t["TEXTURE7"]=33991]="TEXTURE7",t[t["TEXTURE8"]=33992]="TEXTURE8",t[t["TEXTURE9"]=33993]="TEXTURE9",t[t["TEXTURE10"]=33994]="TEXTURE10",t[t["TEXTURE11"]=33995]="TEXTURE11",t[t["TEXTURE12"]=33996]="TEXTURE12",t[t["TEXTURE13"]=33997]="TEXTURE13",t[t["TEXTURE14"]=33998]="TEXTURE14",t[t["TEXTURE15"]=33999]="TEXTURE15",t[t["TEXTURE16"]=34e3]="TEXTURE16",t[t["TEXTURE17"]=34001]="TEXTURE17",t[t["TEXTURE18"]=34002]="TEXTURE18",t[t["TEXTURE19"]=34003]="TEXTURE19",t[t["TEXTURE20"]=34004]="TEXTURE20",t[t["TEXTURE21"]=34005]="TEXTURE21",t[t["TEXTURE22"]=34006]="TEXTURE22",t[t["TEXTURE23"]=34007]="TEXTURE23",t[t["TEXTURE24"]=34008]="TEXTURE24",t[t["TEXTURE25"]=34009]="TEXTURE25",t[t["TEXTURE26"]=34010]="TEXTURE26",t[t["TEXTURE27"]=34011]="TEXTURE27",t[t["TEXTURE28"]=34012]="TEXTURE28",t[t["TEXTURE29"]=34013]="TEXTURE29",t[t["TEXTURE30"]=34014]="TEXTURE30",t[t["TEXTURE31"]=34015]="TEXTURE31",t[t["ACTIVE_TEXTURE"]=34016]="ACTIVE_TEXTURE",t[t["REPEAT"]=10497]="REPEAT",t[t["CLAMP_TO_EDGE"]=33071]="CLAMP_TO_EDGE",t[t["MIRRORED_REPEAT"]=33648]="MIRRORED_REPEAT",t[t["FLOAT_VEC2"]=35664]="FLOAT_VEC2",t[t["FLOAT_VEC3"]=35665]="FLOAT_VEC3",t[t["FLOAT_VEC4"]=35666]="FLOAT_VEC4",t[t["INT_VEC2"]=35667]="INT_VEC2",t[t["INT_VEC3"]=35668]="INT_VEC3",t[t["INT_VEC4"]=35669]="INT_VEC4",t[t["BOOL"]=35670]="BOOL",t[t["BOOL_VEC2"]=35671]="BOOL_VEC2",t[t["BOOL_VEC3"]=35672]="BOOL_VEC3",t[t["BOOL_VEC4"]=35673]="BOOL_VEC4",t[t["FLOAT_MAT2"]=35674]="FLOAT_MAT2",t[t["FLOAT_MAT3"]=35675]="FLOAT_MAT3",t[t["FLOAT_MAT4"]=35676]="FLOAT_MAT4",t[t["SAMPLER_2D"]=35678]="SAMPLER_2D",t[t["SAMPLER_CUBE"]=35680]="SAMPLER_CUBE",t[t["VERTEX_ATTRIB_ARRAY_ENABLED"]=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",t[t["VERTEX_ATTRIB_ARRAY_SIZE"]=34339]="VERTEX_ATTRIB_ARRAY_SIZE",t[t["VERTEX_ATTRIB_ARRAY_STRIDE"]=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",t[t["VERTEX_ATTRIB_ARRAY_TYPE"]=34341]="VERTEX_ATTRIB_ARRAY_TYPE",t[t["VERTEX_ATTRIB_ARRAY_NORMALIZED"]=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",t[t["VERTEX_ATTRIB_ARRAY_POINTER"]=34373]="VERTEX_ATTRIB_ARRAY_POINTER",t[t["VERTEX_ATTRIB_ARRAY_BUFFER_BINDING"]=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",t[t["COMPILE_STATUS"]=35713]="COMPILE_STATUS",t[t["LOW_FLOAT"]=36336]="LOW_FLOAT",t[t["MEDIUM_FLOAT"]=36337]="MEDIUM_FLOAT",t[t["HIGH_FLOAT"]=36338]="HIGH_FLOAT",t[t["LOW_INT"]=36339]="LOW_INT",t[t["MEDIUM_INT"]=36340]="MEDIUM_INT",t[t["HIGH_INT"]=36341]="HIGH_INT",t[t["FRAMEBUFFER"]=36160]="FRAMEBUFFER",t[t["RENDERBUFFER"]=36161]="RENDERBUFFER",t[t["RGBA4"]=32854]="RGBA4",t[t["RGB5_A1"]=32855]="RGB5_A1",t[t["RGB565"]=36194]="RGB565",t[t["DEPTH_COMPONENT16"]=33189]="DEPTH_COMPONENT16",t[t["STENCIL_INDEX"]=6401]="STENCIL_INDEX",t[t["STENCIL_INDEX8"]=36168]="STENCIL_INDEX8",t[t["DEPTH_STENCIL"]=34041]="DEPTH_STENCIL",t[t["RENDERBUFFER_WIDTH"]=36162]="RENDERBUFFER_WIDTH",t[t["RENDERBUFFER_HEIGHT"]=36163]="RENDERBUFFER_HEIGHT",t[t["RENDERBUFFER_INTERNAL_FORMAT"]=36164]="RENDERBUFFER_INTERNAL_FORMAT",t[t["RENDERBUFFER_RED_SIZE"]=36176]="RENDERBUFFER_RED_SIZE",t[t["RENDERBUFFER_GREEN_SIZE"]=36177]="RENDERBUFFER_GREEN_SIZE",t[t["RENDERBUFFER_BLUE_SIZE"]=36178]="RENDERBUFFER_BLUE_SIZE",t[t["RENDERBUFFER_ALPHA_SIZE"]=36179]="RENDERBUFFER_ALPHA_SIZE",t[t["RENDERBUFFER_DEPTH_SIZE"]=36180]="RENDERBUFFER_DEPTH_SIZE",t[t["RENDERBUFFER_STENCIL_SIZE"]=36181]="RENDERBUFFER_STENCIL_SIZE",t[t["FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE"]=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",t[t["FRAMEBUFFER_ATTACHMENT_OBJECT_NAME"]=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",t[t["FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL"]=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",t[t["FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE"]=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",t[t["COLOR_ATTACHMENT0"]=36064]="COLOR_ATTACHMENT0",t[t["DEPTH_ATTACHMENT"]=36096]="DEPTH_ATTACHMENT",t[t["STENCIL_ATTACHMENT"]=36128]="STENCIL_ATTACHMENT",t[t["DEPTH_STENCIL_ATTACHMENT"]=33306]="DEPTH_STENCIL_ATTACHMENT",t[t["NONE"]=0]="NONE",t[t["FRAMEBUFFER_COMPLETE"]=36053]="FRAMEBUFFER_COMPLETE",t[t["FRAMEBUFFER_INCOMPLETE_ATTACHMENT"]=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",t[t["FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT"]=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",t[t["FRAMEBUFFER_INCOMPLETE_DIMENSIONS"]=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",t[t["FRAMEBUFFER_UNSUPPORTED"]=36061]="FRAMEBUFFER_UNSUPPORTED",t[t["FRAMEBUFFER_BINDING"]=36006]="FRAMEBUFFER_BINDING",t[t["RENDERBUFFER_BINDING"]=36007]="RENDERBUFFER_BINDING",t[t["MAX_RENDERBUFFER_SIZE"]=34024]="MAX_RENDERBUFFER_SIZE",t[t["INVALID_FRAMEBUFFER_OPERATION"]=1286]="INVALID_FRAMEBUFFER_OPERATION",t[t["UNPACK_FLIP_Y_WEBGL"]=37440]="UNPACK_FLIP_Y_WEBGL",t[t["UNPACK_PREMULTIPLY_ALPHA_WEBGL"]=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",t[t["CONTEXT_LOST_WEBGL"]=37442]="CONTEXT_LOST_WEBGL",t[t["UNPACK_COLORSPACE_CONVERSION_WEBGL"]=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",t[t["BROWSER_DEFAULT_WEBGL"]=37444]="BROWSER_DEFAULT_WEBGL",t[t["COPY_SRC"]=1]="COPY_SRC",t[t["COPY_DST"]=2]="COPY_DST",t[t["SAMPLED"]=4]="SAMPLED",t[t["STORAGE"]=8]="STORAGE",t[t["RENDER_ATTACHMENT"]=16]="RENDER_ATTACHMENT"})(x||(x={}));var w,S,E,C,M=function(){function t(){l()(this,t),this.config=void 0}return c()(t,[{key:"get",value:function(){return this.config}},{key:"set",value:function(t){this.config=t}}]),t}();"undefined"!==typeof navigator&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent);(function(t){t["Void"]="Void",t["Boolean"]="Boolean",t["Float"]="Float",t["Uint32"]="Uint32",t["Int32"]="Int32",t["Vector"]="Vector",t["Vector2Float"]="vec2<f32>",t["Vector3Float"]="vec3<f32>",t["Vector4Float"]="vec4<f32>",t["Vector2Boolean"]="vec2<bool>",t["Vector3Boolean"]="vec3<bool>",t["Vector4Boolean"]="vec4<bool>",t["Vector2Uint"]="vec2<u32>",t["Vector3Uint"]="vec3<u32>",t["Vector4Uint"]="vec4<u32>",t["Vector2Int"]="vec2<i32>",t["Vector3Int"]="vec3<i32>",t["Vector4Int"]="vec4<i32>",t["Matrix"]="Matrix",t["Matrix3x3Float"]="mat3x3<f32>",t["Matrix4x4Float"]="mat4x4<i32>",t["Struct"]="Struct",t["FloatArray"]="Float[]",t["Vector4FloatArray"]="vec4<f32>[]"})(w||(w={})),function(t){t["Program"]="Program",t["Identifier"]="Identifier",t["VariableDeclaration"]="VariableDeclaration",t["BlockStatement"]="BlockStatement",t["ReturnStatement"]="ReturnStatement",t["FunctionDeclaration"]="FunctionDeclaration",t["VariableDeclarator"]="VariableDeclarator",t["AssignmentExpression"]="AssignmentExpression",t["LogicalExpression"]="LogicalExpression",t["BinaryExpression"]="BinaryExpression",t["ArrayExpression"]="ArrayExpression",t["UnaryExpression"]="UnaryExpression",t["UpdateExpression"]="UpdateExpression",t["FunctionExpression"]="FunctionExpression",t["MemberExpression"]="MemberExpression",t["ConditionalExpression"]="ConditionalExpression",t["ExpressionStatement"]="ExpressionStatement",t["CallExpression"]="CallExpression",t["NumThreadStatement"]="NumThreadStatement",t["StorageStatement"]="StorageStatement",t["DoWhileStatement"]="DoWhileStatement",t["WhileStatement"]="WhileStatement",t["ForStatement"]="ForStatement",t["BreakStatement"]="BreakStatement",t["ContinueStatement"]="ContinueStatement",t["IfStatement"]="IfStatement",t["ImportedFunctionStatement"]="ImportedFunctionStatement"}(S||(S={})),function(t){t["Input"]="Input",t["Output"]="Output",t["Uniform"]="Uniform",t["Workgroup"]="Workgroup",t["UniformConstant"]="UniformConstant",t["Image"]="Image",t["StorageBuffer"]="StorageBuffer",t["Private"]="Private",t["Function"]="Function"}(E||(E={})),function(t){t["GLSL100"]="GLSL100",t["GLSL450"]="GLSL450",t["WGSL"]="WGSL"}(C||(C={}));var T="__DefineValuePlaceholder__";function A(){if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){a()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var I,P,L,N,R,D,F,j,B,z,U,G,q,V,H=function(){function t(e,n){l()(this,t),this.engine=e,this.configService=n,this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return c()(t,[{key:"init",value:function(){var t=this.configService.get(),e=t.canvas,n=t.engineOptions;this.initPromise=this.engine.init(k({canvas:e||A(),antialiasing:!1},n))}},{key:"setBundle",value:function(t){this.compiledBundle=JSON.parse(JSON.stringify(t))}},{key:"setDispatch",value:function(t){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=t),this}},{key:"setMaxIteration",value:function(t){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=t),this}},{key:"setBinding",value:function(t,e){var n=this;if("string"===typeof t){var r=p()(e)||d()(e)||m()(e);if(this.compiledBundle&&this.compiledBundle.context){var i=this.compiledBundle.context.defines.find((function(e){return e.name===t}));if(i)return i.value=e,this;var o=this.compiledBundle.context.uniforms.find((function(e){return e.name===t}));o&&(r?(o.data=e,o.isReferer=!1,o.storageClass===E.Uniform?this.model&&this.model.updateUniform(t,e):this.model&&this.model.updateBuffer(t,e)):(o.isReferer=!0,o.data=e))}}else Object.keys(t).forEach((function(e){n.setBinding(e,t[e])}));return this}},{key:"execute",value:function(){var t=i()(v.a.mark((function t(){var e,n,r=this,i=arguments;return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=i.length>0&&void 0!==i[0]?i[0]:1,!this.dirty){t.next=6;break}return this.compiledBundle.context&&(e>1?this.compiledBundle.context.maxIteration=e:this.compiledBundle.context.maxIteration++),t.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter((function(t){var e=t.isReferer;return e})).forEach((function(t){var e=t.data,n=t.name;r.model.confirmInput(e.model,n)})),n=0;n<e;n++)this.model.run();return this.engine.endFrame(),t.abrupt("return",this);case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getOutput",value:function(){var t=i()(v.a.mark((function t(){return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.model.readData());case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"compile",value:function(){var t=i()(v.a.mark((function t(){var e,n,r;return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.initPromise;case 2:return e=k({},this.compiledBundle.context),n=this.engine.supportWebGPU?this.engine.useWGSL?C.WGSL:C.GLSL450:C.GLSL100,r=this.compiledBundle.shaders[n],e.defines.filter((function(t){return t.runtime})).forEach((function(t){var e="".concat(T).concat(t.name);r=r.replace(e,"".concat(t.value))})),e.shader=r,e.uniforms.forEach((function(t){if(!t.data&&t.storageClass===E.StorageBuffer){var n=1;t.type===w.FloatArray?n=1:t.type===w.Vector4FloatArray&&(n=4),t.data=new Float32Array(e.output.length*n).fill(0)}})),this.compiledBundle.context=e,t.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=t.sent;case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),t}(),W=n("7dbb"),Y=n.n(W),X=function(){function t(e,n){l()(this,t),this.attribute=void 0,this.buffer=void 0;var r=n.buffer,i=n.offset,o=n.stride,a=n.normalized,s=n.size,u=n.divisor;this.buffer=r,this.attribute={buffer:r.get(),offset:i||0,stride:o||0,normalized:a||!1,divisor:u||0},s&&(this.attribute.size=s)}return c()(t,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),t}(),J=(I={},a()(I,x.POINTS,"points"),a()(I,x.LINES,"lines"),a()(I,x.LINE_LOOP,"line loop"),a()(I,x.LINE_STRIP,"line strip"),a()(I,x.TRIANGLES,"triangles"),a()(I,x.TRIANGLE_FAN,"triangle fan"),a()(I,x.TRIANGLE_STRIP,"triangle strip"),I),Z=(P={},a()(P,x.STATIC_DRAW,"static"),a()(P,x.DYNAMIC_DRAW,"dynamic"),a()(P,x.STREAM_DRAW,"stream"),P),K=(L={},a()(L,x.BYTE,"int8"),a()(L,x.UNSIGNED_INT,"int16"),a()(L,x.INT,"int32"),a()(L,x.UNSIGNED_BYTE,"uint8"),a()(L,x.UNSIGNED_SHORT,"uint16"),a()(L,x.UNSIGNED_INT,"uint32"),a()(L,x.FLOAT,"float"),L),Q=(N={},a()(N,x.ALPHA,"alpha"),a()(N,x.LUMINANCE,"luminance"),a()(N,x.LUMINANCE_ALPHA,"luminance alpha"),a()(N,x.RGB,"rgb"),a()(N,x.RGBA,"rgba"),a()(N,x.RGBA4,"rgba4"),a()(N,x.RGB5_A1,"rgb5 a1"),a()(N,x.RGB565,"rgb565"),a()(N,x.DEPTH_COMPONENT,"depth"),a()(N,x.DEPTH_STENCIL,"depth stencil"),N),$=(R={},a()(R,x.DONT_CARE,"dont care"),a()(R,x.NICEST,"nice"),a()(R,x.FASTEST,"fast"),R),tt=(D={},a()(D,x.NEAREST,"nearest"),a()(D,x.LINEAR,"linear"),a()(D,x.LINEAR_MIPMAP_LINEAR,"mipmap"),a()(D,x.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),a()(D,x.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),a()(D,x.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),D),et=(F={},a()(F,x.REPEAT,"repeat"),a()(F,x.CLAMP_TO_EDGE,"clamp"),a()(F,x.MIRRORED_REPEAT,"mirror"),F),nt=(j={},a()(j,x.NONE,"none"),a()(j,x.BROWSER_DEFAULT_WEBGL,"browser"),j),rt=(B={},a()(B,x.NEVER,"never"),a()(B,x.ALWAYS,"always"),a()(B,x.LESS,"less"),a()(B,x.LEQUAL,"lequal"),a()(B,x.GREATER,"greater"),a()(B,x.GEQUAL,"gequal"),a()(B,x.EQUAL,"equal"),a()(B,x.NOTEQUAL,"notequal"),B),it=(z={},a()(z,x.FUNC_ADD,"add"),a()(z,x.MIN_EXT,"min"),a()(z,x.MAX_EXT,"max"),a()(z,x.FUNC_SUBTRACT,"subtract"),a()(z,x.FUNC_REVERSE_SUBTRACT,"reverse subtract"),z),ot=(U={},a()(U,x.ZERO,"zero"),a()(U,x.ONE,"one"),a()(U,x.SRC_COLOR,"src color"),a()(U,x.ONE_MINUS_SRC_COLOR,"one minus src color"),a()(U,x.SRC_ALPHA,"src alpha"),a()(U,x.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),a()(U,x.DST_COLOR,"dst color"),a()(U,x.ONE_MINUS_DST_COLOR,"one minus dst color"),a()(U,x.DST_ALPHA,"dst alpha"),a()(U,x.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),a()(U,x.CONSTANT_COLOR,"constant color"),a()(U,x.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),a()(U,x.CONSTANT_ALPHA,"constant alpha"),a()(U,x.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),a()(U,x.SRC_ALPHA_SATURATE,"src alpha saturate"),U),at=(G={},a()(G,x.NEVER,"never"),a()(G,x.ALWAYS,"always"),a()(G,x.LESS,"less"),a()(G,x.LEQUAL,"lequal"),a()(G,x.GREATER,"greater"),a()(G,x.GEQUAL,"gequal"),a()(G,x.EQUAL,"equal"),a()(G,x.NOTEQUAL,"notequal"),G),st=(q={},a()(q,x.ZERO,"zero"),a()(q,x.KEEP,"keep"),a()(q,x.REPLACE,"replace"),a()(q,x.INVERT,"invert"),a()(q,x.INCR,"increment"),a()(q,x.DECR,"decrement"),a()(q,x.INCR_WRAP,"increment wrap"),a()(q,x.DECR_WRAP,"decrement wrap"),q),lt=(V={},a()(V,x.FRONT,"front"),a()(V,x.BACK,"back"),V),ut=function(){function t(e,n){l()(this,t),this.buffer=void 0;var r=n.data,i=n.usage,o=n.type;this.buffer=e.buffer({data:r,usage:Z[i||x.STATIC_DRAW],type:K[o||x.UNSIGNED_BYTE]})}return c()(t,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(t){var e=t.data,n=t.offset;this.buffer.subdata(e,n)}}]),t}(),ct=n("448a"),ht=n.n(ct);function dt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ft(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?dt(Object(n),!0).forEach((function(e){a()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var pt="attribute vec3 a_Position;\nattribute vec2 a_TexCoord;\n\nvarying vec2 v_TexCoord;\n\nvoid main() {\n  gl_Position = vec4(a_Position, 1.0);\n  v_TexCoord = a_TexCoord;\n}",gt=0,mt=!1,yt=function(){function t(e,n){var r=this;l()(this,t),this.reGl=e,this.context=n,this.entity=_(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var i={};this.context.uniforms.forEach((function(t){var e=t.name,n=t.type,o=t.data,a=t.isReferer,s=t.storageClass;if(s===E.StorageBuffer){if(a)r.textureCache[e]={data:void 0},i["".concat(e,"Size")]=function(){return o.compiledBundle.context.output.textureSize};else{r.textureCache[e]=r.calcDataTexture(e,n,o);var l=r.textureCache[e],u=l.textureWidth,c=l.isOutput;i["".concat(e,"Size")]=[u,u],c&&(r.outputTextureName=e,r.context.needPingpong&&(r.outputTextureName="".concat(e,"Output"),r.textureCache[r.outputTextureName]=r.calcDataTexture(e,n,o)))}i[e]=function(){return mt&&console.log("[".concat(r.entity,"]: ").concat(e," ").concat(r.textureCache[e].id)),r.textureCache[e].texture}}else if(s===E.Uniform){if(o&&(Array.isArray(o)||d()(o))&&o.length>16)throw new Error("invalid data type ".concat(n));i[e]=function(){return t.data}}}));var o=this.getOuputDataTexture(),a=o.textureWidth,s=o.texelCount;i.u_OutputTextureSize=[a,a],i.u_OutputTexelCount=s,this.context.output.textureSize=[a,a];var u={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n".concat(this.context.shader),uniforms:i,vert:pt,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(u)}return c()(t,[{key:"run",value:function(){var t=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use((function(){t.computeCommand()})),mt&&console.log("[".concat(this.entity,"]: output ").concat(this.getOuputDataTexture().id))}},{key:"readData",value:function(){var t=i()(v.a.mark((function t(){var e,n,r,i,o,a,s,l,u=this;return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.reGl({framebuffer:this.texFBO})((function(){e=u.reGl.read()})),!e){t.next=6;break}if(n=this.getOuputDataTexture(),r=n.originalDataLength,i=n.elementsPerTexel,o=n.typedArrayConstructor,a=void 0===o?Float32Array:o,s=[],4!==i)for(l=0;l<e.length;l+=4)1===i?s.push(e[l]):2===i?s.push(e[l],e[l+1]):s.push(e[l],e[l+1],e[l+2]);else s=e;return t.abrupt("return",new a(s.slice(0,r)));case 6:return t.abrupt("return",new Float32Array);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"confirmInput",value:function(t,e){var n;this.entity===t.entity?(this.dynamicPingpong=!0,n=this):n=t,this.textureCache[e].id=n.getOuputDataTexture().id,this.textureCache[e].texture=n.getOuputDataTexture().texture,mt&&console.log("[".concat(this.entity,"]: confirm input ").concat(e," from model ").concat(n.entity,", ").concat(n.getOuputDataTexture().id))}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(t,e){var n=this.context.uniforms.find((function(e){var n=e.name;return n===t}));if(n){var r=this.calcDataTexture(t,n.type,e),i=r.texture,o=r.data;this.textureCache[t].data=o,this.textureCache[t].texture=i}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var t=this.context.output.name;this.textureCache[t].id=this.getOuputDataTexture().id,this.textureCache[t].texture=this.getOuputDataTexture().texture}var e=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=e,mt&&console.log("[".concat(this.entity,"]: after swap, output ").concat(this.getOuputDataTexture().id))}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var t=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=t}},{key:"cloneDataTexture",value:function(t){var e=t.data,n=t.textureWidth;return ft(ft({},t),{},{id:gt++,texture:this.reGl.texture({width:n,height:n,data:e,type:"float"})})}},{key:"calcDataTexture",value:function(t,e,n){var r=1;e===w.Vector4FloatArray&&(r=4);for(var i=[],o=0;o<n.length;o+=r)1===r?i.push(n[o],0,0,0):2===r?i.push(n[o],n[o+1],0,0):3===r?i.push(n[o],n[o+1],n[o+2],0):4===r&&i.push(n[o],n[o+1],n[o+2],n[o+3]);var a=n.length,s=Math.ceil(a/r),l=Math.ceil(Math.sqrt(s)),u=l*l;s<u&&i.push.apply(i,ht()(new Array(4*(u-s)).fill(0)));var c=this.reGl.texture({width:l,height:l,data:i,type:"float"});return{id:gt++,data:i,originalDataLength:a,typedArrayConstructor:d()(n)?n.constructor:void 0,textureWidth:l,texture:c,texelCount:s,elementsPerTexel:r,isOutput:t===this.context.output.name}}}]),t}(),vt=function(){function t(e,n){l()(this,t),this.elements=void 0;var r=n.data,i=n.usage,o=n.type,a=n.count;this.elements=e.elements({data:r,usage:Z[i||x.STATIC_DRAW],type:K[o||x.UNSIGNED_BYTE],count:a})}return c()(t,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(t){var e=t.data;this.elements.subdata(e)}},{key:"destroy",value:function(){this.elements.destroy()}}]),t}(),bt=function(){function t(e,n){l()(this,t),this.framebuffer=void 0;var r=n.width,i=n.height,o=n.color,a=n.colors,s=(n.depth,n.stencil,{width:r,height:i});Array.isArray(a)&&(s.colors=a.map((function(t){return t.get()}))),o&&"boolean"!==typeof o&&(s.color=o.get()),this.framebuffer=e.framebuffer(s)}return c()(t,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(t){var e=t.width,n=t.height;this.framebuffer.resize(e,n)}}]),t}(),_t=n("7037"),xt=n.n(_t),wt=n("60ed"),St=n.n(wt);function Et(t){var e={};return Object.keys(t).forEach((function(n){Ct(n,t[n],e,"")})),e}function Ct(t,e,n,r){null===e||"number"===typeof e||"boolean"===typeof e||Array.isArray(e)&&"number"===typeof e[0]||d()(e)||""===e||void 0!==e.resize?n["".concat(r&&r+".").concat(t)]=e:(St()(e)&&Object.keys(e).forEach((function(i){Ct(i,e[i],n,"".concat(r&&r+".").concat(t))})),Array.isArray(e)&&e.forEach((function(e,i){Object.keys(e).forEach((function(o){Ct(o,e[o],n,"".concat(r&&r+".").concat(t,"[").concat(i,"]"))}))})))}function Mt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Tt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Mt(Object(n),!0).forEach((function(e){a()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var At=function(){function t(e,n){l()(this,t),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=e;var r=n.vs,i=n.fs,o=n.defines,a=n.attributes,s=n.uniforms,u=n.primitive,c=n.count,h=n.elements,d=n.depth,f=n.blend,p=n.stencil,g=n.cull,m=n.instances,y=n.scissor,v=n.viewport,b={};s&&(this.uniforms=Et(s),Object.keys(s).forEach((function(t){b[t]=e.prop(t)})));var _={};Object.keys(a).forEach((function(t){_[t]=a[t].get()}));var w=o&&this.generateDefines(o)||"",S={attributes:_,frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n".concat(w,"\n").concat(i),uniforms:b,vert:"\n".concat(w,"\n").concat(r),primitive:J[void 0===u?x.TRIANGLES:u]};m&&(S.instances=m),c&&(S.count=c),h&&(S.elements=h.get()),y&&(S.scissor=y),v&&(S.viewport=v),this.initDepthDrawParams({depth:d},S),this.initBlendDrawParams({blend:f},S),this.initStencilDrawParams({stencil:p},S),this.initCullDrawParams({cull:g},S),this.drawCommand=e(S)}return c()(t,[{key:"addUniforms",value:function(t){this.uniforms=Tt(Tt({},this.uniforms),Et(t))}},{key:"draw",value:function(t){var e=Tt(Tt({},this.uniforms),Et(t.uniforms||{})),n={};Object.keys(e).forEach((function(t){var r=xt()(e[t]);"boolean"===r||"number"===r||Array.isArray(e[t])||e[t].BYTES_PER_ELEMENT?n[t]=e[t]:"string"===r||(n[t]=e[t].get())})),this.drawCommand(n)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(t,e){var n=t.depth;n&&(e.depth={enable:void 0===n.enable||!!n.enable,mask:void 0===n.mask||!!n.mask,func:rt[n.func||x.LESS],range:n.range||[0,1]})}},{key:"initBlendDrawParams",value:function(t,e){var n=t.blend;if(n){var r=n.enable,i=n.func,o=n.equation,a=n.color,s=void 0===a?[0,0,0,0]:a;e.blend={enable:!!r,func:{srcRGB:ot[i&&i.srcRGB||x.SRC_ALPHA],srcAlpha:ot[i&&i.srcAlpha||x.SRC_ALPHA],dstRGB:ot[i&&i.dstRGB||x.ONE_MINUS_SRC_ALPHA],dstAlpha:ot[i&&i.dstAlpha||x.ONE_MINUS_SRC_ALPHA]},equation:{rgb:it[o&&o.rgb||x.FUNC_ADD],alpha:it[o&&o.alpha||x.FUNC_ADD]},color:s}}}},{key:"initStencilDrawParams",value:function(t,e){var n=t.stencil;if(n){var r=n.enable,i=n.mask,o=void 0===i?-1:i,a=n.func,s=void 0===a?{cmp:x.ALWAYS,ref:0,mask:-1}:a,l=n.opFront,u=void 0===l?{fail:x.KEEP,zfail:x.KEEP,zpass:x.KEEP}:l,c=n.opBack,h=void 0===c?{fail:x.KEEP,zfail:x.KEEP,zpass:x.KEEP}:c;e.stencil={enable:!!r,mask:o,func:Tt(Tt({},s),{},{cmp:at[s.cmp]}),opFront:{fail:st[u.fail],zfail:st[u.zfail],zpass:st[u.zpass]},opBack:{fail:st[h.fail],zfail:st[h.zfail],zpass:st[h.zpass]}}}}},{key:"initCullDrawParams",value:function(t,e){var n=t.cull;if(n){var r=n.enable,i=n.face,o=void 0===i?x.BACK:i;e.cull={enable:!!r,face:lt[o]}}}},{key:"generateDefines",value:function(t){return Object.keys(t).map((function(e){return"#define ".concat(e," ").concat(Number(t[e]))})).join("\n")}}]),t}(),Ot=function(){function t(e,n){l()(this,t),this.texture=void 0,this.width=void 0,this.height=void 0;var r=n.data,i=n.type,o=void 0===i?x.UNSIGNED_BYTE:i,a=n.width,s=n.height,u=n.flipY,c=void 0!==u&&u,h=n.format,d=void 0===h?x.RGBA:h,f=n.mipmap,p=void 0!==f&&f,g=n.wrapS,m=void 0===g?x.CLAMP_TO_EDGE:g,y=n.wrapT,v=void 0===y?x.CLAMP_TO_EDGE:y,b=n.aniso,_=void 0===b?0:b,w=n.alignment,S=void 0===w?1:w,E=n.premultiplyAlpha,C=void 0!==E&&E,M=n.mag,T=void 0===M?x.NEAREST:M,A=n.min,O=void 0===A?x.NEAREST:A,k=n.colorSpace,I=void 0===k?x.BROWSER_DEFAULT_WEBGL:k;this.width=a,this.height=s;var P={width:a,height:s,type:K[o],format:Q[d],wrapS:et[m],wrapT:et[v],mag:tt[T],min:tt[O],alignment:S,flipY:c,colorSpace:nt[I],premultiplyAlpha:C,aniso:_};r&&(P.data=r),"number"===typeof p?P.mipmap=$[p]:"boolean"===typeof p&&(P.mipmap=p),this.texture=e.texture(P)}return c()(t,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(t){var e=t.width,n=t.height;this.texture.resize(e,n),this.width=e,this.height=n}},{key:"destroy",value:function(){this.texture.destroy()}}]),t}(),kt=function(){function t(){var e=this;l()(this,t),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var t=i()(v.a.mark((function t(n){return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n.uniforms){t.next=3;break}return t.next=3,Promise.all(Object.keys(n.uniforms).map(function(){var t=i()(v.a.mark((function t(e){var r;return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n.uniforms[e]||void 0===n.uniforms[e].load){t.next=5;break}return t.next=3,n.uniforms[e].load();case 3:r=t.sent,n.uniforms[e]=r;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 3:return t.abrupt("return",new At(e.gl,n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.createAttribute=function(t){return new X(e.gl,t)},this.createBuffer=function(t){return new ut(e.gl,t)},this.createElements=function(t){return new vt(e.gl,t)},this.createTexture2D=function(t){return new Ot(e.gl,t)},this.createFramebuffer=function(t){return new bt(e.gl,t)},this.useFramebuffer=function(t,n){e.gl({framebuffer:t?t.get():null})(n)},this.createComputeModel=function(){var t=i()(v.a.mark((function t(n){return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new yt(e.gl,n));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.clear=function(t){var n=t.color,r=t.depth,i=t.stencil,o=t.framebuffer,a=void 0===o?null:o,s={color:n,depth:r,stencil:i};s.framebuffer=null===a?a:a.get(),e.gl.clear(s)},this.setScissor=function(t){e.gl&&e.gl._gl&&(t.enable&&t.box?(e.gl._gl.enable(x.SCISSOR_TEST),e.gl._gl.scissor(t.box.x,t.box.y,t.box.width,t.box.height)):e.gl._gl.disable(x.SCISSOR_TEST),e.gl._refresh())},this.viewport=function(t){var n=t.x,r=t.y,i=t.width,o=t.height;e.gl&&e.gl._gl&&(e.gl._gl.viewport(n,r,i,o),e.gl._refresh())},this.readPixels=function(t){var n=t.framebuffer,r=t.x,i=t.y,o=t.width,a=t.height,s={x:r,y:i,width:o,height:a};return n&&(s.framebuffer=n.get()),e.gl.read(s)},this.getCanvas=function(){return e.$canvas},this.getGLContext=function(){return e.gl._gl},this.destroy=function(){e.gl&&(e.gl.destroy(),e.inited=!1)}}return c()(t,[{key:"init",value:function(){var t=i()(v.a.mark((function t(e){return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.inited){t.next=2;break}return t.abrupt("return");case 2:return this.$canvas=e.canvas,t.next=5,new Promise((function(t,n){Y()({canvas:e.canvas,attributes:{alpha:!0,antialias:e.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(e,r){!e&&r||n(e),t(r)}})}));case 5:this.gl=t.sent,this.inited=!0;case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),t}(),It=function(){function t(){l()(this,t),this.engine=void 0,this.configService=new M}return c()(t,[{key:"setConfig",value:function(t){this.configService.set(t)}},{key:"setEngine",value:function(t){this.engine=t}},{key:"createEntity",value:function(){return _()}},{key:"createKernel",value:function(t){var e=new H(this.engine,this.configService);return"string"===typeof t?e.setBundle(JSON.parse(t)):e.setBundle(t),e.init(),e}},{key:"destroy",value:function(){this.engine.destroy()}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new t;return n.setConfig(e),n.setEngine(new kt),n}}]),t}()},a279:function(t,e,n){var r=n("b753");function i(){for(var t={},e=Object.keys(r),n=e.length,i=0;i<n;i++)t[e[i]]={distance:-1,parent:null};return t}function o(t){var e=i(),n=[t];e[t].distance=0;while(n.length)for(var o=n.pop(),a=Object.keys(r[o]),s=a.length,l=0;l<s;l++){var u=a[l],c=e[u];-1===c.distance&&(c.distance=e[o].distance+1,c.parent=o,n.unshift(u))}return e}function a(t,e){return function(n){return e(t(n))}}function s(t,e){var n=[e[t].parent,t],i=r[e[t].parent][t],o=e[t].parent;while(e[o].parent)n.unshift(e[o].parent),i=a(r[e[o].parent][o],i),o=e[o].parent;return i.conversion=n,i}t.exports=function(t){for(var e=o(t),n={},r=Object.keys(e),i=r.length,a=0;a<i;a++){var l=r[a],u=e[l];null!==u.parent&&(n[l]=s(l,e))}return n}},a2d9:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["format","local","master_timeout","h","help","s","v","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,...d}=t;d=i(o,a,d,u),null==c&&(c="GET");var f=s.ignore;"number"===typeof f&&(s.ignore=[f]);var p="";p="/_cat/pending_tasks";const g={method:c,path:p,body:null,querystring:d};return s.warnings=0===u.length?null:u,e(g,s,l)}}t.exports=r},a34a:function(t,e,n){function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}n("6c57"),n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0");var i=n("7ec2")();t.exports=i;try{regeneratorRuntime=i}catch(o){"object"===("undefined"===typeof globalThis?"undefined":r(globalThis))?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}},a36f:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["format","local","master_timeout","h","help","s","ts","v","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,...d}=t;d=i(o,a,d,u),null==c&&(c="GET");var f=s.ignore;"number"===typeof f&&(s.ignore=[f]);var p="";p="/_cat/health";const g={method:c,path:p,body:null,querystring:d};return s.warnings=0===u.length?null:u,e(g,s,l)}}t.exports=r},a38b:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["pretty","human","error_trace","source","filter_path"],a={errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,id:d,...f}=t;f=i(o,a,f,u),null==c&&(c=null==h?"GET":"POST");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g=null!=d?"/_render/template/"+encodeURIComponent(d):"/_render/template";const m={method:c,path:g,body:h||"",querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},a395:function(t,e,n){var r=n("7037")["default"],i=n("e50d");function o(t){var e=i(t,"string");return"symbol"===r(e)?e:String(e)}t.exports=o,t.exports.__esModule=!0,t.exports["default"]=t.exports},a618:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=n("432d"),o=n("ef9c"),a=r(n("47eb")),s=function(t){switch(t.graph().ranker){case"network-simplex":c(t);break;case"tight-tree":u(t);break;case"longest-path":l(t);break;default:u(t)}},l=i.longestPath,u=function(t){(0,i.longestPathWithLayer)(t),(0,o.feasibleTreeWithLayer)(t)},c=function(t){(0,a.default)(t)};e.default=s},a675:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["pretty","human","error_trace","source","filter_path"],a={errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,...d}=t;d=i(o,a,d,u),null==c&&(c="HEAD");var f=s.ignore;"number"===typeof f&&(s.ignore=[f]);var p="";p="/";const g={method:c,path:p,body:null,querystring:d};return s.warnings=0===u.length?null:u,e(g,s,l)}}t.exports=r},a798:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["timeout","master_timeout","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["index"]){const t=new n("Missing required parameter: index");return r(t,l)}if(null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,...f}=t;f=i(o,a,f,u),null==c&&(c="DELETE");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g="/"+encodeURIComponent(d);const m={method:c,path:g,body:"",querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},a7cd:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["local","ignore_unavailable","allow_no_indices","expand_wildcards","flat_settings","include_defaults","pretty","human","error_trace","source","filter_path"],a={ignoreUnavailable:"ignore_unavailable",allowNoIndices:"allow_no_indices",expandWildcards:"expand_wildcards",flatSettings:"flat_settings",includeDefaults:"include_defaults",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["index"]){const t=new n("Missing required parameter: index");return r(t,l)}if(null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,...f}=t;f=i(o,a,f,u),null==c&&(c="HEAD");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g="/"+encodeURIComponent(d);const m={method:c,path:g,body:null,querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},a9f1:function(t,e,n){(function(t){e.fetch=s(t.fetch)&&s(t.ReadableStream),e.writableStream=s(t.WritableStream),e.abortController=s(t.AbortController),e.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),e.blobConstructor=!0}catch(l){}var n;function r(){if(void 0!==n)return n;if(t.XMLHttpRequest){n=new t.XMLHttpRequest;try{n.open("GET",t.XDomainRequest?"/":"https://example.com")}catch(l){n=null}}else n=null;return n}function i(t){var e=r();if(!e)return!1;try{return e.responseType=t,e.responseType===t}catch(l){}return!1}var o="undefined"!==typeof t.ArrayBuffer,a=o&&s(t.ArrayBuffer.prototype.slice);function s(t){return"function"===typeof t}e.arraybuffer=e.fetch||o&&i("arraybuffer"),e.msstream=!e.fetch&&a&&i("ms-stream"),e.mozchunkedarraybuffer=!e.fetch&&o&&i("moz-chunked-arraybuffer"),e.overrideMimeType=e.fetch||!!r()&&s(r().overrideMimeType),e.vbArray=s(t.VBArray),n=null}).call(this,n("c8ba"))},aa22:function(t,e,n){"use strict";var r=n("3ee2").Buffer,i=r.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){if(!t)return"utf8";var e;while(1)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function a(t){var e=o(t);if("string"!==typeof e&&(r.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}function s(t){var e;switch(this.encoding=a(t),this.encoding){case"utf16le":this.text=p,this.end=g,e=4;break;case"utf8":this.fillLast=h,e=4;break;case"base64":this.text=m,this.end=y,e=3;break;default:return this.write=v,void(this.end=b)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function l(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function u(t,e,n){var r=e.length-1;if(r<n)return 0;var i=l(e[r]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--r<n||-2===i?0:(i=l(e[r]),i>=0?(i>0&&(t.lastNeed=i-2),i):--r<n||-2===i?0:(i=l(e[r]),i>=0?(i>0&&(2===i?i=0:t.lastNeed=i-3),i):0))}function c(t,e,n){if(128!==(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!==(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!==(192&e[2]))return t.lastNeed=2,"�"}}function h(t){var e=this.lastTotal-this.lastNeed,n=c(this,t,e);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function d(t,e){var n=u(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)}function f(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e}function p(t,e){if((t.length-e)%2===0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function g(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function m(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function y(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function v(t){return t.toString(this.encoding)}function b(t){return t&&t.length?this.write(t):""}e.StringDecoder=s,s.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(e=this.fillLast(t),void 0===e)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},s.prototype.end=f,s.prototype.text=d,s.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},aac1:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.GForceLayout=void 0;var i=n("5bc9"),o=n("f271"),a=function(t,e){var n;return n=t?(0,o.isNumber)(t)?function(e){return t}:t:function(t){return e||1},n},s=function(t){function e(e){var n=t.call(this)||this;return n.maxIteration=500,n.workerEnabled=!1,n.edgeStrength=200,n.nodeStrength=1e3,n.coulombDisScale=.005,n.damping=.9,n.maxSpeed=1e3,n.minMovement=.5,n.interval=.02,n.factor=1,n.linkDistance=1,n.gravity=10,n.preventOverlap=!0,n.collideStrength=1,n.tick=function(){},n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.animate=!0,n.updateCfg(e),n}return r(e,t),e.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},e.prototype.execute=function(){var t,e,n=this,r=n.nodes;if(void 0!==n.timeInterval&&"undefined"!==typeof window&&window.clearInterval(n.timeInterval),r&&0!==r.length){n.width||"undefined"===typeof window||(n.width=window.innerWidth),n.height||"undefined"===typeof window||(n.height=window.innerHeight),n.center||(n.center=[n.width/2,n.height/2]);var i=n.center;if(1===r.length)return r[0].x=i[0],r[0].y=i[1],void(null===(e=n.onLayoutEnd)||void 0===e||e.call(n));var s={},l={};r.forEach((function(t,e){(0,o.isNumber)(t.x)||(t.x=Math.random()*n.width),(0,o.isNumber)(t.y)||(t.y=Math.random()*n.height),s[t.id]=t,l[t.id]=e})),n.nodeMap=s,n.nodeIdxMap=l,n.linkDistance=a(n.linkDistance,1),n.nodeStrength=a(n.nodeStrength,1),n.edgeStrength=a(n.edgeStrength,1);var u,c=n.nodeSize;if(n.preventOverlap){var h,d=n.nodeSpacing;h=(0,o.isNumber)(d)?function(){return d}:(0,o.isFunction)(d)?d:function(){return 0},u=c?(0,o.isArray)(c)?function(t){return Math.max(c[0],c[1])+h(t)}:function(t){return c+h(t)}:function(t){return t.size?(0,o.isArray)(t.size)?Math.max(t.size[0],t.size[1])+h(t):(0,o.isObject)(t.size)?Math.max(t.size.width,t.size.height)+h(t):t.size+h(t):10+h(t)}}n.nodeSize=u;var f=n.edges;n.degrees=(0,o.getDegree)(r.length,n.nodeIdxMap,f),n.getMass||(n.getMass=function(t){var e=t.mass||n.degrees[n.nodeIdxMap[t.id]].all||1;return e}),n.run()}else null===(t=n.onLayoutEnd)||void 0===t||t.call(n)},e.prototype.run=function(){var t,e=this,n=e.maxIteration,r=e.nodes,i=e.workerEnabled,o=e.minMovement,a=e.animate;if(r)if(i||!a){for(var s=0;s<n;s++){var l=e.runOneStep(s);if(e.reachMoveThreshold(r,l,o))break}null===(t=e.onLayoutEnd)||void 0===t||t.call(e)}else{if("undefined"===typeof window)return;var u=0;this.timeInterval=window.setInterval((function(){var t,i;if(r){var a=e.runOneStep(u)||[];e.reachMoveThreshold(r,a,o)&&(null===(t=e.onLayoutEnd)||void 0===t||t.call(e),window.clearInterval(e.timeInterval)),u++,u>=n&&(null===(i=e.onLayoutEnd)||void 0===i||i.call(e),window.clearInterval(e.timeInterval))}}),0)}},e.prototype.reachMoveThreshold=function(t,e,n){var r=0;return t.forEach((function(t,n){var i=t.x-e[n].x,o=t.y-e[n].y;r+=Math.sqrt(i*i+o*o)})),r/=t.length,r<n},e.prototype.runOneStep=function(t){var e,n=this,r=n.nodes,i=n.edges,o=[],a=[];if(r){r.forEach((function(t,e){o[2*e]=0,o[2*e+1]=0,a[2*e]=0,a[2*e+1]=0})),n.calRepulsive(o,r),i&&n.calAttractive(o,i),n.calGravity(o,r);var s=Math.max(.02,n.interval-.002*t);n.updateVelocity(o,a,s,r);var l=[];return r.forEach((function(t){l.push({x:t.x,y:t.y})})),n.updatePosition(a,s,r),null===(e=n.tick)||void 0===e||e.call(n),l}},e.prototype.calRepulsive=function(t,e){var n=this,r=n.getMass,i=n.factor,o=n.coulombDisScale,a=n.preventOverlap,s=n.collideStrength,l=void 0===s?1:s,u=n.nodeStrength,c=n.nodeSize;e.forEach((function(n,s){var h=r?r(n):1;e.forEach((function(e,d){if(!(s>=d)){var f=n.x-e.x,p=n.y-e.y;0===f&&0===p&&(f=.01*Math.random(),p=.01*Math.random());var g=f*f+p*p,m=Math.sqrt(g),y=(m+.1)*o,v=f/m,b=p/m,_=.5*(u(n)+u(e))*i/(y*y),x=r?r(e):1;if(t[2*s]+=v*_,t[2*s+1]+=b*_,t[2*d]-=v*_,t[2*d+1]-=b*_,a&&(c(n)+c(e))/2>m){var w=l*(u(n)+u(e))*.5/g;t[2*s]+=v*w/h,t[2*s+1]+=b*w/h,t[2*d]-=v*w/x,t[2*d+1]-=b*w/x}}}))}))},e.prototype.calAttractive=function(t,e){var n=this,r=n.nodeMap,i=n.nodeIdxMap,a=n.linkDistance,s=n.edgeStrength,l=n.nodeSize,u=n.getMass;e.forEach((function(e,n){var c=(0,o.getEdgeTerminal)(e,"source"),h=(0,o.getEdgeTerminal)(e,"target"),d=r[c],f=r[h],p=f.x-d.x,g=f.y-d.y;0===p&&0===g&&(p=.01*Math.random(),g=.01*Math.random());var m=Math.sqrt(p*p+g*g),y=p/m,v=g/m,b=a(e,d,f)||1+(l(d)+l(f)||0)/2,_=b-m,x=_*s(e),w=i[c],S=i[h],E=u?u(d):1,C=u?u(f):1;t[2*w]-=y*x/E,t[2*w+1]-=v*x/E,t[2*S]+=y*x/C,t[2*S+1]+=v*x/C}))},e.prototype.calGravity=function(t,e){for(var n=this,r=n.center,i=n.gravity,a=n.degrees,s=e.length,l=0;l<s;l++){var u=e[l],c=u.x-r[0],h=u.y-r[1],d=i;if(n.getCenter){var f=n.getCenter(u,a[l].all);f&&(0,o.isNumber)(f[0])&&(0,o.isNumber)(f[1])&&(0,o.isNumber)(f[2])&&(c=u.x-f[0],h=u.y-f[1],d=f[2])}d&&(t[2*l]-=d*c,t[2*l+1]-=d*h)}},e.prototype.updateVelocity=function(t,e,n,r){var i=this,o=n*i.damping;r.forEach((function(n,r){var a=t[2*r]*o||.01,s=t[2*r+1]*o||.01,l=Math.sqrt(a*a+s*s);if(l>i.maxSpeed){var u=i.maxSpeed/l;a*=u,s*=u}e[2*r]=a,e[2*r+1]=s}))},e.prototype.updatePosition=function(t,e,n){n.forEach((function(n,r){if((0,o.isNumber)(n.fx)&&(0,o.isNumber)(n.fy))return n.x=n.fx,void(n.y=n.fy);var i=t[2*r]*e,a=t[2*r+1]*e;n.x+=i,n.y+=a}))},e.prototype.stop=function(){this.timeInterval&&"undefined"!==typeof window&&window.clearInterval(this.timeInterval)},e.prototype.destroy=function(){var t=this;t.stop(),t.tick=null,t.nodes=null,t.edges=null,t.destroyed=!0},e.prototype.getType=function(){return"gForce"},e}(i.Base);e.GForceLayout=s},aacb:function(t,e,n){"use strict";const r=["aborted","complete","destroy","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];t.exports=(t,e)=>{const n=new Set(Object.keys(t).concat(r));for(const r of n)r in e||(e[r]="function"===typeof t[r]?t[r].bind(t):t[r]);return e}},aaf2:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t["default"]=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0});var a=o(n("0a4a")),s=n("f271");function l(){function t(t){return function(){return t}}var e,n=function(t){return t.cluster},r=t(1),i=t(-1),o=t(100),l=t(.1),u=[0,0],c=[],h={},d=[],f=100,p=100,g={none:{x:0,y:0}},m=[],y="force",v=!0,b=.1;function _(t){if(!v)return _;e.tick(),M();for(var r=0,i=c.length,o=void 0,a=t*b;r<i;++r)o=c[r],o.vx+=(g[n(o)].x-o.x)*a,o.vy+=(g[n(o)].y-o.y)*a}function x(){c&&w()}function w(){if(c&&c.length){if(void 0===n(c[0]))throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var t=S();e=a.forceSimulation(t.nodes).force("x",a.forceX(f).strength(.1)).force("y",a.forceY(p).strength(.1)).force("collide",a.forceCollide((function(t){return t.r})).iterations(4)).force("charge",a.forceManyBody().strength(i)).force("links",a.forceLink(t.nodes.length?t.links:[]).distance(o).strength(l)),m=e.nodes(),M()}}function S(){var t=[],e=[],n={},r=[],i={},o=[];return i=E(c),o=C(d),r=Object.keys(i),r.forEach((function(e,r){var o=i[e];t.push({id:e,size:o.count,r:Math.sqrt(o.sumforceNodeSize/Math.PI)}),n[e]=r})),o.forEach((function(t){var r=(0,s.getEdgeTerminal)(t,"source"),i=(0,s.getEdgeTerminal)(t,"target"),o=n[r],a=n[i];void 0!==o&&void 0!==a&&e.push({source:o,target:a,count:t.count})})),{nodes:t,links:e}}function E(t){var e={};return t.forEach((function(t){var r=n(t);e[r]||(e[r]={count:0,sumforceNodeSize:0})})),t.forEach((function(t){var i=n(t),o=r(t),a=e[i];a.count=a.count+1,a.sumforceNodeSize=a.sumforceNodeSize+Math.PI*(o*o)*1.3,e[i]=a})),e}function C(t){var e={},n=[];t.forEach((function(t){var n=T(t),r=0;void 0!==e[n]&&(r=e[n]),r+=1,e[n]=r}));var r=Object.entries(e);return r.forEach((function(t){var e=t[0],r=t[1],i=e.split("~")[0],o=e.split("~")[1];void 0!==i&&void 0!==o&&n.push({source:i,target:o,count:r})})),n}function M(){return g={none:{x:0,y:0}},m.forEach((function(t){g[t.id]={x:t.x-u[0],y:t.y-u[1]}})),g}function T(t){var e=(0,s.getEdgeTerminal)(t,"source"),r=(0,s.getEdgeTerminal)(t,"target"),i=n(h[e]),o=n(h[r]);return i<=o?"".concat(i,"~").concat(o):"".concat(o,"~").concat(i)}function A(t){h={},t.forEach((function(t){h[t.id]=t}))}function O(t){return arguments.length?(y=t,x(),_):y}function k(t){return arguments.length?"string"===typeof t?(n=function(e){return e[t]},_):(n=t,_):n}function I(t){return arguments.length?(v=t,_):v}function P(t){return arguments.length?(b=t,_):b}function L(t){return arguments.length?(f=t,_):f}function N(t){return arguments.length?(p=t,_):p}function R(t){return arguments.length?(A(t||[]),c=t||[],_):c}function D(t){return arguments.length?(d=t||[],x(),_):d}function F(e){return arguments.length?(r="function"===typeof e?e:t(+e),x(),_):r}function j(e){return arguments.length?(i="function"===typeof e?e:t(+e),x(),_):i}function B(e){return arguments.length?(o="function"===typeof e?e:t(+e),x(),_):o}function z(e){return arguments.length?(l="function"===typeof e?e:t(+e),x(),_):l}function U(t){return arguments.length?(u=t,_):u}return _.initialize=function(t){c=t,x()},_.template=O,_.groupBy=k,_.enableGrouping=I,_.strength=P,_.centerX=L,_.centerY=N,_.nodes=R,_.links=D,_.forceNodeSize=F,_.nodeSize=_.forceNodeSize,_.forceCharge=j,_.forceLinkDistance=B,_.forceLinkStrength=z,_.offset=U,_.getFocis=M,_}e.default=l},ab11:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["wait_for_active_shards","refresh","routing","timeout","type","fields","_source","_source_exclude","_source_include","pipeline","pretty","human","error_trace","source","filter_path"],a={waitForActiveShards:"wait_for_active_shards",_sourceExclude:"_source_exclude",_sourceInclude:"_source_include",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["body"]){const t=new n("Missing required parameter: body");return r(t,l)}if(null!=t["type"]&&null==t["index"]){const t=new n("Missing required parameter of the url: index");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,type:f,...p}=t;p=i(o,a,p,u),null==c&&(c="POST");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m=null!=d&&null!=f?"/"+encodeURIComponent(d)+"/"+encodeURIComponent(f)+"/_bulk":null!=d?"/"+encodeURIComponent(d)+"/_bulk":"/_bulk";const y={method:c,path:m,bulkBody:h,querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},ab52:function(t,e,n){(function(e){var r=n("566b"),i=function(){},o=function(t){return t.setHeader&&"function"===typeof t.abort},a=function(t){return t.stdio&&Array.isArray(t.stdio)&&3===t.stdio.length},s=function(t,n,l){if("function"===typeof n)return s(t,null,n);n||(n={}),l=r(l||i);var u=t._writableState,c=t._readableState,h=n.readable||!1!==n.readable&&t.readable,d=n.writable||!1!==n.writable&&t.writable,f=!1,p=function(){t.writable||g()},g=function(){d=!1,h||l.call(t)},m=function(){h=!1,d||l.call(t)},y=function(e){l.call(t,e?new Error("exited with error code: "+e):null)},v=function(e){l.call(t,e)},b=function(){e.nextTick(_)},_=function(){if(!f)return(!h||c&&c.ended&&!c.destroyed)&&(!d||u&&u.ended&&!u.destroyed)?void 0:l.call(t,new Error("premature close"))},x=function(){t.req.on("finish",g)};return o(t)?(t.on("complete",g),t.on("abort",b),t.req?x():t.on("request",x)):d&&!u&&(t.on("end",p),t.on("close",p)),a(t)&&t.on("exit",y),t.on("end",m),t.on("finish",g),!1!==n.error&&t.on("error",v),t.on("close",b),function(){f=!0,t.removeListener("complete",g),t.removeListener("abort",b),t.removeListener("request",x),t.req&&t.req.removeListener("finish",g),t.removeListener("end",p),t.removeListener("close",p),t.removeListener("finish",g),t.removeListener("exit",y),t.removeListener("end",m),t.removeListener("error",v),t.removeListener("close",b)}};t.exports=s}).call(this,n("4362"))},ab63:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["stored_fields","parent","preference","realtime","refresh","routing","_source","_source_exclude","_source_include","version","version_type","pretty","human","error_trace","source","filter_path"],a={storedFields:"stored_fields",_sourceExclude:"_source_exclude",_sourceInclude:"_source_include",versionType:"version_type",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["id"]){const t=new n("Missing required parameter: id");return r(t,l)}if(null==t["index"]){const t=new n("Missing required parameter: index");return r(t,l)}if(null==t["type"]){const t=new n("Missing required parameter: type");return r(t,l)}if(null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,id:d,index:f,type:p,...g}=t;g=i(o,a,g,u),null==c&&(c="GET");var m=s.ignore;"number"===typeof m&&(s.ignore=[m]);var y="";y="/"+encodeURIComponent(f)+"/"+encodeURIComponent(p)+"/"+encodeURIComponent(d);const v={method:c,path:y,body:null,querystring:g};return s.warnings=0===u.length?null:u,e(v,s,l)}}t.exports=r},ad71:function(t,e,n){"use strict";(function(e){t.exports=p;var r=n("966d"),i=n("e3db"),o=n("b639").Buffer;p.ReadableState=f;n("faa1");var a,s=function(t,e){return t.listeners(e).length};(function(){try{a=n("d485")}catch(t){}finally{a||(a=n("faa1").EventEmitter)}})();o=n("b639").Buffer;var l=n("3a7c");l.inherits=n("3fb5");var u,c,h=n(2),d=void 0;function f(t,e){c=c||n("b19a"),t=t||{},this.objectMode=!!t.objectMode,e instanceof c&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(u||(u=n("aa22").StringDecoder),this.decoder=new u(t.encoding),this.encoding=t.encoding)}function p(t){if(c=c||n("b19a"),!(this instanceof p))return new p(t);this._readableState=new f(t,this),this.readable=!0,t&&"function"===typeof t.read&&(this._read=t.read),a.call(this)}function g(t,e,n,r,i){var o=_(e,n);if(o)t.emit("error",o);else if(null===n)e.reading=!1,x(t,e);else if(e.objectMode||n&&n.length>0)if(e.ended&&!i){var a=new Error("stream.push() after EOF");t.emit("error",a)}else if(e.endEmitted&&i){a=new Error("stream.unshift() after end event");t.emit("error",a)}else{var s;!e.decoder||i||r||(n=e.decoder.write(n),s=!e.objectMode&&0===n.length),i||(e.reading=!1),s||(e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,i?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&w(t))),E(t,e)}else i||(e.reading=!1);return m(e)}function m(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}d=h&&h.debuglog?h.debuglog("stream"):function(){},l.inherits(p,a),p.prototype.push=function(t,e){var n=this._readableState;return n.objectMode||"string"!==typeof t||(e=e||n.defaultEncoding,e!==n.encoding&&(t=new o(t,e),e="")),g(this,n,t,e,!1)},p.prototype.unshift=function(t){var e=this._readableState;return g(this,e,t,"",!0)},p.prototype.isPaused=function(){return!1===this._readableState.flowing},p.prototype.setEncoding=function(t){return u||(u=n("aa22").StringDecoder),this._readableState.decoder=new u(t),this._readableState.encoding=t,this};var y=8388608;function v(t){return t>=y?t=y:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function b(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:null===t||isNaN(t)?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:t<=0?0:(t>e.highWaterMark&&(e.highWaterMark=v(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function _(t,e){var n=null;return o.isBuffer(e)||"string"===typeof e||null===e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function x(t,e){if(!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,w(t)}}function w(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(d("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?r(S,t):S(t))}function S(t){d("emit readable"),t.emit("readable"),k(t)}function E(t,e){e.readingMore||(e.readingMore=!0,r(C,t,e))}function C(t,e){var n=e.length;while(!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark){if(d("maybeReadMore read 0"),t.read(0),n===e.length)break;n=e.length}e.readingMore=!1}function M(t){return function(){var e=t._readableState;d("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&s(t,"data")&&(e.flowing=!0,k(t))}}function T(t){d("readable nexttick read 0"),t.read(0)}function A(t,e){e.resumeScheduled||(e.resumeScheduled=!0,r(O,t,e))}function O(t,e){e.reading||(d("resume read 0"),t.read(0)),e.resumeScheduled=!1,t.emit("resume"),k(t),e.flowing&&!e.reading&&t.read(0)}function k(t){var e=t._readableState;if(d("flow",e.flowing),e.flowing)do{var n=t.read()}while(null!==n&&e.flowing)}function I(t,e){var n,r=e.buffer,i=e.length,a=!!e.decoder,s=!!e.objectMode;if(0===r.length)return null;if(0===i)n=null;else if(s)n=r.shift();else if(!t||t>=i)n=a?r.join(""):1===r.length?r[0]:o.concat(r,i),r.length=0;else if(t<r[0].length){var l=r[0];n=l.slice(0,t),r[0]=l.slice(t)}else if(t===r[0].length)n=r.shift();else{n=a?"":new o(t);for(var u=0,c=0,h=r.length;c<h&&u<t;c++){l=r[0];var d=Math.min(t-u,l.length);a?n+=l.slice(0,d):l.copy(n,u,0,d),d<l.length?r[0]=l.slice(d):r.shift(),u+=d}}return n}function P(t){var e=t._readableState;if(e.length>0)throw new Error("endReadable called on non-empty stream");e.endEmitted||(e.ended=!0,r(L,e,t))}function L(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function N(t,e){for(var n=0,r=t.length;n<r;n++)e(t[n],n)}function R(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}p.prototype.read=function(t){d("read",t);var e=this._readableState,n=t;if(("number"!==typeof t||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return d("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?P(this):w(this),null;if(t=b(t,e),0===t&&e.ended)return 0===e.length&&P(this),null;var r,i=e.needReadable;return d("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&(i=!0,d("length less than watermark",i)),(e.ended||e.reading)&&(i=!1,d("reading or ended",i)),i&&(d("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),i&&!e.reading&&(t=b(n,e)),r=t>0?I(t,e):null,null===r&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),n!==t&&e.ended&&0===e.length&&P(this),null!==r&&this.emit("data",r),r},p.prototype._read=function(t){this.emit("error",new Error("not implemented"))},p.prototype.pipe=function(t,n){var o=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=t;break;case 1:a.pipes=[a.pipes,t];break;default:a.pipes.push(t);break}a.pipesCount+=1,d("pipe count=%d opts=%j",a.pipesCount,n);var l=(!n||!1!==n.end)&&t!==e.stdout&&t!==e.stderr,u=l?h:g;function c(t){d("onunpipe"),t===o&&g()}function h(){d("onend"),t.end()}a.endEmitted?r(u):o.once("end",u),t.on("unpipe",c);var f=M(o);t.on("drain",f);var p=!1;function g(){d("cleanup"),t.removeListener("close",v),t.removeListener("finish",b),t.removeListener("drain",f),t.removeListener("error",y),t.removeListener("unpipe",c),o.removeListener("end",h),o.removeListener("end",g),o.removeListener("data",m),p=!0,!a.awaitDrain||t._writableState&&!t._writableState.needDrain||f()}function m(e){d("ondata");var n=t.write(e);!1===n&&(1!==a.pipesCount||a.pipes[0]!==t||1!==o.listenerCount("data")||p||(d("false write response, pause",o._readableState.awaitDrain),o._readableState.awaitDrain++),o.pause())}function y(e){d("onerror",e),_(),t.removeListener("error",y),0===s(t,"error")&&t.emit("error",e)}function v(){t.removeListener("finish",b),_()}function b(){d("onfinish"),t.removeListener("close",v),_()}function _(){d("unpipe"),o.unpipe(t)}return o.on("data",m),t._events&&t._events.error?i(t._events.error)?t._events.error.unshift(y):t._events.error=[y,t._events.error]:t.on("error",y),t.once("close",v),t.once("finish",b),t.emit("pipe",o),a.flowing||(d("pipe resume"),o.resume()),t},p.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this)),this;if(!t){var n=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<r;i++)n[i].emit("unpipe",this);return this}var o=R(e.pipes,t);return-1===o||(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this)),this},p.prototype.on=function(t,e){var n=a.prototype.on.call(this,t,e);if("data"===t&&!1!==this._readableState.flowing&&this.resume(),"readable"===t&&!this._readableState.endEmitted){var i=this._readableState;i.readableListening||(i.readableListening=!0,i.emittedReadable=!1,i.needReadable=!0,i.reading?i.length&&w(this,i):r(T,this))}return n},p.prototype.addListener=p.prototype.on,p.prototype.resume=function(){var t=this._readableState;return t.flowing||(d("resume"),t.flowing=!0,A(this,t)),this},p.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this},p.prototype.wrap=function(t){var e=this._readableState,n=!1,r=this;for(var i in t.on("end",(function(){if(d("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&r.push(t)}r.push(null)})),t.on("data",(function(i){if(d("wrapped data"),e.decoder&&(i=e.decoder.write(i)),(!e.objectMode||null!==i&&void 0!==i)&&(e.objectMode||i&&i.length)){var o=r.push(i);o||(n=!0,t.pause())}})),t)void 0===this[i]&&"function"===typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return N(o,(function(e){t.on(e,r.emit.bind(r,e))})),r._read=function(e){d("wrapped _read",e),n&&(n=!1,t.resume())},r},p._fromList=I}).call(this,n("4362"))},ada5:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n("8937"),i=n("9154"),o=function(){function t(t,e,n,r,o){this.fromNode=t,this.toNode=e,this.nodeEdgeNodeLabel={nodeLabel1:n||i.VACANT_NODE_LABEL,edgeLabel:r||i.VACANT_EDGE_LABEL,nodeLabel2:o||i.VACANT_NODE_LABEL}}return t.prototype.equalTo=function(t){return this.fromNode===t.formNode&&this.toNode===t.toNode&&this.nodeEdgeNodeLabel===t.nodeEdgeNodeLabel},t.prototype.notEqualTo=function(t){return!this.equalTo(t)},t}(),a=function(){function t(){this.rmpath=[],this.dfsEdgeList=[]}return t.prototype.equalTo=function(t){var e=this.dfsEdgeList.length,n=t.length;if(e!==n)return!1;for(var r=0;r<e;r++)if(this.dfsEdgeList[r]!==t[r])return!1;return!0},t.prototype.notEqualTo=function(t){return!this.equalTo(t)},t.prototype.pushBack=function(t,e,n,r,i){return this.dfsEdgeList.push(new o(t,e,n,r,i)),this.dfsEdgeList},t.prototype.toGraph=function(t,e){void 0===t&&(t=i.VACANT_GRAPH_ID),void 0===e&&(e=!1);var n=new i.Graph(t,!0,e);return this.dfsEdgeList.forEach((function(t){var e=t.fromNode,r=t.toNode,o=t.nodeEdgeNodeLabel,a=o.nodeLabel1,s=o.edgeLabel,l=o.nodeLabel2;a!==i.VACANT_NODE_LABEL&&n.addNode(e,a),l!==i.VACANT_NODE_LABEL&&n.addNode(r,l),a!==i.VACANT_NODE_LABEL&&l!==a&&n.addEdge(void 0,e,r,s)})),n},t.prototype.buildRmpath=function(){this.rmpath=[];for(var t=void 0,e=this.dfsEdgeList.length,n=e-1;n>=0;n--){var r=this.dfsEdgeList[n],i=r.fromNode,o=r.toNode;i<o&&(void 0===t||o===t)&&(this.rmpath.push(n),t=i)}return this.rmpath},t.prototype.getNodeNum=function(){var t={};return this.dfsEdgeList.forEach((function(e){t[e.fromNode]||(t[e.fromNode]=!0),t[e.toNode]||(t[e.toNode]=!0)})),Object.keys(t).length},t}(),s=function(){function t(t){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],t){while(t){var e=t.edge;this.edges.push(e),this.nodesUsed[e.from]=1,this.nodesUsed[e.to]=1,this.edgesUsed[e.id]=1,t=t.preNode}this.edges=this.edges.reverse()}}return t.prototype.hasNode=function(t){return 1===this.nodesUsed[t.id]},t.prototype.hasEdge=function(t){return 1===this.edgesUsed[t.id]},t}(),l=function(){function t(t){var e=t.graphs,n=t.minSupport,r=void 0===n?2:n,i=t.minNodeNum,o=void 0===i?1:i,s=t.maxNodeNum,l=void 0===s?4:s,u=t.top,c=void 0===u?10:u,h=t.directed,d=void 0!==h&&h,f=t.verbose,p=void 0!==f&&f;this.graphs=e,this.dfsCode=new a,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=r,this.top=c,this.directed=d,this.counter=0,this.maxNodeNum=l,this.minNodeNum=o,this.verbose=p,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return t.prototype.findForwardRootEdges=function(t,e){var n=this,r=[],i=t.nodeMap;return e.edges.forEach((function(t){(n.directed||e.label<=i[t.to].label)&&r.push(t)})),r},t.prototype.findBackwardEdge=function(t,e,n,r){if(!this.directed&&e===n)return null;for(var i=t.nodeMap,o=i[n.to],a=o.edges,s=a.length,l=0;l<s;l++){var u=a[l];if(!r.hasEdge(u)&&u.to===e.from)if(this.directed){if(i[e.from].label<i[n.to].label||i[e.from].label===i[n.to].label&&e.label<=u.label)return u}else if(e.label<u.label||e.label===u.label&&i[e.to].label<=i[n.to].label)return u}return null},t.prototype.findForwardPureEdges=function(t,e,n,r){for(var i=[],o=e.to,a=t.nodeMap[o].edges,s=a.length,l=0;l<s;l++){var u=a[l],c=t.nodeMap[u.to];n<=c.label&&!r.hasNode(c)&&i.push(u)}return i},t.prototype.findForwardRmpathEdges=function(t,e,n,r){for(var i=[],o=t.nodeMap,a=o[e.to].label,s=o[e.from],l=s.edges,u=l.length,c=0;c<u;c++){var h=l[c],d=o[h.to].label;e.to===h.to||n>d||r.hasNode(o[h.to])||(e.label<h.label||e.label===h.label&&a<=d)&&i.push(h)}return i},t.prototype.getSupport=function(t){var e={};return t.forEach((function(t){e[t.graphId]||(e[t.graphId]=!0)})),Object.keys(e).length},t.prototype.findMinLabel=function(t){var e=void 0;return Object.keys(t).forEach((function(n){var r=t[n],i=r.nodeLabel1,o=r.edgeLabel,a=r.nodeLabel2;e?(i<e.nodeLabel1||i===e.nodeLabel1&&o<e.edgeLabel||i===e.nodeLabel1&&o===e.edgeLabel&&a<e.nodeLabel2)&&(e={nodeLabel1:i,edgeLabel:o,nodeLabel2:a}):e={nodeLabel1:i,edgeLabel:o,nodeLabel2:a}})),e},t.prototype.isMin=function(){var t=this,e=this.dfsCode;if(this.verbose&&console.log("isMin checking",e),1===e.dfsEdgeList.length)return!0;var n=this.directed,r=e.toGraph(i.VACANT_GRAPH_ID,n),l=r.nodeMap,u=new a,c={};r.nodes.forEach((function(e){var n=t.findForwardRootEdges(r,e);n.forEach((function(t){var n=l[t.to],i="".concat(e.label,"-").concat(t.label,"-").concat(n.label);c[i]||(c[i]={projected:[],nodeLabel1:e.label,edgeLabel:t.label,nodeLabel2:n.label});var o={graphId:r.id,edge:t,preNode:null};c[i].projected.push(o)}))}));var h=this.findMinLabel(c);if(h){u.dfsEdgeList.push(new o(0,1,h.nodeLabel1,h.edgeLabel,h.nodeLabel2));var d=function a(c){for(var h=u.buildRmpath(),d=u.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,f=u.dfsEdgeList[h[0]].toNode,p={},g=!1,m=0,y=n?-1:0,v=function(e){if(g)return"break";c.forEach((function(n){var i=new s(n),o=t.findBackwardEdge(r,i.edges[h[e]],i.edges[h[0]],i);o&&(p[o.label]||(p[o.label]={projected:[],edgeLabel:o.label}),p[o.label].projected.push({graphId:r.id,edge:p,preNode:n}),m=u.dfsEdgeList[h[e]].fromNode,g=!0)}))},b=h.length-1;b>y;b--){var _=v(b);if("break"===_)break}if(g){var x=t.findMinLabel(p);u.dfsEdgeList.push(new o(f,m,i.VACANT_NODE_LABEL,x.edgeLabel,i.VACANT_NODE_LABEL));var w=u.dfsEdgeList.length-1;return t.dfsCode.dfsEdgeList[w]===u.dfsEdgeList[w]&&a(p[x.edgeLabel].projected)}var S={};g=!1;var E=0;c.forEach((function(e){var n=new s(e),i=t.findForwardPureEdges(r,n.edges[h[0]],d,n);i.length>0&&(g=!0,E=f,i.forEach((function(t){var n="".concat(t.label,"-").concat(l[t.to].label);S[n]||(S[n]={projected:[],edgeLabel:t.label,nodeLabel2:l[t.to].label}),S[n].projected.push({graphId:r.id,edge:t,preNode:e})})))}));var C=h.length,M=function(e){if(g)return"break";var n=h[e];c.forEach((function(e){var i=new s(e),o=t.findForwardRmpathEdges(r,i.edges[n],d,i);o.length>0&&(g=!0,E=u.dfsEdgeList[n].fromNode,o.forEach((function(t){var n="".concat(t.label,"-").concat(l[t.to].label);S[n]||(S[n]={projected:[],edgeLabel:t.label,nodeLabel2:l[t.to].label}),S[n].projected.push({graphId:r.id,edge:t,preNode:e})})))}))};for(b=0;b<C;b++){var T=M(b);if("break"===T)break}if(!g)return!0;var A=t.findMinLabel(S);u.dfsEdgeList.push(new o(E,f+1,i.VACANT_NODE_LABEL,A.edgeLabel,A.nodeLabel2));var O=u.dfsEdgeList.length-1;return e.dfsEdgeList[O]===u.dfsEdgeList[O]&&a(S["".concat(A.edgeLabel,"-").concat(A.nodeLabel2)].projected)},f="".concat(h.nodeLabel1,"-").concat(h.edgeLabel,"-").concat(h.nodeLabel2);return d(c[f].projected)}},t.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var t=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,r.clone)(t))}},t.prototype.subGraphMining=function(t){var e=this,n=this.getSupport(t);if(!(n<this.minSupport)&&this.isMin()){this.report();var r=this.dfsCode.getNodeNum(),a=this.dfsCode.buildRmpath(),l=this.dfsCode.dfsEdgeList[a[0]].toNode,u=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,c={},h={};t.forEach((function(t){for(var n=e.graphs[t.graphId],i=n.nodeMap,o=new s(t),d=a.length-1;d>=0;d--){var f=e.findBackwardEdge(n,o.edges[a[d]],o.edges[a[0]],o);if(f){var p="".concat(e.dfsCode.dfsEdgeList[a[d]].fromNode,"-").concat(f.label);h[p]||(h[p]={projected:[],toNodeId:e.dfsCode.dfsEdgeList[a[d]].fromNode,edgeLabel:f.label}),h[p].projected.push({graphId:t.graphId,edge:f,preNode:t})}}if(!(r>=e.maxNodeNum)){var g=e.findForwardPureEdges(n,o.edges[a[0]],u,o);g.forEach((function(e){var n="".concat(l,"-").concat(e.label,"-").concat(i[e.to].label);c[n]||(c[n]={projected:[],fromNodeId:l,edgeLabel:e.label,nodeLabel2:i[e.to].label}),c[n].projected.push({graphId:t.graphId,edge:e,preNode:t})}));var m=function(r){var s=e.findForwardRmpathEdges(n,o.edges[a[r]],u,o);s.forEach((function(n){var o="".concat(e.dfsCode.dfsEdgeList[a[r]].fromNode,"-").concat(n.label,"-").concat(i[n.to].label);c[o]||(c[o]={projected:[],fromNodeId:e.dfsCode.dfsEdgeList[a[r]].fromNode,edgeLabel:n.label,nodeLabel2:i[n.to].label}),c[o].projected.push({graphId:t.graphId,edge:n,preNode:t})}))};for(d=0;d<a.length;d++)m(d)}})),Object.keys(h).forEach((function(t){var n=h[t],r=n.toNodeId,i=n.edgeLabel;e.dfsCode.dfsEdgeList.push(new o(l,r,"-1",i,"-1")),e.subGraphMining(h[t].projected),e.dfsCode.dfsEdgeList.pop()})),Object.keys(c).forEach((function(t){var n=c[t],r=n.fromNodeId,a=n.edgeLabel,s=n.nodeLabel2;e.dfsCode.dfsEdgeList.push(new o(r,l+1,i.VACANT_NODE_LABEL,a,s)),e.subGraphMining(c[t].projected),e.dfsCode.dfsEdgeList.pop()}))}},t.prototype.generate1EdgeFrequentSubGraphs=function(){var t=this.graphs,e=this.directed,n=this.minSupport,r=this.frequentSize1Subgraphs,i={},o={},a={},s={};return Object.keys(t).forEach((function(n){var r=t[n],l=r.nodeMap;r.nodes.forEach((function(t,r){var u=t.label,c="".concat(n,"-").concat(u);if(!a[c]){var h=i[u]||0;h++,i[u]=h}a[c]={graphKey:n,label:u},t.edges.forEach((function(t){var r=u,i=l[t.to].label;if(!e&&r>i){var a=i;i=r,r=a}var c=t.label,h="".concat(n,"-").concat(r,"-").concat(c,"-").concat(i),d="".concat(r,"-").concat(c,"-").concat(i);if(!o[d]){var f=o[d]||0;f++,o[d]=f}s[h]={graphId:n,nodeLabel1:r,edgeLabel:c,nodeLabel2:i}}))}))})),Object.keys(i).forEach((function(t){var e=i[t];if(!(e<n)){var o={nodes:[],edges:[]};o.nodes.push({id:"0",label:t}),r.push(o)}})),r},t.prototype.run=function(){var t=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var e=this.graphs,n=(this.directed,{});Object.keys(e).forEach((function(r){var i=e[r],o=i.nodeMap;i.nodes.forEach((function(e){var a=t.findForwardRootEdges(i,e);a.forEach((function(t){var i=o[t.to],a="".concat(e.label,"-").concat(t.label,"-").concat(i.label);n[a]||(n[a]={projected:[],nodeLabel1:e.label,edgeLabel:t.label,nodeLabel2:i.label});var s={graphId:r,edge:t,preNode:null};n[a].projected.push(s)}))}))})),Object.keys(n).forEach((function(e){var r=n[e],i=r.projected,a=r.nodeLabel1,s=r.edgeLabel,l=r.nodeLabel2;t.dfsCode.dfsEdgeList.push(new o(0,1,a,s,l)),t.subGraphMining(i),t.dfsCode.dfsEdgeList.pop()}))}},t}(),u=function(t,e,n,r){var o={};return Object.keys(t).forEach((function(a,s){var l=t[a],u=new i.Graph(s,!0,e),c={};l.nodes.forEach((function(t,e){u.addNode(e,t[n]),c[t.id]=e})),l.edges.forEach((function(t,e){var n=c[t.source],i=c[t.target];u.addEdge(-1,n,i,t[r])})),u&&u.getNodeNum()&&(o[u.id]=u)})),o},c=function(t,e,n){var r=[];return t.forEach((function(t){var i={nodes:[],edges:[]};t.nodes.forEach((function(t){var n;i.nodes.push((n={id:"".concat(t.id)},n[e]=t.label,n))})),t.edges.forEach((function(t){var e;i.edges.push((e={source:"".concat(t.from),target:"".concat(t.to)},e[n]=t.label,e))})),r.push(i)})),r},h="cluster",d=function(t){var e=t.graphs,n=t.directed,r=void 0!==n&&n,i=t.nodeLabelProp,o=void 0===i?h:i,a=t.edgeLabelProp,s=void 0===a?h:a,d=u(e,r,o,s),f=t.minSupport,p=t.maxNodeNum,g=t.minNodeNum,m=t.verbose,y=t.top,v={graphs:d,minSupport:f,maxNodeNum:p,minNodeNum:g,top:y,verbose:m,directed:r},b=new l(v);b.run();var _=c(b.frequentSubgraphs,o,s);return _},f=d;e.default=f},ae1e:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["ids","term_statistics","field_statistics","fields","offsets","positions","payloads","preference","routing","parent","realtime","version","version_type","pretty","human","error_trace","source","filter_path"],a={termStatistics:"term_statistics",fieldStatistics:"field_statistics",versionType:"version_type",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t["type"]&&null==t["index"]){const t=new n("Missing required parameter of the url: index");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,type:f,...p}=t;p=i(o,a,p,u),null==c&&(c=null==h?"GET":"POST");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m=null!=d&&null!=f?"/"+encodeURIComponent(d)+"/"+encodeURIComponent(f)+"/_mtermvectors":null!=d?"/"+encodeURIComponent(d)+"/_mtermvectors":"/_mtermvectors";const y={method:c,path:m,body:h||"",querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},aeb6:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["master_timeout","local","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,repository:d,...f}=t;f=i(o,a,f,u),null==c&&(c="GET");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g=null!=d?"/_snapshot/"+encodeURIComponent(d):"/_snapshot";const m={method:c,path:g,body:null,querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},af40:function(t,e,n){"use strict";n.d(e,"b",(function(){return d})),n.d(e,"a",(function(){return f}));var r=n("7326"),i=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,o=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,a=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,s=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function l(t,e){var n=t.match(s);Object(r["c"])(n,(function(t){var n=t.split(":");e.addColorStop(n[0],n[1])}))}function u(t,e,n){var r,o,a=i.exec(n),s=parseFloat(a[1])%360*(Math.PI/180),u=a[2],c=e.getBBox();s>=0&&s<.5*Math.PI?(r={x:c.minX,y:c.minY},o={x:c.maxX,y:c.maxY}):.5*Math.PI<=s&&s<Math.PI?(r={x:c.maxX,y:c.minY},o={x:c.minX,y:c.maxY}):Math.PI<=s&&s<1.5*Math.PI?(r={x:c.maxX,y:c.maxY},o={x:c.minX,y:c.minY}):(r={x:c.minX,y:c.maxY},o={x:c.maxX,y:c.minY});var h=Math.tan(s),d=h*h,f=(o.x-r.x+h*(o.y-r.y))/(d+1)+r.x,p=h*(o.x-r.x+h*(o.y-r.y))/(d+1)+r.y,g=t.createLinearGradient(r.x,r.y,f,p);return l(u,g),g}function c(t,e,n){var r=o.exec(n),i=parseFloat(r[1]),a=parseFloat(r[2]),u=parseFloat(r[3]),c=r[4];if(0===u){var h=c.match(s);return h[h.length-1].split(":")[1]}var d=e.getBBox(),f=d.maxX-d.minX,p=d.maxY-d.minY,g=Math.sqrt(f*f+p*p)/2,m=t.createRadialGradient(d.minX+f*i,d.minY+p*a,0,d.minX+f/2,d.minY+p/2,u*g);return l(c,m),m}function h(t,e,n){if(e.get("patternSource")&&e.get("patternSource")===n)return e.get("pattern");var r,i,o=a.exec(n),s=o[1],l=o[2];function u(){r=t.createPattern(i,s),e.set("pattern",r),e.set("patternSource",n)}switch(s){case"a":s="repeat";break;case"x":s="repeat-x";break;case"y":s="repeat-y";break;case"n":s="no-repeat";break;default:s="no-repeat"}return i=new Image,l.match(/^data:/i)||(i.crossOrigin="Anonymous"),i.src=l,i.complete?u():(i.onload=u,i.src=i.src),r}function d(t,e,n){var i=e.getBBox();if(isNaN(i.x)||isNaN(i.y)||isNaN(i.width)||isNaN(i.height))return n;if(Object(r["k"])(n)){if("("===n[1]||"("===n[2]){if("l"===n[0])return u(t,e,n);if("r"===n[0])return c(t,e,n);if("p"===n[0])return h(t,e,n)}return n}return n instanceof CanvasPattern?n:void 0}function f(t){var e=0,n=0,i=0,o=0;return Object(r["g"])(t)?1===t.length?e=n=i=o=t[0]:2===t.length?(e=i=t[0],n=o=t[1]):3===t.length?(e=t[0],n=o=t[1],i=t[2]):(e=t[0],n=t[1],i=t[2],o=t[3]):e=n=i=o=t,[e,n,i,o]}},b047:function(t,e){function n(t){return function(e){return t(e)}}t.exports=n},b14b:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n("8937"),i=l(n("16c7")),o=l(n("0c62")),a=n("27f4"),s=n("7162");function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t,e,n,r){for(var i=e.length,o=2*r,a=0,s=0;s<i;s++)for(var l=t[s].clusterId,u=0;u<i;u++){var c=t[u].clusterId;if(l===c){var h=e[s][u]||0,d=n[s]||0,f=n[u]||0;a+=h-d*f/o}}return a*=1/o,a},c=function(t,e){void 0===t&&(t=[]);for(var n=t.length,r=new o.default([]),i=0;i<n;i++)r=r.add(new o.default(e[i]));var a=r.avg(n);a.normalize();var s=0;for(i=0;i<n;i++){var l=new o.default(e[i]),u=l.squareEuclideanDistance(a);s+=u}var c=[];t.forEach((function(){c.push([])}));for(i=0;i<n;i++){l=new o.default(e[i]);t[i]["clusterInertial"]=0;for(var h=0;h<n;h++)if(i!==h){var d=new o.default(e[h]);c[i][h]=l.squareEuclideanDistance(d),t[i]["clusterInertial"]+=c[i][h]}else c[i][h]=0}var f=0,p=2*n*s;for(i=0;i<n;i++){var g=t[i].clusterId;for(h=0;h<n;h++){var m=t[h].clusterId;if(i!==h&&g===m){var y=t[i].clusterInertial*t[h].clusterInertial/Math.pow(p,2)-c[i][h]/p;f+=y}}}return Number(f.toFixed(4))},h=function(t,e,n,o,l,h,d,f,p){void 0===e&&(e=!1),void 0===n&&(n="weight"),void 0===o&&(o=1e-4),void 0===l&&(l=!1),void 0===h&&(h=void 0),void 0===d&&(d=[]),void 0===f&&(f=["id"]),void 0===p&&(p=1);var g=t.nodes,m=void 0===g?[]:g,y=t.edges,v=void 0===y?[]:y,b=[];if(l){m.forEach((function(t,e){t.properties=t.properties||{},t.originIndex=e}));var _=[];m.every((function(t){return t.hasOwnProperty("nodeType")}))&&(_=Array.from(new Set(m.map((function(t){return t.nodeType})))),m.forEach((function(t){t.properties.nodeType=_.findIndex((function(e){return e===t.nodeType}))})));var x=(0,a.getAllProperties)(m,h);b=(0,s.oneHot)(x,d,f)}var w=1,S={},E={};m.forEach((function(t,e){var n=String(w++);t.clusterId=n,S[n]={id:n,nodes:[t]},E[t.id]={node:t,idx:e}}));var C=(0,i.default)(t,e),M=[],T={},A=0;C.forEach((function(t,e){var n=0,r=m[e].id;T[r]={},t.forEach((function(t,e){if(t){n+=t;var i=m[e].id;T[r][i]=t,A+=t}})),M.push(n)})),A/=2;var O=1/0,k=1/0,I=0,P=[],L={};while(1){O=l&&m.every((function(t){return t.hasOwnProperty("properties")}))?u(m,C,M,A)+c(m,b)*p:u(m,C,M,A),0===I&&(k=O,P=m,L=S);var N=O>0&&O>k&&O-k<o;if(O>k&&(P=m.map((function(t){return{node:t,clusterId:t.clusterId}})),L=(0,r.clone)(S),k=O),N||I>100)break;I++,Object.keys(S).forEach((function(t){var e=0;v.forEach((function(r){var i=r.source,o=r.target,a=E[i].node.clusterId,s=E[o].node.clusterId;(a===t&&s!==t||s===t&&a!==t)&&(e+=r[n]||1)})),S[t].sumTot=e})),m.forEach((function(t,e){var r,i=S[t.clusterId],o=0,a=M[e]/(2*A),s=0,u=i.nodes;u.forEach((function(t){var n=E[t.id].idx;s+=C[e][n]||0}));var h=s-i.sumTot*a,d=u.filter((function(e){return e.id!==t.id})),f=[];d.forEach((function(t,e){f[e]=b[t.originIndex]}));var g=c(d,b)*p,m=T[t.id];if(Object.keys(m).forEach((function(n){var i=E[n].node,s=i.clusterId;if(s!==t.clusterId){var u=S[s],d=u.nodes;if(d&&d.length){var f=0;d.forEach((function(t){var n=E[t.id].idx;f+=C[e][n]||0}));var m=f-u.sumTot*a,y=d.concat([t]),v=[];y.forEach((function(t,e){v[e]=b[t.originIndex]}));var _=c(y,b)*p,x=m-h;l&&(x=m+_-(h+g)),x>o&&(o=x,r=u)}}})),o>0){r.nodes.push(t);var y=t.clusterId;t.clusterId=r.id;var _=i.nodes.indexOf(t);i.nodes.splice(_,1);var x=0,w=0;v.forEach((function(t){var e=t.source,i=t.target,o=E[e].node.clusterId,a=E[i].node.clusterId;(o===r.id&&a!==r.id||a===r.id&&o!==r.id)&&(x+=t[n]||1),(o===y&&a!==y||a===y&&o!==y)&&(w+=t[n]||1)})),r.sumTot=x,i.sumTot=w}}))}var R={},D=0;Object.keys(L).forEach((function(t){var e=L[t];if(e.nodes&&e.nodes.length){var n=String(D+1);n!==t&&(e.id=n,e.nodes=e.nodes.map((function(t){return{id:t.id,clusterId:n}})),L[n]=e,R[t]=n,delete L[t],D++)}else delete L[t]})),P.forEach((function(t){var e=t.node,n=t.clusterId;e&&(e.clusterId=n,e.clusterId&&R[e.clusterId]&&(e.clusterId=R[e.clusterId]))}));var F=[],j={};v.forEach((function(t){var e=t.source,r=t.target,i=t[n]||1,o=E[e].node.clusterId,a=E[r].node.clusterId;if(o&&a){var s="".concat(o,"---").concat(a);if(j[s])j[s].weight+=i,j[s].count++;else{var l={source:o,target:a,weight:i,count:1};j[s]=l,F.push(l)}}}));var B=[];return Object.keys(L).forEach((function(t){B.push(L[t])})),{clusters:B,clusterEdges:F}},d=h;e.default=d},b182:function(t,e,n){"use strict";var r=n("9ab4"),i=n("6855");function o(t,e){if(e){var n=Object(i["invert"])(e);return Object(i["multiplyVec2"])(n,t)}return t}function a(t,e,n){var r=t.getTotalMatrix();if(r){var i=o([e,n,1],r),a=i[0],s=i[1];return[a,s]}return[e,n]}function s(t,e,n){if(t.isCanvas&&t.isCanvas())return!0;if(!Object(i["isAllowCapture"])(t)||!1===t.cfg.isInView)return!1;if(t.cfg.clipShape){var r=a(t,e,n),o=r[0],s=r[1];if(t.isClipped(o,s))return!1}var l=t.cfg.cacheCanvasBBox||t.getCanvasBBox();return e>=l.minX&&e<=l.maxX&&n>=l.minY&&n<=l.maxY}function l(t,e,n){if(!s(t,e,n))return null;for(var r=null,i=t.getChildren(),o=i.length,u=o-1;u>=0;u--){var c=i[u];if(c.isGroup())r=l(c,e,n);else if(s(c,e,n)){var h=c,d=a(c,e,n),f=d[0],p=d[1];h.isInShape(f,p)&&(r=c)}if(r)break}return r}var u=n("4799"),c=n("c2ad"),h=n("7326"),d=n("f5e5"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r["__extends"])(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e["renderer"]="canvas",e["autoDraw"]=!0,e["localRefresh"]=!0,e["refreshElements"]=[],e["clipView"]=!0,e["quickHit"]=!1,e},e.prototype.onCanvasChange=function(t){"attr"!==t&&"sort"!==t&&"changeSize"!==t||(this.set("refreshElements",[this]),this.draw())},e.prototype.getShapeBase=function(){return u},e.prototype.getGroupBase=function(){return c["a"]},e.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||Object(h["d"])();return t>=1?Math.ceil(t):1},e.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},e.prototype.createDom=function(){var t=document.createElement("canvas"),e=t.getContext("2d");return this.set("context",e),t},e.prototype.setDOMSize=function(e,n){t.prototype.setDOMSize.call(this,e,n);var r=this.get("context"),i=this.get("el"),o=this.getPixelRatio();i.width=o*e,i.height=o*n,o>1&&r.scale(o,o)},e.prototype.clear=function(){t.prototype.clear.call(this),this._clearFrame();var e=this.get("context"),n=this.get("el");e.clearRect(0,0,n.width,n.height)},e.prototype.getShape=function(e,n){var r;return r=this.get("quickHit")?l(this,e,n):t.prototype.getShape.call(this,e,n,null),r},e.prototype._getRefreshRegion=function(){var t,e=this.get("refreshElements"),n=this.getViewRange();if(e.length&&e[0]===this)t=n;else if(t=Object(d["f"])(e),t){t.minX=Math.floor(t.minX),t.minY=Math.floor(t.minY),t.maxX=Math.ceil(t.maxX),t.maxY=Math.ceil(t.maxY),t.maxY+=1;var r=this.get("clipView");r&&(t=Object(d["g"])(t,n))}return t},e.prototype.refreshElement=function(t){var e=this.get("refreshElements");e.push(t)},e.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&(Object(h["a"])(t),this.set("drawFrame",null),this.set("refreshElements",[]))},e.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},e.prototype._drawAll=function(){var t=this.get("context"),e=this.get("el"),n=this.getChildren();t.clearRect(0,0,e.width,e.height),Object(d["a"])(t,this),Object(d["d"])(t,n),this.set("refreshElements",[])},e.prototype._drawRegion=function(){var t=this.get("context"),e=this.get("refreshElements"),n=this.getChildren(),r=this._getRefreshRegion();r?(t.clearRect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),t.save(),t.beginPath(),t.rect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),t.clip(),Object(d["a"])(t,this),Object(d["b"])(this,n,r),Object(d["d"])(t,n,r),t.restore()):e.length&&Object(d["c"])(e),Object(h["c"])(e,(function(t){t.get("hasChanged")&&t.set("hasChanged",!1)})),this.set("refreshElements",[])},e.prototype._startDraw=function(){var t=this,e=this.get("drawFrame");e||(e=Object(h["n"])((function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)})),this.set("drawFrame",e))},e.prototype.skipDraw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)},e}(i["AbstractCanvas"]);e["a"]=f},b19a:function(t,e,n){"use strict";var r=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=h;var i=n("966d"),o=n("3a7c");o.inherits=n("3fb5");var a=n("ad71"),s=n("dc14");o.inherits(h,a);for(var l=r(s.prototype),u=0;u<l.length;u++){var c=l[u];h.prototype[c]||(h.prototype[c]=s.prototype[c])}function h(t){if(!(this instanceof h))return new h(t);a.call(this,t),s.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",d)}function d(){this.allowHalfOpen||this._writableState.ended||i(f,this)}function f(t){t.end()}},b218:function(t,e){var n=9007199254740991;function r(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}t.exports=r},b2cb:function(t,e,n){"use strict";n.d(e,"j",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"g",(function(){return a})),n.d(e,"b",(function(){return s}));var r=n("8937");function i(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}n.d(e,"e",(function(){return r["isNil"]})),n.d(e,"d",(function(){return r["isFunction"]})),n.d(e,"h",(function(){return r["isString"]})),n.d(e,"f",(function(){return r["isObject"]})),n.d(e,"i",(function(){return r["mix"]})),n.d(e,"a",(function(){return r["each"]})),n.d(e,"k",(function(){return r["upperFirst"]}));var o="undefined"!==typeof window&&"undefined"!==typeof window.document;function a(t,e){if(t.isCanvas())return!0;var n=e.getParent(),r=!1;while(n){if(n===t){r=!0;break}n=n.getParent()}return r}function s(t){return t.cfg.visible&&t.cfg.capture}},b383:function(t,e,n){"use strict";e.decode=e.parse=n("91dd"),e.encode=e.stringify=n("e099")},b3b0:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["master_timeout","preserve_existing","ignore_unavailable","allow_no_indices","expand_wildcards","flat_settings","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",preserveExisting:"preserve_existing",ignoreUnavailable:"ignore_unavailable",allowNoIndices:"allow_no_indices",expandWildcards:"expand_wildcards",flatSettings:"flat_settings",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["body"]){const t=new n("Missing required parameter: body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,...f}=t;f=i(o,a,f,u),null==c&&(c="PUT");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g=null!=d?"/"+encodeURIComponent(d)+"/_settings":"/_settings";const m={method:c,path:g,body:h||"",querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},b3dc:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.aveMovementBundle=e.aveMovementCode=e.gForceBundle=e.gForceCode=void 0,e.gForceCode="\nimport { globalInvocationID } from 'g-webgpu';\n\nconst MAX_EDGE_PER_VERTEX;\nconst VERTEX_COUNT;\nconst SHIFT_20 = 1048576;\n\n@numthreads(1, 1, 1)\nclass GGForce {\n  @in @out\n  u_Data: vec4[];\n\n  @in\n  u_damping: float;\n  \n  @in\n  u_maxSpeed: float;\n\n  @in\n  u_minMovement: float;\n\n  @in\n  u_AveMovement: vec4[];\n\n  @in\n  u_coulombDisScale: float;\n\n  @in\n  u_factor: float;\n\n  @in\n  u_NodeAttributeArray1: vec4[];\n\n  @in\n  u_NodeAttributeArray2: vec4[];\n\n  @in\n  u_interval: float;\n\n  unpack_float(packedValue: float): ivec2 {\n    const packedIntValue = int(packedValue);\n    const v0 = packedIntValue / SHIFT_20;\n    return [v0, packedIntValue - v0 * SHIFT_20];\n  }\n\n  calcRepulsive(i: int, currentNode: vec4): vec2 {\n    let ax = 0, ay = 0;\n    for (let j: int = 0; j < VERTEX_COUNT; j++) {\n      if (i != j) {\n        const nextNode = this.u_Data[j];\n        const vx = currentNode[0] - nextNode[0];\n        const vy = currentNode[1] - nextNode[1];\n        const dist = sqrt(vx * vx + vy * vy) + 0.01;\n        const n_dist = (dist + 0.1) * this.u_coulombDisScale;\n        const direx = vx / dist;\n        const direy = vy / dist;\n        const attributesi = this.u_NodeAttributeArray1[i];\n        const attributesj = this.u_NodeAttributeArray1[j];\n        const massi = attributesi[0];\n        const nodeStrengthi = attributesi[2];\n        const nodeStrengthj = attributesj[2];\n        const nodeStrength = (nodeStrengthi + nodeStrengthj) / 2;\n        // const param = nodeStrength * this.u_factor / (n_dist * n_dist * massi);\n        const param = nodeStrength * this.u_factor / (n_dist * n_dist);\n        ax += direx * param;\n        ay += direy * param;\n      }\n    }\n    return [ax, ay];\n  }\n\n  calcGravity(i: int, currentNode: vec4, attributes2: vec4): vec2 {\n    // note: attributes2 = [centerX, centerY, gravity, 0]\n\n    const vx = currentNode[0] - attributes2[0];\n    const vy = currentNode[1] - attributes2[1];\n    \n    const ax = vx * attributes2[2];\n    const ay = vy * attributes2[2];\n    \n    return [ax, ay];\n  }\n\n  calcAttractive(i: int, currentNode: vec4, attributes1: vec4): vec2 {\n    // note: attributes1 = [mass, degree, nodeSterngth, 0]\n\n    const mass = attributes1[0];\n    let ax = 0, ay = 0;\n    // const arr_offset = int(floor(currentNode[2] + 0.5));\n    // const length = int(floor(currentNode[3] + 0.5));\n\n    const compressed = this.unpack_float(currentNode[2]);\n    const length = compressed[0];\n    const arr_offset = compressed[1];\n\n    const node_buffer: vec4;\n    for (let p: int = 0; p < MAX_EDGE_PER_VERTEX; p++) {\n      if (p >= length) break;\n      const arr_idx = arr_offset + 4 * p; // i 节点的第 p 条边开始的小格子位置\n      const buf_offset = arr_idx - arr_idx / 4 * 4;\n      if (p == 0 || buf_offset == 0) {\n        node_buffer = this.u_Data[int(arr_idx / 4)]; // 大格子，大格子位置=小个子位置 / 4，\n      }\n\n      let float_j: float = node_buffer[0];\n\n      const nextNode = this.u_Data[int(float_j)];\n      const vx = nextNode[0] - currentNode[0];\n      const vy = nextNode[1] - currentNode[1];\n      const dist = sqrt(vx * vx + vy * vy) + 0.01;\n      const direx = vx / dist;\n      const direy = vy / dist;\n      const edgeLength = node_buffer[1];\n      const edgeStrength = node_buffer[2];\n      const diff: float = edgeLength - dist;//edgeLength\n      // const param = diff * this.u_stiffness / mass; //\n      const param = diff * edgeStrength / mass; // \n      ax -= direx * param;\n      ay -= direy * param;\n    }\n    return [ax, ay];\n  }\n\n  @main\n  compute() {\n    const i = globalInvocationID.x;\n    const currentNode = this.u_Data[i];\n    const movement = u_AveMovement[0];\n    let ax = 0, ay = 0;\n\n    if (i >= VERTEX_COUNT || movement.x < u_minMovement) {\n      this.u_Data[i] = currentNode;\n      return;\n    }\n\n    // 每个节点属性占两个数组中各一格\n    // [mass, degree, nodeStrength, fx]\n    const nodeAttributes1 = this.u_NodeAttributeArray1[i];\n    // [centerX, centerY, centerGravity, fy]\n    const nodeAttributes2 = this.u_NodeAttributeArray2[i];\n\n    // repulsive\n    const repulsive = this.calcRepulsive(i, currentNode);\n    ax += repulsive[0];\n    ay += repulsive[1];\n\n    // attractive\n    const attractive = this.calcAttractive(i, currentNode, nodeAttributes1);\n    ax += attractive[0];\n    ay += attractive[1];\n\n    // gravity\n    const gravity = this.calcGravity(i, currentNode, nodeAttributes2);\n    ax -= gravity[0];\n    ay -= gravity[1];\n\n    // speed\n    const param = this.u_interval * this.u_damping;\n    let vx = ax * param;\n    let vy = ay * param;\n    const vlength = sqrt(vx * vx + vy * vy) + 0.0001;\n    if (vlength > this.u_maxSpeed) {\n      const param2 = this.u_maxSpeed / vlength;\n      vx = param2 * vx;\n      vy = param2 * vy;\n    }\n\n    // move\n    if (nodeAttributes1[3] != 0 && nodeAttributes2[3] != 0) {\n      this.u_Data[i] = [\n        nodeAttributes1[3],\n        nodeAttributes2[3],\n        currentNode[2],\n        0\n      ];\n    } else {\n      const distx = vx * this.u_interval;\n      const disty = vy * this.u_interval;\n      const distLength = sqrt(distx * distx + disty * disty);\n      this.u_Data[i] = [\n        currentNode[0] + distx,\n        currentNode[1] + disty,\n        currentNode[2],\n        distLength\n      ];\n    }\n    \n    // the avarage move distance\n    // need to share memory\n    \n  }\n}\n",e.gForceBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {float distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',e.aveMovementCode="\nconst VERTEX_COUNT;\n@numthreads(1, 1, 1)\nclass CalcAveMovement {\n  @in\n  u_Data: vec4[];\n  @in\n  u_iter: float;\n  @in @out\n  u_AveMovement: vec4[];\n  @main\n  compute() {\n    let movement = 0;\n    for (let j: int = 0; j < VERTEX_COUNT; j++) {\n      const vertex = this.u_Data[j];\n      movement += vertex[3];\n    }\n    movement = movement / float(VERTEX_COUNT);\n    this.u_AveMovement[0] = [movement, 0, 0, 0];\n  }\n}\n",e.aveMovementBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}'},b3ea:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},b4ae:function(t,e,n){"use strict";n.r(e),n.d(e,"AbstractMatrix",(function(){return V})),n.d(e,"default",(function(){return Y})),n.d(e,"Matrix",(function(){return Y})),n.d(e,"MatrixColumnView",(function(){return J})),n.d(e,"MatrixColumnSelectionView",(function(){return Z})),n.d(e,"MatrixFlipColumnView",(function(){return K})),n.d(e,"MatrixFlipRowView",(function(){return Q})),n.d(e,"MatrixRowView",(function(){return $})),n.d(e,"MatrixRowSelectionView",(function(){return tt})),n.d(e,"MatrixSelectionView",(function(){return et})),n.d(e,"MatrixSubView",(function(){return nt})),n.d(e,"MatrixTransposeView",(function(){return rt})),n.d(e,"wrap",(function(){return at})),n.d(e,"WrapperMatrix1D",(function(){return it})),n.d(e,"WrapperMatrix2D",(function(){return ot})),n.d(e,"solve",(function(){return dt})),n.d(e,"inverse",(function(){return ht})),n.d(e,"determinant",(function(){return ft})),n.d(e,"linearDependencies",(function(){return mt})),n.d(e,"pseudoInverse",(function(){return yt})),n.d(e,"covariance",(function(){return vt})),n.d(e,"correlation",(function(){return bt})),n.d(e,"SingularValueDecomposition",(function(){return ct})),n.d(e,"SVD",(function(){return ct})),n.d(e,"EigenvalueDecomposition",(function(){return _t})),n.d(e,"EVD",(function(){return _t})),n.d(e,"CholeskyDecomposition",(function(){return Mt})),n.d(e,"CHO",(function(){return Mt})),n.d(e,"LuDecomposition",(function(){return st})),n.d(e,"LU",(function(){return st})),n.d(e,"QrDecomposition",(function(){return ut})),n.d(e,"QR",(function(){return ut})),n.d(e,"Nipals",(function(){return Tt})),n.d(e,"NIPALS",(function(){return Tt}));const r=Object.prototype.toString;function i(t){const e=r.call(t);return e.endsWith("Array]")&&!e.includes("Big")}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!i(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var n=e.fromIndex,r=void 0===n?0:n,o=e.toIndex,a=void 0===o?t.length:o;if(r<0||r>=t.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=r||a>t.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var s=t[r],l=r+1;l<a;l++)t[l]>s&&(s=t[l]);return s}function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!i(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var n=e.fromIndex,r=void 0===n?0:n,o=e.toIndex,a=void 0===o?t.length:o;if(r<0||r>=t.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=r||a>t.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var s=t[r],l=r+1;l<a;l++)t[l]<s&&(s=t[l]);return s}function s(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!i(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");if(void 0!==n.output){if(!i(n.output))throw new TypeError("output option must be an array if specified");e=n.output}else e=new Array(t.length);var r=a(t),s=o(t);if(r===s)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var l=n.min,u=void 0===l?n.autoMinMax?r:0:l,c=n.max,h=void 0===c?n.autoMinMax?s:1:c;if(u>=h)throw new RangeError("min option must be smaller than max option");for(var d=(h-u)/(s-r),f=0;f<t.length;f++)e[f]=(t[f]-r)*d+u;return e}const l=" ".repeat(2),u=" ".repeat(4);function c(){return h(this)}function h(t,e={}){const{maxRows:n=15,maxColumns:r=10,maxNumSize:i=8,padMinus:o="auto"}=e;return`${t.constructor.name} {\n${l}[\n${u}${d(t,n,r,i,o)}\n${l}]\n${l}rows: ${t.rows}\n${l}columns: ${t.columns}\n}`}function d(t,e,n,r,i){const{rows:o,columns:a}=t,s=Math.min(o,e),l=Math.min(a,n),c=[];if("auto"===i){i=!1;t:for(let e=0;e<s;e++)for(let n=0;n<l;n++)if(t.get(e,n)<0){i=!0;break t}}for(let u=0;u<s;u++){let e=[];for(let n=0;n<l;n++)e.push(f(t.get(u,n),r,i));c.push(""+e.join(" "))}return l!==a&&(c[c.length-1]+=` ... ${a-n} more columns`),s!==o&&c.push(`... ${o-e} more rows`),c.join("\n"+u)}function f(t,e,n){return(t>=0&&n?" "+p(t,e-1):p(t,e)).padEnd(e)}function p(t,e){let n=t.toString();if(n.length<=e)return n;let r=t.toFixed(e);if(r.length>e&&(r=t.toFixed(Math.max(0,e-(r.length-e)))),r.length<=e&&!r.startsWith("0.000")&&!r.startsWith("-0.000"))return r;let i=t.toExponential(e);return i.length>e&&(i=t.toExponential(Math.max(0,e-(i.length-e)))),i.slice(0)}function g(t,e){t.prototype.add=function(t){return"number"===typeof t?this.addS(t):this.addM(t)},t.prototype.addS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t);return this},t.prototype.addM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t.get(e,n));return this},t.add=function(t,n){const r=new e(t);return r.add(n)},t.prototype.sub=function(t){return"number"===typeof t?this.subS(t):this.subM(t)},t.prototype.subS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t);return this},t.prototype.subM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t.get(e,n));return this},t.sub=function(t,n){const r=new e(t);return r.sub(n)},t.prototype.subtract=t.prototype.sub,t.prototype.subtractS=t.prototype.subS,t.prototype.subtractM=t.prototype.subM,t.subtract=t.sub,t.prototype.mul=function(t){return"number"===typeof t?this.mulS(t):this.mulM(t)},t.prototype.mulS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t);return this},t.prototype.mulM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t.get(e,n));return this},t.mul=function(t,n){const r=new e(t);return r.mul(n)},t.prototype.multiply=t.prototype.mul,t.prototype.multiplyS=t.prototype.mulS,t.prototype.multiplyM=t.prototype.mulM,t.multiply=t.mul,t.prototype.div=function(t){return"number"===typeof t?this.divS(t):this.divM(t)},t.prototype.divS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t);return this},t.prototype.divM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t.get(e,n));return this},t.div=function(t,n){const r=new e(t);return r.div(n)},t.prototype.divide=t.prototype.div,t.prototype.divideS=t.prototype.divS,t.prototype.divideM=t.prototype.divM,t.divide=t.div,t.prototype.mod=function(t){return"number"===typeof t?this.modS(t):this.modM(t)},t.prototype.modS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)%t);return this},t.prototype.modM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)%t.get(e,n));return this},t.mod=function(t,n){const r=new e(t);return r.mod(n)},t.prototype.modulus=t.prototype.mod,t.prototype.modulusS=t.prototype.modS,t.prototype.modulusM=t.prototype.modM,t.modulus=t.mod,t.prototype.and=function(t){return"number"===typeof t?this.andS(t):this.andM(t)},t.prototype.andS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)&t);return this},t.prototype.andM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)&t.get(e,n));return this},t.and=function(t,n){const r=new e(t);return r.and(n)},t.prototype.or=function(t){return"number"===typeof t?this.orS(t):this.orM(t)},t.prototype.orS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)|t);return this},t.prototype.orM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)|t.get(e,n));return this},t.or=function(t,n){const r=new e(t);return r.or(n)},t.prototype.xor=function(t){return"number"===typeof t?this.xorS(t):this.xorM(t)},t.prototype.xorS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)^t);return this},t.prototype.xorM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)^t.get(e,n));return this},t.xor=function(t,n){const r=new e(t);return r.xor(n)},t.prototype.leftShift=function(t){return"number"===typeof t?this.leftShiftS(t):this.leftShiftM(t)},t.prototype.leftShiftS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)<<t);return this},t.prototype.leftShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)<<t.get(e,n));return this},t.leftShift=function(t,n){const r=new e(t);return r.leftShift(n)},t.prototype.signPropagatingRightShift=function(t){return"number"===typeof t?this.signPropagatingRightShiftS(t):this.signPropagatingRightShiftM(t)},t.prototype.signPropagatingRightShiftS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>t);return this},t.prototype.signPropagatingRightShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>t.get(e,n));return this},t.signPropagatingRightShift=function(t,n){const r=new e(t);return r.signPropagatingRightShift(n)},t.prototype.rightShift=function(t){return"number"===typeof t?this.rightShiftS(t):this.rightShiftM(t)},t.prototype.rightShiftS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>>t);return this},t.prototype.rightShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>>t.get(e,n));return this},t.rightShift=function(t,n){const r=new e(t);return r.rightShift(n)},t.prototype.zeroFillRightShift=t.prototype.rightShift,t.prototype.zeroFillRightShiftS=t.prototype.rightShiftS,t.prototype.zeroFillRightShiftM=t.prototype.rightShiftM,t.zeroFillRightShift=t.rightShift,t.prototype.not=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,~this.get(t,e));return this},t.not=function(t){const n=new e(t);return n.not()},t.prototype.abs=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.abs(this.get(t,e)));return this},t.abs=function(t){const n=new e(t);return n.abs()},t.prototype.acos=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.acos(this.get(t,e)));return this},t.acos=function(t){const n=new e(t);return n.acos()},t.prototype.acosh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.acosh(this.get(t,e)));return this},t.acosh=function(t){const n=new e(t);return n.acosh()},t.prototype.asin=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.asin(this.get(t,e)));return this},t.asin=function(t){const n=new e(t);return n.asin()},t.prototype.asinh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.asinh(this.get(t,e)));return this},t.asinh=function(t){const n=new e(t);return n.asinh()},t.prototype.atan=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.atan(this.get(t,e)));return this},t.atan=function(t){const n=new e(t);return n.atan()},t.prototype.atanh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.atanh(this.get(t,e)));return this},t.atanh=function(t){const n=new e(t);return n.atanh()},t.prototype.cbrt=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cbrt(this.get(t,e)));return this},t.cbrt=function(t){const n=new e(t);return n.cbrt()},t.prototype.ceil=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.ceil(this.get(t,e)));return this},t.ceil=function(t){const n=new e(t);return n.ceil()},t.prototype.clz32=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.clz32(this.get(t,e)));return this},t.clz32=function(t){const n=new e(t);return n.clz32()},t.prototype.cos=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cos(this.get(t,e)));return this},t.cos=function(t){const n=new e(t);return n.cos()},t.prototype.cosh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cosh(this.get(t,e)));return this},t.cosh=function(t){const n=new e(t);return n.cosh()},t.prototype.exp=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.exp(this.get(t,e)));return this},t.exp=function(t){const n=new e(t);return n.exp()},t.prototype.expm1=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.expm1(this.get(t,e)));return this},t.expm1=function(t){const n=new e(t);return n.expm1()},t.prototype.floor=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.floor(this.get(t,e)));return this},t.floor=function(t){const n=new e(t);return n.floor()},t.prototype.fround=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.fround(this.get(t,e)));return this},t.fround=function(t){const n=new e(t);return n.fround()},t.prototype.log=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log(this.get(t,e)));return this},t.log=function(t){const n=new e(t);return n.log()},t.prototype.log1p=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log1p(this.get(t,e)));return this},t.log1p=function(t){const n=new e(t);return n.log1p()},t.prototype.log10=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log10(this.get(t,e)));return this},t.log10=function(t){const n=new e(t);return n.log10()},t.prototype.log2=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log2(this.get(t,e)));return this},t.log2=function(t){const n=new e(t);return n.log2()},t.prototype.round=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.round(this.get(t,e)));return this},t.round=function(t){const n=new e(t);return n.round()},t.prototype.sign=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sign(this.get(t,e)));return this},t.sign=function(t){const n=new e(t);return n.sign()},t.prototype.sin=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sin(this.get(t,e)));return this},t.sin=function(t){const n=new e(t);return n.sin()},t.prototype.sinh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sinh(this.get(t,e)));return this},t.sinh=function(t){const n=new e(t);return n.sinh()},t.prototype.sqrt=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sqrt(this.get(t,e)));return this},t.sqrt=function(t){const n=new e(t);return n.sqrt()},t.prototype.tan=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.tan(this.get(t,e)));return this},t.tan=function(t){const n=new e(t);return n.tan()},t.prototype.tanh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.tanh(this.get(t,e)));return this},t.tanh=function(t){const n=new e(t);return n.tanh()},t.prototype.trunc=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.trunc(this.get(t,e)));return this},t.trunc=function(t){const n=new e(t);return n.trunc()},t.pow=function(t,n){const r=new e(t);return r.pow(n)},t.prototype.pow=function(t){return"number"===typeof t?this.powS(t):this.powM(t)},t.prototype.powS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,Math.pow(this.get(e,n),t));return this},t.prototype.powM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,Math.pow(this.get(e,n),t.get(e,n)));return this}}function m(t,e,n){let r=n?t.rows:t.rows-1;if(e<0||e>r)throw new RangeError("Row index out of range")}function y(t,e,n){let r=n?t.columns:t.columns-1;if(e<0||e>r)throw new RangeError("Column index out of range")}function v(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function b(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function _(t,e){if(!i(e))throw new TypeError("row indices must be an array");for(let n=0;n<e.length;n++)if(e[n]<0||e[n]>=t.rows)throw new RangeError("row indices are out of range")}function x(t,e){if(!i(e))throw new TypeError("column indices must be an array");for(let n=0;n<e.length;n++)if(e[n]<0||e[n]>=t.columns)throw new RangeError("column indices are out of range")}function w(t,e,n,r,i){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(E("startRow",e),E("endRow",n),E("startColumn",r),E("endColumn",i),e>n||r>i||e<0||e>=t.rows||n<0||n>=t.rows||r<0||r>=t.columns||i<0||i>=t.columns)throw new RangeError("Submatrix indices are out of range")}function S(t,e=0){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function E(t,e){if("number"!==typeof e)throw new TypeError(t+" must be a number")}function C(t){if(t.isEmpty())throw new Error("Empty matrix has no elements to index")}function M(t){let e=S(t.rows);for(let n=0;n<t.rows;++n)for(let r=0;r<t.columns;++r)e[n]+=t.get(n,r);return e}function T(t){let e=S(t.columns);for(let n=0;n<t.rows;++n)for(let r=0;r<t.columns;++r)e[r]+=t.get(n,r);return e}function A(t){let e=0;for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)e+=t.get(n,r);return e}function O(t){let e=S(t.rows,1);for(let n=0;n<t.rows;++n)for(let r=0;r<t.columns;++r)e[n]*=t.get(n,r);return e}function k(t){let e=S(t.columns,1);for(let n=0;n<t.rows;++n)for(let r=0;r<t.columns;++r)e[r]*=t.get(n,r);return e}function I(t){let e=1;for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)e*=t.get(n,r);return e}function P(t,e,n){const r=t.rows,i=t.columns,o=[];for(let a=0;a<r;a++){let r=0,s=0,l=0;for(let e=0;e<i;e++)l=t.get(a,e)-n[a],r+=l,s+=l*l;e?o.push((s-r*r/i)/(i-1)):o.push((s-r*r/i)/i)}return o}function L(t,e,n){const r=t.rows,i=t.columns,o=[];for(let a=0;a<i;a++){let i=0,s=0,l=0;for(let e=0;e<r;e++)l=t.get(e,a)-n[a],i+=l,s+=l*l;e?o.push((s-i*i/r)/(r-1)):o.push((s-i*i/r)/r)}return o}function N(t,e,n){const r=t.rows,i=t.columns,o=r*i;let a=0,s=0,l=0;for(let u=0;u<r;u++)for(let e=0;e<i;e++)l=t.get(u,e)-n,a+=l,s+=l*l;return e?(s-a*a/o)/(o-1):(s-a*a/o)/o}function R(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e[n])}function D(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e[r])}function F(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e)}function j(t){const e=[];for(let n=0;n<t.rows;n++){let r=0;for(let e=0;e<t.columns;e++)r+=Math.pow(t.get(n,e),2)/(t.columns-1);e.push(Math.sqrt(r))}return e}function B(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e[n])}function z(t){const e=[];for(let n=0;n<t.columns;n++){let r=0;for(let e=0;e<t.rows;e++)r+=Math.pow(t.get(e,n),2)/(t.rows-1);e.push(Math.sqrt(r))}return e}function U(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e[r])}function G(t){const e=t.size-1;let n=0;for(let r=0;r<t.columns;r++)for(let i=0;i<t.rows;i++)n+=Math.pow(t.get(i,r),2)/e;return Math.sqrt(n)}function q(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e)}class V{static from1DArray(t,e,n){let r=t*e;if(r!==n.length)throw new RangeError("data length does not match given dimensions");let i=new Y(t,e);for(let o=0;o<t;o++)for(let t=0;t<e;t++)i.set(o,t,n[o*e+t]);return i}static rowVector(t){let e=new Y(1,t.length);for(let n=0;n<t.length;n++)e.set(0,n,t[n]);return e}static columnVector(t){let e=new Y(t.length,1);for(let n=0;n<t.length;n++)e.set(n,0,t[n]);return e}static zeros(t,e){return new Y(t,e)}static ones(t,e){return new Y(t,e).fill(1)}static rand(t,e,n={}){if("object"!==typeof n)throw new TypeError("options must be an object");const{random:r=Math.random}=n;let i=new Y(t,e);for(let o=0;o<t;o++)for(let t=0;t<e;t++)i.set(o,t,r());return i}static randInt(t,e,n={}){if("object"!==typeof n)throw new TypeError("options must be an object");const{min:r=0,max:i=1e3,random:o=Math.random}=n;if(!Number.isInteger(r))throw new TypeError("min must be an integer");if(!Number.isInteger(i))throw new TypeError("max must be an integer");if(r>=i)throw new RangeError("min must be smaller than max");let a=i-r,s=new Y(t,e);for(let l=0;l<t;l++)for(let t=0;t<e;t++){let e=r+Math.round(o()*a);s.set(l,t,e)}return s}static eye(t,e,n){void 0===e&&(e=t),void 0===n&&(n=1);let r=Math.min(t,e),i=this.zeros(t,e);for(let o=0;o<r;o++)i.set(o,o,n);return i}static diag(t,e,n){let r=t.length;void 0===e&&(e=r),void 0===n&&(n=e);let i=Math.min(r,e,n),o=this.zeros(e,n);for(let a=0;a<i;a++)o.set(a,a,t[a]);return o}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let n=t.rows,r=t.columns,i=new Y(n,r);for(let o=0;o<n;o++)for(let n=0;n<r;n++)i.set(o,n,Math.min(t.get(o,n),e.get(o,n)));return i}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let n=t.rows,r=t.columns,i=new this(n,r);for(let o=0;o<n;o++)for(let n=0;n<r;n++)i.set(o,n,Math.max(t.get(o,n),e.get(o,n)));return i}static checkMatrix(t){return V.isMatrix(t)?t:new Y(t)}static isMatrix(t){return null!=t&&"Matrix"===t.klass}get size(){return this.rows*this.columns}apply(t){if("function"!==typeof t)throw new TypeError("callback must be a function");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.call(this,e,n);return this}to1DArray(){let t=[];for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.push(this.get(e,n));return t}to2DArray(){let t=[];for(let e=0;e<this.rows;e++){t.push([]);for(let n=0;n<this.columns;n++)t[e].push(this.get(e,n))}return t}toJSON(){return this.to2DArray()}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isEmpty(){return 0===this.rows||0===this.columns}isSymmetric(){if(this.isSquare()){for(let t=0;t<this.rows;t++)for(let e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}isEchelonForm(){let t=0,e=0,n=-1,r=!0,i=!1;while(t<this.rows&&r){e=0,i=!1;while(e<this.columns&&!1===i)0===this.get(t,e)?e++:1===this.get(t,e)&&e>n?(i=!0,n=e):(r=!1,i=!0);t++}return r}isReducedEchelonForm(){let t=0,e=0,n=-1,r=!0,i=!1;while(t<this.rows&&r){e=0,i=!1;while(e<this.columns&&!1===i)0===this.get(t,e)?e++:1===this.get(t,e)&&e>n?(i=!0,n=e):(r=!1,i=!0);for(let n=e+1;n<this.rows;n++)0!==this.get(t,n)&&(r=!1);t++}return r}echelonForm(){let t=this.clone(),e=0,n=0;while(e<t.rows&&n<t.columns){let r=e;for(let i=e;i<t.rows;i++)t.get(i,n)>t.get(r,n)&&(r=i);if(0===t.get(r,n))n++;else{t.swapRows(e,r);let i=t.get(e,n);for(let r=n;r<t.columns;r++)t.set(e,r,t.get(e,r)/i);for(let r=e+1;r<t.rows;r++){let i=t.get(r,n)/t.get(e,n);t.set(r,n,0);for(let o=n+1;o<t.columns;o++)t.set(r,o,t.get(r,o)-t.get(e,o)*i)}e++,n++}}return t}reducedEchelonForm(){let t=this.echelonForm(),e=t.columns,n=t.rows,r=n-1;while(r>=0)if(0===t.maxRow(r))r--;else{let i=0,o=!1;while(i<n&&!1===o)1===t.get(r,i)?o=!0:i++;for(let n=0;n<r;n++){let o=t.get(n,i);for(let a=i;a<e;a++){let e=t.get(n,a)-o*t.get(r,a);t.set(n,a,e)}}r--}return t}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(t={}){if("object"!==typeof t)throw new TypeError("options must be an object");const{rows:e=1,columns:n=1}=t;if(!Number.isInteger(e)||e<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(n)||n<=0)throw new TypeError("columns must be a positive integer");let r=new Y(this.rows*e,this.columns*n);for(let i=0;i<e;i++)for(let t=0;t<n;t++)r.setSubMatrix(this,this.rows*i,this.columns*t);return r}fill(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,t);return this}neg(){return this.mulS(-1)}getRow(t){m(this,t);let e=[];for(let n=0;n<this.columns;n++)e.push(this.get(t,n));return e}getRowVector(t){return Y.rowVector(this.getRow(t))}setRow(t,e){m(this,t),e=v(this,e);for(let n=0;n<this.columns;n++)this.set(t,n,e[n]);return this}swapRows(t,e){m(this,t),m(this,e);for(let n=0;n<this.columns;n++){let r=this.get(t,n);this.set(t,n,this.get(e,n)),this.set(e,n,r)}return this}getColumn(t){y(this,t);let e=[];for(let n=0;n<this.rows;n++)e.push(this.get(n,t));return e}getColumnVector(t){return Y.columnVector(this.getColumn(t))}setColumn(t,e){y(this,t),e=b(this,e);for(let n=0;n<this.rows;n++)this.set(n,t,e[n]);return this}swapColumns(t,e){y(this,t),y(this,e);for(let n=0;n<this.rows;n++){let r=this.get(n,t);this.set(n,t,this.get(n,e)),this.set(n,e,r)}return this}addRowVector(t){t=v(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[n]);return this}subRowVector(t){t=v(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[n]);return this}mulRowVector(t){t=v(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[n]);return this}divRowVector(t){t=v(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[n]);return this}addColumnVector(t){t=b(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[e]);return this}subColumnVector(t){t=b(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[e]);return this}mulColumnVector(t){t=b(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[e]);return this}divColumnVector(t){t=b(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[e]);return this}mulRow(t,e){m(this,t);for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this}mulColumn(t,e){y(this,t);for(let n=0;n<this.rows;n++)this.set(n,t,this.get(n,t)*e);return this}max(t){if(this.isEmpty())return NaN;switch(t){case"row":{const t=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)>t[e]&&(t[e]=this.get(e,n));return t}case"column":{const t=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)>t[n]&&(t[n]=this.get(e,n));return t}case void 0:{let t=this.get(0,0);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}default:throw new Error("invalid option: "+t)}}maxIndex(){C(this);let t=this.get(0,0),e=[0,0];for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.get(n,r)>t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}min(t){if(this.isEmpty())return NaN;switch(t){case"row":{const t=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)<t[e]&&(t[e]=this.get(e,n));return t}case"column":{const t=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)<t[n]&&(t[n]=this.get(e,n));return t}case void 0:{let t=this.get(0,0);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}default:throw new Error("invalid option: "+t)}}minIndex(){C(this);let t=this.get(0,0),e=[0,0];for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.get(n,r)<t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}maxRow(t){if(m(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}maxRowIndex(t){m(this,t),C(this);let e=this.get(t,0),n=[t,0];for(let r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r),n[1]=r);return n}minRow(t){if(m(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}minRowIndex(t){m(this,t),C(this);let e=this.get(t,0),n=[t,0];for(let r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r),n[1]=r);return n}maxColumn(t){if(y(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t));return e}maxColumnIndex(t){y(this,t),C(this);let e=this.get(0,t),n=[0,t];for(let r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t),n[0]=r);return n}minColumn(t){if(y(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t));return e}minColumnIndex(t){y(this,t),C(this);let e=this.get(0,t),n=[0,t];for(let r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t),n[0]=r);return n}diag(){let t=Math.min(this.rows,this.columns),e=[];for(let n=0;n<t;n++)e.push(this.get(n,n));return e}norm(t="frobenius"){let e=0;if("max"===t)return this.max();if("frobenius"===t){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e+=this.get(t,n)*this.get(t,n);return Math.sqrt(e)}throw new RangeError("unknown norm type: "+t)}cumulativeSum(){let t=0;for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t+=this.get(e,n),this.set(e,n,t);return this}dot(t){V.isMatrix(t)&&(t=t.to1DArray());let e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");let n=0;for(let r=0;r<e.length;r++)n+=e[r]*t[r];return n}mmul(t){t=Y.checkMatrix(t);let e=this.rows,n=this.columns,r=t.columns,i=new Y(e,r),o=new Float64Array(n);for(let a=0;a<r;a++){for(let e=0;e<n;e++)o[e]=t.get(e,a);for(let t=0;t<e;t++){let e=0;for(let r=0;r<n;r++)e+=this.get(t,r)*o[r];i.set(t,a,e)}}return i}strassen2x2(t){t=Y.checkMatrix(t);let e=new Y(2,2);const n=this.get(0,0),r=t.get(0,0),i=this.get(0,1),o=t.get(0,1),a=this.get(1,0),s=t.get(1,0),l=this.get(1,1),u=t.get(1,1),c=(n+l)*(r+u),h=(a+l)*r,d=n*(o-u),f=l*(s-r),p=(n+i)*u,g=(a-n)*(r+o),m=(i-l)*(s+u),y=c+f-p+m,v=d+p,b=h+f,_=c-h+d+g;return e.set(0,0,y),e.set(0,1,v),e.set(1,0,b),e.set(1,1,_),e}strassen3x3(t){t=Y.checkMatrix(t);let e=new Y(3,3);const n=this.get(0,0),r=this.get(0,1),i=this.get(0,2),o=this.get(1,0),a=this.get(1,1),s=this.get(1,2),l=this.get(2,0),u=this.get(2,1),c=this.get(2,2),h=t.get(0,0),d=t.get(0,1),f=t.get(0,2),p=t.get(1,0),g=t.get(1,1),m=t.get(1,2),y=t.get(2,0),v=t.get(2,1),b=t.get(2,2),_=(n+r+i-o-a-u-c)*g,x=(n-o)*(-d+g),w=a*(-h+d+p-g-m-y+b),S=(-n+o+a)*(h-d+g),E=(o+a)*(-h+d),C=n*h,M=(-n+l+u)*(h-f+m),T=(-n+l)*(f-m),A=(l+u)*(-h+f),O=(n+r+i-a-s-l-u)*m,k=u*(-h+f+p-g-m-y+v),I=(-i+u+c)*(g+y-v),P=(i-c)*(g-v),L=i*y,N=(u+c)*(-y+v),R=(-i+a+s)*(m+y-b),D=(i-s)*(m-b),F=(a+s)*(-y+b),j=r*p,B=s*v,z=o*f,U=l*d,G=c*b,q=C+L+j,V=_+S+E+C+I+L+N,H=C+M+A+O+L+R+F,W=x+w+S+C+L+R+D,X=x+S+E+C+B,J=L+R+D+F+z,Z=C+M+T+k+I+P+L,K=I+P+L+N+U,Q=C+M+T+A+G;return e.set(0,0,q),e.set(0,1,V),e.set(0,2,H),e.set(1,0,W),e.set(1,1,X),e.set(1,2,J),e.set(2,0,Z),e.set(2,1,K),e.set(2,2,Q),e}mmulStrassen(t){t=Y.checkMatrix(t);let e=this.clone(),n=e.rows,r=e.columns,i=t.rows,o=t.columns;function a(t,e,n){let r=t.rows,i=t.columns;if(r===e&&i===n)return t;{let r=V.zeros(e,n);return r=r.setSubMatrix(t,0,0),r}}r!==i&&console.warn(`Multiplying ${n} x ${r} and ${i} x ${o} matrix: dimensions do not match.`);let s=Math.max(n,i),l=Math.max(r,o);function u(t,e,n,r){if(n<=512||r<=512)return t.mmul(e);n%2===1&&r%2===1?(t=a(t,n+1,r+1),e=a(e,n+1,r+1)):n%2===1?(t=a(t,n+1,r),e=a(e,n+1,r)):r%2===1&&(t=a(t,n,r+1),e=a(e,n,r+1));let i=parseInt(t.rows/2,10),o=parseInt(t.columns/2,10),s=t.subMatrix(0,i-1,0,o-1),l=e.subMatrix(0,i-1,0,o-1),c=t.subMatrix(0,i-1,o,t.columns-1),h=e.subMatrix(0,i-1,o,e.columns-1),d=t.subMatrix(i,t.rows-1,0,o-1),f=e.subMatrix(i,e.rows-1,0,o-1),p=t.subMatrix(i,t.rows-1,o,t.columns-1),g=e.subMatrix(i,e.rows-1,o,e.columns-1),m=u(V.add(s,p),V.add(l,g),i,o),y=u(V.add(d,p),l,i,o),v=u(s,V.sub(h,g),i,o),b=u(p,V.sub(f,l),i,o),_=u(V.add(s,c),g,i,o),x=u(V.sub(d,s),V.add(l,h),i,o),w=u(V.sub(c,p),V.add(f,g),i,o),S=V.add(m,b);S.sub(_),S.add(w);let E=V.add(v,_),C=V.add(y,b),M=V.sub(m,y);M.add(v),M.add(x);let T=V.zeros(2*S.rows,2*S.columns);return T=T.setSubMatrix(S,0,0),T=T.setSubMatrix(E,S.rows,0),T=T.setSubMatrix(C,0,S.columns),T=T.setSubMatrix(M,S.rows,S.columns),T.subMatrix(0,n-1,0,r-1)}return e=a(e,s,l),t=a(t,s,l),u(e,t,s,l)}scaleRows(t={}){if("object"!==typeof t)throw new TypeError("options must be an object");const{min:e=0,max:n=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(e>=n)throw new RangeError("min must be smaller than max");let r=new Y(this.rows,this.columns);for(let i=0;i<this.rows;i++){const t=this.getRow(i);t.length>0&&s(t,{min:e,max:n,output:t}),r.setRow(i,t)}return r}scaleColumns(t={}){if("object"!==typeof t)throw new TypeError("options must be an object");const{min:e=0,max:n=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(e>=n)throw new RangeError("min must be smaller than max");let r=new Y(this.rows,this.columns);for(let i=0;i<this.columns;i++){const t=this.getColumn(i);t.length&&s(t,{min:e,max:n,output:t}),r.setColumn(i,t)}return r}flipRows(){const t=Math.ceil(this.columns/2);for(let e=0;e<this.rows;e++)for(let n=0;n<t;n++){let t=this.get(e,n),r=this.get(e,this.columns-1-n);this.set(e,n,r),this.set(e,this.columns-1-n,t)}return this}flipColumns(){const t=Math.ceil(this.rows/2);for(let e=0;e<this.columns;e++)for(let n=0;n<t;n++){let t=this.get(n,e),r=this.get(this.rows-1-n,e);this.set(n,e,r),this.set(this.rows-1-n,e,t)}return this}kroneckerProduct(t){t=Y.checkMatrix(t);let e=this.rows,n=this.columns,r=t.rows,i=t.columns,o=new Y(e*r,n*i);for(let a=0;a<e;a++)for(let e=0;e<n;e++)for(let n=0;n<r;n++)for(let s=0;s<i;s++)o.set(r*a+n,i*e+s,this.get(a,e)*t.get(n,s));return o}kroneckerSum(t){if(t=Y.checkMatrix(t),!this.isSquare()||!t.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let e=this.rows,n=t.rows,r=this.kroneckerProduct(Y.eye(n,n)),i=Y.eye(e,e).kroneckerProduct(t);return r.add(i)}transpose(){let t=new Y(this.columns,this.rows);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.set(n,e,this.get(e,n));return t}sortRows(t=H){for(let e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t=H){for(let e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,n,r){w(this,t,e,n,r);let i=new Y(e-t+1,r-n+1);for(let o=t;o<=e;o++)for(let e=n;e<=r;e++)i.set(o-t,e-n,this.get(o,e));return i}subMatrixRow(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.columns-1),e>n||e<0||e>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");let r=new Y(t.length,n-e+1);for(let i=0;i<t.length;i++)for(let o=e;o<=n;o++){if(t[i]<0||t[i]>=this.rows)throw new RangeError("Row index out of range: "+t[i]);r.set(i,o-e,this.get(t[i],o))}return r}subMatrixColumn(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.rows-1),e>n||e<0||e>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");let r=new Y(n-e+1,t.length);for(let i=0;i<t.length;i++)for(let o=e;o<=n;o++){if(t[i]<0||t[i]>=this.columns)throw new RangeError("Column index out of range: "+t[i]);r.set(o-e,i,this.get(o,t[i]))}return r}setSubMatrix(t,e,n){if(t=Y.checkMatrix(t),t.isEmpty())return this;let r=e+t.rows-1,i=n+t.columns-1;w(this,e,r,n,i);for(let o=0;o<t.rows;o++)for(let r=0;r<t.columns;r++)this.set(e+o,n+r,t.get(o,r));return this}selection(t,e){_(this,t),x(this,e);let n=new Y(t.length,e.length);for(let r=0;r<t.length;r++){let i=t[r];for(let t=0;t<e.length;t++){let o=e[t];n.set(r,t,this.get(i,o))}}return n}trace(){let t=Math.min(this.rows,this.columns),e=0;for(let n=0;n<t;n++)e+=this.get(n,n);return e}clone(){let t=new Y(this.rows,this.columns);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.set(e,n,this.get(e,n));return t}sum(t){switch(t){case"row":return M(this);case"column":return T(this);case void 0:return A(this);default:throw new Error("invalid option: "+t)}}product(t){switch(t){case"row":return O(this);case"column":return k(this);case void 0:return I(this);default:throw new Error("invalid option: "+t)}}mean(t){const e=this.sum(t);switch(t){case"row":for(let t=0;t<this.rows;t++)e[t]/=this.columns;return e;case"column":for(let t=0;t<this.columns;t++)e[t]/=this.rows;return e;case void 0:return e/this.size;default:throw new Error("invalid option: "+t)}}variance(t,e={}){if("object"===typeof t&&(e=t,t=void 0),"object"!==typeof e)throw new TypeError("options must be an object");const{unbiased:n=!0,mean:r=this.mean(t)}=e;if("boolean"!==typeof n)throw new TypeError("unbiased must be a boolean");switch(t){case"row":if(!i(r))throw new TypeError("mean must be an array");return P(this,n,r);case"column":if(!i(r))throw new TypeError("mean must be an array");return L(this,n,r);case void 0:if("number"!==typeof r)throw new TypeError("mean must be a number");return N(this,n,r);default:throw new Error("invalid option: "+t)}}standardDeviation(t,e){"object"===typeof t&&(e=t,t=void 0);const n=this.variance(t,e);if(void 0===t)return Math.sqrt(n);for(let r=0;r<n.length;r++)n[r]=Math.sqrt(n[r]);return n}center(t,e={}){if("object"===typeof t&&(e=t,t=void 0),"object"!==typeof e)throw new TypeError("options must be an object");const{center:n=this.mean(t)}=e;switch(t){case"row":if(!i(n))throw new TypeError("center must be an array");return R(this,n),this;case"column":if(!i(n))throw new TypeError("center must be an array");return D(this,n),this;case void 0:if("number"!==typeof n)throw new TypeError("center must be a number");return F(this,n),this;default:throw new Error("invalid option: "+t)}}scale(t,e={}){if("object"===typeof t&&(e=t,t=void 0),"object"!==typeof e)throw new TypeError("options must be an object");let n=e.scale;switch(t){case"row":if(void 0===n)n=j(this);else if(!i(n))throw new TypeError("scale must be an array");return B(this,n),this;case"column":if(void 0===n)n=z(this);else if(!i(n))throw new TypeError("scale must be an array");return U(this,n),this;case void 0:if(void 0===n)n=G(this);else if("number"!==typeof n)throw new TypeError("scale must be a number");return q(this,n),this;default:throw new Error("invalid option: "+t)}}toString(t){return h(this,t)}}function H(t,e){return t-e}function W(t){return t.every(t=>"number"===typeof t)}V.prototype.klass="Matrix","undefined"!==typeof Symbol&&(V.prototype[Symbol.for("nodejs.util.inspect.custom")]=c),V.random=V.rand,V.randomInt=V.randInt,V.diagonal=V.diag,V.prototype.diagonal=V.prototype.diag,V.identity=V.eye,V.prototype.negate=V.prototype.neg,V.prototype.tensorProduct=V.prototype.kroneckerProduct;class Y extends V{constructor(t,e){if(super(),Y.isMatrix(t))return t.clone();if(Number.isInteger(t)&&t>=0){if(this.data=[],!(Number.isInteger(e)&&e>=0))throw new TypeError("nColumns must be a positive integer");for(let n=0;n<t;n++)this.data.push(new Float64Array(e))}else{if(!i(t))throw new TypeError("First argument must be a positive number or an array");{const n=t;if(t=n.length,e=t?n[0].length:0,"number"!==typeof e)throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let r=0;r<t;r++){if(n[r].length!==e)throw new RangeError("Inconsistent array dimensions");if(!W(n[r]))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(n[r]))}}}this.rows=t,this.columns=e}set(t,e,n){return this.data[t][e]=n,this}get(t,e){return this.data[t][e]}removeRow(t){return m(this,t),this.data.splice(t,1),this.rows-=1,this}addRow(t,e){return void 0===e&&(e=t,t=this.rows),m(this,t,!0),e=Float64Array.from(v(this,e)),this.data.splice(t,0,e),this.rows+=1,this}removeColumn(t){y(this,t);for(let e=0;e<this.rows;e++){const n=new Float64Array(this.columns-1);for(let r=0;r<t;r++)n[r]=this.data[e][r];for(let r=t+1;r<this.columns;r++)n[r-1]=this.data[e][r];this.data[e]=n}return this.columns-=1,this}addColumn(t,e){"undefined"===typeof e&&(e=t,t=this.columns),y(this,t,!0),e=b(this,e);for(let n=0;n<this.rows;n++){const r=new Float64Array(this.columns+1);let i=0;for(;i<t;i++)r[i]=this.data[n][i];for(r[i++]=e[n];i<this.columns+1;i++)r[i]=this.data[n][i-1];this.data[n]=r}return this.columns+=1,this}}g(V,Y);class X extends V{constructor(t,e,n){super(),this.matrix=t,this.rows=e,this.columns=n}}class J extends X{constructor(t,e){y(t,e),super(t,t.rows,1),this.column=e}set(t,e,n){return this.matrix.set(t,this.column,n),this}get(t){return this.matrix.get(t,this.column)}}class Z extends X{constructor(t,e){x(t,e),super(t,t.rows,e.length),this.columnIndices=e}set(t,e,n){return this.matrix.set(t,this.columnIndices[e],n),this}get(t,e){return this.matrix.get(t,this.columnIndices[e])}}class K extends X{constructor(t){super(t,t.rows,t.columns)}set(t,e,n){return this.matrix.set(t,this.columns-e-1,n),this}get(t,e){return this.matrix.get(t,this.columns-e-1)}}class Q extends X{constructor(t){super(t,t.rows,t.columns)}set(t,e,n){return this.matrix.set(this.rows-t-1,e,n),this}get(t,e){return this.matrix.get(this.rows-t-1,e)}}class $ extends X{constructor(t,e){m(t,e),super(t,1,t.columns),this.row=e}set(t,e,n){return this.matrix.set(this.row,e,n),this}get(t,e){return this.matrix.get(this.row,e)}}class tt extends X{constructor(t,e){_(t,e),super(t,e.length,t.columns),this.rowIndices=e}set(t,e,n){return this.matrix.set(this.rowIndices[t],e,n),this}get(t,e){return this.matrix.get(this.rowIndices[t],e)}}class et extends X{constructor(t,e,n){_(t,e),x(t,n),super(t,e.length,n.length),this.rowIndices=e,this.columnIndices=n}set(t,e,n){return this.matrix.set(this.rowIndices[t],this.columnIndices[e],n),this}get(t,e){return this.matrix.get(this.rowIndices[t],this.columnIndices[e])}}class nt extends X{constructor(t,e,n,r,i){w(t,e,n,r,i),super(t,n-e+1,i-r+1),this.startRow=e,this.startColumn=r}set(t,e,n){return this.matrix.set(this.startRow+t,this.startColumn+e,n),this}get(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}}class rt extends X{constructor(t){super(t,t.columns,t.rows)}set(t,e,n){return this.matrix.set(e,t,n),this}get(t,e){return this.matrix.get(e,t)}}class it extends V{constructor(t,e={}){const{rows:n=1}=e;if(t.length%n!==0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=n,this.columns=t.length/n,this.data=t}set(t,e,n){let r=this._calculateIndex(t,e);return this.data[r]=n,this}get(t,e){let n=this._calculateIndex(t,e);return this.data[n]}_calculateIndex(t,e){return t*this.columns+e}}class ot extends V{constructor(t){super(),this.data=t,this.rows=t.length,this.columns=t[0].length}set(t,e,n){return this.data[t][e]=n,this}get(t,e){return this.data[t][e]}}function at(t,e){if(i(t))return t[0]&&i(t[0])?new ot(t):new it(t,e);throw new Error("the argument is not an array")}class st{constructor(t){t=ot.checkMatrix(t);let e,n,r,i,o,a,s,l,u,c=t.clone(),h=c.rows,d=c.columns,f=new Float64Array(h),p=1;for(e=0;e<h;e++)f[e]=e;for(l=new Float64Array(h),n=0;n<d;n++){for(e=0;e<h;e++)l[e]=c.get(e,n);for(e=0;e<h;e++){for(u=Math.min(e,n),o=0,r=0;r<u;r++)o+=c.get(e,r)*l[r];l[e]-=o,c.set(e,n,l[e])}for(i=n,e=n+1;e<h;e++)Math.abs(l[e])>Math.abs(l[i])&&(i=e);if(i!==n){for(r=0;r<d;r++)a=c.get(i,r),c.set(i,r,c.get(n,r)),c.set(n,r,a);s=f[i],f[i]=f[n],f[n]=s,p=-p}if(n<h&&0!==c.get(n,n))for(e=n+1;e<h;e++)c.set(e,n,c.get(e,n)/c.get(n,n))}this.LU=c,this.pivotVector=f,this.pivotSign=p}isSingular(){let t=this.LU,e=t.columns;for(let n=0;n<e;n++)if(0===t.get(n,n))return!0;return!1}solve(t){t=Y.checkMatrix(t);let e=this.LU,n=e.rows;if(n!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let r,i,o,a=t.columns,s=t.subMatrixRow(this.pivotVector,0,a-1),l=e.columns;for(o=0;o<l;o++)for(r=o+1;r<l;r++)for(i=0;i<a;i++)s.set(r,i,s.get(r,i)-s.get(o,i)*e.get(r,o));for(o=l-1;o>=0;o--){for(i=0;i<a;i++)s.set(o,i,s.get(o,i)/e.get(o,o));for(r=0;r<o;r++)for(i=0;i<a;i++)s.set(r,i,s.get(r,i)-s.get(o,i)*e.get(r,o))}return s}get determinant(){let t=this.LU;if(!t.isSquare())throw new Error("Matrix must be square");let e=this.pivotSign,n=t.columns;for(let r=0;r<n;r++)e*=t.get(r,r);return e}get lowerTriangularMatrix(){let t=this.LU,e=t.rows,n=t.columns,r=new Y(e,n);for(let i=0;i<e;i++)for(let e=0;e<n;e++)i>e?r.set(i,e,t.get(i,e)):i===e?r.set(i,e,1):r.set(i,e,0);return r}get upperTriangularMatrix(){let t=this.LU,e=t.rows,n=t.columns,r=new Y(e,n);for(let i=0;i<e;i++)for(let e=0;e<n;e++)i<=e?r.set(i,e,t.get(i,e)):r.set(i,e,0);return r}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function lt(t,e){let n=0;return Math.abs(t)>Math.abs(e)?(n=e/t,Math.abs(t)*Math.sqrt(1+n*n)):0!==e?(n=t/e,Math.abs(e)*Math.sqrt(1+n*n)):0}class ut{constructor(t){t=ot.checkMatrix(t);let e,n,r,i,o=t.clone(),a=t.rows,s=t.columns,l=new Float64Array(s);for(r=0;r<s;r++){let t=0;for(e=r;e<a;e++)t=lt(t,o.get(e,r));if(0!==t){for(o.get(r,r)<0&&(t=-t),e=r;e<a;e++)o.set(e,r,o.get(e,r)/t);for(o.set(r,r,o.get(r,r)+1),n=r+1;n<s;n++){for(i=0,e=r;e<a;e++)i+=o.get(e,r)*o.get(e,n);for(i=-i/o.get(r,r),e=r;e<a;e++)o.set(e,n,o.get(e,n)+i*o.get(e,r))}}l[r]=-t}this.QR=o,this.Rdiag=l}solve(t){t=Y.checkMatrix(t);let e=this.QR,n=e.rows;if(t.rows!==n)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let r,i,o,a,s=t.columns,l=t.clone(),u=e.columns;for(o=0;o<u;o++)for(i=0;i<s;i++){for(a=0,r=o;r<n;r++)a+=e.get(r,o)*l.get(r,i);for(a=-a/e.get(o,o),r=o;r<n;r++)l.set(r,i,l.get(r,i)+a*e.get(r,o))}for(o=u-1;o>=0;o--){for(i=0;i<s;i++)l.set(o,i,l.get(o,i)/this.Rdiag[o]);for(r=0;r<o;r++)for(i=0;i<s;i++)l.set(r,i,l.get(r,i)-l.get(o,i)*e.get(r,o))}return l.subMatrix(0,u-1,0,s-1)}isFullRank(){let t=this.QR.columns;for(let e=0;e<t;e++)if(0===this.Rdiag[e])return!1;return!0}get upperTriangularMatrix(){let t,e,n=this.QR,r=n.columns,i=new Y(r,r);for(t=0;t<r;t++)for(e=0;e<r;e++)t<e?i.set(t,e,n.get(t,e)):t===e?i.set(t,e,this.Rdiag[t]):i.set(t,e,0);return i}get orthogonalMatrix(){let t,e,n,r,i=this.QR,o=i.rows,a=i.columns,s=new Y(o,a);for(n=a-1;n>=0;n--){for(t=0;t<o;t++)s.set(t,n,0);for(s.set(n,n,1),e=n;e<a;e++)if(0!==i.get(n,n)){for(r=0,t=n;t<o;t++)r+=i.get(t,n)*s.get(t,e);for(r=-r/i.get(n,n),t=n;t<o;t++)s.set(t,e,s.get(t,e)+r*i.get(t,n))}}return s}}class ct{constructor(t,e={}){if(t=ot.checkMatrix(t),t.isEmpty())throw new Error("Matrix must be non-empty");let n=t.rows,r=t.columns;const{computeLeftSingularVectors:i=!0,computeRightSingularVectors:o=!0,autoTranspose:a=!1}=e;let s,l=Boolean(i),u=Boolean(o),c=!1;if(n<r)if(a){s=t.transpose(),n=s.rows,r=s.columns,c=!0;let e=l;l=u,u=e}else s=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else s=t.clone();let h=Math.min(n,r),d=Math.min(n+1,r),f=new Float64Array(d),p=new Y(n,h),g=new Y(r,r),m=new Float64Array(r),y=new Float64Array(n),v=new Float64Array(d);for(let M=0;M<d;M++)v[M]=M;let b=Math.min(n-1,r),_=Math.max(0,Math.min(r-2,n)),x=Math.max(b,_);for(let M=0;M<x;M++){if(M<b){f[M]=0;for(let t=M;t<n;t++)f[M]=lt(f[M],s.get(t,M));if(0!==f[M]){s.get(M,M)<0&&(f[M]=-f[M]);for(let t=M;t<n;t++)s.set(t,M,s.get(t,M)/f[M]);s.set(M,M,s.get(M,M)+1)}f[M]=-f[M]}for(let t=M+1;t<r;t++){if(M<b&&0!==f[M]){let e=0;for(let r=M;r<n;r++)e+=s.get(r,M)*s.get(r,t);e=-e/s.get(M,M);for(let r=M;r<n;r++)s.set(r,t,s.get(r,t)+e*s.get(r,M))}m[t]=s.get(M,t)}if(l&&M<b)for(let t=M;t<n;t++)p.set(t,M,s.get(t,M));if(M<_){m[M]=0;for(let t=M+1;t<r;t++)m[M]=lt(m[M],m[t]);if(0!==m[M]){m[M+1]<0&&(m[M]=0-m[M]);for(let t=M+1;t<r;t++)m[t]/=m[M];m[M+1]+=1}if(m[M]=-m[M],M+1<n&&0!==m[M]){for(let t=M+1;t<n;t++)y[t]=0;for(let t=M+1;t<n;t++)for(let e=M+1;e<r;e++)y[t]+=m[e]*s.get(t,e);for(let t=M+1;t<r;t++){let e=-m[t]/m[M+1];for(let r=M+1;r<n;r++)s.set(r,t,s.get(r,t)+e*y[r])}}if(u)for(let t=M+1;t<r;t++)g.set(t,M,m[t])}}let w=Math.min(r,n+1);if(b<r&&(f[b]=s.get(b,b)),n<w&&(f[w-1]=0),_+1<w&&(m[_]=s.get(_,w-1)),m[w-1]=0,l){for(let t=b;t<h;t++){for(let e=0;e<n;e++)p.set(e,t,0);p.set(t,t,1)}for(let t=b-1;t>=0;t--)if(0!==f[t]){for(let e=t+1;e<h;e++){let r=0;for(let i=t;i<n;i++)r+=p.get(i,t)*p.get(i,e);r=-r/p.get(t,t);for(let i=t;i<n;i++)p.set(i,e,p.get(i,e)+r*p.get(i,t))}for(let e=t;e<n;e++)p.set(e,t,-p.get(e,t));p.set(t,t,1+p.get(t,t));for(let e=0;e<t-1;e++)p.set(e,t,0)}else{for(let e=0;e<n;e++)p.set(e,t,0);p.set(t,t,1)}}if(u)for(let M=r-1;M>=0;M--){if(M<_&&0!==m[M])for(let t=M+1;t<r;t++){let e=0;for(let n=M+1;n<r;n++)e+=g.get(n,M)*g.get(n,t);e=-e/g.get(M+1,M);for(let n=M+1;n<r;n++)g.set(n,t,g.get(n,t)+e*g.get(n,M))}for(let t=0;t<r;t++)g.set(t,M,0);g.set(M,M,1)}let S=w-1,E=0,C=Number.EPSILON;while(w>0){let t,e;for(t=w-2;t>=-1;t--){if(-1===t)break;const e=Number.MIN_VALUE+C*Math.abs(f[t]+Math.abs(f[t+1]));if(Math.abs(m[t])<=e||Number.isNaN(m[t])){m[t]=0;break}}if(t===w-2)e=4;else{let n;for(n=w-1;n>=t;n--){if(n===t)break;let e=(n!==w?Math.abs(m[n]):0)+(n!==t+1?Math.abs(m[n-1]):0);if(Math.abs(f[n])<=C*e){f[n]=0;break}}n===t?e=3:n===w-1?e=1:(e=2,t=n)}switch(t++,e){case 1:{let e=m[w-2];m[w-2]=0;for(let n=w-2;n>=t;n--){let i=lt(f[n],e),o=f[n]/i,a=e/i;if(f[n]=i,n!==t&&(e=-a*m[n-1],m[n-1]=o*m[n-1]),u)for(let t=0;t<r;t++)i=o*g.get(t,n)+a*g.get(t,w-1),g.set(t,w-1,-a*g.get(t,n)+o*g.get(t,w-1)),g.set(t,n,i)}break}case 2:{let e=m[t-1];m[t-1]=0;for(let r=t;r<w;r++){let i=lt(f[r],e),o=f[r]/i,a=e/i;if(f[r]=i,e=-a*m[r],m[r]=o*m[r],l)for(let e=0;e<n;e++)i=o*p.get(e,r)+a*p.get(e,t-1),p.set(e,t-1,-a*p.get(e,r)+o*p.get(e,t-1)),p.set(e,r,i)}break}case 3:{const e=Math.max(Math.abs(f[w-1]),Math.abs(f[w-2]),Math.abs(m[w-2]),Math.abs(f[t]),Math.abs(m[t])),i=f[w-1]/e,o=f[w-2]/e,a=m[w-2]/e,s=f[t]/e,c=m[t]/e,h=((o+i)*(o-i)+a*a)/2,d=i*a*(i*a);let y=0;0===h&&0===d||(y=h<0?0-Math.sqrt(h*h+d):Math.sqrt(h*h+d),y=d/(h+y));let v=(s+i)*(s-i)+y,b=s*c;for(let _=t;_<w-1;_++){let e=lt(v,b);0===e&&(e=Number.MIN_VALUE);let i=v/e,o=b/e;if(_!==t&&(m[_-1]=e),v=i*f[_]+o*m[_],m[_]=i*m[_]-o*f[_],b=o*f[_+1],f[_+1]=i*f[_+1],u)for(let t=0;t<r;t++)e=i*g.get(t,_)+o*g.get(t,_+1),g.set(t,_+1,-o*g.get(t,_)+i*g.get(t,_+1)),g.set(t,_,e);if(e=lt(v,b),0===e&&(e=Number.MIN_VALUE),i=v/e,o=b/e,f[_]=e,v=i*m[_]+o*f[_+1],f[_+1]=-o*m[_]+i*f[_+1],b=o*m[_+1],m[_+1]=i*m[_+1],l&&_<n-1)for(let t=0;t<n;t++)e=i*p.get(t,_)+o*p.get(t,_+1),p.set(t,_+1,-o*p.get(t,_)+i*p.get(t,_+1)),p.set(t,_,e)}m[w-2]=v,E+=1;break}case 4:if(f[t]<=0&&(f[t]=f[t]<0?-f[t]:0,u))for(let e=0;e<=S;e++)g.set(e,t,-g.get(e,t));while(t<S){if(f[t]>=f[t+1])break;let e=f[t];if(f[t]=f[t+1],f[t+1]=e,u&&t<r-1)for(let n=0;n<r;n++)e=g.get(n,t+1),g.set(n,t+1,g.get(n,t)),g.set(n,t,e);if(l&&t<n-1)for(let r=0;r<n;r++)e=p.get(r,t+1),p.set(r,t+1,p.get(r,t)),p.set(r,t,e);t++}E=0,w--;break}}if(c){let t=g;g=p,p=t}this.m=n,this.n=r,this.s=f,this.U=p,this.V=g}solve(t){let e=t,n=this.threshold,r=this.s.length,i=Y.zeros(r,r);for(let h=0;h<r;h++)Math.abs(this.s[h])<=n?i.set(h,h,0):i.set(h,h,1/this.s[h]);let o=this.U,a=this.rightSingularVectors,s=a.mmul(i),l=a.rows,u=o.rows,c=Y.zeros(l,u);for(let h=0;h<l;h++)for(let t=0;t<u;t++){let e=0;for(let n=0;n<r;n++)e+=s.get(h,n)*o.get(t,n);c.set(h,t,e)}return c.mmul(e)}solveForDiagonal(t){return this.solve(Y.diag(t))}inverse(){let t=this.V,e=this.threshold,n=t.rows,r=t.columns,i=new Y(n,this.s.length);for(let u=0;u<n;u++)for(let n=0;n<r;n++)Math.abs(this.s[n])>e&&i.set(u,n,t.get(u,n)/this.s[n]);let o=this.U,a=o.rows,s=o.columns,l=new Y(n,a);for(let u=0;u<n;u++)for(let t=0;t<a;t++){let e=0;for(let n=0;n<s;n++)e+=i.get(u,n)*o.get(t,n);l.set(u,t,e)}return l}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,n=this.s;for(let r=0,i=n.length;r<i;r++)n[r]>t&&e++;return e}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return Y.diag(this.s)}}function ht(t,e=!1){return t=ot.checkMatrix(t),e?new ct(t).inverse():dt(t,Y.eye(t.rows))}function dt(t,e,n=!1){return t=ot.checkMatrix(t),e=ot.checkMatrix(e),n?new ct(t).solve(e):t.isSquare()?new st(t).solve(e):new ut(t).solve(e)}function ft(t){if(t=Y.checkMatrix(t),t.isSquare()){if(0===t.columns)return 1;let e,n,r,i;if(2===t.columns)return e=t.get(0,0),n=t.get(0,1),r=t.get(1,0),i=t.get(1,1),e*i-n*r;if(3===t.columns){let i,o,a;return i=new et(t,[1,2],[1,2]),o=new et(t,[1,2],[0,2]),a=new et(t,[1,2],[0,1]),e=t.get(0,0),n=t.get(0,1),r=t.get(0,2),e*ft(i)-n*ft(o)+r*ft(a)}return new st(t).determinant}throw Error("determinant can only be calculated for a square matrix")}function pt(t,e){let n=[];for(let r=0;r<t;r++)r!==e&&n.push(r);return n}function gt(t,e,n,r=1e-9,i=1e-9){if(t>i)return new Array(e.rows+1).fill(0);{let t=e.addRow(n,[0]);for(let e=0;e<t.rows;e++)Math.abs(t.get(e,0))<r&&t.set(e,0,0);return t.to1DArray()}}function mt(t,e={}){const{thresholdValue:n=1e-9,thresholdError:r=1e-9}=e;t=Y.checkMatrix(t);let i=t.rows,o=new Y(i,i);for(let a=0;a<i;a++){let e=Y.columnVector(t.getRow(a)),s=t.subMatrixRow(pt(i,a)).transpose(),l=new ct(s),u=l.solve(e),c=Y.sub(e,s.mmul(u)).abs().max();o.setRow(a,gt(c,u,a,n,r))}return o}function yt(t,e=Number.EPSILON){if(t=Y.checkMatrix(t),t.isEmpty())return t.transpose();let n=new ct(t,{autoTranspose:!0}),r=n.leftSingularVectors,i=n.rightSingularVectors,o=n.diagonal;for(let a=0;a<o.length;a++)Math.abs(o[a])>e?o[a]=1/o[a]:o[a]=0;return i.mmul(Y.diag(o).mmul(r.transpose()))}function vt(t,e=t,n={}){t=new Y(t);let r=!1;if("object"!==typeof e||Y.isMatrix(e)||i(e)?e=new Y(e):(n=e,e=t,r=!0),t.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:o=!0}=n;o&&(t=t.center("column"),r||(e=e.center("column")));const a=t.transpose().mmul(e);for(let i=0;i<a.rows;i++)for(let e=0;e<a.columns;e++)a.set(i,e,a.get(i,e)*(1/(t.rows-1)));return a}function bt(t,e=t,n={}){t=new Y(t);let r=!1;if("object"!==typeof e||Y.isMatrix(e)||i(e)?e=new Y(e):(n=e,e=t,r=!0),t.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:o=!0,scale:a=!0}=n;o&&(t.center("column"),r||e.center("column")),a&&(t.scale("column"),r||e.scale("column"));const s=t.standardDeviation("column",{unbiased:!0}),l=r?s:e.standardDeviation("column",{unbiased:!0}),u=t.transpose().mmul(e);for(let i=0;i<u.rows;i++)for(let e=0;e<u.columns;e++)u.set(i,e,u.get(i,e)*(1/(s[i]*l[e]))*(1/(t.rows-1)));return u}class _t{constructor(t,e={}){const{assumeSymmetric:n=!1}=e;if(t=ot.checkMatrix(t),!t.isSquare())throw new Error("Matrix is not a square matrix");if(t.isEmpty())throw new Error("Matrix must be non-empty");let r,i,o=t.columns,a=new Y(o,o),s=new Float64Array(o),l=new Float64Array(o),u=t,c=!1;if(c=!!n||t.isSymmetric(),c){for(r=0;r<o;r++)for(i=0;i<o;i++)a.set(r,i,u.get(r,i));xt(o,l,s,a),wt(o,l,s,a)}else{let t=new Y(o,o),e=new Float64Array(o);for(i=0;i<o;i++)for(r=0;r<o;r++)t.set(r,i,u.get(r,i));St(o,t,e,a),Et(o,l,s,a,t)}this.n=o,this.e=l,this.d=s,this.V=a}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let t,e,n=this.n,r=this.e,i=this.d,o=new Y(n,n);for(t=0;t<n;t++){for(e=0;e<n;e++)o.set(t,e,0);o.set(t,t,i[t]),r[t]>0?o.set(t,t+1,r[t]):r[t]<0&&o.set(t,t-1,r[t])}return o}}function xt(t,e,n,r){let i,o,a,s,l,u,c,h;for(l=0;l<t;l++)n[l]=r.get(t-1,l);for(s=t-1;s>0;s--){for(h=0,a=0,u=0;u<s;u++)h+=Math.abs(n[u]);if(0===h)for(e[s]=n[s-1],l=0;l<s;l++)n[l]=r.get(s-1,l),r.set(s,l,0),r.set(l,s,0);else{for(u=0;u<s;u++)n[u]/=h,a+=n[u]*n[u];for(i=n[s-1],o=Math.sqrt(a),i>0&&(o=-o),e[s]=h*o,a-=i*o,n[s-1]=i-o,l=0;l<s;l++)e[l]=0;for(l=0;l<s;l++){for(i=n[l],r.set(l,s,i),o=e[l]+r.get(l,l)*i,u=l+1;u<=s-1;u++)o+=r.get(u,l)*n[u],e[u]+=r.get(u,l)*i;e[l]=o}for(i=0,l=0;l<s;l++)e[l]/=a,i+=e[l]*n[l];for(c=i/(a+a),l=0;l<s;l++)e[l]-=c*n[l];for(l=0;l<s;l++){for(i=n[l],o=e[l],u=l;u<=s-1;u++)r.set(u,l,r.get(u,l)-(i*e[u]+o*n[u]));n[l]=r.get(s-1,l),r.set(s,l,0)}}n[s]=a}for(s=0;s<t-1;s++){if(r.set(t-1,s,r.get(s,s)),r.set(s,s,1),a=n[s+1],0!==a){for(u=0;u<=s;u++)n[u]=r.get(u,s+1)/a;for(l=0;l<=s;l++){for(o=0,u=0;u<=s;u++)o+=r.get(u,s+1)*r.get(u,l);for(u=0;u<=s;u++)r.set(u,l,r.get(u,l)-o*n[u])}}for(u=0;u<=s;u++)r.set(u,s+1,0)}for(l=0;l<t;l++)n[l]=r.get(t-1,l),r.set(t-1,l,0);r.set(t-1,t-1,1),e[0]=0}function wt(t,e,n,r){let i,o,a,s,l,u,c,h,d,f,p,g,m,y,v,b,_;for(a=1;a<t;a++)e[a-1]=e[a];e[t-1]=0;let x=0,w=0,S=Number.EPSILON;for(u=0;u<t;u++){w=Math.max(w,Math.abs(n[u])+Math.abs(e[u])),c=u;while(c<t){if(Math.abs(e[c])<=S*w)break;c++}if(c>u){_=0;do{for(_+=1,i=n[u],h=(n[u+1]-i)/(2*e[u]),d=lt(h,1),h<0&&(d=-d),n[u]=e[u]/(h+d),n[u+1]=e[u]*(h+d),f=n[u+1],o=i-n[u],a=u+2;a<t;a++)n[a]-=o;for(x+=o,h=n[c],p=1,g=p,m=p,y=e[u+1],v=0,b=0,a=c-1;a>=u;a--)for(m=g,g=p,b=v,i=p*e[a],o=p*h,d=lt(h,e[a]),e[a+1]=v*d,v=e[a]/d,p=h/d,h=p*n[a]-v*i,n[a+1]=o+v*(p*i+v*n[a]),l=0;l<t;l++)o=r.get(l,a+1),r.set(l,a+1,v*r.get(l,a)+p*o),r.set(l,a,p*r.get(l,a)-v*o);h=-v*b*m*y*e[u]/f,e[u]=v*h,n[u]=p*h}while(Math.abs(e[u])>S*w)}n[u]=n[u]+x,e[u]=0}for(a=0;a<t-1;a++){for(l=a,h=n[a],s=a+1;s<t;s++)n[s]<h&&(l=s,h=n[s]);if(l!==a)for(n[l]=n[a],n[a]=h,s=0;s<t;s++)h=r.get(s,a),r.set(s,a,r.get(s,l)),r.set(s,l,h)}}function St(t,e,n,r){let i,o,a,s,l,u,c,h=0,d=t-1;for(u=h+1;u<=d-1;u++){for(c=0,s=u;s<=d;s++)c+=Math.abs(e.get(s,u-1));if(0!==c){for(a=0,s=d;s>=u;s--)n[s]=e.get(s,u-1)/c,a+=n[s]*n[s];for(o=Math.sqrt(a),n[u]>0&&(o=-o),a-=n[u]*o,n[u]=n[u]-o,l=u;l<t;l++){for(i=0,s=d;s>=u;s--)i+=n[s]*e.get(s,l);for(i/=a,s=u;s<=d;s++)e.set(s,l,e.get(s,l)-i*n[s])}for(s=0;s<=d;s++){for(i=0,l=d;l>=u;l--)i+=n[l]*e.get(s,l);for(i/=a,l=u;l<=d;l++)e.set(s,l,e.get(s,l)-i*n[l])}n[u]=c*n[u],e.set(u,u-1,c*o)}}for(s=0;s<t;s++)for(l=0;l<t;l++)r.set(s,l,s===l?1:0);for(u=d-1;u>=h+1;u--)if(0!==e.get(u,u-1)){for(s=u+1;s<=d;s++)n[s]=e.get(s,u-1);for(l=u;l<=d;l++){for(o=0,s=u;s<=d;s++)o+=n[s]*r.get(s,l);for(o=o/n[u]/e.get(u,u-1),s=u;s<=d;s++)r.set(s,l,r.get(s,l)+o*n[s])}}}function Et(t,e,n,r,i){let o,a,s,l,u,c,h,d,f,p,g,m,y,v,b,_=t-1,x=0,w=t-1,S=Number.EPSILON,E=0,C=0,M=0,T=0,A=0,O=0,k=0,I=0;for(o=0;o<t;o++)for((o<x||o>w)&&(n[o]=i.get(o,o),e[o]=0),a=Math.max(o-1,0);a<t;a++)C+=Math.abs(i.get(o,a));while(_>=x){l=_;while(l>x){if(O=Math.abs(i.get(l-1,l-1))+Math.abs(i.get(l,l)),0===O&&(O=C),Math.abs(i.get(l,l-1))<S*O)break;l--}if(l===_)i.set(_,_,i.get(_,_)+E),n[_]=i.get(_,_),e[_]=0,_--,I=0;else if(l===_-1){if(h=i.get(_,_-1)*i.get(_-1,_),M=(i.get(_-1,_-1)-i.get(_,_))/2,T=M*M+h,k=Math.sqrt(Math.abs(T)),i.set(_,_,i.get(_,_)+E),i.set(_-1,_-1,i.get(_-1,_-1)+E),d=i.get(_,_),T>=0){for(k=M>=0?M+k:M-k,n[_-1]=d+k,n[_]=n[_-1],0!==k&&(n[_]=d-h/k),e[_-1]=0,e[_]=0,d=i.get(_,_-1),O=Math.abs(d)+Math.abs(k),M=d/O,T=k/O,A=Math.sqrt(M*M+T*T),M/=A,T/=A,a=_-1;a<t;a++)k=i.get(_-1,a),i.set(_-1,a,T*k+M*i.get(_,a)),i.set(_,a,T*i.get(_,a)-M*k);for(o=0;o<=_;o++)k=i.get(o,_-1),i.set(o,_-1,T*k+M*i.get(o,_)),i.set(o,_,T*i.get(o,_)-M*k);for(o=x;o<=w;o++)k=r.get(o,_-1),r.set(o,_-1,T*k+M*r.get(o,_)),r.set(o,_,T*r.get(o,_)-M*k)}else n[_-1]=d+M,n[_]=d+M,e[_-1]=k,e[_]=-k;_-=2,I=0}else{if(d=i.get(_,_),f=0,h=0,l<_&&(f=i.get(_-1,_-1),h=i.get(_,_-1)*i.get(_-1,_)),10===I){for(E+=d,o=x;o<=_;o++)i.set(o,o,i.get(o,o)-d);O=Math.abs(i.get(_,_-1))+Math.abs(i.get(_-1,_-2)),d=f=.75*O,h=-.4375*O*O}if(30===I&&(O=(f-d)/2,O=O*O+h,O>0)){for(O=Math.sqrt(O),f<d&&(O=-O),O=d-h/((f-d)/2+O),o=x;o<=_;o++)i.set(o,o,i.get(o,o)-O);E+=O,d=f=h=.964}I+=1,u=_-2;while(u>=l){if(k=i.get(u,u),A=d-k,O=f-k,M=(A*O-h)/i.get(u+1,u)+i.get(u,u+1),T=i.get(u+1,u+1)-k-A-O,A=i.get(u+2,u+1),O=Math.abs(M)+Math.abs(T)+Math.abs(A),M/=O,T/=O,A/=O,u===l)break;if(Math.abs(i.get(u,u-1))*(Math.abs(T)+Math.abs(A))<S*(Math.abs(M)*(Math.abs(i.get(u-1,u-1))+Math.abs(k)+Math.abs(i.get(u+1,u+1)))))break;u--}for(o=u+2;o<=_;o++)i.set(o,o-2,0),o>u+2&&i.set(o,o-3,0);for(s=u;s<=_-1;s++){if(v=s!==_-1,s!==u&&(M=i.get(s,s-1),T=i.get(s+1,s-1),A=v?i.get(s+2,s-1):0,d=Math.abs(M)+Math.abs(T)+Math.abs(A),0!==d&&(M/=d,T/=d,A/=d)),0===d)break;if(O=Math.sqrt(M*M+T*T+A*A),M<0&&(O=-O),0!==O){for(s!==u?i.set(s,s-1,-O*d):l!==u&&i.set(s,s-1,-i.get(s,s-1)),M+=O,d=M/O,f=T/O,k=A/O,T/=M,A/=M,a=s;a<t;a++)M=i.get(s,a)+T*i.get(s+1,a),v&&(M+=A*i.get(s+2,a),i.set(s+2,a,i.get(s+2,a)-M*k)),i.set(s,a,i.get(s,a)-M*d),i.set(s+1,a,i.get(s+1,a)-M*f);for(o=0;o<=Math.min(_,s+3);o++)M=d*i.get(o,s)+f*i.get(o,s+1),v&&(M+=k*i.get(o,s+2),i.set(o,s+2,i.get(o,s+2)-M*A)),i.set(o,s,i.get(o,s)-M),i.set(o,s+1,i.get(o,s+1)-M*T);for(o=x;o<=w;o++)M=d*r.get(o,s)+f*r.get(o,s+1),v&&(M+=k*r.get(o,s+2),r.set(o,s+2,r.get(o,s+2)-M*A)),r.set(o,s,r.get(o,s)-M),r.set(o,s+1,r.get(o,s+1)-M*T)}}}}if(0!==C){for(_=t-1;_>=0;_--)if(M=n[_],T=e[_],0===T)for(l=_,i.set(_,_,1),o=_-1;o>=0;o--){for(h=i.get(o,o)-M,A=0,a=l;a<=_;a++)A+=i.get(o,a)*i.get(a,_);if(e[o]<0)k=h,O=A;else if(l=o,0===e[o]?i.set(o,_,0!==h?-A/h:-A/(S*C)):(d=i.get(o,o+1),f=i.get(o+1,o),T=(n[o]-M)*(n[o]-M)+e[o]*e[o],c=(d*O-k*A)/T,i.set(o,_,c),i.set(o+1,_,Math.abs(d)>Math.abs(k)?(-A-h*c)/d:(-O-f*c)/k)),c=Math.abs(i.get(o,_)),S*c*c>1)for(a=o;a<=_;a++)i.set(a,_,i.get(a,_)/c)}else if(T<0)for(l=_-1,Math.abs(i.get(_,_-1))>Math.abs(i.get(_-1,_))?(i.set(_-1,_-1,T/i.get(_,_-1)),i.set(_-1,_,-(i.get(_,_)-M)/i.get(_,_-1))):(b=Ct(0,-i.get(_-1,_),i.get(_-1,_-1)-M,T),i.set(_-1,_-1,b[0]),i.set(_-1,_,b[1])),i.set(_,_-1,0),i.set(_,_,1),o=_-2;o>=0;o--){for(p=0,g=0,a=l;a<=_;a++)p+=i.get(o,a)*i.get(a,_-1),g+=i.get(o,a)*i.get(a,_);if(h=i.get(o,o)-M,e[o]<0)k=h,A=p,O=g;else if(l=o,0===e[o]?(b=Ct(-p,-g,h,T),i.set(o,_-1,b[0]),i.set(o,_,b[1])):(d=i.get(o,o+1),f=i.get(o+1,o),m=(n[o]-M)*(n[o]-M)+e[o]*e[o]-T*T,y=2*(n[o]-M)*T,0===m&&0===y&&(m=S*C*(Math.abs(h)+Math.abs(T)+Math.abs(d)+Math.abs(f)+Math.abs(k))),b=Ct(d*A-k*p+T*g,d*O-k*g-T*p,m,y),i.set(o,_-1,b[0]),i.set(o,_,b[1]),Math.abs(d)>Math.abs(k)+Math.abs(T)?(i.set(o+1,_-1,(-p-h*i.get(o,_-1)+T*i.get(o,_))/d),i.set(o+1,_,(-g-h*i.get(o,_)-T*i.get(o,_-1))/d)):(b=Ct(-A-f*i.get(o,_-1),-O-f*i.get(o,_),k,T),i.set(o+1,_-1,b[0]),i.set(o+1,_,b[1]))),c=Math.max(Math.abs(i.get(o,_-1)),Math.abs(i.get(o,_))),S*c*c>1)for(a=o;a<=_;a++)i.set(a,_-1,i.get(a,_-1)/c),i.set(a,_,i.get(a,_)/c)}for(o=0;o<t;o++)if(o<x||o>w)for(a=o;a<t;a++)r.set(o,a,i.get(o,a));for(a=t-1;a>=x;a--)for(o=x;o<=w;o++){for(k=0,s=x;s<=Math.min(a,w);s++)k+=r.get(o,s)*i.get(s,a);r.set(o,a,k)}}}function Ct(t,e,n,r){let i,o;return Math.abs(n)>Math.abs(r)?(i=r/n,o=n+i*r,[(t+i*e)/o,(e-i*t)/o]):(i=n/r,o=r+i*n,[(i*t+e)/o,(i*e-t)/o])}class Mt{constructor(t){if(t=ot.checkMatrix(t),!t.isSymmetric())throw new Error("Matrix is not symmetric");let e,n,r,i=t,o=i.rows,a=new Y(o,o),s=!0;for(n=0;n<o;n++){let t=0;for(r=0;r<n;r++){let o=0;for(e=0;e<r;e++)o+=a.get(r,e)*a.get(n,e);o=(i.get(n,r)-o)/a.get(r,r),a.set(n,r,o),t+=o*o}for(t=i.get(n,n)-t,s&=t>0,a.set(n,n,Math.sqrt(Math.max(t,0))),r=n+1;r<o;r++)a.set(n,r,0)}this.L=a,this.positiveDefinite=Boolean(s)}isPositiveDefinite(){return this.positiveDefinite}solve(t){t=ot.checkMatrix(t);let e=this.L,n=e.rows;if(t.rows!==n)throw new Error("Matrix dimensions do not match");if(!1===this.isPositiveDefinite())throw new Error("Matrix is not positive definite");let r,i,o,a=t.columns,s=t.clone();for(o=0;o<n;o++)for(i=0;i<a;i++){for(r=0;r<o;r++)s.set(o,i,s.get(o,i)-s.get(r,i)*e.get(o,r));s.set(o,i,s.get(o,i)/e.get(o,o))}for(o=n-1;o>=0;o--)for(i=0;i<a;i++){for(r=o+1;r<n;r++)s.set(o,i,s.get(o,i)-s.get(r,i)*e.get(r,o));s.set(o,i,s.get(o,i)/e.get(o,o))}return s}get lowerTriangularMatrix(){return this.L}}class Tt{constructor(t,e={}){t=ot.checkMatrix(t);let{Y:n}=e;const{scaleScores:r=!1,maxIterations:o=1e3,terminationCriteria:a=1e-10}=e;let s;if(n){if(n=i(n)&&"number"===typeof n[0]?Y.columnVector(n):ot.checkMatrix(n),n.rows!==t.rows)throw new Error("Y should have the same number of rows as X");s=n.getColumnVector(0)}else s=t.getColumnVector(0);let l,u,c,h,d=1;for(let i=0;i<o&&d>a;i++)c=t.transpose().mmul(s).div(s.transpose().mmul(s).get(0,0)),c=c.div(c.norm()),l=t.mmul(c).div(c.transpose().mmul(c).get(0,0)),i>0&&(d=l.clone().sub(h).pow(2).sum()),h=l.clone(),n?(u=n.transpose().mmul(l).div(l.transpose().mmul(l).get(0,0)),u=u.div(u.norm()),s=n.mmul(u).div(u.transpose().mmul(u).get(0,0))):s=l;if(n){let e=t.transpose().mmul(l).div(l.transpose().mmul(l).get(0,0));e=e.div(e.norm());let r=t.clone().sub(l.clone().mmul(e.transpose())),i=s.transpose().mmul(l).div(l.transpose().mmul(l).get(0,0)),o=n.clone().sub(l.clone().mulS(i.get(0,0)).mmul(u.transpose()));this.t=l,this.p=e.transpose(),this.w=c.transpose(),this.q=u,this.u=s,this.s=l.transpose().mmul(l),this.xResidual=r,this.yResidual=o,this.betas=i}else this.w=c.transpose(),this.s=l.transpose().mmul(l).sqrt(),this.t=r?l.clone().div(this.s.get(0,0)):l,this.xResidual=t.sub(l.mmul(c.transpose()))}}},b5d5:function(t,e){},b5f0:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["master_timeout","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["repository"]){const t=new n("Missing required parameter: repository");return r(t,l)}if(null==t["snapshot"]){const t=new n("Missing required parameter: snapshot");return r(t,l)}if(null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=t["snapshot"]&&null==t["repository"]){const t=new n("Missing required parameter of the url: repository");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,repository:d,snapshot:f,...p}=t;p=i(o,a,p,u),null==c&&(c="DELETE");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m="/_snapshot/"+encodeURIComponent(d)+"/"+encodeURIComponent(f);const y={method:c,path:m,body:"",querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},b6fb:function(t,e,n){"use strict";n.r(e),n.d(e,"catmullRomToBezier",(function(){return l})),n.d(e,"fillPath",(function(){return L})),n.d(e,"fillPathByDiff",(function(){return F})),n.d(e,"formatPath",(function(){return z})),n.d(e,"intersection",(function(){return O})),n.d(e,"parsePathArray",(function(){return m})),n.d(e,"parsePathString",(function(){return s})),n.d(e,"pathToAbsolute",(function(){return c})),n.d(e,"pathToCurve",(function(){return p})),n.d(e,"rectPath",(function(){return w}));var r=n("8937"),i="\t\n\v\f\r   ᠎             　\u2028\u2029",o=new RegExp("([a-z])["+i+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+i+"]*,?["+i+"]*)+)","ig"),a=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+i+"]*,?["+i+"]*","ig"),s=function(t){if(!t)return null;if(Object(r["isArray"])(t))return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(t).replace(o,(function(r,i,o){var s=[],l=i.toLowerCase();if(o.replace(a,(function(t,e){e&&s.push(+e)})),"m"===l&&s.length>2&&(n.push([i].concat(s.splice(0,2))),l="l",i="m"===i?"l":"L"),"o"===l&&1===s.length&&n.push([i,s[0]]),"r"===l)n.push([i].concat(s));else while(s.length>=e[l])if(n.push([i].concat(s.splice(0,e[l]))),!e[l])break;return t})),n},l=function(t,e){for(var n=[],r=0,i=t.length;i-2*!e>r;r+=2){var o=[{x:+t[r-2],y:+t[r-1]},{x:+t[r],y:+t[r+1]},{x:+t[r+2],y:+t[r+3]},{x:+t[r+4],y:+t[r+5]}];e?r?i-4===r?o[3]={x:+t[0],y:+t[1]}:i-2===r&&(o[2]={x:+t[0],y:+t[1]},o[3]={x:+t[2],y:+t[3]}):o[0]={x:+t[i-2],y:+t[i-1]}:i-4===r?o[3]=o[2]:r||(o[0]={x:+t[r],y:+t[r+1]}),n.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return n},u=function(t,e,n,r,i){var o=[];if(null===i&&null===r&&(r=n),t=+t,e=+e,n=+n,r=+r,null!==i){var a=Math.PI/180,s=t+n*Math.cos(-r*a),l=t+n*Math.cos(-i*a),u=e+n*Math.sin(-r*a),c=e+n*Math.sin(-i*a);o=[["M",s,u],["A",n,n,0,+(i-r>180),0,l,c]]}else o=[["M",t,e],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]];return o},c=function(t){if(t=s(t),!t||!t.length)return[["M",0,0]];var e,n,r=[],i=0,o=0,a=0,c=0,h=0;"M"===t[0][0]&&(i=+t[0][1],o=+t[0][2],a=i,c=o,h++,r[0]=["M",i,o]);for(var d=3===t.length&&"M"===t[0][0]&&"R"===t[1][0].toUpperCase()&&"Z"===t[2][0].toUpperCase(),f=void 0,p=void 0,g=h,m=t.length;g<m;g++){if(r.push(f=[]),p=t[g],e=p[0],e!==e.toUpperCase())switch(f[0]=e.toUpperCase(),f[0]){case"A":f[1]=p[1],f[2]=p[2],f[3]=p[3],f[4]=p[4],f[5]=p[5],f[6]=+p[6]+i,f[7]=+p[7]+o;break;case"V":f[1]=+p[1]+o;break;case"H":f[1]=+p[1]+i;break;case"R":n=[i,o].concat(p.slice(1));for(var y=2,v=n.length;y<v;y++)n[y]=+n[y]+i,n[++y]=+n[y]+o;r.pop(),r=r.concat(l(n,d));break;case"O":r.pop(),n=u(i,o,p[1],p[2]),n.push(n[0]),r=r.concat(n);break;case"U":r.pop(),r=r.concat(u(i,o,p[1],p[2],p[3])),f=["U"].concat(r[r.length-1].slice(-2));break;case"M":a=+p[1]+i,c=+p[2]+o;break;default:for(y=1,v=p.length;y<v;y++)f[y]=+p[y]+(y%2?i:o)}else if("R"===e)n=[i,o].concat(p.slice(1)),r.pop(),r=r.concat(l(n,d)),f=["R"].concat(p.slice(-2));else if("O"===e)r.pop(),n=u(i,o,p[1],p[2]),n.push(n[0]),r=r.concat(n);else if("U"===e)r.pop(),r=r.concat(u(i,o,p[1],p[2],p[3])),f=["U"].concat(r[r.length-1].slice(-2));else for(var b=0,_=p.length;b<_;b++)f[b]=p[b];if(e=e.toUpperCase(),"O"!==e)switch(f[0]){case"Z":i=+a,o=+c;break;case"H":i=f[1];break;case"V":o=f[1];break;case"M":a=f[f.length-2],c=f[f.length-1];break;default:i=f[f.length-2],o=f[f.length-1]}}return r},h=function(t,e,n,r){return[t,e,n,r,n,r]},d=function(t,e,n,r,i,o){var a=1/3,s=2/3;return[a*t+s*n,a*e+s*r,a*i+s*n,a*o+s*r,i,o]},f=function(t,e,n,r,i,o,a,s,l,u){n===r&&(n+=1);var c,h,d,p,g,m=120*Math.PI/180,y=Math.PI/180*(+i||0),v=[],b=function(t,e,n){var r=t*Math.cos(n)-e*Math.sin(n),i=t*Math.sin(n)+e*Math.cos(n);return{x:r,y:i}};if(u)h=u[0],d=u[1],p=u[2],g=u[3];else{c=b(t,e,-y),t=c.x,e=c.y,c=b(s,l,-y),s=c.x,l=c.y,t===s&&e===l&&(s+=1,l+=1);var _=(t-s)/2,x=(e-l)/2,w=_*_/(n*n)+x*x/(r*r);w>1&&(w=Math.sqrt(w),n*=w,r*=w);var S=n*n,E=r*r,C=(o===a?-1:1)*Math.sqrt(Math.abs((S*E-S*x*x-E*_*_)/(S*x*x+E*_*_)));p=C*n*x/r+(t+s)/2,g=C*-r*_/n+(e+l)/2,h=Math.asin(((e-g)/r).toFixed(9)),d=Math.asin(((l-g)/r).toFixed(9)),h=t<p?Math.PI-h:h,d=s<p?Math.PI-d:d,h<0&&(h=2*Math.PI+h),d<0&&(d=2*Math.PI+d),a&&h>d&&(h-=2*Math.PI),!a&&d>h&&(d-=2*Math.PI)}var M=d-h;if(Math.abs(M)>m){var T=d,A=s,O=l;d=h+m*(a&&d>h?1:-1),s=p+n*Math.cos(d),l=g+r*Math.sin(d),v=f(s,l,n,r,i,0,a,A,O,[d,T,p,g])}M=d-h;var k=Math.cos(h),I=Math.sin(h),P=Math.cos(d),L=Math.sin(d),N=Math.tan(M/4),R=4/3*n*N,D=4/3*r*N,F=[t,e],j=[t+R*I,e-D*k],B=[s+R*L,l-D*P],z=[s,l];if(j[0]=2*F[0]-j[0],j[1]=2*F[1]-j[1],u)return[j,B,z].concat(v);v=[j,B,z].concat(v).join().split(",");for(var U=[],G=0,q=v.length;G<q;G++)U[G]=G%2?b(v[G-1],v[G],y).y:b(v[G],v[G+1],y).x;return U},p=function(t,e){var n,r=c(t),i=e&&c(e),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=[],l=[],u="",p="",g=function(t,e,n){var r,i;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(f.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"===n||"S"===n?(r=2*e.x-e.bx,i=2*e.y-e.by):(r=e.x,i=e.y),t=["C",r,i].concat(t.slice(1));break;case"T":"Q"===n||"T"===n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(d(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(d(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(h(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(h(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(h(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(h(e.x,e.y,e.X,e.Y));break;default:break}return t},m=function(t,e){if(t[e].length>7){t[e].shift();var o=t[e];while(o.length)s[e]="A",i&&(l[e]="A"),t.splice(e++,0,["C"].concat(o.splice(0,6)));t.splice(e,1),n=Math.max(r.length,i&&i.length||0)}},y=function(t,e,o,a,s){t&&e&&"M"===t[s][0]&&"M"!==e[s][0]&&(e.splice(s,0,["M",a.x,a.y]),o.bx=0,o.by=0,o.x=t[s][1],o.y=t[s][2],n=Math.max(r.length,i&&i.length||0))};n=Math.max(r.length,i&&i.length||0);for(var v=0;v<n;v++){r[v]&&(u=r[v][0]),"C"!==u&&(s[v]=u,v&&(p=s[v-1])),r[v]=g(r[v],o,p),"A"!==s[v]&&"C"===u&&(s[v]="C"),m(r,v),i&&(i[v]&&(u=i[v][0]),"C"!==u&&(l[v]=u,v&&(p=l[v-1])),i[v]=g(i[v],a,p),"A"!==l[v]&&"C"===u&&(l[v]="C"),m(i,v)),y(r,i,o,a,v),y(i,r,a,o,v);var b=r[v],_=i&&i[v],x=b.length,w=i&&_.length;o.x=b[x-2],o.y=b[x-1],o.bx=parseFloat(b[x-4])||o.x,o.by=parseFloat(b[x-3])||o.y,a.bx=i&&(parseFloat(_[w-4])||a.x),a.by=i&&(parseFloat(_[w-3])||a.y),a.x=i&&_[w-2],a.y=i&&_[w-1]}return i?[r,i]:r},g=/,?([a-z]),?/gi,m=function(t){return t.join(",").replace(g,"$1")},y=function(t,e,n,r,i){var o=-3*e+9*n-9*r+3*i,a=t*o+6*e-12*n+6*r;return t*a-3*e+3*n},v=function(t,e,n,r,i,o,a,s,l){null===l&&(l=1),l=l>1?1:l<0?0:l;for(var u=l/2,c=12,h=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],d=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],f=0,p=0;p<c;p++){var g=u*h[p]+u,m=y(g,t,n,i,a),v=y(g,e,r,o,s),b=m*m+v*v;f+=d[p]*Math.sqrt(b)}return u*f},b=function(t,e,n,r,i,o,a,s){for(var l,u,c,h,d=[],f=[[],[]],p=0;p<2;++p)if(0===p?(u=6*t-12*n+6*i,l=-3*t+9*n-9*i+3*a,c=3*n-3*t):(u=6*e-12*r+6*o,l=-3*e+9*r-9*o+3*s,c=3*r-3*e),Math.abs(l)<1e-12){if(Math.abs(u)<1e-12)continue;h=-c/u,h>0&&h<1&&d.push(h)}else{var g=u*u-4*c*l,m=Math.sqrt(g);if(!(g<0)){var y=(-u+m)/(2*l);y>0&&y<1&&d.push(y);var v=(-u-m)/(2*l);v>0&&v<1&&d.push(v)}}var b,_=d.length,x=_;while(_--)h=d[_],b=1-h,f[0][_]=b*b*b*t+3*b*b*h*n+3*b*h*h*i+h*h*h*a,f[1][_]=b*b*b*e+3*b*b*h*r+3*b*h*h*o+h*h*h*s;return f[0][x]=t,f[1][x]=e,f[0][x+1]=a,f[1][x+1]=s,f[0].length=f[1].length=x+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}},_=function(t,e,n,r,i,o,a,s){if(!(Math.max(t,n)<Math.min(i,a)||Math.min(t,n)>Math.max(i,a)||Math.max(e,r)<Math.min(o,s)||Math.min(e,r)>Math.max(o,s))){var l=(t*r-e*n)*(i-a)-(t-n)*(i*s-o*a),u=(t*r-e*n)*(o-s)-(e-r)*(i*s-o*a),c=(t-n)*(o-s)-(e-r)*(i-a);if(c){var h=l/c,d=u/c,f=+h.toFixed(2),p=+d.toFixed(2);if(!(f<+Math.min(t,n).toFixed(2)||f>+Math.max(t,n).toFixed(2)||f<+Math.min(i,a).toFixed(2)||f>+Math.max(i,a).toFixed(2)||p<+Math.min(e,r).toFixed(2)||p>+Math.max(e,r).toFixed(2)||p<+Math.min(o,s).toFixed(2)||p>+Math.max(o,s).toFixed(2)))return{x:h,y:d}}}},x=function(t,e,n){return e>=t.x&&e<=t.x+t.width&&n>=t.y&&n<=t.y+t.height},w=function(t,e,n,r,i){if(i)return[["M",+t+ +i,e],["l",n-2*i,0],["a",i,i,0,0,1,i,i],["l",0,r-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-n,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-r],["a",i,i,0,0,1,i,-i],["z"]];var o=[["M",t,e],["l",n,0],["l",0,r],["l",-n,0],["z"]];return o.parsePathArray=m,o},S=function(t,e,n,r){return null===t&&(t=e=n=r=0),null===e&&(e=t.y,n=t.width,r=t.height,t=t.x),{x:t,y:e,width:n,w:n,height:r,h:r,x2:t+n,y2:e+r,cx:t+n/2,cy:e+r/2,r1:Math.min(n,r)/2,r2:Math.max(n,r)/2,r0:Math.sqrt(n*n+r*r)/2,path:w(t,e,n,r),vb:[t,e,n,r].join(" ")}},E=function(t,e){return t=S(t),e=S(e),x(e,t.x,t.y)||x(e,t.x2,t.y)||x(e,t.x,t.y2)||x(e,t.x2,t.y2)||x(t,e.x,e.y)||x(t,e.x2,e.y)||x(t,e.x,e.y2)||x(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)},C=function(t,e,n,i,o,a,s,l){Object(r["isArray"])(t)||(t=[t,e,n,i,o,a,s,l]);var u=b.apply(null,t);return S(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},M=function(t,e,n,r,i,o,a,s,l){var u=1-l,c=Math.pow(u,3),h=Math.pow(u,2),d=l*l,f=d*l,p=c*t+3*h*l*n+3*u*l*l*i+f*a,g=c*e+3*h*l*r+3*u*l*l*o+f*s,m=t+2*l*(n-t)+d*(i-2*n+t),y=e+2*l*(r-e)+d*(o-2*r+e),v=n+2*l*(i-n)+d*(a-2*i+n),b=r+2*l*(o-r)+d*(s-2*o+r),_=u*t+l*n,x=u*e+l*r,w=u*i+l*a,S=u*o+l*s,E=90-180*Math.atan2(m-v,y-b)/Math.PI;return{x:p,y:g,m:{x:m,y:y},n:{x:v,y:b},start:{x:_,y:x},end:{x:w,y:S},alpha:E}},T=function(t,e,n){var r=C(t),i=C(e);if(!E(r,i))return n?0:[];for(var o=v.apply(0,t),a=v.apply(0,e),s=~~(o/8),l=~~(a/8),u=[],c=[],h={},d=n?0:[],f=0;f<s+1;f++){var p=M.apply(0,t.concat(f/s));u.push({x:p.x,y:p.y,t:f/s})}for(f=0;f<l+1;f++){p=M.apply(0,e.concat(f/l));c.push({x:p.x,y:p.y,t:f/l})}for(f=0;f<s;f++)for(var g=0;g<l;g++){var m=u[f],y=u[f+1],b=c[g],x=c[g+1],w=Math.abs(y.x-m.x)<.001?"y":"x",S=Math.abs(x.x-b.x)<.001?"y":"x",T=_(m.x,m.y,y.x,y.y,b.x,b.y,x.x,x.y);if(T){if(h[T.x.toFixed(4)]===T.y.toFixed(4))continue;h[T.x.toFixed(4)]=T.y.toFixed(4);var A=m.t+Math.abs((T[w]-m[w])/(y[w]-m[w]))*(y.t-m.t),O=b.t+Math.abs((T[S]-b[S])/(x[S]-b[S]))*(x.t-b.t);A>=0&&A<=1&&O>=0&&O<=1&&(n?d+=1:d.push({x:T.x,y:T.y,t1:A,t2:O}))}}return d},A=function(t,e,n){var r,i,o,a,s,l,u,c,h,d;t=p(t),e=p(e);for(var f=n?0:[],g=0,m=t.length;g<m;g++){var y=t[g];if("M"===y[0])r=s=y[1],i=l=y[2];else{"C"===y[0]?(h=[r,i].concat(y.slice(1)),r=h[6],i=h[7]):(h=[r,i,r,i,s,l,s,l],r=s,i=l);for(var v=0,b=e.length;v<b;v++){var _=e[v];if("M"===_[0])o=u=_[1],a=c=_[2];else{"C"===_[0]?(d=[o,a].concat(_.slice(1)),o=d[6],a=d[7]):(d=[o,a,o,a,u,c,u,c],o=u,a=c);var x=T(h,d,n);if(n)f+=x;else{for(var w=0,S=x.length;w<S;w++)x[w].segment1=g,x[w].segment2=v,x[w].bez1=h,x[w].bez2=d;f=f.concat(x)}}}}}return f},O=function(t,e){return A(t,e)};function k(t,e){var n=[],r=[];function i(t,e){if(1===t.length)n.push(t[0]),r.push(t[0]);else{for(var o=[],a=0;a<t.length-1;a++)0===a&&n.push(t[0]),a===t.length-2&&r.push(t[a+1]),o[a]=[(1-e)*t[a][0]+e*t[a+1][0],(1-e)*t[a][1]+e*t[a+1][1]];i(o,e)}}return t.length&&i(t,e),{left:n,right:r.reverse()}}function I(t,e,n){var r=[[t[1],t[2]]];n=n||2;var i=[];"A"===e[0]?(r.push(e[6]),r.push(e[7])):"C"===e[0]?(r.push([e[1],e[2]]),r.push([e[3],e[4]]),r.push([e[5],e[6]])):"S"===e[0]||"Q"===e[0]?(r.push([e[1],e[2]]),r.push([e[3],e[4]])):r.push([e[1],e[2]]);for(var o=r,a=1/n,s=0;s<n-1;s++){var l=a/(1-a*s),u=k(o,l);i.push(u.left),o=u.right}i.push(o);var c=i.map((function(t){var e=[];return 4===t.length&&(e.push("C"),e=e.concat(t[2])),t.length>=3&&(3===t.length&&e.push("Q"),e=e.concat(t[1])),2===t.length&&e.push("L"),e=e.concat(t[t.length-1]),e}));return c}var P=function(t,e,n){if(1===n)return[[].concat(t)];var r=[];if("L"===e[0]||"C"===e[0]||"Q"===e[0])r=r.concat(I(t,e,n));else{var i=[].concat(t);"M"===i[0]&&(i[0]="L");for(var o=0;o<=n-1;o++)r.push(i)}return r},L=function(t,e){if(1===t.length)return t;var n=t.length-1,r=e.length-1,i=n/r,o=[];if(1===t.length&&"M"===t[0][0]){for(var a=0;a<r-n;a++)t.push(t[0]);return t}for(a=0;a<r;a++){var s=Math.floor(i*a);o[s]=(o[s]||0)+1}var l=o.reduce((function(e,r,i){return i===n?e.concat(t[n]):e.concat(P(t[i],t[i+1],r))}),[]);return l.unshift(t[0]),"Z"!==e[r]&&"z"!==e[r]||l.push("Z"),l},N=function(t,e){if(t.length!==e.length)return!1;var n=!0;return Object(r["each"])(t,(function(t,r){if(t!==e[r])return n=!1,!1})),n};function R(t,e,n){var r=null,i=n;return e<i&&(i=e,r="add"),t<i&&(i=t,r="del"),{type:r,min:i}}var D=function(t,e){var n,r,i=t.length,o=e.length,a=0;if(0===i||0===o)return null;for(var s=[],l=0;l<=i;l++)s[l]=[],s[l][0]={min:l};for(var u=0;u<=o;u++)s[0][u]={min:u};for(l=1;l<=i;l++){n=t[l-1];for(u=1;u<=o;u++){r=e[u-1],a=N(n,r)?0:1;var c=s[l-1][u].min+1,h=s[l][u-1].min+1,d=s[l-1][u-1].min+a;s[l][u]=R(c,h,d)}}return s},F=function(t,e){var n=D(t,e),r=t.length,i=e.length,o=[],a=1,s=1;if(n[r][i].min!==r){for(var l=1;l<=r;l++){var u=n[l][l].min;s=l;for(var c=a;c<=i;c++)n[l][c].min<u&&(u=n[l][c].min,s=c);a=s,n[l][a].type&&o.push({index:l-1,type:n[l][a].type})}for(l=o.length-1;l>=0;l--)a=o[l].index,"add"===o[l].type?t.splice(a,0,[].concat(t[a])):t.splice(a,1)}r=t.length;var h=i-r;if(r<i)for(l=0;l<h;l++)"z"===t[r-1][0]||"Z"===t[r-1][0]?t.splice(r-2,0,t[r-2]):t.push(t[r-1]),r+=1;return t};function j(t,e,n){for(var r,i=[].concat(t),o=1/(n+1),a=B(e)[0],s=1;s<=n;s++)o*=s,r=Math.floor(t.length*o),0===r?i.unshift([a[0]*o+t[r][0]*(1-o),a[1]*o+t[r][1]*(1-o)]):i.splice(r,0,[a[0]*o+t[r][0]*(1-o),a[1]*o+t[r][1]*(1-o)]);return i}function B(t){var e=[];switch(t[0]){case"M":e.push([t[1],t[2]]);break;case"L":e.push([t[1],t[2]]);break;case"A":e.push([t[6],t[7]]);break;case"Q":e.push([t[3],t[4]]),e.push([t[1],t[2]]);break;case"T":e.push([t[1],t[2]]);break;case"C":e.push([t[5],t[6]]),e.push([t[1],t[2]]),e.push([t[3],t[4]]);break;case"S":e.push([t[3],t[4]]),e.push([t[1],t[2]]);break;case"H":e.push([t[1],t[1]]);break;case"V":e.push([t[1],t[1]]);break;default:}return e}var z=function(t,e){if(t.length<=1)return t;for(var n,r=0;r<e.length;r++)if(t[r][0]!==e[r][0])switch(n=B(t[r]),e[r][0]){case"M":t[r]=["M"].concat(n[0]);break;case"L":t[r]=["L"].concat(n[0]);break;case"A":t[r]=[].concat(e[r]),t[r][6]=n[0][0],t[r][7]=n[0][1];break;case"Q":if(n.length<2){if(!(r>0)){t[r]=e[r];break}n=j(n,t[r-1],1)}t[r]=["Q"].concat(n.reduce((function(t,e){return t.concat(e)}),[]));break;case"T":t[r]=["T"].concat(n[0]);break;case"C":if(n.length<3){if(!(r>0)){t[r]=e[r];break}n=j(n,t[r-1],2)}t[r]=["C"].concat(n.reduce((function(t,e){return t.concat(e)}),[]));break;case"S":if(n.length<2){if(!(r>0)){t[r]=e[r];break}n=j(n,t[r-1],1)}t[r]=["S"].concat(n.reduce((function(t,e){return t.concat(e)}),[]));break;default:t[r]=e[r]}return t}},b71a:function(t,e,n){(function(t,n){var r=200,i="Expected a function",o="__lodash_hash_undefined__",a=1,s=2,l=1/0,u=9007199254740991,c="[object Arguments]",h="[object Array]",d="[object Boolean]",f="[object Date]",p="[object Error]",g="[object Function]",m="[object GeneratorFunction]",y="[object Map]",v="[object Number]",b="[object Object]",_="[object Promise]",x="[object RegExp]",w="[object Set]",S="[object String]",E="[object Symbol]",C="[object WeakMap]",M="[object ArrayBuffer]",T="[object DataView]",A="[object Float32Array]",O="[object Float64Array]",k="[object Int8Array]",I="[object Int16Array]",P="[object Int32Array]",L="[object Uint8Array]",N="[object Uint8ClampedArray]",R="[object Uint16Array]",D="[object Uint32Array]",F=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,j=/^\w*$/,B=/^\./,z=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,U=/[\\^$.*+?()[\]{}|]/g,G=/\\(\\)?/g,q=/^\[object .+?Constructor\]$/,V=/^(?:0|[1-9]\d*)$/,H={};H[A]=H[O]=H[k]=H[I]=H[P]=H[L]=H[N]=H[R]=H[D]=!0,H[c]=H[h]=H[M]=H[d]=H[T]=H[f]=H[p]=H[g]=H[y]=H[v]=H[b]=H[x]=H[w]=H[S]=H[C]=!1;var W="object"==typeof t&&t&&t.Object===Object&&t,Y="object"==typeof self&&self&&self.Object===Object&&self,X=W||Y||Function("return this")(),J=e&&!e.nodeType&&e,Z=J&&"object"==typeof n&&n&&!n.nodeType&&n,K=Z&&Z.exports===J,Q=K&&W.process,$=function(){try{return Q&&Q.binding("util")}catch(t){}}(),tt=$&&$.isTypedArray;function et(t,e){var n=t?t.length:0;return!!n&&ot(t,e,0)>-1}function nt(t,e,n){var r=-1,i=t?t.length:0;while(++r<i)if(n(e,t[r]))return!0;return!1}function rt(t,e){var n=-1,r=t?t.length:0;while(++n<r)if(e(t[n],n,t))return!0;return!1}function it(t,e,n,r){var i=t.length,o=n+(r?1:-1);while(r?o--:++o<i)if(e(t[o],o,t))return o;return-1}function ot(t,e,n){if(e!==e)return it(t,at,n);var r=n-1,i=t.length;while(++r<i)if(t[r]===e)return r;return-1}function at(t){return t!==t}function st(t){return function(e){return null==e?void 0:e[t]}}function lt(t,e){var n=-1,r=Array(t);while(++n<t)r[n]=e(n);return r}function ut(t){return function(e){return t(e)}}function ct(t,e){return t.has(e)}function ht(t,e){return null==t?void 0:t[e]}function dt(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(n){}return e}function ft(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function pt(t,e){return function(n){return t(e(n))}}function gt(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var mt=Array.prototype,yt=Function.prototype,vt=Object.prototype,bt=X["__core-js_shared__"],_t=function(){var t=/[^.]+$/.exec(bt&&bt.keys&&bt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),xt=yt.toString,wt=vt.hasOwnProperty,St=vt.toString,Et=RegExp("^"+xt.call(wt).replace(U,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ct=X.Symbol,Mt=X.Uint8Array,Tt=vt.propertyIsEnumerable,At=mt.splice,Ot=pt(Object.keys,Object),kt=Ue(X,"DataView"),It=Ue(X,"Map"),Pt=Ue(X,"Promise"),Lt=Ue(X,"Set"),Nt=Ue(X,"WeakMap"),Rt=Ue(Object,"create"),Dt=$e(kt),Ft=$e(It),jt=$e(Pt),Bt=$e(Lt),zt=$e(Nt),Ut=Ct?Ct.prototype:void 0,Gt=Ut?Ut.valueOf:void 0,qt=Ut?Ut.toString:void 0;function Vt(t){var e=-1,n=t?t.length:0;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function Ht(){this.__data__=Rt?Rt(null):{}}function Wt(t){return this.has(t)&&delete this.__data__[t]}function Yt(t){var e=this.__data__;if(Rt){var n=e[t];return n===o?void 0:n}return wt.call(e,t)?e[t]:void 0}function Xt(t){var e=this.__data__;return Rt?void 0!==e[t]:wt.call(e,t)}function Jt(t,e){var n=this.__data__;return n[t]=Rt&&void 0===e?o:e,this}function Zt(t){var e=-1,n=t?t.length:0;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function Kt(){this.__data__=[]}function Qt(t){var e=this.__data__,n=ve(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():At.call(e,n,1),!0}function $t(t){var e=this.__data__,n=ve(e,t);return n<0?void 0:e[n][1]}function te(t){return ve(this.__data__,t)>-1}function ee(t,e){var n=this.__data__,r=ve(n,t);return r<0?n.push([t,e]):n[r][1]=e,this}function ne(t){var e=-1,n=t?t.length:0;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function re(){this.__data__={hash:new Vt,map:new(It||Zt),string:new Vt}}function ie(t){return Be(this,t)["delete"](t)}function oe(t){return Be(this,t).get(t)}function ae(t){return Be(this,t).has(t)}function se(t,e){return Be(this,t).set(t,e),this}function le(t){var e=-1,n=t?t.length:0;this.__data__=new ne;while(++e<n)this.add(t[e])}function ue(t){return this.__data__.set(t,o),this}function ce(t){return this.__data__.has(t)}function he(t){this.__data__=new Zt(t)}function de(){this.__data__=new Zt}function fe(t){return this.__data__["delete"](t)}function pe(t){return this.__data__.get(t)}function ge(t){return this.__data__.has(t)}function me(t,e){var n=this.__data__;if(n instanceof Zt){var i=n.__data__;if(!It||i.length<r-1)return i.push([t,e]),this;n=this.__data__=new ne(i)}return n.set(t,e),this}function ye(t,e){var n=on(t)||rn(t)?lt(t.length,String):[],r=n.length,i=!!r;for(var o in t)!e&&!wt.call(t,o)||i&&("length"==o||Ve(o,r))||n.push(o);return n}function ve(t,e){var n=t.length;while(n--)if(nn(t[n][0],e))return n;return-1}function be(t,e){e=He(e,t)?[e]:Ne(e);var n=0,r=e.length;while(null!=t&&n<r)t=t[Qe(e[n++])];return n&&n==r?t:void 0}function _e(t){return St.call(t)}function xe(t,e){return null!=t&&e in Object(t)}function we(t,e,n,r,i){return t===e||(null==t||null==e||!cn(t)&&!hn(e)?t!==t&&e!==e:Se(t,e,we,n,r,i))}function Se(t,e,n,r,i,o){var a=on(t),l=on(e),u=h,d=h;a||(u=Ge(t),u=u==c?b:u),l||(d=Ge(e),d=d==c?b:d);var f=u==b&&!dt(t),p=d==b&&!dt(e),g=u==d;if(g&&!f)return o||(o=new he),a||fn(t)?De(t,e,n,r,i,o):Fe(t,e,u,n,r,i,o);if(!(i&s)){var m=f&&wt.call(t,"__wrapped__"),y=p&&wt.call(e,"__wrapped__");if(m||y){var v=m?t.value():t,_=y?e.value():e;return o||(o=new he),n(v,_,r,i,o)}}return!!g&&(o||(o=new he),je(t,e,n,r,i,o))}function Ee(t,e,n,r){var i=n.length,o=i,l=!r;if(null==t)return!o;t=Object(t);while(i--){var u=n[i];if(l&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}while(++i<o){u=n[i];var c=u[0],h=t[c],d=u[1];if(l&&u[2]){if(void 0===h&&!(c in t))return!1}else{var f=new he;if(r)var p=r(h,d,c,t,e,f);if(!(void 0===p?we(d,h,r,a|s,f):p))return!1}}return!0}function Ce(t){if(!cn(t)||Ye(t))return!1;var e=ln(t)||dt(t)?Et:q;return e.test($e(t))}function Me(t){return hn(t)&&un(t.length)&&!!H[St.call(t)]}function Te(t){return"function"==typeof t?t:null==t?vn:"object"==typeof t?on(t)?ke(t[0],t[1]):Oe(t):_n(t)}function Ae(t){if(!Xe(t))return Ot(t);var e=[];for(var n in Object(t))wt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Oe(t){var e=ze(t);return 1==e.length&&e[0][2]?Ze(e[0][0],e[0][1]):function(n){return n===t||Ee(n,t,e)}}function ke(t,e){return He(t)&&Je(e)?Ze(Qe(t),e):function(n){var r=gn(n,t);return void 0===r&&r===e?mn(n,t):we(e,r,void 0,a|s)}}function Ie(t){return function(e){return be(e,t)}}function Pe(t){if("string"==typeof t)return t;if(dn(t))return qt?qt.call(t):"";var e=t+"";return"0"==e&&1/t==-l?"-0":e}function Le(t,e,n){var i=-1,o=et,a=t.length,s=!0,l=[],u=l;if(n)s=!1,o=nt;else if(a>=r){var c=e?null:Re(t);if(c)return gt(c);s=!1,o=ct,u=new le}else u=e?[]:l;t:while(++i<a){var h=t[i],d=e?e(h):h;if(h=n||0!==h?h:0,s&&d===d){var f=u.length;while(f--)if(u[f]===d)continue t;e&&u.push(d),l.push(h)}else o(u,d,n)||(u!==l&&u.push(d),l.push(h))}return l}function Ne(t){return on(t)?t:Ke(t)}Vt.prototype.clear=Ht,Vt.prototype["delete"]=Wt,Vt.prototype.get=Yt,Vt.prototype.has=Xt,Vt.prototype.set=Jt,Zt.prototype.clear=Kt,Zt.prototype["delete"]=Qt,Zt.prototype.get=$t,Zt.prototype.has=te,Zt.prototype.set=ee,ne.prototype.clear=re,ne.prototype["delete"]=ie,ne.prototype.get=oe,ne.prototype.has=ae,ne.prototype.set=se,le.prototype.add=le.prototype.push=ue,le.prototype.has=ce,he.prototype.clear=de,he.prototype["delete"]=fe,he.prototype.get=pe,he.prototype.has=ge,he.prototype.set=me;var Re=Lt&&1/gt(new Lt([,-0]))[1]==l?function(t){return new Lt(t)}:bn;function De(t,e,n,r,i,o){var l=i&s,u=t.length,c=e.length;if(u!=c&&!(l&&c>u))return!1;var h=o.get(t);if(h&&o.get(e))return h==e;var d=-1,f=!0,p=i&a?new le:void 0;o.set(t,e),o.set(e,t);while(++d<u){var g=t[d],m=e[d];if(r)var y=l?r(m,g,d,e,t,o):r(g,m,d,t,e,o);if(void 0!==y){if(y)continue;f=!1;break}if(p){if(!rt(e,(function(t,e){if(!p.has(e)&&(g===t||n(g,t,r,i,o)))return p.add(e)}))){f=!1;break}}else if(g!==m&&!n(g,m,r,i,o)){f=!1;break}}return o["delete"](t),o["delete"](e),f}function Fe(t,e,n,r,i,o,l){switch(n){case T:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case M:return!(t.byteLength!=e.byteLength||!r(new Mt(t),new Mt(e)));case d:case f:case v:return nn(+t,+e);case p:return t.name==e.name&&t.message==e.message;case x:case S:return t==e+"";case y:var u=ft;case w:var c=o&s;if(u||(u=gt),t.size!=e.size&&!c)return!1;var h=l.get(t);if(h)return h==e;o|=a,l.set(t,e);var g=De(u(t),u(e),r,i,o,l);return l["delete"](t),g;case E:if(Gt)return Gt.call(t)==Gt.call(e)}return!1}function je(t,e,n,r,i,o){var a=i&s,l=yn(t),u=l.length,c=yn(e),h=c.length;if(u!=h&&!a)return!1;var d=u;while(d--){var f=l[d];if(!(a?f in e:wt.call(e,f)))return!1}var p=o.get(t);if(p&&o.get(e))return p==e;var g=!0;o.set(t,e),o.set(e,t);var m=a;while(++d<u){f=l[d];var y=t[f],v=e[f];if(r)var b=a?r(v,y,f,e,t,o):r(y,v,f,t,e,o);if(!(void 0===b?y===v||n(y,v,r,i,o):b)){g=!1;break}m||(m="constructor"==f)}if(g&&!m){var _=t.constructor,x=e.constructor;_==x||!("constructor"in t)||!("constructor"in e)||"function"==typeof _&&_ instanceof _&&"function"==typeof x&&x instanceof x||(g=!1)}return o["delete"](t),o["delete"](e),g}function Be(t,e){var n=t.__data__;return We(e)?n["string"==typeof e?"string":"hash"]:n.map}function ze(t){var e=yn(t),n=e.length;while(n--){var r=e[n],i=t[r];e[n]=[r,i,Je(i)]}return e}function Ue(t,e){var n=ht(t,e);return Ce(n)?n:void 0}var Ge=_e;function qe(t,e,n){e=He(e,t)?[e]:Ne(e);var r,i=-1,o=e.length;while(++i<o){var a=Qe(e[i]);if(!(r=null!=t&&n(t,a)))break;t=t[a]}if(r)return r;o=t?t.length:0;return!!o&&un(o)&&Ve(a,o)&&(on(t)||rn(t))}function Ve(t,e){return e=null==e?u:e,!!e&&("number"==typeof t||V.test(t))&&t>-1&&t%1==0&&t<e}function He(t,e){if(on(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!dn(t))||(j.test(t)||!F.test(t)||null!=e&&t in Object(e))}function We(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Ye(t){return!!_t&&_t in t}function Xe(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||vt;return t===n}function Je(t){return t===t&&!cn(t)}function Ze(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}(kt&&Ge(new kt(new ArrayBuffer(1)))!=T||It&&Ge(new It)!=y||Pt&&Ge(Pt.resolve())!=_||Lt&&Ge(new Lt)!=w||Nt&&Ge(new Nt)!=C)&&(Ge=function(t){var e=St.call(t),n=e==b?t.constructor:void 0,r=n?$e(n):void 0;if(r)switch(r){case Dt:return T;case Ft:return y;case jt:return _;case Bt:return w;case zt:return C}return e});var Ke=en((function(t){t=pn(t);var e=[];return B.test(t)&&e.push(""),t.replace(z,(function(t,n,r,i){e.push(r?i.replace(G,"$1"):n||t)})),e}));function Qe(t){if("string"==typeof t||dn(t))return t;var e=t+"";return"0"==e&&1/t==-l?"-0":e}function $e(t){if(null!=t){try{return xt.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function tn(t,e){return t&&t.length?Le(t,Te(e,2)):[]}function en(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(i);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new(en.Cache||ne),n}function nn(t,e){return t===e||t!==t&&e!==e}function rn(t){return sn(t)&&wt.call(t,"callee")&&(!Tt.call(t,"callee")||St.call(t)==c)}en.Cache=ne;var on=Array.isArray;function an(t){return null!=t&&un(t.length)&&!ln(t)}function sn(t){return hn(t)&&an(t)}function ln(t){var e=cn(t)?St.call(t):"";return e==g||e==m}function un(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=u}function cn(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function hn(t){return!!t&&"object"==typeof t}function dn(t){return"symbol"==typeof t||hn(t)&&St.call(t)==E}var fn=tt?ut(tt):Me;function pn(t){return null==t?"":Pe(t)}function gn(t,e,n){var r=null==t?void 0:be(t,e);return void 0===r?n:r}function mn(t,e){return null!=t&&qe(t,e,xe)}function yn(t){return an(t)?ye(t):Ae(t)}function vn(t){return t}function bn(){}function _n(t){return He(t)?st(Qe(t)):Ie(t)}n.exports=tn}).call(this,n("c8ba"),n("62e4")(t))},b730:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["force","wait_if_ongoing","ignore_unavailable","allow_no_indices","expand_wildcards","pretty","human","error_trace","source","filter_path"],a={waitIfOngoing:"wait_if_ongoing",ignoreUnavailable:"ignore_unavailable",allowNoIndices:"allow_no_indices",expandWildcards:"expand_wildcards",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,...f}=t;f=i(o,a,f,u),null==c&&(c=null==h?"GET":"POST");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g=null!=d?"/"+encodeURIComponent(d)+"/_flush":"/_flush";const m={method:c,path:g,body:"",querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},b740:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["format","bytes","master_timeout","h","help","s","v","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,...f}=t;f=i(o,a,f,u),null==c&&(c="GET");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g=null!=d?"/_cat/recovery/"+encodeURIComponent(d):"/_cat/recovery";const m={method:c,path:g,body:null,querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},b753:function(t,e,n){var r=n("4f4d"),i={};for(var o in r)r.hasOwnProperty(o)&&(i[r[o]]=o);var a=t.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var s in a)if(a.hasOwnProperty(s)){if(!("channels"in a[s]))throw new Error("missing channels property: "+s);if(!("labels"in a[s]))throw new Error("missing channel labels property: "+s);if(a[s].labels.length!==a[s].channels)throw new Error("channel and label counts mismatch: "+s);var l=a[s].channels,u=a[s].labels;delete a[s].channels,delete a[s].labels,Object.defineProperty(a[s],"channels",{value:l}),Object.defineProperty(a[s],"labels",{value:u})}function c(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2)}a.rgb.hsl=function(t){var e,n,r,i=t[0]/255,o=t[1]/255,a=t[2]/255,s=Math.min(i,o,a),l=Math.max(i,o,a),u=l-s;return l===s?e=0:i===l?e=(o-a)/u:o===l?e=2+(a-i)/u:a===l&&(e=4+(i-o)/u),e=Math.min(60*e,360),e<0&&(e+=360),r=(s+l)/2,n=l===s?0:r<=.5?u/(l+s):u/(2-l-s),[e,100*n,100*r]},a.rgb.hsv=function(t){var e,n,r,i,o,a=t[0]/255,s=t[1]/255,l=t[2]/255,u=Math.max(a,s,l),c=u-Math.min(a,s,l),h=function(t){return(u-t)/6/c+.5};return 0===c?i=o=0:(o=c/u,e=h(a),n=h(s),r=h(l),a===u?i=r-n:s===u?i=1/3+e-r:l===u&&(i=2/3+n-e),i<0?i+=1:i>1&&(i-=1)),[360*i,100*o,100*u]},a.rgb.hwb=function(t){var e=t[0],n=t[1],r=t[2],i=a.rgb.hsl(t)[0],o=1/255*Math.min(e,Math.min(n,r));return r=1-1/255*Math.max(e,Math.max(n,r)),[i,100*o,100*r]},a.rgb.cmyk=function(t){var e,n,r,i,o=t[0]/255,a=t[1]/255,s=t[2]/255;return i=Math.min(1-o,1-a,1-s),e=(1-o-i)/(1-i)||0,n=(1-a-i)/(1-i)||0,r=(1-s-i)/(1-i)||0,[100*e,100*n,100*r,100*i]},a.rgb.keyword=function(t){var e=i[t];if(e)return e;var n,o=1/0;for(var a in r)if(r.hasOwnProperty(a)){var s=r[a],l=c(t,s);l<o&&(o=l,n=a)}return n},a.keyword.rgb=function(t){return r[t]},a.rgb.xyz=function(t){var e=t[0]/255,n=t[1]/255,r=t[2]/255;e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92;var i=.4124*e+.3576*n+.1805*r,o=.2126*e+.7152*n+.0722*r,a=.0193*e+.1192*n+.9505*r;return[100*i,100*o,100*a]},a.rgb.lab=function(t){var e,n,r,i=a.rgb.xyz(t),o=i[0],s=i[1],l=i[2];return o/=95.047,s/=100,l/=108.883,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,l=l>.008856?Math.pow(l,1/3):7.787*l+16/116,e=116*s-16,n=500*(o-s),r=200*(s-l),[e,n,r]},a.hsl.rgb=function(t){var e,n,r,i,o,a=t[0]/360,s=t[1]/100,l=t[2]/100;if(0===s)return o=255*l,[o,o,o];n=l<.5?l*(1+s):l+s-l*s,e=2*l-n,i=[0,0,0];for(var u=0;u<3;u++)r=a+1/3*-(u-1),r<0&&r++,r>1&&r--,o=6*r<1?e+6*(n-e)*r:2*r<1?n:3*r<2?e+(n-e)*(2/3-r)*6:e,i[u]=255*o;return i},a.hsl.hsv=function(t){var e,n,r=t[0],i=t[1]/100,o=t[2]/100,a=i,s=Math.max(o,.01);return o*=2,i*=o<=1?o:2-o,a*=s<=1?s:2-s,n=(o+i)/2,e=0===o?2*a/(s+a):2*i/(o+i),[r,100*e,100*n]},a.hsv.rgb=function(t){var e=t[0]/60,n=t[1]/100,r=t[2]/100,i=Math.floor(e)%6,o=e-Math.floor(e),a=255*r*(1-n),s=255*r*(1-n*o),l=255*r*(1-n*(1-o));switch(r*=255,i){case 0:return[r,l,a];case 1:return[s,r,a];case 2:return[a,r,l];case 3:return[a,s,r];case 4:return[l,a,r];case 5:return[r,a,s]}},a.hsv.hsl=function(t){var e,n,r,i=t[0],o=t[1]/100,a=t[2]/100,s=Math.max(a,.01);return r=(2-o)*a,e=(2-o)*s,n=o*s,n/=e<=1?e:2-e,n=n||0,r/=2,[i,100*n,100*r]},a.hwb.rgb=function(t){var e,n,r,i,o,a,s,l=t[0]/360,u=t[1]/100,c=t[2]/100,h=u+c;switch(h>1&&(u/=h,c/=h),e=Math.floor(6*l),n=1-c,r=6*l-e,0!==(1&e)&&(r=1-r),i=u+r*(n-u),e){default:case 6:case 0:o=n,a=i,s=u;break;case 1:o=i,a=n,s=u;break;case 2:o=u,a=n,s=i;break;case 3:o=u,a=i,s=n;break;case 4:o=i,a=u,s=n;break;case 5:o=n,a=u,s=i;break}return[255*o,255*a,255*s]},a.cmyk.rgb=function(t){var e,n,r,i=t[0]/100,o=t[1]/100,a=t[2]/100,s=t[3]/100;return e=1-Math.min(1,i*(1-s)+s),n=1-Math.min(1,o*(1-s)+s),r=1-Math.min(1,a*(1-s)+s),[255*e,255*n,255*r]},a.xyz.rgb=function(t){var e,n,r,i=t[0]/100,o=t[1]/100,a=t[2]/100;return e=3.2406*i+-1.5372*o+-.4986*a,n=-.9689*i+1.8758*o+.0415*a,r=.0557*i+-.204*o+1.057*a,e=e>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,e=Math.min(Math.max(0,e),1),n=Math.min(Math.max(0,n),1),r=Math.min(Math.max(0,r),1),[255*e,255*n,255*r]},a.xyz.lab=function(t){var e,n,r,i=t[0],o=t[1],a=t[2];return i/=95.047,o/=100,a/=108.883,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,a=a>.008856?Math.pow(a,1/3):7.787*a+16/116,e=116*o-16,n=500*(i-o),r=200*(o-a),[e,n,r]},a.lab.xyz=function(t){var e,n,r,i=t[0],o=t[1],a=t[2];n=(i+16)/116,e=o/500+n,r=n-a/200;var s=Math.pow(n,3),l=Math.pow(e,3),u=Math.pow(r,3);return n=s>.008856?s:(n-16/116)/7.787,e=l>.008856?l:(e-16/116)/7.787,r=u>.008856?u:(r-16/116)/7.787,e*=95.047,n*=100,r*=108.883,[e,n,r]},a.lab.lch=function(t){var e,n,r,i=t[0],o=t[1],a=t[2];return e=Math.atan2(a,o),n=360*e/2/Math.PI,n<0&&(n+=360),r=Math.sqrt(o*o+a*a),[i,r,n]},a.lch.lab=function(t){var e,n,r,i=t[0],o=t[1],a=t[2];return r=a/360*2*Math.PI,e=o*Math.cos(r),n=o*Math.sin(r),[i,e,n]},a.rgb.ansi16=function(t){var e=t[0],n=t[1],r=t[2],i=1 in arguments?arguments[1]:a.rgb.hsv(t)[2];if(i=Math.round(i/50),0===i)return 30;var o=30+(Math.round(r/255)<<2|Math.round(n/255)<<1|Math.round(e/255));return 2===i&&(o+=60),o},a.hsv.ansi16=function(t){return a.rgb.ansi16(a.hsv.rgb(t),t[2])},a.rgb.ansi256=function(t){var e=t[0],n=t[1],r=t[2];if(e===n&&n===r)return e<8?16:e>248?231:Math.round((e-8)/247*24)+232;var i=16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5);return i},a.ansi16.rgb=function(t){var e=t%10;if(0===e||7===e)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];var n=.5*(1+~~(t>50)),r=(1&e)*n*255,i=(e>>1&1)*n*255,o=(e>>2&1)*n*255;return[r,i,o]},a.ansi256.rgb=function(t){if(t>=232){var e=10*(t-232)+8;return[e,e,e]}var n;t-=16;var r=Math.floor(t/36)/5*255,i=Math.floor((n=t%36)/6)/5*255,o=n%6/5*255;return[r,i,o]},a.rgb.hex=function(t){var e=((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2])),n=e.toString(16).toUpperCase();return"000000".substring(n.length)+n},a.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var n=e[0];3===e[0].length&&(n=n.split("").map((function(t){return t+t})).join(""));var r=parseInt(n,16),i=r>>16&255,o=r>>8&255,a=255&r;return[i,o,a]},a.rgb.hcg=function(t){var e,n,r=t[0]/255,i=t[1]/255,o=t[2]/255,a=Math.max(Math.max(r,i),o),s=Math.min(Math.min(r,i),o),l=a-s;return e=l<1?s/(1-l):0,n=l<=0?0:a===r?(i-o)/l%6:a===i?2+(o-r)/l:4+(r-i)/l+4,n/=6,n%=1,[360*n,100*l,100*e]},a.hsl.hcg=function(t){var e=t[1]/100,n=t[2]/100,r=1,i=0;return r=n<.5?2*e*n:2*e*(1-n),r<1&&(i=(n-.5*r)/(1-r)),[t[0],100*r,100*i]},a.hsv.hcg=function(t){var e=t[1]/100,n=t[2]/100,r=e*n,i=0;return r<1&&(i=(n-r)/(1-r)),[t[0],100*r,100*i]},a.hcg.rgb=function(t){var e=t[0]/360,n=t[1]/100,r=t[2]/100;if(0===n)return[255*r,255*r,255*r];var i=[0,0,0],o=e%1*6,a=o%1,s=1-a,l=0;switch(Math.floor(o)){case 0:i[0]=1,i[1]=a,i[2]=0;break;case 1:i[0]=s,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=a;break;case 3:i[0]=0,i[1]=s,i[2]=1;break;case 4:i[0]=a,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=s}return l=(1-n)*r,[255*(n*i[0]+l),255*(n*i[1]+l),255*(n*i[2]+l)]},a.hcg.hsv=function(t){var e=t[1]/100,n=t[2]/100,r=e+n*(1-e),i=0;return r>0&&(i=e/r),[t[0],100*i,100*r]},a.hcg.hsl=function(t){var e=t[1]/100,n=t[2]/100,r=n*(1-e)+.5*e,i=0;return r>0&&r<.5?i=e/(2*r):r>=.5&&r<1&&(i=e/(2*(1-r))),[t[0],100*i,100*r]},a.hcg.hwb=function(t){var e=t[1]/100,n=t[2]/100,r=e+n*(1-e);return[t[0],100*(r-e),100*(1-r)]},a.hwb.hcg=function(t){var e=t[1]/100,n=t[2]/100,r=1-n,i=r-e,o=0;return i<1&&(o=(r-i)/(1-i)),[t[0],100*i,100*o]},a.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},a.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},a.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},a.gray.hsl=a.gray.hsv=function(t){return[0,0,t[0]]},a.gray.hwb=function(t){return[0,100,t[0]]},a.gray.cmyk=function(t){return[0,0,0,t[0]]},a.gray.lab=function(t){return[t[0],0,0]},a.gray.hex=function(t){var e=255&Math.round(t[0]/100*255),n=(e<<16)+(e<<8)+e,r=n.toString(16).toUpperCase();return"000000".substring(r.length)+r},a.rgb.gray=function(t){var e=(t[0]+t[1]+t[2])/3;return[e/255*100]}},b7d1:function(t,e,n){(function(e){function n(t,e){if(r("noDeprecation"))return t;var n=!1;function i(){if(!n){if(r("throwDeprecation"))throw new Error(e);r("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}return i}function r(t){try{if(!e.localStorage)return!1}catch(r){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=n}).call(this,n("c8ba"))},b88d:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n("f391")),o=r(n("9626")),a=r(n("bd2c")),s=function(t,e,n,r,c,h){var d,f,p,g,m=t.children(e),y=t.node(e),v=y?y.borderLeft:void 0,b=y?y.borderRight:void 0,_={};v&&(m=null===m||void 0===m?void 0:m.filter((function(t){return t!==v&&t!==b})));var x=(0,i.default)(t,m||[]);null===x||void 0===x||x.forEach((function(e){var i;if(null===(i=t.children(e.v))||void 0===i?void 0:i.length){var o=s(t,e.v,n,r,h);_[e.v]=o,o.hasOwnProperty("barycenter")&&u(e,o)}}));var w=(0,o.default)(x,n);l(w,_),null===(d=w.filter((function(t){return t.vs.length>0})))||void 0===d||d.forEach((function(e){var n=t.node(e.vs[0]);n&&(e.fixorder=n.fixorder,e.order=n.order)}));var S=(0,a.default)(w,r,c,h);if(v&&(S.vs=[v,S.vs,b].flat(),null===(f=t.predecessors(v))||void 0===f?void 0:f.length)){var E=t.node((null===(p=t.predecessors(v))||void 0===p?void 0:p[0])||""),C=t.node((null===(g=t.predecessors(b))||void 0===g?void 0:g[0])||"");S.hasOwnProperty("barycenter")||(S.barycenter=0,S.weight=0),S.barycenter=(S.barycenter*S.weight+E.order+C.order)/(S.weight+2),S.weight+=2}return S},l=function(t,e){null===t||void 0===t||t.forEach((function(t){var n,r=null===(n=t.vs)||void 0===n?void 0:n.map((function(t){return e[t]?e[t].vs:t}));t.vs=r.flat()}))},u=function(t,e){void 0!==t.barycenter?(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight):(t.barycenter=e.barycenter,t.weight=e.weight)};e.default=s},b8fa:function(t,e){t.exports=function(t){return!(!t||"string"===typeof t)&&(t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&"String"!==t.constructor.name))}},bad4:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["ignore_unavailable","allow_no_indices","expand_wildcards","local","pretty","human","error_trace","source","filter_path"],a={ignoreUnavailable:"ignore_unavailable",allowNoIndices:"allow_no_indices",expandWildcards:"expand_wildcards",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,type:f,...p}=t;p=i(o,a,p,u),null==c&&(c="GET");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m=null!=d&&null!=f?"/"+encodeURIComponent(d)+"/_mapping/"+encodeURIComponent(f):null!=d?"/"+encodeURIComponent(d)+"/_mapping":null!=f?"/_mapping/"+encodeURIComponent(f):"/_mapping";const y={method:c,path:m,body:null,querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},bb15:function(t,e,n){var r=n("b753"),i=n("a279"),o={},a=Object.keys(r);function s(t){var e=function(e){return void 0===e||null===e?e:(arguments.length>1&&(e=Array.prototype.slice.call(arguments)),t(e))};return"conversion"in t&&(e.conversion=t.conversion),e}function l(t){var e=function(e){if(void 0===e||null===e)return e;arguments.length>1&&(e=Array.prototype.slice.call(arguments));var n=t(e);if("object"===typeof n)for(var r=n.length,i=0;i<r;i++)n[i]=Math.round(n[i]);return n};return"conversion"in t&&(e.conversion=t.conversion),e}a.forEach((function(t){o[t]={},Object.defineProperty(o[t],"channels",{value:r[t].channels}),Object.defineProperty(o[t],"labels",{value:r[t].labels});var e=i(t),n=Object.keys(e);n.forEach((function(n){var r=e[n];o[t][n]=l(r),o[t][n].raw=s(r)}))})),t.exports=o},bb1c:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["detailed","active_only","pretty","human","error_trace","source","filter_path"],a={activeOnly:"active_only",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,...f}=t;f=i(o,a,f,u),null==c&&(c="GET");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g=null!=d?"/"+encodeURIComponent(d)+"/_recovery":"/_recovery";const m={method:c,path:g,body:null,querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},bb8f:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["parent","preference","realtime","refresh","routing","_source","_source_exclude","_source_include","version","version_type","pretty","human","error_trace","source","filter_path"],a={_sourceExclude:"_source_exclude",_sourceInclude:"_source_include",versionType:"version_type",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["id"]){const t=new n("Missing required parameter: id");return r(t,l)}if(null==t["index"]){const t=new n("Missing required parameter: index");return r(t,l)}if(null==t["type"]){const t=new n("Missing required parameter: type");return r(t,l)}if(null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=t["id"]&&(null==t["type"]||null==t["index"])){const t=new n("Missing required parameter of the url: type, index");return r(t,l)}if(null!=t["type"]&&null==t["index"]){const t=new n("Missing required parameter of the url: index");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,id:d,index:f,type:p,...g}=t;g=i(o,a,g,u),null==c&&(c="HEAD");var m=s.ignore;"number"===typeof m&&(s.ignore=[m]);var y="";y="/"+encodeURIComponent(f)+"/"+encodeURIComponent(p)+"/"+encodeURIComponent(d)+"/_source";const v={method:c,path:y,body:null,querystring:g};return s.warnings=0===u.length?null:u,e(v,s,l)}}t.exports=r},bc19:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["timeout","master_timeout","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["id"]){const t=new n("Missing required parameter: id");return r(t,l)}if(null==t["lang"]){const t=new n("Missing required parameter: lang");return r(t,l)}if(null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=t["id"]&&null==t["lang"]){const t=new n("Missing required parameter of the url: lang");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,id:d,lang:f,...p}=t;p=i(o,a,p,u),null==c&&(c="DELETE");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m=null!=f&&null!=d?"/_scripts/"+encodeURIComponent(f)+"/"+encodeURIComponent(d):"/_scripts/"+encodeURIComponent(f);const y={method:c,path:m,body:"",querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},bc88:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return l}));var r=n("b2cb"),i=n("96de");function o(t,e,n){var i=1;if(Object(r["h"])(t)&&(i=t.split("\n").length),i>1){var o=a(e,n);return e*i+o*(i-1)}return e}function a(t,e){return e?e-t:.14*t}function s(t,e){var n=Object(i["a"])(),o=0;if(Object(r["e"])(t)||""===t)return o;if(n.save(),n.font=e,Object(r["h"])(t)&&t.includes("\n")){var a=t.split("\n");Object(r["a"])(a,(function(t){var e=n.measureText(t).width;o<e&&(o=e)}))}else o=n.measureText(t).width;return n.restore(),o}function l(t){var e=t.fontSize,n=t.fontFamily,r=t.fontWeight,i=t.fontStyle,o=t.fontVariant;return[i,o,r,e+"px",n].join(" ").trim()}},bd2c:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("7908"),i=function(t,e,n,i){var s=(0,r.partition)(t,(function(t){var e=t.hasOwnProperty("fixorder")&&!isNaN(t.fixorder);return i?!e&&t.hasOwnProperty("barycenter"):e||t.hasOwnProperty("barycenter")})),l=s.lhs,u=s.rhs.sort((function(t,e){return-t.i- -e.i})),c=[],h=0,d=0,f=0;null===l||void 0===l||l.sort(a(!!e,!!n)),f=o(c,u,f),null===l||void 0===l||l.forEach((function(t){var e;f+=null===(e=t.vs)||void 0===e?void 0:e.length,c.push(t.vs),h+=t.barycenter*t.weight,d+=t.weight,f=o(c,u,f)}));var p={vs:c.flat()};return d&&(p.barycenter=h/d,p.weight=d),p},o=function(t,e,n){var r,i=n;while(e.length&&(r=e[e.length-1]).i<=i)e.pop(),null===t||void 0===t||t.push(r.vs),i++;return i},a=function(t,e){return function(n,r){if(void 0!==n.fixorder&&void 0!==r.fixorder)return n.fixorder-r.fixorder;if(n.barycenter<r.barycenter)return-1;if(n.barycenter>r.barycenter)return 1;if(e&&void 0!==n.order&&void 0!==r.order){if(n.order<r.order)return-1;if(n.order>r.order)return 1}return t?r.i-n.i:n.i-r.i}};e.default=i},be7f:function(t,e,n){"use strict";var r="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.assign=function(t){var e=Array.prototype.slice.call(arguments,1);while(e.length){var n=e.shift();if(n){if("object"!==typeof n)throw new TypeError(n+"must be non-object");for(var r in n)i(n,r)&&(t[r]=n[r])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var o={arraySet:function(t,e,n,r,i){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+r),i);else for(var o=0;o<r;o++)t[i+o]=e[n+o]},flattenChunks:function(t){var e,n,r,i,o,a;for(r=0,e=0,n=t.length;e<n;e++)r+=t[e].length;for(a=new Uint8Array(r),i=0,e=0,n=t.length;e<n;e++)o=t[e],a.set(o,i),i+=o.length;return a}},a={arraySet:function(t,e,n,r,i){for(var o=0;o<r;o++)t[i+o]=e[n+o]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,o)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,a))},e.setTyped(r)},bfb1:function(t,e,n){"use strict";n("68de"),n("6855");var r=n("c029");n.d(e,"Canvas",(function(){return r["a"]}));n("e73e")},c029:function(t,e,n){"use strict";var r=n("9ab4"),i=n("6855"),o=n("22f9"),a=n("7349"),s=n("00f9"),l=n("73ec"),u=n("68de"),c=n("e73e"),h=n("8937"),d=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,f=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,p=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function g(t){var e=t.match(p);if(!e)return"";var n="";return e.sort((function(t,e){return t=t.split(":"),e=e.split(":"),Number(t[0])-Number(e[0])})),Object(h["each"])(e,(function(t){t=t.split(":"),n+='<stop offset="'+t[0]+'" stop-color="'+t[1]+'"></stop>'})),n}function m(t,e){var n,r,i=d.exec(t),o=Object(h["mod"])(Object(h["toRadian"])(parseFloat(i[1])),2*Math.PI),a=i[2];o>=0&&o<.5*Math.PI?(n={x:0,y:0},r={x:1,y:1}):.5*Math.PI<=o&&o<Math.PI?(n={x:1,y:0},r={x:0,y:1}):Math.PI<=o&&o<1.5*Math.PI?(n={x:1,y:1},r={x:0,y:0}):(n={x:0,y:1},r={x:1,y:0});var s=Math.tan(o),l=s*s,u=(r.x-n.x+s*(r.y-n.y))/(l+1)+n.x,c=s*(r.x-n.x+s*(r.y-n.y))/(l+1)+n.y;e.setAttribute("x1",n.x),e.setAttribute("y1",n.y),e.setAttribute("x2",u),e.setAttribute("y2",c),e.innerHTML=g(a)}function y(t,e){var n=f.exec(t),r=parseFloat(n[1]),i=parseFloat(n[2]),o=parseFloat(n[3]),a=n[4];e.setAttribute("cx",r),e.setAttribute("cy",i),e.setAttribute("r",o),e.innerHTML=g(a)}var v=function(){function t(t){this.cfg={};var e=null,n=Object(h["uniqueId"])("gradient_");return"l"===t.toLowerCase()[0]?(e=Object(l["b"])("linearGradient"),m(t,e)):(e=Object(l["b"])("radialGradient"),y(t,e)),e.setAttribute("id",n),this.el=e,this.id=n,this.cfg=t,this}return t.prototype.match=function(t,e){return this.cfg===e},t}(),b=v,_={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},x={x:"-40%",y:"-40%",width:"200%",height:"200%"},w=function(){function t(t){this.type="filter",this.cfg={},this.type="filter";var e=Object(l["b"])("filter");return Object(h["each"])(x,(function(t,n){e.setAttribute(n,t)})),this.el=e,this.id=Object(h["uniqueId"])("filter_"),this.el.id=this.id,this.cfg=t,this._parseShadow(t,e),this}return t.prototype.match=function(t,e){if(this.type!==t)return!1;var n=!0,r=this.cfg;return Object(h["each"])(Object.keys(r),(function(t){if(r[t]!==e[t])return n=!1,!1})),n},t.prototype.update=function(t,e){var n=this.cfg;return n[_[t]]=e,this._parseShadow(n,this.el),this},t.prototype._parseShadow=function(t,e){var n='<feDropShadow\n      dx="'+(t.dx||0)+'"\n      dy="'+(t.dy||0)+'"\n      stdDeviation="'+(t.blur?t.blur/10:0)+'"\n      flood-color="'+(t.color?t.color:"#000")+'"\n      flood-opacity="'+(t.opacity?t.opacity:1)+'"\n      />';e.innerHTML=n},t}(),S=w,E=function(){function t(t,e){this.cfg={};var n=Object(l["b"])("marker"),r=Object(h["uniqueId"])("marker_");n.setAttribute("id",r);var i=Object(l["b"])("path");i.setAttribute("stroke",t.stroke||"none"),i.setAttribute("fill",t.fill||"none"),n.appendChild(i),n.setAttribute("overflow","visible"),n.setAttribute("orient","auto-start-reverse"),this.el=n,this.child=i,this.id=r;var o=t["marker-start"===e?"startArrow":"endArrow"];return this.stroke=t.stroke||"#000",!0===o?this._setDefaultPath(e,i):(this.cfg=o,this._setMarker(t.lineWidth,i)),this}return t.prototype.match=function(){return!1},t.prototype._setDefaultPath=function(t,e){var n=this.el;e.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),n.setAttribute("refX",""+10*Math.cos(Math.PI/6)),n.setAttribute("refY","5")},t.prototype._setMarker=function(t,e){var n=this.el,r=this.cfg.path,i=this.cfg.d;Object(h["isArray"])(r)&&(r=r.map((function(t){return t.join(" ")})).join("")),e.setAttribute("d",r),n.appendChild(e),i&&n.setAttribute("refX",""+i/t)},t.prototype.update=function(t){var e=this.child;e.attr?e.attr("fill",t):e.setAttribute("fill",t)},t}(),C=E,M=function(){function t(t){this.type="clip",this.cfg={};var e=Object(l["b"])("clipPath");this.el=e,this.id=Object(h["uniqueId"])("clip_"),e.id=this.id;var n=t.cfg.el;return e.appendChild(n),this.cfg=t,this}return t.prototype.match=function(){return!1},t.prototype.remove=function(){var t=this.el;t.parentNode.removeChild(t)},t}(),T=M,A=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,O=function(){function t(t){this.cfg={};var e=Object(l["b"])("pattern");e.setAttribute("patternUnits","userSpaceOnUse");var n=Object(l["b"])("image");e.appendChild(n);var r=Object(h["uniqueId"])("pattern_");e.id=r,this.el=e,this.id=r,this.cfg=t;var i=A.exec(t),o=i[2];n.setAttribute("href",o);var a=new Image;function s(){e.setAttribute("width",""+a.width),e.setAttribute("height",""+a.height)}return o.match(/^data:/i)||(a.crossOrigin="Anonymous"),a.src=o,a.complete?s():(a.onload=s,a.src=a.src),this}return t.prototype.match=function(t,e){return this.cfg===e},t}(),k=O,I=function(){function t(t){var e=Object(l["b"])("defs"),n=Object(h["uniqueId"])("defs_");e.id=n,t.appendChild(e),this.children=[],this.defaultArrow={},this.el=e,this.canvas=t}return t.prototype.find=function(t,e){for(var n=this.children,r=null,i=0;i<n.length;i++)if(n[i].match(t,e)){r=n[i].id;break}return r},t.prototype.findById=function(t){for(var e=this.children,n=null,r=0;r<e.length;r++)if(e[r].id===t){n=e[r];break}return n},t.prototype.add=function(t){this.children.push(t),t.canvas=this.canvas,t.parent=this},t.prototype.getDefaultArrow=function(t,e){var n=t.stroke||t.strokeStyle;if(this.defaultArrow[n])return this.defaultArrow[n].id;var r=new C(t,e);return this.defaultArrow[n]=r,this.el.appendChild(r.el),this.add(r),r.id},t.prototype.addGradient=function(t){var e=new b(t);return this.el.appendChild(e.el),this.add(e),e.id},t.prototype.addArrow=function(t,e){var n=new C(t,e);return this.el.appendChild(n.el),this.add(n),n.id},t.prototype.addShadow=function(t){var e=new S(t);return this.el.appendChild(e.el),this.add(e),e.id},t.prototype.addPattern=function(t){var e=new k(t);return this.el.appendChild(e.el),this.add(e),e.id},t.prototype.addClip=function(t){var e=new T(t);return this.el.appendChild(e.el),this.add(e),e.id},t}(),P=I,L=function(t){function e(e){return t.call(this,Object(r["__assign"])(Object(r["__assign"])({},e),{autoDraw:!0,renderer:"svg"}))||this}return Object(r["__extends"])(e,t),e.prototype.getShapeBase=function(){return u},e.prototype.getGroupBase=function(){return c["a"]},e.prototype.getShape=function(t,e,n){var r=n.target||n.srcElement;if(!o["a"][r.tagName]){var i=r.parentNode;while(i&&!o["a"][i.tagName])i=i.parentNode;r=i}return this.find((function(t){return t.get("el")===r}))},e.prototype.createDom=function(){var t=Object(l["b"])("svg"),e=new P(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",e),t},e.prototype.onCanvasChange=function(t){var e=this.get("context"),n=this.get("el");if("sort"===t){var r=this.get("children");r&&r.length&&Object(l["d"])(this,(function(t,e){return r.indexOf(t)-r.indexOf(e)?1:0}))}else if("clear"===t){if(n){n.innerHTML="";var i=e.el;i.innerHTML="",n.appendChild(i)}}else"matrix"===t?Object(s["c"])(this):"clip"===t?Object(s["a"])(this,e):"changeSize"===t&&(n.setAttribute("width",""+this.get("width")),n.setAttribute("height",""+this.get("height")))},e.prototype.draw=function(){var t=this.get("context"),e=this.getChildren();Object(s["a"])(this,t),e.length&&Object(a["a"])(t,e)},e}(i["AbstractCanvas"]);e["a"]=L},c03f:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["include_yes_decisions","include_disk_info","pretty","human","error_trace","source","filter_path"],a={includeYesDecisions:"include_yes_decisions",includeDiskInfo:"include_disk_info",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,...d}=t;d=i(o,a,d,u),null==c&&(c=null==h?"GET":"POST");var f=s.ignore;"number"===typeof f&&(s.ignore=[f]);var p="";p="/_cluster/allocation/explain";const g={method:c,path:p,body:h||"",querystring:d};return s.warnings=0===u.length?null:u,e(g,s,l)}}t.exports=r},c042:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["stored_fields","preference","realtime","refresh","routing","_source","_source_exclude","_source_include","pretty","human","error_trace","source","filter_path"],a={storedFields:"stored_fields",_sourceExclude:"_source_exclude",_sourceInclude:"_source_include",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["body"]){const t=new n("Missing required parameter: body");return r(t,l)}if(null!=t["type"]&&null==t["index"]){const t=new n("Missing required parameter of the url: index");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,type:f,...p}=t;p=i(o,a,p,u),null==c&&(c=null==h?"GET":"POST");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m=null!=d&&null!=f?"/"+encodeURIComponent(d)+"/"+encodeURIComponent(f)+"/_mget":null!=d?"/"+encodeURIComponent(d)+"/_mget":"/_mget";const y={method:c,path:m,body:h||"",querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},c0d2:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n("9023"),i=o(n("9fba"));function o(t){return t&&t.__esModule?t:{default:t}}var a=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new Promise((function(n,o){var a=new i.default;a.postMessage({_algorithmType:t,data:e}),a.onmessage=function(t){var e=t.data,i=e.data,s=e._algorithmType;r.MESSAGE.SUCCESS===s?n(i):o(),a.terminate()}}))}},s=a;e.default=s},c2ad:function(t,e,n){"use strict";var r=n("9ab4"),i=n("6855"),o=n("4799"),a=n("f5e5"),s=n("8937"),l=n("7326"),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r["__extends"])(e,t),e.prototype.onCanvasChange=function(t){Object(a["h"])(this,t)},e.prototype.getShapeBase=function(){return o},e.prototype.getGroupBase=function(){return e},e.prototype._applyClip=function(t,e){e&&(t.save(),Object(a["a"])(t,e),e.createPath(t),t.restore(),t.clip(),e._afterDraw())},e.prototype.cacheCanvasBBox=function(){var t=this.cfg.children,e=[],n=[];Object(s["each"])(t,(function(t){var r=t.cfg.cacheCanvasBBox;r&&t.cfg.isInView&&(e.push(r.minX,r.maxX),n.push(r.minY,r.maxY))}));var r=null;if(e.length){var i=Object(s["min"])(e),o=Object(s["max"])(e),a=Object(s["min"])(n),u=Object(s["max"])(n);r={minX:i,minY:a,x:i,y:a,maxX:o,maxY:u,width:o-i,height:u-a};var c=this.cfg.canvas;if(c){var h=c.getViewRange();this.set("isInView",Object(l["f"])(r,h))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",r)},e.prototype.draw=function(t,e){var n=this.cfg.children,r=!e||this.cfg.refresh;n.length&&r&&(t.save(),Object(a["a"])(t,this),this._applyClip(t,this.getClip()),Object(a["d"])(t,n,e),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},e}(i["AbstractGroup"]);e["a"]=u},c2ae:function(t,e,n){t.exports=n("780f")},c323:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("7908"),i=function(t){var e,n=function(e){var r=t.children(e),i=t.node(e);if((null===r||void 0===r?void 0:r.length)&&r.forEach((function(t){return n(t)})),i.hasOwnProperty("minRank")){i.borderLeft=[],i.borderRight=[];for(var a=i.minRank,s=i.maxRank+1;a<s;a+=1)o(t,"borderLeft","_bl",e,i,a),o(t,"borderRight","_br",e,i,a)}};null===(e=t.children())||void 0===e||e.forEach((function(t){return n(t)}))},o=function(t,e,n,i,o,a){var s={rank:a,borderType:e,width:0,height:0},l=o[e][a-1],u=(0,r.addDummyNode)(t,"border",s,n);o[e][a]=u,t.setParent(u,i),l&&t.setEdge(l,u,{weight:1})};e.default=i},c674:function(t,e,n){"use strict";function r(t,e){this.x=t,this.y=e}t.exports=r,r.prototype={clone:function(){return new r(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=e*this.x-n*this.y,i=n*this.x+e*this.y;return this.x=r,this.y=i,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.x+n*(this.x-e.x)-r*(this.y-e.y),o=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(t){return t instanceof r?t:Array.isArray(t)?new r(t[0],t[1]):t}},c69f:function(t,e,n){"use strict";var r=n("3913");function i(t,e){var n=this,i=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return i||o?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,r.nextTick(a,this,t)):r.nextTick(a,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?n._writableState?n._writableState.errorEmitted||(n._writableState.errorEmitted=!0,r.nextTick(a,n,t)):r.nextTick(a,n,t):e&&e(t)})),this)}function o(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function a(t,e){t.emit("error",e)}t.exports={destroy:i,undestroy:o}},c7ea:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.ComboForceLayout=void 0;var i=n("5bc9"),o=n("f271"),a=function(t){function e(e){var n=t.call(this)||this;return n.center=[0,0],n.maxIteration=100,n.gravity=10,n.comboGravity=10,n.linkDistance=10,n.alpha=1,n.alphaMin=.001,n.alphaDecay=1-Math.pow(n.alphaMin,1/300),n.alphaTarget=0,n.velocityDecay=.6,n.edgeStrength=.6,n.nodeStrength=30,n.preventOverlap=!1,n.preventNodeOverlap=!1,n.preventComboOverlap=!1,n.collideStrength=void 0,n.nodeCollideStrength=.5,n.comboCollideStrength=.5,n.comboSpacing=20,n.comboPadding=10,n.optimizeRangeFactor=1,n.onTick=function(){},n.onLayoutEnd=function(){},n.depthAttractiveForceScale=1,n.depthRepulsiveForceScale=2,n.nodes=[],n.edges=[],n.combos=[],n.comboTrees=[],n.width=300,n.height=300,n.bias=[],n.nodeMap={},n.oriComboMap={},n.indexMap={},n.comboMap={},n.previousLayouted=!1,n.updateCfg(e),n}return r(e,t),e.prototype.getDefaultCfg=function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}},e.prototype.execute=function(){var t=this,e=t.nodes,n=t.center;if(t.comboTree={id:"comboTreeRoot",depth:-1,children:t.comboTrees},e&&0!==e.length){if(1===e.length)return e[0].x=n[0],e[0].y=n[1],void(t.onLayoutEnd&&t.onLayoutEnd());t.initVals(),t.run(),t.onLayoutEnd&&t.onLayoutEnd()}else t.onLayoutEnd&&t.onLayoutEnd()},e.prototype.run=function(){var t=this,e=t.nodes,n=t.previousLayouted?t.maxIteration/5:t.maxIteration;t.width||"undefined"===typeof window||(t.width=window.innerWidth),t.height||"undefined"===typeof window||(t.height=window.innerHeight);var r=t.center,i=t.velocityDecay,a=t.comboMap;t.previousLayouted||t.initPos(a);for(var s=function(n){var r=[];e.forEach((function(t,e){r[e]={x:0,y:0}})),t.applyCalculate(r),t.applyComboCenterForce(r),e.forEach((function(t,e){(0,o.isNumber)(t.x)&&(0,o.isNumber)(t.y)&&(t.x+=r[e].x*i,t.y+=r[e].y*i)})),t.alpha+=(t.alphaTarget-t.alpha)*t.alphaDecay,t.onTick()},l=0;l<n;l++)s(l);var u=[0,0];e.forEach((function(t){(0,o.isNumber)(t.x)&&(0,o.isNumber)(t.y)&&(u[0]+=t.x,u[1]+=t.y)})),u[0]/=e.length,u[1]/=e.length;var c=[r[0]-u[0],r[1]-u[1]];e.forEach((function(t,e){(0,o.isNumber)(t.x)&&(0,o.isNumber)(t.y)&&(t.x+=c[0],t.y+=c[1])})),t.combos.forEach((function(t){var e=a[t.id];e&&e.empty&&(t.x=e.cx||t.x,t.y=e.cy||t.y)})),t.previousLayouted=!0},e.prototype.initVals=function(){var t=this,e=t.edges,n=t.nodes,r=t.combos,i={},a={},s={};n.forEach((function(t,e){a[t.id]=t,s[t.id]=e})),t.nodeMap=a,t.indexMap=s;var l={};r.forEach((function(t){l[t.id]=t})),t.oriComboMap=l,t.comboMap=t.getComboMap();var u=t.preventOverlap;t.preventComboOverlap=t.preventComboOverlap||u,t.preventNodeOverlap=t.preventNodeOverlap||u;var c=t.collideStrength;c&&(t.comboCollideStrength=c,t.nodeCollideStrength=c),t.comboCollideStrength=t.comboCollideStrength?t.comboCollideStrength:0,t.nodeCollideStrength=t.nodeCollideStrength?t.nodeCollideStrength:0;for(var h=0;h<e.length;++h){var d=(0,o.getEdgeTerminal)(e[h],"source"),f=(0,o.getEdgeTerminal)(e[h],"target");i[d]?i[d]++:i[d]=1,i[f]?i[f]++:i[f]=1}var p=[];for(h=0;h<e.length;++h){d=(0,o.getEdgeTerminal)(e[h],"source"),f=(0,o.getEdgeTerminal)(e[h],"target");p[h]=i[d]/(i[d]+i[f])}this.bias=p;var g,m,y=t.nodeSize,v=t.nodeSpacing;if(m=(0,o.isNumber)(v)?function(){return v}:(0,o.isFunction)(v)?v:function(){return 0},this.nodeSpacing=m,y)if((0,o.isFunction)(y))g=function(t){return y(t)};else if((0,o.isArray)(y)){var b=y[0]>y[1]?y[0]:y[1],_=b/2;g=function(t){return _}}else{var x=y/2;g=function(t){return x}}else g=function(t){if(t.size){if((0,o.isArray)(t.size)){var e=t.size[0]>t.size[1]?t.size[0]:t.size[1];return e/2}if((0,o.isObject)(t.size)){e=t.size.width>t.size.height?t.size.width:t.size.height;return e/2}return t.size/2}return 10};this.nodeSize=g;var w,S=t.comboSpacing;w=(0,o.isNumber)(S)?function(){return S}:(0,o.isFunction)(S)?S:function(){return 0},this.comboSpacing=w;var E,C=t.comboPadding;E=(0,o.isNumber)(C)?function(){return C}:(0,o.isArray)(C)?function(){return Math.max.apply(null,C)}:(0,o.isFunction)(C)?C:function(){return 0},this.comboPadding=E;var M,T=this.linkDistance;T||(T=10),M=(0,o.isNumber)(T)?function(t){return T}:T,this.linkDistance=M;var A,O=this.edgeStrength;O||(O=1),A=(0,o.isNumber)(O)?function(t){return O}:O,this.edgeStrength=A;var k,I=this.nodeStrength;I||(I=30),k=(0,o.isNumber)(I)?function(t){return I}:I,this.nodeStrength=k},e.prototype.initPos=function(t){var e=this,n=e.nodes;n.forEach((function(e,n){var r=e.comboId,i=t[r];r&&i?(e.x=i.cx+100/(n+1),e.y=i.cy+100/(n+1)):(e.x=100/(n+1),e.y=100/(n+1))}))},e.prototype.getComboMap=function(){var t=this,e=t.nodeMap,n=t.comboTrees,r=t.oriComboMap,i={};return(n||[]).forEach((function(n){var a=[];(0,o.traverseTreeUp)(n,(function(n){if("node"===n.itemType)return!0;if(!r[n.id])return!0;if(void 0===i[n.id]){var s={id:n.id,name:n.id,cx:0,cy:0,count:0,depth:t.oriComboMap[n.id].depth||0,children:[]};i[n.id]=s}var l=n.children;l&&l.forEach((function(t){if(!i[t.id]&&!e[t.id])return!0;a.push(t)}));var u=i[n.id];if(u.cx=0,u.cy=0,0===a.length){u.empty=!0;var c=r[n.id];u.cx=c.x,u.cy=c.y}return a.forEach((function(t){if(u.count++,"node"!==t.itemType){var n=i[t.id];return(0,o.isNumber)(n.cx)&&(u.cx+=n.cx),void((0,o.isNumber)(n.cy)&&(u.cy+=n.cy))}var r=e[t.id];r&&((0,o.isNumber)(r.x)&&(u.cx+=r.x),(0,o.isNumber)(r.y)&&(u.cy+=r.y))})),u.cx/=u.count||1,u.cy/=u.count||1,u.children=a,!0}))})),i},e.prototype.applyComboCenterForce=function(t){var e=this,n=e.gravity,r=e.comboGravity||n,i=this.alpha,a=e.comboTrees,s=e.indexMap,l=e.nodeMap,u=e.comboMap;(a||[]).forEach((function(e){(0,o.traverseTreeUp)(e,(function(e){if("node"===e.itemType)return!0;var n=u[e.id];if(!n)return!0;var a=u[e.id],c=(a.depth+1)/10*.5,h=a.cx,d=a.cy;return a.cx=0,a.cy=0,a.children.forEach((function(e){if("node"!==e.itemType){var n=u[e.id];return n&&(0,o.isNumber)(n.cx)&&(a.cx+=n.cx),void(n&&(0,o.isNumber)(n.cy)&&(a.cy+=n.cy))}var f=l[e.id],p=f.x-h||.005,g=f.y-d||.005,m=Math.sqrt(p*p+g*g),y=s[f.id],v=r*i/m*c;t[y].x-=p*v,t[y].y-=g*v,(0,o.isNumber)(f.x)&&(a.cx+=f.x),(0,o.isNumber)(f.y)&&(a.cy+=f.y)})),a.cx/=a.count||1,a.cy/=a.count||1,!0}))}))},e.prototype.applyCalculate=function(t){var e=this,n=e.comboMap,r=e.nodes,i={};r.forEach((function(t,e){r.forEach((function(n,r){if(!(e<r)){var o=t.x-n.x||.005,a=t.y-n.y||.005,s=o*o+a*a,l=Math.sqrt(s);s<1&&(s=l),i["".concat(t.id,"-").concat(n.id)]={vx:o,vy:a,vl2:s,vl:l},i["".concat(n.id,"-").concat(t.id)]={vl2:s,vl:l,vx:-o,vy:-a}}}))})),e.updateComboSizes(n),e.calRepulsive(t,i),e.calAttractive(t,i);var o=e.preventComboOverlap;o&&e.comboNonOverlapping(t,n)},e.prototype.updateComboSizes=function(t){var e=this,n=e.comboTrees,r=e.nodeMap,i=e.nodeSize,a=e.comboSpacing,s=e.comboPadding;(n||[]).forEach((function(n){var l=[];(0,o.traverseTreeUp)(n,(function(n){if("node"===n.itemType)return!0;var u=t[n.id];if(!u)return!1;var c=n.children;c&&c.forEach((function(e){(t[e.id]||r[e.id])&&l.push(e)})),u.minX=1/0,u.minY=1/0,u.maxX=-1/0,u.maxY=-1/0,l.forEach((function(t){if("node"!==t.itemType)return!0;var e=r[t.id];if(!e)return!0;var n=i(e),o=e.x-n,a=e.y-n,s=e.x+n,l=e.y+n;u.minX>o&&(u.minX=o),u.minY>a&&(u.minY=a),u.maxX<s&&(u.maxX=s),u.maxY<l&&(u.maxY=l)}));var h=e.oriComboMap[n.id].size||10;(0,o.isArray)(h)&&(h=h[0]);var d=Math.max(u.maxX-u.minX,u.maxY-u.minY,h);return u.r=d/2+a(u)/2+s(u),!0}))}))},e.prototype.comboNonOverlapping=function(t,e){var n=this,r=n.comboTree,i=n.comboCollideStrength,a=n.indexMap,s=n.nodeMap;(0,o.traverseTreeUp)(r,(function(n){if(!e[n.id]&&!s[n.id]&&"comboTreeRoot"!==n.id)return!1;var r=n.children;return r&&r.length>1&&r.forEach((function(n,o){if("node"===n.itemType)return!1;var l=e[n.id];l&&r.forEach((function(r,u){if(o<=u)return!1;if("node"===r.itemType)return!1;var c=e[r.id];if(!c)return!1;var h=l.cx-c.cx||.005,d=l.cy-c.cy||.005,f=h*h+d*d,p=l.r||1,g=c.r||1,m=p+g,y=g*g,v=p*p;if(f<m*m){var b=n.children;if(!b||0===b.length)return!1;var _=r.children;if(!_||0===_.length)return!1;var x=Math.sqrt(f),w=(m-x)/x*i,S=h*w,E=d*w,C=y/(v+y),M=1-C;b.forEach((function(e){if("node"!==e.itemType)return!1;if(s[e.id]){var n=a[e.id];_.forEach((function(e){if("node"!==e.itemType)return!1;if(!s[e.id])return!1;var r=a[e.id];t[n].x+=S*C,t[n].y+=E*C,t[r].x-=S*M,t[r].y-=E*M}))}}))}}))})),!0}))},e.prototype.calRepulsive=function(t,e){var n=this,r=n.nodes,i=n.width*n.optimizeRangeFactor,o=n.nodeStrength,a=n.alpha,s=n.nodeCollideStrength,l=n.preventNodeOverlap,u=n.nodeSize,c=n.nodeSpacing,h=n.depthRepulsiveForceScale,d=n.center;r.forEach((function(f,p){if(f.x&&f.y){if(d){var g=n.gravity,m=f.x-d[0]||.005,y=f.y-d[1]||.005,v=Math.sqrt(m*m+y*y);t[p].x-=m*g*a/v,t[p].y-=y*g*a/v}r.forEach((function(n,r){if(p!==r&&n.x&&n.y){var d=e["".concat(f.id,"-").concat(n.id)],g=d.vl2,m=d.vl;if(!(m>i)){var y=e["".concat(f.id,"-").concat(n.id)],v=y.vx,b=y.vy,_=Math.log(Math.abs(n.depth-f.depth)/10)+1||1;_=_<1?1:_,n.comboId!==f.comboId&&(_+=1);var x=_?Math.pow(h,_):1,w=o(n)*a/g*x;if(t[p].x+=v*w,t[p].y+=b*w,p<r&&l){var S=u(f)+c(f)||1,E=u(n)+c(n)||1,C=S+E;if(g<C*C){var M=(C-m)/m*s,T=E*E,A=T/(S*S+T),O=v*M,k=b*M;t[p].x+=O*A,t[p].y+=k*A,A=1-A,t[r].x-=O*A,t[r].y-=k*A}}}}}))}}))},e.prototype.calAttractive=function(t,e){var n=this,r=n.edges,i=n.linkDistance,a=n.alpha,s=n.edgeStrength,l=n.bias,u=n.depthAttractiveForceScale;r.forEach((function(r,c){var h=(0,o.getEdgeTerminal)(r,"source"),d=(0,o.getEdgeTerminal)(r,"target");if(h&&d&&h!==d){var f=n.indexMap[h],p=n.indexMap[d],g=n.nodeMap[h],m=n.nodeMap[d];if(g&&m){var y=g.depth===m.depth?0:Math.log(Math.abs(g.depth-m.depth)/10);g.comboId===m.comboId&&(y/=2);var v=y?Math.pow(u,y):1;if(g.comboId!==m.comboId&&1===v?v=u/2:g.comboId===m.comboId&&(v=2),(0,o.isNumber)(m.x)&&(0,o.isNumber)(g.x)&&(0,o.isNumber)(m.y)&&(0,o.isNumber)(g.y)){var b=e["".concat(d,"-").concat(h)],_=b.vl,x=b.vx,w=b.vy,S=(_-i(r))/_*a*s(r)*v,E=x*S,C=w*S,M=l[c];t[p].x-=E*M,t[p].y-=C*M,t[f].x+=E*(1-M),t[f].y+=C*(1-M)}}}}))},e.prototype.getType=function(){return"comboForce"},e}(i.Base);e.ComboForceLayout=a},c834:function(t,e,n){"use strict";function r(t,e,n,r){var i=65535&t|0,o=t>>>16&65535|0,a=0;while(0!==n){a=n>2e3?2e3:n,n-=a;do{i=i+e[r++]|0,o=o+i|0}while(--a);i%=65521,o%=65521}return i|o<<16|0}t.exports=r},c90b:function(t,e,n){(function(t,r,i){var o=n("a9f1"),a=n("3fb5"),s=n("3d1b"),l=e.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},u=e.IncomingMessage=function(e,n,a,l){var u=this;if(s.Readable.call(u),u._mode=a,u.headers={},u.rawHeaders=[],u.trailers={},u.rawTrailers=[],u.on("end",(function(){t.nextTick((function(){u.emit("close")}))})),"fetch"===a){if(u._fetchResponse=n,u.url=n.url,u.statusCode=n.status,u.statusMessage=n.statusText,n.headers.forEach((function(t,e){u.headers[e.toLowerCase()]=t,u.rawHeaders.push(e,t)})),o.writableStream){var c=new WritableStream({write:function(t){return new Promise((function(e,n){u._destroyed?n():u.push(new r(t))?e():u._resumeFetch=e}))},close:function(){i.clearTimeout(l),u._destroyed||u.push(null)},abort:function(t){u._destroyed||u.emit("error",t)}});try{return void n.body.pipeTo(c).catch((function(t){i.clearTimeout(l),u._destroyed||u.emit("error",t)}))}catch(m){}}var h=n.body.getReader();function d(){h.read().then((function(t){if(!u._destroyed){if(t.done)return i.clearTimeout(l),void u.push(null);u.push(new r(t.value)),d()}})).catch((function(t){i.clearTimeout(l),u._destroyed||u.emit("error",t)}))}d()}else{u._xhr=e,u._pos=0,u.url=e.responseURL,u.statusCode=e.status,u.statusMessage=e.statusText;var f=e.getAllResponseHeaders().split(/\r?\n/);if(f.forEach((function(t){var e=t.match(/^([^:]+):\s*(.*)/);if(e){var n=e[1].toLowerCase();"set-cookie"===n?(void 0===u.headers[n]&&(u.headers[n]=[]),u.headers[n].push(e[2])):void 0!==u.headers[n]?u.headers[n]+=", "+e[2]:u.headers[n]=e[2],u.rawHeaders.push(e[1],e[2])}})),u._charset="x-user-defined",!o.overrideMimeType){var p=u.rawHeaders["mime-type"];if(p){var g=p.match(/;\s*charset=([^;])(;|$)/);g&&(u._charset=g[1].toLowerCase())}u._charset||(u._charset="utf-8")}}};a(u,s.Readable),u.prototype._read=function(){var t=this,e=t._resumeFetch;e&&(t._resumeFetch=null,e())},u.prototype._onXHRProgress=function(){var t=this,e=t._xhr,n=null;switch(t._mode){case"text:vbarray":if(e.readyState!==l.DONE)break;try{n=new i.VBArray(e.responseBody).toArray()}catch(c){}if(null!==n){t.push(new r(n));break}case"text":try{n=e.responseText}catch(c){t._mode="text:vbarray";break}if(n.length>t._pos){var o=n.substr(t._pos);if("x-user-defined"===t._charset){for(var a=new r(o.length),s=0;s<o.length;s++)a[s]=255&o.charCodeAt(s);t.push(a)}else t.push(o,t._charset);t._pos=n.length}break;case"arraybuffer":if(e.readyState!==l.DONE||!e.response)break;n=e.response,t.push(new r(new Uint8Array(n)));break;case"moz-chunked-arraybuffer":if(n=e.response,e.readyState!==l.LOADING||!n)break;t.push(new r(new Uint8Array(n)));break;case"ms-stream":if(n=e.response,e.readyState!==l.LOADING)break;var u=new i.MSStreamReader;u.onprogress=function(){u.result.byteLength>t._pos&&(t.push(new r(new Uint8Array(u.result.slice(t._pos)))),t._pos=u.result.byteLength)},u.onload=function(){t.push(null)},u.readAsArrayBuffer(n);break}t._xhr.readyState===l.DONE&&"ms-stream"!==t._mode&&t.push(null)}}).call(this,n("4362"),n("b639").Buffer,n("c8ba"))},c94d:function(t,e,n){"use strict";n.r(e),n.d(e,"EPSILON",(function(){return r})),n.d(e,"ARRAY_TYPE",(function(){return i})),n.d(e,"RANDOM",(function(){return o})),n.d(e,"setMatrixArrayType",(function(){return a})),n.d(e,"toRadian",(function(){return l})),n.d(e,"equals",(function(){return u}));var r=1e-6,i="undefined"!==typeof Float32Array?Float32Array:Array,o=Math.random;function a(t){i=t}var s=Math.PI/180;function l(t){return t*s}function u(t,e){return Math.abs(t-e)<=r*Math.max(1,Math.abs(t),Math.abs(e))}Math.hypot||(Math.hypot=function(){var t=0,e=arguments.length;while(e--)t+=arguments[e]*arguments[e];return Math.sqrt(t)})},c973:function(t,e,n){function r(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(u){return void n(u)}s.done?e(l):Promise.resolve(l).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var a=t.apply(e,n);function s(t){r(a,i,o,s,l,"next",t)}function l(t){r(a,i,o,s,l,"throw",t)}s(void 0)}))}}n("d3b7"),t.exports=i,t.exports.__esModule=!0,t.exports["default"]=t.exports},c976:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["master_timeout","timeout","verify","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["repository"]){const t=new n("Missing required parameter: repository");return r(t,l)}if(null==t["body"]){const t=new n("Missing required parameter: body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,repository:d,...f}=t;f=i(o,a,f,u),null==c&&(c="PUT");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g="/_snapshot/"+encodeURIComponent(d);const m={method:c,path:g,body:h||"",querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},cab0:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["timeout","master_timeout","ignore_unavailable","allow_no_indices","expand_wildcards","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",ignoreUnavailable:"ignore_unavailable",allowNoIndices:"allow_no_indices",expandWildcards:"expand_wildcards",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["index"]){const t=new n("Missing required parameter: index");return r(t,l)}if(null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,...f}=t;f=i(o,a,f,u),null==c&&(c="POST");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g="/"+encodeURIComponent(d)+"/_close";const m={method:c,path:g,body:"",querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},cb77:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=1200,i=800,o=1e7,a=10,s=3.141592653589793,l=1.5707963267948966,u=.375*s,c=.625*s,h=new Map,d=10,f=10,p=.8,g=.1,m=.5;function y(t,e,n){var r=t.x-t.size[0]/2,i=t.y-t.size[1]/2,o=t.x+t.size[0]/2,a=t.y+t.size[1]/2,s=e.x-e.size[0]/2,h=e.y-e.size[1]/2,d=e.x+e.size[0]/2,f=e.y+e.size[1]/2,p=t.x,g=t.y,m=e.x,y=e.y,v=m-p,b=Math.atan2(v,y-g),_=0,x=0,w=0,S=0;b>l?(x=i-f,_=s-o,w=parseFloat(x?(x/Math.cos(b)).toFixed(2):_.toFixed(2)),S=parseFloat(_?(_/Math.sin(b)).toFixed(2):x.toFixed(2))):0<b&&b<=l?(x=h-a,_=s-o,w=S=x>_?parseFloat(x?(x/Math.cos(b)).toFixed(2):_.toFixed(2)):parseFloat(_?(_/Math.sin(b)).toFixed(2):x.toFixed(2))):b<-l?(x=i-f,_=-(d-r),w=S=x>_?parseFloat(x?(x/Math.cos(b)).toFixed(2):_.toFixed(2)):parseFloat(_?(_/Math.sin(b)).toFixed(2):x.toFixed(2))):(x=h-a,_=Math.abs(v)>(o-r)/2?r-d:v,w=S=x>_?parseFloat(x?(x/Math.cos(b)).toFixed(2):_.toFixed(2)):parseFloat(_&&0!==b?(_/Math.sin(b)).toFixed(2):x.toFixed(2)));var E=parseFloat(b.toFixed(2)),C=n;return n&&(C=u<E&&E<c),{distance:Math.abs(w<S?w:S),isHoriz:C}}function v(t,e){var n=h.get(t.id)||[],r=n.find((function(t){return t.source===e.id||t.target===e.id})),i=t.size[0]*t.size[1],s=e.size[0]*e.size[1],l=i>s?e:t,u=i>s?t:e,c=l.x-l.size[0]/2,d=l.y-l.size[1]/2,f=l.x+l.size[0]/2,p=l.y+l.size[1]/2,g=u.x-u.size[0]/2,m=u.y-u.size[1]/2,v=u.x+u.size[0]/2,b=u.y+u.size[1]/2,_=l.x,x=l.y,w=u.x,S=u.y,E=f>=g&&v>=c&&p>=m&&b>=d,C=0,M=0;if(E){M=Math.sqrt(Math.pow(w-_,2)+Math.pow(S-x,2));var T=c>g?c:g,A=d>m?d:m,O=f<v?f:v,k=p<b?p:b,I=O-T,P=k-A,L=I*P;0===M&&(M=1e-7),C=1*a/M*100+L,C*=o}else{var N=!1,R=y(l,u,N);M=R.distance,N=R.isHoriz,M<=a?C+=0!==M?r?a+1*o/M:a+o*a/M:o:(C+=M,r&&(C+=M*M))}return C}function b(t){for(var e=0,n=0;n<t.length;n++){var o=t[n];(o.x<0||o.y<0||o.x>r||o.y>i)&&(e+=1e12);for(var a=n+1;a<t.length;a++)e+=v(o,t[a])}return e}function _(t,e,n,r){var i=new Map;n.forEach((function(t,e){i.set(t.id,t)}));var o=r.filter((function(e){return e.source===t.id||e.target===t.id}))||[],a=[];o.forEach((function(e){var n=e.source===t.id?e.target:e.source,r=i.get(n);r&&a.push(r)}));for(var s=!0,l=0;l<a.length;l++){var u=a[l],c=180*Math.atan((t.y-u.y)/(u.x-t.y)),h=180*Math.atan((e.y-u.y)/(u.x-e.y)),d=c<30||c>150,f=h<30||h>150,p=c>70&&c<110,g=h>70&&h<110;if(d&&!f||c*h<0){s=!1;break}if(p&&!g||c*h<0){s=!1;break}if((u.x-t.x)*(u.x-e.x)<0){s=!1;break}if((u.y-t.y)*(u.y-e.y)<0){s=!1;break}}return s}function x(t,e){for(var n=!1,r=1,i=d*r,o=f*r,a=[i,-i,0,0],s=[0,0,o,-o],l=0;l<t.length;++l)for(var u=t[l],c=w(u,t),h=0;h<a.length;h++){var y=_(u,{x:u.x+a[h],y:u.y+s[h]},t,e);if(y){u.x+=a[h],u.y+=s[h];var v=w(u,t),x=Math.random();v<c||x<p&&x>g?(c=v,n=!0):(u.x-=a[h],u.y-=s[h])}}return p>g&&(p*=m),n?b(t):0}function w(t,e){var n=0;(t.x<0||t.y<0||t.x+t.size[0]+20>r||t.y+t.size[1]+20>i)&&(n+=1e12);for(var o=0;o<e.length;++o)t.id!==e[o].id&&(n+=v(t,e[o]));return n}function S(t,e){if(0===t.length)return{nodes:t,edges:e};t.forEach((function(t){var n=e.filter((function(e){return e.source===t.id||e.target===t.id}));h.set(t,n)})),t.sort((function(t,e){var n,r;return(null===(n=h.get(t.id))||void 0===n?void 0:n.length)-(null===(r=h.get(e.id))||void 0===r?void 0:r.length)}));var n=b(t),r=20,i=1,o=0,a=50,s=0;while(r>0){if(s++,s>=a)break;var l=x(t,e);0!==l&&(o=l),i=o-n,n=o,0===i?--r:r=20}return t.forEach((function(t){t.x=t.x-t.size[0]/2,t.y=t.y-t.size[1]/2})),{nodes:t,edges:e}}e.default=S},ccaf:function(t,e,n){"use strict";var r=n("9ab4"),i=n("8937"),o=n("e897"),a=n("b2cb"),s=n("6928"),l=n("2e60"),u=o["a"].transform,c="matrix",h=["zIndex","capture","visible","type"],d=["repeat"],f=":",p="*";function g(t){for(var e=[],n=0;n<t.length;n++)Object(i["isArray"])(t[n])?e.push([].concat(t[n])):e.push(t[n]);return e}function m(t,e){var n={},r=e.attrs;for(var i in t)n[i]=r[i];return n}function y(t,e){var n={},r=e.attr();return Object(i["each"])(t,(function(t,e){-1!==d.indexOf(e)||Object(i["isEqual"])(r[e],t)||(n[e]=t)})),n}function v(t,e){if(e.onFrame)return t;var n=e.startTime,r=e.delay,o=e.duration,a=Object.prototype.hasOwnProperty;return Object(i["each"])(t,(function(t){n+r<t.startTime+t.delay+t.duration&&o>t.delay&&Object(i["each"])(e.toAttrs,(function(e,n){a.call(t.toAttrs,n)&&(delete t.toAttrs[n],delete t.fromAttrs[n])}))})),t}var b=function(t){function e(e){var n=t.call(this,e)||this;n.attrs={};var r=n.getDefaultAttrs();return Object(i["mix"])(r,e.attrs),n.attrs=r,n.initAttrs(r),n.initAnimate(),n}return Object(r["__extends"])(e,t),e.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},e.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},e.prototype.onCanvasChange=function(t){},e.prototype.initAttrs=function(t){},e.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},e.prototype.isGroup=function(){return!1},e.prototype.getParent=function(){return this.get("parent")},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.attr=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0],o=e[1];if(!r)return this.attrs;if(Object(i["isObject"])(r)){for(var a in r)this.setAttr(a,r[a]);return this.afterAttrsChange(r),this}return 2===e.length?(this.setAttr(r,o),this.afterAttrsChange((t={},t[r]=o,t)),this):this.attrs[r]},e.prototype.isClipped=function(t,e){var n=this.getClip();return n&&!n.isHit(t,e)},e.prototype.setAttr=function(t,e){var n=this.attrs[t];n!==e&&(this.attrs[t]=e,this.onAttrChange(t,e,n))},e.prototype.onAttrChange=function(t,e,n){"matrix"===t&&this.set("totalMatrix",null)},e.prototype.afterAttrsChange=function(t){if(this.cfg.isClipShape){var e=this.cfg.applyTo;e&&e.onCanvasChange("clip")}else this.onCanvasChange("attr")},e.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},e.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},e.prototype.setZIndex=function(t){this.set("zIndex",t);var e=this.getParent();return e&&e.sort(),this},e.prototype.toFront=function(){var t=this.getParent();if(t){var e=t.getChildren(),n=(this.get("el"),e.indexOf(this));e.splice(n,1),e.push(this),this.onCanvasChange("zIndex")}},e.prototype.toBack=function(){var t=this.getParent();if(t){var e=t.getChildren(),n=(this.get("el"),e.indexOf(this));e.splice(n,1),e.unshift(this),this.onCanvasChange("zIndex")}},e.prototype.remove=function(t){void 0===t&&(t=!0);var e=this.getParent();e?(Object(a["j"])(e.getChildren(),this),e.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),t&&this.destroy()},e.prototype.resetMatrix=function(){this.attr(c,this.getDefaultMatrix()),this.onCanvasChange("matrix")},e.prototype.getMatrix=function(){return this.attr(c)},e.prototype.setMatrix=function(t){this.attr(c,t),this.onCanvasChange("matrix")},e.prototype.getTotalMatrix=function(){var t=this.cfg.totalMatrix;if(!t){var e=this.attr("matrix"),n=this.cfg.parentMatrix;t=n&&e?Object(s["b"])(n,e):e||n,this.set("totalMatrix",t)}return t},e.prototype.applyMatrix=function(t){var e=this.attr("matrix"),n=null;n=t&&e?Object(s["b"])(t,e):e||t,this.set("totalMatrix",n),this.set("parentMatrix",t)},e.prototype.getDefaultMatrix=function(){return null},e.prototype.applyToMatrix=function(t){var e=this.attr("matrix");return e?Object(s["c"])(e,t):t},e.prototype.invertFromMatrix=function(t){var e=this.attr("matrix");if(e){var n=Object(s["a"])(e);if(n)return Object(s["c"])(n,t)}return t},e.prototype.setClip=function(t){var e=this.getCanvas(),n=null;if(t){var r=this.getShapeBase(),o=Object(i["upperFirst"])(t.type),a=r[o];a&&(n=new a({type:t.type,isClipShape:!0,applyTo:this,attrs:t.attrs,canvas:e}))}return this.set("clipShape",n),this.onCanvasChange("clip"),n},e.prototype.getClip=function(){var t=this.cfg.clipShape;return t||null},e.prototype.clone=function(){var t=this,e=this.attrs,n={};Object(i["each"])(e,(function(t,r){Object(i["isArray"])(e[r])?n[r]=g(e[r]):n[r]=e[r]}));var r=this.constructor,o=new r({attrs:n});return Object(i["each"])(h,(function(e){o.set(e,t.get(e))})),o},e.prototype.destroy=function(){var e=this.destroyed;e||(this.attrs={},t.prototype.destroy.call(this))},e.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},e.prototype.animate=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this.get("timeline")||this.get("canvas")){this.set("animating",!0);var n=this.get("timeline");n||(n=this.get("canvas").get("timeline"),this.set("timeline",n));var r=this.get("animations")||[];n.timer||n.initTimer();var o,a,s,l,u,c=t[0],h=t[1],d=t[2],f=void 0===d?"easeLinear":d,p=t[3],g=void 0===p?i["noop"]:p,b=t[4],_=void 0===b?0:b;Object(i["isFunction"])(c)?(o=c,c={}):Object(i["isObject"])(c)&&c.onFrame&&(o=c.onFrame,a=c.repeat),Object(i["isObject"])(h)?(u=h,h=u.duration,f=u.easing||"easeLinear",_=u.delay||0,a=u.repeat||a||!1,g=u.callback||i["noop"],s=u.pauseCallback||i["noop"],l=u.resumeCallback||i["noop"]):(Object(i["isNumber"])(g)&&(_=g,g=null),Object(i["isFunction"])(f)?(g=f,f="easeLinear"):f=f||"easeLinear");var x=y(c,this),w={fromAttrs:m(x,this),toAttrs:x,duration:h,easing:f,repeat:a,callback:g,pauseCallback:s,resumeCallback:l,delay:_,startTime:n.getTime(),id:Object(i["uniqueId"])(),onFrame:o,pathFormatted:!1};r.length>0?r=v(r,w):n.addAnimator(this),r.push(w),this.set("animations",r),this.set("_pause",{isPaused:!1})}},e.prototype.stopAnimate=function(t){var e=this;void 0===t&&(t=!0);var n=this.get("animations");Object(i["each"])(n,(function(n){t&&(n.onFrame?e.attr(n.onFrame(1)):e.attr(n.toAttrs)),n.callback&&n.callback()})),this.set("animating",!1),this.set("animations",[])},e.prototype.pauseAnimate=function(){var t=this.get("timeline"),e=this.get("animations"),n=t.getTime();return Object(i["each"])(e,(function(t){t._paused=!0,t._pauseTime=n,t.pauseCallback&&t.pauseCallback()})),this.set("_pause",{isPaused:!0,pauseTime:n}),this},e.prototype.resumeAnimate=function(){var t=this.get("timeline"),e=t.getTime(),n=this.get("animations"),r=this.get("_pause").pauseTime;return Object(i["each"])(n,(function(t){t.startTime=t.startTime+(e-r),t._paused=!1,t._pauseTime=null,t.resumeCallback&&t.resumeCallback()})),this.set("_pause",{isPaused:!1}),this.set("animations",n),this},e.prototype.emitDelegation=function(t,e){var n,r=this,o=e.propagationPath;this.getEvents();"mouseenter"===t?n=e.fromShape:"mouseleave"===t&&(n=e.toShape);for(var s=function(t){var s=o[t],u=s.get("name");if(u){if((s.isGroup()||s.isCanvas&&s.isCanvas())&&n&&Object(a["g"])(s,n))return"break";Object(i["isArray"])(u)?Object(i["each"])(u,(function(t){r.emitDelegateEvent(s,t,e)})):l.emitDelegateEvent(s,u,e)}},l=this,u=0;u<o.length;u++){var c=s(u);if("break"===c)break}},e.prototype.emitDelegateEvent=function(t,e,n){var r=this.getEvents(),i=e+f+n.type;(r[i]||r[p])&&(n.name=i,n.currentTarget=t,n.delegateTarget=this,n.delegateObject=t.get("delegateObject"),this.emit(i,n))},e.prototype.translate=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var n=this.getMatrix(),r=u(n,[["t",t,e]]);return this.setMatrix(r),this},e.prototype.move=function(t,e){var n=this.attr("x")||0,r=this.attr("y")||0;return this.translate(t-n,e-r),this},e.prototype.moveTo=function(t,e){return this.move(t,e)},e.prototype.scale=function(t,e){var n=this.getMatrix(),r=u(n,[["s",t,e||t]]);return this.setMatrix(r),this},e.prototype.rotate=function(t){var e=this.getMatrix(),n=u(e,[["r",t]]);return this.setMatrix(n),this},e.prototype.rotateAtStart=function(t){var e=this.attr(),n=e.x,r=e.y,i=this.getMatrix(),o=u(i,[["t",-n,-r],["r",t],["t",n,r]]);return this.setMatrix(o),this},e.prototype.rotateAtPoint=function(t,e,n){var r=this.getMatrix(),i=u(r,[["t",-t,-e],["r",n],["t",t,e]]);return this.setMatrix(i),this},e}(l["a"]);e["a"]=b},ccb2:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t["default"]=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ForceLayout=void 0;var l=a(n("0a4a")),u=s(n("aaf2")),c=n("f271"),h=n("5bc9"),d=n("3888"),f=function(t){function e(e){var n=t.call(this)||this;return n.center=[0,0],n.nodeStrength=null,n.edgeStrength=null,n.preventOverlap=!1,n.clusterNodeStrength=null,n.clusterEdgeStrength=null,n.clusterEdgeDistance=null,n.clusterNodeSize=null,n.clusterFociStrength=null,n.linkDistance=50,n.alphaDecay=.028,n.alphaMin=.001,n.alpha=.3,n.collideStrength=1,n.workerEnabled=!1,n.tick=function(){},n.onLayoutEnd=function(){},n.ticking=void 0,e&&n.updateCfg(e),n}return r(e,t),e.prototype.getDefaultCfg=function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}},e.prototype.init=function(t){var e=this;e.nodes=t.nodes||[];var n=t.edges||[];e.edges=n.map((function(t){var e={},n=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(t).forEach((function(r){n.indexOf(r)>-1||(e[r]=t[r])})),e})),e.ticking=!1},e.prototype.execute=function(t){var e=this,n=e.nodes,r=e.edges;if(!e.ticking){var i=e.forceSimulation,o=e.alphaMin,a=e.alphaDecay,s=e.alpha;if(i){if(t)if(e.clustering&&e.clusterForce&&(e.clusterForce.nodes(n),e.clusterForce.links(r)),i.nodes(n),r&&e.edgeForce)e.edgeForce.links(r);else if(r&&!e.edgeForce){f=l.forceLink().id((function(t){return t.id})).links(r);e.edgeStrength&&f.strength(e.edgeStrength),e.linkDistance&&f.distance(e.linkDistance),e.edgeForce=f,i.force("link",f)}e.preventOverlap&&e.overlapProcess(i),i.alpha(s).restart(),this.ticking=!0}else try{var c=l.forceManyBody();if(e.nodeStrength&&c.strength(e.nodeStrength),i=l.forceSimulation().nodes(n),e.clustering){var h=(0,u.default)();h.centerX(e.center[0]).centerY(e.center[1]).template("force").strength(e.clusterFociStrength),r&&h.links(r),n&&h.nodes(n),h.forceLinkDistance(e.clusterEdgeDistance).forceLinkStrength(e.clusterEdgeStrength).forceCharge(e.clusterNodeStrength).forceNodeSize(e.clusterNodeSize),e.clusterForce=h,i.force("group",h)}if(i.force("center",l.forceCenter(e.center[0],e.center[1])).force("charge",c).alpha(s).alphaDecay(a).alphaMin(o),e.preventOverlap&&e.overlapProcess(i),r){var f=l.forceLink().id((function(t){return t.id})).links(r);e.edgeStrength&&f.strength(e.edgeStrength),e.linkDistance&&f.distance(e.linkDistance),e.edgeForce=f,i.force("link",f)}if(e.workerEnabled&&!g()&&(e.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),e.workerEnabled){i.stop();for(var m=p(i),y=1;y<=m;y++)i.tick(),postMessage({nodes:n,currentTick:y,totalTicks:m,type:d.LAYOUT_MESSAGE.TICK},void 0);e.ticking=!1}else i.on("tick",(function(){e.tick()})).on("end",(function(){e.ticking=!1,e.onLayoutEnd&&e.onLayoutEnd()})),e.ticking=!0;e.forceSimulation=i,e.ticking=!0}catch(v){e.ticking=!1,console.warn(v)}}},e.prototype.overlapProcess=function(t){var e,n,r=this,i=r.nodeSize,o=r.nodeSpacing,a=r.collideStrength;if(n=(0,c.isNumber)(o)?function(){return o}:(0,c.isFunction)(o)?o:function(){return 0},i)if((0,c.isFunction)(i))e=function(t){var e=i(t);return e+n(t)};else if((0,c.isArray)(i)){var s=i[0]>i[1]?i[0]:i[1],u=s/2;e=function(t){return u+n(t)}}else if((0,c.isNumber)(i)){var h=i/2;e=function(t){return h+n(t)}}else e=function(){return 10};else e=function(t){if(t.size){if((0,c.isArray)(t.size)){var e=t.size[0]>t.size[1]?t.size[0]:t.size[1];return e/2+n(t)}if((0,c.isObject)(t.size)){e=t.size.width>t.size.height?t.size.width:t.size.height;return e/2+n(t)}return t.size/2+n(t)}return 10+n(t)};t.force("collisionForce",l.forceCollide(e).strength(a))},e.prototype.updateCfg=function(t){var e=this;e.ticking&&(e.forceSimulation.stop(),e.ticking=!1),e.forceSimulation=null,Object.assign(e,t)},e.prototype.destroy=function(){var t=this;t.ticking&&(t.forceSimulation.stop(),t.ticking=!1),t.nodes=null,t.edges=null,t.destroyed=!0},e}(h.Base);function p(t){var e=t.alphaMin(),n=t.alphaTarget(),r=t.alpha(),i=Math.log((e-n)/(r-n))/Math.log(1-t.alphaDecay()),o=Math.ceil(i);return o}function g(){return"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}e.ForceLayout=f},ccec:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.ERLayout=e.ForceAtlas2Layout=e.ComboCombinedLayout=e.ComboForceLayout=e.GForceGPULayout=e.FruchtermanGPULayout=e.FruchtermanLayout=e.MDSLayout=e.ConcentricLayout=e.RadialLayout=e.DagreCompoundLayout=e.DagreLayout=e.CircularLayout=e.ForceLayout=e.Force2Layout=e.GForceLayout=e.RandomLayout=e.GridLayout=e.Layouts=e.Layout=void 0;var o=n("9a24");Object.defineProperty(e,"GridLayout",{enumerable:!0,get:function(){return o.GridLayout}});var a=n("4da8");Object.defineProperty(e,"RandomLayout",{enumerable:!0,get:function(){return a.RandomLayout}});var s=n("aac1");Object.defineProperty(e,"GForceLayout",{enumerable:!0,get:function(){return s.GForceLayout}});var l=n("8b72");Object.defineProperty(e,"Force2Layout",{enumerable:!0,get:function(){return l.Force2Layout}});var u=n("4d1a");Object.defineProperty(e,"ForceLayout",{enumerable:!0,get:function(){return u.ForceLayout}});var c=n("7c66");Object.defineProperty(e,"CircularLayout",{enumerable:!0,get:function(){return c.CircularLayout}});var h=n("13d2e");Object.defineProperty(e,"DagreLayout",{enumerable:!0,get:function(){return h.DagreLayout}});var d=n("3c0e");Object.defineProperty(e,"DagreCompoundLayout",{enumerable:!0,get:function(){return d.DagreCompoundLayout}});var f=n("634b");Object.defineProperty(e,"RadialLayout",{enumerable:!0,get:function(){return f.RadialLayout}});var p=n("455a");Object.defineProperty(e,"ConcentricLayout",{enumerable:!0,get:function(){return p.ConcentricLayout}});var g=n("82cc");Object.defineProperty(e,"MDSLayout",{enumerable:!0,get:function(){return g.MDSLayout}});var m=n("fa97");Object.defineProperty(e,"FruchtermanLayout",{enumerable:!0,get:function(){return m.FruchtermanLayout}});var y=n("077d");Object.defineProperty(e,"FruchtermanGPULayout",{enumerable:!0,get:function(){return y.FruchtermanGPULayout}});var v=n("0376");Object.defineProperty(e,"GForceGPULayout",{enumerable:!0,get:function(){return v.GForceGPULayout}});var b=n("c7ea");Object.defineProperty(e,"ComboForceLayout",{enumerable:!0,get:function(){return b.ComboForceLayout}});var _=n("7d0a");Object.defineProperty(e,"ComboCombinedLayout",{enumerable:!0,get:function(){return _.ComboCombinedLayout}});var x=n("0717");Object.defineProperty(e,"ForceAtlas2Layout",{enumerable:!0,get:function(){return x.ForceAtlas2Layout}});var w=n("927c");Object.defineProperty(e,"ERLayout",{enumerable:!0,get:function(){return w.ERLayout}});var S=n("4e2a");Object.defineProperty(e,"Layout",{enumerable:!0,get:function(){return S.Layout}}),Object.defineProperty(e,"Layouts",{enumerable:!0,get:function(){return S.Layouts}}),i(n("b3ea"),e)},cd3f:function(t,e,n){(function(t,n){var r=200,i="__lodash_hash_undefined__",o=9007199254740991,a="[object Arguments]",s="[object Array]",l="[object Boolean]",u="[object Date]",c="[object Error]",h="[object Function]",d="[object GeneratorFunction]",f="[object Map]",p="[object Number]",g="[object Object]",m="[object Promise]",y="[object RegExp]",v="[object Set]",b="[object String]",_="[object Symbol]",x="[object WeakMap]",w="[object ArrayBuffer]",S="[object DataView]",E="[object Float32Array]",C="[object Float64Array]",M="[object Int8Array]",T="[object Int16Array]",A="[object Int32Array]",O="[object Uint8Array]",k="[object Uint8ClampedArray]",I="[object Uint16Array]",P="[object Uint32Array]",L=/[\\^$.*+?()[\]{}|]/g,N=/\w*$/,R=/^\[object .+?Constructor\]$/,D=/^(?:0|[1-9]\d*)$/,F={};F[a]=F[s]=F[w]=F[S]=F[l]=F[u]=F[E]=F[C]=F[M]=F[T]=F[A]=F[f]=F[p]=F[g]=F[y]=F[v]=F[b]=F[_]=F[O]=F[k]=F[I]=F[P]=!0,F[c]=F[h]=F[x]=!1;var j="object"==typeof t&&t&&t.Object===Object&&t,B="object"==typeof self&&self&&self.Object===Object&&self,z=j||B||Function("return this")(),U=e&&!e.nodeType&&e,G=U&&"object"==typeof n&&n&&!n.nodeType&&n,q=G&&G.exports===U;function V(t,e){return t.set(e[0],e[1]),t}function H(t,e){return t.add(e),t}function W(t,e){var n=-1,r=t?t.length:0;while(++n<r)if(!1===e(t[n],n,t))break;return t}function Y(t,e){var n=-1,r=e.length,i=t.length;while(++n<r)t[i+n]=e[n];return t}function X(t,e,n,r){var i=-1,o=t?t.length:0;r&&o&&(n=t[++i]);while(++i<o)n=e(n,t[i],i,t);return n}function J(t,e){var n=-1,r=Array(t);while(++n<t)r[n]=e(n);return r}function Z(t,e){return null==t?void 0:t[e]}function K(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(n){}return e}function Q(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function $(t,e){return function(n){return t(e(n))}}function tt(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var et=Array.prototype,nt=Function.prototype,rt=Object.prototype,it=z["__core-js_shared__"],ot=function(){var t=/[^.]+$/.exec(it&&it.keys&&it.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),at=nt.toString,st=rt.hasOwnProperty,lt=rt.toString,ut=RegExp("^"+at.call(st).replace(L,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ct=q?z.Buffer:void 0,ht=z.Symbol,dt=z.Uint8Array,ft=$(Object.getPrototypeOf,Object),pt=Object.create,gt=rt.propertyIsEnumerable,mt=et.splice,yt=Object.getOwnPropertySymbols,vt=ct?ct.isBuffer:void 0,bt=$(Object.keys,Object),_t=Me(z,"DataView"),xt=Me(z,"Map"),wt=Me(z,"Promise"),St=Me(z,"Set"),Et=Me(z,"WeakMap"),Ct=Me(Object,"create"),Mt=De(_t),Tt=De(xt),At=De(wt),Ot=De(St),kt=De(Et),It=ht?ht.prototype:void 0,Pt=It?It.valueOf:void 0;function Lt(t){var e=-1,n=t?t.length:0;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function Nt(){this.__data__=Ct?Ct(null):{}}function Rt(t){return this.has(t)&&delete this.__data__[t]}function Dt(t){var e=this.__data__;if(Ct){var n=e[t];return n===i?void 0:n}return st.call(e,t)?e[t]:void 0}function Ft(t){var e=this.__data__;return Ct?void 0!==e[t]:st.call(e,t)}function jt(t,e){var n=this.__data__;return n[t]=Ct&&void 0===e?i:e,this}function Bt(t){var e=-1,n=t?t.length:0;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function zt(){this.__data__=[]}function Ut(t){var e=this.__data__,n=oe(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():mt.call(e,n,1),!0}function Gt(t){var e=this.__data__,n=oe(e,t);return n<0?void 0:e[n][1]}function qt(t){return oe(this.__data__,t)>-1}function Vt(t,e){var n=this.__data__,r=oe(n,t);return r<0?n.push([t,e]):n[r][1]=e,this}function Ht(t){var e=-1,n=t?t.length:0;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function Wt(){this.__data__={hash:new Lt,map:new(xt||Bt),string:new Lt}}function Yt(t){return Ce(this,t)["delete"](t)}function Xt(t){return Ce(this,t).get(t)}function Jt(t){return Ce(this,t).has(t)}function Zt(t,e){return Ce(this,t).set(t,e),this}function Kt(t){this.__data__=new Bt(t)}function Qt(){this.__data__=new Bt}function $t(t){return this.__data__["delete"](t)}function te(t){return this.__data__.get(t)}function ee(t){return this.__data__.has(t)}function ne(t,e){var n=this.__data__;if(n instanceof Bt){var i=n.__data__;if(!xt||i.length<r-1)return i.push([t,e]),this;n=this.__data__=new Ht(i)}return n.set(t,e),this}function re(t,e){var n=ze(t)||Be(t)?J(t.length,String):[],r=n.length,i=!!r;for(var o in t)!e&&!st.call(t,o)||i&&("length"==o||Pe(o,r))||n.push(o);return n}function ie(t,e,n){var r=t[e];st.call(t,e)&&je(r,n)&&(void 0!==n||e in t)||(t[e]=n)}function oe(t,e){var n=t.length;while(n--)if(je(t[n][0],e))return n;return-1}function ae(t,e){return t&&we(e,Xe(e),t)}function se(t,e,n,r,i,o,s){var l;if(r&&(l=o?r(t,i,o,s):r(t)),void 0!==l)return l;if(!We(t))return t;var u=ze(t);if(u){if(l=Oe(t),!e)return xe(t,l)}else{var c=Ae(t),f=c==h||c==d;if(qe(t))return fe(t,e);if(c==g||c==a||f&&!o){if(K(t))return o?t:{};if(l=ke(f?{}:t),!e)return Se(t,ae(l,t))}else{if(!F[c])return o?t:{};l=Ie(t,c,se,e)}}s||(s=new Kt);var p=s.get(t);if(p)return p;if(s.set(t,l),!u)var m=n?Ee(t):Xe(t);return W(m||t,(function(i,o){m&&(o=i,i=t[o]),ie(l,o,se(i,e,n,r,o,t,s))})),l}function le(t){return We(t)?pt(t):{}}function ue(t,e,n){var r=e(t);return ze(t)?r:Y(r,n(t))}function ce(t){return lt.call(t)}function he(t){if(!We(t)||Ne(t))return!1;var e=Ve(t)||K(t)?ut:R;return e.test(De(t))}function de(t){if(!Re(t))return bt(t);var e=[];for(var n in Object(t))st.call(t,n)&&"constructor"!=n&&e.push(n);return e}function fe(t,e){if(e)return t.slice();var n=new t.constructor(t.length);return t.copy(n),n}function pe(t){var e=new t.constructor(t.byteLength);return new dt(e).set(new dt(t)),e}function ge(t,e){var n=e?pe(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function me(t,e,n){var r=e?n(Q(t),!0):Q(t);return X(r,V,new t.constructor)}function ye(t){var e=new t.constructor(t.source,N.exec(t));return e.lastIndex=t.lastIndex,e}function ve(t,e,n){var r=e?n(tt(t),!0):tt(t);return X(r,H,new t.constructor)}function be(t){return Pt?Object(Pt.call(t)):{}}function _e(t,e){var n=e?pe(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function xe(t,e){var n=-1,r=t.length;e||(e=Array(r));while(++n<r)e[n]=t[n];return e}function we(t,e,n,r){n||(n={});var i=-1,o=e.length;while(++i<o){var a=e[i],s=r?r(n[a],t[a],a,n,t):void 0;ie(n,a,void 0===s?t[a]:s)}return n}function Se(t,e){return we(t,Te(t),e)}function Ee(t){return ue(t,Xe,Te)}function Ce(t,e){var n=t.__data__;return Le(e)?n["string"==typeof e?"string":"hash"]:n.map}function Me(t,e){var n=Z(t,e);return he(n)?n:void 0}Lt.prototype.clear=Nt,Lt.prototype["delete"]=Rt,Lt.prototype.get=Dt,Lt.prototype.has=Ft,Lt.prototype.set=jt,Bt.prototype.clear=zt,Bt.prototype["delete"]=Ut,Bt.prototype.get=Gt,Bt.prototype.has=qt,Bt.prototype.set=Vt,Ht.prototype.clear=Wt,Ht.prototype["delete"]=Yt,Ht.prototype.get=Xt,Ht.prototype.has=Jt,Ht.prototype.set=Zt,Kt.prototype.clear=Qt,Kt.prototype["delete"]=$t,Kt.prototype.get=te,Kt.prototype.has=ee,Kt.prototype.set=ne;var Te=yt?$(yt,Object):Je,Ae=ce;function Oe(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&st.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function ke(t){return"function"!=typeof t.constructor||Re(t)?{}:le(ft(t))}function Ie(t,e,n,r){var i=t.constructor;switch(e){case w:return pe(t);case l:case u:return new i(+t);case S:return ge(t,r);case E:case C:case M:case T:case A:case O:case k:case I:case P:return _e(t,r);case f:return me(t,r,n);case p:case b:return new i(t);case y:return ye(t);case v:return ve(t,r,n);case _:return be(t)}}function Pe(t,e){return e=null==e?o:e,!!e&&("number"==typeof t||D.test(t))&&t>-1&&t%1==0&&t<e}function Le(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Ne(t){return!!ot&&ot in t}function Re(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||rt;return t===n}function De(t){if(null!=t){try{return at.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Fe(t){return se(t,!0,!0)}function je(t,e){return t===e||t!==t&&e!==e}function Be(t){return Ge(t)&&st.call(t,"callee")&&(!gt.call(t,"callee")||lt.call(t)==a)}(_t&&Ae(new _t(new ArrayBuffer(1)))!=S||xt&&Ae(new xt)!=f||wt&&Ae(wt.resolve())!=m||St&&Ae(new St)!=v||Et&&Ae(new Et)!=x)&&(Ae=function(t){var e=lt.call(t),n=e==g?t.constructor:void 0,r=n?De(n):void 0;if(r)switch(r){case Mt:return S;case Tt:return f;case At:return m;case Ot:return v;case kt:return x}return e});var ze=Array.isArray;function Ue(t){return null!=t&&He(t.length)&&!Ve(t)}function Ge(t){return Ye(t)&&Ue(t)}var qe=vt||Ze;function Ve(t){var e=We(t)?lt.call(t):"";return e==h||e==d}function He(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=o}function We(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Ye(t){return!!t&&"object"==typeof t}function Xe(t){return Ue(t)?re(t):de(t)}function Je(){return[]}function Ze(){return!1}n.exports=Fe}).call(this,n("c8ba"),n("62e4")(t))},cd9a:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["format","bytes","local","master_timeout","h","help","s","v","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,...f}=t;f=i(o,a,f,u),null==c&&(c="GET");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g=null!=d?"/_cat/shards/"+encodeURIComponent(d):"/_cat/shards";const m={method:c,path:g,body:null,querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},cfa1:function(t,e,n){"use strict";n.d(e,"a",(function(){return x}));var r=function(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return i(this.cover(e,n),e,n,t)};function i(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,a,s,l,u,c,h,d,f=t._root,p={data:r},g=t._x0,m=t._y0,y=t._x1,v=t._y1;if(!f)return t._root=p,t;while(f.length)if((u=e>=(o=(g+y)/2))?g=o:y=o,(c=n>=(a=(m+v)/2))?m=a:v=a,i=f,!(f=f[h=c<<1|u]))return i[h]=p,t;if(s=+t._x.call(null,f.data),l=+t._y.call(null,f.data),e===s&&n===l)return p.next=f,i?i[h]=p:t._root=p,t;do{i=i?i[h]=new Array(4):t._root=new Array(4),(u=e>=(o=(g+y)/2))?g=o:y=o,(c=n>=(a=(m+v)/2))?m=a:v=a}while((h=c<<1|u)===(d=(l>=a)<<1|s>=o));return i[d]=f,i[h]=p,t}function o(t){var e,n,r,o,a=t.length,s=new Array(a),l=new Array(a),u=1/0,c=1/0,h=-1/0,d=-1/0;for(n=0;n<a;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(s[n]=r,l[n]=o,r<u&&(u=r),r>h&&(h=r),o<c&&(c=o),o>d&&(d=o));if(u>h||c>d)return this;for(this.cover(u,c).cover(h,d),n=0;n<a;++n)i(this,s[n],l[n],t[n]);return this}var a=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{var a,s,l=i-n||1,u=this._root;while(n>t||t>=i||r>e||e>=o)switch(s=(e<r)<<1|t<n,a=new Array(4),a[s]=u,u=a,l*=2,s){case 0:i=n+l,o=r+l;break;case 1:n=i-l,o=r+l;break;case 2:i=n+l,r=o-l;break;case 3:n=i-l,r=o-l;break}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},s=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},l=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},u=function(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i},c=function(t,e,n){var r,i,o,a,s,l,c,h=this._x0,d=this._y0,f=this._x1,p=this._y1,g=[],m=this._root;m&&g.push(new u(m,h,d,f,p)),null==n?n=1/0:(h=t-n,d=e-n,f=t+n,p=e+n,n*=n);while(l=g.pop())if(!(!(m=l.node)||(i=l.x0)>f||(o=l.y0)>p||(a=l.x1)<h||(s=l.y1)<d))if(m.length){var y=(i+a)/2,v=(o+s)/2;g.push(new u(m[3],y,v,a,s),new u(m[2],i,v,y,s),new u(m[1],y,o,a,v),new u(m[0],i,o,y,v)),(c=(e>=v)<<1|t>=y)&&(l=g[g.length-1],g[g.length-1]=g[g.length-1-c],g[g.length-1-c]=l)}else{var b=t-+this._x.call(null,m.data),_=e-+this._y.call(null,m.data),x=b*b+_*_;if(x<n){var w=Math.sqrt(n=x);h=t-w,d=e-w,f=t+w,p=e+w,r=m.data}}return r},h=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,i,o,a,s,l,u,c,h,d,f=this._root,p=this._x0,g=this._y0,m=this._x1,y=this._y1;if(!f)return this;if(f.length)while(1){if((u=o>=(s=(p+m)/2))?p=s:m=s,(c=a>=(l=(g+y)/2))?g=l:y=l,e=f,!(f=f[h=c<<1|u]))return this;if(!f.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,d=h)}while(f.data!==t)if(r=f,!(f=f.next))return this;return(i=f.next)&&delete f.next,r?(i?r.next=i:delete r.next,this):e?(i?e[h]=i:delete e[h],(f=e[0]||e[1]||e[2]||e[3])&&f===(e[3]||e[2]||e[1]||e[0])&&!f.length&&(n?n[d]=f:this._root=f),this):(this._root=i,this)};function d(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}var f=function(){return this._root},p=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},g=function(t){var e,n,r,i,o,a,s=[],l=this._root;l&&s.push(new u(l,this._x0,this._y0,this._x1,this._y1));while(e=s.pop())if(!t(l=e.node,r=e.x0,i=e.y0,o=e.x1,a=e.y1)&&l.length){var c=(r+o)/2,h=(i+a)/2;(n=l[3])&&s.push(new u(n,c,h,o,a)),(n=l[2])&&s.push(new u(n,r,h,c,a)),(n=l[1])&&s.push(new u(n,c,i,o,h)),(n=l[0])&&s.push(new u(n,r,i,c,h))}return this},m=function(t){var e,n=[],r=[];this._root&&n.push(new u(this._root,this._x0,this._y0,this._x1,this._y1));while(e=n.pop()){var i=e.node;if(i.length){var o,a=e.x0,s=e.y0,l=e.x1,c=e.y1,h=(a+l)/2,d=(s+c)/2;(o=i[0])&&n.push(new u(o,a,s,h,d)),(o=i[1])&&n.push(new u(o,h,s,l,d)),(o=i[2])&&n.push(new u(o,a,d,h,c)),(o=i[3])&&n.push(new u(o,h,d,l,c))}r.push(e)}while(e=r.pop())t(e.node,e.x0,e.y0,e.x1,e.y1);return this};function y(t){return t[0]}var v=function(t){return arguments.length?(this._x=t,this):this._x};function b(t){return t[1]}var _=function(t){return arguments.length?(this._y=t,this):this._y};function x(t,e,n){var r=new w(null==e?y:e,null==n?b:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function w(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function S(t){var e={data:t.data},n=e;while(t=t.next)n=n.next={data:t.data};return e}var E=x.prototype=w.prototype;E.copy=function(){var t,e,n=new w(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=S(r),n;t=[{source:r,target:n._root=new Array(4)}];while(r=t.pop())for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=S(e));return n},E.add=r,E.addAll=o,E.cover=a,E.data=s,E.extent=l,E.find=c,E.remove=h,E.removeAll=d,E.root=f,E.size=p,E.visit=g,E.visitAfter=m,E.x=v,E.y=_},d17b:function(t,e,n){t.exports=n("27bf")},d26d:function(t,e,n){"use strict";(function(e){const n="undefined"!==typeof e,r=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,i=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function o(t,o,s){null==s&&null!==o&&"object"===typeof o&&(s=o,o=void 0),n&&e.isBuffer(t)&&(t=t.toString()),t&&65279===t.charCodeAt(0)&&(t=t.slice(1));const l=JSON.parse(t,o);if(null===l||"object"!==typeof l)return l;const u=s&&s.protoAction||"error",c=s&&s.constructorAction||"error";if("ignore"===u&&"ignore"===c)return l;if("ignore"!==u&&"ignore"!==c){if(!1===r.test(t)&&!1===i.test(t))return l}else if("ignore"!==u&&"ignore"===c){if(!1===r.test(t))return l}else if(!1===i.test(t))return l;return a(l,{protoAction:u,constructorAction:c,safe:s&&s.safe})}function a(t,{protoAction:e="error",constructorAction:n="error",safe:r}={}){let i=[t];while(i.length){const t=i;i=[];for(const o of t){if("ignore"!==e&&Object.prototype.hasOwnProperty.call(o,"__proto__")){if(!0===r)return null;if("error"===e)throw new SyntaxError("Object contains forbidden prototype property");delete o.__proto__}if("ignore"!==n&&Object.prototype.hasOwnProperty.call(o,"constructor")&&Object.prototype.hasOwnProperty.call(o.constructor,"prototype")){if(!0===r)return null;if("error"===n)throw new SyntaxError("Object contains forbidden prototype property");delete o.constructor}for(const t in o){const e=o[t];e&&"object"===typeof e&&i.push(e)}}}return t}function s(t,e,n){const r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return o(t,e,n)}finally{Error.stackTraceLimit=r}}function l(t,e){const n=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return o(t,e,{safe:!0})}catch(r){return null}finally{Error.stackTraceLimit=n}}t.exports=s,t.exports.default=s,t.exports.parse=s,t.exports.safeParse=l,t.exports.scan=a}).call(this,n("b639").Buffer)},d2b5:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["flat_settings","timeout","pretty","human","error_trace","source","filter_path"],a={flatSettings:"flat_settings",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,nodeId:d,node_id:f,...p}=t;p=i(o,a,p,u),null==c&&(c="GET");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m=null!=(f||d)?"/_cluster/stats/nodes/"+encodeURIComponent(f||d):"/_cluster/stats";const y={method:c,path:m,body:null,querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},d32b:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["format","ignore_unavailable","master_timeout","h","help","s","v","pretty","human","error_trace","source","filter_path"],a={ignoreUnavailable:"ignore_unavailable",masterTimeout:"master_timeout",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["repository"]){const t=new n("Missing required parameter: repository");return r(t,l)}if(null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,repository:d,...f}=t;f=i(o,a,f,u),null==c&&(c="GET");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g=null!=d?"/_cat/snapshots/"+encodeURIComponent(d):"/_cat/snapshots";const m={method:c,path:g,body:null,querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},d451:function(t,e,n){"use strict";var r={};n.r(r),n.d(r,"getAdjMatrix",(function(){return qE})),n.d(r,"breadthFirstSearch",(function(){return nC})),n.d(r,"connectedComponent",(function(){return oC})),n.d(r,"getDegree",(function(){return sC})),n.d(r,"getInDegree",(function(){return lC})),n.d(r,"getOutDegree",(function(){return uC})),n.d(r,"detectCycle",(function(){return yC})),n.d(r,"detectDirectedCycle",(function(){return BM})),n.d(r,"detectAllCycles",(function(){return mC})),n.d(r,"detectAllDirectedCycle",(function(){return gC})),n.d(r,"detectAllUndirectedCycle",(function(){return pC})),n.d(r,"depthFirstSearch",(function(){return dC})),n.d(r,"dijkstra",(function(){return _C})),n.d(r,"findAllPath",(function(){return EC})),n.d(r,"findShortestPath",(function(){return SC})),n.d(r,"floydWarshall",(function(){return MC})),n.d(r,"labelPropagation",(function(){return AC})),n.d(r,"louvain",(function(){return jC})),n.d(r,"iLouvain",(function(){return zC})),n.d(r,"kCore",(function(){return GC})),n.d(r,"kMeans",(function(){return HC})),n.d(r,"cosineSimilarity",(function(){return YC})),n.d(r,"nodesCosineSimilarity",(function(){return JC})),n.d(r,"minimumSpanningTree",(function(){return iM})),n.d(r,"pageRank",(function(){return aM})),n.d(r,"getNeighbors",(function(){return ZE})),n.d(r,"Stack",(function(){return jM})),n.d(r,"GADDI",(function(){return DM})),n.d(r,"default",(function(){return zM}));var i={};n.r(i),n.d(i,"compare",(function(){return GM})),n.d(i,"getLineIntersect",(function(){return VM})),n.d(i,"getRectIntersectByPoint",(function(){return HM})),n.d(i,"getCircleIntersectByPoint",(function(){return WM})),n.d(i,"getEllipseIntersectByPoint",(function(){return YM})),n.d(i,"applyMatrix",(function(){return XM})),n.d(i,"invertMatrix",(function(){return JM})),n.d(i,"getCircleCenterByPoints",(function(){return ZM})),n.d(i,"distance",(function(){return KM})),n.d(i,"scaleMatrix",(function(){return QM})),n.d(i,"floydWarshall",(function(){return $M})),n.d(i,"getAdjMatrix",(function(){return tT})),n.d(i,"translate",(function(){return eT})),n.d(i,"move",(function(){return nT})),n.d(i,"scale",(function(){return rT})),n.d(i,"rotate",(function(){return iT})),n.d(i,"getDegree",(function(){return oT})),n.d(i,"isPointInPolygon",(function(){return sT})),n.d(i,"intersectBBox",(function(){return lT})),n.d(i,"isPolygonsIntersect",(function(){return cT})),n.d(i,"Line",(function(){return hT})),n.d(i,"getBBoxBoundLine",(function(){return dT})),n.d(i,"itemIntersectByLine",(function(){return pT})),n.d(i,"fractionToLine",(function(){return gT})),n.d(i,"getPointsCenter",(function(){return mT})),n.d(i,"squareDist",(function(){return yT})),n.d(i,"pointLineSquareDist",(function(){return vT})),n.d(i,"isPointsOverlap",(function(){return bT})),n.d(i,"pointRectSquareDist",(function(){return _T})),n.d(i,"pointLineDistance",(function(){return xT})),n.d(i,"lerp",(function(){return wT})),n.d(i,"lerpArray",(function(){return ST}));var o={};n.r(o),n.d(o,"getBBox",(function(){return HT})),n.d(o,"getLoopCfgs",(function(){return WT})),n.d(o,"getLabelPosition",(function(){return YT})),n.d(o,"traverseTree",(function(){return ZT})),n.d(o,"traverseTreeUp",(function(){return KT})),n.d(o,"getLetterWidth",(function(){return QT})),n.d(o,"getTextSize",(function(){return $T})),n.d(o,"truncateLabelByLength",(function(){return tA})),n.d(o,"plainCombosToTrees",(function(){return eA})),n.d(o,"reconstructTree",(function(){return nA})),n.d(o,"getComboBBox",(function(){return rA})),n.d(o,"shouldRefreshEdge",(function(){return iA})),n.d(o,"cloneBesidesImg",(function(){return oA})),n.d(o,"getAnimateCfgWithCallback",(function(){return aA}));var a={};n.r(a),n.d(a,"uniqueId",(function(){return fA})),n.d(a,"formatPadding",(function(){return pA})),n.d(a,"cloneEvent",(function(){return gA})),n.d(a,"isViewportChanged",(function(){return mA})),n.d(a,"isNaN",(function(){return yA})),n.d(a,"calculationItemsBBox",(function(){return vA})),n.d(a,"processParallelEdges",(function(){return bA}));var s={};n.r(s),n.d(s,"getSpline",(function(){return yO})),n.d(s,"getControlPoint",(function(){return vO})),n.d(s,"pointsToPolygon",(function(){return bO})),n.d(s,"pathToPoints",(function(){return _O})),n.d(s,"getClosedSpline",(function(){return xO})),n.d(s,"roundedHull",(function(){return CO})),n.d(s,"paddedHull",(function(){return MO})),n.d(s,"getStarPath",(function(){return TO}));var l={};n.r(l),n.d(l,"defaultSubjectColors",(function(){return vk}));var u={};n.r(u),n.d(u,"isForce",(function(){return bk}));var c={};n.r(c),n.d(c,"mixColor",(function(){return iI})),n.d(c,"getColorsWithSubjectColor",(function(){return sI})),n.d(c,"getColorSetsBySubjectColors",(function(){return lI}));var h={};n.r(h),n.d(h,"proccessToFunc",(function(){return EI})),n.d(h,"buildTextureData",(function(){return CI})),n.d(h,"buildTextureDataWithOneEdgeAttr",(function(){return MI})),n.d(h,"buildTextureDataWithTwoEdgeAttr",(function(){return TI})),n.d(h,"attributesToTextureData",(function(){return AI})),n.d(h,"arrayToTextureData",(function(){return OI})),n.d(h,"radialLayout",(function(){return kI}));var d={};n.r(d),n.d(d,"gpuDetector",(function(){return II}));var f={};n.r(f),n.d(f,"getBrowserName",(function(){return PI}));var p={};n.r(p),n.d(p,"default",(function(){return vN})),n.d(p,"assign",(function(){return ZL})),n.d(p,"format",(function(){return gN})),n.d(p,"parse",(function(){return mN})),n.d(p,"defaultI18n",(function(){return eN})),n.d(p,"setGlobalDateI18n",(function(){return rN})),n.d(p,"setGlobalDateMasks",(function(){return pN}));var g=window.SuperMap=window.SuperMap||{};g.Components=window.SuperMap.Components||{};var m={GEOJSON:"GEOJSON",ISERVER:"ISERVER",FGB:"FGB"},y={ISERVER:"ISERVER",IPORTAL:"IPORTAL",ONLINE:"ONLINE"},v={LINE:"LINE",LINEM:"LINEM",POINT:"POINT",REGION:"REGION",POINTEPS:"POINTEPS",LINEEPS:"LINEEPS",REGIONEPS:"REGIONEPS",ELLIPSE:"ELLIPSE",CIRCLE:"CIRCLE",TEXT:"TEXT",RECTANGLE:"RECTANGLE",UNKNOWN:"UNKNOWN",GEOCOMPOUND:"GEOCOMPOUND"},b={ATTRIBUTE:"ATTRIBUTE",ATTRIBUTEANDGEOMETRY:"ATTRIBUTEANDGEOMETRY",GEOMETRY:"GEOMETRY"},_={INNERJOIN:"INNERJOIN",LEFTJOIN:"LEFTJOIN"},x={CONTAIN:"CONTAIN",CROSS:"CROSS",DISJOINT:"DISJOINT",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",NONE:"NONE",OVERLAP:"OVERLAP",TOUCH:"TOUCH",WITHIN:"WITHIN"},w={CONTAIN:"CONTAIN",INTERSECT:"INTERSECT",WITHIN:"WITHIN"},S={DISTANCE:"DISTANCE",AREA:"AREA"},E={METER:"METER",KILOMETER:"KILOMETER",MILE:"MILE",YARD:"YARD",DEGREE:"DEGREE",MILLIMETER:"MILLIMETER",CENTIMETER:"CENTIMETER",INCH:"INCH",DECIMETER:"DECIMETER",FOOT:"FOOT",SECOND:"SECOND",MINUTE:"MINUTE",RADIAN:"RADIAN"},C={CENTIMETER:"CENTIMETER",DECIMETER:"DECIMETER",FOOT:"FOOT",INCH:"INCH",KILOMETER:"KILOMETER",METER:"METER",MILE:"MILE",MILLIMETER:"MILLIMETER",YARD:"YARD"},M={IMAGEPLUGINS:"IMAGEPLUGINS",OGC:"OGC",ORACLEPLUS:"ORACLEPLUS",SDBPLUS:"SDBPLUS",SQLPLUS:"SQLPLUS",UDB:"UDB"},T={CAPTION:"CAPTION",CAPTION_PERCENT:"CAPTION_PERCENT",CAPTION_VALUE:"CAPTION_VALUE",PERCENT:"PERCENT",VALUE:"VALUE"},A={AREA:"AREA",BAR:"BAR",BAR3D:"BAR3D",LINE:"LINE",PIE:"PIE",PIE3D:"PIE3D",POINT:"POINT",RING:"RING",ROSE:"ROSE",ROSE3D:"ROSE3D",STACK_BAR:"STACK_BAR",STACK_BAR3D:"STACK_BAR3D",STEP:"STEP"},O={ALL:"ALL",NONE:"NONE",YAXES:"YAXES"},k={CONSTANT:"CONSTANT",LOGARITHM:"LOGARITHM",SQUAREROOT:"SQUAREROOT"},I={CUSTOMINTERVAL:"CUSTOMINTERVAL",EQUALINTERVAL:"EQUALINTERVAL",LOGARITHM:"LOGARITHM",QUANTILE:"QUANTILE",SQUAREROOT:"SQUAREROOT",STDDEVIATION:"STDDEVIATION"},P={DOTDENSITY:"DOTDENSITY",GRADUATEDSYMBOL:"GRADUATEDSYMBOL",GRAPH:"GRAPH",LABEL:"LABEL",RANGE:"RANGE",UNIQUE:"UNIQUE"},L={BLACK_WHITE:"BLACKWHITE",BLUE_BLACK:"BLUEBLACK",BLUE_RED:"BLUERED",BLUE_WHITE:"BLUEWHITE",CYAN_BLACK:"CYANBLACK",CYAN_BLUE:"CYANBLUE",CYAN_GREEN:"CYANGREEN",CYAN_WHITE:"CYANWHITE",GREEN_BLACK:"GREENBLACK",GREEN_BLUE:"GREENBLUE",GREEN_ORANGE_VIOLET:"GREENORANGEVIOLET",GREEN_RED:"GREENRED",GREEN_WHITE:"GREENWHITE",PINK_BLACK:"PINKBLACK",PINK_BLUE:"PINKBLUE",PINK_RED:"PINKRED",PINK_WHITE:"PINKWHITE",RAIN_BOW:"RAINBOW",RED_BLACK:"REDBLACK",RED_WHITE:"REDWHITE",SPECTRUM:"SPECTRUM",TERRAIN:"TERRAIN",YELLOW_BLACK:"YELLOWBLACK",YELLOW_BLUE:"YELLOWBLUE",YELLOW_GREEN:"YELLOWGREEN",YELLOW_RED:"YELLOWRED",YELLOW_WHITE:"YELLOWWHITE"},N={TOPLEFT:"TOPLEFT",TOPCENTER:"TOPCENTER",TOPRIGHT:"TOPRIGHT",BASELINELEFT:"BASELINELEFT",BASELINECENTER:"BASELINECENTER",BASELINERIGHT:"BASELINERIGHT",BOTTOMLEFT:"BOTTOMLEFT",BOTTOMCENTER:"BOTTOMCENTER",BOTTOMRIGHT:"BOTTOMRIGHT",MIDDLELEFT:"MIDDLELEFT",MIDDLECENTER:"MIDDLECENTER",MIDDLERIGHT:"MIDDLERIGHT"},R={NONE:"NONE",LINEAR:"LINEAR",RADIAL:"RADIAL",CONICAL:"CONICAL",SQUARE:"SQUARE"},D={NORMAL:"ALONG_LINE_NORMAL",LB_TO_RT:"LEFT_BOTTOM_TO_RIGHT_TOP",LT_TO_RB:"LEFT_TOP_TO_RIGHT_BOTTOM",RB_TO_LT:"RIGHT_BOTTOM_TO_LEFT_TOP",RT_TO_LB:"RIGHT_TOP_TO_LEFT_BOTTOM"},F={DIAMOND:"DIAMOND",ELLIPSE:"ELLIPSE",MARKER:"MARKER",NONE:"NONE",RECT:"RECT",ROUNDRECT:"ROUNDRECT",TRIANGLE:"TRIANGLE"},j={NEWLINE:"NEWLINE",NONE:"NONE",OMIT:"OMIT"},B={EAST:"EAST",NONE:"NONE",NORTH:"NORTH",SOURTH:"SOURTH",WEST:"WEST"},z={LEFT:"LEFT",MIDDLE:"MIDDLE",NONE:"NONE",RIGHT:"RIGHT"},U={FIXEDCENTER:"FIXEDCENTER",NULL:"NULL",OPTIONALCENTER:"OPTIONALCENTER"},G={AHEAD:"AHEAD",BACK:"BACK",END:"END",LEFT:"LEFT",NONE:"NONE",RIGHT:"RIGHT"},q={FLAT:"FLAT",ROUND:"ROUND"},V={CLIP:"CLIP",ERASE:"ERASE",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",UNION:"UNION",UPDATE:"UPDATE",XOR:"XOR"},H={INDEXEDHDFS:"INDEXEDHDFS",UDB:"UDB",MONGODB:"MONGODB",PG:"PG"},W={BSPLINE:"BSPLINE",POLISH:"POLISH"},Y={ISOLINE:"ISOLINE",ISOREGION:"ISOREGION"},X={DATASET_AND_RECORDSET:"DATASET_AND_RECORDSET",DATASET_ONLY:"DATASET_ONLY",RECORDSET_ONLY:"RECORDSET_ONLY"},J={ADD:"add",UPDATE:"update",DELETE:"delete"},Z={LESS_TIME:"LESS_TIME",LESS_TRANSFER:"LESS_TRANSFER",LESS_WALK:"LESS_WALK",MIN_DISTANCE:"MIN_DISTANCE"},K={BUS:"BUS",SUBWAY:"SUBWAY",NO_SUBWAY:"NO_SUBWAY",NONE:"NONE"},Q={CROSS:"CROSS",GRID:"GRID",POINT:"POINT"},tt={CMYK:"CMYK",RGB:"RGB"},et={UGC:"UGC",WMS:"WMS",WFS:"WFS",CUSTOM:"CUSTOM"},nt={THEME:"THEME",VECTOR:"VECTOR",GRID:"GRID",IMAGE:"IMAGE"},rt={AVERAGE:"AVERAGE",MAX:"MAX",MIN:"MIN",STDDEVIATION:"STDDEVIATION",SUM:"SUM",VARIANCE:"VARIANCE"},it={BIT16:"BIT16",BIT32:"BIT32",BIT64:"BIT64",SINGLE:"SINGLE",DOUBLE:"DOUBLE",UBIT1:"UBIT1",UBIT4:"UBIT4",UBIT8:"UBIT8",UBIT24:"UBIT24",UBIT32:"UBIT32"},ot={KDTREE_FIXED_COUNT:"KDTREE_FIXED_COUNT",KDTREE_FIXED_RADIUS:"KDTREE_FIXED_RADIUS",NONE:"NONE",QUADTREE:"QUADTREE"},at={KRIGING:"KRIGING",SimpleKriging:"SimpleKriging",UniversalKriging:"UniversalKriging"},st={EXPONENTIAL:"EXPONENTIAL",GAUSSIAN:"GAUSSIAN",SPHERICAL:"SPHERICAL"},lt={EXP1:"EXP1",EXP2:"EXP2"},ut={IP:"IP",REFERER:"Referer",REQUESTIP:"RequestIP",NONE:"NONE",SERVER:"SERVER",WEB:"WEB"},ct={BAR:"Bar",BAR3D:"Bar3D",CIRCLE:"Circle",PIE:"Pie",POINT:"Point",LINE:"Line",RING:"Ring"},ht={CLIP:"clip",INTERSECT:"intersect"},dt={SQUAREMETER:"SquareMeter",SQUAREKILOMETER:"SquareKiloMeter",HECTARE:"Hectare",ARE:"Are",ACRE:"Acre",SQUAREFOOT:"SquareFoot",SQUAREYARD:"SquareYard",SQUAREMILE:"SquareMile"},ft={METER:"Meter",KILOMETER:"Kilometer",YARD:"Yard",FOOT:"Foot",MILE:"Mile"},pt={MAX:"max",MIN:"min",AVERAGE:"average",SUM:"sum",VARIANCE:"variance",STDDEVIATION:"stdDeviation"},gt={SUMMARYMESH:"SUMMARYMESH",SUMMARYREGION:"SUMMARYREGION"},mt={REGIONNOOVERLAP:"REGIONNOOVERLAP",REGIONNOOVERLAPWITH:"REGIONNOOVERLAPWITH",REGIONCONTAINEDBYREGION:"REGIONCONTAINEDBYREGION",REGIONCOVEREDBYREGION:"REGIONCOVEREDBYREGION",LINENOOVERLAP:"LINENOOVERLAP",LINENOOVERLAPWITH:"LINENOOVERLAPWITH",POINTNOIDENTICAL:"POINTNOIDENTICAL"},yt={GEOHASH_GRID:"geohash_grid"},vt={AVG:"avg",MAX:"max",MIN:"min",SUM:"sum"},bt={BOUNDS:"BOUNDS",BUFFER:"BUFFER",ID:"ID",SPATIAL:"SPATIAL",SQL:"SQL"},_t={NDVI:"NDVI",HILLSHADE:"HILLSHADE"},xt={MAP:"MAP",SERVICE:"SERVICE",SCENE:"SCENE",DATA:"DATA",INSIGHTS_WORKSPACE:"INSIGHTS_WORKSPACE",MAP_DASHBOARD:"MAP_DASHBOARD"},wt={UPDATETIME:"UPDATETIME",HEATLEVEL:"HEATLEVEL",RELEVANCE:"RELEVANCE"},St={ASC:"ASC",DESC:"DESC"},Et={PUBLIC:"PUBLIC",MY_RES:"MY_RES",MYGROUP_RES:"MYGROUP_RES",MYDEPARTMENT_RES:"MYDEPARTMENT_RES",SHARETOME_RES:"SHARETOME_RES"},Ct={TAG:"TAG",TYPE:"TYPE"},Mt={SEARCH:"SEARCH",READ:"READ",READWRITE:"READWRITE",DELETE:"DELETE",DOWNLOAD:"DOWNLOAD"},Tt={DEPARTMENT:"DEPARTMENT",GROUP:"GROUP",IPORTALGROUP:"IPORTALGROUP",ROLE:"ROLE",USER:"USER"},At={GEOJSON:"GEOJSON",UGCV5_MVT:"UGCV5_MVT",JSON:"JSON",AUDIO:"AUDIO",COLOR:"COLOR",COLORSCHEME:"COLORSCHEME",CSV:"CSV",EXCEL:"EXCEL",FILLSYMBOL:"FILLSYMBOL",IMAGE:"IMAGE",LAYERTEMPLATE:"LAYERTEMPLATE",LAYOUTTEMPLATE:"LAYOUTTEMPLATE",LINESYMBOL:"LINESYMBOL",MAPTEMPLATE:"MAPTEMPLATE",MARKERSYMBOL:"MARKERSYMBOL",MBTILES:"MBTILES",PHOTOS:"PHOTOS",SHP:"SHP",SMTILES:"SMTILES",SVTILES:"SVTILES",THEMETEMPLATE:"THEMETEMPLATE",TPK:"TPK",UDB:"UDB",UGCV5:"UGCV5",UNKNOWN:"UNKNOWN",VIDEO:"VIDEO",WORKENVIRONMENT:"WORKENVIRONMENT",WORKSPACE:"WORKSPACE"},Ot={PNG:"PNG",PDF:"PDF"},kt={HORIZONTALLABELSBELOW:"HORIZONTALLABELSBELOW",HORIZONTALLABELSABOVE:"HORIZONTALLABELSABOVE",VERTICALLABELSLEFT:"VERTICALLABELSLEFT",VERTICALLABELSRIGHT:"VERTICALLABELSRIGHT"},It={LINE:"LINE",BAR:"BAR",BAR_SUB:"BAR_SUB"},Pt={METER:"METER",FOOT:"FOOT",DEGREES:"DEGREES"};class Lt{constructor(t,e){this.w=t?parseFloat(t):0,this.h=t?parseFloat(e):0,this.CLASS_NAME="SuperMap.Size"}toString(){return"w="+this.w+",h="+this.h}clone(){return new Lt(this.w,this.h)}equals(t){var e=!1;return null!=t&&(e=this.w===t.w&&this.h===t.h||isNaN(this.w)&&isNaN(this.h)&&isNaN(t.w)&&isNaN(t.h)),e}destroy(){this.w=null,this.h=null}}class Nt{constructor(t,e,n){this.x=t?parseFloat(t):0,this.y=e?parseFloat(e):0,this.mode=n,this.CLASS_NAME="SuperMap.Pixel"}toString(){return"x="+this.x+",y="+this.y}clone(){return new Nt(this.x,this.y,this.mode)}equals(t){var e=!1;return null!=t&&(e=this.x==t.x&&this.y==t.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(t.x)&&isNaN(t.y)),e}distanceTo(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))}add(t,e){if(null==t||null==e)throw new TypeError("Pixel.add cannot receive null values");return new Nt(this.x+t,this.y+e)}offset(t){var e=this.clone();return t&&(e=this.add(t.x,t.y)),e}destroy(){this.x=null,this.y=null,this.mode=null}}Nt.Mode={LeftTop:"lefttop",RightTop:"righttop",RightBottom:"rightbottom",LeftBottom:"leftbottom"};var Rt=function(t,e){var n,r,i,o=function(){};for(o.prototype=e.prototype,t.prototype=new o,n=2,r=arguments.length;n<r;n++)i=arguments[n],"function"===typeof i&&(i=i.prototype),Wt.extend(t.prototype,i)},Dt=function(...t){class e{constructor(e){for(var n=0;n<t.length;n++)i(this,new t[n](e))}}for(var n=0;n<t.length;n++){var r=t[n];i(e,r),i(e.prototype,r.prototype),i(e.prototype,new r)}return e;function i(t,e){var n=Object.getOwnPropertyNames(e);Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(e)));for(var r=0;r<n.length;r++){var i=n[r];if("constructor"!==i&&"prototype"!==i&&"name"!==i&&"length"!==i){let n=Object.getOwnPropertyDescriptor(e,i);window["ActiveXObject"]?Object.defineProperty(t,i,n||{}):Object.defineProperty(t,i,n)}}}},Ft={startsWith:function(t,e){return 0==t.indexOf(e)},contains:function(t,e){return-1!=t.indexOf(e)},trim:function(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},camelize:function(t){for(var e=t.split("-"),n=e[0],r=1,i=e.length;r<i;r++){var o=e[r];n+=o.charAt(0).toUpperCase()+o.substring(1)}return n},format:function(t,e,n){e||(e=window);var r=function(t,r){for(var i,o=r.split(/\.+/),a=0;a<o.length;a++)0==a&&(i=e),i=i[o[a]];return"function"===typeof i&&(i=n?i.apply(null,n):i()),"undefined"==typeof i?"undefined":i};return t.replace(Ft.tokenRegEx,r)},tokenRegEx:/\$\{([\w.]+?)\}/g,numberRegEx:/^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/,isNumeric:function(t){return Ft.numberRegEx.test(t)},numericIf:function(t){return Ft.isNumeric(t)?parseFloat(t):t}},jt={decimalSeparator:".",thousandsSeparator:",",limitSigDigs:function(t,e){var n=0;return e>0&&(n=parseFloat(t.toPrecision(e))),n},format:function(t,e,n,r){e="undefined"!=typeof e?e:0,n="undefined"!=typeof n?n:jt.thousandsSeparator,r="undefined"!=typeof r?r:jt.decimalSeparator,null!=e&&(t=parseFloat(t.toFixed(e)));var i=t.toString().split(".");1===i.length&&null==e&&(e=0);var o,a=i[0];if(n){var s=/(-?[0-9]+)([0-9]{3})/;while(s.test(a))a=a.replace(s,"$1"+n+"$2")}if(0==e)o=a;else{var l=i.length>1?i[1]:"0";null!=e&&(l+=new Array(e-l.length+1).join("0")),o=a+r+l}return o}};Number.prototype.limitSigDigs||(Number.prototype.limitSigDigs=function(t){return jt.limitSigDigs(this,t)});var Bt={bind:function(t,e){var n=Array.prototype.slice.apply(arguments,[2]);return function(){var r=n.concat(Array.prototype.slice.apply(arguments,[0]));return t.apply(e,r)}},bindAsEventListener:function(t,e){return function(n){return t.call(e,n||window.event)}},False:function(){return!1},True:function(){return!0},Void:function(){}},zt={filter:function(t,e,n){var r=[];if(Array.prototype.filter)r=t.filter(e,n);else{var i=t.length;if("function"!=typeof e)throw new TypeError;for(var o=0;o<i;o++)if(o in t){var a=t[o];e.call(n,a,o,t)&&r.push(a)}}return r}};class Ut{constructor(){this.CLASS_NAME="SuperMap.Geometry",this.id=Wt.createUniqueID(this.CLASS_NAME+"_"),this.parent=null,this.bounds=null,this.SRID=null}destroy(){this.id=null,this.bounds=null,this.SRID=null}clone(){return new Ut}setBounds(t){t&&(this.bounds=t.clone())}clearBounds(){this.bounds=null,this.parent&&this.parent.clearBounds()}extendBounds(t){var e=this.getBounds();e?this.bounds.extend(t):this.setBounds(t)}getBounds(){return null==this.bounds&&this.calculateBounds(),this.bounds}calculateBounds(){}getVertices(t){}getArea(){return 0}}const Gt=function(){var t,e="",n="",r="pc",i=navigator.userAgent.toLowerCase();return i.indexOf("msie")>-1||i.indexOf("trident")>-1&&i.indexOf("rv")>-1?(e="msie",t=i.match(/msie ([\d.]+)/)||i.match(/rv:([\d.]+)/)):i.indexOf("chrome")>-1?(e="chrome",t=i.match(/chrome\/([\d.]+)/)):i.indexOf("firefox")>-1?(e="firefox",t=i.match(/firefox\/([\d.]+)/)):i.indexOf("opera")>-1?(e="opera",t=i.match(/version\/([\d.]+)/)):i.indexOf("safari")>-1&&(e="safari",t=i.match(/version\/([\d.]+)/)),n=t?t[1]:"",i.indexOf("ipad")>-1||i.indexOf("ipod")>-1||i.indexOf("iphone")>-1?r="apple":i.indexOf("android")>-1&&(t=i.match(/version\/([\d.]+)/),n=t?t[1]:"",r="android"),{name:e,version:n,device:r}}(),qt=function(){var t=!0,e=Gt;return document.createElement("canvas").getContext?("firefox"===e.name&&parseFloat(e.version)<5&&(t=!1),"safari"===e.name&&parseFloat(e.version)<4&&(t=!1),"opera"===e.name&&parseFloat(e.version)<10&&(t=!1),"msie"===e.name&&parseFloat(e.version)<9&&(t=!1)):t=!1,t}(),Vt=function(){var t=navigator.userAgent.toLowerCase();return-1===t.indexOf("webkit")&&-1!==t.indexOf("gecko")}(),Ht=96,Wt={assign(t){for(var e=0;e<Object.getOwnPropertyNames(arguments).length;e++){var n=Object.getOwnPropertyNames(arguments)[e];if("caller"!=n&&"callee"!=n&&"length"!=n&&"arguments"!=n){var r=arguments[n];if(r)for(var i=0;i<Object.getOwnPropertyNames(r).length;i++){var o=Object.getOwnPropertyNames(r)[i];"caller"!=n&&"callee"!=n&&"length"!=n&&"arguments"!=n&&(t[o]=r[o])}}}return t},extend:function(t,e){if(t=t||{},e){for(var n in e){var r=e[n];void 0!==r&&(t[n]=r)}var i="function"===typeof window.Event&&e instanceof window.Event;!i&&e.hasOwnProperty&&e.hasOwnProperty("toString")&&(t.toString=e.toString)}return t},copy:function(t,e){var n;if(t=t||{},e)for(var r in t)n=e[r],"undefined"!==typeof n&&(t[r]=n)},reset:function(t){for(var e in t=t||{},t)if(t.hasOwnProperty(e)){if("object"===typeof t[e]&&t[e]instanceof Array){for(var n in t[e])t[e][n].destroy&&t[e][n].destroy();t[e].length=0}else"object"===typeof t[e]&&t[e]instanceof Object&&t[e].destroy&&t[e].destroy();t[e]=null}},getElement:function(){for(var t=[],e=0,n=arguments.length;e<n;e++){var r=arguments[e];if("string"===typeof r&&(r=document.getElementById(r)),1===arguments.length)return r;t.push(r)}return t},isElement:function(t){return!(!t||1!==t.nodeType)},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},removeItem:function(t,e){for(var n=t.length-1;n>=0;n--)t[n]===e&&t.splice(n,1);return t},indexOf:function(t,e){if(null==t)return-1;if("function"===typeof t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},modifyDOMElement:function(t,e,n,r,i,o,a,s){e&&(t.id=e),n&&(t.style.left=n.x+"px",t.style.top=n.y+"px"),r&&(t.style.width=r.w+"px",t.style.height=r.h+"px"),i&&(t.style.position=i),o&&(t.style.border=o),a&&(t.style.overflow=a),parseFloat(s)>=0&&parseFloat(s)<1?(t.style.filter="alpha(opacity="+100*s+")",t.style.opacity=s):1===parseFloat(s)&&(t.style.filter="",t.style.opacity="")},applyDefaults:function(t,e){t=t||{};var n="function"===typeof window.Event&&e instanceof window.Event;for(var r in e)(void 0===t[r]||!n&&e.hasOwnProperty&&e.hasOwnProperty(r)&&!t.hasOwnProperty(r))&&(t[r]=e[r]);return!n&&e&&e.hasOwnProperty&&e.hasOwnProperty("toString")&&!t.hasOwnProperty("toString")&&(t.toString=e.toString),t},getParameterString:function(t){var e=[];for(var n in t){var r,i=t[n];if(null!=i&&"function"!==typeof i)r=Array.isArray(i)||"[object Object]"===i.toString()?encodeURIComponent(JSON.stringify(i)):encodeURIComponent(i),e.push(encodeURIComponent(n)+"="+r)}return e.join("&")},urlAppend:function(t,e){var n=t;if(e){0===e.indexOf("?")&&(e=e.substring(1));var r=(t+" ").split(/[?&]/);n+=" "===r.pop()?e:r.length?"&"+e:"?"+e}return n},urlPathAppend:function(t,e){let n=t;if(!e)return n;0===e.indexOf("/")&&(e=e.substring(1));const r=t.split("?");return r[0].indexOf("/",r[0].length-1)<0&&(r[0]+="/"),n=`${r[0]}${e}${r.length>1?"?"+r[1]:""}`,n},DEFAULT_PRECISION:14,toFloat:function(t,e){return null==e&&(e=Wt.DEFAULT_PRECISION),"number"!==typeof t&&(t=parseFloat(t)),0===e?t:parseFloat(t.toPrecision(e))},rad:function(t){return t*Math.PI/180},getParameters:function(t){t=null===t||void 0===t?window.location.href:t;var e="";if(Ft.contains(t,"?")){var n=t.indexOf("?")+1,r=Ft.contains(t,"#")?t.indexOf("#"):t.length;e=t.substring(n,r)}for(var i={},o=e.split(/[&;]/),a=0,s=o.length;a<s;++a){var l=o[a].split("=");if(l[0]){var u=l[0];try{u=decodeURIComponent(u)}catch(h){u=unescape(u)}var c=(l[1]||"").replace(/\+/g," ");try{c=decodeURIComponent(c)}catch(h){c=unescape(c)}c=c.split(","),1==c.length&&(c=c[0]),i[u]=c}}return i},lastSeqID:0,createUniqueID:function(t){return null==t&&(t="id_"),Wt.lastSeqID+=1,t+Wt.lastSeqID},normalizeScale:function(t){var e=t>1?1/t:t;return e},getResolutionFromScale:function(t,e){var n;if(t){null==e&&(e="degrees");var r=Wt.normalizeScale(t);n=1/(r*Yt[e]*Ht)}return n},getScaleFromResolution:function(t,e){null==e&&(e="degrees");var n=t*Yt[e]*Ht;return n},getBrowser:function(){return Gt},isSupportCanvas:qt,supportCanvas:function(){return Wt.isSupportCanvas},isInTheSameDomain:function(t){if(!t)return!0;var e=t.indexOf("//"),n=document.location.toString(),r=n.indexOf("//");if(-1===e)return!0;var i,o=i=t.substring(0,e),a=n.substring(r+2);r=a.indexOf("/");var s=a.indexOf(":"),l=a.substring(0,r),u=document.location.protocol;if(-1!==s||(l+=":"+("http:"===u.toLowerCase()?80:443)),u.toLowerCase()!==o.toLowerCase())return!1;o=t.substring(e+2);var c=o.indexOf(":");e=o.indexOf("/");var h,d=o.substring(0,e);-1!==c?h=o.substring(0,c):(h=o.substring(0,e),d+=":"+("http:"===i.toLowerCase()?80:443));var f=document.domain;return h===f&&d===l},calculateDpi:function(t,e,n,r,i){if(t&&e&&n){var o,a=1e4,s=t.getWidth(),l=t.getHeight(),u=e.w,c=e.h;if(i=i||6378137,r=r||"degrees","degree"===r.toLowerCase()||"degrees"===r.toLowerCase()||"dd"===r.toLowerCase()){let t=s/u,e=l/c,r=t>e?t:e;o=.0254*a/r/n/(2*Math.PI*i/360)/a}else{let t=s/u;o=.0254*a/t/n/a}return o}},toJSON:function(t){var e=t;if(null==e)return null;switch(e.constructor){case String:return e='"'+e.replace(/(["\\])/g,"\\$1")+'"',e=e.replace(/\n/g,"\\n"),e=e.replace(/\r/g,"\\r"),e=e.replace("<","&lt;"),e=e.replace(">","&gt;"),e=e.replace(/%/g,"%25"),e=e.replace(/&/g,"%26"),e;case Array:for(var n="",r=0,i=e.length;r<i;r++)n+=Wt.toJSON(e[r]),r!==e.length-1&&(n+=",");return"["+n+"]";case Number:return isFinite(e)?String(e):null;case Boolean:return String(e);case Date:var o="{'__type':\"System.DateTime\",'Year':"+e.getFullYear()+",'Month':"+(e.getMonth()+1)+",'Day':"+e.getDate()+",'Hour':"+e.getHours()+",'Minute':"+e.getMinutes()+",'Second':"+e.getSeconds()+",'Millisecond':"+e.getMilliseconds()+",'TimezoneOffset':"+e.getTimezoneOffset()+"}";return o;default:if(null!=e["toJSON"]&&"function"===typeof e["toJSON"])return e.toJSON();if("object"===typeof e){if(e.length){let t=[];for(let n=0,r=e.length;n<r;n++)t.push(Wt.toJSON(e[n]));return"["+t.join(",")+"]"}let t=[];for(let n in e)"function"!==typeof e[n]&&"CLASS_NAME"!==n&&"parent"!==n&&t.push("'"+n+"':"+Wt.toJSON(e[n]));return t.length>0?"{"+t.join(",")+"}":"{}"}return e.toString()}},getResolutionFromScaleDpi:function(t,e,n,r){var i=null,o=1e4;return r=r||6378137,n=n||"",t>0&&e>0?(t=Wt.normalizeScale(t),"degree"===n.toLowerCase()||"degrees"===n.toLowerCase()||"dd"===n.toLowerCase()?(i=.0254*o/e/t/(2*Math.PI*r/360)/o,i):(i=.0254*o/e/t/o,i)):-1},getScaleFromResolutionDpi:function(t,e,n,r){var i=null,o=1e4;return r=r||6378137,n=n||"",t>0&&e>0?"degree"===n.toLowerCase()||"degrees"===n.toLowerCase()||"dd"===n.toLowerCase()?(i=.0254*o/e/t/(2*Math.PI*r/360)/o,i):(i=.0254*o/e/t/o,i):-1},transformResult:function(t){return t.responseText&&"string"===typeof t.responseText&&(t=JSON.parse(t.responseText)),t},copyAttributes:function(t,e){if(t=t||{},e)for(var n in e){var r=e[n];void 0!==r&&"CLASS_NAME"!==n&&"function"!==typeof r&&(t[n]=r)}return t},copyAttributesWithClip:function(t,e,n){if(t=t||{},e)for(var r in e){var i=!1;if(n&&n.length)for(var o=0,a=n.length;o<a;o++)if(r===n[o]){i=!0;break}if(!0!==i){var s=e[r];void 0!==s&&"CLASS_NAME"!==r&&"function"!==typeof s&&(t[r]=s)}}return t},cloneObject:function(t){if(null===t||"object"!==typeof t)return t;if(t instanceof Date){let e=new Date;return e.setTime(t.getTime()),e}if(t instanceof Array){let e=t.slice(0);return e}if(t instanceof Object){let n={};for(var e in t)t.hasOwnProperty(e)&&(n[e]=Wt.cloneObject(t[e]));return n}throw new Error("Unable to copy obj! Its type isn't supported.")},lineIntersection:function(t,e,n,r){var i,o,a=null,s=(r.x-n.x)*(t.y-n.y)-(r.y-n.y)*(t.x-n.x),l=(e.x-t.x)*(t.y-n.y)-(e.y-t.y)*(t.x-n.x),u=(r.y-n.y)*(e.x-t.x)-(r.x-n.x)*(e.y-t.y);if(0!=u)i=s/u,o=l/u,a=i>=0&&o<=1&&i<=1&&o>=0?new Ut.Point(t.x+i*(e.x-t.x),t.y+i*(e.y-t.y)):"No Intersection";else if(0==s&&0==l){var c=Math.max(t.y,e.y),h=Math.min(t.y,e.y),d=Math.max(t.x,e.x),f=Math.min(t.x,e.x);a=(n.y>=h&&n.y<=c||r.y>=h&&r.y<=c)&&n.x>=f&&n.x<=d||r.x>=f&&r.x<=d?"Coincident":"Parallel"}else a="Parallel";return a},getTextBounds:function(t,e,n){document.body.appendChild(n),n.style.width="auto",n.style.height="auto",t.fontSize&&(n.style.fontSize=t.fontSize),t.fontFamily&&(n.style.fontFamily=t.fontFamily),t.fontWeight&&(n.style.fontWeight=t.fontWeight),n.style.position="relative",n.style.visibility="hidden",n.style.display="inline-block",n.innerHTML=e;var r=n.clientWidth,i=n.clientHeight;return document.body.removeChild(n),{textWidth:r,textHeight:i}},convertPath:function(t,e){return e?t.replace(/\{([\w-\.]+)\}/g,(t,n)=>{var r;return r=e.hasOwnProperty(n)?Jt(e[n]):t,encodeURIComponent(r)}):t}},Yt={inches:1,ft:12,mi:63360,m:39.3701,km:39370.1,dd:4374754,yd:36};Yt["in"]=Yt.inches,Yt["degrees"]=Yt.dd,Yt["nmi"]=1852*Yt.m;const Xt=.0254000508001016;function Jt(t){return void 0==t||null==t?"":t instanceof Date?t.toJSON():Zt(t)?JSON.stringify(t):t.toString()}function Zt(t){if("string"!==typeof t&&"object"!==typeof t)return!1;try{const e=t.toString();return"[object Object]"===e||"[object Array]"===e}catch(e){return!1}}Wt.extend(Yt,{Inch:Yt.inches,Meter:1/Xt,Foot:.3048006096012192/Xt,IFoot:.3048/Xt,ClarkeFoot:.3047972651151/Xt,SearsFoot:.30479947153867626/Xt,GoldCoastFoot:.3047997101815088/Xt,IInch:.0254/Xt,MicroInch:254e-7/Xt,Mil:2.54e-8/Xt,Centimeter:.01/Xt,Kilometer:1e3/Xt,Yard:.9144018288036576/Xt,SearsYard:.914398414616029/Xt,IndianYard:.9143985307444408/Xt,IndianYd37:.91439523/Xt,IndianYd62:.9143988/Xt,IndianYd75:.9143985/Xt,IndianFoot:.30479951/Xt,IndianFt37:.30479841/Xt,IndianFt62:.3047996/Xt,IndianFt75:.3047995/Xt,Mile:1609.3472186944373/Xt,IYard:.9144/Xt,IMile:1609.344/Xt,NautM:1852/Xt,"Lat-66":110943.31648893273/Xt,"Lat-83":110946.25736872235/Xt,Decimeter:.1/Xt,Millimeter:.001/Xt,Dekameter:10/Xt,Decameter:10/Xt,Hectometer:100/Xt,GermanMeter:1.0000135965/Xt,CaGrid:.999738/Xt,ClarkeChain:20.1166194976/Xt,GunterChain:20.11684023368047/Xt,BenoitChain:20.116782494375872/Xt,SearsChain:20.11676512155/Xt,ClarkeLink:.201166194976/Xt,GunterLink:.2011684023368047/Xt,BenoitLink:.20116782494375873/Xt,SearsLink:.2011676512155/Xt,Rod:5.02921005842012/Xt,IntnlChain:20.1168/Xt,IntnlLink:.201168/Xt,Perch:5.02921005842012/Xt,Pole:5.02921005842012/Xt,Furlong:201.1684023368046/Xt,Rood:3.778266898/Xt,CapeFoot:.3047972615/Xt,Brealey:375/Xt,ModAmFt:.304812252984506/Xt,Fathom:1.8288/Xt,"NautM-UK":1853.184/Xt,"50kilometers":5e4/Xt,"150kilometers":15e4/Xt}),Wt.extend(Yt,{mm:Yt["Meter"]/1e3,cm:Yt["Meter"]/100,dm:100*Yt["Meter"],km:1e3*Yt["Meter"],kmi:Yt["nmi"],fath:Yt["Fathom"],ch:Yt["IntnlChain"],link:Yt["IntnlLink"],"us-in":Yt["inches"],"us-ft":Yt["Foot"],"us-yd":Yt["Yard"],"us-ch":Yt["GunterChain"],"us-mi":Yt["Mile"],"ind-yd":Yt["IndianYd37"],"ind-ft":Yt["IndianFt37"],"ind-ch":20.11669506/Xt}),Yt["degree"]=Yt.dd,Yt["meter"]=Yt.m,Yt["foot"]=Yt.ft,Yt["inch"]=Yt.inches,Yt["mile"]=Yt.mi,Yt["kilometer"]=Yt.km,Yt["yard"]=Yt.yd;class Kt{constructor(t,e){Wt.isArray(t)&&(e=t[1],t=t[0]),this.lon=t?Wt.toFloat(t):0,this.lat=e?Wt.toFloat(e):0,this.CLASS_NAME="SuperMap.LonLat"}toString(){return"lon="+this.lon+",lat="+this.lat}toShortString(){return this.lon+","+this.lat}clone(){return new Kt(this.lon,this.lat)}add(t,e){if(null==t||null==e)throw new TypeError("LonLat.add cannot receive null values");return new Kt(this.lon+Wt.toFloat(t),this.lat+Wt.toFloat(e))}equals(t){var e=!1;return null!=t&&(e=this.lon===t.lon&&this.lat===t.lat||isNaN(this.lon)&&isNaN(this.lat)&&isNaN(t.lon)&&isNaN(t.lat)),e}wrapDateLine(t){var e=this.clone();if(t){while(e.lon<t.left)e.lon+=t.getWidth();while(e.lon>t.right)e.lon-=t.getWidth()}return e}destroy(){this.lon=null,this.lat=null}static fromString(t){var e=t.split(",");return new Kt(e[0],e[1])}static fromArray(t){var e=Wt.isArray(t),n=e&&t[0],r=e&&t[1];return new Kt(n,r)}}class Qt{constructor(t,e,n,r){Wt.isArray(t)&&(r=t[3],n=t[2],e=t[1],t=t[0]),this.left=null!=t?Wt.toFloat(t):this.left,this.bottom=null!=e?Wt.toFloat(e):this.bottom,this.right=null!=n?Wt.toFloat(n):this.right,this.top=null!=r?Wt.toFloat(r):this.top,this.centerLonLat=null,this.CLASS_NAME="SuperMap.Bounds"}clone(){return new Qt(this.left,this.bottom,this.right,this.top)}equals(t){var e=!1;return null!=t&&(e=this.left===t.left&&this.right===t.right&&this.top===t.top&&this.bottom===t.bottom),e}toString(){return[this.left,this.bottom,this.right,this.top].join(",")}toArray(t){return!0===t?[this.bottom,this.left,this.top,this.right]:[this.left,this.bottom,this.right,this.top]}toBBOX(t,e){null==t&&(t=6);var n=Math.pow(10,t),r=Math.round(this.left*n)/n,i=Math.round(this.bottom*n)/n,o=Math.round(this.right*n)/n,a=Math.round(this.top*n)/n;return!0===e?i+","+r+","+a+","+o:r+","+i+","+o+","+a}getWidth(){return this.right-this.left}getHeight(){return this.top-this.bottom}getSize(){return new Lt(this.getWidth(),this.getHeight())}getCenterPixel(){return new Nt((this.left+this.right)/2,(this.bottom+this.top)/2)}getCenterLonLat(){return this.centerLonLat||(this.centerLonLat=new Kt((this.left+this.right)/2,(this.bottom+this.top)/2)),this.centerLonLat}scale(t,e){var n,r;t=t||1,null==e&&(e=this.getCenterLonLat()),"SuperMap.LonLat"===e.CLASS_NAME?(n=e.lon,r=e.lat):(n=e.x,r=e.y);var i=(this.left-n)*t+n,o=(this.bottom-r)*t+r,a=(this.right-n)*t+n,s=(this.top-r)*t+r;return new Qt(i,o,a,s)}add(t,e){if(null==t||null==e)throw new TypeError("Bounds.add cannot receive null values");return new Qt(this.left+t,this.bottom+e,this.right+t,this.top+e)}extend(t){var e=null;if(t){switch(t.CLASS_NAME){case"SuperMap.LonLat":e=new Qt(t.lon,t.lat,t.lon,t.lat);break;case"SuperMap.Geometry.Point":e=new Qt(t.x,t.y,t.x,t.y);break;case"SuperMap.Bounds":e=t;break}e&&(this.centerLonLat=null,(null==this.left||e.left<this.left)&&(this.left=e.left),(null==this.bottom||e.bottom<this.bottom)&&(this.bottom=e.bottom),(null==this.right||e.right>this.right)&&(this.right=e.right),(null==this.top||e.top>this.top)&&(this.top=e.top))}}containsLonLat(t,e){"boolean"===typeof e&&(e={inclusive:e}),e=e||{};var n=this.contains(t.lon,t.lat,e.inclusive),r=e.worldBounds;if(r&&!n){var i=r.getWidth(),o=(r.left+r.right)/2,a=Math.round((t.lon-o)/i);n=this.containsLonLat({lon:t.lon-a*i,lat:t.lat},{inclusive:e.inclusive})}return n}containsPixel(t,e){return this.contains(t.x,t.y,e)}contains(t,e,n){if(null==n&&(n=!0),null==t||null==e)return!1;var r=!1;return r=n?t>=this.left&&t<=this.right&&e>=this.bottom&&e<=this.top:t>this.left&&t<this.right&&e>this.bottom&&e<this.top,r}intersectsBounds(t,e){if("boolean"===typeof e&&(e={inclusive:e}),e=e||{},e.worldBounds){var n=this.wrapDateLine(e.worldBounds);t=t.wrapDateLine(e.worldBounds)}else n=this;null==e.inclusive&&(e.inclusive=!0);var r=!1,i=n.left===t.right||n.right===t.left||n.top===t.bottom||n.bottom===t.top;if(e.inclusive||!i){var o=t.bottom>=n.bottom&&t.bottom<=n.top||n.bottom>=t.bottom&&n.bottom<=t.top,a=t.top>=n.bottom&&t.top<=n.top||n.top>t.bottom&&n.top<t.top,s=t.left>=n.left&&t.left<=n.right||n.left>=t.left&&n.left<=t.right,l=t.right>=n.left&&t.right<=n.right||n.right>=t.left&&n.right<=t.right;r=(o||a)&&(s||l)}if(e.worldBounds&&!r){var u=e.worldBounds,c=u.getWidth(),h=!u.containsBounds(n),d=!u.containsBounds(t);h&&!d?(t=t.add(-c,0),r=n.intersectsBounds(t,{inclusive:e.inclusive})):d&&!h&&(n=n.add(-c,0),r=t.intersectsBounds(n,{inclusive:e.inclusive}))}return r}containsBounds(t,e,n){null==e&&(e=!1),null==n&&(n=!0);var r=this.contains(t.left,t.bottom,n),i=this.contains(t.right,t.bottom,n),o=this.contains(t.left,t.top,n),a=this.contains(t.right,t.top,n);return e?r||i||o||a:r&&i&&o&&a}determineQuadrant(t){var e="",n=this.getCenterLonLat();return e+=t.lat<n.lat?"b":"t",e+=t.lon<n.lon?"l":"r",e}wrapDateLine(t,e){e=e||{};var n=e.leftTolerance||0,r=e.rightTolerance||0,i=this.clone();if(t){var o=t.getWidth();while(i.left<t.left&&i.right-r<=t.left)i=i.add(o,0);while(i.left+n>=t.right&&i.right>t.right)i=i.add(-o,0);var a=i.left+n;a<t.right&&a>t.left&&i.right-r>t.right&&(i=i.add(-o,0))}return i}toServerJSONObject(){var t={rightTop:{x:this.right,y:this.top},leftBottom:{x:this.left,y:this.bottom},left:this.left,right:this.right,top:this.top,bottom:this.bottom};return t}destroy(){this.left=null,this.right=null,this.top=null,this.bottom=null,this.centerLonLat=null}static fromString(t,e){var n=t.split(",");return Qt.fromArray(n,e)}static fromArray(t,e){return!0===e?new Qt(t[1],t[0],t[3],t[2]):new Qt(t[0],t[1],t[2],t[3])}static fromSize(t){return new Qt(0,t.h,t.w,0)}static oppositeQuadrant(t){var e="";return e+="t"===t.charAt(0)?"b":"t",e+="l"===t.charAt(1)?"r":"l",e}}class $t extends Ut{constructor(t){super(),this.components=[],this.componentTypes=null,null!=t&&this.addComponents(t),this.CLASS_NAME="SuperMap.Geometry.Collection",this.geometryType="Collection"}destroy(){this.components.length=0,this.components=null,super.destroy()}clone(){for(var t=new $t,e=0,n=this.components.length;e<n;e++)t.addComponent(this.components[e].clone());return Wt.applyDefaults(t,this),t}getComponentsString(){for(var t=[],e=0,n=this.components.length;e<n;e++)t.push(this.components[e].toShortString());return t.join(",")}calculateBounds(){this.bounds=null;var t=new Qt,e=this.components;if(e)for(var n=0,r=e.length;n<r;n++)t.extend(e[n].getBounds());null!=t.left&&null!=t.bottom&&null!=t.right&&null!=t.top&&this.setBounds(t)}addComponents(t){Wt.isArray(t)||(t=[t]);for(var e=0,n=t.length;e<n;e++)this.addComponent(t[e])}addComponent(t,e){var n=!1;if(t&&(null==this.componentTypes||Wt.indexOf(this.componentTypes,t.CLASS_NAME)>-1)){if(null!=e&&e<this.components.length){var r=this.components.slice(0,e),i=this.components.slice(e,this.components.length);r.push(t),this.components=r.concat(i)}else this.components.push(t);t.parent=this,this.clearBounds(),n=!0}return n}removeComponents(t){var e=!1;Wt.isArray(t)||(t=[t]);for(var n=t.length-1;n>=0;--n)e=this.removeComponent(t[n])||e;return e}removeComponent(t){return Wt.removeItem(this.components,t),this.clearBounds(),!0}getArea(){for(var t=0,e=0,n=this.components.length;e<n;e++)t+=this.components[e].getArea();return t}equals(t){var e=!0;if(t&&t.CLASS_NAME&&this.CLASS_NAME===t.CLASS_NAME)if(Wt.isArray(t.components)&&t.components.length===this.components.length){for(var n=0,r=this.components.length;n<r;++n)if(!this.components[n].equals(t.components[n])){e=!1;break}}else e=!1;else e=!1;return e}getVertices(t){for(var e=[],n=0,r=this.components.length;n<r;++n)Array.prototype.push.apply(e,this.components[n].getVertices(t));return e}}class te extends $t{constructor(t){super(t),this.componentTypes=["SuperMap.Geometry.Point"],this.CLASS_NAME="SuperMap.Geometry.MultiPoint",this.geometryType="MultiPoint"}addPoint(t,e){this.addComponent(t,e)}removePoint(t){this.removeComponent(t)}}class ee extends te{constructor(t){super(t),this.componentTypes=["SuperMap.Geometry.Point","SuperMap.PointWithMeasure"],this.CLASS_NAME="SuperMap.Geometry.Curve",this.geometryType="Curve"}}class ne extends Ut{constructor(t,e,n,r){super(t,e,n,r),this.x=parseFloat(t),this.y=parseFloat(e),this.tag=r||0==r?parseFloat(r):null,this.type=n||"Point",this.CLASS_NAME="SuperMap.Geometry.Point",this.geometryType="Point"}clone(t){return null==t&&(t=new ne(this.x,this.y)),Wt.applyDefaults(t,this),t}calculateBounds(){this.bounds=new Qt(this.x,this.y,this.x,this.y)}equals(t){var e=!1;return null!=t&&(e=this.x===t.x&&this.y===t.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(t.x)&&isNaN(t.y)),e}move(t,e){this.x=this.x+t,this.y=this.y+e,this.clearBounds()}toShortString(){return this.x+", "+this.y}destroy(){this.x=null,this.y=null,this.tag=null,super.destroy()}getVertices(){return[this]}}class re extends ee{constructor(t){super(t),this.CLASS_NAME="SuperMap.Geometry.LineString",this.geometryType="LineString"}removeComponent(t){var e=this.components&&this.components.length>2;return e&&super.removeComponent.apply(this,arguments),e}getSortedSegments(){for(var t,e,n=this.components.length-1,r=new Array(n),i=0;i<n;++i)t=this.components[i],e=this.components[i+1],t.x<e.x?r[i]={x1:t.x,y1:t.y,x2:e.x,y2:e.y}:r[i]={x1:e.x,y1:e.y,x2:t.x,y2:t.y};function o(t,e){return t.x1-e.x1}return r.sort(o)}getVertices(t){var e;return e=!0===t?[this.components[0],this.components[this.components.length-1]]:!1===t?this.components.slice(1,this.components.length-1):this.components.slice(),e}static calculateCircle(t){if(t.length<3)return t;var e={},n=t[0],r=t[1],i=t[2],o=0,a=0,s=!0,l=0,u=0,c=0,h=72,d=[],f=(i.y-n.y)/(i.x-n.x),p=i.y-f*i.x;if(i.x!=n.x&&i.y!=n.y&&r.y==f*r.x+p||i.x==n.x&&r.x==n.x||i.y==n.y&&r.y==n.y||i.x==n.x&&i.y==n.y||i.x==r.x&&i.y==r.y||n.x==r.x&&n.y==r.y)d.push(n),d.push(r),d.push(i);else{var g=(r.x*r.x+r.y*r.y-(n.x*n.x+n.y*n.y))*(2*(i.y-n.y))-(i.x*i.x+i.y*i.y-(n.x*n.x+n.y*n.y))*(2*(r.y-n.y)),m=2*(r.x-n.x)*(i.x*i.x+i.y*i.y-(n.x*n.x+n.y*n.y))-2*(i.x-n.x)*(r.x*r.x+r.y*r.y-(n.x*n.x+n.y*n.y)),y=4*((r.x-n.x)*(i.y-n.y)-(i.x-n.x)*(r.y-n.y));e.x=g/y,e.y=m/y,o=Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y));var v=(n.x-i.x)*(n.x-i.x)+(n.y-i.y)*(n.y-i.y),b=(2*o*o-v)/(2*o*o);b=b>=1?1:b,b=b<=-1?-1:b,c=180*Math.acos(b)/Math.PI,c=i.x==n.x?e.x>n.x&&r.x>n.x||e.x<n.x&&r.x<n.x?360-c:c:e.y>f*e.x+p&&r.y>f*r.x+p||e.y<f*e.x+p&&r.y<f*r.x+p?360-c:c,a=c/72,i.y!=n.y?i.x==n.x?i.y>n.y?r.x<n.x&&(s=!1):r.x>n.x&&(s=!1):i.x<n.x?r.y<f*r.x+p&&(s=!1):r.y>f*r.x+p&&(s=!1):i.x>n.x?r.y>n.y&&(s=!1):r.y<n.y&&(s=!1);var _=(n.y-e.y)/(n.x-e.x),x=_>=0?180*Math.atan(_)/Math.PI:Math.abs(180*Math.atan(_)/Math.PI)+90,w=Math.abs(e.y);n.y==w&&w==i.y&&n.x<i.x&&(x+=180);var S=n.y-e.y;d.push(n);for(var E=1;E<h;E++){l=a*E,u=x,s?S>=0?_>=0?u+=l:u=180-(u-90)+l:u=_>0?u-180+l:90-u+l:S>=0?_>=0?u-=l:u=180-(u-90)-l:u=_>=0?u-180-l:90-u-l,u=u*Math.PI/180;var C=e.x+o*Math.cos(u),M=e.y+o*Math.sin(u);d.push(new ne(C,M))}d.push(i)}return d}static createLineEPS(t){var e=[],n=t.length;if(n<2)return t;for(var r=0;r<n;){var i=t[r].type;if("LTypeArc"==i){var o=re.createLineArc(e,r,n,t);e=o[0],r=o[1]}else e.push(t[r]),r++}return e}static createLineArc(t,e,n,r){if(0==e){let i=re.addPointEPS(r,e,n,"LTypeArc");Array.prototype.push.apply(t,i[0]),e=i[1]+1}else if(e==n-1){var i=[r[e-1],r[e]],o=re.calculateCircle(i);Array.prototype.push.apply(t,o),e++}else{let i=re.addPointEPS(r,e,n,"LTypeArc");t.pop(),Array.prototype.push.apply(t,i[0]),e=i[1]+1}return[t,e]}static addPointEPS(t,e,n,r){var i,o=[],a=e+1;return 0==e?Array.prototype.push.apply(o,[t[e],t[e+1]]):e==n-1?Array.prototype.push.apply(o,[t[e-1],t[e]]):Array.prototype.push.apply(o,[t[e-1],t[e],t[e+1]]),"LTypeCurve"==r?i=re.calculatePointsFBZN(o):"LTypeArc"==r&&(i=re.calculateCircle(o)),[i,a]}}class ie extends Ut{constructor(t,e,n){super(t,e,n),this.x=parseFloat(t),this.y=parseFloat(e),this.text=n.toString(),this.bsInfo={h:null,w:null},this.element=document.createElement("span"),this.CLASS_NAME="SuperMap.Geometry.GeoText",this.geometryType="GeoText"}destroy(){super.destroy(),this.x=null,this.y=null,this.text=null}getCentroid(){return new ne(this.x,this.y)}clone(t){return null==t&&(t=new ie(this.x,this.y,this.text)),Wt.applyDefaults(t,this),t}calculateBounds(){this.bounds=new Qt(this.x,this.y,this.x,this.y)}getLabelPxBoundsByLabel(t,e,n,r){var i,o,a,s,l,u=Wt.cloneObject(t),c=r.label||this.text,h=c.split("\n"),d=h.length;if(e=parseFloat(e),n=parseFloat(n),d>1&&(n=parseFloat(n)*d),r.labelAlign&&"cm"!==r.labelAlign)switch(r.labelAlign){case"lt":u.x+=e/2,u.y+=n/2;break;case"lm":u.x+=e/2;break;case"lb":u.x+=e/2,u.y-=n/2;break;case"ct":u.y+=n/2;break;case"cb":u.y-=n/2;break;case"rt":u.x-=e/2,u.y+=n/2;break;case"rm":u.x-=e/2;break;case"rb":u.x-=e/2,u.y-=n/2;break;default:break}return this.bsInfo.h=n,this.bsInfo.w=e,o=u.x-parseFloat(e)/2,a=u.y+parseFloat(n)/2,l=u.x+parseFloat(e)/2,s=u.y-parseFloat(n)/2,i=new Qt(o,a,l,s),i}getLabelPxBoundsByText(t,e){var n,r,i,o,a,s=this.getLabelPxSize(e),l=Wt.cloneObject(t);if(e.labelAlign&&"cm"!==e.labelAlign)switch(e.labelAlign){case"lt":l.x+=s.w/2,l.y+=s.h/2;break;case"lm":l.x+=s.w/2;break;case"lb":l.x+=s.w/2,l.y-=s.h/2;break;case"ct":l.y+=s.h/2;break;case"cb":l.y-=s.h/2;break;case"rt":l.x-=s.w/2,l.y+=s.h/2;break;case"rm":l.x-=s.w/2;break;case"rb":l.x-=s.w/2,l.y-=s.h/2;break;default:break}return this.bsInfo.h=s.h,this.bsInfo.w=s.w,r=l.x-s.w/2,i=l.y+s.h/2,a=e.fontStyle&&"italic"===e.fontStyle?l.x+s.w/2+parseInt(parseFloat(e.fontSize)/2):l.x+s.w/2,o=l.y-s.h/2,n=new Qt(r,i,a,o),n}getLabelPxSize(t){var e,n,r,i,o=1,a=.2,s=parseFloat(t.strokeWidth);e=t.label||this.text,n=t.fontSize?parseFloat(t.fontSize):parseFloat("12px");var l=e.split("\n"),u=l.length;i=u>1?n*u+u+s+a*n:n+s+a*n+1,r=0,this.labelWTmp&&r<this.labelWTmp&&(r=this.labelWTmp);for(var c=0;c<u;c++){var h=this.getTextCount(l[c]),d=this.labelWTmp=Wt.getTextBounds(t,l[c],this.element).textWidth+h.textC*o+s;r<d&&(r=d)}var f=new Object;return f.h=i,f.w=r,f}getTextCount(t){for(var e={},n=0,r=0,i=0;i<t.length;i++)t.charCodeAt(i)>255?n++:r++;return e.cnC=n,e.enC=r,e.textC=t.length,e}}class oe extends re{constructor(t){super(t),this.componentTypes=["SuperMap.Geometry.Point"],this.CLASS_NAME="SuperMap.Geometry.LinearRing",this.geometryType="LinearRing"}addComponent(t,e){var n=!1,r=this.components.pop();null==e&&t.equals(r)||(n=super.addComponent.apply(this,arguments));var i=this.components[0];return super.addComponent.apply(this,[i]),n}removeComponent(t){var e=this.components&&this.components.length>3;if(e){this.components.pop(),super.removeComponent.apply(this,arguments);var n=this.components[0];super.addComponent.apply(this,[n])}return e}getArea(){var t=0;if(this.components&&this.components.length>2){for(var e=0,n=0,r=this.components.length;n<r-1;n++){var i=this.components[n],o=this.components[n+1];e+=(i.x+o.x)*(o.y-i.y)}t=-e/2}return t}getVertices(t){return!0===t?[]:this.components.slice(0,this.components.length-1)}}class ae extends $t{constructor(t){super(t),this.componentTypes=["SuperMap.Geometry.LineString"],this.CLASS_NAME="SuperMap.Geometry.MultiLineString",this.geometryType="MultiLineString"}}class se extends $t{constructor(t){super(t),this.componentTypes=["SuperMap.Geometry.Polygon"],this.CLASS_NAME="SuperMap.Geometry.MultiPolygon",this.geometryType="MultiPolygon"}}class le extends $t{constructor(t){super(t),this.componentTypes=["SuperMap.Geometry.LinearRing"],this.CLASS_NAME="SuperMap.Geometry.Polygon",this.geometryType="Polygon"}getArea(){var t=0;if(this.components&&this.components.length>0){t+=Math.abs(this.components[0].getArea());for(var e=1,n=this.components.length;e<n;e++)t-=Math.abs(this.components[e].getArea())}return t}}class ue extends Ut{constructor(t,e,n,r){super(t,e,n,r),this.x=t,this.y=e,this.width=n,this.height=r,this.CLASS_NAME="SuperMap.Geometry.Rectangle",this.geometryType="Rectangle"}calculateBounds(){this.bounds=new Qt(this.x,this.y,this.x+this.width,this.y+this.height)}getArea(){var t=this.width*this.height;return t}}class ce{constructor(t,e){this.value=t||"",this.name=e||"token",this.CLASS_NAME="SuperMap.Credential"}getUrlParameters(){return this.name+"="+this.value}getValue(){return this.value}destroy(){this.value=null,this.name=null}}ce.CREDENTIAL=null;var he={toISOString:function(){if("toISOString"in Date.prototype)return function(t){return t.toISOString()};{function t(t,e){var n=t+"";while(n.length<e)n="0"+n;return n}return function(e){var n;return n=isNaN(e.getTime())?"Invalid Date":e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1,2)+"-"+t(e.getUTCDate(),2)+"T"+t(e.getUTCHours(),2)+":"+t(e.getUTCMinutes(),2)+":"+t(e.getUTCSeconds(),2)+"."+t(e.getUTCMilliseconds(),3)+"Z",n}}}(),parse:function(t){var e,n=t.match(/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:(?:T(\d{1,2}):(\d{2}):(\d{2}(?:\.\d+)?)(Z|(?:[+-]\d{1,2}(?::(\d{2}))?)))|Z)?$/);if(n&&(n[1]||n[7])){var r=parseInt(n[1],10)||0,i=parseInt(n[2],10)-1||0,o=parseInt(n[3],10)||1;e=new Date(Date.UTC(r,i,o));var a=n[7];if(a){var s=parseInt(n[4],10),l=parseInt(n[5],10),u=parseFloat(n[6]),c=0|u,h=Math.round(1e3*(u-c));if(e.setUTCHours(s,l,c,h),"Z"!==a){var d=parseInt(a,10),f=parseInt(n[8],10)||0,p=-1e3*(60*d*60+60*f);e=new Date(e.getTime()+p)}}}else e=new Date("invalid");return e}},de={observers:!1,KEY_SPACE:32,KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,element:function(t){return t.target||t.srcElement},isSingleTouch:function(t){return t.touches&&1===t.touches.length},isMultiTouch:function(t){return t.touches&&t.touches.length>1},isLeftClick:function(t){return t.which&&1===t.which||t.button&&1===t.button},isRightClick:function(t){return t.which&&3===t.which||t.button&&2===t.button},stop:function(t,e){e||(t.preventDefault?t.preventDefault():t.returnValue=!1),t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},findElement:function(t,e){var n=de.element(t);while(n.parentNode&&(!n.tagName||n.tagName.toUpperCase()!=e.toUpperCase()))n=n.parentNode;return n},observe:function(t,e,n,r){var i=Wt.getElement(t);if(r=r||!1,"keypress"===e&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||i.attachEvent)&&(e="keydown"),this.observers||(this.observers={}),!i._eventCacheID){var o="eventCacheID_";i.id&&(o=i.id+"_"+o),i._eventCacheID=Wt.createUniqueID(o)}var a=i._eventCacheID;this.observers[a]||(this.observers[a]=[]),this.observers[a].push({element:i,name:e,observer:n,useCapture:r}),i.addEventListener?"mousewheel"===e?i.addEventListener(e,n,{useCapture:r,passive:!1}):i.addEventListener(e,n,r):i.attachEvent&&i.attachEvent("on"+e,n)},stopObservingElement:function(t){var e=Wt.getElement(t),n=e._eventCacheID;this._removeElementObservers(de.observers[n])},_removeElementObservers:function(t){if(t)for(var e=t.length-1;e>=0;e--){var n=t[e],r=new Array(n.element,n.name,n.observer,n.useCapture);de.stopObserving.apply(this,r)}},stopObserving:function(t,e,n,r){r=r||!1;var i=Wt.getElement(t),o=i._eventCacheID;"keypress"===e&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||i.detachEvent)&&(e="keydown");var a=!1,s=de.observers[o];if(s){var l=0;while(!a&&l<s.length){var u=s[l];if(u.name===e&&u.observer===n&&u.useCapture===r){s.splice(l,1),0==s.length&&delete de.observers[o],a=!0;break}l++}}return a&&(i.removeEventListener?i.removeEventListener(e,n,r):i&&i.detachEvent&&i.detachEvent("on"+e,n)),a},unloadCache:function(){if(de&&de.observers){for(var t in de.observers){var e=de.observers[t];de._removeElementObservers.apply(this,[e])}de.observers=!1}},CLASS_NAME:"SuperMap.Event"};de.observe(window,"resize",de.unloadCache,!1);class fe{constructor(t,e,n,r,i){if(this.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"],this.listeners={},this.object=t,this.element=null,this.eventTypes=[],this.eventHandler=null,this.fallThrough=r,this.includeXY=!1,this.extensions={},this.extensionCount={},this.clearMouseListener=null,Wt.extend(this,i),null!=n)for(var o=0,a=n.length;o<a;o++)this.addEventType(n[o]);null!=e&&this.attachToElement(e),this.CLASS_NAME="SuperMap.Events"}destroy(){for(var t in this.extensions)"boolean"!==typeof this.extensions[t]&&this.extensions[t].destroy();this.extensions=null,this.element&&(de.stopObservingElement(this.element),this.element.hasScrollEvent&&de.stopObserving(window,"scroll",this.clearMouseListener)),this.element=null,this.listeners=null,this.object=null,this.eventTypes=null,this.fallThrough=null,this.eventHandler=null}addEventType(t){this.listeners[t]||(this.eventTypes.push(t),this.listeners[t]=[])}attachToElement(t){this.element?de.stopObservingElement(this.element):(this.eventHandler=Bt.bindAsEventListener(this.handleBrowserEvent,this),this.clearMouseListener=Bt.bind(this.clearMouseCache,this)),this.element=t;for(var e=0,n=this.BROWSER_EVENTS.length;e<n;e++){var r=this.BROWSER_EVENTS[e];this.addEventType(r),de.observe(t,r,this.eventHandler)}de.observe(t,"dragstart",de.stop)}on(t){for(var e in t)"scope"!==e&&t.hasOwnProperty(e)&&this.register(e,t.scope,t[e])}register(t,e,n,r){if(t in fe&&!this.extensions[t]&&(this.extensions[t]=new fe[t](this)),null!=n&&-1!==Wt.indexOf(this.eventTypes,t)){null==e&&(e=this.object);var i=this.listeners[t];i||(i=[],this.listeners[t]=i,this.extensionCount[t]=0);var o={obj:e,func:n};r?(i.splice(this.extensionCount[t],0,o),"object"===typeof r&&r.extension&&this.extensionCount[t]++):i.push(o)}}registerPriority(t,e,n){this.register(t,e,n,!0)}un(t){for(var e in t)"scope"!==e&&t.hasOwnProperty(e)&&this.unregister(e,t.scope,t[e])}unregister(t,e,n){null==e&&(e=this.object);var r=this.listeners[t];if(null!=r)for(var i=0,o=r.length;i<o;i++)if(r[i].obj===e&&r[i].func===n){r.splice(i,1);break}}remove(t){null!=this.listeners[t]&&(this.listeners[t]=[])}triggerEvent(t,e){var n=this.listeners[t];if(n&&0!=n.length){var r;null==e&&(e={}),e.object=this.object,e.element=this.element,e.type||(e.type=t),n=n.slice();for(var i=0,o=n.length;i<o;i++){var a=n[i];if(r=a.func.apply(a.obj,[e]),void 0!=r&&!1===r)break}return this.fallThrough||de.stop(e,!0),r}}handleBrowserEvent(t){var e=t.type,n=this.listeners[e];if(n&&0!=n.length){var r=t.touches;if(r&&r[0]){for(var i,o=0,a=0,s=r.length,l=0;l<s;++l)i=r[l],o+=i.clientX,a+=i.clientY;t.clientX=o/s,t.clientY=a/s}this.includeXY&&(t.xy=this.getMousePosition(t)),this.triggerEvent(e,t)}}clearMouseCache(){this.element.scrolls=null,this.element.lefttop=null;var t=document.body;t&&(0==t.scrollTop&&0==t.scrollLeft||!navigator.userAgent.match(/iPhone/i))&&(this.element.offsets=null)}getMousePosition(t){if(this.includeXY?this.element.hasScrollEvent||(de.observe(window,"scroll",this.clearMouseListener),this.element.hasScrollEvent=!0):this.clearMouseCache(),!this.element.scrolls){var e=Wt.getViewportElement();this.element.scrolls=[e.scrollLeft,e.scrollTop]}return this.element.lefttop||(this.element.lefttop=[document.documentElement.clientLeft||0,document.documentElement.clientTop||0]),this.element.offsets||(this.element.offsets=Wt.pagePosition(this.element)),new Nt(t.clientX+this.element.scrolls[0]-this.element.offsets[0]-this.element.lefttop[0],t.clientY+this.element.scrolls[1]-this.element.offsets[1]-this.element.lefttop[1])}}fe.prototype.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"];class pe{constructor(t,e,n){this.CLASS_NAME="SuperMap.Feature",this.layer=t,this.id=Wt.createUniqueID(this.CLASS_NAME+"_"),this.lonlat=e,this.data=null!=n?n:{}}destroy(){this.id=null,this.lonlat=null,this.data=null}}const ge={UNKNOWN:"Unknown",INSERT:"Insert",UPDATE:"Update",DELETE:"Delete"};class me extends pe{constructor(t,e,n){super(null,null,e),this.fid=null,this.geometry=t||null,this.attributes={},e&&(this.attributes=Wt.extend(this.attributes,e)),this.bounds=null,this.state=null,this.style=n||null,this.url=null,this.lonlat=null,this.CLASS_NAME="SuperMap.Feature.Vector",me.style={default:{fillColor:"#ee9900",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},select:{fillColor:"blue",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"blue",strokeOpacity:1,strokeWidth:2,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"pointer",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},temporary:{fillColor:"#66cccc",fillOpacity:.2,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#66cccc",strokeOpacity:1,strokeLinecap:"round",strokeWidth:2,strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"default",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},delete:{display:"none"}}}destroy(){this.layer&&(this.layer.removeFeatures(this),this.layer=null),this.geometry=null,super.destroy()}clone(){return new me(this.geometry?this.geometry.clone():null,this.attributes,this.style)}toState(t){if(t===ge.UPDATE)switch(this.state){case ge.UNKNOWN:case ge.DELETE:this.state=t;break;case ge.UPDATE:case ge.INSERT:break}else if(t===ge.INSERT)switch(this.state){case ge.UNKNOWN:break;default:this.state=t;break}else if(t===ge.DELETE)switch(this.state){case ge.INSERT:break;case ge.DELETE:break;case ge.UNKNOWN:case ge.UPDATE:this.state=t;break}else t===ge.UNKNOWN&&(this.state=t)}}class ye{constructor(t){this.data=null,this.keepData=!1,Wt.extend(this,t),this.options=t,this.CLASS_NAME="SuperMap.Format"}destroy(){}read(t){}write(t){}}class ve extends ye{constructor(t){super(t),this.indent="    ",this.space=" ",this.newline="\n",this.level=0,this.pretty=!1,this.nativeJSON=function(){return!(!window.JSON||"function"!==typeof JSON.parse||"function"!==typeof JSON.stringify)}(),this.CLASS_NAME="SuperMap.Format.JSON",this.serialize={object:function(t){if(null==t)return"null";if(t.constructor===Date)return this.serialize.date.apply(this,[t]);if(t.constructor===Array)return this.serialize.array.apply(this,[t]);var e,n,r,i=["{"];this.level+=1;var o=!1;for(e in t)t.hasOwnProperty(e)&&(n=this.write.apply(this,[e,this.pretty]),r=this.write.apply(this,[t[e],this.pretty]),null!=n&&null!=r&&(o&&i.push(","),i.push(this.writeNewline(),this.writeIndent(),n,":",this.writeSpace(),r),o=!0));return this.level-=1,i.push(this.writeNewline(),this.writeIndent(),"}"),i.join("")},array:function(t){var e,n=["["];this.level+=1;for(var r=0,i=t.length;r<i;++r)e=this.write.apply(this,[t[r],this.pretty]),null!=e&&(r>0&&n.push(","),n.push(this.writeNewline(),this.writeIndent(),e));return this.level-=1,n.push(this.writeNewline(),this.writeIndent(),"]"),n.join("")},string:function(t){var e={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(t)?'"'+t.replace(/([\x00-\x1f\\"])/g,(function(t,n){var r=e[n];return r||(r=n.charCodeAt(),"\\u00"+Math.floor(r/16).toString(16)+(r%16).toString(16))}))+'"':'"'+t+'"'},number:function(t){return isFinite(t)?String(t):"null"},boolean:function(t){return String(t)},date:function(t){function e(t){return t<10?"0"+t:t}return'"'+t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDate())+"T"+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())+'"'}}}read(t,e){var n;if(this.nativeJSON)try{n=JSON.parse(t,e)}catch(r){return{data:t}}return this.keepData&&(this.data=n),n}write(t,e){this.pretty=!!e;var n=null,r=typeof t;if(this.serialize[r])try{n=!this.pretty&&this.nativeJSON?JSON.stringify(t):this.serialize[r].apply(this,[t])}catch(i){}return n}writeIndent(){var t=[];if(this.pretty)for(var e=0;e<this.level;++e)t.push(this.indent);return t.join("")}writeNewline(){return this.pretty?this.newline:""}writeSpace(){return this.pretty?this.space:""}}class be{constructor(t,e,n){this.red=t||0==t?t:255,this.green=e||0,this.blue=n||0,this.CLASS_NAME="SuperMap.ServerColor"}destroy(){var t=this;t.red=null,t.green=null,t.blue=null}static fromJson(t){if(t){var e=new be,n=255;null!==t.red&&(n=Number(t.red)),e.red=n;var r=0;null!==t.green&&(r=Number(t.green)),e.green=r;var i=0;return null!==t.blue&&(i=Number(t.blue)),e.blue=i,e}}}class _e{constructor(t){this.fillBackColor=new be(255,255,255),this.fillBackOpaque=!1,this.fillForeColor=new be(255,0,0),this.fillGradientMode=null,this.fillGradientAngle=0,this.fillGradientOffsetRatioX=0,this.fillGradientOffsetRatioY=0,this.fillOpaqueRate=100,this.fillSymbolID=0,this.lineColor=new be(0,0,0),this.lineSymbolID=0,this.lineWidth=1,this.markerAngle=0,this.markerSize=1,this.markerSymbolID=-1,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.ServerStyle"}destroy(){var t=this;t.fillBackColor&&(t.fillBackColor.destroy(),t.fillBackColor=null),t.fillBackOpaque=null,t.fillForeColor&&(t.fillForeColor.destroy(),t.fillForeColor=null),t.fillGradientMode=null,t.fillGradientAngle=null,t.fillGradientOffsetRatioX=null,t.fillGradientOffsetRatioY=null,t.fillOpaqueRate=null,t.fillSymbolID=null,t.lineColor&&(t.lineColor.destroy(),t.lineColor=null),t.lineSymbolID=null,t.lineWidth=null,t.markerAngle=null,t.markerSize=null,t.markerSymbolID=null}toServerJSONObject(){var t={};return t=Wt.copyAttributes(t,this),t}static fromJson(t){if(t)return new _e({fillBackColor:be.fromJson(t.fillBackColor),fillBackOpaque:t.fillBackOpaque,fillForeColor:be.fromJson(t.fillForeColor),fillGradientMode:t.fillGradientMode,fillGradientAngle:t.fillGradientAngle,fillGradientOffsetRatioX:t.fillGradientOffsetRatioX,fillGradientOffsetRatioY:t.fillGradientOffsetRatioY,fillOpaqueRate:t.fillOpaqueRate,fillSymbolID:t.fillSymbolID,lineColor:be.fromJson(t.lineColor),lineSymbolID:t.lineSymbolID,lineWidth:t.lineWidth,markerAngle:t.markerAngle,markerSize:t.markerSize,markerSymbolID:t.markerSymbolID})}}class xe extends ne{constructor(t){super(t),this.measure=null,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.PointWithMeasure"}equals(t){var e=!1;if(null!=t){var n=this.x===t.x&&this.y===t.y&&this.measure===t.measure,r=isNaN(this.x)&&isNaN(this.y)&&isNaN(this.measure),i=isNaN(t.x)&&isNaN(t.y)&&isNaN(t.measure);e=n||r&&i}return e}toJson(){var t="{";return null!=this.measure&&void 0!=this.measure&&(t+='"measure":'+this.measure+","),t+='"x":'+this.x+",",t+='"y":'+this.y,t+="}",t}destroy(){var t=this;t.measure=null,t.x=null,t.y=null}static fromJson(t){if(t)return new xe({x:t.x,y:t.y,measure:t.measure})}}class we extends $t{constructor(t,e){super(t,e),this.id=null,this.center=null,this.style=null,this.length=null,this.maxM=null,this.minM=null,this.parts=null,this.points=null,this.type=null,this.componentTypes=["SuperMap.Geometry.LinearRing","SuperMap.Geometry.LineString"],e&&Wt.extend(this,e),this.CLASS_NAME="SuperMap.Route",this.geometryType="LINEM"}toJson(){var t="{";if(null!=this.id&&void 0!=this.id&&(t+='"id":'+this.id+","),null!=this.center&&void 0!=this.center&&(t+='"center":'+this.center+","),null!=this.style&&void 0!=this.style&&(t+='"style":'+this.style+","),null!=this.length&&void 0!=this.length&&(t+='"length":'+this.length+","),null!=this.maxM&&void 0!=this.maxM&&(t+='"maxM":'+this.maxM+","),null!=this.minM&&void 0!=this.minM&&(t+='"minM":'+this.minM+","),null!=this.type&&void 0!=this.type&&(t+='"type":"'+this.type+'",'),null!=this.parts&&void 0!=this.parts){t+='"parts":['+this.parts[0];for(var e=1;e<this.parts.length;e++)t+=","+this.parts[e];t+="],"}if(null!=this.components&&this.components.length>0){t+='"points":[';for(var n=0,r=this.components.length;n<r;n++)for(var i=0,o=this.components[n].components.length;i<o;i++)t+=this.components[n].components[i].toJson()+",";t=t.replace(/,$/g,""),t+="]"}return t=t.replace(/,$/g,""),t+="}",t}destroy(){var t=this;t.id=null,t.center=null,t.style=null,t.length=null,t.maxM=null,t.minM=null,t.type=null,t.parts=null,t.components.length=0,t.components=null,t.componentTypes=null}static fromJson(t){if(t){var e=t.parts||[],n=t.points||[],r=e.length,i=[];if(!(r>0))return null;for(var o=0,a=0,s=[];o<r;o++){for(var l=0;l<e[o];l++)s.push(xe.fromJson(n[a+l]));a+=e[o],s[0].equals(s[e[o]-1])?i.push(new oe(s)):i.push(new re(s)),s=[]}return new we(i,{id:t.id,center:t.center,style:t.style,length:t.length,maxM:t.maxM,minM:t.minM,type:t.type,parts:t.parts})}}}class Se{constructor(t){this.id=0,this.style=null,this.parts=null,this.points=null,this.type=null,this.prjCoordSys=null,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.ServerGeometry"}destroy(){var t=this;t.id=null,t.style=null,t.parts=null,t.partTopo=null,t.points=null,t.type=null,t.prjCoordSys=null}toGeometry(){var t=this,e=t.type;switch(e.toUpperCase()){case v.POINT:return t.toGeoPoint();case v.LINE:return t.toGeoLine();case v.LINEM:return t.toGeoLinem();case v.REGION:return t.toGeoRegion();case v.POINTEPS:return t.toGeoPoint();case v.LINEEPS:return t.toGeoLineEPS();case v.REGIONEPS:return t.toGeoRegionEPS();case v.GEOCOMPOUND:return t.transformGeoCompound()}}toGeoPoint(){var t=this,e=t.parts||[],n=t.points||[],r=e.length;if(r>0){if(1===r)return new ne(n[0].x,n[0].y);var i=[];for(let t=0;t<r;t++)i.push(new ne(n[t].x,n[t].y));return new te(i)}return null}toGeoLine(){var t=this,e=t.parts||[],n=t.points||[],r=e.length;if(r>0){if(1===r){let t=[];for(let r=0;r<e[0];r++)t.push(new ne(n[r].x,n[r].y));return t[0].equals(t[e[0]-1])?new oe(t):new re(t)}{let t=[];for(let i=0;i<r;i++){let r=[];for(let t=0;t<e[i];t++)r.push(new ne(n[t].x,n[t].y));t.push(new re(r)),n.splice(0,e[i])}return new ae(t)}}return null}toGeoLineEPS(){var t,e,n,r,i,o=this,a=o.parts||[],s=o.points||[],l=a.length;if(l>0){if(1===l){for(t=0,n=[];t<a[0];t++)n.push(new ne(s[t].x,s[t].y,s[t].type));return n[0].equals(n[a[0]-1])?(i=re.createLineEPS(n),new oe(i)):(i=re.createLineEPS(n),new re(i))}for(t=0,r=[];t<l;t++){for(e=0,n=[];e<a[t];e++)n.push(new ne(s[e].x,s[e].y));i=re.createLineEPS(n),r.push(new re(i)),s.splice(0,a[t])}return new ae(r)}return null}toGeoLinem(){var t=this;return we.fromJson(t)}toGeoRegion(){var t=this,e=t.parts||[],n=t.partTopo||[],r=t.points||[],i=e.length;if(i<=0)return null;var o=[],a=[];if(1==i){for(let t=0;t<r.length;t++)a.push(new ne(r[t].x,r[t].y));return o.push(new le([new oe(a)])),new se(o)}var s=[],l=[],u=[],c=[],h=[];for(let g=0,m=0;g<i;g++){for(let t=0;t<e[g];t++)a.push(new ne(r[m+t].x,r[m+t].y));m+=e[g];var d=new le([new oe(a)]);a=[],u.push(d),0===n.length&&c.push(d.getBounds()),h.push(1),l.push(d.getArea())}if(0===n.length){Se.bubbleSort(l,u,n,c);var f=[];for(let t=1;t<u.length;t++)for(let e=t-1;e>=0;e--)if(f[t]=-1,c[e].containsBounds(c[t])){h[t]=-1*h[e],h[t]<0&&(f[t]=e);break}for(let t=0;t<u.length;t++)h[t]>0?o.push(u[t]):(o[f[t]].components=o[f[t]].components.concat(u[t].components),o.push(""))}else{o=new Array;for(let t=0;t<u.length;t++)if(n[t]&&-1==n[t]?s=s.concat(u[t].components):(s.length>0&&o.length>0&&(o[o.length-1].components=o[o.length-1].components.concat(s),s=[]),o.push(u[t])),t==i-1){var p=o.length;if(p)o[p-1].components=o[p-1].components.concat(s);else for(let t=0,e=s.length;t<e;t++)o.push(new le(s))}}return new se(o)}toGeoRegionEPS(){var t=this,e=t.parts||[],n=t.partTopo||[],r=t.points||[],i=e.length;if(i<=0)return null;var o,a=[],s=[];if(1==i){for(var l=0;l<r.length;l++)s.push(new ne(r[l].x,r[l].y));return o=re.createLineEPS(s),a.push(new le([new oe(o)])),new se(a)}var u=[],c=[],h=[],d=[],f=[];for(let y=0,v=0;y<i;y++){for(let t=0;t<e[y];t++)s.push(new ne(r[v+t].x,r[v+t].y));v+=e[y],o=re.createLineEPS(s);var p=new le([new oe(o)]);s=[],h.push(p),0===n.length&&d.push(p.getBounds()),f.push(1),c.push(p.getArea())}if(0===n.length){Se.bubbleSort(c,h,n,d);var g=[];for(let t=1;t<h.length;t++)for(let e=t-1;e>=0;e--)if(g[t]=-1,d[e].containsBounds(d[t])){f[t]=-1*f[e],f[t]<0&&(g[t]=e);break}for(let t=0;t<h.length;t++)f[t]>0?a.push(h[t]):(a[g[t]].components=a[g[t]].components.concat(h[t].components),a.push(""))}else{a=new Array;for(let t=0;t<h.length;t++)if(n[t]&&-1==n[t]?u=u.concat(h[t].components):(u.length>0&&a.length>0&&(a[a.length-1].components=a[a.length-1].components.concat(u),u=[]),a.push(h[t])),t==i-1){var m=a.length;if(m)a[m-1].components=a[m-1].components.concat(u);else for(let t=0,e=u.length;t<e;t++)a.push(new le(u))}}return new se(a)}transformGeoCompound(){const t=this,e=t.geoParts||[],n=e.length;if(n<=0)return null;const r=[];for(let i=0;i<n;i++){const t=e[i];r.push(new Se(t).toGeometry())}return new $t(r)}static fromJson(t){if(t)return new Se({id:t.id,style:_e.fromJson(t.style),parts:t.parts,partTopo:t.partTopo,points:t.points,center:t.center,length:t.length,maxM:t.maxM,minM:t.minM,type:t.type})}static fromGeometry(t){if(t){var e=0,n=[],r=[],i=null,o=t.components,a=t.CLASS_NAME,s={epsgCode:t.SRID};if(isNaN(t.id)||(e=t.id),"SuperMap.Geometry.LinearRing"!=a&&"SuperMap.Geometry.LineString"!=a&&(t instanceof te||t instanceof ae)){let t=o.length;for(let e=0;e<t;e++){const t=o[e].getVertices();let i=t.length;n.push(i);for(let e=0;e<i;e++)r.push(new ne(t[e].x,t[e].y))}i="SuperMap.Geometry.MultiPoint"==a?v.POINT:v.LINE}else if(t instanceof se){let t=o.length;for(let e=0;e<t;e++){let t=o[e],i=t.components,a=i.length;for(let e=0;e<a;e++){const t=i[e].getVertices(),o=t.length+1;n.push(o);for(let e=0;e<o-1;e++)r.push(new ne(t[e].x,t[e].y));r.push(new ne(t[0].x,t[0].y))}}i=v.REGION}else if(t instanceof le){let t=o.length;for(let e=0;e<t;e++){const t=o[e].getVertices();let i=t.length+1;n.push(i);for(let e=0;e<i-1;e++)r.push(new ne(t[e].x,t[e].y));r.push(new ne(t[0].x,t[0].y))}i=v.REGION}else{const e=t.getVertices();let o=e.length;for(let t=0;t<o;t++)r.push(new ne(e[t].x,e[t].y));t instanceof oe&&(r.push(new ne(e[0].x,e[0].y)),o++),n.push(o),i=t instanceof ne?v.POINT:v.LINE}return new Se({id:e,style:null,parts:n,points:r,type:i,prjCoordSys:s})}}static IsClockWise(t){var e=t.length;if(e<3)return 0;var n=t[0].y*(t[e-1].x-t[1].x);t.push(t[0]);for(var r=1;r<e;r++)n+=t[r].y*(t[r-1].x-t[r+1].x);return.5*n}static bubbleSort(t,e,n,r){for(var i=0;i<t.length;i++)for(var o=0;o<t.length;o++)if(t[i]>t[o]){var a=t[o];t[o]=t[i],t[i]=a;var s=e[o];if(e[o]=e[i],e[i]=s,n&&n.length>0){var l=n[o];n[o]=n[i],n[i]=l}if(r&&r.length>0){var u=r[o];r[o]=r[i],r[i]=u}}}}class Ee extends ve{constructor(t){super(t),this.ignoreExtraDims=!0,this.CLASS_NAME="SuperMap.Format.GeoJSON",this.parseCoords={point:function(t){if(!1===this.ignoreExtraDims&&2!=t.length)throw"Only 2D points are supported: "+t;return new ne(t[0],t[1])},multipoint:function(t){for(var e=[],n=null,r=0,i=t.length;r<i;++r){try{n=this.parseCoords["point"].apply(this,[t[r]])}catch(o){throw o}e.push(n)}return new te(e)},linestring:function(t){for(var e=[],n=null,r=0,i=t.length;r<i;++r){try{n=this.parseCoords["point"].apply(this,[t[r]])}catch(o){throw o}e.push(n)}return new re(e)},multilinestring:function(t){for(var e=[],n=null,r=0,i=t.length;r<i;++r){try{n=this.parseCoords["linestring"].apply(this,[t[r]])}catch(o){throw o}e.push(n)}return new ae(e)},polygon:function(t){for(var e,n,r=[],i=0,o=t.length;i<o;++i){try{n=this.parseCoords["linestring"].apply(this,[t[i]])}catch(a){throw a}e=new oe(n.components),r.push(e)}return new le(r)},multipolygon:function(t){for(var e=[],n=null,r=0,i=t.length;r<i;++r){try{n=this.parseCoords["polygon"].apply(this,[t[r]])}catch(o){throw o}e.push(n)}return new se(e)},box:function(t){if(2!=t.length)throw"GeoJSON box coordinates must have 2 elements";return new le([new oe([new ne(t[0][0],t[0][1]),new ne(t[1][0],t[0][1]),new ne(t[1][0],t[1][1]),new ne(t[0][0],t[1][1]),new ne(t[0][0],t[0][1])])])}},this.extract={feature:function(t){var e=this.extract.geometry.apply(this,[t.geometry]),n={type:"Feature",properties:this.createAttributes(t),geometry:e};return t.geometry&&"TEXT"===t.geometry.type&&(n.properties.texts=t.geometry.texts,n.properties.textStyle=t.geometry.textStyle),t.fid&&(n.id=t.fid),t.ID&&(n.id=t.ID),n},geometry:function(t){if(null==t)return null;!t.parts&&t.points&&(t.parts=[t.points.length]);var e,n,r=t.hasOwnProperty("geometryType")?t:new Se(t).toGeometry()||t,i=r.geometryType||r.type;return"LinearRing"===i&&(i="LineString"),"LINEM"===i&&(i="MultiLineString"),e=this.extract[i.toLowerCase()].apply(this,[r]),i="TEXT"===i?"Point":i,n="Collection"===i?{type:"GeometryCollection",geometries:e}:{type:i,coordinates:e},n},point:function(t){var e=[t.x,t.y];for(var n in t)"x"===n||"y"===n||null===t[n]||isNaN(t[n])||e.push(t[n]);return e},text:function(t){return[t.points[0].x,t.points[0].y]},multipoint:function(t){for(var e=[],n=0,r=t.components.length;n<r;++n)e.push(this.extract.point.apply(this,[t.components[n]]));return e},linestring:function(t){for(var e=[],n=0,r=t.components.length;n<r;++n)e.push(this.extract.point.apply(this,[t.components[n]]));return e},multilinestring:function(t){for(var e=[],n=0,r=t.components.length;n<r;++n)e.push(this.extract.linestring.apply(this,[t.components[n]]));return e},polygon:function(t){for(var e=[],n=0,r=t.components.length;n<r;++n)e.push(this.extract.linestring.apply(this,[t.components[n]]));return e},multipolygon:function(t){for(var e=[],n=0,r=t.components.length;n<r;++n)e.push(this.extract.polygon.apply(this,[t.components[n]]));return e},collection:function(t){for(var e=t.components.length,n=new Array(e),r=0;r<e;++r)n[r]=this.extract.geometry.apply(this,[t.components[r]]);return n}}}read(t,e,n){e=e||"FeatureCollection";var r=null,i=null;if(i="string"==typeof t?super.read(t,n):t,i){if("string"!=typeof i.type);else if(this.isValidType(i,e))switch(e){case"Geometry":try{r=this.parseGeometry(i)}catch(l){}break;case"Feature":try{r=this.parseFeature(i),r.type="Feature"}catch(l){}break;case"FeatureCollection":switch(r=[],i.type){case"Feature":try{r.push(this.parseFeature(i))}catch(l){r=null}break;case"FeatureCollection":for(var o=0,a=i.features.length;o<a;++o)try{r.push(this.parseFeature(i.features[o]))}catch(l){r=null}break;default:try{var s=this.parseGeometry(i);r.push(new me(s))}catch(l){r=null}}break;default:break}}else;return r}write(t,e){return super.write(this.toGeoJSON(t),e)}fromGeoJSON(t,e,n){let r=this.read(t,e,n);return Wt.isArray(r)?r.map(t=>this._toiSevrerFeature(t)):this._toiSevrerFeature(r)}toGeoJSON(t){var e={type:null};if(Wt.isArray(t)){e.type="FeatureCollection";var n=t.length;e.features=new Array(n);for(var r=0;r<n;++r){var i=t[r];if(o(i)){let t={};t.geometry=i,e.features[r]=this.extract.feature.apply(this,[t])}else e.features[r]=this.extract.feature.apply(this,[i])}}else if(o(t)){let n={};n.geometry=t,e=this.extract.feature.apply(this,[n])}else e=this.extract.feature.apply(this,[t]);function o(t){return t.hasOwnProperty("parts")&&t.hasOwnProperty("points")||t.hasOwnProperty("geoParts")}return e}isValidType(t,e){var n=!1;switch(e){case"Geometry":-1==Wt.indexOf(["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","Box","GeometryCollection"],t.type)||(n=!0);break;case"FeatureCollection":n=!0;break;default:t.type==e&&(n=!0)}return n}parseFeature(t){var e,n,r,i;r=t.properties?t.properties:{},i=t.geometry&&t.geometry.bbox||t.bbox;try{n=this.parseGeometry(t.geometry)}catch(o){throw o}return e=new me(n,r),i&&(e.bounds=Qt.fromArray(i)),t.id&&(e.geometry.id=t.id,e.fid=t.id),e}parseGeometry(t){if(null==t)return null;var e;if("GeometryCollection"==t.type){if(!Wt.isArray(t.geometries))throw"GeometryCollection must have geometries array: "+t;for(var n=t.geometries.length,r=new Array(n),i=0;i<n;++i)r[i]=this.parseGeometry.apply(this,[t.geometries[i]]);e=new $t(r)}else{if(!Wt.isArray(t.coordinates))throw"Geometry must have coordinates array: "+t;if(!this.parseCoords[t.type.toLowerCase()])throw"Unsupported geometry type: "+t.type;try{e=this.parseCoords[t.type.toLowerCase()].apply(this,[t.coordinates])}catch(o){throw o}}return e}createCRSObject(t){var e=t.layer.projection.toString(),n={};if(e.match(/epsg:/i)){var r=parseInt(e.substring(e.indexOf(":")+1));n=4326==r?{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}}:{type:"name",properties:{name:"EPSG:"+r}}}return n}_toiSevrerFeature(t){const e=t.attributes,n=[],r=[];for(var i in e)n.push(i),r.push(e[i]);const o={fieldNames:n,fieldValues:r,geometry:Se.fromGeometry(t.geometry)};return o.geometry.id=t.fid,o}createAttributes(t){if(!t)return null;var e={};i(t,e);var n=["fieldNames","fieldValues","geometry","stringID","ID"];for(var r in t)n.indexOf(r)>-1||(e[r]=t[r]);function i(t,e){if(t.hasOwnProperty("fieldNames")&&t.hasOwnProperty("fieldValues")){var n=t.fieldNames,r=t.fieldValues;for(var i in n)e[n[i]]=r[i]}}return e}}class Ce extends ye{constructor(t){super(t),this.regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},this.CLASS_NAME="SuperMap.Format.WKT",this.extract={point:function(t){return t.x+" "+t.y},multipoint(t){for(var e=[],n=0,r=t.components.length;n<r;++n)e.push("("+this.extract.point.apply(this,[t.components[n]])+")");return e.join(",")},linestring(t){for(var e=[],n=0,r=t.components.length;n<r;++n)e.push(this.extract.point.apply(this,[t.components[n]]));return e.join(",")},multilinestring(t){for(var e=[],n=0,r=t.components.length;n<r;++n)e.push("("+this.extract.linestring.apply(this,[t.components[n]])+")");return e.join(",")},polygon(t){for(var e=[],n=0,r=t.components.length;n<r;++n)e.push("("+this.extract.linestring.apply(this,[t.components[n]])+")");return e.join(",")},multipolygon(t){for(var e=[],n=0,r=t.components.length;n<r;++n)e.push("("+this.extract.polygon.apply(this,[t.components[n]])+")");return e.join(",")},collection(t){for(var e=[],n=0,r=t.components.length;n<r;++n)e.push(this.extractGeometry.apply(this,[t.components[n]]));return e.join(",")}},this.parse={point:function(t){var e=Ft.trim(t).split(this.regExes.spaces);return new me(new ne(e[0],e[1]))},multipoint:function(t){for(var e,n=Ft.trim(t).split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(this.regExes.trimParens,"$1"),r.push(this.parse.point.apply(this,[e]).geometry);return new me(new te(r))},linestring:function(t){for(var e=Ft.trim(t).split(","),n=[],r=0,i=e.length;r<i;++r)n.push(this.parse.point.apply(this,[e[r]]).geometry);return new me(new re(n))},multilinestring:function(t){for(var e,n=Ft.trim(t).split(this.regExes.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(this.regExes.trimParens,"$1"),r.push(this.parse.linestring.apply(this,[e]).geometry);return new me(new ae(r))},polygon:function(t){for(var e,n,r,i=Ft.trim(t).split(this.regExes.parenComma),o=[],a=0,s=i.length;a<s;++a)e=i[a].replace(this.regExes.trimParens,"$1"),n=this.parse.linestring.apply(this,[e]).geometry,r=new oe(n.components),o.push(r);return new me(new le(o))},multipolygon:function(t){for(var e,n=Ft.trim(t).split(this.regExes.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(this.regExes.trimParens,"$1"),r.push(this.parse.polygon.apply(this,[e]).geometry);return new me(new se(r))},geometrycollection:function(t){t=t.replace(/,\s*([A-Za-z])/g,"|$1");for(var e=Ft.trim(t).split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return n}}}read(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=this.regExes.typeStr.exec(t);return i&&(n=i[1].toLowerCase(),r=i[2],this.parse[n]&&(e=this.parse[n].apply(this,[r]))),e}write(t){var e,n,r;t.constructor===Array?(e=t,r=!0):(e=[t],r=!1);var i=[];r&&i.push("GEOMETRYCOLLECTION(");for(var o=0,a=e.length;o<a;++o)r&&o>0&&i.push(","),n=e[o].geometry,i.push(this.extractGeometry(n));return r&&i.push(")"),i.join("")}extractGeometry(t){var e=t.CLASS_NAME.split(".")[2].toLowerCase();if(!this.extract[e])return null;var n="collection"===e?"GEOMETRYCOLLECTION":e.toUpperCase(),r=n+"("+this.extract[e].apply(this,[t])+")";return r}}var Me="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF4AAAAdCAYAAAAjHtusAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDozYWZlOGIwMi01MWE3LTRiZjYtYWVkYS05MGQ2ZTQ4YjZiMmUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODg0NkFBQUE3RjEzMTFFNzhFRjJFQkY4RjcxQjc1NjIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODg0NkFBQTk3RjEzMTFFNzhFRjJFQkY4RjcxQjc1NjIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4MWI3NzdhNC1lZmEyLTQ1MzUtOGQzNi03MmRjNDkyODMzN2UiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpjYTYzODVjMi1jNDQ1LTExN2EtYTc0ZC1lM2I5MzJlMGE4Y2QiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5q1HM0AAAF/ElEQVR42tSabYhUVRjHZ7W01C1uaCRW4F3oi9SXCUnwQ9gsGUFvOEtQH1bLu5VS9sbYh5KicjYt29qiGQwVg2xWWKgocob91AvC+CWsoJqB3qHMSdTMpZyeU/+Df07n3pk7997Z6cBv99z7nHvOvf/z/pxJNZvNVI/jCKXmv6EquAmVkxPSlvtp2GItr0/96fFQForChJAWDiVYTkMYMu4XBFcYjLOwWS3sNwmn8NGzZ0h4Flv/zwIdchAnh/slCGmmKUNIBzYPaXOUr0vPuEjD71JAPh7l61embzinhV3V8nnCGmGT8LwlzSL8/yUh4Tfjo9T/CgnCIYNKycA2Qq21AcHU/VHE80Idoo3Qs0W6p0UtUnkZvEMDeVcCyqxEafF7hL8Qf0oYsIj+lfC9cH1CwhchWAGCtZO+AooQOkdC1Km1VtCb63StW73uFSzgKFUkNwBbmZGGmqowhvg8ZNpH9oXChcIcYRdeNomgxLkaH+S1SGubAxyIpFv+Zp+0DYjrAS00j/dem2VGEl6FJ4Qa4quEu8j2hTCJ+GJhe4JjfQMf6JCYPPbysMPxBlp0BUKOogEF9Rg9/heNvNKYfM0KsZUZaYxX4STGrzJa+zbhPeFH2DcK10KItcI+pI0rVElwXl1ULaKnIJhDw0oRQpTQc1zcbwRU8ATy4DR6yMlTzwkqMziEWHvubJ4Nk4ZtHdnqwvwY17xq3Z4FjrG+z2Kdrdf2ZSGD+xlLPh6t1R0jP9fI22ZzKI92yvQl7EbmBxI4S7Y+vIAOL87QZqsc5uNnssxZIcfYjXT9snCR7jjobidp+FkxA2v+Cq1QervMDmp4P7Xs3YZtE9kOC3P/By6JGaETl8ElwueYTNTDq4UDsKnd7YfCNbT239LF1udS72xYJt1UWxNfN4IIP4bWuTpEja01JtMFZFsm/AHbtHBlDE6yasA4moYTrUbvdBTXHqUrAH4uSadbyzF+vbBM2IsNkS3MNa5305JxqfA02T4TnkX8XOH1mPw8ruVejpxbI9hZD2Cz1U7LdrrUvjP/WfZinNZhr6V27hP+FPZh9aLvLxVO4DllX0G2OcKnlO/DCblxaz6uXBtmi+8mBaP3/SP8IuEIiTRoPPQm2TaEmEyXo0JU+F0YiPFD0hhOsiE/vqeEVwyTgF8L51OilcIZ2I4Ll5NttvAJPfukUeB2sk0ZPSbKIUUJpCII7+DasWy08uhNNazT0wGHI7mAtB7KqMKm38HhDdAUibTVKGicbB8YAqrJ9DRsp43JdB4qUof1HQrPE6XTQWu3Ce/inVzjXhXpMiTwUYugNVQ+p80jrUsV5EH0POKeuXO9QjhFq5GryNYvfEMCDhsftYVsB9ETtG0V9ZjfhCURhbcJFpfwVZ9jvhxsLHwTYtp2svlWQw3vXL8UnqHVSIG8l8ex+tHhBXgjddgqHEZ8ufAA2aaEnYgrF/KrPXrEmMUqZ9THLW06xhoBaVueQpkug+ewOUphE3Qv2Q5gGamXYa+QbVq4O+DQ5FHyZqrjxNt7UHh9uuRa0F7HjCF8o9PCTOGnscM7g2u1Hl9C9oeEnxC/1ajZg8JLiM9Hj9GHJseMShwL2DO0G5yEWn3Zh1QUods5CPkIoqlwAZxhXMsb6HrcEPBxchhdJ6wj29vCW4hfLOzo8J3rltYX50nXQAATSf/K4DEaGlTLvplsk/QCpoD60EQ7gLYZc8H9wq+I3yncEOEcNhuz6HWf3XEiwU/4Y8YEqVp2P10rt+8REvBGw026i4aDcbL9jF8r8Blmf4fCOzhViiscskygXRdehf3CO4hfigmTBXyQrl8TFtD1IzQX3CbcQrY3hPcRv4z8OmHPXwchVNln2MmE7BX6VwIFi/he6uxvb6JM3m0fdqvx/ATidxg2JeC7VDErAw5NzGfvwRJVheEIQ8Mg/pdwIM+UOmi9Q8ivCsrIy0tF+wVbEcLrd3Pb2XisEb4Tdlhsi4WP4RBbaLGrHfC3PrvMIezy9rTpGm5lz9LOMG15xvFxD/j5gjzjjDbMOzk+9zzt3v5bgAEAibzFeFHVgYkAAAAASUVORK5CYII=";class Te{constructor(t){var e=this;t=t||{},this.speed=t.speed&&t.speed>=0?t.speed:1,this.frequency=t.speed&&t.frequency>=0?t.frequency:1e3,this.startTime=t.startTime&&null!=t.startTime?t.startTime:0,this.endTime=t.endTime&&null!=t.endTime&&t.endTime>=e.startTime?t.endTime:+new Date,this.repeat=void 0===t.repeat||t.repeat,this.reverse=void 0!==t.reverse&&t.reverse,this.currentTime=null,this.oldTime=null,this.running=!1,this.EVENT_TYPES=["start","pause","stop"],e.events=new fe(this,null,this.EVENT_TYPES),e.speed=Number(e.speed),e.frequency=Number(e.frequency),e.startTime=Number(e.startTime),e.endTime=Number(e.endTime),e.startTime=Date.parse(new Date(e.startTime)),e.endTime=Date.parse(new Date(e.endTime)),e.currentTime=e.startTime,this.CLASS_NAME="SuperMap.TimeControlBase"}updateOptions(t){var e=this;t=t||{},t.speed&&t.speed>=0&&(e.speed=t.speed,e.speed=Number(e.speed)),t.speed&&t.frequency>=0&&(e.frequency=t.frequency,e.frequency=Number(e.frequency)),t.startTime&&null!=t.startTime&&(e.startTime=t.startTime,e.startTime=Date.parse(new Date(e.startTime))),t.endTime&&null!=t.endTime&&t.endTime>=e.startTime&&(e.endTime=t.endTime,e.endTime=Date.parse(new Date(e.endTime))),null!=t.repeat&&(e.repeat=t.repeat),null!=t.reverse&&(e.reverse=t.reverse)}start(){var t=this;t.running||(t.running=!0,t.tick(),t.events.triggerEvent("start",t.currentTime))}pause(){var t=this;t.running=!1,t.events.triggerEvent("pause",t.currentTime)}stop(){var t=this;t.currentTime=t.startTime,t.running&&(t.running=!1),t.events.triggerEvent("stop",t.currentTime)}toggle(){var t=this;t.running?t.pause():t.start()}setSpeed(t){var e=this;return t>=0&&(e.speed=t,!0)}getSpeed(){return this.speed}setFrequency(t){var e=this;return t>=0&&(e.frequency=t,!0)}getFrequency(){return this.frequency}setStartTime(t){var e=this;return t=Date.parse(new Date(t)),!(t>e.endTime)&&(e.startTime=t,e.currentTime<e.startTime&&(e.currentTime=e.startTime,e.tick()),!0)}getStartTime(){return this.startTime}setEndTime(t){var e=this;return e.endTime=Date.parse(new Date(e.endTime)),!(t<e.startTime)&&(e.endTime=t,e.currentTime>=e.endTime&&(e.currentTime=e.startTime,e.tick()),!0)}getEndTime(){return this.endTime}setCurrentTime(t){var e=this;return e.currentTime=Date.parse(new Date(e.currentTime)),t>=e.startTime&&t<=e.endTime&&(e.currentTime=t,e.startTime=e.currentTime,e.tick(),!0)}getCurrentTime(){return this.currentTime}setRepeat(t){this.repeat=t}getRepeat(){return this.repeat}setReverse(t){this.reverse=t}getReverse(){return this.reverse}getRunning(){return this.running}destroy(){var t=this;t.speed=null,t.frequency=null,t.startTime=null,t.endTime=null,t.currentTime=null,t.repeat=null,t.running=!1,t.reverse=null}tick(){}}class Ae extends Te{constructor(t,e){super(e);var n=this;n.callback=t,Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,i.prototype=new r,i}),n.update=n.update.bind(n),n.oldTime=n.currentTime,n.CLASS_NAME="SuperMap.TimeFlowControl"}updateOptions(t){t=t||{},super.updateOptions(t)}start(){var t=this;t.running||(t.running=!0,t.reverse?t.currentTime===t.startTime&&(t.oldTime=t.endTime,t.currentTime=t.oldTime):t.oldTime===t.endTime&&(t.currentTime=t.startTime,t.oldTime=t.currentTime),t.tick())}stop(){super.stop();var t=this;t.oldTime=t.currentTime,t.running&&(t.running=!1),t.intervalId&&window.clearTimeout(t.intervalId)}destroy(){super.destroy();var t=this;t.oldTime=null,t.callback=null}tick(){var t=this;t.intervalId&&window.clearInterval(t.intervalId),t.intervalId=null,t.update(),t.intervalId=window.setInterval(t.update,t.frequency)}update(){var t=this;if(t.running)if(t.callback&&t.callback(t.currentTime),t.reverse){if(t.currentTime===t.startTime){if(!t.repeat)return t.running=!1,null;t.oldTime=t.endTime,t.currentTime=t.oldTime}else t.currentTime=t.oldTime,t.oldTime-=t.speed;t.oldTime<=t.startTime&&(t.oldTime=t.startTime)}else{if(t.currentTime===t.endTime){if(!t.repeat)return t.running=!1,t.stop(),null;t.stop(),t.currentTime=t.startTime,t.oldTime=t.currentTime,t.start()}else t.oldTime=t.currentTime,t.currentTime+=t.speed;t.currentTime>=t.endTime&&(t.currentTime=t.endTime)}}}n("146a"),n("e901");var Oe=n("d871"),ke=n.n(Oe);let Ie=window.fetch;var Pe,Le,Ne={limitLength:1500,queryKeys:[],queryValues:[],supermap_callbacks:{},addQueryStrings:function(t){var e=this;for(var n in t){e.queryKeys.push(n),"string"!==typeof t[n]&&(t[n]=Wt.toJSON(t[n]));var r=encodeURIComponent(t[n]);e.queryValues.push(r)}},issue:function(t){for(var e=this,n=e.getUid(),r=t.url,i=[],o=r,a=0,s=e.queryKeys?e.queryKeys.length:0,l=0;l<s;l++)if(o.length+e.queryKeys[l].length+2>=e.limitLength){if(0==a)return!1;i.push(o),o=r,a=0,l--}else if(o.length+e.queryKeys[l].length+2+e.queryValues[l].length>e.limitLength){var u=e.queryValues[l];while(u.length>0){var c=e.limitLength-o.length-e.queryKeys[l].length-2;o.indexOf("?")>-1?o+="&":o+="?";var h=u.substring(0,c);"%"===h.substring(c-1,c)?(c-=1,h=u.substring(0,c)):"%"===h.substring(c-2,c-1)&&(c-=2,h=u.substring(0,c)),o+=e.queryKeys[l]+"="+h,u=u.substring(c),h.length>0&&(i.push(o),o=r,a=0)}}else a++,o.indexOf("?")>-1?o+="&":o+="?",o+=e.queryKeys[l]+"="+e.queryValues[l];return i.push(o),e.send(i,"SuperMapJSONPCallbacks_"+n,t&&t.proxy)},getUid:function(){var t=(new Date).getTime(),e=Math.floor(1e17*Math.random());return 1e3*t+e},send:function(t,e,n){var r=t.length;if(r>0)return new Promise(i=>{for(var o=(new Date).getTime(),a=0;a<r;a++){var s=t[a];s.indexOf("?")>-1?s+="&":s+="?",s+="sectionCount="+r,s+="&sectionIndex="+a,s+="&jsonpUserID="+o,n&&(s=decodeURIComponent(s),s=n+encodeURIComponent(s)),ke()(s,{jsonpCallbackFunction:e,timeout:3e4}).then(t=>{i(t.json())})}})},GET:function(t){var e=this;return e.queryKeys.length=0,e.queryValues.length=0,e.addQueryStrings(t.params),e.issue(t)},POST:function(t){var e=this;return e.queryKeys.length=0,e.queryValues.length=0,e.addQueryStrings({requestEntity:t.data}),e.issue(t)},PUT:function(t){var e=this;return e.queryKeys.length=0,e.queryValues.length=0,e.addQueryStrings({requestEntity:t.data}),e.issue(t)},DELETE:function(t){var e=this;return e.queryKeys.length=0,e.queryValues.length=0,e.addQueryStrings({requestEntity:t.data}),e.issue(t)}},Re=function(t){Pe=t},De=function(){return void 0!=Pe?Pe:window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest},Fe=function(t){return Le=t},je=function(){return Le||45e3},Be={commit:function(t,e,n,r){switch(t=t?t.toUpperCase():t,t){case"GET":return this.get(e,n,r);case"POST":return this.post(e,n,r);case"PUT":return this.put(e,n,r);case"DELETE":return this.delete(e,n,r);default:return this.get(e,n,r)}},supportDirectRequest:function(t,e){return!!Wt.isInTheSameDomain(t)||(void 0!=e.crossOrigin?e.crossOrigin:De()||e.proxy)},get:function(t,e,n){n=n||{};var r="GET";if(t=Wt.urlAppend(t,this._getParameterString(e||{})),t=this._processUrl(t,n),!this.supportDirectRequest(t,n)){t=t.replace(".json",".jsonp");var i={url:t,data:e};return Ne.GET(i)}return this.urlIsLong(t)?this._postSimulatie(r,t.substring(0,t.indexOf("?")),e,n):this._fetch(t,e,n,r)},delete:function(t,e,n){n=n||{};var r="DELETE";if(t=Wt.urlAppend(t,this._getParameterString(e||{})),t=this._processUrl(t,n),!this.supportDirectRequest(t,n)){t=t.replace(".json",".jsonp");var i={url:t+="&_method=DELETE",data:e};return Ne.DELETE(i)}return this.urlIsLong(t)?this._postSimulatie(r,t.substring(0,t.indexOf("?")),e,n):this._fetch(t,e,n,r)},post:function(t,e,n){if(n=n||{},t=this._processUrl(t,n),!this.supportDirectRequest(t,n)){t=t.replace(".json",".jsonp");var r={url:Wt.urlAppend(t,"_method=POST"),data:e};return Ne.POST(r)}return this._fetch(t,e,n,"POST")},put:function(t,e,n){if(n=n||{},t=this._processUrl(t,n),!this.supportDirectRequest(t,n)){t=t.replace(".json",".jsonp");var r={url:t+="&_method=PUT",data:e};return Ne.PUT(r)}return this._fetch(t,e,n,"PUT")},urlIsLong:function(t){for(var e=0,n=null,r=0,i=t.length;r<i;r++)n=t.charCodeAt(r),n<127?e++:128<=n&&n<=2047?e+=2:2048<=n&&n<=65535&&(e+=3);return!(e<2e3)},_postSimulatie:function(t,e,n,r){var i=e.indexOf("?")>-1?"&":"?";return e+=i+"_method="+t,"string"!==typeof n&&(n=JSON.stringify(n)),this.post(e,n,r)},_processUrl:function(t,e){if(this._isMVTRequest(t))return t;if(-1===t.indexOf(".json")&&!e.withoutFormatSuffix)if(t.indexOf("?")<0)t+=".json";else{var n=t.split("?");2===n.length&&(t=n[0]+".json?"+n[1])}return e&&e.proxy&&("function"===typeof e.proxy?t=e.proxy(t):(t=decodeURIComponent(t),t=e.proxy+encodeURIComponent(t))),t},_fetch:function(t,e,n,r){return n=n||{},n.headers=n.headers||{},n.headers["Content-Type"]||FormData.prototype.isPrototypeOf(e)||(n.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8"),n.timeout?this._timeout(n.timeout,Ie(t,{method:r,headers:n.headers,body:"PUT"===r||"POST"===r?e:void 0,credentials:this._getWithCredentials(n),mode:"cors",timeout:je()}).then((function(t){return t}))):Ie(t,{method:r,body:"PUT"===r||"POST"===r?e:void 0,headers:n.headers,credentials:this._getWithCredentials(n),mode:"cors",timeout:je()}).then((function(t){return t}))},_getWithCredentials:function(t){return!0===t.withCredentials?"include":!1===t.withCredentials?"omit":"same-origin"},_fetchJsonp:function(t,e){return e=e||{},ke()(t,{method:"GET",timeout:e.timeout}).then((function(t){return t}))},_timeout:function(t,e){return new Promise((function(n,r){setTimeout((function(){r(new Error("timeout"))}),t),e.then(n,r)}))},_getParameterString:function(t){var e=[];for(var n in t){var r,i=t[n];if(null!=i&&"function"!==typeof i)r=Array.isArray(i)||"[object Object]"===i.toString()?encodeURIComponent(JSON.stringify(i)):encodeURIComponent(i),e.push(encodeURIComponent(n)+"="+r)}return e.join("&")},_isMVTRequest:function(t){return t.indexOf(".mvt")>-1||t.indexOf(".pbf")>-1}};class ze{static generateToken(t,e){var n=this.servers[t];if(n)return Be.post(n.tokenServiceUrl,JSON.stringify(e.toJSON())).then((function(t){return t.text()}))}static registerServers(t){this.servers=this.servers||{},Wt.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var n=t[e];this.servers[n.server]=n}}static registerToken(t,e){if(this.tokens=this.tokens||{},t&&e){var n=this._getTokenStorageKey(t);this.tokens[n]=e}}static registerKey(t,e){if(this.keys=this.keys||{},t&&!(t.length<1)&&e){t=Wt.isArray(t)?t:[t];for(var n=0;n<t.length;n++){var r=this._getUrlRestString(t[0])||t[0];this.keys[r]=e}}}static getServerInfo(t){return this.servers=this.servers||{},this.servers[t]}static getToken(t){if(t){this.tokens=this.tokens||{};var e=this._getTokenStorageKey(t);return this.tokens[e]}}static getKey(t){this.keys=this.keys||{};var e=this._getUrlRestString(t)||t;return this.keys[e]}static loginiServer(t,e,n,r){t=Wt.urlPathAppend(t,"services/security/login");var i={username:e&&e.toString(),password:n&&n.toString(),rememberme:r};i=JSON.stringify(i);var o={headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}};return Be.post(t,i,o).then((function(t){return t.json()}))}static logoutiServer(t){t=Wt.urlPathAppend(t,"services/security/logout");var e={headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withoutFormatSuffix:!0};return Be.get(t,"",e).then((function(){return!0})).catch((function(){return!1}))}static loginOnline(t,e){var n=ze.SSO+"/login?service="+t;this._open(n,e)}static loginiPortal(t,e,n){t=Wt.urlPathAppend(t,"web/login");var r={username:e&&e.toString(),password:n&&n.toString()};r=JSON.stringify(r);var i={headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!0};return Be.post(t,r,i).then((function(t){return t.json()}))}static logoutiPortal(t){t=Wt.urlPathAppend(t,"services/security/logout");var e={headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!0,withoutFormatSuffix:!0};return Be.get(t,"",e).then((function(){return!0})).catch((function(){return!1}))}static loginManager(t,e,n){if(Wt.isInTheSameDomain(t)){var r=Wt.urlPathAppend(t,"icloud/security/tokens"),i=e||{},o={username:i.userName&&i.userName.toString(),password:i.password&&i.password.toString()};o=JSON.stringify(o);var a={headers:{Accept:"*/*","Content-Type":"application/json"}},s=this;return Be.post(r,o,a).then((function(t){t.text().then((function(t){return s.imanagerToken=t,t}))}))}var l=!n||n.isNewTab;this._open(t,l)}static destroyAllCredentials(){this.keys=null,this.tokens=null,this.servers=null}static destroyToken(t){if(t){var e=this._getTokenStorageKey(t);this.tokens=this.tokens||{},this.tokens[e]&&delete this.tokens[e]}}static destroyKey(t){if(t){this.keys=this.keys||{};var e=this._getUrlRestString(t)||t;this.keys[e]&&delete this.keys[e]}}static appendCredential(t){var e=t,n=this.getToken(t),r=n?new ce(n,"token"):null;return r||(n=this.getKey(t),r=n?new ce(n,"key"):null),r&&(e=Wt.urlAppend(e,r.getUrlParameters())),e}static _open(t,e){e=null==e||e;var n=window.screen.availWidth/2-this.INNER_WINDOW_WIDTH/2,r=window.screen.availHeight/2-this.INNER_WINDOW_HEIGHT/2,i="height="+this.INNER_WINDOW_HEIGHT+", width="+this.INNER_WINDOW_WIDTH+",top="+r+", left="+n+",toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no";e?window.open(t,"login"):window.open(t,"login",i)}static _getTokenStorageKey(t){var e=/(.*?):\/\/([^\/]+)/i,n=t.match(e);return n?n[0]:t}static _getUrlRestString(t){if(!t)return t;var e=/(http|https):\/\/(.*\/rest)/i,n=t.match(e);return n?n[0]:t}}ze.INNER_WINDOW_WIDTH=600,ze.INNER_WINDOW_HEIGHT=600,ze.SSO="https://sso.supermap.com",ze.ONLINE="https://www.supermapol.com";class Ue{constructor(t,e){if(t){var n=t.substr(t.length-1,1);this.serviceUrl="/"===n?t.substr(0,t.length-2):t}this.options=e||{},this.CLASS_NAME="SuperMap.iManagerServiceBase"}request(t,e,n,r){r=r||{headers:{Accept:"*/*","Content-Type":"application/json"}},r.hasOwnProperty("withCredentials")||(r["withCredentials"]=!0),r["crossOrigin"]=this.options.crossOrigin,r["headers"]=this.options.headers;var i=ze.imanagerToken;return i&&(r.headers||(r.headers=[]),r.headers["X-Auth-Token"]=i),n&&(n=JSON.stringify(n)),Be.commit(t,e,n,r).then((function(t){return t.json()}))}}class Ge{constructor(t){t=t||{},this.nodeSpec="SMALL",this.nodeCount=1,this.nodeName="",this.password="",this.description="",this.physicalMachineName="",this.ips=[],this.userName="",Wt.extend(this,t)}}class qe extends Ue{constructor(t){super(t)}load(){return this.request("GET",this.serviceUrl+"/web/api/service.json")}createIServer(t){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/server.json",new Ge(t))}createIPortal(t){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/portal.json",new Ge(t))}iServerList(){return this.request("GET",this.serviceUrl+"/icloud/web/nodes/server.json")}iPortalList(){return this.request("GET",this.serviceUrl+"/icloud/web/nodes/portal.json")}startNodes(t){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/started.json",t)}stopNodes(t){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/stopped.json",t)}}class Ve{constructor(t,e){e=e||{},this.serviceUrl=t,this.CLASS_NAME="SuperMap.iPortalServiceBase",this.withCredentials=e.withCredentials||!1,this.crossOrigin=e.crossOrigin,this.headers=e.headers}request(t,e,n,r={headers:this.headers,crossOrigin:this.crossOrigin,withCredentials:this.withCredentials}){return e=ze.appendCredential(e),Be.commit(t,e,n,r).then((function(t){return t.json()}))}}class He{constructor(t){t=t||{},this.resourceType="",this.pageSize=12,this.currentPage=1,this.orderBy="UPDATETIME",this.orderType="DESC",this.searchType="PUBLIC",this.tags=[],this.dirIds=[],this.resourceSubTypes=[],this.aggregationTypes=[],this.text="",this.groupIds=[],this.departmentIds=[],Wt.extend(this,t)}}class We{constructor(t){t=t||{},this.content=[],this.total=0,this.currentPage=1,this.pageSize=12,this.aggregations=null,Wt.extend(this,t)}}class Ye extends Ve{constructor(t,e){super(t),e=e||{},this.authorizeSetting=[],this.bounds="",this.bounds4326="",this.checkStatus="",this.createTime=0,this.description=null,this.dirId=null,this.epsgCode=0,this.heatLevel=0,this.id=0,this.name="",this.personalDirId=null,this.resourceId=0,this.resourceSubType=null,this.resourceType=null,this.serviceRootUrlId=null,this.tags=null,this.thumbnail=null,this.updateTime=0,this.userName="",this.sourceJSON={},Wt.extend(this,e),this.resourceUrl=t+"/web/"+this.resourceType.replace("_","").toLowerCase()+"s/"+this.resourceId,this.withCredentials&&(this.resourceUrl=t+"/web/mycontent/"+this.resourceType.replace("_","").toLowerCase()+"s/"+this.resourceId)}load(){var t=this;return t.request("GET",t.resourceUrl+".json").then((function(e){if(e.error)return e;t.sourceJSON=e}))}update(){var t=this.resourceType.replace("_","").toLowerCase(),e={headers:{"Content-Type":"application/x-www-form-urlencoded"}};"data"===t&&(this.resourceUrl=this.resourceUrl+"/attributes.json");var n=JSON.stringify(this.sourceJSON);if("service"===t){var r={authorizeSetting:this.sourceJSON.authorizeSetting,metadata:this.sourceJSON.metadata,tags:this.sourceJSON.tags,thumbnail:this.sourceJSON.thumbnail,tokenRefreshUrl:this.sourceJSON.tokenRefreshUrl};n=JSON.stringify(r)}return this.request("PUT",this.resourceUrl,n,e)}}class Xe{constructor(t){t=t||{},this.ids=[],this.entities=[],this.resourceType="",Wt.extend(this,t)}}class Je extends Ve{constructor(t,e){super(t,e),this.iportalUrl=t,e=e||{},this.withCredentials=e.withCredentials||!1}load(){return Be.get(this.iportalUrl+"/web")}queryResources(t){if(!(t instanceof He))return new Promise((function(t){t("queryParams is not instanceof iPortalQueryParam !")}));var e=this,n=this.iportalUrl+"/gateway/catalog/resource/search.json";return t.t=(new Date).getTime(),this.request("GET",n,t).then((function(t){var n=[];(t.content||[]).forEach((function(t){n.push(new Ye(e.iportalUrl,t))}));let r=new We;return r.content=n,r.total=t.total,r.currentPage=t.currentPage,r.pageSize=t.pageSize,r.aggregations=t.aggregations,r}))}updateResourcesShareSetting(t){if(!(t instanceof Xe))return new Promise((function(t){t("shareParams is not instanceof iPortalShareParam !")}));var e=t.resourceType.replace("_","").toLowerCase()+"s";"datas"===e&&(e="mycontent/"+e);var n={ids:t.ids,entities:t.entities},r=this.iportalUrl+"/web/"+e+"/sharesetting.json";return this.request("PUT",r,JSON.stringify(n)).then((function(t){return t}))}}class Ze{constructor(t){t=t||{},this.permissionType="",this.entityType="",this.entityName="GUEST",this.entityId=null,Wt.extend(this,t)}}class Ke{constructor(t){t=t||{},this.rootUrl="",this.tags=[],this.entities=[],Wt.extend(this,t)}}class Qe{constructor(t){t=t||{},this.type="",this.tags=[],this.entities=[],this.metadata={},this.addedMapNames=[],this.addedSceneNames=[],Wt.extend(this,t)}}class $e{constructor(t){t=t||{},this.fileName="",this.type="",this.tags=[],this.dataMetaInfo={},Wt.extend(this,t)}}class tn{constructor(t){t=t||{},this.xField="",this.yField="",this.fileEncoding="UTF-8",this.xIndex=1,this.yIndex=1,this.fieldTypes=[],this.separator="",this.firstRowIsHead=!0,this.url="",this.dataStoreInfo={},Wt.extend(this,t)}}class en{constructor(t){t=t||{},this.type="",this.url="",this.connectionInfo={},Wt.extend(this,t)}}class nn{constructor(t){t=t||{},this.dataBase="",this.server="",Wt.extend(this,t)}}class rn extends Ve{constructor(t){super(t),this.iportalUrl=t}deleteResources(t){var e=t.resourceType.replace("_","").toLowerCase(),n=this.iportalUrl+"/web/"+e+"s.json?ids="+encodeURI(JSON.stringify(t.ids));return"data"===e?(n=this.iportalUrl+"/web/mycontent/datas/delete.json",this.request("POST",n,JSON.stringify(t.ids))):this.request("DELETE",n)}addMap(t){if(!(t instanceof Ke))return this.getErrMsgPromise("addMapParams is not instanceof IPortalAddResourceParam !");let e={rootUrl:t.rootUrl,tags:t.tags,authorizeSetting:t.entities},n=this.iportalUrl+"/web/maps/batchaddmaps.json";return this.request("POST",n,JSON.stringify(e)).then((function(t){return t}))}addScene(t){if(!(t instanceof Ke))return this.getErrMsgPromise("addSceneParams is not instanceof IPortalAddResourceParam !");let e={rootUrl:t.rootUrl,tags:t.tags,authorizeSetting:t.entities},n=this.iportalUrl+"/web/scenes/batchaddscenes.json";return this.request("POST",n,JSON.stringify(e)).then((function(t){return t}))}registerService(t){if(!(t instanceof Qe))return this.getErrMsgPromise("registerParams is not instanceof IPortalRegisterServiceParam !");let e={type:t.type,tags:t.tags,authorizeSetting:t.entities,metadata:t.metadata,addedMapNames:t.addedMapNames,addedSceneNames:t.addedSceneNames},n=this.iportalUrl+"/web/services.json";return this.request("POST",n,JSON.stringify(e)).then(t=>t)}getErrMsgPromise(t){return new Promise(e=>{e(t)})}uploadDataRequest(t,e){var n=this.iportalUrl+"/web/mycontent/datas/"+t+"/upload.json";return this.request("POST",n,e)}addData(t,e){if(!(t instanceof $e))return this.getErrMsgPromise("params is not instanceof iPortalAddDataParam !");var n,r=this.iportalUrl+"/web/mycontent/datas.json",i={fileName:t.fileName,tags:t.tags,type:t.type},o=t.type.toLowerCase();if("excel"===o||"csv"===o){if(!(t.dataMetaInfo instanceof tn))return this.getErrMsgPromise("params.dataMetaInfo is not instanceof iPortalDataMetaInfoParam !");n={xField:t.dataMetaInfo.xField,yField:t.dataMetaInfo.yField},"csv"===o&&(n.fileEncoding=t.dataMetaInfo.fileEncoding),i.coordType="WGS84",i.dataMetaInfo=n}else if("hdfs"===o||"hbase"===o){if(!(t.dataMetaInfo instanceof tn))return this.getErrMsgPromise("params.dataMetaInfo is not instanceof iPortalDataMetaInfoParam !");if(!(t.dataMetaInfo.dataStoreInfo instanceof en))return this.getErrMsgPromise("params.dataMetaInfo.dataStoreInfo is not instanceof iPortalDataStoreInfoParam !");var a={type:t.dataMetaInfo.dataStoreInfo.type};switch(o){case"hdfs":a.url=t.dataMetaInfo.dataStoreInfo.url,n={url:t.dataMetaInfo.url,dataStoreInfo:a};break;case"hbase":if(!(t.dataMetaInfo.dataStoreInfo.connectionInfo instanceof nn))return this.getErrMsgPromise("params.dataMetaInfo.dataStoreInfo.connectionInfo is not instanceof iPortalDataConnectionInfoParam !");a.connectionInfo={dataBase:t.dataMetaInfo.dataStoreInfo.connectionInfo.dataBase,server:t.dataMetaInfo.dataStoreInfo.connectionInfo.server,engineType:"HBASE"},a.datastoreType="SPATIAL",n={dataStoreInfo:a};break}i.dataMetaInfo=n}return this.request("POST",r,JSON.stringify(i)).then(t=>"hdfs"===o||"hbase"===o?t:t.childID?this.uploadDataRequest(t.childID,e):t.customResult)}publishOrUnpublish(t,e){if(!t.dataId||!t.serviceType)return this.getErrMsgPromise("option.dataID and option.serviceType are Required!");var n=t.dataId,r=t.dataServiceId,i=t.serviceType,o=this.iportalUrl+"/web/mycontent/datas/"+n+"/publishstatus.json?serviceType="+i;return r&&(o+="&dataServiceId="+r),this.request("PUT",o,JSON.stringify(e)).then(t=>e?(r||(r=t.customResult),r):t)}getDataPublishedStatus(t,e){var n=this.iportalUrl+"/web/mycontent/datas/"+t+"/publishstatus.json?dataServiceId="+e+"&forPublish=true";return this.request("GET",n)}unPublishDataService(t){return this.publishOrUnpublish(t,!1)}publishDataService(t){return this.publishOrUnpublish(t,!0)}}class on{constructor(t,e){let n=this;this.EVENT_TYPES=["processCompleted","processFailed"],this.events=null,this.eventListeners=null,this.url=null,this.urls=null,this.proxy=null,this.index=null,this.length=null,this.totalTimes=null,this.POLLING_TIMES=3,this.isInTheSameDomain=null,this.withCredentials=!1,Wt.isArray(t)?(n.urls=t,n.length=t.length,n.totalTimes=n.length,1===n.length?n.url=t[0]:(n.index=parseInt(Math.random()*n.length),n.url=t[n.index])):(n.totalTimes=1,n.url=t),Wt.isArray(t)&&!n.isServiceSupportPolling()&&(n.url=t[0],n.totalTimes=1),e=e||{},this.crossOrigin=e.crossOrigin,this.headers=e.headers,Wt.extend(this,e),n.isInTheSameDomain=Wt.isInTheSameDomain(n.url),n.events=new fe(n,null,n.EVENT_TYPES,!0),n.eventListeners instanceof Object&&n.events.on(n.eventListeners),this.CLASS_NAME="SuperMap.CommonServiceBase"}destroy(){let t=this;Wt.isArray(t.urls)&&(t.urls=null,t.index=null,t.length=null,t.totalTimes=null),t.url=null,t._processSuccess=null,t._processFailed=null,t.isInTheSameDomain=null,t.EVENT_TYPES=null,t.events&&(t.events.destroy(),t.events=null),t.eventListeners&&(t.eventListeners=null)}request(t){const e=t.scope.format;if(e&&!this.supportDataFormat(e))throw new Error(`${this.CLASS_NAME} is not surport ${e} format!`);let n=this;t.url=t.url||n.url,this._returnContent(t)&&!t.url.includes("returnContent=true")&&(t.url=Wt.urlAppend(t.url,"returnContent=true")),t.proxy=t.proxy||n.proxy,t.withCredentials=void 0!=t.withCredentials?t.withCredentials:n.withCredentials,t.crossOrigin=void 0!=t.crossOrigin?t.crossOrigin:n.crossOrigin,t.headers=t.headers||n.headers,t.isInTheSameDomain=n.isInTheSameDomain,t.withoutFormatSuffix=t.scope.withoutFormatSuffix||!1,t.url=ze.appendCredential(t.url),n.calculatePollingTimes(),t.scope=n;var r=t.scope?t.success.bind(t.scope):t.success,i=t.scope?t.failure.bind(t.scope):t.failure;t.success=n.getUrlCompleted(r,t),t.failure=n.getUrlFailed(i,t),n._commit(t)}getUrlCompleted(t,e){return function(n){t&&t(n,e)}}getUrlFailed(t,e){const n=this;return function(r){n.totalTimes>0?(n.totalTimes--,n.ajaxPolling(e)):t&&t(r,e)}}ajaxPolling(t){let e=this,n=t.url,r=/^http:\/\/([a-z]{9}|(\d+\.){3}\d+):\d{0,4}/;e.index=parseInt(Math.random()*e.length),e.url=e.urls[e.index],n=n.replace(r,r.exec(e.url)[0]),t.url=n,t.isInTheSameDomain=Wt.isInTheSameDomain(n),e._commit(t)}calculatePollingTimes(){let t=this;t.times?t.totalTimes>t.POLLING_TIMES?t.times>t.POLLING_TIMES?t.totalTimes=t.POLLING_TIMES:t.totalTimes=t.times:t.times<t.totalTimes&&(t.totalTimes=t.times):t.totalTimes>t.POLLING_TIMES&&(t.totalTimes=t.POLLING_TIMES),t.totalTimes--}isServiceSupportPolling(){let t=this;return!("SuperMap.REST.ThemeService"===t.CLASS_NAME||"SuperMap.REST.EditFeaturesService"===t.CLASS_NAME)}serviceProcessCompleted(t,e){t=Wt.transformResult(t),this.events.triggerEvent("processCompleted",{result:t,options:e})}serviceProcessFailed(t,e){t=Wt.transformResult(t);let n=t.error||t;this.events.triggerEvent("processFailed",{error:n,options:e})}_returnContent(t){return t.scope.format!==m.FGB&&!!t.scope.returnContent}supportDataFormat(t){return this.dataFormat().includes(t)}dataFormat(){return[m.GEOJSON,m.ISERVER]}_commit(t){if("POST"===t.method||"PUT"===t.method||"PATCH"===t.method)if(t.params&&(t.url=Wt.urlAppend(t.url,Wt.getParameterString(t.params||{}))),"object"===typeof t.data)try{t.params=Wt.toJSON(t.data)}catch(e){console.log("不是json对象")}else t.params=t.data;Be.commit(t.method,t.url,t.params,{headers:t.headers,withoutFormatSuffix:t.withoutFormatSuffix,withCredentials:t.withCredentials,crossOrigin:t.crossOrigin,timeout:t.async?0:null,proxy:t.proxy}).then((function(t){return t.text?t.text():t.json?t.json():t})).then((function(e){let n=e;return"string"===typeof e&&(n=(new ve).read(e)),(!n||n.error||n.code>=300&&304!==n.code)&&(n=n&&n.error?{error:n.error}:{error:n}),n&&t.scope.format===m.FGB&&(n.newResourceLocation=n.newResourceLocation.replace(".json","")+".fgb"),n})).catch((function(t){return{error:t}})).then(e=>{if(e.error){var n=t.scope?Bt.bind(t.failure,t.scope):t.failure;n(e)}else{e.succeed=void 0==e.succeed||e.succeed;var r=t.scope?Bt.bind(t.success,t.scope):t.success;r(e)}})}}class an{constructor(t){t.filters&&"string"===typeof t.filters&&(t.filters=t.filters.split(",")),this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,Wt.extend(this,t)}destroy(){this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null}}class sn{constructor(t){t.filters&&(t.filters=t.filters.split(",")),this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null,Wt.extend(this,t)}destroy(){this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null}}class ln extends on{constructor(t,e){super(t,e),this.options=e||{},this.eventCount=0,this.CLASS_NAME="SuperMap.AddressMatchService"}destroy(){super.destroy()}code(t,e,n){e instanceof an&&this.processAsync(t,e,n)}decode(t,e,n){e instanceof sn&&this.processAsync(t,e,n)}processAsync(t,e,n){let r=++this.eventCount,i={scope:this,processCompleted:function(t){if(r===t.result.eventId&&n)return delete t.result.eventId,n(t),this.events&&this.events.un(i),!1},processFailed:function(t){if((r===t.error.eventId||r===t.eventId)&&n)return n(t),this.events&&this.events.un(i),!1}};this.events.on(i),this.request({method:"GET",url:t,params:e,scope:this,success(t,e){t.eventId=r,this.serviceProcessCompleted(t,e)},failure(t,e){t.error&&(t.error.eventId=r),t.eventId=r,this.serviceProcessFailed(t,e)}})}serviceProcessCompleted(t,e){t.succeed&&delete t.succeed,super.serviceProcessCompleted(t,e)}serviceProcessFailed(t,e){super.serviceProcessFailed(t,e)}}class un{constructor(t){this.aggName=null,this.aggFieldName=null,this.CLASS_NAME="SuperMap.AggregationParameter",Wt.extend(this,t)}destroy(){var t=this;t.aggName=null,t.aggFieldName=null,t.aggType=null}}class cn extends un{constructor(t){super(),this.subAggs=null,this.aggType=null,this.CLASS_NAME="SuperMap.BucketAggParameter",Wt.extend(this,t)}destroy(){var t=this;t.subAggs&&(t.subAggs=null)}}class hn extends un{constructor(t){super(),this.aggType=vt.AVG,Wt.extend(this,t),this.CLASS_NAME="SuperMap.MetricsAggParameter"}destroy(){super.destroy();var t=this;t.aggType=null}}class dn{constructor(t){this.dataset=null,this.targetDatasourceName=null,this.totalGridName=null,this.diffuseDatasetGridName=null,this.durationDatasetGridName=null,this.directDatasetGridName=null,this.latitude=null,this.timeMode="MULTIDAYS",this.dayStart=null,this.dayEnd=null,this.hourStart=null,this.hourEnd=null,this.transmittance=null,this.hourInterval=null,this.dayInterval=null,this.deleteExistResultDataset=!1,Wt.extend(this,t),this.CLASS_NAME="SuperMap.AreaSolarRadiationParameters"}destroy(){var t=this;t.dataset=null,t.zFactor=1,t.averageCurvatureName=null,t.profileCurvatureName=null,t.planCurvatureName=null,t.deleteExistResultDataset=!0}static toObject(t,e){var n={};for(var r in t)if("dataset"!==r){var i="latitude"===r||"timeMode"===r||"dayStart"===r,o="dayEnd"===r||"hourStart"===r||"hourEnd"===r,a="transmittance"===r||"hourInterval"===r||"dayInterval"===r;i||o||a?n[r]=t[r]:e[r]=t[r]}e["parameter"]=n}}class fn extends on{constructor(t,e){super(t,e),this.format=e.format||m.GEOJSON,this.CLASS_NAME="SuperMap.SpatialAnalystBase"}destroy(){super.destroy(),this.format=null}serviceProcessCompleted(t,e){var n,r=this;if(t=Wt.transformResult(t),t&&r.format===m.GEOJSON&&"function"===typeof r.toGeoJSONResult)if(Wt.isArray(t)){for(var i=0;i<t.length;i++)t[i]=r.toGeoJSONResult(t[i]);n=t}else n=r.toGeoJSONResult(t);n||(n=t),r.events.triggerEvent("processCompleted",{result:n,options:e})}toGeoJSONResult(t){if(!t)return null;t.result&&t.result.resultGeometry&&(t=t.result);var e=new Ee;if(t.recordsets)for(var n=0,r=t.recordsets,i=r.length;n<i;n++)r[n].features&&(r[n].features=e.toGeoJSON(r[n].features));else t.recordset&&t.recordset.features&&(t.recordset.features=e.toGeoJSON(t.recordset.features));return t.resultGeometry&&(t.resultGeometry=e.toGeoJSON(t.resultGeometry)),t.regions&&(t.regions=e.toGeoJSON(t.regions)),t}}class pn extends fn{constructor(t,e){super(t,e),this.CLASS_NAME="SuperMap.AreaSolarRadiationService"}destroy(){super.destroy()}processAsync(t){if(t instanceof dn){var e=this,n={};t instanceof dn&&(e.url=Wt.urlPathAppend(e.url,`datasets/${t.dataset}/solarradiation`)),e.url=Wt.urlAppend(e.url,"returnContent=true"),dn.toObject(t,n);var r=Wt.toJSON(n);e.request({method:"POST",data:r,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}}class gn{constructor(t){this.exp=null,this.value=100,Wt.extend(this,t),this.CLASS_NAME="SuperMap.BufferDistance"}destroy(){this.exp=null,this.value=null}}class mn{constructor(t){this.endType=q.FLAT,this.leftDistance=new gn,this.rightDistance=new gn,this.semicircleLineSegment=4,this.radiusUnit=C.METER,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.BufferSetting"}destroy(){let t=this;t.endType=null,t.leftDistance&&(t.leftDistance.destroy(),t.leftDistance=null),t.rightDistance&&(t.rightDistance.destroy(),t.rightDistance=null),t.semicircleLineSegment=null,t.radiusUnit=null}}class yn{constructor(t){var e=this;e.bufferSetting=new mn,Wt.extend(this,t),this.CLASS_NAME="SuperMap.BufferAnalystParameters"}destroy(){var t=this;t.bufferSetting&&(t.bufferSetting.destroy(),t.bufferSetting=null)}}class vn{constructor(t){this.expectCount=1e3,this.dataset=null,this.dataReturnMode=X.RECORDSET_ONLY,this.deleteExistResultDataset=!0,Wt.extend(this,t),this.CLASS_NAME="SuperMap.DataReturnOption"}destroy(){var t=this;t.expectCount=null,t.dataset=null,t.dataReturnMode=null,t.deleteExistResultDataset=null}}class bn{constructor(t){this.attributeFilter=null,this.name=null,this.joinItems=null,this.linkItems=null,this.ids=null,this.orderBy=null,this.groupBy=null,this.fields=null,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.FilterParameter"}destroy(){var t=this;if(t.attributeFilter=null,t.name=null,t.joinItems){for(let e=0,n=t.joinItems,r=n.length;e<r;e++)n[e].destroy();t.joinItems=null}if(t.linkItems){for(let e=0,n=t.linkItems,r=n.length;e<r;e++)n[e].destroy();t.linkItems=null}t.ids=null,t.orderBy=null,t.groupBy=null,t.fields=null}}class _n extends yn{constructor(t){super(t),this.dataset=null,this.filterQueryParameter=new bn,this.resultSetting=new vn,this.isAttributeRetained=!0,this.isUnion=!1,Wt.extend(this,t),this.CLASS_NAME="SuperMap.DatasetBufferAnalystParameters"}destroy(){super.destroy();var t=this;t.dataset=null,t.filterQueryParameter&&(t.filterQueryParameter.destroy(),t.filterQueryParameter=null),t.resultSetting&&(t.resultSetting.destroy(),t.resultSetting=null),t.isAttributeRetained=null,t.isUnion=null}static toObject(t,e){for(var n in t)if("bufferSetting"===n)t.bufferSetting.radiusUnit=t.bufferSetting.radiusUnit.toUpperCase(),e.bufferAnalystParameter=t.bufferSetting;else if("resultSetting"===n)e.dataReturnOption=t.resultSetting;else{if("dataset"===n)continue;e[n]=t[n]}}}class xn extends yn{constructor(t){super(t),this.sourceGeometry=null,this.sourceGeometrySRID=null,t&&Wt.extend(this,t),this.CLASS_NAME=" SuperMap.GeometryBufferAnalystParameters"}destroy(){super.destroy();var t=this;t.sourceGeometry&&(t.sourceGeometry.destroy(),t.sourceGeometry=null)}static toObject(t,e){for(var n in t)if("bufferSetting"===n){var r={};for(var i in t.bufferSetting)r[i]=t.bufferSetting[i];e.analystParameter=r}else"sourceGeometry"===n?e.sourceGeometry=Se.fromGeometry(t.sourceGeometry):e[n]=t[n]}}class wn extends fn{constructor(t,e){super(t,e),this.mode=null,e&&Wt.extend(this,e),this.CLASS_NAME="SuperMap.BufferAnalystService"}destroy(){super.destroy(),this.mode=null}processAsync(t){var e={},n=this;t instanceof _n?(n.mode="datasets",n.url=Wt.urlPathAppend(n.url,"datasets/"+t.dataset+"/buffer"),_n.toObject(t,e)):t instanceof xn&&(n.mode="geometry",n.url=Wt.urlPathAppend(n.url,"geometry/buffer"),xn.toObject(t,e));var r=Wt.toJSON(e);this.returnContent=!0,n.request({method:"POST",data:r,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}dataFormat(){return[m.GEOJSON,m.ISERVER,m.FGB]}}class Sn{constructor(t){this.alias=null,this.connect=null,this.dataBase=null,this.driver=null,this.engineType=null,this.exclusive=null,this.OpenLinkTable=null,this.password=null,this.readOnly=null,this.server=null,this.user=null,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.DatasourceConnectionInfo"}destroy(){var t=this;t.alias=null,t.connect=null,t.dataBase=null,t.driver=null,t.engineType=null,t.exclusive=null,t.OpenLinkTable=null,t.password=null,t.readOnly=null,t.server=null,t.user=null}}class En{constructor(t){this.type=H.UDB,this.datasetName="analystResult",this.datasourceInfo=null,this.outputPath="",Wt.extend(this,t),this.CLASS_NAME="SuperMap.OutputSetting"}destroy(){var t=this;t.type=null,t.datasetName=null,t.outputPath=null,t.datasourceInfo instanceof Sn&&(t.datasourceInfo.destroy(),t.datasourceInfo=null)}}class Cn{constructor(t){this.items=null,this.numericPrecision=1,this.rangeMode=I.EQUALINTERVAL,this.rangeCount="",this.colorGradientType=L.YELLOW_RED,Wt.extend(this,t),this.CLASS_NAME="SuperMap.MappingParameters"}destroy(){var t=this;if(t.items){if(t.items.length>0)for(var e in t.items)t.items[e].destroy(),t.items[e]=null;t.items=null}t.numericPrecision=null,t.rangeMode=null,t.rangeCount=null,t.colorGradientType=null}}class Mn{constructor(t){if(this.datasetName="",this.bounds="",this.distance="",this.distanceField="",this.distanceUnit=ft.METER,this.dissolveField="",this.output=null,this.mappingParameters=null,!t)return this;Wt.extend(this,t),this.CLASS_NAME="SuperMap.BuffersAnalystJobsParameter"}destroy(){this.datasetName=null,this.bounds=null,this.distance=null,this.distanceField=null,this.distanceUnit=null,this.dissolveField=null,this.output instanceof En&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof Cn&&(this.mappingParameters.destroy(),this.mappingParameters=null)}static toObject(t,e){for(var n in t)"datasetName"!==n?"output"!==n?(e["analyst"]=e["analyst"]||{},"bounds"===n&&t[n]?e["analyst"][n]=t[n].toBBOX():e["analyst"][n]=t[n],"mappingParameters"===n&&(e["analyst"][n]=e["analyst"][n]||{},e["analyst"]["mappingParameters"]=t[n])):(e["output"]=e["output"]||{},e["output"]=t[n]):(e["input"]=e["input"]||{},e["input"][n]=t[n])}}class Tn extends on{constructor(t,e){e=e||{},e.EVENT_TYPES=["processCompleted","processFailed","processRunning"],super(t,e),this.CLASS_NAME="SuperMap.ProcessingServiceBase"}destroy(){super.destroy()}getJobs(t){var e=this;Be.get(ze.appendCredential(t),null,{proxy:e.proxy}).then((function(t){return t.json()})).then((function(t){e.events.triggerEvent("processCompleted",{result:t})})).catch((function(t){e.eventListeners.processFailed({error:t})}))}addJob(t,e,n,r){var i=this,o=null;e&&e instanceof n&&(o=new Object,n.toObject(e,o));let a=Object.assign({"Content-Type":"application/x-www-form-urlencoded"},i.headers||{});var s={proxy:i.proxy,headers:a,withCredentials:i.withCredentials,crossOrigin:i.crossOrigin,isInTheSameDomain:i.isInTheSameDomain};Be.post(ze.appendCredential(t),JSON.stringify(o),s).then((function(t){return t.json()})).then((function(t){t.succeed?i.serviceProcessCompleted(t,r):i.serviceProcessFailed(t)})).catch((function(t){i.serviceProcessFailed({error:t})}))}serviceProcessCompleted(t,e){t=Wt.transformResult(t),e=e||1e3;var n=this;if(t)var r=setInterval((function(){Be.get(ze.appendCredential(t.newResourceLocation),{_t:(new Date).getTime()}).then((function(t){return t.json()})).then((function(t){n.events.triggerEvent("processRunning",{id:t.id,state:t.state}),"LOST"!==t.state.runState&&"KILLED"!==t.state.runState&&"FAILED"!==t.state.runState||(clearInterval(r),n.events.triggerEvent("processFailed",{error:t.state.errorMsg,state:t.state.runState})),"FINISHED"===t.state.runState&&t.setting.serviceInfo&&(clearInterval(r),n.events.triggerEvent("processCompleted",{result:t}))})).catch((function(t){clearInterval(r),n.events.triggerEvent("processFailed",{error:t})}))}),e)}serviceProcessFailed(t){super.serviceProcessFailed(t)}}class An extends Tn{constructor(t,e){super(t,e),this.url=Wt.urlPathAppend(this.url,"spatialanalyst/buffers"),this.CLASS_NAME="SuperMap.BuffersAnalystJobsService"}destroy(){super.destroy()}getBuffersJobs(){super.getJobs(this.url)}getBuffersJob(t){super.getJobs(Wt.urlPathAppend(this.url,t))}addBuffersJob(t,e){super.addJob(this.url,t,Mn,e)}}class On{constructor(t){var e=this;this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=!1,Wt.extend(e,t),this.CLASS_NAME="SuperMap.BurstPipelineAnalystParameters"}destroy(){var t=this;t.sourceNodeIDs=null,t.edgeID=null,t.nodeID=null,t.isUncertainDirectionValid=null}}class kn extends on{constructor(t,e){super(t,e),this.format=m.GEOJSON,this.CLASS_NAME="SuperMap.NetworkAnalystServiceBase"}destroy(){super.destroy(),this.format=null}serviceProcessCompleted(t,e){var n,r=this;t=Wt.transformResult(t),t&&r.format===m.GEOJSON&&"function"===typeof r.toGeoJSONResult&&(n=r.toGeoJSONResult(t)),n||(n=t),r.events.triggerEvent("processCompleted",{result:n,options:e})}toGeoJSONResult(t){return null}}class In extends kn{constructor(t,e){super(t,e),this.CLASS_NAME="SuperMap.BurstPipelineAnalystService"}destroy(){super.destroy()}processAsync(t){if(!(t instanceof On))return null;var e,n=this;if(n.url=Wt.urlPathAppend(n.url,"burstAnalyse"),e={sourceNodeIDs:t.sourceNodeIDs,isUncertainDirectionValid:t.isUncertainDirectionValid},null!==t.edgeID&&null!==t.nodeID)throw new Error("edgeID and nodeID cannot be null at the same time.");if(null===t.edgeID&&null===t.nodeID)throw new Error("edgeID and nodeID cannot be null at the same time.");null!==t.edgeID?e.edgeID=t.edgeID:e.nodeID=t.nodeID,n.request({method:"GET",params:e,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}class Pn extends on{constructor(t,e){super(t,e),this.CLASS_NAME="SuperMap.ChartFeatureInfoSpecsService"}destroy(){super.destroy(),Wt.reset(this)}processAsync(){var t=this,e="GET";t.isTempLayers||Wt.urlPathAppend(t.url,"chartFeatureInfoSpecs"),t.request({method:e,params:null,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}class Ln{constructor(t){this.isQueryPoint=null,this.isQueryLine=null,this.isQueryRegion=null,this.attributeFilter=null,this.chartFeatureInfoSpecCode=null,Wt.extend(this,t),this.CLASS_NAME="SuperMap.ChartQueryFilterParameter"}destroy(){var t=this;t.isQueryPoint=null,t.isQueryLine=null,t.isQueryRegion=null,t.attributeFilter=null,t.chartFeatureInfoSpecCode=null}toJson(){var t="";return t+='"isQueryPoint":'+this.isQueryPoint+",",t+='"isQueryLine":'+this.isQueryLine+",",t+='"isQueryRegion":'+this.isQueryRegion+",",this.attributeFilter&&(t+='"attributeFilter": "'+this.attributeFilter+'",'),t+='"chartFeatureInfoSpecCode":'+this.chartFeatureInfoSpecCode,t="{"+t+"}",t}}class Nn{constructor(t){this.queryMode=null,this.bounds=null,this.chartLayerNames=null,this.chartQueryFilterParameters=null,this.returnContent=!0,this.startRecord=0,this.expectCount=null,Wt.extend(this,t),this.CLASS_NAME="SuperMap.ChartQueryParameters"}destroy(){var t=this;t.queryMode=null,t.bounds=null,t.chartLayerNames=null,t.chartQueryFilterParameters=null,t.returnContent=!0,t.startRecord=0,t.expectCount=null}getVariablesJson(){var t="";if(t+='"queryMode":"'+this.queryMode+'",',this.chartLayerNames&&this.chartLayerNames.length){for(var e=[],n=this.chartLayerNames.length,r=0;r<n;r++)e.push('"'+this.chartLayerNames[r]+'"');var i="["+e.join(",")+"]";t+='"chartLayerNames":'+i+","}if("ChartBoundsQuery"===this.queryMode&&this.bounds&&(t+='"bounds":{"leftBottom":{"x":'+this.bounds.left+',"y":'+this.bounds.bottom+'},"rightTop":{"x":'+this.bounds.right+',"y":'+this.bounds.top+"}},"),this.chartQueryFilterParameters&&this.chartQueryFilterParameters.length){for(var o=[],a=this.chartQueryFilterParameters.length,s=0;s<a;s++){var l=this.chartQueryFilterParameters[s];l instanceof Ln&&o.push(l.toJson())}var u="["+o.join(",")+"]";u='"chartQueryParams":'+u+",",u+='"startRecord":'+this.startRecord+",",u+='"expectCount":'+this.expectCount,u="{"+u+"}",t+='"chartQueryParameters":'+u}return t="{"+t+"}",t}}class Rn{constructor(t){t&&(this.customParams=null,this.prjCoordSys=null,this.expectCount=1e5,this.networkType=v.LINE,this.queryOption=b.ATTRIBUTEANDGEOMETRY,this.queryParams=null,this.startRecord=0,this.holdTime=10,this.returnCustomResult=!1,this.returnFeatureWithFieldCaption=!1,Wt.extend(this,t),this.CLASS_NAME="SuperMap.QueryParameters")}destroy(){var t=this;if(t.customParams=null,t.expectCount=null,t.networkType=null,t.queryOption=null,t.queryParams){for(var e=0,n=t.queryParams,r=n.length;e<r;e++)n[e].destroy();t.queryParams=null}t.startRecord=null,t.holdTime=null,t.returnCustomResult=null,t.prjCoordSys=null}}class Dn extends on{constructor(t,e){super(t,e),e=e||{},this.returnContent=null,this.format=m.GEOJSON,Wt.extend(this,e);var n=this;e.format&&(n.format=e.format.toUpperCase()),n.url&&(n.url=Wt.urlPathAppend(n.url,"queryResults"),this.CLASS_NAME="SuperMap.ChartQueryService")}destroy(){var t=this;on.prototype.destroy.apply(this,arguments),t.returnContent=null,t.format=null}processAsync(t){if(t instanceof Nn){var e,n=this;n.returnContent=t.returnContent,e=t.getVariablesJson(),n.returnContent&&(n.url=Wt.urlAppend(n.url,"returnContent=true")),n.request({method:"POST",data:e,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}serviceProcessCompleted(t,e){var n=this;if(t=Wt.transformResult(t),t&&t.recordsets&&n.format===m.GEOJSON)for(var r=0,i=t.recordsets,o=i.length;r<o;r++)if(i[r].features){var a=new Ee;i[r].features=a.toGeoJSON(i[r].features)}n.events.triggerEvent("processCompleted",{result:t,options:e})}getQueryParameters(t){return new Rn({queryMode:t.queryMode,bounds:t.bounds,chartLayerNames:t.chartLayerNames,chartQueryFilterParameters:t.chartQueryFilterParameters,returnContent:t.returnContent})}}class Fn{constructor(t){this.clipDatasetName=null,this.clipDatasourceName=null,this.clipRegion=null,this.isClipInRegion=!0,this.isExactClip=null,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.ClipParameter"}destroy(){var t=this;t.clipDatasetName=null,t.clipDatasourceName=null,t.clipRegion=null,t.isClipInRegion=null,t.isExactClip=null}toJSON(){return Wt.toJSON({isClipInRegion:this.isClipInRegion,clipDatasetName:this.clipDatasetName,clipDatasourceName:this.clipDatasourceName,isExactClip:this.isExactClip,clipRegion:Se.fromGeometry(this.clipRegion)})}}class jn{constructor(t){t=t||{},this.elevation=null,this.color=null,Wt.extend(this,t);var e=this,n=e.color;n&&(e.color=new be(n.red,n.green,n.blue)),this.CLASS_NAME="SuperMap.ColorDictionary"}destroy(){Wt.reset(this)}toServerJSONObject(){var t={};return t=Wt.copyAttributes(t,this),t}}class Bn{constructor(t){t&&(this.returnEdgeFeatures=!1,this.returnEdgeGeometry=!1,this.returnEdgeIDs=!1,this.returnNodeFeatures=!1,this.returnNodeGeometry=!1,this.returnNodeIDs=!1,this.returnPathGuides=!1,this.returnRoutes=!1,Wt.extend(this,t),this.CLASS_NAME="SuperMap.TransportationAnalystResultSetting")}destroy(){var t=this;t.returnEdgeFeatures=null,t.returnEdgeGeometry=null,t.returnEdgeIDs=null,t.returnNodeFeatures=null,t.returnNodeGeometry=null,t.returnNodeIDs=null,t.returnPathGuides=null,t.returnRoutes=null}}class zn{constructor(t){t&&(this.barrierEdgeIDs=null,this.barrierNodeIDs=null,this.barrierPoints=null,this.weightFieldName=null,this.turnWeightField=null,this.resultSetting=new Bn,Wt.extend(this,t),this.CLASS_NAME="SuperMap.TransportationAnalystParameter")}destroy(){var t=this;if(t.barrierEdgeIDs=null,t.barrierNodeIDs=null,t.weightFieldName=null,t.turnWeightField=null,t.resultSetting&&(t.resultSetting.destroy(),t.resultSetting=null),t.barrierPoints&&t.barrierPoints.length)for(var e in t.barrierPoints)t.barrierPoints[e].destroy();t.barrierPoints=null}}class Un{constructor(t){this.isAnalyzeById=!1,this.nodes=null,this.parameter=new zn,Wt.extend(this,t),this.CLASS_NAME="SuperMap.ComputeWeightMatrixParameters"}destroy(){var t=this;t.isAnalyzeById=null,t.nodes=null,t.parameter&&(t.parameter.destroy(),t.parameter=null)}}class Gn extends kn{constructor(t,e){super(t,e),this.CLASS_NAME="SuperMap.ComputeWeightMatrixService"}destroy(){super.destroy()}processAsync(t){if(t instanceof Un){var e,n=this;n.url=Wt.urlPathAppend(n.url,"weightmatrix"),e={parameter:Wt.toJSON(t.parameter),nodes:n.getJson(t.isAnalyzeById,t.nodes)},n.request({method:"GET",params:e,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}getJson(t,e){var n="[",r=e?e.length:0;if(!1===t)for(let i=0;i<r;i++)i>0&&(n+=","),n+='{"x":'+e[i].x+',"y":'+e[i].y+"}";else if(!0===t)for(let i=0;i<r;i++)i>0&&(n+=","),n+=e[i];return n+="]",n}}class qn extends on{constructor(t,e){e=e||{},e.EVENT_TYPES=["broadcastSocketConnected","broadcastSocketClosed","broadcastSocketError","broadcastFailed","broadcastSucceeded","subscribeSocketConnected","subscribeSocketClosed","subscribeSocketError","messageSucceeded","setFilterParamSucceeded"],super(t,e),this.geometry=null,this.prjCoordSys=null,this.excludeField=null,Wt.extend(this,e),this.CLASS_NAME="SuperMap.DataFlowService"}initBroadcast(){var t=this;return this.broadcastWebSocket=this._connect(Wt.urlPathAppend(t.url,"broadcast")),this.broadcastWebSocket.onopen=function(e){t.broadcastWebSocket.isOpen=!0,e.eventType="broadcastSocketConnected",t.events.triggerEvent("broadcastSocketConnected",e)},this.broadcastWebSocket.onclose=function(e){t.broadcastWebSocket&&(t.broadcastWebSocket.isOpen=!1),e.eventType="broadcastSocketClosed",t.events.triggerEvent("broadcastSocketClosed",e)},this.broadcastWebSocket.onerror=function(e){e.eventType="broadcastSocketError",t.events.triggerEvent("broadcastSocketError",e)},this}broadcast(t){this.broadcastWebSocket&&this.broadcastWebSocket.isOpen?(this.broadcastWebSocket.send(JSON.stringify(t)),this.events.triggerEvent("broadcastSucceeded")):this.events.triggerEvent("broadcastFailed")}initSubscribe(){var t=this;return this.subscribeWebSocket=this._connect(Wt.urlPathAppend(t.url,"subscribe")),this.subscribeWebSocket.onopen=function(e){t.subscribeWebSocket.send(t._getFilterParams()),e.eventType="subscribeSocketConnected",t.events.triggerEvent("subscribeSocketConnected",e)},this.subscribeWebSocket.onclose=function(e){e.eventType="subscribeWebSocketClosed",t.events.triggerEvent("subscribeWebSocketClosed",e)},this.subscribeWebSocket.onerror=function(e){e.eventType="subscribeSocketError",t.events.triggerEvent("subscribeSocketError",e)},this.subscribeWebSocket.onmessage=function(e){t._onMessage(e)},this}setExcludeField(t){return this.excludeField=t,this.subscribeWebSocket.send(this._getFilterParams()),this}setGeometry(t){return this.geometry=t,this.subscribeWebSocket.send(this._getFilterParams()),this}unSubscribe(){this.subscribeWebSocket&&(this.subscribeWebSocket.close(),this.subscribeWebSocket=null)}unBroadcast(){this.broadcastWebSocket&&(this.broadcastWebSocket.close(),this.broadcastWebSocket=null)}destroy(){on.prototype.destroy.apply(this,arguments);var t=this;t.geometry=null,t.prjCoordSys=null,t.excludeField=null,this.unBroadcast(),this.unSubscribe()}_getFilterParams(){var t={filterParam:{prjCoordSys:this.prjCoordSys,excludeField:this.excludeField,geometry:this.geometry}};return Wt.toJSON(t)}_onMessage(t){if(t.data&&t.data.indexOf("filterParam")>=0){var e=JSON.parse(t.data);return t.filterParam=e,t.eventType="setFilterParamSucceeded",void this.events.triggerEvent("setFilterParamSucceeded",t)}var n=JSON.parse(t.data);t.featureResult=n,t.eventType="messageSucceeded",this.events.triggerEvent("messageSucceeded",t)}_connect(t){if(t=ze.appendCredential(t),"WebSocket"in window)return new WebSocket(t);if("MozWebSocket"in window){var e=window.MozWebSocket;return new e(t)}return console.log("no WebSocket"),null}}class Vn{constructor(t){t=t||{},this.bounds=null,this.dataSourceName=null,this.description=null,this.encodeType=null,this.isReadOnly=null,this.name=null,this.prjCoordSys=null,this.tableName=null,this.type=null,Wt.extend(this,t);var e=this.bounds;e&&(this.bounds=new Qt(e.leftBottom.x,e.leftBottom.y,e.rightTop.x,e.rightTop.y)),this.CLASS_NAME="SuperMap.DatasetInfo"}destroy(){Wt.reset(this)}toServerJSONObject(){var t={};return t=Wt.copyAttributes(t,this),t.bounds&&t.bounds.toServerJSONObject&&(t.bounds=t.bounds.toServerJSONObject()),t}}class Hn{constructor(t){this.operation=V.UNION,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.OverlayAnalystParameters"}destroy(){var t=this;t.operation=null}}class Wn extends Hn{constructor(t){super(t),this.operateDataset=null,this.operateDatasetFields=[],this.operateDatasetFilter=new bn,this.operateRegions=[],this.sourceDataset=null,this.sourceDatasetFields=[],this.sourceDatasetFilter=new bn,this.tolerance=0,this.resultSetting=new vn,Wt.extend(this,t),this.CLASS_NAME="SuperMap.DatasetOverlayAnalystParameters"}destroy(){super.destroy();var t=this;if(t.operateDataset=null,t.operateDatasetFields=null,t.operateDatasetFilter&&(t.operateDatasetFilter.destroy(),t.operateDatasetFilter=null),t.operateRegions){for(var e=0,n=t.operateRegions,r=n.length;e<r;e++)n[e].destroy();t.operateRegions=null}t.sourceDataset=null,t.sourceDatasetFields=null,t.sourceDatasetFilter&&(t.sourceDatasetFilter.destroy(),t.sourceDatasetFilter=null),t.tolerance=null,t.resultSetting&&(t.resultSetting.destroy(),t.resultSetting=null)}static toObject(t,e){for(var n in t)if("sourceDataset"!==n)if("operateRegions"===n){e.operateRegions=[];var r=t.operateRegions;for(var i in r)r.hasOwnProperty(i)&&(e.operateRegions[i]=Se.fromGeometry(r[i]))}else"resultSetting"===n?e.dataReturnOption=t.resultSetting:e[n]=t[n]}}class Yn{constructor(t){this.clipRegion=null,this.datumValue=0,this.expectedZValues=null,this.interval=0,this.resampleTolerance=0,this.smoothMethod=W.BSPLINE,this.smoothness=0,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.SurfaceAnalystParametersSetting"}destroy(){var t=this;t.clipRegion&&(t.clipRegion.destroy(),t.clipRegion=null),t.datumValue=null,t.expectedZValues=null,t.interval=null,t.resampleTolerance=null,t.smoothMethod=null,t.smoothness=null}toJSON(){let t="'datumValue':"+Wt.toJSON(this.datumValue);if(t+=",'interval':"+Wt.toJSON(this.interval),t+=",'resampleTolerance':"+Wt.toJSON(this.resampleTolerance),t+=",'smoothMethod':"+Wt.toJSON(this.smoothMethod),t+=",'smoothness':"+Wt.toJSON(this.smoothness),null!=this.expectedZValues&&(t+=",'expectedZValues':"+Wt.toJSON(this.expectedZValues)),null!=this.clipRegion){var e=this.clipRegion;this.clipRegion instanceof Ut&&this.clipRegion.components&&(e=Se.fromGeometry(this.clipRegion)),t+=",'clipRegion':"+Wt.toJSON(e)}return"{"+t+"}"}}class Xn{constructor(t){this.resolution=0,this.extractParameter=new Yn,this.resultSetting=new vn,this.surfaceAnalystMethod=Y.ISOLINE,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.SurfaceAnalystParameters"}destroy(){var t=this;t.resolution=null,t.extractParameter&&(t.extractParameter.destroy(),t.extractParameter=null),t.resultSetting&&(t.resultSetting.destroy(),t.resultSetting=null),t.surfaceAnalystMethod=null}}class Jn extends Xn{constructor(t){super(t),this.dataset=null,this.filterQueryParameter=new bn,this.zValueFieldName=null,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.DatasetSurfaceAnalystParameters"}destroy(){super.destroy();var t=this;t.dataset=null,t.filterQueryParameter&&(t.filterQueryParameter.destroy(),t.filterQueryParameter=null),t.zValueFieldName=null}static toObject(t,e){for(var n in t)if("filterQueryParameter"===n&&(e.filterQueryParameter=t.filterQueryParameter),"extractParameter"===n)t.extractParameter.clipRegion instanceof Ut&&t.extractParameter.clipRegion.components&&(t.extractParameter.clipRegion=Se.fromGeometry(t.extractParameter.clipRegion)),e.extractParameter=t.extractParameter;else{if("dataset"===n)continue;if("surfaceAnalystMethod"===n)continue;e[n]=t[n]}}}class Zn{constructor(t){t&&(this.clipRegion=null,this.createResultDataset=!1,this.resultDatasetName=null,this.resultDatasourceName=null,this.returnResultRegion=!0,Wt.extend(this,t),this.CLASS_NAME="SuperMap.ThiessenAnalystParameters")}destroy(){var t=this;t.clipRegion&&(t.clipRegion.destroy(),t.clipRegion=null),t.createResultDataset=null,t.resultDatasetName=null,t.resultDatasourceName=null,t.returnResultRegion=null}}class Kn extends Zn{constructor(t){super(t),this.filterQueryParameter=null,this.dataset=null,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.DatasetThiessenAnalystParameters"}destroy(){super.destroy();var t=this;t.filterQueryParameter&&(t.filterQueryParameter.destroy(),t.filterQueryParameter=null)}static toObject(t,e){for(var n in t)"clipRegion"===n?e.clipRegion=Se.fromGeometry(t.clipRegion):e[n]=t[n]}}class Qn extends on{constructor(t,e){super(t,e),e&&Wt.extend(this,e),this.eventCount=0,this.CLASS_NAME="SuperMap.DatasourceService"}destroy(){this.eventCount=0,super.destroy()}getDatasourceService(t,e){let n=Wt.urlPathAppend(this.url,"datasources/name/"+t);this.processAsync(n,"GET",e)}getDatasourcesService(t){let e=Wt.urlPathAppend(this.url,"datasources");this.processAsync(e,"GET",t)}setDatasourceService(t,e){if(!t)return;const n=Wt.urlPathAppend(this.url,"datasources/name/"+t.datasourceName);this.processAsync(n,"PUT",e,t)}processAsync(t,e,n,r){let i=++this.eventCount,o={scope:this,processCompleted:function(t){if(i===t.result.eventId&&n)return delete t.result.eventId,n(t),this.events&&this.events.un(o),!1},processFailed:function(t){if((i===t.error.eventId||i===t.eventId)&&n)return n(t),this.events&&this.events.un(o),!1}};this.events.on(o);var a=this;let s={url:t,method:e,scope:a,success(t,e){t.eventId=i,this.serviceProcessCompleted(t,e)},failure(t,e){t.error&&(t.error.eventId=i),t.eventId=i,this.serviceProcessFailed(t,e)}};r&&(s.data=Wt.toJSON(r)),a.request(s)}}class $n{constructor(t){this.dataset=null,this.bounds=null,this.fieldName=null,this.resultGridDatasetResolution=null,this.searchRadius=null,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=!1,Wt.extend(this,t),this.CLASS_NAME="SuperMap.DensityKernelAnalystParameters"}destroy(){var t=this;t.dataset=null,t.bounds=null,t.fieldName=null,t.resultGridDatasetResolution=null,t.searchRadius=null,t.targetDatasource=null,t.resultGridName=null,t.deleteExistResultDataset=null}static toObject(t,e){for(var n in t)"dataset"!==n&&(e[n]=t[n])}}class tr extends fn{constructor(t,e){super(t,e),this.mode=null,e&&Wt.extend(this,e),this.CLASS_NAME="SuperMap.DensityAnalystService"}destroy(){super.destroy(),this.mode=null}processAsync(t){var e=this,n=new Object;t instanceof $n&&(e.url=Wt.urlPathAppend(e.url,"datasets/"+t.dataset+"/densityanalyst/kernel"),e.mode="kernel"),$n.toObject(t,n);var r=Wt.toJSON(n);e.url=Wt.urlAppend(e.url,"returnContent=true"),e.request({method:"POST",data:r,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}class er{constructor(t){this.dataSourceName=null,this.dataSetName=null,this.features=null,this.editType=J.ADD,this.IDs=null,this.returnContent=!1,this.isUseBatch=!1,Wt.extend(this,t),this.CLASS_NAME="SuperMap.EditFeaturesParameters"}destroy(){var t=this;t.dataSourceName=null,t.dataSetName=null,t.features=null,t.editType=null,t.IDs=null,t.returnContent=null}static toJsonParameters(t){var e,n,r,i=t.editType;if(i===J.DELETE){if(null===t.IDs)return;r={ids:t.IDs}}else if(r=[],t.features){n=t.features.length;for(var o=0;o<n;o++)e=t.features[o],e.geometry=Se.fromGeometry(e.geometry),r.push(e)}return Wt.toJSON(r)}}class nr extends on{constructor(t,e){super(t,e),this.returnContent=!1,this.isUseBatch=!1,e&&Wt.extend(this,e),this.url=Wt.urlPathAppend(this.url,"features"),this.CLASS_NAME="SuperMap.EditFeaturesService"}destroy(){super.destroy();var t=this;t.returnContent=null,t.isUseBatch=null,t.fromIndex=null,t.toIndex=null}processAsync(t){if(t instanceof er){var e=this,n="POST",r="",i=t.editType,o=null;if(e.returnContent=t.returnContent,e.isUseBatch=t.isUseBatch,o=er.toJsonParameters(t),i===J.DELETE){r=Wt.toJSON(t.IDs),o=r;var a=Wt.urlAppend(e.url,Wt.getParameterString({ids:r}));Be.urlIsLong(a)?(e.url=Wt.urlAppend(e.url,Wt.getParameterString({_method:"DELETE"})),n="POST"):(e.url=a,n="DELETE")}else i===J.UPDATE?n="PUT":(e.isUseBatch&&(e.url=Wt.urlAppend(e.url,"isUseBatch="+e.isUseBatch),e.returnContent=!1),e.returnContent&&(e.url=Wt.urlAppend(e.url,"returnContent=true"),n="POST"));e.request({method:n,data:o,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}}class rr{constructor(t){this.edgeID=null,this.nodeID=null,this.weightName=null,this.isUncertainDirectionValid=!1,Wt.extend(this,t),this.CLASS_NAME="SuperMap.FacilityAnalyst3DParameters"}destroy(){var t=this;t.edgeID=null,t.nodeID=null,t.weightName=null,t.isUncertainDirectionValid=null}}class ir extends rr{constructor(t){super(t),this.CLASS_NAME="SuperMap.FacilityAnalystSinks3DParameters"}destroy(){super.destroy()}}class or extends on{constructor(t,e){super(t,e),this.CLASS_NAME="SuperMap.FacilityAnalystSinks3DService"}destroy(){on.prototype.destroy.apply(this,arguments)}processAsync(t){if(t instanceof ir){var e,n=this;n.url=Wt.urlPathAppend(n.url,"sinks"),e={edgeID:t.edgeID,nodeID:t.nodeID,weightName:t.weightName,isUncertainDirectionValid:t.isUncertainDirectionValid},n.request({method:"GET",params:e,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}}class ar extends rr{constructor(t){super(t),this.CLASS_NAME="SuperMap.FacilityAnalystSources3DParameters"}destroy(){super.destroy()}}class sr extends on{constructor(t,e){super(t,e),this.CLASS_NAME="SuperMap.FacilityAnalystSources3DService"}destroy(){super.destroy()}processAsync(t){if(t instanceof ar){var e,n=this;n.url=Wt.urlPathAppend(n.url,"sources"),e={edgeID:t.edgeID,nodeID:t.nodeID,weightName:t.weightName,isUncertainDirectionValid:t.isUncertainDirectionValid},n.request({method:"GET",params:e,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}}class lr{constructor(t){this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=!1,this.queryType=null,Wt.extend(this,t),this.CLASS_NAME="SuperMap.FacilityAnalystStreamParameters"}destroy(){var t=this;t.edgeID=null,t.nodeID=null,t.weightName=null,t.isUncertainDirectionValid=null,t.type=null}}class ur extends kn{constructor(t,e){super(t,e),this.CLASS_NAME="SuperMap.FacilityAnalystStreamService"}destroy(){super.destroy()}processAsync(t){if(t instanceof lr){var e,n=this;if(0===t.queryType)n.url=Wt.urlPathAppend(n.url,"upstreamcirticalfaclilities");else{if(1!==t.queryType)return;n.url=Wt.urlPathAppend(n.url,"downstreamcirticalfaclilities")}e={sourceNodeIDs:t.sourceNodeIDs,isUncertainDirectionValid:t.isUncertainDirectionValid},null!==t.edgeID&&null!==t.nodeID||null===t.edgeID&&null===t.nodeID||(null!==t.edgeID?e.edgeID=t.edgeID:e.nodeID=t.nodeID,n.request({method:"GET",params:e,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed}))}}}class cr extends rr{constructor(t){super(t),this.CLASS_NAME="SuperMap.FacilityAnalystTracedown3DParameters"}destroy(){super.destroy()}}class hr extends on{constructor(t,e){super(t,e),this.CLASS_NAME="SuperMap.FacilityAnalystTracedown3DService"}destroy(){super.destroy()}processAsync(t){if(t instanceof cr){var e,n=this;n.url=Wt.urlPathAppend(n.url,"tracedownresult"),e={edgeID:t.edgeID,nodeID:t.nodeID,weightName:t.weightName,isUncertainDirectionValid:t.isUncertainDirectionValid},n.request({method:"GET",params:e,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}}class dr extends rr{constructor(t){super(t),this.CLASS_NAME="SuperMap.FacilityAnalystTraceup3DParameters"}destroy(){super.destroy()}}class fr extends on{constructor(t,e){super(t,e),this.CLASS_NAME="SuperMap.FacilityAnalystTraceup3DService"}destroy(){super.destroy()}processAsync(t){if(t instanceof dr){var e,n=this;n.url=Wt.urlPathAppend(n.url,"traceupresult"),e={edgeID:t.edgeID,nodeID:t.nodeID,weightName:t.weightName,isUncertainDirectionValid:t.isUncertainDirectionValid},n.request({method:"GET",params:e,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}}class pr extends rr{constructor(t){super(t),t=t||{},this.sourceNodeIDs=null,Wt.extend(this,t),this.CLASS_NAME="SuperMap.FacilityAnalystUpstream3DParameters"}destroy(){super.destroy(),this.sourceNodeIDs=null}}class gr extends on{constructor(t,e){super(t,e),this.CLASS_NAME="SuperMap.FacilityAnalystUpstream3DService"}destroy(){super.destroy()}processAsync(t){if(t instanceof pr){var e,n=this;n.url=Wt.urlPathAppend(n.url,"upstreamcirticalfaclilities"),e={sourceNodeIDs:t.sourceNodeIDs,edgeID:t.edgeID,nodeID:t.nodeID,isUncertainDirectionValid:t.isUncertainDirectionValid},n.request({method:"GET",params:e,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}}class mr{constructor(t){this.datasource=null,this.dataset=null,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.FieldParameters"}destroy(){var t=this;t.datasource=null,t.dataset=null}}class yr extends mr{constructor(t){super(t),this.fieldName=null,this.statisticMode=null,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.FieldStatisticsParameters"}destroy(){var t=this;t.fieldName=null,t.statisticMode=null}}class vr extends on{constructor(t,e){super(t,e),this.datasource=null,this.dataset=null,this.field=null,this.statisticMode=null,e&&Wt.extend(this,e),this.CLASS_NAME="SuperMap.FieldStatisticService"}destroy(){super.destroy();var t=this;t.datasource=null,t.dataset=null,t.field=null,t.statisticMode=null}processAsync(){var t=this,e="datasources/"+t.datasource+"/datasets/"+t.dataset+"/fields/"+t.field+"/"+t.statisticMode;t.url=Wt.urlPathAppend(t.url,e),t.request({method:"GET",data:null,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}class br{constructor(t){this.event=null,this.expectFacilityCount=1,this.facilities=null,this.fromEvent=!1,this.isAnalyzeById=!1,this.maxWeight=0,this.parameter=new zn,Wt.extend(this,t),this.CLASS_NAME="SuperMap.FindClosestFacilitiesParameters"}destroy(){var t=this;t.event=null,t.expectFacilityCount=null,t.facilities=null,t.fromEvent=null,t.isAnalyzeById=null,t.maxWeight=null,t.parameter&&(t.parameter.destroy(),t.parameter=null)}}class _r extends kn{constructor(t,e){super(t,e),this.CLASS_NAME="SuperMap.FindClosestFacilitiesService"}destroy(){super.destroy()}processAsync(t){if(t instanceof br){var e,n=this;n.url=Wt.urlPathAppend(n.url,"closestfacility"),e={expectFacilityCount:t.expectFacilityCount,fromEvent:t.fromEvent,maxWeight:t.maxWeight,parameter:Wt.toJSON(t.parameter),event:Wt.toJSON(t.event),facilities:n.getJson(t.isAnalyzeById,t.facilities)},n.request({method:"GET",params:e,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}getJson(t,e){var n="[",r=e?e.length:0;if(!1===t)for(let i=0;i<r;i++)i>0&&(n+=","),n+='{"x":'+e[i].x+',"y":'+e[i].y+"}";else if(!0===t)for(let i=0;i<r;i++)i>0&&(n+=","),n+=e[i];return n+="]",n}toGeoJSONResult(t){if(!t||!t.facilityPathList)return t;var e=new Ee;return t.facilityPathList.map((function(t){return t.route&&(t.route=e.toGeoJSON(t.route)),t.pathGuideItems&&(t.pathGuideItems=e.toGeoJSON(t.pathGuideItems)),t.edgeFeatures&&(t.edgeFeatures=e.toGeoJSON(t.edgeFeatures)),t.nodeFeatures&&(t.nodeFeatures=e.toGeoJSON(t.nodeFeatures)),t})),t}}class xr{constructor(t){this.expectedSupplyCenterCount=null,this.isFromCenter=!1,this.supplyCenters=null,this.turnWeightField=null,this.weightName=null,Wt.extend(this,t),this.CLASS_NAME="SuperMap.FindLocationParameters"}destroy(){var t=this;if(t.expectedSupplyCenterCount=null,t.isFromCenter=null,t.turnWeightField=null,t.weightName=null,t.supplyCenters){for(var e=0,n=t.supplyCenters,r=n.length;e<r;e++)n[e].destroy();t.supplyCenters=null}}}class wr extends kn{constructor(t,e){super(t,e),this.CLASS_NAME="SuperMap.FindLocationService"}destroy(){super.destroy()}processAsync(t){if(t instanceof xr){var e,n=this;n.url=Wt.urlPathAppend(n.url,"location"),e={isFromCenter:t.isFromCenter,expectedSupplyCenterCount:t.expectedSupplyCenterCount,weightName:t.weightName,turnWeightField:t.turnWeightField,returnEdgeFeature:!0,returnEdgeGeometry:!0,returnNodeFeature:!0,mapParameter:Wt.toJSON(t.mapParameter),supplyCenters:n.getCentersJson(t.supplyCenters)},n.request({method:"GET",params:e,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}getCentersJson(t){for(var e="[",n=t?t.length:0,r=0;r<n;r++)r>0&&(e+=","),e+=Wt.toJSON(t[r]);return e+="]",e}toGeoJSONResult(t){if(!t)return null;var e=new Ee;return t.demandResults&&(t.demandResults=e.toGeoJSON(t.demandResults)),t.supplyResults&&(t.supplyResults=e.toGeoJSON(t.supplyResults)),t}}class Sr{constructor(t){this.centers=null,this.hasLeastTotalCost=!1,this.isAnalyzeById=!1,this.nodes=null,this.parameter=new zn,Wt.extend(this,t),this.CLASS_NAME="SuperMap.FindMTSPPathsParameters"}destroy(){var t=this;t.centers=null,t.hasLeastTotalCost=null,t.isAnalyzeById=null,t.nodes=null,t.maxWeight=null,t.parameter&&(t.parameter.destroy(),t.parameter=null)}}class Er extends kn{constructor(t,e){super(t,e),this.CLASS_NAME="SuperMap.FindMTSPPathsService"}destroy(){super.destroy()}processAsync(t){if(t instanceof Sr){var e,n=this,r=n.getJson(t.isAnalyzeById,t.centers),i=n.getJson(t.isAnalyzeById,t.nodes);n.url=Wt.urlPathAppend(n.url,"mtsppath"),e={centers:r,nodes:i,parameter:Wt.toJSON(t.parameter),hasLeastTotalCost:t.hasLeastTotalCost},n.request({method:"GET",params:e,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}getJson(t,e){var n="[",r=e?e.length:0;if(!1===t)for(let i=0;i<r;i++)i>0&&(n+=","),n+='{"x":'+e[i].x+',"y":'+e[i].y+"}";else if(!0===t)for(let i=0;i<r;i++)i>0&&(n+=","),n+=e[i];return n+="]",n}toGeoJSONResult(t){if(!t||!t.pathList)return null;var e=new Ee;return t.pathList.map((function(t){return t.route&&(t.route=e.toGeoJSON(t.route)),t.pathGuideItems&&(t.pathGuideItems=e.toGeoJSON(t.pathGuideItems)),t.edgeFeatures&&(t.edgeFeatures=e.toGeoJSON(t.edgeFeatures)),t.nodeFeatures&&(t.nodeFeatures=e.toGeoJSON(t.nodeFeatures)),t})),t}}class Cr{constructor(t){this.isAnalyzeById=!1,this.hasLeastEdgeCount=null,this.nodes=null,this.parameter=new zn,Wt.extend(this,t),this.CLASS_NAME="SuperMap.FindPathParameters"}destroy(){var t=this;t.isAnalyzeById=null,t.hasLeastEdgeCount=null,t.nodes=null,t.parameter&&(t.parameter.destroy(),t.parameter=null)}}class Mr extends kn{constructor(t,e){super(t,e),this.CLASS_NAME="SuperMap.FindPathService"}destroy(){super.destroy()}processAsync(t){if(t instanceof Cr){var e,n=this;n.url=Wt.urlPathAppend(n.url,"path"),e={hasLeastEdgeCount:t.hasLeastEdgeCount,parameter:Wt.toJSON(t.parameter),nodes:n.getJson(t.isAnalyzeById,t.nodes)},n.request({method:"GET",params:e,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}getJson(t,e){var n="[",r=e?e.length:0;if(!1===t)for(let i=0;i<r;i++)i>0&&(n+=","),n+='{"x":'+e[i].x+',"y":'+e[i].y+"}";else if(!0===t)for(let i=0;i<r;i++)i>0&&(n+=","),n+=e[i];return n+="]",n}toGeoJSONResult(t){if(!t||!t.pathList||t.pathList.length<1)return null;var e=new Ee;return t.pathList.forEach((function(t){t.route&&(t.route=e.toGeoJSON(t.route)),t.pathGuideItems&&(t.pathGuideItems=e.toGeoJSON(t.pathGuideItems)),t.edgeFeatures&&(t.edgeFeatures=e.toGeoJSON(t.edgeFeatures)),t.nodeFeatures&&(t.nodeFeatures=e.toGeoJSON(t.nodeFeatures))})),t}}class Tr{constructor(t){this.isAnalyzeById=!1,this.isCenterMutuallyExclusive=!1,this.centers=null,this.isFromCenter=!1,this.weights=null,this.parameter=new zn,Wt.extend(this,t),this.CLASS_NAME="SuperMap.FindServiceAreasParameters"}destroy(){var t=this;t.isAnalyzeById=null,t.isCenterMutuallyExclusive=null,t.centers=null,t.isFromCenter=null,t.weights=null,t.parameter&&(t.parameter.destroy(),t.parameter=null)}}class Ar extends kn{constructor(t,e){super(t,e),this.CLASS_NAME="SuperMap.FindServiceAreasService"}destroy(){super.destroy()}processAsync(t){if(t instanceof Tr){var e,n=this;n.url=Wt.urlPathAppend(n.url,"servicearea"),e={isFromCenter:t.isFromCenter,isCenterMutuallyExclusive:t.isCenterMutuallyExclusive,parameter:Wt.toJSON(t.parameter),centers:n.getJson(t.isAnalyzeById,t.centers),weights:n.getJson(!0,t.weights)},n.request({method:"GET",params:e,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}getJson(t,e){var n="[",r=e?e.length:0;if(!1===t)for(let i=0;i<r;i++)i>0&&(n+=","),n+='{"x":'+e[i].x+',"y":'+e[i].y+"}";else if(!0===t)for(let i=0;i<r;i++)i>0&&(n+=","),n+=e[i];return n+="]",n}toGeoJSONResult(t){if(!t||!t.serviceAreaList)return t;var e=new Ee;return t.serviceAreaList.map((function(t){return t.serviceRegion&&(t.serviceRegion=e.toGeoJSON(t.serviceRegion)),t.edgeFeatures&&(t.edgeFeatures=e.toGeoJSON(t.edgeFeatures)),t.nodeFeatures&&(t.nodeFeatures=e.toGeoJSON(t.nodeFeatures)),t.routes&&(t.routes=e.toGeoJSON(t.routes)),t})),t}}class Or{constructor(t){this.endNodeAssigned=!1,this.isAnalyzeById=!1,this.nodes=null,this.parameter=new zn,Wt.extend(this,t),this.CLASS_NAME="SuperMap.FindTSPPathsParameters"}destroy(){var t=this;t.endNodeAssigned=null,t.isAnalyzeById=null,t.nodes=null,t.parameter&&(t.parameter.destroy(),t.parameter=null)}}class kr extends kn{constructor(t,e){super(t,e),this.CLASS_NAME="SuperMap.FindTSPPathsService"}destroy(){super.destroy()}processAsync(t){if(t instanceof Or){var e,n=this;n.url=Wt.urlPathAppend(n.url,"tsppath"),e={parameter:Wt.toJSON(t.parameter),endNodeAssigned:t.endNodeAssigned,nodes:n.getNodesJson(t)},n.request({method:"GET",params:e,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}getNodesJson(t){var e,n,r,i,o="";if(!1===t.isAnalyzeById){for(e="[",n=0,i=t.nodes,r=i.length;n<r;n++)n>0&&(e+=","),e+='{"x":'+i[n].x+',"y":'+i[n].y+"}";e+="]",o+=e}else if(!0===t.isAnalyzeById){let e="[",n=t.nodes,r=n.length;for(let t=0;t<r;t++)t>0&&(e+=","),e+=n[t];e+="]",o+=e}return o}toGeoJSONResult(t){if(!t||!t.tspPathList)return null;var e=new Ee;return t.tspPathList.forEach((function(t){t.route&&(t.route=e.toGeoJSON(t.route)),t.pathGuideItems&&(t.pathGuideItems=e.toGeoJSON(t.pathGuideItems)),t.edgeFeatures&&(t.edgeFeatures=e.toGeoJSON(t.edgeFeatures)),t.nodeFeatures&&(t.nodeFeatures=e.toGeoJSON(t.nodeFeatures))})),t}}class Ir{constructor(t){this.routeTable=null,this.routeIDField=null,this.attributeFilter=null,this.eventTable=null,this.eventRouteIDField=null,this.measureField=null,this.measureStartField=null,this.measureEndField=null,this.measureOffsetField=null,this.errorInfoField=null,this.retainedFields=null,this.dataReturnOption=null,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.GenerateSpatialDataParameters"}destroy(){var t=this;t.routeTable&&(t.routeTable=null),t.routeIDField=null,t.attributeFilter=null,t.eventTable=null,t.eventRouteIDField=null,t.measureField=null,t.measureStartField=null,t.measureEndField=null,t.measureOffsetField=null,t.errorInfoField=null,t.dataReturnOption&&(t.dataReturnOption.destroy(),t.dataReturnOption=null)}}class Pr extends fn{constructor(t,e){super(t,e),this.CLASS_NAME="SuperMap.GenerateSpatialDataService"}destroy(){super.destroy()}processAsync(t){if(t instanceof Ir){var e,n=this;e=n.getJsonParameters(t),n.request({method:"POST",data:e,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}getJsonParameters(t){var e="",n="datasets/"+t.routeTable+"/linearreferencing/generatespatialdata",r=this;return r.url=Wt.urlPathAppend(r.url,n),r.url=Wt.urlAppend(r.url,"returnContent=true"),e=Wt.toJSON(t),e}}class Lr extends cn{constructor(t){super(),this.precision=5,Wt.extend(this,t),this.aggType=yt.GEOHASH_GRID,this.CLASS_NAME="SuperMap.GeoHashGridAggParameter"}destroy(){super.destroy(),this.aggType=null,this.precision=null}static toJsonParameters(t){var e={aggName:t.aggName,aggFieldName:t.aggFieldName,aggType:t.aggType,precision:t.precision};return Wt.toJson(e)}}class Nr extends Hn{constructor(t){super(t),t&&t.operateGeometry&&(this.operateGeometry=t.operateGeometry),t&&t.sourceGeometry&&(this.sourceGeometry=t.sourceGeometry),t&&t.operateGeometries&&(this.operateGeometries=t.operateGeometries),t&&t.sourceGeometries&&(this.sourceGeometries=t.sourceGeometries),t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.GeometryOverlayAnalystParameters"}destroy(){super.destroy();var t=this;t.sourceGeometry&&(t.sourceGeometry.destroy(),t.sourceGeometry=null),t.sourceGeometries&&(t.sourceGeometries.destroy(),t.sourceGeometries=null),t.sourceGeometry&&(t.sourceGeometry.destroy(),t.sourceGeometry=null),t.operateGeometries&&(t.operateGeometries.destroy(),t.operateGeometries=null)}static toObject(t,e){for(var n in t)if("sourceGeometry"===n)e.sourceGeometry=Se.fromGeometry(t.sourceGeometry);else if("sourceGeometries"===n){for(var r=[],i=0;i<t.sourceGeometries.length;i++)r.push(Se.fromGeometry(t.sourceGeometries[i]));e.sourceGeometries=r}else if("operateGeometry"===n)e.operateGeometry=Se.fromGeometry(t.operateGeometry);else if("operateGeometries"===n){for(var o=[],a=0;a<t.operateGeometries.length;a++)o.push(Se.fromGeometry(t.operateGeometries[a]));e.operateGeometries=o}else e[n]=t[n]}}class Rr extends Xn{constructor(t){super(t),this.points=null,this.zValues=null,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.GeometrySurfaceAnalystParameters"}destroy(){super.destroy();var t=this;if(t.points){for(var e=0,n=t.points,r=n.length;e<r;e++)n[e].destroy();t.points=null}t.zValues=null}}class Dr extends Zn{constructor(t){super(t),this.points=null,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.GeometryThiessenAnalystParameters"}destroy(){super.destroy();var t=this;if(t.points){for(var e=t.points.length-1;e>=0;e--)t.points[e].destroy();t.points=null}}static toObject(t,e){for(var n in t)"clipRegion"===n?e.clipRegion=Se.fromGeometry(t.clipRegion):e[n]=t[n]}}class Fr extends on{constructor(t,e){e=e||{},e.EVENT_TYPES=["processCompleted","processFailed","processRunning"],super(t,e),this.CLASS_NAME="SuperMap.GeoprocessingService",this.headers={},this.crossOrigin=!0,this.eventCount=0}getTools(t){this._processAsync({url:this.url+"/list",callback:t})}getTool(t,e){this._processAsync({url:`${this.url}/${t}`,callback:e})}execute(t,e,n,r){e=e||null,n=n||null;const i={parameter:e,environment:n};this._processAsync({url:`${this.url}/${t}/execute`,executeParamter:i,callback:r})}submitJob(t,e,n,r){e=e||null,n=n||null;const i=JSON.stringify({parameter:e,environments:n});this._processAsync({url:`${this.url}/${t}/jobs`,method:"POST",callback:r,params:i})}waitForJobCompletion(t,e,n,r){const i=this,o=setInterval((function(){const n=function(t,e){const n=t.state.runState;switch(e.statusCallback&&e.statusCallback(n),n){case"FINISHED":clearInterval(o),i.events.triggerEvent("processCompleted",{result:t,options:e});break;case"FAILED":clearInterval(o),i.events.triggerEvent("processFailed",{result:t,options:e});break;case"CANCELED":clearInterval(o),i.events.triggerEvent("processFailed",{result:t,options:e});break}};i._processAsync({url:`${i.url}/${e}/jobs/${t}`,serviceProcessCompleted:n,callback:r})}),n.interval)}getJobInfo(t,e,n){this._processAsync({url:`${this.url}/${t}/jobs/${e}`,callback:n})}cancelJob(t,e,n){this._processAsync({url:`${this.url}/${t}/jobs/${e}/cancel`,callback:n})}getJobs(t,e){let n=this.url+"/jobs";t&&(n=`${this.url}/${t}/jobs`),this._processAsync({url:n,callback:e})}getResults(t,e,n,r){let i=`${this.url}/${t}/jobs/${e}/results`;n&&(i=`${i}/${n}`),this._processAsync({url:i,callback:r})}_processAsync({url:t,method:e,callback:n,paramter:r,serviceProcessCompleted:i,serviceProcessFailed:o}){let a=++this.eventCount,s={scope:this,processCompleted:function(t){if(a===t.result.eventId&&n)return delete t.result.eventId,n(t),this.events&&this.events.un(s),!1},processFailed:function(t){if((a===t.error.eventId||a===t.eventId)&&n)return n(t),this.events&&this.events.un(s),!1}};this.events.on(s),this.request({url:t,method:e||"GET",params:r,headers:{"Content-type":"application/json"},scope:this,success(t,e){t.eventId=a;const n=i||this.serviceProcessCompleted.bind(this);n(t,e)},failure(t,e){t.error&&(t.error.eventId=a),t.eventId=a;const n=o||this.serviceProcessFailed.bind(this);n(t,e)}})}}class jr{constructor(t){this.dataset=null,this.sourceFilter=null,this.referenceFilter=null,this.spatialRelationType=null,this.isBorderInside=null,this.returnFeature=null,this.returnGeoRelatedOnly=null,this.startRecord=0,this.expectCount=500,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.GeoRelationAnalystParameters"}destroy(){var t=this;t.sourceFilter&&t.sourceFilter.destroy(),t.sourceFilter=null,t.referenceFilter&&t.referenceFilter.destroy(),t.referenceFilter=null,t.dataset=null,t.spatialRelationType=null,t.isBorderInside=null,t.returnFeature=null,t.returnGeoRelatedOnly=null,t.startRecord=null,t.expectCount=null}}class Br extends fn{constructor(t,e){super(t,e),this.CLASS_NAME="SuperMap.GeoRelationAnalystService"}destroy(){super.destroy()}processAsync(t){if(t instanceof jr){var e=this;e.url=Wt.urlPathAppend(e.url,"datasets/"+t.dataset+"/georelation");var n=Wt.toJSON(t);e.url=Wt.urlAppend(e.url,"returnContent=true"),e.request({method:"POST",data:n,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}}class zr extends on{constructor(t,e){super(t,e),e&&(this.datasource=null,this.dataset=null,this.eventCount=0,e&&Wt.extend(this,e),this.CLASS_NAME="SuperMap.DatasetService")}destroy(){super.destroy();var t=this;t.datasource=null,t.dataset=null}getDatasetsService(t,e){const n=Wt.urlPathAppend(this.url,`datasources/name/${t}/datasets`);this.processAsync(n,"GET",e)}getDatasetService(t,e,n){const r=Wt.urlPathAppend(this.url,`datasources/name/${t}/datasets/name/${e}`);this.processAsync(r,"GET",n)}setDatasetService(t,e){if(!t)return;const n=Wt.urlPathAppend(this.url,`datasources/name/${t.datasourceName}/datasets/name/${t.datasetName}`);delete t.datasourceName,this.processAsync(n,"PUT",e,t)}deleteDatasetService(t,e,n){const r=Wt.urlPathAppend(this.url,`datasources/name/${t}/datasets/name/${e}`);this.processAsync(r,"DELETE",n)}processAsync(t,e,n,r){let i=++this.eventCount,o={scope:this,processCompleted:function(t){if(i===t.result.eventId&&n)return delete t.result.eventId,n(t),this.events&&this.events.un(o),!1},processFailed:function(t){if((i===t.error.eventId||i===t.eventId)&&n)return n(t),this.events&&this.events.un(o),!1}};this.events.on(o);var a=this;let s={url:t,method:e,scope:a,success(t,e){t.eventId=i,a.serviceProcessCompleted(t,e)},failure(t,e){t.error&&(t.error.eventId=i),t.eventId=i,a.serviceProcessFailed(t,e)}};r&&(s.data=Wt.toJSON(r)),a.request(s)}}class Ur{constructor(t){this.datasetNames=null,this.targetEpsgCode=null,this.targetPrj=null,this.returnContent=!0,this.fromIndex=0,this.toIndex=19,this.returnCountOnly=!1,this.maxFeatures=null,this.hasGeometry=!0,this.aggregations=null,Wt.extend(this,t),this.CLASS_NAME="SuperMap.GetFeaturesParametersBase"}destroy(){var t=this;t.datasetNames=null,t.returnContent=null,t.fromIndex=null,t.toIndex=null,t.hasGeometry=null,t.maxFeatures=null,t.targetEpsgCode=null,t.targetPrj=null,t.aggregation&&(t.aggregation=null)}}class Gr extends Ur{constructor(t){super(t),this.getFeatureMode=Gr.getFeatureMode.BOUNDS,this.bounds=null,this.fields=null,this.attributeFilter=null,this.spatialQueryMode=x.CONTAIN,Wt.extend(this,t),this.CLASS_NAME="SuperMap.GetFeaturesByBoundsParameters"}destroy(){super.destroy();var t=this;if(t.bounds&&(t.bounds.destroy(),t.bounds=null),t.fields){while(t.fields.length>0)t.fields.pop();t.fields=null}t.attributeFilter=null,t.spatialQueryMode=null,t.getFeatureMode=null}static toJsonParameters(t){var e,n,r;return n={leftBottom:{x:t.bounds.left,y:t.bounds.bottom},rightTop:{x:t.bounds.right,y:t.bounds.top}},r={datasetNames:t.datasetNames,getFeatureMode:Gr.getFeatureMode.BOUNDS,bounds:n,spatialQueryMode:t.spatialQueryMode},t.fields&&(e=new bn,e.name=t.datasetNames,e.fields=t.fields,r.queryParameter=e),t.attributeFilter&&(r.attributeFilter=t.attributeFilter,r.getFeatureMode=Gr.getFeatureMode.BOUNDS_ATTRIBUTEFILTER),t.maxFeatures&&!isNaN(t.maxFeatures)&&(r.maxFeatures=t.maxFeatures),"boolean"===typeof t.hasGeometry&&(r.hasGeometry=t.hasGeometry),t.targetEpsgCode&&(r.targetEpsgCode=t.targetEpsgCode),!t.targetEpsgCode&&t.targetPrj&&(r.targetPrj=t.targetPrj),t.aggregations&&(r.aggregations=t.aggregations),Wt.toJSON(r)}}Gr.getFeatureMode={BOUNDS:"BOUNDS",BOUNDS_ATTRIBUTEFILTER:"BOUNDS_ATTRIBUTEFILTER"};class qr extends on{constructor(t,e){super(t,e),e=e||{},this.returnContent=!0,this.fromIndex=0,this.toIndex=19,this.hasGeometry=!0,this.maxFeatures=null,this.format=m.GEOJSON,Wt.extend(this,e),this.url=Wt.urlPathAppend(this.url,"featureResults"),this.CLASS_NAME="SuperMap.GetFeaturesServiceBase"}destroy(){super.destroy();var t=this;t.returnContent=null,t.fromIndex=null,t.toIndex=null,t.maxFeatures=null,t.format=null,t.hasGeometry=null}processAsync(t){if(t){var e=this,n=null,r=!0;e.returnContent=t.returnContent,e.fromIndex=t.fromIndex,e.toIndex=t.toIndex,e.maxFeatures=t.maxFeatures,e.hasGeometry=t.hasGeometry,e.returnContent&&(r=!1);var i=null!=e.fromIndex&&null!=e.toIndex&&!isNaN(e.fromIndex)&&!isNaN(e.toIndex);i&&e.fromIndex>=0&&e.toIndex>=0&&!r&&(e.url=Wt.urlAppend(e.url,`fromIndex=${e.fromIndex}&toIndex=${e.toIndex}`)),t.returnCountOnly&&(e.url=Wt.urlAppend(e.url,"&returnCountOnly="+t.returnContent)),n=e.getJsonParameters(t),e.request({method:"POST",data:n,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}serviceProcessCompleted(t,e){var n=this;if(t=Wt.transformResult(t),n.format===m.GEOJSON&&t.features){var r=new Ee;t.features=r.toGeoJSON(t.features)}n.events.triggerEvent("processCompleted",{result:t,options:e})}dataFormat(){return[m.GEOJSON,m.ISERVER,m.FGB]}}class Vr extends qr{constructor(t,e){super(t,e),this.CLASS_NAME="SuperMap.GetFeaturesByBoundsService"}destroy(){super.destroy()}getJsonParameters(t){return Gr.toJsonParameters(t)}}class Hr extends Ur{constructor(t){super(t),this.bufferDistance=null,this.attributeFilter=null,this.geometry=null,this.fields=null,Wt.extend(this,t),this.CLASS_NAME="SuperMap.GetFeaturesByBufferParameters"}destroy(){super.destroy();var t=this;if(t.bufferDistance=null,t.attributeFilter=null,t.fields){while(t.fields.length>0)t.fields.pop();t.fields=null}t.geometry&&(t.geometry.destroy(),t.geometry=null)}static toJsonParameters(t){var e,n,r;return r=Se.fromGeometry(t.geometry),n={datasetNames:t.datasetNames,getFeatureMode:"BUFFER",bufferDistance:t.bufferDistance,geometry:r},t.fields&&(e=new bn,e.name=t.datasetNames,e.fields=t.fields,n.queryParameter=e),t.attributeFilter&&(n.attributeFilter=t.attributeFilter,n.getFeatureMode="BUFFER_ATTRIBUTEFILTER"),t.maxFeatures&&!isNaN(t.maxFeatures)&&(n.maxFeatures=t.maxFeatures),"boolean"===typeof t.hasGeometry&&(n.hasGeometry=t.hasGeometry),t.targetEpsgCode&&(n.targetEpsgCode=t.targetEpsgCode),!t.targetEpsgCode&&t.targetPrj&&(n.targetPrj=t.targetPrj),Wt.toJSON(n)}}class Wr extends qr{constructor(t,e){super(t,e),this.CLASS_NAME="SuperMap.GetFeaturesByBufferService"}destroy(){super.destroy()}getJsonParameters(t){if(t instanceof Hr)return Hr.toJsonParameters(t)}}class Yr extends Ur{constructor(t){super(t),this.getFeatureMode="SPATIAL",this.geometry=null,this.fields=null,this.attributeFilter=null,this.spatialQueryMode=x.CONTAIN,Wt.extend(this,t),this.CLASS_NAME="SuperMap.GetFeaturesByGeometryParameters"}destroy(){super.destroy();var t=this;if(t.geometry&&(t.geometry.destroy(),t.geometry=null),t.fields){while(t.fields.length>0)t.fields.pop();t.fields=null}t.attributeFilter=null,t.spatialQueryMode=null,t.getFeatureMode=null}static toJsonParameters(t){var e,n,r;return n=Se.fromGeometry(t.geometry),r={datasetNames:t.datasetNames,getFeatureMode:"SPATIAL",geometry:n,spatialQueryMode:t.spatialQueryMode},t.fields&&(e=new bn,e.name=t.datasetNames,e.fields=t.fields,r.queryParameter=e),t.attributeFilter&&(r.attributeFilter=t.attributeFilter,r.getFeatureMode="SPATIAL_ATTRIBUTEFILTER"),t.maxFeatures&&!isNaN(t.maxFeatures)&&(r.maxFeatures=t.maxFeatures),"boolean"===typeof t.hasGeometry&&(r.hasGeometry=t.hasGeometry),t.targetEpsgCode&&(r.targetEpsgCode=t.targetEpsgCode),!t.targetEpsgCode&&t.targetPrj&&(r.targetPrj=t.targetPrj),t.aggregations&&(r.aggregations=t.aggregations),Wt.toJSON(r)}}class Xr extends qr{constructor(t,e){super(t,e),this.CLASS_NAME="SuperMap.GetFeaturesByGeometryService"}destroy(){super.destroy()}getJsonParameters(t){return Yr.toJsonParameters(t)}}class Jr extends Ur{constructor(t){super(t),this.getFeatureMode="ID",this.IDs=null,this.fields=null,Wt.extend(this,t),this.CLASS_NAME="SuperMap.GetFeaturesByIDsParameters"}destroy(){super.destroy();var t=this;if(t.IDs=null,t.getFeatureMode=null,t.fields){while(t.fields.length>0)t.fields.pop();t.fields=null}}static toJsonParameters(t){var e,n;return e={datasetNames:t.datasetNames,getFeatureMode:"ID",ids:t.IDs},t.fields&&(n=new bn,n.name=t.datasetNames,n.fields=t.fields,e.queryParameter=n),t.targetEpsgCode&&(e.targetEpsgCode=t.targetEpsgCode),"boolean"===typeof t.hasGeometry&&(e.hasGeometry=t.hasGeometry),!t.targetEpsgCode&&t.targetPrj&&(e.targetPrj=t.targetPrj),t.aggregations&&(e.aggregations=t.aggregations),Wt.toJSON(e)}}class Zr extends qr{constructor(t,e){super(t,e),this.CLASS_NAME="SuperMap.GetFeaturesByIDsService"}destroy(){super.destroy()}getJsonParameters(t){return Jr.toJsonParameters(t)}}class Kr extends Ur{constructor(t){super(t),this.getFeatureMode="SQL",this.queryParameter=null,Wt.extend(this,t),this.CLASS_NAME="SuperMap.GetFeaturesBySQLParameters"}destroy(){super.destroy();var t=this;t.getFeatureMode=null,t.queryParameter&&(t.queryParameter.destroy(),t.queryParameter=null)}static toJsonParameters(t){var e={datasetNames:t.datasetNames,getFeatureMode:"SQL",queryParameter:t.queryParameter};return t.maxFeatures&&!isNaN(t.maxFeatures)&&(e.maxFeatures=t.maxFeatures),"boolean"===typeof t.hasGeometry&&(e.hasGeometry=t.hasGeometry),t.aggregations&&(e.aggregations=t.aggregations),t.targetEpsgCode&&(e.targetEpsgCode=t.targetEpsgCode),!t.targetEpsgCode&&t.targetPrj&&(e.targetPrj=t.targetPrj),t.aggregations&&(e.aggregations=t.aggregations),Wt.toJSON(e)}}class Qr extends qr{constructor(t,e){super(t,e),this.CLASS_NAME="SuperMap.GetFeaturesBySQLService"}destroy(){super.destroy()}getJsonParameters(t){return Kr.toJsonParameters(t)}}class $r extends on{constructor(t,e){super(t,e),this.datasource=null,this.dataset=null,e&&Wt.extend(this,e),this.CLASS_NAME="SuperMap.GetFieldsService"}destroy(){super.destroy();var t=this;t.datasource=null,t.dataset=null}processAsync(){var t=this;t.url=Wt.urlPathAppend(t.url,`datasources/${t.datasource}/datasets/${t.dataset}/fields`),t.request({method:"GET",data:null,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}class ti{constructor(t){this.datasetName=null,this.dataSourceName=null,this.X=null,this.Y=null,Wt.extend(this,t),this.CLASS_NAME="SuperMap.GetGridCellInfosParameters"}destroy(){var t=this;t.datasetName=null,t.dataSourceName=null,t.X=null,t.Y=null}}class ei extends on{constructor(t,e){super(t,e),this.datasetName=null,this.dataSourceName=null,this.datasetType=null,this.X=null,this.Y=null,e&&Wt.extend(this,e),this.eventCount=0,this.CLASS_NAME="SuperMap.GetGridCellInfosService"}destroy(){super.destroy();var t=this;t.X=null,t.Y=null,t.datasetName=null,t.dataSourceName=null,t.datasetType=null}processAsync(t,e){if(t instanceof ti){Wt.extend(this,t);var n=this;n.url=Wt.urlPathAppend(n.url,`datasources/${n.dataSourceName}/datasets/${n.datasetName}`),n.queryRequest(n.getDatasetInfoCompleted.bind(n),n.getDatasetInfoFailed.bind(n),e)}}queryRequest(t,e,n){let r=++this.eventCount,i={scope:this,processCompleted:function(t){if(r===t.result.eventId&&n)return delete t.result.eventId,n(t),this.events&&this.events.un(i),!1},processFailed:function(t){if((r===t.error.eventId||r===t.eventId)&&n)return n(t),this.events&&this.events.un(i),!1}};this.events.on(i);var o=this;o.request({method:"GET",data:null,scope:o,success(e,i){e.eventId=r,t(e,i,n)},failure(t,n){t.error&&(t.error.eventId=r),t.eventId=r,e(t,n)}})}getDatasetInfoCompleted(t,e,n){var r=this;t=Wt.transformResult(t),r.datasetType=t.datasetInfo.type,r.queryGridInfos(n)}queryGridInfos(t){var e=this;e.url=Wt.urlPathAppend(e.url,"GRID"==e.datasetType?"gridValue":"imageValue"),null!=e.X&&null!=e.Y&&(e.url=Wt.urlAppend(e.url,`x=${e.X}&y=${e.Y}`)),e.queryRequest(e.serviceProcessCompleted.bind(e),e.serviceProcessFailed.bind(e),t)}getDatasetInfoFailed(t,e){var n=this;n.serviceProcessFailed(t,e)}}class ni{constructor(t,e){if(!t)return this;this.memoryData=null,this.type=t,e&&Wt.extend(this,e),this.CLASS_NAME="SuperMap.Theme"}destroy(){var t=this;t.memoryData&&(t.memoryData.destroy(),t.memoryData=null),t.type=null}toServerJSONObject(){}}class ri{constructor(t){this.align=N.BASELINECENTER,this.backColor=new be(255,255,255),this.foreColor=new be(0,0,0),this.backOpaque=!1,this.sizeFixed=!0,this.fontHeight=6,this.fontWidth=0,this.fontWeight=400,this.fontName="Times New Roman",this.bold=!1,this.italic=!1,this.italicAngle=0,this.shadow=!1,this.strikeout=!1,this.outline=!1,this.opaqueRate=0,this.underline=!1,this.rotation=0,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.ServerTextStyle"}destroy(){var t=this;t.align=null,t.backColor&&(t.backColor.destroy(),t.backColor=null),t.foreColor&&(t.foreColor.destroy(),t.foreColor=null),t.backOpaque=null,t.sizeFixed=null,t.fontHeight=null,t.fontWidth=null,t.fontWeight=null,t.fontName=null,t.bold=null,t.italic=null,t.italicAngle=null,t.shadow=null,t.strikeout=null,t.outline=null,t.opaqueRate=null,t.underline=null,t.rotation=null}static fromObj(t){var e=new ri(t);return Wt.copy(e,t),e.backColor=be.fromJson(t.backColor),e.foreColor=be.fromJson(t.foreColor),e}}class ii{constructor(t){this.caption=null,this.end=0,this.start=0,this.visible=!0,this.style=new ri,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelItem"}destroy(){var t=this;t.caption=null,t.end=null,t.start=null,t.style&&(t.style.destroy(),t.style=null),t.visible=null}static fromObj(t){if(t){var e=new ii;return Wt.copy(e,t),e}}}class oi{constructor(t){this.caption=null,this.style=new _e,this.unique=null,this.visible=!0,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.ThemeUniqueItem"}destroy(){var t=this;t.caption=null,t.unique=null,t.style&&(t.style.destroy(),t.style=null),t.visible=null}toServerJSONObject(){var t={};return t=Wt.copyAttributes(t,this),t.style&&t.style.toServerJSONObject&&(t.style=t.style.toServerJSONObject()),t}static fromObj(t){var e=new oi;return Wt.copy(e,t),e.style=_e.fromJson(t.style),e}}class ai{constructor(t){this.offsetFixed=!1,this.offsetX="0.0",this.offsetY="0.0",t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.ThemeOffset"}destroy(){var t=this;t.offsetFixed=null,t.offsetX=null,t.offsetY=null}static fromObj(t){if(t){var e=new ai;return Wt.copy(e,t),e}}}class si{constructor(t){this.defaultStyle=null,this.separator=null,this.separatorEnabled=!1,this.splitIndexes=null,this.styles=new ri,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.LabelMixedTextStyle"}destroy(){var t=this;if(t.defaultStyle&&(t.defaultStyle.destroy(),t.defaultStyle=null),t.separator=null,t.separatorEnabled=null,t.splitIndexes&&(t.splitIndexes=null),t.styles){for(var e=0,n=t.styles,r=n.length;e<r;e++)n[e].destroy();t.styles=null}}static fromObj(t){if(t){var e=new si,n=t.styles;if(Wt.copy(e,t),e.defaultStyle=new ri(t.defaultStyle),n){e.styles=[];for(var r=0,i=n.length;r<i;r++)e.styles.push(new ri(n[r]))}return e}}}class li{constructor(t){this.maxTextHeight=0,this.maxTextWidth=0,this.minTextHeight=0,this.minTextWidth=0,this.uniformStyle=new ri,this.uniformMixedStyle=null,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelText"}destroy(){var t=this;t.maxTextHeight=null,t.maxTextWidth=null,t.minTextHeight=null,t.minTextWidth=null,t.uniformStyle&&(t.uniformStyle.destroy(),t.uniformStyle=null),t.uniformMixedStyle&&(t.uniformMixedStyle.destroy(),t.uniformMixedStyle=null)}static fromObj(t){if(t){var e=new li;return Wt.copy(e,t),e.uniformStyle=ri.fromObj(t.uniformStyle),e.uniformMixedStyle=si.fromObj(t.uniformMixedStyle),e}}}class ui{constructor(t){this.isAlongLine=!0,this.alongLineDirection=D.LB_TO_RT,this.angleFixed=!1,this.repeatedLabelAvoided=!1,this.repeatIntervalFixed=!1,this.labelRepeatInterval=0,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelAlongLine"}destroy(){var t=this;t.isAlongLine=null,t.alongLineDirection=null,t.angleFixed=null,t.repeatedLabelAvoided=null,t.repeatIntervalFixed=null,t.labelRepeatInterval=null}static fromObj(t){if(t){var e=new ui;return Wt.copy(e,t),e}}}class ci{constructor(t){this.labelBackShape=F.NONE,this.backStyle=new _e,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelBackground"}destroy(){var t=this;t.labelBackShape=null,t.backStyle&&(t.backStyle.destroy(),t.backStyle=null)}static fromObj(t){if(t){var e=new ci;return e.labelBackShape=t.labelBackShape,e.backStyle=_e.fromJson(t.backStyle),e}}}class hi extends ni{constructor(t){super("LABEL",t),this.alongLine=new ui,this.background=new ci,this.items=null,this.uniqueItems=null,this.labelExpression=null,this.labelOverLengthMode=j.NONE,this.matrixCells=null,this.maxLabelLength=256,this.numericPrecision=0,this.offset=new ai,this.overlapAvoided=!0,this.rangeExpression=null,this.uniqueExpression=null,this.smallGeometryLabeled=!1,this.text=new li,this.textSpace=0,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabel"}destroy(){super.destroy();var t=this;if(t.alongLine=null,t.background&&(t.background.destroy(),t.background=null),t.items){for(var e=0,n=t.items,r=n.length;e<r;e++)n[e].destroy();t.items=null}if(t.uniqueItems){for(var i=0,o=t.uniqueItems,a=o.length;i<a;i++)o[i].destory();t.uniqueItems=null}t.labelExpression=null,t.labelOverLengthMode=null,t.matrixCells=null,t.maxLabelLength=null,t.numericPrecision=null,t.overlapAvoided=null,t.rangeExpression=null,t.uniqueExpression=null,t.offset&&(t.offset.destroy(),t.offset=null),t.overlapAvoided=null,t.smallGeometryLabeled=null,t.text&&(t.text.destroy(),t.text=null),t.textSpace=null}toJSON(){return Wt.toJSON(this.toServerJSONObject())}toServerJSONObject(){var t={};return t.type=this.type,t.memoryData=this.memoryData,this.alongLine&&(t.alongLine=this.alongLine.isAlongLine,t.alongLineDirection=this.alongLine.alongLineDirection,t.angleFixed=this.alongLine.angleFixed,t.isLabelRepeated=this.alongLine.isLabelRepeated,t.labelRepeatInterval=this.alongLine.labelRepeatInterval,t.repeatedLabelAvoided=this.alongLine.repeatedLabelAvoided,t.repeatIntervalFixed=this.alongLine.repeatIntervalFixed),this.offset&&(t.offsetFixed=this.offset.offsetFixed,t.offsetX=this.offset.offsetX,t.offsetY=this.offset.offsetY),this.text&&(t.maxTextHeight=this.text.maxTextHeight,t.maxTextWidth=this.text.maxTextWidth,t.minTextHeight=this.text.minTextHeight,t.minTextWidth=this.text.minTextWidth,t.uniformStyle=this.text.uniformStyle,t.uniformMixedStyle=this.text.uniformMixedStyle),this.background&&(t.labelBackShape=this.background.labelBackShape,t.backStyle=this.background.backStyle),t.labelOverLengthMode=this.labelOverLengthMode,t.maxLabelLength=this.maxLabelLength,t.smallGeometryLabeled=this.smallGeometryLabeled,t.rangeExpression=this.rangeExpression,t.uniqueExpression=this.uniqueExpression,t.numericPrecision=this.numericPrecision,t.items=this.items,t.uniqueItems=this.uniqueItems,t.labelExpression=this.labelExpression,t.overlapAvoided=this.overlapAvoided,t.matrixCells=this.matrixCells,t.textSpace=this.textSpace,t}static fromObj(t){if(t){var e=new hi,n=t.items,r=t.uniqueItems,i=t.matrixCells;if(t.matrixCells=null,Wt.copy(e,t),e.alongLine=ui.fromObj(t),e.background=ci.fromObj(t),n){e.items=[];for(var o=0,a=n.length;o<a;o++)e.items.push(ii.fromObj(n[o]))}if(r){e.uniqueItems=[];for(let t=0,n=r.length;t<n;t++)e.uniqueItems.push(oi.fromObj(r[t]))}if(i){e.matrixCells=[];for(let t=0,e=i.length;t<e;t++);}return e.offset=ai.fromObj(t),e.text=li.fromObj(t),e}}}class di extends ni{constructor(t){super("UNIQUE",t),this.defaultStyle=new _e,this.items=null,this.uniqueExpression=null,this.colorGradientType=L.YELLOW_RED,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.ThemeUnique"}destroy(){super.destroy();var t=this;if(t.uniqueExpression=null,t.colorGradientType=null,t.items){if(t.items.length>0)for(var e in t.items)t.items[e].destroy(),t.items[e]=null;t.items=null}t.defaultStyle&&(t.defaultStyle.destroy(),t.defaultStyle=null)}toServerJSONObject(){var t={};if(t=Wt.copyAttributes(t,this),t.defaultStyle&&t.defaultStyle.toServerJSONObject&&(t.defaultStyle=t.defaultStyle.toServerJSONObject()),t.items){for(var e=[],n=t.items.length,r=0;r<n;r++)e.push(t.items[r].toServerJSONObject());t.items=e}return t}static fromObj(t){var e=new di,n=t.items,r=n?n.length:0;Wt.extend(e,t),e.items=[],e.defaultStyle=_e.fromJson(t.defaultStyle);for(var i=0;i<r;i++)e.items.push(oi.fromObj(n[i]));return e}}class fi{constructor(t){this.axesColor=new be(0,0,0),this.axesDisplayed=!1,this.axesGridDisplayed=!1,this.axesTextDisplayed=!1,this.axesTextStyle=new ri,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraphAxes"}destroy(){var t=this;t.axesColor&&(t.axesColor.destroy(),t.axesColor=null),t.axesDisplayed=null,t.axesGridDisplayed=null,t.axesTextDisplayed=null,t.axesTextStyle&&(t.axesTextStyle.destroy(),t.axesTextStyle=null)}static fromObj(t){if(t){var e=new fi;return Wt.copy(e,t),e.axesColor=be.fromJson(t.axesColor),e.axesTextStyle=ri.fromObj(t.axesTextStyle),e}}}class pi{constructor(t){this.maxGraphSize=0,this.minGraphSize=0,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraphSize"}destroy(){var t=this;t.maxGraphSize=null,t.minGraphSize=null}static fromObj(t){var e=new pi;return Wt.copy(e,t),e}}class gi{constructor(t){this.graphTextDisplayed=!1,this.graphTextFormat=T.CAPTION,this.graphTextStyle=new ri,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraphText"}destroy(){var t=this;t.graphTextDisplayed=null,t.graphTextFormat=null,t.graphTextStyle&&(t.graphTextStyle.destroy(),t.graphTextStyle=null)}static fromObj(t){var e=new gi;return Wt.copy(e,t),e.graphTextStyle=ri.fromObj(t.graphTextStyle),e}}class mi{constructor(t){this.caption=null,this.graphExpression=null,this.memoryDoubleValues=null,this.uniformStyle=new _e,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraphItem"}destroy(){var t=this;t.caption=null,t.graphExpression=null,t.memoryDoubleValues=null,t.uniformStyle=null}static fromObj(t){if(t){var e=new mi;return Wt.copy(e,t),e.uniformStyle=_e.fromJson(t.uniformStyle),e}}}class yi extends ni{constructor(t){super("GRAPH",t),this.barWidth=0,this.graduatedMode=k.CONSTANT,this.graphAxes=new fi,this.graphSize=new pi,this.graphSizeFixed=!1,this.graphText=new gi,this.graphType=A.AREA,this.graphAxesTextDisplayMode=O.NONE,this.items=null,this.memoryKeys=null,this.negativeDisplayed=!1,this.offset=new ai,this.overlapAvoided=!0,this.roseAngle=0,this.startAngle=0,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraph"}destroy(){super.destroy();var t=this;if(t.barWidth=null,t.graduatedMode=null,t.graphAxes&&(t.graphAxes.destroy(),t.graphAxes=null),t.graphSize&&(t.graphSize.destroy(),t.graphSize=null),t.graphSizeFixed=null,t.graphText&&(t.graphText.destroy(),t.graphText=null),t.graphType=null,t.items){for(var e=0,n=t.items,r=n.length;e<r;e++)n[e].destroy();t.items=null}t.memoryKeys=null,t.negativeDisplayed=null,t.offset&&(t.offset.destroy(),t.offset=null),t.overlapAvoided=null,t.roseAngle=null,t.startAngle=null,t.graphAxesTextDisplayMode=null}toJSON(){return Wt.toJSON(this.toServerJSONObject())}toServerJSONObject(){var t={};return t.type=this.type,this.graphText&&(t.graphTextDisplayed=this.graphText.graphTextDisplayed,t.graphTextFormat=this.graphText.graphTextFormat,t.graphTextStyle=this.graphText.graphTextStyle),this.graphAxes&&(t.axesColor=this.graphAxes.axesColor,t.axesDisplayed=this.graphAxes.axesDisplayed,t.axesGridDisplayed=this.graphAxes.axesGridDisplayed,t.axesTextDisplayed=this.graphAxes.axesTextDisplayed,t.axesTextStyle=this.graphAxes.axesTextStyle),this.graphSize&&(t.maxGraphSize=this.graphSize.maxGraphSize,t.minGraphSize=this.graphSize.minGraphSize),this.offset&&(t.offsetFixed=this.offset.offsetFixed,t.offsetX=this.offset.offsetX,t.offsetY=this.offset.offsetY),t.barWidth=this.barWidth,t.graduatedMode=this.graduatedMode,t.graphSizeFixed=this.graphSizeFixed,t.graphType=this.graphType,t.graphAxesTextDisplayMode=this.graphAxesTextDisplayMode,t.items=this.items,t.memoryKeys=this.memoryKeys,t.negativeDisplayed=this.negativeDisplayed,t.overlapAvoided=this.overlapAvoided,t.roseAngle=this.roseAngle,t.startAngle=this.startAngle,t}static fromObj(t){var e=new yi,n=t.items,r=n?n.length:0;Wt.copy(e,t),e.items=[],e.graphAxes=fi.fromObj(t),e.graphSize=pi.fromObj(t),e.graphText=gi.fromObj(t),e.offset=ai.fromObj(t);for(var i=0;i<r;i++)e.items.push(mi.fromObj(n[i]));return e}}class vi extends ni{constructor(t){super("DOTDENSITY",t),this.dotExpression=null,this.style=new _e,this.value=null,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.ThemeDotDensity"}destroy(){var t=this;t.dotExpression=null,t.value=null,t.style&&(t.style.destroy(),t.style=null)}toServerJSONObject(){var t={};return t=Wt.copyAttributes(t,this),t.style&&t.style.toServerJSONObject&&(t.style=t.style.toServerJSONObject()),t}static fromObj(t){if(t){var e=new vi;return Wt.copy(e,t),e.style=_e.fromJson(t.style),e}}}class bi{constructor(t){this.negativeDisplayed=!1,this.negativeStyle=new _e,this.positiveStyle=new _e,this.zeroDisplayed=!1,this.zeroStyle=new _e,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraduatedSymbolStyle"}destroy(){var t=this;t.negativeDisplayed=null,t.negativeStyle=null,t.positiveStyle=null,t.zeroDisplayed=null,t.zeroStyle=null}static fromObj(t){if(t){var e=new bi;return Wt.copy(e,t),e.negativeStyle=_e.fromJson(t.negativeStyle),e.positiveStyle=_e.fromJson(t.positiveStyle),e.zeroStyle=_e.fromJson(t.zeroStyle),e}}}class _i extends ni{constructor(t){super("GRADUATEDSYMBOL",t),this.baseValue=0,this.expression=null,this.graduatedMode=k.CONSTAN,this.offset=new ai,this.style=new bi,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraduatedSymbol"}destroy(){super.destroy();var t=this;t.expression=null,t.graduatedMode=k.CONSTANT,t.offset&&(t.offset.destroy(),t.offset=null),t.style&&(t.style.destroy(),t.style=null)}toJSON(){return Wt.toJSON(this.toServerJSONObject())}toServerJSONObject(){var t={};return t.type=this.type,t.memoryData=this.memoryData,t.baseValue=this.baseValue,t.expression=this.expression,t.graduatedMode=this.graduatedMode,this.offset&&(t.offsetFixed=this.offset.offsetFixed,t.offsetX=this.offset.offsetX,t.offsetY=this.offset.offsetY),this.style&&(t.negativeStyle=this.style.negativeStyle,t.negativeDisplayed=this.style.negativeDisplayed,t.positiveStyle=this.style.positiveStyle,t.zeroDisplayed=this.style.zeroDisplayed,t.zeroStyle=this.style.zeroStyle),t}static fromObj(t){if(t){var e=new _i;return Wt.copy(e,t),e.offset=ai.fromObj(t),e.style=bi.fromObj(t),e}}}class xi{constructor(t){this.caption=null,this.end=0,this.start=0,this.style=new _e,this.visible=!0,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.ThemeRangeItem"}destroy(){var t=this;t.caption=null,t.end=null,t.start=null,t.style&&(t.style.destroy(),t.style=null),t.visible=null}toServerJSONObject(){var t={};return t=Wt.copyAttributes(t,this),t.style&&t.style.toServerJSONObject&&(t.style=t.style.toServerJSONObject()),t}static fromObj(t){if(t){var e=new xi;return Wt.copy(e,t),e.style=_e.fromJson(t.style),e}}}class wi extends ni{constructor(t){super("RANGE",t),this.precision="1.0E-12",this.items=null,this.rangeExpression=null,this.rangeMode=I.EQUALINTERVAL,this.rangeParameter=0,this.colorGradientType=L.YELLOW_RED,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.ThemeRange"}destroy(){super.destroy();var t=this;if(t.items){if(t.items.length>0)for(var e in t.items)t.items[e].destroy(),t.items[e]=null;t.items=null}t.rangeExpression=null,t.rangeMode=null,t.rangeParameter=null,t.colorGradientType=null}static fromObj(t){if(t){var e=new wi;Wt.copy(e,t);var n=t.items,r=n?n.length:0;e.items=[];for(var i=0;i<r;i++)e.items.push(xi.fromObj(n[i]));return e}}}class Si{constructor(t){t=t||{},this.bounds=null,this.caption=null,this.description=null,this.name=null,this.queryable=null,this.subLayers=null,this.type=null,this.visible=null,Wt.extend(this,t),this.CLASS_NAME="SuperMap.UGCLayer"}destroy(){var t=this;Wt.reset(t)}fromJson(t){t=t||{},Wt.extend(this,t);var e=this.bounds;e&&(this.bounds=new Qt(e.leftBottom.x,e.leftBottom.y,e.rightTop.x,e.rightTop.y))}toServerJSONObject(){var t={};return t=Wt.copyAttributes(t,this),t.bounds&&t.bounds.toServerJSONObject&&(t.bounds=t.bounds.toServerJSONObject()),t}}class Ei extends Si{constructor(t){t=t||{},super(t),this.completeLineSymbolDisplayed=null,this.maxScale=null,this.minScale=null,this.minVisibleGeometrySize=null,this.opaqueRate=null,this.symbolScalable=null,this.symbolScale=null,this.overlapDisplayed=null,this.overlapDisplayedOptions=null,this.CLASS_NAME="SuperMap.UGCMapLayer"}destroy(){super.destroy(),Wt.reset(this)}fromJson(t){super.fromJson(t)}toServerJSONObject(){return super.toServerJSONObject()}}class Ci{constructor(t){this.foreignTableName=null,this.joinFilter=null,this.joinType=null,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.JoinItem"}destroy(){var t=this;t.foreignTableName=null,t.joinFilter=null,t.joinType=null}toServerJSONObject(){var t={};return t=Wt.copyAttributes(t,this),t}}class Mi extends Ei{constructor(t){t=t||{},super(t),this.datasetInfo=null,this.displayFilter=null,this.joinItems=null,this.representationField=null,this.ugcLayerType=null,this.CLASS_NAME="SuperMap.UGCSubLayer"}fromJson(t){if(super.fromJson(t),this.datasetInfo&&(this.datasetInfo=new Vn(this.datasetInfo)),this.joinItems&&this.joinItems.length){for(var e=[],n=0;n<this.joinItems.length;n++)e[n]=new Ci(this.joinItems[n]);this.joinItems=e}}destroy(){super.destroy(),Wt.reset(this)}toServerJSONObject(){var t=super.toServerJSONObject();if(t.joinItems){for(var e=[],n=0;n<t.joinItems.length;n++)t.joinItems[n].toServerJSONObject&&(e[n]=t.joinItems[n].toServerJSONObject());t.joinItems=e}return t.datasetInfo&&t.datasetInfo.toServerJSONObject&&(t.datasetInfo=t.datasetInfo.toServerJSONObject()),t}}class Ti extends Mi{constructor(t){t=t||{},super(t),this.theme=null,this.themeElementPosition=null,this.CLASS_NAME="SuperMap.ServerTheme"}destroy(){super.destroy(),Wt.reset(this)}fromJson(t){super.fromJson(t);var e=this.theme,n=e&&e.type;switch(n){case"LABEL":this.theme=hi.fromObj(e);break;case"UNIQUE":this.theme=di.fromObj(e);break;case"GRAPH":this.theme=yi.fromObj(e);break;case"DOTDENSITY":this.theme=vi.fromObj(e);break;case"GRADUATEDSYMBOL":this.theme=_i.fromObj(e);break;case"RANGE":this.theme=wi.fromObj(e);break;default:break}this.themeElementPosition&&(this.themeElementPosition=new Kt(this.themeElementPosition.x,this.themeElementPosition.y))}toServerJSONObject(){var t=super.toServerJSONObject();return t.themeElementPosition&&t.themeElementPosition.toServerJSONObject&&(t.themeElementPosition=t.themeElementPosition.toServerJSONObject()),t.theme&&t.theme.toServerJSONObject&&(t.theme=t.theme.toServerJSONObject()),t}}class Ai extends Mi{constructor(t){t=t||{},super(t),this.colorDictionarys=null,this.brightness=null,this.colorGradientType=null,this.colors=null,this.contrast=null,this.dashStyle=null,this.gridType=null,this.horizontalSpacing=null,this.sizeFixed=null,this.solidStyle=null,this.specialColor=null,this.specialValue=null,this.specialValueTransparent=null,this.verticalSpacing=null,this.CLASS_NAME="SuperMap.Grid"}destroy(){super.destroy(),Wt.reset(this)}fromJson(t){if(super.fromJson(t),this.specialColor&&(this.specialColor=new be(this.specialColor.red,this.specialColor.green,this.specialColor.blue)),this.colors){var e,n=[];for(var r in this.colors)e=this.colors[r],n.push(new be(e.red,e.green,e.blue));this.colors=n}if(this.dashStyle&&(this.dashStyle=new _e(this.dashStyle)),this.solidStyle&&(this.solidStyle=new _e(this.solidStyle)),this.colorDictionary){var i,o=[];for(var a in this.colorDictionary)i=this.colorDictionary[a],o.push(new jn({elevation:a,color:i}));this.colorDictionarys=o}delete this.colorDictionary}toServerJSONObject(){var t=super.toServerJSONObject();return t.dashStyle&&t.dashStyle.toServerJSONObject&&(t.dashStyle=t.dashStyle.toServerJSONObject()),t.solidStyle&&t.solidStyle.toServerJSONObject&&(t.solidStyle=t.solidStyle.toServerJSONObject()),t}}class Oi extends Mi{constructor(t){t=t||{},super(t),this.brightness=null,this.colorSpaceType=null,this.contrast=null,this.displayBandIndexes=null,this.transparent=null,this.transparentColor=null,this.transparentColorTolerance=null,this.CLASS_NAME="SuperMap.Image"}destroy(){super.destroy(),Wt.reset(this)}fromJson(t){super.fromJson(t),this.transparentColor&&(this.transparentColor=new be(this.transparentColor.red,this.transparentColor.green,this.transparentColor.blue))}toServerJSONObject(){return super.toServerJSONObject()}}class ki extends Mi{constructor(t){t=t||{},super(t),this.style=null,this.CLASS_NAME="SuperMap.Vector"}destroy(){super.destroy(),Wt.reset(this)}fromJson(t){super.fromJson(t);var e=this.style;e&&(this.style=new _e(e))}toServerJSONObject(){var t=super.toServerJSONObject();return t.style&&t.style.toServerJSONObject&&(t.style=t.style.toServerJSONObject()),t}}class Ii extends on{constructor(t,e){super(t,e),this.isTempLayers=!1,e&&Wt.extend(this,e),this.CLASS_NAME="SuperMap.GetLayersInfoService"}destroy(){super.destroy(),Wt.reset(this)}processAsync(){var t=this,e="GET";t.isTempLayers||(t.url=Wt.urlPathAppend(t.url,"layers")),t.request({method:e,params:null,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}serviceProcessCompleted(t,e){var n,r,i,o=this;t=Wt.transformResult(t),n=!!t&&t.length>0,r=n?t[0].subLayers.layers:null,i=r?r.length:0,o.handleLayers(i,r),o.events.triggerEvent("processCompleted",{result:t[0],options:e})}handleLayers(t,e){var n,r=this;if(t)for(var i=0;i<t;i++)if(e[i].subLayers&&e[i].subLayers.layers&&e[i].subLayers.layers.length>0)r.handleLayers(e[i].subLayers.layers.length,e[i].subLayers.layers);else{var o=e[i].ugcLayerType;switch(o){case"THEME":n=new Ti,n.fromJson(e[i]),e[i]=n;break;case"GRID":n=new Ai,n.fromJson(e[i]),e[i]=n;break;case"IMAGE":n=new Oi,n.fromJson(e[i]),e[i]=n;break;case"VECTOR":n=new ki,n.fromJson(e[i]),e[i]=n;break;default:break}}}}class Pi{constructor(t){t&&(this.bounds=null,this.searchRadius=0,this.zValueFieldName=null,this.zValueScale=1,this.resolution=null,this.filterQueryParameter=null,this.outputDatasetName=null,this.outputDatasourceName=null,this.pixelFormat=null,this.dataset=null,this.inputPoints=null,this.InterpolationAnalystType="dataset",this.clipParam=null,Wt.extend(this,t),this.CLASS_NAME="SuperMap.InterpolationAnalystParameters")}destroy(){var t=this;t.bounds=null,t.searchRadius=null,t.zValueFieldName=null,t.zValueScale=null,t.resolution=null,t.filterQueryParameter=null,t.outputDatasetName=null,t.pixelFormat=null}static toObject(t,e){for(var n in t)if("inputPoints"===n&&"geometry"===t.InterpolationAnalystType){for(var r=[],i=0;i<t.inputPoints.length;i++){var o=t.inputPoints[i],a={x:o.x,y:o.y,z:o.tag};r.push(a)}e[n]=r}else e[n]=t[n]}}class Li extends Pi{constructor(t){super(t),this.smooth=.1,this.tension=40,this.searchMode=null,this.expectedCount=12,this.maxPointCountForInterpolation=200,this.maxPointCountInNode=50,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.InterpolationRBFAnalystParameters"}destroy(){super.destroy();var t=this;t.smooth=null,t.tension=null,t.searchMode=null,t.expectedCount=null,t.maxPointCountForInterpolation=null,t.maxPointCountInNode=null}static toObject(t,e){for(var n in t)e[n]=t[n]}}class Ni extends Pi{constructor(t){super(t),t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.InterpolationDensityAnalystParameters"}destroy(){super.destroy()}}class Ri extends Pi{constructor(t){super(t),this.power=2,this.searchMode=null,this.expectedCount=12,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.InterpolationIDWAnalystParameters"}destroy(){super.destroy();var t=this;t.power=null,t.searchMode=null,t.expectedCount=null}}class Di extends Pi{constructor(t){super(t),this.type=null,this.mean=null,this.angle=0,this.nugget=0,this.range=0,this.sill=0,this.variogramMode=st.SPHERICAL,this.exponent=lt.EXP1,this.searchMode=null,this.expectedCount=12,this.maxPointCountForInterpolation=200,this.maxPointCountInNode=50,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.InterpolationKrigingAnalystParameters"}destroy(){super.destroy();var t=this;t.type=null,t.mean=null,t.angle=null,t.nugget=null,t.range=null,t.sill=null,t.variogramMode=null,t.exponent=null,t.searchMode=null,t.expectedCount=null,t.maxPointCountForInterpolation=null,t.maxPointCountInNode=null}}class Fi extends fn{constructor(t,e){super(t,e),this.mode=null,e&&Wt.extend(this,e)}destroy(){super.destroy(),this.mode=null,this.CLASS_NAME="SuperMap.InterpolationAnalystService"}processAsync(t){var e={},n=this;t instanceof Ni?(n.mode="Density","geometry"===t.InterpolationAnalystType?n.url=Wt.urlPathAppend(n.url,"geometry/interpolation/density"):n.url=Wt.urlPathAppend(n.url,"datasets/"+t.dataset+"/interpolation/density")):t instanceof Ri?(n.mode="IDW","geometry"===t.InterpolationAnalystType?n.url=Wt.urlPathAppend(n.url,"geometry/interpolation/idw"):n.url=Wt.urlPathAppend(n.url,"datasets/"+t.dataset+"/interpolation/idw")):t instanceof Li?(n.mode="RBF","geometry"===t.InterpolationAnalystType?n.url=Wt.urlPathAppend(n.url,"geometry/interpolation/rbf"):n.url=Wt.urlPathAppend(n.url,"datasets/"+t.dataset+"/interpolation/rbf")):t instanceof Di&&(n.mode="Kriging","geometry"===t.InterpolationAnalystType?n.url=Wt.urlPathAppend(n.url,"geometry/interpolation/kriging"):n.url=Wt.urlPathAppend(n.url,"datasets/"+t.dataset+"/interpolation/kriging")),Pi.toObject(t,e);var r=Wt.toJSON(e);n.url=Wt.urlAppend(n.url,"returnContent=true"),n.request({method:"POST",data:r,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}class ji{constructor(t){t&&(this.datasetName="",this.query="",this.resolution=80,this.method=0,this.meshType=0,this.fields="",this.radius=300,this.meshSizeUnit=ft.METER,this.radiusUnit=ft.METER,this.areaUnit=dt.SQUAREMILE,this.output=null,this.mappingParameters=null,Wt.extend(this,t),this.CLASS_NAME="SuperMap.KernelDensityJobParameter")}destroy(){this.datasetName=null,this.query=null,this.resolution=null,this.method=null,this.radius=null,this.meshType=null,this.fields=null,this.meshSizeUnit=null,this.radiusUnit=null,this.areaUnit=null,this.output instanceof En&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof Cn&&(this.mappingParameters.destroy(),this.mappingParameters=null)}static toObject(t,e){for(var n in t)"datasetName"!==n?"output"!==n?(e["analyst"]=e["analyst"]||{},"query"===n&&t[n]?e["analyst"][n]=t[n].toBBOX():e["analyst"][n]=t[n],"mappingParameters"===n&&(e["analyst"][n]=e["analyst"][n]||{},e["analyst"]["mappingParameters"]=t[n])):(e["output"]=e["output"]||{},e["output"]=t[n]):(e["input"]=e["input"]||{},e["input"][n]=t[n])}}class Bi extends Tn{constructor(t,e){super(t,e),this.url=Wt.urlPathAppend(this.url,"spatialanalyst/density"),this.CLASS_NAME="SuperMap.KernelDensityJobsService"}destroy(){super.destroy()}getKernelDensityJobs(){super.getJobs(this.url)}getKernelDensityJob(t){super.getJobs(Wt.urlPathAppend(this.url,t))}addKernelDensityJob(t,e){super.addJob(this.url,t,ji,e)}}class zi{constructor(){this.CLASS_NAME="LabelMatrixCell"}}class Ui extends zi{constructor(t){super(t),this.height=0,this.pathField=null,this.rotation=0,this.width=0,this.sizeFixed=!1,this.type="IMAGE",t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.LabelImageCell"}destroy(){var t=this;t.height=null,t.pathField=null,t.rotation=null,t.width=null,t.sizeFixed=null}}class Gi extends zi{constructor(t){super(t),this.style=new _e,this.symbolIDField=null,this.type="SYMBOL",t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.LabelSymbolCell"}destroy(){var t=this;t.style&&(t.style.destroy(),t.style=null),t.symbolIDField=null}}class qi extends zi{constructor(t){super(t),this.themeLabel=new hi,this.type="THEME",t&&Wt.extend(this,t),this.CLASS_NAME=" SuperMap.LabelThemeCell"}destroy(){var t=this;t.themeLabel&&(t.themeLabel.destroy(),t.themeLabel=null)}}class Vi{constructor(t){this.layerName=null,this.isVisible=null,this.displayFilter=null,this.fieldValuesDisplayFilter=null,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.LayerStatus"}destroy(){var t=this;t.layerName=null,t.isVisible=null,t.displayFilter=null}toJSON(){var t="{";t+='"type":"UGC",';var e=[];return this.layerName&&(e.push('"name":"'+this.layerName+'"'),e.push('"visible":'+this.isVisible)),this.displayFilter&&e.push('"displayFilter":"'+this.displayFilter+'"'),(this.minScale||0==this.minScale)&&e.push('"minScale":'+this.minScale),(this.maxScale||0==this.maxScale)&&e.push('"maxScale":'+this.maxScale),this.fieldValuesDisplayFilter&&e.push('"fieldValuesDisplayFilter":'+Wt.toJSON(this.fieldValuesDisplayFilter)),t+=e,t+="}",t}}class Hi{constructor(t){this.datasourceConnectionInfo=null,this.foreignKeys=null,this.foreignTable=null,this.linkFields=null,this.linkFilter=null,this.name=null,this.primaryKeys=null,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.LinkItem"}destroy(){var t=this;t.datasourceConnectionInfo instanceof Sn&&(t.datasourceConnectionInfo.destroy(),t.datasourceConnectionInfo=null),t.foreignKeys=null,t.foreignTable=null,t.linkFields=null,t.linkFilter=null,t.name=null,t.primaryKeys=null}}class Wi extends on{constructor(t,e){super(t,e),this.projection=null,this.CLASS_NAME="SuperMap.MapService",e&&Wt.extend(this,e);var n=this;if(n.projection){var r=n.projection.split(":");r instanceof Array&&(2===r.length&&(n.url=Wt.urlAppend(n.url,"prjCoordSys="+encodeURIComponent(`{"epsgCode":"${r[1]}"}`))),1===r.length&&(n.url=Wt.urlAppend(n.url,"prjCoordSys="+encodeURIComponent(`{"epsgCode":"${r[0]}"}`))))}this.eventCount=0}destroy(){super.destroy();var t=this;t.events&&(t.events.un(t.eventListeners),t.events.listeners=null,t.events.destroy(),t.events=null,t.eventListeners=null)}processAsync(t){let e=++this.eventCount,n={scope:this,processCompleted:function(r){if(e===r.result.eventId&&t)return delete r.result.eventId,t(r),this.events&&this.events.un(n),!1},processFailed:function(r){if((e===r.error.eventId||e===r.eventId)&&t)return t(r),this.events&&this.events.un(n),!1}};this.events.on(n);var r=this;r.request({method:"GET",scope:r,success(t,n){t.eventId=e,this.serviceProcessCompleted(t,n)},failure(t,n){t.error&&(t.error.eventId=e),t.eventId=e,this.serviceProcessFailed(t,n)}})}serviceProcessCompleted(t,e){var n=this;t=Wt.transformResult(t);var r=t.code>=200&&t.code<300||0==t.code||304===t.code,i=t.code&&r;!t.code||i?n.events&&n.events.triggerEvent("processCompleted",{result:t,options:e}):n.events.triggerEvent("processFailed",{error:t,options:e})}}class Yi{constructor(t){t&&(this.dataset=null,this.extractRegion=null,this.expression=null,this.isZip=!1,this.ignoreNoValue=!1,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=!1,Wt.extend(this,t),this.CLASS_NAME="SuperMap.MathExpressionAnalysisParameters")}destroy(){var t=this;t.dataset=null,t.bounds=null,t.expression=null,t.isZip=!0,t.ignoreNoValue=!0,t.targetDatasource=null,t.resultGridName=null,t.deleteExistResultDataset=null}static toObject(t,e){for(var n in t)if("dataset"!==n&&(e[n]=t[n]),"extractRegion"===n&&t[n]){for(var r=t[n].components[0].components,i={},o=[],a="REGION",s=r.length,l=0;l<s-1;l++){var u={};u["x"]=r[l].x,u["y"]=r[l].y,o.push(u)}i["points"]=o,i["type"]=a,e[n]=i}}}class Xi extends fn{constructor(t,e){super(t,e),this.CLASS_NAME="SuperMap.MathExpressionAnalysisService"}destroy(){super.destroy()}processAsync(t){var e=this,n={};t instanceof Yi&&(e.url=Wt.urlPathAppend(e.url,"datasets/"+t.dataset+"/mathanalyst")),Yi.toObject(t,n);var r=Wt.toJSON(n);e.url=Wt.urlAppend(e.url,"returnContent=true"),e.request({method:"POST",data:r,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}class Ji{constructor(t,e){t&&(this.geometry=t,this.unit=E.METER,this.prjCoordSys=null,this.distanceMode=null,e&&Wt.extend(this,e),this.CLASS_NAME="SuperMap.MeasureParameters")}destroy(){var t=this;t.geometry=null,t.unit=null,t.prjCoordSys=null}}class Zi extends on{constructor(t,e){super(t,e),this.measureMode=S.DISTANCE,e&&Wt.extend(this,e),this.eventCount=0,this.CLASS_NAME="SuperMap.MeasureService"}destroy(){super.destroy();var t=this;t.measureMode=null}processAsync(t,e){if(!(t instanceof Ji))return;let n=++this.eventCount,r={scope:this,processCompleted:function(t){if(n===t.result.eventId&&e)return delete t.result.eventId,e(t),this.events&&this.events.un(r),!1},processFailed:function(t){if((n===t.error.eventId||n===t.eventId)&&e)return e(t),this.events&&this.events.un(r),!1}};this.events.on(r);var i=this,o=t.geometry,a=0,s=null;if(o){i.url=Wt.urlPathAppend(i.url,i.measureMode===S.AREA?"area":"distance");var l,u,c,h=Se.fromGeometry(o);if(h)a=h.parts[0],s=h.points.splice(0,a),t.prjCoordSys?("object"===typeof t.prjCoordSys?(u=t.prjCoordSys.projCode,l='{"epsgCode"'+u.substring(u.indexOf(":"),u.length)+"}"):"string"===typeof t.prjCoordSys&&(l='{"epsgCode"'+t.prjCoordSys.substring(t.prjCoordSys.indexOf(":"),t.prjCoordSys.length)+"}"),c={point2Ds:Wt.toJSON(s),unit:t.unit,prjCoordSys:l,distanceMode:t.distanceMode||"Geodesic"}):c={point2Ds:Wt.toJSON(s),unit:t.unit,distanceMode:t.distanceMode||"Geodesic"},i.request({method:"GET",params:c,scope:i,success(t,e){t.eventId=n,this.serviceProcessCompleted(t,e)},failure(t,e){t.error&&(t.error.eventId=n),t.eventId=n,this.serviceProcessFailed(t,e)}})}}}class Ki{constructor(t){t=t||{},this.allowPointOverlap=!0,this.allowPointWithTextDisplay=!0,this.allowTextOverlap=!1,this.allowTextAndPointOverlap=!0,this.allowThemeGraduatedSymbolOverlap=!1,this.allowThemeGraphOverlap=!1,this.horizontalOverlappedSpaceSize=0,this.verticalOverlappedSpaceSize=0,Wt.extend(this,t),this.ugcLayer=new Si(t),this.CLASS_NAME="SuperMap.OverlapDisplayedOptions"}destroy(){Wt.reset(this)}fromJson(t){this.ugcLayer.fromJson.apply(this,[t])}toServerJSONObject(){var t=this.ugcLayer.toServerJSONObject.apply(this,arguments);return t}toString(){var t=this.ugcLayer.toServerJSONObject.apply(this,arguments),e="{";for(var n in t)t.hasOwnProperty(n)&&(e+="'"+n+"':"+t[n]+",");return e=e.substr(0,e.length-1),e+="}",e}}class Qi extends fn{constructor(t,e){super(t,e),this.mode=null,e&&Wt.extend(this,e),this.CLASS_NAME="SuperMap.OverlayAnalystService"}destroy(){super.destroy(),this.mode=null}processAsync(t){var e={},n=this;t instanceof Wn?(n.mode="datasets",n.url=Wt.urlPathAppend(n.url,"datasets/"+t.sourceDataset+"/overlay"),Wn.toObject(t,e)):t instanceof Nr&&(n.mode="geometry",t.operateGeometries&&t.sourceGeometries?(n.url=Wt.urlPathAppend(n.url,"geometry/overlay/batch"),n.url=Wt.urlAppend(n.url,"ignoreAnalystParam=true")):n.url=Wt.urlPathAppend(n.url,"geometry/overlay"),Nr.toObject(t,e)),this.returnContent=!0;var r=Wt.toJSON(e);n.request({method:"POST",data:r,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}dataFormat(){return[m.GEOJSON,m.ISERVER,m.FGB]}}class $i{constructor(t){t&&(this.datasetName="",this.datasetOverlay="",this.mode="",this.srcFields="",this.overlayFields="",this.output=null,this.mappingParameters=null,Wt.extend(this,t),this.CLASS_NAME="SuperMap.OverlayGeoJobParameter")}destroy(){this.datasetName=null,this.datasetOverlay=null,this.mode=null,this.srcFields=null,this.overlayFields=null,this.output instanceof En&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof Cn&&(this.mappingParameters.destroy(),this.mappingParameters=null)}static toObject(t,e){for(var n in t)"datasetName"!=n?"output"!==n?(e["analyst"]=e["analyst"]||{},e["analyst"][n]=t[n],"mappingParameters"===n&&(e["analyst"][n]=e["analyst"][n]||{},e["analyst"]["mappingParameters"]=t[n])):(e["output"]=e["output"]||{},e["output"]=t[n]):(e["input"]=e["input"]||{},e["input"][n]=t[n])}}class to extends Tn{constructor(t,e){super(t,e),this.url=Wt.urlPathAppend(this.url,"spatialanalyst/overlay"),this.CLASS_NAME="SuperMap.OverlayGeoJobsService"}destroy(){super.destroy()}getOverlayGeoJobs(){super.getJobs(this.url)}getOverlayGeoJob(t){super.getJobs(Wt.urlPathAppend(this.url,t))}addOverlayGeoJob(t,e){super.addJob(this.url,t,$i,e)}}class eo extends Rn{constructor(t){t=t||{},super(t),this.returnContent=!0,this.bounds=null,Wt.extend(this,t),this.CLASS_NAME="SuperMap.QueryByBoundsParameters"}destroy(){super.destroy();var t=this;t.returnContent=null,t.bounds&&(t.bounds=null)}}class no extends on{constructor(t,e){super(t,e),this.returnContent=!1,this.format=m.GEOJSON,this.returnFeatureWithFieldCaption=!1,e&&Wt.extend(this,e),this.CLASS_NAME="SuperMap.QueryService",this.url&&(e&&e.format&&(this.format=e.format.toUpperCase()),this.url=Wt.urlPathAppend(this.url,"queryResults"))}destroy(){super.destroy();var t=this;t.returnContent=null,t.format=null}processAsync(t){if(t instanceof Rn){var e=this,n=null,r=null;e.returnContent=t.returnContent,r=e.getJsonParameters(t),e.returnContent||(n=t.returnCustomResult,n&&(e.url=Wt.urlAppend(e.url,"returnCustomResult="+n))),e.returnFeatureWithFieldCaption=t.returnFeatureWithFieldCaption,e.request({method:"POST",data:r,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}serviceProcessCompleted(t,e){var n=this;t=Wt.transformResult(t);var r=new Ee;if(t&&t.recordsets)for(var i=0,o=t.recordsets,a=o.length;i<a;i++)o[i].features&&(!0===n.returnFeatureWithFieldCaption&&o[i].features.map(t=>(t.fieldNames=o[i].fieldCaptions,t)),n.format===m.GEOJSON&&(o[i].features=r.toGeoJSON(o[i].features)));n.events.triggerEvent("processCompleted",{result:t,options:e})}dataFormat(){return[m.GEOJSON,m.ISERVER,m.FGB]}getQueryParameters(t){return new Rn({customParams:t.customParams,expectCount:t.expectCount,networkType:t.networkType,queryOption:t.queryOption,queryParams:t.queryParams,startRecord:t.startRecord,prjCoordSys:t.prjCoordSys,holdTime:t.holdTime})}}class ro extends no{constructor(t,e){super(t,e),this.CLASS_NAME="SuperMap.QueryByBoundsService"}destroy(){super.destroy()}getJsonParameters(t){if(!(t instanceof eo))return null;var e=this,n="",r=null,i=t.bounds;return r=e.getQueryParameters(t),n+="'queryMode':'BoundsQuery','queryParameters':",n+=Wt.toJSON(r),n+=",'bounds': {'rightTop':{'y':"+i.top+",'x':"+i.right+"},'leftBottom':{'y':"+i.bottom+",'x':"+i.left+"}}",n="{"+n+"}",n}}class io extends Rn{constructor(t){t=t||{},super(t),this.geometry=null,this.isNearest=null,this.returnContent=!0,Wt.extend(this,t),this.CLASS_NAME="SuperMap.QueryByDistanceParameters"}destroy(){super.destroy();var t=this;t.returnContent=null,t.distance=null,t.isNearest=null,t.geometry&&(t.geometry.destroy(),t.geometry=null)}}class oo extends no{constructor(t,e){super(t,e),this.CLASS_NAME="SuperMap.QueryByDistanceService"}destroy(){super.destroy()}getJsonParameters(t){if(t instanceof io){var e=this,n="",r=e.getQueryParameters(t),i=Se.fromGeometry(t.geometry);return n+=t.isNearest?"'queryMode':'FindNearest','queryParameters':":"'queryMode':'DistanceQuery','queryParameters':",n+=Wt.toJSON(r),n+=",'geometry':"+Wt.toJSON(i)+",'distance':"+t.distance,n="{"+n+"}",n}}}class ao extends Rn{constructor(t){t=t||{},super(t),this.returnContent=!0,this.geometry=null,this.spatialQueryMode=x.INTERSECT,Wt.extend(this,t),this.CLASS_NAME="SuperMap.QueryByGeometryParameters"}destroy(){super.destroy();var t=this;t.returnContent=null,t.geometry=null,t.spatialQueryMode=null}}class so extends no{constructor(t,e){super(t,e),this.CLASS_NAME="SuperMap.QueryByGeometryService"}destroy(){super.destroy()}getJsonParameters(t){if(t instanceof ao){var e=this,n="",r=null,i=t.geometry,o=Se.fromGeometry(i);return r=e.getQueryParameters(t),n+="'queryMode':'SpatialQuery','queryParameters':",n+=Wt.toJSON(r)+",'geometry':"+Wt.toJSON(o)+",'spatialQueryMode':"+Wt.toJSON(t.spatialQueryMode),n="{"+n+"}",n}}}class lo extends Rn{constructor(t){t=t||{},super(t),this.returnContent=!0,Wt.extend(this,t),this.CLASS_NAME="SuperMap.QueryBySQLParameters"}destroy(){super.destroy();var t=this;t.returnContent=null}}class uo extends no{constructor(t,e){super(t,e),this.CLASS_NAME="SuperMap.QueryBySQLService"}destroy(){super.destroy()}getJsonParameters(t){if(t instanceof lo){var e=this,n="",r=null;return r=e.getQueryParameters(t),n+="'queryMode':'SqlQuery','queryParameters':",n+=Wt.toJSON(r),n="{"+n+"}",n}}}class co{constructor(t,e){this.options=e||{},this.url=t}queryByBounds(t,e,n){var r=this,i=new ro(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:r._processFormat(n)});i.processAsync(t)}queryByDistance(t,e,n){var r=this,i=new oo(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n});i.processAsync(t)}queryBySQL(t,e,n){var r=this,i=new uo(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n});i.processAsync(t)}queryByGeometry(t,e,n){var r=this,i=new so(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n});i.processAsync(t)}_processFormat(t){return t||m.GEOJSON}}class ho{constructor(t){if(!t)return this;this.sourceRoute=null,this.point=null,this.tolerance=null,this.isIgnoreGap=!1,Wt.extend(this,t),this.CLASS_NAME="SuperMap.RouteCalculateMeasureParameters"}destroy(){var t=this;t.sourceRoute=null,t.point=null,t.tolerance&&(t.tolerance=null),t.isIgnoreGap&&(t.isIgnoreGap=!1)}}class fo extends fn{constructor(t,e){super(t,e),this.CLASS_NAME="SuperMap.RouteCalculateMeasureService"}destroy(){super.destroy()}processAsync(t){if(t instanceof ho){var e,n=this;e=n.getJsonParameters(t),n.request({method:"POST",data:e,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}getJsonParameters(t){var e,n="geometry/calculatemeasure",r=this;return r.url=Wt.urlPathAppend(r.url,n),r.url=Wt.urlAppend(r.url,"returnContent=true"),e=Wt.toJSON(t),e}}class po{constructor(t){if(!t)return this;this.sourceRoute=null,this.dataset=null,this.routeIDField=null,this.routeID=null,this.type=null,this.measure=null,this.offset=0,this.isIgnoreGap=!1,this.startMeasure=null,this.endMeasure=null;var e=t.sourceRoute,n={};if(e&&e instanceof Ut&&e.components){n.type=e.type,n.parts=e.parts;for(var r=[],i=0,o=e.components.length;i<o;i++)r=r.concat(e.components[i].components);n.points=r,t.sourceRoute=n}Wt.extend(this,t),this.CLASS_NAME="SuperMap.RouteLocatorParameters"}destroy(){var t=this;t.sourceRoute=null,t.type=null,t.measure=null,t.offset=0,t.isIgnoreGap=!1,t.startMeasure=null,t.endMeasure=null,t.dataset=null,t.routeID=null,t.routeIDField=null}}class go extends fn{constructor(t,e){super(t,e),this.CLASS_NAME="SuperMap.RouteLocatorService"}destroy(){super.destroy()}processAsync(t){if(t instanceof po){var e,n=this;e=n.getJsonParameters(t),n.request({method:"POST",data:e,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}getJsonParameters(t){var e,n="geometry/routelocator",r=this;return t.dataset&&(n="datasets/"+t.dataset+"/linearreferencing/routelocator",t.sourceRoute=null),r.url=Wt.urlPathAppend(r.url,n),r.url=Wt.urlAppend(r.url,"returnContent=true"),e=Wt.toJSON(t),e}}class mo{constructor(t){this.fieldNames=null,this.fieldValues=null,this.geometry=null,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.ServerFeature"}destroy(){var t=this;t.fieldNames=null,t.fieldValues=null,t.geometry&&(t.geometry.destroy(),t.geometry=null)}toFeature(){var t,e,n,r,i={},o=this;for(var a in t=o.fieldNames,e=o.fieldValues,t)i[t[a]]=e[a];return o.geometry&&(n=o.geometry.toGeometry()),r=new me(n,i),o.geometry&&o.geometry.id&&(r.fid=o.geometry.id),r}static fromJson(t){var e=null;if(t)return e=t.geometry,e&&(e=Se.fromJson(e)),new mo({fieldNames:t.fieldNames,fieldValues:t.fieldValues,geometry:e})}}class yo{constructor(t){t&&(this.datasourceName=null,this.description=null,this.coordUnit=null,this.distanceUnit=null,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.SetDatasourceParameters")}destroy(){var t=this;t.datasourceName=null,t.description=null,t.coordUnit=null,t.distanceUnit=null}}class vo{constructor(t){t=t||{},this.resourceID=null,this.tempLayerName=null,this.layerInfo=null,Wt.extend(this,t),this.CLASS_NAME="SuperMap.SetLayerInfoParameters"}destroy(){var t=this;t.resourceID=null,t.tempLayerName=null,t.layerInfo=null}}class bo extends on{constructor(t,e){super(t,e),e&&Wt.extend(this,e),this.CLASS_NAME="SuperMap.SetLayerInfoService"}destroy(){super.destroy(),Wt.reset(this)}processAsync(t){if(t){var e=this,n=Wt.toJSON(t);e.request({method:"PUT",data:n,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}}class _o{constructor(t){t=t||{},this.isTempLayers=null,this.resourceID=null,this.layersInfo=null,Wt.extend(this,t),this.CLASS_NAME="SuperMap.SetLayersInfoParameters"}destroy(){var t=this;t.isTempLayers=null,t.resourceID=null,t.layersInfo=null}}class xo extends on{constructor(t,e){super(t,e),this.resourceID=null,this.isTempLayers=!1,e&&Wt.extend(this,e),this.CLASS_NAME="SuperMap.SetLayersInfoService"}destroy(){super.destroy(),Wt.reset(this)}processAsync(t){if(t){var e,n=[],r=this,i="";r.isTempLayers?(r.url=Wt.urlPathAppend(r.url,"tempLayersSet/"+r.resourceID),i="PUT"):(r.url=Wt.urlPathAppend(r.url,"tempLayersSet"),i="POST"),t.subLayers||(t.subLayers={layers:[]}),t.subLayers.layers||(t.subLayers.layers=[]);var o=t.subLayers.layers,a=o.length;for(let t in o){if("GRID"===o[t].ugcLayerType){var s={},l=o[t].colorDictionarys;for(var u in l){var c=l[u].elevation;s[c]=l[u].color}}o[t].colorDictionary=s,delete o[t].colorDictionarys}for(let t=0;t<a;t++)o[t].toJsonObject?n.push(o[t].toJsonObject()):n.push(o[t]);e=Wt.extend(e,t),e.subLayers={layers:n},e.object=null;var h=Wt.toJSON([e]);r.request({method:i,data:h,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}}class wo{constructor(t){this.layerStatusList=[],this.holdTime=15,this.resourceID=null,t&&Wt.extend(this,t)}destroy(){var t=this;t.layerStatusList=null,t.holdTime=null,t.resourceID=null}toJSON(){var t="{";t+='"layers":[';for(var e=[],n=0,r=this.layerStatusList.length;n<r;n++)e.push(this.layerStatusList[n].toJSON());return t+=e,t+="]",t+="}",t}}class So extends on{constructor(t,e){super(t,e),this.lastparams=null,this.mapUrl=t,e&&Wt.extend(this,e),this.CLASS_NAME="SuperMap.SetLayerStatusService"}destroy(){super.destroy(),Wt.reset(this)}processAsync(t){if(t instanceof wo){var e=this,n="POST";if(e.url=e.mapUrl,null==t.resourceID)e.url=Wt.urlPathAppend(e.url,"tempLayersSet"),e.lastparams=t,e.request({method:n,scope:e,success:e.createTempLayerComplete,failure:e.serviceProcessFailed});else{e.url=Wt.urlPathAppend(e.url,"tempLayersSet/"+t.resourceID),e.url=Wt.urlAppend(e.url,"elementRemain=true&reference="+t.resourceID+"&holdTime="+t.holdTime.toString());var r="[{";r+='"type":"UGC",',null!=t.layerStatusList&&t.layerStatusList.length>0&&(r+='"subLayers":'+t.toJSON()),r+=',"visible":true,',r+='"name":"'+this.getMapName(this.mapUrl)+'"',r+="}]",e.request({method:"PUT",data:r,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}}createTempLayerComplete(t){var e=this;t=Wt.transformResult(t),t.succeed&&(e.lastparams.resourceID=t.newResourceID),e.processAsync(e.lastparams)}getMapName(t){var e=t;"/"===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1));var n=e.lastIndexOf("/"),r=e.substring(n+1,e.length);return r}serviceProcessCompleted(t,e){var n=this;t=Wt.transformResult(t),null!=t&&null!=n.lastparams&&(t.newResourceID=n.lastparams.resourceID),n.events.triggerEvent("processCompleted",{result:t,options:e})}}class Eo{constructor(t){t&&(this.datasetName="",this.datasetQuery="",this.geometryQuery="",this.mode=x.CONTAIN,this.output=null,this.mappingParameters=null,Wt.extend(this,t),this.CLASS_NAME="SuperMap.SingleObjectQueryJobsParameter")}destroy(){this.datasetName=null,this.datasetQuery=null,this.geometryQuery=null,this.mode=null,this.output instanceof En&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof Cn&&(this.mappingParameters.destroy(),this.mappingParameters=null)}static toObject(t,e){for(var n in t)"datasetName"!==n?"output"!==n?(e["analyst"]=e["analyst"]||{},e["analyst"][n]=t[n],"mappingParameters"===n&&(e["analyst"][n]=e["analyst"][n]||{},e["analyst"]["mappingParameters"]=t[n])):(e["output"]=e["output"]||{},e["output"]=t[n]):(e["input"]=e["input"]||{},e["input"][n]=t[n])}}class Co extends Tn{constructor(t,e){super(t,e),this.url=Wt.urlPathAppend(this.url,"spatialanalyst/query"),this.CLASS_NAME="SuperMap.SingleObjectQueryJobsService"}destroy(){super.destroy()}getQueryJobs(){super.getJobs(this.url)}getQueryJob(t){super.getJobs(Wt.urlPathAppend(this.url,t))}addQueryJob(t,e){super.addJob(this.url,t,Eo,e)}}class Mo{constructor(t){t=t||{},this.keyWord=null,this.returnPosition=!1,Wt.extend(this,t),this.CLASS_NAME="SuperMap.StopQueryParameters"}destroy(){Wt.reset(this)}}class To extends on{constructor(t,e){super(t,e),e=e||{},Wt.extend(this,e),this.CLASS_NAME="SuperMap.StopQueryService"}destroy(){super.destroy(),Wt.reset(this)}processAsync(t){if(t instanceof Mo){var e=this;e.url=Wt.urlPathAppend(e.url,"stops/keyword/"+t.keyWord),e.request({method:"GET",params:{returnPosition:t.returnPosition},scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}}class Ao{constructor(t){t&&(this.datasetName="",this.groupField="",this.attributeField="",this.statisticModes="",this.output=null,this.mappingParameters=null,Wt.extend(this,t),this.CLASS_NAME="SuperMap.SummaryAttributesJobsParameter")}destroy(){this.datasetName=null,this.groupField=null,this.attributeField=null,this.statisticModes=null,this.output instanceof En&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof Cn&&(this.mappingParameters.destroy(),this.mappingParameters=null)}static toObject(t,e){for(var n in t)"datasetName"!==n?"output"!==n?(e["analyst"]=e["analyst"]||{},e["analyst"][n]=t[n],"mappingParameters"===n&&(e["analyst"][n]=e["analyst"][n]||{},e["analyst"]["mappingParameters"]=t[n])):(e["output"]=e["output"]||{},e["output"]=t[n]):(e["input"]=e["input"]||{},e["input"][n]=t[n])}}class Oo extends Tn{constructor(t,e){super(t,e),this.url=Wt.urlPathAppend(this.url,"spatialanalyst/summaryattributes"),this.CLASS_NAME="SuperMap.SummaryAttributesJobsService"}destroy(){super.destroy()}getSummaryAttributesJobs(){super.getJobs(this.url)}getSummaryAttributesJob(t){super.getJobs(Wt.urlPathAppend(this.url,t))}addSummaryAttributesJob(t,e){super.addJob(this.url,t,Ao,e)}}class ko{constructor(t){t&&(this.datasetName="",this.regionDataset="",this.query="",this.resolution=100,this.meshType=0,this.statisticModes=pt.AVERAGE,this.fields="",this.type=gt.SUMMARYMESH,this.output=null,this.mappingParameters=null,Wt.extend(this,t),this.CLASS_NAME="SuperMap.SummaryMeshJobParameter")}destroy(){this.datasetName=null,this.query=null,this.resolution=null,this.statisticModes=null,this.meshType=null,this.fields=null,this.regionDataset=null,this.type=null,this.output instanceof En&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof Cn&&(this.mappingParameters.destroy(),this.mappingParameters=null)}static toObject(t,e){for(var n in t)"datasetName"!==n?"type"!==n?"output"!==n?("SUMMARYMESH"===t.type&&"regionDataset"!==n||"SUMMARYREGION"===t.type&&!r(["meshType","resolution","query"],n))&&(e["analyst"]=e["analyst"]||{},"query"===n&&t[n]?e["analyst"][n]=t[n].toBBOX():e["analyst"][n]=t[n],"mappingParameters"===n&&(e["analyst"][n]=e["analyst"][n]||{},e["analyst"]["mappingParameters"]=t[n])):(e["output"]=e["output"]||{},e["output"]=t[n]):e["type"]=t[n]:(e["input"]=e["input"]||{},e["input"][n]=t[n]);function r(t,e){var n=t.length;while(n--)if(t[n]===e)return!0;return!1}}}class Io extends Tn{constructor(t,e){super(t,e),this.url=Wt.urlPathAppend(this.url,"spatialanalyst/aggregatepoints"),this.CLASS_NAME="SuperMap.SummaryMeshJobsService"}destroy(){super.destroy()}getSummaryMeshJobs(){super.getJobs(this.url)}getSummaryMeshJob(t){super.getJobs(Wt.urlPathAppend(this.url,t))}addSummaryMeshJob(t,e){super.addJob(this.url,t,ko,e)}}class Po{constructor(t){t&&(this.datasetName="",this.regionDataset="",this.sumShape=!0,this.query="",this.standardSummaryFields=!1,this.standardFields="",this.standardStatisticModes="",this.weightedSummaryFields=!1,this.weightedFields="",this.weightedStatisticModes="",this.meshType=0,this.resolution=100,this.meshSizeUnit=ft.METER,this.type=gt.SUMMARYMESH,this.output=null,this.mappingParameters=null,Wt.extend(this,t),this.CLASS_NAME="SuperMap.SummaryRegionJobParameter")}destroy(){this.datasetName=null,this.sumShape=null,this.regionDataset=null,this.query=null,this.standardSummaryFields=null,this.standardFields=null,this.standardStatisticModes=null,this.weightedSummaryFields=null,this.weightedFields=null,this.weightedStatisticModes=null,this.meshType=null,this.resolution=null,this.meshSizeUnit=null,this.type=null,this.output instanceof En&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof Cn&&(this.mappingParameters.destroy(),this.mappingParameters=null)}static toObject(t,e){for(var n in t)"datasetName"!==n?"type"!==n&&"type"!==n?"output"!==n?("SUMMARYREGION"===t.type||"SUMMARYMESH"===t.type&&"regionDataset"!==n)&&(e["analyst"]=e["analyst"]||{},"query"===n&&t[n]?e["analyst"][n]=t[n].toBBOX():e["analyst"][n]=t[n],"mappingParameters"===n&&(e["analyst"][n]=e["analyst"][n]||{},e["analyst"]["mappingParameters"]=t[n])):(e["output"]=e["output"]||{},e["output"]=t[n]):e["type"]=t[n]:(e["input"]=e["input"]||{},e["input"][n]=t[n])}}class Lo extends Tn{constructor(t,e){super(t,e),this.url=Wt.urlPathAppend(this.url,"spatialanalyst/summaryregion"),this.CLASS_NAME="SuperMap.SummaryRegionJobsService"}destroy(){super.destroy()}getSummaryRegionJobs(){super.getJobs(this.url)}getSummaryRegionJob(t){super.getJobs(Wt.urlPathAppend(this.url,t))}addSummaryRegionJob(t,e){super.addJob(this.url,t,Po,e)}}class No{constructor(t){this.maxWeight=null,this.nodeID=null,this.resourceValue=null,this.type=null,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.SupplyCenter"}destroy(){var t=this;t.maxWeight=null,t.nodeID=null,t.resourceValue=null,t.type=null}static fromJson(t){if(t)return new No({maxWeight:t.maxWeight,nodeID:t.nodeID,resourceValue:t.resourceValue,type:t.type})}}class Ro extends fn{constructor(t,e){super(t,e),this.CLASS_NAME="SuperMap.SurfaceAnalystService"}destroy(){super.destroy()}processAsync(t){if(t instanceof Xn){var e,n=this;e=n.getJsonParameters(t),n.request({method:"POST",data:e,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}getJsonParameters(t){var e="",n={},r=this;if(t instanceof Jn)r.url=Wt.urlPathAppend(r.url,"datasets/"+t.dataset+"/"+t.surfaceAnalystMethod.toLowerCase()),Jn.toObject(t,n),e=Wt.toJSON(n);else{if(!(t instanceof Rr))return;r.url=Wt.urlPathAppend(r.url,"geometry/"+t.surfaceAnalystMethod.toLowerCase()),e=Wt.toJSON(t)}return this.returnContent=!0,e}dataFormat(){return[m.GEOJSON,m.ISERVER,m.FGB]}}class Do{constructor(t){t&&(this.dataset=null,this.zFactor=1,this.averageCurvatureName=null,this.profileCurvatureName="",this.planCurvatureName="",this.deleteExistResultDataset=!1,Wt.extend(this,t),this.CLASS_NAME="SuperMap.TerrainCurvatureCalculationParameters")}destroy(){var t=this;t.dataset=null,t.zFactor=1,t.averageCurvatureName=null,t.profileCurvatureName=null,t.planCurvatureName=null,t.deleteExistResultDataset=!0}static toObject(t,e){for(var n in t)"dataset"!==n&&(e[n]=t[n])}}class Fo extends fn{constructor(t,e){super(t,e),this.CLASS_NAME="SuperMap.TerrainCurvatureCalculationService"}destroy(){super.destroy()}processAsync(t){var e=this,n={};t instanceof Do&&(e.url=Wt.urlPathAppend(e.url,"datasets/"+t.dataset+"/terraincalculation/curvature")),Do.toObject(t,n);var r=Wt.toJSON(n);e.url=Wt.urlAppend(e.url,"returnContent=true"),e.request({method:"POST",data:r,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}class jo{constructor(t){this.flowEnabled=!1,this.leaderLineDisplayed=!1,this.leaderLineStyle=new _e,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.ThemeFlow"}destroy(){var t=this;t.flowEnabled=null,t.leaderLineDisplayed=null,t.leaderLineStyle&&(t.leaderLineStyle.destroy(),t.leaderLineStyle=null)}static fromObj(t){if(t){var e=new jo;return Wt.copy(e,t),e.leaderLineStyle=_e.fromJson(t.leaderLineStyle),e}}}class Bo{constructor(t){this.caption=null,this.color=new be,this.end=0,this.start=0,this.visible=!0,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGridRangeItem"}destroy(){var t=this;t.caption=null,t.end=null,t.start=null,t.color&&(t.color.destroy(),t.color=null),t.visible=null}toServerJSONObject(){var t={};return t=Wt.copyAttributes(t,this),t.color&&t.color.toServerJSONObject&&(t.color=t.color.toServerJSONObject()),t}static fromObj(t){if(t){var e=new Bo;return Wt.copy(e,t),e.color=be.fromJson(t.color),e}}}class zo extends ni{constructor(t){super("GRIDRANGE",t),this.items=null,this.rangeMode=I.EQUALINTERVAL,this.rangeParameter=0,this.colorGradientType=L.YELLOW_RED,this.reverseColor=!1,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGridRange"}destroy(){super.destroy();var t=this;if(t.items){if(t.items.length>0)for(var e in t.items)t.items[e].destroy(),t.items[e]=null;t.items=null}t.reverseColor=null,t.rangeMode=null,t.rangeParameter=null,t.colorGradientType=null}static fromObj(t){if(t){var e=new zo;Wt.copy(e,t);var n=t.items,r=n?n.length:0;e.items=[];for(var i=0;i<r;i++)e.items.push(Bo.fromObj(n[i]));return e}}}class Uo{constructor(t){this.caption=null,this.color=new be,this.unique=null,this.visible=!0,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGridUniqueItem"}destroy(){var t=this;t.caption=null,t.unique=null,t.color&&(t.color.destroy(),t.color=null),t.visible=null}toServerJSONObject(){var t={};return t=Wt.copyAttributes(t,this),t.color&&t.color.toServerJSONObject&&(t.color=t.color.toServerJSONObject()),t}static fromObj(t){var e=new Uo;return Wt.copy(e,t),e.color=be.fromJson(t.color),e}}class Go extends ni{constructor(t){super("GRIDUNIQUE",t),this.defaultcolor=new be,this.items=null,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGridUnique"}destroy(){super.destroy();var t=this;if(t.items){if(t.items.length>0)for(var e in t.items)t.items[e].destroy(),t.items[e]=null;t.items=null}t.defaultcolor&&(t.defaultcolor.destroy(),t.defaultcolor=null)}toServerJSONObject(){var t={};if(t=Wt.copyAttributes(t,this),t.defaultcolor&&t.defaultcolor.toServerJSONObject&&(t.defaultcolor=t.defaultcolor.toServerJSONObject()),t.items){for(var e=[],n=t.items.length,r=0;r<n;r++)e.push(t.items[r].toServerJSONObject());t.items=e}return t}static fromObj(t){var e=new Go,n=t.items,r=n?n.length:0;Wt.extend(e,t),e.items=[],e.defaultcolor=be.fromJson(t.defaultcolor);for(var i=0;i<r;i++)e.items.push(Uo.fromObj(n[i]));return e}}class qo{constructor(t){this.caption=null,this.unique=null,this.offsetX=0,this.offsetY=0,this.visible=!0,this.style=new ri,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelUniqueItem"}destroy(){var t=this;t.unique=null,t.caption=null,t.offsetX=null,t.offsetY=null,t.style&&(t.style.destroy(),t.style=null),t.visible=null}static fromObj(t){if(t){var e=new qo;return Wt.copy(e,t),e}}}class Vo{constructor(t,e){this.srcData=t,this.targetData=e,this.CLASS_NAME="SuperMap.ThemeMemoryData"}destroy(){var t=this;t.srcData=null,t.targetData=null}toJSON(){if(this.srcData&&this.targetData){for(var t="",e=Math.min(this.srcData.length,this.targetData.length),n=0;n<e;n++)t+="'"+this.srcData[n]+"':'"+this.targetData[n]+"',";return n>0&&(t=t.substring(0,t.length-1)),"{"+t+"}"}return null}}class Ho{constructor(t){this.datasetNames=null,this.dataSourceNames=null,this.joinItems=null,this.themes=null,this.displayFilters=null,this.displayOrderBys=null,this.fieldValuesDisplayFilter=null,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.ThemeParameters"}destroy(){var t=this;if(t.datasetNames=null,t.dataSourceNames=null,t.joinItems){for(let e=0,n=t.joinItems,r=n.length;e<r;e++)n[e].destroy();t.joinItems=null}if(t.themes){for(let e=0,n=t.themes,r=n.length;e<r;e++)n[e].destroy();t.themes=null}}}class Wo extends on{constructor(t,e){super(t,e),e&&Wt.extend(this,e),this.eventCount=0,this.url=Wt.urlPathAppend(this.url,"tempLayersSet"),this.CLASS_NAME="SuperMap.ThemeService"}destroy(){super.destroy()}processAsync(t,e){if(!(t instanceof Ho))return;var n=this,r=null;r=n.getJsonParameters(t);let i=++this.eventCount,o={scope:this,processCompleted:function(t){if(i===t.result.eventId&&e)return delete t.result.eventId,e(t),this.events&&this.events.un(o),!1},processFailed:function(t){if((i===t.error.eventId||i===t.eventId)&&e)return e(t),this.events&&this.events.un(o),!1}};this.events.on(o),n.request({method:"POST",data:r,scope:n,success(t,e){t.eventId=i,this.serviceProcessCompleted(t,e)},failure(t,e){t.error&&(t.error.eventId=i),t.eventId=i,this.serviceProcessFailed(t,e)}})}getJsonParameters(t){var e,n="",r=null,i=null,o=null;n+="[{'type': 'UGC','subLayers': {'layers': [";for(var a=0;a<t.themes.length;a++){r=t.themes[a];var s=Wt.toJSON(r);if(s=s.slice(0,-1),n+="{'theme': "+s+"},'type': 'UGC','ugcLayerType': 'THEME',",i=t.displayFilters,i&&i.length>0&&(1===i.length?n+="'displayFilter':\""+i[0]+'",':n+="'displayFilter':\""+i[a]+'",'),o=t.displayOrderBy,o&&o.length>0&&(1===o.length?n+="'displayOrderBy':'"+o[0]+"',":n+="'displayOrderBy':'"+o[a]+"',"),e=t.fieldValuesDisplayFilter,e&&(n+="'fieldValuesDisplayFilter':"+Wt.toJSON(e)+","),t.joinItems&&t.joinItems.length>0&&t.joinItems[a]&&(n+="'joinItems':["+Wt.toJSON(t.joinItems[a])+"],"),t.datasetNames&&t.dataSourceNames){var l=t.datasetNames[a]?a:t.datasetNames.length-1,u=t.dataSourceNames[a]?a:t.dataSourceNames.length-1;n+="'datasetInfo': {'name': '"+t.datasetNames[l]+"','dataSourceName': '"+t.dataSourceNames[u]+"'}},"}else n+="},"}t.themes&&t.themes.length>0&&(n=n.substring(0,n.length-1)),n+="]},";var c=this.url.split("/"),h=c[c.length-2];return n+="'name': '"+h+"'}]",n}}class Yo extends fn{constructor(t,e){super(t,e),this.mode=null,e&&Wt.extend(this,e),this.CLASS_NAME="SuperMap.ThiessenAnalystService"}destroy(){super.destroy(),this.mode=null}processAsync(t){var e={},n=this;t instanceof Kn?(n.mode="datasets",n.url=Wt.urlPathAppend(n.url,"datasets/"+t.dataset+"/thiessenpolygon"),Kn.toObject(t,e)):t instanceof Dr&&(n.mode="geometry",n.url=Wt.urlPathAppend(n.url,"geometry/thiessenpolygon"),Dr.toObject(t,e));var r=Wt.toJSON(e);this.returnContent=!0,n.request({method:"POST",data:r,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}dataFormat(){return[m.GEOJSON,m.ISERVER,m.FGB]}}class Xo extends fn{constructor(t,e){super(t,e),e&&Wt.extend(this,e),this.CLASS_NAME="SuperMap.GeometryBatchAnalystService"}processAsync(t){var e=this;e.url=Wt.urlPathAppend(e.url,"geometry/batchanalyst"),e.url=Wt.urlAppend(e.url,"returnContent=true&ignoreAnalystParam=true");var n=e._processParams(t),r=Wt.toJSON(n);e.request({method:"POST",data:r,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}_processParams(t){var e=this;if(Wt.isArray(t)){var n=[];return t.map((function(t){return n.push(e._toJSON(t)),t})),n}}_toJSON(t){var e={};if("buffer"===t.analystName)e.analystName="buffer",e.param={},xn.toObject(t.param,e.param);else if("overlay"===t.analystName)e.analystName="overlay",e.param={},Nr.toObject(t.param,e.param);else if("interpolationDensity"===t.analystName)e.analystName="interpolationDensity",e.param={},Pi.toObject(t.param,e.param);else if("interpolationidw"===t.analystName)e.analystName="interpolationidw",e.param={},Pi.toObject(t.param,e.param);else if("interpolationRBF"===t.analystName)e.analystName="interpolationRBF",e.param={},Pi.toObject(t.param,e.param);else if("interpolationKriging"===t.analystName)e.analystName="interpolationKriging",e.param={},Pi.toObject(t.param,e.param);else{if("thiessenpolygon"!==t.analystName)return t;e.analystName="thiessenpolygon",e.param={},Dr.toObject(t.param,e.param)}return e}destroy(){super.destroy()}}class Jo extends on{constructor(t,e){super(t,e),this.CLASS_NAME="SuperMap.TilesetsService"}destroy(){super.destroy()}processAsync(){if(this.url){var t=this;t.url=Wt.urlPathAppend(t.url,"tilesets"),t.request({method:"GET",scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}}class Zo{constructor(t){t&&(this.datasetName="",this.datasetTopology="",this.tolerance="",this.rule=mt.REGIONNOOVERLAP,this.output=null,this.mappingParameters=null,Wt.extend(this,t),this.CLASS_NAME="SuperMap.TopologyValidatorJobsParameter")}destroy(){this.datasetName=null,this.datasetTopology=null,this.tolerance=null,this.rule=null,this.output instanceof En&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof Cn&&(this.mappingParameters.destroy(),this.mappingParameters=null)}static toObject(t,e){for(var n in t)"datasetName"!==n?"output"!==n?(e["analyst"]=e["analyst"]||{},e["analyst"][n]=t[n],"mappingParameters"===n&&(e["analyst"][n]=e["analyst"][n]||{},e["analyst"]["mappingParameters"]=t[n])):(e["output"]=e["output"]||{},e["output"]=t[n]):(e["input"]=e["input"]||{},e["input"][n]=t[n])}}class Ko extends Tn{constructor(t,e){super(t,e),this.url=Wt.urlPathAppend(this.url,"spatialanalyst/topologyvalidator"),this.CLASS_NAME="SuperMap.TopologyValidatorJobsService"}destroy(){super.destroy()}getTopologyValidatorJobs(){super.getJobs(this.url)}getTopologyValidatorJob(t){super.getJobs(Wt.urlPathAppend(this.url,t))}addTopologyValidatorJob(t,e){super.addJob(this.url,t,Zo,e)}}class Qo{constructor(t){t=t||{},this.lineID=null,this.lineName=null,this.lineAliasName=null,this.startStopIndex=null,this.startStopName=null,this.startStopAliasName=null,this.endStopIndex=null,this.endStopName=null,this.endStopAliasName=null,Wt.extend(this,t),this.CLASS_NAME="SuperMap.TransferLine"}destroy(){Wt.reset(this)}static fromJson(t){if(t)return new Qo({lineID:t["lineID"],lineName:t["lineName"],lineAliasName:t["lineAliasName"],startStopIndex:t["startStopIndex"],startStopName:t["startStopName"],startStopAliasName:t["startStopAliasName"],endStopIndex:t["endStopIndex"],endStopName:t["endStopName"],endStopAliasName:t["endStopAliasName"]})}}class $o{constructor(t){t=t||{},this.transferLines=null,this.points=null,Wt.extend(this,t),this.CLASS_NAME="SuperMap.TransferPathParameters"}destroy(){Wt.reset(this)}static toJson(t){if(t)return Wt.toJSON(t)}}class ta extends on{constructor(t,e){super(t,e),this.CLASS_NAME="SuperMap.TransferPathService"}destroy(){super.destroy()}processAsync(t){if(t instanceof $o){var e,n=this,r="GET";n.url=Wt.urlPathAppend(n.url,"path"),e={points:Wt.toJSON(t.points),transferLines:Wt.toJSON(t["transferLines"])},n.request({method:r,params:e,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}}class ea{constructor(t){t=t||{},this.solutionCount=6,this.transferPreference=K.NONE,this.transferTactic=Z.LESS_TIME,this.walkingRatio=null,this.points=!1,this.evadeLines=null,this.evadeStops=null,this.priorLines=null,this.priorStops=null,this.travelTime=null,Wt.extend(this,t),this.CLASS_NAME="SuperMap.TransferSolutionParameters"}destroy(){Wt.reset(this)}static toJson(t){if(t)return Wt.toJSON(t)}}class na extends on{constructor(t,e){super(t,e),this.CLASS_NAME="SuperMap.TransferSolutionService"}destroy(){super.destroy()}processAsync(t){if(t instanceof ea){var e,n=this,r="GET";n.url=Wt.urlPathAppend(n.url,"solutions"),e={points:Wt.toJSON(t.points),walkingRatio:t["walkingRatio"],transferTactic:t["transferTactic"],solutionCount:t["solutionCount"],transferPreference:t["transferPreference"]},t.evadeLines&&(e["evadeLines"]=Wt.toJSON(t.evadeLines)),t.evadeStops&&(e["evadeStops"]=Wt.toJSON(t.evadeStops)),t.priorLines&&(e["priorLines"]=Wt.toJSON(t.priorLines)),t.priorStops&&(e["priorStops"]=Wt.toJSON(t.priorStops)),t.travelTime&&(e["travelTime"]=t.travelTime),n.request({method:r,params:e,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}}class ra{constructor(t){t&&(this.edgeId="",this.fromNodeId="",this.toNodeId="",this.weightField="",this.edgeWeight="",Wt.extend(this,t),this.CLASS_NAME="SuperMap.UpdateEdgeWeightParameters")}destroy(){this.edgeId=null,this.fromNodeId=null,this.toNodeId=null,this.weightField=null,this.edgeWeight=null}}class ia{constructor(t){t&&(this.datasourceName=null,this.datasetName=null,this.datasetType=null,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.CreateDatasetParameters")}destroy(){var t=this;t.datasourceName=null,t.datasetName=null,t.datasetType=null}}class oa extends kn{constructor(t,e){super(t,e),this.CLASS_NAME="SuperMap.UpdateEdgeWeightService"}destroy(){super.destroy()}processAsync(t){if(t instanceof ra){var e=this,n=e.parse(t);e.url=Wt.urlPathAppend(e.url,n);var r=t.edgeWeight?t.edgeWeight:null;e.request({method:"PUT",scope:e,data:r,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}parse(t){if(t){var e="";for(var n in t)if(""!==t[n]&&"edgeWeight"!==t[n])switch(n){case"edgeId":e+="/edgeweight/"+t[n];break;case"fromNodeId":e+="/fromnode/"+t[n];break;case"toNodeId":e+="/tonode/"+t[n];break;case"weightField":e+="/weightfield/"+t[n];break;default:break}return e}}}class aa{constructor(t){t&&(this.nodeId="",this.fromEdgeId="",this.toEdgeId="",this.weightField="",this.turnNodeWeight="",Wt.extend(this,t),this.CLASS_NAME="SuperMap.UpdateTurnNodeWeightParameters")}destroy(){this.nodeId=null,this.fromEdgeId=null,this.toEdgeId=null,this.weightField=null,this.turnNodeWeight=null}}class sa extends kn{constructor(t,e){super(t,e),this.CLASS_NAME="SuperMap.UpdateTurnNodeWeightService"}destroy(){super.destroy()}processAsync(t){if(t instanceof aa){var e=this,n=e.parse(t);e.url=Wt.urlPathAppend(e.url,n);var r=t.turnNodeWeight?t.turnNodeWeight:null;e.request({method:"PUT",scope:e,data:r,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}parse(t){if(t){var e="";for(var n in t)if(""!==t[n]&&"turnNodeWeight"!==t[n])switch(n){case"nodeId":e+="/turnnodeweight/"+t[n];break;case"fromEdgeId":e+="/fromedge/"+t[n];break;case"toEdgeId":e+="/toedge/"+t[n];break;case"weightField":e+="/weightfield/"+t[n];break;default:break}return e}}}class la{constructor(t){t&&(this.datasourceName=null,this.datasetName=null,this.isFileCache=null,this.description=null,this.prjCoordSys=null,this.charset=null,this.palette=null,this.noValue=null,t&&Wt.extend(this,t),this.CLASS_NAME="SuperMap.UpdateDatasetParameters")}destroy(){var t=this;t.datasourceName=null,t.datasetName=null,t.isFileCache=null,t.prjCoordSys=null,t.charset=null,t.palette=null,t.noValue=null}}class ua{constructor(t){t=t||{},this.datasetName="",this.datasetVectorClip="",this.geometryClip="",this.mode=ht.CLIP,this.output=null,this.mappingParameters=null,Wt.extend(this,t),this.CLASS_NAME="SuperMap.VectorClipJobsParameter"}destroy(){this.datasetName=null,this.datasetVectorClip=null,this.geometryClip=null,this.mode=null,this.output instanceof En&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof Cn&&(this.mappingParameters.destroy(),this.mappingParameters=null)}static toObject(t,e){for(var n in t)"datasetName"!==n?"output"!==n?(e["analyst"]=e["analyst"]||{},e["analyst"][n]=t[n],"mappingParameters"===n&&(e["analyst"][n]=e["analyst"][n]||{},e["analyst"]["mappingParameters"]=t[n])):(e["output"]=e["output"]||{},e["output"]=t[n]):(e["input"]=e["input"]||{},e["input"][n]=t[n])}}class ca extends Tn{constructor(t,e){super(t,e),this.url=Wt.urlPathAppend(this.url,"spatialanalyst/vectorclip"),this.CLASS_NAME="SuperMap.VectorClipJobsService"}destroy(){super.destroy()}getVectorClipJobs(){super.getJobs(this.url)}getVectorClipJob(t){super.getJobs(Wt.urlPathAppend(this.url,t))}addVectorClipJob(t,e){super.addJob(this.url,t,ua,e)}}class ha{constructor(t){t=t||{},this.type=null,Wt.extend(this,t),this.CLASS_NAME="SuperMap.RasterFunctionParameter"}destroy(){this.type=null}}class da extends ha{constructor(t){super(t),this.redIndex=0,this.nirIndex=1,this.colorMap="0:ffffe5ff;0.1:f7fcb9ff;0.2:d9f0a3ff;0.3:addd8eff;0.4:78c679ff;0.5:41ab5dff;0.6:238443ff;0.7:006837ff;1:004529ff",this.type=_t.NDVI,Wt.extend(this,t),this.CLASS_NAME="SuperMap.NDVIParameter"}destroy(){super.destroy(),this.redIndex=null,this.nirIndex=null,this.colorMap=null}toJSON(){return{redIndex:this.redIndex,nirIndex:this.nirIndex,colorMap:this.colorMap,type:this.type}}}class fa extends ha{constructor(t){super(t),this.altitude=45,this.azimuth=315,this.zFactor=1,this.type=_t.HILLSHADE,Wt.extend(this,t),this.CLASS_NAME="SuperMap.HillshadeParameter"}destroy(){super.destroy(),this.altitude=null,this.azimuth=null,this.zFactor=null}toJSON(){return{altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,type:this.type}}}class pa{constructor(t){this.name=null,this.picAsUrl=null,this.picAsBase64=null,this.CLASS_NAME="SuperMap.WebPrintingJobCustomItems",Wt.extend(this,t)}destroy(){var t=this;t.name=null,t.picAsUrl=null,t.picAsBase64=null}toJSON(){var t={name:this.name};return this.title&&(t.title=this.title),this.picAsUrl?t.picAsUrl=this.picAsUrl:this.picAsBase64&&(t.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,"")),Wt.toJSON(t)}}class ga{constructor(t){this.picAsUrl=null,this.picAsBase64=null,this.CLASS_NAME="SuperMap.WebPrintingJobImage",Wt.extend(this,t)}destroy(){this.picAsUrl=null,this.picAsBase64=null}toJSON(){var t={};return this.picAsUrl&&(t.picAsUrl=this.picAsUrl),this.picAsBase64&&(t.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,"")),Wt.toJSON(t)}}class ma{constructor(t){this.name=null,this.layerType=null,this.url=null,this.CLASS_NAME="SuperMap.WebPrintingJobLayers",Wt.extend(this,t)}destroy(){this.name=null,this.layerType=null,this.url=null}}class ya{constructor(t){this.title=null,this.picAsUrl=null,this.picAsBase64=null,this.layers=null,this.customItems=null,this.CLASS_NAME="SuperMap.WebPrintingJobLegendOptions",Wt.extend(this,t)}destroy(){this.title=null,this.picAsUrl=null,this.picAsBase64=null,this.layers instanceof ma&&(this.layers.destroy(),this.layers=null),this.customItems instanceof pa&&(this.customItems.destroy(),this.customItems=null)}toJSON(){var t={title:this.title||""};return this.picAsUrl?t.picAsUrl=this.picAsUrl:this.picAsBase64?t.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,""):this.customItems&&(t.customItems=this.customItems),Wt.toJSON(t)}}class va{constructor(t){this.center=null,this.scale=null,this.layerNames=null,this.image=null,this.layers=null,this.CLASS_NAME="SuperMap.WebPrintingJobLittleMapOptions",Wt.extend(this,t)}destroy(){this.center=null,this.scale=null,this.layerNames=null,this.image instanceof ga&&(this.image.destroy(),this.image=null),this.layers instanceof ma&&(this.layers.destroy(),this.layers=null)}toJSON(){var t={scale:this.scale,center:this.center};return this.layerNames?t.layerNames=this.layerNames:this.layers&&(t.layers=this.layers),this.image&&(t.image=this.image),Wt.toJSON(t)}}class ba{constructor(t){this.picAsUrl=null,this.picAsBase64=null,this.CLASS_NAME="SuperMap.WebPrintingJobNorthArrowOptions",Wt.extend(this,t)}destroy(){this.picAsUrl=null,this.picAsBase64=null}toJSON(){var t={};return this.picAsUrl?t.picAsUrl=this.picAsUrl:this.picAsBase64&&(t.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,"")),Wt.toJSON(t)}}class _a{constructor(t){this.scaleText=null,this.orientation=null,this.type=null,this.intervals=null,this.unit=null,this.CLASS_NAME="SuperMap.WebPrintingJobScaleBarOptions",Wt.extend(this,t)}destroy(){this.scaleText=null,this.orientation=null,this.type=null,this.intervals=null,this.unit=null}toJSON(){var t={scaleText:this.scaleText||"",type:this.type||"BAR",intervals:this.intervals||"",unit:this.unit||"METER"};return this.orientation&&(t.orientation=this.orientation),Wt.toJSON(t)}}class xa{constructor(t){this.type=null,this.url=null,this.token=null,this.value=null,this.CLASS_NAME="SuperMap.WebPrintingJobContent",Wt.extend(this,t)}destroy(){this.type="WEBMAP",this.url=null,this.token=null,this.value=null}toJSON(){var t={type:this.type};return this.token&&(t.token=this.token),this.url?t.url=this.url:this.value&&(t.value=this.value),Wt.toJSON(t)}}class wa{constructor(t){this.templateName=null,this.title=null,this.subTitle=null,this.author=null,this.copyright=null,this.scaleBarOptions=null,this.northArrowOptions=null,this.littleMapOptions=null,this.legendOptions=null,this.CLASS_NAME="SuperMap.WebPrintingJobLayoutOptions",Wt.extend(this,t)}destroy(){this.templateName=null,this.title=null,this.subTitle=null,this.author=null,this.copyright=null,this.scaleBarOptions instanceof _a&&(this.scaleBarOptions.destroy(),this.scaleBarOptions=null),this.northArrowOptions instanceof ba&&(this.northArrowOptions.destroy(),this.northArrowOptions=null),this.littleMapOptions instanceof va&&(this.littleMapOptions.destroy(),this.littleMapOptions=null),this.legendOptions instanceof ya&&(this.legendOptions.destroy(),this.legendOptions=null)}toJSON(){var t={templateName:this.templateName,title:this.title,subTitle:this.subTitle,author:this.author,copyright:this.copyright};return this.scaleBarOptions&&(t.scaleBarOptions=this.scaleBarOptions),this.northArrowOptions&&(t.northArrowOptions=this.northArrowOptions),this.littleMapOptions&&(t.littleMapOptions=this.littleMapOptions),this.legendOptions&&(t.legendOptions=this.legendOptions),Wt.toJSON(t)}}class Sa{constructor(t){this.format=null,this.dpi=96,this.scale=null,this.rotation=null,this.center=null,this.CLASS_NAME="SuperMap.WebPrintingJobExportOptions",Wt.extend(this,t)}destroy(){this.format=null,this.dpi=null,this.scale=null,this.rotation=null,this.center=null,this.outputSize=null}toJSON(){var t={format:this.format||"PDF",dpi:this.dpi,scale:this.scale,center:this.center};return this.rotation&&(t.rotation=this.rotation),this.outputSize&&(t.outputSize=this.outputSize),Wt.toJSON(t)}}class Ea{constructor(t){t&&(this.content=null,this.layoutOptions=null,this.exportOptions=null,Wt.extend(this,t),this.CLASS_NAME="SuperMap.WebPrintingJobParameters")}destroy(){this.content instanceof xa&&(this.content.destroy(),this.content=null),this.layoutOptions instanceof wa&&(this.layoutOptions.destroy(),this.layoutOptions=null),this.exportOptions instanceof Sa&&(this.exportOptions.destroy(),this.exportOptions=null)}}class Ca extends on{constructor(t,e){super(t,e),e&&Wt.extend(this,e),this.eventCount=0,this.CLASS_NAME="SuperMap.WebPrintingService",this.url}destroy(){super.destroy()}createWebPrintingJob(t,e){t&&(t.layoutOptions&&t.layoutOptions.legendOptions&&(!t.layoutOptions.legendOptions.title&&(t.layoutOptions.legendOptions.title=""),t.layoutOptions.legendOptions.picAsBase64=t.layoutOptions.legendOptions.picAsBase64&&t.layoutOptions.legendOptions.picAsBase64.replace(/^data:.+;base64,/,""),t.layoutOptions.legendOptions.customItems&&t.layoutOptions.legendOptions.customItems.hasOwnProperty("picAsBase64")&&(t.layoutOptions.legendOptions.customItems.picAsBase64=t.layoutOptions.legendOptions.customItems.picAsBase64.replace(/^data:.+;base64,/,""))),this.processAsync("jobs","POST",e,t))}getPrintingJob(t,e){var n=this;n.processAsync("jobs/"+t,"GET",(function(r){n.rollingProcess(r,n._processUrl("jobs/"+t),e)}))}getPrintingJobResult(t,e){this.processAsync(`jobs/${t}/result`,"GET",e)}getLayoutTemplates(t){this.processAsync("layouts","GET",t)}rollingProcess(t,e,n){var r=this;if(t)var i=setInterval((function(){let t=++r.eventCount,o={scope:this,processCompleted:function(e){if(t===e.result.eventId&&n)return delete e.result.eventId,n(e),r.events.un(o),!1},processFailed:function(e){if((t===e.error.eventId||t===e.eventId)&&n)return n(e),r.events.un(o),!1}};r.events.on(o),r.request({url:e,method:"GET",scope:r,success:function(e,n){switch(e.eventId=t,e.status){case"FINISHED":clearInterval(i),r.serviceProcessCompleted(e,n);break;case"ERROR":clearInterval(i),r.serviceProcessFailed(e,n);break;case"RUNNING":r.events.triggerEvent("processRunning",e);break}},failure:r.serviceProcessFailed})}),1e3)}processAsync(t,e,n,r){let i=++this.eventCount,o={scope:this,processCompleted:function(t){if(i===t.result.eventId&&n)return delete t.result.eventId,n(t),this.events&&this.events.un(o),!1},processFailed:function(t){if(i===t.error.eventId||i===t.eventId)return n(t),this.events&&this.events.un(o),!1}};this.events.on(o);var a=this;let s={url:a._processUrl(t),method:e,scope:a,success(t,e){t.eventId=i,this.serviceProcessCompleted(t,e)},failure(t,e){t.error&&(t.error.eventId=i),t.eventId=i,this.serviceProcessFailed(t,e)}};r&&(s.data=Wt.toJSON(r)),a.request(s)}_processUrl(t){return t?Wt.urlPathAppend(this.url,t):this.url}}class Ma extends on{constructor(t,e){super(t,e),this.options=e||{},e&&Wt.extend(this,e),this.eventCount=0,this.CLASS_NAME="SuperMap.ImageCollectionService"}destroy(){super.destroy()}getLegend(t,e){var n=this,r={collectionId:n.options.collectionId},i=Wt.convertPath("/collections/{collectionId}/legend",r),o=Wt.urlPathAppend(n.url,i);this._processAsync({url:o,method:"GET",params:t,callback:e})}getStatistics(t){var e=this,n={collectionId:e.options.collectionId},r=Wt.convertPath("/collections/{collectionId}/statistics",n),i=Wt.urlPathAppend(e.url,r);this._processAsync({url:i,method:"GET",callback:t})}getTileInfo(t){var e=this,n={collectionId:e.options.collectionId},r=Wt.convertPath("/collections/{collectionId}/tileInfo",n),i=Wt.urlPathAppend(e.url,r);this._processAsync({url:i,method:"GET",callback:t})}deleteItemByID(t,e){var n=this,r={collectionId:n.options.collectionId,featureId:t},i=Wt.convertPath("/collections/{collectionId}/items/{featureId}",r),o=Wt.urlPathAppend(n.url,i);this._processAsync({url:o,method:"DELETE",callback:e})}getItemByID(t,e){var n=this,r={collectionId:n.options.collectionId,featureId:t},i=Wt.convertPath("/collections/{collectionId}/items/{featureId}",r),o=Wt.urlPathAppend(n.url,i);this._processAsync({url:o,method:"GET",callback:e})}_processAsync({url:t,method:e,callback:n,params:r}){let i=++this.eventCount,o={scope:this,processCompleted:function(t){if(i===t.result.eventId&&n)return delete t.result.eventId,n(t),this.events&&this.events.un(o),!1},processFailed:function(t){if((i===t.error.eventId||i===t.eventId)&&n)return n(t),this.events&&this.events.un(o),!1}};this.events.on(o),this.request({method:e||"GET",url:t,params:r,scope:this,success(t,e){t.eventId=i,this.serviceProcessCompleted(t,e)},failure(t,e){t.error&&(t.error.eventId=i),t.eventId=i,this.serviceProcessFailed(t,e)}})}}class Ta extends on{constructor(t,e){super(t,e),this.options=e||{},e&&Wt.extend(this,e),this.eventCount=0,this.CLASS_NAME="SuperMap.ImageService"}destroy(){super.destroy()}getCollections(t){var e=this,n=Wt.convertPath("/collections"),r=Wt.urlPathAppend(e.url,n);this._processAsync({url:r,mehtod:"GET",callback:t})}getCollectionByID(t,e){var n={collectionId:t},r=this,i=Wt.convertPath("/collections/{collectionId}",n),o=Wt.urlPathAppend(r.url,i);this._processAsync({url:o,mehtod:"GET",callback:e})}search(t,e){var n={...t||{}},r=this,i=Wt.convertPath("/search"),o=Wt.urlPathAppend(r.url,i);this._processAsync({url:o,method:"POST",data:n,callback:e})}_processAsync({url:t,method:e,callback:n,data:r}){let i=++this.eventCount,o=this,a={scope:this,processCompleted:function(t){if(i===t.result.eventId&&n)return delete t.result.eventId,n(t),this.events&&this.events.un(a),!1},processFailed:function(t){if((i===t.error.eventId||i===t.eventId)&&n)return n(t),this.events&&this.events.un(a),!1}};this.events.on(a),this.request({method:e||"GET",url:t,data:r,scope:this,success(t,e){t.eventId=i,o.serviceProcessCompleted(t,e)},failure(t,e){t.error&&(t.error.eventId=i),t.eventId=i,o.serviceProcessFailed(t,e)}})}}class Aa{constructor(t){this.include=void 0,this.exclude=void 0,this.CLASS_NAME="SuperMap.FieldsFilter",Wt.extend(this,t)}destroy(){var t=this;t.include=void 0,t.exclude=void 0}static constructFromObject(t,e){return t&&(e=e||new Aa,t.hasOwnProperty("include")&&(e.include=t.include),t.hasOwnProperty("exclude")&&(e.exclude=t.exclude)),e}}class Oa{constructor(t){this.field=void 0,this.direction=Oa.Direction.ASC,this.CLASS_NAME="SuperMap.Sortby",Wt.extend(this,t)}destroy(){var t=this;t.field=void 0,t.direction="ASC"}static constructFromObject(t,e){return t&&(e=e||new Oa,t.hasOwnProperty("field")&&(e.field=t.field),t.hasOwnProperty("direction")&&(e.direction=t.direction)),e}}Oa.Direction={ASC:"ASC",DESC:"DESC"};class ka{constructor(t){this.bbox=void 0,this.collections=void 0,this.ids=void 0,this.limit=void 0,this.fields=void 0,this.query=void 0,this.sortby=void 0,this.CLASS_NAME="SuperMap.ImageSearchParameter",Wt.extend(this,t)}destroy(){var t=this;t.bbox=void 0,t.collections=void 0,t.ids=void 0,t.limit=void 0,t.fields=void 0,t.query=void 0,t.sortby=void 0}static constructFromObject(t,e){return t&&(e=e||new ka,t.hasOwnProperty("bbox")&&(e.bbox=t.bbox),t.hasOwnProperty("collections")&&(e.collections=t.collections),t.hasOwnProperty("ids")&&(e.ids=t.ids),t.hasOwnProperty("limit")&&(e.limit=t.limit),t.hasOwnProperty("fields")&&(e.fields=Aa.constructFromObject&&Aa.constructFromObject(t.fields,{})||t.fields),t.hasOwnProperty("query")&&(e.query=t.query),t.hasOwnProperty("sortby")&&(e.sortby=t.sortby,t.sortby&&(e.sortby=t.sortby.map(t=>Oa.constructFromObject&&Oa.constructFromObject(t,{})||t)))),e}}class Ia{constructor(t){this.stretchType=void 0,this.stdevCoefficient=void 0,this.gaussianCoefficient=void 0,this.useMedianValue=void 0,this.minPercent=void 0,this.maxPercent=void 0,this.CLASS_NAME="SuperMap.ImageStretchOption",Wt.extend(this,t)}destroy(){var t=this;t.stretchType=void 0,t.stdevCoefficient=void 0,t.gaussianCoefficient=void 0,t.useMedianValue=void 0,t.minPercent=void 0,t.maxPercent=void 0}static constructFromObject(t,e){return t&&(e=e||new Ia,t.hasOwnProperty("stretchType")&&(e.stretchType=t.stretchType),t.hasOwnProperty("stdevCoefficient")&&(e.stdevCoefficient=t.stdevCoefficient),t.hasOwnProperty("gaussianCoefficient")&&(e.gaussianCoefficient=t.gaussianCoefficient),t.hasOwnProperty("useMedianValue")&&(e.useMedianValue=t.useMedianValue),t.hasOwnProperty("minPercent")&&(e.minPercent=t.minPercent),t.hasOwnProperty("maxPercent")&&(e.maxPercent=t.maxPercent)),e}}Ia.StretchType={NONE:"NONE",GAUSSIAN:"GAUSSIAN",PERCENTCLIP:"PERCENTCLIP",MINIMUMMAXIMUM:"MINIMUMMAXIMUM",STANDARDDEVIATION:"STANDARDDEVIATION"};class Pa{constructor(t){this.displayMode=void 0,this.displayBands=void 0,this.stretchOption=void 0,this.interpolationMode=void 0,this.colorScheme=void 0,this.colorTable=void 0,this.brightness=void 0,this.contrast=void 0,this.noData=void 0,this.noDataColor=void 0,this.noDataTransparent=void 0,this.backgroundValue=void 0,this.backgroundColor=void 0,this.backgroundTransparent=void 0,this.gridFunctions=void 0,this.CLASS_NAME="SuperMap.ImageRenderingRule",Wt.extend(this,t)}destroy(){var t=this;t.displayMode=void 0,t.displayBands=void 0,t.stretchOption=void 0,t.interpolationMode=void 0,t.colorScheme=void 0,t.colorTable=void 0,t.brightness=void 0,t.contrast=void 0,t.noData=void 0,t.noDataColor=void 0,t.noDataTransparent=void 0,t.backgroundValue=void 0,t.backgroundColor=void 0,t.backgroundTransparent=void 0,t.gridFuncOptions=void 0}static constructFromObject(t,e){return t&&(e=e||new Pa,t.hasOwnProperty("displayMode")&&(e.displayMode=t.displayMode),t.hasOwnProperty("displayBands")&&(e.displayBands=t.displayBands),t.hasOwnProperty("stretchOption")&&(e.stretchOption=Ia.constructFromObject&&Ia.constructFromObject(t.stretchOption,{})||t.stretchOption),t.hasOwnProperty("interpolationMode")&&(e.interpolationMode=t.interpolationMode),t.hasOwnProperty("colorScheme")&&(e.colorScheme=t.colorScheme),t.hasOwnProperty("colorTable")&&(e.colorTable=t.colorTable),t.hasOwnProperty("brightness")&&(e.brightness=t.brightness),t.hasOwnProperty("contrast")&&(e.contrast=t.contrast),t.hasOwnProperty("noData")&&(e.noData=t.noData),t.hasOwnProperty("noDataColor")&&(e.noDataColor=t.noDataColor),t.hasOwnProperty("backgroundValue")&&(e.backgroundValue=t.backgroundValue),t.hasOwnProperty("noDataTransparent")&&(e.noDataTransparent=t.noDataTransparent),t.hasOwnProperty("backgroundColor")&&(e.backgroundColor=t.backgroundColor),t.hasOwnProperty("backgroundTransparent")&&(e.backgroundTransparent=t.backgroundTransparent),t.hasOwnProperty("gridFunctions")&&(e.gridFunctions=t.gridFunctions)),e}}Pa.DisplayMode={COMPOSITE:"COMPOSITE",STRETCHED:"Stretched"},Pa.InterpolationMode={NEARESTNEIGHBOR:"NEARESTNEIGHBOR",HIGHQUALITYBILINEAR:"HIGHQUALITYBILINEAR",DEFAULT:"DEFAULT"};class La{constructor(t){this.girdFuncName="GFHillShade",this.Azimuth=315,this.Altitude=45,this.ZFactor=1,this.CLASS_NAME="SuperMap.ImageGFHillShade",Wt.extend(this,t)}destroy(){var t=this;t.girdFuncName="GFHillShade",t.Azimuth=315,t.Altitude=45,t.ZFactor=1}static constructFromObject(t,e){return t&&(e=e||new La,t.hasOwnProperty("girdFuncName")&&(e.girdFuncName=t.girdFuncName),t.hasOwnProperty("Azimuth")&&(e.Azimuth=t.Azimuth),t.hasOwnProperty("Altitude")&&(e.Altitude=t.Altitude),t.hasOwnProperty("ZFactor")&&(e.ZFactor=t.ZFactor)),e}}class Na{constructor(t){this.girdFuncName="GFAspect",this.Azimuth=void 0,this.CLASS_NAME="SuperMap.ImageGFAspect",Wt.extend(this,t)}destroy(){var t=this;t.girdFuncName="GFAspect",t.Azimuth=void 0}static constructFromObject(t,e){return t&&(e=e||new Na,t.hasOwnProperty("girdFuncName")&&(e.girdFuncName=t.girdFuncName),t.hasOwnProperty("Azimuth")&&(e.Azimuth=t.Azimuth)),e}}class Ra{constructor(t){this.girdFuncName="GFOrtho",this.CLASS_NAME="SuperMap.ImageGFOrtho",Wt.extend(this,t)}destroy(){var t=this;t.girdFuncName="GFOrtho"}static constructFromObject(t,e){return t&&(e=e||new Ra,t.hasOwnProperty("girdFuncName")&&(e.girdFuncName=t.girdFuncName)),e}}class Da{constructor(t){this.girdFuncName="GFSlope",this.Altitude=45,this.ZFactor=1,this.CLASS_NAME="SuperMap.ImageGFSlope",Wt.extend(this,t)}destroy(){var t=this;t.girdFuncName="GFSlope",t.Altitude=45,t.ZFactor=1}static constructFromObject(t,e){return t&&(e=e||new Da,t.hasOwnProperty("girdFuncName")&&(e.girdFuncName=t.girdFuncName),t.hasOwnProperty("Altitude")&&(e.Altitude=t.Altitude),t.hasOwnProperty("ZFactor")&&(e.ZFactor=t.ZFactor)),e}}class Fa extends on{constructor(t,e){super(t,e),this.options=e||{},this.eventCount=0,this.CLASS_NAME="SuperMap.KnowledgeGraphService"}destroy(){super.destroy()}query(t,e){const n="cypherQuery",r=Wt.urlAppend(this.url+"/query.json",`${n}=${t}`);this.processAsync({url:r,method:"GET",callback:e})}getGraphMaps(t){const e=this.url+"/graphmaps.json";this.processAsync({url:e,method:"GET",callback:t})}getGraphMap(t,e){const n=this.url+`/graphmaps/${t}.json`;this.processAsync({url:n,method:"GET",callback:e})}async getGraphMapData(t){let e=[];const n=await this._getGraphMapData(t);if(!n)return;const r=n.dataContent.queries&&n.dataContent.queries.query||[];let i=[];i="string"===typeof r?[r]:r;const o=this._getGraphMapExpandQuery(n);o.length&&i.push(...o);for(let a=0;a<i.length;a++){const t=i[a],n=await this._queryDataBySql(t);e=e.concat([],n)}return{data:e,graphMap:n}}_getGraphMapExpandQuery(t){const e=[],n=t.dataContent.expand&&JSON.parse(t.dataContent.expand)||[];return n.forEach(t=>{e.push(`match p=(n)-[]-(m) where id(n)=${t} return p;`)}),e}processAsync({url:t,params:e,method:n,callback:r}){let i=++this.eventCount,o={scope:this,processCompleted:function(t){if(i===t.result.eventId&&r)return delete t.result.eventId,r(t),this.events&&this.events.un(o),!1},processFailed:function(t){if((i===t.error.eventId||i===t.eventId)&&r)return delete t.eventId,r(t),this.events&&this.events.un(o),!1}};this.events.on(o);const a={method:n,url:t,scope:this,success(t,e){t.eventId=i,this.serviceProcessCompleted(t,e)},failure(t,e){t.eventId=i,this.serviceProcessFailed(t,e)}};e&&(a.params=e),this.request(a)}_getGraphMapData(t){return new Promise((e,n)=>{this.getGraphMap(t,t=>{"processFailed"===t.type?n(t.error):""===t.result.data?n("无数据"):e(t.result.graphMap)})})}_queryDataBySql(t){return new Promise((e,n)=>{this.query(t,t=>{"processFailed"===t.type?n(t.error):e(t.result)})})}}var ja={DOES_NOT_INVOLVE:"DOES_NOT_INVOLVE",PUBLISH_FAILED:"PUBLISH_FAILED",PUBLISHED:"PUBLISHED",PUBLISHING:"PUBLISHING",UNPUBLISHED:"UNPUBLISHED",UNPUBLISHED_FAILED:"UNPUBLISHED_FAILED"},Ba={FILENAME:"FILENAME",ID:"ID",LASTMODIFIEDTIME:"LASTMODIFIEDTIME",NICKNAME:"NICKNAME",SERVICESTATUS:"SERVICESTATUS",SIZE:"SIZE",STATUS:"STATUS",TYPE:"TYPE",UPDATETIME:"UPDATETIME",USERNAME:"USERNAME"},za={LINKPAGE:"LINKPAGE",MAPTITLE:"MAPTITLE",NICKNAME:"NICKNAME",RESTITLE:"RESTITLE",USERNAME:"USERNAME"};class Ua{constructor(t){t=t||{},Wt.extend(this,t),this.CLASS_NAME="SuperMap.OnlineServiceBase"}request(t,e,n,r={}){return e=ze.appendCredential(e),r["crossOrigin"]=this.options.crossOrigin,r["headers"]=this.options.headers,Be.commit(t,e,n,r).then((function(t){return t.json()}))}}class Ga extends Ua{constructor(t,e){super(t),e=e||{},this.MD5=null,this.type=null,this.userName=null,this.fileName=null,this.size=null,this.serviceStatus=null,this.serviceId=null,this.id=null,this.lastModfiedTime=null,this.status=null,this.storageId=null,this.publishInfo=null,this.authorizeSetting=null,this.nickname=null,this.tags=[],this.description=null,this.dataItemServices=null,this.coordType=null,this.dataCheckResult=null,this.dataMetaInfo=null,this.thumbnail=null,Wt.extend(this,e),this.id&&(this.serviceUrl=t+"/"+this.id),this.CLASS_NAME="SuperMap.OnlineData"}load(){if(this.serviceUrl){var t=this;return t.request("GET",this.serviceUrl).then((function(e){Wt.extend(t,e)}))}}getPublishedServices(){return this.dataItemServices}getAuthorizeSetting(){return this.authorizeSetting}}class qa{constructor(){this.rootUrl="https://www.supermapol.com",this.webUrl=this.rootUrl+"/web";var t=this.webUrl+"/mycontent";this.mDatasUrl=t+"/datas",this.CLASS_NAME="SuperMap.Online"}load(){return Be.get(this.rootUrl).then((function(t){return t}))}login(){ze.loginOnline(this.rootUrl,!0)}queryDatas(t){var e=this,n=e.mDatasUrl;return t&&(t=t.toJSON()),Be.get(n,t).then((function(t){if(t&&t.content&&!(t.content.length<1)){for(var n=[],r=t.content,i=r.length,o=0;o<i;o++){var a=r[o],s=new Ga(e.mDatasUrl,a);n.push(s)}return n}}))}}class Va{constructor(t){t=t||{},this.userNames=null,this.types=null,this.fileName=null,this.serviceStatuses=null,this.serviceId=null,this.ids=null,this.keywords=null,this.orderBy=null,this.tags=null,this.filterFields=null,Wt.extend(this,t),this.CLASS_NAME="SuperMap.OnlineQueryDatasParameter"}toJSON(){var t=this,e={types:t.types,fileName:t.fileName,serviceStatuses:t.serviceStatuses,serviceId:t.serviceId,ids:t.ids,keywords:t.keywords,orderBy:t.orderBy,tags:t.tags,filterFields:t.filterFields};for(var n in e)null==e[n]&&delete e[n];return e}}class Ha{constructor(t){this.name=null,this.serviceIds=null,this.clientType=ut.SERVER,this.limitation=null,Wt.extend(this,t),this.CLASS_NAME="SuperMap.KeyServiceParameter"}toJSON(){return{name:this.name,serviceIds:this.serviceIds,clientType:this.clientType,limitation:this.limitation}}}class Wa{constructor(t,e){this.type=t,this.server=null,this.tokenServiceUrl=null,this.keyServiceUrl=null,Wt.extend(this,e),this.CLASS_NAME="SuperMap.ServerInfo",this.type=this.type||y.ISERVER,this.server||console.error("server url require is not  undefined");var n="/services/security/tokens";this.type===y.ISERVER&&this.server.indexOf("iserver")<0&&(n="/iserver"+n),this.tokenServiceUrl||(this.tokenServiceUrl=Wt.urlPathAppend(this.server,n)),this.keyServiceUrl||(this.type===y.IPORTAL?this.keyServiceUrl=Wt.urlPathAppend(this.server,"/web/mycontent/keys/register"):this.type===y.ONLINE&&(this.keyServiceUrl=Wt.urlPathAppend(this.server,"/web/mycontent/keys")))}}class Ya{constructor(t){this.userName=null,this.password=null,this.clientType=ut.NONE,this.ip=null,this.referer=null,this.expiration=60,Wt.extend(this,t),this.CLASS_NAME="SuperMap.TokenServiceParameter"}toJSON(){return{userName:this.userName,password:this.password,clientType:this.clientType,ip:this.ip,referer:this.referer,expiration:this.expiration}}}var Xa=n("7080"),Ja=n.n(Xa);class Za{constructor(t,e){e=e||{},this.url=t;try{this.client=new Ja.a.Client({host:this.url})}catch(n){this.client=new Ja.a.Client({node:{url:new URL(this.url)}})}this.change=null,this.openGeoFence=!1,this.outOfGeoFence=null,this.geoFence=null,this.EVENT_TYPES=["change","error","outOfGeoFence"],this.events=new fe(this,null,this.EVENT_TYPES),this.eventListeners=null,Wt.extend(this,e),this.eventListeners instanceof Object&&this.events.on(this.eventListeners)}setGeoFence(t){this.geoFence=t}bulk(t,e){return this.client.bulk(t,this._handleCallback(e))}clearScroll(t,e){return this.client.clearScroll(t,this._handleCallback(e))}count(t,e){return this.client.count(t,this._handleCallback(e))}create(t,e){return this.client.create(t,this._handleCallback(e))}delete(t,e){return this.client.delete(t,this._handleCallback(e))}deleteByQuery(t,e){return this.client.deleteByQuery(t,this._handleCallback(e))}deleteScript(t,e){return this.client.deleteScript(t,this._handleCallback(e))}deleteTemplate(t,e){return this.client.deleteTemplate(t,this._handleCallback(e))}exists(t,e){return this.client.exists(t,this._handleCallback(e))}existsSource(t,e){return this.client.existsSource(t,this._handleCallback(e))}explain(t,e){return this.client.explain(t,this._handleCallback(e))}fieldCaps(t,e){return this.client.fieldCaps(t,this._handleCallback(e))}get(t,e){return this.client.get(t,this._handleCallback(e))}getScript(t,e){return this.client.getScript(t,this._handleCallback(e))}getSource(t,e){return this.client.getSource(t,this._handleCallback(e))}getTemplate(t,e){return this.client.getTemplate(t,this._handleCallback(e))}index(t,e){return this.client.index(t,this._handleCallback(e))}info(t,e){return this.client.info(t,this._handleCallback(e))}mget(t,e){return this.client.mget(t,this._handleCallback(e))}msearch(t,e){let n=this;return n.client.msearch(t).then((function(t){return t=t.body||t,n._update(t.responses,e),t}),(function(t){return e(t),n.events.triggerEvent("error",{error:t}),t}))}msearchTemplate(t,e){return this.client.msearchTemplate(t,this._handleCallback(e))}mtermvectors(t,e){return this.client.mtermvectors(t,this._handleCallback(e))}ping(t,e){return this.client.ping(t,this._handleCallback(e))}putScript(t,e){return this.client.putScript(t,this._handleCallback(e))}putTemplate(t,e){return this.client.putTemplate(t,this._handleCallback(e))}reindex(t,e){return this.client.reindex(t,this._handleCallback(e))}reindexRessrottle(t,e){return this.client.reindexRessrottle(t,this._handleCallback(e))}renderSearchTemplate(t,e){return this.client.renderSearchTemplate(t,this._handleCallback(e))}scroll(t,e){return this.client.scroll(t,this._handleCallback(e))}search(t,e){let n=this;return n.client.search(t).then((function(t){return t=t.body||t,n._update(t,e),t}),(function(t){return e&&e(t),n.events.triggerEvent("error",{error:t}),t}))}searchShards(t,e){return this.client.searchShards(t,this._handleCallback(e))}searchTemplate(t,e){return this.client.searchTemplate(t,this._handleCallback(e))}suggest(t,e){return this.client.suggest(t,this._handleCallback(e))}termvectors(t,e){return this.client.termvectors(t,this._handleCallback(e))}update(t,e){return this.client.update(t,this._handleCallback(e))}updateByQuery(t,e){return this.client.updateByQuery(t,this._handleCallback(e))}_handleCallback(t){return function(){let e=Array.from(arguments);const n=e.shift();let r=e.shift();const i=r&&r.body;if(i){const{statusCode:t,headers:n}=r;e=[t,n],r=i}t.call(this,n,r,...e)}}_update(t,e){let n=this;t&&(n.data=t,n.openGeoFence&&n.geoFence&&n._validateDatas(t),n.events.triggerEvent("change",{data:n.data}),n.change?n.change&&n.change(t):e&&e(void 0,{responses:t}))}_validateDatas(t){if(t){t instanceof Array||(t=[t]);var e,n=t.length;for(e=0;e<n;e++)this._validateData(t[e])}}_validateData(t){let e=this;t.hits.hits.map((function(n){let r=n._source,i=e._getMeterPerMapUnit(e.geoFence.unit),o=e.geoFence.center[0]*i,a=e.geoFence.center[1]*i,s=r.x*i,l=r.y*i,u=e._distance(s,l,o,a),c=e.geoFence.radius;return u>c&&(e.outOfGeoFence&&e.outOfGeoFence(t),e.events.triggerEvent("outOfGeoFence",{data:t})),n}))}_distance(t,e,n,r){return Math.sqrt((t-n)*(t-n)+(e-r)*(e-r))}_getMeterPerMapUnit(t){let e,n=6378137;return"meter"===t?e=1:"degree"===t&&(e=2*Math.PI*n/360),e}}class Ka{constructor(){this.BUILTIN_OBJECT={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1},this._ctx=null,this._canvas=null,this._pixelCtx=null,this._width=null,this._height=null,this._offsetX=0,this._offsetY=0,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Util"}clone(t){var e=this.BUILTIN_OBJECT;if("object"==typeof t&&null!==t){var n=t;if(t instanceof Array){n=[];for(var r=0,i=t.length;r<i;r++)n[r]=this.clone(t[r])}else if(!e[Object.prototype.toString.call(t)])for(var o in n={},t)t.hasOwnProperty(o)&&(n[o]=this.clone(t[o]));return n}return t}mergeItem(t,e,n,r){var i=this.BUILTIN_OBJECT;e.hasOwnProperty(n)&&("object"!=typeof t[n]||i[Object.prototype.toString.call(t[n])]?!r&&n in t||(t[n]=e[n]):this.merge(t[n],e[n],r))}merge(t,e,n){for(var r in e)this.mergeItem(t,e,r,n);return t}getContext(){return this._ctx||(this._ctx=document.createElement("canvas").getContext("2d")),this._ctx}getPixelContext(){return this._pixelCtx||(this._canvas=document.createElement("canvas"),this._width=this._canvas.width,this._height=this._canvas.height,this._pixelCtx=this._canvas.getContext("2d")),this._pixelCtx}adjustCanvasSize(t,e){var n,r=this._canvas,i=this._pixelCtx,o=this._width,a=this._height,s=this._offsetX,l=this._offsetY,u=100;t+s>o&&(o=t+s+u,r.width=o,n=!0),e+l>a&&(a=e+l+u,r.height=a,n=!0),t<-s&&(s=Math.ceil(-t/u)*u,o+=s,r.width=o,n=!0),e<-l&&(l=Math.ceil(-e/u)*u,a+=l,r.height=a,n=!0),n&&i.translate(s,l)}getPixelOffset(){return{x:this._offsetX,y:this._offsetY}}indexOf(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}inherits(t,e){var n=t.prototype;function r(){}for(var i in r.prototype=e.prototype,t.prototype=new r,n)t.prototype[i]=n[i];t.constructor=t}}class Qa{constructor(){this.util=new Ka,this._ctx=null,this.palette=["#ff9277"," #dddd00"," #ffc877"," #bbe3ff"," #d5ffbb","#bbbbff"," #ddb000"," #b0dd00"," #e2bbff"," #ffbbe3","#ff7777"," #ff9900"," #83dd00"," #77e3ff"," #778fff","#c877ff"," #ff77ab"," #ff6600"," #aa8800"," #77c7ff","#ad77ff"," #ff77ff"," #dd0083"," #777700"," #00aa00","#0088aa"," #8400dd"," #aa0088"," #dd0000"," #772e00"],this._palette=this.palette,this.highlightColor="rgba(0,0,255,1)",this._highlightColor=this.highlightColor,this.colorRegExp=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,this._nameColors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#f0f",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"},this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Color"}customPalette(t){this.palette=t}resetPalette(){this.palette=this._palette}getColor(t,e){return t|=0,e=e||this.palette,e[t%e.length]}customHighlight(t){this.highlightColor=t}resetHighlight(){this.highlightColor=this._highlightColor}getHighlightColor(){return this.highlightColor}getRadialGradient(t,e,n,r,i,o,a){var s=this.util;this._ctx||(this._ctx=s.getContext());for(var l=this._ctx.createRadialGradient(t,e,n,r,i,o),u=0,c=a.length;u<c;u++)l.addColorStop(a[u][0],a[u][1]);return l.__nonRecursion=!0,l}getLinearGradient(t,e,n,r,i){var o=this.util;this._ctx||(this._ctx=o.getContext());for(var a=this._ctx.createLinearGradient(t,e,n,r),s=0,l=i.length;s<l;s++)a.addColorStop(i[s][0],i[s][1]);return a.__nonRecursion=!0,a}getStepColors(t,e,n){t=this.toRGBA(t),e=this.toRGBA(e),t=this.getData(t),e=this.getData(e);for(var r=[],i=(e[0]-t[0])/n,o=(e[1]-t[1])/n,a=(e[2]-t[2])/n,s=(e[3]-t[3])/n,l=0,u=t[0],c=t[1],h=t[2],d=t[3];l<n;l++)r[l]=this.toColor([this.adjust(Math.floor(u),[0,255]),this.adjust(Math.floor(c),[0,255]),this.adjust(Math.floor(h),[0,255]),d.toFixed(4)-0],"rgba"),u+=i,c+=o,h+=a,d+=s;return u=e[0],c=e[1],h=e[2],d=e[3],r[l]=this.toColor([u,c,h,d],"rgba"),r}getGradientColors(t,e){var n=[],r=t.length;if(void 0===e&&(e=20),1===r)n=this.getStepColors(t[0],t[0],e);else if(r>1)for(var i=0,o=r-1;i<o;i++){var a=this.getStepColors(t[i],t[i+1],e);i<o-1&&a.pop(),n=n.concat(a)}return n}toColor(t,e){if(e=e||"rgb",t&&(3===t.length||4===t.length)){if(t=this.map(t,(function(t){return t>1?Math.ceil(t):t})),e.indexOf("hex")>-1)return"#"+((1<<24)+(t[0]<<16)+(t[1]<<8)+ +t[2]).toString(16).slice(1);if(e.indexOf("hs")>-1){var n=this.map(t.slice(1,3),(function(t){return t+"%"}));t[1]=n[0],t[2]=n[1]}return e.indexOf("a")>-1?(3===t.length&&t.push(1),t[3]=this.adjust(t[3],[0,1]),e+"("+t.slice(0,4).join(",")+")"):e+"("+t.slice(0,3).join(",")+")"}}toArray(t){t=this.trim(t),t.indexOf("rgba")<0&&(t=this.toRGBA(t));var e=[],n=0;return t.replace(/[\d.]+/g,(function(t){n<3?t|=0:t=+t,e[n++]=t})),e}convert(t,e){if(!this.isCalculableColor(t))return t;var n=this.getData(t),r=n[3];return"undefined"===typeof r&&(r=1),t.indexOf("hsb")>-1?n=this._HSV_2_RGB(n):t.indexOf("hsl")>-1&&(n=this._HSL_2_RGB(n)),e.indexOf("hsb")>-1||e.indexOf("hsv")>-1?n=this._RGB_2_HSB(n):e.indexOf("hsl")>-1&&(n=this._RGB_2_HSL(n)),n[3]=r,this.toColor(n,e)}toRGBA(t){return this.convert(t,"rgba")}toRGB(t){return this.convert(t,"rgb")}toHex(t){return this.convert(t,"hex")}toHSVA(t){return this.convert(t,"hsva")}toHSV(t){return this.convert(t,"hsv")}toHSBA(t){return this.convert(t,"hsba")}toHSB(t){return this.convert(t,"hsb")}toHSLA(t){return this.convert(t,"hsla")}toHSL(t){return this.convert(t,"hsl")}toName(t){for(var e in this._nameColors)if(this.toHex(this._nameColors[e])===this.toHex(t))return e;return null}trim(t){return String(t).replace(/\s+/g,"")}normalize(t){if(this._nameColors[t]&&(t=this._nameColors[t]),t=this.trim(t),t=t.replace(/hsv/i,"hsb"),/^#[\da-f]{3}$/i.test(t)){t=parseInt(t.slice(1),16);var e=(3840&t)<<8,n=(240&t)<<4,r=15&t;t="#"+((1<<24)+(e<<4)+e+(n<<4)+n+(r<<4)+r).toString(16).slice(1)}return t}lift(t,e){if(!this.isCalculableColor(t))return t;var n=e>0?1:-1;"undefined"===typeof e&&(e=0),e=Math.abs(e)>1?1:Math.abs(e),t=this.toRGB(t);for(var r=this.getData(t),i=0;i<3;i++)r[i]=1===n?r[i]*(1-e)|0:(255-r[i])*e+r[i]|0;return"rgb("+r.join(",")+")"}reverse(t){if(!this.isCalculableColor(t))return t;var e=this.getData(this.toRGBA(t));return e=this.map(e,(function(t){return 255-t})),this.toColor(e,"rgb")}mix(t,e,n){if(!this.isCalculableColor(t)||!this.isCalculableColor(e))return t;"undefined"===typeof n&&(n=.5),n=1-this.adjust(n,[0,1]);for(var r=2*n-1,i=this.getData(this.toRGBA(t)),o=this.getData(this.toRGBA(e)),a=i[3]-o[3],s=((r*a===-1?r:(r+a)/(1+r*a))+1)/2,l=1-s,u=[],c=0;c<3;c++)u[c]=i[c]*s+o[c]*l;var h=i[3]*n+o[3]*(1-n);return h=Math.max(0,Math.min(1,h)),1===i[3]&&1===o[3]?this.toColor(u,"rgb"):(u[3]=h,this.toColor(u,"rgba"))}random(){return"#"+Math.random().toString(16).slice(2,8)}getData(t){t=this.normalize(t);var e,n,r=t.match(this.colorRegExp);if(null===r)throw new Error("The color format error");var i,o=[];if(r[2])e=r[2].replace("#","").split(""),i=[e[0]+e[1],e[2]+e[3],e[4]+e[5]],o=this.map(i,(function(t){return Qa.prototype.adjust.call(this,parseInt(t,16),[0,255])}));else if(r[4]){var a=r[4].split(",");n=a[3],i=a.slice(0,3),o=this.map(i,(function(t){return t=Math.floor(t.indexOf("%")>0?2.55*parseInt(t,0):t),Qa.prototype.adjust.call(this,t,[0,255])})),"undefined"!==typeof n&&o.push(this.adjust(parseFloat(n),[0,1]))}else if(r[5]||r[6]){var s=(r[5]||r[6]).split(","),l=parseInt(s[0],0)/360,u=s[1],c=s[2];n=s[3],o=this.map([u,c],(function(t){return Qa.prototype.adjust.call(this,parseFloat(t)/100,[0,1])})),o.unshift(l),"undefined"!==typeof n&&o.push(this.adjust(parseFloat(n),[0,1]))}return o}alpha(t,e){if(!this.isCalculableColor(t))return t;null===e&&(e=1);var n=this.getData(this.toRGBA(t));return n[3]=this.adjust(Number(e).toFixed(4),[0,1]),this.toColor(n,"rgba")}map(t,e){if("function"!==typeof e)throw new TypeError;for(var n=t?t.length:0,r=0;r<n;r++)t[r]=e(t[r]);return t}adjust(t,e){return t<=e[0]?t=e[0]:t>=e[1]&&(t=e[1]),t}isCalculableColor(t){return t instanceof Array||"string"===typeof t}_HSV_2_RGB(t){var e,n,r,i=t[0],o=t[1],a=t[2];if(0===o)e=255*a,n=255*a,r=255*a;else{var s=6*i;6===s&&(s=0);var l=0|s,u=a*(1-o),c=a*(1-o*(s-l)),h=a*(1-o*(1-(s-l))),d=0,f=0,p=0;0===l?(d=a,f=h,p=u):1===l?(d=c,f=a,p=u):2===l?(d=u,f=a,p=h):3===l?(d=u,f=c,p=a):4===l?(d=h,f=u,p=a):(d=a,f=u,p=c),e=255*d,n=255*f,r=255*p}return[e,n,r]}_HSL_2_RGB(t){var e,n,r,i=t[0],o=t[1],a=t[2];if(0===o)e=255*a,n=255*a,r=255*a;else{var s;s=a<.5?a*(1+o):a+o-o*a;var l=2*a-s;e=255*this._HUE_2_RGB(l,s,i+1/3),n=255*this._HUE_2_RGB(l,s,i),r=255*this._HUE_2_RGB(l,s,i-1/3)}return[e,n,r]}_HUE_2_RGB(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),6*n<1?t+6*(e-t)*n:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}_RGB_2_HSB(t){var e,n,r=t[0]/255,i=t[1]/255,o=t[2]/255,a=Math.min(r,i,o),s=Math.max(r,i,o),l=s-a,u=s;if(0===l)e=0,n=0;else{n=l/s;var c=((s-r)/6+l/2)/l,h=((s-i)/6+l/2)/l,d=((s-o)/6+l/2)/l;r===s?e=d-h:i===s?e=1/3+c-d:o===s&&(e=2/3+h-c),e<0&&(e+=1),e>1&&(e-=1)}return e*=360,n*=100,u*=100,[e,n,u]}_RGB_2_HSL(t){var e,n,r=t[0]/255,i=t[1]/255,o=t[2]/255,a=Math.min(r,i,o),s=Math.max(r,i,o),l=s-a,u=(s+a)/2;if(0===l)e=0,n=0;else{n=u<.5?l/(s+a):l/(2-s-a);var c=((s-r)/6+l/2)/l,h=((s-i)/6+l/2)/l,d=((s-o)/6+l/2)/l;r===s?e=d-h:i===s?e=1/3+c-d:o===s&&(e=2/3+h-c),e<0&&(e+=1),e>1&&(e-=1)}return e*=360,n*=100,u*=100,[e,n,u]}}var $a=new Qa;class ts{static createCanvas(t,e){var n=document.createElement("canvas");return n.height=t,n.width=e,n.getContext("2d")}static getLinearGradient(t,e,n,r,i){this._ctx||(this._ctx=this.getContext());for(var o=this._ctx.createLinearGradient(t,e,n,r),a=i.length,s=1/(a-1),l=0,u=0;u<a;u++)o.addColorStop(l,i[u]),l+=s;return o.__nonRecursion=!0,o}static getContext(){return this._ctx||(this._ctx=document.createElement("canvas").getContext("2d")),this._ctx}static getStepColors(t,e,n){t=$a.toRGBA(t),e=$a.toRGBA(e),t=$a.getData(t),e=$a.getData(e);for(var r=[],i=(e[0]-t[0])/n,o=(e[1]-t[1])/n,a=(e[2]-t[2])/n,s=(e[3]-t[3])/n,l=0,u=t[0],c=t[1],h=t[2],d=t[3];l<n;l++)r[l]=$a.toColor([$a.adjust(Math.floor(u),[0,255]),$a.adjust(Math.floor(c),[0,255]),$a.adjust(Math.floor(h),[0,255]),d.toFixed(4)-0],"hex"),u+=i,c+=o,h+=a,d+=s;return u=e[0],c=e[1],h=e[2],d=e[3],r[l]=$a.toColor([u,c,h,d],"hex"),r}static getGradientColors(t,e,n){var r,i,o,a=[],s=t.length;if(void 0!==e){if(s>=e)if("RANGE"===n)for(i=0;i<e;i++)a.push(t[i]);else for(i=0;i<e;i++){let e=Math.floor(i/2);if(i%2===0)a.push(t[e]);else{let n=t.length-1-e;a.push(t[n])}}else{for(r=Math.ceil(e/(s-1)),i=0,o=s-1;i<o;i++){var l=this.getStepColors(t[i],t[i+1],r);i<o-1&&l.pop(),a=a.concat(l)}for(var u=a.length-e,c=0,h=0;c<u;c++)a.splice(h+2,1)}return a}}}class es{static newInstance(){return this.geostatsInstance||(this.geostatsInstance=new window.geostats),this.geostatsInstance}static getInstance(t){let e=this.newInstance();return e.setSerie(t),e}static getArrayStatistic(t,e){return t.length?"Sum"===e||"求和"===e?this.getSum(t):"Maximum"===e||"最大值"===e?this.getMax(t):"Minimum"===e||"最小值"===e?this.getMin(t):"Average"===e||"平均值"===e?this.getMean(t):"Median"===e||"中位数"===e?this.getMedian(t):"times"===e||"计数"===e?this.getTimes(t):void 0:0}static getArraySegments(t,e,n){if("offset"===e)return this.getEqInterval(t,n);if("jenks"===e)return this.getJenks(t,n);if("square"===e){let e=this.getMin(t);return e>=0&&this.getSqrtInterval(t,n)}if("logarithm"===e){let e=this.getMin(t);return e>0&&this.getGeometricProgression(t,n)}}static getSum(t){return this.getInstance(t).sum()}static getMax(t){return this.getInstance(t).max()}static getMin(t){return this.getInstance(t).min()}static getMean(t){return this.getInstance(t).mean()}static getMedian(t){return this.getInstance(t).median()}static getTimes(t){return t.length}static getEqInterval(t,e){return this.getInstance(t).getClassEqInterval(e)}static getJenks(t,e){return this.getInstance(t).getClassJenks(e)}static getSqrtInterval(t,e){t=t.map((function(t){return Math.sqrt(t)}));let n=this.getInstance(t).getClassEqInterval(e);return n.map((function(t){return t*t}))}static getGeometricProgression(t,e){return this.getInstance(t).getClassGeometricProgression(e)}}var ns=function(t){var e,n=6378137;if(t===E.METER)e=1;else if(t===E.DEGREE)e=2*Math.PI*n/360;else if(t===E.KILOMETER)e=.001;else if(t===E.INCH)e=1/.025399999918;else{if(t!==E.FOOT)return e;e=.3048}return e};function rs(t,e,n,r,i=22){var o=[];if(t&&t.length>0)for(let a=0;a<t.length;a++)o.push(os(t[a],n,r));else{const t=Math.abs(e.left-e.right)/256;for(let e=0;e<i;e++)o.push(t/Math.pow(2,e))}return o.sort((function(t,e){return e-t}))}function is(t,e){let n,r=0;for(let i=0;i<e.length;i++)0===i&&(n=Math.abs(t-e[i])),n>Math.abs(t-e[i])&&(n=Math.abs(t-e[i]),r=i);return r}function os(t,e,n){const r=1/.0254,i=ns(n),o=1/(t*e*r*i);return o}function as(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function ss(t,e){const n=[];return as(t,e)&&(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]),n}var ls=n("fec4"),us=n.n(ls);class cs{constructor(t){this.env=null,this.parser=null,this.ruleSet=null,this.cartoStr="",this.shaders=null,"string"===typeof t&&(this.cartoStr=t,this.env={frames:[],errors:[],error:function(t){this.errors.push(t)}},this.parser=this.getParser(this.env),this.parse(t),this.shaders=this.toShaders())}getParser(t){var e,n,r,i,o,a,s,l,u,c=this;function h(){i=s[r],o=n,l=n}function d(){s[r]=i,n=o,l=n}function f(){n>l&&(s[r]=s[r].slice(n-l),l=n)}function p(t){var i,o,a,c;if(t instanceof Function)return t.call(u.parsers);if("string"===typeof t)i=e.charAt(n)===t?t:null,o=1,f();else{if(f(),i=t.exec(s[r]),!i)return null;o=i[0].length}if(i){var h=n+=o;c=n+s[r].length-o;while(n<c){if(a=e.charCodeAt(n),32!==a&&10!==a&&9!==a)break;n++}return s[r]=s[r].slice(o+(n-h)),l=n,0===s[r].length&&r<s.length-1&&r++,"string"===typeof i?i:1===i.length?i[0]:i}}function g(t){return"string"===typeof t?e.charAt(n)===t:!!t.test(s[r])}function m(n){var r,i={index:a,filename:t.filename,message:"Parse error.",line:0,column:-1};for(var o in i)0===n[o]&&(n[o]=i[o]);r=n.filename&&c.env.inputs&&c.env.inputs[n.filename]?c.env.inputs[n.filename]:e,n.line=(r.slice(0,n.index).match(/\n/g)||"").length+1;for(var s=n.index;s>=0&&"\n"!==r.charAt(s);s--)n.column++;return new Error([n.filename,n.line,n.column,n.message].join(";"))}return this.env=t=t||{},this.env.filename=this.env.filename||null,this.env.inputs=this.env.inputs||{},u={parse:function(i){var o,u=null;if(n=r=l=a=0,s=[],e=i.replace(/\r\n/g,"\n"),t.filename&&(c.env.inputs[t.filename]=e),s=function(t){for(var n,r,i,o,a=0,s=/(?:@\{[\w-]+\}|[^"'`\{\}\/\(\)\\])+/g,l=/\/\*(?:[^*]|\*+[^\/*])*\*+\/|\/\/.*/g,c=/"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'|`((?:[^`]|\\.)*)`/g,h=0,d=t[0],f=0;f<e.length;)if(s.lastIndex=f,(n=s.exec(e))&&n.index===f&&(f+=n[0].length,d.push(n[0])),i=e.charAt(f),l.lastIndex=c.lastIndex=f,(n=c.exec(e))&&n.index===f)f+=n[0].length,d.push(n[0]);else if(r||"/"!==i||(o=e.charAt(f+1),"/"!==o&&"*"!==o||!(n=l.exec(e))||n.index!==f)){switch(i){case"{":if(!r){h++,d.push(i);break}case"}":if(!r){h--,d.push(i),t[++a]=d=[];break}case"(":if(!r){r=!0,d.push(i);break}case")":if(r){r=!1,d.push(i);break}default:d.push(i);break}f++}else f+=n[0].length,d.push(n[0]);return 0!==h&&(u={index:f-1,type:"Parse",message:h>0?"missing closing `}`":"missing opening `{`"}),t.map((function(t){return t.join("")}))}([[]]),u)throw m(u);var h=function(t,e){var n=t.specificity,r=e.specificity;return n[0]!=r[0]?r[0]-n[0]:n[1]!=r[1]?r[1]-n[1]:n[2]!=r[2]?r[2]-n[2]:r[3]-n[3]};return o=new cs.Tree.Ruleset([],p(this.parsers.primary)),o.root=!0,o.toList=function(){return function(t){t.error=function(e){t.errors||(t.errors=new Error("")),t.errors.message?t.errors.message+="\n"+m(e).message:t.errors.message=m(e).message},t.frames=t.frames||[];var e=this.flatten([],[],t);return e.sort(h),e}}(),o},parsers:{primary:function(){var t,e=[];while((t=p(this.rule)||p(this.ruleset)||p(this.comment))||p(/^[\s\n]+/)||(t=p(this.invalid)))t&&e.push(t);return e},invalid:function(){var t=p(/^[^;\n]*[;\n]/);if(t)return new cs.Tree.Invalid(t,o)},comment:function(){var t;if("/"===e.charAt(n))return"/"===e.charAt(n+1)?new cs.Tree.Comment(p(/^\/\/.*/),!0):(t=p(/^\/\*(?:[^*]|\*+[^\/*])*\*+\/\n?/))?new cs.Tree.Comment(t):void 0},entities:{quoted:function(){if('"'===e.charAt(n)||"'"===e.charAt(n)){var t=p(/^"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'/);return t?new cs.Tree.Quoted(t[1]||t[2]):void 0}},field:function(){var t="[",e="]";if(p(t)){var n=p(/(^[^\]]+)/);if(p(e))return n?new cs.Tree.Field(n[1]):void 0}},comparison:function(){var t=p(/^=~|=|!=|<=|>=|<|>/);if(t)return t},keyword:function(){var t=p(/^[A-Za-z\u4e00-\u9fa5-]+[A-Za-z-0-9\u4e00-\u9fa5_]*/);if(t)return new cs.Tree.Keyword(t)},call:function(){var t,e;if(t=/^([\w\-]+|%)\(/.exec(s[r])){if(t=t[1],"url"===t)return null;n+=t.length;var i="(",o=")";if(p(i),e=p(this.entities["arguments"]),p(o))return t?new cs.Tree.Call(t,e,n):void 0}},arguments:function(){var t,e=[];while(t=p(this.expression)){e.push(t);var n=",";if(!p(n))break}return e},literal:function(){return p(this.entities.dimension)||p(this.entities.keywordcolor)||p(this.entities.hexcolor)||p(this.entities.quoted)},url:function(){var t;if("u"===e.charAt(n)&&p(/^url\(/)){t=p(this.entities.quoted)||p(this.entities.variable)||p(/^[\-\w%@_match\/.&=:;#+?~]+/)||"";var r=")";return p(r)?new cs.Tree.URL("undefined"!==typeof t.value||t instanceof cs.Tree.Variable?t:new cs.Tree.Quoted(t)):new cs.Tree.Invalid(t,o,"Missing closing ) in URL.")}},variable:function(){var r,i=n;if("@"===e.charAt(n)&&(r=p(/^@[\w-]+/)))return new cs.Tree.Variable(r,i,t.filename)},hexcolor:function(){var t;if("#"===e.charAt(n)&&(t=p(/^#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})/)))return new cs.Tree.Color(t[1])},keywordcolor:function(){var t=s[r].match(/^[a-z]+/);if(t&&t[0]in cs.Tree.Reference.data.colors)return new cs.Tree.Color(cs.Tree.Reference.data.colors[p(/^[a-z]+/)])},dimension:function(){var t=e.charCodeAt(n);if(!(t>57||t<45||47===t)){var r=p(/^(-?\d*\.?\d+(?:[eE][-+]?\d+)?)(\%|\w+)?/);return r?new cs.Tree.Dimension(r[1],r[2],o):void 0}}},variable:function(){var t;if("@"===e.charAt(n)&&(t=p(/^(@[\w-]+)\s*:/)))return t[1]},entity:function(){var t=p(this.entities.call)||p(this.entities.literal),e=p(this.entities.field)||p(this.entities.variable),n=p(this.entities.url)||p(this.entities.keyword);return t||e||n},end:function(){var t=";";return p(t)||g("}")},element:function(){var t=p(/^(?:[.#][\w\u4e00-\u9fa5\-]+|\*|Map)/);if(t)return new cs.Tree.Element(t)},attachment:function(){var t=p(/^::([\w\-]+(?:\/[\w\-]+)*)/);if(t)return t[1]},selector:function(){var t,r,i,a,s,l=[],u=new cs.Tree.Filterset,c=[],h=0,d=0;while((i=p(this.element))||(s=p(this.zoom))||(a=p(this.filter))||(t=p(this.attachment))){if(h++,i)l.push(i);else if(s)c.push(s),d++;else if(a){var f=u.add(a);if(f)throw m({message:f,index:n-1});d++}else{if(r)throw m({message:"Encountered second attachment name.",index:n-1});r=t}var g=e.charAt(n);if("{"===g||"}"===g||";"===g||","===g)break}if(h)return new cs.Tree.Selector(u,c,l,r,d,o)},filter:function(){h();var e,n,r,i="[",a="]";if(p(i)&&(e=p(/^[a-zA-Z0-9\-_]+/)||p(this.entities.quoted)||p(this.entities.variable)||p(this.entities.keyword)||p(this.entities.field))&&(e instanceof cs.Tree.Quoted&&(e=new cs.Tree.Field(e.toString())),(n=p(this.entities.comparison))&&(r=p(this.entities.quoted)||p(this.entities.variable)||p(this.entities.dimension)||p(this.entities.keyword)||p(this.entities.field)))){if(!p(a))throw m({message:"Missing closing ] of filter.",index:o-1});return e.is||(e=new cs.Tree.Field(e)),new cs.Tree.Filter(e,n,r,o,t.filename)}},zoom:function(){h();var t,e,n="]";if(p(/^\[\s*zoom/g)&&(t=p(this.entities.comparison))&&(e=p(this.entities.variable)||p(this.entities.dimension))&&p(n))return new cs.Tree.Zoom(t,e,o);d()},block:function(){var t,e="{",n="}";if(p(e)&&(t=p(this.primary))&&p(n))return t},ruleset:function(){var t,e,n=[],r=",";h();while(t=p(this.selector)){n.push(t);while(p(this.comment));if(!p(r))break;while(p(this.comment));}if(t)while(p(this.comment));if(n.length>0&&(e=p(this.block))){if(1===n.length&&n[0].elements.length&&"Map"===n[0].elements[0].value){var i=new cs.Tree.Ruleset(n,e);return i.isMap=!0,i}return new cs.Tree.Ruleset(n,e)}d()},rule:function(){var r,i,s=e.charAt(n);if(h(),"."!==s&&"#"!==s&&(r=p(this.variable)||p(this.property))){if(i=p(this.value),i&&p(this.end))return new cs.Tree.Rule(r,i,o,t.filename);a=n,d()}},font:function(){var t,e=[],n=[],r=",";while(t=p(this.entity))n.push(t);if(e.push(new cs.Tree.Expression(n)),p(r))while(t=p(this.expression))if(e.push(t),!p(r))break;return new cs.Tree.Value(e)},value:function(){var t,e=[],n=",";while(t=p(this.expression))if(e.push(t),!p(n))break;return e.length>1?new cs.Tree.Value(e.map((function(t){return t.value[0]}))):1===e.length?new cs.Tree.Value(e):void 0},sub:function(){var t,e="(",n=")";if(p(e)&&(t=p(this.expression))&&p(n))return t},multiplication:function(){var t,e,n,r,i="/";if(t=p(this.operand)){while((n=p(i)||p("*")||p("%"))&&(e=p(this.operand)))r=new cs.Tree.Operation(n,[r||t,e],o);return r||t}},addition:function(){var t,r,i,a,s="+";if(t=p(this.multiplication)){while((i=p(/^[-+]\s+/)||" "!=e.charAt(n-1)&&(p(s)||p("-")))&&(r=p(this.multiplication)))a=new cs.Tree.Operation(i,[a||t,r],o);return a||t}},operand:function(){return p(this.sub)||p(this.entity)},expression:function(){var t,e=[];while(t=p(this.addition)||p(this.entity))e.push(t);if(e.length>0)return new cs.Tree.Expression(e)},property:function(){var t=p(/^(([a-z][-a-z_0-9]*\/)?\*?-?[-a-z_0-9]+)\s*:/);if(t)return t[1]}}},u}parse(t){var e=this.parser,n=this.ruleSet=e.parse(t);return n}toShaders(){if(this.ruleSet){var t=this.ruleSet;if(t){var e=t.toList(this.env);e.reverse();var n={},r=[];this._toShaders(n,r,e);for(var i=[],o={},a=0,s=e.length;a<s;++a){var l=e[a],u=l.attachment,c=n[r[a]],h=[];if(!o[u]){var d=0;for(var f in c)if("zoom"!==f&&"frames"!==f&&"attachment"!==f&&"elements"!=f)if("layer-index"===f){var p=function(t,e){var n=null;return c[f].join("\n"),n},g=p();Object.defineProperty(h,"layerIndex",{configurable:!0,enumerable:!1,value:g})}else h[d++]=function(t,e){if(!Array.isArray(t))return t;var n=t.join("\n"),r='attributes["FEATUREID"]&&attributes["FEATUREID"]',i=n.indexOf(r);if(i>=0){if(!e.featureFilter){var o=i+r.length,a=n.indexOf(")",o+1),s="featureId&&(featureId"+n.substring(o,a)+")",l=function(t){return!!s};Object.defineProperty(e,"featureFilter",{configurable:!0,enumerable:!1,value:l})}return{property:f,getValue:Function("attributes","zoom","seftFilter","var _value = null; var isExcute=typeof seftFilter=='function'?sefgFilter():seftFilter;if(isExcute){"+n+";} return _value; ")}}return{property:f,getValue:Function("attributes","zoom","var _value = null;"+n+"; return _value; ")}}(c[f],h);Object.defineProperty(h,"attachment",{configurable:!0,enumerable:!1,value:u}),Object.defineProperty(h,"elements",{configurable:!0,enumerable:!1,value:l.elements}),i.push(h),o[r[a]]=!0}Object.defineProperty(h,"zoom",{configurable:!0,enumerable:!1,value:l.zoom})}return i}}return null}_toShaders(t,e,n){for(let r=0,i=n.length;r<i;++r){let i=n[r],o=[];for(let t=0,e=i.elements.length;t<e;t++)o.push(i.elements[t]);let a=i.filters.filters,s=[];for(let t in a)s.push(a[t].id);let l=o.join("/")+"::"+i.attachment+"_"+s.join("_");e.push(l);let u=t[l]=t[l]||{};u.zoom=cs.Tree.Zoom.all;let c=i.toJS(this.env);for(let t in c)(u[t]=u[t]||[]).push(c[t].join("\n"))}}getShaders(){return this.shaders}destroy(){this.cartoStr=null,this.env=null,this.ruleSet=null,this.parser=null,this.shaders=null}}var hs={version:"2.1.1",style:{"filter-mode":{type:["all","first"],doc:"Control the processing behavior of Rule filters within a Style. If 'all' is used then all Rules are processed sequentially independent of whether any previous filters matched. If 'first' is used then it means processing ends after the first match (a positive filter evaluation) and no further Rules in the Style are processed ('first' is usually the default for CSS implementations on top of Mapnik to simplify translation from CSS to Mapnik XML)","default-value":"all","default-meaning":"All Rules in a Style are processed whether they have filters or not and whether or not the filter conditions evaluate to true."},"image-filters":{css:"image-filters","default-value":"none","default-meaning":"no filters",type:"functions",functions:[["agg-stack-blur",2],["emboss",0],["blur",0],["gray",0],["sobel",0],["edge-detect",0],["x-gradient",0],["y-gradient",0],["invert",0],["sharpen",0]],doc:"A list of image filters."},"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]},opacity:{css:"opacity",type:"float",doc:"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)","default-value":1,"default-meaning":"no separate buffer will be used and no alpha will be applied to the style after rendering"}},layer:{name:{"default-value":"",type:"string",required:!0,"default-meaning":"No layer name has been provided",doc:"The name of a layer. Can be anything you wish and is not strictly validated, but ideally unique  in the map"},srs:{"default-value":"",type:"string","default-meaning":"No srs value is provided and the value will be inherited from the Map's srs",doc:"The spatial reference system definition for the layer, aka the projection. Can either be a proj4 literal string like '+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs' or, if the proper proj4 epsg/nad/etc identifier files are installed, a string that uses an id like: '+init=epsg:4326'"},status:{"default-value":!0,type:"boolean","default-meaning":"This layer will be marked as active and available for processing",doc:"A property that can be set to false to disable this layer from being processed"},minzoom:{"default-value":"0",type:"float","default-meaning":"The layer will be visible at the minimum possible scale",doc:"The minimum scale denominator that this layer will be visible at. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6"},maxzoom:{"default-value":"1.79769e+308",type:"float","default-meaning":"The layer will be visible at the maximum possible scale",doc:"The maximum scale denominator that this layer will be visible at. The default is the numeric limit of the C++ double type, which may vary slightly by system, but is likely a massive number like 1.79769e+308 and ensures that this layer will always be visible unless the value is reduced. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6"},queryable:{"default-value":!1,type:"boolean","default-meaning":"The layer will not be available for the direct querying of data values",doc:"This property was added for GetFeatureInfo/WMS compatibility and is rarely used. It is off by default meaning that in a WMS context the layer will not be able to be queried unless the property is explicitly set to true"},"clear-label-cache":{"default-value":!1,type:"boolean","default-meaning":"The renderer's collision detector cache (used for avoiding duplicate labels and overlapping markers) will not be cleared immediately before processing this layer",doc:"This property, by default off, can be enabled to allow a user to clear the collision detector cache before a given layer is processed. This may be desirable to ensure that a given layers data shows up on the map even if it normally would not because of collisions with previously rendered labels or markers"},"group-by":{"default-value":"",type:"string","default-meaning":"No special layer grouping will be used during rendering",doc:"https://github.com/mapnik/mapnik/wiki/Grouped-rendering"},"buffer-size":{"default-value":"0",type:"float","default-meaning":"No buffer will be used",doc:"Extra tolerance around the Layer extent (in pixels) used to when querying and (potentially) clipping the layer data during rendering"},"maximum-extent":{"default-value":"none",type:"bbox","default-meaning":"No clipping extent will be used",doc:"An extent to be used to limit the bounds used to query this specific layer data during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Layer."}},symbolizers:{"*":{"image-filters":{css:"image-filters","default-value":"none","default-meaning":"no filters",type:"functions",functions:[["agg-stack-blur",2],["emboss",0],["blur",0],["gray",0],["sobel",0],["edge-detect",0],["x-gradient",0],["y-gradient",0],["invert",0],["sharpen",0]],doc:"A list of image filters."},"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]},opacity:{css:"opacity",type:"float",doc:"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)","default-value":1,"default-meaning":"no separate buffer will be used and no alpha will be applied to the style after rendering"}},map:{"background-color":{css:"background-color","default-value":"none","default-meaning":"transparent",type:"color",doc:"Map Background color"},"background-image":{css:"background-image",type:"uri","default-value":"","default-meaning":"transparent",doc:"An image that is repeated below all features on a map as a background.",description:"Map Background image"},srs:{css:"srs",type:"string","default-value":"+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs","default-meaning":"The proj4 literal of EPSG:4326 is assumed to be the Map's spatial reference and all data from layers within this map will be plotted using this coordinate system. If any layers do not declare an srs value then they will be assumed to be in the same srs as the Map and not transformations will be needed to plot them in the Map's coordinate space",doc:"Map spatial reference (proj4 string)"},"buffer-size":{css:"buffer-size","default-value":"0",type:"float","default-meaning":"No buffer will be used",doc:'Extra tolerance around the map (in pixels) used to ensure labels crossing tile boundaries are equally rendered in each tile (e.g. cut in each tile). Not intended to be used in combination with "avoid-edges".'},"maximum-extent":{css:"","default-value":"none",type:"bbox","default-meaning":"No clipping extent will be used",doc:"An extent to be used to limit the bounds used to query all layers during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Map."},base:{css:"base","default-value":"","default-meaning":"This base path defaults to an empty string meaning that any relative paths to files referenced in styles or layers will be interpreted relative to the application process.",type:"string",doc:"Any relative paths used to reference files will be understood as relative to this directory path if the map is loaded from an in memory object rather than from the filesystem. If the map is loaded from the filesystem and this option is not provided it will be set to the directory of the stylesheet."},"paths-from-xml":{css:"","default-value":!0,"default-meaning":"Paths read from XML will be interpreted from the location of the XML",type:"boolean",doc:"value to control whether paths in the XML will be interpreted from the location of the XML or from the working directory of the program that calls load_map()"},"minimum-version":{css:"","default-value":"none","default-meaning":"Mapnik version will not be detected and no error will be thrown about compatibility",type:"string",doc:"The minumum Mapnik version (e.g. 0.7.2) needed to use certain functionality in the stylesheet"},"font-directory":{css:"font-directory",type:"uri","default-value":"none","default-meaning":"No map-specific fonts will be registered",doc:"Path to a directory which holds fonts which should be registered when the Map is loaded (in addition to any fonts that may be automatically registered)."}},polygon:{fill:{css:"polygon-fill",type:"color","default-value":"rgba(128,128,128,1)","default-meaning":"gray and fully opaque (alpha = 1), same as rgb(128,128,128)",doc:"Fill color to assign to a polygon"},"fill-opacity":{css:"polygon-opacity",type:"float",doc:"The opacity of the polygon","default-value":1,"default-meaning":"opaque"},gamma:{css:"polygon-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of polygon edges"},"gamma-method":{css:"polygon-gamma-method",type:["power","linear","none","threshold","multiply"],"default-value":"power","default-meaning":"pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA",doc:"An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h"},clip:{css:"polygon-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"polygon-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"polygon-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"polygon-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},line:{stroke:{css:"line-color","default-value":"rgba(0,0,0,1)",type:"color","default-meaning":"black and fully opaque (alpha = 1), same as rgb(0,0,0)",doc:"The color of a drawn line"},"stroke-width":{css:"line-width","default-value":1,type:"float",doc:"The width of a line in pixels"},"stroke-opacity":{css:"line-opacity","default-value":1,type:"float","default-meaning":"opaque",doc:"The opacity of a line"},"stroke-linejoin":{css:"line-join","default-value":"miter",type:["miter","round","bevel"],doc:"The behavior of lines when joining"},"stroke-linecap":{css:"line-cap","default-value":"butt",type:["butt","round","square"],doc:"The display of line endings"},"stroke-gamma":{css:"line-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of stroke line"},"stroke-gamma-method":{css:"line-gamma-method",type:["power","linear","none","threshold","multiply"],"default-value":"power","default-meaning":"pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA",doc:"An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h"},"stroke-dasharray":{css:"line-dasharray",type:"numbers",doc:"A pair of length values [a,b], where (a) is the dash length and (b) is the gap length respectively. More than two values are supported for more complex patterns.","default-value":"none","default-meaning":"solid line"},"stroke-dashoffset":{css:"line-dash-offset",type:"numbers",doc:"valid parameter but not currently used in renderers (only exists for experimental svg support in Mapnik which is not yet enabled)","default-value":"none","default-meaning":"solid line"},"stroke-miterlimit":{css:"line-miterlimit",type:"float",doc:"The limit on the ratio of the miter length to the stroke-width. Used to automatically convert miter joins to bevel joins for sharp angles to avoid the miter extending beyond the thickness of the stroking path. Normally will not need to be set, but a larger value can sometimes help avoid jaggy artifacts.","default-value":4,"default-meaning":"Will auto-convert miters to bevel line joins when theta is less than 29 degrees as per the SVG spec: 'miterLength / stroke-width = 1 / sin ( theta / 2 )'"},clip:{css:"line-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"line-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},offset:{css:"line-offset",type:"float","default-value":0,"default-meaning":"no offset",doc:"Offsets a line a number of pixels parallel to its actual path. Postive values move the line left, negative values move it right (relative to the directionality of the line)."},rasterizer:{css:"line-rasterizer",type:["full","fast"],"default-value":"full",doc:"Exposes an alternate AGG rendering method that sacrifices some accuracy for speed."},"geometry-transform":{css:"line-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"line-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},markers:{file:{css:"marker-file",doc:"An SVG file that this marker shows at each placement. If no file is given, the marker will show an ellipse.","default-value":"","default-meaning":"An ellipse or circle, if width equals height",type:"uri"},opacity:{css:"marker-opacity",doc:"The overall opacity of the marker, if set, overrides both the opacity of both the fill and stroke","default-value":1,"default-meaning":"The stroke-opacity and fill-opacity will be used",type:"float"},"fill-opacity":{css:"marker-fill-opacity",doc:"The fill opacity of the marker","default-value":1,"default-meaning":"opaque",type:"float"},stroke:{css:"marker-line-color",doc:"The color of the stroke around a marker shape.","default-value":"black",type:"color"},"stroke-width":{css:"marker-line-width",doc:"The width of the stroke around a marker shape, in pixels. This is positioned on the boundary, so high values can cover the area itself.",type:"float"},"stroke-opacity":{css:"marker-line-opacity","default-value":1,"default-meaning":"opaque",doc:"The opacity of a line",type:"float"},placement:{css:"marker-placement",type:["point","line","interior"],"default-value":"point","default-meaning":"Place markers at the center point (centroid) of the geometry",doc:"Attempt to place markers on a point, in the center of a polygon, or if markers-placement:line, then multiple times along a line. 'interior' placement can be used to ensure that points placed on polygons are forced to be inside the polygon interior"},"multi-policy":{css:"marker-multi-policy",type:["each","whole","largest"],"default-value":"each","default-meaning":"If a feature contains multiple geometries and the placement type is either point or interior then a marker will be rendered for each",doc:"A special setting to allow the user to control rendering behavior for 'multi-geometries' (when a feature contains multiple geometries). This setting does not apply to markers placed along lines. The 'each' policy is default and means all geometries will get a marker. The 'whole' policy means that the aggregate centroid between all geometries will be used. The 'largest' policy means that only the largest (by bounding box areas) feature will get a rendered marker (this is how text labeling behaves by default)."},"marker-type":{css:"marker-type",type:["arrow","ellipse"],"default-value":"ellipse",doc:"The default marker-type. If a SVG file is not given as the marker-file parameter, the renderer provides either an arrow or an ellipse (a circle if height is equal to width)"},width:{css:"marker-width","default-value":10,doc:"The width of the marker, if using one of the default types.",type:"expression"},height:{css:"marker-height","default-value":10,doc:"The height of the marker, if using one of the default types.",type:"expression"},fill:{css:"marker-fill","default-value":"blue",doc:"The color of the area of the marker.",type:"color"},"allow-overlap":{css:"marker-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping markers are shown or hidden.","default-meaning":"Do not allow makers to overlap with each other - overlapping markers will not be shown."},"ignore-placement":{css:"marker-ignore-placement",type:"boolean","default-value":!1,"default-meaning":"do not store the bbox of this geometry in the collision detector cache",doc:"value to control whether the placement of the feature will prevent the placement of other features"},spacing:{css:"marker-spacing",doc:"Space between repeated labels","default-value":100,type:"float"},"max-error":{css:"marker-max-error",type:"float","default-value":.2,doc:"The maximum difference between actual marker placement and the marker-spacing parameter. Setting a high value can allow the renderer to try to resolve placement conflicts with other symbolizers."},transform:{css:"marker-transform",type:"functions",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]],"default-value":"","default-meaning":"No transformation",doc:"SVG transformation definition"},clip:{css:"marker-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"marker-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"marker-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"marker-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},shield:{name:{css:"shield-name",type:"expression",serialization:"content",doc:'Value to use for a shield"s text label. Data columns are specified using brackets like [column_name]'},file:{css:"shield-file",required:!0,type:"uri","default-value":"none",doc:"Image file to render behind the shield text"},"face-name":{css:"shield-face-name",type:"string",validate:"font",doc:"Font name and style to use for the shield text","default-value":"",required:!0},"unlock-image":{css:"shield-unlock-image",type:"boolean",doc:"This parameter should be set to true if you are trying to position text beside rather than on top of the shield image","default-value":!1,"default-meaning":"text alignment relative to the shield image uses the center of the image as the anchor for text positioning."},size:{css:"shield-size",type:"float",doc:"The size of the shield text in pixels"},fill:{css:"shield-fill",type:"color",doc:"The color of the shield text"},placement:{css:"shield-placement",type:["point","line","vertex","interior"],"default-value":"point",doc:"How this shield should be placed. Point placement attempts to place it on top of points, line places along lines multiple times per feature, vertex places on the vertexes of polygons, and interior attempts to place inside of polygons."},"avoid-edges":{css:"shield-avoid-edges",doc:"Tell positioning algorithm to avoid labeling near intersection edges.",type:"boolean","default-value":!1},"allow-overlap":{css:"shield-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping shields are shown or hidden.","default-meaning":"Do not allow shields to overlap with other map elements already placed."},"minimum-distance":{css:"shield-min-distance",type:"float","default-value":0,doc:"Minimum distance to the next shield symbol, not necessarily the same shield."},spacing:{css:"shield-spacing",type:"float","default-value":0,doc:"The spacing between repeated occurrences of the same shield on a line"},"minimum-padding":{css:"shield-min-padding","default-value":0,doc:"Determines the minimum amount of padding that a shield gets relative to other shields",type:"float"},"wrap-width":{css:"shield-wrap-width",type:"unsigned","default-value":0,doc:"Length of a chunk of text in characters before wrapping text"},"wrap-before":{css:"shield-wrap-before",type:"boolean","default-value":!1,doc:"Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width."},"wrap-character":{css:"shield-wrap-character",type:"string","default-value":" ",doc:"Use this character instead of a space to wrap long names."},"halo-fill":{css:"shield-halo-fill",type:"color","default-value":"#FFFFFF","default-meaning":"white",doc:"Specifies the color of the halo around the text."},"halo-radius":{css:"shield-halo-radius",doc:"Specify the radius of the halo in pixels","default-value":0,"default-meaning":"no halo",type:"float"},"character-spacing":{css:"shield-character-spacing",type:"unsigned","default-value":0,doc:"Horizontal spacing between characters (in pixels). Currently works for point placement only, not line placement."},"line-spacing":{css:"shield-line-spacing",doc:"Vertical spacing between lines of multiline labels (in pixels)",type:"unsigned"},dx:{css:"shield-text-dx",type:"float",doc:"Displace text within shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},dy:{css:"shield-text-dy",type:"float",doc:"Displace text within shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},"shield-dx":{css:"shield-dx",type:"float",doc:"Displace shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},"shield-dy":{css:"shield-dy",type:"float",doc:"Displace shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},opacity:{css:"shield-opacity",type:"float",doc:"(Default 1.0) - opacity of the image used for the shield","default-value":1},"text-opacity":{css:"shield-text-opacity",type:"float",doc:"(Default 1.0) - opacity of the text placed on top of the shield","default-value":1},"horizontal-alignment":{css:"shield-horizontal-alignment",type:["left","middle","right","auto"],doc:"The shield's horizontal alignment from its centerpoint","default-value":"auto"},"vertical-alignment":{css:"shield-vertical-alignment",type:["top","middle","bottom","auto"],doc:"The shield's vertical alignment from its centerpoint","default-value":"middle"},"text-transform":{css:"shield-text-transform",type:["none","uppercase","lowercase","capitalize"],doc:"Transform the case of the characters","default-value":"none"},"justify-alignment":{css:"shield-justify-alignment",type:["left","center","right","auto"],doc:"Define how text in a shield's label is justified","default-value":"auto"},clip:{css:"shield-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},"comp-op":{css:"shield-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},"line-pattern":{file:{css:"line-pattern-file",type:"uri","default-value":"none",required:!0,doc:"An image file to be repeated and warped along a line"},clip:{css:"line-pattern-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"line-pattern-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"line-pattern-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"line-pattern-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},"polygon-pattern":{file:{css:"polygon-pattern-file",type:"uri","default-value":"none",required:!0,doc:"Image to use as a repeated pattern fill within a polygon"},alignment:{css:"polygon-pattern-alignment",type:["local","global"],"default-value":"local",doc:"Specify whether to align pattern fills to the layer or to the map."},gamma:{css:"polygon-pattern-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of polygon pattern edges"},opacity:{css:"polygon-pattern-opacity",type:"float",doc:"(Default 1.0) - Apply an opacity level to the image used for the pattern","default-value":1,"default-meaning":"The image is rendered without modifications"},clip:{css:"polygon-pattern-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"polygon-pattern-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"polygon-pattern-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"polygon-pattern-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},raster:{opacity:{css:"raster-opacity","default-value":1,"default-meaning":"opaque",type:"float",doc:"The opacity of the raster symbolizer on top of other symbolizers."},"filter-factor":{css:"raster-filter-factor","default-value":-1,"default-meaning":"Allow the datasource to choose appropriate downscaling.",type:"float",doc:"This is used by the Raster or Gdal datasources to pre-downscale images using overviews. Higher numbers can sometimes cause much better scaled image output, at the cost of speed."},scaling:{css:"raster-scaling",type:["near","fast","bilinear","bilinear8","bicubic","spline16","spline36","hanning","hamming","hermite","kaiser","quadric","catrom","gaussian","bessel","mitchell","sinc","lanczos","blackman"],"default-value":"near",doc:"The scaling algorithm used to making different resolution versions of this raster layer. Bilinear is a good compromise between speed and accuracy, while lanczos gives the highest quality."},"mesh-size":{css:"raster-mesh-size","default-value":16,"default-meaning":"Reprojection mesh will be 1/16 of the resolution of the source image",type:"unsigned",doc:"A reduced resolution mesh is used for raster reprojection, and the total image size is divided by the mesh-size to determine the quality of that mesh. Values for mesh-size larger than the default will result in faster reprojection but might lead to distortion."},"comp-op":{css:"raster-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},point:{file:{css:"point-file",type:"uri",required:!1,"default-value":"none",doc:"Image file to represent a point"},"allow-overlap":{css:"point-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping points are shown or hidden.","default-meaning":"Do not allow points to overlap with each other - overlapping markers will not be shown."},"ignore-placement":{css:"point-ignore-placement",type:"boolean","default-value":!1,"default-meaning":"do not store the bbox of this geometry in the collision detector cache",doc:"value to control whether the placement of the feature will prevent the placement of other features"},opacity:{css:"point-opacity",type:"float","default-value":1,"default-meaning":"Fully opaque",doc:"A value from 0 to 1 to control the opacity of the point"},placement:{css:"point-placement",type:["centroid","interior"],doc:"How this point should be placed. Centroid calculates the geometric center of a polygon, which can be outside of it, while interior always places inside of a polygon.","default-value":"centroid"},transform:{css:"point-transform",type:"functions",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]],"default-value":"","default-meaning":"No transformation",doc:"SVG transformation definition"},"comp-op":{css:"point-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},text:{name:{css:"text-name",type:"expression",required:!0,"default-value":"",serialization:"content",doc:"Value to use for a text label. Data columns are specified using brackets like [column_name]"},"face-name":{css:"text-face-name",type:"string",validate:"font",doc:"Font name and style to render a label in",required:!0},size:{css:"text-size",type:"float","default-value":10,doc:"Text size in pixels"},"text-ratio":{css:"text-ratio",doc:"Define the amount of text (of the total) present on successive lines when wrapping occurs","default-value":0,type:"unsigned"},"wrap-width":{css:"text-wrap-width",doc:"Length of a chunk of text in characters before wrapping text","default-value":0,type:"unsigned"},"wrap-before":{css:"text-wrap-before",type:"boolean","default-value":!1,doc:"Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width."},"wrap-character":{css:"text-wrap-character",type:"string","default-value":" ",doc:"Use this character instead of a space to wrap long text."},spacing:{css:"text-spacing",type:"unsigned",doc:"Distance between repeated text labels on a line (aka. label-spacing)"},"character-spacing":{css:"text-character-spacing",type:"float","default-value":0,doc:"Horizontal spacing adjustment between characters in pixels"},"line-spacing":{css:"text-line-spacing","default-value":0,type:"unsigned",doc:"Vertical spacing adjustment between lines in pixels"},"label-position-tolerance":{css:"text-label-position-tolerance","default-value":0,type:"unsigned",doc:"Allows the label to be displaced from its ideal position by a number of pixels (only works with placement:line)"},"max-char-angle-delta":{css:"text-max-char-angle-delta",type:"float","default-value":"22.5",doc:"The maximum angle change, in degrees, allowed between adjacent characters in a label. This value internally is converted to radians to the default is 22.5*math.pi/180.0. The higher the value the fewer labels will be placed around around sharp corners."},fill:{css:"text-fill",doc:"Specifies the color for the text","default-value":"#000000",type:"color"},opacity:{css:"text-opacity",doc:"A number from 0 to 1 specifying the opacity for the text","default-value":1,"default-meaning":"Fully opaque",type:"float"},"halo-fill":{css:"text-halo-fill",type:"color","default-value":"#FFFFFF","default-meaning":"white",doc:"Specifies the color of the halo around the text."},"halo-radius":{css:"text-halo-radius",doc:"Specify the radius of the halo in pixels","default-value":0,"default-meaning":"no halo",type:"float"},dx:{css:"text-dx",type:"float",doc:"Displace text by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},dy:{css:"text-dy",type:"float",doc:"Displace text by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},"vertical-alignment":{css:"text-vertical-alignment",type:["top","middle","bottom","auto"],doc:"Position of label relative to point position.","default-value":"auto","default-meaning":'Default affected by value of dy; "bottom" for dy>0, "top" for dy<0.'},"avoid-edges":{css:"text-avoid-edges",doc:"Tell positioning algorithm to avoid labeling near intersection edges.","default-value":!1,type:"boolean"},"minimum-distance":{css:"text-min-distance",doc:"Minimum permitted distance to the next text symbolizer.",type:"float"},"minimum-padding":{css:"text-min-padding",doc:"Determines the minimum amount of padding that a text symbolizer gets relative to other text",type:"float"},"minimum-path-length":{css:"text-min-path-length",type:"float","default-value":0,"default-meaning":"place labels on all paths",doc:"Place labels only on paths longer than this value."},"allow-overlap":{css:"text-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping text is shown or hidden.","default-meaning":"Do not allow text to overlap with other text - overlapping markers will not be shown."},orientation:{css:"text-orientation",type:"expression",doc:"Rotate the text."},placement:{css:"text-placement",type:["point","line","vertex","interior"],"default-value":"point",doc:"Control the style of placement of a point versus the geometry it is attached to."},"placement-type":{css:"text-placement-type",doc:'Re-position and/or re-size text to avoid overlaps. "simple" for basic algorithm (using text-placements string,) "dummy" to turn this feature off.',type:["dummy","simple"],"default-value":"dummy"},placements:{css:"text-placements",type:"string","default-value":"",doc:'If "placement-type" is set to "simple", use this "POSITIONS,[SIZES]" string. An example is `text-placements: "E,NE,SE,W,NW,SW";` '},"text-transform":{css:"text-transform",type:["none","uppercase","lowercase","capitalize"],doc:"Transform the case of the characters","default-value":"none"},"horizontal-alignment":{css:"text-horizontal-alignment",type:["left","middle","right","auto"],doc:"The text's horizontal alignment from its centerpoint","default-value":"auto"},"justify-alignment":{css:"text-align",type:["left","right","center","auto"],doc:"Define how text is justified","default-value":"auto","default-meaning":"Auto alignment means that text will be centered by default except when using the `placement-type` parameter - in that case either right or left justification will be used automatically depending on where the text could be fit given the `text-placements` directives"},clip:{css:"text-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},"comp-op":{css:"text-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},building:{fill:{css:"building-fill","default-value":"#FFFFFF",doc:"The color of the buildings walls.",type:"color"},"fill-opacity":{css:"building-fill-opacity",type:"float",doc:"The opacity of the building as a whole, including all walls.","default-value":1},height:{css:"building-height",doc:"The height of the building in pixels.",type:"expression","default-value":"0"}}},colors:{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50],transparent:[0,0,0,0]},filter:{value:["true","false","null","point","linestring","polygon","collection"]}};cs["mapnik_reference"]={version:{latest:hs,"2.1.1":hs}},cs.Tree={},cs.Tree.operate=function(t,e,n){switch(t){case"+":return e+n;case"-":return e-n;case"*":return e*n;case"%":return e%n;case"/":return e/n}},cs.Tree.functions={rgb:function(t,e,n){return this.rgba(t,e,n,1)},rgba:function(t,e,n,r){var i=this,o=[t,e,n].map((function(t){return i.number(t)}));return r=i.number(r),o.some(isNaN)||isNaN(r)?null:new cs.Tree.Color(o,r)},stop:function(t){var e,n;return arguments.length>1&&(e=arguments[1]),arguments.length>2&&(n=arguments[2]),{is:"tag",val:t,color:e,mode:n,toString(r){return'\n\t<stop value="'+t.ev(r)+'"'+(e?' color="'+e.ev(r)+'" ':"")+(n?' mode="'+n.ev(r)+'" ':"")+"/>"}}},hsl:function(t,e,n){return this.hsla(t,e,n,1)},hsla:function(t,e,n,r){if(t=this.number(t)%360/360,e=this.number(e),n=this.number(n),r=this.number(r),[t,e,n,r].some(isNaN))return null;var i=n<=.5?n*(e+1):n+e-n*e,o=2*n-i;return this.rgba(255*a(t+1/3),255*a(t),255*a(t-1/3),r);function a(t){return t=t<0?t+1:t>1?t-1:t,6*t<1?o+(i-o)*t*6:2*t<1?i:3*t<2?o+(i-o)*(2/3-t)*6:o}},hue:function(t){return"toHSL"in t?new cs.Tree.Dimension(Math.round(t.toHSL().h)):null},saturation:function(t){return"toHSL"in t?new cs.Tree.Dimension(Math.round(100*t.toHSL().s),"%"):null},lightness:function(t){return"toHSL"in t?new cs.Tree.Dimension(Math.round(100*t.toHSL().l),"%"):null},alpha:function(t){return"toHSL"in t?new cs.Tree.Dimension(t.toHSL().a):null},saturate:function(t,e){if(!("toHSL"in t))return null;var n=t.toHSL();return n.s+=e.value/100,n.s=this.clamp(n.s),this.hsla_simple(n)},desaturate:function(t,e){if(!("toHSL"in t))return null;var n=t.toHSL();return n.s-=e.value/100,n.s=this.clamp(n.s),this.hsla_simple(n)},lighten:function(t,e){if(!("toHSL"in t))return null;var n=t.toHSL();return n.l+=e.value/100,n.l=this.clamp(n.l),this.hsla_simple(n)},darken:function(t,e){if(!("toHSL"in t))return null;var n=t.toHSL();return n.l-=e.value/100,n.l=this.clamp(n.l),this.hsla_simple(n)},fadein:function(t,e){if(!("toHSL"in t))return null;var n=t.toHSL();return n.a+=e.value/100,n.a=this.clamp(n.a),this.hsla_simple(n)},fadeout:function(t,e){if(!("toHSL"in t))return null;var n=t.toHSL();return n.a-=e.value/100,n.a=this.clamp(n.a),this.hsla_simple(n)},spin:function(t,e){if(!("toHSL"in t))return null;var n=t.toHSL(),r=(n.h+e.value)%360;return n.h=r<0?360+r:r,this.hsla_simple(n)},replace:function(t,e,n){return"field"===t.is?t.toString+".replace("+e.toString()+", "+n.toString()+")":t.replace(e,n)},mix:function(t,e,n){var r=n.value/100,i=2*r-1,o=t.toHSL().a-e.toHSL().a,a=((i*o==-1?i:(i+o)/(1+i*o))+1)/2,s=1-a,l=[t.rgb[0]*a+e.rgb[0]*s,t.rgb[1]*a+e.rgb[1]*s,t.rgb[2]*a+e.rgb[2]*s],u=t.alpha*r+e.alpha*(1-r);return new cs.Tree.Color(l,u)},greyscale:function(t){return this.desaturate(t,new cs.Tree.Dimension(100))},"%":function(t){for(var e=Array.prototype.slice.call(arguments,1),n=t.value,r=0;r<e.length;r++)n=n.replace(/%s/,e[r].value).replace(/%[da]/,e[r].toString());return n=n.replace(/%%/g,"%"),new cs.Tree.Quoted(n)},hsla_simple:function(t){return this.hsla(t.h,t.s,t.l,t.a)},number:function(t){return t instanceof cs.Tree.Dimension?parseFloat("%"===t.unit?t.value/100:t.value):"number"===typeof t?t:NaN},clamp:function(t){return Math.min(1,Math.max(0,t))}},cs.Tree.Call=class{constructor(t,e,n){this.is="call",this.name=t,this.args=e,this.index=n}ev(t){for(var e=this.args.map((function(e){return e.ev(t)})),n=0;n<e.length;n++)if("undefined"===e[n].is)return{is:"undefined",value:"undefined"};if(this.name in cs.Tree.functions){if(cs.Tree.functions[this.name].length<=e.length){var r=cs.Tree.functions[this.name].apply(cs.Tree.functions,e);return null===r?(t.error({message:"incorrect arguments given to "+this.name+"()",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):r}return t.error({message:"incorrect number of arguments for "+this.name+"(). "+cs.Tree.functions[this.name].length+" expected.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}}var i=cs.Tree.Reference.mapnikFunctions[this.name];if(void 0===i){var o=us()(cs.Tree.Reference.mapnikFunctions),a=this.name,s=o.map((function(t){return[t[0],cs.Tree.Reference.editDistance(a,t[0]),t[1]]})).sort((function(t,e){return t[1]-e[1]}));return t.error({message:"unknown function "+this.name+"(), did you mean "+s[0][0]+"("+s[0][2]+")",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}}return i!==e.length&&-1!==i?(t.error({message:"function "+this.name+"() takes "+i+" arguments and was given "+e.length,index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):(this.args=e,this)}toString(t,e){return this.args.length?this.name+"("+this.args.join(",")+")":this.name}},cs.Tree.Color=class{constructor(t,e){this.is="color",Array.isArray(t)?this.rgb=t.slice(0,3):6==t.length?this.rgb=t.match(/.{2}/g).map((function(t){return parseInt(t,16)})):this.rgb=t.split("").map((function(t){return parseInt(t+t,16)})),"number"===typeof e?this.alpha=e:4===t.length?this.alpha=t[3]:this.alpha=1}ev(){return this}toString(){return"rgba("+this.rgb.map((function(t){return Math.round(t)})).concat(this.alpha).join(", ")+")"}operate(t,e,n){var r=[];n instanceof cs.Tree.Color||(n=n.toColor());for(var i=0;i<3;i++)r[i]=cs.Tree.operate(e,this.rgb[i],n.rgb[i]);return new cs.Tree.Color(r)}toHSL(){var t,e,n=this.rgb[0]/255,r=this.rgb[1]/255,i=this.rgb[2]/255,o=this.alpha,a=Math.max(n,r,i),s=Math.min(n,r,i),l=(a+s)/2,u=a-s;if(a===s)t=e=0;else{switch(e=l>.5?u/(2-a-s):u/(a+s),a){case n:t=(r-i)/u+(r<i?6:0);break;case r:t=(i-n)/u+2;break;case i:t=(n-r)/u+4;break;default:break}t/=6}return{h:360*t,s:e,l:l,a:o}}},cs.Tree.Comment=class{constructor(t,e){this.value=t,this.silent=!!e}toString(t){return"\x3c!--"+this.value+"--\x3e"}ev(){return this}},cs.Tree.Definition=class{constructor(t,e){this.elements=t.elements,this.rules=e,this.ruleIndex={};for(var n=0;n<this.rules.length;n++)"zoom"in this.rules[n]&&(this.rules[n]=this.rules[n].clone()),this.rules[n].zoom=t.zoom,this.ruleIndex[this.rules[n].updateID()]=!0;this.filters=t.filters,this.zoom=t.zoom,this.attachment=t.attachment||"__default__",this.specificity=t.specificity()}toString(){for(var t=this.filters.toString(),e=0;e<this.rules.length;e++)t+="\n    "+this.rules[e];return t}toJS(t){var e={},n=this.zoom,r=this.filters.toJS(t),i=[n];function o(n){if(n instanceof cs.Tree.Rule)e[n.name]=e[n.name]||[],r?e[n.name].push("if("+r+"){"+n.value.toJS(t)+"}"):e[n.name].push(n.value.toJS(t));else if(n instanceof cs.Tree.Ruleset){var i=n.toJS(t);for(var o in i)for(var a in e[o]=e[o]||[],i[o])e[o].push(i[o][a])}}for(var a in r&&i.push(r),r=i.join(" && "),this.rules)o(this.rules[a]);return e}},cs.Tree.Dimension=class{constructor(t,e,n){this.is="float",this.physical_units=["m","cm","in","mm","pt","pc"],this.screen_units=["px","%"],this.all_units=["m","cm","in","mm","pt","pc","px","%"],this.densities={m:.0254,mm:25.4,cm:2.54,pt:72,pc:6},this.value=parseFloat(t),this.unit=e||null,this.index=n}ev(t){if(this.unit&&this.all_units.indexOf(this.unit)<0)return t.error({message:"Invalid unit: '"+this.unit+"'",index:this.index}),{is:"undefined",value:"undefined"};if(this.unit&&this.physical_units.indexOf(this.unit)>=0){if(!t.ppi)return t.error({message:"ppi is not set, so metric units can't be used",index:this.index}),{is:"undefined",value:"undefined"};this.value=this.value/this.densities[this.unit]*t.ppi,this.unit="px"}return this}toColor(){return new cs.Tree.Color([this.value,this.value,this.value])}round(){return this.value=Math.round(this.value),this}toString(){return this.value.toString()}operate(t,e,n){return"%"===this.unit&&"%"!==n.unit?(t.error({message:"If two operands differ, the first must not be %",index:this.index}),{is:"undefined",value:"undefined"}):"%"!==this.unit&&"%"===n.unit?"*"===e||"/"===e||"%"===e?(t.error({message:"Percent values can only be added or subtracted from other values",index:this.index}),{is:"undefined",value:"undefined"}):new cs.Tree.Dimension(cs.Tree.operate(e,this.value,this.value*n.value*.01),this.unit):new cs.Tree.Dimension(cs.Tree.operate(e,this.value,n.value),this.unit||n.unit)}},cs.Tree.Element=class{constructor(t){this.value=t.trim(),"#"===this.value[0]&&(this.type="id",this.clean=this.value.replace(/^#/,"")),"."===this.value[0]&&(this.type="class",this.clean=this.value.replace(/^\./,"")),-1!==this.value.indexOf("*")&&(this.type="wildcard")}specificity(){return["id"===this.type?1:0,"class"===this.type?1:0]}toString(){return this.value}},cs.Tree.Expression=class{constructor(t){this.is="expression",this.value=t}ev(t){return this.value.length>1?new cs.Tree.Expression(this.value.map((function(e){return e.ev(t)}))):this.value[0].ev(t)}toString(t){return this.value.map((function(e){return e.toString(t)})).join(" ")}},cs.Tree.Field=class{constructor(t){this.is="field",this.value=t||""}toString(){return'["'+this.value.toUpperCase()+'"]'}ev(){return this}},cs.Tree.Filter=class{constructor(t,e,n,r,i){this.ops={"<":[" &lt; ","numeric"],">":[" &gt; ","numeric"],"=":[" = ","both"],"!=":[" != ","both"],"<=":[" &lt;= ","numeric"],">=":[" &gt;= ","numeric"],"=~":[".match(","string",")"]},this.key=t,this.op=e,this.val=n,this.index=r,this.filename=i,this.id=this.key+this.op+this.val}ev(t){return this.key=this.key.ev(t),this.val=this.val.ev(t),this}toString(){return"["+this.id+"]"}},cs.Tree.Filterset=class{constructor(){this.filters={}}toJS(t){function e(t){var e=t.op;"="===e&&(e="==");var n=t.val;void 0!==t._val&&(n=t._val.toString(!0)),t.key&&"scale"===t.key.value?n=+n:"string"!==typeof n&&"object"!==typeof n||(n="'"+n+"'");var r="attributes";return r+"&&"+r+t.key+"&&"+r+t.key+" "+e+n}var n=[];for(var r in this.filters)n.push(e(this.filters[r]));return n.join(" && ")}toString(){var t=[];for(var e in this.filters)t.push(this.filters[e].id);return t.sort().join("\t")}ev(t){for(var e in this.filters)this.filters[e].ev(t);return this}clone(){var t=new cs.Tree.Filterset;for(var e in this.filters)t.filters[e]=this.filters[e];return t}cloneWith(t){var e=[];for(var n in t.filters){var r=this.addable(t.filters[n]);if(!1===r)return!1;!0===r&&e.push(t.filters[n])}if(!e.length)return null;var i=new cs.Tree.Filterset;for(n in this.filters)i.filters[n]=this.filters[n];while(n=e.shift())i.add(n);return i}addable(t){var e=t.key.toString(),n=t.val.toString();switch(n.match(/^[0-9]+(\.[0-9]*)?_match/)&&(n=parseFloat(n)),t.op){case"=":return void 0!==this.filters[e+"="]?this.filters[e+"="].val.toString()==n&&null:void 0===this.filters[e+"!="+n]&&(!(void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=n)&&(!(void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=n)&&(!(void 0!==this.filters[e+">="]&&this.filters[e+">="].val>n)&&!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<n))));case"=~":return!0;case"!=":return void 0!==this.filters[e+"="]?this.filters[e+"="].val!==n&&null:void 0!==this.filters[e+"!="+n]||void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=n||void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=n||void 0!==this.filters[e+">="]&&this.filters[e+">="].val>n?null:!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<n)||null;case">":return e+"="in this.filters?!(this.filters[e+"="].val<=n)&&null:!(void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=n)&&(!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<=n)&&(void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=n?null:!(void 0!==this.filters[e+">="]&&this.filters[e+">="].val>n)||null));case">=":return void 0!==this.filters[e+"="]?!(this.filters[e+"="].val<n)&&null:!(void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=n)&&(!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<n)&&(void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=n?null:!(void 0!==this.filters[e+">="]&&this.filters[e+">="].val>=n)||null));case"<":return void 0!==this.filters[e+"="]?!(this.filters[e+"="].val>=n)&&null:!(void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=n)&&(!(void 0!==this.filters[e+">="]&&this.filters[e+">="].val>=n)&&(void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=n?null:!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<n)||null));case"<=":return void 0!==this.filters[e+"="]?!(this.filters[e+"="].val>n)&&null:!(void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=n)&&(!(void 0!==this.filters[e+">="]&&this.filters[e+">="].val>n)&&(void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=n?null:!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<=n)||null));default:break}}conflict(t){var e=t.key.toString(),n=t.val.toString();return isNaN(parseFloat(n))||(n=parseFloat(n)),("="===t.op&&void 0!==this.filters[e+"="]&&n!=this.filters[e+"="].val.toString()||"!="===t.op&&void 0!==this.filters[e+"="]&&n==this.filters[e+"="].val.toString()||"="===t.op&&void 0!==this.filters[e+"!="]&&n===this.filters[e+"!="].val.toString())&&t.toString()+" added to "+this.toString()+" produces an invalid filter"}add(t,e){var n,r=t.key.toString(),i=t.op,o=this.conflict(t);if(o)return o;if("="===i){for(var a in this.filters)this.filters[a].key===r&&delete this.filters[a];this.filters[r+"="]=t}else if("!="===i)this.filters[r+"!="+t.val]=t;else if("=~"===i)this.filters[r+"=~"+t.val]=t;else if(">"===i){for(var s in this.filters)this.filters[s].key===r&&this.filters[s].val<=t.val&&delete this.filters[s];this.filters[r+">"]=t}else if(">="===i){for(var l in this.filters)n=+this.filters[l].val.toString(),this.filters[l].key===r&&n<t.val&&delete this.filters[l];void 0!==this.filters[r+"!="+t.val]?(delete this.filters[r+"!="+t.val],t.op=">",this.filters[r+">"]=t):this.filters[r+">="]=t}else if("<"===i){for(var u in this.filters)n=+this.filters[u].val.toString(),this.filters[u].key===r&&n>=t.val&&delete this.filters[u];this.filters[r+"<"]=t}else if("<="===i){for(var c in this.filters)n=+this.filters[c].val.toString(),this.filters[c].key===r&&n>t.val&&delete this.filters[c];void 0!==this.filters[r+"!="+t.val]?(delete this.filters[r+"!="+t.val],t.op="<",this.filters[r+"<"]=t):this.filters[r+"<="]=t}}},cs.Tree.Fontset=class{constructor(t,e){this.fonts=e,this.name="fontset-"+t.effects.length}},cs.Tree.Invalid=class{constructor(t,e,n){this.is="invalid",this.chunk=t,this.index=e,this.type="syntax",this.message=n||"Invalid code: "+this.chunk}ev(t){return t.error({chunk:this.chunk,index:this.index,type:"syntax",message:this.message||"Invalid code: "+this.chunk}),{is:"undefined"}}},cs.Tree.Keyword=class{ev(){return this}constructor(t){this.value=t;var e={transparent:"color",true:"boolean",false:"boolean"};this.is=e[t]?e[t]:"keyword"}toString(){return this.value}},cs.Tree.Literal=class{constructor(t){this.value=t||"",this.is="field"}toString(){return this.value}ev(){return this}},cs.Tree.Operation=class{constructor(t,e,n){this.is="operation",this.op=t.trim(),this.operands=e,this.index=n}ev(t){var e,n=this.operands[0].ev(t),r=this.operands[1].ev(t);return"undefined"===n.is||"undefined"===r.is?{is:"undefined",value:"undefined"}:(n instanceof cs.Tree.Dimension&&r instanceof cs.Tree.Color&&("*"===this.op||"+"===this.op?(e=r,r=n,n=e):t.error({name:"OperationError",message:"Can't substract or divide a color from a number",index:this.index})),n instanceof cs.Tree.Quoted&&r instanceof cs.Tree.Quoted&&"+"!==this.op?(t.error({message:"Can't subtract, divide, or multiply strings.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):n instanceof cs.Tree.Field||r instanceof cs.Tree.Field||n instanceof cs.Tree.Literal||r instanceof cs.Tree.Literal?"color"===n.is||"color"===r.is?(t.error({message:"Can't subtract, divide, or multiply colors in expressions.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):new cs.Tree.Literal(n.ev(t).toString(!0)+this.op+r.ev(t).toString(!0)):void 0===n.operate?(t.error({message:"Cannot do math with type "+n.is+".",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):n.operate(t,this.op,r))}},cs.Tree.Quoted=class{constructor(t){this.is="string",this.value=t||""}toString(t){var e=this.value.replace(/&/g,"&amp;"),n=e.replace(/\'/g,"\\'").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/\>/g,"&gt;");return!0===t?"'"+n+"'":e}ev(){return this}operate(t,e,n){return new cs.Tree.Quoted(cs.Tree.operate(e,this.toString(),n.toString(this.contains_field)))}},cs.Tree.Reference={_validateValue:{font:function(t,e){return!t.validation_data||!t.validation_data.fonts||-1!=t.validation_data.fonts.indexOf(e)}},setData:function(t){function e(t){var e={};for(var n in t.symbolizers)for(var r in t.symbolizers[n])t.symbolizers[n][r].hasOwnProperty("css")&&(e[t.symbolizers[n][r].css]=[t.symbolizers[n][r],n,r]);return e}function n(t){var e={};for(var n in t.symbolizers)for(var r in t.symbolizers[n])if("functions"===t.symbolizers[n][r].type)for(var i=0;i<t.symbolizers[n][r].functions.length;i++){var o=t.symbolizers[n][r].functions[i];e[o[0]]=o[1]}return e}function r(t){var e={};for(var n in t.symbolizers)for(var r in e[n]=[],t.symbolizers[n])t.symbolizers[n][r].required&&e[n].push(t.symbolizers[n][r].css);return e}this.data=t,this.selector_cache=e(t),this.mapnikFunctions=n(t),this.required_cache=r(t)},setVersion:function(t){return!!cs.mapnik_reference.version.hasOwnProperty(t)&&(this.setData(cs.mapnik_reference.version[t]),!0)},selectorData:function(t,e){if(this.selector_cache&&this.selector_cache[t])return this.selector_cache[t][e]},validSelector:function(t){return!!this.selector_cache[t]},selectorName:function(t){return this.selectorData(t,2)},selector:function(t){return this.selectorData(t,0)},symbolizer:function(t){return this.selectorData(t,1)},requiredProperties:function(t,e){var n=this.required_cache[t];for(var r in n)if(!(n[r]in e))return"Property "+n[r]+" required for defining "+t+" styles."},isFont:function(t){return"font"===this.selector(t).validate},editDistance:function(t,e){if(0===t.length)return e.length;if(0===e.length)return t.length;for(var n=[],r=0;r<=e.length;r++)n[r]=[r];for(var i=0;i<=t.length;i++)n[0][i]=i;for(r=1;r<=e.length;r++)for(i=1;i<=t.length;i++)e.charAt(r-1)===t.charAt(i-1)?n[r][i]=n[r-1][i-1]:n[r][i]=Math.min(n[r-1][i-1]+1,Math.min(n[r][i-1]+1,n[r-1][i]+1));return n[e.length][t.length]},validValue:function(t,e,n){function r(t,e){if("string"===t.value[0].is)return!0;for(var n in t.value)for(var r in t.value[n].value){if("call"!==t.value[n].value[r].is)return!1;var i=find(this.selector(e).functions,(function(e){return e[0]===t.value[n].value[r].name}));if((!i||-1!==i[1])&&(!i||i[1]!==t.value[n].value[r].args.length))return!1}return!0}function i(t,e){return"object"===typeof this.selector(e).type?-1!==this.selector(e).type.indexOf(t.value[0].value):"string"===this.selector(e).type}var o;if(this.selector(e)){if("keyword"===n.value[0].is)return i(n,e);if("undefined"===n.value[0].is)return!0;if("numbers"===this.selector(e).type){for(o in n.value)if("float"!==n.value[o].is)return!1;return!0}if("tags"===this.selector(e).type){if(!n.value)return!1;if(!n.value[0].value)return"tag"===n.value[0].is;for(o=0;o<n.value[0].value.length;o++)if("tag"!==n.value[0].value[o].is)return!1;return!0}if("functions"==this.selector(e).type)return r(n,e);if("expression"===this.selector(e).type)return!0;if("unsigned"===this.selector(e).type)return"float"===n.value[0].is&&(n.value[0].round(),!0);if(this.selector(e).validate){var a=!1;for(o=0;o<n.value.length;o++)if(this.selector(e).type===n.value[o].is&&this._validateValue[this.selector(e).validate](t,n.value[o].value))return!0;return a}return this.selector(e).type===n.value[0].is}return!1}},cs.Tree.Reference.setVersion("latest"),cs.Tree.Rule=class{constructor(t,e,n,r){this.is="rule";var i=t.split("/");this.name=i.pop(),this.instance=i.length?i[0]:"__default__",this.value=e instanceof cs.Tree.Value?e:new cs.Tree.Value([e]),this.index=n,this.symbolizer=cs.Tree.Reference.symbolizer(this.name),this.filename=r,this.variable="@"===t.charAt(0)}clone(){var t=Object.create(cs.Tree.Rule.prototype);return t.name=this.name,t.value=this.value,t.index=this.index,t.instance=this.instance,t.symbolizer=this.symbolizer,t.filename=this.filename,t.variable=this.variable,t}updateID(){return this.id=this.zoom+"#"+this.instance+"#"+this.name}toString(){return"["+cs.Tree.Zoom.toString(this.zoom)+"] "+this.name+": "+this.value}ev(t){return new cs.Tree.Rule(this.name,this.value.ev(t),this.index,this.filename)}},cs.Tree.Ruleset=class{constructor(t,e){this.is="ruleset",this.selectors=t,this.rules=e,this._lookups={}}ev(t){var e,n,r=new cs.Tree.Ruleset(this.selectors,this.rules.slice(0));for(r.root=this.root,t.frames.unshift(r),e=0,n;e<r.rules.length;e++)n=r.rules[e],r.rules[e]=n.ev?n.ev(t):n;return t.frames.shift(),r}match(t){return!t||0===t.length}variables(){return this._variables?this._variables:this._variables=this.rules.reduce((function(t,e){return e instanceof cs.Tree.Rule&&!0===e.variable&&(t[e.name]=e),t}),{})}variable(t){return this.variables()[t]}rulesets(){return this._rulesets?this._rulesets:this._rulesets=this.rules.filter((function(t){return t instanceof cs.Tree.Ruleset}))}find(t,e){e=e||this;var n,r=[],i=t.toString();return i in this._lookups?this._lookups[i]:(this.rulesets().forEach((function(i){if(i!==e)for(var o=0;o<i.selectors.length;o++)if(n=t.match(i.selectors[o]),n){t.elements.length>1?Array.prototype.push.apply(r,i.find(new cs.Tree.Selector(null,null,t.elements.slice(1)),e)):r.push(i);break}})),this._lookups[i]=r)}evZooms(t){for(var e=0;e<this.selectors.length;e++){for(var n=cs.Tree.Zoom.all,r=0;r<this.selectors[e].zoom.length;r++)n=this.selectors[e].zoom[r].ev(t).zoom;this.selectors[e].zoom=n}}flatten(t,e,n){var r,i,o=[];for(0===this.selectors.length&&(n.frames=n.frames.concat(this.rules)),this.evZooms(n),r=0;r<this.selectors.length;r++){var a=this.selectors[r];if(a.filters)if(e.length)for(i=0;i<e.length;i++){var s=e[i],l=s.filters.cloneWith(a.filters);if(null===l){if(s.zoom===a.zoom&&s.attachment===a.attachment&&s.elements.join()===a.elements.join()){o.push(s);continue}l=s.filters}else if(!l)continue;var u=Object.create(cs.Tree.Selector.prototype);u.filters=l,u.zoom=a.zoom,u.elements=s.elements.concat(a.elements),s.attachment&&a.attachment?u.attachment=s.attachment+"/"+a.attachment:u.attachment=a.attachment||s.attachment,u.conditions=s.conditions+a.conditions,u.index=a.index,o.push(u)}else o.push(a)}var c=[];for(r=0;r<this.rules.length;r++){var h=this.rules[r];h instanceof cs.Tree.Ruleset?h.flatten(t,o,n):h instanceof cs.Tree.Rule?c.push(h):h instanceof cs.Tree.Invalid&&n.error(h)}var d=!!c.length&&c[0].index;for(r=0;r<o.length;r++)!1!==d&&(o[r].index=d),t.push(new cs.Tree.Definition(o[r],c.slice()));return t}},cs.Tree.Selector=class{constructor(t,e,n,r,i,o){this.elements=n||[],this.attachment=r,this.filters=t||{},this.zoom="undefined"!==typeof e?e:cs.Tree.Zoom.all,this.conditions=i,this.index=o}specificity(){return this.elements.reduce((function(t,e){var n=e.specificity();return t[0]+=n[0],t[1]+=n[1],t}),[0,0,this.conditions,this.index])}},cs.Tree.URL=class{constructor(t,e){this.is="uri",this.value=t,this.paths=e}toString(){return this.value.toString()}ev(t){return new cs.Tree.URL(this.value.ev(t),this.paths)}},cs.Tree.Value=class{constructor(t){this.is="value",this.value=t}ev(t){return 1===this.value.length?this.value[0].ev(t):new cs.Tree.Value(this.value.map((function(e){return e.ev(t)})))}toJS(t){var e=this.ev(t),n=e.toString();return"color"===e.is||"uri"===e.is||"string"===e.is||"keyword"===e.is?n="'"+n+"'":"field"===e.is?n=n.replace(/\[(.*)\]/g,"attributes['_match1']"):e.value&&"object"===typeof e.value&&(n="["+n+"]"),"_value = "+n+";"}toString(t,e,n,r){return this.value.map((function(e){return e.toString(t,r)})).join(n||", ")}clone(){var t=Object.create(cs.Tree.Value.prototype);return Array.isArray(t)?t.value=this.value.slice():t.value=this.value,t.is=this.is,t}},cs.Tree.Variable=class{constructor(t,e,n){this.is="variable",this.name=t,this.index=e,this.filename=n}toString(){return this.name}ev(t){if(this._css)return this._css;var e=t.frames.filter(function(t){return t.name===this.name}.bind(this));return e.length?e[0].value.ev(t):(t.error({message:"variable "+this.name+" is undefined",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"})}},cs.Tree.Zoom=class{constructor(t,e,n){this.op=t,this.value=e,this.index=n}setZoom(t){return this.zoom=t,this}ev(t){var e=parseInt(this.value.ev(t).toString(),10);switch((e>cs.Tree.Zoom.maxZoom||e<0)&&t.error({message:"Only zoom levels between 0 and "+cs.Tree.Zoom.maxZoom+" supported.",index:this.index}),this.op){case"=":return this.zoom="zoom && zoom === "+e,this;case">":this.zoom="zoom && zoom > "+e;break;case">=":this.zoom="zoom && zoom >= "+e;break;case"<":this.zoom="zoom && zoom < "+e;break;case"<=":this.zoom="zoom && zoom <= "+e;break;default:break}return this}toString(){for(var t="",e=0;e<=cs.Tree.Zoom.maxZoom;e++)t+=this.zoom&1<<e?"X":".";return t}},cs.Tree.Zoom.all=23,cs.Tree.Zoom.maxZoom=22,cs.Tree.Zoom.ranges={0:1e9,1:5e8,2:2e8,3:1e8,4:5e7,5:25e6,6:125e5,7:65e5,8:3e6,9:15e5,10:75e4,11:4e5,12:2e5,13:1e5,14:5e4,15:25e3,16:12500,17:5e3,18:2500,19:1500,20:750,21:500,22:250,23:100};class ds{constructor(t){t=t||{},this.fill=!0,this.fillColor="#000000",this.fillOpacity=1,this.stroke=!1,this.strokeColor="#000000",this.strokeOpacity=1,this.strokeWidth=1,this.strokeLinecap="butt",this.strokeLineJoin="miter",this.strokeDashstyle="solid",this.pointRadius=6,this.shadowBlur=0,this.shadowColor="#000000",this.shadowOffsetX=0,this.shadowOffsetY=0,this.label="",this.labelRect=!1,this.fontColor="",this.fontSize=12,this.fontStyle="normal",this.fontVariant="normal",this.fontWeight="normal",this.fontFamily="arial,sans-serif",this.labelPosition="top",this.labelAlign="center",this.labelBaseline="middle",this.labelXOffset=0,this.labelYOffset=0,Wt.extend(this,t)}}class fs{constructor(){this.refOriginalPosition=[0,0],this.refDataID=null,this.isHoverByRefDataID=!1,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=!0,this.hoverable=!0,this.style=null,this.highlightStyle={},this.CLASS_NAME="SuperMap.Feature.ShapeParameters"}destroy(){this.refOriginalPosition=null,this.refDataID=null,this.isHoverByRefDataID=null,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=null,this.hoverable=null,this.style=null,this.highlightStyle=null}}class ps extends fs{constructor(t,e){super(t,e),this.x=isNaN(t)?0:t,this.y=isNaN(e)?0:e,this.r=6,this.CLASS_NAME="SuperMap.Feature.ShapeParameters.Point"}destroy(){this.x=null,this.y=null,this.r=null,super.destroy()}}class gs extends fs{constructor(t){super(t),this.pointList=t,this.CLASS_NAME="SuperMap.Feature.ShapeParameters.Line"}destroy(){this.pointList=null,super.destroy()}}class ms extends fs{constructor(t){super(t),this.pointList=t,this.holePolygonPointLists=null,this.CLASS_NAME="SuperMap.Feature.ShapeParameters.Polygon"}destroy(){this.pointList=null,this.holePolygonPointLists=null,super.destroy()}}class ys extends fs{constructor(t,e,n,r){super(t,e,n,r),this.x=isNaN(t)?0:t,this.y=isNaN(t)?0:e,this.width=isNaN(n)?0:n,this.height=isNaN(r)?0:r,this.CLASS_NAME="SuperMap.Feature.ShapeParameters.Rectangle"}destroy(){this.x=null,this.y=null,this.width=null,this.height=null,super.destroy()}}class vs extends fs{constructor(t,e,n,r,i,o,a){super(t,e,n,r,i,o,a),this.x=isNaN(t)?0:t,this.y=isNaN(e)?0:e,this.r=isNaN(n)?0:n,this.startAngle=isNaN(r)?0:r,this.endAngle=isNaN(i)?0:i,this.r0=isNaN(o)?0:o,this.clockWise=a,this.CLASS_NAME="SuperMap.Feature.ShapeParameters.Sector"}destroy(){this.x=null,this.y=null,this.r=null,this.startAngle=null,this.endAngle=null,this.r0=null,this.clockWise=null,super.destroy()}}class bs extends fs{constructor(t,e,n){super(t,e,n),this.x=t,this.y=e,this.text=n,this.CLASS_NAME="SuperMap.Feature.ShapeParameters.Label"}destroy(){this.x=null,this.y=null,this.text=null,super.destroy()}}class _s extends fs{constructor(t,e,n,r,i,o,a,s,l){super(t,e,n,r,i,o,a,s,l),this.x=t,this.y=e,this.image=n,this.width=r,this.height=i,this.sx=o,this.sy=a,this.sWidth=s,this.sHeight=l,this.CLASS_NAME="SuperMap.Feature.ShapeParameters.Image"}destroy(){this.x=null,this.y=null,this.image=null,this.width=null,this.height=null,this.sx=null,this.sy=null,this.sWidth=null,this.sHeight=null,super.destroy()}}class xs extends fs{constructor(t,e,n){super(t,e,n),this.x=isNaN(t)?0:t,this.y=isNaN(e)?0:e,this.r=isNaN(n)?0:n,this.CLASS_NAME="SuperMap.Feature.ShapeParameters.Circle"}destroy(){this.x=null,this.y=null,this.r=null,super.destroy()}}class ws{constructor(){this._handlers={},this.CLASS_NAME="SuperMap.LevelRenderer.Eventful"}destroy(){this._handlers=null}one(t,e,n){var r=this._handlers;return e&&t?(r[t]||(r[t]=[]),r[t].push({h:e,one:!0,ctx:n||this}),this):this}bind(t,e,n){var r=this._handlers;return e&&t?(r[t]||(r[t]=[]),r[t].push({h:e,one:!1,ctx:n||this}),this):this}unbind(t,e){var n=this._handlers;if(!t)return this._handlers={},this;if(e){if(n[t]){for(var r=[],i=0,o=n[t].length;i<o;i++)n[t][i]["h"]!=e&&r.push(n[t][i]);n[t]=r}n[t]&&0===n[t].length&&delete n[t]}else delete n[t];return this}dispatch(t){if(this._handlers[t]){var e=arguments,n=e.length;n>3&&(e=Array.prototype.slice.call(e,1));for(var r=this._handlers[t],i=r.length,o=0;o<i;){switch(n){case 1:r[o]["h"].call(r[o]["ctx"]);break;case 2:r[o]["h"].call(r[o]["ctx"],e[1]);break;case 3:r[o]["h"].call(r[o]["ctx"],e[1],e[2]);break;default:r[o]["h"].apply(r[o]["ctx"],e);break}r[o]["one"]?(r.splice(o,1),i--):o++}}return this}dispatchWithContext(t){if(this._handlers[t]){var e=arguments,n=e.length;n>4&&(e=Array.prototype.slice.call(e,1,e.length-1));for(var r=e[e.length-1],i=this._handlers[t],o=i.length,a=0;a<o;){switch(n){case 1:i[a]["h"].call(r);break;case 2:i[a]["h"].call(r,e[1]);break;case 3:i[a]["h"].call(r,e[1],e[2]);break;default:i[a]["h"].apply(r,e);break}i[a]["one"]?(i.splice(a,1),o--):a++}}return this}}class Ss{constructor(){this.ArrayCtor="undefined"===typeof Float32Array?Array:Float32Array,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Vector"}create(t,e){var n=this.ArrayCtor,r=new n(2);return r[0]=t||0,r[1]=e||0,r}copy(t,e){return t[0]=e[0],t[1]=e[1],t}set(t,e,n){return t[0]=e,t[1]=n,t}add(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}scaleAndAdd(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}sub(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}len(t){return Math.sqrt(this.lenSquare(t))}lenSquare(t){return t[0]*t[0]+t[1]*t[1]}mul(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}div(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}dot(t,e){return t[0]*e[0]+t[1]*e[1]}scale(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}normalize(t,e){var n=this.len(e);return 0===n?(t[0]=0,t[1]=0):(t[0]=e[0]/n,t[1]=e[1]/n),t}distance(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}distanceSquare(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}negate(t,e){return t[0]=-e[0],t[1]=-e[1],t}lerp(t,e,n,r){return t[0]=e[0]+r*(n[0]-e[0]),t[1]=e[1]+r*(n[1]-e[1]),t}applyTransform(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}min(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}max(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}length(t){return this.len(t)}lengthSquare(t){return this.lenSquare(t)}dist(t,e){return this.distance(t,e)}distSquare(t,e){return this.distanceSquare(t,e)}}class Es{constructor(){this.vector=new Ss,this.EPSILON=1e-4,this.THREE_SQRT=Math.sqrt(3),this.ONE_THIRD=1/3,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Curve"}isAroundZero(t){return t>-this.EPSILON&&t<this.EPSILON}isNotAroundZero(t){return t>this.EPSILON||t<-this.EPSILON}cubicAt(t,e,n,r,i){var o=1-i;return o*o*(o*t+3*i*e)+i*i*(i*r+3*o*n)}cubicDerivativeAt(t,e,n,r,i){var o=1-i;return 3*(((e-t)*o+2*(n-e)*i)*o+(r-n)*i*i)}cubicRootAt(t,e,n,r,i,o){var a=r+3*(e-n)-t,s=3*(n-2*e+t),l=3*(e-t),u=t-i,c=s*s-3*a*l,h=s*l-9*a*u,d=l*l-3*s*u,f=0;if(this.isAroundZero(c)&&this.isAroundZero(h))if(this.isAroundZero(s))o[0]=0;else{let t=-l/s;t>=0&&t<=1&&(o[f++]=t)}else{var p=h*h-4*c*d;if(this.isAroundZero(p)){var g=h/c;let t=-s/a+g,e=-g/2;t>=0&&t<=1&&(o[f++]=t),e>=0&&e<=1&&(o[f++]=e)}else if(p>0){let t=Math.sqrt(p),e=c*s+1.5*a*(-h+t),n=c*s+1.5*a*(-h-t);e=e<0?-Math.pow(-e,this.ONE_THIRD):Math.pow(e,this.ONE_THIRD),n=n<0?-Math.pow(-n,this.ONE_THIRD):Math.pow(n,this.ONE_THIRD);let r=(-s-(e+n))/(3*a);r>=0&&r<=1&&(o[f++]=r)}else{var m=(2*c*s-3*a*h)/(2*Math.sqrt(c*c*c)),y=Math.acos(m)/3,v=Math.sqrt(c),b=Math.cos(y);let t=(-s-2*v*b)/(3*a),e=(-s+v*(b+this.THREE_SQRT*Math.sin(y)))/(3*a),n=(-s+v*(b-this.THREE_SQRT*Math.sin(y)))/(3*a);t>=0&&t<=1&&(o[f++]=t),e>=0&&e<=1&&(o[f++]=e),n>=0&&n<=1&&(o[f++]=n)}}return f}cubicExtrema(t,e,n,r,i){var o=6*n-12*e+6*t,a=9*e+3*r-3*t-9*n,s=3*e-3*t,l=0;if(this.isAroundZero(a)){if(this.isNotAroundZero(o)){let t=-s/o;t>=0&&t<=1&&(i[l++]=t)}}else{var u=o*o-4*a*s;if(this.isAroundZero(u))i[0]=-o/(2*a);else if(u>0){let t=Math.sqrt(u),e=(-o+t)/(2*a),n=(-o-t)/(2*a);e>=0&&e<=1&&(i[l++]=e),n>=0&&n<=1&&(i[l++]=n)}}return l}cubicSubdivide(t,e,n,r,i,o){var a=(e-t)*i+t,s=(n-e)*i+e,l=(r-n)*i+n,u=(s-a)*i+a,c=(l-s)*i+s,h=(c-u)*i+u;o[0]=t,o[1]=a,o[2]=u,o[3]=h,o[4]=h,o[5]=c,o[6]=l,o[7]=r}cubicProjectPoint(t,e,n,r,i,o,a,s,l,u,c){var h,d=this.vector.create(),f=this.vector.create(),p=this.vector.create(),g=.005,m=1/0;d[0]=l,d[1]=u;for(let y=0;y<1;y+=.05){f[0]=this.cubicAt(t,n,i,a,y),f[1]=this.cubicAt(e,r,o,s,y);let l=this.vector.distSquare(d,f);l<m&&(h=y,m=l)}m=1/0;for(let y=0;y<32;y++){if(g<this.EPSILON)break;let l=h-g,u=h+g;f[0]=this.cubicAt(t,n,i,a,l),f[1]=this.cubicAt(e,r,o,s,l);let c=this.vector.distSquare(f,d);if(l>=0&&c<m)h=l,m=c;else{p[0]=this.cubicAt(t,n,i,a,u),p[1]=this.cubicAt(e,r,o,s,u);let l=this.vector.distSquare(p,d);u<=1&&l<m?(h=u,m=l):g*=.5}}return c&&(c[0]=this.cubicAt(t,n,i,a,h),c[1]=this.cubicAt(e,r,o,s,h)),Math.sqrt(m)}quadraticAt(t,e,n,r){var i=1-r;return i*(i*t+2*r*e)+r*r*n}quadraticDerivativeAt(t,e,n,r){return 2*((1-r)*(e-t)+r*(n-e))}quadraticRootAt(t,e,n,r,i){var o=t-2*e+n,a=2*(e-t),s=t-r,l=0;if(this.isAroundZero(o)){if(this.isNotAroundZero(a)){var u=-s/a;u>=0&&u<=1&&(i[l++]=u)}}else{var c=a*a-4*o*s;if(this.isAroundZero(c)){let t=-a/(2*o);t>=0&&t<=1&&(i[l++]=t)}else if(c>0){let t=Math.sqrt(c),e=(-a+t)/(2*o),n=(-a-t)/(2*o);e>=0&&e<=1&&(i[l++]=e),n>=0&&n<=1&&(i[l++]=n)}}return l}quadraticExtremum(t,e,n){var r=t+n-2*e;return 0===r?.5:(t-e)/r}quadraticProjectPoint(t,e,n,r,i,o,a,s,l){var u,c=this.vector.create(),h=this.vector.create(),d=this.vector.create(),f=.005,p=1/0;c[0]=a,c[1]=s;for(let g=0;g<1;g+=.05){h[0]=this.quadraticAt(t,n,i,g),h[1]=this.quadraticAt(e,r,o,g);let a=this.vector.distSquare(c,h);a<p&&(u=g,p=a)}p=1/0;for(let g=0;g<32;g++){if(f<this.EPSILON)break;let a=u-f,s=u+f;h[0]=this.quadraticAt(t,n,i,a),h[1]=this.quadraticAt(e,r,o,a);let l=this.vector.distSquare(h,c);if(a>=0&&l<p)u=a,p=l;else{d[0]=this.quadraticAt(t,n,i,s),d[1]=this.quadraticAt(e,r,o,s);let a=this.vector.distSquare(d,c);s<=1&&a<p?(u=s,p=a):f*=.5}}return l&&(l[0]=this.quadraticAt(t,n,i,u),l[1]=this.quadraticAt(e,r,o,u)),Math.sqrt(p)}}class Cs{constructor(){this.util=new Ka,this.curve=new Es,this._ctx=null,this._textWidthCache={},this._textHeightCache={},this._textWidthCacheCounter=0,this._textHeightCacheCounter=0,this.TEXT_CACHE_MAX=5e3,this.PI2=2*Math.PI,this.roots=[-1,-1,-1],this.extrema=[-1,-1],this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Area"}normalizeRadian(t){return t%=this.PI2,t<0&&(t+=this.PI2),t}isInside(t,e,n,r){if(!e||!t)return!1;var i=t.type;this._ctx=this._ctx||this.util.getContext();var o=this._mathMethod(t,e,n,r);if("undefined"!=typeof o)return o;if(t.buildPath&&this._ctx.isPointInPath)return this._buildPathMethod(t,this._ctx,e,n,r);switch(i){case"ellipse":case"smicellipse":return!0;case"trochoid":var a="out"==e.location?e.r1+e.r2+e.d:e.r1-e.r2+e.d;return this.isInsideCircle(e,n,r,a);case"rose":return this.isInsideCircle(e,n,r,e.maxr);default:return!1}}_mathMethod(t,e,n,r){var i=t.type;switch(i){case"bezier-curve":return"undefined"===typeof e.cpX2?this.isInsideQuadraticStroke(e.xStart,e.yStart,e.cpX1,e.cpY1,e.xEnd,e.yEnd,e.lineWidth,n,r):this.isInsideCubicStroke(e.xStart,e.yStart,e.cpX1,e.cpY1,e.cpX2,e.cpY2,e.xEnd,e.yEnd,e.lineWidth,n,r);case"line":return this.isInsideLine(e.xStart,e.yStart,e.xEnd,e.yEnd,e.lineWidth,n,r);case"broken-line":return this.isInsideBrokenLine(e.pointList,e.lineWidth,n,r);case"smicbroken-line":{let i=n,o=r;return t.refOriginalPosition&&(i=n-t.refOriginalPosition[0],o=r-t.refOriginalPosition[1]),this.isInsideBrokenLine(e.pointList,e.lineWidth,i,o)}case"ring":return this.isInsideRing(e.x,e.y,e.r0,e.r,n,r);case"smicring":{let i=e.x,o=e.y;return t.refOriginalPosition&&(i=e.x+t.refOriginalPosition[0],o=e.y+t.refOriginalPosition[1]),this.isInsideRing(i,o,e.r0,e.r,n,r)}case"circle":return this.isInsideCircle(e.x,e.y,e.r,n,r);case"smicpoint":{let i=n,o=r;return t.refOriginalPosition&&(i=n-t.refOriginalPosition[0],o=r-t.refOriginalPosition[1]),this.isInsideCircle(e.x,e.y,e.r,i,o)}case"sector":{let t=e.startAngle*Math.PI/180,i=e.endAngle*Math.PI/180;return e.clockWise||(t=-t,i=-i),this.isInsideSector(e.x,e.y,e.r0,e.r,t,i,!e.clockWise,n,r)}case"smicsector":{let i=e.startAngle*Math.PI/180,o=e.endAngle*Math.PI/180;e.clockWise||(i=-i,o=-o);let a=e.x,s=e.y;return t.refOriginalPosition&&(a=e.x+t.refOriginalPosition[0],s=e.y+t.refOriginalPosition[1]),this.isInsideSector(a,s,e.r0,e.r,i,o,!e.clockWise,n,r)}case"path":return this.isInsidePath(e.pathArray,Math.max(e.lineWidth,5),e.brushType,n,r);case"polygon":case"star":case"smicstar":case"isogon":case"smicisogon":return this.isInsidePolygon(e.pointList,n,r);case"smicpolygon":{let i=n,d=r;if(t.refOriginalPosition&&(i=n-t.refOriginalPosition[0],d=r-t.refOriginalPosition[1]),t.holePolygonPointLists&&t.holePolygonPointLists.length>0){for(var o=this.isInsidePolygon(e.pointList,i,d),a=t.holePolygonPointLists,s=!1,l=0,u=a.length;l<u;l++){var c=a[l],h=this.isInsidePolygon(c,i,d);!0===h&&(s=!0)}return!0===o&&!1===s}return this.isInsidePolygon(e.pointList,i,d)}case"text":var d=e.__rect||t.getRect(e);return this.isInsideRect(d.x,d.y,d.width,d.height,n,r);case"smictext":var f=t.getTextBackground(e);return this.isInsidePolygon(f,n,r);case"rectangle":case"image":return this.isInsideRect(e.x,e.y,e.width,e.height,n,r);case"smicimage":{let i=e.x,o=e.y;return t.refOriginalPosition&&(i=e.x+t.refOriginalPosition[0],o=e.y+t.refOriginalPosition[1]),this.isInsideRect(i,o,e.width,e.height,n,r)}}}_buildPathMethod(t,e,n,r,i){return e.beginPath(),t.buildPath(e,n),e.closePath(),e.isPointInPath(r,i)}isOutside(t,e,n,r){return!this.isInside(t,e,n,r)}isInsideLine(t,e,n,r,i,o,a){if(0===i)return!1;var s=Math.max(i,5),l=0,u=0;if(a>e+s&&a>r+s||a<e-s&&a<r-s||o>t+s&&o>n+s||o<t-s&&o<n-s)return!1;if(t===n)return Math.abs(o-t)<=s/2;l=(e-r)/(t-n),u=(t*r-n*e)/(t-n);var c=l*o-a+u,h=c*c/(l*l+1);return h<=s/2*s/2}isInsideCubicStroke(t,e,n,r,i,o,a,s,l,u,c){if(0===l)return!1;var h=Math.max(l,5);if(c>e+h&&c>r+h&&c>o+h&&c>s+h||c<e-h&&c<r-h&&c<o-h&&c<s-h||u>t+h&&u>n+h&&u>i+h&&u>a+h||u<t-h&&u<n-h&&u<i-h&&u<a-h)return!1;var d=this.curve.cubicProjectPoint(t,e,n,r,i,o,a,s,u,c,null);return d<=h/2}isInsideQuadraticStroke(t,e,n,r,i,o,a,s,l){if(0===a)return!1;var u=Math.max(a,5);if(l>e+u&&l>r+u&&l>o+u||l<e-u&&l<r-u&&l<o-u||s>t+u&&s>n+u&&s>i+u||s<t-u&&s<n-u&&s<i-u)return!1;var c=this.curve.quadraticProjectPoint(t,e,n,r,i,o,s,l,null);return c<=u/2}isInsideArcStroke(t,e,n,r,i,o,a,s,l){var u=this.PI2;if(0===a)return!1;var c=Math.max(a,5);s-=t,l-=e;var h=Math.sqrt(s*s+l*l);if(h-c>n||h+c<n)return!1;if(Math.abs(r-i)>=u)return!0;if(o){var d=r;r=this.normalizeRadian(i),i=this.normalizeRadian(d)}else r=this.normalizeRadian(r),i=this.normalizeRadian(i);r>i&&(i+=u);var f=Math.atan2(l,s);return f<0&&(f+=u),f>=r&&f<=i||f+u>=r&&f+u<=i}isInsideBrokenLine(t,e,n,r){for(var i=Math.max(e,10),o=0,a=t.length-1;o<a;o++){var s=t[o][0],l=t[o][1],u=t[o+1][0],c=t[o+1][1];if(this.isInsideLine(s,l,u,c,i,n,r))return!0}return!1}isInsideRing(t,e,n,r,i,o){var a=(i-t)*(i-t)+(o-e)*(o-e);return a<r*r&&a>n*n}isInsideRect(t,e,n,r,i,o){return i>=t&&i<=t+n&&o>=e&&o<=e+r}isInsideCircle(t,e,n,r,i){return(r-t)*(r-t)+(i-e)*(i-e)<n*n}isInsideSector(t,e,n,r,i,o,a,s,l){return this.isInsideArcStroke(t,e,(n+r)/2,i,o,a,r-n,s,l)}isInsidePolygon(t,e,n){for(var r=t.length,i=0,o=0,a=r-1;o<r;o++){var s=t[a][0],l=t[a][1],u=t[o][0],c=t[o][1];i+=this.windingLine(s,l,u,c,e,n),a=o}return 0!==i}windingLine(t,e,n,r,i,o){if(o>e&&o>r||o<e&&o<r)return 0;if(r==e)return 0;var a=r<e?1:-1,s=(o-e)/(r-e),l=s*(n-t)+t;return l>i?a:0}swapExtrema(){var t=this.extrema[0];this.extrema[0]=this.extrema[1],this.extrema[1]=t}windingCubic(t,e,n,r,i,o,a,s,l,u){var c=this.curve,h=this.roots,d=this.extrema;if(u>e&&u>r&&u>o&&u>s||u<e&&u<r&&u<o&&u<s)return 0;var f=c.cubicRootAt(e,r,o,s,u,h);if(0===f)return 0;for(var p,g,m=0,y=-1,v=0;v<f;v++){var b=h[v],_=c.cubicAt(t,n,i,a,b);_<l||(y<0&&(y=c.cubicExtrema(e,r,o,s,d),d[1]<d[0]&&y>1&&this.swapExtrema(),p=c.cubicAt(e,r,o,s,d[0]),y>1&&(g=c.cubicAt(e,r,o,s,d[1]))),2==y?b<d[0]?m+=p<e?1:-1:b<d[1]?m+=g<p?1:-1:m+=s<g?1:-1:b<d[0]?m+=p<e?1:-1:m+=s<p?1:-1)}return m}windingQuadratic(t,e,n,r,i,o,a,s){var l=this.curve,u=this.roots;if(s>e&&s>r&&s>o||s<e&&s<r&&s<o)return 0;var c=l.quadraticRootAt(e,r,o,s,u);if(0===c)return 0;var h=l.quadraticExtremum(e,r,o);if(h>=0&&h<=1){var d=0,f=l.quadraticAt(e,r,o,h);for(let r=0;r<c;r++){let s=l.quadraticAt(t,n,i,u[r]);s>a||(u[r]<h?d+=f<e?1:-1:d+=o<f?1:-1)}return d}{let r=l.quadraticAt(t,n,i,u[0]);return r>a?0:o<e?1:-1}}windingArc(t,e,n,r,i,o,a,s){var l=this.roots,u=this.PI2;if(s-=e,s>n||s<-n)return 0;let c=Math.sqrt(n*n-s*s);if(l[0]=-c,l[1]=c,Math.abs(r-i)>=u){r=0,i=u;var h=o?1:-1;return a>=l[0]+t&&a<=l[1]+t?h:0}if(o){let t=r;r=this.normalizeRadian(i),i=this.normalizeRadian(t)}else r=this.normalizeRadian(r),i=this.normalizeRadian(i);r>i&&(i+=u);var d=0;for(let p=0;p<2;p++){var f=l[p];if(f+t>a){let t=Math.atan2(s,f),e=o?1:-1;t<0&&(t=u+t),(t>=r&&t<=i||t+u>=r&&t+u<=i)&&(t>Math.PI/2&&t<1.5*Math.PI&&(e=-e),d+=e)}}return d}isInsidePath(t,e,n,r,i){var o=0,a=0,s=0,l=0,u=0,c=!0,h=!0;n=n||"fill";for(var d="stroke"===n||"both"===n,f="fill"===n||"both"===n,p=0;p<t.length;p++){var g=t[p],m=g.points;if(c||"M"===g.command){if(p>0&&(f&&(o+=this.windingLine(a,s,l,u,r,i)),0!==o))return!0;l=m[m.length-2],u=m[m.length-1],c=!1,h&&"A"!==g.command&&(h=!1,a=l,s=u)}switch(g.command){case"M":a=m[0],s=m[1];break;case"L":if(d&&this.isInsideLine(a,s,m[0],m[1],e,r,i))return!0;f&&(o+=this.windingLine(a,s,m[0],m[1],r,i)),a=m[0],s=m[1];break;case"C":if(d&&this.isInsideCubicStroke(a,s,m[0],m[1],m[2],m[3],m[4],m[5],e,r,i))return!0;f&&(o+=this.windingCubic(a,s,m[0],m[1],m[2],m[3],m[4],m[5],r,i)),a=m[4],s=m[5];break;case"Q":if(d&&this.isInsideQuadraticStroke(a,s,m[0],m[1],m[2],m[3],e,r,i))return!0;f&&(o+=this.windingQuadratic(a,s,m[0],m[1],m[2],m[3],r,i)),a=m[2],s=m[3];break;case"A":var y=m[0],v=m[1],b=m[2],_=m[3],x=m[4],w=m[5],S=Math.cos(x)*b+y,E=Math.sin(x)*_+v;h?(h=!1,l=S,u=E):o+=this.windingLine(a,s,S,E);var C=(r-y)*_/b+y;if(d&&this.isInsideArcStroke(y,v,_,x,x+w,1-m[7],e,C,i))return!0;f&&(o+=this.windingArc(y,v,_,x,x+w,1-m[7],C,i)),a=Math.cos(x+w)*b+y,s=Math.sin(x+w)*_+v;break;case"z":if(d&&this.isInsideLine(a,s,l,u,e,r,i))return!0;c=!0;break}}return f&&(o+=this.windingLine(a,s,l,u,r,i)),0!==o}getTextWidth(t,e){var n=t+":"+e;if(this._textWidthCache[n])return this._textWidthCache[n];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),e&&(this._ctx.font=e),t=(t+"").split("\n");for(var r=0,i=0,o=t.length;i<o;i++)r=Math.max(this._ctx.measureText(t[i]).width,r);return this._ctx.restore(),this._textWidthCache[n]=r,++this._textWidthCacheCounter>this.TEXT_CACHE_MAX&&(this._textWidthCacheCounter=0,this._textWidthCache={}),r}getTextHeight(t,e){var n=t+":"+e;if(this._textHeightCache[n])return this._textHeightCache[n];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),e&&(this._ctx.font=e),t=(t+"").split("\n");var r=(this._ctx.measureText("ZH").width+2)*t.length;return this._ctx.restore(),this._textHeightCache[n]=r,++this._textHeightCacheCounter>this.TEXT_CACHE_MAX&&(this._textHeightCacheCounter=0,this._textHeightCache={}),r}}class Ms{constructor(){3===arguments.length&&this.computeBoundingBox(arguments),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.ComputeBoundingBox"}computeBoundingBox(t,e,n){if(0!==t.length){for(var r=t[0][0],i=t[0][0],o=t[0][1],a=t[0][1],s=1;s<t.length;s++){var l=t[s];l[0]<r&&(r=l[0]),l[0]>i&&(i=l[0]),l[1]<o&&(o=l[1]),l[1]>a&&(a=l[1])}e[0]=r,e[1]=o,n[0]=i,n[1]=a}}cubeBezier(t,e,n,r,i,o){var a=new Es,s=[];a.cubicExtrema(t[0],e[0],n[0],r[0],s);for(let f=0;f<s.length;f++)s[f]=a.cubicAt(t[0],e[0],n[0],r[0],s[f]);var l=[];a.cubicExtrema(t[1],e[1],n[1],r[1],l);for(let f=0;f<l.length;f++)l[f]=a.cubicAt(t[1],e[1],n[1],r[1],l[f]);s.push(t[0],r[0]),l.push(t[1],r[1]);var u=Math.min.apply(null,s),c=Math.max.apply(null,s),h=Math.min.apply(null,l),d=Math.max.apply(null,l);i[0]=u,i[1]=h,o[0]=c,o[1]=d}quadraticBezier(t,e,n,r,i){var o=new Es,a=o.quadraticExtremum(t[0],e[0],n[0]),s=o.quadraticExtremum(t[1],e[1],n[1]);a=Math.max(Math.min(a,1),0),s=Math.max(Math.min(s,1),0);var l=1-a,u=1-s,c=l*l*t[0]+2*l*a*e[0]+a*a*n[0],h=l*l*t[1]+2*l*a*e[1]+a*a*n[1],d=u*u*t[0]+2*u*s*e[0]+s*s*n[0],f=u*u*t[1]+2*u*s*e[1]+s*s*n[1];r[0]=Math.min(t[0],n[0],c,d),r[1]=Math.min(t[1],n[1],h,f),i[0]=Math.max(t[0],n[0],c,d),i[1]=Math.max(t[1],n[1],h,f)}arc(t,e,n,r,i,o,a,s){var l=new Ss,u=l.create(),c=l.create(),h=l.create();if(u[0]=Math.cos(r)*n+t,u[1]=Math.sin(r)*n+e,c[0]=Math.cos(i)*n+t,c[1]=Math.sin(i)*n+e,l.min(a,u,c),l.max(s,u,c),r%=2*Math.PI,r<0&&(r+=2*Math.PI),i%=2*Math.PI,i<0&&(i+=2*Math.PI),r>i&&!o?i+=2*Math.PI:r<i&&o&&(r+=2*Math.PI),o){var d=i;i=r,r=d}for(var f=0;f<i;f+=Math.PI/2)f>r&&(h[0]=Math.cos(f)*n+t,h[1]=Math.sin(f)*n+e,l.min(a,h,a),l.max(s,h,s))}}class Ts{constructor(){this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Env";var t=this;function e(e){var n=t.os={},r=t.browser={},i=e.match(/Web[kK]it[\/]{0,1}([\d.]+)/),o=e.match(/(Android);?[\s\/]+([\d.]+)?/),a=e.match(/(iPad).*OS\s([\d_]+)/),s=e.match(/(iPod)(.*OS\s([\d_]+))?/),l=!a&&e.match(/(iPhone\sOS)\s([\d_]+)/),u=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),c=u&&e.match(/TouchPad/),h=e.match(/Kindle\/([\d.]+)/),d=e.match(/Silk\/([\d._]+)/),f=e.match(/(BlackBerry).*Version\/([\d.]+)/),p=e.match(/(BB10).*Version\/([\d.]+)/),g=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),m=e.match(/PlayBook/),y=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),v=e.match(/Firefox\/([\d.]+)/),b=e.match(/MSIE ([\d.]+)/),_=i&&e.match(/Mobile\//)&&!y,x=e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)&&!y;return(r.webkit=!!i)&&(r.version=i[1]),o&&(n.android=!0,n.version=o[2]),l&&!s&&(n.ios=n.iphone=!0,n.version=l[2].replace(/_/g,".")),a&&(n.ios=n.ipad=!0,n.version=a[2].replace(/_/g,".")),s&&(n.ios=n.ipod=!0,n.version=s[3]?s[3].replace(/_/g,"."):null),u&&(n.webos=!0,n.version=u[2]),c&&(n.touchpad=!0),f&&(n.blackberry=!0,n.version=f[2]),p&&(n.bb10=!0,n.version=p[2]),g&&(n.rimtabletos=!0,n.version=g[2]),m&&(r.playbook=!0),h&&(n.kindle=!0,n.version=h[1]),d&&(r.silk=!0,r.version=d[1]),!d&&n.android&&e.match(/Kindle Fire/)&&(r.silk=!0),y&&(r.chrome=!0,r.version=y[1]),v&&(r.firefox=!0,r.version=v[1]),b&&(r.ie=!0,r.version=b[1]),_&&(e.match(/Safari/)||n.ios)&&(r.safari=!0),x&&(r.webview=!0),b&&(r.ie=!0,r.version=b[1]),n.tablet=!!(a||m||o&&!e.match(/Mobile/)||v&&e.match(/Tablet/)||b&&!e.match(/Phone/)&&e.match(/Touch/)),n.phone=!(n.tablet||n.ipod||!(o||l||u||f||p||y&&e.match(/Android/)||y&&e.match(/CriOS\/([\d.]+)/)||v&&e.match(/Mobile/)||b&&e.match(/Touch/))),{browser:r,os:n,canvasSupported:!!document.createElement("canvas").getContext}}return e(navigator.userAgent)}destory(){return!0}}class As{constructor(){this.stop="function"===typeof window.addEventListener?function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0}:function(t){t.returnValue=!1,t.cancelBubble=!0},this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Event"}getX(t){return"undefined"!=typeof t.zrenderX&&t.zrenderX||"undefined"!=typeof t.offsetX&&t.offsetX||"undefined"!=typeof t.layerX&&t.layerX||"undefined"!=typeof t.clientX&&t.clientX}getY(t){return"undefined"!=typeof t.zrenderY&&t.zrenderY||"undefined"!=typeof t.offsetY&&t.offsetY||"undefined"!=typeof t.layerY&&t.layerY||"undefined"!=typeof t.clientY&&t.clientY}getDelta(t){return"undefined"!=typeof t.zrenderDelta&&t.zrenderDelta||"undefined"!=typeof t.wheelDelta&&t.wheelDelta||"undefined"!=typeof t.detail&&-t.detail}}class Os{constructor(){this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Http"}get(t,e,n){if("object"===typeof t){var r=t;t=r.url,e=r.onsuccess,n=r.onerror}var i=window.XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");i.open("GET",t,!0),i.onreadystatechange=function(){4==i.readyState&&(i.status>=200&&i.status<300||304===i.status?e&&e(i.responseText):n&&n(),i.onreadystatechange=new Function,i=null)},i.send(null)}}class ks{}ks.EVENT={RESIZE:"resize",CLICK:"click",DBLCLICK:"dblclick",MOUSEWHEEL:"mousewheel",MOUSEMOVE:"mousemove",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",GLOBALOUT:"globalout",DRAGSTART:"dragstart",DRAGEND:"dragend",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",touchClickDelay:300},ks.catchBrushException=!1,ks.debugMode=0;class Is{constructor(){return this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Log",function(){if(0!==+ks.debugMode)if(1===+ks.debugMode)for(let t in arguments)throw new Error(arguments[t]);else if(+ks.debugMode>1)for(let t in arguments)console.log(arguments[t])}}destory(){return!0}}class Ps{constructor(){this._radians=window.Math.PI/180,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Math"}sin(t,e){return window.Math.sin(e?t*this._radians:t)}cos(t,e){return window.Math.cos(e?t*this._radians:t)}degreeToRadian(t){return t*this._radians}radianToDegree(t){return t/this._radians}}class Ls{constructor(){this.ArrayCtor="undefined"===typeof Float32Array?Array:Float32Array,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Matrix"}create(){var t=this.ArrayCtor,e=new t(6);return this.identity(e),e}identity(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}copy(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}mul(t,e,n){return t[0]=e[0]*n[0]+e[2]*n[1],t[1]=e[1]*n[0]+e[3]*n[1],t[2]=e[0]*n[2]+e[2]*n[3],t[3]=e[1]*n[2]+e[3]*n[3],t[4]=e[0]*n[4]+e[2]*n[5]+e[4],t[5]=e[1]*n[4]+e[3]*n[5]+e[5],t}translate(t,e,n){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+n[0],t[5]=e[5]+n[1],t}rotate(t,e,n){var r=e[0],i=e[2],o=e[4],a=e[1],s=e[3],l=e[5],u=Math.sin(n),c=Math.cos(n);return t[0]=r*c+a*u,t[1]=-r*u+a*c,t[2]=i*c+s*u,t[3]=-i*u+c*s,t[4]=c*o+u*l,t[5]=c*l-u*o,t}scale(t,e,n){var r=n[0],i=n[1];return t[0]=e[0]*r,t[1]=e[1]*i,t[2]=e[2]*r,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*i,t}invert(t,e){var n=e[0],r=e[2],i=e[4],o=e[1],a=e[3],s=e[5],l=n*a-o*r;return l?(l=1/l,t[0]=a*l,t[1]=-o*l,t[2]=-r*l,t[3]=n*l,t[4]=(r*s-a*i)*l,t[5]=(o*i-n*s)*l,t):null}mulVector(t,e,n){var r=e[0],i=e[2],o=e[4],a=e[1],s=e[3],l=e[5];return t[0]=n[0]*r+n[1]*i+o,t[1]=n[0]*a+n[1]*s+l,t}}class Ns{static SUtil_smoothBezier(t,e,n,r,i){i&&2===i.length||(i=[0,0]);var o,a,s=i,l=[],u=[],c=[],h=[],d=!!r;if(d){o=[1/0,1/0],a=[-1/0,-1/0];let e=t.length;for(let n=0;n<e;n++)Ns.Util_vector.min(o,o,[t[n][0]+s[0],t[n][1]+s[1]]),Ns.Util_vector.max(a,a,[t[n][0]+s[0],t[n][1]+s[1]]);Ns.Util_vector.min(o,o,r[0]),Ns.Util_vector.max(a,a,r[1])}let f=t.length;for(let p=0;p<f;p++){let r,i,g=[t[p][0]+s[0],t[p][1]+s[1]];if(n)r=[t[p?p-1:f-1][0]+s[0],t[p?p-1:f-1][1]+s[1]],i=[t[(p+1)%f][0]+s[0],t[(p+1)%f][1]+s[1]];else{if(0===p||p===f-1){l.push([t[p][0]+s[0],t[p][1]+s[1]]);continue}r=[t[p-1][0]+s[0],t[p-1][1]+s[1]],i=[t[p+1][0]+s[0],t[p+1][1]+s[1]]}Ns.Util_vector.sub(u,i,r),Ns.Util_vector.scale(u,u,e);let m=Ns.Util_vector.distance(g,r),y=Ns.Util_vector.distance(g,i),v=m+y;0!==v&&(m/=v,y/=v),Ns.Util_vector.scale(c,u,-m),Ns.Util_vector.scale(h,u,y);let b=Ns.Util_vector.add([],g,c),_=Ns.Util_vector.add([],g,h);d&&(Ns.Util_vector.max(b,b,o),Ns.Util_vector.min(b,b,a),Ns.Util_vector.max(_,_,o),Ns.Util_vector.min(_,_,a)),l.push(b),l.push(_)}return n&&l.push(l.shift()),l}static SUtil_smoothSpline(t,e,n,r){r&&2===r.length||(r=[0,0]);var i=r,o=t.length,a=[],s=0;for(let c=1;c<o;c++)s+=Ns.Util_vector.distance([t[c-1][0]+i[0],t[c-1][1]+i[1]],[t[c][0]+i[0],t[c][1]+i[1]]);var l=s/5;l=l<o?o:l;for(let c=0;c<l;c++){let n,r,s,h=c/(l-1)*(e?o:o-1),d=Math.floor(h),f=h-d,p=[t[d%o][0]+i[0],t[d%o][1]+i[1]];e?(n=[t[(d-1+o)%o][0]+i[0],t[(d-1+o)%o][1]+i[1]],r=[t[(d+1)%o][0]+i[0],t[(d+1)%o][1]+i[1]],s=[t[(d+2)%o][0]+i[0],t[(d+2)%o][1]+i[1]]):(n=[t[0===d?d:d-1][0]+i[0],t[0===d?d:d-1][1]+i[1]],r=[t[d>o-2?o-1:d+1][0]+i[0],t[d>o-2?o-1:d+1][1]+i[1]],s=[t[d>o-3?o-1:d+2][0]+i[0],t[d>o-3?o-1:d+2][1]+i[1]]);let g=f*f,m=f*g;a.push([u(n[0],p[0],r[0],s[0],f,g,m),u(n[1],p[1],r[1],s[1],f,g,m)])}return a;function u(t,e,n,r,i,o,a){var s=.5*(n-t),l=.5*(r-e);return(2*(e-n)+s+l)*a+(-3*(e-n)-2*s-l)*o+s*i+e}}static SUtil_dashedLineTo(t,e,n,r,i,o,a){var s=[5,5];if(o="number"!=typeof o?5:o,t.setLineDash)return s[0]=o,s[1]=o,a&&a instanceof Array?t.setLineDash(a):t.setLineDash(s),t.moveTo(e,n),void t.lineTo(r,i);var l=r-e,u=i-n,c=Math.floor(Math.sqrt(l*l+u*u)/o);l/=c,u/=c;for(var h=!0,d=0;d<c;++d)h?t.moveTo(e,n):t.lineTo(e,n),h=!h,e+=l,n+=u;t.lineTo(r,i)}}Ns.Util_area=new Cs,Ns.Util_color=new Qa,Ns.Util_computeBoundingBox=new Ms,Ns.Util_curve=new Es,Ns.Util_env=new Ts,Ns.Util_event=new As,Ns.Util_http=new Os,Ns.Util_log=new Is,Ns.Util_math=new Ps,Ns.Util_matrix=new Ls,Ns.Util=new Ka,Ns.Util_vector=new Ss;class Rs{constructor(){this.position=[0,0],this.rotation=[0,0,0],this.scale=[1,1,0,0],this.needLocalTransform=!1,this.needTransform=!1,this.CLASS_NAME="SuperMap.LevelRenderer.Transformable",this.lookAt=function(){var t=Ns.Util_vector.create();return function(e){this.transform||(this.transform=Ns.Util_matrix.create());var n=this.transform;function r(t){var e=5e-5;return t>-e&&t<e}Ns.Util_vector.sub(t,e,this.position),r(t[0])&&r(t[1])||(Ns.Util_vector.normalize(t,t),n[2]=t[0]*this.scale[1],n[3]=t[1]*this.scale[1],n[0]=t[1]*this.scale[0],n[1]=-t[0]*this.scale[0],n[4]=this.position[0],n[5]=this.position[1],this.decomposeTransform())}}()}destroy(){this.position=null,this.rotation=null,this.scale=null,this.needLocalTransform=null,this.needTransform=null}updateNeedTransform(){function t(t){var e=5e-5;return t>e||t<-e}this.needLocalTransform=t(this.rotation[0])||t(this.position[0])||t(this.position[1])||t(this.scale[0]-1)||t(this.scale[1]-1)}updateTransform(){if(this.updateNeedTransform(),this.parent?this.needTransform=this.needLocalTransform||this.parent.needTransform:this.needTransform=this.needLocalTransform,this.needTransform){var t=[0,0],e=this.transform||Ns.Util_matrix.create();if(Ns.Util_matrix.identity(e),this.needLocalTransform){if(n(this.scale[0])||n(this.scale[1])){t[0]=-this.scale[2]||0,t[1]=-this.scale[3]||0;let r=n(t[0])||n(t[1]);r&&Ns.Util_matrix.translate(e,e,t),Ns.Util_matrix.scale(e,e,this.scale),r&&(t[0]=-t[0],t[1]=-t[1],Ns.Util_matrix.translate(e,e,t))}if(this.rotation instanceof Array){if(0!==this.rotation[0]){t[0]=-this.rotation[1]||0,t[1]=-this.rotation[2]||0;let r=n(t[0])||n(t[1]);r&&Ns.Util_matrix.translate(e,e,t),Ns.Util_matrix.rotate(e,e,this.rotation[0]),r&&(t[0]=-t[0],t[1]=-t[1],Ns.Util_matrix.translate(e,e,t))}}else 0!==+this.rotation&&Ns.Util_matrix.rotate(e,e,this.rotation);(n(this.position[0])||n(this.position[1]))&&Ns.Util_matrix.translate(e,e,this.position)}this.transform=e,this.parent&&this.parent.needTransform&&(this.needLocalTransform?Ns.Util_matrix.mul(this.transform,this.parent.transform,this.transform):Ns.Util_matrix.copy(this.transform,this.parent.transform))}function n(t){var e=5e-5;return t>e||t<-e}}setTransform(t){if(this.needTransform){var e=this.transform;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}}decomposeTransform(){if(this.transform){var t=this.transform,e=t[0]*t[0]+t[1]*t[1],n=this.position,r=this.scale,i=this.rotation;a(e-1)&&(e=Math.sqrt(e));var o=t[2]*t[2]+t[3]*t[3];a(o-1)&&(o=Math.sqrt(o)),n[0]=t[4],n[1]=t[5],r[0]=e,r[1]=o,r[2]=r[3]=0,i[0]=Math.atan2(-t[1]/o,t[0]/e),i[1]=i[2]=0}function a(t){var e=5e-5;return t>e||t<-e}}}class Ds extends(Dt(ws,Rs)){constructor(t){super(t),t=t||{},this.id=null,this.style={},this.highlightStyle=null,this.parent=null,this.__dirty=!0,this.__clipShapes=[],this.invisible=!1,this.ignore=!1,this.zlevel=0,this.draggable=!1,this.clickable=!1,this.hoverable=!0,this.z=0,this.refOriginalPosition=[0,0],this.refDataID=null,this.isHoverByRefDataID=!1,this.refDataHoverGroup=null,this.dataInfo=null,Wt.extend(this,t),this.id=this.id||Wt.createUniqueID("smShape_"),this.CLASS_NAME="SuperMap.LevelRenderer.Shape",this.getTansform=function(){var t=[];return function(e,n){var r=[e,n];return this.needTransform&&this.transform&&(Ns.Util_matrix.invert(t,this.transform),Ns.Util_matrix.mulVector(r,t,[e,n,1]),e==r[0]&&n==r[1]&&this.updateNeedTransform()),r}}()}destroy(){this.id=null,this.style=null,this.highlightStyle=null,this.parent=null,this.__dirty=null,this.__clipShapes=null,this.invisible=null,this.ignore=null,this.zlevel=null,this.draggable=null,this.clickable=null,this.hoverable=null,this.z=null,this.refOriginalPosition=null,this.refDataID=null,this.refDataHoverGroup=null,this.isHoverByRefDataID=null,this.dataInfo=null,super.destroy()}brush(t,e){var n=this.beforeBrush(t,e);switch(t.beginPath(),this.buildPath(t,n),n.brushType){case"both":this.setCtxGlobalAlpha(t,"fill",n),t.fill(),n.lineWidth>0&&(this.setCtxGlobalAlpha(t,"stroke",n),t.stroke()),this.setCtxGlobalAlpha(t,"reset",n);break;case"stroke":this.setCtxGlobalAlpha(t,"stroke",n),n.lineWidth>0&&t.stroke(),this.setCtxGlobalAlpha(t,"reset",n);break;default:this.setCtxGlobalAlpha(t,"fill",n),t.fill(),this.setCtxGlobalAlpha(t,"reset",n);break}this.drawText(t,n,this.style),this.afterBrush(t)}beforeBrush(t,e){var n=this.style;return this.brushTypeOnly&&(n.brushType=this.brushTypeOnly),e&&(n=this.getHighlightStyle(n,this.highlightStyle||{},this.brushTypeOnly)),"stroke"==this.brushTypeOnly&&(n.strokeColor=n.strokeColor||n.color),t.save(),this.doClip(t),this.setContext(t,n),this.setTransform(t),n}afterBrush(t){t.restore()}setContext(t,e){for(var n=[["color","fillStyle"],["strokeColor","strokeStyle"],["opacity","globalAlpha"],["lineCap","lineCap"],["lineJoin","lineJoin"],["miterLimit","miterLimit"],["lineWidth","lineWidth"],["shadowBlur","shadowBlur"],["shadowColor","shadowColor"],["shadowOffsetX","shadowOffsetX"],["shadowOffsetY","shadowOffsetY"]],r=0,i=n.length;r<i;r++){var o=n[r][0],a=e[o],s=n[r][1];"undefined"!=typeof a&&(t[s]=a)}}doClip(t){var e=Ns.Util_matrix.create();if(this.__clipShapes)for(var n=0;n<this.__clipShapes.length;n++){var r=this.__clipShapes[n];if(r.needTransform){let n=r.transform;Ns.Util_matrix.invert(e,n),t.transform(n[0],n[1],n[2],n[3],n[4],n[5])}if(t.beginPath(),r.buildPath(t,r.style),t.clip(),r.needTransform){let n=e;t.transform(n[0],n[1],n[2],n[3],n[4],n[5])}}}getHighlightStyle(t,e,n){var r={};for(let o in t)r[o]=t[o];var i=Ns.Util_color.getHighlightColor();"stroke"!=t.brushType?(r.strokeColor=i,r.lineWidth=t.lineWidth||1,r.brushType="both"):"stroke"!=n?(r.strokeColor=i,r.lineWidth=t.lineWidth||1):r.strokeColor=e.strokeColor||Ns.Util_color.mix(t.strokeColor,Ns.Util_color.toRGB(i));for(let o in e)"undefined"!=typeof e[o]&&(r[o]=e[o]);return r}getHighlightZoom(){return"text"!=this.type?6:2}drift(t,e){this.position[0]+=t,this.position[1]+=e}buildPath(t,e){Ns.Util_log("buildPath not implemented in "+this.type)}getRect(t){Ns.Util_log("getRect not implemented in "+this.type)}isCover(t,e){var n=this.getTansform(t,e);t=n[0],e=n[1];var r=this.style.__rect;return r||(r=this.style.__rect=this.getRect(this.style)),t>=r.x&&t<=r.x+r.width&&e>=r.y&&e<=r.y+r.height&&Ns.Util_area.isInside(this,this.style,t,e)}drawText(t,e,n){if("undefined"!=typeof e.text&&!1!==e.text){var r=e.textColor||e.color||e.strokeColor;t.fillStyle=r;var i,o,a,s,l=10,u=e.textPosition||this.textPosition||"top",c=[];switch(c=this.refOriginalPosition&&2===this.refOriginalPosition.length?this.refOriginalPosition:[0,0],u){case"inside":case"top":case"bottom":case"left":case"right":if(this.getRect){var h=(n||e).__rect||this.getRect(n||e);switch(u){case"inside":a=h.x+h.width/2,s=h.y+h.height/2,i="center",o="middle","stroke"!=e.brushType&&r==e.color&&(t.fillStyle="#fff");break;case"left":a=h.x-l,s=h.y+h.height/2,i="end",o="middle";break;case"right":a=h.x+h.width+l,s=h.y+h.height/2,i="start",o="middle";break;case"top":a=h.x+h.width/2,s=h.y-l,i="center",o="bottom";break;case"bottom":a=h.x+h.width/2,s=h.y+h.height+l,i="center",o="top";break}}break;case"start":case"end":var d=0,f=0,p=0,g=0;if("undefined"!=typeof e.pointList){var m=e.pointList;if(m.length<2)return;var y=m.length;switch(u){case"start":d=m[0][0]+c[0],f=m[1][0]+c[0],p=m[0][1]+c[1],g=m[1][1]+c[1];break;case"end":d=m[y-2][0]+c[0],f=m[y-1][0]+c[0],p=m[y-2][1]+c[1],g=m[y-1][1]+c[1];break}}else d=e.xStart+c[0]||0,f=e.xEnd+c[0]||0,p=e.yStart+c[1]||0,g=e.yEnd+c[1]||0;switch(u){case"start":i=d<f?"end":"start",o=p<g?"bottom":"top",a=d,s=p;break;case"end":i=d<f?"start":"end",o=p<g?"top":"bottom",a=f,s=g;break}l-=4,d&&f&&d!=f?a-="end"==i?l:-l:i="center",p!=g?s-="bottom"==o?l:-l:o="middle";break;case"specific":a=e.textX||0,s=e.textY||0,i="start",o="middle";break}e.labelXOffset&&!isNaN(e.labelXOffset)&&(a+=e.labelXOffset),e.labelYOffset&&!isNaN(e.labelYOffset)&&(s+=e.labelYOffset),null!=a&&null!=s&&Ds._fillText(t,e.text,a,s,e.textFont,e.textAlign||i,e.textBaseline||o)}}modSelf(){this.__dirty=!0,this.style&&(this.style.__rect=null),this.highlightStyle&&(this.highlightStyle.__rect=null)}isSilent(){return!(this.hoverable||this.draggable||this.clickable||this.onmousemove||this.onmouseover||this.onmouseout||this.onmousedown||this.onmouseup||this.onclick||this.ondragenter||this.ondragover||this.ondragleave||this.ondrop)}setCtxGlobalAlpha(t,e,n){t.globalAlpha="fill"===e?"undefined"===typeof n["fillOpacity"]?"undefined"===typeof n["opacity"]?1:n["opacity"]:n["fillOpacity"]:"stroke"===e?"undefined"===typeof n["strokeOpacity"]?"undefined"===typeof n["opacity"]?1:n["opacity"]:n["strokeOpacity"]:"undefined"===typeof n["opacity"]?1:n["opacity"]}static _fillText(t,e,n,r,i,o,a){i&&(t.font=i),t.textAlign=o,t.textBaseline=a;var s=Ds._getTextRect(e,n,r,i,o,a);e=(e+"").split("\n");var l=Ns.Util_area.getTextHeight("ZH",i);switch(a){case"top":r=s.y;break;case"bottom":r=s.y+l;break;default:r=s.y+l/2}for(var u=0,c=e.length;u<c;u++)t.fillText(e[u],n,r),r+=l}static _getTextRect(t,e,n,r,i,o){var a=Ns.Util_area.getTextWidth(t,r),s=Ns.Util_area.getTextHeight("ZH",r);switch(t=(t+"").split("\n"),i){case"end":case"right":e-=a;break;case"center":e-=a/2;break}switch(o){case"top":break;case"bottom":n-=s*t.length;break;default:n-=s*t.length/2}return{x:e,y:n,width:a,height:s*t.length}}}class Fs extends Ds{constructor(t){super(t),this.type="smicpoint",this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]),this.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicPoint"}destroy(){this.type=null,super.destroy()}buildPath(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition;t.arc(e.x+n[0],e.y+n[1],e.r,0,2*Math.PI,!0)}getRect(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,n=this.refOriginalPosition;return t.__rect||(e="stroke"==t.brushType||"fill"==t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+n[0]-t.r-e/2),y:Math.round(t.y+n[1]-t.r-e/2),width:2*t.r+e,height:2*t.r+e}),t.__rect}}class js extends Ds{constructor(t){super(t),this.type="smictext",this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]),this.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicText"}destroy(){this.type=null,super.destroy()}brush(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,r=this.style;if(e&&(r=this.getHighlightStyle(r,this.highlightStyle||{})),"undefined"!=typeof r.text&&!1!==r.text){t.save(),this.doClip(t),this.setContext(t,r),this.setTransform(t),r.textFont&&(t.font=r.textFont),t.textAlign=r.textAlign||"start",t.textBaseline=r.textBaseline||"middle";var i,o=(r.text+"").split("\n"),a=Ns.Util_area.getTextHeight("ZH",r.textFont),s=this.getRectNoRotation(r),l=r.x+n[0];i="top"==r.textBaseline?s.y:"bottom"==r.textBaseline?s.y+a:s.y+a/2;for(var u=r.x+n[0],c=r.y+n[1],h=0,d=o.length;h<d;h++){switch(r.labelRect&&(t.fillRect(s.x-2,s.y,s.width+4,s.height),t.fillStyle=r.strokeColor,t.strokeRect(s.x-2,s.y,s.width+4,s.height),t.fillStyle=r.textColor),r.brushType){case"stroke":this.setCtxGlobalAlpha(t,"stroke",r),r.textRotation&&0!==r.textRotation?(t.save(),t.translate(u,c),t.rotate(r.textRotation*Math.PI/180),"top"==r.textBaseline?r.maxWidth?t.strokeText(o[h],0,a*h,r.maxWidth):t.strokeText(o[h],0,a*h):"bottom"==r.textBaseline?r.maxWidth?t.strokeText(o[h],0,a*(h+1)-s.height,r.maxWidth):t.strokeText(o[h],0,a*(h+1)-s.height):r.maxWidth?t.strokeText(o[h],0,a*(h+1)-s.height/2-a/2,r.maxWidth):t.strokeText(o[h],0,a*(h+1)-s.height/2-a/2),t.restore()):r.maxWidth?t.strokeText(o[h],l,i,r.maxWidth):t.strokeText(o[h],l,i),this.setCtxGlobalAlpha(t,"reset",r);break;case"both":r.textRotation&&0!==r.textRotation?(t.save(),t.translate(u,c),t.rotate(r.textRotation*Math.PI/180),"top"==r.textBaseline?r.maxWidth?(this.setCtxGlobalAlpha(t,"fill",r),t.fillText(o[h],0,a*h,r.maxWidth),this.setCtxGlobalAlpha(t,"reset",r),this.setCtxGlobalAlpha(t,"stroke",r),t.strokeText(o[h],0,a*h,r.maxWidth),this.setCtxGlobalAlpha(t,"reset",r)):(this.setCtxGlobalAlpha(t,"fill",r),t.fillText(o[h],0,a*h),this.setCtxGlobalAlpha(t,"reset",r),this.setCtxGlobalAlpha(t,"stroke",r),t.strokeText(o[h],0,a*h),this.setCtxGlobalAlpha(t,"reset",r)):"bottom"==r.textBaseline?r.maxWidth?(this.setCtxGlobalAlpha(t,"fill",r),t.fillText(o[h],0,a*(h+1)-s.height,r.maxWidth),this.setCtxGlobalAlpha(t,"reset",r),this.setCtxGlobalAlpha(t,"stroke",r),t.strokeText(o[h],0,a*(h+1)-s.height,r.maxWidth),this.setCtxGlobalAlpha(t,"reset",r)):(this.setCtxGlobalAlpha(t,"fill",r),t.fillText(o[h],0,a*(h+1)-s.height),this.setCtxGlobalAlpha(t,"reset",r),this.setCtxGlobalAlpha(t,"stroke",r),t.strokeText(o[h],0,a*(h+1)-s.height),this.setCtxGlobalAlpha(t,"reset",r)):r.maxWidth?(this.setCtxGlobalAlpha(t,"fill",r),t.fillText(o[h],0,a*(h+1)-s.height/2-a/2,r.maxWidth),this.setCtxGlobalAlpha(t,"reset",r),this.setCtxGlobalAlpha(t,"stroke",r),t.strokeText(o[h],0,a*(h+1)-s.height/2-a/2,r.maxWidth),this.setCtxGlobalAlpha(t,"reset",r)):(this.setCtxGlobalAlpha(t,"fill",r),t.fillText(o[h],0,a*(h+1)-s.height/2-a/2),this.setCtxGlobalAlpha(t,"reset",r),this.setCtxGlobalAlpha(t,"stroke",r),t.strokeText(o[h],0,a*(h+1)-s.height/2-a/2),this.setCtxGlobalAlpha(t,"reset",r)),t.restore()):r.maxWidth?(this.setCtxGlobalAlpha(t,"fill",r),t.fillText(o[h],l,i,r.maxWidth),this.setCtxGlobalAlpha(t,"reset",r),this.setCtxGlobalAlpha(t,"stroke",r),t.strokeText(o[h],l,i,r.maxWidth),this.setCtxGlobalAlpha(t,"reset",r)):(this.setCtxGlobalAlpha(t,"fill",r),t.fillText(o[h],l,i),this.setCtxGlobalAlpha(t,"reset",r),this.setCtxGlobalAlpha(t,"stroke",r),t.strokeText(o[h],l,i),this.setCtxGlobalAlpha(t,"reset",r));break;default:this.setCtxGlobalAlpha(t,"fill",r),r.textRotation&&0!==r.textRotation?(t.save(),t.translate(u,c),t.rotate(r.textRotation*Math.PI/180),"top"==r.textBaseline?r.maxWidth?t.fillText(o[h],0,a*h,r.maxWidth):t.fillText(o[h],0,a*h):"bottom"==r.textBaseline?r.maxWidth?t.fillText(o[h],0,a*(h+1)-s.height,r.maxWidth):t.fillText(o[h],0,a*(h+1)-s.height):r.maxWidth?t.fillText(o[h],0,a*(h+1)-s.height/2-a/2,r.maxWidth):t.fillText(o[h],0,a*(h+1)-s.height/2-a/2),t.restore()):r.maxWidth?t.fillText(o[h],l,i,r.maxWidth):t.fillText(o[h],l,i),this.setCtxGlobalAlpha(t,"reset",r)}i+=a}t.restore()}}getRect(t){if(t.__rect)return t.__rect;for(var e,n,r,i,o=this.getTextBackground(t,!0),a=0,s=o.length;a<s;a++){var l=o[a];0==a?(e=l[0],r=l[0],n=l[1],i=l[1]):(l[0]<e&&(e=l[0]),l[0]>r&&(r=l[0]),l[1]<n&&(n=l[1]),l[1]>i&&(i=l[1]))}return t.__rect={x:e,y:n,width:r-e,height:i-n},t.__rect}getRectNoRotation(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,n=this.refOriginalPosition,r=Ns.Util_area.getTextHeight("ZH",t.textFont),i=Ns.Util_area.getTextWidth(t.text,t.textFont),o=Ns.Util_area.getTextHeight(t.text,t.textFont),a=t.x+n[0];"end"==t.textAlign||"right"==t.textAlign?a-=i:"center"==t.textAlign&&(a-=i/2),e="top"==t.textBaseline?t.y+n[1]:"bottom"==t.textBaseline?t.y+n[1]-o:t.y+n[1]-o/2;var s,l=!1;if(t.maxWidth){var u=parseInt(t.maxWidth);u<i&&(s=i,l=!0,i=u),a=t.x+n[0],"end"==t.textAlign||"right"==t.textAlign?a-=i:"center"==t.textAlign&&(a-=i/2)}if(t.textFont){var c=t.textFont,h=c.toLowerCase();h.indexOf("italic")>-1&&(i+=!0===l?r/3*(i/s):r/3)}var d={x:a,y:e,width:i,height:o};return d}getTextBackground(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition;if(!e&&t.__textBackground)return t.__textBackground;var r=this.getRectNoRotation(t),i=t.x+n[0],o=t.y+n[1],a=[];if(t.textRotation&&0!==t.textRotation){let e=t.textRotation,n=this.getRotatedLocation(r.x,r.y,i,o,e),s=this.getRotatedLocation(r.x+r.width,r.y,i,o,e),l=this.getRotatedLocation(r.x+r.width,r.y+r.height,i,o,e),u=this.getRotatedLocation(r.x,r.y+r.height,i,o,e);a.push(n),a.push(s),a.push(l),a.push(u)}else{let t=[r.x,r.y],e=[r.x+r.width,r.y],n=[r.x+r.width,r.y+r.height],i=[r.x,r.y+r.height];a.push(t),a.push(e),a.push(n),a.push(i)}return t.__textBackground=a,t.__textBackground}getRotatedLocation(t,e,n,r,i){var o,a,s=new Array;return e=-e,r=-r,i=-i,o=(t-n)*Math.cos(i/180*Math.PI)-(e-r)*Math.sin(i/180*Math.PI)+n,a=(t-n)*Math.sin(i/180*Math.PI)+(e-r)*Math.cos(i/180*Math.PI)+r,s[0]=o,s[1]=-a,s}}class Bs extends Ds{constructor(t){super(t),this.type="smiccircle",this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]),this.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicCircle"}destroy(){this.type=null,super.destroy()}buildPath(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,r=e.x+n[0],i=e.y+n[1];return t.moveTo(r+e.r,i),t.arc(r,i,e.r,0,2*Math.PI,!0),!0}getRect(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,n=this.refOriginalPosition,r=t.x+n[0],i=t.y+n[1],o=t.r;return e="stroke"==t.brushType||"fill"==t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(r-o-e/2),y:Math.round(i-o-e/2),width:2*o+e,height:2*o+e},t.__rect}}class zs extends Ds{constructor(t){super(t),this.type="smicpolygon",this.holePolygonPointLists=null,this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]),this.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicPolygon"}destroy(){this.type=null,this.holePolygonPointLists=null,super.destroy()}brush(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.style;e&&(n=this.getHighlightStyle(n,this.highlightStyle||{})),t.save(),this.setContext(t,n),this.setTransform(t);var r=!1;"fill"!=n.brushType&&"both"!=n.brushType&&"undefined"!=typeof n.brushType||(t.beginPath(),"dashed"==n.lineType||"dotted"==n.lineType||"dot"==n.lineType||"dash"==n.lineType||"dashdot"==n.lineType||"longdash"==n.lineType||"longdashdot"==n.lineType?this.buildPath(t,{lineType:"solid",lineWidth:n.lineWidth,pointList:n.pointList}):(this.buildPath(t,n),r=!0),t.closePath(),this.setCtxGlobalAlpha(t,"fill",n),t.fill(),this.setCtxGlobalAlpha(t,"reset",n)),n.lineWidth>0&&("stroke"==n.brushType||"both"==n.brushType)&&(r||(t.beginPath(),this.buildPath(t,n)),this.setCtxGlobalAlpha(t,"stroke",n),t.stroke(),this.setCtxGlobalAlpha(t,"reset",n)),this.drawText(t,n,this.style);var i=Wt.cloneObject(n);if(i.pointList&&this.holePolygonPointLists&&this.holePolygonPointLists.length>0)for(var o=this.holePolygonPointLists,a=o.length,s=0;s<a;s++){var l=o[s];i.pointList=l,t.globalCompositeOperation="destination-out",r=!1,"fill"!=i.brushType&&"both"!=i.brushType&&"undefined"!=typeof i.brushType||(t.beginPath(),"dashed"==i.lineType||"dotted"==i.lineType||"dot"==i.lineType||"dash"==i.lineType||"dashdot"==i.lineType||"longdash"==i.lineType||"longdashdot"==i.lineType?this.buildPath(t,{lineType:"solid",lineWidth:i.lineWidth,pointList:i.pointList}):(this.buildPath(t,i),r=!0),t.closePath(),this.setCtxGlobalAlpha(t,"fill",i),t.fill(),this.setCtxGlobalAlpha(t,"reset",i)),i.lineWidth>0&&("stroke"==i.brushType||"both"==i.brushType)?(r||(t.beginPath(),this.buildPath(t,i)),t.globalCompositeOperation="source-over",this.setCtxGlobalAlpha(t,"stroke",i),t.stroke(),this.setCtxGlobalAlpha(t,"reset",i)):t.globalCompositeOperation="source-over"}t.restore()}buildPath(t,e){e.showShadow&&(t.shadowBlur=e.shadowBlur,t.shadowColor=e.shadowColor,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY),this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,r=e.pointList;if(!(r.length<2))if(e.smooth&&"spline"!==e.smooth){var i,o,a,s=Ns.SUtil_smoothBezier(r,e.smooth,!0,e.smoothConstraint,n);t.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var l=r.length,u=0;u<l;u++)i=s[2*u],o=s[2*u+1],a=[r[(u+1)%l][0]+n[0],r[(u+1)%l][1]+n[1]],t.bezierCurveTo(i[0],i[1],o[0],o[1],a[0],a[1])}else if("spline"===e.smooth&&(r=Ns.SUtil_smoothSpline(r,!0,null,n)),e.lineType&&"solid"!=e.lineType){if("dashed"===e.lineType||"dotted"===e.lineType||"dot"===e.lineType||"dash"===e.lineType||"longdash"===e.lineType){let i=e._dashLength||(e.lineWidth||1)*("dashed"==e.lineType?5:1);e._dashLength=i;let o=e.lineWidth||1,a=o,s=o;"dashed"===e.lineType&&(a*=5,s*=5,e.lineCap&&"butt"!==e.lineCap&&(a-=o,s+=o)),"dotted"===e.lineType&&e.lineCap&&"butt"!==e.lineCap&&(a=1,s+=o),"dot"===e.lineType&&(s*=4,e.lineCap&&"butt"!==e.lineCap&&(a=1,s+=o)),"dash"===e.lineType&&(a*=4,s*=4,e.lineCap&&"butt"!==e.lineCap&&(a-=o,s+=o)),"longdash"===e.lineType&&(a*=8,s*=4,e.lineCap&&"butt"!==e.lineCap&&(a-=o,s+=o)),t.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(let e=1;e<r.length;e++)Ns.SUtil_dashedLineTo(t,r[e-1][0]+n[0],r[e-1][1]+n[1],r[e][0]+n[0],r[e][1]+n[1],o,[a,s]);Ns.SUtil_dashedLineTo(t,r[r.length-1][0]+n[0],r[r.length-1][1]+n[1],r[0][0]+n[0],r[0][1]+n[1],o,[a,s])}else if("dashdot"===e.lineType||"longdashdot"===e.lineType){let i=e._dashLength||(e.lineWidth||1)*("dashed"==e.lineType?5:1);e._dashLength=i;let o=e.lineWidth||1,a=o,s=o,l=o,u=o;"dashdot"===e.lineType&&(a*=4,s*=4,u*=4,e.lineCap&&"butt"!==e.lineCap&&(a-=o,s+=o,l=1,u+=o)),"longdashdot"===e.lineType&&(a*=8,s*=4,u*=4,e.lineCap&&"butt"!==e.lineCap&&(a-=o,s+=o,l=1,u+=o)),t.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(let e=1;e<r.length;e++)Ns.SUtil_dashedLineTo(t,r[e-1][0]+n[0],r[e-1][1]+n[1],r[e][0]+n[0],r[e][1]+n[1],o,[a,s,l,u]);Ns.SUtil_dashedLineTo(t,r[r.length-1][0]+n[0],r[r.length-1][1]+n[1],r[0][0]+n[0],r[0][1]+n[1],o,[a,s,l,u])}}else{t.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(let e=1;e<r.length;e++)t.lineTo(r[e][0]+n[0],r[e][1]+n[1]);t.lineTo(r[0][0]+n[0],r[0][1]+n[1])}}getRect(t,e){var n;if(e?n=e:(this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]),n=this.refOriginalPosition),t.__rect)return t.__rect;for(var r,i=Number.MAX_VALUE,o=Number.MIN_VALUE,a=Number.MAX_VALUE,s=Number.MIN_VALUE,l=t.pointList,u=0,c=l.length;u<c;u++)l[u][0]+n[0]<i&&(i=l[u][0]+n[0]),l[u][0]+n[0]>o&&(o=l[u][0]+n[0]),l[u][1]+n[1]<a&&(a=l[u][1]+n[1]),l[u][1]+n[1]>s&&(s=l[u][1]+n[1]);return r="stroke"==t.brushType||"fill"==t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(i-r/2),y:Math.round(a-r/2),width:o-i+r,height:s-a+r},t.__rect}}class Us extends Ds{constructor(t){super(t),this.brushTypeOnly="stroke",this.textPosition="end",this.type="smicbroken-line",this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]),this.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicBrokenLine"}destroy(){this.brushTypeOnly=null,this.textPosition=null,this.type=null,super.destroy()}buildPath(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,r=e.pointList;if(!(r.length<2)){var i=Math.min(e.pointList.length,Math.round(e.pointListLength||e.pointList.length));if(e.smooth&&"spline"!==e.smooth){var o,a,s,l=Ns.SUtil_smoothBezier(r,e.smooth,!1,e.smoothConstraint,n);t.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(let e=0;e<i-1;e++)o=l[2*e],a=l[2*e+1],s=[r[e+1][0]+n[0],r[e+1][1]+n[1]],t.bezierCurveTo(o[0],o[1],a[0],a[1],s[0],s[1])}else if("spline"===e.smooth&&(r=Ns.SUtil_smoothSpline(r,null,null,n),i=r.length),e.lineType&&"solid"!==e.lineType){if("dashed"===e.lineType||"dotted"===e.lineType||"dot"===e.lineType||"dash"===e.lineType||"longdash"===e.lineType){let o=e.lineWidth||1,a=o,s=o;"dashed"===e.lineType&&(a*=5,s*=5,e.lineCap&&"butt"!==e.lineCap&&(a-=o,s+=o)),"dotted"===e.lineType&&e.lineCap&&"butt"!==e.lineCap&&(a=1,s+=o),"dot"===e.lineType&&(s*=4,e.lineCap&&"butt"!==e.lineCap&&(a=1,s+=o)),"dash"===e.lineType&&(a*=4,s*=4,e.lineCap&&"butt"!==e.lineCap&&(a-=o,s+=o)),"longdash"===e.lineType&&(a*=8,s*=4,e.lineCap&&"butt"!==e.lineCap&&(a-=o,s+=o)),t.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var u=1;u<i;u++)Ns.SUtil_dashedLineTo(t,r[u-1][0]+n[0],r[u-1][1]+n[1],r[u][0]+n[0],r[u][1]+n[1],o,[a,s])}else if("dashdot"===e.lineType||"longdashdot"===e.lineType){let o=e.lineWidth||1,a=o,s=o,l=o,u=o;"dashdot"===e.lineType&&(a*=4,s*=4,u*=4,e.lineCap&&"butt"!==e.lineCap&&(a-=o,s+=o,l=1,u+=o)),"longdashdot"===e.lineType&&(a*=8,s*=4,u*=4,e.lineCap&&"butt"!==e.lineCap&&(a-=o,s+=o,l=1,u+=o)),o=(e.lineWidth||1)*("dashed"===e.lineType?5:1),t.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(let e=1;e<i;e++)Ns.SUtil_dashedLineTo(t,r[e-1][0]+n[0],r[e-1][1]+n[1],r[e][0]+n[0],r[e][1]+n[1],o,[a,s,l,u])}}else{t.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(let e=1;e<i;e++)t.lineTo(r[e][0]+n[0],r[e][1]+n[1])}}}getRect(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e=this.refOriginalPosition;return zs.prototype.getRect.apply(this,[t,e])}}class Gs extends Ds{constructor(t){super(t),this.type="smicimage",this._imageCache={},this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]),this.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicImage"}destroy(){this.type=null,this._imageCache=null,super.destroy()}brush(t,e,n){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,i=this.style||{};e&&(i=this.getHighlightStyle(i,this.highlightStyle||{}));var o=i.image,a=this;if("string"===typeof o){var s=o;this._imageCache[s]?o=this._imageCache[s]:(o=new Image,o.onload=function(){o.onload=null,clearTimeout(Gs._refreshTimeout),Gs._needsRefresh.push(a),Gs._refreshTimeout=setTimeout((function(){n&&n(Gs._needsRefresh),Gs._needsRefresh=[]}),10)},o.src=s,this._imageCache[s]=o)}if(o){if("IMG"==o.nodeName.toUpperCase())if(window.ActiveXObject){if("complete"!=o.readyState)return}else if(!o.complete)return;var l=i.width||o.width,u=i.height||o.height,c=i.x+r[0],h=i.y+r[1];if(!o.width||!o.height)return;if(t.save(),this.doClip(t),this.setContext(t,i),this.setTransform(t),i.sWidth&&i.sHeight){let e=i.sx+r[0]||0,n=i.sy+r[1]||0;t.drawImage(o,e,n,i.sWidth,i.sHeight,c,h,l,u)}else if(i.sx&&i.sy){let e=i.sx+r[0],n=i.sy+r[1];var d=l-e,f=u-n;t.drawImage(o,e,n,d,f,c,h,l,u)}else t.drawImage(o,c,h,l,u);i.width||(i.width=l),i.height||(i.height=u),this.style.width||(this.style.width=l),this.style.height||(this.style.height=u),this.drawText(t,i,this.style),t.restore()}}getRect(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e=this.refOriginalPosition;return{x:t.x+e[0],y:t.y+e[1],width:t.width,height:t.height}}clearCache(){this._imageCache={}}}Gs._needsRefresh=[],Gs._refreshTimeout=null;class qs extends Ds{constructor(t){super(t),this.type="smicrectangle",this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]),this.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicRectangle"}destroy(){this.type=null,super.destroy()}_buildRadiusPath(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n,r,i,o,a,s=this.refOriginalPosition,l=e.x+s[0],u=e.y+s[1],c=e.width,h=e.height,d=e.radius;"number"===typeof d?n=r=i=o=d:d instanceof Array?1===d.length?n=r=i=o=d[0]:2===d.length?(n=i=d[0],r=o=d[1]):3===d.length?(n=d[0],r=o=d[1],i=d[2]):(n=d[0],r=d[1],i=d[2],o=d[3]):n=r=i=o=0,n+r>c&&(a=n+r,n*=c/a,r*=c/a),i+o>c&&(a=i+o,i*=c/a,o*=c/a),r+i>h&&(a=r+i,r*=h/a,i*=h/a),n+o>h&&(a=n+o,n*=h/a,o*=h/a),t.moveTo(l+n,u),t.lineTo(l+c-r,u),0!==r&&t.quadraticCurveTo(l+c,u,l+c,u+r),t.lineTo(l+c,u+h-i),0!==i&&t.quadraticCurveTo(l+c,u+h,l+c-i,u+h),t.lineTo(l+o,u+h),0!==o&&t.quadraticCurveTo(l,u+h,l,u+h-o),t.lineTo(l,u+n),0!==n&&t.quadraticCurveTo(l,u,l+n,u)}buildPath(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition;e.radius?this._buildRadiusPath(t,e):(t.moveTo(e.x+n[0],e.y+n[1]),t.lineTo(e.x+n[0]+e.width,e.y+n[1]),t.lineTo(e.x+n[0]+e.width,e.y+n[1]+e.height),t.lineTo(e.x+n[0],e.y+n[1]+e.height),t.lineTo(e.x+n[0],e.y+n[1])),t.closePath()}getRect(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,n=this.refOriginalPosition;return t.__rect||(e="stroke"==t.brushType||"fill"==t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+n[0]-e/2),y:Math.round(t.y+n[1]-e/2),width:t.width+e,height:t.height+e}),t.__rect}}class Vs extends Ds{constructor(t){super(t),this.type="smicsector",this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]),this.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicSector"}destroy(){this.type=null,super.destroy()}buildPath(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,r=e.x+n[0],i=e.y+n[1],o=e.r0||0,a=e.r,s=e.startAngle,l=e.endAngle,u=e.clockWise||!1;s=Ns.Util_math.degreeToRadian(s),l=Ns.Util_math.degreeToRadian(l),u||(s=-s,l=-l);var c=Ns.Util_math.cos(s),h=Ns.Util_math.sin(s);t.moveTo(c*o+r,h*o+i),t.lineTo(c*a+r,h*a+i),t.arc(r,i,a,s,l,!u),t.lineTo(Ns.Util_math.cos(l)*o+r,Ns.Util_math.sin(l)*o+i),0!==o&&t.arc(r,i,o,l,s,u),t.closePath()}getRect(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e=this.refOriginalPosition,n=Ns.Util_vector.create(),r=Ns.Util_vector.create(),i=Ns.Util_vector.create(),o=Ns.Util_vector.create(),a=t.x+e[0],s=t.y+e[1],l=t.r0||0,u=t.r,c=Ns.Util_math.degreeToRadian(t.startAngle),h=Ns.Util_math.degreeToRadian(t.endAngle),d=t.clockWise;return d||(c=-c,h=-h),l>1?Ns.Util_computeBoundingBox.arc(a,s,l,c,h,!d,n,i):(n[0]=i[0]=a,n[1]=i[1]=s),Ns.Util_computeBoundingBox.arc(a,s,u,c,h,!d,r,o),Ns.Util_vector.min(n,n,r),Ns.Util_vector.max(i,i,o),t.__rect={x:n[0],y:n[1],width:i[0]-n[0],height:i[1]-n[1]},t.__rect}}class Hs{constructor(t){this.shapeParameters=t,this.CLASS_NAME="SuperMap.Feature.ShapeFactory"}destroy(){this.shapeParameters=null}createShape(t){if(t&&(this.shapeParameters=t),!this.shapeParameters)return null;var e=this.shapeParameters;if(e instanceof ps){let t=new Object;t["x"]=e.x,t["y"]=e.y,t["r"]=e.r,t=Wt.copyAttributesWithClip(t,e.style,["x","y"]);let n=new Fs;return n.style=Hs.transformStyle(t),n.highlightStyle=Hs.transformStyle(e.highlightStyle),Wt.copyAttributesWithClip(n,e,["x","y","style","highlightStyle"]),n}if(e instanceof gs){if(!e.pointList)return null;let t=new Object;t["pointList"]=e.pointList,t=Wt.copyAttributesWithClip(t,e.style,["pointList"]);let n=new Us;return n.style=Hs.transformStyle(t),n.highlightStyle=Hs.transformStyle(e.highlightStyle),Wt.copyAttributesWithClip(n,e,["pointList","style","highlightStyle"]),n}if(e instanceof ms){if(!e.pointList)return null;let t=new Object;t["pointList"]=e.pointList,t=Wt.copyAttributesWithClip(t,e.style,["pointList"]);let n=new zs;return n.style=Hs.transformStyle(t),n.highlightStyle=Hs.transformStyle(e.highlightStyle),Wt.copyAttributesWithClip(n,e,["pointList","style","highlightStyle"]),n}if(e instanceof ys){if(!e.x&&!e.y&!e.width&!e.height)return null;let t=new Object;t["x"]=e.x,t["y"]=e.y,t["width"]=e.width,t["height"]=e.height,t=Wt.copyAttributesWithClip(t,e.style,["x","y","width","height"]);let n=new qs;return n.style=Hs.transformStyle(t),n.highlightStyle=Hs.transformStyle(e.highlightStyle),Wt.copyAttributesWithClip(n,e,["x","y","width","height","style","highlightStyle"]),n}if(e instanceof vs){let t=new Object;t["x"]=e.x,t["y"]=e.y,t["r"]=e.r,t["startAngle"]=e.startAngle,t["endAngle"]=e.endAngle,e["r0"]&&(t["r0"]=e.r0),e["clockWise"]&&(t["clockWise"]=e.clockWise),t=Wt.copyAttributesWithClip(t,e.style,["x","y","r","startAngle","endAngle","r0","endAngle"]);let n=new Vs;return n.style=Hs.transformStyle(t),n.highlightStyle=Hs.transformStyle(e.highlightStyle),Wt.copyAttributesWithClip(n,e,["x","y","r","startAngle","endAngle","r0","endAngle","style","highlightStyle"]),n}if(e instanceof bs){let t=new Object;t["x"]=e.x,t["y"]=e.y,t["text"]=e.text,t=Wt.copyAttributesWithClip(t,e.style,["x","y","text"]);let n=new js;return n.style=Hs.transformStyle(t),n.highlightStyle=Hs.transformStyle(e.highlightStyle),Wt.copyAttributesWithClip(n,e,["x","y","text","style","highlightStyle"]),n}if(e instanceof _s){let t=new Object;t["x"]=e.x,t["y"]=e.y,e["image"]&&(t["image"]=e.image),e["width"]&&(t["width"]=e.width),e["height"]&&(t["height"]=e.height),e["sx"]&&(t["sx"]=e.sx),e["sy"]&&(t["sy"]=e.sy),e["sWidth"]&&(t["sWidth"]=e.sWidth),e["sHeight"]&&(t["sHeight"]=e.sHeight),t=Wt.copyAttributesWithClip(t,e.style,["x","y","image","width","height","sx","sy","sWidth","sHeight"]);let n=new Gs;return n.style=Hs.transformStyle(t),n.highlightStyle=Hs.transformStyle(e.highlightStyle),Wt.copyAttributesWithClip(n,e,["x","y","image","width","height","style","highlightStyle"]),n}if(e instanceof xs){let t=new Object;t["x"]=e.x,t["r"]=e.r,t["y"]=e.y,t=Wt.copyAttributesWithClip(t,e.style,["x","y","r"]);let n=new Bs;return n.style=Hs.transformStyle(t),n.highlightStyle=Hs.transformStyle(e.highlightStyle),Wt.copyAttributesWithClip(n,e,["x","y","r","style","highlightStyle","lineWidth","text","textPosition"]),n}return null}static transformStyle(t){var e={},n=["normal","normal","normal","12","arial,sans-serif"],r=[!0,!1];for(var i in t)switch(i){case"fill":r[0]=t[i];break;case"fillColor":e["color"]=t[i];break;case"stroke":r[1]=t[i];break;case"strokeWidth":e["lineWidth"]=t[i];break;case"strokeLinecap":e["lineCap"]=t[i];break;case"strokeLineJoin":e["lineJoin"]=t[i];break;case"strokeDashstyle":e["lineType"]=t[i];break;case"pointRadius":e["r"]=t[i];break;case"label":e["text"]=t[i];break;case"labelRect":e["labelRect"]=t[i];break;case"fontColor":e["textColor"]=t[i];break;case"fontStyle":n[0]=t[i];break;case"fontVariant":n[1]=t[i];break;case"fontWeight":n[2]=t[i];break;case"fontSize":var o="";t[i]&&t[i].toString().indexOf("px")<0&&(o="px"),n[3]=t[i]+o;break;case"fontFamily":n[4]=t[i];break;case"fontOpacity":e["opacity"]=t[i];break;case"labelPosition":e["textPosition"]=t[i];break;case"labelAlign":e["textAlign"]=t[i];break;case"labelBaseline":e["textBaseline"]=t[i];break;case"labelRotation":e["textRotation"]=t[i];break;default:e[i]=t[i];break}return e["textFont"]=n.join(" "),!0===r[0]&&!1===r[1]?e["brushType"]="fill":!1===r[0]&&!0===r[1]?e["brushType"]="stroke":!0===r[0]&&!0===r[1]?e["brushType"]="both":e["brushType"]="fill",null==e["lineWidth"]&&(e["lineWidth"]=1),e}static Background(t,e,n){var r=n||{},i=new ys(e[0],e[3],Math.abs(e[2]-e[0]),Math.abs(e[3]-e[1]));return i.style={fillColor:"#f3f3f3"},r.backgroundStyle&&Wt.copyAttributesWithClip(i.style,r.backgroundStyle),r.backgroundRadius&&(i.style["radius"]=r.backgroundRadius),i.clickable=!1,i.hoverable=!1,t.createShape(i)}static GraphAxis(t,e,n,r){var i=e,o=n||{},a=[],s=[],l=!!o.useXReferenceLine&&o.useXReferenceLine,u=o.axisYTick&&!isNaN(o.axisYTick)?o.axisYTick:0,c=[],h=[],d=[];if(0==u){if(d.push([i[0],i[3]-5]),d.push([i[0],i[1]]),o.axis3DParameter&&!isNaN(o.axis3DParameter)&&o.axis3DParameter>=15){let t=parseInt(o.axis3DParameter),e=[i[0]-t,i[1]+t];o.axisUseArrow?(h.push([e[0]+1.5,e[1]-7.5]),h.push([e[0]-1,e[1]+1]),h.push([e[0]+7.5,e[1]-1.5]),d.push([e[0],e[1]])):d.push([e[0],e[1]]),d.push([i[0],i[1]])}d.push([i[2]+5,i[1]])}else{var f=Math.abs(i[1]-i[3])/u,p=i[3];d.push([i[0],p-5]);for(var g=0;g<u;g++){if(d.push([i[0],p]),d.push([i[0]-5,p]),d.push([i[0],p]),l){var m=new gs([[i[0],p],[i[2],p]]);m.style={strokeColor:"#cfcfcf",strokeLinecap:"butt",strokeLineJoin:"round",strokeWidth:1},m.clickable=!1,m.hoverable=!1,o.xReferenceLineStyle&&Wt.copyAttributesWithClip(m.style,o.xReferenceLineStyle),a.push(t.createShape(m))}p+=f}if(d.push([i[0],i[1]]),o.axis3DParameter&&!isNaN(o.axis3DParameter)&&o.axis3DParameter>=15){let t=parseInt(o.axis3DParameter),e=[i[0]-t,i[1]+t];o.axisUseArrow?(h.push([e[0]+1.5,e[1]-7.5]),h.push([e[0]-1,e[1]+1]),h.push([e[0]+7.5,e[1]-1.5]),d.push([e[0],e[1]])):d.push([e[0],e[1]]),d.push([i[0],i[1]])}d.push([i[2]+5,i[1]])}if(o.axisUseArrow){var y=[[i[2]+5,i[1]+4],[i[2]+13,i[1]],[i[2]+5,i[1]-4]],v=[[i[0]-4,i[3]-5],[i[0],i[3]-13],[i[0]+4,i[3]-5]],b=new ms(y);b.style={fillColor:"#008acd"},Wt.copyAttributesWithClip(b.style,o.axisStyle),s.push(t.createShape(b));var _=new ms(v);if(_.style={fillColor:"#008acd"},Wt.copyAttributesWithClip(_.style,o.axisStyle),s.push(t.createShape(_)),o.axis3DParameter&&!isNaN(o.axis3DParameter)&&o.axis3DParameter>=15){var x=new ms(h);x.style={fillColor:"#008acd"},Wt.copyAttributesWithClip(x.style,o.axisStyle),s.push(t.createShape(x))}}c=d;var w=new gs(c);w.style={strokeLinecap:"butt",strokeLineJoin:"round",strokeColor:"#008acd",strokeWidth:1},o.axisStyle&&Wt.copyAttributesWithClip(w.style,o.axisStyle),w.clickable=!1,w.hoverable=!1;var S=[t.createShape(w)],E=[];if(o.axisYLabels&&o.axisYLabels.length&&o.axisYLabels.length>0){var C=o.axisYLabels;let e=C.length;var M=[0,0];if(o.axisYLabelsOffset&&o.axisYLabelsOffset.length&&(M=o.axisYLabelsOffset),1==e){let e=new bs(i[0]-5+M[0],i[3]+M[1],C[0]);e.style={labelAlign:"right"},o.axisYLabelsStyle&&Wt.copyAttributesWithClip(e.style,o.axisYLabelsStyle),e.clickable=!1,e.hoverable=!1,E.push(t.createShape(e))}else for(var T=i[3],A=Math.abs(i[1]-i[3])/(e-1),O=0;O<e;O++){let e=new bs(i[0]-5+M[0],T+M[1],C[O]);e.style={labelAlign:"right"},o.axisYLabelsStyle&&Wt.copyAttributesWithClip(e.style,o.axisYLabelsStyle),e.clickable=!1,e.hoverable=!1,E.push(t.createShape(e)),T+=A}}var k=[];if(o.axisXLabels&&o.axisXLabels.length&&o.axisXLabels.length>0){let e=o.axisXLabels,n=e.length,a=[0,0];if(o.axisXLabelsOffset&&o.axisXLabelsOffset.length&&(a=o.axisXLabelsOffset),r&&r.xPositions&&r.xPositions.length&&r.xPositions.length==n){let s=r.xPositions;for(let r=0;r<n;r++){let n=new bs(s[r]+a[0],i[1]+a[1],e[r]);n.style={labelAlign:"center",labelBaseline:"top"},o.axisXLabelsStyle&&Wt.copyAttributesWithClip(n.style,o.axisXLabelsStyle),n.clickable=!1,n.hoverable=!1,k.push(t.createShape(n))}}else if(1==n){let n=new bs(i[0]-5+a[0],i[1]+a[0],e[0]);n.style={labelAlign:"center",labelBaseline:"top"},o.axisXLabelsStyle&&Wt.copyAttributesWithClip(n.style,o.axisXLabelsStyle),n.clickable=!1,n.hoverable=!1,k.push(t.createShape(n))}else{let r=i[0],s=Math.abs(i[2]-i[0])/(n-1);for(let l=0;l<n;l++){let n=new bs(r+a[0],i[1]+a[1],e[l]);n.style={labelAlign:"center",labelBaseline:"top"},o.axisXLabelsStyle&&Wt.copyAttributesWithClip(n.style,o.axisXLabelsStyle),n.clickable=!1,n.hoverable=!1,k.push(t.createShape(n)),r+=s}}}return a.concat(S).concat(E).concat(k).concat(s)}static ShapeStyleTool(t,e,n,r,i,o){var a=t||{};if(e&&Wt.copyAttributesWithClip(a,e),n&&n.length&&"undefined"!==typeof i&&!isNaN(i)&&i>=0&&n[i]&&Wt.copyAttributesWithClip(a,n[i]),r&&r.length&&"undefined"!==typeof o)for(var s=r,l=s.length,u=parseFloat(o),c=0;c<l;c++)if(s[c].start<=u&&u<s[c].end){Wt.copyAttributesWithClip(a,s[c].style);break}return a}}class Ws{constructor(t,e){t&&e&&e.map&&e.renderer&&(this.id=Wt.createUniqueID(this.CLASS_NAME+"_"),this.lonlat=null,this.location=[],this.data=t,this.shapes=[],this.layer=e,this.CLASS_NAME="SuperMap.Feature.Theme")}destroy(){this.data=null,this.id=null,this.lonlat=null,this.location=null,this.shapes=null,this.layer=null}getLocalXY(t){var e=this.layer.map.getResolution(),n=this.layer.map.getExtent();if(t instanceof ne||t instanceof ie){let r=t.x/e+-n.left/e,i=n.top/e-t.y/e;return[r,i]}if(t instanceof Kt){let r=t.lon/e+-n.left/e,i=n.top/e-t.lat/e;return[r,i]}return null}}class Ys extends Ws{constructor(t,e,n,r,i,o){super(t,e,n,r,i,o),this.shapeFactory=new Hs,this.shapeParameters=null,this.RelativeCoordinate=!1,this.setting=null,this.origonPoint=null,this.chartBox=null,this.chartBounds=null,this.width=null,this.height=null,this.XOffset=0,this.YOffset=0,this.DVBParameter=null,this.dataViewBox=null,this.DVBCodomain=null,this.DVBCenterPoint=null,this.DVBUnitValue=null,this.DVBOrigonPoint=null,this.DVBWidth=null,this.DVBHeight=null,this.origonPointOffset=null,this.fields=n||[],this.dataValues=null,this.lonlat=i||this.data.geometry.getBounds().getCenterLonLat(),r&&r.width&&r.height&&r.codomain&&(this.setting=r),this.CLASS_NAME="SuperMap.Feature.Theme.Graph"}destroy(){this.shapeFactory=null,this.shapeParameters=null,this.width=null,this.height=null,this.origonPoint=null,this.chartBox=null,this.dataViewBox=null,this.chartBounds=null,this.DVBParameter=null,this.DVBOrigonPoint=null,this.DVBCenterPoint=null,this.DVBWidth=null,this.DVBHeight=null,this.DVBCodomain=null,this.DVBUnitValue=null,this.origonPointOffset=null,this.XOffset=null,this.YOffset=null,this.fields=null,this.dataValues=null,this.setting=null,super.destroy()}initBaseParameter(){var t=!0;if(!this.setting)return!1;var e=this.setting;if(!(e.width&&e.height&&e.codomain))return!1;var n="undefined"===typeof e.decimalNumber||isNaN(e.decimalNumber)?-1:e.decimalNumber,r=Ws.getDataValues(this.data,this.fields,n);this.dataValues=r||[],this.width=parseFloat(e.width),this.height=parseFloat(e.height),this.DVBCodomain=e.codomain,this.XOffset=e.XOffset?e.XOffset:0,this.YOffset=e.YOffset?e.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=e.dataViewBoxParameter?e.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var i=this.width,o=this.height,a=this.location;this.origonPoint=[a[0]-i/2,a[1]-o/2];var s=this.origonPoint;this.chartBox=[s[0],s[1]+o,s[0]+i,s[1]];var l=this.chartBox,u=this.DVBParameter;this.dataViewBox=[l[0]+u[0],l[1]-u[1],l[2]-u[2],l[3]+u[3]];var c=this.dataViewBox;return!(c[0]>=c[2]||c[1]<=c[3])&&(this.DVBOrigonPoint=[c[0],c[3]],this.DVBWidth=Math.abs(c[2]-c[0]),this.DVBHeight=Math.abs(c[1]-c[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-s[0],this.DVBOrigonPoint[1]-s[1]],t)}resetLocation(t){t&&(this.lonlat=t);var e=this.getLocalXY(this.lonlat);e[0]+=this.XOffset,e[1]+=this.YOffset,this.location=e;var n=this.width,r=this.height,i=this.location;return this.chartBounds=new Qt(i[0]-n/2,i[1]+r/2,i[0]+n/2,i[1]-r/2),this.resetLinearGradient(),i}resetLinearGradient(){}shapesConvertToRelativeCoordinate(){for(var t=this.shapes,e=this.location,n=0,r=t.length;n<r;n++){t[n].refOriginalPosition=e;var i=t[n].style;for(var o in i)switch(o){case"pointList":for(var a=i[o],s=0,l=a.length;s<l;s++)a[s][0]-=e[0],a[s][1]-=e[1];break;case"x":i[o]-=e[0];break;case"y":i[o]-=e[1];break;default:break}}this.RelativeCoordinate=!0}assembleShapes(){}getLocalXY(t){return this.layer.getLocalXY(t)}}Ws.getDataValues=function(t,e,n){if(!t.attributes)return!1;for(var r=[],i=t.attributes,o=0;o<e.length;o++)for(var a in i)if(a===e[o])try{!isNaN(n)&&n>=0?r.push(parseFloat(i[a].toString()).toFixed(n)):r.push(parseFloat(i[a].toString()))}catch(s){throw new Error("not a number")}return r.length===e.length&&r};class Xs extends Ys{constructor(t,e,n,r,i){super(t,e,n,r,i),this.CLASS_NAME="SuperMap.Feature.Theme.Bar"}destroy(){super.destroy()}assembleShapes(){var t=[["#00FF00","#00CD00"],["#00CCFF","#5E87A2"],["#00FF66","#669985"],["#CCFF00","#94A25E"],["#FF9900","#A2945E"]],e={showShadow:!0,shadowBlur:8,shadowColor:"rgba(100,100,100,0.8)",shadowOffsetX:2,shadowOffsetY:2},n=this.setting;if(n.barLinearGradient||(n.barLinearGradient=t),n.dataViewBoxParameter||("undefined"===typeof n.useAxis||n.useAxis?n.dataViewBoxParameter=[45,15,15,15]:n.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var r=this.DVBCodomain;this.DVBUnitValue=(r[1]-r[0])/this.DVBHeight;var i=this.dataViewBox,o=this.dataValues;if(!(o.length<1)){for(let t=0,e=o.length;t<e;t++)if(o[t]<r[0]||o[t]>r[1])return;var a=this.calculateXShapeInfo();if(a){var s=a.xPositions,l=a.width;("undefined"===typeof n.useBackground||n.useBackground)&&this.shapes.push(Hs.Background(this.shapeFactory,this.chartBox,n)),("undefined"===typeof n.useAxis||n.useAxis)&&(this.shapes=this.shapes.concat(Hs.GraphAxis(this.shapeFactory,i,n,a)));for(var u=0;u<o.length;u++){var c=i[1]-(o[u]-r[0])/this.DVBUnitValue,h=[[s[u]-l/2,i[1]-1],[s[u]+l/2,i[1]-1],[s[u]+l/2,c],[s[u]-l/2,c]],d=new ms(h);if("undefined"===typeof n.showShadow||n.showShadow){if(n.barShadowStyle){var f=n.barShadowStyle;f.shadowBlur&&(e.shadowBlur=f.shadowBlur),f.shadowColor&&(e.shadowColor=f.shadowColor),f.shadowOffsetX&&(e.shadowOffsetX=f.shadowOffsetX),f.shadowOffsetY&&(e.shadowOffsetY=f.shadowOffsetY)}d.style={},Wt.copyAttributesWithClip(d.style,e)}d.refDataID=this.data.id,d.dataInfo={field:this.fields[u],value:o[u]},"undefined"!==typeof n.barHoverAble&&(d.hoverable=n.barHoverAble),"undefined"!==typeof n.barClickAble&&(d.clickable=n.barClickAble),this.shapes.push(this.shapeFactory.createShape(d))}this.shapesConvertToRelativeCoordinate()}}}}calculateXShapeInfo(){var t,e=this.dataViewBox,n=this.setting,r=this.dataValues.length;if(r<1)return null;var i=[],o=0,a=this.DVBWidth;if(n.xShapeBlank&&n.xShapeBlank.length&&3==n.xShapeBlank.length){t=n.xShapeBlank;var s=a-(t[0]+t[2]+(r-1)*t[1]);if(s<=r)return null;o=s/r}else o=a/(2*r+1),t=[o,o,o];for(var l=0,u=0;u<r;u++)0==u?l=t[0]+o/2:l+=o+t[1],i.push(e[0]+l);return{xPositions:i,width:o}}resetLinearGradient(){if(this.RelativeCoordinate)for(var t=this.shapes.length,e=this.setting.barLinearGradient,n=-1,r=0;r<t;r++){var i=this.shapes[r];if("SuperMap.LevelRenderer.Shape.SmicPolygon"===i.CLASS_NAME){var o=i.style,a=this.location[0]+o.pointList[0][0],s=this.location[0]+o.pointList[1][0];n++,n>=e.length&&(n%=e.length);var l=e[n][0],u=e[n][1],c=new Qa,h=c.getLinearGradient(a,0,s,0,[[0,l],[1,u]]);i.style.color=h}}}}class Js extends Ys{constructor(t,e,n,r,i){super(t,e,n,r,i),this.CLASS_NAME="SuperMap.Feature.Theme.Bar3D"}destroy(){super.destroy()}assembleShapes(){var t=this.setting;if(t.dataViewBoxParameter||("undefined"===typeof t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,25,20,20]:t.dataViewBoxParameter=[5,5,5,5]),t.axisUseArrow="undefined"===typeof t.axisUseArrow||t.axisUseArrow,t.axisXLabelsOffset="undefined"!==typeof t.axisXLabelsOffset?t.axisXLabelsOffset:[-10,10],this.initBaseParameter()){var e=this.DVBCodomain;this.DVBUnitValue=(e[1]-e[0])/this.DVBHeight;var n=this.dataViewBox,r=this.dataValues;if(!(r.length<1)){for(let t=0,n=r.length;t<n;t++)if(r[t]<e[0]||r[t]>e[1])return;var i=this.calculateXShapeInfo();if(i){var o=i.xPositions,a=i.width;("undefined"===typeof t.useBackground||t.useBackground)&&this.shapes.push(Hs.Background(this.shapeFactory,this.chartBox,t)),(!t.axis3DParameter||isNaN(t.axis3DParameter)||t.axis3DParameter<15)&&(t.axis3DParameter=20),("undefined"===typeof t.useAxis||t.useAxis)&&(this.shapes=this.shapes.concat(Hs.GraphAxis(this.shapeFactory,n,t,i)));var s=t.bar3DParameter&&!isNaN(t.bar3DParameter)?t.bar3DParameter:10;for(let i=0;i<r.length;i++){var l=n[1]-(r[i]-e[0])/this.DVBUnitValue,u=o[i]-a/2,c=o[i]+a/2,h=[[u,l],[c,l],[c-s,l+s],[u-s,l+s]],d=[[c,l],[c-s,l+s],[c-s,n[1]+s],[c,n[1]]],f=[[u-s,n[1]+s],[c-s,n[1]+s],[c-s,l+s],[u-s,l+s]];s<=0&&(f=[[u,n[1]],[c,n[1]],[c,l],[u,l]]);var p=new ms(h),g=new ms(d),m=new ms(f);t.barSideStyle=t.barSideStyle?t.barSideStyle:t.barFaceStyle,t.barSideStyleByFields=t.barSideStyleByFields?t.barSideStyleByFields:t.barFaceStyleByFields,t.barSideStyleByCodomain=t.barSideStyleByCodomain?t.barSideStyleByCodomain:t.barFaceStyleByCodomain,t.barTopStyle=t.barTopStyle?t.barTopStyle:t.barFaceStyle,t.barTopStyleByFields=t.barTopStyleByFields?t.barTopStyleByFields:t.barFaceStyleByFields,t.barTopStyleByCodomain=t.barTopStyleByCodomain?t.barTopStyleByCodomain:t.barFaceStyleByCodomain,m.style=Hs.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},t.barFaceStyle,t.barFaceStyleByFields,t.barFaceStyleByCodomain,i,r[i]),g.style=Hs.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},t.barSideStyle,t.barSideStyleByFields,t.barSideStyleByCodomain,i,r[i]),p.style=Hs.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},t.barTopStyle,t.barTopStyleByFields,t.barTopStyleByCodomain,i,r[i]),t.barSideHoverStyle=t.barSideHoverStyle?t.barSideHoverStyle:t.barFaceHoverStyle,t.barTopHoverStyle=t.barTopHoverStyle?t.barTopHoverStyle:t.barFaceHoverStyle,m.highlightStyle=Hs.ShapeStyleTool({stroke:!0},t.barFaceHoverStyle),g.highlightStyle=Hs.ShapeStyleTool({stroke:!0},t.barSideHoverStyle),p.highlightStyle=Hs.ShapeStyleTool({stroke:!0},t.barTopHoverStyle),p.refDataID=g.refDataID=m.refDataID=this.data.id,p.isHoverByRefDataID=g.isHoverByRefDataID=m.isHoverByRefDataID=!0,p.refDataHoverGroup=g.refDataHoverGroup=m.refDataHoverGroup=Wt.createUniqueID("lr_shg"),p.dataInfo=g.dataInfo=m.dataInfo={field:this.fields[i],value:r[i]},"undefined"!==typeof t.barHoverAble&&(p.hoverable=g.hoverable=m.hoverable=t.barHoverAble),"undefined"!==typeof t.barClickAble&&(p.clickable=g.clickable=m.clickable=t.barClickAble),this.shapes.push(this.shapeFactory.createShape(g)),this.shapes.push(this.shapeFactory.createShape(p)),this.shapes.push(this.shapeFactory.createShape(m))}this.shapesConvertToRelativeCoordinate()}}}}calculateXShapeInfo(){var t,e=this.dataViewBox,n=this.setting,r=this.dataValues.length;if(r<1)return null;var i=[],o=0,a=this.DVBWidth;if(n.xShapeBlank&&n.xShapeBlank.length&&3==n.xShapeBlank.length){t=n.xShapeBlank;var s=a-(t[0]+t[2]+(r-1)*t[1]);if(s<=r)return null;o=s/r}else o=a/(2*r+1),t=[o,o,o];for(var l=0,u=0;u<r;u++)0==u?l=t[0]+o/2:l+=o+t[1],i.push(e[0]+l);return{xPositions:i,width:o}}}class Zs extends Ys{constructor(t,e,n,r,i,o){super(t,e,n,r,i,o),this.setting=null,r&&r.codomain&&(this.setting=r,this.DVBCodomain=this.setting.codomain),this.CLASS_NAME="SuperMap.Feature.Theme.RankSymbol"}destroy(){this.setting=null,super.destroy()}initBaseParameter(){var t=!0;if(!this.setting)return!1;var e=this.setting;e.XOffset&&(this.XOffset=e.XOffset),e.YOffset&&(this.YOffset=e.YOffset),this.XOffset=e.XOffset?e.XOffset:0,this.YOffset=e.YOffset?e.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=e.dataViewBoxParameter?e.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var n=this.width,r=this.height,i=this.location;this.origonPoint=[i[0]-n/2,i[1]-r/2];var o=this.origonPoint;this.chartBox=[o[0],o[1]+r,o[0]+n,o[1]];var a=this.chartBox,s=this.DVBParameter;this.dataViewBox=[a[0]+s[0],a[1]-s[1],a[2]-s[2],a[3]+s[3]];var l=this.dataViewBox;return!(l[0]>=l[2]||l[1]<=l[3])&&(this.DVBOrigonPoint=[l[0],l[3]],this.DVBWidth=Math.abs(l[2]-l[0]),this.DVBHeight=Math.abs(l[1]-l[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-o[0],this.DVBOrigonPoint[1]-o[1]],t)}}class Ks extends Zs{constructor(t,e,n,r,i){super(t,e,n,r,i),this.CLASS_NAME="SuperMap.Feature.Theme.Circle"}destroy(){super.destroy()}assembleShapes(){var t="#ff9277";if(!this.setting)return!1;var e=this.setting;if(!e.codomain)return!1;var n="undefined"===typeof e.decimalNumber||isNaN(e.decimalNumber)?-1:e.decimalNumber,r=Ws.getDataValues(this.data,this.fields,n);this.dataValues=r||[];var i=this.dataValues;e.maxR||(e.maxR=100),e.minR||(e.minR=0);var o=this.DVBCodomain;o&&o[1]-o[0]>0?this.DVBUnitValue=e.maxR/(o[1]-o[0]):this.DVBUnitValue=e.maxR;var a=this.DVBUnitValue,s=i[0]*a+e.minR;if(this.width=2*s,this.height=2*s,this.initBaseParameter()&&(!o||!(i[0]<o[0]||i[0]>o[1]))){var l=this.DVBCenterPoint,u=new xs(l[0],l[1],s);u.style=Hs.ShapeStyleTool(null,e.circleStyle,null,null,0),"undefined"!==typeof e.fillColor?u.style.fillColor=e.fillColor:u.style.fillColor=t,u.highlightStyle=Hs.ShapeStyleTool(null,e.circleHoverStyle),"undefined"!==typeof e.circleHoverAble&&(u.hoverable=e.circleHoverAble),"undefined"!==typeof e.circleClickAble&&(u.clickable=e.circleClickAble),u.refDataID=this.data.id,u.dataInfo={field:this.fields[0],r:s,value:i[0]},this.shapes.push(this.shapeFactory.createShape(u)),this.shapesConvertToRelativeCoordinate()}}}class Qs extends Ys{constructor(t,e,n,r,i,o){super(t,e,n,r,i,o),this.CLASS_NAME="SuperMap.Feature.Theme.Line"}destroy(){super.destroy()}assembleShapes(){var t=this.setting;if(t.dataViewBoxParameter||("undefined"===typeof t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,15,15,15]:t.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var e=this.dataViewBox,n=this.DVBCodomain;this.DVBUnitValue=(n[1]-n[0])/this.DVBHeight;var r=this.DVBUnitValue,i=this.dataValues;if(!(i.length<1)){var o=this.calculateXShapeInfo();if(o){var a,s,l=o.xPositions;("undefined"===typeof t.useBackground||t.useBackground)&&this.shapes.push(Hs.Background(this.shapeFactory,this.chartBox,t)),this.shapes=this.shapes.concat(Hs.GraphAxis(this.shapeFactory,e,t,o));for(var u=[],c=[],h=0,d=i.length;h<d;h++){if(i[h]<n[0]||i[h]>n[1])return null;a=l[h],s=e[1]-(i[h]-n[0])/r;var f=new ps(a,s);f.style=Hs.ShapeStyleTool({fillColor:"#ee9900"},t.pointStyle,t.pointStyleByFields,t.pointStyleByCodomain,h,i[h]),f.highlightStyle=Hs.ShapeStyleTool(null,t.pointHoverStyle),"undefined"!==typeof t.pointHoverAble&&(f.hoverable=t.pointHoverAble),"undefined"!==typeof t.pointClickAble&&(f.clickable=t.pointClickAble),f.refDataID=this.data.id,f.dataInfo={field:this.fields[h],value:i[h]},c.push(this.shapeFactory.createShape(f));var p=[a,s];u.push(p)}var g=new gs(u);g.style=Hs.ShapeStyleTool({strokeColor:"#ee9900"},t.lineStyle),g.clickable=!1,g.hoverable=!1;var m=this.shapeFactory.createShape(g);this.shapes.push(m),this.shapes=this.shapes.concat(c),this.shapesConvertToRelativeCoordinate()}}}}calculateXShapeInfo(){var t,e=this.dataViewBox,n=this.setting,r=this.dataValues.length;if(r<1)return null;var i=[],o=0,a=this.DVBWidth,s=0;if(n.xShapeBlank&&n.xShapeBlank.length&&2==n.xShapeBlank.length){t=n.xShapeBlank;var l=a-(t[0]+t[1]);if(l<=r)return null;s=l/(r-1)}else s=a/(r+1),t=[s,s,s];for(var u=0,c=0;c<r;c++)0==c?u=t[0]:u+=s,i.push(e[0]+u);return{xPositions:i,width:o}}}class $s extends Ys{constructor(t,e,n,r,i){super(t,e,n,r,i),this.CLASS_NAME="SuperMap.Feature.Theme.Pie"}destroy(){super.destroy()}assembleShapes(){var t=this.setting,e=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}];if(this.initBaseParameter()){t.useBackground&&this.shapes.push(Hs.Background(this.shapeFactory,this.chartBox,t));var n=this.dataValues;if(!(n.length<1)){var r=this.DVBCodomain;for(let t=0;t<n.length;t++)if(n[t]<r[0]||n[t]>r[1])return;var i=0;for(let t=0;t<n.length;t++)i+=Math.abs(n[t]);this.DVBUnitValue=360/i;for(var o=this.DVBUnitValue,a=this.DVBCenterPoint,s=0,l=0,u=s,c=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,h=0;h<n.length;h++){var d=Math.abs(n[h]);l=0===h?s+d*o:h===d.length-1?u:s+d*o,l-s>=360&&(l=359.9999999);var f=new vs(a[0],a[1],c,s,l);if("undefined"===typeof t.sectorStyleByFields){var p=h%e.length;f.style=Hs.ShapeStyleTool(null,t.sectorStyle,e,null,p)}else f.style=Hs.ShapeStyleTool(null,t.sectorStyle,t.sectorStyleByFields,t.sectorStyleByCodomain,h,n[h]);f.highlightStyle=Hs.ShapeStyleTool(null,t.sectorHoverStyle),"undefined"!==typeof t.sectorHoverAble&&(f.hoverable=t.sectorHoverAble),"undefined"!==typeof t.sectorClickAble&&(f.clickable=t.sectorClickAble),f.refDataID=this.data.id,f.dataInfo={field:this.fields[h],value:n[h]},this.shapes.push(this.shapeFactory.createShape(f)),s=l}this.shapesConvertToRelativeCoordinate()}}}}class tl extends Ys{constructor(t,e,n,r,i,o){super(t,e,n,r,i,o),this.CLASS_NAME="SuperMap.Feature.Theme.Point"}destroy(){super.destroy()}assembleShapes(){var t=this.setting;if(t.dataViewBoxParameter||("undefined"===typeof t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,15,15,15]:t.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var e=this.dataViewBox,n=this.DVBCodomain;this.DVBUnitValue=(n[1]-n[0])/this.DVBHeight;var r=this.DVBUnitValue,i=this.dataValues,o=this.calculateXShapeInfo();if(o){var a,s,l=o.xPositions;("undefined"===typeof t.useBackground||t.useBackground)&&this.shapes.push(Hs.Background(this.shapeFactory,this.chartBox,t)),this.shapes=this.shapes.concat(Hs.GraphAxis(this.shapeFactory,e,t,o));for(var u=0,c=i.length;u<c;u++){if(i[u]<n[0]||i[u]>n[1])return null;a=l[u],s=e[1]-(i[u]-n[0])/r;var h=new ps(a,s);h.style=Hs.ShapeStyleTool({fillColor:"#ee9900"},t.pointStyle,t.pointStyleByFields,t.pointStyleByCodomain,u,i[u]),h.highlightStyle=Hs.ShapeStyleTool(null,t.pointHoverStyle),"undefined"!==typeof t.pointHoverAble&&(h.hoverable=t.pointHoverAble),"undefined"!==typeof t.pointClickAble&&(h.clickable=t.pointClickAble),h.refDataID=this.data.id,h.dataInfo={field:this.fields[u],value:i[u]},this.shapes.push(this.shapeFactory.createShape(h))}this.shapesConvertToRelativeCoordinate()}}}calculateXShapeInfo(){var t,e=this.dataViewBox,n=this.setting,r=this.dataValues.length;if(r<1)return null;var i=[],o=0,a=this.DVBWidth,s=0;if(n.xShapeBlank&&n.xShapeBlank.length&&2==n.xShapeBlank.length){t=n.xShapeBlank;var l=a-(t[0]+t[1]);if(l<=r)return null;s=l/(r-1)}else s=a/(r+1),t=[s,s,s];for(var u=0,c=0;c<r;c++)0==c?u=t[0]:u+=s,i.push(e[0]+u);return{xPositions:i,width:o}}}class el extends Ys{constructor(t,e,n,r,i){super(t,e,n,r,i),this.CLASS_NAME="SuperMap.Feature.Theme.Ring"}destroy(){super.destroy()}assembleShapes(){if(this.initBaseParameter()){var t=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}],e=this.setting;e.useBackground&&this.shapes.push(Hs.Background(this.shapeFactory,this.chartBox,e));var n=this.dataValues;if(!(n.length<1)){var r=this.DVBCodomain;for(let t=0;t<n.length;t++)if(n[t]<r[0]||n[t]>r[1])return;var i=0;for(let t=0;t<n.length;t++)i+=Math.abs(n[t]);this.DVBUnitValue=360/i;for(var o=this.DVBUnitValue,a=this.DVBCenterPoint,s=0,l=0,u=s,c=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,h=e.innerRingRadius>=0&&e.innerRingRadius<c,d="undefined"!==typeof e.innerRingRadius&&!isNaN(e.innerRingRadius)&&h?e.innerRingRadius:0,f=0;f<n.length;f++){var p=Math.abs(n[f]);l=0===f?s+p*o:f===p.length-1?u:s+p*o;var g=new vs(a[0],a[1],c,s,l,d);if("undefined"===typeof e.sectorStyleByFields){var m=f%t.length;g.style=Hs.ShapeStyleTool(null,e.sectorStyle,t,null,m)}else g.style=Hs.ShapeStyleTool(null,e.sectorStyle,e.sectorStyleByFields,e.sectorStyleByCodomain,f,n[f]);g.highlightStyle=Hs.ShapeStyleTool(null,e.sectorHoverStyle),"undefined"!==typeof e.sectorHoverAble&&(g.hoverable=e.sectorHoverAble),"undefined"!==typeof e.sectorClickAble&&(g.clickable=e.sectorClickAble),g.refDataID=this.data.id,g.dataInfo={field:this.fields[f],value:n[f]},this.shapes.push(this.shapeFactory.createShape(g)),s=l}this.shapesConvertToRelativeCoordinate()}}}}class nl extends Ws{constructor(t,e,n,r,i){if(super(t,e),t.geometry&&t.geometry instanceof Ut){this.dataBounds=t.geometry.getBounds(),this.nodesClipPixel=2,this.isHoverAble=!0,this.isMultiHover=!0,this.isClickAble=!0,this.highlightStyle=null,this.shapeOptions={},this.style=n||{},this.CLASS_NAME="SuperMap.Feature.Theme.Vector",this.style=n||{},r&&Wt.copyAttributesWithClip(this,r,["shapeOptions","dataBounds"]),i&&Wt.copyAttributesWithClip(this.shapeOptions,i);var o=t.geometry;this.lonlat=this.dataBounds.getCenterLonLat(),this.location=this.getLocalXY(this.lonlat),o instanceof oe||o instanceof re?this.lineToTF(o):o instanceof ee||(o instanceof te?this.multiPointToTF(o):o instanceof ae?this.multiLineStringToTF(o):o instanceof se?this.multiPolygonToTF(o):o instanceof le?this.polygonToTF(o):o instanceof $t||(o instanceof ne?this.pointToTF(o):o instanceof ue?this.rectangleToTF(o):o instanceof ie&&this.geoTextToTF(o)))}}destroy(){this.style=null,this.dataBounds=null,this.nodesClipPixel=null,this.isHoverAble=null,this.isMultiHover=null,this.isClickAble=null,this.highlightStyle=null,this.shapeOptions=null,super.destroy()}lineToTF(t){for(var e=t.components,n=[],r=[],i=this.location,o=[],a=this.nodesClipPixel,s=0;s<e.length;s++){var l=e[s];if(r=[],n=this.getLocalXY(l),r[0]=n[0]-i[0],r[1]=n[1]-i[1],o.length>0){var u=o[o.length-1];if(Math.abs(u[0]-r[0])<=a&&Math.abs(u[1]-r[1])<=a)continue}o.push(r)}if(o.length<2)return null;var c=new Object;c=Wt.copyAttributesWithClip(c,this.style,["pointList"]),c.pointList=o;var h=new Us({style:c,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(h.highlightStyle=this.highlightStyle),h.refOriginalPosition=this.location,h.refDataID=this.data.id,h.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&Wt.copyAttributesWithClip(h,this.shapeOptions),this.shapes.push(h)}multiPointToTF(t){for(var e=t.components,n=[],r=[],i=this.location,o=[],a=this.nodesClipPixel,s=0;s<e.length;s++){var l=e[s];if(r=[],n=this.getLocalXY(l),r[0]=n[0]-i[0],r[1]=n[1]-i[1],o.length>0){var u=o[o.length-1];if(Math.abs(u[0]-r[0])<=a&&Math.abs(u[1]-r[1])<=a)continue}o.push(r);var c=new Object;c.r=6,c=Wt.copyAttributesWithClip(c,this.style),c.x=r[0],c.y=r[1];var h=new Fs({style:c,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(h.highlightStyle=this.highlightStyle),h.refOriginalPosition=i,h.refDataID=this.data.id,h.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&Wt.copyAttributesWithClip(h,this.shapeOptions),this.shapes.push(h)}}multiLineStringToTF(t){for(var e=t.components,n=0;n<e.length;n++){var r=e[n];this.lineToTF(r)}}multiPolygonToTF(t){for(var e=t.components,n=0;n<e.length;n++){var r=e[n];this.polygonToTF(r)}}pointToTF(t){var e=this.location,n=this.getLocalXY(t),r=new Object;r.r=6,r=Wt.copyAttributesWithClip(r,this.style),r.x=n[0]-e[0],r.y=n[1]-e[1];var i=new Fs({style:r,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(i.highlightStyle=this.highlightStyle),i.refOriginalPosition=e,i.refDataID=this.data.id,i.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&Wt.copyAttributesWithClip(i,this.shapeOptions),this.shapes.push(i)}polygonToTF(t){for(var e=t.components,n=[],r=[],i=this.location,o=[],a=[],s=[],l=this.nodesClipPixel,u=0;u<e.length;u++){var c=e[u].components;if(0===u){o=[];for(var h=0;h<c.length;h++){if(r=[],n=this.getLocalXY(c[h]),r[0]=n[0]-i[0],r[1]=n[1]-i[1],o.length>0){var d=o[o.length-1];if(Math.abs(d[0]-r[0])<=l&&Math.abs(d[1]-r[1])<=l)continue}o.push(r)}}else{a=[];for(var f=0;f<c.length;f++){if(r=[],n=this.getLocalXY(c[f]),r[0]=n[0]-i[0],r[1]=n[1]-i[1],a.length>0){var p=a[a.length-1];if(Math.abs(p[0]-r[0])<=l&&Math.abs(p[1]-r[1])<=l)continue}a.push(r)}}a.length<2||s.push(a)}if(!(o.length<2)){var g={};g=Wt.copyAttributesWithClip(g,this.style,["pointList"]),g.pointList=o;var m=new zs({style:g,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(m.highlightStyle=this.highlightStyle),m.refOriginalPosition=this.location,m.refDataID=this.data.id,m.isHoverByRefDataID=this.isMultiHover,s.length>0&&(m.holePolygonPointLists=s),this.shapeOptions&&Wt.copyAttributesWithClip(m,this.shapeOptions),this.shapes.push(m)}}rectangleToTF(t){var e=this.location,n=new Kt(t.x,t.y),r=this.layer.map.getResolution(),i=this.getLocalXY(n),o=new Object;o.r=6,o=Wt.copyAttributesWithClip(o,this.style),o.x=i[0]-e[0],o.y=i[1]-e[1]-2*t.width/r,o.width=t.width/r,o.height=t.height/r;var a=new qs({style:o,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(a.highlightStyle=this.highlightStyle),a.refOriginalPosition=e,a.refDataID=this.data.id,a.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&Wt.copyAttributesWithClip(a,this.shapeOptions),this.shapes.push(a)}geoTextToTF(t){var e=this.location,n=this.getLocalXY(t),r=new Object;r.r=6,r=Wt.copyAttributesWithClip(r,this.style,["x","y","text"]),r.x=n[0]-e[0],r.y=n[1]-e[1],r.text=t.text;var i=new js({style:r,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(i.highlightStyle=this.highlightStyle),i.refOriginalPosition=e,i.refDataID=this.data.id,i.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&Wt.copyAttributesWithClip(i,this.shapeOptions),this.shapes.push(i)}updateAndAddShapes(){var t=this.getLocalXY(this.lonlat);this.location=t;for(var e=this.layer.renderer,n=0,r=this.shapes.length;n<r;n++){var i=this.shapes[n];i.refOriginalPosition=t,e.addShape(i)}}getShapesCount(){return this.shapes.length}getLocalXY(t){return this.layer.getLocalXY(t)}}class rl extends(Dt(ws,Rs)){constructor(t){super(t),t=t||{},this.id=null,this.type="group",this.clipShape=null,this._children=[],this._storage=null,this.__dirty=!0,this.ignore=!1,Wt.extend(this,t),this.id=this.id||Wt.createUniqueID("smShapeGroup_"),this.CLASS_NAME="SuperMap.LevelRenderer.Group"}destroy(){this.id=null,this.type=null,this.clipShape=null,this._children=null,this._storage=null,this.__dirty=null,this.ignore=null,super.destroy()}children(){return this._children.slice()}childAt(t){return this._children[t]}addChild(t){t!=this&&t.parent!=this&&(t.parent&&t.parent.removeChild(t),this._children.push(t),t.parent=this,this._storage&&this._storage!==t._storage&&(this._storage.addToMap(t),t instanceof rl&&t.addChildrenToStorage(this._storage)))}removeChild(t){var e=Wt.indexOf(this._children,t);this._children.splice(e,1),t.parent=null,this._storage&&(this._storage.delFromMap(t.id),t instanceof rl&&t.delChildrenFromStorage(this._storage))}eachChild(t,e){for(var n=!!e,r=0;r<this._children.length;r++){var i=this._children[r];n?t.call(e,i):t(i)}}traverse(t,e){for(var n=!!e,r=0;r<this._children.length;r++){var i=this._children[r];n?t.call(e,i):t(i),"group"===i.type&&i.traverse(t,e)}}addChildrenToStorage(t){for(var e=0;e<this._children.length;e++){var n=this._children[e];t.addToMap(n),"group"===n.type&&n.addChildrenToStorage(t)}}delChildrenFromStorage(t){for(var e=0;e<this._children.length;e++){var n=this._children[e];t.delFromMap(n.id),"group"===n.type&&n.delChildrenFromStorage(t)}}modSelf(){this.__dirty=!0}}class il{constructor(){this._elements={},this._hoverElements=[],this._roots=[],this._shapeList=[],this._shapeListOffset=0,this.CLASS_NAME="SuperMap.LevelRenderer.Storage"}destroy(){this.dispose(),this._shapeList=null,this._shapeListOffset=null}iterShape(t,e){if(!e){var n={hover:!1,normal:"down",update:!1};e=n}if(e.hover)for(var r=0,i=this._hoverElements.length;r<i;r++){var o=this._hoverElements[r];if(o.updateTransform(),t(o))return this}switch(e.update&&this.updateShapeList(),e.normal){case"down":{let e=this._shapeList.length;while(e--)if(t(this._shapeList[e]))return this;break}default:for(let e=0,n=this._shapeList.length;e<n;e++)if(t(this._shapeList[e]))return this;break}return this}getHoverShapes(t){var e=[],n=this._hoverElements.length;for(let s=0;s<n;s++){e.push(this._hoverElements[s]);var r=this._hoverElements[s].hoverConnect;if(r){var i;r=r instanceof Array?r:[r];for(var o=0,a=r.length;o<a;o++)i=r[o].id?r[o]:this.get(r[o]),i&&e.push(i)}}if(e.sort(il.shapeCompareFunc),t)for(let s=0,l=e.length;s<l;s++)e[s].updateTransform();return e}getShapeList(t){return t&&this.updateShapeList(),this._shapeList}updateShapeList(){this._shapeListOffset=0;var t=this._roots.length;for(let n=0;n<t;n++){let t=this._roots[n];this._updateAndAddShape(t)}this._shapeList.length=this._shapeListOffset;var e=this._shapeList.length;for(let n=0;n<e;n++)this._shapeList[n].__renderidx=n;this._shapeList.sort(il.shapeCompareFunc)}_updateAndAddShape(t,e){if(!t.ignore)if(t.updateTransform(),"group"==t.type){t.clipShape&&(t.clipShape.parent=t,t.clipShape.updateTransform(),e?(e=e.slice(),e.push(t.clipShape)):e=[t.clipShape]);for(var n=0;n<t._children.length;n++){var r=t._children[n];r.__dirty=t.__dirty||r.__dirty,this._updateAndAddShape(r,e)}t.__dirty=!1}else t.__clipShapes=e,this._shapeList[this._shapeListOffset++]=t}mod(t,e){var n=this._elements[t];if(n&&(n.modSelf(),e))if(e.parent||e._storage||e.__startClip){var r={};for(var i in e)"parent"!=i&&"_storage"!=i&&"__startClip"!=i&&e.hasOwnProperty(i)&&(r[i]=e[i]);(new Ka).merge(n,r,!0)}else(new Ka).merge(n,e,!0);return this}drift(t,e,n){var r=this._elements[t];return r&&(r.needTransform=!0,"horizontal"===r.draggable?n=0:"vertical"===r.draggable&&(e=0),(!r.ondrift||r.ondrift&&!r.ondrift(e,n))&&r.drift(e,n)),this}addHover(t){return t.updateNeedTransform(),this._hoverElements.push(t),this}delHover(){return this._hoverElements=[],this}hasHoverShape(){return this._hoverElements.length>0}addRoot(t){t instanceof rl&&t.addChildrenToStorage(this),this.addToMap(t),this._roots.push(t)}delRoot(t){if("undefined"==typeof t){for(var e=0;e<this._roots.length;e++){var n=this._roots[e];n instanceof rl&&n.delChildrenFromStorage(this)}return this._elements={},this._hoverElements=[],void(this._roots=[])}if(t instanceof Array){var r=t.length;for(let e=0;e<r;e++)this.delRoot(t[e])}else{var i;i="string"==typeof t?this._elements[t]:t;var o=(new Ka).indexOf(this._roots,i);o>=0&&(this.delFromMap(i.id),this._roots.splice(o,1),i instanceof rl&&i.delChildrenFromStorage(this))}}addToMap(t){return t instanceof rl&&(t._storage=this),t.modSelf(),this._elements[t.id]=t,this}get(t){return this._elements[t]}delFromMap(t){var e=this._elements[t];return e&&(delete this._elements[t],e instanceof rl&&(e._storage=null)),this}dispose(){this._elements=null,this._roots=null,this._hoverElements=null}static shapeCompareFunc(t,e){return t.zlevel==e.zlevel?t.z==e.z?t.__renderidx-e.__renderidx:t.z-e.z:t.zlevel-e.zlevel}}class ol{constructor(t,e){this.root=t,this.storage=e,this._domRoot=null,this._layers={},this._zlevelList=[],this._layerConfig={},this._bgDom=null,this.shapeToImage=null,ol.devicePixelRatio=Math.max(window.devicePixelRatio||1,1),this.CLASS_NAME="SuperMap.LevelRenderer.Painter",this.root.innerHTML="",this._width=this._getWidth(),this._height=this._getHeight();var n=document.createElement("div");this._domRoot=n,n.style.position="relative",n.style.overflow="hidden",n.style.width=this._width+"px",n.style.height=this._height+"px",this.root.appendChild(n),this.shapeToImage=this._createShapeToImageProcessor(),this._bgDom=ol.createDom(Wt.createUniqueID("SuperMap.Theme_background_"),"div",this),n.appendChild(this._bgDom),this._bgDom.onselectstart=o,this._bgDom.style["-webkit-user-select"]="none",this._bgDom.style["user-select"]="none",this._bgDom.style["-webkit-touch-callout"]="none";var r=new al(Wt.createUniqueID("_highLightLayer_"),this);this._layers["hover"]=r,n.appendChild(r.dom),r.initContext(),r.dom.onselectstart=o,r.dom.style["-webkit-user-select"]="none",r.dom.style["user-select"]="none",r.dom.style["-webkit-touch-callout"]="none";var i=this;function o(){return!1}this.updatePainter=function(t,e){i.refreshShapes(t,e)}}destroy(){this.dispose(),this._zlevelList=null,this._layerConfig=null,this._bgDom=null,this.shapeToImage=null}render(t){return this.refresh(t,!0),this}refresh(t,e){var n=this.storage.getShapeList(!0);return this._paintList(n,e),"function"==typeof t&&t(),this}_paintList(t,e){var n,r,i;for(var o in"undefined"==typeof e&&(e=!1),this._updateLayerStatus(t),this._layers)"hover"!==o&&(this._layers[o].unusedCount++,this._layers[o].updateTransform());for(var a=[],s=0,l=t.length;s<l;s++){var u=t[s];if(r!==u.zlevel&&(n&&n.needTransform&&i.restore(),n=this.getLayer(u.zlevel),i=n.ctx,r=u.zlevel,n.unusedCount=0,(n.dirty||e)&&n.clear(),n.needTransform&&(i.save(),n.setTransform(i))),i&&u.__startClip){var c=u.__startClip;if(i.save(),c.needTransform){let t=c.transform;Ns.Util_matrix.invert(a,t),i.transform(t[0],t[1],t[2],t[3],t[4],t[5])}if(i.beginPath(),c.buildPath(i,c.style),i.clip(),c.needTransform){let t=a;i.transform(t[0],t[1],t[2],t[3],t[4],t[5])}}if((n&&n.dirty||e)&&!u.invisible&&(!u.onbrush||u.onbrush&&!u.onbrush(i,!1)))if(ks.catchBrushException)try{u.brush(i,!1,this.updatePainter)}catch(d){Ns.Util_log(d,"brush error of "+u.type,u)}else u.brush(i,!1,this.updatePainter);i&&u.__stopClip&&i.restore(),u.__dirty=!1}i&&n&&n.needTransform&&i.restore();for(let f in this._layers)if("hover"!==f){var h=this._layers[f];h.dirty=!1,1==h.unusedCount&&h.clear()}}getLayer(t){var e=this._layers[t];if(!e){var n=this._zlevelList.length,r=null,i=-1;if(n>0&&t>this._zlevelList[0]){for(i=0;i<n-1;i++)if(this._zlevelList[i]<t&&this._zlevelList[i+1]>t)break;r=this._layers[this._zlevelList[i]]}this._zlevelList.splice(i+1,0,t),e=new al(Wt.createUniqueID("_levelLayer_"+t),this);var o=r?r.dom:this._bgDom;o.nextSibling?o.parentNode.insertBefore(e.dom,o.nextSibling):o.parentNode.appendChild(e.dom),e.initContext(),this._layers[t]=e,this._layerConfig[t]&&(new Ka).merge(e,this._layerConfig[t],!0),e.updateTransform()}return e}getLayers(){return this._layers}_updateLayerStatus(t){var e=this._layers,n={};for(let a in e)"hover"!==a&&(n[a]=e[a].elCount,e[a].elCount=0);for(let a=0;a<t.length;a++){var r=t[a],i=r.zlevel,o=e[i];if(o){if(o.elCount++,o.dirty)continue;o.dirty=r.__dirty}}for(let a in e)"hover"!==a&&n[a]!==e[a].elCount&&(e[a].dirty=!0)}refreshShapes(t,e){for(var n=0,r=t.length;n<r;n++){var i=t[n];this.storage.mod(i.id)}return this.refresh(e),this}clear(){for(var t in this._layers)"hover"!=t&&this._layers[t].clear();return this}modLayer(t,e){if(e){this._layerConfig[t]?(new Ka).merge(this._layerConfig[t],e,!0):this._layerConfig[t]=e;var n=this._layers[t];n&&(new Ka).merge(n,this._layerConfig[t],!0)}}delLayer(t){var e=this._layers[t];e&&(this.modLayer(t,{position:e.position,rotation:e.rotation,scale:e.scale}),e.dom.parentNode.removeChild(e.dom),delete this._layers[t],this._zlevelList.splice((new Ka).indexOf(this._zlevelList,t),1))}refreshHover(){this.clearHover();for(var t=this.storage.getHoverShapes(!0),e=0,n=t.length;e<n;e++)this._brushHover(t[e]);return this.storage.delHover(),this}clearHover(){var t=this._layers.hover;return t&&t.clear(),this}resize(){var t=this._domRoot;t.style.display="none";var e=this._getWidth(),n=this._getHeight();if(t.style.display="",this._width!=e||n!=this._height){for(var r in this._width=e,this._height=n,t.style.width=e+"px",t.style.height=n+"px",this._layers)this._layers[r].resize(e,n);this.refresh(null,!0)}return this}clearLayer(t){var e=this._layers[t];e&&e.clear()}dispose(){this.root.innerHTML="",this.root=null,this.storage=null,this._domRoot=null,this._layers=null}getDomHover(){return this._layers.hover.dom}toDataURL(t,e,n){var r=ol.createDom(Wt.createUniqueID("SuperMap.Theme.image_"),"canvas",this);this._bgDom.appendChild(r);var i=r.getContext("2d");1!=ol.devicePixelRatio&&i.scale(ol.devicePixelRatio,ol.devicePixelRatio),i.fillStyle=e||"#fff",i.rect(0,0,this._width*ol.devicePixelRatio,this._height*ol.devicePixelRatio),i.fill();var o=this;this.storage.iterShape((function(t){if(!t.invisible&&(!t.onbrush||t.onbrush&&!t.onbrush(i,!1)))if(ks.catchBrushException)try{t.brush(i,!1,o.updatePainter)}catch(e){Ns.Util_log(e,"brush error of "+t.type,t)}else t.brush(i,!1,o.updatePainter)}),{normal:"up",update:!0});var a=r.toDataURL(t,n);return i=null,this._bgDom.removeChild(r),a}getWidth(){return this._width}getHeight(){return this._height}_getWidth(){var t=this.root,e=t.currentStyle||document.defaultView.getComputedStyle(t);return((t.clientWidth||parseInt(e.width,10))-parseInt(e.paddingLeft,10)-parseInt(e.paddingRight,10)).toFixed(0)-0}_getHeight(){var t=this.root,e=t.currentStyle||document.defaultView.getComputedStyle(t);return((t.clientHeight||parseInt(e.height,10))-parseInt(e.paddingTop,10)-parseInt(e.paddingBottom,10)).toFixed(0)-0}_brushHover(t){var e=this._layers.hover.ctx;if(!t.onbrush||t.onbrush&&!t.onbrush(e,!0)){var n=this.getLayer(t.zlevel);if(n.needTransform&&(e.save(),n.setTransform(e)),ks.catchBrushException)try{t.brush(e,!0,this.updatePainter)}catch(r){Ns.Util_log(r,"hoverBrush error of "+t.type,t)}else t.brush(e,!0,this.updatePainter);n.needTransform&&e.restore()}}_shapeToImage(t,e,n,r,i){var o=document.createElement("canvas"),a=o.getContext("2d"),s=i||window.devicePixelRatio||1;o.style.width=n+"px",o.style.height=r+"px",o.setAttribute("width",n*s),o.setAttribute("height",r*s),a.clearRect(0,0,n*s,r*s);var l={position:e.position,rotation:e.rotation,scale:e.scale};e.position=[0,0,0],e.rotation=0,e.scale=[1,1],e&&e.brush(a,!1);var u=new Gs({id:t,style:{x:0,y:0,image:o}});return null!=l.position&&(u.position=e.position=l.position),null!=l.rotation&&(u.rotation=e.rotation=l.rotation),null!=l.scale&&(u.scale=e.scale=l.scale),u}_createShapeToImageProcessor(){var t=this;return function(e,n,r,i){return t._shapeToImage(e,n,r,i,ol.devicePixelRatio)}}updateHoverLayer(t){if(!(t instanceof Array))return this;this.clearHover(),this.storage.delHover();for(var e=0;e<t.length;e++)this.storage.addHover(t[e]),this._brushHover(t[e])}static createDom(t,e,n){var r=document.createElement(e),i=n._width,o=n._height;return r.style.position="absolute",r.style.left=0,r.style.top=0,r.style.width=i+"px",r.style.height=o+"px",r.setAttribute("width",i*ol.devicePixelRatio),r.setAttribute("height",o*ol.devicePixelRatio),r.setAttribute("id",t),r}}class al extends Rs{constructor(t,e){function n(){return!1}super(t,e),this.dom=null,this.domBack=null,this.ctxBack=null,this.painter=e,this.unusedCount=0,this.config=null,this.dirty=!0,this.elCount=0,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.zoomable=!1,this.panable=!1,this.maxZoom=1/0,this.minZoom=0,this.ctx=null,this.dom=ol.createDom(Wt.createUniqueID("SuperMap.Theme"+t),"canvas",e),this.dom.onselectstart=n,this.dom.style["-webkit-user-select"]="none",this.dom.style["user-select"]="none",this.dom.style["-webkit-touch-callout"]="none",this.CLASS_NAME="SuperMap.LevelRenderer.Painter.Layer"}destroy(){this.dom=null,this.domBack=null,this.ctxBack=null,this.painter=null,this.unusedCount=null,this.config=null,this.dirty=null,this.elCount=null,this.clearColor=null,this.motionBlur=null,this.lastFrameAlpha=null,this.zoomable=null,this.panable=null,this.maxZoom=null,this.minZoom=null,this.ctx=null,Rs.destroy.apply(this,arguments)}initContext(){this.ctx=this.dom.getContext("2d"),1!=ol.devicePixelRatio&&this.ctx.scale(ol.devicePixelRatio,ol.devicePixelRatio)}createBackBuffer(){this.domBack=ol.createDom(Wt.createUniqueID("SuperMap.Theme.back-"+this.id),"canvas",this.painter),this.ctxBack=this.domBack.getContext("2d"),1!=ol.devicePixelRatio&&this.ctxBack.scale(ol.devicePixelRatio,ol.devicePixelRatio)}resize(t,e){this.dom.style.width=t+"px",this.dom.style.height=e+"px",this.dom.setAttribute("width",t*ol.devicePixelRatio),this.dom.setAttribute("height",e*ol.devicePixelRatio),1!=ol.devicePixelRatio&&this.ctx.scale(ol.devicePixelRatio,ol.devicePixelRatio),this.domBack&&(this.domBack.setAttribute("width",t*ol.devicePixelRatio),this.domBack.setAttribute("height",e*ol.devicePixelRatio),1!=ol.devicePixelRatio&&this.ctxBack.scale(ol.devicePixelRatio,ol.devicePixelRatio))}clear(){var t=this.dom,e=this.ctx,n=t.width,r=t.height,i=this.clearColor,o=this.motionBlur,a=this.lastFrameAlpha;if(o&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(t,0,0,n/ol.devicePixelRatio,r/ol.devicePixelRatio)),i?(e.save(),e.fillStyle=this.config.clearColor,e.fillRect(0,0,n/ol.devicePixelRatio,r/ol.devicePixelRatio),e.restore()):e.clearRect(0,0,n/ol.devicePixelRatio,r/ol.devicePixelRatio),o){var s=this.domBack;e.save(),e.globalAlpha=a,e.drawImage(s,0,0,n/ol.devicePixelRatio,r/ol.devicePixelRatio),e.restore()}}}class sl extends ws{constructor(t,e,n){super(t,e,n),this.root=t,this.storage=e,this.painter=n,this._lastX=0,this._lastY=0,this._mouseX=0,this._mouseY=0,this._findHover=null,this._domHover=null,this._findHover=o(s,this),this._domHover=n.getDomHover(),this.CLASS_NAME="SuperMap.LevelRenderer.Handler";var r={resize:function(t){t=t||window.event,this._lastHover=null,this._isMouseDown=0,this.dispatch(ks.EVENT.RESIZE,t)},click:function(t){t=this._zrenderEventFixed(t);var e=this._lastHover;(e&&e.clickable||!e)&&this._clickThreshold<10&&this._dispatchAgency(e,ks.EVENT.CLICK,t),this._mousemoveHandler(t)},dblclick:function(t){t=t||window.event,t=this._zrenderEventFixed(t);var e=this._lastHover;(e&&e.clickable||!e)&&this._clickThreshold<5&&this._dispatchAgency(e,ks.EVENT.DBLCLICK,t),this._mousemoveHandler(t)},mousewheel:function(t){t=this._zrenderEventFixed(t);var e=t.wheelDelta||-t.detail,n=e>0?1.1:1/1.1,r=this.painter.getLayers(),i=!1;for(var o in r)if("hover"!==o){var a=r[o],s=a.position;if(a.zoomable){a.__zoom=a.__zoom||1;var l=a.__zoom;l*=n,l=Math.max(Math.min(a.maxZoom,l),a.minZoom),n=l/a.__zoom,a.__zoom=l,s[0]-=(this._mouseX-s[0])*(n-1),s[1]-=(this._mouseY-s[1])*(n-1),a.scale[0]*=n,a.scale[1]*=n,a.dirty=!0,i=!0}}i&&this.painter.refresh(),this._dispatchAgency(this._lastHover,ks.EVENT.MOUSEWHEEL,t),this._mousemoveHandler(t)},mousemove:function(t){this._clickThreshold++,t=this._zrenderEventFixed(t),this._lastX=this._mouseX,this._lastY=this._mouseY,this._mouseX=Ns.Util_event.getX(t),this._mouseY=Ns.Util_event.getY(t);var e=this._mouseX-this._lastX,n=this._mouseY-this._lastY;this._processDragStart(t),this._hasfound=0,this._event=t,this._iterateAndFindHover(),this._hasfound||((!this._draggingTarget||this._lastHover&&this._lastHover!=this._draggingTarget)&&(this._processOutShape(t),this._processDragLeave(t)),this._lastHover=null,this.storage.delHover(),this.painter.clearHover());var r="";if(this._draggingTarget)this.storage.drift(this._draggingTarget.id,e,n),this._draggingTarget.modSelf(),this.storage.addHover(this._draggingTarget);else if(this._isMouseDown){var i=this.painter.getLayers(),o=!1;for(var a in i)if("hover"!==a){var s=i[a];s.panable&&(r="move",s.position[0]+=e,s.position[1]+=n,o=!0,s.dirty=!0)}o&&this.painter.refresh()}this._draggingTarget||this._hasfound&&this._lastHover.draggable?r="move":this._hasfound&&this._lastHover.clickable&&(r="pointer"),this.root.style.cursor=r,this._dispatchAgency(this._lastHover,ks.EVENT.MOUSEMOVE,t),(this._draggingTarget||this._hasfound||this.storage.hasHoverShape())&&this.painter.refreshHover()},mouseout:function(t){t=this._zrenderEventFixed(t);var e=t.toElement||t.relatedTarget;if(e!=this.root)while(e&&9!=e.nodeType){if(e==this.root)return void this._mousemoveHandler(t);e=e.parentNode}t.zrenderX=this._lastX,t.zrenderY=this._lastY,this.root.style.cursor="",this._isMouseDown=0,this._processOutShape(t),this._processDrop(t),this._processDragEnd(t),this.painter.refreshHover(),this.dispatch(ks.EVENT.GLOBALOUT,t)},mousedown:function(t){if(this._clickThreshold=0,2==this._lastDownButton)return this._lastDownButton=t.button,void(this._mouseDownTarget=null);this._lastMouseDownMoment=new Date,t=this._zrenderEventFixed(t),this._isMouseDown=1,this._mouseDownTarget=this._lastHover,this._dispatchAgency(this._lastHover,ks.EVENT.MOUSEDOWN,t),this._lastDownButton=t.button},mouseup:function(t){t=this._zrenderEventFixed(t),this.root.style.cursor="",this._isMouseDown=0,this._mouseDownTarget=null,this._dispatchAgency(this._lastHover,ks.EVENT.MOUSEUP,t),this._processDrop(t),this._processDragEnd(t)},touchstart:function(t){t=this._zrenderEventFixed(t,!0),this._lastTouchMoment=new Date,this._mobildFindFixed(t),this._mousedownHandler(t)},touchmove:function(t){t=this._zrenderEventFixed(t,!0),this._mousemoveHandler(t),this._isDragging&&Ns.Util_event.stop(t)},touchend:function(t){t=this._zrenderEventFixed(t,!0),this._mouseupHandler(t);var e=new Date;e-this._lastTouchMoment<ks.EVENT.touchClickDelay&&(this._mobildFindFixed(t),this._clickHandler(t),e-this._lastClickMoment<ks.EVENT.touchClickDelay/2&&(this._dblclickHandler(t),this._lastHover&&this._lastHover.clickable&&Ns.Util_event.stop(t)),this._lastClickMoment=e),this.painter.clearHover()}};function i(t,e){return function(n){return t.call(e,n)}}function o(t,e){return function(n,r,i){return t.call(e,n,r,i)}}function a(t){var e=["resize","click","dblclick","mousewheel","mousemove","mouseout","mouseup","mousedown","touchstart","touchend","touchmove"],n=e.length;while(n--){var o=e[n];t["_"+o+"Handler"]=i(r[o],t)}}function s(t,e,n){var r=this;if(r._draggingTarget&&r._draggingTarget.id==t.id||t.isSilent())return!1;var i=r._event;if(t.isCover(e,n)){if(t.hoverable)if(t.isHoverByRefDataID&&!0===t.isHoverByRefDataID){if(t.refDataID){var o=t.refDataID,a=null;t.refDataHoverGroup&&(a=t.refDataHoverGroup);for(var s=r.storage._shapeList,l=0,u=s.length;l<u;l++){var c=s[l];c.refDataID&&o===c.refDataID&&(a?c.refDataHoverGroup&&a===c.refDataHoverGroup&&r.storage.addHover(c):r.storage.addHover(c))}}}else r.storage.addHover(t);var h=t.parent;while(h){if(h.clipShape&&!h.clipShape.isCover(r._mouseX,r._mouseY))return!1;h=h.parent}return r._lastHover!=t&&(r._processOutShape(i),r._processDragLeave(i),r._lastHover=t,r._processDragEnter(i)),r._processOverShape(i),r._processDragOver(i),r._hasfound=1,!0}return!1}a(this),window.addEventListener?(window.addEventListener("resize",this._resizeHandler),Ns.Util_env.os.tablet||Ns.Util_env.os.phone?(t.addEventListener("touchstart",this._touchstartHandler),t.addEventListener("touchmove",this._touchmoveHandler),t.addEventListener("touchend",this._touchendHandler)):(t.addEventListener("click",this._clickHandler),t.addEventListener("dblclick",this._dblclickHandler),t.addEventListener("mousewheel",this._mousewheelHandler),t.addEventListener("mousemove",this._mousemoveHandler),t.addEventListener("mousedown",this._mousedownHandler),t.addEventListener("mouseup",this._mouseupHandler)),t.addEventListener("DOMMouseScroll",this._mousewheelHandler),t.addEventListener("mouseout",this._mouseoutHandler)):(window.attachEvent("onresize",this._resizeHandler),t.attachEvent("onclick",this._clickHandler),t.ondblclick=this._dblclickHandler,t.attachEvent("onmousewheel",this._mousewheelHandler),t.attachEvent("onmousemove",this._mousemoveHandler),t.attachEvent("onmouseout",this._mouseoutHandler),t.attachEvent("onmousedown",this._mousedownHandler),t.attachEvent("onmouseup",this._mouseupHandler))}destroy(){this.dispose(),this._lastX=null,this._lastY=null,this._mouseX=null,this._mouseY=null,this._findHover=null,ws.prototype.destroy.apply(this,arguments)}on(t,e){return this.bind(t,e),this}un(t,e){return this.unbind(t,e),this}trigger(t,e){var n=ks.EVENT;switch(t){case n.RESIZE:case n.CLICK:case n.DBLCLICK:case n.MOUSEWHEEL:case n.MOUSEMOVE:case n.MOUSEDOWN:case n.MOUSEUP:case n.MOUSEOUT:this["_"+t+"Handler"](e);break}}dispose(){var t=this.root;window.removeEventListener?(window.removeEventListener("resize",this._resizeHandler),Ns.Util_env.os.tablet||Ns.Util_env.os.phone?(t.removeEventListener("touchstart",this._touchstartHandler),t.removeEventListener("touchmove",this._touchmoveHandler),t.removeEventListener("touchend",this._touchendHandler)):(t.removeEventListener("click",this._clickHandler),t.removeEventListener("dblclick",this._dblclickHandler),t.removeEventListener("mousewheel",this._mousewheelHandler),t.removeEventListener("mousemove",this._mousemoveHandler),t.removeEventListener("mousedown",this._mousedownHandler),t.removeEventListener("mouseup",this._mouseupHandler)),t.removeEventListener("DOMMouseScroll",this._mousewheelHandler),t.removeEventListener("mouseout",this._mouseoutHandler)):(window.detachEvent("onresize",this._resizeHandler),t.detachEvent("onclick",this._clickHandler),t.detachEvent("dblclick",this._dblclickHandler),t.detachEvent("onmousewheel",this._mousewheelHandler),t.detachEvent("onmousemove",this._mousemoveHandler),t.detachEvent("onmouseout",this._mouseoutHandler),t.detachEvent("onmousedown",this._mousedownHandler),t.detachEvent("onmouseup",this._mouseupHandler)),this.root=null,this._domHover=null,this.storage=null,this.painter=null,this.un()}_processDragStart(t){var e=this._lastHover;if(this._isMouseDown&&e&&e.draggable&&!this._draggingTarget&&this._mouseDownTarget==e){if(e.dragEnableTime&&new Date-this._lastMouseDownMoment<e.dragEnableTime)return;var n=e;this._draggingTarget=n,this._isDragging=1,n.invisible=!0,this.storage.mod(n.id),this._dispatchAgency(n,ks.EVENT.DRAGSTART,t),this.painter.refresh()}}_processDragEnter(t){this._draggingTarget&&this._dispatchAgency(this._lastHover,ks.EVENT.DRAGENTER,t,this._draggingTarget)}_processDragOver(t){this._draggingTarget&&this._dispatchAgency(this._lastHover,ks.EVENT.DRAGOVER,t,this._draggingTarget)}_processDragLeave(t){this._draggingTarget&&this._dispatchAgency(this._lastHover,ks.EVENT.DRAGLEAVE,t,this._draggingTarget)}_processDrop(t){this._draggingTarget&&(this._draggingTarget.invisible=!1,this.storage.mod(this._draggingTarget.id),this.painter.refresh(),this._dispatchAgency(this._lastHover,ks.EVENT.DROP,t,this._draggingTarget))}_processDragEnd(t){this._draggingTarget&&(this._dispatchAgency(this._draggingTarget,ks.EVENT.DRAGEND,t),this._lastHover=null),this._isDragging=0,this._draggingTarget=null}_processOverShape(t){this._dispatchAgency(this._lastHover,ks.EVENT.MOUSEOVER,t)}_processOutShape(t){this._dispatchAgency(this._lastHover,ks.EVENT.MOUSEOUT,t)}_dispatchAgency(t,e,n,r){var i="on"+e,o={type:e,event:n,target:t,cancelBubble:!1},a=t;r&&(o.dragged=r);while(a)if(a[i]&&(o.cancelBubble=a[i](o)),a.dispatch(e,o),a=a.parent,o.cancelBubble)break;t?o.cancelBubble||this.dispatch(e,o):r||this.dispatch(e,{type:e,event:n})}_iterateAndFindHover(){for(var t,e,n=Ns.Util_matrix.create(),r=this.storage.getShapeList(),i=[0,0],o=r.length-1;o>=0;o--){var a=r[o];if(t!==a.zlevel&&(e=this.painter.getLayer(a.zlevel,e),i[0]=this._mouseX,i[1]=this._mouseY,e.needTransform&&(Ns.Util_matrix.invert(n,e.transform),Ns.Util_vector.applyTransform(i,i,n))),this._findHover(a,i[0],i[1]))break}}_mobildFindFixed(t){var e=[{x:10},{x:-20},{x:10,y:10},{y:-20}];this._lastHover=null,this._mouseX=t.zrenderX,this._mouseY=t.zrenderY,this._event=t,this._iterateAndFindHover();for(var n=0;!this._lastHover&&n<e.length;n++){var r=e[n];r.x&&(this._mouseX+=r.x),r.y&&(this._mouseX+=r.y),this._iterateAndFindHover()}this._lastHover&&(t.zrenderX=this._mouseX,t.zrenderY=this._mouseY)}_zrenderEventFixed(t,e){if(t.zrenderFixed)return t;if(e){var n="touchend"!=t.type?t.targetTouches[0]:t.changedTouches[0];if(n){var r=this.root.getBoundingClientRect();t.zrenderX=n.clientX-r.left,t.zrenderY=n.clientY-r.top}}else{t=t||window.event;var i=t.toElement||t.relatedTarget||t.srcElement||t.target;i&&i!=this._domHover&&(t.zrenderX=("undefined"!=typeof t.offsetX?t.offsetX:t.layerX)+i.offsetLeft,t.zrenderY=("undefined"!=typeof t.offsetY?t.offsetY:t.layerY)+i.offsetTop)}return t.zrenderFixed=1,t}getLastHoverOne(){return this._lastHover?this._lastHover:null}}class ll{constructor(){this.CLASS_NAME="SuperMap.LevelRenderer.Animation.easing"}destroy(){}Linear(t){return t}QuadraticIn(t){return t*t}QuadraticOut(t){return t*(2-t)}QuadraticInOut(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}CubicIn(t){return t*t*t}CubicOut(t){return--t*t*t+1}CubicInOut(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}QuarticIn(t){return t*t*t*t}QuarticOut(t){return 1- --t*t*t*t}QuarticInOut(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}QuinticIn(t){return t*t*t*t*t}QuinticOut(t){return--t*t*t*t*t+1}QuinticInOut(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}SinusoidalIn(t){return 1-Math.cos(t*Math.PI/2)}SinusoidalOut(t){return Math.sin(t*Math.PI/2)}SinusoidalInOut(t){return.5*(1-Math.cos(Math.PI*t))}ExponentialIn(t){return 0===t?0:Math.pow(1024,t-1)}ExponentialOut(t){return 1===t?1:1-Math.pow(2,-10*t)}ExponentialInOut(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}CircularIn(t){return 1-Math.sqrt(1-t*t)}CircularOut(t){return Math.sqrt(1- --t*t)}CircularInOut(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}ElasticIn(t){var e,n=.1,r=.4;return 0===t?0:1===t?1:(n<1?(n=1,e=r/4):e=r*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r))}ElasticOut(t){var e,n=.1,r=.4;return 0===t?0:1===t?1:(n<1?(n=1,e=r/4):e=r*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/r)+1)}ElasticInOut(t){var e,n=.1,r=.4;return 0===t?0:1===t?1:(n<1?(n=1,e=r/4):e=r*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)*-.5:n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)*.5+1)}BackIn(t){var e=1.70158;return t*t*((e+1)*t-e)}BackOut(t){var e=1.70158;return--t*t*((e+1)*t+e)+1}BackInOut(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}BounceIn(t){return 1-this.BounceOut(1-t)}BounceOut(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}BounceInOut(t){return t<.5?.5*this.BounceIn(2*t):.5*this.BounceOut(2*t-1)+.5}}class ul{constructor(t){this._targetPool=t.target||{},this._targetPool instanceof Array||(this._targetPool=[this._targetPool]),this._life=t.life||1e3,this._delay=t.delay||0,this._startTime=(new Date).getTime()+this._delay,this._endTime=this._startTime+1e3*this._life,this.loop="undefined"!=typeof t.loop&&t.loop,this.gap=t.gap||0,this.easing=t.easing||"Linear",this.onframe=t.onframe,this.ondestroy=t.ondestroy,this.onrestart=t.onrestart,this.CLASS_NAME="SuperMap.LevelRenderer.Animation.Clip"}destroy(){}step(t){var e=new ll,n=(t-this._startTime)/this._life;if(!(n<0)){n=Math.min(n,1);var r="string"==typeof this.easing?e[this.easing]:this.easing,i="function"===typeof r?r(n):n;return this.fire("frame",i),1==n?this.loop?(this.restart(),"restart"):(this._needsRemove=!0,"destroy"):null}}restart(){var t=(new Date).getTime(),e=(t-this._startTime)%this._life;this._startTime=(new Date).getTime()-e+this.gap}fire(t,e){for(var n=0,r=this._targetPool.length;n<r;n++)this["on"+t]&&this["on"+t](this._targetPool[n],e)}}class cl extends ws{constructor(t){super(t),t=t||{},this.stage={},this.onframe=function(){},this._clips=[],this._running=!1,this._time=0,Wt.extend(this,t),this.CLASS_NAME="SuperMap.LevelRenderer.Animation"}add(t){this._clips.push(t)}remove(t){var e=(new Ka).indexOf(this._clips,t);e>=0&&this._clips.splice(e,1)}_update(){var t=(new Date).getTime(),e=t-this._time,n=this._clips,r=n.length,i=[],o=[];for(let l=0;l<r;l++){var a=n[l],s=a.step(t);s&&(i.push(s),o.push(a))}this.stage.update&&this.stage.update();for(let l=0;l<r;)n[l]._needsRemove?(n[l]=n[r-1],n.pop(),r--):l++;r=i.length;for(let l=0;l<r;l++)o[l].fire(i[l]);this._time=t,this.onframe(e),this.dispatch("frame",e)}start(){var t=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){setTimeout(t,16)},e=this;function n(){e._running&&(e._update(),t(n))}this._running=!0,this._time=(new Date).getTime(),t(n)}stop(){this._running=!1}clear(){this._clips=[]}animate(t,e){e=e||{};var n=new hl(t,e.loop,e.getter,e.setter);return n.animation=this,n}static _interpolateNumber(t,e,n){return(e-t)*n+t}static _interpolateArray(t,e,n,r,i){var o=t.length;if(1==i)for(let s=0;s<o;s++)r[s]=cl._interpolateNumber(t[s],e[s],n);else{var a=t[0].length;for(let i=0;i<o;i++)for(let o=0;o<a;o++)r[i][o]=cl._interpolateNumber(t[i][o],e[i][o],n)}}static _isArrayLike(t){switch(typeof t){case"undefined":case"string":return!1}return"undefined"!==typeof t.length}static _catmullRomInterpolateArray(t,e,n,r,i,o,a,s,l){var u=t.length;if(1==l)for(let d=0;d<u;d++)s[d]=cl._catmullRomInterpolate(t[d],e[d],n[d],r[d],i,o,a);else{var c=t[0].length;for(let l=0;l<u;l++)for(var h=0;h<c;h++)s[l][h]=cl._catmullRomInterpolate(t[l][h],e[l][h],n[l][h],r[l][h],i,o,a)}}static _catmullRomInterpolate(t,e,n,r,i,o,a){var s=.5*(n-t),l=.5*(r-e);return(2*(e-n)+s+l)*a+(-3*(e-n)-2*s-l)*o+s*i+e}static _cloneValue(t){var e=Array.prototype.slice;if(cl._isArrayLike(t)){var n=t.length;if(cl._isArrayLike(t[0])){for(var r=[],i=0;i<n;i++)r.push(e.call(t[i]));return r}return e.call(t)}return t}static rgba2String(t){return t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.floor(t[2]),"rgba("+t.join(",")+")"}}class hl{constructor(t,e,n,r){function i(t,e){return t[e]}function o(t,e,n){t[e]=n}this._tracks={},this._target=t,this._loop=e||!1,this._getter=n||i,this._setter=r||o,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[],this.CLASS_NAME="SuperMap.LevelRenderer.Animation.Animator"}when(t,e){for(var n in e)this._tracks[n]||(this._tracks[n]=[],0!==t&&this._tracks[n].push({time:0,value:cl._cloneValue(this._getter(this._target,n))})),this._tracks[n].push({time:parseInt(t,10),value:e[n]});return this}during(t){return this._onframeList.push(t),this}start(t){var e=this,n=this._setter,r=this._getter,i=e._onframeList.length,o="spline"===t,a=function(){if(e._clipCount--,0===e._clipCount){e._tracks={};for(var t=e._doneList.length,n=0;n<t;n++)e._doneList[n].call(e)}},s=function(s,l){var u=s.length;if(u){var c=s[0].value,h=cl._isArrayLike(c),d=!1,f=h&&cl._isArrayLike(c[0])?2:1;s.sort((function(t,e){return t.time-e.time}));var p=s[u-1].time,g=[],m=[];for(let t=0;t<u;t++){g.push(s[t].time/p);var y=s[t].value;"string"==typeof y&&(y=Ns.Util_color.toArray(y),0===y.length&&(y[0]=y[1]=y[2]=0,y[3]=1),d=!0),m.push(y)}var v,b,_,x,w,S,E,C=0,M=0;if(d)var T=[0,0,0,0];var A=function(t,a){if(a<M){for(v=Math.min(C+1,u-1),b=v;b>=0;b--)if(g[b]<=a)break;b=Math.min(b,u-2)}else{for(b=C;b<u;b++)if(g[b]>a)break;b=Math.min(b-1,u-2)}C=b,M=a;var s=g[b+1]-g[b];if(0!==s){if(_=(a-g[b])/s,o)if(w=m[b],x=m[0===b?b:b-1],S=m[b>u-2?u-1:b+1],E=m[b>u-3?u-1:b+2],h)cl._catmullRomInterpolateArray(x,w,S,E,_,_*_,_*_*_,r(t,l),f);else{let e;e=d?cl.rgba2String(T):cl._catmullRomInterpolate(x,w,S,E,_,_*_,_*_*_),n(t,l,e)}else if(h)cl._interpolateArray(m[b],m[b+1],_,r(t,l),f);else{let e;d?(cl._interpolateArray(m[b],m[b+1],_,T,1),e=cl.rgba2String(T)):e=cl._interpolateNumber(m[b],m[b+1],_),n(t,l,e)}for(b=0;b<i;b++)e._onframeList[b](t,a)}},O=new ul({target:e._target,life:p,loop:e._loop,delay:e._delay,onframe:A,ondestroy:a});t&&"spline"!==t&&(O.easing=t),e._clipList.push(O),e._clipCount++,e.animation.add(O)}};for(var l in this._tracks)s(this._tracks[l],l);return this}stop(){for(var t=0;t<this._clipList.length;t++){var e=this._clipList[t];this.animation.remove(e)}this._clipList=[]}delay(t){return this._delay=t,this}done(t){return t&&this._doneList.push(t),this}}class dl{constructor(t,e){this.id=t,this.storage=new il,this.painter=new ol(e,this.storage),this.handler=new sl(e,this.storage,this.painter),this.animatingElements=[],this.animation=new cl({stage:{update:dl.getFrameCallback(this)}}),this._needsRefreshNextFrame=!1,this.animation.start(),this.CLASS_NAME="SuperMap.LevelRenderer.Render"}destroy(){this.id=null,this.storage=null,this.painter=null,this.handler=null,this.animatingElements=null,this.animation=null,this._needsRefreshNextFrame=null}getId(){return this.id}addShape(t){return this.storage.addRoot(t),this}addGroup(t){return this.storage.addRoot(t),this}delShape(t){return this.storage.delRoot(t),this}delGroup(t){return this.storage.delRoot(t),this}modShape(t,e){return this.storage.mod(t,e),this}modGroup(t,e){return this.storage.mod(t,e),this}modLayer(t,e){return this.painter.modLayer(t,e),this}addHoverShape(t){return this.storage.addHover(t),this}render(t){return this.painter.render(t),this._needsRefreshNextFrame=!1,this}refresh(t){return this.painter.refresh(t),this._needsRefreshNextFrame=!1,this}refreshNextFrame(){return this._needsRefreshNextFrame=!0,this}refreshHover(t){return this.painter.refreshHover(t),this}refreshShapes(t,e){return this.painter.refreshShapes(t,e),this}resize(){return this.painter.resize(),this}animate(t,e,n){if("string"===typeof t&&(t=this.storage.get(t)),t){var r;if(e){for(var i=e.split("."),o=t,a=0,s=i.length;a<s;a++)o&&(o=o[i[a]]);o&&(r=o)}else r=t;if(!r)return void Ns.Util_log('Property "'+e+'" is not existed in element '+t.id);var l=this.animatingElements;return"undefined"===typeof t.__aniCount&&(t.__aniCount=0),0===t.__aniCount&&l.push(t),t.__aniCount++,this.animation.animate(r,{loop:n}).done((function(){if(t.__aniCount--,0===t.__aniCount){var e=(new Ka).indexOf(l,t);l.splice(e,1)}}))}Ns.Util_log("Element not existed")}clearAnimation(){this.animation.clear()}getWidth(){return this.painter.getWidth()}getHeight(){return this.painter.getHeight()}toDataURL(t,e,n){return this.painter.toDataURL(t,e,n)}shapeToImage(t,e,n){var r=Wt.createUniqueID("SuperMap.LevelRenderer.ToImage_");return this.painter.shapeToImage(r,t,e,n)}on(t,e){return this.handler.on(t,e),this}un(t,e){return this.handler.un(t,e),this}trigger(t,e){return this.handler.trigger(t,e),this.handler.dispatch(t,e),this}clear(){return this.storage.delRoot(),this.painter.clear(),this}dispose(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=null,this.animatingElements=null,this.storage=null,this.painter=null,this.handler=null}updateHoverShapes(t){return this.painter.updateHoverLayer(t),this}getAllShapes(){return this.storage._shapeList}clearAll(){return this.clear(),this.painter.clearHover(),this}getHoverOne(){return this.handler.getLastHoverOne()}static getFrameCallback(t){return function(){var e=t.animatingElements;if(e instanceof Array){for(var n=0,r=e.length;n<r;n++)t.storage.mod(e[n].id);(e.length||t._needsRefreshNextFrame)&&t.refresh()}}}}class fl{constructor(){fl._instances={},fl.Tool={},this.version="2.0.4",this.CLASS_NAME="SuperMap.LevelRenderer"}destroy(){this.dispose(),this.version=null}init(t){var e=new dl(Wt.createUniqueID("LRenderer_"),t);return fl._instances[e.id]=e,e}dispose(t){if(t)t.dispose(),this.delInstance(t.id);else{for(var e in fl._instances)fl._instances[e].dispose();fl._instances={}}return this}getInstance(t){return fl._instances[t]}delInstance(t){return delete fl._instances[t],this}}function pl(t,e,n){if(t===n||t===e)return t;let r=n-e;return((t-e)%r+r)%r+e}function gl(t){return t*Math.PI/180}Math.PI,Math.PI;const ml={EXCEL:"EXCEL",CSV:"CSV",ISERVER:"ISERVER",GEOJSON:"GEOJSON",JSON:"JSON"},yl={fileMaxSize:10485760};class vl{constructor(t){this.FileTypes=ml,this.FileConfig=yl,this.loadFileObject=t&&t.loadFileObject?t.loadFileObject:[]}set(t,e){this[t]=e}get(t){return this[t]}}class bl{constructor(){this._initView()}_initView(){const t=document.createElement("div");t.hidden=!0,t.setAttribute("class","component-messageboxcontainer component-border-bottom-orange");const e=document.createElement("div");e.setAttribute("class","icon"),this.icon=document.createElement("span"),this.icon.setAttribute("class","supermapol-icons-message-warning"),e.appendChild(this.icon),t.appendChild(e);const n=document.createElement("div");n.setAttribute("class","component-messagebox"),n.innerHTML="",t.appendChild(n),this.messageBox=n;const r=document.createElement("div");r.setAttribute("class","component-messagebox__cancelbtncontainer");const i=document.createElement("button");i.setAttribute("class","component-messagebox__cancelBtn"),i.innerHTML="x",i.onclick=this.closeView.bind(this),r.appendChild(i),t.appendChild(r),this.messageBoxContainer=t,document.body.appendChild(this.messageBoxContainer)}closeView(){this.messageBoxContainer.hidden=!0}showView(t,e="warring"){"success"===e?(this.icon.setAttribute("class","supermapol-icons-message-success"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-green")):"failure"===e?(this.icon.setAttribute("class","supermapol-icons-message-failure"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-red")):"warring"===e&&(this.icon.setAttribute("class","supermapol-icons-message-warning"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-orange")),this.messageBox.innerHTML=t,this.messageBoxContainer.hidden=!1}}var _l=n("313e");let xl={title_dataFlowService:"Data Flow Service",title_distributedAnalysis:"Distributed Analysis",title_clientComputing:"Client Computing",title_dataServiceQuery:"Data Service Query",title_searchCity:"Search city",title_searchLayer:" Search layer",text_input_value_inputDataFlowUrl:"Please enter the data stream service address such as: ws://{serviceRoot}/{dataFlowName}/dataflow/subscribe",text_displayFeaturesInfo:"Display feature information",text_subscribe:"subscribe",text_cancelSubscribe:"unsubscribe",text_densityAnalysis:"Density Analysis",text_CalculateTheValuePerUnitArea:"Calculate the value per unit area within the neighborhood shape",text_option_selectDataset:"Please select a dataset",text_label_dataset:"Dataset",text_option_simplePointDensityAnalysis:"Simple point density analysis",text_option_nuclearDensityAnalysis:"Nuclear density analysis",text_label_analyticalMethod:"Analytical method",text_option_quadrilateral:"Quadrilateral",text_option_hexagon:"hexagon",text_label_meshType:"Mesh type",text_option_notSet:"Not set",text_label_weightField:"Weight field",text_label_gridSizeInMeters:"Grid size",text_label_searchRadius:"Search radius",text_label_queryRange:"Scope of analysis",text_label_areaUnit:"Area unit",text_option_equidistantSegmentation:"Equidistant segmentation",text_option_logarithm:"Logarithm",text_option_equalCountingSegment:"Equal counting segment",text_option_squareRootSegmentation:"Square root segmentation",text_label_thematicMapSegmentationMode:"Thematic map segmentation mode",text_label_thematicMapSegmentationParameters:"Thematic map segmentation parameters",text_option_greenOrangePurpleGradient:"Green orange purple gradient",text_option_greenOrangeRedGradient:"Green orange red gradient",text_option_rainbowGradient:"Rainbow gradient",text_option_spectralGradient:"Spectral gradient",text_option_terrainGradient:"Terrain gradient",text_label_thematicMapColorGradientMode:"Thematic map color gradient mode",text_label_resultLayerName:"Result layer name",text_chooseFile:"Open File",text_isoline:"Isoline",text_extractDiscreteValue:"Extract discrete value generation curve",text_buffer:"Buffer",text_specifyTheDistance:"Specify the distance to create the surrounding area",text_label_analysisLayer:"Analysis layer",text_label_extractField:"Extract field",text_label_extractedValue:"Extracted value",text_label_distanceAttenuation:"Distance attenuation",text_label_gridSize:"gridSize",text_label_bufferRadius:"Buffer radius",text_label_defaultkilometers:"Default 10 kilometers",text_label_kilometer:"kilometer",text_label_unit:"unit",text_retainOriginal:"Retain original object field",text_mergeBuffer:"Merge buffer",text_label_color:"Color",text_label_buffer:"[Buffer]",text_label_isolines:"[Isolines]",text_label_queryRangeTips:"The default is the full range of input data. Example: -74.050, 40.650, -73.850, 40.850",text_label_queryModel:"Query mode",text_label_IDArrayOfFeatures:"ID array of features",text_label_maxFeatures:"The maximum number of features that can be returned",text_label_bufferDistance:"Buffer distance",text_label_queryRange1:"Query range",text_label_spatialQueryMode:"Spatial query mode",text_label_featureFilter:"Feature filter",text_label_geometricObject:"Geometric object",text_label_queryMode:"Query mode",text_label_searchTips:"Search for city locations or layer features",text_label_chooseSearchLayers:"Select a query layer",text_loadSearchCriteria:"Load search criteria",text_saveSearchCriteria:"Save search criteria",btn_analyze:"Analyze",btn_analyzing:"Analyzing",btn_emptyTheAnalysisLayer:"Empty the analysis layer",btn_cancelAnalysis:"Cancel",btn_query:"Query",btn_querying:"Querying",btn_emptyTheRresultLayer:"Clear all result layers","msg_dataReturnedIsEmpty.":"The request is successful and the data returned by the query is empty.",msg_dataFlowServiceHasBeenSubscribed:"The data stream service has been subscribed to.",msg_inputDataFlowUrlFirst:"Please enter the data stream service address first.",msg_datasetOrMethodUnsupport:"This dataset does not support this analysis type. Please reselect the dataset.",msg_selectDataset:"Please select a data set!",msg_setTheWeightField:"Please set the weight field!",msg_theFieldNotSupportAnalysis:"The field you currently select does not support analysis!",msg_resultIsEmpty:"The result of the analysis is empty!",msg_openFileFail:"Failed to open file!",msg_fileTypeUnsupported:"File format is not supported!",msg_fileSizeExceeded:"File size exceeded! The file size should not exceed 10M!",msg_dataInWrongGeoJSONFormat:"Wrong data format! Non standard GEOJSON format data!",msg_dataInWrongFormat:"Wrong data format! Non standard EXCEL, CSV or GEOJSON format data!",msg_searchKeywords:"Search keywords cannot be empty. Please enter your search criteria.",msg_searchGeocodeField:"Did not match the address matching service data!",msg_cityGeocodeField:"The address matching service of the current city is not configured.",msg_getFeatureField:"No related vector features found!",msg_dataflowservicesubscribed:"The data stream service has been subscribed to.",msg_subscribesucceeded:"The data stream service subscription was successful.",msg_crsunsupport:"Does not support the coordinate system of the current map",msg_tilematrixsetunsupport:"Incoming TileMatrixSet is not supported",msg_jsonResolveFiled:"JSON format parsing failure！",msg_requestContentFiled:"Failed to request data through iportal!",msg_getdatafailed:"Failed to get data!"},wl={title_dataFlowService:"数据流服务",title_distributedAnalysis:"分布式分析",title_clientComputing:"客户端计算",title_dataServiceQuery:"数据服务查询",title_searchCity:"搜索城市",title_searchLayer:"搜索图层",text_input_value_inputDataFlowUrl:"请输入数据流服务地址如:ws://{serviceRoot}/{dataFlowName}/dataflow/subscribe",text_displayFeaturesInfo:"显示要素信息",text_subscribe:"订阅",text_cancelSubscribe:"取消订阅",text_densityAnalysis:"密度分析",text_CalculateTheValuePerUnitArea:"计算点指定邻域形状内的每单位面积量值",text_option_selectDataset:"请选择数据集",text_label_dataset:"数据集",text_option_simplePointDensityAnalysis:"简单点密度分析",text_option_nuclearDensityAnalysis:"核密度分析",text_label_analyticalMethod:"分析方法",text_option_quadrilateral:"四边形",text_option_hexagon:"六边形",text_label_meshType:"网格面类型",text_option_notSet:"未设置",text_label_weightField:"权重字段",text_label_gridSizeInMeters:"网格大小",text_label_searchRadius:"搜索半径",text_label_queryRange:"分析范围",text_label_areaUnit:"面积单位",text_option_equidistantSegmentation:"等距离分段",text_option_logarithm:"对数",text_option_equalCountingSegment:"等计数分段",text_option_squareRootSegmentation:"平方根分段",text_label_thematicMapSegmentationMode:"专题图分段模式",text_label_thematicMapSegmentationParameters:"专题图分段参数",text_option_greenOrangePurpleGradient:"绿橙紫渐变",text_option_greenOrangeRedGradient:"绿橙红渐变",text_option_rainbowGradient:"彩虹渐变",text_option_spectralGradient:"光谱渐变",text_option_terrainGradient:"地形渐变",text_label_thematicMapColorGradientMode:"专题图颜色渐变模式",text_label_resultLayerName:"结果图层名称",text_chooseFile:"选择文件",text_isoline:"等值线",text_extractDiscreteValue:"提取离散值生成曲线",text_buffer:"缓冲区",text_specifyTheDistance:"指定距离创建周边区域",text_label_analysisLayer:"分析图层",text_label_extractField:"提取字段",text_label_extractedValue:"提取值",text_label_distanceAttenuation:"距离衰减",text_label_gridSize:"栅格大小",text_label_bufferRadius:"缓冲半径",text_label_defaultkilometers:"默认10千米",text_option_kilometer:"千米",text_label_unit:"单位",text_retainOriginal:"保留原对象字段属性",text_mergeBuffer:"合并缓冲区",text_label_color:"颜色",text_label_buffer:"[缓冲区]",text_label_isolines:"[等值线]",text_label_queryRangeTips:"默认为输入数据的全幅范围。范例：-74.050,40.650,-73.850,40.850",text_label_IDArrayOfFeatures:"要素 ID 数组",text_label_maxFeatures:"最多可返回的要素数量",text_label_bufferDistance:"缓冲区距离",text_label_queryRange1:"查询范围",text_label_spatialQueryMode:"空间查询模式",text_label_featureFilter:"要素过滤器",text_label_geometricObject:"几何对象",text_label_queryMode:"查询模式",text_label_searchTips:"搜索城市地点或图层要素",text_label_chooseSearchLayers:"选择查询图层",text_loadSearchCriteria:"加载搜索条件",text_saveSearchCriteria:"保存搜索条件",btn_analyze:"分析",btn_analyzing:"分析中",btn_emptyTheAnalysisLayer:"清空分析图层",btn_cancelAnalysis:"取消",btn_query:"查询",btn_querying:"查询中",btn_emptyTheRresultLayer:"清除所有结果图层",msg_dataFlowServiceHasBeenSubscribed:"已订阅该数据流服务。",msg_inputDataFlowUrlFirst:"请先输入数据流服务地址。",msg_datasetOrMethodUnsupport:"该数据集不支持本分析类型，请重新选择数据集",msg_selectDataset:"请选择数据集！",msg_setTheWeightField:"请设置权重字段！",msg_theFieldNotSupportAnalysis:"您当前选择的字段不支持分析！",msg_resultIsEmpty:"分析的结果为空！",msg_dataReturnedIsEmpty:"请求成功，查询返回的数据为空。",msg_openFileFail:"打开文件失败！",msg_fileTypeUnsupported:"不支持该文件格式！",msg_fileSizeExceeded:"文件大小超限！文件大小不得超过 10M！",msg_dataInWrongGeoJSONFormat:"数据格式错误！非标准的 GEOJSON 格式数据！",msg_dataInWrongFormat:"数据格式错误！非标准的 EXCEL, CSV 或 GEOJSON 格式数据！",msg_searchKeywords:"搜索关键字不能为空，请输入搜索条件。",msg_searchGeocodeField:"未匹配到地址匹配服务数据！",msg_cityGeocodeField:"未配置当前城市的地址匹配服务。",msg_getFeatureField:"未查找到相关矢量要素！",msg_dataflowservicesubscribed:"已订阅该数据流服务。",msg_subscribesucceeded:"数据流服务订阅成功。",msg_crsunsupport:"不支持当前地图的坐标系",msg_tilematrixsetunsupport:"不支持传入的TileMatrixSet",msg_jsonResolveFiled:"json格式解析失败！",msg_requestContentFiled:"通过iportal请求数据失败！",msg_getdatafailed:"获取数据失败！"},Sl={"en-US":xl,"zh-CN":wl,code:null,defaultCode:"en-US",getCode:function(){return Sl.code||Sl.setCode(),Sl.code},setCode:function(){var t=this.getLanguageFromCookie();t||(t=Sl.defaultCode,t="Netscape"===navigator.appName?navigator.language:navigator.browserLanguage),0===t.indexOf("zh")&&(t="zh-CN"),0===t.indexOf("en")&&(t="en-US"),Sl.code=t},getLanguageFromCookie(){for(var t="language=",e=document.cookie.split(";"),n=0;n<e.length;n++){var r=e[n];while(" "===r.charAt(0))r=r.substring(1);if(-1!==r.indexOf(t))return r.substring(t.length,r.length)}return""},i18n:function(t){var e=Sl[Sl.getCode()],n=e&&e[t];return n||(n=t),n}};
/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */
var El,Cl={version:"0.19.3"},Ml=1200,Tl=1252,Al=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],Ol={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},kl=function(t){-1!=Al.indexOf(t)&&(Tl=Ol[0]=t)};function Il(){kl(1252)}var Pl=function(t){Ml=t,kl(t)};function Ll(){Pl(1200),Il()}function Nl(t){for(var e=[],n=0,r=t.length;n<r;++n)e[n]=t.charCodeAt(n);return e}function Rl(t){for(var e=[],n=0;n<t.length>>1;++n)e[n]=String.fromCharCode(t.charCodeAt(2*n)+(t.charCodeAt(2*n+1)<<8));return e.join("")}function Dl(t){for(var e=[],n=0;n<t.length>>1;++n)e[n]=String.fromCharCode(t[2*n]+(t[2*n+1]<<8));return e.join("")}function Fl(t){for(var e=[],n=0;n<t.length>>1;++n)e[n]=String.fromCharCode(t.charCodeAt(2*n+1)+(t.charCodeAt(2*n)<<8));return e.join("")}var jl=function(t){var e=t.charCodeAt(0),n=t.charCodeAt(1);return 255==e&&254==n?Rl(t.slice(2)):254==e&&255==n?Fl(t.slice(2)):65279==e?t.slice(1):t},Bl=function(t){return String.fromCharCode(t)},zl=function(t){return String.fromCharCode(t)};var Ul=null,Gl=!0,ql="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Vl(t){for(var e="",n=0,r=0,i=0,o=0,a=0,s=0,l=0,u=0;u<t.length;)n=t.charCodeAt(u++),o=n>>2,r=t.charCodeAt(u++),a=(3&n)<<4|r>>4,i=t.charCodeAt(u++),s=(15&r)<<2|i>>6,l=63&i,isNaN(r)?s=l=64:isNaN(i)&&(l=64),e+=ql.charAt(o)+ql.charAt(a)+ql.charAt(s)+ql.charAt(l);return e}function Hl(t){var e="",n=0,r=0,i=0,o=0,a=0,s=0,l=0;t=t.replace(/^data:([^\/]+\/[^\/]+)?;base64\,/,"").replace(/[^\w\+\/\=]/g,"");for(var u=0;u<t.length;)o=ql.indexOf(t.charAt(u++)),a=ql.indexOf(t.charAt(u++)),n=o<<2|a>>4,e+=String.fromCharCode(n),s=ql.indexOf(t.charAt(u++)),r=(15&a)<<4|s>>2,64!==s&&(e+=String.fromCharCode(r)),l=ql.indexOf(t.charAt(u++)),i=(3&s)<<6|l,64!==l&&(e+=String.fromCharCode(i));return e}var Wl=function(){return"undefined"!==typeof Buffer&&"undefined"!==typeof process&&"undefined"!==typeof process.versions&&!!process.versions.node}(),Yl=function(){if("undefined"!==typeof Buffer){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch(e){t=!0}return t?function(t,e){return e?new Buffer(t,e):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}(),Xl=function(){if("undefined"===typeof Buffer)return!1;var t=Yl([65,0]);if(!t)return!1;var e=t.toString("utf16le");return 1==e.length}();function Jl(t){return Wl?Buffer.alloc?Buffer.alloc(t):new Buffer(t):"undefined"!=typeof Uint8Array?new Uint8Array(t):new Array(t)}function Zl(t){return Wl?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):"undefined"!=typeof Uint8Array?new Uint8Array(t):new Array(t)}var Kl=function(t){return Wl?Yl(t,"binary"):t.split("").map((function(t){return 255&t.charCodeAt(0)}))};function Ql(t){if(Array.isArray(t))return t.map((function(t){return String.fromCharCode(t)})).join("");for(var e=[],n=0;n<t.length;++n)e[n]=String.fromCharCode(t[n]);return e.join("")}function $l(t){if("undefined"==typeof ArrayBuffer)throw new Error("Unsupported");if(t instanceof ArrayBuffer)return $l(new Uint8Array(t));for(var e=new Array(t.length),n=0;n<t.length;++n)e[n]=t[n];return e}var tu=Wl?function(t){return Buffer.concat(t.map((function(t){return Buffer.isBuffer(t)?t:Yl(t)})))}:function(t){if("undefined"!==typeof Uint8Array){var e=0,n=0;for(e=0;e<t.length;++e)n+=t[e].length;var r=new Uint8Array(n),i=0;for(e=0,n=0;e<t.length;n+=i,++e)i=t[e].length,t[e]instanceof Uint8Array?r.set(t[e],n):"string"==typeof t[e]?r.set(new Uint8Array(Kl(t[e])),n):r.set(new Uint8Array(t[e]),n);return r}return[].concat.apply([],t.map((function(t){return Array.isArray(t)?t:[].slice.call(t)})))};function eu(t){for(var e=[],n=0,r=t.length+250,i=Jl(t.length+255),o=0;o<t.length;++o){var a=t.charCodeAt(o);if(a<128)i[n++]=a;else if(a<2048)i[n++]=192|a>>6&31,i[n++]=128|63&a;else if(a>=55296&&a<57344){a=64+(1023&a);var s=1023&t.charCodeAt(++o);i[n++]=240|a>>8&7,i[n++]=128|a>>2&63,i[n++]=128|s>>6&15|(3&a)<<4,i[n++]=128|63&s}else i[n++]=224|a>>12&15,i[n++]=128|a>>6&63,i[n++]=128|63&a;n>r&&(e.push(i.slice(0,n)),n=0,i=Jl(65535),r=65530)}return e.push(i.slice(0,n)),tu(e)}var nu=/\u0000/g,ru=/[\u0001-\u0006]/g;function iu(t){var e="",n=t.length-1;while(n>=0)e+=t.charAt(n--);return e}function ou(t,e){var n=""+t;return n.length>=e?n:Dc("0",e-n.length)+n}function au(t,e){var n=""+t;return n.length>=e?n:Dc(" ",e-n.length)+n}function su(t,e){var n=""+t;return n.length>=e?n:n+Dc(" ",e-n.length)}function lu(t,e){var n=""+Math.round(t);return n.length>=e?n:Dc("0",e-n.length)+n}function uu(t,e){var n=""+t;return n.length>=e?n:Dc("0",e-n.length)+n}var cu=Math.pow(2,32);function hu(t,e){if(t>cu||t<-cu)return lu(t,e);var n=Math.round(t);return uu(n,e)}function du(t,e){return e=e||0,t.length>=7+e&&103===(32|t.charCodeAt(e))&&101===(32|t.charCodeAt(e+1))&&110===(32|t.charCodeAt(e+2))&&101===(32|t.charCodeAt(e+3))&&114===(32|t.charCodeAt(e+4))&&97===(32|t.charCodeAt(e+5))&&108===(32|t.charCodeAt(e+6))}var fu=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],pu=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function gu(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',t}var mu={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},yu={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},vu={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function bu(t,e,n){var r=t<0?-1:1,i=t*r,o=0,a=1,s=0,l=1,u=0,c=0,h=Math.floor(i);while(u<e){if(h=Math.floor(i),s=h*a+o,c=h*u+l,i-h<5e-8)break;i=1/(i-h),o=a,a=s,l=u,u=c}if(c>e&&(u>e?(c=l,s=o):(c=u,s=a)),!n)return[0,r*s,c];var d=Math.floor(r*s/c);return[d,r*s-d*c,c]}function _u(t,e,n){if(t>2958465||t<0)return null;var r=0|t,i=Math.floor(86400*(t-r)),o=0,a=[],s={D:r,T:i,u:86400*(t-r)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(s.u)<1e-6&&(s.u=0),e&&e.date1904&&(r+=1462),s.u>.9999&&(s.u=0,86400==++i&&(s.T=i=0,++r,++s.D)),60===r)a=n?[1317,10,29]:[1900,2,29],o=3;else if(0===r)a=n?[1317,8,29]:[1900,1,0],o=6;else{r>60&&--r;var l=new Date(1900,0,1);l.setDate(l.getDate()+r-1),a=[l.getFullYear(),l.getMonth()+1,l.getDate()],o=l.getDay(),r<60&&(o=(o+6)%7),n&&(o=Iu(l,a))}return s.y=a[0],s.m=a[1],s.d=a[2],s.S=i%60,i=Math.floor(i/60),s.M=i%60,i=Math.floor(i/60),s.H=i,s.q=o,s}var xu=new Date(1899,11,31,0,0,0),wu=xu.getTime(),Su=new Date(1900,2,1,0,0,0);function Eu(t,e){var n=t.getTime();return e?n-=1262304e5:t>=Su&&(n+=864e5),(n-(wu+6e4*(t.getTimezoneOffset()-xu.getTimezoneOffset())))/864e5}function Cu(t){return-1==t.indexOf(".")?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Mu(t){return-1==t.indexOf("E")?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Tu(t){var e=t<0?12:11,n=Cu(t.toFixed(12));return n.length<=e?n:(n=t.toPrecision(10),n.length<=e?n:t.toExponential(5))}function Au(t){var e=Cu(t.toFixed(11));return e.length>(t<0?12:11)||"0"===e||"-0"===e?t.toPrecision(6):e}function Ou(t){var e,n=Math.floor(Math.log(Math.abs(t))*Math.LOG10E);return e=n>=-4&&n<=-1?t.toPrecision(10+n):Math.abs(n)<=9?Tu(t):10===n?t.toFixed(10).substr(0,12):Au(t),Cu(Mu(e.toUpperCase()))}function ku(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(0|t)===t?t.toString(10):Ou(t);case"undefined":return"";case"object":if(null==t)return"";if(t instanceof Date)return lc(14,Eu(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function Iu(t,e){e[0]-=581;var n=t.getDay();return t<60&&(n=(n+6)%7),n}function Pu(t,e,n,r){var i,o="",a=0,s=0,l=n.y,u=0;switch(t){case 98:l=n.y+543;case 121:switch(e.length){case 1:case 2:i=l%100,u=2;break;default:i=l%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:i=n.m,u=e.length;break;case 3:return pu[n.m-1][1];case 5:return pu[n.m-1][0];default:return pu[n.m-1][2]}break;case 100:switch(e.length){case 1:case 2:i=n.d,u=e.length;break;case 3:return fu[n.q][0];default:return fu[n.q][1]}break;case 104:switch(e.length){case 1:case 2:i=1+(n.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:i=n.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:i=n.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if("s"!=e&&"ss"!=e&&".0"!=e&&".00"!=e&&".000"!=e)throw"bad second format: "+e;return 0!==n.u||"s"!=e&&"ss"!=e?(s=r>=2?3===r?1e3:100:1===r?10:1,a=Math.round(s*(n.S+n.u)),a>=60*s&&(a=0),"s"===e?0===a?"0":""+a/s:(o=ou(a,2+r),"ss"===e?o.substr(0,2):"."+o.substr(2,e.length-1))):ou(n.S,e.length);case 90:switch(e){case"[h]":case"[hh]":i=24*n.D+n.H;break;case"[m]":case"[mm]":i=60*(24*n.D+n.H)+n.M;break;case"[s]":case"[ss]":i=60*(60*(24*n.D+n.H)+n.M)+Math.round(n.S+n.u);break;default:throw"bad abstime format: "+e}u=3===e.length?1:2;break;case 101:i=l,u=1;break}var c=u>0?ou(i,u):"";return c}function Lu(t){var e=3;if(t.length<=e)return t;for(var n=t.length%e,r=t.substr(0,n);n!=t.length;n+=e)r+=(r.length>0?",":"")+t.substr(n,e);return r}var Nu=/%/g;function Ru(t,e,n){var r=e.replace(Nu,""),i=e.length-r.length;return tc(t,r,n*Math.pow(10,2*i))+Dc("%",i)}function Du(t,e,n){var r=e.length-1;while(44===e.charCodeAt(r-1))--r;return tc(t,e.substr(0,r),n/Math.pow(10,3*(e.length-r)))}function Fu(t,e){var n,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(0==e)return"0.0E+0";if(e<0)return"-"+Fu(t,-e);var i=t.indexOf(".");-1===i&&(i=t.indexOf("E"));var o=Math.floor(Math.log(e)*Math.LOG10E)%i;if(o<0&&(o+=i),n=(e/Math.pow(10,o)).toPrecision(r+1+(i+o)%i),-1===n.indexOf("e")){var a=Math.floor(Math.log(e)*Math.LOG10E);-1===n.indexOf(".")?n=n.charAt(0)+"."+n.substr(1)+"E+"+(a-n.length+o):n+="E+"+(a-o);while("0."===n.substr(0,2))n=n.charAt(0)+n.substr(2,i)+"."+n.substr(2+i),n=n.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,(function(t,e,n,r){return e+n+r.substr(0,(i+o)%i)+"."+r.substr(o)+"E"}))}else n=e.toExponential(r);return t.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),t.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var ju=/# (\?+)( ?)\/( ?)(\d+)/;function Bu(t,e,n){var r=parseInt(t[4],10),i=Math.round(e*r),o=Math.floor(i/r),a=i-o*r,s=r;return n+(0===o?"":""+o)+" "+(0===a?Dc(" ",t[1].length+1+t[4].length):au(a,t[1].length)+t[2]+"/"+t[3]+ou(s,t[4].length))}function zu(t,e,n){return n+(0===e?"":""+e)+Dc(" ",t[1].length+2+t[4].length)}var Uu=/^#*0*\.([0#]+)/,Gu=/\).*[0#]/,qu=/\(###\) ###\\?-####/;function Vu(t){for(var e,n="",r=0;r!=t.length;++r)switch(e=t.charCodeAt(r)){case 35:break;case 63:n+=" ";break;case 48:n+="0";break;default:n+=String.fromCharCode(e)}return n}function Hu(t,e){var n=Math.pow(10,e);return""+Math.round(t*n)/n}function Wu(t,e){var n=t-Math.floor(t),r=Math.pow(10,e);return e<(""+Math.round(n*r)).length?0:Math.round(n*r)}function Yu(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function Xu(t){return t<2147483647&&t>-2147483648?""+(t>=0?0|t:t-1|0):""+Math.floor(t)}function Ju(t,e,n){if(40===t.charCodeAt(0)&&!e.match(Gu)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?Ju("n",r,n):"("+Ju("n",r,-n)+")"}if(44===e.charCodeAt(e.length-1))return Du(t,e,n);if(-1!==e.indexOf("%"))return Ru(t,e,n);if(-1!==e.indexOf("E"))return Fu(e,n);if(36===e.charCodeAt(0))return"$"+Ju(t,e.substr(" "==e.charAt(1)?2:1),n);var i,o,a,s,l=Math.abs(n),u=n<0?"-":"";if(e.match(/^00+$/))return u+hu(l,e.length);if(e.match(/^[#?]+$/))return i=hu(n,0),"0"===i&&(i=""),i.length>e.length?i:Vu(e.substr(0,e.length-i.length))+i;if(o=e.match(ju))return Bu(o,l,u);if(e.match(/^#+0+$/))return u+hu(l,e.length-e.indexOf("0"));if(o=e.match(Uu))return i=Hu(n,o[1].length).replace(/^([^\.]+)$/,"$1."+Vu(o[1])).replace(/\.$/,"."+Vu(o[1])).replace(/\.(\d*)$/,(function(t,e){return"."+e+Dc("0",Vu(o[1]).length-e.length)})),-1!==e.indexOf("0.")?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),o=e.match(/^(0*)\.(#*)$/))return u+Hu(l,o[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,o[1].length?"0.":".");if(o=e.match(/^#{1,3},##0(\.?)$/))return u+Lu(hu(l,0));if(o=e.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+Ju(t,e,-n):Lu(""+(Math.floor(n)+Yu(n,o[1].length)))+"."+ou(Wu(n,o[1].length),o[1].length);if(o=e.match(/^#,#*,#0/))return Ju(t,e.replace(/^#,#*,/,""),n);if(o=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=iu(Ju(t,e.replace(/[\\-]/g,""),n)),a=0,iu(iu(e.replace(/\\/g,"")).replace(/[0#]/g,(function(t){return a<i.length?i.charAt(a++):"0"===t?"0":""})));if(e.match(qu))return i=Ju(t,"##########",n),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var c="";if(o=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(o[4].length,7),s=bu(l,Math.pow(10,a)-1,!1),i=""+u,c=tc("n",o[1],s[1])," "==c.charAt(c.length-1)&&(c=c.substr(0,c.length-1)+"0"),i+=c+o[2]+"/"+o[3],c=su(s[2],a),c.length<o[4].length&&(c=Vu(o[4].substr(o[4].length-c.length))+c),i+=c,i;if(o=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(o[1].length,o[4].length),7),s=bu(l,Math.pow(10,a)-1,!0),u+(s[0]||(s[1]?"":"0"))+" "+(s[1]?au(s[1],a)+o[2]+"/"+o[3]+su(s[2],a):Dc(" ",2*a+1+o[2].length+o[3].length));if(o=e.match(/^[#0?]+$/))return i=hu(n,0),e.length<=i.length?i:Vu(e.substr(0,e.length-i.length))+i;if(o=e.match(/^([#0?]+)\.([#0]+)$/)){i=""+n.toFixed(Math.min(o[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var h=e.indexOf(".")-a,d=e.length-i.length-h;return Vu(e.substr(0,h)+i+e.substr(e.length-d))}if(o=e.match(/^00,000\.([#0]*0)$/))return a=Wu(n,o[1].length),n<0?"-"+Ju(t,e,-n):Lu(Xu(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,(function(t){return"00,"+(t.length<3?ou(0,3-t.length):"")+t}))+"."+ou(a,o[1].length);switch(e){case"###,##0.00":return Ju(t,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var f=Lu(hu(l,0));return"0"!==f?u+f:"";case"###,###.00":return Ju(t,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return Ju(t,"#,##0.00",n).replace(/^0\./,".");default:}throw new Error("unsupported format |"+e+"|")}function Zu(t,e,n){var r=e.length-1;while(44===e.charCodeAt(r-1))--r;return tc(t,e.substr(0,r),n/Math.pow(10,3*(e.length-r)))}function Ku(t,e,n){var r=e.replace(Nu,""),i=e.length-r.length;return tc(t,r,n*Math.pow(10,2*i))+Dc("%",i)}function Qu(t,e){var n,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(0==e)return"0.0E+0";if(e<0)return"-"+Qu(t,-e);var i=t.indexOf(".");-1===i&&(i=t.indexOf("E"));var o=Math.floor(Math.log(e)*Math.LOG10E)%i;if(o<0&&(o+=i),n=(e/Math.pow(10,o)).toPrecision(r+1+(i+o)%i),!n.match(/[Ee]/)){var a=Math.floor(Math.log(e)*Math.LOG10E);-1===n.indexOf(".")?n=n.charAt(0)+"."+n.substr(1)+"E+"+(a-n.length+o):n+="E+"+(a-o),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,(function(t,e,n,r){return e+n+r.substr(0,(i+o)%i)+"."+r.substr(o)+"E"}))}else n=e.toExponential(r);return t.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),t.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function $u(t,e,n){if(40===t.charCodeAt(0)&&!e.match(Gu)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?$u("n",r,n):"("+$u("n",r,-n)+")"}if(44===e.charCodeAt(e.length-1))return Zu(t,e,n);if(-1!==e.indexOf("%"))return Ku(t,e,n);if(-1!==e.indexOf("E"))return Qu(e,n);if(36===e.charCodeAt(0))return"$"+$u(t,e.substr(" "==e.charAt(1)?2:1),n);var i,o,a,s,l=Math.abs(n),u=n<0?"-":"";if(e.match(/^00+$/))return u+ou(l,e.length);if(e.match(/^[#?]+$/))return i=""+n,0===n&&(i=""),i.length>e.length?i:Vu(e.substr(0,e.length-i.length))+i;if(o=e.match(ju))return zu(o,l,u);if(e.match(/^#+0+$/))return u+ou(l,e.length-e.indexOf("0"));if(o=e.match(Uu))return i=(""+n).replace(/^([^\.]+)$/,"$1."+Vu(o[1])).replace(/\.$/,"."+Vu(o[1])),i=i.replace(/\.(\d*)$/,(function(t,e){return"."+e+Dc("0",Vu(o[1]).length-e.length)})),-1!==e.indexOf("0.")?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),o=e.match(/^(0*)\.(#*)$/))return u+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,o[1].length?"0.":".");if(o=e.match(/^#{1,3},##0(\.?)$/))return u+Lu(""+l);if(o=e.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+$u(t,e,-n):Lu(""+n)+"."+Dc("0",o[1].length);if(o=e.match(/^#,#*,#0/))return $u(t,e.replace(/^#,#*,/,""),n);if(o=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=iu($u(t,e.replace(/[\\-]/g,""),n)),a=0,iu(iu(e.replace(/\\/g,"")).replace(/[0#]/g,(function(t){return a<i.length?i.charAt(a++):"0"===t?"0":""})));if(e.match(qu))return i=$u(t,"##########",n),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var c="";if(o=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(o[4].length,7),s=bu(l,Math.pow(10,a)-1,!1),i=""+u,c=tc("n",o[1],s[1])," "==c.charAt(c.length-1)&&(c=c.substr(0,c.length-1)+"0"),i+=c+o[2]+"/"+o[3],c=su(s[2],a),c.length<o[4].length&&(c=Vu(o[4].substr(o[4].length-c.length))+c),i+=c,i;if(o=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(o[1].length,o[4].length),7),s=bu(l,Math.pow(10,a)-1,!0),u+(s[0]||(s[1]?"":"0"))+" "+(s[1]?au(s[1],a)+o[2]+"/"+o[3]+su(s[2],a):Dc(" ",2*a+1+o[2].length+o[3].length));if(o=e.match(/^[#0?]+$/))return i=""+n,e.length<=i.length?i:Vu(e.substr(0,e.length-i.length))+i;if(o=e.match(/^([#0]+)\.([#0]+)$/)){i=""+n.toFixed(Math.min(o[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var h=e.indexOf(".")-a,d=e.length-i.length-h;return Vu(e.substr(0,h)+i+e.substr(e.length-d))}if(o=e.match(/^00,000\.([#0]*0)$/))return n<0?"-"+$u(t,e,-n):Lu(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,(function(t){return"00,"+(t.length<3?ou(0,3-t.length):"")+t}))+"."+ou(0,o[1].length);switch(e){case"###,###":case"##,###":case"#,###":var f=Lu(""+l);return"0"!==f?u+f:"";default:if(e.match(/\.[0#?]*$/))return $u(t,e.slice(0,e.lastIndexOf(".")),n)+Vu(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function tc(t,e,n){return(0|n)===n?$u(t,e,n):Ju(t,e,n)}function ec(t){for(var e=[],n=!1,r=0,i=0;r<t.length;++r)switch(t.charCodeAt(r)){case 34:n=!n;break;case 95:case 42:case 92:++r;break;case 59:e[e.length]=t.substr(i,r-i),i=r+1}if(e[e.length]=t.substr(i),!0===n)throw new Error("Format |"+t+"| unterminated string ");return e}var nc=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function rc(t){var e=0,n="",r="";while(e<t.length)switch(n=t.charAt(e)){case"G":du(t,e)&&(e+=6),e++;break;case'"':for(;34!==t.charCodeAt(++e)&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if("1"===t.charAt(e+1)||"2"===t.charAt(e+1))return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if("A/P"===t.substr(e,3).toUpperCase())return!0;if("AM/PM"===t.substr(e,5).toUpperCase())return!0;if("上午/下午"===t.substr(e,5).toUpperCase())return!0;++e;break;case"[":r=n;while("]"!==t.charAt(e++)&&e<t.length)r+=t.charAt(e);if(r.match(nc))return!0;break;case".":case"0":case"#":while(e<t.length&&("0#?.,E+-%".indexOf(n=t.charAt(++e))>-1||"\\"==n&&"-"==t.charAt(e+1)&&"0#".indexOf(t.charAt(e+2))>-1));break;case"?":while(t.charAt(++e)===n);break;case"*":++e," "!=t.charAt(e)&&"*"!=t.charAt(e)||++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":while(e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1);break;case" ":++e;break;default:++e;break}return!1}function ic(t,e,n,r){var i,o,a,s=[],l="",u=0,c="",h="t",d="H";while(u<t.length)switch(c=t.charAt(u)){case"G":if(!du(t,u))throw new Error("unrecognized character "+c+" in "+t);s[s.length]={t:"G",v:"General"},u+=7;break;case'"':for(l="";34!==(a=t.charCodeAt(++u))&&u<t.length;)l+=String.fromCharCode(a);s[s.length]={t:"t",v:l},++u;break;case"\\":var f=t.charAt(++u),p="("===f||")"===f?f:"t";s[s.length]={t:p,v:f},++u;break;case"_":s[s.length]={t:"t",v:" "},u+=2;break;case"@":s[s.length]={t:"T",v:e},++u;break;case"B":case"b":if("1"===t.charAt(u+1)||"2"===t.charAt(u+1)){if(null==i&&(i=_u(e,n,"2"===t.charAt(u+1)),null==i))return"";s[s.length]={t:"X",v:t.substr(u,2)},h=c,u+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":c=c.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0)return"";if(null==i&&(i=_u(e,n),null==i))return"";l=c;while(++u<t.length&&t.charAt(u).toLowerCase()===c)l+=c;"m"===c&&"h"===h.toLowerCase()&&(c="M"),"h"===c&&(c=d),s[s.length]={t:c,v:l},h=c;break;case"A":case"a":case"上":var g={t:c,v:c};if(null==i&&(i=_u(e,n)),"A/P"===t.substr(u,3).toUpperCase()?(null!=i&&(g.v=i.H>=12?t.charAt(u+2):c),g.t="T",d="h",u+=3):"AM/PM"===t.substr(u,5).toUpperCase()?(null!=i&&(g.v=i.H>=12?"PM":"AM"),g.t="T",u+=5,d="h"):"上午/下午"===t.substr(u,5).toUpperCase()?(null!=i&&(g.v=i.H>=12?"下午":"上午"),g.t="T",u+=5,d="h"):(g.t="t",++u),null==i&&"T"===g.t)return"";s[s.length]=g,h=c;break;case"[":l=c;while("]"!==t.charAt(u++)&&u<t.length)l+=t.charAt(u);if("]"!==l.slice(-1))throw'unterminated "[" block: |'+l+"|";if(l.match(nc)){if(null==i&&(i=_u(e,n),null==i))return"";s[s.length]={t:"Z",v:l.toLowerCase()},h=l.charAt(1)}else l.indexOf("$")>-1&&(l=(l.match(/\$([^-\[\]]*)/)||[])[1]||"$",rc(t)||(s[s.length]={t:"t",v:l}));break;case".":if(null!=i){l=c;while(++u<t.length&&"0"===(c=t.charAt(u)))l+=c;s[s.length]={t:"s",v:l};break}case"0":case"#":l=c;while(++u<t.length&&"0#?.,E+-%".indexOf(c=t.charAt(u))>-1)l+=c;s[s.length]={t:"n",v:l};break;case"?":l=c;while(t.charAt(++u)===c)l+=c;s[s.length]={t:c,v:l},h=c;break;case"*":++u," "!=t.charAt(u)&&"*"!=t.charAt(u)||++u;break;case"(":case")":s[s.length]={t:1===r?"t":c,v:c},++u;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":l=c;while(u<t.length&&"0123456789".indexOf(t.charAt(++u))>-1)l+=t.charAt(u);s[s.length]={t:"D",v:l};break;case" ":s[s.length]={t:c,v:c},++u;break;case"$":s[s.length]={t:"t",v:"$"},++u;break;default:if(-1===",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(c))throw new Error("unrecognized character "+c+" in "+t);s[s.length]={t:"t",v:c},++u;break}var m,y=0,v=0;for(u=s.length-1,h="t";u>=0;--u)switch(s[u].t){case"h":case"H":s[u].t=d,h="h",y<1&&(y=1);break;case"s":(m=s[u].v.match(/\.0+$/))&&(v=Math.max(v,m[0].length-1)),y<3&&(y=3);case"d":case"y":case"M":case"e":h=s[u].t;break;case"m":"s"===h&&(s[u].t="M",y<2&&(y=2));break;case"X":break;case"Z":y<1&&s[u].v.match(/[Hh]/)&&(y=1),y<2&&s[u].v.match(/[Mm]/)&&(y=2),y<3&&s[u].v.match(/[Ss]/)&&(y=3)}switch(y){case 0:break;case 1:i.u>=.5&&(i.u=0,++i.S),i.S>=60&&(i.S=0,++i.M),i.M>=60&&(i.M=0,++i.H);break;case 2:i.u>=.5&&(i.u=0,++i.S),i.S>=60&&(i.S=0,++i.M);break}var b,_="";for(u=0;u<s.length;++u)switch(s[u].t){case"t":case"T":case" ":case"D":break;case"X":s[u].v="",s[u].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[u].v=Pu(s[u].t.charCodeAt(0),s[u].v,i,v),s[u].t="t";break;case"n":case"?":b=u+1;while(null!=s[b]&&("?"===(c=s[b].t)||"D"===c||(" "===c||"t"===c)&&null!=s[b+1]&&("?"===s[b+1].t||"t"===s[b+1].t&&"/"===s[b+1].v)||"("===s[u].t&&(" "===c||"n"===c||")"===c)||"t"===c&&("/"===s[b].v||" "===s[b].v&&null!=s[b+1]&&"?"==s[b+1].t)))s[u].v+=s[b].v,s[b]={v:"",t:";"},++b;_+=s[u].v,u=b-1;break;case"G":s[u].t="t",s[u].v=ku(e,n);break}var x,w,S="";if(_.length>0){40==_.charCodeAt(0)?(x=e<0&&45===_.charCodeAt(0)?-e:e,w=tc("n",_,x)):(x=e<0&&r>1?-e:e,w=tc("n",_,x),x<0&&s[0]&&"t"==s[0].t&&(w=w.substr(1),s[0].v="-"+s[0].v)),b=w.length-1;var E=s.length;for(u=0;u<s.length;++u)if(null!=s[u]&&"t"!=s[u].t&&s[u].v.indexOf(".")>-1){E=u;break}var C=s.length;if(E===s.length&&-1===w.indexOf("E")){for(u=s.length-1;u>=0;--u)null!=s[u]&&-1!=="n?".indexOf(s[u].t)&&(b>=s[u].v.length-1?(b-=s[u].v.length,s[u].v=w.substr(b+1,s[u].v.length)):b<0?s[u].v="":(s[u].v=w.substr(0,b+1),b=-1),s[u].t="t",C=u);b>=0&&C<s.length&&(s[C].v=w.substr(0,b+1)+s[C].v)}else if(E!==s.length&&-1===w.indexOf("E")){for(b=w.indexOf(".")-1,u=E;u>=0;--u)if(null!=s[u]&&-1!=="n?".indexOf(s[u].t)){for(o=s[u].v.indexOf(".")>-1&&u===E?s[u].v.indexOf(".")-1:s[u].v.length-1,S=s[u].v.substr(o+1);o>=0;--o)b>=0&&("0"===s[u].v.charAt(o)||"#"===s[u].v.charAt(o))&&(S=w.charAt(b--)+S);s[u].v=S,s[u].t="t",C=u}for(b>=0&&C<s.length&&(s[C].v=w.substr(0,b+1)+s[C].v),b=w.indexOf(".")+1,u=E;u<s.length;++u)if(null!=s[u]&&(-1!=="n?(".indexOf(s[u].t)||u===E)){for(o=s[u].v.indexOf(".")>-1&&u===E?s[u].v.indexOf(".")+1:0,S=s[u].v.substr(0,o);o<s[u].v.length;++o)b<w.length&&(S+=w.charAt(b++));s[u].v=S,s[u].t="t",C=u}}}for(u=0;u<s.length;++u)null!=s[u]&&"n?".indexOf(s[u].t)>-1&&(x=r>1&&e<0&&u>0&&"-"===s[u-1].v?-e:e,s[u].v=tc(s[u].t,s[u].v,x),s[u].t="t");var M="";for(u=0;u!==s.length;++u)null!=s[u]&&(M+=s[u].v);return M}var oc=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function ac(t,e){if(null==e)return!1;var n=parseFloat(e[2]);switch(e[1]){case"=":if(t==n)return!0;break;case">":if(t>n)return!0;break;case"<":if(t<n)return!0;break;case"<>":if(t!=n)return!0;break;case">=":if(t>=n)return!0;break;case"<=":if(t<=n)return!0;break}return!1}function sc(t,e){var n=ec(t),r=n.length,i=n[r-1].indexOf("@");if(r<4&&i>-1&&--r,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if("number"!==typeof e)return[4,4===n.length||i>-1?n[n.length-1]:"@"];switch(n.length){case 1:n=i>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=i>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=i>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"];break;case 4:break}var o=e>0?n[0]:e<0?n[1]:n[2];if(-1===n[0].indexOf("[")&&-1===n[1].indexOf("["))return[r,o];if(null!=n[0].match(/\[[=<>]/)||null!=n[1].match(/\[[=<>]/)){var a=n[0].match(oc),s=n[1].match(oc);return ac(e,a)?[r,n[0]]:ac(e,s)?[r,n[1]]:[r,n[null!=a&&null!=s?2:1]]}return[r,o]}function lc(t,e,n){null==n&&(n={});var r="";switch(typeof t){case"string":r="m/d/yy"==t&&n.dateNF?n.dateNF:t;break;case"number":r=14==t&&n.dateNF?n.dateNF:(null!=n.table?n.table:mu)[t],null==r&&(r=n.table&&n.table[yu[t]]||mu[yu[t]]),null==r&&(r=vu[t]||"General");break}if(du(r,0))return ku(e,n);e instanceof Date&&(e=Eu(e,n.date1904));var i=sc(r,e);if(du(i[1]))return ku(e,n);if(!0===e)e="TRUE";else if(!1===e)e="FALSE";else if(""===e||null==e)return"";return ic(i[1],e,n,i[0])}function uc(t,e){if("number"!=typeof e){e=+e||-1;for(var n=0;n<392;++n)if(void 0!=mu[n]){if(mu[n]==t){e=n;break}}else e<0&&(e=n);e<0&&(e=391)}return mu[e]=t,e}function cc(){mu=gu()}var hc={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},dc=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function fc(t){var e="number"==typeof t?mu[t]:t;return e=e.replace(dc,"(\\d+)"),new RegExp("^"+e+"$")}function pc(t,e,n){var r=-1,i=-1,o=-1,a=-1,s=-1,l=-1;(e.match(dc)||[]).forEach((function(t,e){var u=parseInt(n[e+1],10);switch(t.toLowerCase().charAt(0)){case"y":r=u;break;case"d":o=u;break;case"h":a=u;break;case"s":l=u;break;case"m":a>=0?s=u:i=u;break}})),l>=0&&-1==s&&i>=0&&(s=i,i=-1);var u=(""+(r>=0?r:(new Date).getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(o>=1?o:1)).slice(-2);7==u.length&&(u="0"+u),8==u.length&&(u="20"+u);var c=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(s>=0?s:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return-1==a&&-1==s&&-1==l?u:-1==r&&-1==i&&-1==o?c:u+"T"+c}var gc={"d.m":"d\\.m"};function mc(t,e){return uc(gc[t]||t,e)}var yc,vc=function(){var t={};function e(){for(var t=0,e=new Array(256),n=0;256!=n;++n)t=n,t=1&t?-306674912^t>>>1:t>>>1,t=1&t?-306674912^t>>>1:t>>>1,t=1&t?-306674912^t>>>1:t>>>1,t=1&t?-306674912^t>>>1:t>>>1,t=1&t?-306674912^t>>>1:t>>>1,t=1&t?-306674912^t>>>1:t>>>1,t=1&t?-306674912^t>>>1:t>>>1,t=1&t?-306674912^t>>>1:t>>>1,e[n]=t;return"undefined"!==typeof Int32Array?new Int32Array(e):e}t.version="1.2.0";var n=e();function r(t){var e=0,n=0,r=0,i="undefined"!==typeof Int32Array?new Int32Array(4096):new Array(4096);for(r=0;256!=r;++r)i[r]=t[r];for(r=0;256!=r;++r)for(n=t[r],e=256+r;e<4096;e+=256)n=i[e]=n>>>8^t[255&n];var o=[];for(r=1;16!=r;++r)o[r-1]="undefined"!==typeof Int32Array&&"function"==typeof i.subarray?i.subarray(256*r,256*r+256):i.slice(256*r,256*r+256);return o}var i=r(n),o=i[0],a=i[1],s=i[2],l=i[3],u=i[4],c=i[5],h=i[6],d=i[7],f=i[8],p=i[9],g=i[10],m=i[11],y=i[12],v=i[13],b=i[14];function _(t,e){for(var r=-1^e,i=0,o=t.length;i<o;)r=r>>>8^n[255&(r^t.charCodeAt(i++))];return~r}function x(t,e){for(var r=-1^e,i=t.length-15,_=0;_<i;)r=b[t[_++]^255&r]^v[t[_++]^r>>8&255]^y[t[_++]^r>>16&255]^m[t[_++]^r>>>24]^g[t[_++]]^p[t[_++]]^f[t[_++]]^d[t[_++]]^h[t[_++]]^c[t[_++]]^u[t[_++]]^l[t[_++]]^s[t[_++]]^a[t[_++]]^o[t[_++]]^n[t[_++]];i+=15;while(_<i)r=r>>>8^n[255&(r^t[_++])];return~r}function w(t,e){for(var r=-1^e,i=0,o=t.length,a=0,s=0;i<o;)a=t.charCodeAt(i++),a<128?r=r>>>8^n[255&(r^a)]:a<2048?(r=r>>>8^n[255&(r^(192|a>>6&31))],r=r>>>8^n[255&(r^(128|63&a))]):a>=55296&&a<57344?(a=64+(1023&a),s=1023&t.charCodeAt(i++),r=r>>>8^n[255&(r^(240|a>>8&7))],r=r>>>8^n[255&(r^(128|a>>2&63))],r=r>>>8^n[255&(r^(128|s>>6&15|(3&a)<<4))],r=r>>>8^n[255&(r^(128|63&s))]):(r=r>>>8^n[255&(r^(224|a>>12&15))],r=r>>>8^n[255&(r^(128|a>>6&63))],r=r>>>8^n[255&(r^(128|63&a))]);return~r}return t.table=n,t.bstr=_,t.buf=x,t.str=w,t}(),bc=function(){var t,e={};function n(t,e){for(var n=t.split("/"),r=e.split("/"),i=0,o=0,a=Math.min(n.length,r.length);i<a;++i){if(o=n[i].length-r[i].length)return o;if(n[i]!=r[i])return n[i]<r[i]?-1:1}return n.length-r.length}function r(t){if("/"==t.charAt(t.length-1))return-1===t.slice(0,-1).indexOf("/")?t:r(t.slice(0,-1));var e=t.lastIndexOf("/");return-1===e?t:t.slice(0,e+1)}function i(t){if("/"==t.charAt(t.length-1))return i(t.slice(0,-1));var e=t.lastIndexOf("/");return-1===e?t:t.slice(e+1)}function o(t,e){"string"===typeof e&&(e=new Date(e));var n=e.getHours();n=n<<6|e.getMinutes(),n=n<<5|e.getSeconds()>>>1,t.write_shift(2,n);var r=e.getFullYear()-1980;r=r<<4|e.getMonth()+1,r=r<<5|e.getDate(),t.write_shift(2,r)}function a(t){var e=65535&t.read_shift(2),n=65535&t.read_shift(2),r=new Date,i=31&n;n>>>=5;var o=15&n;n>>>=4,r.setMilliseconds(0),r.setFullYear(n+1980),r.setMonth(o-1),r.setDate(i);var a=31&e;e>>>=5;var s=63&e;return e>>>=6,r.setHours(e),r.setMinutes(s),r.setSeconds(a<<1),r}function s(t){bd(t,0);var e={},n=0;while(t.l<=t.length-4){var r=t.read_shift(2),i=t.read_shift(2),o=t.l+i,a={};switch(r){case 21589:n=t.read_shift(1),1&n&&(a.mtime=t.read_shift(4)),i>5&&(2&n&&(a.atime=t.read_shift(4)),4&n&&(a.ctime=t.read_shift(4))),a.mtime&&(a.mt=new Date(1e3*a.mtime));break;case 1:var s=t.read_shift(4),l=t.read_shift(4);a.usz=l*Math.pow(2,32)+s,s=t.read_shift(4),l=t.read_shift(4),a.csz=l*Math.pow(2,32)+s;break}t.l=o,e[r]=a}return e}function l(){return t||(t=yc)}function u(t,e){if(80==t[0]&&75==t[1])return xt(t,e);if(109==(32|t[0])&&105==(32|t[1]))return kt(t,e);if(t.length<512)throw new Error("CFB file size "+t.length+" < 512");var n=3,r=512,i=0,o=0,a=0,s=0,l=0,u=[],p=t.slice(0,512);bd(p,0);var m=c(p);switch(n=m[0],n){case 3:r=512;break;case 4:r=4096;break;case 0:if(0==m[1])return xt(t,e);default:throw new Error("Major Version: Expected 3 or 4 saw "+n)}512!==r&&(p=t.slice(0,r),bd(p,28));var b=t.slice(0,r);h(p,n);var _=p.read_shift(4,"i");if(3===n&&0!==_)throw new Error("# Directory Sectors: Expected 0 saw "+_);p.l+=4,a=p.read_shift(4,"i"),p.l+=4,p.chk("00100000","Mini Stream Cutoff Size: "),s=p.read_shift(4,"i"),i=p.read_shift(4,"i"),l=p.read_shift(4,"i"),o=p.read_shift(4,"i");for(var x=-1,w=0;w<109;++w){if(x=p.read_shift(4,"i"),x<0)break;u[w]=x}var S=d(t,r);g(l,o,S,r,u);var E=y(S,a,u,r);a<E.length&&(E[a].name="!Directory"),i>0&&s!==O&&(E[s].name="!MiniFAT"),E[u[0]].name="!FAT",E.fat_addrs=u,E.ssz=r;var C={},M=[],T=[],A=[];v(a,E,S,M,i,C,T,s),f(T,A,M),M.shift();var k={FileIndex:T,FullPaths:A};return e&&e.raw&&(k.raw={header:b,sectors:S}),k}function c(t){if(80==t[t.l]&&75==t[t.l+1])return[0,0];t.chk(k,"Header Signature: "),t.l+=16;var e=t.read_shift(2,"u");return[t.read_shift(2,"u"),e]}function h(t,e){var n=9;switch(t.l+=2,n=t.read_shift(2)){case 9:if(3!=e)throw new Error("Sector Shift: Expected 9 saw "+n);break;case 12:if(4!=e)throw new Error("Sector Shift: Expected 12 saw "+n);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+n)}t.chk("0600","Mini Sector Shift: "),t.chk("000000000000","Reserved: ")}function d(t,e){for(var n=Math.ceil(t.length/e)-1,r=[],i=1;i<n;++i)r[i-1]=t.slice(i*e,(i+1)*e);return r[n-1]=t.slice(n*e),r}function f(t,e,n){for(var r=0,i=0,o=0,a=0,s=0,l=n.length,u=[],c=[];r<l;++r)u[r]=c[r]=r,e[r]=n[r];for(;s<c.length;++s)r=c[s],i=t[r].L,o=t[r].R,a=t[r].C,u[r]===r&&(-1!==i&&u[i]!==i&&(u[r]=u[i]),-1!==o&&u[o]!==o&&(u[r]=u[o])),-1!==a&&(u[a]=r),-1!==i&&r!=u[r]&&(u[i]=u[r],c.lastIndexOf(i)<s&&c.push(i)),-1!==o&&r!=u[r]&&(u[o]=u[r],c.lastIndexOf(o)<s&&c.push(o));for(r=1;r<l;++r)u[r]===r&&(-1!==o&&u[o]!==o?u[r]=u[o]:-1!==i&&u[i]!==i&&(u[r]=u[i]));for(r=1;r<l;++r)if(0!==t[r].type){if(s=r,s!=u[s])do{s=u[s],e[r]=e[s]+"/"+e[r]}while(0!==s&&-1!==u[s]&&s!=u[s]);u[r]=-1}for(e[0]+="/",r=1;r<l;++r)2!==t[r].type&&(e[r]+="/")}function p(t,e,n){var r=t.start,i=t.size,o=[],a=r;while(n&&i>0&&a>=0)o.push(e.slice(a*A,a*A+A)),i-=A,a=hd(n,4*a);return 0===o.length?xd(0):tu(o).slice(0,t.size)}function g(t,e,n,r,i){var o=O;if(t===O){if(0!==e)throw new Error("DIFAT chain shorter than expected")}else if(-1!==t){var a=n[t],s=(r>>>2)-1;if(!a)return;for(var l=0;l<s;++l){if((o=hd(a,4*l))===O)break;i.push(o)}e>=1&&g(hd(a,r-4),e-1,n,r,i)}}function m(t,e,n,r,i){var o=[],a=[];i||(i=[]);var s=r-1,l=0,u=0;for(l=e;l>=0;){i[l]=!0,o[o.length]=l,a.push(t[l]);var c=n[Math.floor(4*l/r)];if(u=4*l&s,r<4+u)throw new Error("FAT boundary crossed: "+l+" 4 "+r);if(!t[c])break;l=hd(t[c],u)}return{nodes:o,data:zh([a])}}function y(t,e,n,r){var i=t.length,o=[],a=[],s=[],l=[],u=r-1,c=0,h=0,d=0,f=0;for(c=0;c<i;++c)if(s=[],d=c+e,d>=i&&(d-=i),!a[d]){l=[];var p=[];for(h=d;h>=0;){p[h]=!0,a[h]=!0,s[s.length]=h,l.push(t[h]);var g=n[Math.floor(4*h/r)];if(f=4*h&u,r<4+f)throw new Error("FAT boundary crossed: "+h+" 4 "+r);if(!t[g])break;if(h=hd(t[g],f),p[h])break}o[d]={nodes:s,data:zh([l])}}return o}function v(t,e,n,r,i,o,a,s){for(var l,u=0,c=r.length?2:0,h=e[t].data,d=0,f=0;d<h.length;d+=128){var g=h.slice(d,d+128);bd(g,64),f=g.read_shift(2),l=Gh(g,0,f-c),r.push(l);var y={name:l,type:g.read_shift(1),color:g.read_shift(1),L:g.read_shift(4,"i"),R:g.read_shift(4,"i"),C:g.read_shift(4,"i"),clsid:g.read_shift(16),state:g.read_shift(4,"i"),start:0,size:0},v=g.read_shift(2)+g.read_shift(2)+g.read_shift(2)+g.read_shift(2);0!==v&&(y.ct=b(g,g.l-8));var _=g.read_shift(2)+g.read_shift(2)+g.read_shift(2)+g.read_shift(2);0!==_&&(y.mt=b(g,g.l-8)),y.start=g.read_shift(4,"i"),y.size=g.read_shift(4,"i"),y.size<0&&y.start<0&&(y.size=y.type=0,y.start=O,y.name=""),5===y.type?(u=y.start,i>0&&u!==O&&(e[u].name="!StreamData")):y.size>=4096?(y.storage="fat",void 0===e[y.start]&&(e[y.start]=m(n,y.start,e.fat_addrs,e.ssz)),e[y.start].name=y.name,y.content=e[y.start].data.slice(0,y.size)):(y.storage="minifat",y.size<0?y.size=0:u!==O&&y.start!==O&&e[u]&&(y.content=p(y,e[u].data,(e[s]||{}).data))),y.content&&bd(y.content,0),o[l]=y,a.push(y)}}function b(t,e){return new Date(1e3*(cd(t,e+4)/1e7*Math.pow(2,32)+cd(t,e)/1e7-11644473600))}function _(e,n){return l(),u(t.readFileSync(e),n)}function x(t,e){var n=e&&e.type;switch(n||Wl&&Buffer.isBuffer(t)&&(n="buffer"),n||"base64"){case"file":return _(t,e);case"base64":return u(Kl(Hl(t)),e);case"binary":return u(Kl(t),e)}return u(t,e)}function w(t,e){var n=e||{},r=n.root||"Root Entry";if(t.FullPaths||(t.FullPaths=[]),t.FileIndex||(t.FileIndex=[]),t.FullPaths.length!==t.FileIndex.length)throw new Error("inconsistent CFB structure");0===t.FullPaths.length&&(t.FullPaths[0]=r+"/",t.FileIndex[0]={name:r,type:5}),n.CLSID&&(t.FileIndex[0].clsid=n.CLSID),S(t)}function S(t){var e="Sh33tJ5";if(!bc.find(t,"/"+e)){var n=xd(4);n[0]=55,n[1]=n[3]=50,n[2]=54,t.FileIndex.push({name:e,type:2,content:n,size:4,L:69,R:69,C:69}),t.FullPaths.push(t.FullPaths[0]+e),E(t)}}function E(t,e){w(t);for(var o=!1,a=!1,s=t.FullPaths.length-1;s>=0;--s){var l=t.FileIndex[s];switch(l.type){case 0:a?o=!0:(t.FileIndex.pop(),t.FullPaths.pop());break;case 1:case 2:case 5:a=!0,isNaN(l.R*l.L*l.C)&&(o=!0),l.R>-1&&l.L>-1&&l.R==l.L&&(o=!0);break;default:o=!0;break}}if(o||e){var u=new Date(1987,1,19),c=0,h=Object.create?Object.create(null):{},d=[];for(s=0;s<t.FullPaths.length;++s)h[t.FullPaths[s]]=!0,0!==t.FileIndex[s].type&&d.push([t.FullPaths[s],t.FileIndex[s]]);for(s=0;s<d.length;++s){var f=r(d[s][0]);a=h[f];while(!a){while(r(f)&&!h[r(f)])f=r(f);d.push([f,{name:i(f).replace("/",""),type:1,clsid:P,ct:u,mt:u,content:null}]),h[f]=!0,f=r(d[s][0]),a=h[f]}}for(d.sort((function(t,e){return n(t[0],e[0])})),t.FullPaths=[],t.FileIndex=[],s=0;s<d.length;++s)t.FullPaths[s]=d[s][0],t.FileIndex[s]=d[s][1];for(s=0;s<d.length;++s){var p=t.FileIndex[s],g=t.FullPaths[s];if(p.name=i(g).replace("/",""),p.L=p.R=p.C=-(p.color=1),p.size=p.content?p.content.length:0,p.start=0,p.clsid=p.clsid||P,0===s)p.C=d.length>1?1:-1,p.size=0,p.type=5;else if("/"==g.slice(-1)){for(c=s+1;c<d.length;++c)if(r(t.FullPaths[c])==g)break;for(p.C=c>=d.length?-1:c,c=s+1;c<d.length;++c)if(r(t.FullPaths[c])==r(g))break;p.R=c>=d.length?-1:c,p.type=1}else r(t.FullPaths[s+1]||"")==r(g)&&(p.R=s+1),p.type=2}}}function C(t,e){var n=e||{};if("mad"==n.fileType)return It(t,n);switch(E(t),n.fileType){case"zip":return St(t,n)}var r=function(t){for(var e=0,n=0,r=0;r<t.FileIndex.length;++r){var i=t.FileIndex[r];if(i.content){var o=i.content.length;o>0&&(o<4096?e+=o+63>>6:n+=o+511>>9)}}var a=t.FullPaths.length+3>>2,s=e+7>>3,l=e+127>>7,u=s+n+a+l,c=u+127>>7,h=c<=109?0:Math.ceil((c-109)/127);while(u+c+h+127>>7>c)h=++c<=109?0:Math.ceil((c-109)/127);var d=[1,h,c,l,a,n,e,0];return t.FileIndex[0].size=e<<6,d[7]=(t.FileIndex[0].start=d[0]+d[1]+d[2]+d[3]+d[4]+d[5])+(d[6]+7>>3),d}(t),i=xd(r[7]<<9),o=0,a=0;for(o=0;o<8;++o)i.write_shift(1,I[o]);for(o=0;o<8;++o)i.write_shift(2,0);for(i.write_shift(2,62),i.write_shift(2,3),i.write_shift(2,65534),i.write_shift(2,9),i.write_shift(2,6),o=0;o<3;++o)i.write_shift(2,0);for(i.write_shift(4,0),i.write_shift(4,r[2]),i.write_shift(4,r[0]+r[1]+r[2]+r[3]-1),i.write_shift(4,0),i.write_shift(4,4096),i.write_shift(4,r[3]?r[0]+r[1]+r[2]-1:O),i.write_shift(4,r[3]),i.write_shift(-4,r[1]?r[0]-1:O),i.write_shift(4,r[1]),o=0;o<109;++o)i.write_shift(-4,o<r[2]?r[1]+o:-1);if(r[1])for(a=0;a<r[1];++a){for(;o<236+127*a;++o)i.write_shift(-4,o<r[2]?r[1]+o:-1);i.write_shift(-4,a===r[1]-1?O:a+1)}var s=function(t){for(a+=t;o<a-1;++o)i.write_shift(-4,o+1);t&&(++o,i.write_shift(-4,O))};for(a=o=0,a+=r[1];o<a;++o)i.write_shift(-4,L.DIFSECT);for(a+=r[2];o<a;++o)i.write_shift(-4,L.FATSECT);s(r[3]),s(r[4]);for(var l=0,u=0,c=t.FileIndex[0];l<t.FileIndex.length;++l)c=t.FileIndex[l],c.content&&(u=c.content.length,u<4096||(c.start=a,s(u+511>>9)));s(r[6]+7>>3);while(511&i.l)i.write_shift(-4,L.ENDOFCHAIN);for(a=o=0,l=0;l<t.FileIndex.length;++l)c=t.FileIndex[l],c.content&&(u=c.content.length,!u||u>=4096||(c.start=a,s(u+63>>6)));while(511&i.l)i.write_shift(-4,L.ENDOFCHAIN);for(o=0;o<r[4]<<2;++o){var h=t.FullPaths[o];if(h&&0!==h.length){c=t.FileIndex[o],0===o&&(c.start=c.size?c.start-1:O);var d=0===o&&n.root||c.name;if(d.length>32&&(console.error("Name "+d+" will be truncated to "+d.slice(0,32)),d=d.slice(0,32)),u=2*(d.length+1),i.write_shift(64,d,"utf16le"),i.write_shift(2,u),i.write_shift(1,c.type),i.write_shift(1,c.color),i.write_shift(-4,c.L),i.write_shift(-4,c.R),i.write_shift(-4,c.C),c.clsid)i.write_shift(16,c.clsid,"hex");else for(l=0;l<4;++l)i.write_shift(4,0);i.write_shift(4,c.state||0),i.write_shift(4,0),i.write_shift(4,0),i.write_shift(4,0),i.write_shift(4,0),i.write_shift(4,c.start),i.write_shift(4,c.size),i.write_shift(4,0)}else{for(l=0;l<17;++l)i.write_shift(4,0);for(l=0;l<3;++l)i.write_shift(4,-1);for(l=0;l<12;++l)i.write_shift(4,0)}}for(o=1;o<t.FileIndex.length;++o)if(c=t.FileIndex[o],c.size>=4096)if(i.l=c.start+1<<9,Wl&&Buffer.isBuffer(c.content))c.content.copy(i,i.l,0,c.size),i.l+=c.size+511&-512;else{for(l=0;l<c.size;++l)i.write_shift(1,c.content[l]);for(;511&l;++l)i.write_shift(1,0)}for(o=1;o<t.FileIndex.length;++o)if(c=t.FileIndex[o],c.size>0&&c.size<4096)if(Wl&&Buffer.isBuffer(c.content))c.content.copy(i,i.l,0,c.size),i.l+=c.size+63&-64;else{for(l=0;l<c.size;++l)i.write_shift(1,c.content[l]);for(;63&l;++l)i.write_shift(1,0)}if(Wl)i.l=i.length;else while(i.l<i.length)i.write_shift(1,0);return i}function M(t,e){var n=t.FullPaths.map((function(t){return t.toUpperCase()})),r=n.map((function(t){var e=t.split("/");return e[e.length-("/"==t.slice(-1)?2:1)]})),i=!1;47===e.charCodeAt(0)?(i=!0,e=n[0].slice(0,-1)+e):i=-1!==e.indexOf("/");var o=e.toUpperCase(),a=!0===i?n.indexOf(o):r.indexOf(o);if(-1!==a)return t.FileIndex[a];var s=!o.match(ru);for(o=o.replace(nu,""),s&&(o=o.replace(ru,"!")),a=0;a<n.length;++a){if((s?n[a].replace(ru,"!"):n[a]).replace(nu,"")==o)return t.FileIndex[a];if((s?r[a].replace(ru,"!"):r[a]).replace(nu,"")==o)return t.FileIndex[a]}return null}e.version="1.2.2";var T,A=64,O=-2,k="d0cf11e0a1b11ae1",I=[208,207,17,224,161,177,26,225],P="00000000000000000000000000000000",L={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:O,FREESECT:-1,HEADER_SIGNATURE:k,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:P,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function N(e,n,r){l();var i=C(e,r);t.writeFileSync(n,i)}function R(t){for(var e=new Array(t.length),n=0;n<t.length;++n)e[n]=String.fromCharCode(t[n]);return e.join("")}function D(e,n){var r=C(e,n);switch(n&&n.type||"buffer"){case"file":return l(),t.writeFileSync(n.filename,r),r;case"binary":return"string"==typeof r?r:R(r);case"base64":return Vl("string"==typeof r?r:R(r));case"buffer":if(Wl)return Buffer.isBuffer(r)?r:Yl(r);case"array":return"string"==typeof r?Kl(r):r}return r}function F(t){try{var e=t.InflateRaw,n=new e;if(n._processChunk(new Uint8Array([3,0]),n._finishFlushFlag),!n.bytesRead)throw new Error("zlib does not expose bytesRead");T=t}catch(r){console.error("cannot use native zlib: "+(r.message||r))}}function j(t,e){if(!T)return bt(t,e);var n=T.InflateRaw,r=new n,i=r._processChunk(t.slice(t.l),r._finishFlushFlag);return t.l+=r.bytesRead,i}function B(t){return T?T.deflateRawSync(t):ht(t)}var z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],U=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],G=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function q(t){var e=139536&(t<<1|t<<11)|558144&(t<<5|t<<15);return 255&(e>>16|e>>8|e)}for(var V="undefined"!==typeof Uint8Array,H=V?new Uint8Array(256):[],W=0;W<256;++W)H[W]=q(W);function Y(t,e){var n=H[255&t];return e<=8?n>>>8-e:(n=n<<8|H[t>>8&255],e<=16?n>>>16-e:(n=n<<8|H[t>>16&255],n>>>24-e))}function X(t,e){var n=7&e,r=e>>>3;return(t[r]|(n<=6?0:t[r+1]<<8))>>>n&3}function J(t,e){var n=7&e,r=e>>>3;return(t[r]|(n<=5?0:t[r+1]<<8))>>>n&7}function Z(t,e){var n=7&e,r=e>>>3;return(t[r]|(n<=4?0:t[r+1]<<8))>>>n&15}function K(t,e){var n=7&e,r=e>>>3;return(t[r]|(n<=3?0:t[r+1]<<8))>>>n&31}function Q(t,e){var n=7&e,r=e>>>3;return(t[r]|(n<=1?0:t[r+1]<<8))>>>n&127}function $(t,e,n){var r=7&e,i=e>>>3,o=(1<<n)-1,a=t[i]>>>r;return n<8-r?a&o:(a|=t[i+1]<<8-r,n<16-r?a&o:(a|=t[i+2]<<16-r,n<24-r||(a|=t[i+3]<<24-r),a&o))}function tt(t,e,n){var r=7&e,i=e>>>3;return r<=5?t[i]|=(7&n)<<r:(t[i]|=n<<r&255,t[i+1]=(7&n)>>8-r),e+3}function et(t,e,n){var r=7&e,i=e>>>3;return n=(1&n)<<r,t[i]|=n,e+1}function nt(t,e,n){var r=7&e,i=e>>>3;return n<<=r,t[i]|=255&n,n>>>=8,t[i+1]=n,e+8}function rt(t,e,n){var r=7&e,i=e>>>3;return n<<=r,t[i]|=255&n,n>>>=8,t[i+1]=255&n,t[i+2]=n>>>8,e+16}function it(t,e){var n=t.length,r=2*n>e?2*n:e+5,i=0;if(n>=e)return t;if(Wl){var o=Zl(r);if(t.copy)t.copy(o);else for(;i<t.length;++i)o[i]=t[i];return o}if(V){var a=new Uint8Array(r);if(a.set)a.set(t);else for(;i<n;++i)a[i]=t[i];return a}return t.length=r,t}function ot(t){for(var e=new Array(t),n=0;n<t;++n)e[n]=0;return e}function at(t,e,n){var r=1,i=0,o=0,a=0,s=0,l=t.length,u=V?new Uint16Array(32):ot(32);for(o=0;o<32;++o)u[o]=0;for(o=l;o<n;++o)t[o]=0;l=t.length;var c=V?new Uint16Array(l):ot(l);for(o=0;o<l;++o)u[i=t[o]]++,r<i&&(r=i),c[o]=0;for(u[0]=0,o=1;o<=r;++o)u[o+16]=s=s+u[o-1]<<1;for(o=0;o<l;++o)s=t[o],0!=s&&(c[o]=u[s+16]++);var h=0;for(o=0;o<l;++o)if(h=t[o],0!=h)for(s=Y(c[o],r)>>r-h,a=(1<<r+4-h)-1;a>=0;--a)e[s|a<<h]=15&h|o<<4;return r}var st=V?new Uint16Array(512):ot(512),lt=V?new Uint16Array(32):ot(32);if(!V){for(var ut=0;ut<512;++ut)st[ut]=0;for(ut=0;ut<32;++ut)lt[ut]=0}(function(){for(var t=[],e=0;e<32;e++)t.push(5);at(t,lt,32);var n=[];for(e=0;e<=143;e++)n.push(8);for(;e<=255;e++)n.push(9);for(;e<=279;e++)n.push(7);for(;e<=287;e++)n.push(8);at(n,st,288)})();var ct=function(){for(var t=V?new Uint8Array(32768):[],e=0,n=0;e<G.length-1;++e)for(;n<G[e+1];++n)t[n]=e;for(;n<32768;++n)t[n]=29;var r=V?new Uint8Array(259):[];for(e=0,n=0;e<U.length-1;++e)for(;n<U[e+1];++n)r[n]=e;function i(t,e){var n=0;while(n<t.length){var r=Math.min(65535,t.length-n),i=n+r==t.length;e.write_shift(1,+i),e.write_shift(2,r),e.write_shift(2,65535&~r);while(r-- >0)e[e.l++]=t[n++]}return e.l}function o(e,n){var i=0,o=0,a=V?new Uint16Array(32768):[];while(o<e.length){var s=Math.min(65535,e.length-o);if(s<10){i=tt(n,i,+!(o+s!=e.length)),7&i&&(i+=8-(7&i)),n.l=i/8|0,n.write_shift(2,s),n.write_shift(2,65535&~s);while(s-- >0)n[n.l++]=e[o++];i=8*n.l}else{i=tt(n,i,+!(o+s!=e.length)+2);var l=0;while(s-- >0){var u=e[o];l=32767&(l<<5^u);var c=-1,h=0;if((c=a[l])&&(c|=-32768&o,c>o&&(c-=32768),c<o))while(e[c+h]==e[o+h]&&h<250)++h;if(h>2){u=r[h],u<=22?i=nt(n,i,H[u+1]>>1)-1:(nt(n,i,3),i+=5,nt(n,i,H[u-23]>>5),i+=3);var d=u<8?0:u-4>>2;d>0&&(rt(n,i,h-U[u]),i+=d),u=t[o-c],i=nt(n,i,H[u]>>3),i-=3;var f=u<4?0:u-2>>1;f>0&&(rt(n,i,o-c-G[u]),i+=f);for(var p=0;p<h;++p)a[l]=32767&o,l=32767&(l<<5^e[o]),++o;s-=h-1}else u<=143?u+=48:i=et(n,i,1),i=nt(n,i,H[u]),a[l]=32767&o,++o}i=nt(n,i,0)-1}}return n.l=(i+7)/8|0,n.l}return function(t,e){return t.length<8?i(t,e):o(t,e)}}();function ht(t){var e=xd(50+Math.floor(1.1*t.length)),n=ct(t,e);return e.slice(0,n)}var dt=V?new Uint16Array(32768):ot(32768),ft=V?new Uint16Array(32768):ot(32768),pt=V?new Uint16Array(128):ot(128),gt=1,mt=1;function yt(t,e){var n=K(t,e)+257;e+=5;var r=K(t,e)+1;e+=5;var i=Z(t,e)+4;e+=4;for(var o=0,a=V?new Uint8Array(19):ot(19),s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=1,u=V?new Uint8Array(8):ot(8),c=V?new Uint8Array(8):ot(8),h=a.length,d=0;d<i;++d)a[z[d]]=o=J(t,e),l<o&&(l=o),u[o]++,e+=3;var f=0;for(u[0]=0,d=1;d<=l;++d)c[d]=f=f+u[d-1]<<1;for(d=0;d<h;++d)0!=(f=a[d])&&(s[d]=c[f]++);var p=0;for(d=0;d<h;++d)if(p=a[d],0!=p){f=H[s[d]]>>8-p;for(var g=(1<<7-p)-1;g>=0;--g)pt[f|g<<p]=7&p|d<<3}var m=[];for(l=1;m.length<n+r;)switch(f=pt[Q(t,e)],e+=7&f,f>>>=3){case 16:o=3+X(t,e),e+=2,f=m[m.length-1];while(o-- >0)m.push(f);break;case 17:o=3+J(t,e),e+=3;while(o-- >0)m.push(0);break;case 18:o=11+Q(t,e),e+=7;while(o-- >0)m.push(0);break;default:m.push(f),l<f&&(l=f);break}var y=m.slice(0,n),v=m.slice(n);for(d=n;d<286;++d)y[d]=0;for(d=r;d<30;++d)v[d]=0;return gt=at(y,dt,286),mt=at(v,ft,30),e}function vt(t,e){if(3==t[0]&&!(3&t[1]))return[Jl(e),2];var n=0,r=0,i=Zl(e||1<<18),o=0,a=i.length>>>0,s=0,l=0;while(0==(1&r))if(r=J(t,n),n+=3,r>>>1!=0)for(r>>1==1?(s=9,l=5):(n=yt(t,n),s=gt,l=mt);;){!e&&a<o+32767&&(i=it(i,o+32767),a=i.length);var u=$(t,n,s),c=r>>>1==1?st[u]:dt[u];if(n+=15&c,c>>>=4,0===(c>>>8&255))i[o++]=c;else{if(256==c)break;c-=257;var h=c<8?0:c-4>>2;h>5&&(h=0);var d=o+U[c];h>0&&(d+=$(t,n,h),n+=h),u=$(t,n,l),c=r>>>1==1?lt[u]:ft[u],n+=15&c,c>>>=4;var f=c<4?0:c-2>>1,p=G[c];f>0&&(p+=$(t,n,f),n+=f),!e&&a<d&&(i=it(i,d+100),a=i.length);while(o<d)i[o]=i[o-p],++o}}else{7&n&&(n+=8-(7&n));var g=t[n>>>3]|t[1+(n>>>3)]<<8;if(n+=32,g>0){!e&&a<o+g&&(i=it(i,o+g),a=i.length);while(g-- >0)i[o++]=t[n>>>3],n+=8}}return e?[i,n+7>>>3]:[i.slice(0,o),n+7>>>3]}function bt(t,e){var n=t.slice(t.l||0),r=vt(n,e);return t.l+=r[1],r[0]}function _t(t,e){if(!t)throw new Error(e);"undefined"!==typeof console&&console.error(e)}function xt(t,e){var n=t;bd(n,0);var r=[],i=[],o={FileIndex:r,FullPaths:i};w(o,{root:e.root});var a=n.length-4;while((80!=n[a]||75!=n[a+1]||5!=n[a+2]||6!=n[a+3])&&a>=0)--a;n.l=a+4,n.l+=4;var l=n.read_shift(2);n.l+=6;var u=n.read_shift(4);for(n.l=u,a=0;a<l;++a){n.l+=20;var c=n.read_shift(4),h=n.read_shift(4),d=n.read_shift(2),f=n.read_shift(2),p=n.read_shift(2);n.l+=8;var g=n.read_shift(4),m=s(n.slice(n.l+d,n.l+d+f));n.l+=d+f+p;var y=n.l;n.l=g+4,m&&m[1]&&((m[1]||{}).usz&&(h=m[1].usz),(m[1]||{}).csz&&(c=m[1].csz)),wt(n,c,h,o,m),n.l=y}return o}function wt(t,e,n,r,i){t.l+=2;var o=t.read_shift(2),l=t.read_shift(2),u=a(t);if(8257&o)throw new Error("Unsupported ZIP encryption");for(var c=t.read_shift(4),h=t.read_shift(4),d=t.read_shift(4),f=t.read_shift(2),p=t.read_shift(2),g="",m=0;m<f;++m)g+=String.fromCharCode(t[t.l++]);if(p){var y=s(t.slice(t.l,t.l+p));(y[21589]||{}).mt&&(u=y[21589].mt),(y[1]||{}).usz&&(d=y[1].usz),(y[1]||{}).csz&&(h=y[1].csz),i&&((i[21589]||{}).mt&&(u=i[21589].mt),(i[1]||{}).usz&&(d=y[1].usz),(i[1]||{}).csz&&(h=y[1].csz))}t.l+=p;var v=t.slice(t.l,t.l+h);switch(l){case 8:v=j(t,d);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+l)}var b=!1;8&o&&(c=t.read_shift(4),134695760==c&&(c=t.read_shift(4),b=!0),h=t.read_shift(4),d=t.read_shift(4)),h!=e&&_t(b,"Bad compressed size: "+e+" != "+h),d!=n&&_t(b,"Bad uncompressed size: "+n+" != "+d),Lt(r,g,v,{unsafe:!0,mt:u})}function St(t,e){var n=e||{},r=[],i=[],a=xd(1),s=n.compression?8:0,l=0,u=!1;u&&(l|=8);var c=0,h=0,d=0,f=0,p=t.FullPaths[0],g=p,m=t.FileIndex[0],y=[],v=0;for(c=1;c<t.FullPaths.length;++c)if(g=t.FullPaths[c].slice(p.length),m=t.FileIndex[c],m.size&&m.content&&"Sh33tJ5"!=g){var b=d,_=xd(g.length);for(h=0;h<g.length;++h)_.write_shift(1,127&g.charCodeAt(h));_=_.slice(0,_.l),y[f]="string"==typeof m.content?vc.bstr(m.content,0):vc.buf(m.content,0);var x="string"==typeof m.content?Kl(m.content):m.content;8==s&&(x=B(x)),a=xd(30),a.write_shift(4,67324752),a.write_shift(2,20),a.write_shift(2,l),a.write_shift(2,s),m.mt?o(a,m.mt):a.write_shift(4,0),a.write_shift(-4,8&l?0:y[f]),a.write_shift(4,8&l?0:x.length),a.write_shift(4,8&l?0:m.content.length),a.write_shift(2,_.length),a.write_shift(2,0),d+=a.length,r.push(a),d+=_.length,r.push(_),d+=x.length,r.push(x),8&l&&(a=xd(12),a.write_shift(-4,y[f]),a.write_shift(4,x.length),a.write_shift(4,m.content.length),d+=a.l,r.push(a)),a=xd(46),a.write_shift(4,33639248),a.write_shift(2,0),a.write_shift(2,20),a.write_shift(2,l),a.write_shift(2,s),a.write_shift(4,0),a.write_shift(-4,y[f]),a.write_shift(4,x.length),a.write_shift(4,m.content.length),a.write_shift(2,_.length),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(4,0),a.write_shift(4,b),v+=a.l,i.push(a),v+=_.length,i.push(_),++f}return a=xd(22),a.write_shift(4,101010256),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(2,f),a.write_shift(2,f),a.write_shift(4,v),a.write_shift(4,d),a.write_shift(2,0),tu([tu(r),tu(i),a])}var Et={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Ct(t,e){if(t.ctype)return t.ctype;var n=t.name||"",r=n.match(/\.([^\.]+)$/);return r&&Et[r[1]]||e&&(r=(n=e).match(/[\.\\]([^\.\\])+$/),r&&Et[r[1]])?Et[r[1]]:"application/octet-stream"}function Mt(t){for(var e=Vl(t),n=[],r=0;r<e.length;r+=76)n.push(e.slice(r,r+76));return n.join("\r\n")+"\r\n"}function Tt(t){var e=t.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,(function(t){var e=t.charCodeAt(0).toString(16).toUpperCase();return"="+(1==e.length?"0"+e:e)}));e=e.replace(/ $/gm,"=20").replace(/\t$/gm,"=09"),"\n"==e.charAt(0)&&(e="=0D"+e.slice(1)),e=e.replace(/\r(?!\n)/gm,"=0D").replace(/\n\n/gm,"\n=0A").replace(/([^\r\n])\n/gm,"$1=0A");for(var n=[],r=e.split("\r\n"),i=0;i<r.length;++i){var o=r[i];if(0!=o.length)for(var a=0;a<o.length;){var s=76,l=o.slice(a,a+s);"="==l.charAt(s-1)?s--:"="==l.charAt(s-2)?s-=2:"="==l.charAt(s-3)&&(s-=3),l=o.slice(a,a+s),a+=s,a<o.length&&(l+="="),n.push(l)}else n.push("")}return n.join("\r\n")}function At(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];while(n<=t.length&&"="==r.charAt(r.length-1))r=r.slice(0,r.length-1)+t[++n];e.push(r)}for(var i=0;i<e.length;++i)e[i]=e[i].replace(/[=][0-9A-Fa-f]{2}/g,(function(t){return String.fromCharCode(parseInt(t.slice(1),16))}));return Kl(e.join("\r\n"))}function Ot(t,e,n){for(var r,i="",o="",a="",s=0;s<10;++s){var l=e[s];if(!l||l.match(/^\s*$/))break;var u=l.match(/^(.*?):\s*([^\s].*)$/);if(u)switch(u[1].toLowerCase()){case"content-location":i=u[2].trim();break;case"content-type":a=u[2].trim();break;case"content-transfer-encoding":o=u[2].trim();break}}switch(++s,o.toLowerCase()){case"base64":r=Kl(Hl(e.slice(s).join("")));break;case"quoted-printable":r=At(e.slice(s));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+o)}var c=Lt(t,i.slice(n.length),r,{unsafe:!0});a&&(c.ctype=a)}function kt(t,e){if("mime-version:"!=R(t.slice(0,13)).toLowerCase())throw new Error("Unsupported MAD header");var n=e&&e.root||"",r=(Wl&&Buffer.isBuffer(t)?t.toString("binary"):R(t)).split("\r\n"),i=0,o="";for(i=0;i<r.length;++i)if(o=r[i],/^Content-Location:/i.test(o)&&(o=o.slice(o.indexOf("file")),n||(n=o.slice(0,o.lastIndexOf("/")+1)),o.slice(0,n.length)!=n))while(n.length>0)if(n=n.slice(0,n.length-1),n=n.slice(0,n.lastIndexOf("/")+1),o.slice(0,n.length)==n)break;var a=(r[1]||"").match(/boundary="(.*?)"/);if(!a)throw new Error("MAD cannot find boundary");var s="--"+(a[1]||""),l=[],u=[],c={FileIndex:l,FullPaths:u};w(c);var h,d=0;for(i=0;i<r.length;++i){var f=r[i];f!==s&&f!==s+"--"||(d++&&Ot(c,r.slice(h,i),n),h=i)}return c}function It(t,e){var n=e||{},r=n.boundary||"SheetJS";r="------="+r;for(var i=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+r.slice(2)+'"',"","",""],o=t.FullPaths[0],a=o,s=t.FileIndex[0],l=1;l<t.FullPaths.length;++l)if(a=t.FullPaths[l].slice(o.length),s=t.FileIndex[l],s.size&&s.content&&"Sh33tJ5"!=a){a=a.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,(function(t){return"_x"+t.charCodeAt(0).toString(16)+"_"})).replace(/[\u0080-\uFFFF]/g,(function(t){return"_u"+t.charCodeAt(0).toString(16)+"_"}));for(var u=s.content,c=Wl&&Buffer.isBuffer(u)?u.toString("binary"):R(u),h=0,d=Math.min(1024,c.length),f=0,p=0;p<=d;++p)(f=c.charCodeAt(p))>=32&&f<128&&++h;var g=h>=4*d/5;i.push(r),i.push("Content-Location: "+(n.root||"file:///C:/SheetJS/")+a),i.push("Content-Transfer-Encoding: "+(g?"quoted-printable":"base64")),i.push("Content-Type: "+Ct(s,a)),i.push(""),i.push(g?Tt(c):Mt(c))}return i.push(r+"--\r\n"),i.join("\r\n")}function Pt(t){var e={};return w(e,t),e}function Lt(t,e,n,r){var o=r&&r.unsafe;o||w(t);var a=!o&&bc.find(t,e);if(!a){var s=t.FullPaths[0];e.slice(0,s.length)==s?s=e:("/"!=s.slice(-1)&&(s+="/"),s=(s+e).replace("//","/")),a={name:i(e),type:2},t.FileIndex.push(a),t.FullPaths.push(s),o||bc.utils.cfb_gc(t)}return a.content=n,a.size=n?n.length:0,r&&(r.CLSID&&(a.clsid=r.CLSID),r.mt&&(a.mt=r.mt),r.ct&&(a.ct=r.ct)),a}function Nt(t,e){w(t);var n=bc.find(t,e);if(n)for(var r=0;r<t.FileIndex.length;++r)if(t.FileIndex[r]==n)return t.FileIndex.splice(r,1),t.FullPaths.splice(r,1),!0;return!1}function Rt(t,e,n){w(t);var r=bc.find(t,e);if(r)for(var o=0;o<t.FileIndex.length;++o)if(t.FileIndex[o]==r)return t.FileIndex[o].name=i(n),t.FullPaths[o]=n,!0;return!1}function Dt(t){E(t,!0)}return e.find=M,e.read=x,e.parse=u,e.write=D,e.writeFile=N,e.utils={cfb_new:Pt,cfb_add:Lt,cfb_del:Nt,cfb_mov:Rt,cfb_gc:Dt,ReadShift:fd,CheckField:vd,prep_blob:bd,bconcat:tu,use_zlib:F,_deflateRaw:ht,_inflateRaw:bt,consts:L},e}();function _c(t){if("undefined"!==typeof yc)return yc.readFileSync(t);if("undefined"!==typeof Deno)return Deno.readFileSync(t);if("undefined"!==typeof $&&"undefined"!==typeof File&&"undefined"!==typeof Folder)try{var e=File(t);e.open("r"),e.encoding="binary";var n=e.read();return e.close(),n}catch(r){if(!r.message||!r.message.match(/onstruct/))throw r}throw new Error("Cannot access file "+t)}function xc(t){for(var e=Object.keys(t),n=[],r=0;r<e.length;++r)Object.prototype.hasOwnProperty.call(t,e[r])&&n.push(e[r]);return n}function wc(t){for(var e=[],n=xc(t),r=0;r!==n.length;++r)e[t[n[r]]]=n[r];return e}var Sc=new Date(1899,11,30,0,0,0);function Ec(t,e){var n=t.getTime();e&&(n-=1263168e5);var r=Sc.getTime()+6e4*(t.getTimezoneOffset()-Sc.getTimezoneOffset());return(n-r)/864e5}var Cc=new Date,Mc=Sc.getTime()+6e4*(Cc.getTimezoneOffset()-Sc.getTimezoneOffset()),Tc=Cc.getTimezoneOffset();function Ac(t){var e=new Date;return e.setTime(24*t*60*60*1e3+Mc),e.getTimezoneOffset()!==Tc&&e.setTime(e.getTime()+6e4*(e.getTimezoneOffset()-Tc)),e}function Oc(t){var e=0,n=0,r=!1,i=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!i)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var o=1;o!=i.length;++o)if(i[o]){switch(n=1,o>3&&(r=!0),i[o].slice(i[o].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+i[o].slice(i[o].length-1));case"D":n*=24;case"H":n*=60;case"M":if(!r)throw new Error("Unsupported ISO Duration Field: M");n*=60;case"S":break}e+=n*parseInt(i[o],10)}return e}var kc=new Date("2017-02-19T19:06:09.000Z"),Ic=isNaN(kc.getFullYear())?new Date("2/19/17"):kc,Pc=2017==Ic.getFullYear();function Lc(t,e){var n=new Date(t);if(Pc)return e>0?n.setTime(n.getTime()+60*n.getTimezoneOffset()*1e3):e<0&&n.setTime(n.getTime()-60*n.getTimezoneOffset()*1e3),n;if(t instanceof Date)return t;if(1917==Ic.getFullYear()&&!isNaN(n.getFullYear())){var r=n.getFullYear();return t.indexOf(""+r)>-1||n.setFullYear(n.getFullYear()+100),n}var i=t.match(/\d+/g)||["2017","2","19","0","0","0"],o=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return t.indexOf("Z")>-1&&(o=new Date(o.getTime()-60*o.getTimezoneOffset()*1e3)),o}function Nc(t,e){if(Wl&&Buffer.isBuffer(t)){if(e&&Xl){if(255==t[0]&&254==t[1])return Sh(t.slice(2).toString("utf16le"));if(254==t[1]&&255==t[2])return Sh(Fl(t.slice(2).toString("binary")))}return t.toString("binary")}if("undefined"!==typeof TextDecoder)try{if(e){if(255==t[0]&&254==t[1])return Sh(new TextDecoder("utf-16le").decode(t.slice(2)));if(254==t[0]&&255==t[1])return Sh(new TextDecoder("utf-16be").decode(t.slice(2)))}var n={"€":"","‚":"","ƒ":"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"","Š":"","‹":"","Œ":"","Ž":"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"","š":"","›":"","œ":"","ž":"","Ÿ":""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,(function(t){return n[t]||t}))}catch(o){}for(var r=[],i=0;i!=t.length;++i)r.push(String.fromCharCode(t[i]));return r.join("")}function Rc(t){if("undefined"!=typeof JSON&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if("object"!=typeof t||null==t)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=Rc(t[n]));return e}function Dc(t,e){var n="";while(n.length<e)n+=t;return n}function Fc(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var n=1,r=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,(function(){return n*=100,""}));return isNaN(e=Number(r))?(r=r.replace(/[(](.*)[)]/,(function(t,e){return n=-n,e})),isNaN(e=Number(r))?e:e/n):e/n}var jc=/^(0?\d|1[0-2])(?:|:([0-5]?\d)(?:|(\.\d+)(?:|:([0-5]?\d))|:([0-5]?\d)(|\.\d+)))\s+([ap])m?$/;function Bc(t){return t[2]?t[3]?t[4]?new Date(1899,11,30,+t[1]%12+("p"==t[7]?12:0),+t[2],+t[4],1e3*parseFloat(t[3])):new Date(1899,11,30,"p"==t[7]?12:0,+t[1],+t[2],1e3*parseFloat(t[3])):t[5]?new Date(1899,11,30,+t[1]%12+("p"==t[7]?12:0),+t[2],+t[5],t[6]?1e3*parseFloat(t[6]):0):new Date(1899,11,30,+t[1]%12+("p"==t[7]?12:0),+t[2],0,0):new Date(1899,11,30,+t[1]%12+("p"==t[7]?12:0),0,0,0)}var zc=["january","february","march","april","may","june","july","august","september","october","november","december"];function Uc(t){var e=t.toLowerCase(),n=e.replace(/\s+/g," ").trim(),r=n.match(jc);if(r)return Bc(r);var i=new Date(t),o=new Date(NaN),a=i.getYear(),s=(i.getMonth(),i.getDate());if(isNaN(s))return o;if(e.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(e=e.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),e.length>3&&-1==zc.indexOf(e))return o}else if(e.replace(/[ap]m?/,"").match(/[a-z]/))return o;return a<0||a>8099||t.match(/[^-0-9:,\/\\]/)?o:i}var Gc=function(){var t=5=="abacaba".split(/(:?b)/i).length;return function(e,n,r){if(t||"string"==typeof n)return e.split(n);for(var i=e.split(n),o=[i[0]],a=1;a<i.length;++a)o.push(r),o.push(i[a]);return o}}();function qc(t){return t?t.content&&t.type?Nc(t.content,!0):t.data?jl(t.data):t.asNodeBuffer&&Wl?jl(t.asNodeBuffer().toString("binary")):t.asBinary?jl(t.asBinary()):t._data&&t._data.getContent?jl(Nc(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function Vc(t){if(!t)return null;if(t.data)return Nl(t.data);if(t.asNodeBuffer&&Wl)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return"string"==typeof e?Nl(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function Hc(t){return t&&".bin"===t.name.slice(-4)?Vc(t):qc(t)}function Wc(t,e){for(var n=t.FullPaths||xc(t.files),r=e.toLowerCase().replace(/[\/]/g,"\\"),i=r.replace(/\\/g,"/"),o=0;o<n.length;++o){var a=n[o].replace(/^Root Entry[\/]/,"").toLowerCase();if(r==a||i==a)return t.files?t.files[n[o]]:t.FileIndex[o]}return null}function Yc(t,e){var n=Wc(t,e);if(null==n)throw new Error("Cannot find file "+e+" in zip");return n}function Xc(t,e,n){if(!n)return Hc(Yc(t,e));if(!e)return null;try{return Xc(t,e)}catch(r){return null}}function Jc(t,e,n){if(!n)return qc(Yc(t,e));if(!e)return null;try{return Jc(t,e)}catch(r){return null}}function Zc(t,e,n){if(!n)return Vc(Yc(t,e));if(!e)return null;try{return Zc(t,e)}catch(r){return null}}function Kc(t){for(var e=t.FullPaths||xc(t.files),n=[],r=0;r<e.length;++r)"/"!=e[r].slice(-1)&&n.push(e[r].replace(/^Root Entry[\/]/,""));return n.sort()}function Qc(t,e,n){if(t.FullPaths){var r;if("string"==typeof n)return r=Wl?Yl(n):eu(n),bc.utils.cfb_add(t,e,r);bc.utils.cfb_add(t,e,n)}else t.file(e,n)}function $c(t,e){switch(e.type){case"base64":return bc.read(t,{type:"base64"});case"binary":return bc.read(t,{type:"binary"});case"buffer":case"array":return bc.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function th(t,e){if("/"==t.charAt(0))return t.slice(1);var n=e.split("/");"/"!=e.slice(-1)&&n.pop();var r=t.split("/");while(0!==r.length){var i=r.shift();".."===i?n.pop():"."!==i&&n.push(i)}return n.join("/")}var eh='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n',nh=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,rh=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/gm,ih=/<[^>]*>/g,oh=eh.match(rh)?rh:ih,ah=/<\w*:/,sh=/<(\/?)\w+:/;function lh(t,e,n){for(var r={},i=0,o=0;i!==t.length;++i)if(32===(o=t.charCodeAt(i))||10===o||13===o)break;if(e||(r[0]=t.slice(0,i)),i===t.length)return r;var a=t.match(nh),s=0,l="",u=0,c="",h="",d=1;if(a)for(u=0;u!=a.length;++u){for(h=a[u],o=0;o!=h.length;++o)if(61===h.charCodeAt(o))break;c=h.slice(0,o).trim();while(32==h.charCodeAt(o+1))++o;for(d=34==(i=h.charCodeAt(o+1))||39==i?1:0,l=h.slice(o+1+d,h.length-d),s=0;s!=c.length;++s)if(58===c.charCodeAt(s))break;if(s===c.length)c.indexOf("_")>0&&(c=c.slice(0,c.indexOf("_"))),r[c]=l,n||(r[c.toLowerCase()]=l);else{var f=(5===s&&"xmlns"===c.slice(0,5)?"xmlns":"")+c.slice(s+1);if(r[f]&&"ext"==c.slice(s-3,s))continue;r[f]=l,n||(r[f.toLowerCase()]=l)}}return r}function uh(t){return t.replace(sh,"<$1")}var ch={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},hh=wc(ch),dh=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/gi,e=/_x([\da-fA-F]{4})_/gi;function n(r){var i=r+"",o=i.indexOf("<![CDATA[");if(-1==o)return i.replace(t,(function(t,e){return ch[t]||String.fromCharCode(parseInt(e,t.indexOf("x")>-1?16:10))||t})).replace(e,(function(t,e){return String.fromCharCode(parseInt(e,16))}));var a=i.indexOf("]]>");return n(i.slice(0,o))+i.slice(o+9,a)+n(i.slice(a+3))}return function(t,e){var r=n(t);return e?r.replace(/\r\n/g,"\n"):r}}(),fh=/[&<>'"]/g;var ph=/[\u0000-\u001f]/g;function gh(t){var e=t+"";return e.replace(fh,(function(t){return hh[t]})).replace(/\n/g,"<br/>").replace(ph,(function(t){return"&#x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+";"}))}var mh=function(){var t=/&#(\d+);/g;function e(t,e){return String.fromCharCode(parseInt(e,10))}return function(n){return n.replace(t,e)}}();function yh(t){switch(t){case 1:case!0:case"1":case"true":return!0;case 0:case!1:case"0":case"false":return!1}return!1}function vh(t){var e="",n=0,r=0,i=0,o=0,a=0,s=0;while(n<t.length)r=t.charCodeAt(n++),r<128?e+=String.fromCharCode(r):(i=t.charCodeAt(n++),r>191&&r<224?(a=(31&r)<<6,a|=63&i,e+=String.fromCharCode(a)):(o=t.charCodeAt(n++),r<240?e+=String.fromCharCode((15&r)<<12|(63&i)<<6|63&o):(a=t.charCodeAt(n++),s=((7&r)<<18|(63&i)<<12|(63&o)<<6|63&a)-65536,e+=String.fromCharCode(55296+(s>>>10&1023)),e+=String.fromCharCode(56320+(1023&s)))));return e}function bh(t){var e,n,r,i=Jl(2*t.length),o=1,a=0,s=0;for(n=0;n<t.length;n+=o)o=1,(r=t.charCodeAt(n))<128?e=r:r<224?(e=64*(31&r)+(63&t.charCodeAt(n+1)),o=2):r<240?(e=4096*(15&r)+64*(63&t.charCodeAt(n+1))+(63&t.charCodeAt(n+2)),o=3):(o=4,e=262144*(7&r)+4096*(63&t.charCodeAt(n+1))+64*(63&t.charCodeAt(n+2))+(63&t.charCodeAt(n+3)),e-=65536,s=55296+(e>>>10&1023),e=56320+(1023&e)),0!==s&&(i[a++]=255&s,i[a++]=s>>>8,s=0),i[a++]=e%256,i[a++]=e>>>8;return i.slice(0,a).toString("ucs2")}function _h(t){return Yl(t,"binary").toString("utf8")}var xh="foo bar bazâð£",wh=Wl&&(_h(xh)==vh(xh)&&_h||bh(xh)==vh(xh)&&bh)||vh,Sh=Wl?function(t){return Yl(t,"utf8").toString("binary")}:function(t){var e=[],n=0,r=0,i=0;while(n<t.length)switch(r=t.charCodeAt(n++),!0){case r<128:e.push(String.fromCharCode(r));break;case r<2048:e.push(String.fromCharCode(192+(r>>6))),e.push(String.fromCharCode(128+(63&r)));break;case r>=55296&&r<57344:r-=55296,i=t.charCodeAt(n++)-56320+(r<<10),e.push(String.fromCharCode(240+(i>>18&7))),e.push(String.fromCharCode(144+(i>>12&63))),e.push(String.fromCharCode(128+(i>>6&63))),e.push(String.fromCharCode(128+(63&i)));break;default:e.push(String.fromCharCode(224+(r>>12))),e.push(String.fromCharCode(128+(r>>6&63))),e.push(String.fromCharCode(128+(63&r)))}return e.join("")},Eh=function(){var t={};return function(e,n){var r=e+"|"+(n||"");return t[r]?t[r]:t[r]=new RegExp("<(?:\\w+:)?"+e+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+e+">",n||"")}}(),Ch=function(){var t=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map((function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]}));return function(e){for(var n=e.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,"\n").replace(/<[^>]*>/g,""),r=0;r<t.length;++r)n=n.replace(t[r][0],t[r][1]);return n}}(),Mh=function(){var t={};return function(e){return void 0!==t[e]?t[e]:t[e]=new RegExp("<(?:vt:)?"+e+">([\\s\\S]*?)</(?:vt:)?"+e+">","g")}}(),Th=/<\/?(?:vt:)?variant>/g,Ah=/<(?:vt:)([^>]*)>([\s\S]*)</;function Oh(t,e){var n=lh(t),r=t.match(Mh(n.baseType))||[],i=[];if(r.length!=n.size){if(e.WTF)throw new Error("unexpected vector length "+r.length+" != "+n.size);return i}return r.forEach((function(t){var e=t.replace(Th,"").match(Ah);e&&i.push({v:wh(e[2]),t:e[1]})})),i}var kh=/(^\s|\s$|\n)/;function Ih(t){return xc(t).map((function(e){return" "+e+'="'+t[e]+'"'})).join("")}function Ph(t,e,n){return"<"+t+(null!=n?Ih(n):"")+(null!=e?(e.match(kh)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function Lh(t){if(Wl&&Buffer.isBuffer(t))return t.toString("utf8");if("string"===typeof t)return t;if("undefined"!==typeof Uint8Array&&t instanceof Uint8Array)return wh(Ql($l(t)));throw new Error("Bad input format: expected Buffer or string")}var Nh=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/](?:[^>=]|="[^"]*?")*)?>/gm,Rh={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",mx:"http://schemas.microsoft.com/office/mac/excel/2008/main",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",sjs:"http://schemas.openxmlformats.org/package/2006/sheetjs/core-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Dh=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function Fh(t,e){for(var n=1-2*(t[e+7]>>>7),r=((127&t[e+7])<<4)+(t[e+6]>>>4&15),i=15&t[e+6],o=5;o>=0;--o)i=256*i+t[e+o];return 2047==r?0==i?n*(1/0):NaN:(0==r?r=-1022:(r-=1023,i+=Math.pow(2,52)),n*Math.pow(2,r-52)*i)}function jh(t,e,n){var r=(e<0||1/e==-1/0?1:0)<<7,i=0,o=0,a=r?-e:e;isFinite(a)?0==a?i=o=0:(i=Math.floor(Math.log(a)/Math.LN2),o=a*Math.pow(2,52-i),i<=-1023&&(!isFinite(o)||o<Math.pow(2,52))?i=-1022:(o-=Math.pow(2,52),i+=1023)):(i=2047,o=isNaN(e)?26985:0);for(var s=0;s<=5;++s,o/=256)t[n+s]=255&o;t[n+6]=(15&i)<<4|15&o,t[n+7]=i>>4|r}var Bh=function(t){for(var e=[],n=10240,r=0;r<t[0].length;++r)if(t[0][r])for(var i=0,o=t[0][r].length;i<o;i+=n)e.push.apply(e,t[0][r].slice(i,i+n));return e},zh=Wl?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map((function(t){return Buffer.isBuffer(t)?t:Yl(t)}))):Bh(t)}:Bh,Uh=function(t,e,n){for(var r=[],i=e;i<n;i+=2)r.push(String.fromCharCode(ld(t,i)));return r.join("").replace(nu,"")},Gh=Wl?function(t,e,n){return Buffer.isBuffer(t)&&Xl?t.toString("utf16le",e,n).replace(nu,""):Uh(t,e,n)}:Uh,qh=function(t,e,n){for(var r=[],i=e;i<e+n;++i)r.push(("0"+t[i].toString(16)).slice(-2));return r.join("")},Vh=Wl?function(t,e,n){return Buffer.isBuffer(t)?t.toString("hex",e,e+n):qh(t,e,n)}:qh,Hh=function(t,e,n){for(var r=[],i=e;i<n;i++)r.push(String.fromCharCode(sd(t,i)));return r.join("")},Wh=Wl?function(t,e,n){return Buffer.isBuffer(t)?t.toString("utf8",e,n):Hh(t,e,n)}:Hh,Yh=function(t,e){var n=cd(t,e);return n>0?Wh(t,e+4,e+4+n-1):""},Xh=Yh,Jh=function(t,e){var n=cd(t,e);return n>0?Wh(t,e+4,e+4+n-1):""},Zh=Jh,Kh=function(t,e){var n=2*cd(t,e);return n>0?Wh(t,e+4,e+4+n-1):""},Qh=Kh,$h=function(t,e){var n=cd(t,e);return n>0?Gh(t,e+4,e+4+n):""},td=$h,ed=function(t,e){var n=cd(t,e);return n>0?Wh(t,e+4,e+4+n):""},nd=ed,rd=function(t,e){return Fh(t,e)},id=rd,od=function(t){return Array.isArray(t)||"undefined"!==typeof Uint8Array&&t instanceof Uint8Array};function ad(){Gh=function(t,e,n){return El.utils.decode(1200,t.slice(e,n)).replace(nu,"")},Wh=function(t,e,n){return El.utils.decode(65001,t.slice(e,n))},Xh=function(t,e){var n=cd(t,e);return n>0?El.utils.decode(Tl,t.slice(e+4,e+4+n-1)):""},Zh=function(t,e){var n=cd(t,e);return n>0?El.utils.decode(Ml,t.slice(e+4,e+4+n-1)):""},Qh=function(t,e){var n=2*cd(t,e);return n>0?El.utils.decode(1200,t.slice(e+4,e+4+n-1)):""},td=function(t,e){var n=cd(t,e);return n>0?El.utils.decode(1200,t.slice(e+4,e+4+n)):""},nd=function(t,e){var n=cd(t,e);return n>0?El.utils.decode(65001,t.slice(e+4,e+4+n)):""}}Wl&&(Xh=function(t,e){if(!Buffer.isBuffer(t))return Yh(t,e);var n=t.readUInt32LE(e);return n>0?t.toString("utf8",e+4,e+4+n-1):""},Zh=function(t,e){if(!Buffer.isBuffer(t))return Jh(t,e);var n=t.readUInt32LE(e);return n>0?t.toString("utf8",e+4,e+4+n-1):""},Qh=function(t,e){if(!Buffer.isBuffer(t)||!Xl)return Kh(t,e);var n=2*t.readUInt32LE(e);return t.toString("utf16le",e+4,e+4+n-1)},td=function(t,e){if(!Buffer.isBuffer(t)||!Xl)return $h(t,e);var n=t.readUInt32LE(e);return t.toString("utf16le",e+4,e+4+n)},nd=function(t,e){if(!Buffer.isBuffer(t))return ed(t,e);var n=t.readUInt32LE(e);return t.toString("utf8",e+4,e+4+n)},id=function(t,e){return Buffer.isBuffer(t)?t.readDoubleLE(e):rd(t,e)},od=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||"undefined"!==typeof Uint8Array&&t instanceof Uint8Array}),"undefined"!==typeof El&&ad();var sd=function(t,e){return t[e]},ld=function(t,e){return 256*t[e+1]+t[e]},ud=function(t,e){var n=256*t[e+1]+t[e];return n<32768?n:-1*(65535-n+1)},cd=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},hd=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},dd=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function fd(t,e){var n,r,i,o,a,s,l="",u=[];switch(e){case"dbcs":if(s=this.l,Wl&&Buffer.isBuffer(this)&&Xl)l=this.slice(this.l,this.l+2*t).toString("utf16le");else for(a=0;a<t;++a)l+=String.fromCharCode(ld(this,s)),s+=2;t*=2;break;case"utf8":l=Wh(this,this.l,this.l+t);break;case"utf16le":t*=2,l=Gh(this,this.l,this.l+t);break;case"wstr":if("undefined"===typeof El)return fd.call(this,t,"dbcs");l=El.utils.decode(Ml,this.slice(this.l,this.l+2*t)),t*=2;break;case"lpstr-ansi":l=Xh(this,this.l),t=4+cd(this,this.l);break;case"lpstr-cp":l=Zh(this,this.l),t=4+cd(this,this.l);break;case"lpwstr":l=Qh(this,this.l),t=4+2*cd(this,this.l);break;case"lpp4":t=4+cd(this,this.l),l=td(this,this.l),2&t&&(t+=2);break;case"8lpp4":t=4+cd(this,this.l),l=nd(this,this.l),3&t&&(t+=4-(3&t));break;case"cstr":t=0,l="";while(0!==(i=sd(this,this.l+t++)))u.push(Bl(i));l=u.join("");break;case"_wstr":t=0,l="";while(0!==(i=ld(this,this.l+t)))u.push(Bl(i)),t+=2;t+=2,l=u.join("");break;case"dbcs-cont":for(l="",s=this.l,a=0;a<t;++a){if(this.lens&&-1!==this.lens.indexOf(s))return i=sd(this,s),this.l=s+1,o=fd.call(this,t-a,i?"dbcs-cont":"sbcs-cont"),u.join("")+o;u.push(Bl(ld(this,s))),s+=2}l=u.join(""),t*=2;break;case"cpstr":if("undefined"!==typeof El){l=El.utils.decode(Ml,this.slice(this.l,this.l+t));break}case"sbcs-cont":for(l="",s=this.l,a=0;a!=t;++a){if(this.lens&&-1!==this.lens.indexOf(s))return i=sd(this,s),this.l=s+1,o=fd.call(this,t-a,i?"dbcs-cont":"sbcs-cont"),u.join("")+o;u.push(Bl(sd(this,s))),s+=1}l=u.join("");break;default:switch(t){case 1:return n=sd(this,this.l),this.l++,n;case 2:return n=("i"===e?ud:ld)(this,this.l),this.l+=2,n;case 4:case-4:return"i"===e||0===(128&this[this.l+3])?(n=(t>0?hd:dd)(this,this.l),this.l+=4,n):(r=cd(this,this.l),this.l+=4,r);case 8:case-8:if("f"===e)return r=8==t?id(this,this.l):id([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,r;t=8;case 16:l=Vh(this,this.l,t);break}}return this.l+=t,l}var pd=function(t,e,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24&255},gd=function(t,e,n){t[n]=255&e,t[n+1]=e>>8&255,t[n+2]=e>>16&255,t[n+3]=e>>24&255},md=function(t,e,n){t[n]=255&e,t[n+1]=e>>>8&255};function yd(t,e,n){var r=0,i=0;if("dbcs"===n){for(i=0;i!=e.length;++i)md(this,e.charCodeAt(i),this.l+2*i);r=2*e.length}else if("sbcs"===n||"cpstr"==n)if("undefined"!==typeof El&&874==Tl){for(i=0;i!=e.length;++i){var o=El.utils.encode(Tl,e.charAt(i));this[this.l+i]=o[0]}r=e.length}else if("undefined"!==typeof El&&"cpstr"==n){if(o=El.utils.encode(Ml,e),o.length==e.length)for(i=0;i<e.length;++i)0==o[i]&&0!=e.charCodeAt(i)&&(o[i]=95);if(o.length==2*e.length)for(i=0;i<e.length;++i)0==o[2*i]&&0==o[2*i+1]&&0!=e.charCodeAt(i)&&(o[2*i]=95);for(i=0;i<o.length;++i)this[this.l+i]=o[i];r=o.length}else{for(e=e.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=e.length;++i)this[this.l+i]=255&e.charCodeAt(i);r=e.length}else{if("hex"===n){for(;i<t;++i)this[this.l++]=parseInt(e.slice(2*i,2*i+2),16)||0;return this}if("utf16le"===n){var a=Math.min(this.l+t,this.length);for(i=0;i<Math.min(e.length,t);++i){var s=e.charCodeAt(i);this[this.l++]=255&s,this[this.l++]=s>>8}while(this.l<a)this[this.l++]=0;return this}switch(t){case 1:r=1,this[this.l]=255&e;break;case 2:r=2,this[this.l]=255&e,e>>>=8,this[this.l+1]=255&e;break;case 3:r=3,this[this.l]=255&e,e>>>=8,this[this.l+1]=255&e,e>>>=8,this[this.l+2]=255&e;break;case 4:r=4,pd(this,e,this.l);break;case 8:if(r=8,"f"===n){jh(this,e,this.l);break}case 16:break;case-4:r=4,gd(this,e,this.l);break}}return this.l+=r,this}function vd(t,e){var n=Vh(this,this.l,t.length>>1);if(n!==t)throw new Error(e+"Expected "+t+" saw "+n);this.l+=t.length>>1}function bd(t,e){t.l=e,t.read_shift=fd,t.chk=vd,t.write_shift=yd}function _d(t,e){t.l+=e}function xd(t){var e=Jl(t);return bd(e,0),e}function wd(t,e,n){if(t){var r,i,o;bd(t,t.l||0);var a=t.length,s=0,l=0;while(t.l<a){s=t.read_shift(1),128&s&&(s=(127&s)+((127&t.read_shift(1))<<7));var u=Ow[s]||Ow[65535];for(r=t.read_shift(1),o=127&r,i=1;i<4&&128&r;++i)o+=(127&(r=t.read_shift(1)))<<7*i;l=t.l+o;var c=u.f&&u.f(t,o,n);if(t.l=l,e(c,u,s))return}}}function Sd(){var t=[],e=Wl?256:2048,n=function(t){var e=xd(t);return bd(e,0),e},r=n(e),i=function(){r&&(r.l&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&t.push(r)),r=null)},o=function(t){return r&&t<r.length-r.l?r:(i(),r=n(Math.max(t+1,e)))},a=function(){return i(),tu(t)},s=function(t){i(),r=t,null==r.l&&(r.l=r.length),o(e)};return{next:o,push:s,end:a,_bufs:t}}function Ed(t,e,n){var r=Rc(t);if(e.s?(r.cRel&&(r.c+=e.s.c),r.rRel&&(r.r+=e.s.r)):(r.cRel&&(r.c+=e.c),r.rRel&&(r.r+=e.r)),!n||n.biff<12){while(r.c>=256)r.c-=256;while(r.r>=65536)r.r-=65536}return r}function Cd(t,e,n){var r=Rc(t);return r.s=Ed(r.s,e.s,n),r.e=Ed(r.e,e.s,n),r}function Md(t,e){if(t.cRel&&t.c<0){t=Rc(t);while(t.c<0)t.c+=e>8?16384:256}if(t.rRel&&t.r<0){t=Rc(t);while(t.r<0)t.r+=e>8?1048576:e>5?65536:16384}var n=jd(t);return t.cRel||null==t.cRel||(n=Nd(n)),t.rRel||null==t.rRel||(n=kd(n)),n}function Td(t,e){return 0!=t.s.r||t.s.rRel||t.e.r!=(e.biff>=12?1048575:e.biff>=8?65536:16384)||t.e.rRel?0!=t.s.c||t.s.cRel||t.e.c!=(e.biff>=12?16383:255)||t.e.cRel?Md(t.s,e.biff)+":"+Md(t.e,e.biff):(t.s.rRel?"":"$")+Od(t.s.r)+":"+(t.e.rRel?"":"$")+Od(t.e.r):(t.s.cRel?"":"$")+Ld(t.s.c)+":"+(t.e.cRel?"":"$")+Ld(t.e.c)}function Ad(t){return parseInt(Id(t),10)-1}function Od(t){return""+(t+1)}function kd(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Id(t){return t.replace(/\$(\d+)$/,"$1")}function Pd(t){for(var e=Rd(t),n=0,r=0;r!==e.length;++r)n=26*n+e.charCodeAt(r)-64;return n-1}function Ld(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function Nd(t){return t.replace(/^([A-Z])/,"$$$1")}function Rd(t){return t.replace(/^\$([A-Z])/,"$1")}function Dd(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Fd(t){for(var e=0,n=0,r=0;r<t.length;++r){var i=t.charCodeAt(r);i>=48&&i<=57?e=10*e+(i-48):i>=65&&i<=90&&(n=26*n+(i-64))}return{c:n-1,r:e-1}}function jd(t){for(var e=t.c+1,n="";e;e=(e-1)/26|0)n=String.fromCharCode((e-1)%26+65)+n;return n+(t.r+1)}function Bd(t){var e=t.indexOf(":");return-1==e?{s:Fd(t),e:Fd(t)}:{s:Fd(t.slice(0,e)),e:Fd(t.slice(e+1))}}function zd(t,e){return"undefined"===typeof e||"number"===typeof e?zd(t.s,t.e):("string"!==typeof t&&(t=jd(t)),"string"!==typeof e&&(e=jd(e)),t==e?t:t+":"+e)}function Ud(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t.replace(/'/g,"''")+"'":t}function Gd(t){var e={s:{c:0,r:0},e:{c:0,r:0}},n=0,r=0,i=0,o=t.length;for(n=0;r<o;++r){if((i=t.charCodeAt(r)-64)<1||i>26)break;n=26*n+i}for(e.s.c=--n,n=0;r<o;++r){if((i=t.charCodeAt(r)-48)<0||i>9)break;n=10*n+i}if(e.s.r=--n,r===o||10!=i)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++r,n=0;r!=o;++r){if((i=t.charCodeAt(r)-64)<1||i>26)break;n=26*n+i}for(e.e.c=--n,n=0;r!=o;++r){if((i=t.charCodeAt(r)-48)<0||i>9)break;n=10*n+i}return e.e.r=--n,e}function qd(t,e){var n="d"==t.t&&e instanceof Date;if(null!=t.z)try{return t.w=lc(t.z,n?Ec(e):e)}catch(r){}try{return t.w=lc((t.XF||{}).numFmtId||(n?14:0),n?Ec(e):e)}catch(r){return""+e}}function Vd(t,e,n){return null==t||null==t.t||"z"==t.t?"":void 0!==t.w?t.w:("d"==t.t&&!t.z&&n&&n.dateNF&&(t.z=n.dateNF),"e"==t.t?Rf[t.v]||t.v:qd(t,void 0==e?t.v:e))}function Hd(t,e){var n=e&&e.sheet?e.sheet:"Sheet1",r={};return r[n]=t,{SheetNames:[n],Sheets:r}}function Wd(t,e,n){var r=n||{},i=t?null!=t["!data"]:r.dense;null!=Ul&&null==i&&(i=Ul);var o=t||{};i&&!o["!data"]&&(o["!data"]=[]);var a=0,s=0;if(o&&null!=r.origin){if("number"==typeof r.origin)a=r.origin;else{var l="string"==typeof r.origin?Fd(r.origin):r.origin;a=l.r,s=l.c}o["!ref"]||(o["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(o["!ref"]){var c=Gd(o["!ref"]);u.s.c=c.s.c,u.s.r=c.s.r,u.e.c=Math.max(u.e.c,c.e.c),u.e.r=Math.max(u.e.r,c.e.r),-1==a&&(u.e.r=a=c.e.r+1)}for(var h=[],d=0;d!=e.length;++d)if(e[d]){if(!Array.isArray(e[d]))throw new Error("aoa_to_sheet expects an array of arrays");var f=a+d,p=""+(f+1);i&&(o["!data"][f]||(o["!data"][f]=[]),h=o["!data"][f]);for(var g=0;g!=e[d].length;++g)if("undefined"!==typeof e[d][g]){var m={v:e[d][g]},y=s+g;if(u.s.r>f&&(u.s.r=f),u.s.c>y&&(u.s.c=y),u.e.r<f&&(u.e.r=f),u.e.c<y&&(u.e.c=y),!e[d][g]||"object"!==typeof e[d][g]||Array.isArray(e[d][g])||e[d][g]instanceof Date)if(Array.isArray(m.v)&&(m.f=e[d][g][1],m.v=m.v[0]),null===m.v)if(m.f)m.t="n";else if(r.nullError)m.t="e",m.v=0;else{if(!r.sheetStubs)continue;m.t="z"}else"number"===typeof m.v?m.t="n":"boolean"===typeof m.v?m.t="b":m.v instanceof Date?(m.z=r.dateNF||mu[14],r.cellDates?(m.t="d",m.w=lc(m.z,Ec(m.v,r.date1904))):(m.t="n",m.v=Ec(m.v,r.date1904),m.w=lc(m.z,m.v))):m.t="s";else m=e[d][g];if(i)h[y]&&h[y].z&&(m.z=h[y].z),h[y]=m;else{var v=Ld(y)+p;o[v]&&o[v].z&&(m.z=o[v].z),o[v]=m}}}return u.s.c<1e7&&(o["!ref"]=zd(u)),o}function Yd(t,e){return Wd(null,t,e)}function Xd(t){return t.read_shift(4,"i")}function Jd(t){var e=t.read_shift(4);return 0===e?"":t.read_shift(e,"dbcs")}function Zd(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function Kd(t,e){var n=t.l,r=t.read_shift(1),i=Jd(t),o=[],a={t:i,h:i};if(0!==(1&r)){for(var s=t.read_shift(4),l=0;l!=s;++l)o.push(Zd(t));a.r=o}else a.r=[{ich:0,ifnt:0}];return t.l=n+e,a}var Qd=Kd;function $d(t){var e=t.read_shift(4),n=t.read_shift(2);return n+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:n}}function tf(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}var ef=Jd;function nf(t){var e=t.read_shift(4);return 0===e||4294967295===e?"":t.read_shift(e,"dbcs")}var rf=Jd,of=nf;function af(t){var e=t.slice(t.l,t.l+4),n=1&e[0],r=2&e[0];t.l+=4;var i=0===r?id([0,0,0,0,252&e[0],e[1],e[2],e[3]],0):hd(e,0)>>2;return n?i/100:i}function sf(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}var lf=sf;function uf(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function cf(t){var e={},n=t.read_shift(1),r=n>>>1,i=t.read_shift(1),o=t.read_shift(2,"i"),a=t.read_shift(1),s=t.read_shift(1),l=t.read_shift(1);switch(t.l++,r){case 0:e.auto=1;break;case 1:e.index=i;var u=Nf[i];u&&(e.rgb=ry(u));break;case 2:e.rgb=ry([a,s,l]);break;case 3:e.theme=i;break}return 0!=o&&(e.tint=o>0?o/32767:o/32768),e}function hf(t){var e=t.read_shift(1);t.l++;var n={fBold:1&e,fItalic:2&e,fUnderline:4&e,fStrikeout:8&e,fOutline:16&e,fShadow:32&e,fCondense:64&e,fExtend:128&e};return n}function df(t,e){var n={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},r=t.read_shift(4);switch(r){case 0:return"";case 4294967295:case 4294967294:return n[t.read_shift(4)]||""}if(r>400)throw new Error("Unsupported Clipboard: "+r.toString(16));return t.l-=4,t.read_shift(0,1==e?"lpstr":"lpwstr")}function ff(t){return df(t,1)}function pf(t){return df(t,2)}var gf=2,mf=3,yf=11,vf=12,bf=19,_f=64,xf=65,wf=71,Sf=4108,Ef=4126,Cf=80,Mf=81,Tf=[Cf,Mf],Af={1:{n:"CodePage",t:gf},2:{n:"Category",t:Cf},3:{n:"PresentationFormat",t:Cf},4:{n:"ByteCount",t:mf},5:{n:"LineCount",t:mf},6:{n:"ParagraphCount",t:mf},7:{n:"SlideCount",t:mf},8:{n:"NoteCount",t:mf},9:{n:"HiddenCount",t:mf},10:{n:"MultimediaClipCount",t:mf},11:{n:"ScaleCrop",t:yf},12:{n:"HeadingPairs",t:Sf},13:{n:"TitlesOfParts",t:Ef},14:{n:"Manager",t:Cf},15:{n:"Company",t:Cf},16:{n:"LinksUpToDate",t:yf},17:{n:"CharacterCount",t:mf},19:{n:"SharedDoc",t:yf},22:{n:"HyperlinksChanged",t:yf},23:{n:"AppVersion",t:mf,p:"version"},24:{n:"DigSig",t:xf},26:{n:"ContentType",t:Cf},27:{n:"ContentStatus",t:Cf},28:{n:"Language",t:Cf},29:{n:"Version",t:Cf},255:{},2147483648:{n:"Locale",t:bf},2147483651:{n:"Behavior",t:bf},1919054434:{}},Of={1:{n:"CodePage",t:gf},2:{n:"Title",t:Cf},3:{n:"Subject",t:Cf},4:{n:"Author",t:Cf},5:{n:"Keywords",t:Cf},6:{n:"Comments",t:Cf},7:{n:"Template",t:Cf},8:{n:"LastAuthor",t:Cf},9:{n:"RevNumber",t:Cf},10:{n:"EditTime",t:_f},11:{n:"LastPrinted",t:_f},12:{n:"CreatedDate",t:_f},13:{n:"ModifiedDate",t:_f},14:{n:"PageCount",t:mf},15:{n:"WordCount",t:mf},16:{n:"CharCount",t:mf},17:{n:"Thumbnail",t:wf},18:{n:"Application",t:Cf},19:{n:"DocSecurity",t:mf},255:{},2147483648:{n:"Locale",t:bf},2147483651:{n:"Behavior",t:bf},1919054434:{}},kf={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},If=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function Pf(t){return t.map((function(t){return[t>>16&255,t>>8&255,255&t]}))}var Lf=Pf([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,0,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Nf=Rc(Lf),Rf={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Df={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},Ff=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"],jf={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function Bf(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function zf(t){var e=Bf();if(!t||!t.match)return e;var n={};if((t.match(oh)||[]).forEach((function(t){var r=lh(t);switch(r[0].replace(ah,"<")){case"<?xml":break;case"<Types":e.xmlns=r["xmlns"+(r[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":n[r.Extension.toLowerCase()]=r.ContentType;break;case"<Override":void 0!==e[jf[r.ContentType]]&&e[jf[r.ContentType]].push(r.PartName);break}})),e.xmlns!==Rh.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=n,delete e.calcchains,e}var Uf={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",CONN:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/connections",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Gf(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function qf(t,e){var n={"!id":{}};if(!t)return n;"/"!==e.charAt(0)&&(e="/"+e);var r={};return(t.match(oh)||[]).forEach((function(t){var i=lh(t);if("<Relationship"===i[0]){var o={};o.Type=i.Type,o.Target=dh(i.Target),o.Id=i.Id,i.TargetMode&&(o.TargetMode=i.TargetMode);var a="External"===i.TargetMode?i.Target:th(i.Target,e);n[a]=o,r[i.Id]=o}})),n["!id"]=r,n}var Vf="application/vnd.oasis.opendocument.spreadsheet";function Hf(t,e){var n,r,i=Lh(t);while(n=Nh.exec(i))switch(n[3]){case"manifest":break;case"file-entry":if(r=lh(n[0],!1),"/"==r.path&&r.type!==Vf)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw n}}var Wf=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],Yf=function(){for(var t=new Array(Wf.length),e=0;e<Wf.length;++e){var n=Wf[e],r="(?:"+n[0].slice(0,n[0].indexOf(":"))+":)"+n[0].slice(n[0].indexOf(":")+1);t[e]=new RegExp("<"+r+"[^>]*>([\\s\\S]*?)</"+r+">")}return t}();function Xf(t){var e={};t=wh(t);for(var n=0;n<Wf.length;++n){var r=Wf[n],i=t.match(Yf[n]);null!=i&&i.length>0&&(e[r[1]]=dh(i[1])),"date"===r[2]&&e[r[1]]&&(e[r[1]]=Lc(e[r[1]]))}return e}var Jf=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function Zf(t,e,n,r){var i=[];if("string"==typeof t)i=Oh(t,r);else for(var o=0;o<t.length;++o)i=i.concat(t[o].map((function(t){return{v:t}})));var a="string"==typeof e?Oh(e,r).map((function(t){return t.v})):e,s=0,l=0;if(a.length>0)for(var u=0;u!==i.length;u+=2){switch(l=+i[u+1].v,i[u].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":n.Worksheets=l,n.SheetNames=a.slice(s,s+l);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":n.NamedRanges=l,n.DefinedNames=a.slice(s,s+l);break;case"Charts":case"Diagramme":n.Chartsheets=l,n.ChartNames=a.slice(s,s+l);break}s+=l}}function Kf(t,e,n){var r={};return e||(e={}),t=wh(t),Jf.forEach((function(n){var i=(t.match(Eh(n[0]))||[])[1];switch(n[2]){case"string":i&&(e[n[1]]=dh(i));break;case"bool":e[n[1]]="true"===i;break;case"raw":var o=t.match(new RegExp("<"+n[0]+"[^>]*>([\\s\\S]*?)</"+n[0]+">"));o&&o.length>0&&(r[n[1]]=o[1]);break}})),r.HeadingPairs&&r.TitlesOfParts&&Zf(r.HeadingPairs,r.TitlesOfParts,e,n),e}var Qf=/<[^>]+>[^<]*/g;function $f(t,e){var n={},r="",i=t.match(Qf);if(i)for(var o=0;o!=i.length;++o){var a=i[o],s=lh(a);switch(uh(s[0])){case"<?xml":break;case"<Properties":break;case"<property":r=dh(s.name);break;case"</property>":r=null;break;default:if(0===a.indexOf("<vt:")){var l=a.split(">"),u=l[0].slice(4),c=l[1];switch(u){case"lpstr":case"bstr":case"lpwstr":n[r]=dh(c);break;case"bool":n[r]=yh(c);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":n[r]=parseInt(c,10);break;case"r4":case"r8":case"decimal":n[r]=parseFloat(c);break;case"filetime":case"date":n[r]=Lc(c);break;case"cy":case"error":n[r]=dh(c);break;default:if("/"==u.slice(-1))break;e.WTF&&"undefined"!==typeof console&&console.warn("Unexpected",a,u,l)}}else if("</"===a.slice(0,2));else if(e.WTF)throw new Error(a)}}return n}var tp,ep={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function np(t,e,n){tp||(tp=wc(ep)),e=tp[e]||e,t[e]=n}function rp(t){var e=t.read_shift(4),n=t.read_shift(4);return new Date(1e3*(n/1e7*Math.pow(2,32)+e/1e7-11644473600)).toISOString().replace(/\.000/,"")}function ip(t,e,n){var r=t.l,i=t.read_shift(0,"lpstr-cp");if(n)while(t.l-r&3)++t.l;return i}function op(t,e,n){var r=t.read_shift(0,"lpwstr");return n&&(t.l+=4-(r.length+1&3)&3),r}function ap(t,e,n){return 31===e?op(t):ip(t,e,n)}function sp(t,e,n){return ap(t,e,!1===n?0:4)}function lp(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return ap(t,e,0)}function up(t){for(var e=t.read_shift(4),n=[],r=0;r!=e;++r){var i=t.l;n[r]=t.read_shift(0,"lpwstr").replace(nu,""),t.l-i&2&&(t.l+=2)}return n}function cp(t){for(var e=t.read_shift(4),n=[],r=0;r!=e;++r)n[r]=t.read_shift(0,"lpstr-cp").replace(nu,"");return n}function hp(t){var e=t.l,n=mp(t,Mf);0==t[t.l]&&0==t[t.l+1]&&t.l-e&2&&(t.l+=2);var r=mp(t,mf);return[n,r]}function dp(t){for(var e=t.read_shift(4),n=[],r=0;r<e/2;++r)n.push(hp(t));return n}function fp(t,e){for(var n=t.read_shift(4),r={},i=0;i!=n;++i){var o=t.read_shift(4),a=t.read_shift(4);r[o]=t.read_shift(a,1200===e?"utf16le":"utf8").replace(nu,"").replace(ru,"!"),1200===e&&a%2&&(t.l+=2)}return 3&t.l&&(t.l=t.l>>3<<2),r}function pp(t){var e=t.read_shift(4),n=t.slice(t.l,t.l+e);return t.l+=e,(3&e)>0&&(t.l+=4-(3&e)&3),n}function gp(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function mp(t,e,n){var r,i=t.read_shift(2),o=n||{};if(t.l+=2,e!==vf&&i!==e&&-1===Tf.indexOf(e)&&(4126!=(65534&e)||4126!=(65534&i)))throw new Error("Expected type "+e+" saw "+i);switch(e===vf?i:e){case 2:return r=t.read_shift(2,"i"),o.raw||(t.l+=2),r;case 3:return r=t.read_shift(4,"i"),r;case 11:return 0!==t.read_shift(4);case 19:return r=t.read_shift(4),r;case 30:return ip(t,i,4).replace(nu,"");case 31:return op(t);case 64:return rp(t);case 65:return pp(t);case 71:return gp(t);case 80:return sp(t,i,!o.raw).replace(nu,"");case 81:return lp(t,i).replace(nu,"");case 4108:return dp(t);case 4126:case 4127:return 4127==i?up(t):cp(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+i)}}function yp(t,e){var n=t.l,r=t.read_shift(4),i=t.read_shift(4),o=[],a=0,s=0,l=-1,u={};for(a=0;a!=i;++a){var c=t.read_shift(4),h=t.read_shift(4);o[a]=[c,h+n]}o.sort((function(t,e){return t[1]-e[1]}));var d={};for(a=0;a!=i;++a){if(t.l!==o[a][1]){var f=!0;if(a>0&&e)switch(e[o[a-1][0]].t){case 2:t.l+2===o[a][1]&&(t.l+=2,f=!1);break;case 80:t.l<=o[a][1]&&(t.l=o[a][1],f=!1);break;case 4108:t.l<=o[a][1]&&(t.l=o[a][1],f=!1);break}if((!e||0==a)&&t.l<=o[a][1]&&(f=!1,t.l=o[a][1]),f)throw new Error("Read Error: Expected address "+o[a][1]+" at "+t.l+" :"+a)}if(e){if(0==o[a][0]&&o.length>a+1&&o[a][1]==o[a+1][1])continue;var p=e[o[a][0]];if(d[p.n]=mp(t,p.t,{raw:!0}),"version"===p.p&&(d[p.n]=String(d[p.n]>>16)+"."+("0000"+String(65535&d[p.n])).slice(-4)),"CodePage"==p.n)switch(d[p.n]){case 0:d[p.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Pl(s=d[p.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+d[p.n])}}else if(1===o[a][0]){if(s=d.CodePage=mp(t,gf),Pl(s),-1!==l){var g=t.l;t.l=o[l][1],u=fp(t,s),t.l=g}}else if(0===o[a][0]){if(0===s){l=a,t.l=o[a+1][1];continue}u=fp(t,s)}else{var m,y=u[o[a][0]];switch(t[t.l]){case 65:t.l+=4,m=pp(t);break;case 30:t.l+=4,m=sp(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,m=sp(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,m=t.read_shift(4,"i");break;case 19:t.l+=4,m=t.read_shift(4);break;case 5:t.l+=4,m=t.read_shift(8,"f");break;case 11:t.l+=4,m=xp(t,4);break;case 64:t.l+=4,m=Lc(rp(t));break;default:throw new Error("unparsed value: "+t[t.l])}d[y]=m}}return t.l=n+r,d}function vp(t,e,n){var r=t.content;if(!r)return{};bd(r,0);var i,o,a,s,l=0;r.chk("feff","Byte Order: "),r.read_shift(2);var u=r.read_shift(4),c=r.read_shift(16);if(c!==bc.utils.consts.HEADER_CLSID&&c!==n)throw new Error("Bad PropertySet CLSID "+c);if(i=r.read_shift(4),1!==i&&2!==i)throw new Error("Unrecognized #Sets: "+i);if(o=r.read_shift(16),s=r.read_shift(4),1===i&&s!==r.l)throw new Error("Length mismatch: "+s+" !== "+r.l);2===i&&(a=r.read_shift(16),l=r.read_shift(4));var h,d=yp(r,e),f={SystemIdentifier:u};for(var p in d)f[p]=d[p];if(f.FMTID=o,1===i)return f;if(l-r.l==2&&(r.l+=2),r.l!==l)throw new Error("Length mismatch 2: "+r.l+" !== "+l);try{h=yp(r,null)}catch(g){}for(p in h)f[p]=h[p];return f.FMTID=[o,a],f}function bp(t,e){return t.read_shift(e),null}function _p(t,e,n){var r=[],i=t.l+e;while(t.l<i)r.push(n(t,i-t.l));if(i!==t.l)throw new Error("Slurp error");return r}function xp(t,e){return 1===t.read_shift(e)}function wp(t){return t.read_shift(2,"u")}function Sp(t,e){return _p(t,e,wp)}function Ep(t){var e=t.read_shift(1),n=t.read_shift(1);return 1===n?e:1===e}function Cp(t,e,n){var r=t.read_shift(n&&n.biff>=12?2:1),i="sbcs-cont",o=Ml;if(n&&n.biff>=8&&(Ml=1200),n&&8!=n.biff)12==n.biff&&(i="wstr");else{var a=t.read_shift(1);a&&(i="dbcs-cont")}n.biff>=2&&n.biff<=5&&(i="cpstr");var s=r?t.read_shift(r,i):"";return Ml=o,s}function Mp(t){var e=Ml;Ml=1200;var n,r=t.read_shift(2),i=t.read_shift(1),o=4&i,a=8&i,s=1+(1&i),l=0,u={};a&&(l=t.read_shift(2)),o&&(n=t.read_shift(4));var c=2==s?"dbcs-cont":"sbcs-cont",h=0===r?"":t.read_shift(r,c);return a&&(t.l+=4*l),o&&(t.l+=n),u.t=h,a||(u.raw="<t>"+u.t+"</t>",u.r=u.t),Ml=e,u}function Tp(t,e,n){var r;if(n){if(n.biff>=2&&n.biff<=5)return t.read_shift(e,"cpstr");if(n.biff>=12)return t.read_shift(e,"dbcs-cont")}var i=t.read_shift(1);return r=0===i?t.read_shift(e,"sbcs-cont"):t.read_shift(e,"dbcs-cont"),r}function Ap(t,e,n){var r=t.read_shift(n&&2==n.biff?1:2);return 0===r?(t.l++,""):Tp(t,r,n)}function Op(t,e,n){if(n.biff>5)return Ap(t,e,n);var r=t.read_shift(1);return 0===r?(t.l++,""):t.read_shift(r,n.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function kp(t){var e=t.read_shift(1);t.l++;var n=t.read_shift(2);return t.l+=2,[e,n]}function Ip(t){var e=t.read_shift(4),n=t.l,r=!1;e>24&&(t.l+=e-24,"795881f43b1d7f48af2c825dc4852763"===t.read_shift(16)&&(r=!0),t.l=n);var i=t.read_shift((r?e-24:e)>>1,"utf16le").replace(nu,"");return r&&(t.l+=24),i}function Pp(t){var e=t.read_shift(2),n="";while(e-- >0)n+="../";var r=t.read_shift(0,"lpstr-ansi");if(t.l+=2,57005!=t.read_shift(2))throw new Error("Bad FileMoniker");var i=t.read_shift(4);if(0===i)return n+r.replace(/\\/g,"/");var o=t.read_shift(4);if(3!=t.read_shift(2))throw new Error("Bad FileMoniker");var a=t.read_shift(o>>1,"utf16le").replace(nu,"");return n+a}function Lp(t,e){var n=t.read_shift(16);switch(e-=16,n){case"e0c9ea79f9bace118c8200aa004ba90b":return Ip(t,e);case"0303000000000000c000000000000046":return Pp(t,e);default:throw new Error("Unsupported Moniker "+n)}}function Np(t){var e=t.read_shift(4),n=e>0?t.read_shift(e,"utf16le").replace(nu,""):"";return n}function Rp(t,e){var n=t.l+e,r=t.read_shift(4);if(2!==r)throw new Error("Unrecognized streamVersion: "+r);var i=t.read_shift(2);t.l+=2;var o,a,s,l,u,c,h="";16&i&&(o=Np(t,n-t.l)),128&i&&(a=Np(t,n-t.l)),257===(257&i)&&(s=Np(t,n-t.l)),1===(257&i)&&(l=Lp(t,n-t.l)),8&i&&(h=Np(t,n-t.l)),32&i&&(u=t.read_shift(16)),64&i&&(c=rp(t)),t.l=n;var d=a||s||l||"";d&&h&&(d+="#"+h),d||(d="#"+h),2&i&&"/"==d.charAt(0)&&"/"!=d.charAt(1)&&(d="file://"+d);var f={Target:d};return u&&(f.guid=u),c&&(f.time=c),o&&(f.Tooltip=o),f}function Dp(t){var e=t.read_shift(1),n=t.read_shift(1),r=t.read_shift(1),i=t.read_shift(1);return[e,n,r,i]}function Fp(t,e){var n=Dp(t,e);return n[3]=0,n}function jp(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2);return{r:e,c:n,ixfe:r}}function Bp(t){var e=t.read_shift(2),n=t.read_shift(2);return t.l+=8,{type:e,flags:n}}function zp(t,e,n){return 0===e?"":Op(t,e,n)}function Up(t,e,n){var r=n.biff>8?4:2,i=t.read_shift(r),o=t.read_shift(r,"i"),a=t.read_shift(r,"i");return[i,o,a]}function Gp(t){var e=t.read_shift(2),n=af(t);return[e,n]}function qp(t,e,n){t.l+=4,e-=4;var r=t.l+e,i=Cp(t,e,n),o=t.read_shift(2);if(r-=t.l,o!==r)throw new Error("Malformed AddinUdf: padding = "+r+" != "+o);return t.l+=o,i}function Vp(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2),i=t.read_shift(2);return{s:{c:r,r:e},e:{c:i,r:n}}}function Hp(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(1),i=t.read_shift(1);return{s:{c:r,r:e},e:{c:i,r:n}}}var Wp=Hp;function Yp(t){t.l+=4;var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2);return t.l+=12,[n,e,r]}function Xp(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function Jp(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function Zp(t){t.l+=2,t.l+=t.read_shift(2)}var Kp={0:Zp,4:Zp,5:Zp,6:Zp,7:Jp,8:Zp,9:Zp,10:Zp,11:Zp,12:Zp,13:Xp,14:Zp,15:Zp,16:Zp,17:Zp,18:Zp,19:Zp,20:Zp,21:Yp};function Qp(t,e){var n=t.l+e,r=[];while(t.l<n){var i=t.read_shift(2);t.l-=2;try{r[i]=Kp[i](t,n-t.l)}catch(o){return t.l=n,r}}return t.l!=n&&(t.l=n),r}function $p(t,e){var n={BIFFVer:0,dt:0};switch(n.BIFFVer=t.read_shift(2),e-=2,e>=2&&(n.dt=t.read_shift(2),t.l-=2),n.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+n.BIFFVer)}return t.read_shift(e),n}function tg(t,e){return 0===e||t.read_shift(2),1200}function eg(t,e,n){if(n.enc)return t.l+=e,"";var r=t.l,i=Op(t,0,n);return t.read_shift(e+r-t.l),i}function ng(t,e,n){var r=n&&8==n.biff||2==e?t.read_shift(2):(t.l+=e,0);return{fDialog:16&r,fBelow:64&r,fRight:128&r}}function rg(t,e,n){var r=t.read_shift(4),i=3&t.read_shift(1),o=t.read_shift(1);switch(o){case 0:o="Worksheet";break;case 1:o="Macrosheet";break;case 2:o="Chartsheet";break;case 6:o="VBAModule";break}var a=Cp(t,0,n);return 0===a.length&&(a="Sheet1"),{pos:r,hs:i,dt:o,name:a}}function ig(t,e){for(var n=t.l+e,r=t.read_shift(4),i=t.read_shift(4),o=[],a=0;a!=i&&t.l<n;++a)o.push(Mp(t));return o.Count=r,o.Unique=i,o}function og(t,e){var n={};return n.dsst=t.read_shift(2),t.l+=e-2,n}function ag(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var n=t.read_shift(2);t.l+=4;var r=t.read_shift(1);return t.l+=3,7&r&&(e.level=7&r),32&r&&(e.hidden=!0),64&r&&(e.hpt=n/20),e}function sg(t){var e=Bp(t);if(2211!=e.type)throw new Error("Invalid Future Record "+e.type);var n=t.read_shift(4);return 0!==n}function lg(t){return t.read_shift(2),t.read_shift(4)}function ug(t,e,n){var r=0;n&&2==n.biff||(r=t.read_shift(2));var i=t.read_shift(2);n&&2==n.biff&&(r=1-(i>>15),i&=32767);var o={Unsynced:1&r,DyZero:(2&r)>>1,ExAsc:(4&r)>>2,ExDsc:(8&r)>>3};return[o,i]}function cg(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2),i=t.read_shift(2),o=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2),l=t.read_shift(2),u=t.read_shift(2);return{Pos:[e,n],Dim:[r,i],Flags:o,CurTab:a,FirstTab:s,Selected:l,TabRatio:u}}function hg(t,e,n){if(n&&n.biff>=2&&n.biff<5)return{};var r=t.read_shift(2);return{RTL:64&r}}function dg(){}function fg(t,e,n){var r={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(n&&n.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return r.name=Cp(t,0,n),r}function pg(t){var e=jp(t);return e.isst=t.read_shift(4),e}function gg(t,e,n){n.biffguess&&2==n.biff&&(n.biff=5);var r=t.l+e,i=jp(t,6);2==n.biff&&t.l++;var o=Ap(t,r-t.l,n);return i.val=o,i}function mg(t,e,n){var r=t.read_shift(2),i=Op(t,0,n);return[r,i]}var yg=Op;function vg(t,e,n){var r=t.l+e,i=8!=n.biff&&n.biff?2:4,o=t.read_shift(i),a=t.read_shift(i),s=t.read_shift(2),l=t.read_shift(2);return t.l=r,{s:{r:o,c:s},e:{r:a,c:l}}}function bg(t){var e=t.read_shift(2),n=t.read_shift(2),r=Gp(t);return{r:e,c:n,ixfe:r[0],rknum:r[1]}}function _g(t,e){var n=t.l+e-2,r=t.read_shift(2),i=t.read_shift(2),o=[];while(t.l<n)o.push(Gp(t));if(t.l!==n)throw new Error("MulRK read error");var a=t.read_shift(2);if(o.length!=a-i+1)throw new Error("MulRK length mismatch");return{r:r,c:i,C:a,rkrec:o}}function xg(t,e){var n=t.l+e-2,r=t.read_shift(2),i=t.read_shift(2),o=[];while(t.l<n)o.push(t.read_shift(2));if(t.l!==n)throw new Error("MulBlank read error");var a=t.read_shift(2);if(o.length!=a-i+1)throw new Error("MulBlank length mismatch");return{r:r,c:i,C:a,ixfe:o}}function wg(t,e,n,r){var i={},o=t.read_shift(4),a=t.read_shift(4),s=t.read_shift(4),l=t.read_shift(2);return i.patternType=If[s>>26],r.cellStyles?(i.alc=7&o,i.fWrap=o>>3&1,i.alcV=o>>4&7,i.fJustLast=o>>7&1,i.trot=o>>8&255,i.cIndent=o>>16&15,i.fShrinkToFit=o>>20&1,i.iReadOrder=o>>22&2,i.fAtrNum=o>>26&1,i.fAtrFnt=o>>27&1,i.fAtrAlc=o>>28&1,i.fAtrBdr=o>>29&1,i.fAtrPat=o>>30&1,i.fAtrProt=o>>31&1,i.dgLeft=15&a,i.dgRight=a>>4&15,i.dgTop=a>>8&15,i.dgBottom=a>>12&15,i.icvLeft=a>>16&127,i.icvRight=a>>23&127,i.grbitDiag=a>>30&3,i.icvTop=127&s,i.icvBottom=s>>7&127,i.icvDiag=s>>14&127,i.dgDiag=s>>21&15,i.icvFore=127&l,i.icvBack=l>>7&127,i.fsxButton=l>>14&1,i):i}function Sg(t,e,n){var r={};return r.ifnt=t.read_shift(2),r.numFmtId=t.read_shift(2),r.flags=t.read_shift(2),r.fStyle=r.flags>>2&1,e-=6,r.data=wg(t,e,r.fStyle,n),r}function Eg(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(0!==e[0]&&e[0]--,0!==e[1]&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function Cg(t,e,n){var r=jp(t,6);2!=n.biff&&9!=e||++t.l;var i=Ep(t,2);return r.val=i,r.t=!0===i||!1===i?"b":"e",r}function Mg(t,e,n){n.biffguess&&2==n.biff&&(n.biff=5);var r=jp(t,6),i=uf(t,8);return r.val=i,r}var Tg=zp;function Ag(t,e,n){var r=t.l+e,i=t.read_shift(2),o=t.read_shift(2);if(n.sbcch=o,1025==o||14849==o)return[o,i];if(o<1||o>255)throw new Error("Unexpected SupBook type: "+o);var a=Tp(t,o),s=[];while(r>t.l)s.push(Ap(t));return[o,i,a,s]}function Og(t,e,n){var r,i=t.read_shift(2),o={fBuiltIn:1&i,fWantAdvise:i>>>1&1,fWantPict:i>>>2&1,fOle:i>>>3&1,fOleLink:i>>>4&1,cf:i>>>5&1023,fIcon:i>>>15&1};return 14849===n.sbcch&&(r=qp(t,e-2,n)),o.body=r||t.read_shift(e-2),"string"===typeof r&&(o.Name=r),o}function kg(t,e,n){var r=t.l+e,i=t.read_shift(2),o=t.read_shift(1),a=t.read_shift(1),s=t.read_shift(n&&2==n.biff?1:2),l=0;(!n||n.biff>=5)&&(5!=n.biff&&(t.l+=2),l=t.read_shift(2),5==n.biff&&(t.l+=2),t.l+=4);var u=Tp(t,a,n);32&i&&(u=Ff[u.charCodeAt(0)]);var c=r-t.l;n&&2==n.biff&&--c;var h=r!=t.l&&0!==s&&c>0?u_(t,c,n,s):[];return{chKey:o,Name:u,itab:l,rgce:h}}function Ig(t,e,n){if(n.biff<8)return Pg(t,e,n);if(!(n.biff>8)&&e==t[t.l]+(3==t[t.l+1]?1:0)+1)return Pg(t,e,n);var r=[],i=t.l+e,o=t.read_shift(n.biff>8?4:2);while(0!==o--)r.push(Up(t,n.biff>8?12:6,n));if(t.l!=i)throw new Error("Bad ExternSheet: "+t.l+" != "+i);return r}function Pg(t,e,n){3==t[t.l+1]&&t[t.l]++;var r=Cp(t,e,n);return 3==r.charCodeAt(0)?r.slice(1):r}function Lg(t,e,n){if(!(n.biff<8)){var r=t.read_shift(2),i=t.read_shift(2),o=Tp(t,r,n),a=Tp(t,i,n);return[o,a]}t.l+=e}function Ng(t,e,n){var r=Hp(t,6);t.l++;var i=t.read_shift(1);return e-=8,[c_(t,e,n),i,r]}function Rg(t,e,n){var r=Wp(t,6);switch(n.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[r,s_(t,e,n,r)]}function Dg(t){var e=0!==t.read_shift(4),n=0!==t.read_shift(4),r=t.read_shift(4);return[e,n,r]}function Fg(t,e,n){if(!(n.biff<8)){var r=t.read_shift(2),i=t.read_shift(2),o=t.read_shift(2),a=t.read_shift(2),s=Op(t,0,n);return n.biff<8&&t.read_shift(1),[{r:r,c:i},s,a,o]}}function jg(t,e,n){return Fg(t,e,n)}function Bg(t,e){var n=[],r=t.read_shift(2);while(r--)n.push(Vp(t,e));return n}function zg(t,e,n){if(n&&n.biff<8)return Gg(t,e,n);var r=Yp(t,22),i=Qp(t,e-22,r[1]);return{cmo:r,ft:i}}var Ug={8:function(t,e){var n=t.l+e;t.l+=10;var r=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var i=t.read_shift(1);return t.l+=i,t.l=n,{fmt:r}}};function Gg(t,e,n){t.l+=4;var r=t.read_shift(2),i=t.read_shift(2),o=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var a=[];return a.push((Ug[r]||_d)(t,e,n)),{cmo:[i,r,o],ft:a}}function qg(t,e,n){var r=t.l,i="";try{t.l+=4;var o=(n.lastobj||{cmo:[0,0]}).cmo[1];-1==[0,5,7,11,12,14].indexOf(o)?t.l+=6:kp(t,6,n);var a=t.read_shift(2);t.read_shift(2),wp(t,2);var s=t.read_shift(2);t.l+=s;for(var l=1;l<t.lens.length-1;++l){if(t.l-r!=t.lens[l])throw new Error("TxO: bad continue record");var u=t[t.l],c=Tp(t,t.lens[l+1]-t.lens[l]-1);if(i+=c,i.length>=(u?a:2*a))break}if(i.length!==a&&i.length!==2*a)throw new Error("cchText: "+a+" != "+i.length);return t.l=r+e,{t:i}}catch(h){return t.l=r+e,{t:i}}}function Vg(t,e){var n=Vp(t,8);t.l+=16;var r=Rp(t,e-24);return[n,r]}function Hg(t,e){t.read_shift(2);var n=Vp(t,8),r=t.read_shift((e-10)/2,"dbcs-cont");return r=r.replace(nu,""),[n,r]}function Wg(t){var e,n=[0,0];return e=t.read_shift(2),n[0]=kf[e]||e,e=t.read_shift(2),n[1]=kf[e]||e,n}function Yg(t){var e=t.read_shift(2),n=[];while(e-- >0)n.push(Fp(t,8));return n}function Xg(t){var e=t.read_shift(2),n=[];while(e-- >0)n.push(Fp(t,8));return n}function Jg(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function Zg(t,e,n){if(!n.cellStyles)return _d(t,e);var r=n&&n.biff>=12?4:2,i=t.read_shift(r),o=t.read_shift(r),a=t.read_shift(r),s=t.read_shift(r),l=t.read_shift(2);2==r&&(t.l+=2);var u={s:i,e:o,w:a,ixfe:s,flags:l};return(n.biff>=5||!n.biff)&&(u.level=l>>8&7),u}function Kg(t,e){var n={};return e<32||(t.l+=16,n.header=uf(t,8),n.footer=uf(t,8),t.l+=2),n}function Qg(t,e,n){var r={area:!1};if(5!=n.biff)return t.l+=e,r;var i=t.read_shift(1);return t.l+=3,16&i&&(r.area=!0),r}var $g=jp,tm=Sp,em=Ap;function nm(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(4),i={fmt:e,env:n,len:r,data:t.slice(t.l,t.l+r)};return t.l+=r,i}function rm(t,e,n){n.biffguess&&5==n.biff&&(n.biff=2);var r=jp(t,6);++t.l;var i=Op(t,e-7,n);return r.t="str",r.val=i,r}function im(t){var e=jp(t,6);++t.l;var n=uf(t,8);return e.t="n",e.val=n,e}function om(t){var e=jp(t,6);++t.l;var n=t.read_shift(2);return e.t="n",e.val=n,e}function am(t){var e=t.read_shift(1);return 0===e?(t.l++,""):t.read_shift(e,"sbcs-cont")}function sm(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function lm(t,e,n){var r=t.l+e,i=jp(t,6),o=t.read_shift(2),a=Tp(t,o,n);return t.l=r,i.t="str",i.val=a,i}var um=[2,3,48,49,131,139,140,245],cm=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=wc({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(e,n){var r=[],i=Jl(1);switch(n.type){case"base64":i=Kl(Hl(e));break;case"binary":i=Kl(e);break;case"buffer":case"array":i=e;break}bd(i,0);var o=i.read_shift(1),a=!!(136&o),s=!1,l=!1;switch(o){case 2:break;case 3:break;case 48:s=!0,a=!0;break;case 49:s=!0,a=!0;break;case 131:break;case 139:break;case 140:l=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+o.toString(16))}var u=0,c=521;2==o&&(u=i.read_shift(2)),i.l+=3,2!=o&&(u=i.read_shift(4)),u>1048576&&(u=1e6),2!=o&&(c=i.read_shift(2));var h=i.read_shift(2),d=n.codepage||1252;2!=o&&(i.l+=16,i.read_shift(1),0!==i[i.l]&&(d=t[i[i.l]]),i.l+=1,i.l+=2),l&&(i.l+=36);var f=[],p={},g=Math.min(i.length,2==o?521:c-10-(s?264:0)),m=l?32:11;while(i.l<g&&13!=i[i.l])switch(p={},p.name=("undefined"!==typeof El?El.utils.decode(d,i.slice(i.l,i.l+m)):Ql(i.slice(i.l,i.l+m))).replace(/[\u0000\r\n].*$/g,""),i.l+=m,p.type=String.fromCharCode(i.read_shift(1)),2==o||l||(p.offset=i.read_shift(4)),p.len=i.read_shift(1),2==o&&(p.offset=i.read_shift(2)),p.dec=i.read_shift(1),p.name.length&&f.push(p),2!=o&&(i.l+=l?13:14),p.type){case"B":s&&8==p.len||!n.WTF||console.log("Skipping "+p.name+":"+p.type);break;case"G":case"P":n.WTF&&console.log("Skipping "+p.name+":"+p.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+p.type)}if(13!==i[i.l]&&(i.l=c-1),13!==i.read_shift(1))throw new Error("DBF Terminator not found "+i.l+" "+i[i.l]);i.l=c;var y=0,v=0;for(r[0]=[],v=0;v!=f.length;++v)r[0][v]=f[v].name;while(u-- >0)if(42!==i[i.l])for(++i.l,r[++y]=[],v=0,v=0;v!=f.length;++v){var b=i.slice(i.l,i.l+f[v].len);i.l+=f[v].len,bd(b,0);var _="undefined"!==typeof El?El.utils.decode(d,b):Ql(b);switch(f[v].type){case"C":_.trim().length&&(r[y][v]=_.replace(/\s+$/,""));break;case"D":8===_.length?r[y][v]=new Date(+_.slice(0,4),+_.slice(4,6)-1,+_.slice(6,8)):r[y][v]=_;break;case"F":r[y][v]=parseFloat(_.trim());break;case"+":case"I":r[y][v]=l?2147483648^b.read_shift(-4,"i"):b.read_shift(4,"i");break;case"L":switch(_.trim().toUpperCase()){case"Y":case"T":r[y][v]=!0;break;case"N":case"F":r[y][v]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+_+"|")}break;case"M":if(!a)throw new Error("DBF Unexpected MEMO for type "+o.toString(16));r[y][v]="##MEMO##"+(l?parseInt(_.trim(),10):b.read_shift(4));break;case"N":_=_.replace(/\u0000/g,"").trim(),_&&"."!=_&&(r[y][v]=+_||0);break;case"@":r[y][v]=new Date(b.read_shift(-8,"f")-621356832e5);break;case"T":r[y][v]=new Date(864e5*(b.read_shift(4)-2440588)+b.read_shift(4));break;case"Y":r[y][v]=b.read_shift(4,"i")/1e4+b.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":r[y][v]=-b.read_shift(-8,"f");break;case"B":if(s&&8==f[v].len){r[y][v]=b.read_shift(8,"f");break}case"G":case"P":b.l+=f[v].len;break;case"0":if("_NullFlags"===f[v].name)break;default:throw new Error("DBF Unsupported data type "+f[v].type)}}else i.l+=h;if(2!=o&&i.l<i.length&&26!=i[i.l++])throw new Error("DBF EOF Marker missing "+(i.l-1)+" of "+i.length+" "+i[i.l-1].toString(16));return n&&n.sheetRows&&(r=r.slice(0,n.sheetRows)),n.DBF=f,r}function r(t,e){var r=e||{};r.dateNF||(r.dateNF="yyyymmdd");var i=Yd(n(t,r),r);return i["!cols"]=r.DBF.map((function(t){return{wch:t.len,DBF:t}})),delete r.DBF,i}function i(t,e){try{var n=Hd(r(t,e),e);return n.bookType="dbf",n}catch(i){if(e&&e.WTF)throw i}return{SheetNames:[],Sheets:{}}}var o={B:8,C:250,L:1,D:8,"?":0,"":0};function a(n,r){var i=r||{},a=Ml;if(+i.codepage>=0&&Pl(+i.codepage),"string"==i.type)throw new Error("Cannot write DBF to JS string");var s=Sd(),l=zS(n,{header:1,raw:!0,cellDates:!0}),u=l[0],c=l.slice(1),h=n["!cols"]||[],d=0,f=0,p=0,g=1;for(d=0;d<u.length;++d)if(((h[d]||{}).DBF||{}).name)u[d]=h[d].DBF.name,++p;else if(null!=u[d]){if(++p,"number"===typeof u[d]&&(u[d]=u[d].toString(10)),"string"!==typeof u[d])throw new Error("DBF Invalid column name "+u[d]+" |"+typeof u[d]+"|");if(u.indexOf(u[d])!==d)for(f=0;f<1024;++f)if(-1==u.indexOf(u[d]+"_"+f)){u[d]+="_"+f;break}}var m=Gd(n["!ref"]),y=[],v=[],b=[];for(d=0;d<=m.e.c-m.s.c;++d){var _="",x="",w=0,S=[];for(f=0;f<c.length;++f)null!=c[f][d]&&S.push(c[f][d]);if(0!=S.length&&null!=u[d]){for(f=0;f<S.length;++f){switch(typeof S[f]){case"number":x="B";break;case"string":x="C";break;case"boolean":x="L";break;case"object":x=S[f]instanceof Date?"D":"C";break;default:x="C"}w=Math.max(w,("undefined"!==typeof El&&"string"==typeof S[f]?El.utils.encode(Tl,S[f]):String(S[f])).length),_=_&&_!=x?"C":x}w>250&&(w=250),x=((h[d]||{}).DBF||{}).type,"C"==x&&h[d].DBF.len>w&&(w=h[d].DBF.len),"B"==_&&"N"==x&&(_="N",b[d]=h[d].DBF.dec,w=h[d].DBF.len),v[d]="C"==_||"N"==x?w:o[_]||0,g+=v[d],y[d]=_}else y[d]="?"}var E=s.next(32);for(E.write_shift(4,318902576),E.write_shift(4,c.length),E.write_shift(2,296+32*p),E.write_shift(2,g),d=0;d<4;++d)E.write_shift(4,0);var C=+e[Ml]||3;for(E.write_shift(4,0|C<<8),t[C]!=+i.codepage&&(i.codepage&&console.error("DBF Unsupported codepage "+Ml+", using 1252"),Ml=1252),d=0,f=0;d<u.length;++d)if(null!=u[d]){var M=s.next(32),T=(u[d].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);M.write_shift(1,T,"sbcs"),M.write_shift(1,"?"==y[d]?"C":y[d],"sbcs"),M.write_shift(4,f),M.write_shift(1,v[d]||o[y[d]]||0),M.write_shift(1,b[d]||0),M.write_shift(1,2),M.write_shift(4,0),M.write_shift(1,0),M.write_shift(4,0),M.write_shift(4,0),f+=v[d]||o[y[d]]||0}var A=s.next(264);for(A.write_shift(4,13),d=0;d<65;++d)A.write_shift(4,0);for(d=0;d<c.length;++d){var O=s.next(g);for(O.write_shift(1,0),f=0;f<u.length;++f)if(null!=u[f])switch(y[f]){case"L":O.write_shift(1,null==c[d][f]?63:c[d][f]?84:70);break;case"B":O.write_shift(8,c[d][f]||0,"f");break;case"N":var k="0";for("number"==typeof c[d][f]&&(k=c[d][f].toFixed(b[f]||0)),k.length>v[f]&&(k=k.slice(0,v[f])),p=0;p<v[f]-k.length;++p)O.write_shift(1,32);O.write_shift(1,k,"sbcs");break;case"D":c[d][f]?(O.write_shift(4,("0000"+c[d][f].getFullYear()).slice(-4),"sbcs"),O.write_shift(2,("00"+(c[d][f].getMonth()+1)).slice(-2),"sbcs"),O.write_shift(2,("00"+c[d][f].getDate()).slice(-2),"sbcs")):O.write_shift(8,"00000000","sbcs");break;case"C":var I=O.l,P=String(null!=c[d][f]?c[d][f]:"").slice(0,v[f]);for(O.write_shift(1,P,"cpstr"),I+=v[f]-O.l,p=0;p<I;++p)O.write_shift(1,32);break}}return Ml=a,s.next(1).write_shift(1,26),s.end()}return{to_workbook:i,to_sheet:r,from_sheet:a}}(),hm=function(){var t={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("N("+xc(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),n=function(e,n){var r=t[n];return"number"==typeof r?zl(r):r},r=function(t,e,n){var r=e.charCodeAt(0)-32<<4|n.charCodeAt(0)-48;return 59==r?t:zl(r)};function i(t,e){switch(e.type){case"base64":return o(Hl(t),e);case"binary":return o(t,e);case"buffer":return o(Wl&&Buffer.isBuffer(t)?t.toString("binary"):Ql(t),e);case"array":return o(Nc(t),e)}throw new Error("Unrecognized type "+e.type)}function o(t,i){var o,a=t.split(/[\n\r]+/),s=-1,l=-1,u=0,c=0,h=[],d=[],f=null,p={},g=[],m=[],y=[],v=0,b={Workbook:{WBProps:{},Names:[]}};for(+i.codepage>=0&&Pl(+i.codepage);u!==a.length;++u){v=0;var _,x=a[u].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(e,n),w=x.replace(/;;/g,"\0").split(";").map((function(t){return t.replace(/\u0000/g,";")})),S=w[0];if(x.length>0)switch(S){case"ID":break;case"E":break;case"B":break;case"O":for(c=1;c<w.length;++c)switch(w[c].charAt(0)){case"V":var E=parseInt(w[c].slice(1),10);E>=1&&E<=4&&(b.Workbook.WBProps.date1904=!0);break}break;case"W":break;case"P":switch(w[1].charAt(0)){case"P":d.push(x.slice(3).replace(/;;/g,";"));break}break;case"NN":var C={Sheet:0};for(c=1;c<w.length;++c)switch(w[c].charAt(0)){case"N":C.Name=w[c].slice(1);break;case"E":C.Ref=(i&&i.sheet||"Sheet1")+"!"+Cv(w[c].slice(1));break}b.Workbook.Names.push(C);break;case"C":var M=!1,T=!1,A=!1,O=!1,k=-1,I=-1,P="",L="z";for(c=1;c<w.length;++c)switch(w[c].charAt(0)){case"A":break;case"X":l=parseInt(w[c].slice(1),10)-1,T=!0;break;case"Y":for(s=parseInt(w[c].slice(1),10)-1,T||(l=0),o=h.length;o<=s;++o)h[o]=[];break;case"K":_=w[c].slice(1),'"'===_.charAt(0)?(_=_.slice(1,_.length-1),L="s"):"TRUE"===_||"FALSE"===_?(_="TRUE"===_,L="b"):isNaN(Fc(_))?isNaN(Uc(_).getDate())||(_=Lc(_),L="d",i.cellDates||(L="n",_=Ec(_,b.Workbook.WBProps.date1904))):(_=Fc(_),L="n",null!==f&&rc(f)&&i.cellDates&&(_=Ac(b.Workbook.WBProps.date1904?_+1462:_),L="d")),"undefined"!==typeof El&&"string"==typeof _&&"string"!=(i||{}).type&&(i||{}).codepage&&(_=El.utils.decode(i.codepage,_)),M=!0;break;case"E":O=!0,P=Cv(w[c].slice(1),{r:s,c:l});break;case"S":A=!0;break;case"G":break;case"R":k=parseInt(w[c].slice(1),10)-1;break;case"C":I=parseInt(w[c].slice(1),10)-1;break;default:if(i&&i.WTF)throw new Error("SYLK bad record "+x)}if(M&&(h[s][l]?(h[s][l].t=L,h[s][l].v=_):h[s][l]={t:L,v:_},f&&(h[s][l].z=f),!1!==i.cellText&&f&&(h[s][l].w=lc(h[s][l].z,h[s][l].v,{date1904:b.Workbook.WBProps.date1904})),f=null),A){if(O)throw new Error("SYLK shared formula cannot have own formula");var N=k>-1&&h[k][I];if(!N||!N[1])throw new Error("SYLK shared formula cannot find base");P=Av(N[1],{r:s-k,c:l-I})}P&&(h[s][l]?h[s][l].f=P:h[s][l]={t:"n",f:P});break;case"F":var R=0;for(c=1;c<w.length;++c)switch(w[c].charAt(0)){case"X":l=parseInt(w[c].slice(1),10)-1,++R;break;case"Y":for(s=parseInt(w[c].slice(1),10)-1,o=h.length;o<=s;++o)h[o]=[];break;case"M":v=parseInt(w[c].slice(1),10)/20;break;case"F":break;case"G":break;case"P":f=d[parseInt(w[c].slice(1),10)];break;case"S":break;case"D":break;case"N":break;case"W":for(y=w[c].slice(1).split(" "),o=parseInt(y[0],10);o<=parseInt(y[1],10);++o)v=parseInt(y[2],10),m[o-1]=0===v?{hidden:!0}:{wch:v};break;case"C":l=parseInt(w[c].slice(1),10)-1,m[l]||(m[l]={});break;case"R":s=parseInt(w[c].slice(1),10)-1,g[s]||(g[s]={}),v>0?(g[s].hpt=v,g[s].hpx=_y(v)):0===v&&(g[s].hidden=!0);break;default:if(i&&i.WTF)throw new Error("SYLK bad record "+x)}R<1&&(f=null);break;default:if(i&&i.WTF)throw new Error("SYLK bad record "+x)}}return g.length>0&&(p["!rows"]=g),m.length>0&&(p["!cols"]=m),m.forEach((function(t){my(t)})),i&&i.sheetRows&&(h=h.slice(0,i.sheetRows)),[h,p,b]}function a(t,e){var n=i(t,e),r=n[0],o=n[1],a=n[2],s=Rc(e);s.date1904=(((a||{}).Workbook||{}).WBProps||{}).date1904;var l=Yd(r,s);xc(o).forEach((function(t){l[t]=o[t]}));var u=Hd(l,e);return xc(a).forEach((function(t){u[t]=a[t]})),u.bookType="sylk",u}function s(t,e,n,r){var i="C;Y"+(n+1)+";X"+(r+1)+";K";switch(t.t){case"n":i+=t.v||0,t.f&&!t.F&&(i+=";E"+Tv(t.f,{r:n,c:r}));break;case"b":i+=t.v?"TRUE":"FALSE";break;case"e":i+=t.w||t.v;break;case"d":i+='"'+(t.w||t.v)+'"';break;case"s":i+='"'+(null==t.v?"":String(t.v)).replace(/"/g,"").replace(/;/g,";;")+'"';break}return i}function l(t,e){e.forEach((function(e,n){var r="F;W"+(n+1)+" "+(n+1)+" ";e.hidden?r+="0":("number"!=typeof e.width||e.wpx||(e.wpx=hy(e.width)),"number"!=typeof e.wpx||e.wch||(e.wch=dy(e.wpx)),"number"==typeof e.wch&&(r+=Math.round(e.wch)))," "!=r.charAt(r.length-1)&&t.push(r)}))}function u(t,e){e.forEach((function(e,n){var r="F;";e.hidden?r+="M0;":e.hpt?r+="M"+20*e.hpt+";":e.hpx&&(r+="M"+20*by(e.hpx)+";"),r.length>2&&t.push(r+"R"+(n+1))}))}function c(t,e,n){var r,i=["ID;PSheetJS;N;E"],o=[],a=Gd(t["!ref"]),c=null!=t["!data"],h="\r\n",d=(((n||{}).Workbook||{}).WBProps||{}).date1904;i.push("P;PGeneral"),i.push("F;P0;DG0G8;M255"),t["!cols"]&&l(i,t["!cols"]),t["!rows"]&&u(i,t["!rows"]),i.push("B;Y"+(a.e.r-a.s.r+1)+";X"+(a.e.c-a.s.c+1)+";D"+[a.s.c,a.s.r,a.e.c,a.e.r].join(" ")),i.push("O;L;D;B"+(d?";V4":"")+";K47;G100 0.001");for(var f=a.s.r;f<=a.e.r;++f)if(!c||t["!data"][f]){for(var p=[],g=a.s.c;g<=a.e.c;++g)r=c?t["!data"][f][g]:t[Ld(g)+Od(f)],r&&(null!=r.v||r.f&&!r.F)&&p.push(s(r,t,f,g,e));o.push(p.join(h))}return i.join(h)+h+o.join(h)+h+"E"+h}return t["|"]=254,{to_workbook:a,from_sheet:c}}(),dm=function(){function t(t,n){switch(n.type){case"base64":return e(Hl(t),n);case"binary":return e(t,n);case"buffer":return e(Wl&&Buffer.isBuffer(t)?t.toString("binary"):Ql(t),n);case"array":return e(Nc(t),n)}throw new Error("Unrecognized type "+n.type)}function e(t,e){for(var n=t.split("\n"),r=-1,i=-1,o=0,a=[];o!==n.length;++o)if("BOT"!==n[o].trim()){if(!(r<0)){var s=n[o].trim().split(","),l=s[0],u=s[1];++o;var c=n[o]||"";while(1&(c.match(/["]/g)||[]).length&&o<n.length-1)c+="\n"+n[++o];switch(c=c.trim(),+l){case-1:if("BOT"===c){a[++r]=[],i=0;continue}if("EOD"!==c)throw new Error("Unrecognized DIF special command "+c);break;case 0:"TRUE"===c?a[r][i]=!0:"FALSE"===c?a[r][i]=!1:isNaN(Fc(u))?isNaN(Uc(u).getDate())?a[r][i]=u:a[r][i]=Lc(u):a[r][i]=Fc(u),++i;break;case 1:c=c.slice(1,c.length-1),c=c.replace(/""/g,'"'),Gl&&c&&c.match(/^=".*"$/)&&(c=c.slice(2,-1)),a[r][i++]=""!==c?c:null;break}if("EOD"===c)break}}else a[++r]=[],i=0;return e&&e.sheetRows&&(a=a.slice(0,e.sheetRows)),a}function n(e,n){return Yd(t(e,n),n)}function r(t,e){var r=Hd(n(t,e),e);return r.bookType="dif",r}function i(t,e){return"0,"+String(t)+"\r\n"+e}function o(t){return'1,0\r\n"'+t.replace(/"/g,'""')+'"'}function a(t){for(var e=Gl,n=Gd(t["!ref"]),r=null!=t["!data"],a=['TABLE\r\n0,1\r\n"sheetjs"\r\n',"VECTORS\r\n0,"+(n.e.r-n.s.r+1)+'\r\n""\r\n',"TUPLES\r\n0,"+(n.e.c-n.s.c+1)+'\r\n""\r\n','DATA\r\n0,0\r\n""\r\n'],s=n.s.r;s<=n.e.r;++s){for(var l=r?t["!data"][s]:[],u="-1,0\r\nBOT\r\n",c=n.s.c;c<=n.e.c;++c){var h=r?l&&l[c]:t[jd({r:s,c:c})];if(null!=h){switch(h.t){case"n":e?null!=h.w?u+="0,"+h.w+"\r\nV":null!=h.v?u+=i(h.v,"V"):null==h.f||h.F?u+='1,0\r\n""':u+=o("="+h.f):null==h.v?u+='1,0\r\n""':u+=i(h.v,"V");break;case"b":u+=h.v?i(1,"TRUE"):i(0,"FALSE");break;case"s":u+=o(!e||isNaN(+h.v)?h.v:'="'+h.v+'"');break;case"d":h.w||(h.w=lc(h.z||mu[14],Ec(Lc(h.v)))),u+=e?i(h.w,"V"):o(h.w);break;default:u+='1,0\r\n""'}u+="\r\n"}else u+='1,0\r\n""\r\n'}a.push(u)}return a.join("")+"-1,0\r\nEOD"}return{to_workbook:r,to_sheet:n,from_sheet:a}}(),fm=function(){function t(t){return t.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,"\n")}function e(t){return t.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function n(e,n){for(var r=e.split("\n"),i=-1,o=-1,a=0,s=[];a!==r.length;++a){var l=r[a].trim().split(":");if("cell"===l[0]){var u=Fd(l[1]);if(s.length<=u.r)for(i=s.length;i<=u.r;++i)s[i]||(s[i]=[]);switch(i=u.r,o=u.c,l[2]){case"t":s[i][o]=t(l[3]);break;case"v":s[i][o]=+l[3];break;case"vtf":var c=l[l.length-1];case"vtc":switch(l[3]){case"nl":s[i][o]=!!+l[4];break;default:s[i][o]=+l[4];break}"vtf"==l[2]&&(s[i][o]=[s[i][o],c])}}}return n&&n.sheetRows&&(s=s.slice(0,n.sheetRows)),s}function r(t,e){return Yd(n(t,e),e)}function i(t,e){return Hd(r(t,e),e)}var o=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join("\n"),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join("\n")+"\n",s=["# SocialCalc Spreadsheet Control Save","part:sheet"].join("\n"),l="--SocialCalcSpreadsheetControlSave--";function u(t){if(!t||!t["!ref"])return"";for(var n,r=[],i=[],o="",a=Bd(t["!ref"]),s=null!=t["!data"],l=a.s.r;l<=a.e.r;++l)for(var u=a.s.c;u<=a.e.c;++u)if(o=jd({r:l,c:u}),n=s?(t["!data"][l]||[])[u]:t[o],n&&null!=n.v&&"z"!==n.t){switch(i=["cell",o,"t"],n.t){case"s":case"str":i.push(e(n.v));break;case"n":n.f?(i[2]="vtf",i[3]="n",i[4]=n.v,i[5]=e(n.f)):(i[2]="v",i[3]=n.v);break;case"b":i[2]="vt"+(n.f?"f":"c"),i[3]="nl",i[4]=n.v?"1":"0",i[5]=e(n.f||(n.v?"TRUE":"FALSE"));break;case"d":var c=Ec(Lc(n.v));i[2]="vtc",i[3]="nd",i[4]=""+c,i[5]=n.w||lc(n.z||mu[14],c);break;case"e":continue}r.push(i.join(":"))}return r.push("sheet:c:"+(a.e.c-a.s.c+1)+":r:"+(a.e.r-a.s.r+1)+":tvf:1"),r.push("valueformat:1:text-wiki"),r.join("\n")}function c(t){return[o,a,s,a,u(t),l].join("\n")}return{to_workbook:i,to_sheet:r,from_sheet:c}}(),pm=function(){function t(t,e,n,r,i){i.raw?e[n][r]=t:""===t||("TRUE"===t?e[n][r]=!0:"FALSE"===t?e[n][r]=!1:isNaN(Fc(t))?isNaN(Uc(t).getDate())?e[n][r]=t:e[n][r]=Lc(t):e[n][r]=Fc(t))}function e(e,n){var r=n||{},i=[];if(!e||0===e.length)return i;var o=e.split(/[\r\n]/),a=o.length-1;while(a>=0&&0===o[a].length)--a;for(var s=10,l=0,u=0;u<=a;++u)l=o[u].indexOf(" "),-1==l?l=o[u].length:l++,s=Math.max(s,l);for(u=0;u<=a;++u){i[u]=[];var c=0;for(t(o[u].slice(0,s).trim(),i,u,c,r),c=1;c<=(o[u].length-s)/10+1;++c)t(o[u].slice(s+10*(c-1),s+10*c).trim(),i,u,c,r)}return r.sheetRows&&(i=i.slice(0,r.sheetRows)),i}var n={44:",",9:"\t",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function i(t){for(var e={},i=!1,o=0,a=0;o<t.length;++o)34==(a=t.charCodeAt(o))?i=!i:!i&&a in n&&(e[a]=(e[a]||0)+1);for(o in a=[],e)Object.prototype.hasOwnProperty.call(e,o)&&a.push([e[o],o]);if(!a.length)for(o in e=r,e)Object.prototype.hasOwnProperty.call(e,o)&&a.push([e[o],o]);return a.sort((function(t,e){return t[0]-e[0]||r[t[1]]-r[e[1]]})),n[a.pop()[1]]||44}function o(t,e){var n=e||{},r="";null!=Ul&&null==n.dense&&(n.dense=Ul);var o={};n.dense&&(o["!data"]=[]);var a={s:{c:0,r:0},e:{c:0,r:0}};"sep="==t.slice(0,4)?13==t.charCodeAt(5)&&10==t.charCodeAt(6)?(r=t.charAt(4),t=t.slice(7)):13==t.charCodeAt(5)||10==t.charCodeAt(5)?(r=t.charAt(4),t=t.slice(6)):r=i(t.slice(0,1024)):r=n&&n.FS?n.FS:i(t.slice(0,1024));var s=0,l=0,u=0,c=0,h=0,d=r.charCodeAt(0),f=!1,p=0,g=t.charCodeAt(0),m=null!=n.dateNF?fc(n.dateNF):null;function y(){var e=t.slice(c,h);"\r"==e.slice(-1)&&(e=e.slice(0,-1));var r={};if('"'==e.charAt(0)&&'"'==e.charAt(e.length-1)&&(e=e.slice(1,-1).replace(/""/g,'"')),0===e.length)r.t="z";else if(n.raw)r.t="s",r.v=e;else if(0===e.trim().length)r.t="s",r.v=e;else if(61==e.charCodeAt(0))34==e.charCodeAt(1)&&34==e.charCodeAt(e.length-1)?(r.t="s",r.v=e.slice(2,-1).replace(/""/g,'"')):kv(e)?(r.t="n",r.f=e.slice(1)):(r.t="s",r.v=e);else if("TRUE"==e)r.t="b",r.v=!0;else if("FALSE"==e)r.t="b",r.v=!1;else if(isNaN(u=Fc(e)))if(!isNaN((u=Uc(e)).getDate())||m&&e.match(m)){r.z=n.dateNF||mu[14];var i=0;m&&e.match(m)&&(e=pc(e,n.dateNF,e.match(m)||[]),i=1,u=Lc(e,i)),n.cellDates?(r.t="d",r.v=u):(r.t="n",r.v=Ec(u)),!1!==n.cellText&&(r.w=lc(r.z,r.v instanceof Date?Ec(r.v):r.v)),n.cellNF||delete r.z}else r.t="s",r.v=e;else r.t="n",!1!==n.cellText&&(r.w=e),r.v=u;if("z"==r.t||(n.dense?(o["!data"][s]||(o["!data"][s]=[]),o["!data"][s][l]=r):o[jd({c:l,r:s})]=r),c=h+1,g=t.charCodeAt(c),a.e.c<l&&(a.e.c=l),a.e.r<s&&(a.e.r=s),p==d)++l;else if(l=0,++s,n.sheetRows&&n.sheetRows<=s)return!0}t:for(;h<t.length;++h)switch(p=t.charCodeAt(h)){case 34:34===g&&(f=!f);break;case 13:if(f)break;10==t.charCodeAt(h+1)&&++h;case d:case 10:if(!f&&y())break t;break;default:break}return h-c>0&&y(),o["!ref"]=zd(a),o}function a(t,n){return n&&n.PRN?n.FS||"sep="==t.slice(0,4)||t.indexOf("\t")>=0||t.indexOf(",")>=0||t.indexOf(";")>=0?o(t,n):Yd(e(t,n),n):o(t,n)}function s(t,e){var n="",r="string"==e.type?[0,0,0,0]:kS(t,e);switch(e.type){case"base64":n=Hl(t);break;case"binary":n=t;break;case"buffer":n=65001==e.codepage?t.toString("utf8"):e.codepage&&"undefined"!==typeof El?El.utils.decode(e.codepage,t):Wl&&Buffer.isBuffer(t)?t.toString("binary"):Ql(t);break;case"array":n=Nc(t);break;case"string":n=t;break;default:throw new Error("Unrecognized type "+e.type)}return 239==r[0]&&187==r[1]&&191==r[2]?n=wh(n.slice(3)):"string"!=e.type&&"buffer"!=e.type&&65001==e.codepage?n=wh(n):"binary"==e.type&&"undefined"!==typeof El&&e.codepage&&(n=El.utils.decode(e.codepage,El.utils.encode(28591,n))),"socialcalc:version:"==n.slice(0,19)?fm.to_sheet("string"==e.type?n:wh(n),e):a(n,e)}function l(t,e){return Hd(s(t,e),e)}function u(t){for(var e,n=[],r=Gd(t["!ref"]),i=null!=t["!data"],o=r.s.r;o<=r.e.r;++o){for(var a=[],s=r.s.c;s<=r.e.c;++s){var l=jd({r:o,c:s});if(e=i?(t["!data"][o]||[])[s]:t[l],e&&null!=e.v){var u=(e.w||(Vd(e),e.w)||"").slice(0,10);while(u.length<10)u+=" ";a.push(u+(0===s?" ":""))}else a.push("          ")}n.push(a.join(""))}return n.join("\n")}return{to_workbook:l,to_sheet:s,from_sheet:u}}();function gm(t,e){var n=e||{},r=!!n.WTF;n.WTF=!0;try{var i=hm.to_workbook(t,n);return n.WTF=r,i}catch(o){if(n.WTF=r,!o.message.match(/SYLK bad record ID/)&&r)throw o;return pm.to_workbook(t,e)}}var mm=function(){function t(t,e,n){if(t){bd(t,t.l||0);var r=n.Enum||F;while(t.l<t.length){var i=t.read_shift(2),o=r[i]||r[65535],a=t.read_shift(2),s=t.l+a,l=o.f&&o.f(t,a,n);if(t.l=s,e(l,o,i))return}}}function e(t,e){switch(e.type){case"base64":return n(Kl(Hl(t)),e);case"binary":return n(Kl(t),e);case"buffer":case"array":return n(t,e)}throw"Unsupported type "+e.type}function n(e,n){if(!e)return e;var r=n||{};null!=Ul&&null==r.dense&&(r.dense=Ul);var i={},o="Sheet1",a="",s=0,l={},u=[],c=[],h=[];r.dense&&(h=i["!data"]=[]);var d={s:{r:0,c:0},e:{r:0,c:0}},f=r.sheetRows||0;if(81==e[4]&&80==e[5]&&87==e[6])return B(e,n);if(0==e[2]&&(8==e[3]||9==e[3])&&e.length>=16&&5==e[14]&&108===e[15])throw new Error("Unsupported Works 3 for Mac file");if(2==e[2])r.Enum=F,t(e,(function(t,e,n){switch(n){case 0:r.vers=t,t>=4096&&(r.qpro=!0);break;case 255:r.vers=t,r.works=!0;break;case 6:d=t;break;case 204:t&&(a=t);break;case 222:a=t;break;case 15:case 51:(!r.qpro&&!r.works||51==n)&&t[1].v.charCodeAt(0)<48&&(t[1].v=t[1].v.slice(1)),(r.works||r.works2)&&(t[1].v=t[1].v.replace(/\r\n/g,"\n"));case 13:case 14:case 16:14==n&&112==(112&t[2])&&(15&t[2])>1&&(15&t[2])<15&&(t[1].z=r.dateNF||mu[14],r.cellDates&&(t[1].t="d",t[1].v=Ac(t[1].v))),r.qpro&&t[3]>s&&(i["!ref"]=zd(d),l[o]=i,u.push(o),i={},r.dense&&(h=i["!data"]=[]),d={s:{r:0,c:0},e:{r:0,c:0}},s=t[3],o=a||"Sheet"+(s+1),a="");var c=r.dense?(h[t[0].r]||[])[t[0].c]:i[jd(t[0])];if(c){c.t=t[1].t,c.v=t[1].v,null!=t[1].z&&(c.z=t[1].z),null!=t[1].f&&(c.f=t[1].f);break}r.dense?(h[t[0].r]||(h[t[0].r]=[]),h[t[0].r][t[0].c]=t[1]):i[jd(t[0])]=t[1];break;case 21509:r.works2=!0;break;default:}}),r);else{if(26!=e[2]&&14!=e[2])throw new Error("Unrecognized LOTUS BOF "+e[2]);r.Enum=j,14==e[2]&&(r.qpro=!0,e.l=0),t(e,(function(t,e,n){switch(n){case 204:o=t;break;case 22:t[1].v.charCodeAt(0)<48&&(t[1].v=t[1].v.slice(1)),t[1].v=t[1].v.replace(/\x0F./g,(function(t){return String.fromCharCode(t.charCodeAt(1)-32)})).replace(/\r\n/g,"\n");case 23:case 24:case 25:case 37:case 39:case 40:if(t[3]>s&&(i["!ref"]=zd(d),l[o]=i,u.push(o),i={},r.dense&&(h=i["!data"]=[]),d={s:{r:0,c:0},e:{r:0,c:0}},s=t[3],o="Sheet"+(s+1)),f>0&&t[0].r>=f)break;r.dense?(h[t[0].r]||(h[t[0].r]=[]),h[t[0].r][t[0].c]=t[1]):i[jd(t[0])]=t[1],d.e.c<t[0].c&&(d.e.c=t[0].c),d.e.r<t[0].r&&(d.e.r=t[0].r);break;case 27:t[14e3]&&(c[t[14e3][0]]=t[14e3][1]);break;case 1537:c[t[0]]=t[1],t[0]==s&&(o=t[1]);break;default:break}}),r)}if(i["!ref"]=zd(d),l[a||o]=i,u.push(a||o),!c.length)return{SheetNames:u,Sheets:l};for(var p={},g=[],m=0;m<c.length;++m)l[u[m]]?(g.push(c[m]||u[m]),p[c[m]]=l[c[m]]||l[u[m]]):(g.push(c[m]),p[c[m]]={"!ref":"A1"});return{SheetNames:g,Sheets:p}}function r(t,e){var n=e||{};if(+n.codepage>=0&&Pl(+n.codepage),"string"==n.type)throw new Error("Cannot write WK1 to JS string");var r=Sd(),i=Gd(t["!ref"]),a=null!=t["!data"],s=[];Iw(r,0,o(1030)),Iw(r,6,l(i));for(var u=Math.min(i.e.r,8191),c=i.s.c;c<=i.e.c;++c)s[c]=Ld(c);for(var d=i.s.r;d<=u;++d){var f=Od(d);for(c=i.s.c;c<=i.e.c;++c){var g=a?(t["!data"][d]||[])[c]:t[s[c]+f];if(g&&"z"!=g.t)if("n"==g.t)(0|g.v)==g.v&&g.v>=-32768&&g.v<=32767?Iw(r,13,p(d,c,g.v)):Iw(r,14,m(d,c,g.v));else{var y=Vd(g);Iw(r,15,h(d,c,y.slice(0,239)))}}}return Iw(r,1),r.end()}function i(t,e){var n=e||{};if(+n.codepage>=0&&Pl(+n.codepage),"string"==n.type)throw new Error("Cannot write WK3 to JS string");var r=Sd();Iw(r,0,a(t));for(var i=0,o=0;i<t.SheetNames.length;++i)(t.Sheets[t.SheetNames[i]]||{})["!ref"]&&Iw(r,27,D(t.SheetNames[i],o++));var s=0;for(i=0;i<t.SheetNames.length;++i){var l=t.Sheets[t.SheetNames[i]];if(l&&l["!ref"]){for(var u=Gd(l["!ref"]),c=null!=l["!data"],h=[],d=Math.min(u.e.r,8191),f=u.s.r;f<=d;++f)for(var p=Od(f),g=u.s.c;g<=u.e.c;++g){f===u.s.r&&(h[g]=Ld(g));var m=h[g]+p,y=c?(l["!data"][f]||[])[g]:l[m];if(y&&"z"!=y.t)if("n"==y.t)Iw(r,23,T(f,g,s,y.v));else{var v=Vd(y);Iw(r,22,E(f,g,s,v.slice(0,239)))}}++s}}return Iw(r,1),r.end()}function o(t){var e=xd(2);return e.write_shift(2,t),e}function a(t){var e=xd(26);e.write_shift(2,4096),e.write_shift(2,4),e.write_shift(4,0);for(var n=0,r=0,i=0,o=0;o<t.SheetNames.length;++o){var a=t.SheetNames[o],s=t.Sheets[a];if(s&&s["!ref"]){++i;var l=Bd(s["!ref"]);n<l.e.r&&(n=l.e.r),r<l.e.c&&(r=l.e.c)}}return n>8191&&(n=8191),e.write_shift(2,n),e.write_shift(1,i),e.write_shift(1,r),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(1,1),e.write_shift(1,2),e.write_shift(4,0),e.write_shift(4,0),e}function s(t,e,n){var r={s:{c:0,r:0},e:{c:0,r:0}};return 8==e&&n.qpro?(r.s.c=t.read_shift(1),t.l++,r.s.r=t.read_shift(2),r.e.c=t.read_shift(1),t.l++,r.e.r=t.read_shift(2),r):(r.s.c=t.read_shift(2),r.s.r=t.read_shift(2),12==e&&n.qpro&&(t.l+=2),r.e.c=t.read_shift(2),r.e.r=t.read_shift(2),12==e&&n.qpro&&(t.l+=2),65535==r.s.c&&(r.s.c=r.e.c=r.s.r=r.e.r=0),r)}function l(t){var e=xd(8);return e.write_shift(2,t.s.c),e.write_shift(2,t.s.r),e.write_shift(2,t.e.c),e.write_shift(2,t.e.r),e}function u(t,e,n){var r=[{c:0,r:0},{t:"n",v:0},0,0];return n.qpro&&20768!=n.vers?(r[0].c=t.read_shift(1),r[3]=t.read_shift(1),r[0].r=t.read_shift(2),t.l+=2):n.works?(r[0].c=t.read_shift(2),r[0].r=t.read_shift(2),r[2]=t.read_shift(2)):(r[2]=t.read_shift(1),r[0].c=t.read_shift(2),r[0].r=t.read_shift(2)),r}function c(t,e,n){var r=t.l+e,i=u(t,e,n);if(i[1].t="s",20768==n.vers){t.l++;var o=t.read_shift(1);return i[1].v=t.read_shift(o,"utf8"),i}return n.qpro&&t.l++,i[1].v=t.read_shift(r-t.l,"cstr"),i}function h(t,e,n){var r=xd(7+n.length);r.write_shift(1,255),r.write_shift(2,e),r.write_shift(2,t),r.write_shift(1,39);for(var i=0;i<r.length;++i){var o=n.charCodeAt(i);r.write_shift(1,o>=128?95:o)}return r.write_shift(1,0),r}function d(t,e,n){var r=t.l+e,i=u(t,e,n);if(i[1].t="s",20768==n.vers){var o=t.read_shift(1);return i[1].v=t.read_shift(o,"utf8"),i}return i[1].v=t.read_shift(r-t.l,"cstr"),i}function f(t,e,n){var r=u(t,e,n);return r[1].v=t.read_shift(2,"i"),r}function p(t,e,n){var r=xd(7);return r.write_shift(1,255),r.write_shift(2,e),r.write_shift(2,t),r.write_shift(2,n,"i"),r}function g(t,e,n){var r=u(t,e,n);return r[1].v=t.read_shift(8,"f"),r}function m(t,e,n){var r=xd(13);return r.write_shift(1,255),r.write_shift(2,e),r.write_shift(2,t),r.write_shift(8,n,"f"),r}function y(t,e,n){var r=t.l+e,i=u(t,e,n);if(i[1].v=t.read_shift(8,"f"),n.qpro)t.l=r;else{var o=t.read_shift(2);x(t.slice(t.l,t.l+o),i),t.l+=o}return i}function v(t,e,n){var r=32768&e;return e&=-32769,e=(r?t:0)+(e>=8192?e-16384:e),(r?"":"$")+(n?Ld(e):Od(e))}var b={31:["NA",0],33:["ABS",1],34:["TRUNC",1],35:["SQRT",1],36:["LOG",1],37:["LN",1],38:["PI",0],39:["SIN",1],40:["COS",1],41:["TAN",1],42:["ATAN2",2],43:["ATAN",1],44:["ASIN",1],45:["ACOS",1],46:["EXP",1],47:["MOD",2],49:["ISNA",1],50:["ISERR",1],51:["FALSE",0],52:["TRUE",0],53:["RAND",0],63:["ROUND",2],68:["ISNUMBER",1],69:["ISTEXT",1],70:["LEN",1],71:["VALUE",1],73:["MID",3],74:["CHAR",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],102:["UPPER",1],103:["LOWER",1],107:["PROPER",1],109:["TRIM",1],111:["T",1]},_=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function x(t,e){bd(t,0);var n=[],r=0,i="",o="",a="",s="";while(t.l<t.length){var l=t[t.l++];switch(l){case 0:n.push(t.read_shift(8,"f"));break;case 1:o=v(e[0].c,t.read_shift(2),!0),i=v(e[0].r,t.read_shift(2),!1),n.push(o+i);break;case 2:var u=v(e[0].c,t.read_shift(2),!0),c=v(e[0].r,t.read_shift(2),!1);o=v(e[0].c,t.read_shift(2),!0),i=v(e[0].r,t.read_shift(2),!1),n.push(u+c+":"+o+i);break;case 3:if(t.l<t.length)return void console.error("WK1 premature formula end");break;case 4:n.push("("+n.pop()+")");break;case 5:n.push(t.read_shift(2));break;case 6:var h="";while(l=t[t.l++])h+=String.fromCharCode(l);n.push('"'+h.replace(/"/g,'""')+'"');break;case 8:n.push("-"+n.pop());break;case 23:n.push("+"+n.pop());break;case 22:n.push("NOT("+n.pop()+")");break;case 20:case 21:s=n.pop(),a=n.pop(),n.push(["AND","OR"][l-20]+"("+a+","+s+")");break;default:if(l<32&&_[l])s=n.pop(),a=n.pop(),n.push(a+_[l]+s);else{if(!b[l])return l<=7?console.error("WK1 invalid opcode "+l.toString(16)):l<=24?console.error("WK1 unsupported op "+l.toString(16)):l<=30?console.error("WK1 invalid opcode "+l.toString(16)):l<=115?console.error("WK1 unsupported function opcode "+l.toString(16)):console.error("WK1 unrecognized opcode "+l.toString(16));if(r=b[l][1],69==r&&(r=t[t.l++]),r>n.length)return void console.error("WK1 bad formula parse 0x"+l.toString(16)+":|"+n.join("|")+"|");var d=n.slice(-r);n.length-=r,n.push(b[l][0]+"("+d.join(",")+")")}}}1==n.length?e[1].f=""+n[0]:console.error("WK1 bad formula parse |"+n.join("|")+"|")}function w(t){var e=[{c:0,r:0},{t:"n",v:0},0];return e[0].r=t.read_shift(2),e[3]=t[t.l++],e[0].c=t[t.l++],e}function S(t,e){var n=w(t,e);return n[1].t="s",n[1].v=t.read_shift(e-4,"cstr"),n}function E(t,e,n,r){var i=xd(6+r.length);i.write_shift(2,t),i.write_shift(1,n),i.write_shift(1,e),i.write_shift(1,39);for(var o=0;o<r.length;++o){var a=r.charCodeAt(o);i.write_shift(1,a>=128?95:a)}return i.write_shift(1,0),i}function C(t,e){var n=w(t,e);n[1].v=t.read_shift(2);var r=n[1].v>>1;if(1&n[1].v)switch(7&r){case 0:r=5e3*(r>>3);break;case 1:r=500*(r>>3);break;case 2:r=(r>>3)/20;break;case 3:r=(r>>3)/200;break;case 4:r=(r>>3)/2e3;break;case 5:r=(r>>3)/2e4;break;case 6:r=(r>>3)/16;break;case 7:r=(r>>3)/64;break}return n[1].v=r,n}function M(t,e){var n=w(t,e),r=t.read_shift(4),i=t.read_shift(4),o=t.read_shift(2);if(65535==o)return 0===r&&3221225472===i?(n[1].t="e",n[1].v=15):0===r&&3489660928===i?(n[1].t="e",n[1].v=42):n[1].v=0,n;var a=32768&o;return o=(32767&o)-16446,n[1].v=(1-2*a)*(i*Math.pow(2,o+32)+r*Math.pow(2,o)),n}function T(t,e,n,r){var i=xd(14);if(i.write_shift(2,t),i.write_shift(1,n),i.write_shift(1,e),0==r)return i.write_shift(4,0),i.write_shift(4,0),i.write_shift(2,65535),i;var o=0,a=0,s=0,l=0;return r<0&&(o=1,r=-r),a=0|Math.log2(r),r/=Math.pow(2,a-31),l=r>>>0,0==(2147483648&l)&&(r/=2,++a,l=r>>>0),r-=l,l|=2147483648,l>>>=0,r*=Math.pow(2,32),s=r>>>0,i.write_shift(4,s),i.write_shift(4,l),a+=16383+(o?32768:0),i.write_shift(2,a),i}function A(t,e){var n=M(t,14);return t.l+=e-14,n}function O(t,e){var n=w(t,e),r=t.read_shift(4);return n[1].v=r>>6,n}function k(t,e){var n=w(t,e),r=t.read_shift(8,"f");return n[1].v=r,n}function I(t,e){var n=k(t,12);return t.l+=e-12,n}function P(t,e){return 0==t[t.l+e-1]?t.read_shift(e,"cstr"):""}function L(t,e){var n=t[t.l++];n>e-1&&(n=e-1);var r="";while(r.length<n)r+=String.fromCharCode(t[t.l++]);return r}function N(t,e,n){if(n.qpro&&!(e<21)){var r=t.read_shift(1);t.l+=17,t.l+=1,t.l+=2;var i=t.read_shift(e-21,"cstr");return[r,i]}}function R(t,e){var n={},r=t.l+e;while(t.l<r){var i=t.read_shift(2);if(14e3==i){n[i]=[0,""],n[i][0]=t.read_shift(2);while(t[t.l])n[i][1]+=String.fromCharCode(t[t.l]),t.l++;t.l++}}return n}function D(t,e){var n=xd(5+t.length);n.write_shift(2,14e3),n.write_shift(2,e);for(var r=0;r<t.length;++r){var i=t.charCodeAt(r);n[n.l++]=i>127?95:i}return n[n.l++]=0,n}var F={0:{n:"BOF",f:wp},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:s},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:f},14:{n:"NUMBER",f:g},15:{n:"LABEL",f:c},16:{n:"FORMULA",f:y},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:P},222:{n:"SHEETNAMELP",f:L},255:{n:"BOF",f:wp},65535:{n:""}},j={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:S},23:{n:"NUMBER17",f:M},24:{n:"NUMBER18",f:C},25:{n:"FORMULA19",f:A},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:R},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:O},38:{n:"??"},39:{n:"NUMBER27",f:k},40:{n:"FORMULA28",f:I},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:P},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:N},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};function B(t,e){bd(t,0);var n=e||{};null!=Ul&&null==n.dense&&(n.dense=Ul);var r={};n.dense&&(r["!data"]=[]);var i=[],o="",a={s:{r:-1,c:-1},e:{r:-1,c:-1}},s=0,l=0,u=0,c=0,h={SheetNames:[],Sheets:{}};t:while(t.l<t.length){var d=t.read_shift(2),f=t.read_shift(2),p=t.slice(t.l,t.l+f);switch(bd(p,0),d){case 1:if(962023505!=p.read_shift(4))throw"Bad QPW9 BOF!";break;case 2:break t;case 1025:break;case 1026:break;case 1031:p.l+=12;while(p.l<p.length)s=p.read_shift(2),l=p.read_shift(1),i.push(p.read_shift(s,"cstr"));break;case 1032:break;case 1537:var g=p.read_shift(2);r={},n.dense&&(r["!data"]=[]),a.s.c=p.read_shift(2),a.e.c=p.read_shift(2),a.s.r=p.read_shift(4),a.e.r=p.read_shift(4),p.l+=4,p.l+2<p.length&&(s=p.read_shift(2),l=p.read_shift(1),o=0==s?"":p.read_shift(s,"cstr")),o||(o=Ld(g));break;case 1538:if(a.s.c>255||a.s.r>999999)break;a.e.c<a.s.c&&(a.e.c=a.s.c),a.e.r<a.s.r&&(a.e.r=a.s.r),r["!ref"]=zd(a),KS(h,r,o);break;case 2561:u=p.read_shift(2),a.e.c<u&&(a.e.c=u),a.s.c>u&&(a.s.c=u),c=p.read_shift(4),a.s.r>c&&(a.s.r=c),c=p.read_shift(4),a.e.r<c&&(a.e.r=c);break;case 3073:c=p.read_shift(4),s=p.read_shift(4),a.s.r>c&&(a.s.r=c),a.e.r<c+s-1&&(a.e.r=c+s-1);var m=Ld(u);while(p.l<p.length){var y={t:"z"},v=p.read_shift(1);128&v&&(p.l+=2);var b=64&v?p.read_shift(2)-1:0;switch(31&v){case 1:break;case 2:y={t:"n",v:p.read_shift(2)};break;case 3:y={t:"n",v:p.read_shift(2,"i")};break;case 5:y={t:"n",v:p.read_shift(8,"f")};break;case 7:y={t:"s",v:i[l=p.read_shift(4)-1]};break;case 8:y={t:"n",v:p.read_shift(8,"f")},p.l+=2,p.l+=4;break;default:throw"Unrecognized QPW cell type "+(31&v)}var _=0;if(32&v)switch(31&v){case 2:_=p.read_shift(2);break;case 3:_=p.read_shift(2,"i");break;case 7:_=p.read_shift(2);break;default:throw"Unsupported delta for QPW cell type "+(31&v)}(n.sheetStubs||"z"!=y.t)&&(null!=r["!data"]?(r["!data"][c]||(r["!data"][c]=[]),r["!data"][c][u]=y):r[m+Od(c)]=y),++c,--s;while(b-- >0&&s>=0){if(32&v)switch(31&v){case 2:y={t:"n",v:y.v+_&65535};break;case 3:y={t:"n",v:y.v+_&65535},y.v>32767&&(y.v-=65536);break;case 7:y={t:"s",v:i[l=l+_>>>0]};break;default:throw"Cannot apply delta for QPW cell type "+(31&v)}else switch(31&v){case 1:y={t:"z"};break;case 2:y={t:"n",v:p.read_shift(2)};break;case 7:y={t:"s",v:i[l=p.read_shift(4)-1]};break;default:throw"Cannot apply repeat for QPW cell type "+(31&v)}(n.sheetStubs||"z"!=y.t)&&(null!=r["!data"]?(r["!data"][c]||(r["!data"][c]=[]),r["!data"][c][u]=y):r[m+Od(c)]=y),++c,--s}}break;default:break}t.l+=f}return h}return{sheet_to_wk1:r,book_to_wk3:i,to_workbook:e}}();function ym(t){var e={},n=t.match(oh),r=0,i=!1;if(n)for(;r!=n.length;++r){var o=lh(n[r]);switch(o[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!o.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if("1"==o.val)break;e.cp=Ol[parseInt(o.val,10)];break;case"<outline":if(!o.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=o.val;break;case"<sz":e.sz=o.val;break;case"<strike":if(!o.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!o.val)break;switch(o.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if("0"==o.val)break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if("0"==o.val)break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":o.rgb&&(e.color=o.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=o.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=o.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(47!==o[0].charCodeAt(1)&&!i)throw new Error("Unrecognized rich format "+o[0])}}return e}var vm=function(){var t=Eh("t"),e=Eh("rPr");function n(n){var r=n.match(t);if(!r)return{t:"s",v:""};var i={t:"s",v:dh(r[1])},o=n.match(e);return o&&(i.s=ym(o[1])),i}var r=/<(?:\w+:)?r>/g,i=/<\/(?:\w+:)?r>/;return function(t){return t.replace(r,"").split(i).map(n).filter((function(t){return t.v}))}}(),bm=function(){var t=/(\r\n|\n)/g;function e(t,e,n){var r=[];t.u&&r.push("text-decoration: underline;"),t.uval&&r.push("text-underline-style:"+t.uval+";"),t.sz&&r.push("font-size:"+t.sz+"pt;"),t.outline&&r.push("text-effect: outline;"),t.shadow&&r.push("text-shadow: auto;"),e.push('<span style="'+r.join("")+'">'),t.b&&(e.push("<b>"),n.push("</b>")),t.i&&(e.push("<i>"),n.push("</i>")),t.strike&&(e.push("<s>"),n.push("</s>"));var i=t.valign||"";return"superscript"==i||"super"==i?i="sup":"subscript"==i&&(i="sub"),""!=i&&(e.push("<"+i+">"),n.push("</"+i+">")),n.push("</span>"),t}function n(n){var r=[[],n.v,[]];return n.v?(n.s&&e(n.s,r[0],r[2]),r[0].join("")+r[1].replace(t,"<br/>")+r[2].join("")):""}return function(t){return t.map(n).join("")}}(),_m=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,xm=/<(?:\w+:)?r\b[^>]*>/,wm=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function Sm(t,e){var n=!e||e.cellHTML,r={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(r.t=dh(wh(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||""),!0),r.r=wh(t),n&&(r.h=gh(r.t))):t.match(xm)&&(r.r=wh(t),r.t=dh(wh((t.replace(wm,"").match(_m)||[]).join("").replace(oh,"")),!0),n&&(r.h=bm(vm(r.r)))),r):{t:""}}var Em=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,Cm=/<(?:\w+:)?(?:si|sstItem)>/g,Mm=/<\/(?:\w+:)?(?:si|sstItem)>/;function Tm(t,e){var n=[],r="";if(!t)return n;var i=t.match(Em);if(i){r=i[2].replace(Cm,"").split(Mm);for(var o=0;o!=r.length;++o){var a=Sm(r[o].trim(),e);null!=a&&(n[n.length]=a)}i=lh(i[1]),n.Count=i.count,n.Unique=i.uniqueCount}return n}function Am(t){return[t.read_shift(4),t.read_shift(4)]}function Om(t,e){var n=[],r=!1;return wd(t,(function(t,i,o){switch(o){case 159:n.Count=t[0],n.Unique=t[1];break;case 19:n.push(t);break;case 160:return!0;case 35:r=!0;break;case 36:r=!1;break;default:if(i.T,!r||e.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}})),n}function km(t){if("undefined"!==typeof El)return El.utils.encode(Tl,t);for(var e=[],n=t.split(""),r=0;r<n.length;++r)e[r]=n[r].charCodeAt(0);return e}function Im(t,e){var n={};return n.Major=t.read_shift(2),n.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),n}function Pm(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=Im(t,4),e.U=Im(t,4),e.W=Im(t,4),e}function Lm(t){var e=t.read_shift(4),n=t.l+e-4,r={},i=t.read_shift(4),o=[];while(i-- >0)o.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(r.name=t.read_shift(0,"lpp4"),r.comps=o,t.l!=n)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+n);return r}function Nm(t){var e=[];t.l+=4;var n=t.read_shift(4);while(n-- >0)e.push(Lm(t));return e}function Rm(t){var e=[];t.l+=4;var n=t.read_shift(4);while(n-- >0)e.push(t.read_shift(0,"lpp4"));return e}function Dm(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=Im(t,4),e.U=Im(t,4),e.W=Im(t,4),e}function Fm(t){var e=Dm(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),4!=t.read_shift(4))throw new Error("Bad !Primary record");return e}function jm(t,e){var n=t.l+e,r={};r.Flags=63&t.read_shift(4),t.l+=4,r.AlgID=t.read_shift(4);var i=!1;switch(r.AlgID){case 26126:case 26127:case 26128:i=36==r.Flags;break;case 26625:i=4==r.Flags;break;case 0:i=16==r.Flags||4==r.Flags||36==r.Flags;break;default:throw"Unrecognized encryption algorithm: "+r.AlgID}if(!i)throw new Error("Encryption Flags/AlgID mismatch");return r.AlgIDHash=t.read_shift(4),r.KeySize=t.read_shift(4),r.ProviderType=t.read_shift(4),t.l+=8,r.CSPName=t.read_shift(n-t.l>>1,"utf16le"),t.l=n,r}function Bm(t,e){var n={},r=t.l+e;return t.l+=4,n.Salt=t.slice(t.l,t.l+16),t.l+=16,n.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),n.VerifierHash=t.slice(t.l,r),t.l=r,n}function zm(t){var e=Im(t);switch(e.Minor){case 2:return[e.Minor,Um(t,e)];case 3:return[e.Minor,Gm(t,e)];case 4:return[e.Minor,qm(t,e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function Um(t){var e=t.read_shift(4);if(36!=(63&e))throw new Error("EncryptionInfo mismatch");var n=t.read_shift(4),r=jm(t,n),i=Bm(t,t.length-t.l);return{t:"Std",h:r,v:i}}function Gm(){throw new Error("File is password-protected: ECMA-376 Extensible")}function qm(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var n=t.read_shift(t.length-t.l,"utf8"),r={};return n.replace(oh,(function(t){var n=lh(t);switch(uh(n[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach((function(t){r[t]=n[t]}));break;case"<dataIntegrity":r.encryptedHmacKey=n.encryptedHmacKey,r.encryptedHmacValue=n.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":r.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":r.uri=n.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":r.encs.push(n);break;default:throw n[0]}})),r}function Vm(t,e){var n={},r=n.EncryptionVersionInfo=Im(t,4);if(e-=4,2!=r.Minor)throw new Error("unrecognized minor version code: "+r.Minor);if(r.Major>4||r.Major<2)throw new Error("unrecognized major version code: "+r.Major);n.Flags=t.read_shift(4),e-=4;var i=t.read_shift(4);return e-=4,n.EncryptionHeader=jm(t,i),e-=i,n.EncryptionVerifier=Bm(t,e),n}function Hm(t){var e={},n=e.EncryptionVersionInfo=Im(t,4);if(1!=n.Major||1!=n.Minor)throw"unrecognized version code "+n.Major+" : "+n.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function Wm(t){var e,n,r,i,o,a,s=0,l=km(t),u=l.length+1;for(e=Jl(u),e[0]=l.length,n=1;n!=u;++n)e[n]=l[n-1];for(n=u-1;n>=0;--n)r=e[n],i=0===(16384&s)?0:1,o=s<<1&32767,a=i|o,s=a^r;return 52811^s}var Ym=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],n=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],r=function(t){return 255&(t/2|128*t)},i=function(t,e){return r(t^e)},o=function(t){for(var r=e[t.length-1],i=104,o=t.length-1;o>=0;--o)for(var a=t[o],s=0;7!=s;++s)64&a&&(r^=n[i]),a*=2,--i;return r};return function(e){for(var n,r,a,s=km(e),l=o(s),u=s.length,c=Jl(16),h=0;16!=h;++h)c[h]=0;1===(1&u)&&(n=l>>8,c[u]=i(t[0],n),--u,n=255&l,r=s[s.length-1],c[u]=i(r,n));while(u>0)--u,n=l>>8,c[u]=i(s[u],n),--u,n=255&l,c[u]=i(s[u],n);u=15,a=15-s.length;while(a>0)n=l>>8,c[u]=i(t[a],n),--u,--a,n=255&l,c[u]=i(s[u],n),--u,--a;return c}}(),Xm=function(t,e,n,r,i){var o,a;for(i||(i=e),r||(r=Ym(t)),o=0;o!=e.length;++o)a=e[o],a^=r[n],a=255&(a>>5|a<<3),i[o]=a,++n;return[i,n,r]},Jm=function(t){var e=0,n=Ym(t);return function(t){var r=Xm("",t,e,n);return e=r[1],r[0]}};function Zm(t,e,n,r){var i={key:wp(t),verificationBytes:wp(t)};return n.password&&(i.verifier=Wm(n.password)),r.valid=i.verificationBytes===i.verifier,r.valid&&(r.insitu=Jm(n.password)),i}function Km(t,e,n){var r=n||{};return r.Info=t.read_shift(2),t.l-=2,1===r.Info?r.Data=Hm(t,e):r.Data=Vm(t,e),r}function Qm(t,e,n){var r={Type:n.biff>=8?t.read_shift(2):0};return r.Type?Km(t,e-2,r):Zm(t,n.biff>=8?e:e-2,n,r),r}function $m(t,e){switch(e.type){case"base64":return ty(Hl(t),e);case"binary":return ty(t,e);case"buffer":return ty(Wl&&Buffer.isBuffer(t)?t.toString("binary"):Ql(t),e);case"array":return ty(Nc(t),e)}throw new Error("Unrecognized type "+e.type)}function ty(t,e){var n=e||{},r={},i=n.dense;i&&(r["!data"]=[]);var o=t.match(/\\trowd[\s\S]*?\\row\b/g);if(!o)throw new Error("RTF missing table");var a={s:{c:0,r:0},e:{c:0,r:o.length-1}},s=[];return o.forEach((function(t,e){i&&(s=r["!data"][e]=[]);var o,l=/\\[\w\-]+\b/g,u=0,c=-1,h=[];while(null!=(o=l.exec(t))){var d=t.slice(u,l.lastIndex-o[0].length);switch(32==d.charCodeAt(0)&&(d=d.slice(1)),d.length&&h.push(d),o[0]){case"\\cell":if(++c,h.length){var f={v:h.join(""),t:"s"};"TRUE"==f.v||"FALSE"==f.v?(f.v="TRUE"==f.v,f.t="b"):isNaN(Fc(f.v))||(f.t="n",!1!==n.cellText&&(f.w=f.v),f.v=Fc(f.v)),i?s[c]=f:r[jd({r:e,c:c})]=f}h=[];break;case"\\par":h.push("\n");break}u=l.lastIndex}c>a.e.c&&(a.e.c=c)})),r["!ref"]=zd(a),r}function ey(t,e){var n=Hd($m(t,e),e);return n.bookType="rtf",n}function ny(t){var e=t.slice("#"===t[0]?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function ry(t){for(var e=0,n=1;3!=e;++e)n=256*n+(t[e]>255?255:t[e]<0?0:t[e]);return n.toString(16).toUpperCase().slice(1)}function iy(t){var e=t[0]/255,n=t[1]/255,r=t[2]/255,i=Math.max(e,n,r),o=Math.min(e,n,r),a=i-o;if(0===a)return[0,0,e];var s=0,l=0,u=i+o;switch(l=a/(u>1?2-u:u),i){case e:s=((n-r)/a+6)%6;break;case n:s=(r-e)/a+2;break;case r:s=(e-n)/a+4;break}return[s/6,l,u/2]}function oy(t){var e,n=t[0],r=t[1],i=t[2],o=2*r*(i<.5?i:1-i),a=i-o/2,s=[a,a,a],l=6*n;if(0!==r)switch(0|l){case 0:case 6:e=o*l,s[0]+=o,s[1]+=e;break;case 1:e=o*(2-l),s[0]+=e,s[1]+=o;break;case 2:e=o*(l-2),s[1]+=o,s[2]+=e;break;case 3:e=o*(4-l),s[1]+=e,s[2]+=o;break;case 4:e=o*(l-4),s[2]+=o,s[0]+=e;break;case 5:e=o*(6-l),s[2]+=e,s[0]+=o;break}for(var u=0;3!=u;++u)s[u]=Math.round(255*s[u]);return s}function ay(t,e){if(0===e)return t;var n=iy(ny(t));return n[2]=e<0?n[2]*(1+e):1-(1-n[2])*(1-e),ry(oy(n))}var sy=6,ly=15,uy=1,cy=sy;function hy(t){return Math.floor((t+Math.round(128/cy)/256)*cy)}function dy(t){return Math.floor((t-5)/cy*100+.5)/100}function fy(t){return Math.round((t*cy+5)/cy*256)/256}function py(t){return fy(dy(hy(t)))}function gy(t){var e=Math.abs(t-py(t)),n=cy;if(e>.005)for(cy=uy;cy<ly;++cy)Math.abs(t-py(t))<=e&&(e=Math.abs(t-py(t)),n=cy);cy=n}function my(t){t.width?(t.wpx=hy(t.width),t.wch=dy(t.wpx),t.MDW=cy):t.wpx?(t.wch=dy(t.wpx),t.width=fy(t.wch),t.MDW=cy):"number"==typeof t.wch&&(t.width=fy(t.wch),t.wpx=hy(t.width),t.MDW=cy),t.customWidth&&delete t.customWidth}var yy=96,vy=yy;function by(t){return 96*t/vy}function _y(t){return t*vy/96}var xy={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function wy(t,e,n,r){e.Borders=[];var i={},o=!1;(t[0].match(oh)||[]).forEach((function(t){var n=lh(t);switch(uh(n[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":i={},n.diagonalUp&&(i.diagonalUp=yh(n.diagonalUp)),n.diagonalDown&&(i.diagonalDown=yh(n.diagonalDown)),e.Borders.push(i);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":o=!0;break;case"</ext>":o=!1;break;default:if(r&&r.WTF&&!o)throw new Error("unrecognized "+n[0]+" in borders")}}))}function Sy(t,e,n,r){e.Fills=[];var i={},o=!1;(t[0].match(oh)||[]).forEach((function(t){var n=lh(t);switch(uh(n[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":i={},e.Fills.push(i);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(i),i={};break;case"<patternFill":case"<patternFill>":n.patternType&&(i.patternType=n.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":i.bgColor||(i.bgColor={}),n.indexed&&(i.bgColor.indexed=parseInt(n.indexed,10)),n.theme&&(i.bgColor.theme=parseInt(n.theme,10)),n.tint&&(i.bgColor.tint=parseFloat(n.tint)),n.rgb&&(i.bgColor.rgb=n.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":i.fgColor||(i.fgColor={}),n.theme&&(i.fgColor.theme=parseInt(n.theme,10)),n.tint&&(i.fgColor.tint=parseFloat(n.tint)),null!=n.rgb&&(i.fgColor.rgb=n.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":o=!0;break;case"</ext>":o=!1;break;default:if(r&&r.WTF&&!o)throw new Error("unrecognized "+n[0]+" in fills")}}))}function Ey(t,e,n,r){e.Fonts=[];var i={},o=!1;(t[0].match(oh)||[]).forEach((function(t){var a=lh(t);switch(uh(a[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(i),i={};break;case"<name":a.val&&(i.name=wh(a.val));break;case"<name/>":case"</name>":break;case"<b":i.bold=a.val?yh(a.val):1;break;case"<b/>":i.bold=1;break;case"<i":i.italic=a.val?yh(a.val):1;break;case"<i/>":i.italic=1;break;case"<u":switch(a.val){case"none":i.underline=0;break;case"single":i.underline=1;break;case"double":i.underline=2;break;case"singleAccounting":i.underline=33;break;case"doubleAccounting":i.underline=34;break}break;case"<u/>":i.underline=1;break;case"<strike":i.strike=a.val?yh(a.val):1;break;case"<strike/>":i.strike=1;break;case"<outline":i.outline=a.val?yh(a.val):1;break;case"<outline/>":i.outline=1;break;case"<shadow":i.shadow=a.val?yh(a.val):1;break;case"<shadow/>":i.shadow=1;break;case"<condense":i.condense=a.val?yh(a.val):1;break;case"<condense/>":i.condense=1;break;case"<extend":i.extend=a.val?yh(a.val):1;break;case"<extend/>":i.extend=1;break;case"<sz":a.val&&(i.sz=+a.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":a.val&&(i.vertAlign=a.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":a.val&&(i.family=parseInt(a.val,10));break;case"<family/>":case"</family>":break;case"<scheme":a.val&&(i.scheme=a.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if("1"==a.val)break;a.codepage=Ol[parseInt(a.val,10)];break;case"<color":if(i.color||(i.color={}),a.auto&&(i.color.auto=yh(a.auto)),a.rgb)i.color.rgb=a.rgb.slice(-6);else if(a.indexed){i.color.index=parseInt(a.indexed,10);var s=Nf[i.color.index];81==i.color.index&&(s=Nf[1]),s||(s=Nf[1]),i.color.rgb=s[0].toString(16)+s[1].toString(16)+s[2].toString(16)}else a.theme&&(i.color.theme=parseInt(a.theme,10),a.tint&&(i.color.tint=parseFloat(a.tint)),a.theme&&n.themeElements&&n.themeElements.clrScheme&&(i.color.rgb=ay(n.themeElements.clrScheme[i.color.theme].rgb,i.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":o=!0;break;case"</AlternateContent>":o=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":o=!0;break;case"</ext>":o=!1;break;default:if(r&&r.WTF&&!o)throw new Error("unrecognized "+a[0]+" in fonts")}}))}function Cy(t,e,n){e.NumberFmt=[];for(var r=xc(mu),i=0;i<r.length;++i)e.NumberFmt[r[i]]=mu[r[i]];var o=t[0].match(oh);if(o)for(i=0;i<o.length;++i){var a=lh(o[i]);switch(uh(a[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":var s=dh(wh(a.formatCode)),l=parseInt(a.numFmtId,10);if(e.NumberFmt[l]=s,l>0){if(l>392){for(l=392;l>60;--l)if(null==e.NumberFmt[l])break;e.NumberFmt[l]=s}mc(s,l)}break;case"</numFmt>":break;default:if(n.WTF)throw new Error("unrecognized "+a[0]+" in numFmts")}}}var My=["numFmtId","fillId","fontId","borderId","xfId"],Ty=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function Ay(t,e,n){var r;e.CellXf=[];var i=!1;(t[0].match(oh)||[]).forEach((function(t){var o=lh(t),a=0;switch(uh(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(r=o,delete r[0],a=0;a<My.length;++a)r[My[a]]&&(r[My[a]]=parseInt(r[My[a]],10));for(a=0;a<Ty.length;++a)r[Ty[a]]&&(r[Ty[a]]=yh(r[Ty[a]]));if(e.NumberFmt&&r.numFmtId>392)for(a=392;a>60;--a)if(e.NumberFmt[r.numFmtId]==e.NumberFmt[a]){r.numFmtId=a;break}e.CellXf.push(r);break;case"</xf>":break;case"<alignment":case"<alignment/>":var s={};o.vertical&&(s.vertical=o.vertical),o.horizontal&&(s.horizontal=o.horizontal),null!=o.textRotation&&(s.textRotation=o.textRotation),o.indent&&(s.indent=o.indent),o.wrapText&&(s.wrapText=yh(o.wrapText)),r.alignment=s;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+o[0]+" in cellXfs")}}))}var Oy=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,e=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,r=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,a,s){var l,u={};return o?(o=o.replace(/<!--([\s\S]*?)-->/gm,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,""),(l=o.match(t))&&Cy(l,u,s),(l=o.match(r))&&Ey(l,u,a,s),(l=o.match(n))&&Sy(l,u,a,s),(l=o.match(i))&&wy(l,u,a,s),(l=o.match(e))&&Ay(l,u,s),u):u}}();function ky(t,e){var n=t.read_shift(2),r=Jd(t,e-2);return[n,r]}function Iy(t,e,n){var r={};r.sz=t.read_shift(2)/20;var i=hf(t,2,n);i.fItalic&&(r.italic=1),i.fCondense&&(r.condense=1),i.fExtend&&(r.extend=1),i.fShadow&&(r.shadow=1),i.fOutline&&(r.outline=1),i.fStrikeout&&(r.strike=1);var o=t.read_shift(2);switch(700===o&&(r.bold=1),t.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var a=t.read_shift(1);0!=a&&(r.underline=a);var s=t.read_shift(1);s>0&&(r.family=s);var l=t.read_shift(1);switch(l>0&&(r.charset=l),t.l++,r.color=cf(t,8),t.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=Jd(t,e-21),r}var Py=_d;function Ly(t,e){var n=t.l+e,r=t.read_shift(2),i=t.read_shift(2);return t.l=n,{ixfe:r,numFmtId:i}}var Ny=_d;function Ry(t,e,n){var r={NumberFmt:[]};for(var i in mu)r.NumberFmt[i]=mu[i];r.CellXf=[],r.Fonts=[];var o=[],a=!1;return wd(t,(function(t,i,s){switch(s){case 44:r.NumberFmt[t[0]]=t[1],mc(t[1],t[0]);break;case 43:r.Fonts.push(t),null!=t.color.theme&&e&&e.themeElements&&e.themeElements.clrScheme&&(t.color.rgb=ay(e.themeElements.clrScheme[t.color.theme].rgb,t.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:617==o[o.length-1]&&r.CellXf.push(t);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:o.push(s),a=!0;break;case 38:o.pop(),a=!1;break;default:if(i.T>0)o.push(s);else if(i.T<0)o.pop();else if(!a||n.WTF&&37!=o[o.length-1])throw new Error("Unexpected record 0x"+s.toString(16))}})),r}var Dy=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function Fy(t,e,n){e.themeElements.clrScheme=[];var r={};(t[0].match(oh)||[]).forEach((function(t){var i=lh(t);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":r.rgb=i.val;break;case"<a:sysClr":r.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":"/"===i[0].charAt(1)?(e.themeElements.clrScheme[Dy.indexOf(i[0])]=r,r={}):r.name=i[0].slice(3,i[0].length-1);break;default:if(n&&n.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}}))}function jy(){}function By(){}var zy=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,Uy=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,Gy=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function qy(t,e,n){var r;e.themeElements={},[["clrScheme",zy,Fy],["fontScheme",Uy,jy],["fmtScheme",Gy,By]].forEach((function(i){if(!(r=t.match(i[1])))throw new Error(i[0]+" not found in themeElements");i[2](r,e,n)}))}var Vy=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function Hy(t,e){var n;t&&0!==t.length||(t=Wy());var r={};if(!(n=t.match(Vy)))throw new Error("themeElements not found in theme");return qy(n[0],r,e),r.raw=t,r}function Wy(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&"string"==typeof t.raw)return t.raw;var n=[eh];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',n[n.length]='<a:font script="Hang" typeface="맑은 고딕"/>',n[n.length]='<a:font script="Hans" typeface="宋体"/>',n[n.length]='<a:font script="Hant" typeface="新細明體"/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',n[n.length]='<a:font script="Hang" typeface="맑은 고딕"/>',n[n.length]='<a:font script="Hans" typeface="宋体"/>',n[n.length]='<a:font script="Hant" typeface="新細明體"/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}function Yy(t,e,n){var r=t.l+e,i=t.read_shift(4);if(124226!==i)if(n.cellStyles){var o,a=t.slice(t.l);t.l=r;try{o=$c(a,{type:"array"})}catch(l){return}var s=Jc(o,"theme/theme/theme1.xml",!0);if(s)return Hy(s,n)}else t.l=r}function Xy(t){return t.read_shift(4)}function Jy(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=Zy(t,4);break;case 2:e.xclrValue=Dp(t,4);break;case 3:e.xclrValue=Xy(t,4);break;case 4:t.l+=4;break}return t.l+=8,e}function Zy(t,e){return _d(t,e)}function Ky(t,e){return _d(t,e)}function Qy(t){var e=t.read_shift(2),n=t.read_shift(2)-4,r=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:r[1]=Jy(t,n);break;case 6:r[1]=Ky(t,n);break;case 14:case 15:r[1]=t.read_shift(1===n?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+n)}return r}function $y(t,e){var n=t.l+e;t.l+=2;var r=t.read_shift(2);t.l+=2;var i=t.read_shift(2),o=[];while(i-- >0)o.push(Qy(t,n-t.l));return{ixfe:r,ext:o}}function tv(t,e){e.forEach((function(t){switch(t[0]){case 4:break;case 5:break;case 6:break;case 7:break;case 8:break;case 9:break;case 10:break;case 11:break;case 13:break;case 14:break;case 15:break}}))}function ev(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:Jd(t,e-8)}}function nv(t){var e=[],n=t.read_shift(4);while(n-- >0)e.push([t.read_shift(4),t.read_shift(4)]);return e}function rv(t){return t.l+=4,0!=t.read_shift(4)}function iv(t,e,n){var r={Types:[],Cell:[],Value:[]},i=n||{},o=[],a=!1,s=2;return wd(t,(function(t,e,n){switch(n){case 335:r.Types.push({name:t.name});break;case 51:t.forEach((function(t){1==s?r.Cell.push({type:r.Types[t[0]-1].name,index:t[1]}):0==s&&r.Value.push({type:r.Types[t[0]-1].name,index:t[1]})}));break;case 337:s=t?1:0;break;case 338:s=2;break;case 35:o.push(n),a=!0;break;case 36:o.pop(),a=!1;break;default:if(e.T);else if(!a||i.WTF&&35!=o[o.length-1])throw new Error("Unexpected record 0x"+n.toString(16))}})),r}function ov(t,e,n){var r={Types:[],Cell:[],Value:[]};if(!t)return r;var i,o=!1,a=2;return t.replace(oh,(function(t){var e=lh(t);switch(uh(e[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":r.Types.push({name:e.name});break;case"</metadataType>":break;case"<futureMetadata":for(var s=0;s<r.Types.length;++s)r.Types[s].name==e.name&&(i=r.Types[s]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":1==a?r.Cell.push({type:r.Types[e.t-1].name,index:+e.v}):0==a&&r.Value.push({type:r.Types[e.t-1].name,index:+e.v});break;case"</rc>":break;case"<cellMetadata":a=1;break;case"</cellMetadata>":a=2;break;case"<valueMetadata":a=0;break;case"</valueMetadata>":a=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":o=!0;break;case"</ext>":o=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+e.i);break;default:if(!o&&(null==n?void 0:n.WTF))throw new Error("unrecognized "+e[0]+" in metadata")}return t})),r}function av(t){var e=[];if(!t)return e;var n=1;return(t.match(oh)||[]).forEach((function(t){var r=lh(t);switch(r[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete r[0],r.i?n=r.i:r.i=n,e.push(r);break}})),e}function sv(t){var e={};e.i=t.read_shift(4);var n={};n.r=t.read_shift(4),n.c=t.read_shift(4),e.r=jd(n);var r=t.read_shift(1);return 2&r&&(e.l="1"),8&r&&(e.a="1"),e}function lv(t,e,n){var r=[],i=!1;return wd(t,(function(t,e,o){switch(o){case 63:r.push(t);break;default:if(e.T);else if(!i||n.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}})),r}function uv(){}function cv(t,e,n,r){if(!t)return t;var i=r||{},o=!1,a=!1;wd(t,(function(t,e,n){if(!a)switch(n){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:o=!0;break;case 36:o=!1;break;default:if(e.T);else if(!o||i.WTF)throw new Error("Unexpected record 0x"+n.toString(16))}}),i)}function hv(t,e){if(!t)return"??";var n=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][n].Target}function dv(t,e,n,r){var i,o=null!=t["!data"];e.forEach((function(e){var a=Fd(e.ref);if(!(a.r<0||a.c<0)){if(o?(t["!data"][a.r]||(t["!data"][a.r]=[]),i=t["!data"][a.r][a.c]):i=t[e.ref],!i){i={t:"z"},o?t["!data"][a.r][a.c]=i:t[e.ref]=i;var s=Gd(t["!ref"]||"BDWGO1000001:A1");s.s.r>a.r&&(s.s.r=a.r),s.e.r<a.r&&(s.e.r=a.r),s.s.c>a.c&&(s.s.c=a.c),s.e.c<a.c&&(s.e.c=a.c);var l=zd(s);t["!ref"]=l}i.c||(i.c=[]);var u={a:e.author,t:e.t,r:e.r,T:n};e.h&&(u.h=e.h);for(var c=i.c.length-1;c>=0;--c){if(!n&&i.c[c].T)return;n&&!i.c[c].T&&i.c.splice(c,1)}if(n&&r)for(c=0;c<r.length;++c)if(u.a==r[c].id){u.a=r[c].name||u.a;break}i.c.push(u)}}))}function fv(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var n=[],r=[],i=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);i&&i[1]&&i[1].split(/<\/\w*:?author>/).forEach((function(t){if(""!==t&&""!==t.trim()){var e=t.match(/<(?:\w+:)?author[^>]*>(.*)/);e&&n.push(e[1])}}));var o=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return o&&o[1]&&o[1].split(/<\/\w*:?comment>/).forEach((function(t){if(""!==t&&""!==t.trim()){var i=t.match(/<(?:\w+:)?comment[^>]*>/);if(i){var o=lh(i[0]),a={author:o.authorId&&n[o.authorId]||"sheetjsghost",ref:o.ref,guid:o.guid},s=Fd(o.ref);if(!(e.sheetRows&&e.sheetRows<=s.r)){var l=t.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),u=!!l&&!!l[1]&&Sm(l[1])||{r:"",t:"",h:""};a.r=u.r,"<t></t>"==u.r&&(u.t=u.h=""),a.t=(u.t||"").replace(/\r\n/g,"\n").replace(/\r/g,"\n"),e.cellHTML&&(a.h=u.h),r.push(a)}}}})),r}function pv(t,e){var n=[],r=!1,i={},o=0;return t.replace(oh,(function(a,s){var l=lh(a);switch(uh(l[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":i={author:l.personId,guid:l.id,ref:l.ref,T:1};break;case"</threadedComment>":null!=i.t&&n.push(i);break;case"<text>":case"<text":o=s+a.length;break;case"</text>":i.t=t.slice(o,s).replace(/\r\n/g,"\n").replace(/\r/g,"\n");break;case"<mentions":case"<mentions>":r=!0;break;case"</mentions>":r=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(!r&&e.WTF)throw new Error("unrecognized "+l[0]+" in threaded comments")}return a})),n}function gv(t,e){var n=[],r=!1;return t.replace(oh,(function(t){var i=lh(t);switch(uh(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":n.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(!r&&e.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return t})),n}function mv(t){var e={};e.iauthor=t.read_shift(4);var n=lf(t,16);return e.rfx=n.s,e.ref=jd(n.s),t.l+=16,e}var yv=Jd;function vv(t,e){var n=[],r=[],i={},o=!1;return wd(t,(function(t,a,s){switch(s){case 632:r.push(t);break;case 635:i=t;break;case 637:i.t=t.t,i.h=t.h,i.r=t.r;break;case 636:if(i.author=r[i.iauthor],delete i.iauthor,e.sheetRows&&i.rfx&&e.sheetRows<=i.rfx.r)break;i.t||(i.t=""),delete i.rfx,n.push(i);break;case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(a.T);else if(!o||e.WTF)throw new Error("Unexpected record 0x"+s.toString(16))}})),n}var bv="application/vnd.ms-office.vbaProject";function _v(t){var e=bc.utils.cfb_new({root:"R"});return t.FullPaths.forEach((function(n,r){if("/"!==n.slice(-1)&&n.match(/_VBA_PROJECT_CUR/)){var i=n.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");bc.utils.cfb_add(e,i,t.FileIndex[r].content)}})),bc.write(e)}function xv(){return{"!type":"dialog"}}function wv(){return{"!type":"dialog"}}function Sv(){return{"!type":"macro"}}function Ev(){return{"!type":"macro"}}var Cv=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function n(t,n,r,i){var o=!1,a=!1;0==r.length?a=!0:"["==r.charAt(0)&&(a=!0,r=r.slice(1,-1)),0==i.length?o=!0:"["==i.charAt(0)&&(o=!0,i=i.slice(1,-1));var s=r.length>0?0|parseInt(r,10):0,l=i.length>0?0|parseInt(i,10):0;return o?l+=e.c:--l,a?s+=e.r:--s,n+(o?"":"$")+Ld(l)+(a?"":"$")+Od(s)}return function(r,i){return e=i,r.replace(t,n)}}(),Mv=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,Tv=function(){return function(t,e){return t.replace(Mv,(function(t,n,r,i,o,a){var s=Pd(i)-(r?0:e.c),l=Ad(a)-(o?0:e.r),u="$"==o?l+1:0==l?"":"["+l+"]",c="$"==r?s+1:0==s?"":"["+s+"]";return n+"R"+u+"C"+c}))}}();function Av(t,e){return t.replace(Mv,(function(t,n,r,i,o,a){return n+("$"==r?r+i:Ld(Pd(i)+e.c))+("$"==o?o+a:Od(Ad(a)+e.r))}))}function Ov(t,e,n){var r=Bd(e),i=r.s,o=Fd(n),a={r:o.r-i.r,c:o.c-i.c};return Av(t,a)}function kv(t){return 1!=t.length}function Iv(t){return t.replace(/_xlfn\./g,"")}function Pv(t){t.l+=1}function Lv(t,e){var n=t.read_shift(1==e?1:2);return[16383&n,n>>14&1,n>>15&1]}function Nv(t,e,n){var r=2;if(n){if(n.biff>=2&&n.biff<=5)return Rv(t,e,n);12==n.biff&&(r=4)}var i=t.read_shift(r),o=t.read_shift(r),a=Lv(t,2),s=Lv(t,2);return{s:{r:i,c:a[0],cRel:a[1],rRel:a[2]},e:{r:o,c:s[0],cRel:s[1],rRel:s[2]}}}function Rv(t){var e=Lv(t,2),n=Lv(t,2),r=t.read_shift(1),i=t.read_shift(1);return{s:{r:e[0],c:r,cRel:e[1],rRel:e[2]},e:{r:n[0],c:i,cRel:n[1],rRel:n[2]}}}function Dv(t,e,n){if(n.biff<8)return Rv(t,e,n);var r=t.read_shift(12==n.biff?4:2),i=t.read_shift(12==n.biff?4:2),o=Lv(t,2),a=Lv(t,2);return{s:{r:r,c:o[0],cRel:o[1],rRel:o[2]},e:{r:i,c:a[0],cRel:a[1],rRel:a[2]}}}function Fv(t,e,n){if(n&&n.biff>=2&&n.biff<=5)return jv(t,e,n);var r=t.read_shift(n&&12==n.biff?4:2),i=Lv(t,2);return{r:r,c:i[0],cRel:i[1],rRel:i[2]}}function jv(t){var e=Lv(t,2),n=t.read_shift(1);return{r:e[0],c:n,cRel:e[1],rRel:e[2]}}function Bv(t){var e=t.read_shift(2),n=t.read_shift(2);return{r:e,c:255&n,fQuoted:!!(16384&n),cRel:n>>15,rRel:n>>15}}function zv(t,e,n){var r=n&&n.biff?n.biff:8;if(r>=2&&r<=5)return Uv(t,e,n);var i=t.read_shift(r>=12?4:2),o=t.read_shift(2),a=(16384&o)>>14,s=(32768&o)>>15;if(o&=16383,1==s)while(i>524287)i-=1048576;if(1==a)while(o>8191)o-=16384;return{r:i,c:o,cRel:a,rRel:s}}function Uv(t){var e=t.read_shift(2),n=t.read_shift(1),r=(32768&e)>>15,i=(16384&e)>>14;return e&=16383,1==r&&e>=8192&&(e-=16384),1==i&&n>=128&&(n-=256),{r:e,c:n,cRel:i,rRel:r}}function Gv(t,e,n){var r=(96&t[t.l++])>>5,i=Nv(t,n.biff>=2&&n.biff<=5?6:8,n);return[r,i]}function qv(t,e,n){var r=(96&t[t.l++])>>5,i=t.read_shift(2,"i"),o=8;if(n)switch(n.biff){case 5:t.l+=12,o=6;break;case 12:o=12;break}var a=Nv(t,o,n);return[r,i,a]}function Vv(t,e,n){var r=(96&t[t.l++])>>5;return t.l+=n&&n.biff>8?12:n.biff<8?6:8,[r]}function Hv(t,e,n){var r=(96&t[t.l++])>>5,i=t.read_shift(2),o=8;if(n)switch(n.biff){case 5:t.l+=12,o=6;break;case 12:o=12;break}return t.l+=o,[r,i]}function Wv(t,e,n){var r=(96&t[t.l++])>>5,i=Dv(t,e-1,n);return[r,i]}function Yv(t,e,n){var r=(96&t[t.l++])>>5;return t.l+=2==n.biff?6:12==n.biff?14:7,[r]}function Xv(t){var e=1&t[t.l+1],n=1;return t.l+=4,[e,n]}function Jv(t,e,n){t.l+=2;for(var r=t.read_shift(n&&2==n.biff?1:2),i=[],o=0;o<=r;++o)i.push(t.read_shift(n&&2==n.biff?1:2));return i}function Zv(t,e,n){var r=255&t[t.l+1]?1:0;return t.l+=2,[r,t.read_shift(n&&2==n.biff?1:2)]}function Kv(t,e,n){var r=255&t[t.l+1]?1:0;return t.l+=2,[r,t.read_shift(n&&2==n.biff?1:2)]}function Qv(t){var e=255&t[t.l+1]?1:0;return t.l+=2,[e,t.read_shift(2)]}function $v(t,e,n){var r=255&t[t.l+1]?1:0;return t.l+=n&&2==n.biff?3:4,[r]}function tb(t){var e=t.read_shift(1),n=t.read_shift(1);return[e,n]}function eb(t){return t.read_shift(2),tb(t,2)}function nb(t){return t.read_shift(2),tb(t,2)}function rb(t,e,n){var r=(96&t[t.l])>>5;t.l+=1;var i=Fv(t,0,n);return[r,i]}function ib(t,e,n){var r=(96&t[t.l])>>5;t.l+=1;var i=zv(t,0,n);return[r,i]}function ob(t,e,n){var r=(96&t[t.l])>>5;t.l+=1;var i=t.read_shift(2);n&&5==n.biff&&(t.l+=12);var o=Fv(t,0,n);return[r,i,o]}function ab(t,e,n){var r=(96&t[t.l])>>5;t.l+=1;var i=t.read_shift(n&&n.biff<=3?1:2);return[__[i],b_[i],r]}function sb(t,e,n){var r=t[t.l++],i=t.read_shift(1),o=n&&n.biff<=3?[88==r?-1:0,t.read_shift(1)]:lb(t);return[i,(0===o[0]?b_:v_)[o[1]]]}function lb(t){return[t[t.l+1]>>7,32767&t.read_shift(2)]}function ub(t,e,n){t.l+=n&&2==n.biff?3:4}function cb(t,e,n){if(t.l++,n&&12==n.biff)return[t.read_shift(4,"i"),0];var r=t.read_shift(2),i=t.read_shift(n&&2==n.biff?1:2);return[r,i]}function hb(t){return t.l++,Rf[t.read_shift(1)]}function db(t){return t.l++,t.read_shift(2)}function fb(t){return t.l++,0!==t.read_shift(1)}function pb(t){return t.l++,uf(t,8)}function gb(t,e,n){return t.l++,Cp(t,e-1,n)}function mb(t,e){var n=[t.read_shift(1)];if(12==e)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2;break}switch(n[0]){case 4:n[1]=xp(t,1)?"TRUE":"FALSE",12!=e&&(t.l+=7);break;case 37:case 16:n[1]=Rf[t[t.l]],t.l+=12==e?4:8;break;case 0:t.l+=8;break;case 1:n[1]=uf(t,8);break;case 2:n[1]=Op(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function yb(t,e,n){for(var r=t.read_shift(12==n.biff?4:2),i=[],o=0;o!=r;++o)i.push((12==n.biff?lf:Vp)(t,8));return i}function vb(t,e,n){var r=0,i=0;12==n.biff?(r=t.read_shift(4),i=t.read_shift(4)):(i=1+t.read_shift(1),r=1+t.read_shift(2)),n.biff>=2&&n.biff<8&&(--r,0==--i&&(i=256));for(var o=0,a=[];o!=r&&(a[o]=[]);++o)for(var s=0;s!=i;++s)a[o][s]=mb(t,n.biff);return a}function bb(t,e,n){var r=t.read_shift(1)>>>5&3,i=!n||n.biff>=8?4:2,o=t.read_shift(i);switch(n.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[r,0,o]}function _b(t,e,n){if(5==n.biff)return xb(t,e,n);var r=t.read_shift(1)>>>5&3,i=t.read_shift(2),o=t.read_shift(4);return[r,i,o]}function xb(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2,"i");t.l+=8;var r=t.read_shift(2);return t.l+=12,[e,n,r]}function wb(t,e,n){var r=t.read_shift(1)>>>5&3;t.l+=n&&2==n.biff?3:4;var i=t.read_shift(n&&2==n.biff?1:2);return[r,i]}function Sb(t,e,n){var r=t.read_shift(1)>>>5&3,i=t.read_shift(n&&2==n.biff?1:2);return[r,i]}function Eb(t,e,n){var r=t.read_shift(1)>>>5&3;return t.l+=4,n.biff<8&&t.l--,12==n.biff&&(t.l+=2),[r]}function Cb(t,e,n){var r=(96&t[t.l++])>>5,i=t.read_shift(2),o=4;if(n)switch(n.biff){case 5:o=15;break;case 12:o=6;break}return t.l+=o,[r,i]}var Mb=_d,Tb=_d,Ab=_d;function Ob(t,e,n){return t.l+=2,[Bv(t,4,n)]}function kb(t){return t.l+=6,[]}var Ib=Ob,Pb=kb,Lb=kb,Nb=Ob;function Rb(t){return t.l+=2,[wp(t),1&t.read_shift(2)]}var Db=Ob,Fb=Rb,jb=kb,Bb=Ob,zb=Ob,Ub=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Gb(t){t.l+=2;var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(4),i=t.read_shift(2),o=t.read_shift(2),a=Ub[n>>2&31];return{ixti:e,coltype:3&n,rt:a,idx:r,c:i,C:o}}function qb(t){return t.l+=2,[t.read_shift(4)]}function Vb(t,e,n){return t.l+=5,t.l+=2,t.l+=2==n.biff?1:4,["PTGSHEET"]}function Hb(t,e,n){return t.l+=2==n.biff?4:5,["PTGENDSHEET"]}function Wb(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2);return[e,n]}function Yb(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2);return[e,n]}function Xb(t){return t.l+=4,[0,0]}var Jb={1:{n:"PtgExp",f:cb},2:{n:"PtgTbl",f:Ab},3:{n:"PtgAdd",f:Pv},4:{n:"PtgSub",f:Pv},5:{n:"PtgMul",f:Pv},6:{n:"PtgDiv",f:Pv},7:{n:"PtgPower",f:Pv},8:{n:"PtgConcat",f:Pv},9:{n:"PtgLt",f:Pv},10:{n:"PtgLe",f:Pv},11:{n:"PtgEq",f:Pv},12:{n:"PtgGe",f:Pv},13:{n:"PtgGt",f:Pv},14:{n:"PtgNe",f:Pv},15:{n:"PtgIsect",f:Pv},16:{n:"PtgUnion",f:Pv},17:{n:"PtgRange",f:Pv},18:{n:"PtgUplus",f:Pv},19:{n:"PtgUminus",f:Pv},20:{n:"PtgPercent",f:Pv},21:{n:"PtgParen",f:Pv},22:{n:"PtgMissArg",f:Pv},23:{n:"PtgStr",f:gb},26:{n:"PtgSheet",f:Vb},27:{n:"PtgEndSheet",f:Hb},28:{n:"PtgErr",f:hb},29:{n:"PtgBool",f:fb},30:{n:"PtgInt",f:db},31:{n:"PtgNum",f:pb},32:{n:"PtgArray",f:Yv},33:{n:"PtgFunc",f:ab},34:{n:"PtgFuncVar",f:sb},35:{n:"PtgName",f:bb},36:{n:"PtgRef",f:rb},37:{n:"PtgArea",f:Gv},38:{n:"PtgMemArea",f:wb},39:{n:"PtgMemErr",f:Mb},40:{n:"PtgMemNoMem",f:Tb},41:{n:"PtgMemFunc",f:Sb},42:{n:"PtgRefErr",f:Eb},43:{n:"PtgAreaErr",f:Vv},44:{n:"PtgRefN",f:ib},45:{n:"PtgAreaN",f:Wv},46:{n:"PtgMemAreaN",f:Wb},47:{n:"PtgMemNoMemN",f:Yb},57:{n:"PtgNameX",f:_b},58:{n:"PtgRef3d",f:ob},59:{n:"PtgArea3d",f:qv},60:{n:"PtgRefErr3d",f:Cb},61:{n:"PtgAreaErr3d",f:Hv},255:{}},Zb={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Kb={1:{n:"PtgElfLel",f:Rb},2:{n:"PtgElfRw",f:Bb},3:{n:"PtgElfCol",f:Ib},6:{n:"PtgElfRwV",f:zb},7:{n:"PtgElfColV",f:Nb},10:{n:"PtgElfRadical",f:Db},11:{n:"PtgElfRadicalS",f:jb},13:{n:"PtgElfColS",f:Pb},15:{n:"PtgElfColSV",f:Lb},16:{n:"PtgElfRadicalLel",f:Fb},25:{n:"PtgList",f:Gb},29:{n:"PtgSxName",f:qb},255:{}},Qb={0:{n:"PtgAttrNoop",f:Xb},1:{n:"PtgAttrSemi",f:$v},2:{n:"PtgAttrIf",f:Kv},4:{n:"PtgAttrChoose",f:Jv},8:{n:"PtgAttrGoto",f:Zv},16:{n:"PtgAttrSum",f:ub},32:{n:"PtgAttrBaxcel",f:Xv},33:{n:"PtgAttrBaxcel",f:Xv},64:{n:"PtgAttrSpace",f:eb},65:{n:"PtgAttrSpaceSemi",f:nb},128:{n:"PtgAttrIfError",f:Qv},255:{}};function $b(t,e,n,r){if(r.biff<8)return _d(t,e);for(var i=t.l+e,o=[],a=0;a!==n.length;++a)switch(n[a][0]){case"PtgArray":n[a][1]=vb(t,0,r),o.push(n[a][1]);break;case"PtgMemArea":n[a][2]=yb(t,n[a][1],r),o.push(n[a][2]);break;case"PtgExp":r&&12==r.biff&&(n[a][1][1]=t.read_shift(4),o.push(n[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[a][0];default:break}return e=i-t.l,0!==e&&o.push(_d(t,e)),o}function t_(t,e,n){var r,i,o=t.l+e,a=[];while(o!=t.l)e=o-t.l,i=t[t.l],r=Jb[i]||Jb[Zb[i]],24!==i&&25!==i||(r=(24===i?Kb:Qb)[t[t.l+1]]),r&&r.f?a.push([r.n,r.f(t,e,n)]):_d(t,e);return a}function e_(t){for(var e=[],n=0;n<t.length;++n){for(var r=t[n],i=[],o=0;o<r.length;++o){var a=r[o];if(a)switch(a[0]){case 2:i.push('"'+a[1].replace(/"/g,'""')+'"');break;default:i.push(a[1])}else i.push("")}e.push(i.join(","))}return e.join(";")}var n_={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function r_(t,e){var n=t.lastIndexOf("!"),r=e.lastIndexOf("!");return-1==n&&-1==r?t+":"+e:n>0&&r>0&&t.slice(0,n).toLowerCase()==e.slice(0,r).toLowerCase()?t+":"+e.slice(r+1):(console.error("Cannot hydrate range",t,e),t+":"+e)}function i_(t,e,n){if(!t)return"SH33TJSERR0";if(n.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var r=t.XTI[e];if(n.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),0==e?"":t.XTI[e-1];if(!r)return"SH33TJSERR1";var i="";if(n.biff>8)switch(t[r[0]][0]){case 357:return i=-1==r[1]?"#REF":t.SheetNames[r[1]],r[1]==r[2]?i:i+":"+t.SheetNames[r[2]];case 358:return null!=n.SID?t.SheetNames[n.SID]:"SH33TJSSAME"+t[r[0]][0];case 355:default:return"SH33TJSSRC"+t[r[0]][0]}switch(t[r[0]][0][0]){case 1025:return i=-1==r[1]?"#REF":t.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?i:i+":"+t.SheetNames[r[2]];case 14849:return t[r[0]].slice(1).map((function(t){return t.Name})).join(";;");default:return t[r[0]][0][3]?(i=-1==r[1]?"#REF":t[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?i:i+":"+t[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function o_(t,e,n){var r=i_(t,e,n);return"#REF"==r?r:Ud(r,n)}function a_(t,e,n,r,i){var o,a,s,l,u=i&&i.biff||8,c={s:{c:0,r:0},e:{c:0,r:0}},h=[],d=0,f=0,p="";if(!t[0]||!t[0][0])return"";for(var g=-1,m="",y=0,v=t[0].length;y<v;++y){var b=t[0][y];switch(b[0]){case"PtgUminus":h.push("-"+h.pop());break;case"PtgUplus":h.push("+"+h.pop());break;case"PtgPercent":h.push(h.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(o=h.pop(),a=h.pop(),g>=0){switch(t[0][g][1][0]){case 0:m=Dc(" ",t[0][g][1][1]);break;case 1:m=Dc("\r",t[0][g][1][1]);break;default:if(m="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][g][1][0])}a+=m,g=-1}h.push(a+n_[b[0]]+o);break;case"PtgIsect":o=h.pop(),a=h.pop(),h.push(a+" "+o);break;case"PtgUnion":o=h.pop(),a=h.pop(),h.push(a+","+o);break;case"PtgRange":o=h.pop(),a=h.pop(),h.push(r_(a,o));break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":s=Ed(b[1][1],c,i),h.push(Md(s,u));break;case"PtgRefN":s=n?Ed(b[1][1],n,i):b[1][1],h.push(Md(s,u));break;case"PtgRef3d":d=b[1][1],s=Ed(b[1][2],c,i),p=o_(r,d,i);h.push(p+"!"+Md(s,u));break;case"PtgFunc":case"PtgFuncVar":var _=b[1][0],x=b[1][1];_||(_=0),_&=127;var w=0==_?[]:h.slice(-_);h.length-=_,"User"===x&&(x=w.shift()),h.push(x+"("+w.join(",")+")");break;case"PtgBool":h.push(b[1]?"TRUE":"FALSE");break;case"PtgInt":h.push(b[1]);break;case"PtgNum":h.push(String(b[1]));break;case"PtgStr":h.push('"'+b[1].replace(/"/g,'""')+'"');break;case"PtgErr":h.push(b[1]);break;case"PtgAreaN":l=Cd(b[1][1],n?{s:n}:c,i),h.push(Td(l,i));break;case"PtgArea":l=Cd(b[1][1],c,i),h.push(Td(l,i));break;case"PtgArea3d":d=b[1][1],l=b[1][2],p=o_(r,d,i),h.push(p+"!"+Td(l,i));break;case"PtgAttrSum":h.push("SUM("+h.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":f=b[1][2];var S=(r.names||[])[f-1]||(r[0]||[])[f],E=S?S.Name:"SH33TJSNAME"+String(f);E&&"_xlfn."==E.slice(0,6)&&!i.xlfn&&(E=E.slice(6)),h.push(E);break;case"PtgNameX":var C,M=b[1][1];if(f=b[1][2],!(i.biff<=5)){var T="";if(14849==((r[M]||[])[0]||[])[0]||(1025==((r[M]||[])[0]||[])[0]?r[M][f]&&r[M][f].itab>0&&(T=r.SheetNames[r[M][f].itab-1]+"!"):T=r.SheetNames[f-1]+"!"),r[M]&&r[M][f])T+=r[M][f].Name;else if(r[0]&&r[0][f])T+=r[0][f].Name;else{var A=(i_(r,M,i)||"").split(";;");A[f-1]?T=A[f-1]:T+="SH33TJSERRX"}h.push(T);break}M<0&&(M=-M),r[M]&&(C=r[M][f]),C||(C={Name:"SH33TJSERRY"}),h.push(C.Name);break;case"PtgParen":var O="(",k=")";if(g>=0){switch(m="",t[0][g][1][0]){case 2:O=Dc(" ",t[0][g][1][1])+O;break;case 3:O=Dc("\r",t[0][g][1][1])+O;break;case 4:k=Dc(" ",t[0][g][1][1])+k;break;case 5:k=Dc("\r",t[0][g][1][1])+k;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][g][1][0])}g=-1}h.push(O+h.pop()+k);break;case"PtgRefErr":h.push("#REF!");break;case"PtgRefErr3d":h.push("#REF!");break;case"PtgExp":s={c:b[1][1],r:b[1][0]};var I={c:n.c,r:n.r};if(r.sharedf[jd(s)]){var P=r.sharedf[jd(s)];h.push(a_(P,c,I,r,i))}else{var L=!1;for(o=0;o!=r.arrayf.length;++o)if(a=r.arrayf[o],!(s.c<a[0].s.c||s.c>a[0].e.c)&&!(s.r<a[0].s.r||s.r>a[0].e.r)){h.push(a_(a[1],c,I,r,i)),L=!0;break}L||h.push(b[1])}break;case"PtgArray":h.push("{"+e_(b[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":g=y;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":h.push("");break;case"PtgAreaErr":h.push("#REF!");break;case"PtgAreaErr3d":h.push("#REF!");break;case"PtgList":h.push("Table"+b[1].idx+"[#"+b[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(b));default:throw new Error("Unrecognized Formula Token: "+String(b))}var N=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(3!=i.biff&&g>=0&&-1==N.indexOf(t[0][y][0])){b=t[0][g];var R=!0;switch(b[1][0]){case 4:R=!1;case 0:m=Dc(" ",b[1][1]);break;case 5:R=!1;case 1:m=Dc("\r",b[1][1]);break;default:if(m="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+b[1][0])}h.push((R?m:"")+h.pop()+(R?"":m)),g=-1}}if(h.length>1&&i.WTF)throw new Error("bad formula stack");return"TRUE"==h[0]||"FALSE"!=h[0]&&h[0]}function s_(t,e,n){var r,i=t.l+e,o=2==n.biff?1:2,a=t.read_shift(o);if(65535==a)return[[],_d(t,e-2)];var s=t_(t,a,n);return e!==a+o&&(r=$b(t,e-a-o,s,n)),t.l=i,[s,r]}function l_(t,e,n){var r,i=t.l+e,o=2==n.biff?1:2,a=t.read_shift(o);if(65535==a)return[[],_d(t,e-2)];var s=t_(t,a,n);return e!==a+o&&(r=$b(t,e-a-o,s,n)),t.l=i,[s,r]}function u_(t,e,n,r){var i,o=t.l+e,a=t_(t,r,n);return o!==t.l&&(i=$b(t,o-t.l,a,n)),[a,i]}function c_(t,e,n){var r,i=t.l+e,o=t.read_shift(2),a=t_(t,o,n);return 65535==o?[[],_d(t,e-2)]:(e!==o+2&&(r=$b(t,i-o-2,a,n)),[a,r])}function h_(t){var e;if(65535!==ld(t,t.l+6))return[uf(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=1===t[t.l+2],t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function d_(t,e,n){var r=t.l+e,i=jp(t,6);2==n.biff&&++t.l;var o=h_(t,8),a=t.read_shift(1);2!=n.biff&&(t.read_shift(1),n.biff>=5&&t.read_shift(4));var s=l_(t,r-t.l,n);return{cell:i,val:o[0],formula:s,shared:a>>3&1,tt:o[1]}}function f_(t,e,n){var r=t.read_shift(4),i=t_(t,r,n),o=t.read_shift(4),a=o>0?$b(t,o,i,n):null;return[i,a]}var p_=f_,g_=f_,m_=f_,y_=f_;var v_={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},b_={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},__={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function x_(t){return"of:"==t.slice(0,3)&&(t=t.slice(3)),61==t.charCodeAt(0)&&(t=t.slice(1),61==t.charCodeAt(0)&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,(function(t,e){return e.replace(/\./g,"")})),t=t.replace(/\$'([^']|'')+'/g,(function(t){return t.slice(1)})),t=t.replace(/\$([^\]\. #$]+)/g,(function(t,e){return e.match(/^([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])?(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})?$/)?t:e})),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function w_(t){t=t.replace(/\$'([^']|'')+'/g,(function(t){return t.slice(1)})),t=t.replace(/\$([^\]\. #$]+)/g,(function(t,e){return e.match(/^([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])?(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})?$/)?t:e}));var e=t.split(":"),n=e[0].split(".")[0];return[n,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}var S_={},E_={};function C_(t,e){if(t){var n=[.7,.7,.75,.75,.3,.3];"xlml"==e&&(n=[1,1,1,1,.5,.5]),null==t.left&&(t.left=n[0]),null==t.right&&(t.right=n[1]),null==t.top&&(t.top=n[2]),null==t.bottom&&(t.bottom=n[3]),null==t.header&&(t.header=n[4]),null==t.footer&&(t.footer=n[5])}}function M_(t,e,n,r,i,o){try{r.cellNF&&(t.z=mu[e])}catch(s){if(r.WTF)throw s}if("z"!==t.t||r.cellStyles){if("d"===t.t&&"string"===typeof t.v&&(t.v=Lc(t.v)),(!r||!1!==r.cellText)&&"z"!==t.t)try{if(null==mu[e]&&mc(hc[e]||"General",e),"e"===t.t)t.w=t.w||Rf[t.v];else if(0===e)if("n"===t.t)(0|t.v)===t.v?t.w=t.v.toString(10):t.w=Ou(t.v);else if("d"===t.t){var a=Ec(t.v);t.w=(0|a)===a?a.toString(10):Ou(a)}else{if(void 0===t.v)return"";t.w=ku(t.v,E_)}else"d"===t.t?t.w=lc(e,Ec(t.v),E_):t.w=lc(e,t.v,E_)}catch(s){if(r.WTF)throw s}if(r.cellStyles&&null!=n)try{t.s=o.Fills[n],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=ay(i.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),r.WTF&&(t.s.fgColor.raw_rgb=i.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=ay(i.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),r.WTF&&(t.s.bgColor.raw_rgb=i.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(s){if(r.WTF&&o.Fills)throw s}}}function T_(t,e){var n=Gd(e);n.s.r<=n.e.r&&n.s.c<=n.e.c&&n.s.r>=0&&n.s.c>=0&&(t["!ref"]=zd(n))}var A_=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,O_=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,k_=/<(?:\w:)?hyperlink [^>]*>/gm,I_=/"(\w*:\w*)"/,P_=/<(?:\w:)?col\b[^>]*[\/]?>/g,L_=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,N_=/<(?:\w:)?pageMargins[^>]*\/>/g,R_=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,D_=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,F_=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function j_(t,e,n,r,i,o,a){if(!t)return t;r||(r={"!id":{}}),null!=Ul&&null==e.dense&&(e.dense=Ul);var s={};e.dense&&(s["!data"]=[]);var l={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",c="",h=t.match(O_);h?(u=t.slice(0,h.index),c=t.slice(h.index+h[0].length)):u=c=t;var d=u.match(R_);d?B_(d[0],s,i,n):(d=u.match(D_))&&z_(d[0],d[1]||"",s,i,n,a,o);var f=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(f>0){var p=u.slice(f,f+50).match(I_);!p||e&&e.nodim||T_(s,p[1])}var g=u.match(F_);g&&g[1]&&W_(g[1],i);var m=[];if(e.cellStyles){var y=u.match(P_);y&&q_(m,y)}h&&Y_(h[1],s,e,l,o,a);var v=c.match(L_);v&&(s["!autofilter"]=V_(v[0]));var b=[],_=c.match(A_);if(_)for(f=0;f!=_.length;++f)b[f]=Gd(_[f].slice(_[f].indexOf('"')+1));var x=c.match(k_);x&&U_(s,x,r);var w=c.match(N_);if(w&&(s["!margins"]=G_(lh(w[0]))),e&&e.nodim&&(l.s.c=l.s.r=0),!s["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(s["!ref"]=zd(l)),e.sheetRows>0&&s["!ref"]){var S=Gd(s["!ref"]);e.sheetRows<=+S.e.r&&(S.e.r=e.sheetRows-1,S.e.r>l.e.r&&(S.e.r=l.e.r),S.e.r<S.s.r&&(S.s.r=S.e.r),S.e.c>l.e.c&&(S.e.c=l.e.c),S.e.c<S.s.c&&(S.s.c=S.e.c),s["!fullref"]=s["!ref"],s["!ref"]=zd(S))}return m.length>0&&(s["!cols"]=m),b.length>0&&(s["!merges"]=b),s}function B_(t,e,n,r){var i=lh(t);n.Sheets[r]||(n.Sheets[r]={}),i.codeName&&(n.Sheets[r].CodeName=dh(wh(i.codeName)))}function z_(t,e,n,r,i){B_(t.slice(0,t.indexOf(">")),n,r,i)}function U_(t,e,n){for(var r=null!=t["!data"],i=0;i!=e.length;++i){var o=lh(wh(e[i]),!0);if(!o.ref)return;var a=((n||{})["!id"]||[])[o.id];a?(o.Target=a.Target,o.location&&(o.Target+="#"+dh(o.location))):(o.Target="#"+dh(o.location),a={Target:o.Target,TargetMode:"Internal"}),o.Rel=a,o.tooltip&&(o.Tooltip=o.tooltip,delete o.tooltip);for(var s=Gd(o.ref),l=s.s.r;l<=s.e.r;++l)for(var u=s.s.c;u<=s.e.c;++u){var c=Ld(u)+Od(l);r?(t["!data"][l]||(t["!data"][l]=[]),t["!data"][l][u]||(t["!data"][l][u]={t:"z",v:void 0}),t["!data"][l][u].l=o):(t[c]||(t[c]={t:"z",v:void 0}),t[c].l=o)}}}function G_(t){var e={};return["left","right","top","bottom","header","footer"].forEach((function(n){t[n]&&(e[n]=parseFloat(t[n]))})),e}function q_(t,e){for(var n=!1,r=0;r!=e.length;++r){var i=lh(e[r],!0);i.hidden&&(i.hidden=yh(i.hidden));var o=parseInt(i.min,10)-1,a=parseInt(i.max,10)-1;i.outlineLevel&&(i.level=+i.outlineLevel||0),delete i.min,delete i.max,i.width=+i.width,!n&&i.width&&(n=!0,gy(i.width)),my(i);while(o<=a)t[o++]=Rc(i)}}function V_(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}var H_=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/g;function W_(t,e){e.Views||(e.Views=[{}]),(t.match(H_)||[]).forEach((function(t,n){var r=lh(t);e.Views[n]||(e.Views[n]={}),+r.zoomScale&&(e.Views[n].zoom=+r.zoomScale),r.rightToLeft&&yh(r.rightToLeft)&&(e.Views[n].RTL=!0)}))}var Y_=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,n=/r=["']([^"']*)["']/,r=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,i=/ref=["']([^"']*)["']/,o=Eh("v"),a=Eh("f");return function(s,l,u,c,h,d){for(var f,p,g,m,y,v=0,b="",_=[],x=[],w=0,S=0,E=0,C="",M=0,T=0,A=0,O=0,k=Array.isArray(d.CellXf),I=[],P=[],L=null!=l["!data"],N=[],R={},D=!1,F=!!u.sheetStubs,j=s.split(e),B=0,z=j.length;B!=z;++B){b=j[B].trim();var U=b.length;if(0!==U){var G=0;t:for(v=0;v<U;++v)switch(b[v]){case">":if("/"!=b[v-1]){++v;break t}if(u&&u.cellStyles){if(p=lh(b.slice(G,v),!0),M=null!=p.r?parseInt(p.r,10):M+1,T=-1,u.sheetRows&&u.sheetRows<M)continue;R={},D=!1,p.ht&&(D=!0,R.hpt=parseFloat(p.ht),R.hpx=_y(R.hpt)),p.hidden&&yh(p.hidden)&&(D=!0,R.hidden=!0),null!=p.outlineLevel&&(D=!0,R.level=+p.outlineLevel),D&&(N[M-1]=R)}break;case"<":G=v;break}if(G>=v)break;if(p=lh(b.slice(G,v),!0),M=null!=p.r?parseInt(p.r,10):M+1,T=-1,!(u.sheetRows&&u.sheetRows<M)){u.nodim||(c.s.r>M-1&&(c.s.r=M-1),c.e.r<M-1&&(c.e.r=M-1)),u&&u.cellStyles&&(R={},D=!1,p.ht&&(D=!0,R.hpt=parseFloat(p.ht),R.hpx=_y(R.hpt)),p.hidden&&yh(p.hidden)&&(D=!0,R.hidden=!0),null!=p.outlineLevel&&(D=!0,R.level=+p.outlineLevel),D&&(N[M-1]=R)),_=b.slice(v).split(t);for(var q=0;q!=_.length;++q)if("<"!=_[q].trim().charAt(0))break;for(_=_.slice(q),v=0;v!=_.length;++v)if(b=_[v].trim(),0!==b.length){if(x=b.match(n),w=v,S=0,E=0,b="<c "+("<"==b.slice(0,1)?">":"")+b,null!=x&&2===x.length){for(w=0,C=x[1],S=0;S!=C.length;++S){if((E=C.charCodeAt(S)-64)<1||E>26)break;w=26*w+E}--w,T=w}else++T;for(S=0;S!=b.length;++S)if(62===b.charCodeAt(S))break;if(++S,p=lh(b.slice(0,S),!0),p.r||(p.r=jd({r:M-1,c:T})),C=b.slice(S),f={t:""},null!=(x=C.match(o))&&""!==x[1]&&(f.v=dh(x[1])),u.cellFormula){if(null!=(x=C.match(a))&&""!==x[1]){if(f.f=dh(wh(x[1]),!0),u.xlfn||(f.f=Iv(f.f)),x[0].indexOf('t="array"')>-1)f.F=(C.match(i)||[])[1],f.F.indexOf(":")>-1&&I.push([Gd(f.F),f.F]);else if(x[0].indexOf('t="shared"')>-1){m=lh(x[0]);var V=dh(wh(x[1]));u.xlfn||(V=Iv(V)),P[parseInt(m.si,10)]=[m,V,p.r]}}else(x=C.match(/<f[^>]*\/>/))&&(m=lh(x[0]),P[m.si]&&(f.f=Ov(P[m.si][1],P[m.si][2],p.r)));var H=Fd(p.r);for(S=0;S<I.length;++S)H.r>=I[S][0].s.r&&H.r<=I[S][0].e.r&&H.c>=I[S][0].s.c&&H.c<=I[S][0].e.c&&(f.F=I[S][1])}if(null==p.t&&void 0===f.v)if(f.f||f.F)f.v=0,f.t="n";else{if(!F)continue;f.t="z"}else f.t=p.t||"n";switch(c.s.c>T&&(c.s.c=T),c.e.c<T&&(c.e.c=T),f.t){case"n":if(""==f.v||null==f.v){if(!F)continue;f.t="z"}else f.v=parseFloat(f.v);break;case"s":if("undefined"==typeof f.v){if(!F)continue;f.t="z"}else g=S_[parseInt(f.v,10)],f.v=g.t,f.r=g.r,u.cellHTML&&(f.h=g.h);break;case"str":f.t="s",f.v=null!=f.v?dh(wh(f.v),!0):"",u.cellHTML&&(f.h=gh(f.v));break;case"inlineStr":x=C.match(r),f.t="s",null!=x&&(g=Sm(x[1]))?(f.v=g.t,u.cellHTML&&(f.h=g.h)):f.v="";break;case"b":f.v=yh(f.v);break;case"d":u.cellDates?f.v=Lc(f.v,1):(f.v=Ec(Lc(f.v,1)),f.t="n");break;case"e":u&&!1===u.cellText||(f.w=f.v),f.v=Df[f.v];break}if(A=O=0,y=null,k&&void 0!==p.s&&(y=d.CellXf[p.s],null!=y&&(null!=y.numFmtId&&(A=y.numFmtId),u.cellStyles&&null!=y.fillId&&(O=y.fillId))),M_(f,A,O,u,h,d),u.cellDates&&k&&"n"==f.t&&rc(mu[A])&&(f.t="d",f.v=Ac(f.v)),p.cm&&u.xlmeta){var W=(u.xlmeta.Cell||[])[+p.cm-1];W&&"XLDAPR"==W.type&&(f.D=!0)}var Y;u.nodim&&(Y=Fd(p.r),c.s.r>Y.r&&(c.s.r=Y.r),c.e.r<Y.r&&(c.e.r=Y.r)),L?(Y=Fd(p.r),l["!data"][Y.r]||(l["!data"][Y.r]=[]),l["!data"][Y.r][Y.c]=f):l[p.r]=f}}}}N.length>0&&(l["!rows"]=N)}}();function X_(t,e){var n={},r=t.l+e;n.r=t.read_shift(4),t.l+=4;var i=t.read_shift(2);t.l+=1;var o=t.read_shift(1);return t.l=r,7&o&&(n.level=7&o),16&o&&(n.hidden=!0),32&o&&(n.hpt=i/20),n}var J_=lf;function Z_(){}function K_(t,e){var n={},r=t[t.l];return++t.l,n.above=!(64&r),n.left=!(128&r),t.l+=18,n.name=ef(t,e-19),n}function Q_(t){var e=$d(t);return[e]}function $_(t){var e=tf(t);return[e]}function tx(t){var e=$d(t),n=t.read_shift(1);return[e,n,"b"]}function ex(t){var e=tf(t),n=t.read_shift(1);return[e,n,"b"]}function nx(t){var e=$d(t),n=t.read_shift(1);return[e,n,"e"]}function rx(t){var e=tf(t),n=t.read_shift(1);return[e,n,"e"]}function ix(t){var e=$d(t),n=t.read_shift(4);return[e,n,"s"]}function ox(t){var e=tf(t),n=t.read_shift(4);return[e,n,"s"]}function ax(t){var e=$d(t),n=uf(t);return[e,n,"n"]}function sx(t){var e=tf(t),n=uf(t);return[e,n,"n"]}function lx(t){var e=$d(t),n=af(t);return[e,n,"n"]}function ux(t){var e=tf(t),n=af(t);return[e,n,"n"]}function cx(t){var e=$d(t),n=Kd(t);return[e,n,"is"]}function hx(t){var e=$d(t),n=Jd(t);return[e,n,"str"]}function dx(t){var e=tf(t),n=Jd(t);return[e,n,"str"]}function fx(t,e,n){var r=t.l+e,i=$d(t);i.r=n["!row"];var o=t.read_shift(1),a=[i,o,"b"];if(n.cellFormula){t.l+=2;var s=g_(t,r-t.l,n);a[3]=a_(s,null,i,n.supbooks,n)}else t.l=r;return a}function px(t,e,n){var r=t.l+e,i=$d(t);i.r=n["!row"];var o=t.read_shift(1),a=[i,o,"e"];if(n.cellFormula){t.l+=2;var s=g_(t,r-t.l,n);a[3]=a_(s,null,i,n.supbooks,n)}else t.l=r;return a}function gx(t,e,n){var r=t.l+e,i=$d(t);i.r=n["!row"];var o=uf(t),a=[i,o,"n"];if(n.cellFormula){t.l+=2;var s=g_(t,r-t.l,n);a[3]=a_(s,null,i,n.supbooks,n)}else t.l=r;return a}function mx(t,e,n){var r=t.l+e,i=$d(t);i.r=n["!row"];var o=Jd(t),a=[i,o,"str"];if(n.cellFormula){t.l+=2;var s=g_(t,r-t.l,n);a[3]=a_(s,null,i,n.supbooks,n)}else t.l=r;return a}var yx=lf;function vx(t,e){var n=t.l+e,r=lf(t,16),i=nf(t),o=Jd(t),a=Jd(t),s=Jd(t);t.l=n;var l={rfx:r,relId:i,loc:o,display:s};return a&&(l.Tooltip=a),l}function bx(){}function _x(t,e,n){var r=t.l+e,i=sf(t,16),o=t.read_shift(1),a=[i];if(a[2]=o,n.cellFormula){var s=p_(t,r-t.l,n);a[1]=s}else t.l=r;return a}function xx(t,e,n){var r=t.l+e,i=lf(t,16),o=[i];if(n.cellFormula){var a=y_(t,r-t.l,n);o[1]=a,t.l=r}else t.l=r;return o}var wx=["left","right","top","bottom","header","footer"];function Sx(t){var e={};return wx.forEach((function(n){e[n]=uf(t,8)})),e}function Ex(t){var e=t.read_shift(2);return t.l+=28,{RTL:32&e}}function Cx(){}function Mx(){}function Tx(t,e,n,r,i,o,a){if(!t)return t;var s=e||{};r||(r={"!id":{}}),null!=Ul&&null==s.dense&&(s.dense=Ul);var l,u={};s.dense&&(u["!data"]=[]);var c,h,d,f,p,g,m,y,v,b={s:{r:2e6,c:2e6},e:{r:0,c:0}},_=[],x=!1,w=!1,S=[];s.biff=12,s["!row"]=0;var E=0,C=!1,M=[],T={},A=s.supbooks||i.supbooks||[[]];if(A.sharedf=T,A.arrayf=M,A.SheetNames=i.SheetNames||i.Sheets.map((function(t){return t.name})),!s.supbooks&&(s.supbooks=A,i.Names))for(var O=0;O<i.Names.length;++O)A[0][O+1]=i.Names[O];var k,I,P=[],L=[],N=!1;if(Ow[16]={n:"BrtShortReal",f:sx},wd(t,(function(t,e,O){if(!w)switch(O){case 148:l=t;break;case 0:c=t,s.sheetRows&&s.sheetRows<=c.r&&(w=!0),y=Od(f=c.r),s["!row"]=c.r,(t.hidden||t.hpt||null!=t.level)&&(t.hpt&&(t.hpx=_y(t.hpt)),L[t.r]=t);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(h={t:t[2]},t[2]){case"n":h.v=t[1];break;case"s":m=S_[t[1]],h.v=m.t,h.r=m.r;break;case"b":h.v=!!t[1];break;case"e":h.v=t[1],!1!==s.cellText&&(h.w=Rf[h.v]);break;case"str":h.t="s",h.v=t[1];break;case"is":h.t="s",h.v=t[1].t;break}if((d=a.CellXf[t[0].iStyleRef])&&M_(h,d.numFmtId,null,s,o,a),p=-1==t[0].c?p+1:t[0].c,s.dense?(u["!data"][f]||(u["!data"][f]=[]),u["!data"][f][p]=h):u[Ld(p)+y]=h,s.cellFormula){for(C=!1,E=0;E<M.length;++E){var R=M[E];c.r>=R[0].s.r&&c.r<=R[0].e.r&&p>=R[0].s.c&&p<=R[0].e.c&&(h.F=zd(R[0]),C=!0)}!C&&t.length>3&&(h.f=t[3])}if(b.s.r>c.r&&(b.s.r=c.r),b.s.c>p&&(b.s.c=p),b.e.r<c.r&&(b.e.r=c.r),b.e.c<p&&(b.e.c=p),s.cellDates&&d&&"n"==h.t&&rc(mu[d.numFmtId])){var D=_u(h.v);D&&(h.t="d",h.v=new Date(D.y,D.m-1,D.d,D.H,D.M,D.S,D.u))}k&&("XLDAPR"==k.type&&(h.D=!0),k=void 0),I&&(I=void 0);break;case 1:case 12:if(!s.sheetStubs||x)break;h={t:"z",v:void 0},p=-1==t[0].c?p+1:t[0].c,s.dense?(u["!data"][f]||(u["!data"][f]=[]),u["!data"][f][p]=h):u[Ld(p)+y]=h,b.s.r>c.r&&(b.s.r=c.r),b.s.c>p&&(b.s.c=p),b.e.r<c.r&&(b.e.r=c.r),b.e.c<p&&(b.e.c=p),k&&("XLDAPR"==k.type&&(h.D=!0),k=void 0),I&&(I=void 0);break;case 176:S.push(t);break;case 49:k=((s.xlmeta||{}).Cell||[])[t-1];break;case 494:var F=r["!id"][t.relId];for(F?(t.Target=F.Target,t.loc&&(t.Target+="#"+t.loc),t.Rel=F):""==t.relId&&(t.Target="#"+t.loc),f=t.rfx.s.r;f<=t.rfx.e.r;++f)for(p=t.rfx.s.c;p<=t.rfx.e.c;++p)s.dense?(u["!data"][f]||(u["!data"][f]=[]),u["!data"][f][p]||(u["!data"][f][p]={t:"z",v:void 0}),u["!data"][f][p].l=t):(g=Ld(p)+Od(f),u[g]||(u[g]={t:"z",v:void 0}),u[g].l=t);break;case 426:if(!s.cellFormula)break;M.push(t),v=s.dense?u["!data"][f][p]:u[Ld(p)+y],v.f=a_(t[1],b,{r:c.r,c:p},A,s),v.F=zd(t[0]);break;case 427:if(!s.cellFormula)break;T[jd(t[0].s)]=t[1],v=s.dense?u["!data"][f][p]:u[Ld(p)+y],v.f=a_(t[1],b,{r:c.r,c:p},A,s);break;case 60:if(!s.cellStyles)break;while(t.e>=t.s)P[t.e--]={width:t.w/256,hidden:!!(1&t.flags),level:t.level},N||(N=!0,gy(t.w/256)),my(P[t.e+1]);break;case 161:u["!autofilter"]={ref:zd(t)};break;case 476:u["!margins"]=t;break;case 147:i.Sheets[n]||(i.Sheets[n]={}),t.name&&(i.Sheets[n].CodeName=t.name),(t.above||t.left)&&(u["!outline"]={above:t.above,left:t.left});break;case 137:i.Views||(i.Views=[{}]),i.Views[0]||(i.Views[0]={}),t.RTL&&(i.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:x=!0;break;case 36:x=!1;break;case 37:_.push(O),x=!0;break;case 38:_.pop(),x=!1;break;default:if(e.T);else if(!x||s.WTF)throw new Error("Unexpected record 0x"+O.toString(16))}}),s),delete s.supbooks,delete s["!row"],!u["!ref"]&&(b.s.r<2e6||l&&(l.e.r>0||l.e.c>0||l.s.r>0||l.s.c>0))&&(u["!ref"]=zd(l||b)),s.sheetRows&&u["!ref"]){var R=Gd(u["!ref"]);s.sheetRows<=+R.e.r&&(R.e.r=s.sheetRows-1,R.e.r>b.e.r&&(R.e.r=b.e.r),R.e.r<R.s.r&&(R.s.r=R.e.r),R.e.c>b.e.c&&(R.e.c=b.e.c),R.e.c<R.s.c&&(R.s.c=R.e.c),u["!fullref"]=u["!ref"],u["!ref"]=zd(R))}return S.length>0&&(u["!merges"]=S),P.length>0&&(u["!cols"]=P),L.length>0&&(u["!rows"]=L),u}function Ax(t){var e,n=[],r=t.match(/^<c:numCache>/);(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/gm)||[]).forEach((function(t){var e=t.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);e&&(n[+e[1]]=r?+e[2]:e[2])}));var i=dh((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/gm)||[]).forEach((function(t){e=t.replace(/<.*?>/g,"")})),[n,i,e]}function Ox(t,e,n,r,i,o){var a=o||{"!type":"chart"};if(!t)return o;var s=0,l=0,u="A",c={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach((function(t){var e=Ax(t);c.s.r=c.s.c=0,c.e.c=s,u=Ld(s),e[0].forEach((function(t,n){a["!data"]?(a["!data"][n]||(a["!data"][n]=[]),a["!data"][n][s]={t:"n",v:t,z:e[1]}):a[u+Od(n)]={t:"n",v:t,z:e[1]},l=n})),c.e.r<l&&(c.e.r=l),++s})),s>0&&(a["!ref"]=zd(c)),a}function kx(t,e,n,r,i){if(!t)return t;r||(r={"!id":{}});var o,a={"!type":"chart","!drawel":null,"!rel":""},s=t.match(R_);return s&&B_(s[0],a,i,n),(o=t.match(/drawing r:id="(.*?)"/))&&(a["!rel"]=o[1]),r["!id"][a["!rel"]]&&(a["!drawel"]=r["!id"][a["!rel"]]),a}function Ix(t,e){t.l+=10;var n=Jd(t,e-10);return{name:n}}function Px(t,e,n,r,i){if(!t)return t;r||(r={"!id":{}});var o={"!type":"chart","!drawel":null,"!rel":""},a=[],s=!1;return wd(t,(function(t,r,l){switch(l){case 550:o["!rel"]=t;break;case 651:i.Sheets[n]||(i.Sheets[n]={}),t.name&&(i.Sheets[n].CodeName=t.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:a.push(l);break;case 38:a.pop();break;default:if(r.T>0)a.push(l);else if(r.T<0)a.pop();else if(!s||e.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),e),r["!id"][o["!rel"]]&&(o["!drawel"]=r["!id"][o["!rel"]]),o}var Lx=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Nx=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],Rx=[],Dx=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function Fx(t,e){for(var n=0;n!=t.length;++n)for(var r=t[n],i=0;i!=e.length;++i){var o=e[i];if(null==r[o[0]])r[o[0]]=o[1];else switch(o[2]){case"bool":"string"==typeof r[o[0]]&&(r[o[0]]=yh(r[o[0]]));break;case"int":"string"==typeof r[o[0]]&&(r[o[0]]=parseInt(r[o[0]],10));break}}}function jx(t,e){for(var n=0;n!=e.length;++n){var r=e[n];if(null==t[r[0]])t[r[0]]=r[1];else switch(r[2]){case"bool":"string"==typeof t[r[0]]&&(t[r[0]]=yh(t[r[0]]));break;case"int":"string"==typeof t[r[0]]&&(t[r[0]]=parseInt(t[r[0]],10));break}}}function Bx(t){jx(t.WBProps,Lx),jx(t.CalcPr,Dx),Fx(t.WBView,Nx),Fx(t.Sheets,Rx),E_.date1904=yh(t.WBProps.date1904)}var zx=":][*?/\\".split("");function Ux(t,e){try{if(""==t)throw new Error("Sheet name cannot be blank");if(t.length>31)throw new Error("Sheet name cannot exceed 31 chars");if(39==t.charCodeAt(0)||39==t.charCodeAt(t.length-1))throw new Error("Sheet name cannot start or end with apostrophe (')");if("history"==t.toLowerCase())throw new Error("Sheet name cannot be 'History'");zx.forEach((function(e){if(-1!=t.indexOf(e))throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}))}catch(n){if(e)return!1;throw n}return!0}var Gx=/<\w+:workbook/;function qx(t,e){if(!t)throw new Error("Could not find file");var n={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},r=!1,i="xmlns",o={},a=0;if(t.replace(oh,(function(s,l){var u=lh(s);switch(uh(u[0])){case"<?xml":break;case"<workbook":s.match(Gx)&&(i="xmlns"+s.match(/<(\w+):/)[1]),n.xmlns=u[i];break;case"</workbook>":break;case"<fileVersion":delete u[0],n.AppVersion=u;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":Lx.forEach((function(t){if(null!=u[t[0]])switch(t[2]){case"bool":n.WBProps[t[0]]=yh(u[t[0]]);break;case"int":n.WBProps[t[0]]=parseInt(u[t[0]],10);break;default:n.WBProps[t[0]]=u[t[0]]}})),u.codeName&&(n.WBProps.CodeName=wh(u.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete u[0],n.WBView.push(u);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(u.state){case"hidden":u.Hidden=1;break;case"veryHidden":u.Hidden=2;break;default:u.Hidden=0}delete u.state,u.name=dh(wh(u.name)),delete u[0],n.Sheets.push(u);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":r=!0;break;case"</definedNames>":r=!1;break;case"<definedName":o={},o.Name=wh(u.name),u.comment&&(o.Comment=u.comment),u.localSheetId&&(o.Sheet=+u.localSheetId),yh(u.hidden||"0")&&(o.Hidden=!0),a=l+s.length;break;case"</definedName>":o.Ref=dh(wh(t.slice(a,l))),n.Names.push(o);break;case"<definedName/>":break;case"<calcPr":delete u[0],n.CalcPr=u;break;case"<calcPr/>":delete u[0],n.CalcPr=u;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":r=!0;break;case"</AlternateContent>":r=!1;break;case"<revisionPtr":break;default:if(!r&&e.WTF)throw new Error("unrecognized "+u[0]+" in workbook")}return s})),-1===Dh.indexOf(n.xmlns))throw new Error("Unknown Namespace: "+n.xmlns);return Bx(n),n}function Vx(t,e){var n={};return n.Hidden=t.read_shift(4),n.iTabID=t.read_shift(4),n.strRelID=of(t,e-8),n.name=Jd(t),n}function Hx(t,e){var n={},r=t.read_shift(4);n.defaultThemeVersion=t.read_shift(4);var i=e>8?Jd(t):"";return i.length>0&&(n.CodeName=i),n.autoCompressPictures=!!(65536&r),n.backupFile=!!(64&r),n.checkCompatibility=!!(4096&r),n.date1904=!!(1&r),n.filterPrivacy=!!(8&r),n.hidePivotFieldList=!!(1024&r),n.promptedSolutions=!!(16&r),n.publishItems=!!(2048&r),n.refreshAllConnections=!!(262144&r),n.saveExternalLinkValues=!!(128&r),n.showBorderUnselectedTables=!!(4&r),n.showInkAnnotation=!!(32&r),n.showObjects=["all","placeholders","none"][r>>13&3],n.showPivotChartFilter=!!(32768&r),n.updateLinks=["userSet","never","always"][r>>8&3],n}function Wx(t,e){var n={};return t.read_shift(4),n.ArchID=t.read_shift(4),t.l+=e-8,n}function Yx(t,e,n){var r=t.l+e,i=t.read_shift(4);t.l+=1;var o=t.read_shift(4),a=rf(t),s=m_(t,0,n),l=nf(t);32&i&&(a="_xlnm."+a),t.l=r;var u={Name:a,Ptg:s,Flags:i};return o<268435455&&(u.Sheet=o),l&&(u.Comment=l),u}function Xx(t,e){var n={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},r=[],i=!1;e||(e={}),e.biff=12;var o=[],a=[[]];return a.SheetNames=[],a.XTI=[],Ow[16]={n:"BrtFRTArchID$",f:Wx},wd(t,(function(t,s,l){switch(l){case 156:a.SheetNames.push(t.name),n.Sheets.push(t);break;case 153:n.WBProps=t;break;case 39:null!=t.Sheet&&(e.SID=t.Sheet),t.Ref=a_(t.Ptg,null,null,a,e),delete e.SID,delete t.Ptg,o.push(t);break;case 1036:break;case 357:case 358:case 355:case 667:a[0].length?a.push([l,t]):a[0]=[l,t],a[a.length-1].XTI=[];break;case 362:0===a.length&&(a[0]=[],a[0].XTI=[]),a[a.length-1].XTI=a[a.length-1].XTI.concat(t),a.XTI=a.XTI.concat(t);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:r.push(l),i=!0;break;case 36:r.pop(),i=!1;break;case 37:r.push(l),i=!0;break;case 38:r.pop(),i=!1;break;case 16:break;default:if(s.T);else if(!i||e.WTF&&37!=r[r.length-1]&&35!=r[r.length-1])throw new Error("Unexpected record 0x"+l.toString(16))}}),e),Bx(n),n.Names=o,n.supbooks=a,n}function Jx(t,e,n){return".bin"===e.slice(-4)?Xx(t,n):qx(t,n)}function Zx(t,e,n,r,i,o,a,s){return".bin"===e.slice(-4)?Tx(t,r,n,i,o,a,s):j_(t,r,n,i,o,a,s)}function Kx(t,e,n,r,i,o,a,s){return".bin"===e.slice(-4)?Px(t,r,n,i,o,a,s):kx(t,r,n,i,o,a,s)}function Qx(t,e,n,r,i,o,a,s){return".bin"===e.slice(-4)?Sv(t,r,n,i,o,a,s):Ev(t,r,n,i,o,a,s)}function $x(t,e,n,r,i,o,a,s){return".bin"===e.slice(-4)?xv(t,r,n,i,o,a,s):wv(t,r,n,i,o,a,s)}function tw(t,e,n,r){return".bin"===e.slice(-4)?Ry(t,n,r):Oy(t,n,r)}function ew(t,e,n){return".bin"===e.slice(-4)?Om(t,n):Tm(t,n)}function nw(t,e,n){return".bin"===e.slice(-4)?vv(t,n):fv(t,n)}function rw(t,e,n){return".bin"===e.slice(-4)?lv(t,e,n):av(t,e,n)}function iw(t,e,n,r){return".bin"===n.slice(-4)?cv(t,e,n,r):uv(t,e,n,r)}function ow(t,e,n){return".bin"===e.slice(-4)?iv(t,e,n):ov(t,e,n)}var aw,sw=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,lw=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function uw(t,e){var n=t.split(/\s+/),r=[];if(e||(r[0]=n[0]),1===n.length)return r;var i,o,a,s,l=t.match(sw);if(l)for(s=0;s!=l.length;++s)i=l[s].match(lw),-1===(o=i[1].indexOf(":"))?r[i[1]]=i[2].slice(1,i[2].length-1):(a="xmlns:"===i[1].slice(0,6)?"xmlns"+i[1].slice(6):i[1].slice(o+1),r[a]=i[2].slice(1,i[2].length-1));return r}function cw(t){var e=t.split(/\s+/),n={};if(1===e.length)return n;var r,i,o,a,s=t.match(sw);if(s)for(a=0;a!=s.length;++a)r=s[a].match(lw),-1===(i=r[1].indexOf(":"))?n[r[1]]=r[2].slice(1,r[2].length-1):(o="xmlns:"===r[1].slice(0,6)?"xmlns"+r[1].slice(6):r[1].slice(i+1),n[o]=r[2].slice(1,r[2].length-1));return n}function hw(t,e){var n=aw[t]||dh(t);return"General"===n?ku(e):lc(n,e)}function dw(t,e,n,r){var i=r;switch((n[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":i=yh(r);break;case"i2":case"int":i=parseInt(r,10);break;case"r4":case"float":i=parseFloat(r);break;case"date":case"dateTime.tz":i=Lc(r);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+n[0])}t[dh(e)]=i}function fw(t,e,n){if("z"!==t.t){if(!n||!1!==n.cellText)try{"e"===t.t?t.w=t.w||Rf[t.v]:"General"===e?"n"===t.t?(0|t.v)===t.v?t.w=t.v.toString(10):t.w=Ou(t.v):t.w=ku(t.v):t.w=hw(e||"General",t.v)}catch(o){if(n.WTF)throw o}try{var r=aw[e]||e||"General";if(n.cellNF&&(t.z=r),n.cellDates&&"n"==t.t&&rc(r)){var i=_u(t.v);i&&(t.t="d",t.v=new Date(i.y,i.m-1,i.d,i.H,i.M,i.S,i.u))}}catch(o){if(n.WTF)throw o}}}function pw(t,e,n){if(n.cellStyles&&e.Interior){var r=e.Interior;r.Pattern&&(r.patternType=xy[r.Pattern]||r.Pattern)}t[e.ID]=e}function gw(t,e,n,r,i,o,a,s,l,u){var c="General",h=r.StyleID,d={};u=u||{};var f=[],p=0;void 0===h&&s&&(h=s.StyleID),void 0===h&&a&&(h=a.StyleID);while(void 0!==o[h]){if(o[h].nf&&(c=o[h].nf),o[h].Interior&&f.push(o[h].Interior),!o[h].Parent)break;h=o[h].Parent}switch(n.Type){case"Boolean":r.t="b",r.v=yh(t);break;case"String":r.t="s",r.r=mh(dh(t)),r.v=t.indexOf("<")>-1?dh(e||t).replace(/<.*?>/g,""):r.r;break;case"DateTime":"Z"!=t.slice(-1)&&(t+="Z"),r.v=(Lc(t)-new Date(Date.UTC(1899,11,30)))/864e5,r.v!==r.v?r.v=dh(t):r.v<60&&(r.v=r.v-1),c&&"General"!=c||(c="yyyy-mm-dd");case"Number":void 0===r.v&&(r.v=+t),r.t||(r.t="n");break;case"Error":r.t="e",r.v=Df[t],!1!==u.cellText&&(r.w=t);break;default:""==t&&""==e?r.t="z":(r.t="s",r.v=mh(e||t));break}if(fw(r,c,u),!1!==u.cellFormula)if(r.Formula){var g=dh(r.Formula);61==g.charCodeAt(0)&&(g=g.slice(1)),r.f=Cv(g,i),delete r.Formula,"RC"==r.ArrayRange?r.F=Cv("RC:RC",i):r.ArrayRange&&(r.F=Cv(r.ArrayRange,i),l.push([Gd(r.F),r.F]))}else for(p=0;p<l.length;++p)i.r>=l[p][0].s.r&&i.r<=l[p][0].e.r&&i.c>=l[p][0].s.c&&i.c<=l[p][0].e.c&&(r.F=l[p][1]);u.cellStyles&&(f.forEach((function(t){!d.patternType&&t.patternType&&(d.patternType=t.patternType)})),r.s=d),void 0!==r.StyleID&&(r.ixfe=r.StyleID)}function mw(t){return Ff.indexOf("_xlnm."+t)>-1?"_xlnm."+t:t}function yw(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),t.v=t.w=t.ixfe=void 0}function vw(t,e){var n=e||{};cc();var r=jl(Lh(t));"binary"!=n.type&&"array"!=n.type&&"base64"!=n.type||(r="undefined"!==typeof El?El.utils.decode(65001,Nl(r)):wh(r));var i,o=r.slice(0,1024).toLowerCase(),a=!1;if(o=o.replace(/".*?"/g,""),(1023&o.indexOf(">"))>Math.min(1023&o.indexOf(","),1023&o.indexOf(";"))){var s=Rc(n);return s.type="string",pm.to_workbook(r,s)}if(-1==o.indexOf("<?xml")&&["html","table","head","meta","script","style","div"].forEach((function(t){o.indexOf("<"+t)>=0&&(a=!0)})),a)return Dw(r,n);aw={"General Number":"General","General Date":mu[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":mu[15],"Short Date":mu[14],"Long Time":mu[19],"Medium Time":mu[18],"Short Time":mu[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:mu[2],Standard:mu[4],Percent:mu[10],Scientific:mu[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,u=[];null!=Ul&&null==n.dense&&(n.dense=Ul);var c={},h=[],d={},f="";n.dense&&(d["!data"]=[]);var p,g={},m={},y=uw('<Data ss:Type="String">'),v=0,b=0,_=0,x={s:{r:2e6,c:2e6},e:{r:0,c:0}},w={},S={},E="",C=0,M=[],T={},A={},O=0,k=[],I=[],P={},L=[],N=!1,R=[],D=[],F={},j=0,B=0,z={Sheets:[],WBProps:{date1904:!1}},U={};Nh.lastIndex=0,r=r.replace(/<!--([\s\S]*?)-->/gm,"");var G="";while(i=Nh.exec(r))switch(i[3]=(G=i[3]).toLowerCase()){case"data":if("data"==G){if("/"===i[1]){if((l=u.pop())[0]!==i[3])throw new Error("Bad state: "+l.join("|"))}else"/"!==i[0].charAt(i[0].length-2)&&u.push([i[3],!0]);break}if(u[u.length-1][1])break;"/"===i[1]?gw(r.slice(v,i.index),E,y,"comment"==u[u.length-1][0]?P:g,{c:b,r:_},w,L[b],m,R,n):(E="",y=uw(i[0]),v=i.index+i[0].length);break;case"cell":if("/"===i[1])if(I.length>0&&(g.c=I),(!n.sheetRows||n.sheetRows>_)&&void 0!==g.v&&(n.dense?(d["!data"][_]||(d["!data"][_]=[]),d["!data"][_][b]=g):d[Ld(b)+Od(_)]=g),g.HRef&&(g.l={Target:dh(g.HRef)},g.HRefScreenTip&&(g.l.Tooltip=g.HRefScreenTip),delete g.HRef,delete g.HRefScreenTip),(g.MergeAcross||g.MergeDown)&&(j=b+(0|parseInt(g.MergeAcross,10)),B=_+(0|parseInt(g.MergeDown,10)),(j>b||B>_)&&M.push({s:{c:b,r:_},e:{c:j,r:B}})),n.sheetStubs)if(g.MergeAcross||g.MergeDown){for(var q=b;q<=j;++q)for(var V=_;V<=B;++V)(q>b||V>_)&&(n.dense?(d["!data"][V]||(d["!data"][V]=[]),d["!data"][V][q]={t:"z"}):d[Ld(q)+Od(V)]={t:"z"});b=j+1}else++b;else g.MergeAcross?b=j+1:++b;else g=cw(i[0]),g.Index&&(b=+g.Index-1),b<x.s.c&&(x.s.c=b),b>x.e.c&&(x.e.c=b),"/>"===i[0].slice(-2)&&++b,I=[];break;case"row":"/"===i[1]||"/>"===i[0].slice(-2)?(_<x.s.r&&(x.s.r=_),_>x.e.r&&(x.e.r=_),"/>"===i[0].slice(-2)&&(m=uw(i[0]),m.Index&&(_=+m.Index-1)),b=0,++_):(m=uw(i[0]),m.Index&&(_=+m.Index-1),F={},("0"==m.AutoFitHeight||m.Height)&&(F.hpx=parseInt(m.Height,10),F.hpt=by(F.hpx),D[_]=F),"1"==m.Hidden&&(F.hidden=!0,D[_]=F));break;case"worksheet":if("/"===i[1]){if((l=u.pop())[0]!==i[3])throw new Error("Bad state: "+l.join("|"));h.push(f),x.s.r<=x.e.r&&x.s.c<=x.e.c&&(d["!ref"]=zd(x),n.sheetRows&&n.sheetRows<=x.e.r&&(d["!fullref"]=d["!ref"],x.e.r=n.sheetRows-1,d["!ref"]=zd(x))),M.length&&(d["!merges"]=M),L.length>0&&(d["!cols"]=L),D.length>0&&(d["!rows"]=D),c[f]=d}else x={s:{r:2e6,c:2e6},e:{r:0,c:0}},_=b=0,u.push([i[3],!1]),l=uw(i[0]),f=dh(l.Name),d={},n.dense&&(d["!data"]=[]),M=[],R=[],D=[],U={name:f,Hidden:0},z.Sheets.push(U);break;case"table":if("/"===i[1]){if((l=u.pop())[0]!==i[3])throw new Error("Bad state: "+l.join("|"))}else{if("/>"==i[0].slice(-2))break;u.push([i[3],!1]),L=[],N=!1}break;case"style":"/"===i[1]?pw(w,S,n):S=uw(i[0]);break;case"numberformat":S.nf=dh(uw(i[0]).Format||"General"),aw[S.nf]&&(S.nf=aw[S.nf]);for(var H=0;392!=H;++H)if(mu[H]==S.nf)break;if(392==H)for(H=57;392!=H;++H)if(null==mu[H]){mc(S.nf,H);break}break;case"column":if("table"!==u[u.length-1][0])break;if("/"===i[1])break;if(p=uw(i[0]),p.Hidden&&(p.hidden=!0,delete p.Hidden),p.Width&&(p.wpx=parseInt(p.Width,10)),!N&&p.wpx>10){N=!0,cy=sy;for(var W=0;W<L.length;++W)L[W]&&my(L[W])}N&&my(p),L[p.Index-1||L.length]=p;for(var Y=0;Y<+p.Span;++Y)L[L.length]=Rc(p);break;case"namedrange":if("/"===i[1])break;z.Names||(z.Names=[]);var X=lh(i[0]),J={Name:mw(X.Name),Ref:Cv(X.RefersTo.slice(1),{r:0,c:0})};z.Sheets.length>0&&(J.Sheet=z.Sheets.length-1),z.Names.push(J);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if("/>"===i[0].slice(-2))break;"/"===i[1]?E+=r.slice(C,i.index):C=i.index+i[0].length;break;case"interior":if(!n.cellStyles)break;S.Interior=uw(i[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if("/>"===i[0].slice(-2))break;"/"===i[1]?np(T,G,r.slice(O,i.index)):O=i.index+i[0].length;break;case"paragraphs":break;case"styles":case"workbook":if("/"===i[1]){if((l=u.pop())[0]!==i[3])throw new Error("Bad state: "+l.join("|"))}else u.push([i[3],!1]);break;case"comment":if("/"===i[1]){if((l=u.pop())[0]!==i[3])throw new Error("Bad state: "+l.join("|"));yw(P),I.push(P)}else u.push([i[3],!1]),l=uw(i[0]),P={a:l.Author};break;case"autofilter":if("/"===i[1]){if((l=u.pop())[0]!==i[3])throw new Error("Bad state: "+l.join("|"))}else if("/"!==i[0].charAt(i[0].length-2)){var Z=uw(i[0]);d["!autofilter"]={ref:Cv(Z.Range).replace(/\$/g,"")},u.push([i[3],!0])}break;case"name":break;case"datavalidation":if("/"===i[1]){if((l=u.pop())[0]!==i[3])throw new Error("Bad state: "+l.join("|"))}else"/"!==i[0].charAt(i[0].length-2)&&u.push([i[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if("/"===i[1]){if((l=u.pop())[0]!==i[3])throw new Error("Bad state: "+l.join("|"))}else"/"!==i[0].charAt(i[0].length-2)&&u.push([i[3],!0]);break;case"null":break;default:if(0==u.length&&"document"==i[3])return Xw(r,n);if(0==u.length&&"uof"==i[3])return Xw(r,n);var K=!0;switch(u[u.length-1][0]){case"officedocumentsettings":switch(i[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:K=!1}break;case"componentoptions":switch(i[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:K=!1}break;case"excelworkbook":switch(i[3]){case"date1904":z.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:K=!1}break;case"workbookoptions":switch(i[3]){case"owcversion":break;case"height":break;case"width":break;default:K=!1}break;case"worksheetoptions":switch(i[3]){case"visible":if("/>"===i[0].slice(-2));else if("/"===i[1])switch(r.slice(O,i.index)){case"SheetHidden":U.Hidden=1;break;case"SheetVeryHidden":U.Hidden=2;break}else O=i.index+i[0].length;break;case"header":d["!margins"]||C_(d["!margins"]={},"xlml"),isNaN(+lh(i[0]).Margin)||(d["!margins"].header=+lh(i[0]).Margin);break;case"footer":d["!margins"]||C_(d["!margins"]={},"xlml"),isNaN(+lh(i[0]).Margin)||(d["!margins"].footer=+lh(i[0]).Margin);break;case"pagemargins":var Q=lh(i[0]);d["!margins"]||C_(d["!margins"]={},"xlml"),isNaN(+Q.Top)||(d["!margins"].top=+Q.Top),isNaN(+Q.Left)||(d["!margins"].left=+Q.Left),isNaN(+Q.Right)||(d["!margins"].right=+Q.Right),isNaN(+Q.Bottom)||(d["!margins"].bottom=+Q.Bottom);break;case"displayrighttoleft":z.Views||(z.Views=[]),z.Views[0]||(z.Views[0]={}),z.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":d["!outline"]||(d["!outline"]={}),d["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":d["!outline"]||(d["!outline"]={}),d["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:K=!1}break;case"pivottable":case"pivotcache":switch(i[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:K=!1}break;case"pagebreaks":switch(i[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:K=!1}break;case"autofilter":switch(i[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:K=!1}break;case"querytable":switch(i[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:K=!1}break;case"datavalidation":switch(i[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:K=!1}break;case"sorting":case"conditionalformatting":switch(i[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:K=!1}break;case"mapinfo":case"schema":case"data":switch(i[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:K=!1}break;case"smarttags":break;default:K=!1;break}if(K)break;if(i[3].match(/!\[CDATA/))break;if(!u[u.length-1][1])throw"Unrecognized tag: "+i[3]+"|"+u.join("|");if("customdocumentproperties"===u[u.length-1][0]){if("/>"===i[0].slice(-2))break;"/"===i[1]?dw(A,G,k,r.slice(O,i.index)):(k=i,O=i.index+i[0].length);break}if(n.WTF)throw"Unrecognized tag: "+i[3]+"|"+u.join("|")}var $={};return n.bookSheets||n.bookProps||($.Sheets=c),$.SheetNames=h,$.Workbook=z,$.SSF=Rc(mu),$.Props=T,$.Custprops=A,$.bookType="xlml",$}function bw(t,e){switch(SS(e=e||{}),e.type||"base64"){case"base64":return vw(Hl(t),e);case"binary":case"buffer":case"file":return vw(t,e);case"array":return vw(Ql(t),e)}}function _w(t){var e={},n=t.content;if(n.l=28,e.AnsiUserType=n.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=ff(n),n.length-n.l<=4)return e;var r=n.read_shift(4);return 0==r||r>40?e:(n.l-=4,e.Reserved1=n.read_shift(0,"lpstr-ansi"),n.length-n.l<=4?e:(r=n.read_shift(4),1907505652!==r?e:(e.UnicodeClipboardFormat=pf(n),r=n.read_shift(4),0==r||r>40?e:(n.l-=4,void(e.Reserved2=n.read_shift(0,"lpwstr"))))))}var xw=[60,1084,2066,2165,2175];function ww(t,e,n,r,i){var o=r,a=[],s=n.slice(n.l,n.l+o);if(i&&i.enc&&i.enc.insitu&&s.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:i.enc.insitu(s)}a.push(s),n.l+=o;var l=ld(n,n.l),u=kw[l],c=0;while(null!=u&&xw.indexOf(l)>-1)o=ld(n,n.l+2),c=n.l+4,2066==l?c+=4:2165!=l&&2175!=l||(c+=12),s=n.slice(c,n.l+4+o),a.push(s),n.l+=4+o,u=kw[l=ld(n,n.l)];var h=tu(a);bd(h,0);var d=0;h.lens=[];for(var f=0;f<a.length;++f)h.lens.push(d),d+=a[f].length;if(h.length<r)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+h.length+" < "+r;return e.f(h,h.length,i)}function Sw(t,e,n){if("z"!==t.t&&t.XF){var r=0;try{r=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=mu[r])}catch(o){if(e.WTF)throw o}if(!e||!1!==e.cellText)try{"e"===t.t?t.w=t.w||Rf[t.v]:0===r||"General"==r?"n"===t.t?(0|t.v)===t.v?t.w=t.v.toString(10):t.w=Ou(t.v):t.w=ku(t.v):t.w=lc(r,t.v,{date1904:!!n,dateNF:e&&e.dateNF})}catch(o){if(e.WTF)throw o}if(e.cellDates&&r&&"n"==t.t&&rc(mu[r]||String(r))){var i=_u(t.v);i&&(t.t="d",t.v=new Date(i.y,i.m-1,i.d,i.H,i.M,i.S,i.u))}}}function Ew(t,e,n){return{v:t,ixfe:e,t:n}}function Cw(t,e){var n={opts:{}},r={};null!=Ul&&null==e.dense&&(e.dense=Ul);var i={};e.dense&&(i["!data"]=[]);var o,a,s,l,u,c,h,d,f={},p={},g=null,m=[],y="",v={},b="",_={},x=[],w=[],S=[],E={Sheets:[],WBProps:{date1904:!1},Views:[{}]},C={},M=function(t){return t<8?Nf[t]:t<64&&S[t-8]||Nf[t]},T=function(t,e,n){var r,i=e.XF.data;i&&i.patternType&&n&&n.cellStyles&&(e.s={},e.s.patternType=i.patternType,(r=ry(M(i.icvFore)))&&(e.s.fgColor={rgb:r}),(r=ry(M(i.icvBack)))&&(e.s.bgColor={rgb:r}))},A=function(t,e,n){if(!(j>1)&&!(n.sheetRows&&t.r>=n.sheetRows)){if(n.cellStyles&&e.XF&&e.XF.data&&T(t,e,n),delete e.ixfe,delete e.XF,o=t,b=jd(t),p&&p.s&&p.e||(p={s:{r:0,c:0},e:{r:0,c:0}}),t.r<p.s.r&&(p.s.r=t.r),t.c<p.s.c&&(p.s.c=t.c),t.r+1>p.e.r&&(p.e.r=t.r+1),t.c+1>p.e.c&&(p.e.c=t.c+1),n.cellFormula&&e.f)for(var r=0;r<x.length;++r)if(!(x[r][0].s.c>t.c||x[r][0].s.r>t.r)&&!(x[r][0].e.c<t.c||x[r][0].e.r<t.r)){e.F=zd(x[r][0]),x[r][0].s.c==t.c&&x[r][0].s.r==t.r||delete e.f,e.f&&(e.f=""+a_(x[r][1],p,t,R,O));break}n.dense?(i["!data"][t.r]||(i["!data"][t.r]=[]),i["!data"][t.r][t.c]=e):i[b]=e}},O={enc:!1,sbcch:0,snames:[],sharedf:_,arrayf:x,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(O.password=e.password);var k=[],I=[],P=[],L=[],N=!1,R=[];R.SheetNames=O.snames,R.sharedf=O.sharedf,R.arrayf=O.arrayf,R.names=[],R.XTI=[];var D,F=0,j=0,B=0,z=[],U=[];O.codepage=1200,Pl(1200);var G=!1;while(t.l<t.length-1){var q=t.l,V=t.read_shift(2);if(0===V&&10===F)break;var H=t.l===t.length?0:t.read_shift(2),W=kw[V];if(0==j&&-1==[9,521,1033,2057].indexOf(V))break;if(W&&W.f){if(e.bookSheets&&133===F&&133!==V)break;if(F=V,2===W.r||12==W.r){var Y=t.read_shift(2);if(H-=2,!O.enc&&Y!==V&&((255&Y)<<8|Y>>8)!==V)throw new Error("rt mismatch: "+Y+"!="+V);12==W.r&&(t.l+=10,H-=10)}var X={};if(X=10===V?W.f(t,H,O):ww(V,W,t,H,O),0==j&&-1===[9,521,1033,2057].indexOf(F))continue;switch(V){case 34:n.opts.Date1904=E.WBProps.date1904=X;break;case 134:n.opts.WriteProtect=!0;break;case 47:if(O.enc||(t.l=0),O.enc=X,!e.password)throw new Error("File is password-protected");if(null==X.valid)throw new Error("Encryption scheme unsupported");if(!X.valid)throw new Error("Password is incorrect");break;case 92:O.lastuser=X;break;case 66:var J=Number(X);switch(J){case 21010:J=1200;break;case 32768:J=1e4;break;case 32769:J=1252;break}Pl(O.codepage=J),G=!0;break;case 317:O.rrtabid=X;break;case 25:O.winlocked=X;break;case 439:n.opts["RefreshAll"]=X;break;case 12:n.opts["CalcCount"]=X;break;case 16:n.opts["CalcDelta"]=X;break;case 17:n.opts["CalcIter"]=X;break;case 13:n.opts["CalcMode"]=X;break;case 14:n.opts["CalcPrecision"]=X;break;case 95:n.opts["CalcSaveRecalc"]=X;break;case 15:O.CalcRefMode=X;break;case 2211:n.opts.FullCalc=X;break;case 129:X.fDialog&&(i["!type"]="dialog"),X.fBelow||((i["!outline"]||(i["!outline"]={})).above=!0),X.fRight||((i["!outline"]||(i["!outline"]={})).left=!0);break;case 224:w.push(X);break;case 430:R.push([X]),R[R.length-1].XTI=[];break;case 35:case 547:R[R.length-1].push(X);break;case 24:case 536:D={Name:X.Name,Ref:a_(X.rgce,p,null,R,O)},X.itab>0&&(D.Sheet=X.itab-1),R.names.push(D),R[0]||(R[0]=[],R[0].XTI=[]),R[R.length-1].push(X),"_xlnm._FilterDatabase"==X.Name&&X.itab>0&&X.rgce&&X.rgce[0]&&X.rgce[0][0]&&"PtgArea3d"==X.rgce[0][0][0]&&(U[X.itab-1]={ref:zd(X.rgce[0][0][1][2])});break;case 22:O.ExternCount=X;break;case 23:0==R.length&&(R[0]=[],R[0].XTI=[]),R[R.length-1].XTI=R[R.length-1].XTI.concat(X),R.XTI=R.XTI.concat(X);break;case 2196:if(O.biff<8)break;null!=D&&(D.Comment=X[1]);break;case 18:i["!protect"]=X;break;case 19:0!==X&&O.WTF&&console.error("Password verifier: "+X);break;case 133:f[X.pos]=X,O.snames.push(X.name);break;case 10:if(--j)break;if(p.e){if(p.e.r>0&&p.e.c>0){if(p.e.r--,p.e.c--,i["!ref"]=zd(p),e.sheetRows&&e.sheetRows<=p.e.r){var Z=p.e.r;p.e.r=e.sheetRows-1,i["!fullref"]=i["!ref"],i["!ref"]=zd(p),p.e.r=Z}p.e.r++,p.e.c++}k.length>0&&(i["!merges"]=k),I.length>0&&(i["!objects"]=I),P.length>0&&(i["!cols"]=P),L.length>0&&(i["!rows"]=L),E.Sheets.push(C)}""===y?v=i:r[y]=i,i={},e.dense&&(i["!data"]=[]);break;case 9:case 521:case 1033:case 2057:if(8===O.biff&&(O.biff={9:2,521:3,1033:4}[V]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[X.BIFFVer]||8),O.biffguess=0==X.BIFFVer,0==X.BIFFVer&&4096==X.dt&&(O.biff=5,G=!0,Pl(O.codepage=28591)),8==O.biff&&0==X.BIFFVer&&16==X.dt&&(O.biff=2),j++)break;if(i={},e.dense&&(i["!data"]=[]),O.biff<8&&!G&&(G=!0,Pl(O.codepage=e.codepage||1252)),O.biff<5||0==X.BIFFVer&&4096==X.dt){""===y&&(y="Sheet1"),p={s:{r:0,c:0},e:{r:0,c:0}};var K={pos:t.l-H,name:y};f[K.pos]=K,O.snames.push(y)}else y=(f[q]||{name:""}).name;32==X.dt&&(i["!type"]="chart"),64==X.dt&&(i["!type"]="macro"),k=[],I=[],O.arrayf=x=[],P=[],L=[],N=!1,C={Hidden:(f[q]||{hs:0}).hs,name:y};break;case 515:case 3:case 2:"chart"==i["!type"]&&(e.dense?(i["!data"][X.r]||[])[X.c]:i[Ld(X.c)+Od(X.r)])&&++X.c,c={ixfe:X.ixfe,XF:w[X.ixfe]||{},v:X.val,t:"n"},B>0&&(c.z=z[c.ixfe>>8&63]),Sw(c,e,n.opts.Date1904),A({c:X.c,r:X.r},c,e);break;case 5:case 517:c={ixfe:X.ixfe,XF:w[X.ixfe],v:X.val,t:X.t},B>0&&(c.z=z[c.ixfe>>8&63]),Sw(c,e,n.opts.Date1904),A({c:X.c,r:X.r},c,e);break;case 638:c={ixfe:X.ixfe,XF:w[X.ixfe],v:X.rknum,t:"n"},B>0&&(c.z=z[c.ixfe>>8&63]),Sw(c,e,n.opts.Date1904),A({c:X.c,r:X.r},c,e);break;case 189:for(var Q=X.c;Q<=X.C;++Q){var $=X.rkrec[Q-X.c][0];c={ixfe:$,XF:w[$],v:X.rkrec[Q-X.c][1],t:"n"},B>0&&(c.z=z[c.ixfe>>8&63]),Sw(c,e,n.opts.Date1904),A({c:Q,r:X.r},c,e)}break;case 6:case 518:case 1030:if("String"==X.val){g=X;break}if(c=Ew(X.val,X.cell.ixfe,X.tt),c.XF=w[c.ixfe],e.cellFormula){var tt=X.formula;if(tt&&tt[0]&&tt[0][0]&&"PtgExp"==tt[0][0][0]){var et=tt[0][0][1][0],nt=tt[0][0][1][1],rt=jd({r:et,c:nt});_[rt]?c.f=""+a_(X.formula,p,X.cell,R,O):c.F=((e.dense?(i["!data"][et]||[])[nt]:i[rt])||{}).F}else c.f=""+a_(X.formula,p,X.cell,R,O)}B>0&&(c.z=z[c.ixfe>>8&63]),Sw(c,e,n.opts.Date1904),A(X.cell,c,e),g=X;break;case 7:case 519:if(!g)throw new Error("String record expects Formula");g.val=X,c=Ew(X,g.cell.ixfe,"s"),c.XF=w[c.ixfe],e.cellFormula&&(c.f=""+a_(g.formula,p,g.cell,R,O)),B>0&&(c.z=z[c.ixfe>>8&63]),Sw(c,e,n.opts.Date1904),A(g.cell,c,e),g=null;break;case 33:case 545:x.push(X);var it=jd(X[0].s);if(a=e.dense?(i["!data"][X[0].s.r]||[])[X[0].s.c]:i[it],e.cellFormula&&a){if(!g)break;if(!it||!a)break;a.f=""+a_(X[1],p,X[0],R,O),a.F=zd(X[0])}break;case 1212:if(!e.cellFormula)break;if(b){if(!g)break;_[jd(g.cell)]=X[0],a=e.dense?(i["!data"][g.cell.r]||[])[g.cell.c]:i[jd(g.cell)],(a||{}).f=""+a_(X[0],p,o,R,O)}break;case 253:c=Ew(m[X.isst].t,X.ixfe,"s"),m[X.isst].h&&(c.h=m[X.isst].h),c.XF=w[c.ixfe],B>0&&(c.z=z[c.ixfe>>8&63]),Sw(c,e,n.opts.Date1904),A({c:X.c,r:X.r},c,e);break;case 513:e.sheetStubs&&(c={ixfe:X.ixfe,XF:w[X.ixfe],t:"z"},B>0&&(c.z=z[c.ixfe>>8&63]),Sw(c,e,n.opts.Date1904),A({c:X.c,r:X.r},c,e));break;case 190:if(e.sheetStubs)for(var ot=X.c;ot<=X.C;++ot){var at=X.ixfe[ot-X.c];c={ixfe:at,XF:w[at],t:"z"},B>0&&(c.z=z[c.ixfe>>8&63]),Sw(c,e,n.opts.Date1904),A({c:ot,r:X.r},c,e)}break;case 214:case 516:case 4:c=Ew(X.val,X.ixfe,"s"),c.XF=w[c.ixfe],B>0&&(c.z=z[c.ixfe>>8&63]),Sw(c,e,n.opts.Date1904),A({c:X.c,r:X.r},c,e);break;case 0:case 512:1===j&&(p=X);break;case 252:m=X;break;case 1054:if(4==O.biff){z[B++]=X[1];for(var st=0;st<B+163;++st)if(mu[st]==X[1])break;st>=163&&mc(X[1],B+163)}else mc(X[1],X[0]);break;case 30:z[B++]=X;for(var lt=0;lt<B+163;++lt)if(mu[lt]==X)break;lt>=163&&mc(X,B+163);break;case 229:k=k.concat(X);break;case 93:I[X.cmo[0]]=O.lastobj=X;break;case 438:O.lastobj.TxO=X;break;case 127:O.lastobj.ImData=X;break;case 440:for(u=X[0].s.r;u<=X[0].e.r;++u)for(l=X[0].s.c;l<=X[0].e.c;++l)a=e.dense?(i["!data"][u]||[])[l]:i[jd({c:l,r:u})],a&&(a.l=X[1]);break;case 2048:for(u=X[0].s.r;u<=X[0].e.r;++u)for(l=X[0].s.c;l<=X[0].e.c;++l)a=e.dense?(i["!data"][u]||[])[l]:i[jd({c:l,r:u})],a&&a.l&&(a.l.Tooltip=X[1]);break;case 28:if(O.biff<=5&&O.biff>=2)break;a=e.dense?(i["!data"][X[0].r]||[])[X[0].c]:i[jd(X[0])];var ut=I[X[2]];a||(e.dense?(i["!data"][X[0].r]||(i["!data"][X[0].r]=[]),a=i["!data"][X[0].r][X[0].c]={t:"z"}):a=i[jd(X[0])]={t:"z"},p.e.r=Math.max(p.e.r,X[0].r),p.s.r=Math.min(p.s.r,X[0].r),p.e.c=Math.max(p.e.c,X[0].c),p.s.c=Math.min(p.s.c,X[0].c)),a.c||(a.c=[]),s={a:X[1],t:ut.TxO.t},a.c.push(s);break;case 2173:tv(w[X.ixfe],X.ext);break;case 125:if(!O.cellStyles)break;while(X.e>=X.s)P[X.e--]={width:X.w/256,level:X.level||0,hidden:!!(1&X.flags)},N||(N=!0,gy(X.w/256)),my(P[X.e+1]);break;case 520:var ct={};null!=X.level&&(L[X.r]=ct,ct.level=X.level),X.hidden&&(L[X.r]=ct,ct.hidden=!0),X.hpt&&(L[X.r]=ct,ct.hpt=X.hpt,ct.hpx=_y(X.hpt));break;case 38:case 39:case 40:case 41:i["!margins"]||C_(i["!margins"]={}),i["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[V]]=X;break;case 161:i["!margins"]||C_(i["!margins"]={}),i["!margins"].header=X.header,i["!margins"].footer=X.footer;break;case 574:X.RTL&&(E.Views[0].RTL=!0);break;case 146:S=X;break;case 2198:d=X;break;case 140:h=X;break;case 442:y?C.CodeName=X||C.name:E.WBProps.CodeName=X||"ThisWorkbook";break}}else W||console.error("Missing Info for XLS Record 0x"+V.toString(16)),t.l+=H}return n.SheetNames=xc(f).sort((function(t,e){return Number(t)-Number(e)})).map((function(t){return f[t].name})),e.bookSheets||(n.Sheets=r),!n.SheetNames.length&&v["!ref"]?(n.SheetNames.push("Sheet1"),n.Sheets&&(n.Sheets["Sheet1"]=v)):n.Preamble=v,n.Sheets&&U.forEach((function(t,e){n.Sheets[n.SheetNames[e]]["!autofilter"]=t})),n.Strings=m,n.SSF=Rc(mu),O.enc&&(n.Encryption=O.enc),d&&(n.Themes=d),n.Metadata={},void 0!==h&&(n.Metadata.Country=h),R.names.length>0&&(E.Names=R.names),n.Workbook=E,n}var Mw={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Tw(t,e,n){var r=bc.find(t,"/!DocumentSummaryInformation");if(r&&r.size>0)try{var i=vp(r,Af,Mw.DSI);for(var o in i)e[o]=i[o]}catch(u){if(n.WTF)throw u}var a=bc.find(t,"/!SummaryInformation");if(a&&a.size>0)try{var s=vp(a,Of,Mw.SI);for(var l in s)null==e[l]&&(e[l]=s[l])}catch(u){if(n.WTF)throw u}e.HeadingPairs&&e.TitlesOfParts&&(Zf(e.HeadingPairs,e.TitlesOfParts,e,n),delete e.HeadingPairs,delete e.TitlesOfParts)}function Aw(t,e){var n,r,i,o;if(e||(e={}),SS(e),Ll(),e.codepage&&kl(e.codepage),t.FullPaths){if(bc.find(t,"/encryption"))throw new Error("File is password-protected");n=bc.find(t,"!CompObj"),r=bc.find(t,"/Workbook")||bc.find(t,"/Book")}else{switch(e.type){case"base64":t=Kl(Hl(t));break;case"binary":t=Kl(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}bd(t,0),r={content:t}}if(n&&_w(n),e.bookProps&&!e.bookSheets)i={};else{var a=Wl?"buffer":"array";if(r&&r.content)i=Cw(r.content,e);else if((o=bc.find(t,"PerfectOffice_MAIN"))&&o.content)i=mm.to_workbook(o.content,(e.type=a,e));else{if(!(o=bc.find(t,"NativeContent_MAIN"))||!o.content)throw(o=bc.find(t,"MN0"))&&o.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");i=mm.to_workbook(o.content,(e.type=a,e))}e.bookVBA&&t.FullPaths&&bc.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(i.vbaraw=_v(t))}var s={};return t.FullPaths&&Tw(t,s,e),i.Props=i.Custprops=s,e.bookFiles&&(i.cfb=t),i}var Ow={0:{f:X_},1:{f:Q_},2:{f:lx},3:{f:nx},4:{f:tx},5:{f:ax},6:{f:hx},7:{f:ix},8:{f:mx},9:{f:gx},10:{f:fx},11:{f:px},12:{f:$_},13:{f:ux},14:{f:rx},15:{f:ex},16:{f:sx},17:{f:dx},18:{f:ox},19:{f:Kd},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:Yx},40:{},42:{},43:{f:Iy},44:{f:ky},45:{f:Py},46:{f:Ny},47:{f:Ly},48:{},49:{f:Xd},50:{},51:{f:nv},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Zg},62:{f:cx},63:{f:sv},64:{f:Cx},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:_d,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Ex},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:K_},148:{f:J_,p:16},151:{f:bx},152:{},153:{f:Hx},154:{},155:{},156:{f:Vx},157:{},158:{},159:{T:1,f:Am},160:{T:-1},161:{T:1,f:lf},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:yx},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:ev},336:{T:-1},337:{f:rv,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:of},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Ig},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:_x},427:{f:xx},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Sx},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Z_},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:vx},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:of},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:yv},633:{T:1},634:{T:-1},635:{T:1,f:mv},636:{T:-1},637:{f:Qd},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:Ix},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Mx},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},kw={6:{f:d_},10:{f:bp},12:{f:wp},13:{f:wp},14:{f:xp},15:{f:xp},16:{f:uf},17:{f:xp},18:{f:xp},19:{f:wp},20:{f:Tg},21:{f:Tg},23:{f:Ig},24:{f:kg},25:{f:xp},26:{},27:{},28:{f:jg},29:{},34:{f:xp},35:{f:Og},38:{f:uf},39:{f:uf},40:{f:uf},41:{f:uf},42:{f:xp},43:{f:xp},47:{f:Qm},49:{f:fg},51:{f:wp},60:{},61:{f:cg},64:{f:xp},65:{f:dg},66:{f:wp},77:{},80:{},81:{},82:{},85:{f:wp},89:{},90:{},91:{},92:{f:eg},93:{f:zg},94:{},95:{f:xp},96:{},97:{},99:{f:xp},125:{f:Zg},128:{f:Eg},129:{f:ng},130:{f:wp},131:{f:xp},132:{f:xp},133:{f:rg},134:{},140:{f:Wg},141:{f:wp},144:{},146:{f:Xg},151:{},152:{},153:{},154:{},155:{},156:{f:wp},157:{},158:{},160:{f:tm},161:{f:Kg},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:_g},190:{f:xg},193:{f:bp},197:{},198:{},199:{},200:{},201:{},202:{f:xp},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:wp},220:{},221:{f:xp},222:{},224:{f:Sg},225:{f:tg},226:{f:bp},227:{},229:{f:Bg},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:ig},253:{f:pg},255:{f:og},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:Sp},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:xp},353:{f:bp},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:Ag},431:{f:xp},432:{},433:{},434:{},437:{},438:{f:qg},439:{f:xp},440:{f:Vg},441:{},442:{f:Ap},443:{},444:{f:wp},445:{},446:{},448:{f:bp},449:{f:lg,r:2},450:{f:bp},512:{f:vg},513:{f:$g},515:{f:Mg},516:{f:gg},517:{f:Cg},519:{f:em},520:{f:ag},523:{},545:{f:Rg},549:{f:ug},566:{},574:{f:hg},638:{f:bg},659:{},1048:{},1054:{f:mg},1084:{},1212:{f:Ng},2048:{f:Hg},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:$p},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:bp},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:Jg,r:12},2173:{f:$y,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:xp,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:Lg,r:12},2197:{},2198:{f:Yy,r:12},2199:{},2200:{},2201:{},2202:{f:Dg,r:12},2203:{f:bp},2204:{},2205:{},2206:{},2207:{},2211:{f:sg},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:wp},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:Qg},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:Yg},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:vg},1:{},2:{f:om},3:{f:im},4:{f:rm},5:{f:Cg},7:{f:am},8:{},9:{f:$p},11:{},22:{f:wp},30:{f:yg},31:{},32:{},33:{f:Rg},36:{},37:{f:ug},50:{f:sm},62:{},52:{},67:{},68:{f:wp},69:{},86:{},126:{},127:{f:nm},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:lm},223:{},234:{},354:{},421:{},518:{f:d_},521:{f:$p},536:{f:kg},547:{f:Og},561:{},579:{},1030:{f:d_},1033:{f:$p},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},101:{},102:{},105:{},106:{},107:{},109:{},112:{},114:{},29282:{}};function Iw(t,e,n,r){var i=e;if(!isNaN(i)){var o=r||(n||[]).length||0,a=t.next(4);a.write_shift(2,i),a.write_shift(2,o),o>0&&od(n)&&t.push(n)}}function Pw(t,e){var n=e||{},r=null!=n.dense?n.dense:Ul,i={};r&&(i["!data"]=[]),t=t.replace(/<!--.*?-->/g,"");var o=t.match(/<table/i);if(!o)throw new Error("Invalid HTML: could not find <table>");var a=t.match(/<\/table/i),s=o.index,l=a&&a.index||t.length,u=Gc(t.slice(s,l),/(:?<tr[^>]*>)/i,"<tr>"),c=-1,h=0,d=0,f=0,p={s:{r:1e7,c:1e7},e:{r:0,c:0}},g=[];for(s=0;s<u.length;++s){var m=u[s].trim(),y=m.slice(0,3).toLowerCase();if("<tr"!=y){if("<td"==y||"<th"==y){var v=m.split(/<\/t[dh]>/i);for(l=0;l<v.length;++l){var b=v[l].trim();if(b.match(/<t[dh]/i)){var _=b,x=0;while("<"==_.charAt(0)&&(x=_.indexOf(">"))>-1)_=_.slice(x+1);for(var w=0;w<g.length;++w){var S=g[w];S.s.c==h&&S.s.r<c&&c<=S.e.r&&(h=S.e.c+1,w=-1)}var E=lh(b.slice(0,b.indexOf(">")));f=E.colspan?+E.colspan:1,((d=+E.rowspan)>1||f>1)&&g.push({s:{r:c,c:h},e:{r:c+(d||1)-1,c:h+f-1}});var C=E.t||E["data-t"]||"";if(_.length)if(_=Ch(_),p.s.r>c&&(p.s.r=c),p.e.r<c&&(p.e.r=c),p.s.c>h&&(p.s.c=h),p.e.c<h&&(p.e.c=h),_.length){var M={t:"s",v:_};n.raw||!_.trim().length||"s"==C||("TRUE"===_?M={t:"b",v:!0}:"FALSE"===_?M={t:"b",v:!1}:isNaN(Fc(_))?isNaN(Uc(_).getDate())||(M={t:"d",v:Lc(_)},n.cellDates||(M={t:"n",v:Ec(M.v)}),M.z=n.dateNF||mu[14]):M={t:"n",v:Fc(_)}),r?(i["!data"][c]||(i["!data"][c]=[]),i["!data"][c][h]=M):i[jd({r:c,c:h})]=M,h+=f}else h+=f;else h+=f}}}}else{if(++c,n.sheetRows&&n.sheetRows<=c){--c;break}h=0}}return i["!ref"]=zd(p),g.length&&(i["!merges"]=g),i}function Lw(t,e,n,r){for(var i=t["!merges"]||[],o=[],a={},s=null!=t["!data"],l=e.s.c;l<=e.e.c;++l){for(var u=0,c=0,h=0;h<i.length;++h)if(!(i[h].s.r>n||i[h].s.c>l)&&!(i[h].e.r<n||i[h].e.c<l)){if(i[h].s.r<n||i[h].s.c<l){u=-1;break}u=i[h].e.r-i[h].s.r+1,c=i[h].e.c-i[h].s.c+1;break}if(!(u<0)){var d=Ld(l)+Od(n),f=s?(t["!data"][n]||[])[l]:t[d],p=f&&null!=f.v&&(f.h||gh(f.w||(Vd(f),f.w)||""))||"";a={},u>1&&(a.rowspan=u),c>1&&(a.colspan=c),r.editable?p='<span contenteditable="true">'+p+"</span>":f&&(a["data-t"]=f&&f.t||"z",null!=f.v&&(a["data-v"]=f.v),null!=f.z&&(a["data-z"]=f.z),f.l&&"#"!=(f.l.Target||"#").charAt(0)&&(p='<a href="'+gh(f.l.Target)+'">'+p+"</a>")),a.id=(r.id||"sjs")+"-"+d,o.push(Ph("td",p,a))}}var g="<tr>";return g+o.join("")+"</tr>"}var Nw='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Rw="</body></html>";function Dw(t,e){var n=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!n||0==n.length)throw new Error("Invalid HTML: could not find <table>");if(1==n.length){var r=Hd(Pw(n[0],e),e);return r.bookType="html",r}var i=ZS();return n.forEach((function(t,n){KS(i,Pw(t,e),"Sheet"+(n+1))})),i.bookType="html",i}function Fw(t,e,n){var r=[];return r.join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}function jw(t,e){var n=e||{},r=null!=n.header?n.header:Nw,i=null!=n.footer?n.footer:Rw,o=[r],a=Bd(t["!ref"]);o.push(Fw(t,a,n));for(var s=a.s.r;s<=a.e.r;++s)o.push(Lw(t,a,s,n));return o.push("</table>"+i),o.join("")}function Bw(t,e,n){var r=e.rows;if(!r)throw"Unsupported origin when "+e.tagName+" is not a TABLE";var i=n||{},o=null!=t["!data"],a=0,s=0;if(null!=i.origin)if("number"==typeof i.origin)a=i.origin;else{var l="string"==typeof i.origin?Fd(i.origin):i.origin;a=l.r,s=l.c}var u=Math.min(i.sheetRows||1e7,r.length),c={s:{r:0,c:0},e:{r:a,c:s}};if(t["!ref"]){var h=Bd(t["!ref"]);c.s.r=Math.min(c.s.r,h.s.r),c.s.c=Math.min(c.s.c,h.s.c),c.e.r=Math.max(c.e.r,h.e.r),c.e.c=Math.max(c.e.c,h.e.c),-1==a&&(c.e.r=a=h.e.r+1)}var d=[],f=0,p=t["!rows"]||(t["!rows"]=[]),g=0,m=0,y=0,v=0,b=0,_=0;for(t["!cols"]||(t["!cols"]=[]);g<r.length&&m<u;++g){var x=r[g];if(Gw(x)){if(i.display)continue;p[m]={hidden:!0}}var w=x.cells;for(y=v=0;y<w.length;++y){var S=w[y];if(!i.display||!Gw(S)){var E=S.hasAttribute("data-v")?S.getAttribute("data-v"):S.hasAttribute("v")?S.getAttribute("v"):Ch(S.innerHTML),C=S.getAttribute("data-z")||S.getAttribute("z");for(f=0;f<d.length;++f){var M=d[f];M.s.c==v+s&&M.s.r<m+a&&m+a<=M.e.r&&(v=M.e.c+1-s,f=-1)}_=+S.getAttribute("colspan")||1,((b=+S.getAttribute("rowspan")||1)>1||_>1)&&d.push({s:{r:m+a,c:v+s},e:{r:m+a+(b||1)-1,c:v+s+(_||1)-1}});var T={t:"s",v:E},A=S.getAttribute("data-t")||S.getAttribute("t")||"";null!=E&&(0==E.length?T.t=A||"z":i.raw||0==E.trim().length||"s"==A||("TRUE"===E?T={t:"b",v:!0}:"FALSE"===E?T={t:"b",v:!1}:isNaN(Fc(E))?isNaN(Uc(E).getDate())||(T={t:"d",v:Lc(E)},i.cellDates||(T={t:"n",v:Ec(T.v)}),T.z=i.dateNF||mu[14]):T={t:"n",v:Fc(E)})),void 0===T.z&&null!=C&&(T.z=C);var O="",k=S.getElementsByTagName("A");if(k&&k.length)for(var I=0;I<k.length;++I)if(k[I].hasAttribute("href")&&(O=k[I].getAttribute("href"),"#"!=O.charAt(0)))break;O&&"#"!=O.charAt(0)&&"javascript:"!=O.slice(0,11).toLowerCase()&&(T.l={Target:O}),o?(t["!data"][m+a]||(t["!data"][m+a]=[]),t["!data"][m+a][v+s]=T):t[jd({c:v+s,r:m+a})]=T,c.e.c<v+s&&(c.e.c=v+s),v+=_}}++m}return d.length&&(t["!merges"]=(t["!merges"]||[]).concat(d)),c.e.r=Math.max(c.e.r,m-1+a),t["!ref"]=zd(c),m>=u&&(t["!fullref"]=zd((c.e.r=r.length-g+m-1+a,c))),t}function zw(t,e){var n=e||{},r={};return n.dense&&(r["!data"]=[]),Bw(r,t,e)}function Uw(t,e){var n=Hd(zw(t,e),e);return n}function Gw(t){var e="",n=qw(t);return n&&(e=n(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),"none"===e}function qw(t){return t.ownerDocument.defaultView&&"function"===typeof t.ownerDocument.defaultView.getComputedStyle?t.ownerDocument.defaultView.getComputedStyle:"function"===typeof getComputedStyle?getComputedStyle:null}function Vw(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,(function(t,e){return Array(parseInt(e,10)+1).join(" ")})).replace(/<text:tab[^>]*\/>/g,"\t").replace(/<text:line-break\/>/g,"\n"),n=dh(e.replace(/<[^>]*>/g,""));return[n]}function Hw(t,e,n){var r=n||{},i=Lh(t);Nh.lastIndex=0,i=i.replace(/<!--([\s\S]*?)-->/gm,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var o,a,s,l="",u="",c=0,h=-1,d="";while(o=Nh.exec(i))switch(o[3]=o[3].replace(/_.*$/,"")){case"number-style":case"currency-style":case"percentage-style":case"date-style":case"time-style":case"text-style":"/"===o[1]?(!1,"false"==a["truncate-on-overflow"]&&(l.match(/h/)?l=l.replace(/h+/,"[$&]"):l.match(/m/)?l=l.replace(/m+/,"[$&]"):l.match(/s/)&&(l=l.replace(/s+/,"[$&]"))),r[a.name]=l,l=""):"/"!==o[0].charAt(o[0].length-2)&&(!0,l="",a=lh(o[0],!1));break;case"boolean-style":"/"===o[1]?(!1,r[a.name]="General",l=""):"/"!==o[0].charAt(o[0].length-2)&&(!0,l="",a=lh(o[0],!1));break;case"boolean":l+="General";break;case"text":"/"===o[1]?(d=i.slice(h,Nh.lastIndex-o[0].length),"%"==d&&"<number:percentage-style"==a[0]?l+="%":l+='"'+d.replace(/"/g,'""')+'"'):"/"!==o[0].charAt(o[0].length-2)&&(h=Nh.lastIndex);break;case"day":switch(s=lh(o[0],!1),s["style"]){case"short":l+="d";break;case"long":l+="dd";break;default:l+="dd";break}break;case"day-of-week":switch(s=lh(o[0],!1),s["style"]){case"short":l+="ddd";break;case"long":l+="dddd";break;default:l+="ddd";break}break;case"era":switch(s=lh(o[0],!1),s["style"]){case"short":l+="ee";break;case"long":l+="eeee";break;default:l+="eeee";break}break;case"hours":switch(s=lh(o[0],!1),s["style"]){case"short":l+="h";break;case"long":l+="hh";break;default:l+="hh";break}break;case"minutes":switch(s=lh(o[0],!1),s["style"]){case"short":l+="m";break;case"long":l+="mm";break;default:l+="mm";break}break;case"month":switch(s=lh(o[0],!1),s["textual"]&&(l+="mm"),s["style"]){case"short":l+="m";break;case"long":l+="mm";break;default:l+="m";break}break;case"seconds":switch(s=lh(o[0],!1),s["style"]){case"short":l+="s";break;case"long":l+="ss";break;default:l+="ss";break}s["decimal-places"]&&(l+="."+Dc("0",+s["decimal-places"]));break;case"year":switch(s=lh(o[0],!1),s["style"]){case"short":l+="yy";break;case"long":l+="yyyy";break;default:l+="yy";break}break;case"am-pm":l+="AM/PM";break;case"week-of-year":case"quarter":console.error("Excel does not support ODS format token "+o[3]);break;case"fill-character":"/"===o[1]?(d=i.slice(h,Nh.lastIndex-o[0].length),l+='"'+d.replace(/"/g,'""')+'"*'):"/"!==o[0].charAt(o[0].length-2)&&(h=Nh.lastIndex);break;case"scientific-number":s=lh(o[0],!1),l+="0."+Dc("0",+s["min-decimal-places"]||+s["decimal-places"]||2)+Dc("?",+s["decimal-places"]-+s["min-decimal-places"]||0)+"E"+(yh(s["forced-exponent-sign"])?"+":"")+Dc("0",+s["min-exponent-digits"]||2);break;case"fraction":s=lh(o[0],!1),+s["min-integer-digits"]?l+=Dc("0",+s["min-integer-digits"]):l+="#",l+=" ",l+=Dc("?",+s["min-numerator-digits"]||1),l+="/",+s["denominator-value"]?l+=s["denominator-value"]:l+=Dc("?",+s["min-denominator-digits"]||1);break;case"currency-symbol":"/"===o[1]?l+='"'+i.slice(h,Nh.lastIndex-o[0].length).replace(/"/g,'""')+'"':"/"!==o[0].charAt(o[0].length-2)?h=Nh.lastIndex:l+="$";break;case"text-properties":switch(s=lh(o[0],!1),(s["color"]||"").toLowerCase().replace("#","")){case"ff0000":case"red":l="[Red]"+l;break}break;case"text-content":l+="@";break;case"map":s=lh(o[0],!1),"value()>=0"==dh(s["condition"])?l=r[s["apply-style-name"]]+";"+l:console.error("ODS number format may be incorrect: "+s["condition"]);break;case"number":if("/"===o[1])break;s=lh(o[0],!1),u="",u+=Dc("0",+s["min-integer-digits"]||1),yh(s["grouping"])&&(u=Lu(Dc("#",Math.max(0,4-u.length))+u)),(+s["min-decimal-places"]||+s["decimal-places"])&&(u+="."),+s["min-decimal-places"]&&(u+=Dc("0",+s["min-decimal-places"]||1)),+s["decimal-places"]-(+s["min-decimal-places"]||0)&&(u+=Dc("0",+s["decimal-places"]-(+s["min-decimal-places"]||0))),l+=u;break;case"embedded-text":"/"===o[1]?0==c?l+='"'+i.slice(h,Nh.lastIndex-o[0].length).replace(/"/g,'""')+'"':l=l.slice(0,c)+'"'+i.slice(h,Nh.lastIndex-o[0].length).replace(/"/g,'""')+'"'+l.slice(c):"/"!==o[0].charAt(o[0].length-2)&&(h=Nh.lastIndex,c=-+lh(o[0],!1)["position"]||0);break}return r}function Ww(t,e,n){var r=e||{};null!=Ul&&null==r.dense&&(r.dense=Ul);var i,o,a,s,l,u,c,h=Lh(t),d=[],f=0,p={},g=[],m={};r.dense&&(m["!data"]=[]);var y,v={value:""},b="",_=0,x=[],w=-1,S=-1,E={s:{r:1e6,c:1e7},e:{r:0,c:0}},C=0,M=n||{},T={},A=[],O={},k=0,I=0,P=[],L=1,N=1,R=[],D={Names:[],WBProps:{}},F={},j=["",""],B=[],z={},U="",G=0,q=!1,V=!1,H=0,W=0;Nh.lastIndex=0,h=h.replace(/<!--([\s\S]*?)-->/gm,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");while(u=Nh.exec(h))switch(u[3]=u[3].replace(/_.*$/,"")){case"table":case"工作表":"/"===u[1]?(E.e.c>=E.s.c&&E.e.r>=E.s.r?m["!ref"]=zd(E):m["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=E.e.r&&(m["!fullref"]=m["!ref"],E.e.r=r.sheetRows-1,m["!ref"]=zd(E)),A.length&&(m["!merges"]=A),P.length&&(m["!rows"]=P),s.name=s["名称"]||s.name,"undefined"!==typeof JSON&&JSON.stringify(s),g.push(s.name),p[s.name]=m,V=!1):"/"!==u[0].charAt(u[0].length-2)&&(s=lh(u[0],!1),w=S=-1,E.s.r=E.s.c=1e7,E.e.r=E.e.c=0,m={},r.dense&&(m["!data"]=[]),A=[],P=[],V=!0);break;case"table-row-group":"/"===u[1]?--C:++C;break;case"table-row":case"行":if("/"===u[1]){w+=L,L=1;break}if(l=lh(u[0],!1),l["行号"]?w=l["行号"]-1:-1==w&&(w=0),L=+l["number-rows-repeated"]||1,L<10)for(H=0;H<L;++H)C>0&&(P[w+H]={level:C});S=-1;break;case"covered-table-cell":"/"!==u[1]&&++S,r.sheetStubs&&(r.dense?(m["!data"][w]||(m["!data"][w]=[]),m["!data"][w][S]={t:"z"}):m[jd({r:w,c:S})]={t:"z"}),b="",x=[];break;case"table-cell":case"数据":if("/"===u[0].charAt(u[0].length-2))++S,v=lh(u[0],!1),N=parseInt(v["number-columns-repeated"]||"1",10),c={t:"z",v:null},v.formula&&0!=r.cellFormula&&(c.f=x_(dh(v.formula))),v["style-name"]&&T[v["style-name"]]&&(c.z=T[v["style-name"]]),"string"==(v["数据类型"]||v["value-type"])&&(c.t="s",c.v=dh(v["string-value"]||""),r.dense?(m["!data"][w]||(m["!data"][w]=[]),m["!data"][w][S]=c):m[Ld(S)+Od(w)]=c),S+=N-1;else if("/"!==u[1]){++S,b="",_=0,x=[],N=1;var Y=L?w+L-1:w;if(S>E.e.c&&(E.e.c=S),S<E.s.c&&(E.s.c=S),w<E.s.r&&(E.s.r=w),Y>E.e.r&&(E.e.r=Y),v=lh(u[0],!1),B=[],z={},c={t:v["数据类型"]||v["value-type"],v:null},v["style-name"]&&T[v["style-name"]]&&(c.z=T[v["style-name"]]),r.cellFormula)if(v.formula&&(v.formula=dh(v.formula)),v["number-matrix-columns-spanned"]&&v["number-matrix-rows-spanned"]&&(k=parseInt(v["number-matrix-rows-spanned"],10)||0,I=parseInt(v["number-matrix-columns-spanned"],10)||0,O={s:{r:w,c:S},e:{r:w+k-1,c:S+I-1}},c.F=zd(O),R.push([O,c.F])),v.formula)c.f=x_(v.formula);else for(H=0;H<R.length;++H)w>=R[H][0].s.r&&w<=R[H][0].e.r&&S>=R[H][0].s.c&&S<=R[H][0].e.c&&(c.F=R[H][1]);switch((v["number-columns-spanned"]||v["number-rows-spanned"])&&(k=parseInt(v["number-rows-spanned"],10)||0,I=parseInt(v["number-columns-spanned"],10)||0,O={s:{r:w,c:S},e:{r:w+k-1,c:S+I-1}},A.push(O)),v["number-columns-repeated"]&&(N=parseInt(v["number-columns-repeated"],10)),c.t){case"boolean":c.t="b",c.v=yh(v["boolean-value"])||+v["boolean-value"]>=1;break;case"float":c.t="n",c.v=parseFloat(v.value);break;case"percentage":c.t="n",c.v=parseFloat(v.value);break;case"currency":c.t="n",c.v=parseFloat(v.value);break;case"date":c.t="d",c.v=Lc(v["date-value"]),r.cellDates||(c.t="n",c.v=Ec(c.v,D.WBProps.date1904)-W),c.z||(c.z="m/d/yy");break;case"time":c.t="n",c.v=Oc(v["time-value"])/86400,r.cellDates&&(c.t="d",c.v=Ac(c.v)),c.z||(c.z="HH:MM:SS");break;case"number":c.t="n",c.v=parseFloat(v["数据数值"]);break;default:if("string"!==c.t&&"text"!==c.t&&c.t)throw new Error("Unsupported value type "+c.t);c.t="s",null!=v["string-value"]&&(b=dh(v["string-value"]),x=[])}}else{if(q=!1,"s"===c.t&&(c.v=b||"",x.length&&(c.R=x),q=0==_),F.Target&&(c.l=F),B.length>0&&(c.c=B,B=[]),b&&!1!==r.cellText&&(c.w=b),q&&(c.t="z",delete c.v),(!q||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=w))for(var X=0;X<L;++X){if(N=parseInt(v["number-columns-repeated"]||"1",10),r.dense){m["!data"][w+X]||(m["!data"][w+X]=[]),m["!data"][w+X][S]=0==X?c:Rc(c);while(--N>0)m["!data"][w+X][S+N]=Rc(c)}else{m[jd({r:w+X,c:S})]=c;while(--N>0)m[jd({r:w+X,c:S+N})]=Rc(c)}E.e.c<=S&&(E.e.c=S)}N=parseInt(v["number-columns-repeated"]||"1",10),S+=N-1,N=0,c={},b="",x=[]}F={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if("/"===u[1]){if((i=d.pop())[0]!==u[3])throw"Bad state: "+i}else"/"!==u[0].charAt(u[0].length-2)&&d.push([u[3],!0]);break;case"annotation":if("/"===u[1]){if((i=d.pop())[0]!==u[3])throw"Bad state: "+i;z.t=b,x.length&&(z.R=x),z.a=U,B.push(z)}else"/"!==u[0].charAt(u[0].length-2)&&d.push([u[3],!1]);U="",G=0,b="",_=0,x=[];break;case"creator":"/"===u[1]?U=h.slice(G,u.index):G=u.index+u[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if("/"===u[1]){if((i=d.pop())[0]!==u[3])throw"Bad state: "+i}else"/"!==u[0].charAt(u[0].length-2)&&d.push([u[3],!1]);b="",_=0,x=[];break;case"scientific-number":case"currency-symbol":case"fill-character":break;case"text-style":case"boolean-style":case"number-style":case"currency-style":case"percentage-style":case"date-style":case"time-style":if("/"===u[1]){var J=Nh.lastIndex;Hw(h.slice(a,Nh.lastIndex),e,M),Nh.lastIndex=J}else"/"!==u[0].charAt(u[0].length-2)&&(a=Nh.lastIndex-u[0].length);break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":var Z=lh(u[0],!1);"table-cell"==Z["family"]&&M[Z["data-style-name"]]&&(T[Z["name"]]=M[Z["data-style-name"]]);break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":break;case"boolean":break;case"text":if("/>"===u[0].slice(-2))break;if("/"===u[1])switch(d[d.length-1][0]){case"number-style":case"date-style":case"time-style":h.slice(f,u.index);break}else f=u.index+u[0].length;break;case"named-range":o=lh(u[0],!1),j=w_(o["cell-range-address"]);var K={Name:o.name,Ref:j[0]+"!"+j[1]};V&&(K.Sheet=g.length),D.Names.push(K);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"电子表格":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":switch(o=lh(u[0],!1),o["date-value"]){case"1904-01-01":D.WBProps.date1904=!0;case"1900-01-01":W=0}break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"文本串":if(["master-styles"].indexOf(d[d.length-1][0])>-1)break;if("/"!==u[1]||v&&v["string-value"])y=lh(u[0],!1),_=u.index+u[0].length;else{var Q=Vw(h.slice(_,u.index),y);b=(b.length>0?b+"\n":"")+Q[0]}break;case"s":break;case"database-range":if("/"===u[1])break;try{j=w_(lh(u[0])["target-range-address"]),p[j[0]]["!autofilter"]={ref:j[1]}}catch(tt){}break;case"date":break;case"object":break;case"title":case"标题":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if("/"!==u[1]){if(F=lh(u[0],!1),!F.href)break;F.Target=dh(F.href),delete F.href,"#"==F.Target.charAt(0)&&F.Target.indexOf(".")>-1?(j=w_(F.Target.slice(1)),F.Target="#"+j[0]+"!"+j[1]):F.Target.match(/^\.\.[\\\/]/)&&(F.Target=F.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(u[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(r.WTF)throw new Error(u)}}var $={Sheets:p,SheetNames:g,Workbook:D};return r.bookSheets&&delete $.Sheets,$}function Yw(t,e){e=e||{},Wc(t,"META-INF/manifest.xml")&&Hf(Xc(t,"META-INF/manifest.xml"),e);var n=Jc(t,"styles.xml"),r=n&&Hw(wh(n),e),i=Jc(t,"content.xml");if(!i)throw new Error("Missing content.xml in ODS / UOF file");var o=Ww(wh(i),e,r);return Wc(t,"meta.xml")&&(o.Props=Xf(Xc(t,"meta.xml"))),o.bookType="ods",o}function Xw(t,e){var n=Ww(t,e);return n.bookType="fods",n}
/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */
var Jw=function(){try{return"undefined"==typeof Uint8Array||"undefined"==typeof Uint8Array.prototype.subarray?"slice":"undefined"!==typeof Buffer?"undefined"==typeof Buffer.prototype.subarray?"slice":("function"==typeof Buffer.from?Buffer.from([72,62]):new Buffer([72,62]))instanceof Uint8Array?"subarray":"slice":"subarray"}catch(t){return"slice"}}();function Zw(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Kw(t){return"undefined"!=typeof TextDecoder?(new TextDecoder).decode(t):wh(Ql(t))}function Qw(t){for(var e=0,n=0;n<t.length;++n)e+=t[n].length;var r=new Uint8Array(e),i=0;for(n=0;n<t.length;++n){var o=t[n],a=o.length;if(a<250)for(var s=0;s<a;++s)r[i++]=o[s];else r.set(o,i),i+=a}return r}function $w(t){return t-=t>>1&1431655765,t=(858993459&t)+(t>>2&858993459),16843009*(t+(t>>4)&252645135)>>>24}function tS(t,e){for(var n=(127&t[e+15])<<7|t[e+14]>>1,r=1&t[e+14],i=e+13;i>=e;--i)r=256*r+t[i];return(128&t[e+15]?-r:r)*Math.pow(10,n-6176)}function eS(t,e){var n=e.l,r=127&t[n];t:if(t[n++]>=128){if(r|=(127&t[n])<<7,t[n++]<128)break t;if(r|=(127&t[n])<<14,t[n++]<128)break t;if(r|=(127&t[n])<<21,t[n++]<128)break t;if(r+=(127&t[n])*Math.pow(2,28),++n,t[n++]<128)break t;if(r+=(127&t[n])*Math.pow(2,35),++n,t[n++]<128)break t;if(r+=(127&t[n])*Math.pow(2,42),++n,t[n++]<128)break t}return e.l=n,r}function nS(t){var e=0,n=127&t[e];t:if(t[e++]>=128){if(n|=(127&t[e])<<7,t[e++]<128)break t;if(n|=(127&t[e])<<14,t[e++]<128)break t;if(n|=(127&t[e])<<21,t[e++]<128)break t;n|=(127&t[e])<<28}return n}function rS(t){var e=[],n={l:0};while(n.l<t.length){var r,i=n.l,o=eS(t,n),a=7&o;o=o/8|0;var s=n.l;switch(a){case 0:while(t[s++]>=128);r=t[Jw](n.l,s),n.l=s;break;case 1:r=t[Jw](s,s+8),n.l=s+8;break;case 2:var l=eS(t,n);r=t[Jw](n.l,n.l+l),n.l+=l;break;case 5:r=t[Jw](s,s+4),n.l=s+4;break;default:throw new Error("PB Type ".concat(a," for Field ").concat(o," at offset ").concat(i))}var u={data:r,type:a};null==e[o]&&(e[o]=[]),e[o].push(u)}return e}function iS(t,e){return(null==t?void 0:t.map((function(t){return e(t.data)})))||[]}function oS(t){var e,n=[],r={l:0};while(r.l<t.length){var i=eS(t,r),o=rS(t[Jw](r.l,r.l+i));r.l+=i;var a={id:nS(o[1][0].data),messages:[]};o[2].forEach((function(e){var n=rS(e.data),i=nS(n[3][0].data);a.messages.push({meta:n,data:t[Jw](r.l,r.l+i)}),r.l+=i})),(null==(e=o[3])?void 0:e[0])&&(a.merge=nS(o[3][0].data)>>>0>0),n.push(a)}return n}function aS(t,e){if(0!=t)throw new Error("Unexpected Snappy chunk type ".concat(t));var n={l:0},r=eS(e,n),i=[],o=n.l;while(o<e.length){var a=3&e[o];if(0!=a){var s=0,l=0;if(1==a?(l=4+(e[o]>>2&7),s=(224&e[o++])<<3,s|=e[o++]):(l=1+(e[o++]>>2),2==a?(s=e[o]|e[o+1]<<8,o+=2):(s=(e[o]|e[o+1]<<8|e[o+2]<<16|e[o+3]<<24)>>>0,o+=4)),0==s)throw new Error("Invalid offset 0");var u=i.length-1,c=s;while(u>=0&&c>=i[u].length)c-=i[u].length,--u;if(u<0){if(0!=c)throw new Error("Invalid offset beyond length");c=i[u=0].length}if(l<c)i.push(i[u][Jw](i[u].length-c,i[u].length-c+l));else{c>0&&(i.push(i[u][Jw](i[u].length-c)),l-=c),++u;while(l>=i[u].length)i.push(i[u]),l-=i[u].length,++u;l&&i.push(i[u][Jw](0,l))}i.length>25&&(i=[Qw(i)])}else{var h=e[o++]>>2;if(h<60)++h;else{var d=h-59;h=e[o],d>1&&(h|=e[o+1]<<8),d>2&&(h|=e[o+2]<<16),d>3&&(h|=e[o+3]<<24),h>>>=0,h++,o+=d}i.push(e[Jw](o,o+h)),o+=h}}for(var f=0,p=0;p<i.length;++p)f+=i[p].length;if(f!=r)throw new Error("Unexpected length: ".concat(f," != ").concat(r));return i}function sS(t){Array.isArray(t)&&(t=new Uint8Array(t));var e=[],n=0;while(n<t.length){var r=t[n++],i=t[n]|t[n+1]<<8|t[n+2]<<16;n+=3,e.push.apply(e,aS(r,t[Jw](n,n+i))),n+=i}if(n!==t.length)throw new Error("data is not a valid framed stream!");return 1==e.length?e[0]:Qw(e)}var lS=function(){return{sst:[],rsst:[],ofmt:[],nfmt:[]}};function uS(t,e,n,r,i){var o,a,s,l,u=255&e,c=e>>8,h=c>=5?i:r;t:if(n&(c>4?8:4)&&"n"==t.t&&7==u){var d=(null==(o=h[7])?void 0:o[0])?nS(h[7][0].data):-1;if(-1==d)break t;var f=(null==(a=h[15])?void 0:a[0])?nS(h[15][0].data):-1,p=(null==(s=h[16])?void 0:s[0])?nS(h[16][0].data):-1,g=(null==(l=h[40])?void 0:l[0])?nS(h[40][0].data):-1,m=t.v,y=m;e:if(g){if(0==m){f=p=2;break e}f=m>=604800?1:m>=86400?2:m>=3600?4:m>=60?8:m>=1?16:32,Math.floor(m)!=m?p=32:m%60?p=16:m%3600?p=8:m%86400?p=4:m%604800&&(p=2),p<f&&(p=f)}if(-1==f||-1==p)break t;var v=[],b=[];1==f&&(y=m/604800,1==p?b.push('d"d"'):(y|=0,m-=604800*y),v.push(y+(2==d?" week"+(1==y?"":"s"):1==d?"w":""))),f<=2&&p>=2&&(y=m/86400,p>2&&(y|=0,m-=86400*y),b.push('d"d"'),v.push(y+(2==d?" day"+(1==y?"":"s"):1==d?"d":""))),f<=4&&p>=4&&(y=m/3600,p>4&&(y|=0,m-=3600*y),b.push((f>=4?"[h]":"h")+'"h"'),v.push(y+(2==d?" hour"+(1==y?"":"s"):1==d?"h":""))),f<=8&&p>=8&&(y=m/60,p>8&&(y|=0,m-=60*y),b.push((f>=8?"[m]":"m")+'"m"'),0==d?v.push((8==f&&8==p||y>=10?"":"0")+y):v.push(y+(2==d?" minute"+(1==y?"":"s"):1==d?"m":""))),f<=16&&p>=16&&(y=m,p>16&&(y|=0,m-=y),b.push((f>=16?"[s]":"s")+'"s"'),0==d?v.push((16==p&&16==f||y>=10?"":"0")+y):v.push(y+(2==d?" second"+(1==y?"":"s"):1==d?"s":""))),p>=32&&(y=Math.round(1e3*m),f<32&&b.push('.000"ms"'),0==d?v.push((y>=100?"":y>=10?"0":"00")+y):v.push(y+(2==d?" millisecond"+(1==y?"":"s"):1==d?"ms":""))),t.w=v.join(0==d?":":" "),t.z=b.join(0==d?'":"':" "),0==d&&(t.w=t.w.replace(/:(\d\d\d)$/,".$1"))}}function cS(t,e,n){var r,i=Zw(t),o=i.getUint32(4,!0),a=-1,s=-1,l=-1,u=NaN,c=new Date(2001,0,1),h=n>1?12:8;2&o&&(l=i.getUint32(h,!0),h+=4),h+=4*$w(o&(n>1?3468:396)),512&o&&(a=i.getUint32(h,!0),h+=4),h+=4*$w(o&(n>1?12288:4096)),16&o&&(s=i.getUint32(h,!0),h+=4),32&o&&(u=i.getFloat64(h,!0),h+=8),64&o&&(c.setTime(c.getTime()+1e3*i.getFloat64(h,!0)),h+=8),n>1&&(o=i.getUint32(8,!0)>>>16,255&o&&(-1==l&&(l=i.getUint32(h,!0)),h+=4));var d=t[n>=4?1:2];switch(d){case 0:return;case 2:r={t:"n",v:u};break;case 3:r={t:"s",v:e.sst[s]};break;case 5:r={t:"d",v:c};break;case 6:r={t:"b",v:u>0};break;case 7:r={t:"n",v:u};break;case 8:r={t:"e",v:0};break;case 9:if(!(a>-1))throw new Error("Unsupported cell type ".concat(t[Jw](0,4)));r={t:"s",v:e.rsst[a]};break;default:throw new Error("Unsupported cell type ".concat(t[Jw](0,4)))}return l>-1&&uS(r,d|n<<8,o,e.ofmt[l],e.nfmt[l]),7==d&&(r.v/=86400),r}function hS(t,e){var n,r=Zw(t),i=(r.getUint32(4,!0),r.getUint32(8,!0)),o=12,a=-1,s=-1,l=-1,u=NaN,c=NaN,h=new Date(2001,0,1);1&i&&(u=tS(t,o),o+=16),2&i&&(c=r.getFloat64(o,!0),o+=8),4&i&&(h.setTime(h.getTime()+1e3*r.getFloat64(o,!0)),o+=8),8&i&&(s=r.getUint32(o,!0),o+=4),16&i&&(a=r.getUint32(o,!0),o+=4);var d=t[1];switch(d){case 0:return;case 2:n={t:"n",v:u};break;case 3:n={t:"s",v:e.sst[s]};break;case 5:n={t:"d",v:h};break;case 6:n={t:"b",v:c>0};break;case 7:n={t:"n",v:c};break;case 8:n={t:"e",v:0};break;case 9:n={t:"s",v:e.rsst[a]};break;case 10:n={t:"n",v:u};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(31&i," : ").concat(t[Jw](0,4)))}return o+=4*$w(8160&i),516096&i&&(-1==l&&(l=r.getUint32(o,!0)),o+=4),l>-1&&uS(n,1280|d,i>>13,e.ofmt[l],e.nfmt[l]),7==d&&(n.v/=86400),n}function dS(t,e){switch(t[0]){case 0:case 1:case 2:case 3:case 4:return cS(t,e,t[0]);case 5:return hS(t,e);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function fS(t){var e=rS(t);return nS(e[1][0].data)}function pS(t,e){var n=rS(e.data),r=nS(n[1][0].data),i=n[3],o=[];return(i||[]).forEach((function(e){var n=rS(e.data);if(n[1]){var i=nS(n[1][0].data)>>>0;switch(r){case 1:o[i]=Kw(n[3][0].data);break;case 8:var a=t[fS(n[9][0].data)][0],s=rS(a.data),l=t[fS(s[1][0].data)][0],u=nS(l.meta[1][0].data);if(2001!=u)throw new Error("2000 unexpected reference to ".concat(u));var c=rS(l.data);o[i]=c[3].map((function(t){return Kw(t.data)})).join("");break;case 2:o[i]=rS(n[6][0].data);break;default:throw r}}})),o}function gS(t,e){var n,r,i,o,a,s,l,u,c,h,d,f,p,g,m,y,v=rS(t),b=nS(v[1][0].data)>>>0,_=nS(v[2][0].data)>>>0,x=(null==(r=null==(n=v[8])?void 0:n[0])?void 0:r.data)&&nS(v[8][0].data)>0||!1;if((null==(o=null==(i=v[7])?void 0:i[0])?void 0:o.data)&&0!=e)m=null==(s=null==(a=v[7])?void 0:a[0])?void 0:s.data,y=null==(u=null==(l=v[6])?void 0:l[0])?void 0:u.data;else{if(!(null==(h=null==(c=v[4])?void 0:c[0])?void 0:h.data)||1==e)throw"NUMBERS Tile missing ".concat(e," cell storage");m=null==(f=null==(d=v[4])?void 0:d[0])?void 0:f.data,y=null==(g=null==(p=v[3])?void 0:p[0])?void 0:g.data}for(var w=x?4:1,S=Zw(m),E=[],C=0;C<m.length/2;++C){var M=S.getUint16(2*C,!0);M<65535&&E.push([C,M])}if(E.length!=_)throw"Expected ".concat(_," cells, found ").concat(E.length);var T=[];for(C=0;C<E.length-1;++C)T[E[C][0]]=y[Jw](E[C][1]*w,E[C+1][1]*w);return E.length>=1&&(T[E[E.length-1][0]]=y[Jw](E[E.length-1][1]*w)),{R:b,cells:T}}function mS(t,e){var n,r=rS(e.data),i=-1;(null==(n=null==r?void 0:r[7])?void 0:n[0])&&(i=nS(r[7][0].data)>>>0?1:0);var o=iS(r[5],(function(t){return gS(t,i)}));return{nrows:nS(r[4][0].data)>>>0,data:o.reduce((function(t,e){return t[e.R]||(t[e.R]=[]),e.cells.forEach((function(n,r){if(t[e.R][r])throw new Error("Duplicate cell r=".concat(e.R," c=").concat(r));t[e.R][r]=n})),t}),[])}}function yS(t,e,n){var r,i,o,a,s,l,u=rS(e.data),c={s:{r:0,c:0},e:{r:0,c:0}};if(c.e.r=(nS(u[6][0].data)>>>0)-1,c.e.r<0)throw new Error("Invalid row varint ".concat(u[6][0].data));if(c.e.c=(nS(u[7][0].data)>>>0)-1,c.e.c<0)throw new Error("Invalid col varint ".concat(u[7][0].data));n["!ref"]=zd(c);var h=null!=n["!data"],d=n,f=rS(u[4][0].data),p=lS();(null==(r=f[4])?void 0:r[0])&&(p.sst=pS(t,t[fS(f[4][0].data)][0])),(null==(i=f[11])?void 0:i[0])&&(p.ofmt=pS(t,t[fS(f[11][0].data)][0])),(null==(o=f[17])?void 0:o[0])&&(p.rsst=pS(t,t[fS(f[17][0].data)][0])),(null==(a=f[22])?void 0:a[0])&&(p.nfmt=pS(t,t[fS(f[22][0].data)][0]));var g=rS(f[3][0].data),m=0;if(g[1].forEach((function(e){var r=rS(e.data),i=t[fS(r[2][0].data)][0],o=nS(i.meta[1][0].data);if(6002!=o)throw new Error("6001 unexpected reference to ".concat(o));var a=mS(t,i);a.data.forEach((function(t,e){t.forEach((function(t,r){var i=dS(t,p);i&&(h?(d["!data"][m+e]||(d["!data"][m+e]=[]),d["!data"][m+e][r]=i):n[Ld(r)+Od(m+e)]=i)}))})),m+=a.nrows})),null==(s=f[13])?void 0:s[0]){var y=t[fS(f[13][0].data)][0],v=nS(y.meta[1][0].data);if(6144!=v)throw new Error("Expected merge type 6144, found ".concat(v));n["!merges"]=null==(l=rS(y.data))?void 0:l[1].map((function(t){var e=rS(t.data),n=Zw(rS(e[1][0].data)[1][0].data),r=Zw(rS(e[2][0].data)[1][0].data);return{s:{r:n.getUint16(0,!0),c:n.getUint16(2,!0)},e:{r:n.getUint16(0,!0)+r.getUint16(0,!0)-1,c:n.getUint16(2,!0)+r.getUint16(2,!0)-1}}}))}}function vS(t,e,n){var r=rS(e.data),i={"!ref":"A1"};(null==n?void 0:n.dense)&&(i["!data"]=[]);var o=t[fS(r[2][0].data)],a=nS(o[0].meta[1][0].data);if(6001!=a)throw new Error("6000 unexpected reference to ".concat(a));return yS(t,o[0],i),i}function bS(t,e,n){var r,i=rS(e.data),o={name:(null==(r=i[1])?void 0:r[0])?Kw(i[1][0].data):"",sheets:[]},a=iS(i[2],fS);return a.forEach((function(e){t[e].forEach((function(e){var r=nS(e.meta[1][0].data);6e3==r&&o.sheets.push(vS(t,e,n))}))})),o}function _S(t,e,n){var r,i=ZS(),o=rS(e.data);if(null==(r=o[2])?void 0:r[0])throw new Error("Keynote presentations are not supported");var a=iS(o[1],fS);if(a.forEach((function(e){t[e].forEach((function(e){var r=nS(e.meta[1][0].data);if(2==r){var o=bS(t,e,n);o.sheets.forEach((function(t,e){KS(i,t,0==e?o.name:o.name+"_"+e,!0)}))}}))})),0==i.SheetNames.length)throw new Error("Empty NUMBERS file");return i.bookType="numbers",i}function xS(t,e){var n,r,i,o,a,s,l,u={},c=[];if(t.FullPaths.forEach((function(t){if(t.match(/\.iwpv2/))throw new Error("Unsupported password protection")})),t.FileIndex.forEach((function(t){if(t.name.match(/\.iwa$/)&&0==t.content[0]){var e,n;try{e=sS(t.content)}catch(r){return console.log("?? "+t.content.length+" "+(r.message||r))}try{n=oS(e)}catch(r){return console.log("## "+(r.message||r))}n.forEach((function(t){u[t.id]=t.messages,c.push(t.id)}))}})),!c.length)throw new Error("File has no messages");if((null==(i=null==(r=null==(n=null==u?void 0:u[1])?void 0:n[0].meta)?void 0:r[1])?void 0:i[0].data)&&1e4==nS(u[1][0].meta[1][0].data))throw new Error("Pages documents are not supported");var h=(null==(l=null==(s=null==(a=null==(o=null==u?void 0:u[1])?void 0:o[0])?void 0:a.meta)?void 0:s[1])?void 0:l[0].data)&&1==nS(u[1][0].meta[1][0].data)&&u[1][0];if(h||c.forEach((function(t){u[t].forEach((function(t){var e=nS(t.meta[1][0].data)>>>0;if(1==e){if(h)throw new Error("Document has multiple roots");h=t}}))})),!h)throw new Error("Cannot find Document root");return _S(u,h,e)}function wS(t){return function(e){for(var n=0;n!=t.length;++n){var r=t[n];void 0===e[r[0]]&&(e[r[0]]=r[1]),"n"===r[2]&&(e[r[0]]=Number(e[r[0]]))}}}function SS(t){wS([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function ES(t){return Uf.WS.indexOf(t)>-1?"sheet":Uf.CS&&t==Uf.CS?"chart":Uf.DS&&t==Uf.DS?"dialog":Uf.MS&&t==Uf.MS?"macro":t&&t.length?t:"sheet"}function CS(t,e){if(!t)return 0;try{t=e.map((function(e){return e.id||(e.id=e.strRelID),[e.name,t["!id"][e.id].Target,ES(t["!id"][e.id].Type)]}))}catch(n){return null}return t&&0!==t.length?t:null}function MS(t,e,n,r,i,o,a,s,l,u,c,h){try{o[r]=qf(Jc(t,n,!0),e);var d,f=Xc(t,e);switch(s){case"sheet":d=Zx(f,e,i,l,o[r],u,c,h);break;case"chart":if(d=Kx(f,e,i,l,o[r],u,c,h),!d||!d["!drawel"])break;var p=th(d["!drawel"].Target,e),g=Gf(p),m=hv(Jc(t,p,!0),qf(Jc(t,g,!0),p)),y=th(m,p),v=Gf(y);d=Ox(Jc(t,y,!0),y,l,qf(Jc(t,v,!0),y),u,d);break;case"macro":d=Qx(f,e,i,l,o[r],u,c,h);break;case"dialog":d=$x(f,e,i,l,o[r],u,c,h);break;default:throw new Error("Unrecognized sheet type "+s)}a[r]=d;var b=[],_=[];o&&o[r]&&xc(o[r]).forEach((function(n){var i="";if(o[r][n].Type==Uf.CMNT){if(i=th(o[r][n].Target,e),b=nw(Xc(t,i,!0),i,l),!b||!b.length)return;dv(d,b,!1)}o[r][n].Type==Uf.TCMNT&&(i=th(o[r][n].Target,e),_=_.concat(pv(Xc(t,i,!0),l)))})),_&&_.length&&dv(d,_,!0,l.people||[])}catch(x){if(l.WTF)throw x}}function TS(t){return"/"==t.charAt(0)?t.slice(1):t}function AS(t,e){if(cc(),e=e||{},SS(e),Wc(t,"META-INF/manifest.xml"))return Yw(t,e);if(Wc(t,"objectdata.xml"))return Yw(t,e);if(Wc(t,"Index/Document.iwa")){if("undefined"==typeof Uint8Array)throw new Error("NUMBERS file parsing requires Uint8Array support");if("undefined"!=typeof xS){if(t.FileIndex)return xS(t,e);var n=bc.utils.cfb_new();return Kc(t).forEach((function(e){Qc(n,e,Zc(t,e))})),xS(n,e)}throw new Error("Unsupported NUMBERS file")}if(!Wc(t,"[Content_Types].xml")){if(Wc(t,"index.xml.gz"))throw new Error("Unsupported NUMBERS 08 file");if(Wc(t,"index.xml"))throw new Error("Unsupported NUMBERS 09 file");var r=bc.find(t,"Index.zip");if(r)return e=Rc(e),delete e.type,"string"==typeof r.content&&(e.type="binary"),"undefined"!==typeof Bun&&Buffer.isBuffer(r.content)?jS(new Uint8Array(r.content),e):jS(r.content,e);throw new Error("Unsupported ZIP file")}var i,o,a=Kc(t),s=zf(Jc(t,"[Content_Types].xml")),l=!1;if(0===s.workbooks.length&&(o="xl/workbook.xml",Xc(t,o,!0)&&s.workbooks.push(o)),0===s.workbooks.length){if(o="xl/workbook.bin",!Xc(t,o,!0))throw new Error("Could not find workbook");s.workbooks.push(o),l=!0}"bin"==s.workbooks[0].slice(-3)&&(l=!0);var u={},c={};if(!e.bookSheets&&!e.bookProps){if(S_=[],s.sst)try{S_=ew(Xc(t,TS(s.sst)),s.sst,e)}catch(I){if(e.WTF)throw I}e.cellStyles&&s.themes.length&&(u=Hy(Jc(t,s.themes[0].replace(/^\//,""),!0)||"",e)),s.style&&(c=tw(Xc(t,TS(s.style)),s.style,u,e))}s.links.map((function(n){try{var r=qf(Jc(t,Gf(TS(n))),n);return iw(Xc(t,TS(n)),r,n,e)}catch(I){}}));var h=Jx(Xc(t,TS(s.workbooks[0])),s.workbooks[0],e),d={},f="";s.coreprops.length&&(f=Xc(t,TS(s.coreprops[0]),!0),f&&(d=Xf(f)),0!==s.extprops.length&&(f=Xc(t,TS(s.extprops[0]),!0),f&&Kf(f,d,e)));var p={};e.bookSheets&&!e.bookProps||0!==s.custprops.length&&(f=Jc(t,TS(s.custprops[0]),!0),f&&(p=$f(f,e)));var g={};if((e.bookSheets||e.bookProps)&&(h.Sheets?i=h.Sheets.map((function(t){return t.name})):d.Worksheets&&d.SheetNames.length>0&&(i=d.SheetNames),e.bookProps&&(g.Props=d,g.Custprops=p),e.bookSheets&&"undefined"!==typeof i&&(g.SheetNames=i),e.bookSheets?g.SheetNames:e.bookProps))return g;i={};var m={};e.bookDeps&&s.calcchain&&(m=rw(Xc(t,TS(s.calcchain)),s.calcchain,e));var y,v,b=0,_={},x=h.Sheets;d.Worksheets=x.length,d.SheetNames=[];for(var w=0;w!=x.length;++w)d.SheetNames[w]=x[w].name;var S=l?"bin":"xml",E=s.workbooks[0].lastIndexOf("/"),C=(s.workbooks[0].slice(0,E+1)+"_rels/"+s.workbooks[0].slice(E+1)+".rels").replace(/^\//,"");Wc(t,C)||(C="xl/_rels/workbook."+S+".rels");var M=qf(Jc(t,C,!0),C.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(e.xlmeta=ow(Xc(t,TS(s.metadata[0])),s.metadata[0],e)),(s.people||[]).length>=1&&(e.people=gv(Xc(t,TS(s.people[0])),e)),M&&(M=CS(M,h.Sheets));var T=Xc(t,"xl/worksheets/sheet.xml",!0)?1:0;t:for(b=0;b!=d.Worksheets;++b){var A="sheet";if(M&&M[b]?(y="xl/"+M[b][1].replace(/[\/]?xl\//,""),Wc(t,y)||(y=M[b][1]),Wc(t,y)||(y=C.replace(/_rels\/.*$/,"")+M[b][1]),A=M[b][2]):(y="xl/worksheets/sheet"+(b+1-T)+"."+S,y=y.replace(/sheet0\./,"sheet.")),v=y.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&null!=e.sheets)switch(typeof e.sheets){case"number":if(b!=e.sheets)continue t;break;case"string":if(d.SheetNames[b].toLowerCase()!=e.sheets.toLowerCase())continue t;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var O=!1,k=0;k!=e.sheets.length;++k)"number"==typeof e.sheets[k]&&e.sheets[k]==b&&(O=1),"string"==typeof e.sheets[k]&&e.sheets[k].toLowerCase()==d.SheetNames[b].toLowerCase()&&(O=1);if(!O)continue t}}MS(t,y,v,d.SheetNames[b],b,_,i,A,e,h,u,c)}return g={Directory:s,Workbook:h,Props:d,Custprops:p,Deps:m,Sheets:i,SheetNames:d.SheetNames,Strings:S_,Styles:c,Themes:u,SSF:Rc(mu)},e&&e.bookFiles&&(t.files?(g.keys=a,g.files=t.files):(g.keys=[],g.files={},t.FullPaths.forEach((function(e,n){e=e.replace(/^Root Entry[\/]/,""),g.keys.push(e),g.files[e]=t.FileIndex[n]})))),e&&e.bookVBA&&(s.vba.length>0?g.vbaraw=Xc(t,TS(s.vba[0]),!0):s.defaults&&s.defaults.bin===bv&&(g.vbaraw=Xc(t,"xl/vbaProject.bin",!0))),g.bookType=l?"xlsb":"xlsx",g}function OS(t,e){var n=e||{},r="Workbook",i=bc.find(t,r);try{if(r="/!DataSpaces/Version",i=bc.find(t,r),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);if(Pm(i.content),r="/!DataSpaces/DataSpaceMap",i=bc.find(t,r),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);var o=Nm(i.content);if(1!==o.length||1!==o[0].comps.length||0!==o[0].comps[0].t||"StrongEncryptionDataSpace"!==o[0].name||"EncryptedPackage"!==o[0].comps[0].v)throw new Error("ECMA-376 Encrypted file bad "+r);if(r="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",i=bc.find(t,r),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);var a=Rm(i.content);if(1!=a.length||"StrongEncryptionTransform"!=a[0])throw new Error("ECMA-376 Encrypted file bad "+r);if(r="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",i=bc.find(t,r),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);Fm(i.content)}catch(l){}if(r="/EncryptionInfo",i=bc.find(t,r),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);var s=zm(i.content);if(r="/EncryptedPackage",i=bc.find(t,r),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);if(4==s[0]&&"undefined"!==typeof decrypt_agile)return decrypt_agile(s[1],i.content,n.password||"",n);if(2==s[0]&&"undefined"!==typeof decrypt_std76)return decrypt_std76(s[1],i.content,n.password||"",n);throw new Error("File is password-protected")}function kS(t,e){var n="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":n=Hl(t.slice(0,12));break;case"binary":n=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}function IS(t,e){return bc.find(t,"EncryptedPackage")?OS(t,e):Aw(t,e)}function PS(t,e){var n,r=t,i=e||{};return i.type||(i.type=Wl&&Buffer.isBuffer(t)?"buffer":"base64"),n=$c(r,i),AS(n,i)}function LS(t,e){var n=0;t:while(n<t.length)switch(t.charCodeAt(n)){case 10:case 13:case 32:++n;break;case 60:return bw(t.slice(n),e);default:break t}return pm.to_workbook(t,e)}function NS(t,e){var n="",r=kS(t,e);switch(e.type){case"base64":n=Hl(t);break;case"binary":n=t;break;case"buffer":n=t.toString("binary");break;case"array":n=Nc(t);break;default:throw new Error("Unrecognized type "+e.type)}return 239==r[0]&&187==r[1]&&191==r[2]&&(n=wh(n)),e.type="binary",LS(n,e)}function RS(t,e){var n=t;return"base64"==e.type&&(n=Hl(n)),"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer&&(n=new Uint8Array(t)),n="undefined"!==typeof El?El.utils.decode(1200,n.slice(2),"str"):Wl&&Buffer.isBuffer(t)?t.slice(2).toString("utf16le"):"undefined"!==typeof Uint8Array&&n instanceof Uint8Array?"undefined"!==typeof TextDecoder?new TextDecoder("utf-16le").decode(n.slice(2)):Dl(n.slice(2)):Rl(n.slice(2)),e.type="binary",LS(n,e)}function DS(t){return t.match(/[^\x00-\x7F]/)?Sh(t):t}function FS(t,e,n,r){return r?(n.type="string",pm.to_workbook(t,n)):pm.to_workbook(e,n)}function jS(t,e){Ll();var n=e||{};if(n.codepage&&"undefined"===typeof El&&console.error("Codepage tables are not loaded.  Non-ASCII characters may not give expected results"),"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer)return jS(new Uint8Array(t),(n=Rc(n),n.type="array",n));"undefined"!==typeof Uint8Array&&t instanceof Uint8Array&&!n.type&&(n.type="undefined"!==typeof Deno?"buffer":"array");var r=t,i=[0,0,0,0],o=!1;if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),E_={},n.dateNF&&(E_.dateNF=n.dateNF),n.type||(n.type=Wl&&Buffer.isBuffer(t)?"buffer":"base64"),"file"==n.type&&(n.type=Wl?"buffer":"binary",r=_c(t),"undefined"===typeof Uint8Array||Wl||(n.type="array")),"string"==n.type&&(o=!0,n.type="binary",n.codepage=65001,r=DS(t)),"array"==n.type&&"undefined"!==typeof Uint8Array&&t instanceof Uint8Array&&"undefined"!==typeof ArrayBuffer){var a=new ArrayBuffer(3),s=new Uint8Array(a);if(s.foo="bar",!s.foo)return n=Rc(n),n.type="array",jS($l(r),n)}switch((i=kS(r,n))[0]){case 208:if(207===i[1]&&17===i[2]&&224===i[3]&&161===i[4]&&177===i[5]&&26===i[6]&&225===i[7])return IS(bc.read(r,n),n);break;case 9:if(i[1]<=8)return Aw(r,n);break;case 60:return bw(r,n);case 73:if(73===i[1]&&42===i[2]&&0===i[3])throw new Error("TIFF Image File is not a spreadsheet");if(68===i[1])return gm(r,n);break;case 84:if(65===i[1]&&66===i[2]&&76===i[3])return dm.to_workbook(r,n);break;case 80:return 75===i[1]&&i[2]<9&&i[3]<9?PS(r,n):FS(t,r,n,o);case 239:return 60===i[3]?bw(r,n):FS(t,r,n,o);case 255:if(254===i[1])return RS(r,n);if(0===i[1]&&2===i[2]&&0===i[3])return mm.to_workbook(r,n);break;case 0:if(0===i[1]){if(i[2]>=2&&0===i[3])return mm.to_workbook(r,n);if(0===i[2]&&(8===i[3]||9===i[3]))return mm.to_workbook(r,n)}break;case 3:case 131:case 139:case 140:return cm.to_workbook(r,n);case 123:if(92===i[1]&&114===i[2]&&116===i[3])return ey(r,n);break;case 10:case 13:case 32:return NS(r,n);case 137:if(80===i[1]&&78===i[2]&&71===i[3])throw new Error("PNG Image File is not a spreadsheet");break;case 8:if(231===i[1])throw new Error("Unsupported Multiplan 1.x file!");break;case 12:if(236===i[1])throw new Error("Unsupported Multiplan 2.x file!");if(237===i[1])throw new Error("Unsupported Multiplan 3.x file!");break}return um.indexOf(i[0])>-1&&i[2]<=12&&i[3]<=31?cm.to_workbook(r,n):FS(t,r,n,o)}function BS(t,e,n,r,i,o,a){var s=Od(n),l=a.defval,u=a.raw||!Object.prototype.hasOwnProperty.call(a,"raw"),c=!0,h=null!=t["!data"],d=1===i?[]:{};if(1!==i)if(Object.defineProperty)try{Object.defineProperty(d,"__rowNum__",{value:n,enumerable:!1})}catch(m){d.__rowNum__=n}else d.__rowNum__=n;if(!h||t["!data"][n])for(var f=e.s.c;f<=e.e.c;++f){var p=h?(t["!data"][n]||[])[f]:t[r[f]+s];if(void 0!==p&&void 0!==p.t){var g=p.v;switch(p.t){case"z":if(null==g)break;continue;case"e":g=0==g?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+p.t)}if(null!=o[f]){if(null==g)if("e"==p.t&&null===g)d[o[f]]=null;else if(void 0!==l)d[o[f]]=l;else{if(!u||null!==g)continue;d[o[f]]=null}else d[o[f]]=u&&("n"!==p.t||"n"===p.t&&!1!==a.rawNumbers)?g:Vd(p,g,a);null!=g&&(c=!1)}}else{if(void 0===l)continue;null!=o[f]&&(d[o[f]]=l)}}return{row:d,isempty:c}}function zS(t,e){if(null==t||null==t["!ref"])return[];var n={t:"n",v:0},r=0,i=1,o=[],a=0,s="",l={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},c=null!=u.range?u.range:t["!ref"];switch(1===u.header?r=1:"A"===u.header?r=2:Array.isArray(u.header)?r=3:null==u.header&&(r=0),typeof c){case"string":l=Gd(c);break;case"number":l=Gd(t["!ref"]),l.s.r=c;break;default:l=c}r>0&&(i=0);var h=Od(l.s.r),d=[],f=[],p=0,g=0,m=null!=t["!data"],y=l.s.r,v=0,b={};m&&!t["!data"][y]&&(t["!data"][y]=[]);var _=u.skipHidden&&t["!cols"]||[],x=u.skipHidden&&t["!rows"]||[];for(v=l.s.c;v<=l.e.c;++v)if(!(_[v]||{}).hidden)switch(d[v]=Ld(v),n=m?t["!data"][y][v]:t[d[v]+h],r){case 1:o[v]=v-l.s.c;break;case 2:o[v]=d[v];break;case 3:o[v]=u.header[v-l.s.c];break;default:if(null==n&&(n={w:"__EMPTY",t:"s"}),s=a=Vd(n,null,u),g=b[a]||0,g){do{s=a+"_"+g++}while(b[s]);b[a]=g,b[s]=1}else b[a]=1;o[v]=s}for(y=l.s.r+i;y<=l.e.r;++y)if(!(x[y]||{}).hidden){var w=BS(t,l,y,d,r,o,u);(!1===w.isempty||(1===r?!1!==u.blankrows:u.blankrows))&&(f[p++]=w.row)}return f.length=p,f}var US=/"/g;function GS(t,e,n,r,i,o,a,s){for(var l=!0,u=[],c="",h=Od(n),d=null!=t["!data"],f=d&&t["!data"][n]||[],p=e.s.c;p<=e.e.c;++p)if(r[p]){var g=d?f[p]:t[r[p]+h];if(null==g)c="";else if(null!=g.v){l=!1,c=""+(s.rawNumbers&&"n"==g.t?g.v:Vd(g,null,s));for(var m=0,y=0;m!==c.length;++m)if((y=c.charCodeAt(m))===i||y===o||34===y||s.forceQuotes){c='"'+c.replace(US,'""')+'"';break}"ID"==c&&(c='"ID"')}else null==g.f||g.F?c="":(l=!1,c="="+g.f,c.indexOf(",")>=0&&(c='"'+c.replace(US,'""')+'"'));u.push(c)}return!1===s.blankrows&&l?null:u.join(a)}function qS(t,e){var n=[],r=null==e?{}:e;if(null==t||null==t["!ref"])return"";for(var i=Gd(t["!ref"]),o=void 0!==r.FS?r.FS:",",a=o.charCodeAt(0),s=void 0!==r.RS?r.RS:"\n",l=s.charCodeAt(0),u=new RegExp(("|"==o?"\\|":o)+"+$"),c="",h=[],d=r.skipHidden&&t["!cols"]||[],f=r.skipHidden&&t["!rows"]||[],p=i.s.c;p<=i.e.c;++p)(d[p]||{}).hidden||(h[p]=Ld(p));for(var g=0,m=i.s.r;m<=i.e.r;++m)(f[m]||{}).hidden||(c=GS(t,i,m,h,a,l,o,r),null!=c&&(r.strip&&(c=c.replace(u,"")),(c||!1!==r.blankrows)&&n.push((g++?s:"")+c)));return n.join("")}function VS(t,e){e||(e={}),e.FS="\t",e.RS="\n";var n=qS(t,e);if("undefined"==typeof El||"string"==e.type)return n;var r=El.utils.encode(1200,n,"str");return String.fromCharCode(255)+String.fromCharCode(254)+r}function HS(t){var e,n="",r="";if(null==t||null==t["!ref"])return[];var i,o=Gd(t["!ref"]),a="",s=[],l=[],u=null!=t["!data"];for(i=o.s.c;i<=o.e.c;++i)s[i]=Ld(i);for(var c=o.s.r;c<=o.e.r;++c)for(a=Od(c),i=o.s.c;i<=o.e.c;++i)if(n=s[i]+a,e=u?(t["!data"][c]||[])[i]:t[n],r="",void 0!==e){if(null!=e.F){if(n=e.F,!e.f)continue;r=e.f,-1==n.indexOf(":")&&(n=n+":"+n)}if(null!=e.f)r=e.f;else{if("z"==e.t)continue;if("n"==e.t&&null!=e.v)r=""+e.v;else if("b"==e.t)r=e.v?"TRUE":"FALSE";else if(void 0!==e.w)r="'"+e.w;else{if(void 0===e.v)continue;r="s"==e.t?"'"+e.v:""+e.v}}l[l.length]=n+"="+r}return l}function WS(t,e,n){var r=n||{},i=t?null!=t["!data"]:r.dense;null!=Ul&&null==i&&(i=Ul);var o=+!r.skipHeader,a=t||{};!t&&i&&(a["!data"]=[]);var s=0,l=0;if(a&&null!=r.origin)if("number"==typeof r.origin)s=r.origin;else{var u="string"==typeof r.origin?Fd(r.origin):r.origin;s=u.r,l=u.c}var c={s:{c:0,r:0},e:{c:l,r:s+e.length-1+o}};if(a["!ref"]){var h=Gd(a["!ref"]);c.e.c=Math.max(c.e.c,h.e.c),c.e.r=Math.max(c.e.r,h.e.r),-1==s&&(s=h.e.r+1,c.e.r=s+e.length-1+o)}else-1==s&&(s=0,c.e.r=e.length-1+o);var d=r.header||[],f=0,p=[];e.forEach((function(t,e){i&&!a["!data"][s+e+o]&&(a["!data"][s+e+o]=[]),i&&(p=a["!data"][s+e+o]),xc(t).forEach((function(n){-1==(f=d.indexOf(n))&&(d[f=d.length]=n);var u=t[n],c="z",h="",g=i?"":Ld(l+f)+Od(s+e+o),m=i?p[l+f]:a[g];!u||"object"!==typeof u||u instanceof Date?("number"==typeof u?c="n":"boolean"==typeof u?c="b":"string"==typeof u?c="s":u instanceof Date?(c="d",r.cellDates||(c="n",u=Ec(u)),h=null!=m&&m.z&&rc(m.z)?m.z:r.dateNF||mu[14]):null===u&&r.nullError&&(c="e",u=0),m?(m.t=c,m.v=u,delete m.w,delete m.R,h&&(m.z=h)):i?p[l+f]=m={t:c,v:u}:a[g]=m={t:c,v:u},h&&(m.z=h)):i?p[l+f]=u:a[g]=u}))})),c.e.c=Math.max(c.e.c,l+d.length-1);var g=Od(s);if(i&&!a["!data"][s]&&(a["!data"][s]=[]),o)for(f=0;f<d.length;++f)i?a["!data"][s][f+l]={t:"s",v:d[f]}:a[Ld(f+l)+g]={t:"s",v:d[f]};return a["!ref"]=zd(c),a}function YS(t,e){return WS(null,t,e)}function XS(t,e,n){if("string"==typeof e){if(null!=t["!data"]){var r=Fd(e);return t["!data"][r.r]||(t["!data"][r.r]=[]),t["!data"][r.r][r.c]||(t["!data"][r.r][r.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return XS(t,"number"!=typeof e?jd(e):Ld(n||0)+Od(e))}function JS(t,e){if("number"==typeof e){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}if("string"==typeof e){var n=t.SheetNames.indexOf(e);if(n>-1)return n;throw new Error("Cannot find sheet name |"+e+"|")}throw new Error("Cannot find sheet |"+e+"|")}function ZS(){return{SheetNames:[],Sheets:{}}}function KS(t,e,n,r){var i=1;if(!n)for(;i<=65535;++i,n=void 0)if(-1==t.SheetNames.indexOf(n="Sheet"+i))break;if(!n||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&t.SheetNames.indexOf(n)>=0){var o=n.match(/(^.*?)(\d+)$/);i=o&&+o[2]||0;var a=o&&o[1]||n;for(++i;i<=65535;++i)if(-1==t.SheetNames.indexOf(n=a+i))break}if(Ux(n),t.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return t.SheetNames.push(n),t.Sheets[n]=e,n}function QS(t,e,n){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var r=JS(t,e);switch(t.Workbook.Sheets[r]||(t.Workbook.Sheets[r]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}t.Workbook.Sheets[r].Hidden=n}function $S(t,e){return t.z=e,t}function tE(t,e,n){return e?(t.l={Target:e},n&&(t.l.Tooltip=n)):delete t.l,t}function eE(t,e,n){return tE(t,"#"+e,n)}function nE(t,e,n){t.c||(t.c=[]),t.c.push({t:e,a:n||"SheetJS"})}function rE(t,e,n,r){for(var i="string"!=typeof e?e:Gd(e),o="string"==typeof e?e:zd(e),a=i.s.r;a<=i.e.r;++a)for(var s=i.s.c;s<=i.e.c;++s){var l=XS(t,a,s);l.t="n",l.F=o,delete l.v,a==i.s.r&&s==i.s.c&&(l.f=n,r&&(l.D=!0))}var u=Bd(t["!ref"]);return u.s.r>i.s.r&&(u.s.r=i.s.r),u.s.c>i.s.c&&(u.s.c=i.s.c),u.e.r<i.e.r&&(u.e.r=i.e.r),u.e.c<i.e.c&&(u.e.c=i.e.c),t["!ref"]=zd(u),t}var iE={encode_col:Ld,encode_row:Od,encode_cell:jd,encode_range:zd,decode_col:Pd,decode_row:Ad,split_cell:Dd,decode_cell:Fd,decode_range:Bd,format_cell:Vd,sheet_add_aoa:Wd,sheet_add_json:WS,sheet_add_dom:Bw,aoa_to_sheet:Yd,json_to_sheet:YS,table_to_sheet:zw,table_to_book:Uw,sheet_to_csv:qS,sheet_to_txt:VS,sheet_to_json:zS,sheet_to_html:jw,sheet_to_formulae:HS,sheet_to_row_object_array:zS,sheet_get_cell:XS,book_new:ZS,book_append_sheet:KS,book_set_sheet_visibility:QS,cell_set_number_format:$S,cell_set_hyperlink:tE,cell_set_internal_link:eE,cell_add_comment:nE,sheet_set_array_formula:rE,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};Cl.version;let oE={rABS:"undefined"!==typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsBinaryString,rABF:"undefined"!==typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsArrayBuffer,rAT:"undefined"!==typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsText,readFile(t,e,n,r,i){ml.JSON===t||ml.GEOJSON===t?this.readTextFile(e,n,r,i):ml.EXCEL!==t&&ml.CSV!==t||this.readXLSXFile(e,n,r,i)},readTextFile(t,e,n,r){let i=new FileReader;i.onloadend=function(t){e&&e.call(r,t.target.result)},i.onerror=function(t){n&&n.call(r,t)},this.rAT?i.readAsText(t.file,"utf-8"):i.readAsBinaryString(t.file)},readXLSXFile(t,e,n,r){let i=new FileReader;i.onloadend=function(t){let i=new Uint8Array(t.target.result),o=jS(i,{type:"array"});try{if(o&&o.SheetNames&&o.SheetNames.length>0){let t=o.SheetNames[0],n=iE.sheet_to_csv(o.Sheets[t]);e&&e.call(r,n)}}catch(a){n&&n.call(r,a)}},i.onerror=function(t){n&&n.call(r,t)},this.rABF&&i.readAsArrayBuffer(t.file)},processDataToGeoJson(t,e,n,r,i){let o=null;if("EXCEL"===t||"CSV"===t)o=this.processExcelDataToGeoJson(e),n&&n.call(i,o);else if("JSON"===t||"GEOJSON"===t){let t=e;"string"===typeof t&&(t=JSON.parse(t)),"ISERVER"===t.type?o=t.data.recordsets[0].features:"FeatureCollection"===t.type?o=t:r&&r.call(i,Sl.i18n("msg_dataInWrongGeoJSONFormat")),n&&n.call(i,o)}else r&&r.call(i,Sl.i18n("msg_dataInWrongFormat"))},processExcelDataToGeoJson(t){let e=this.string2Csv(t),n=e.colTitles,r=-1,i=-1;for(let a=0,s=n.length;a<s;a++)this.isXField(n[a])&&(r=a),this.isYField(n[a])&&(i=a);let o=[];for(let a=0,s=e.rows.length;a<s;a++){let t=e.rows[a],n=Number(t[r]),s=Number(t[i]),l={};for(let r in e.colTitles){let t=e.colTitles[r];l[t]=e.rows[a][r]}let u={type:"Feature",geometry:{type:"Point",coordinates:[n,s]},properties:l};o.push(u)}return o},isXField(t){var e=t.toLowerCase();return"x"===e||"smx"===e||"jd"===e||"经度"===e||"东经"===e||"longitude"===e||"lot"===e||"lon"===e||"lng"===e||"x坐标"===e},isYField(t){var e=t.toLowerCase();return"y"===e||"smy"===e||"wd"===e||"纬度"===e||"北纬"===e||"latitude"===e||"lat"===e||"y坐标"===e},string2Csv(t,e){let n=t.split("\n"),r={};r["colTitles"]=e?[]:n[0].split(","),r["rows"]=[];for(let i=e?0:1;i<n.length;i++)n[i]&&r["rows"].push(n[i].split(","));return r}};class aE{constructor(t){this.datasets=t,this.EVENT_TYPES=["getdatafailed"],this.events=new fe(this,null,this.EVENT_TYPES)}getDatasetInfo(t){let e=this.datasets.url,n=this;Be.get(e).then((function(t){return t.json()})).then((function(e){if(e.datasetInfo){let r=e.datasetInfo;n.datasetsInfo={dataSourceName:r.dataSourceName,datasetName:r.name,mapName:e.name},t({result:n.datasetsInfo})}})).catch((function(t){console.log(t),n._fireFailedEvent(t)}))}getDataFeatures(t,e){let n,r,i,o=t.result,a={name:o.datasetName+"@"+o.dataSourceName};Object.assign(a,this.datasets.queryInfo),n=new bn(a),r=new Kr({queryParameter:n,datasetNames:[o.dataSourceName+":"+o.datasetName],fromIndex:0,toIndex:1e5}),i=new Qr(o.dataUrl,{eventListeners:{processCompleted:e,processFailed:function(){}}}),i.processAsync(r)}getLayerFeatures(t,e){let n,r,i,o=t.result,a={name:o.mapName};Object.assign(a,this.datasets.queryInfo),n=new bn(a),r=new lo({queryParams:[n],expectCount:1e5}),i=new uo(o.dataUrl,{eventListeners:{processCompleted:e,processFailed:function(){}}}),i.processAsync(r)}getDataInfoByIptl(t){this.getServiceInfo(this.datasets.url,t)}getServiceInfo(t,e){let n=this;Be.get(t,null,{withCredentials:this.datasets.withCredentials}).then(t=>t.json()).then(r=>{if(!1!==r.succeed)if(r.dataItemServices&&r.dataItemServices.length>0){let i,o=r.dataItemServices;o.forEach(r=>{if("RESTDATA"===r.serviceType&&"PUBLISHED"===r.serviceStatus)i=r;else{if("RESTMAP"!==r.serviceType||"PUBLISHED"!==r.serviceStatus)return void n.getDatafromContent(t,e);i=r}}),i&&n.getDatafromRest(i.serviceType,i.address,e)}else n.getDatafromContent(t,e);else n._fireFailedEvent(r)}).catch(t=>{console.log(t),n._fireFailedEvent(t)})}getDatafromContent(t,e){let n={result:{}},r=this;t+="/content.json?pageSize=9999999&currentPage=1",Be.get(t,null,{withCredentials:this.datasets.withCredentials}).then(t=>t.json()).then(t=>{if(!1!==t.succeed){if(t.type){if("JSON"===t.type||"GEOJSON"===t.type){if(t.content=JSON.parse(t.content.trim()),!t.content.features)return void console.log(Sl.i18n("msg_jsonResolveFiled"));let e=this._formatGeoJSON(t.content);n.result.features={type:t.content.type,features:e}}else if("EXCEL"===t.type||"CSV"===t.type){let e=this._excelData2Feature(t.content);n.result.features={type:"FeatureCollection",features:e}}e(n,"content")}}else r._fireFailedEvent(t)},this).catch(t=>{console.log(t),r._fireFailedEvent(t)})}getDatafromRest(t,e,n){let r=this,i=this.datasets.withCredentials;if("RESTDATA"===t){let t,o,a=e+"/data/datasources";Be.get(a,null,{withCredentials:i}).then(t=>t.json()).then(s=>{t=s.datasourceNames[0],a=`${e}/data/datasources/${t}/datasets`,Be.get(a,null,{withCredentials:i}).then(t=>t.json()).then(i=>(o=i.datasetNames[0],r.getDatafromRestData(e+"/data",[t+":"+o],n),[t+":"+o])).catch((function(t){r._fireFailedEvent(t)}))}).catch((function(t){r._fireFailedEvent(t)}))}else{let t,o,a,s=e+"/maps";Be.get(s,null,{withCredentials:i}).then(t=>t.json()).then(l=>{t=l[0].name,a=l[0].path,s=s=`${e}/maps/${t}/layers`,Be.get(s,null,{withCredentials:i}).then(t=>t.json()).then(t=>(o=t[0].subLayers.layers[0].caption,r.getDatafromRestMap(o,a,n),o)).catch((function(t){r._fireFailedEvent(t)}))}).catch((function(t){r._fireFailedEvent(t)}))}}getDatafromRestData(t,e,n){let r=this;this.datasets.queryInfo.attributeFilter=this.datasets.queryInfo.attributeFilter||"SmID>0",this._getFeatureBySQL(t,e,this.datasets.queryInfo,t=>{n(t,"RESTDATA")},t=>{console.log(t),r._fireFailedEvent(t)})}getDatafromRestMap(t,e,n){let r=this;this.datasets.queryInfo.attributeFilter=this.datasets.queryInfo.attributeFilter||"smid=1",this._queryFeatureBySQL(e,t,this.datasets.queryInfo,null,null,t=>{n(t,"RESTMAP")},t=>{console.log(t),r._fireFailedEvent(t)})}_getFeatureBySQL(t,e,n,r,i){let o,a,s,l={name:e.join().replace(":","@")};Object.assign(l,n),o=new bn(l),s=new Kr({queryParameter:o,datasetNames:e,fromIndex:0,toIndex:1e5,returnContent:!0});let u={eventListeners:{processCompleted:t=>{r&&r(t)},processFailed:t=>{i&&i(t)}}};a=new Qr(t,u),a.processAsync(s)}_queryFeatureBySQL(t,e,n,r,i,o,a,s,l,u){var c,h,d={name:e};Object.assign(d,n),c=new bn(d),r&&(c.fields=r);var f={queryParams:[c]};u&&(f.queryOption=b.ATTRIBUTE),s&&(f.startRecord=s),l&&(f.expectCount=l),i&&(f.prjCoordSys={epsgCode:i}),h=new lo(f),this._queryBySQL(t,h,t=>{"processCompleted"===t.type?o(t):a(t)})}_queryBySQL(t,e,n,r){var i=this,o=new uo(t,{eventListeners:{scope:i,processCompleted:n,processFailed:n},format:i._processFormat(r)});o.processAsync(e)}_processFormat(t){return t||m.GEOJSON}_formatGeoJSON(t){let e=t.features;return e.forEach((t,e)=>{t.properties["index"]=e}),e}_excelData2Feature(t){let e=t.colTitles,n=-1,r=-1;for(let o=0,a=e.length;o<a;o++)oE.isXField(e[o])&&(n=o),oE.isYField(e[o])&&(r=o);let i=[];for(let o=0,a=t.rows.length;o<a;o++){let e=t.rows[o],a=Number(e[n]),s=Number(e[r]),l={};for(let n in t.colTitles){let e=t.colTitles[n];l[e]=t.rows[o][n]}l["index"]=o+"";let u={type:"Feature",geometry:{type:"Point",coordinates:[a,s]},properties:l};i.push(u)}return i}_fireFailedEvent(t){let e=t?{error:t,message:Sl.i18n("msg_getdatafailed")}:{message:Sl.i18n("msg_getdatafailed")};this.events.triggerEvent("getdatafailed",e)}}class sE{constructor(t){this.datasets=t.datasets,this.xField=[],this.yField=[],this.grid={top:"50px",bottom:"50px",left:"50px",right:"60px"},this.chartType=t.type||"bar",this._initXYField(t.chartOptions),this.EVENT_TYPES=["getdatafailed"],this.events=new fe(this,null,this.EVENT_TYPES)}_initXYField(t){let e=this;t&&t.length>0&&t.forEach((function(t){t.xAxis&&e.xField.push({field:t.xAxis.field,name:t.xAxis.name}),t.yAxis&&e.yField.push({field:t.yAxis.field,name:t.yAxis.name})}))}getDatasetInfo(t){this.createChart=t,this.datasets&&this._checkUrl(this.datasets.url)&&(this.chartModel=new aE(this.datasets),"iServer"===this.datasets.type?this.chartModel.getDatasetInfo(this._getDatasetInfoSuccess.bind(this)):"iPortal"===this.datasets.type&&this.chartModel.getDataInfoByIptl(this._getDataInfoSuccess.bind(this)),this.chartModel.events.on({getdatafailed:t=>{this.events.triggerEvent("getdatafailed",t)}}))}_getDatasetInfoSuccess(t){let e=this.datasets.url,n=e.indexOf("rest");if(n>0){let r=e.indexOf("/",n+5),i=e.substring(n+5,r),o=e.substring(0,n+4)+"/data";if("maps"===i){let i=e.indexOf("/",r+1),a=e.substring(r+1,i);o=e.substring(0,n+4)+"/maps/"+a,t.result.dataUrl=o,this._getLayerFeatures(t)}else"data"===i&&(t.result.dataUrl=o,this._getDataFeatures(t))}}_getDataInfoSuccess(t,e){let n=this;"RESTMAP"===e?n._getChartDatasFromLayer(t):n._getChartDatas(t)}_getDataFeatures(t){this.chartModel.getDataFeatures(t,this._getChartDatas.bind(this))}_getLayerFeatures(t){this.chartModel.getLayerFeatures(t,this._getChartDatasFromLayer.bind(this))}_getChartDatas(t){if(t){this.features=t.result.features;let e=this.features.features,n={};if(e.length){let t=e[0],r=[],i=[];for(let e in t.properties)r.push(e),i.push(this._getDataType(t.properties[e]));n={features:e,fieldCaptions:r,fieldTypes:i,fieldValues:[]};for(let o in i){let t=[];for(let r in e){let i=e[r],a=n.fieldCaptions[o],s=i.properties[a];t.push(s)}n.fieldValues.push(t)}this.createChart(n)}}}_getChartDatasFromLayer(t){if(t.result.recordsets){let e=t.result.recordsets[0],n=e.features.features;this.features=e.features;let r={};if(n.length){r={features:e.features,fieldCaptions:e.fieldCaptions,fieldTypes:e.fieldTypes,fieldValues:[]};for(let t in r.fieldCaptions){let e=[];for(let i in n){let o=n[i],a=r.fieldCaptions[t],s=o.properties[a];e.push(s)}r.fieldValues.push(e)}this.createChart(r)}}}_createChartOptions(t){return this.calculatedData=this._createChartDatas(t),this.updateChartOptions(this.chartType)}changeType(t){if(t!==this.chartType)return this.chartType=t,this.updateChartOptions(this.chartType)}updateData(t,e,n){this.updateChart=n,this.xField=[],this.yField=[],this._initXYField(e),t.type=t.type||"iServer",t.withCredentials=t.withCredentials||!1,this.datasets=t,this.getDatasetInfo(this._updateDataSuccess.bind(this))}_updateDataSuccess(t){let e=this._createChartOptions(t);this.updateChart(e)}updateChartOptions(t,e){if(this.calculatedData){let n=this.grid,r=this._createChartSeries(this.calculatedData,t),i=[];for(let t in this.calculatedData.XData)i.push({value:this.calculatedData.XData[t].fieldsData});let o={type:"category",name:this.xField[0].name||"X",data:i,nameTextStyle:{color:"#fff",fontSize:14},splitLine:{show:!1},axisLine:{lineStyle:{color:"#eee"}}},a={type:"value",name:this.yFieldName||"Y",data:{},nameTextStyle:{color:"#fff",fontSize:14},splitLine:{show:!1},axisLine:{lineStyle:{color:"#eee"}}},s={formatter:"{b0}: {c0}"},l="#404a59";return e&&(e.grid&&(n=e.grid),e.tooltip&&(s=e.tooltip),e.backgroundColor&&(l=e.backgroundColor)),{backgroundColor:l,grid:n,series:r,xAxis:o,yAxis:a,tooltip:s}}}_createChartDatas(t){let e=0,n=[],r=t.fieldCaptions,i=this;r.forEach((function(t,n){i.xField[0]&&t===i.xField[0].field&&(e=n)})),this.yFieldName="",this.yField.forEach((function(t,e){0!==e&&(i.yFieldName=i.yFieldName+","),i.yFieldName=i.yFieldName+t.name,r.forEach((function(e,r){e===t.field&&n.push(r)}))}));let o=this._getAttrData(t,e),a=[];if(n.length>0)n.forEach((function(e){let n=[];for(let r in t.fieldValues[e])n.push({value:t.fieldValues[e][r]});a.push(n)}));else{let t=[],e=[],n=o.length;for(let r=0;r<n;r++){let n=!1;for(let i=0,a=e.length;i<a;i++)if(o[r].fieldsData===e[i].fieldsData){t[i].value++,e[i].recordIndexs.push(r),n=!0;break}n||o[r].fieldsData&&(e.push({fieldsData:o[r].fieldsData,recordIndexs:[r]}),t.push({value:1}))}o=e,a=[t]}return{XData:o,YData:a}}_getAttrData(t,e){0===e&&(this.xField=[{field:t.fieldCaptions[e],name:t.fieldCaptions[e]}]);let n=[];for(let r=0,i=t.fieldValues[e].length;r<i;r++){let i=t.fieldValues[e][r];n.push({recordIndexs:r,fieldsData:i})}return n}_createChartSeries(t,e){let n=[],r=t.YData;return r.forEach((function(t){let r=0,i=[];for(let e of t)r=e.value,i.push({value:r});let o={type:e,data:i,name:"y"};n.push(o)})),n}_isDate(t){let e=/((^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(10|12|0?[13578])([-\/\._])(3[01]|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(11|0?[469])([-\/\._])(30|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(0?2)([-\/\._])(2[0-8]|1[0-9]|0?[1-9])$)|(^([2468][048]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([3579][26]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][13579][26])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][13579][26])([-\/\._])(0?2)([-\/\._])(29)$))/gi;return e.test(t)}_isNumber(t){let e=Number(t);return 0===e||!isNaN(e)}_getDataType(t){if(null!==t&&void 0!==t&&""!==t){if(this._isDate(t))return"DATE";if(this._isNumber(t))return"NUMBER"}return"STRING"}_checkUrl(t){let e;return e=!(""===t||!this._isMatchUrl(t))&&(!/^http[s]?:\/\/localhost/.test(t)&&!/^http[s]?:\/\/127.0.0.1/.test(t)),e}_isMatchUrl(t){var e=new RegExp("(https?|http|file|ftp)://[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]");return e.test(t)}getStyle(){let t={grid:this.grid,tooltip:this.tooltip,backgroundColor:this.backgroundColor};return t}getFeatures(){return this.features}setStyle(t){return this.updateChartOptions(this.chartType,t)}}class lE{constructor(t,e){this.domID=t,this.chartType=e.type||"bar",e.datasets.type=e.datasets.type||"iServer",e.datasets.withCredentials=e.datasets.withCredentials||!1,this.viewModel=new sE(e),this._fillDataToView()}onAdd(t){this.addChart=t}_fillDataToView(){let t=new bl;this.viewModel.getDatasetInfo(this._createChart.bind(this)),this.viewModel.events.on({getdatafailed:e=>{t.showView(e.message)}})}getStyle(){return this.viewModel.getStyle()}getFeatures(){return this.viewModel.getFeatures()}setStyle(t){let e=this.viewModel.setStyle(t);this._updateChart(e)}changeType(t){if(this.chartType!==t){this.chartType=t;let e=this.viewModel.changeType(t);this._updateChart(e)}}updateData(t,e){let n=this;this.viewModel.updateData(t,e,(function(t){n._updateChart(t),n.addChart&&n.addChart()}))}_createChart(t){this.echart=_l["init"](document.getElementById(this.domID),null,{renderer:"canvas"});let e=this.viewModel._createChartOptions(t);this.echart.setOption(e),this.addChart&&this.addChart()}_updateChart(t){this.echart&&(this.echart.clear(),this.echart.setOption(t))}}class uE{constructor(t){t=t||{},this.id=t.id?t.id:null,this.rootContainer=null}getElement(){return this.id&&(this.rootContainer.id=this.id),this.rootContainer}_initView(){}showView(){this.rootContainer.hidden=!1}closeView(){this.rootContainer.hidden=!0}}class cE extends uE{constructor(t){super(t);let e=t.title?t.title:"";this._initView(e)}_initView(t){const e=document.createElement("div");e.setAttribute("class","component-container");const n=document.createElement("div");n.setAttribute("class","component-title");const r=document.createElement("div");r.innerHTML=t,n.appendChild(r),e.appendChild(n);const i=document.createElement("div");return i.setAttribute("class","component-content"),e.appendChild(i),this.content=i,this.rootContainer=e,e}getContentElement(){return this.content}appendContent(t){this.content.appendChild(t)}}class hE extends uE{constructor(t){super(t),this._initView(t)}_initView(t){let e=this._createElement("div","component-selecttool");if(t.labelName){let n=this._createElement("label","component-selecttool__lable--describe",e);n.innerHTML=t.labelName}let n=this._createElement("div","component-selecttool--chart",e);n.setAttribute("tabindex","1");let r=this._createElement("div","component-selecttool__name",n);r.title=t.optionsArr[0],r.innerHTML=t.optionsArr[0];let i=this._createElement("div","component-selecttool__trianglebtn--chart",n),o=this._createElement("div","component-triangle-down-img",i),a=this._createElement("div","component-selecttool__content",n),s=this._createElement("div","component-selecttool__content--chart",a),l=this._createElement("div","component-selecttool__scrollarea__content",s);l.setAttribute("tabindex","1"),this.createOptions(l,t.optionsArr),this.optionClickEvent(l,r,t.optionsClickCb),this._selectClickEvent(n,a,o),this.rootContainer=e}createOptions(t,e){for(let n in e){let r=this._createElement("div","component-selecttool__option",t);r.title=e[n],r.innerHTML=e[n]}}_selectClickEvent(t,e,n){t.onclick=function(t){"block"===e.style.display?(e.style.display="none",n.className="component-triangle-down-img"):(e.style.display="block",n.className="triangle-up-img"),t.preventDefault(),t.stopPropagation()},t.onmousedown=function(t){t.target!==this&&(this.focus(),t.preventDefault(),t.stopPropagation())},t.onblur=function(){e.style.display="none",n.className="component-triangle-down-img"}}_createElement(t,e,n){let r=document.createElement(t||"div");return e&&(r.className=e),n&&n.appendChild(r),r}optionClickEvent(t,e,n){for(let r=0;r<t.children.length;r++){let i=t.children[r];i.onclick=function(){e.innerHTML=i.innerHTML,e.title=i.title,i.getAttribute("data-value")&&e.setAttribute("data-value",i.getAttribute("data-value")),n&&n(i)}}}}class dE extends uE{constructor(t){super(t),this._initView(t)}_initView(t){let e=document.createElement("div");e.className="component-dropdownbox--container";let n=document.createElement("div");n.setAttribute("tabindex","1"),n.className="component-dropdownbox",e.appendChild(n);let r=document.createElement("div");n.appendChild(r),this._createDropDownOption(t[0],r);let i=document.createElement("div");i.className="component-dropdownbox__triangle-btn",n.appendChild(i);let o=document.createElement("div");o.className="component-triangle-down-img",i.appendChild(o);let a={parentEle:n,dropDownContent:["component-dropdownbox__content component-dropdownbox__content--chart","dropDownContent"],scrollareaContent:"component-selecttool__scrollarea__content",optionsArr:t,triangleBtn:o,dropDownTopContainer:r};this._createDropDownBox(a),this.rootContainer=e}_createDropDownBox(t){let e=t.parentEle,n=t.dropDownTopContainer,r=document.createElement("div");r.className=t.dropDownContent[0],e.appendChild(r);let i=document.createElement("div");i.className=t.scrollareaContent,r.appendChild(i);let o=t.optionsArr;for(let l=0;l<o.length;l++)this._createDropDownOption(o[l],i);let a=t.triangleBtn;this._dropDownClickEvent(e,r,a),this._eleOnblur(e,r,a);let s=i.children;for(let l=0;l<s.length;l++)s[l].onclick=function(){n.innerHTML=s[l].outerHTML}}_createDropDownOption(t,e){let n=document.createElement("div");n.className="component-dropdownbox__item";let r=t;r["dataValue"]&&n.setAttribute("data-value",r["dataValue"]),e.appendChild(n);let i=document.createElement("div");i.className="component-dropdownbox__item__img",n.appendChild(i);let o=document.createElement("div");r.icon.className&&(o.className=r.icon.className),r.icon.background&&(o.style.background=r.icon.background),i.appendChild(o);let a=document.createElement("div");a.className="component-dropdownbox__item__title",a.title=r.title,a.innerHTML=r.title,n.appendChild(a);let s=document.createElement("div");s.className="component-dropdownbox__item__remark",s.title=r.remark,s.innerHTML=r.remark,n.appendChild(s)}_dropDownClickEvent(t,e,n){t.onclick=function(t){"block"===e.style.display?(e.style.display="none",n.className="component-triangle-down-img"):(e.style.display="block",n.className="triangle-up-img"),t.preventDefault(),t.stopPropagation()},t.onmousedown=function(t){t.target!==this&&(this.focus(),t.preventDefault(),t.stopPropagation())}}_eleOnblur(t,e,n){t.onblur=function(){e.style.display="none",n.className="component-triangle-down-img"}}_createElement(t,e,n){let r=document.createElement(t||"div");return e&&(r.className=e),n&&n.appendChild(r),r}}class fE extends uE{constructor(t){t=t||{},super(t),t.title=t.title?t.title:"",this._initView(t.title)}_initView(t){const e=document.createElement("div");e.setAttribute("class","component-popcontainer");const n=document.createElement("div");n.setAttribute("class","component-popcontainer__header");const r=document.createElement("label");r.setAttribute("class","component-popcontainer__header__title"),r.innerHTML=t,n.appendChild(r);const i=document.createElement("span");i.setAttribute("class","supermapol-icons-clear component-popcontainer__header__close"),i.onclick=this.closeView.bind(this),e.appendChild(i),e.appendChild(n);const o=document.createElement("div");o.setAttribute("class","component-popcontainer__content"),this.content=o,e.appendChild(o),this.rootContainer=e}appendContent(t){this.content.appendChild(t)}}class pE extends fE{constructor(t){t.title=t.title?t.title:"属性",super(t),this.rootContainer.firstChild.hidden=!0,t.attributes=t.attributes?t.attributes:[],this._createAttributesTable(t.attributes)}_createAttributesTable(t){const e=document.createElement("table");e.setAttribute("class","component-popcontainer__content__table");const n=document.createElement("tbody");let r=!0;for(let i in t){const e=document.createElement("tr");r&&e.setAttribute("class","component-popcontainer__content__td--color");const o=document.createElement("td"),a=document.createElement("Span");a.innerHTML=i,o.appendChild(a);const s=document.createElement("td");s.innerHTML=t[i],e.appendChild(o),e.appendChild(s),n.appendChild(e),r=!r}e.appendChild(n),this.appendContent(e)}}class gE extends uE{constructor(t){super(t),this._initView()}_initView(){const t=document.createElement("div");t.setAttribute("class","component-tabpage");const e=document.createElement("ul");this.header=e;const n=document.createElement("div");n.setAttribute("class","component-tabpage__content"),this.content=n,t.appendChild(e),t.appendChild(n),this.rootContainer=t}setTabs(t){this.removeAllTabs(),this.appendTabs(t)}appendTabs(t){for(let e=0;e<t.length;e++){let n=document.createElement("span");n.index=e,n.appendChild(document.createTextNode(t[e].title)),n.onclick=this._changeTabsPage.bind(this);let r=t[e].content;r.index=e,r.hidden=!0,this.header.appendChild(n),this.content.appendChild(r)}this.header.firstChild.setAttribute("class","on"),this.content.firstChild.hidden=!1}removeTab(t){this.header.removeChild(this.header.children[t]),this.content.removeChild(this.content.children[t])}removeAllTabs(){for(let t=this.header.children.length;t>0;t--)this.header.removeChild(this.header.children[t]),this.content.removeChild(this.content.children[t])}_changeTabsPage(t){const e=t.target.index;for(let n=0;n<this.header.children.length;n++)this.header.children[n].setAttribute("class",""),this.content.children[n].hidden=!0,n===e&&(this.header.children[n].setAttribute("class","on"),this.content.children[n].hidden=!1)}}class mE extends gE{constructor(t){super(t),this.rootContainer.classList.add("component-citytabpage--noneBoxShadow"),this.config=t.config,Wt.isArray(this.config)?(this.header.hidden=!0,this._createCityItem("城市",this.config),this.content.style.border="none"):(this._createTabs(),this.header.onclick=t=>{for(let e=0;e<this.header.children.length;e++)this.header.children[e].setAttribute("class","");t.target.setAttribute("class","on"),this._createCityContent(t.target.innerHTML)})}_createTabs(){if(Wt.isArray(this.config))for(let t=0;t<this.config.length;t++){let e="";for(const r in this.config[t])e+=r;let n=document.createElement("li");n.innerHTML=e,this.header.appendChild(n)}else for(const t in this.config){let e=document.createElement("li");e.innerHTML=t,this.header.appendChild(e)}this.header.firstChild.setAttribute("class","on"),this._createCityContent(this.header.firstChild.innerHTML)}_createCityContent(t){for(let n=this.content.children.length;n>0;n--)this.content.removeChild(this.content.children[n-1]);const e=this.config[t];for(let n in e)this._createCityItem(n,e[n])}_createCityItem(t,e){const n=document.createElement("div"),r=document.createElement("div");r.setAttribute("class","component-citytabpag__py-key"),r.innerHTML=t,n.appendChild(r);const i=document.createElement("div");i.setAttribute("class","component-citytabpag__content");for(let o=0;o<e.length;o++){let t=document.createElement("span");t.innerHTML=e[o],i.appendChild(t)}"HOT"===t&&(i.style.width="428px"),n.appendChild(i),this.content.appendChild(n)}}class yE extends uE{constructor(t){super(t),this.navTabsTitle=null,this.navTabsContent=null,t.tabs=t.tabs?t.tabs:[],this._initView(t.tabs)}_initView(t){const e=document.createElement("div");e.setAttribute("class","component-navtabspage");const n=document.createElement("span");n.setAttribute("class","supermapol-icons-close"),n.onclick=this.closeView.bind(this),e.appendChild(n);const r=document.createElement("div");this.navTabsTitle=r,r.setAttribute("class","component-navtabspage__title"),e.appendChild(r);const i=document.createElement("div");this.navTabsContent=i,i.setAttribute("class","component-navtabspage__content"),e.appendChild(i),t.length>0&&this.appendTabs(t),this.rootContainer=e}setTabs(t){this.removeAllTabs(),this.appendTabs(t)}appendTabs(t){for(let e=0;e<t.length;e++){let n=document.createElement("span");n.index=e,n.appendChild(document.createTextNode(t[e].title)),n.onclick=this._changeTabsPage.bind(this);let r=t[e].content;r.index=e,r.hidden=!0,this.navTabsTitle.appendChild(n),this.navTabsContent.appendChild(r)}this.navTabsTitle.firstChild.setAttribute("class","component-navtabspage__tabs--select"),this.navTabsContent.firstChild.hidden=!1}removeTab(t){this.navTabsTitle.removeChild(this.navTabsTitle.children[t]),this.navTabsContent.removeChild(this.navTabsContent.children[t])}removeAllTabs(){for(let t=this.navTabsTitle.children.length;t>0;t--)this.navTabsTitle.removeChild(this.navTabsTitle.children[t]),this.navTabsContent.removeChild(this.navTabsContent.children[t])}_changeTabsPage(t){const e=t.target.index;for(let n=0;n<this.navTabsTitle.children.length;n++)this.navTabsTitle.children[n].setAttribute("class",""),this.navTabsContent.children[n].hidden=!0,n===e&&(this.navTabsTitle.children[n].setAttribute("class","component-navtabspage__tabs--select"),this.navTabsContent.children[n].hidden=!1)}}class vE extends uE{constructor(t){t=t||{},super(t),this.currentPage=0,this.pageNumberLis=[],this.currentPageNumberLis=[],this.linkageEvent=null,t.contents=t.contents?t.contents:null,t.pageCounts=t.pageCounts?t.pageCounts:0,this._initView(t.contents,t.pageCounts)}setLinkageEvent(t){this.linkageEvent=t}_initView(t,e){const n=document.createElement("div");n.setAttribute("class","component-pagination");const r=document.createElement("div");r.setAttribute("class","component-pagination__content"),n.appendChild(r),this.content=r;const i=document.createElement("ul");i.setAttribute("class","component-pagination__link"),i.onclick=this._changePageEvent.bind(this),n.appendChild(i),this._createLink(i),this.link=i,t&&this.setContent(t),0!==e&&this.setPageLink(e),this.rootContainer=n}setContent(t){this.clearContent(),this.appendContent(t)}appendContent(t){this.content.appendChild(t)}clearContent(){for(let t=this.content.children.length-1;t>=0;t--)this.content.removeChild(this.content.children[t])}setPageLink(t){this.pageNumberLis=[],this.currentPageNumberLis=[],this.clearPageLink(),this._createPageLi(t),this._appendPageLink()}_createPageLi(t){for(let e=0;e<t;e++){const t=document.createElement("li");t.innerHTML=e+1,this.pageNumberLis.push(t)}if(this.pageNumberLis[0].setAttribute("class","active"),this.currentPage=1,t<5)this.currentPageNumberLis=this.pageNumberLis;else for(let e=0;e<5;e++)this.currentPageNumberLis.push(this.pageNumberLis[e])}_appendPageLink(){for(let t=0;t<this.currentPageNumberLis.length;t++)this.link.insertBefore(this.currentPageNumberLis[t],this.link.childNodes[this.link.children.length-2]);for(let t=0;t<this.currentPageNumberLis.length;t++)this.currentPageNumberLis[t].setAttribute("class",""),Number(this.currentPageNumberLis[t].innerHTML)===this.currentPage&&this.currentPageNumberLis[t].setAttribute("class","active");this._changeDisableState(),this.linkageEvent&&this.linkageEvent(this.currentPage)}clearPageLink(){for(let t=this.link.children.length-3;t>1;t--)this.link.removeChild(this.link.children[t])}_createLink(t){for(let e=0;e<4;e++){const n=document.createElement("li");n.setAttribute("class","disable");const r=document.createElement("span");n.appendChild(r),0===e?(r.id="first",r.setAttribute("class","supermapol-icons-first")):1===e?(r.id="prev",r.setAttribute("class","supermapol-icons-prev")):2===e?(r.id="next",r.setAttribute("class","supermapol-icons-next")):3===e&&(r.id="last",r.setAttribute("class","supermapol-icons-last")),t.appendChild(n)}}_changePageEvent(t){const e=t.target;if("disable"===e.parentElement.classList[0])return;let n;if(e.id)n=e.id;else{if(!Number(e.innerHTML))return;n=Number(e.innerHTML)}this._prePageNum(n),this.clearPageLink(),this._appendPageLink()}_changeDisableState(){this.link.children[0].setAttribute("class",""),this.link.children[1].setAttribute("class",""),this.link.children[this.link.children.length-1].setAttribute("class",""),this.link.children[this.link.children.length-2].setAttribute("class",""),1===this.currentPage&&(this.link.children[0].setAttribute("class","disable"),this.link.children[1].setAttribute("class","disable")),this.currentPage===this.pageNumberLis.length&&(this.link.children[this.link.children.length-1].setAttribute("class","disable"),this.link.children[this.link.children.length-2].setAttribute("class","disable"))}_prePageNum(t){const e=[];if(this.currentPage="first"===t?1:"last"===t?this.pageNumberLis.length:"prev"===t?this.currentPage-1:"next"===t?this.currentPage+1:t,this.pageNumberLis.length<=5)for(let n=0;n<this.pageNumberLis.length;n++)e.push(this.pageNumberLis[n]);else if(this.currentPage<=3)for(let n=0;n<5;n++)e.push(this.pageNumberLis[n]);else if(this.currentPage>=this.pageNumberLis.length-3)for(let n=this.pageNumberLis.length-5;n<this.pageNumberLis.length;n++)e.push(this.pageNumberLis[n]);else for(let n=this.currentPage-3;n<=this.currentPage+1;n++)e.push(this.pageNumberLis[n]);e.length>0&&(this.currentPageNumberLis=e)}}let bE={getFileType(t){let e=/^.*\.(?:csv)$/i,n=/^.*\.(?:xls|xlsx)$/i,r=/^.*\.(?:geojson|json)$/i;return n.test(t)?ml.EXCEL:e.test(t)?ml.CSV:r.test(t)?ml.GEOJSON:null}};var _E=n("b71a"),xE=n.n(_E);function wE(t,e){const n=e&&e.styles&&e.styles.style,r=e&&e.captionFields&&e.captionFields.captionField,i={nodes:[],edges:[]};return t.forEach(t=>{const e=t.path;if(e){const{nodes:t,edges:o}=CE(e,n,r);i.nodes.push(...t),i.edges.push(...o)}else if(EE(t)){const e=TE(t,n);i.edges.push(e)}else{const e=ME(t,n,r);i.nodes.push(e)}}),{nodes:SE(i.nodes),edges:SE(i.edges,"edgeId")}}function SE(t,e="id"){return xE()(t,e)}function EE(t){return t.hasOwnProperty("start")&&t.hasOwnProperty("end")}function CE(t,e,n){const r={nodes:[],edges:[]};return t.forEach(t=>{if(EE(t)){const n=TE(t,e);r.edges.push(n)}else{const i=ME(t,e,n);r.nodes.push(i)}}),r}function ME(t,e,n){const{id:r,properties:i,lables:o}=t,a=e?OE(t,e):{},s=kE(t,n),l=a.fillColor||"",u={id:r+"",label:s,properties:i,lables:o};return a.size&&(u.size=a.size,delete a.size),a.fillColor&&(u.style={fill:l,stroke:l},delete a.fillColor),0!==Object.keys(a).length&&(u.labelCfg={style:a}),u}function TE(t,e){const{start:n,end:r,id:i,type:o,properties:a}=t,s=e?AE(t,e):{};return{source:n+"",target:r+"",edgeId:i+"",label:o,labelCfg:{style:s},properties:a}}function AE(t,e){if(!e)return{};const{id:n,type:r}=t,i=e.filter(t=>"relationShip"===t.type);for(let o=0;o<i.length;o++){const{textColor:t,font:e,relationTypes:a,relationIds:s}=i[o],l=JSON.parse(s||"[]"),u=JSON.parse(a||"[]");if(l.includes(n)||u.includes(r))return{fontSize:PE(e.fontSize),fontFamily:e.fontName,fill:t,...IE(e.fontStyle)}}return{}}function OE(t,e){if(!e)return{};const{id:n,labels:r}=t,i=e.filter(t=>"entity"===t.type);for(let o=0;o<i.length;o++){const{color:t,textColor:e,font:a,size:s,entityTypes:l,entityIds:u}=i[o],c=JSON.parse(u||"[]"),h=JSON.parse(l||"[]");if(c.includes(n)||h.includes(r[0]))return{fillColor:t,fontSize:PE(a.fontSize),fontFamily:a.fontName,fill:e,size:s,...IE(a.fontStyle)}}return{}}function kE(t,e){const{id:n,labels:r,properties:i}=t;if(e){const t=e instanceof Array?e:[e];for(let e=0;e<t.length;e++){const{name:o,entityTypes:a,entityIds:s}=t[e],l=JSON.parse(s||"[]"),u=JSON.parse(a||"[]");if(l.includes(n)||u.includes(r[0]))return i[o]||""}}return i[i._labelfieldname]||""}function IE(t){return 1===t?{fontWeight:600}:2===t?{fontStyle:"italic"}:{}}function PE(t){return.8*t}function LE(t){const{expand:e,collapse:n,hidden:r}=t.dataContent;return{expand:e&&JSON.parse(e),collapse:n&&JSON.parse(n),hidden:r&&JSON.parse(r)}}var NE=n("9ab4"),RE=n("8937"),DE={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(t){return Object.assign(this,t),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(t){var e=this,n=this.events;this.graph=t,"drag-canvas"!==this.type&&"brush-select"!==this.type&&"lasso-select"!==this.type||t.get("canvas").set("draggable",!0),Object(RE["each"])(n,(function(e,n){t.on(n,e)})),document.addEventListener("visibilitychange",(function(){e.keydown=!1}))},unbind:function(t){var e=this.events,n=t.get("canvas").get("draggable");"drag-canvas"!==this.type&&"brush-select"!==this.type&&"lasso-select"!==this.type||t.get("canvas").set("draggable",!1),Object(RE["each"])(e,(function(e,n){t.off(n,e)})),t.get("canvas").set("draggable",n)},get:function(t){return this[t]},set:function(t,e){return this[t]=e,this}},FE=function(){function t(){}return t.registerBehavior=function(e,n){if(!n)throw new Error("please specify handler for this behavior: ".concat(e));var r=Object(RE["clone"])(DE);Object.assign(r,n);var i=function(t){var e=this;Object.assign(this,this.getDefaultCfg(),t);var n=this.getEvents();this.events=null;var r={};n&&(Object(RE["each"])(n,(function(t,n){r[n]=Object(RE["wrapBehavior"])(e,t)})),this.events=r)};i.prototype=r,t.types[e]=i},t.hasBehavior=function(e){return!!t.types[e]},t.getBehavior=function(e){return t.types[e]},t.types={},t}(),jE=FE,BE=jE,zE=n("7fa2"),UE=n("e897"),GE=function(t,e){var n=t.nodes,r=t.edges,i=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach((function(t,e){o[t.id]=e;var n=[];i.push(n)})),r&&r.forEach((function(t){var n=t.source,r=t.target,a=o[n],s=o[r];!a&&0!==a||!s&&0!==s||(i[a][s]=1,e||(i[s][a]=1))})),i},qE=GE,VE=function(t,e){return t===e},HE=function(){function t(t,e){void 0===e&&(e=null),this.value=t,this.next=e}return t.prototype.toString=function(t){return t?t(this.value):"".concat(this.value)},t}(),WE=function(){function t(t){void 0===t&&(t=VE),this.head=null,this.tail=null,this.compare=t}return t.prototype.prepend=function(t){var e=new HE(t,this.head);return this.head=e,this.tail||(this.tail=e),this},t.prototype.append=function(t){var e=new HE(t);return this.head?(this.tail.next=e,this.tail=e,this):(this.head=e,this.tail=e,this)},t.prototype.delete=function(t){if(!this.head)return null;var e=null;while(this.head&&this.compare(this.head.value,t))e=this.head,this.head=this.head.next;var n=this.head;if(null!==n)while(n.next)this.compare(n.next.value,t)?(e=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,t)&&(this.tail=n),e},t.prototype.find=function(t){var e=t.value,n=void 0===e?void 0:e,r=t.callback,i=void 0===r?void 0:r;if(!this.head)return null;var o=this.head;while(o){if(i&&i(o.value))return o;if(void 0!==n&&this.compare(o.value,n))return o;o=o.next}return null},t.prototype.deleteTail=function(){var t=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,t;var e=this.head;while(e.next)e.next.next?e=e.next:e.next=null;return this.tail=e,t},t.prototype.deleteHead=function(){if(!this.head)return null;var t=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),t},t.prototype.fromArray=function(t){var e=this;return t.forEach((function(t){return e.append(t)})),this},t.prototype.toArray=function(){var t=[],e=this.head;while(e)t.push(e),e=e.next;return t},t.prototype.reverse=function(){var t=this.head,e=null,n=null;while(t)n=t.next,t.next=e,e=t,t=n;this.tail=this.head,this.head=e},t.prototype.toString=function(t){return void 0===t&&(t=void 0),this.toArray().map((function(e){return e.toString(t)})).toString()},t}(),YE=WE,XE=function(){function t(){this.linkedList=new YE}return t.prototype.isEmpty=function(){return!this.linkedList.head},t.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},t.prototype.enqueue=function(t){this.linkedList.append(t)},t.prototype.dequeue=function(){var t=this.linkedList.deleteHead();return t?t.value:null},t.prototype.toString=function(t){return this.linkedList.toString(t)},t}(),JE=XE,ZE=function(t,e,n){void 0===e&&(e=[]);var r=e.filter((function(e){return e.source===t||e.target===t}));if("target"===n){var i=function(e){return e.source===t};return r.filter(i).map((function(t){return t.target}))}if("source"===n){var o=function(e){return e.target===t};return r.filter(o).map((function(t){return t.source}))}var a=function(e){return e.source===t?e.target:e.source};return r.map(a)},KE=function(t,e){return e.filter((function(e){return e.source===t}))},QE=function(t,e){return e.filter((function(e){return e.source===t||e.target===t}))},$E=function(t){void 0===t&&(t=0);var e="".concat(Math.random()).split(".")[1].substr(0,5),n="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(t,"-").concat(e).concat(n)};function tC(t){void 0===t&&(t={});var e=t,n=function(){},r=function(){var t={};return function(e){var n=e.next,r=n;return!t[r]&&(t[r]=!0,!0)}}();return e.allowTraversal=t.allowTraversal||r,e.enter=t.enter||n,e.leave=t.leave||n,e}var eC=function(t,e,n,r){void 0===r&&(r=!0);var i=tC(n),o=new JE,a=t.edges,s=void 0===a?[]:a;o.enqueue(e);var l="",u=function(){var t=o.dequeue();i.enter({current:t,previous:l}),ZE(t,s,r?"target":void 0).forEach((function(e){i.allowTraversal({previous:l,current:t,next:e})&&o.enqueue(e)})),i.leave({current:t,previous:l}),l=t};while(!o.isEmpty())u()},nC=eC,rC=function(t){for(var e=t.nodes,n=void 0===e?[]:e,r=t.edges,i=void 0===r?[]:r,o=[],a={},s=[],l=function t(e){s.push(e),a[e.id]=!0;for(var r=ZE(e.id,i),o=function(e){var i=r[e];if(!a[i]){var o=n.filter((function(t){return t.id===i}));o.length>0&&t(o[0])}},l=0;l<r.length;++l)o(l)},u=0;u<n.length;u++){var c=n[u];if(!a[c.id]){l(c);var h=[];while(s.length>0)h.push(s.pop());o.push(h)}}return o},iC=function(t){for(var e=t.nodes,n=void 0===e?[]:e,r=t.edges,i=void 0===r?[]:r,o=[],a={},s={},l={},u=[],c=0,h=function t(e){s[e.id]=c,l[e.id]=c,c+=1,o.push(e),a[e.id]=!0;for(var r=ZE(e.id,i,"target").filter((function(t){return n.map((function(t){return t.id})).indexOf(t)>-1})),h=function(i){var o=r[i];if(s[o]||0===s[o])a[o]&&(l[e.id]=Math.min(l[e.id],s[o]));else{var u=n.filter((function(t){return t.id===o}));u.length>0&&t(u[0]),l[e.id]=Math.min(l[e.id],l[o])}},d=0;d<r.length;d++)h(d);if(l[e.id]===s[e.id]){var f=[];while(o.length>0){var p=o.pop();if(a[p.id]=!1,f.push(p),p===e)break}f.length>0&&u.push(f)}},d=0,f=n;d<f.length;d++){var p=f[d];s[p.id]||0===s[p.id]||h(p)}return u};function oC(t,e){return e?iC(t):rC(t)}var aC=function(t){var e={},n=t.nodes,r=void 0===n?[]:n,i=t.edges,o=void 0===i?[]:i;return r.forEach((function(t){e[t.id]={degree:0,inDegree:0,outDegree:0}})),o.forEach((function(t){e[t.source].degree++,e[t.source].outDegree++,e[t.target].degree++,e[t.target].inDegree++})),e},sC=aC,lC=function(t,e){var n=aC(t);return n[e]?aC(t)[e].inDegree:0},uC=function(t,e){var n=aC(t);return n[e]?aC(t)[e].outDegree:0};function cC(t){void 0===t&&(t={});var e=t,n=function(){},r=function(){var t={};return function(e){var n=e.next;return!t[n]&&(t[n]=!0,!0)}}();return e.allowTraversal=t.allowTraversal||r,e.enter=t.enter||n,e.leave=t.leave||n,e}function hC(t,e,n,r,i){void 0===i&&(i=!0),r.enter({current:e,previous:n});var o=t.edges,a=void 0===o?[]:o;ZE(e,a,i?"target":void 0).forEach((function(o){r.allowTraversal({previous:n,current:e,next:o})&&hC(t,o,e,r,i)})),r.leave({current:e,previous:n})}function dC(t,e,n,r){void 0===r&&(r=!0),hC(t,e,"",cC(n),r)}var fC=function(t){var e=null,n=t.nodes,r=void 0===n?[]:n,i={},o={},a={},s={};r.forEach((function(t){o[t.id]=t}));var l={enter:function(t){var n=t.current,r=t.previous;if(a[n]){e={};var s=n,l=r;while(l!==n)e[s]=l,s=l,l=i[l];e[s]=l}else a[n]=n,delete o[n],i[n]=r},leave:function(t){var e=t.current;s[e]=e,delete a[e]},allowTraversal:function(t){var n=t.next;return!e&&!s[n]}};while(Object.keys(o).length){var u=Object.keys(o)[0];dC(t,u,l)}return e},pC=function(t,e,n){var r,i;void 0===n&&(n=!0);for(var o=[],a=oC(t,!1),s=0,l=a;s<l.length;s++){var u=l[s];if(u.length){var c=u[0],h=c.id,d=[c],f=(r={},r[h]=c,r),p=(i={},i[h]=new Set,i);while(d.length>0)for(var g=d.pop(),m=g.id,y=ZE(m,t.edges),v=function(r){var i,a=y[r],s=t.nodes.find((function(t){return t.id===a}));if(a===m)o.push((i={},i[a]=g,i));else if(a in p){if(!p[m].has(s)){var l=!0,u=[s,g],c=f[m];while(p[a].size&&!p[a].has(c)){if(u.push(c),c===f[c.id])break;c=f[c.id]}if(u.push(c),e&&n?(l=!1,u.findIndex((function(t){return e.indexOf(t.id)>-1}))>-1&&(l=!0)):e&&!n&&u.findIndex((function(t){return e.indexOf(t.id)>-1}))>-1&&(l=!1),l){for(var h={},v=1;v<u.length;v+=1)h[u[v-1].id]=u[v];u.length&&(h[u[u.length-1].id]=u[0]),o.push(h)}p[a].add(g)}}else f[a]=g,d.push(s),p[a]=new Set([g])},b=0;b<y.length;b+=1)v(b)}}return o},gC=function(t,e,n){void 0===n&&(n=!0);for(var r=[],i=new Set,o=[],a=[],s={},l={},u=function(t){var e=[t];while(e.length>0){var n=e.pop();i.has(n)&&(i.delete(n),o[n.id].forEach((function(t){e.push(t)})),o[n.id].clear())}},c=function t(l,c,h){var d=!1;if(e&&!1===n&&e.indexOf(l.id)>-1)return d;r.push(l),i.add(l);for(var f=h[l.id],p=0;p<f.length;p+=1){var g=s[f[p]];if(g===c){for(var m={},y=1;y<r.length;y+=1)m[r[y-1].id]=r[y];r.length&&(m[r[r.length-1].id]=r[0]),a.push(m),d=!0}else i.has(g)||t(g,c,h)&&(d=!0)}if(d)u(l);else for(p=0;p<f.length;p+=1){g=s[f[p]];o[g.id].has(l)||o[g.id].add(l)}return r.pop(),d},h=t.nodes,d=void 0===h?[]:h,f=0;f<d.length;f+=1){var p=d[f],g=p.id;l[g]=f,s[f]=p}if(e&&n){var m=function(t){var n=e[t];l[d[t].id]=l[n],l[n]=0,s[0]=d.find((function(t){return t.id===n})),s[l[d[t].id]]=d[t]};for(f=0;f<e.length;f++)m(f)}var y=function(r){for(var i,o,s=1/0,u=0;u<r.length;u+=1)for(var c=r[u],h=0;h<c.length;h++){var d=l[c[h].id];d<s&&(s=d,o=u)}var f=r[o],p=[];for(u=0;u<f.length;u+=1){var g=f[u];p[g.id]=[];for(var m=0,y=ZE(g.id,t.edges,"target").filter((function(t){return f.map((function(t){return t.id})).indexOf(t)>-1}));m<y.length;m++){var v=y[m];v!==g.id||!1===n&&e.indexOf(g.id)>-1?p[g.id].push(l[v]):a.push((i={},i[g.id]=g,i))}}return{component:f,adjList:p,minIdx:s}},v=0;while(v<d.length){var b=d.filter((function(t){return l[t.id]>=v})),_=iC({nodes:b,edges:t.edges}).filter((function(t){return t.length>1}));if(0===_.length)break;var x=y(_),w=x.minIdx,S=x.adjList,E=x.component;if(!(E.length>1))break;E.forEach((function(t){o[t.id]=new Set}));var C=s[w];if(e&&n&&-1===e.indexOf(C.id))return a;c(C,C,S),v=w+1}return a},mC=function(t,e,n,r){return void 0===r&&(r=!0),e?gC(t,n,r):pC(t,n,r)},yC=fC,vC=function(t,e,n){for(var r,i=1/0,o=0;o<e.length;o++){var a=e[o].id;!n[a]&&t[a]<=i&&(i=t[a],r=e[o])}return r},bC=function(t,e,n,r){var i=t.nodes,o=void 0===i?[]:i,a=t.edges,s=void 0===a?[]:a,l=[],u={},c={},h={};o.forEach((function(t,n){var r=t.id;l.push(r),c[r]=1/0,r===e&&(c[r]=0)}));for(var d=o.length,f=function(t){var e=vC(c,o,u),i=e.id;if(u[i]=!0,c[i]===1/0)return"continue";var a=[];a=n?KE(i,s):QE(i,s),a.forEach((function(t){var n=t.target,o=t.source,a=n===i?o:n,s=r&&t[r]?t[r]:1;c[a]>c[e.id]+s?(c[a]=c[e.id]+s,h[a]=[e.id]):c[a]===c[e.id]+s&&h[a].push(e.id)}))},p=0;p<d;p++)f(p);h[e]=[e];var g={};for(var m in c)c[m]!==1/0&&xC(e,m,h,g);var y={};for(var m in g)y[m]=g[m][0];return{length:c,path:y,allPath:g}},_C=bC;function xC(t,e,n,r){if(t===e)return[t];if(r[e])return r[e];for(var i=[],o=0,a=n[e];o<a.length;o++){var s=a[o],l=xC(t,s,n,r);if(!l)return;for(var u=0,c=l;u<c.length;u++){var h=c[u];Object(RE["isArray"])(h)?i.push(Object(NE["__spreadArray"])(Object(NE["__spreadArray"])([],h,!0),[e],!1)):i.push([h,e])}}return r[e]=i,r[e]}var wC,SC=function(t,e,n,r,i){var o=_C(t,e,r,i),a=o.length,s=o.path,l=o.allPath;return{length:a[n],path:s[n],allPath:l[n]}},EC=function(t,e,n,r){var i;if(e===n)return[[e]];var o=t.edges,a=void 0===o?[]:o,s=[e],l=(i={},i[e]=!0,i),u=[],c=[],h=r?ZE(e,a,"target"):ZE(e,a);u.push(h);while(s.length>0&&u.length>0){var d=u[u.length-1];if(d.length){var f=d.shift();if(f&&(s.push(f),l[f]=!0,h=r?ZE(f,a,"target"):ZE(f,a),u.push(h.filter((function(t){return!l[t]})))),s[s.length-1]===n){var p=s.map((function(t){return t}));c.push(p);g=s.pop();l[g]=!1,u.pop()}}else{var g=s.pop();l[g]=!1,u.pop()}}return c},CC=function(t,e){for(var n=qE(t,e),r=[],i=n.length,o=0;o<i;o+=1){r[o]=[];for(var a=0;a<i;a+=1)o===a?r[o][a]=0:0!==n[o][a]&&n[o][a]?r[o][a]=n[o][a]:r[o][a]=1/0}for(var s=0;s<i;s+=1)for(o=0;o<i;o+=1)for(a=0;a<i;a+=1)r[o][a]>r[o][s]+r[s][a]&&(r[o][a]=r[o][s]+r[s][a]);return r},MC=CC,TC=function(t,e,n,r){void 0===e&&(e=!1),void 0===n&&(n="weight"),void 0===r&&(r=1e3);var i=t.nodes,o=void 0===i?[]:i,a=t.edges,s=void 0===a?[]:a,l={},u={};o.forEach((function(t,e){var n=$E();t.clusterId=n,l[n]={id:n,nodes:[t]},u[t.id]={node:t,idx:e}}));var c=qE(t,e),h=[],d={};c.forEach((function(t,e){var n=0,r=o[e].id;d[r]={},t.forEach((function(t,e){if(t){n+=t;var i=o[e].id;d[r][i]=t}})),h.push(n)}));var f=0,p=function(){var t=!1;if(o.forEach((function(e){var n={};Object.keys(d[e.id]).forEach((function(t){var r=d[e.id][t],i=u[t].node,o=i.clusterId;n[o]||(n[o]=0),n[o]+=r}));var r=-1/0,i=[];if(Object.keys(n).forEach((function(t){r<n[t]?(r=n[t],i=[t]):r===n[t]&&i.push(t)})),1!==i.length||i[0]!==e.clusterId){var o=i.indexOf(e.clusterId);if(o>=0&&i.splice(o,1),i&&i.length){t=!0;var a=l[e.clusterId],s=a.nodes.indexOf(e);a.nodes.splice(s,1);var c=Math.floor(Math.random()*i.length),h=l[i[c]];h.nodes.push(e),e.clusterId=h.id}}})),!t)return"break";f++};while(f<r){var g=p();if("break"===g)break}Object.keys(l).forEach((function(t){var e=l[t];e.nodes&&e.nodes.length||delete l[t]}));var m=[],y={};s.forEach((function(t){var e=t.source,r=t.target,i=t[n]||1,o=u[e].node.clusterId,a=u[r].node.clusterId,s="".concat(o,"---").concat(a);if(y[s])y[s].weight+=i,y[s].count++;else{var l={source:o,target:a,weight:i,count:1};y[s]=l,m.push(l)}}));var v=[];return Object.keys(l).forEach((function(t){v.push(l[t])})),{clusters:v,clusterEdges:m}},AC=TC,OC=function(){function t(t){this.arr=t}return t.prototype.getArr=function(){return this.arr||[]},t.prototype.add=function(e){var n,r=e.arr;if(!(null===(n=this.arr)||void 0===n?void 0:n.length))return new t(r);if(!(null===r||void 0===r?void 0:r.length))return new t(this.arr);if(this.arr.length===r.length){var i=[];for(var o in this.arr)i[o]=this.arr[o]+r[o];return new t(i)}},t.prototype.subtract=function(e){var n,r=e.arr;if(!(null===(n=this.arr)||void 0===n?void 0:n.length))return new t(r);if(!(null===r||void 0===r?void 0:r.length))return new t(this.arr);if(this.arr.length===r.length){var i=[];for(var o in this.arr)i[o]=this.arr[o]-r[o];return new t(i)}},t.prototype.avg=function(e){var n=[];if(0!==e)for(var r in this.arr)n[r]=this.arr[r]/e;return new t(n)},t.prototype.negate=function(){var e=[];for(var n in this.arr)e[n]=-this.arr[n];return new t(e)},t.prototype.squareEuclideanDistance=function(t){var e,n=t.arr;if(!(null===(e=this.arr)||void 0===e?void 0:e.length)||!(null===n||void 0===n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var i in this.arr)r+=Math.pow(this.arr[i]-t.arr[i],2);return r}},t.prototype.euclideanDistance=function(t){var e,n=t.arr;if(!(null===(e=this.arr)||void 0===e?void 0:e.length)||!(null===n||void 0===n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var i in this.arr)r+=Math.pow(this.arr[i]-t.arr[i],2);return Math.sqrt(r)}console.error("The two vectors are unequal in length.")},t.prototype.normalize=function(){var e=[],n=Object(RE["clone"])(this.arr);n.sort((function(t,e){return t-e}));var r=n[n.length-1],i=n[0];for(var o in this.arr)e[o]=(this.arr[o]-i)/(r-i);return new t(e)},t.prototype.norm2=function(){var t;if(!(null===(t=this.arr)||void 0===t?void 0:t.length))return 0;var e=0;for(var n in this.arr)e+=Math.pow(this.arr[n],2);return Math.sqrt(e)},t.prototype.dot=function(t){var e,n=t.arr;if(!(null===(e=this.arr)||void 0===e?void 0:e.length)||!(null===n||void 0===n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var i in this.arr)r+=this.arr[i]*t.arr[i];return r}console.error("The two vectors are unequal in length.")},t.prototype.equal=function(t){var e,n=t.arr;if((null===(e=this.arr)||void 0===e?void 0:e.length)!==(null===n||void 0===n?void 0:n.length))return!1;for(var r in this.arr)if(this.arr[r]!==n[r])return!1;return!0},t}(),kC=OC,IC=function(t,e){void 0===e&&(e=void 0);var n=[];return t.forEach((function(t){void 0===e&&n.push(t),void 0!==t[e]&&n.push(t[e])})),n};(function(t){t["EuclideanDistance"]="euclideanDistance"})(wC||(wC={}));var PC=function(t,e,n){var r=[];(null===e||void 0===e?void 0:e.length)?r=e:(t.forEach((function(t){r=r.concat(Object.keys(t))})),r=Object(RE["uniq"])(r));var i={};return r.forEach((function(e){var r=[];t.forEach((function(t){void 0!==t[e]&&""!==t[e]&&r.push(t[e])})),r.length&&!(null===n||void 0===n?void 0:n.includes(e))&&(i[e]=Object(RE["uniq"])(r))})),i},LC=function(t,e,n){var r=PC(t,e,n),i=[];if(!Object.keys(r).length)return i;var o=Object.values(r),a=o.every((function(t){return t.every((function(t){return"number"===typeof t}))}));return t.forEach((function(t,e){var n=[];Object.keys(r).forEach((function(e){var i=t[e],o=r[e],s=o.findIndex((function(t){return i===t})),l=[];if(a)l.push(i);else for(var u=0;u<o.length;u++)u===s?l.push(1):l.push(0);n=n.concat(l)})),i[e]=n})),i},NC=function(t,e,n,r){void 0===n&&(n=wC.EuclideanDistance);var i=0;switch(n){case wC.EuclideanDistance:i=new kC(t).euclideanDistance(new kC(e));break;default:break}return i},RC=function(t,e,n,r){for(var i=e.length,o=2*r,a=0,s=0;s<i;s++)for(var l=t[s].clusterId,u=0;u<i;u++){var c=t[u].clusterId;if(l===c){var h=e[s][u]||0,d=n[s]||0,f=n[u]||0;a+=h-d*f/o}}return a*=1/o,a},DC=function(t,e){void 0===t&&(t=[]);for(var n=t.length,r=new kC([]),i=0;i<n;i++)r=r.add(new kC(e[i]));var o=r.avg(n);o.normalize();var a=0;for(i=0;i<n;i++){var s=new kC(e[i]),l=s.squareEuclideanDistance(o);a+=l}var u=[];t.forEach((function(){u.push([])}));for(i=0;i<n;i++){s=new kC(e[i]);t[i]["clusterInertial"]=0;for(var c=0;c<n;c++)if(i!==c){var h=new kC(e[c]);u[i][c]=s.squareEuclideanDistance(h),t[i]["clusterInertial"]+=u[i][c]}else u[i][c]=0}var d=0,f=2*n*a;for(i=0;i<n;i++){var p=t[i].clusterId;for(c=0;c<n;c++){var g=t[c].clusterId;if(i!==c&&p===g){var m=t[i].clusterInertial*t[c].clusterInertial/Math.pow(f,2)-u[i][c]/f;d+=m}}}return Number(d.toFixed(4))},FC=function(t,e,n,r,i,o,a,s,l){void 0===e&&(e=!1),void 0===n&&(n="weight"),void 0===r&&(r=1e-4),void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===a&&(a=[]),void 0===s&&(s=["id"]),void 0===l&&(l=1);var u=t.nodes,c=void 0===u?[]:u,h=t.edges,d=void 0===h?[]:h,f=[];if(i){c.forEach((function(t,e){t.properties=t.properties||{},t.originIndex=e}));var p=[];c.every((function(t){return t.hasOwnProperty("nodeType")}))&&(p=Array.from(new Set(c.map((function(t){return t.nodeType})))),c.forEach((function(t){t.properties.nodeType=p.findIndex((function(e){return e===t.nodeType}))})));var g=IC(c,o);f=LC(g,a,s)}var m=1,y={},v={};c.forEach((function(t,e){var n=String(m++);t.clusterId=n,y[n]={id:n,nodes:[t]},v[t.id]={node:t,idx:e}}));var b=qE(t,e),_=[],x={},w=0;b.forEach((function(t,e){var n=0,r=c[e].id;x[r]={},t.forEach((function(t,e){if(t){n+=t;var i=c[e].id;x[r][i]=t,w+=t}})),_.push(n)})),w/=2;var S=1/0,E=1/0,C=0,M=[],T={};while(1){S=i&&c.every((function(t){return t.hasOwnProperty("properties")}))?RC(c,b,_,w)+DC(c,f)*l:RC(c,b,_,w),0===C&&(E=S,M=c,T=y);var A=S>0&&S>E&&S-E<r;if(S>E&&(M=c.map((function(t){return{node:t,clusterId:t.clusterId}})),T=Object(RE["clone"])(y),E=S),A||C>100)break;C++,Object.keys(y).forEach((function(t){var e=0;d.forEach((function(r){var i=r.source,o=r.target,a=v[i].node.clusterId,s=v[o].node.clusterId;(a===t&&s!==t||s===t&&a!==t)&&(e+=r[n]||1)})),y[t].sumTot=e})),c.forEach((function(t,e){var r,o=y[t.clusterId],a=0,s=_[e]/(2*w),u=0,c=o.nodes;c.forEach((function(t){var n=v[t.id].idx;u+=b[e][n]||0}));var h=u-o.sumTot*s,p=c.filter((function(e){return e.id!==t.id})),g=[];p.forEach((function(t,e){g[e]=f[t.originIndex]}));var m=DC(p,f)*l,S=x[t.id];if(Object.keys(S).forEach((function(n){var o=v[n].node,u=o.clusterId;if(u!==t.clusterId){var c=y[u],d=c.nodes;if(d&&d.length){var p=0;d.forEach((function(t){var n=v[t.id].idx;p+=b[e][n]||0}));var g=p-c.sumTot*s,_=d.concat([t]),x=[];_.forEach((function(t,e){x[e]=f[t.originIndex]}));var w=DC(_,f)*l,S=g-h;i&&(S=g+w-(h+m)),S>a&&(a=S,r=c)}}})),a>0){r.nodes.push(t);var E=t.clusterId;t.clusterId=r.id;var C=o.nodes.indexOf(t);o.nodes.splice(C,1);var M=0,T=0;d.forEach((function(t){var e=t.source,i=t.target,o=v[e].node.clusterId,a=v[i].node.clusterId;(o===r.id&&a!==r.id||a===r.id&&o!==r.id)&&(M+=t[n]||1),(o===E&&a!==E||a===E&&o!==E)&&(T+=t[n]||1)})),r.sumTot=M,o.sumTot=T}}))}var O={},k=0;Object.keys(T).forEach((function(t){var e=T[t];if(e.nodes&&e.nodes.length){var n=String(k+1);n!==t&&(e.id=n,e.nodes=e.nodes.map((function(t){return{id:t.id,clusterId:n}})),T[n]=e,O[t]=n,delete T[t],k++)}else delete T[t]})),M.forEach((function(t){var e=t.node,n=t.clusterId;e&&(e.clusterId=n,e.clusterId&&O[e.clusterId]&&(e.clusterId=O[e.clusterId]))}));var I=[],P={};d.forEach((function(t){var e=t.source,r=t.target,i=t[n]||1,o=v[e].node.clusterId,a=v[r].node.clusterId;if(o&&a){var s="".concat(o,"---").concat(a);if(P[s])P[s].weight+=i,P[s].count++;else{var l={source:o,target:a,weight:i,count:1};P[s]=l,I.push(l)}}}));var L=[];return Object.keys(T).forEach((function(t){L.push(T[t])})),{clusters:L,clusterEdges:I}},jC=FC,BC=function(t,e,n,r,i,o,a,s){return void 0===e&&(e=!1),void 0===n&&(n="weight"),void 0===r&&(r=1e-4),void 0===i&&(i=void 0),void 0===o&&(o=[]),void 0===a&&(a=["id"]),void 0===s&&(s=1),jC(t,e,n,r,!0,i,o,a,s)},zC=BC,UC=function(t,e){var n;void 0===e&&(e=1);var r=Object(RE["clone"])(t),i=r.nodes,o=void 0===i?[]:i,a=r.edges,s=void 0===a?[]:a,l=function(){var t=sC({nodes:o,edges:s}),r=Object.keys(t);r.sort((function(e,n){var r,i;return(null===(r=t[e])||void 0===r?void 0:r.degree)-(null===(i=t[n])||void 0===i?void 0:i.degree)}));var i=r[0];if(!o.length||(null===(n=t[i])||void 0===n?void 0:n.degree)>=e)return"break";var a=o.findIndex((function(t){return t.id===i}));o.splice(a,1),s=s.filter((function(t){return!(t.source===i||t.target===i)}))};while(1){var u=l();if("break"===u)break}return{nodes:o,edges:s}},GC=UC,qC=function(t,e,n){var r=[];switch(t){case wC.EuclideanDistance:r=e[n];break;default:r=[];break}return r},VC=function(t,e,n,r,i,o){void 0===e&&(e=3),void 0===n&&(n=void 0),void 0===r&&(r=[]),void 0===i&&(i=["id"]),void 0===o&&(o=wC.EuclideanDistance);var a=t.nodes,s=void 0===a?[]:a,l=t.edges,u=void 0===l?[]:l,c={clusters:[{id:"0",nodes:s}],clusterEdges:[]};if(o===wC.EuclideanDistance&&!s.every((function(t){return t.hasOwnProperty(n)})))return c;var h=[],d=[];if(o===wC.EuclideanDistance&&(h=IC(s,n),d=LC(h,r,i)),!d.length)return c;for(var f=Object(RE["uniq"])(d.map((function(t){return t.join("")}))),p=Math.min(e,s.length,f.length),g=0;g<s.length;g++)s[g].originIndex=g;var m=[],y=[],v=[];for(g=0;g<p;g++)if(0===g){var b=Math.floor(Math.random()*s.length);switch(o){case wC.EuclideanDistance:m[g]=d[b];break;default:m[g]=[];break}y.push(b),v[g]=[s[b]],s[b].clusterId=String(g)}else{for(var _=-1/0,x=0,w=function(t){if(!y.includes(t)){for(var e=0,n=0;n<m.length;n++){var r=0;switch(o){case wC.EuclideanDistance:r=NC(d[s[t].originIndex],m[n],o);break;default:break}e+=r}var i=e/m.length;i>_&&!m.find((function(e){return Object(RE["isEqual"])(e,qC(o,d,s[t].originIndex))}))&&(_=i,x=t)}},S=0;S<s.length;S++)w(S);m[g]=qC(o,d,x),y.push(x),v[g]=[s[x]],s[x].clusterId=String(g)}var E=0;while(1){for(g=0;g<s.length;g++){var C=0,M=1/0;if(0!==E||!y.includes(g)){for(var T=0;T<m.length;T++){var A=0;switch(o){case wC.EuclideanDistance:A=NC(d[g],m[T],o);break;default:break}A<M&&(M=A,C=T)}if(void 0!==s[g].clusterId)for(var O=v[Number(s[g].clusterId)].length-1;O>=0;O--)v[Number(s[g].clusterId)][O].id===s[g].id&&v[Number(s[g].clusterId)].splice(O,1);s[g].clusterId=String(C),v[C].push(s[g])}}var k=!1;for(g=0;g<v.length;g++){var I=v[g],P=new kC([]);for(T=0;T<I.length;T++)P=P.add(new kC(d[I[T].originIndex]));var L=P.avg(I.length);L.equal(new kC(m[g]))||(k=!0,m[g]=L.getArr())}if(E++,s.every((function(t){return void 0!==t.clusterId}))&&k||E>=1e3)break}var N=[],R={};return u.forEach((function(t){var e,n,r=t.source,i=t.target,o=null===(e=s.find((function(t){return t.id===r})))||void 0===e?void 0:e.clusterId,a=null===(n=s.find((function(t){return t.id===i})))||void 0===n?void 0:n.clusterId,l="".concat(o,"---").concat(a);if(R[l])R[l].count++;else{var u={source:o,target:a,count:1};R[l]=u,N.push(u)}})),{clusters:v,clusterEdges:N}},HC=VC,WC=function(t,e){var n=new kC(e),r=n.norm2(),i=new kC(t),o=i.norm2(),a=n.dot(i),s=r*o,l=s?a/s:0;return l},YC=WC,XC=function(t,e,n,r,i){void 0===t&&(t=[]),void 0===n&&(n=void 0),void 0===r&&(r=[]),void 0===i&&(i=[]);var o=Object(RE["clone"])(t.filter((function(t){return t.id!==e.id}))),a=t.findIndex((function(t){return t.id===e.id})),s=IC(t,n),l=LC(s,r,i),u=l[a],c=[];return o.forEach((function(t,n){if(t.id!==e.id){var r=l[n],i=YC(r,u);c.push(i),t.cosineSimilarity=i}})),o.sort((function(t,e){return e.cosineSimilarity-t.cosineSimilarity})),{allCosineSimilarity:c,similarNodes:o}},JC=XC,ZC=function(){function t(t){this.count=t.length,this.parent={};for(var e=0,n=t;e<n.length;e++){var r=n[e];this.parent[r]=r}}return t.prototype.find=function(t){while(this.parent[t]!==t)t=this.parent[t];return t},t.prototype.union=function(t,e){var n=this.find(t),r=this.find(e);n!==r&&(n<r?(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]):(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]))},t.prototype.connected=function(t,e){return this.find(t)===this.find(e)},t}(),KC=ZC,QC=function(t,e){return t-e},$C=function(){function t(t){void 0===t&&(t=QC),this.compareFn=t,this.list=[]}return t.prototype.getLeft=function(t){return 2*t+1},t.prototype.getRight=function(t){return 2*t+2},t.prototype.getParent=function(t){return 0===t?null:Math.floor((t-1)/2)},t.prototype.isEmpty=function(){return this.list.length<=0},t.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},t.prototype.delMin=function(){var t=this.top(),e=this.list.pop();return this.list.length>0&&(this.list[0]=e,this.moveDown(0)),t},t.prototype.insert=function(t){if(null!==t){this.list.push(t);var e=this.list.length-1;return this.moveUp(e),!0}return!1},t.prototype.moveUp=function(t){var e=this.getParent(t);while(t&&t>0&&this.compareFn(this.list[e],this.list[t])>0){var n=this.list[e];this.list[e]=this.list[t],this.list[t]=n,t=e,e=this.getParent(t)}},t.prototype.moveDown=function(t){var e,n=t,r=this.getLeft(t),i=this.getRight(t),o=this.list.length;null!==r&&r<o&&this.compareFn(this.list[n],this.list[r])>0?n=r:null!==i&&i<o&&this.compareFn(this.list[n],this.list[i])>0&&(n=i),t!==n&&(e=[this.list[n],this.list[t]],this.list[t]=e[0],this.list[n]=e[1],this.moveDown(n))},t}(),tM=$C,eM=function(t,e){var n=[],r=t.nodes,i=void 0===r?[]:r,o=t.edges,a=void 0===o?[]:o;if(0===i.length)return n;var s=i[0],l=new Set;l.add(s);var u=function(t,n){return e?t.weight-n.weight:0},c=new tM(u);QE(s.id,a).forEach((function(t){c.insert(t)}));while(!c.isEmpty()){var h=c.delMin(),d=h.source,f=h.target;l.has(d)&&l.has(f)||(n.push(h),l.has(d)||(l.add(d),QE(d,a).forEach((function(t){c.insert(t)}))),l.has(f)||(l.add(f),QE(f,a).forEach((function(t){c.insert(t)}))))}return n},nM=function(t,e){var n=[],r=t.nodes,i=void 0===r?[]:r,o=t.edges,a=void 0===o?[]:o;if(0===i.length)return n;var s=a.map((function(t){return t}));e&&s.sort((function(t,e){return t.weight-e.weight}));var l=new KC(i.map((function(t){return t.id})));while(s.length>0){var u=s.shift(),c=u.source,h=u.target;l.connected(c,h)||(n.push(u),l.union(c,h))}return n},rM=function(t,e,n){var r={prim:eM,kruskal:nM};return n?r[n](t,e):nM(t,e)},iM=rM,oM=function(t,e,n){"number"!==typeof e&&(e=1e-6),"number"!==typeof n&&(n=.85);for(var r,i=1,o=0,a=1e3,s=t.nodes,l=void 0===s?[]:s,u=t.edges,c=void 0===u?[]:u,h=l.length,d={},f={},p=0;p<h;++p){var g=l[p],m=g.id;d[m]=1/h,f[m]=1/h}var y=sC(t);while(a>0&&i>e){o=0;for(p=0;p<h;++p){g=l[p],m=g.id;if(r=0,0===y[g.id].inDegree)d[m]=0;else{for(var v=ZE(m,c,"source"),b=0;b<v.length;++b){var _=v[b],x=y[_].outDegree;x>0&&(r+=f[_]/x)}d[m]=n*r,o+=d[m]}}o=(1-o)/h,i=0;for(p=0;p<h;++p){g=l[p],m=g.id;r=d[m]+o,i+=Math.abs(r-f[m]),f[m]=r}a-=1}return f},aM=oM,sM=-1,lM=-1,uM="-1",cM="-1",hM=-1,dM=function(){function t(t,e,n,r){void 0===t&&(t=sM),void 0===e&&(e=lM),void 0===n&&(n=lM),void 0===r&&(r=uM),this.id=t,this.from=e,this.to=n,this.label=r}return t}(),fM=function(){function t(t,e){void 0===t&&(t=lM),void 0===e&&(e=cM),this.id=t,this.label=e,this.edges=[],this.edgeMap={}}return t.prototype.addEdge=function(t){this.edges.push(t),this.edgeMap[t.id]=t},t}(),pM=function(){function t(t,e,n){void 0===t&&(t=lM),void 0===e&&(e=!0),void 0===n&&(n=!1),this.id=t,this.edgeIdAutoIncrease=e,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}return t.prototype.getNodeNum=function(){return this.nodes.length},t.prototype.addNode=function(t,e){if(!this.nodeMap[t]){var n=new fM(t,e);this.nodes.push(n),this.nodeMap[t]=n,this.nodeLabelMap[e]||(this.nodeLabelMap[e]=[]),this.nodeLabelMap[e].push(t)}},t.prototype.addEdge=function(t,e,n,r){if((this.edgeIdAutoIncrease||void 0===t)&&(t=this.counter++),!(this.nodeMap[e]&&this.nodeMap[n]&&this.nodeMap[n].edgeMap[t])){var i=new dM(t,e,n,r);if(this.edges.push(i),this.edgeMap[t]=i,this.nodeMap[e].addEdge(i),this.edgeLabelMap[r]||(this.edgeLabelMap[r]=[]),this.edgeLabelMap[r].push(i),!this.directed){var o=new dM(t,n,e,r);this.nodeMap[n].addEdge(o),this.edgeLabelMap[r].push(o)}}},t}(),gM=function(){function t(t,e,n,r,i){this.fromNode=t,this.toNode=e,this.nodeEdgeNodeLabel={nodeLabel1:n||cM,edgeLabel:r||uM,nodeLabel2:i||cM}}return t.prototype.equalTo=function(t){return this.fromNode===t.formNode&&this.toNode===t.toNode&&this.nodeEdgeNodeLabel===t.nodeEdgeNodeLabel},t.prototype.notEqualTo=function(t){return!this.equalTo(t)},t}(),mM=function(){function t(){this.rmpath=[],this.dfsEdgeList=[]}return t.prototype.equalTo=function(t){var e=this.dfsEdgeList.length,n=t.length;if(e!==n)return!1;for(var r=0;r<e;r++)if(this.dfsEdgeList[r]!==t[r])return!1;return!0},t.prototype.notEqualTo=function(t){return!this.equalTo(t)},t.prototype.pushBack=function(t,e,n,r,i){return this.dfsEdgeList.push(new gM(t,e,n,r,i)),this.dfsEdgeList},t.prototype.toGraph=function(t,e){void 0===t&&(t=hM),void 0===e&&(e=!1);var n=new pM(t,!0,e);return this.dfsEdgeList.forEach((function(t){var e=t.fromNode,r=t.toNode,i=t.nodeEdgeNodeLabel,o=i.nodeLabel1,a=i.edgeLabel,s=i.nodeLabel2;o!==cM&&n.addNode(e,o),s!==cM&&n.addNode(r,s),o!==cM&&s!==o&&n.addEdge(void 0,e,r,a)})),n},t.prototype.buildRmpath=function(){this.rmpath=[];for(var t=void 0,e=this.dfsEdgeList.length,n=e-1;n>=0;n--){var r=this.dfsEdgeList[n],i=r.fromNode,o=r.toNode;i<o&&(void 0===t||o===t)&&(this.rmpath.push(n),t=i)}return this.rmpath},t.prototype.getNodeNum=function(){var t={};return this.dfsEdgeList.forEach((function(e){t[e.fromNode]||(t[e.fromNode]=!0),t[e.toNode]||(t[e.toNode]=!0)})),Object.keys(t).length},t}(),yM=function(){function t(t){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],t){while(t){var e=t.edge;this.edges.push(e),this.nodesUsed[e.from]=1,this.nodesUsed[e.to]=1,this.edgesUsed[e.id]=1,t=t.preNode}this.edges=this.edges.reverse()}}return t.prototype.hasNode=function(t){return 1===this.nodesUsed[t.id]},t.prototype.hasEdge=function(t){return 1===this.edgesUsed[t.id]},t}(),vM=function(){function t(t){var e=t.graphs,n=t.minSupport,r=void 0===n?2:n,i=t.minNodeNum,o=void 0===i?1:i,a=t.maxNodeNum,s=void 0===a?4:a,l=t.top,u=void 0===l?10:l,c=t.directed,h=void 0!==c&&c,d=t.verbose,f=void 0!==d&&d;this.graphs=e,this.dfsCode=new mM,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=r,this.top=u,this.directed=h,this.counter=0,this.maxNodeNum=s,this.minNodeNum=o,this.verbose=f,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return t.prototype.findForwardRootEdges=function(t,e){var n=this,r=[],i=t.nodeMap;return e.edges.forEach((function(t){(n.directed||e.label<=i[t.to].label)&&r.push(t)})),r},t.prototype.findBackwardEdge=function(t,e,n,r){if(!this.directed&&e===n)return null;for(var i=t.nodeMap,o=i[n.to],a=o.edges,s=a.length,l=0;l<s;l++){var u=a[l];if(!r.hasEdge(u)&&u.to===e.from)if(this.directed){if(i[e.from].label<i[n.to].label||i[e.from].label===i[n.to].label&&e.label<=u.label)return u}else if(e.label<u.label||e.label===u.label&&i[e.to].label<=i[n.to].label)return u}return null},t.prototype.findForwardPureEdges=function(t,e,n,r){for(var i=[],o=e.to,a=t.nodeMap[o].edges,s=a.length,l=0;l<s;l++){var u=a[l],c=t.nodeMap[u.to];n<=c.label&&!r.hasNode(c)&&i.push(u)}return i},t.prototype.findForwardRmpathEdges=function(t,e,n,r){for(var i=[],o=t.nodeMap,a=o[e.to].label,s=o[e.from],l=s.edges,u=l.length,c=0;c<u;c++){var h=l[c],d=o[h.to].label;e.to===h.to||n>d||r.hasNode(o[h.to])||(e.label<h.label||e.label===h.label&&a<=d)&&i.push(h)}return i},t.prototype.getSupport=function(t){var e={};return t.forEach((function(t){e[t.graphId]||(e[t.graphId]=!0)})),Object.keys(e).length},t.prototype.findMinLabel=function(t){var e=void 0;return Object.keys(t).forEach((function(n){var r=t[n],i=r.nodeLabel1,o=r.edgeLabel,a=r.nodeLabel2;e?(i<e.nodeLabel1||i===e.nodeLabel1&&o<e.edgeLabel||i===e.nodeLabel1&&o===e.edgeLabel&&a<e.nodeLabel2)&&(e={nodeLabel1:i,edgeLabel:o,nodeLabel2:a}):e={nodeLabel1:i,edgeLabel:o,nodeLabel2:a}})),e},t.prototype.isMin=function(){var t=this,e=this.dfsCode;if(this.verbose&&console.log("isMin checking",e),1===e.dfsEdgeList.length)return!0;var n=this.directed,r=e.toGraph(hM,n),i=r.nodeMap,o=new mM,a={};r.nodes.forEach((function(e){var n=t.findForwardRootEdges(r,e);n.forEach((function(t){var n=i[t.to],o="".concat(e.label,"-").concat(t.label,"-").concat(n.label);a[o]||(a[o]={projected:[],nodeLabel1:e.label,edgeLabel:t.label,nodeLabel2:n.label});var s={graphId:r.id,edge:t,preNode:null};a[o].projected.push(s)}))}));var s=this.findMinLabel(a);if(s){o.dfsEdgeList.push(new gM(0,1,s.nodeLabel1,s.edgeLabel,s.nodeLabel2));var l=function a(s){for(var l=o.buildRmpath(),u=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,c=o.dfsEdgeList[l[0]].toNode,h={},d=!1,f=0,p=n?-1:0,g=function(e){if(d)return"break";s.forEach((function(n){var i=new yM(n),a=t.findBackwardEdge(r,i.edges[l[e]],i.edges[l[0]],i);a&&(h[a.label]||(h[a.label]={projected:[],edgeLabel:a.label}),h[a.label].projected.push({graphId:r.id,edge:h,preNode:n}),f=o.dfsEdgeList[l[e]].fromNode,d=!0)}))},m=l.length-1;m>p;m--){var y=g(m);if("break"===y)break}if(d){var v=t.findMinLabel(h);o.dfsEdgeList.push(new gM(c,f,cM,v.edgeLabel,cM));var b=o.dfsEdgeList.length-1;return t.dfsCode.dfsEdgeList[b]===o.dfsEdgeList[b]&&a(h[v.edgeLabel].projected)}var _={};d=!1;var x=0;s.forEach((function(e){var n=new yM(e),o=t.findForwardPureEdges(r,n.edges[l[0]],u,n);o.length>0&&(d=!0,x=c,o.forEach((function(t){var n="".concat(t.label,"-").concat(i[t.to].label);_[n]||(_[n]={projected:[],edgeLabel:t.label,nodeLabel2:i[t.to].label}),_[n].projected.push({graphId:r.id,edge:t,preNode:e})})))}));var w=l.length,S=function(e){if(d)return"break";var n=l[e];s.forEach((function(e){var a=new yM(e),s=t.findForwardRmpathEdges(r,a.edges[n],u,a);s.length>0&&(d=!0,x=o.dfsEdgeList[n].fromNode,s.forEach((function(t){var n="".concat(t.label,"-").concat(i[t.to].label);_[n]||(_[n]={projected:[],edgeLabel:t.label,nodeLabel2:i[t.to].label}),_[n].projected.push({graphId:r.id,edge:t,preNode:e})})))}))};for(m=0;m<w;m++){var E=S(m);if("break"===E)break}if(!d)return!0;var C=t.findMinLabel(_);o.dfsEdgeList.push(new gM(x,c+1,cM,C.edgeLabel,C.nodeLabel2));var M=o.dfsEdgeList.length-1;return e.dfsEdgeList[M]===o.dfsEdgeList[M]&&a(_["".concat(C.edgeLabel,"-").concat(C.nodeLabel2)].projected)},u="".concat(s.nodeLabel1,"-").concat(s.edgeLabel,"-").concat(s.nodeLabel2);return l(a[u].projected)}},t.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var t=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push(Object(RE["clone"])(t))}},t.prototype.subGraphMining=function(t){var e=this,n=this.getSupport(t);if(!(n<this.minSupport)&&this.isMin()){this.report();var r=this.dfsCode.getNodeNum(),i=this.dfsCode.buildRmpath(),o=this.dfsCode.dfsEdgeList[i[0]].toNode,a=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,s={},l={};t.forEach((function(t){for(var n=e.graphs[t.graphId],u=n.nodeMap,c=new yM(t),h=i.length-1;h>=0;h--){var d=e.findBackwardEdge(n,c.edges[i[h]],c.edges[i[0]],c);if(d){var f="".concat(e.dfsCode.dfsEdgeList[i[h]].fromNode,"-").concat(d.label);l[f]||(l[f]={projected:[],toNodeId:e.dfsCode.dfsEdgeList[i[h]].fromNode,edgeLabel:d.label}),l[f].projected.push({graphId:t.graphId,edge:d,preNode:t})}}if(!(r>=e.maxNodeNum)){var p=e.findForwardPureEdges(n,c.edges[i[0]],a,c);p.forEach((function(e){var n="".concat(o,"-").concat(e.label,"-").concat(u[e.to].label);s[n]||(s[n]={projected:[],fromNodeId:o,edgeLabel:e.label,nodeLabel2:u[e.to].label}),s[n].projected.push({graphId:t.graphId,edge:e,preNode:t})}));var g=function(r){var o=e.findForwardRmpathEdges(n,c.edges[i[r]],a,c);o.forEach((function(n){var o="".concat(e.dfsCode.dfsEdgeList[i[r]].fromNode,"-").concat(n.label,"-").concat(u[n.to].label);s[o]||(s[o]={projected:[],fromNodeId:e.dfsCode.dfsEdgeList[i[r]].fromNode,edgeLabel:n.label,nodeLabel2:u[n.to].label}),s[o].projected.push({graphId:t.graphId,edge:n,preNode:t})}))};for(h=0;h<i.length;h++)g(h)}})),Object.keys(l).forEach((function(t){var n=l[t],r=n.toNodeId,i=n.edgeLabel;e.dfsCode.dfsEdgeList.push(new gM(o,r,"-1",i,"-1")),e.subGraphMining(l[t].projected),e.dfsCode.dfsEdgeList.pop()})),Object.keys(s).forEach((function(t){var n=s[t],r=n.fromNodeId,i=n.edgeLabel,a=n.nodeLabel2;e.dfsCode.dfsEdgeList.push(new gM(r,o+1,cM,i,a)),e.subGraphMining(s[t].projected),e.dfsCode.dfsEdgeList.pop()}))}},t.prototype.generate1EdgeFrequentSubGraphs=function(){var t=this.graphs,e=this.directed,n=this.minSupport,r=this.frequentSize1Subgraphs,i={},o={},a={},s={};return Object.keys(t).forEach((function(n){var r=t[n],l=r.nodeMap;r.nodes.forEach((function(t,r){var u=t.label,c="".concat(n,"-").concat(u);if(!a[c]){var h=i[u]||0;h++,i[u]=h}a[c]={graphKey:n,label:u},t.edges.forEach((function(t){var r=u,i=l[t.to].label;if(!e&&r>i){var a=i;i=r,r=a}var c=t.label,h="".concat(n,"-").concat(r,"-").concat(c,"-").concat(i),d="".concat(r,"-").concat(c,"-").concat(i);if(!o[d]){var f=o[d]||0;f++,o[d]=f}s[h]={graphId:n,nodeLabel1:r,edgeLabel:c,nodeLabel2:i}}))}))})),Object.keys(i).forEach((function(t){var e=i[t];if(!(e<n)){var o={nodes:[],edges:[]};o.nodes.push({id:"0",label:t}),r.push(o)}})),r},t.prototype.run=function(){var t=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var e=this.graphs,n=(this.directed,{});Object.keys(e).forEach((function(r){var i=e[r],o=i.nodeMap;i.nodes.forEach((function(e){var a=t.findForwardRootEdges(i,e);a.forEach((function(t){var i=o[t.to],a="".concat(e.label,"-").concat(t.label,"-").concat(i.label);n[a]||(n[a]={projected:[],nodeLabel1:e.label,edgeLabel:t.label,nodeLabel2:i.label});var s={graphId:r,edge:t,preNode:null};n[a].projected.push(s)}))}))})),Object.keys(n).forEach((function(e){var r=n[e],i=r.projected,o=r.nodeLabel1,a=r.edgeLabel,s=r.nodeLabel2;t.dfsCode.dfsEdgeList.push(new gM(0,1,o,a,s)),t.subGraphMining(i),t.dfsCode.dfsEdgeList.pop()}))}},t}(),bM=function(t,e,n,r){var i={};return Object.keys(t).forEach((function(o,a){var s=t[o],l=new pM(a,!0,e),u={};s.nodes.forEach((function(t,e){l.addNode(e,t[n]),u[t.id]=e})),s.edges.forEach((function(t,e){var n=u[t.source],i=u[t.target];l.addEdge(-1,n,i,t[r])})),l&&l.getNodeNum()&&(i[l.id]=l)})),i},_M=function(t,e,n){var r=[];return t.forEach((function(t){var i={nodes:[],edges:[]};t.nodes.forEach((function(t){var n;i.nodes.push((n={id:"".concat(t.id)},n[e]=t.label,n))})),t.edges.forEach((function(t){var e;i.edges.push((e={source:"".concat(t.from),target:"".concat(t.to)},e[n]=t.label,e))})),r.push(i)})),r},xM="cluster",wM=function(t){var e=t.graphs,n=t.directed,r=void 0!==n&&n,i=t.nodeLabelProp,o=void 0===i?xM:i,a=t.edgeLabelProp,s=void 0===a?xM:a,l=bM(e,r,o,s),u=t.minSupport,c=t.maxNodeNum,h=t.minNodeNum,d=t.verbose,f=t.top,p={graphs:l,minSupport:u,maxNodeNum:c,minNodeNum:h,top:f,verbose:d,directed:r},g=new vM(p);g.run();var m=_M(g.frequentSubgraphs,o,s);return m},SM=wM,EM=function(t,e,n,r){void 0===n&&(n="cluster"),void 0===r&&(r=2);var i=[],o=t.nodes;return e.forEach((function(t,e){i.push(CM(o,t,e,n,r))})),i},CM=function(t,e,n,r,i){var o=[n],a=[],s={};return e.forEach((function(e,l){if(e<=i&&n!==l){o.push(l),a.push(t[l]);var u=t[l][r];s[u]?(s[u].count++,s[u].dists.push(e)):s[u]={count:1,dists:[e]}}})),Object.keys(s).forEach((function(t){s[t].dists=s[t].dists.sort((function(t,e){return t-e}))})),{nodeIdx:n,nodeId:t[n].id,nodeIdxs:o,neighbors:a,neighborNum:o.length-1,nodeLabelCountMap:s}},MM=function(t,e,n,r,i){var o=Math.ceil(n/e),a={},s=0;return r.forEach((function(t,r){var l=0,u=0,c=t.nodeIdxs,h=t.neighborNum-1;while(l<o){var d=c[1+Math.floor(Math.random()*h)],f=0;while(a["".concat(r,"-").concat(d)]||a["".concat(d,"-").concat(r)])if(d=Math.floor(Math.random()*e),f++,f>2*e)break;if(f<2*e&&(a["".concat(r,"-").concat(d)]={start:r,end:d,distance:i[r][d]},l++,s++,s>=n))return a;if(u++,u>2*e)break}if(l<o){var p=o-l;o=(o+p)/(e-r-1)}})),a},TM=function(t,e,n,r){var i=n.nodes;return r||(r={}),Object.keys(t).forEach((function(o){var a,s;if(!r||!r[o]){r[o]={nodes:[],edges:[]};var l=t[o],u=null===(a=e[l.start])||void 0===a?void 0:a.nodeIdxs,c=null===(s=e[l.end])||void 0===s?void 0:s.nodeIdxs;if(u&&c){var h=new Set(c),d=u.filter((function(t){return h.has(t)}));if(d&&d.length){for(var f={},p=d.length,g=0;g<p;g++){var m=i[d[g]];r[o].nodes.push(m),f[m.id]=!0}n.edges.forEach((function(t){f[t.source]&&f[t.target]&&r[o].edges.push(t)}))}}}})),r},AM=function(t,e,n,r){var i,o,a={};t.nodes.forEach((function(t){a[t.id]=t}));var s=0;return!(null===(i=null===e||void 0===e?void 0:e.edges)||void 0===i?void 0:i.length)||(null===(o=null===e||void 0===e?void 0:e.nodes)||void 0===o?void 0:o.length)<2?0:(t.edges.forEach((function(t){var i=a[t.source][n],o=a[t.target][n],l=null===e||void 0===e?void 0:e.nodes[0][n],u=null===e||void 0===e?void 0:e.nodes[1][n],c=null===e||void 0===e?void 0:e.edges[0][r];t[r]===c&&(i===l&&o===u||i===u&&o===l)&&s++})),s)},OM=function(t,e,n){for(var r=1/0,i=0,o=function(e){var n=t[e],o=Object.keys(n).sort((function(t,e){return n[t]-n[e]})),a=10,s=[];o.forEach((function(t,e){s[e%a]||(s[e%a]={graphs:[],totalCount:0,aveCount:0}),s[e%a].graphs.push(t),s[e%a].totalCount+=n[t]}));var l=0,u=[];s.forEach((function(t){var e=t.totalCount/t.graphs.length;t.aveCount=e,u.push(e);var r=0,i=t.length;t.graphs.forEach((function(e,i){var o=n[e];t.graphs.forEach((function(t,e){i!==e&&(r+=Math.abs(o-n[t]))}))})),r/=i*(i-1)/2,l+=r})),l/=s.length;var c=0;u.forEach((function(t,e){u.forEach((function(n,r){e!==r&&(c+=Math.abs(t-n))})),c/=u.length*(u.length-1)/2}));var h=c-l;r<h&&(r=h,i=e)},a=0;a<e;a++)o(a);return{structure:n[i],structureCountMap:t[i]}},kM=function(t,e){var n={},r={};return t.forEach((function(t,i){n[t.id]={idx:i,node:t,degree:0,inDegree:0,outDegree:0};var o=t[e];r[o]||(r[o]=[]),r[o].push(t)})),{nodeMap:n,nodeLabelMap:r}},IM=function(t,e,n){var r={},i={};return t.forEach((function(t,o){r["".concat($E)]={idx:o,edge:t};var a=t[e];i[a]||(i[a]=[]),i[a].push(t);var s=n[t.source];s&&(s.degree++,s.outDegree++);var l=n[t.target];l&&(l.degree++,l.inDegree++)})),{edgeMap:r,edgeLabelMap:i}},PM=function(t,e,n){var r=e.length,i={};return e.forEach((function(e,o){for(var a=n?0:o+1,s=t[o].id,l=a;l<r;l++)if(o!==l){var u=t[l].id,c=e[l];i["".concat(s,"-").concat(u)]=c,n||(i["".concat(u,"-").concat(s)]=c)}})),i},LM=function(t,e,n,r,i,o,a,s,l,u,c){var h,d="".concat(e.id,"-").concat(n.id);if(u&&u[d])return u[d];var f=c?c[d]:void 0;if(!f){var p=(h={},h[d]={start:r[e.id].idx,end:r[n.id].idx,distance:i},h);c=TM(p,o,t,c),f=c[d]}return AM(f,a,s,l)},NM=function(t,e,n,r){var i,o,a,s=null===(i=t[e])||void 0===i?void 0:i.degree,l=null===(o=t[e])||void 0===o?void 0:o.inDegree,u=null===(a=t[e])||void 0===a?void 0:a.outDegree;return void 0===t[e]&&(s=1/0,l=1/0,u=1/0,r[e].forEach((function(t){var e=n[t.id].degree;s>e&&(s=e);var r=n[t.id].inDegree;l>r&&(l=r);var i=n[t.id].outDegree;u>i&&(u=i)})),t[e]={degree:s,inDegree:l,outDegree:u}),{minPatternNodeLabelDegree:s,minPatternNodeLabelInDegree:l,minPatternNodeLabelOutDegree:u}},RM=function(t,e,n,r,i,o,a){var s;if(void 0===n&&(n=!1),void 0===o&&(o="cluster"),void 0===a&&(a="cluster"),t&&t.nodes){var l=t.nodes.length;if(l){var u=MC(t,n),c=MC(e,n),h=PM(t.nodes,u,n),d=PM(e.nodes,c,n),f=kM(t.nodes,o),p=f.nodeMap,g=f.nodeLabelMap,m=kM(e.nodes,o),y=m.nodeMap,v=m.nodeLabelMap;IM(t.edges,a,p);var b=IM(e.edges,a,y).edgeLabelMap,_=[];null===c||void 0===c||c.forEach((function(t){_=_.concat(t)})),i||(i=Math.max.apply(Math,Object(NE["__spreadArray"])(Object(NE["__spreadArray"])([],_,!1),[2],!1))),r||(r=i);var x=EM(t,u,o,r),w=EM(e,c,o,r),S=Math.min(100,l*(l-1)/2),E=MM(r,l,S,x,u),C=TM(E,x,t),M=10,T=1,A=1,O=4,k={graphs:C,nodeLabelProp:o,edgeLabelProp:a,minSupport:T,minNodeNum:A,maxNodeNum:O,directed:n},I=SM(k).slice(0,M),P=I.length,L=[];I.forEach((function(t,e){L[e]={},Object.keys(C).forEach((function(n){var r=C[n],i=AM(r,t,o,a);L[e][n]=i}))}));var N=OM(L,P,I),R=N.structure,D=N.structureCountMap,F=e.nodes[0],j=[],B=null===(s=e.nodes[0])||void 0===s?void 0:s[o],z=-1/0;e.nodes.forEach((function(t){var e=t[o],n=g[e];(null===n||void 0===n?void 0:n.length)>z&&(z=n.length,j=n,B=e,F=t)}));var U={},G={},q={},V={},H={},W={};Object.keys(v).forEach((function(r,i){H[r]=[],n&&(W[r]=[]);var s=-1/0,l=v[r],u={};l.forEach((function(t){var e=d["".concat(F.id,"-").concat(t.id)];if(e&&H[r].push(e),s<e&&(s=e),u["".concat(F.id,"-").concat(t.id)]={start:0,end:y[t.id].idx,distance:e},n){var i=d["".concat(t.id,"-").concat(F.id)];i&&W[r].push(i)}})),H[r]=H[r].sort((function(t,e){return t-e})),n&&(W[r]=W[r].sort((function(t,e){return t-e}))),G=TM(u,w,e,G);var c=[];if(Object.keys(u).forEach((function(t){if(q[t])c.push(q[t]);else{var e=G[t];q[t]=AM(e,R,o,a),c.push(q[t])}})),c=c.sort((function(t,e){return e-t})),V["".concat(F.id,"-").concat(r)]=c,r!==B)for(var f=(null===j||void 0===j?void 0:j.length)||0,g=function(e){var n=j[e],i=x[p[n.id].idx],s=i.nodeLabelCountMap[r],l=v[r].length;if(!s||s.count<l)return j.splice(e,1),"continue";for(var u=!1,d=0;d<l;d++)if(s.dists[d]>H[r][d]){u=!0;break}if(u)return j.splice(e,1),"continue";var f={};i.neighbors.forEach((function(t){var e=h["".concat(n.id,"-").concat(t.id)];f["".concat(n.id,"-").concat(t.id)]={start:p[n.id].idx,end:p[t.id].idx,distance:e}})),C=TM(f,x,t,C);var g=[];Object.keys(f).forEach((function(t){if(D[t])g.push(D[t]);else{var e=C[t];D[t]=AM(e,R,o,a),g.push(D[t])}})),g=g.sort((function(t,e){return e-t}));var m=!1;for(d=0;d<l;d++)if(g[d]<c[d]){m=!0;break}return m?(j.splice(e,1),"continue"):void 0},m=f-1;m>=0;m--)g(m)}));var Y=[];null===j||void 0===j||j.forEach((function(r){for(var s=p[r.id].idx,l=CM(t.nodes,u[s],s,o,i),c=l.neighbors,d=c.length,f=!1,g=d-1;g>=0;g--){if(c.length+1<e.nodes.length)return void(f=!0);var m=c[g],b=m[o];if(v[b]&&v[b].length)if(H[b]&&H[b].length){var _="".concat(r.id,"-").concat(m.id),w=h[_],S=H[b].length-1,E=H[b][S];if(w>E)c.splice(g,1);else{if(n){var M="".concat(m.id,"-").concat(r.id),T=h[M];S=W[b].length-1;var A=W[b][S];if(T>A){c.splice(g,1);continue}}var O=D[_]?D[_]:LM(t,r,m,p,w,x,R,o,a,D,C),k="".concat(F.id,"-").concat(b),I=V[k][V[k].length-1];if(O<I)c.splice(g,1);else{var P=NM(U,b,y,v),L=P.minPatternNodeLabelDegree;P.minPatternNodeLabelInDegree,P.minPatternNodeLabelOutDegree;p[m.id].degree<L&&c.splice(g,1)}}}else c.splice(g,1);else c.splice(g,1)}f||Y.push({nodes:[r].concat(c)})}));var X=_C(e,F.id,!1).length,J={};n?(Object.keys(X).forEach((function(t){var e=y[t].node[o];J[e]?J[e].push(X[t]):J[e]=[X[t]]})),Object.keys(J).forEach((function(t){J[t].sort((function(t,e){return t-e}))}))):J=H;for(var Z=Y.length,K=function(r){var i=Y[r],s=i.nodes[0],l={},u={};i.nodes.forEach((function(t,e){u[t.id]={idx:e,node:t,degree:0,inDegree:0,outDegree:0};var n=t[o];l[n]?l[n]++:l[n]=1}));var c=[],h={};t.edges.forEach((function(t){u[t.source]&&u[t.target]&&(c.push(t),h[t[a]]?h[t[a]]++:h[t[a]]=1,u[t.source].degree++,u[t.target].degree++,u[t.source].outDegree++,u[t.target].inDegree++)}));for(var d=Object.keys(b).length,f=!1,g=0;g<d;g++){var m=Object.keys(b)[g];if(!h[m]||h[m]<b[m].length){f=!0;break}}if(f)return Y.splice(r,1),"continue";var _=c.length;if(_<e.edges.length)return Y.splice(r,1),"break";var x=!1,w=function(t){var e=c[t],r=e[a],i=b[r];if(!i||!i.length)return h[r]--,i&&h[r]<i.length?(x=!0,"break"):(c.splice(t,1),u[e.source].degree--,u[e.target].degree--,u[e.source].outDegree--,u[e.target].inDegree--,"continue");var s=u[e.source].node[o],l=u[e.target].node[o],d=!1;return i.forEach((function(t){var e=y[t.source].node,r=y[t.target].node;e[o]===s&&r[o]===l&&(d=!0),n||e[o]!==l||r[o]!==s||(d=!0)})),d?void 0:(h[r]--,i&&h[r]<i.length?(x=!0,"break"):(c.splice(t,1),u[e.source].degree--,u[e.target].degree--,u[e.source].outDegree--,u[e.target].inDegree--,"continue"))};for(g=_-1;g>=0;g--){var S=w(g);if("break"===S)break}if(x)return Y.splice(r,1),"continue";i.edges=c;var E=_C(i,i.nodes[0].id,!1).length;if(Object.keys(E).reverse().forEach((function(t){if(t!==i.nodes[0].id&&!x){if(E[t]===1/0){var e=u[t].node[o];if(l[e]--,l[e]<v[e].length)return void(x=!0);var n=i.nodes.indexOf(u[t].node);return i.nodes.splice(n,1),void(u[t]=void 0)}var r=p[t].node[o];if(!J[r]||!J[r].length||E[t]>J[r][J[r].length-1]){e=u[t].node[o];if(l[e]--,l[e]<v[e].length)return void(x=!0);n=i.nodes.indexOf(u[t].node);i.nodes.splice(n,1),u[t]=void 0}}})),x)return Y.splice(r,1),"continue";var C=!0,M=0;while(C&&!x){C=!1;var T=n?u[s.id].degree<y[F.id].degree||u[s.id].inDegree<y[F.id].inDegree||u[s.id].outDegree<y[F.id].outDegree:u[s.id].degree<y[F.id].degree;if(T){x=!0;break}if(l[s[o]]<v[s[o]].length){x=!0;break}for(var A=i.nodes.length,O=A-1;O>=0;O--){var k=i.nodes[O],I=u[k.id].degree,P=u[k.id].inDegree,L=u[k.id].outDegree,N=k[o],R=NM(U,N,y,v),D=R.minPatternNodeLabelDegree,j=R.minPatternNodeLabelInDegree,B=R.minPatternNodeLabelOutDegree,z=n?I<D||P<j||L<B:I<D;if(z){if(l[k[o]]--,l[k[o]]<v[k[o]].length){x=!0;break}i.nodes.splice(O,1),u[k.id]=void 0,C=!0}}if(x||!C&&0!==M)break;_=c.length;for(var G=_-1;G>=0;G--){var q=c[G];if(!u[q.source]||!u[q.target]){c.splice(G,1);var V=q[a];if(h[V]--,u[q.source]&&(u[q.source].degree--,u[q.source].outDegree--),u[q.target]&&(u[q.target].degree--,u[q.target].inDegree--),b[V]&&h[V]<b[V].length){x=!0;break}C=!0}}M++}return x||x||i.nodes.length<e.nodes.length||c.length<e.edges.length?(Y.splice(r,1),"continue"):void 0},Q=Z-1;Q>=0;Q--){var $=K(Q);if("break"===$)break}var tt=Y.length,et=function(t){var e=Y[t],n={};e.edges.forEach((function(t){var e="".concat(t.source,"-").concat(t.target,"-").concat(t.label);n[e]?n[e]++:n[e]=1}));for(var r=function(t){var e=Y[t],r={};e.edges.forEach((function(t){var e="".concat(t.source,"-").concat(t.target,"-").concat(t.label);r[e]?r[e]++:r[e]=1}));var i=!0;Object.keys(r).length!==Object.keys(n).length?i=!1:Object.keys(n).forEach((function(t){r[t]!==n[t]&&(i=!1)})),i&&Y.splice(t,1)},i=tt-1;i>t;i--)r(i);tt=Y.length};for(Q=0;Q<=tt-1;Q++)et(Q);return Y}}},DM=RM,FM=function(){function t(t){void 0===t&&(t=10),this.linkedList=new YE,this.maxStep=t}return Object.defineProperty(t.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return!this.linkedList.head},t.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},t.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},t.prototype.push=function(t){this.linkedList.prepend(t),this.length>this.maxStep&&this.linkedList.deleteTail()},t.prototype.pop=function(){var t=this.linkedList.deleteHead();return t?t.value:null},t.prototype.toArray=function(){return this.linkedList.toArray().map((function(t){return t.value}))},t.prototype.clear=function(){while(!this.isEmpty())this.pop()},t}(),jM=FM,BM=yC,zM={getAdjMatrix:qE,breadthFirstSearch:nC,connectedComponent:oC,getDegree:sC,getInDegree:lC,getOutDegree:uC,detectCycle:yC,detectDirectedCycle:BM,detectAllCycles:mC,detectAllDirectedCycle:gC,detectAllUndirectedCycle:pC,depthFirstSearch:dC,dijkstra:_C,findAllPath:EC,findShortestPath:SC,floydWarshall:MC,labelPropagation:AC,louvain:jC,iLouvain:zC,kCore:GC,kMeans:HC,cosineSimilarity:YC,nodesCosineSimilarity:JC,minimumSpanningTree:iM,pageRank:aM,getNeighbors:ZE,Stack:jM,GADDI:DM},UM=UE["a"].transform,GM=function(t){return function(e,n){return e[t]-n[t]}},qM=function(t,e,n){return t>=e&&t<=n},VM=function(t,e,n,r){var i=1e-4,o={x:n.x-t.x,y:n.y-t.y},a={x:e.x-t.x,y:e.y-t.y},s={x:r.x-n.x,y:r.y-n.y},l=a.x*s.y-a.y*s.x,u=l*l,c=1/l,h=a.x*a.x+a.y*a.y,d=s.x*s.x+s.y*s.y;if(u>i*h*d){var f=(o.x*s.y-o.y*s.x)*c,p=(o.x*a.y-o.y*a.x)*c;return qM(f,0,1)&&qM(p,0,1)?{x:t.x+f*a.x,y:t.y+f*a.y}:null}return null},HM=function(t,e){var n=t.x,r=t.y,i=t.width,o=t.height,a=n+i/2,s=r+o/2,l=[],u={x:a,y:s};l.push({x:n,y:r}),l.push({x:n+i,y:r}),l.push({x:n+i,y:r+o}),l.push({x:n,y:r+o}),l.push({x:n,y:r});for(var c=null,h=1;h<l.length;h++)if(c=VM(l[h-1],l[h],u,e),c)break;return c},WM=function(t,e){var n=t.x,r=t.y,i=t.r,o=e.x,a=e.y,s=o-n,l=a-r;if(s*s+l*l<i*i)return null;var u=Math.atan(l/s);return{x:n+Math.abs(i*Math.cos(u))*Math.sign(s),y:r+Math.abs(i*Math.sin(u))*Math.sign(l)}},YM=function(t,e){var n=t.rx,r=t.ry,i=t.x,o=t.y,a=e.x-i,s=e.y-o,l=Math.atan2(s/r,a/n);return l<0&&(l+=2*Math.PI),{x:i+n*Math.cos(l),y:o+r*Math.sin(l)}},XM=function(t,e,n){void 0===n&&(n=1);var r=[t.x,t.y,n];return e&&!isNaN(e[0])||(e=[1,0,0,0,1,0,0,0,1]),UE["d"].transformMat3(r,r,e),{x:r[0],y:r[1]}},JM=function(t,e,n){void 0===n&&(n=1),e&&!isNaN(e[0])||(e=[1,0,0,0,1,0,0,0,1]);var r=UE["b"].invert([1,0,0,0,1,0,0,0,1],e);r||(r=[1,0,0,0,1,0,0,0,1]);var i=[t.x,t.y,n];return UE["d"].transformMat3(i,i,r),{x:i[0],y:i[1]}},ZM=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=t.x-n.x,a=t.y-n.y,s=(t.x*t.x-e.x*e.x-e.y*e.y+t.y*t.y)/2,l=(t.x*t.x-n.x*n.x-n.y*n.y+t.y*t.y)/2,u=i*o-r*a;return{x:-(a*s-i*l)/u,y:-(r*l-o*s)/u}},KM=function(t,e){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)},QM=function(t,e){var n=[];return t.forEach((function(t){var r=[];t.forEach((function(t){r.push(t*e)})),n.push(r)})),n},$M=function(t){for(var e=[],n=t.length,r=0;r<n;r+=1){e[r]=[];for(var i=0;i<n;i+=1)r===i?e[r][i]=0:0!==t[r][i]&&t[r][i]?e[r][i]=t[r][i]:e[r][i]=1/0}for(var o=0;o<n;o+=1)for(r=0;r<n;r+=1)for(i=0;i<n;i+=1)e[r][i]>e[r][o]+e[o][i]&&(e[r][i]=e[r][o]+e[o][i]);return e},tT=function(t,e){var n=t.nodes,r=t.edges,i=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach((function(t,e){o[t.id]=e;var n=[];i.push(n)})),r&&r.forEach((function(t){var n=t.source,r=t.target,a=o[n],s=o[r];i[a][s]=1,e||(i[s][a]=1)})),i},eT=function(t,e){t.translate(e.x,e.y)},nT=function(t,e,n,r){void 0===r&&(r={duration:500});var i=t.getMatrix();i||(i=[1,0,0,0,1,0,0,0,1]);var o=t.getCanvasBBox(),a=e.x-o.minX,s=e.y-o.minY;if(n){var l=a*i[0],u=s*i[4],c=0,h=0,d=0,f=0;t.animate((function(t){return d=l*t,f=u*t,i=UM(i,[["t",d-c,f-h]]),c=d,h=f,{matrix:i}}),r)}else{var p=UM(i,[["t",a,s]]);t.setMatrix(p)}},rT=function(t,e){var n=t.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var r=e;Object(RE["isArray"])(e)||(r=[e,e]),Object(RE["isArray"])(e)&&1===e.length&&(r=[e[0],e[0]]),n=UM(n,[["s",r[0],r[1]]]),t.setMatrix(n)},iT=function(t,e){var n=t.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]),n=UM(n,[["r",e]]),t.setMatrix(n)},oT=function(t,e,n){for(var r=[],i=0;i<t;i++)r[i]=0;return n.forEach((function(t){t.source&&(r[e[t.source]]+=1),t.target&&(r[e[t.target]]+=1)})),r};function aT(t,e,n){return(n[0]-t[0])*(e[1]-t[1])===(e[0]-t[0])*(n[1]-t[1])&&Math.min(t[0],e[0])<=n[0]&&n[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=n[1]&&n[1]<=Math.max(t[1],e[1])}var sT=function(t,e,n){var r=!1,i=t.length,o=1e-6;function a(t){return Math.abs(t)<o?0:t<0?-1:1}if(i<=2)return!1;for(var s=0;s<i;s++){var l=t[s],u=t[(s+1)%i];if(aT(l,u,[e,n]))return!0;a(l[1]-n)>0!==a(u[1]-n)>0&&a(e-(n-l[1])*(l[0]-u[0])/(l[1]-u[1])-l[0])<0&&(r=!r)}return r},lT=function(t,e){return!(e.minX>t.maxX||e.maxX<t.minX||e.minY>t.maxY||e.maxY<t.minY)},uT=function(t,e){var n=!1;return Object(RE["each"])(t,(function(t){if(VM(t.from,t.to,e.from,e.to))return n=!0,!1})),n},cT=function(t,e){var n=function(t){var e=t.map((function(t){return t[0]})),n=t.map((function(t){return t[1]}));return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,n),maxY:Math.max.apply(null,n)}},r=function(t){for(var e=[],n=t.length,r=0;r<n-1;r++){var i=t[r],o=t[r+1];e.push({from:{x:i[0],y:i[1]},to:{x:o[0],y:o[1]}})}if(e.length>1){var a=t[0],s=t[n-1];e.push({from:{x:s[0],y:s[1]},to:{x:a[0],y:a[1]}})}return e};if(t.length<2||e.length<2)return!1;var i=n(t),o=n(e);if(!lT(i,o))return!1;var a=!1;if(Object(RE["each"])(e,(function(e){if(sT(t,e[0],e[1]))return a=!0,!1})),a)return!0;if(Object(RE["each"])(t,(function(t){if(sT(e,t[0],t[1]))return a=!0,!1})),a)return!0;var s=r(t),l=r(e),u=!1;return Object(RE["each"])(l,(function(t){if(uT(s,t))return u=!0,!1})),u},hT=function(){function t(t,e,n,r){this.x1=t,this.y1=e,this.x2=n,this.y2=r}return t.prototype.getBBox=function(){var t=Math.min(this.x1,this.x2),e=Math.min(this.y1,this.y2),n=Math.max(this.x1,this.x2),r=Math.max(this.y1,this.y2),i={x:t,y:e,minX:t,minY:e,maxX:n,maxY:r,width:n-t,height:r-e};return i},t}(),dT=function(t,e){var n={top:[t.minX,t.minY,t.maxX,t.minY],left:[t.minX,t.minY,t.minX,t.maxY],bottom:[t.minX,t.maxY,t.maxX,t.maxY],right:[t.maxX,t.minY,t.maxX,t.maxY]};return n[e]},fT=function(t,e){var n=(e.x2-e.x1)*(t.y1-e.y1)-(e.y2-e.y1)*(t.x1-e.x1),r=(t.x2-t.x1)*(t.y1-e.y1)-(t.y2-t.y1)*(t.x1-e.x1),i=(e.y2-e.y1)*(t.x2-t.x1)-(e.x2-e.x1)*(t.y2-t.y1);if(i){var o=n/i,a=r/i;if(o>=0&&o<=1&&a>=0&&a<=1)return o}return Number.POSITIVE_INFINITY},pT=function(t,e){for(var n=["top","left","bottom","right"],r=t.getBBox(),i=0,o=[],a=0;a<4;a++){var s=dT(r,n[a]),l=s[0],u=s[1],c=s[2],h=s[3];o[a]=VM({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},{x:l,y:u},{x:c,y:h}),o[a]&&(i+=1)}return[o,i]},gT=function(t,e){for(var n=["top","left","bottom","right"],r=t.getBBox(),i=Number.POSITIVE_INFINITY,o=0,a=0;a<4;a++){var s=dT(r,n[a]),l=s[0],u=s[1],c=s[2],h=s[3],d=fT(e,new hT(l,u,c,h));d=Math.abs(d-.5),d>=0&&d<=1&&(o+=1,i=d<i?d:i)}return 0===o?-1:i},mT=function(t){var e=0,n=0;if(t.length>0){for(var r=0,i=t;r<i.length;r++){var o=i[r];e+=o.x,n+=o.y}e/=t.length,n/=t.length}return{x:e,y:n}},yT=function(t,e){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)},vT=function(t,e){var n,r=e.x1,i=e.y1,o=e.x2-r,a=e.y2-i,s=t.x-r,l=t.y-i,u=s*o+l*a;u<=0?n=0:(s=o-s,l=a-l,u=s*o+l*a,n=u<=0?0:u*u/(o*o+a*a));var c=s*s+l*l-n;return c<0&&(c=0),c},bT=function(t,e,n){return void 0===n&&(n=.001),Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<Math.pow(n,2)},_T=function(t,e){var n=t.x<e.x,r=t.x>e.x+e.width,i=t.y>e.y+e.height,o=t.y<e.y,a=n||r||i||o;if(!a)return 0;if(i&&!n&&!r)return Math.pow(e.y+e.height-t.y,2);if(o&&!n&&!r)return Math.pow(t.y-e.y,2);if(n&&!i&&!o)return Math.pow(e.x-t.x,2);if(r&&!i&&!o)return Math.pow(e.x+e.width-t.x,2);var s=Math.min(Math.abs(e.x-t.x),Math.abs(e.x+e.width-t.x)),l=Math.min(Math.abs(e.y-t.y),Math.abs(e.y+e.height-t.y));return s*s+l*l},xT=function(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=e.x,s=e.y,l=[i-n,o-r];if(UE["c"].exactEquals(l,[0,0]))return NaN;var u=[-l[1],l[0]];UE["c"].normalize(u,u);var c=[a-n,s-r];return Math.abs(UE["c"].dot(c,u))},wT=function(t,e,n){return t+(e-t)*n},ST=function(t,e,n){for(var r=Math.min(t.length,e.length),i=new Array(r),o=0;o<r;o++)i[o]=wT(t[o],e[o],n);return i},ET="rgb(95, 149, 255)",CT="rgb(255, 255, 255)",MT="rgb(0, 0, 0)",TT="rgb(247, 250, 255)",AT="rgb(239, 244, 255)",OT="rgb(253, 253, 253)",kT="rgb(250, 250, 250)",IT="rgb(224, 224, 224)",PT="rgb(234, 234, 234)",LT="rgb(245, 245, 245)",NT="rgb(191, 213, 255)",RT="#4572d9",DT="rgb(223, 234, 255)",FT={mainStroke:ET,mainFill:AT,activeStroke:ET,activeFill:TT,inactiveStroke:NT,inactiveFill:TT,selectedStroke:ET,selectedFill:CT,highlightStroke:RT,highlightFill:DT,disableStroke:IT,disableFill:kT,edgeMainStroke:IT,edgeActiveStroke:ET,edgeInactiveStroke:PT,edgeSelectedStroke:ET,edgeHighlightStroke:ET,edgeDisableStroke:LT,comboMainStroke:IT,comboMainFill:OT,comboActiveStroke:ET,comboActiveFill:TT,comboInactiveStroke:IT,comboInactiveFill:OT,comboSelectedStroke:ET,comboSelectedFill:OT,comboHighlightStroke:RT,comboHighlightFill:OT,comboDisableStroke:PT,comboDisableFill:kT},jT={version:"0.8.22",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:FT.mainStroke,fill:AT},size:20,color:FT.mainStroke,linkPoints:{size:8,lineWidth:1,fill:FT.activeFill,stroke:FT.activeStroke}},nodeStateStyles:{active:{fill:FT.activeFill,stroke:FT.activeStroke,lineWidth:2,shadowColor:FT.mainStroke,shadowBlur:10},selected:{fill:FT.selectedFill,stroke:FT.selectedStroke,lineWidth:4,shadowColor:FT.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:FT.highlightFill,stroke:FT.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:FT.inactiveFill,stroke:FT.inactiveStroke,lineWidth:1},disable:{fill:FT.disableFill,stroke:FT.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:MT,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:FT.edgeMainStroke,lineAppendWidth:2},color:FT.edgeMainStroke},edgeStateStyles:{active:{stroke:FT.edgeActiveStroke,lineWidth:1},selected:{stroke:FT.edgeSelectedStroke,lineWidth:2,shadowColor:FT.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:FT.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:FT.edgeInactiveStroke,lineWidth:1},disable:{stroke:FT.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:MT,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:FT.comboMainFill,lineWidth:1,stroke:FT.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:FT.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:FT.comboActiveStroke,lineWidth:1,fill:FT.comboActiveFill},selected:{stroke:FT.comboSelectedStroke,lineWidth:2,fill:FT.comboSelectedFill,shadowColor:FT.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:FT.comboHighlightStroke,lineWidth:2,fill:FT.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:FT.comboInactiveStroke,fill:FT.comboInactiveFill,lineWidth:1},disable:{stroke:FT.comboDisableStroke,fill:FT.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},windowFontFamily:"undefined"!==typeof window&&window.getComputedStyle&&document.body&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},BT={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},zT=Math.PI,UT=Math.sin,GT=Math.cos,qT=UT(zT/8),VT=GT(zT/8),HT=function(t,e){var n=t.getBBox(),r={x:n.minX,y:n.minY},i={x:n.maxX,y:n.maxY};if(e){var o=e.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]),r=XM(r,o),i=XM(i,o)}var a=r.x,s=r.y,l=i.x,u=i.y;return{x:a,y:s,minX:a,minY:s,maxX:l,maxY:u,width:l-a,height:u-s}},WT=function(t){var e=t.sourceNode||t.targetNode,n=e.get("group"),r=n.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var i=e.getKeyShape(),o=i.getBBox(),a=t.loopCfg||{},s=a.dist||2*Math.max(o.width,o.height),l=a.position||jT.defaultLoopPosition,u=[(o.minX+o.maxX)/2+r[6],(o.minY+o.maxY)/2+r[7]],c=[t.startPoint.x,t.startPoint.y],h=[t.endPoint.x,t.endPoint.y],d=o.height/2,f=o.width/2,p=d,g=d,m=p*qT,y=p*VT,v=g*qT,b=g*VT,_=i.get("type"),x=Math.min(d/2,f/2),w=Math.min(d,f),S=(null===a||void 0===a?void 0:a.pointPadding)?Math.min(w,null===a||void 0===a?void 0:a.pointPadding):x;if(c[0]===h[0]&&c[1]===h[1]){switch(l){case"top":"circle"===_?(c=[u[0]-m,u[1]-y],h=[u[0]+v,u[1]-b]):(c=[u[0]-S,u[1]-d],h=[u[0]+S,u[1]-d]);break;case"top-right":p=d,g=f,"circle"===_?(m=p*qT,y=p*VT,v=g*qT,b=g*VT,c=[u[0]+m,u[1]-y],h=[u[0]+b,u[1]-v]):(c=[u[0]+f-S,u[1]-d],h=[u[0]+f,u[1]-d+S]);break;case"right":p=f,g=f,"circle"===_?(m=p*qT,y=p*VT,v=g*qT,b=g*VT,c=[u[0]+y,u[1]-m],h=[u[0]+b,u[1]+v]):(c=[u[0]+f,u[1]-S],h=[u[0]+f,u[1]+S]);break;case"bottom-right":p=f,g=d,"circle"===_?(m=p*qT,y=p*VT,v=g*qT,b=g*VT,c=[u[0]+y,u[1]+m],h=[u[0]+v,u[1]+b]):(c=[u[0]+f,u[1]+d-S],h=[u[0]+f-S,u[1]+d]);break;case"bottom":p=d,g=d,"circle"===_?(m=p*qT,y=p*VT,v=g*qT,b=g*VT,c=[u[0]+m,u[1]+y],h=[u[0]-v,u[1]+b]):(c=[u[0]-S,u[1]+d],h=[u[0]+S,u[1]+d]);break;case"bottom-left":p=d,g=f,"circle"===_?(m=p*qT,y=p*VT,v=g*qT,b=g*VT,c=[u[0]-m,u[1]+y],h=[u[0]-b,u[1]+v]):(c=[u[0]-f,u[1]+d-S],h=[u[0]-f+S,u[1]+d]);break;case"left":p=f,g=f,"circle"===_?(m=p*qT,y=p*VT,v=g*qT,b=g*VT,c=[u[0]-y,u[1]+m],h=[u[0]-b,u[1]-v]):(c=[u[0]-f,u[1]-S],h=[u[0]-f,u[1]+S]);break;case"top-left":p=f,g=d,"circle"===_?(m=p*qT,y=p*VT,v=g*qT,b=g*VT,c=[u[0]-y,u[1]-m],h=[u[0]-v,u[1]-b]):(c=[u[0]-f+S,u[1]-d],h=[u[0]-f,u[1]-d+S]);break;default:p=f,g=f,m=p*qT,y=p*VT,v=g*qT,b=g*VT,c=[u[0]-m,u[1]-y],h=[u[0]+v,u[1]-b]}if(!1===a.clockwise){var E=[c[0],c[1]];c=[h[0],h[1]],h=[E[0],E[1]]}}var C=[c[0]-u[0],c[1]-u[1]],M=(p+s)/p,T=(g+s)/g;!1===a.clockwise&&(M=(g+s)/g,T=(p+s)/p);var A=UE["c"].scale([0,0],C,M),O=[u[0]+A[0],u[1]+A[1]],k=[h[0]-u[0],h[1]-u[1]],I=UE["c"].scale([0,0],k,T),P=[u[0]+I[0],u[1]+I[1]];return t.startPoint={x:c[0],y:c[1]},t.endPoint={x:h[0],y:h[1]},t.controlPoints=[{x:O[0],y:O[1]},{x:P[0],y:P[1]}],t},YT=function(t,e,n,r,i){var o=1e-4,a=[],s=null===t||void 0===t?void 0:t.getPoint(e);if(!s)return{x:0,y:0,angle:0};if(e<o)a=t.getStartTangent().reverse();else if(e>1-o)a=t.getEndTangent();else{var l=null===t||void 0===t?void 0:t.getPoint(e+o);a.push([s.x,s.y]),a.push([l.x,l.y])}var u=Math.atan2(a[1][1]-a[0][1],a[1][0]-a[0][0]);if(u<0&&(u+=2*zT),n&&(s.x+=GT(u)*n,s.y+=UT(u)*n),r){var c=u-zT/2;u>.5*zT&&u<1.5*zT&&(c-=zT),s.x+=GT(c)*r,s.y+=UT(c)*r}var h={x:s.x,y:s.y,angle:u};return i?(u>.5*zT&&u<1.5*zT&&(u-=zT),Object(NE["__assign"])({rotate:u},h)):h},XT=function t(e,n,r,i){if(!1===i(e,n,r))return!1;if(e&&e.children)for(var o=e.children.length-1;o>=0;o--)if(!t(e.children[o],e,o,i))return!1;return!0},JT=function t(e,n,r,i){if(e&&e.children)for(var o=e.children.length-1;o>=0;o--)if(!t(e.children[o],e,o,i))return;return!1!==i(e,n,r)},ZT=function(t,e){"function"===typeof e&&XT(t,null,-1,e)},KT=function(t,e){"function"===typeof e&&JT(t,null,-1,e)},QT=function(t,e){return e*(BT[t]||1)},$T=function(t,e){var n=0,r=new RegExp("[一-龥]+");return t.split("").forEach((function(t){r.test(t)?n+=e:n+=QT(t,e)})),[n,e]},tA=function(t,e){return"number"!==typeof e||e<=0||e>=t.length?t:t.substring(0,e)+"..."},eA=function(t,e){var n=[],r={},i={};t.forEach((function(t){i[t.id]=t})),t.forEach((function(t,e){var o=Object(RE["clone"])(t);o.itemType="combo",o.children=void 0,o.parentId===o.id?(console.warn("The parentId for combo ".concat(o.id," can not be the same as the combo's id")),delete o.parentId):o.parentId&&!i[o.parentId]&&(console.warn("The parent combo for combo ".concat(o.id," does not exist!")),delete o.parentId);var a=r[o.id];if(a){if(o.children=a.children,r[o.id]=o,a=o,!a.parentId)return void n.push(a);var s=r[a.parentId];if(s)s.children?s.children.push(o):s.children=[o];else{var l={id:a.parentId,children:[a]};r[a.parentId]=l,r[o.id]=o}}else if(Object(RE["isString"])(t.parentId)){var u=r[t.parentId];if(u)u.children?u.children.push(o):u.children=[o],r[o.id]=o;else{var c={id:t.parentId,children:[o]};r[c.id]=c,r[o.id]=o}}else n.push(o),r[o.id]=o}));var o={};(e||[]).forEach((function(t){o[t.id]=t;var e=r[t.comboId];if(e){var n={id:t.id,comboId:t.comboId};e.children?e.children.push(n):e.children=[n],n.itemType="node",r[t.id]=n}}));var a=0;return n.forEach((function(t){t.depth=a+10,ZT(t,(function(t){var e,n=r[t.id].itemType;e="node"===n?r[t.comboId]:r[t.parentId],t.depth=e&&"node"===n?a+1:a+10,a<t.depth&&(a=t.depth);var i=o[t.id];return i&&(i.depth=t.depth),!0}))})),n},nA=function(t,e,n){var r,i,o=t,a={root:{children:t}},s=!1,l="root";(t||[]).forEach((function(t){if(!s)return t.id===e?(i=t,"combo"===t.itemType?i.parentId=n:i.comboId=n,void(s=!0)):void ZT(t,(function(t){var r;return a[t.id]={children:(null===t||void 0===t?void 0:t.children)||[]},o=null===(r=a[t.parentId||t.comboId||"root"])||void 0===r?void 0:r.children,!t||!t.removed&&e!==t.id||!o||(l=t.parentId||t.comboId||"root",i=t,"combo"===t.itemType?i.parentId=n:i.comboId=n,s=!0,!1)}))})),o=null===(r=a[l])||void 0===r?void 0:r.children;var u=o?o.indexOf(i):-1;if(u>-1&&o.splice(u,1),s||(i={id:e,itemType:"node",comboId:n},a[e]={children:void 0}),e){var c=!1;if(n){var h=0;(t||[]).forEach((function(t){c||ZT(t,(function(t){return n!==t.id||(c=!0,t.children?t.children.push(i):t.children=[i],h=t.depth,"node"===i.itemType?i.depth=h+2:i.depth=h+1,!1)}))}))}else n&&c||"node"===i.itemType||t.push(i);var d=i.depth;ZT(i,(function(t){return"node"===t.itemType?d+=2:d+=1,t.depth=d,!0}))}return t},rA=function(t,e,n){var r={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};if(!t||0===t.length){var i=null===n||void 0===n?void 0:n.getModel(),o=i||{},a=o.x,s=o.y,l=o.fixSize,u=o.collapsed,c=o.fixCollapseSize,h=u?c:l,d=Object(RE["isArray"])(h)?h:[h,h],f=d[0],p=d[1],g=[f/2,p/2];return{minX:a-g[0],minY:s-g[1],maxX:a+g[0],maxY:s+g[1],x:a,y:s,width:f,height:p}}return t.forEach((function(t){var n=e.findById(t.id);if(n&&n.isVisible()){n.set("bboxCanvasCache",void 0);var i=n.getCanvasBBox();i.x&&r.minX>i.minX&&(r.minX=i.minX),i.y&&r.minY>i.minY&&(r.minY=i.minY),i.x&&r.maxX<i.maxX&&(r.maxX=i.maxX),i.y&&r.maxY<i.maxY&&(r.maxY=i.maxY)}})),r.x=(r.minX+r.maxX)/2,r.y=(r.minY+r.maxY)/2,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,"circle"===(null===n||void 0===n?void 0:n.getKeyShape().get("type"))&&(r.width=Math.hypot(r.height,r.width),r.height=r.width),Object.keys(r).forEach((function(t){r[t]!==1/0&&r[t]!==-1/0||(r[t]=void 0)})),r},iA=function(t){var e=Object(RE["isNumber"])(t.x)||Object(RE["isNumber"])(t.y)||t.type||t.anchorPoints||t.size;return t.style&&(e=e||Object(RE["isNumber"])(t.style.r)||Object(RE["isNumber"])(t.style.width)||Object(RE["isNumber"])(t.style.height)||Object(RE["isNumber"])(t.style.rx)||Object(RE["isNumber"])(t.style.ry)),e},oA=function(t){var e={};return Object.keys(t).forEach((function(n){var r=t[n];if("img"!==n||Object(RE["isString"])(r))if(Object(RE["isObject"])(r)&&!Object(RE["isArray"])(r)){var i={};Object.keys(r).forEach((function(t){var e=r[t];("img"!==t||Object(RE["isString"])(e))&&(i[t]=Object(RE["clone"])(e))})),e[n]=i}else e[n]=Object(RE["clone"])(r)})),e},aA=function(t){var e,n=t.animateCfg,r=t.callback;if(n)if(e=Object(RE["clone"])(n),n.callback){var i=n.callback;e.callback=function(){r(),i()}}else e.callback=r;else e={duration:500,callback:r};return e},sA=function(t){if(!t)return console.error("G6 Error Tips: the data must be defined"),!1;var e=t.nodes,n=t.edges,r=t.combos,i=void 0===r?[]:r;if(!e&&!n){var o=!0;return ZT(t,(function(t){return!!Object(RE["isString"])(t.id)||(o=!1,!1)})),o}var a=(e||[]).find((function(t){return!Object(RE["isString"])(t.id)}));if(a)return console.warn("G6 Warning Tips: missing 'id' property, or %c".concat(a.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1;var s=(e||[]).map((function(t){return t.id})),l=null===i||void 0===i?void 0:i.map((function(t){return t.id})),u=Object(NE["__spreadArray"])(Object(NE["__spreadArray"])([],s,!0),l,!0),c=(n||[]).find((function(t){return!u.includes(t.source)||!u.includes(t.target)}));return!c||(console.warn("G6 Warning Tips: The source %c".concat(c.source,"%c or the target %c").concat(c.target,"%c of the edge do not exist in the nodes or combos."),"font-size: 20px; color: red;","","font-size: 20px; color: red;",""),!1)},lA=function(t,e){if("node"===t||"combo"===t){if(e.id&&!Object(RE["isString"])(e.id))return console.warn("G6 Warning Tips: missing 'id' property, or the 'id' %c".concat(e.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1}else if("edge"===t&&(!e.source||!e.target))return console.warn("G6 Warning Tips: missing 'source' or 'target' for the edge."),!1;return!0},uA=function(){function t(t){this.graph=t,this.destroyed=!1,this.modes=t.get("modes")||{default:[]},this.formatModes(),this.mode=t.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return t.prototype.formatModes=function(){var t=this.modes;Object(RE["each"])(t,(function(t){Object(RE["each"])(t,(function(e,n){Object(RE["isString"])(e)&&(t[n]={type:e})}))}))},t.prototype.setBehaviors=function(t){var e,n=this.graph,r=this.modes[t],i=[];Object(RE["each"])(r||[],(function(t){var r=jE.getBehavior(t.type||t);r&&(e=new r(t),e&&(e.bind(n),i.push(e)))})),this.currentBehaves=i},t.mergeBehaviors=function(t,e){return Object(RE["each"])(e,(function(e){t.indexOf(e)<0&&(Object(RE["isString"])(e)&&(e={type:e}),t.push(e))})),t},t.filterBehaviors=function(t,e){var n=[];return t.forEach((function(t){var r="";r=Object(RE["isString"])(t)?t:t.type,e.indexOf(r)<0&&n.push(t)})),n},t.prototype.setMode=function(t){var e=this,n=e.modes,r=e.graph,i=t,o=n[i];o&&(r.emit("beforemodechange",{mode:t}),Object(RE["each"])(this.currentBehaves,(function(t){t.delegate&&t.delegate.remove(),t.unbind(r)})),this.setBehaviors(i),r.emit("aftermodechange",{mode:t}),this.mode=t)},t.prototype.getMode=function(){return this.mode},t.prototype.manipulateBehaviors=function(e,n,r){var i,o=this;if(i=Object(RE["isArray"])(e)?e:[e],Object(RE["isArray"])(n))return Object(RE["each"])(n,(function(e){o.modes[e]?o.modes[e]=r?t.mergeBehaviors(o.modes[e]||[],i):t.filterBehaviors(o.modes[e]||[],i):r&&(o.modes[e]=i)})),this;var a=n;return n||(a=this.mode),this.modes[a]||r&&(this.modes[a]=i),this.modes[a]=r?t.mergeBehaviors(this.modes[a]||[],i):t.filterBehaviors(this.modes[a]||[],i),this.formatModes(),this.setMode(this.mode),this},t.prototype.updateBehavior=function(t,e,n){Object(RE["isString"])(t)&&(t={type:t});var r=[];if(n&&n!==this.mode&&"default"!==n){if(r=this.modes[n],!r||!r.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;var i=r.length;for(a=0;a<i;a++){s=r[a];if(s.type===t.type||s===t.type)return s===t.type&&(s={type:s}),Object.assign(s,e),r[a]=s,this;a===i-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(r=this.currentBehaves,!r||!r.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var o=r.length,a=0;a<o;a++){var s=r[a];if(s.type===t.type)return s.updateCfg(e),this;a===o-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},t.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},t}(),cA=uA,hA=n("6855"),dA=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.item=n.item,r.canvasX=n.canvasX,r.canvasY=n.canvasY,r.wheelDelta=n.wheelDelta,r.detail=n.detail,r}return Object(NE["__extends"])(e,t),e}(hA["Event"]),fA=function(t){return"".concat(t,"-").concat(Math.random()).concat(Date.now())},pA=function(t){if(Object(RE["isArray"])(t))switch(t.length){case 4:return t;case 3:return t.push(t[1]),t;case 2:return t.concat(t);case 1:return[t[0],t[0],t[0],t[0]];default:return[0,0,0,0]}if(Object(RE["isNumber"])(t))return[t,t,t,t];if(Object(RE["isString"])(t)){var e=parseInt(t,10);return[e,e,e,e]}return[0,0,0,0]},gA=function(t){var e=new dA(t.type,t);return e.clientX=t.clientX,e.clientY=t.clientY,e.x=t.x,e.y=t.y,e.target=t.target,e.currentTarget=t.currentTarget,e.bubbles=!0,e.item=t.item,e},mA=function(t){if(!t)return!1;for(var e=9,n=[1,0,0,0,1,0,0,0,1],r=0;r<e;r++)if(t[r]!==n[r])return!0;return!1},yA=function(t){return Number.isNaN(Number(t))},vA=function(t){for(var e=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<t.length;o++){var a=t[o],s=a.getBBox(),l=s.minX,u=s.minY,c=s.maxX,h=s.maxY;l<e&&(e=l),u<r&&(r=u),c>n&&(n=c),h>i&&(i=h)}var d=Math.floor(e),f=Math.floor(r),p=Math.ceil(n)-Math.floor(e),g=Math.ceil(i)-Math.floor(r);return{x:d,y:f,width:p,height:g,minX:e,minY:r,maxX:n,maxY:i}},bA=function(t,e,n,r,i){void 0===e&&(e=15),void 0===n&&(n="quadratic"),void 0===r&&(r=void 0),void 0===i&&(i=void 0);for(var o=t.length,a=2*e,s=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],l={},u=[],c={},h=0;h<o;h++){var d=t[h],f=d.source,p=d.target,g="".concat(f,"-").concat(p);if(!u[h]){l[g]||(l[g]=[]),u[h]=!0,l[g].push(d);for(var m=0;m<o;m++)if(h!==m){var y=t[m],v=y.source,b=y.target;u[m]||(f===b&&p===v?(l[g].push(y),u[m]=!0,c["".concat(v,"|").concat(b,"|").concat(l[g].length-1)]=!0):f===v&&p===b&&(l[g].push(y),u[m]=!0))}}}for(var _ in l)for(var x=l[_],w=x.length,S=0;S<w;S++){var E=x[S];if(E.source!==E.target)if(1===w&&r&&E.source!==E.target)E.type=r;else{E.type=n;var C=(S%2===0?1:-1)*(c["".concat(E.source,"|").concat(E.target,"|").concat(S)]?-1:1);E.curveOffset=w%2===1?C*Math.ceil(S/2)*a:C*(Math.floor(S/2)*a+e)}else i&&(E.type=i),E.loopCfg={position:s[S%8],dist:20*Math.floor(S/8)+50}}return t},_A=n("14f7"),xA=function(){function t(t){this.destroyed=!1,this.graph=t,this.destroyed=!1}return t.prototype.getViewCenter=function(){var t=this.getFormatPadding(),e=this.graph,n=this.graph.get("width"),r=e.get("height");return{x:(n-t[1]-t[3])/2+t[3],y:(r-t[0]-t[2])/2+t[0]}},t.prototype.fitCenter=function(t,e){var n,r=this.graph,i=r.get("group"),o=r.getNodes();if(o.length>r.get("optimizeThreshold")){var a=1/0,s=1/0,l=-1/0,u=-1/0;o.forEach((function(t){var e=t.getModel(),n=e.x,r=e.y;a>n&&(a=n),s>r&&(s=r),l<n&&(l=n),u<r&&(u=r)}));var c=i.getMatrix()||[1,0,0,0,1,0,0,0,1],h=XM({x:a,y:s},c),d=h.x,f=h.y,p=XM({x:l,y:u},c),g=p.x,m=p.y;n={minX:d,maxX:g,minY:f,maxY:m,width:g-d,height:m-f,x:d,y:f}}else n=i.getCanvasBBox();if(0!==n.width&&0!==n.height){var y=this.getViewCenter(),v={x:n.x+n.width/2,y:n.y+n.height/2};r.translate(y.x-v.x,y.y-v.y,t,e)}},t.prototype.animatedFitView=function(t,e,n,r,i,o,a,s){var l=this.graph;n=n||{duration:500,easing:"easeCubic"};var u=[1,0,0,0,1,0,0,0,1],c=r.x+i.x-o.x-r.minX,h=r.y+i.y-o.y-r.minY;if(!yA(c)&&!yA(h)){var d=Object(_A["transform"])(u,[["t",c,h]]);if(s){var f=l.get("minZoom"),p=l.get("maxZoom"),g=a;f&&a<f?(g=f,console.warn("fitview failed, ratio out of range, ratio: %f",a,"graph minzoom has been used instead")):p&&a>p&&(g=p,console.warn("fitview failed, ratio out of range, ratio: %f",a,"graph maxzoom has been used instead"));var m=Object(_A["transform"])(d,[["t",-i.x,-i.y],["s",g,g],["t",i.x,i.y]]),y=aA({animateCfg:n,callback:function(){t.setMatrix(m),l.emit("viewportchange",{action:"translate",matrix:d}),l.emit("viewportchange",{action:"zoom",matrix:m})}});t.stopAnimate(),t.setMatrix(e),t.animate((function(t){return{matrix:ST(e,m,t)}}),y)}else{var v=aA({animateCfg:n,callback:function(){l.emit("viewportchange",{action:"translate",matrix:d})}});t.animate((function(t){return{matrix:ST(e,d,t)}}),v)}}},t.prototype.fitView=function(t,e){var n,r=this.graph,i=this.getFormatPadding(),o=r.get("width"),a=r.get("height"),s=r.get("group"),l=s.getMatrix()||[1,0,0,0,1,0,0,0,1];s.resetMatrix();var u=r.getNodes();if(u.length>r.get("optimizeThreshold")){var c=1/0,h=1/0,d=-1/0,f=-1/0;u.forEach((function(t){var e=t.getModel(),n=e.x,r=e.y;c>n&&(c=n),h>r&&(h=r),d<n&&(d=n),f<r&&(f=r)})),n={minX:c,maxX:d,minY:h,maxY:f,width:d-c,height:f-h,x:c,y:h}}else n=s.getCanvasBBox();if(0!==n.width&&0!==n.height){var p=this.getViewCenter(),g={x:n.x+n.width/2,y:n.y+n.height/2},m=(o-i[1]-i[3])/n.width,y=(a-i[0]-i[2])/n.height,v=m;if(m>y&&(v=y),t)this.animatedFitView(s,l,e,n,p,g,v,!0);else{var b=p.x-g.x,_=p.y-g.y;if(yA(b)||yA(_))return;r.translate(b,_),r.zoom(v,p)||console.warn("zoom failed, ratio out of range, ratio: %f",v)}}},t.prototype.fitViewByRules=function(t,e,n){var r,i=t.onlyOutOfViewPort,o=void 0!==i&&i,a=t.direction,s=void 0===a?"both":a,l=t.ratioRule,u=void 0===l?"min":l,c=this.graph,h=this.getFormatPadding(),d=c.get("width"),f=c.get("height"),p=c.get("group"),g=p.getMatrix()||[1,0,0,0,1,0,0,0,1];p.resetMatrix();var m=c.getNodes();if(m.length>c.get("optimizeThreshold")){var y=1/0,v=1/0,b=-1/0,_=-1/0;m.forEach((function(t){var e=t.getModel(),n=e.x,r=e.y;y>n&&(y=n),v>r&&(v=r),b<n&&(b=n),_<r&&(_=r)})),r={minX:y,maxX:b,minY:v,maxY:_,width:b-y,height:_-v,x:y,y:v}}else r=p.getCanvasBBox();if(0!==r.width&&0!==r.height){var x,w=this.getViewCenter(),S={x:r.x+r.width/2,y:r.y+r.height/2},E=(d-h[1]-h[3])/r.width,C=(f-h[0]-h[2])/r.height;if(x="x"===s?E:"y"===s?C:"max"===u?Math.max(E,C):Math.min(E,C),o&&(x=x<1?x:1),e)this.animatedFitView(p,g,n,r,w,S,x,!0);else{var M=c.getZoom(),T=M*x,A=c.get("minZoom");T<A&&(T=A,console.warn("fitview failed, ratio out of range, ratio: %f",x,"graph minzoom has been used instead")),c.translate(w.x-S.x,w.y-S.y),c.zoomTo(T,w)}}},t.prototype.getFormatPadding=function(){var t=this.graph.get("fitViewPadding");return pA(t)},t.prototype.focusPoint=function(t,e,n){var r=this,i=this.getViewCenter(),o=this.getPointByCanvas(i.x,i.y),a=this.graph.get("group").getMatrix();if(a||(a=[1,0,0,0,1,0,0,0,1]),e){var s=(o.x-t.x)*a[0],l=(o.y-t.y)*a[4],u=0,c=0,h=0,d=0;this.graph.get("canvas").animate((function(t){h=s*t,d=l*t,r.graph.translate(h-u,d-c),u=h,c=d}),Object(NE["__assign"])({},n))}else this.graph.translate((o.x-t.x)*a[0],(o.y-t.y)*a[4])},t.prototype.getPointByCanvas=function(t,e){var n=this.graph.get("group").getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var r=JM({x:t,y:e},n);return r},t.prototype.getPointByClient=function(t,e){var n=this.graph.get("canvas"),r=n.getPointByClient(t,e);return this.getPointByCanvas(r.x,r.y)},t.prototype.getClientByPoint=function(t,e){var n=this.graph.get("canvas"),r=this.getCanvasByPoint(t,e),i=n.getClientByPoint(r.x,r.y);return{x:i.x,y:i.y}},t.prototype.getCanvasByPoint=function(t,e){var n=this.graph.get("group").getMatrix();return n||(n=[1,0,0,0,1,0,0,0,1]),XM({x:t,y:e},n)},t.prototype.focus=function(t,e,n){if(Object(RE["isString"])(t)&&(t=this.graph.findById(t)),t){var r=0,i=0;if(t.getType&&"edge"===t.getType()){var o=t.getSource().get("group").getMatrix(),a=t.getTarget().get("group").getMatrix();o&&a?(r=(o[6]+a[6])/2,i=(o[7]+a[7])/2):(o||a)&&(r=o?o[6]:a[6],i=o?o[7]:a[7])}else{var s=t.get("group"),l=s.getMatrix();l||(l=[1,0,0,0,1,0,0,0,1]),r=l[6],i=l[7]}this.focusPoint({x:r,y:i},e,n)}},t.prototype.focusItems=function(t,e,n,r){if(t.length){var i=this.graph,o=this.getFormatPadding(),a=i.get("width"),s=i.get("height"),l=i.get("group"),u=l.getMatrix()||[1,0,0,0,1,0,0,0,1];l.resetMatrix();for(var c={x:0,y:0,minX:Number.MAX_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxX:Number.MIN_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER,width:0,height:0},h=0,d=t;h<d.length;h++){var f=d[h],p=f.getBBox();p.minX<c.minX&&(c.minX=p.minX),p.minY<c.minY&&(c.minY=p.minY),p.maxX>c.maxX&&(c.maxX=p.maxX),p.maxY>c.maxY&&(c.maxY=p.maxY)}if(c.x=c.minX,c.y=c.minY,c.width=c.maxX-c.minX,c.height=c.maxY-c.minY,0!==c.width&&0!==c.height){var g=this.getViewCenter(),m={x:c.x+c.width/2,y:c.y+c.height/2},y=(a-o[1]-o[3])/c.width,v=(s-o[0]-o[2])/c.height,b=y;y>v&&(b=v),n?this.animatedFitView(l,u,r,c,g,m,b,e):(i.translate(g.x-m.x,g.y-m.y),e&&!i.zoom(b,g)&&console.warn("zoom failed, ratio out of range, ratio: %f",b))}}},t.prototype.changeSize=function(t,e){var n=this.graph;if(!Object(RE["isNumber"])(t)||!Object(RE["isNumber"])(e))throw Error("invalid canvas width & height, please make sure width & height type is number");n.set({width:t,height:e});var r=n.get("canvas");r.changeSize(t,e);var i=n.get("plugins");i.forEach((function(t){t.get("gridContainer")&&t.positionInit()}))},t.prototype.destroy=function(){this.graph=null,this.destroyed=!1},t}(),wA=xA;function SA(t){return SA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},SA(t)}function EA(t){if("string"!==typeof t)return t;var e=function(t){if("string"!==typeof t)return t;try{return JSON.parse(t.trim())}catch(e){return t.trim()}},n=e(t);if("string"!==typeof n)return n;var r=function(t){return t[t.length-1]},i=t.trim(),o=[],a=[],s=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.some((function(t){return r(a)===t}))},l=function(){return r(o)},u=null,c=0,h="";while(c<i.length){var d=i[c],f=s('"',"'");if(f||d.trim()){var p="\\"===i[c-1],g=s("}"),m=s("]"),y=s(","),v=l();if(f)if(r(a)!==d||p)h+=d;else{a.pop();var b=e(h);v.push(b),u=b,h=""}else if(m&&","===d)h&&(v.push(e(h)),h="");else if(g&&":"===d)a.push(","),h&&(v.push(h),h="");else if(y&&","===d)h&&(v.push(e(h)),h=""),a.pop();else if("}"===d&&(g||y)){h&&(v.push(e(h)),h=""),y&&a.pop();for(var _={},x=1;x<v.length;x+=2)_[v[x-1]]=v[x];o.pop(),o.length&&r(o).push(_),a.pop(),u=_}else"]"===d&&m?(h&&(v.push(e(h)),h=""),o.pop(),o.length&&r(o).push(v),a.pop(),u=v):"{"===d?(o.push([]),a.push("}")):"["===d?(o.push([]),a.push("]")):'"'===d?a.push('"'):"'"===d?a.push("'"):h+=d;c+=1}else c+=1}return u||h}var CA=function(t){return t.split("-").reduce((function(t,e){return t+e.charAt(0).toUpperCase()+e.slice(1)}))},MA=function(t){return function(e){var n=t.length,r=[],i=0,o="";while(i<n)if("{"===t[i]&&"{"===t[i+1])r.push(o),o="",i+=2;else if("}"===t[i]&&"}"===t[i+1]){if(r.length){var a=r.pop();o=Object(RE["get"])(e,o,a.endsWith("=")?'"{'.concat(o,'}"'):o),r.push(a+o)}i+=2,o=""}else o+=t[i],i+=1;return r.push(o),r.map((function(t,e){return r[e-1]&&r[e-1].endsWith("=")?'"{'.concat(t,'}"'):t})).join("")}};function TA(t,e){var n={},r=t.getAttributeNames&&t.getAttributeNames()||[],i=t.children&&Array.from(t.children).map((function(t){return TA(t,e)})),o={},a=t.tagName?t.tagName.toLowerCase():"group";return"text"===a&&(n.text=t.innerText),o.type=a,"img"===a&&(o.type="image"),Array.from(r).forEach((function(e){var r=CA(e),i=t.getAttribute(e);try{if("style"===r||"attrs"===r){var a=EA(i);n=Object(NE["__assign"])(Object(NE["__assign"])({},n),a)}else o[r]=EA(i)}catch(s){if("style"===r)throw s;o[r]=i}})),o.attrs=n,e&&e.style&&o.name&&"object"===SA(e.style[o.name])&&(o.attrs=Object(NE["__assign"])(Object(NE["__assign"])({},o.attrs),e.style[o.name])),e&&e.style&&o.keyshape&&(o.attrs=Object(NE["__assign"])(Object(NE["__assign"])({},o.attrs),e.style)),i.length&&(o.children=i),o}function AA(t,e,n){var r,i,o=t.attrs,a=void 0===o?{}:o,s={x:e.x||0,y:e.y||0,width:n.width||0,height:n.height||0};switch(t.type){case"maker":case"circle":a.r&&(i=2*a.r,r=2*a.r);break;case"text":a.text&&(i=$T(a.text,a.fontSize||12)[0],r=16,s.y+=r,s.height=r,s.width=i,t.attrs=Object(NE["__assign"])({fontSize:12,fill:"#000"},a));break;default:a.width&&(i=a.width),a.height&&(r=a.height)}return r>=0&&(s.height=r),i>=0&&(s.width=i),a.marginTop&&(s.y+=a.marginTop),a.marginLeft&&(s.x+=a.marginLeft),s}function OA(t,e){var n;void 0===e&&(e={x:0,y:0});var r=Object(NE["__assign"])({x:0,y:0,width:0,height:0},e);if(null===(n=t.children)||void 0===n?void 0:n.length){var i=t.attrs,o=void 0===i?{}:i,a=o.marginTop,s=Object(NE["__assign"])({},e);a&&(s.y+=a);for(var l=0;l<t.children.length;l++){t.children[l].attrs.key="".concat(o.key||"root"," -").concat(l," ");var u=OA(t.children[l],s);if(u.bbox){var c=u.bbox;"inline"===u.attrs.next?s.x+=u.bbox.width:s.y+=u.bbox.height,c.width+c.x>r.width&&(r.width=c.width+c.x),c.height+c.y>r.height&&(r.height=c.height+c.y)}}}return t.bbox=AA(t,e,r),t.attrs=Object(NE["__assign"])(Object(NE["__assign"])({},t.attrs),t.bbox),t}function kA(t,e){var n,r,i,o,a=(t||{}).type,s=((null===e||void 0===e?void 0:e.attrs)||{}).key;if(s&&t&&(t.attrs.key=s),!t&&e)return{action:"delete",val:e,type:a,key:s};if(t&&!e)return{action:"add",val:t,type:a};if(!t&&!e)return{action:"same",type:a};var l=[];if((null===(n=t.children)||void 0===n?void 0:n.length)>0||(null===(r=e.children)||void 0===r?void 0:r.length)>0)for(var u=Math.max(null===(i=t.children)||void 0===i?void 0:i.length,null===(o=e.children)||void 0===o?void 0:o.length),c=e.children||[],h=t.children||[],d=0;d<u;d+=1)l.push(kA(h[d],c[d]));var f=Object.keys(e.attrs),p=Object.keys(t.attrs);return e.type!==t.type?{action:"restructure",nowTarget:t,formerTarget:e,key:s,children:l}:f.filter((function(t){return"children"!==t})).some((function(n){return t.attrs[n]!==e.attrs[n]||!p.includes(n)}))?{action:"change",val:t,children:l,type:a,key:s}:{action:"same",children:l,type:a,key:s}}function IA(t){var e={},n=function(e){var n="function"===typeof t?t(e):t,r=MA(n)(e),i=document.createElement("div");i.innerHTML=r;var o=i.children[0],a=OA(TA(o,e));return i.remove(),a};return{draw:function(t,r){var i=n(t),o=r,a=function t(e){var n=e.attrs,i=void 0===n?{}:n,a=e.bbox,s=e.type,l=e.children,u=Object(NE["__rest"])(e,["attrs","bbox","type","children"]);if("group"!==e.type){var c=r.addShape(e.type,Object(NE["__assign"])({attrs:i,origin:{bbox:a,type:s,children:l}},u));e.keyshape&&(o=c)}e.children&&e.children.forEach((function(e){return t(e)}))};return a(i),e[t.id]=[i],o},update:function(t,r){e[t.id]||(e[t.id]=[]);var i=r.getContainer(),o=i.get("children"),a=n(t),s=e[t.id].pop(),l=kA(a,s),u=function t(e){var n;"group"!==e.type&&i.addShape(e.type,{attrs:e.attrs}),(null===(n=e.children)||void 0===n?void 0:n.length)&&e.children.map((function(e){return t(e)}))},c=function t(e){var n,r=o.find((function(t){return t.attrs.key===e.attrs.key}));r&&i.removeChild(r),(null===(n=e.children)||void 0===n?void 0:n.length)&&e.children.map((function(e){return t(e)}))},h=function t(e){var n=e.key;if("group"!==e.type){var i=o.find((function(t){return t.attrs.key===n}));switch(e.action){case"change":if(i){var a=e.val.keyshape?r.getOriginStyle():{};i.attr(Object(NE["__assign"])(Object(NE["__assign"])({},a),e.val.attrs))}break;case"add":u(e.val);break;case"delete":c(e.val);break;case"restructure":c(e.formerTarget),u(e.nowTarget);break;default:break}}e.children&&e.children.forEach((function(e){return t(e)}))};h(l),e[t.id].push(a)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var PA={};function LA(t){return PA[t]||(PA[t]=Object(RE["upperFirst"])(t)),PA[t]}var NA={defaultShapeType:"defaultType",className:null,getShape:function(t){var e=this,n=e[t]||e[e.defaultShapeType]||e["simple-circle"];return n},draw:function(t,e,n){var r=this.getShape(t);n["shapeMap"]={};var i=r.draw(e,n);return r.afterDraw&&r.afterDraw(e,n,i),i},baseUpdate:function(t,e,n,r){var i,o,a=this.getShape(t);a.update&&(a.mergeStyle=null===(i=a.getOptions)||void 0===i?void 0:i.call(a,e,r),null===(o=a.update)||void 0===o||o.call(a,e,n,r)),a.afterUpdate&&a.afterUpdate(e,n)},setState:function(t,e,n,r){var i=this.getShape(t);i.setState(e,n,r)},shouldUpdate:function(t){var e=this.getShape(t);return!!e.update},getControlPoints:function(t,e){var n=this.getShape(t);return n.getControlPoints(e)},getAnchorPoints:function(t,e){var n=this.getShape(t);return n.getAnchorPoints(e)}},RA={options:{},draw:function(t,e){return this.drawShape(t,e)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(t){return t.controlPoints},getAnchorPoints:function(t){var e=this.options.anchorPoints,n=t.anchorPoints||e;return n}},DA=function(){function t(){}return t.registerFactory=function(e,n){var r=LA(e),i=NA,o=Object(NE["__assign"])(Object(NE["__assign"])({},i),n);return t[r]=o,o.className=r,o},t.getFactory=function(e){var n=LA(e);return t[n]},t.registerNode=function(e,n,r){var i,o=t.Node;if("string"===typeof n||"function"===typeof n){var a=IA(n);i=Object(NE["__assign"])(Object(NE["__assign"])({},o.getShape("single-node")),a)}else if(n.jsx){var s=n.jsx;a=IA(s);i=Object(NE["__assign"])(Object(NE["__assign"])(Object(NE["__assign"])({},o.getShape("single-node")),a),n)}else{o.getShape(r);var l=r?o.getShape(r):RA;i=Object(NE["__assign"])(Object(NE["__assign"])({},l),n)}return i.type=e,i.itemType="node",o[e]=i,i},t.registerEdge=function(e,n,r){var i=t.Edge,o=r?i.getShape(r):RA,a=Object(NE["__assign"])(Object(NE["__assign"])({},o),n);return a.type=e,a.itemType="edge",i[e]=a,a},t.registerCombo=function(e,n,r){var i=t.Combo,o=r?i.getShape(r):RA,a=Object(NE["__assign"])(Object(NE["__assign"])({},o),n);return a.type=e,a.itemType="combo",i[e]=a,a},t}(),FA=DA;DA.registerFactory("node",{defaultShapeType:"circle"}),DA.registerFactory("edge",{defaultShapeType:"line"}),DA.registerFactory("combo",{defaultShapeType:"circle"});var jA="bboxCache",BA="bboxCanvasCache",zA=function(){function t(t){this._cfg={},this.destroyed=!1,this.optimize=!1;var e={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(e,this.getDefaultCfg(),t);var n=this.get("model"),r=n.id,i=this.get("type");"undefined"===typeof r?r=fA(i):"string"!==typeof r&&(r=String(r)),this.get("model").id=r,this.set("id",r);var o=t.group;o&&(o.set("item",this),o.set("id",r)),this.init(),this.draw();var a=n.shape||n.type||("edge"===i?"line":"circle"),s=this.get("shapeFactory");if(s&&s[a]){var l=s[a].options;if(l&&l.stateStyles){var u=this.get("styles")||n.stateStyles;u=Object(RE["deepMix"])({},l.stateStyles,u),this.set("styles",u)}}}return t.prototype.calculateBBox=function(){var t=this.get("keyShape"),e=this.get("group"),n=HT(t,e);return n.x=n.minX,n.y=n.minY,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n},t.prototype.calculateCanvasBBox=function(){var t=this.get("keyShape"),e=this.get("group"),n=HT(t,e);return n.x=n.minX,n.y=n.minY,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n},t.prototype.drawInner=function(){var t=this,e=t.get("shapeFactory"),n=t.get("group"),r=t.get("model");n.clear();var i=r.visible;if(void 0===i||i||t.changeVisibility(i),e){t.updatePosition(r);var o=t.getShapeCfg(r),a=o.type,s=e.draw(a,o,n);s&&(t.set("keyShape",s),s.set("isKeyShape",!0),s.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",a),this.restoreStates(e,a)}},t.prototype.setOriginStyle=function(){var t=this.get("group"),e=t.get("children"),n=this.getKeyShape(),r=this,i=n.get("name");if(this.get("originStyle")){var o=this.get("originStyle");i&&!o[i]&&(o[i]={});var a=this.getCurrentStatesStyle(),s=function(t){var n=e[t],s=n.get("name"),l=n.attr();if(s&&s!==i){var u=a[s];o[s]||(o[s]={}),u?Object.keys(l).forEach((function(t){var e=l[t];e!==u[t]&&(o[s][t]=e)})):o[s]="image"!==n.get("type")?Object(RE["clone"])(l):r.getShapeStyleByName(s)}else{var c=n.attr(),h={};Object.keys(a).forEach((function(t){var e=a[t];t!==i&&Object(RE["isPlainObject"])(e)||(h[t]=e)})),Object.keys(c).forEach((function(t){var e=c[t];h[t]!==e&&(i?o[i][t]=e:o[t]=e)}))}};for(u=0;u<e.length;u++)s(u);delete o.path,delete o.matrix,delete o.x,delete o.y,o[i]&&(delete o[i].x,delete o[i].y,delete o[i].matrix,delete o[i].path),r.set("originStyle",o)}else{for(var l={},u=0;u<e.length;u++){var c=e[u],h=c.get("type"),d=c.get("name");if(d&&d!==i)l[d]="image"!==h?Object(RE["clone"])(c.attr()):r.getShapeStyleByName(d),"text"===h&&l[d]&&(delete l[d].x,delete l[d].y,delete l[d].matrix);else{var f=r.getShapeStyleByName();if(delete f.path,delete f.matrix,i)if(d)l[i]=f;else{var p=fA("shape");c.set("name",p),t["shapeMap"][p]=c,l[p]="image"!==h?Object(RE["clone"])(c.attr()):r.getShapeStyleByName(d)}else Object.assign(l,f)}}r.set("originStyle",l)}},t.prototype.restoreStates=function(t,e){var n=this,r=n.get("states");Object(RE["each"])(r,(function(r){t.setState(e,r,!0,n)}))},t.prototype.init=function(){var t=FA.getFactory(this.get("type"));this.set("shapeFactory",t)},t.prototype.get=function(t){return this._cfg[t]},t.prototype.set=function(t,e){Object(RE["isPlainObject"])(t)?this._cfg=Object(NE["__assign"])(Object(NE["__assign"])({},this._cfg),t):this._cfg[t]=e},t.prototype.getDefaultCfg=function(){return{}},t.prototype.clearCache=function(){this.set(jA,null),this.set(BA,null)},t.prototype.beforeDraw=function(){},t.prototype.afterDraw=function(){},t.prototype.afterUpdate=function(){},t.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},t.prototype.getShapeStyleByName=function(t){var e,n=this.get("group");if(e=t?n["shapeMap"][t]||n.find((function(e){return e.get("name")===t})):this.getKeyShape(),e){var r={};return Object(RE["each"])(e.attr(),(function(t,e){("img"!==e||Object(RE["isString"])(t))&&(r[e]=t)})),r}return{}},t.prototype.getShapeCfg=function(t,e){var n=this.get("styles");if(n){var r=t;return r.style=Object(NE["__assign"])(Object(NE["__assign"])({},n),t.style),r}return t},t.prototype.getStateStyle=function(t){var e=this.get("styles"),n=e&&e[t];return n},t.prototype.getOriginStyle=function(){return this.get("originStyle")},t.prototype.getCurrentStatesStyle=function(){var t=this,e={},n=t.getStates();return n&&n.length?(Object(RE["each"])(t.getStates(),(function(n){e=Object.assign(e,t.getStateStyle(n))})),e):this.get("originStyle")},t.prototype.setState=function(t,e){var n=this.get("states"),r=this.get("shapeFactory"),i=t,o=t;Object(RE["isString"])(e)&&(i="".concat(t,":").concat(e),o="".concat(t,":"));var a=n;if(Object(RE["isBoolean"])(e)){var s=n.indexOf(o);if(e){if(s>-1)return;n.push(i)}else s>-1&&n.splice(s,1)}else if(Object(RE["isString"])(e)){var l=n.filter((function(t){return t.includes(o)}));l.length>0&&this.clearStates(l),a=a.filter((function(t){return!t.includes(o)})),a.push(i),this.set("states",a)}if(r){var u=this.get("model"),c=u.type;r.setState(c,t,e,this)}},t.prototype.clearStates=function(t){var e=this,n=e.getStates(),r=e.get("shapeFactory"),i=e.get("model"),o=i.type;t||(t=n),Object(RE["isString"])(t)&&(t=[t]);var a=n.filter((function(e){return-1===t.indexOf(e)}));e.set("states",a),t.forEach((function(t){r.setState(o,t,!1,e)}))},t.prototype.setOptimize=function(t){this.optimize=t},t.prototype.getContainer=function(){return this.get("group")},t.prototype.getKeyShape=function(){return this.get("keyShape")},t.prototype.getModel=function(){return this.get("model")},t.prototype.getType=function(){return this.get("type")},t.prototype.getID=function(){return this.get("id")},t.prototype.isItem=function(){return!0},t.prototype.getStates=function(){return this.get("states")},t.prototype.hasState=function(t){var e=this.getStates();return e.indexOf(t)>=0},t.prototype.refresh=function(t){var e=this.get("model");this.updatePosition(e),this.updateShape(t),this.afterUpdate(),this.clearCache()},t.prototype.getUpdateType=function(t){},t.prototype.update=function(t,e){void 0===e&&(e=void 0);var n=this.get("model");if("move"===e)this.updatePosition(t);else{var r=n.visible,i=t.visible;r!==i&&void 0!==i&&this.changeVisibility(i);var o={x:n.x,y:n.y};t.x=isNaN(+t.x)?n.x:+t.x,t.y=isNaN(+t.y)?n.y:+t.y;var a=this.get("styles");if(t.stateStyles){var s=t.stateStyles;Object(RE["mix"])(a,s),delete t.stateStyles}Object.assign(n,t),o.x===t.x&&o.y===t.y||this.updatePosition(t),this.updateShape(e)}this.afterUpdate(),this.clearCache()},t.prototype.updateShape=function(t){var e=this.get("shapeFactory"),n=this.get("model"),r=n.type;if(e.shouldUpdate(r)&&r===this.get("currentShape")){var i=this.getShapeCfg(n,t);e.baseUpdate(r,i,this,t),"move"!==t&&this.setOriginStyle()}else this.draw();this.restoreStates(e,r)},t.prototype.updatePosition=function(t){var e=this.get("model"),n=isNaN(+t.x)?+e.x:+t.x,r=isNaN(+t.y)?+e.y:+t.y,i=this.get("group");if(isNaN(n)||isNaN(r))return!1;e.x=n,e.y=r;var o=i.getMatrix();return(!o||o[6]!==n||o[7]!==r)&&(i.resetMatrix(),eT(i,{x:n,y:r}),this.clearCache(),!0)},t.prototype.getBBox=function(){var t=this.get(jA);return t||(t=this.calculateBBox(),this.set(jA,t)),t},t.prototype.getCanvasBBox=function(){var t=this.get(BA);return t||(t=this.calculateCanvasBBox(),this.set(BA,t)),t},t.prototype.toFront=function(){var t=this.get("group");t.toFront()},t.prototype.toBack=function(){var t=this.get("group");t.toBack()},t.prototype.show=function(){this.changeVisibility(!0)},t.prototype.hide=function(){this.changeVisibility(!1)},t.prototype.changeVisibility=function(t){var e=this.get("group");t?e.show():e.hide(),this.set("visible",t)},t.prototype.isVisible=function(){return this.get("visible")},t.prototype.enableCapture=function(t){var e=this.get("group");e&&e.set("capture",t)},t.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),e=this.get("group");t&&e.stopAnimate(),e["shapeMap"]={},this.clearCache(),e.remove(),this._cfg=null,this.destroyed=!0}},t}(),UA=zA,GA={source:"start",target:"end"},qA="Node",VA="Point",HA="Anchor",WA=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(NE["__extends"])(e,t),e.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},e.prototype.setEnd=function(t,e){var n=GA[t]+VA,r=t+qA,i=this.get(r);i&&!i.destroyed&&i.removeEdge(this),Object(RE["isPlainObject"])(e)?(this.set(n,e),this.set(r,null)):e&&(e.addEdge(this),this.set(r,e),this.set(n,null))},e.prototype.getLinkPoint=function(t,e,n){var r=GA[t]+VA,i=t+qA,o=this.get(r);if(!o){var a=this.get(i),s=t+HA,l=this.getPrePoint(t,n),u=e[s];Object(RE["isNil"])(u)||(o=a.getLinkPointByAnchor(u)),o=o||a.getLinkPoint(l),Object(RE["isNil"])(o.index)||this.set("".concat(t,"AnchorIndex"),o.index)}return o},e.prototype.getPrePoint=function(t,e){if(e&&e.length){var n="source"===t?0:e.length-1;return e[n]}var r="source"===t?"target":"source";return this.getEndPoint(r)},e.prototype.getEndPoint=function(t){var e=t+qA,n=GA[t]+VA,r=this.get(e);return r&&!r.destroyed?r.get("model"):this.get(n)},e.prototype.getControlPointsByCenter=function(t){var e=this.getEndPoint("source"),n=this.getEndPoint("target"),r=this.get("shapeFactory"),i=t.type;return r.getControlPoints(i,{startPoint:e,endPoint:n})},e.prototype.getEndCenter=function(t){var e=t+qA,n=GA[t]+VA,r=this.get(e);if(r){var i=r.getBBox();return{x:i.centerX,y:i.centerY}}return this.get(n)},e.prototype.init=function(){t.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},e.prototype.getShapeCfg=function(e,n){var r=this,i=r.get("linkCenter"),o=(null===n||void 0===n?void 0:n.includes("move"))?e:t.prototype.getShapeCfg.call(this,e);if(i)o.startPoint=r.getEndCenter("source"),o.endPoint=r.getEndCenter("target");else{var a=o.controlPoints||r.getControlPointsByCenter(o);o.startPoint=r.getLinkPoint("source",e,a),o.endPoint=r.getLinkPoint("target",e,a)}return o.sourceNode=r.get("sourceNode"),o.targetNode=r.get("targetNode"),o},e.prototype.getModel=function(){var t=this.get("model"),e=this.get("source".concat(qA)),n=this.get("target".concat(qA));return e?delete t["source".concat(qA)]:t.source=this.get("start".concat(VA)),n?delete t["target".concat(qA)]:t.target=this.get("end".concat(VA)),Object(RE["isString"])(t.source)||Object(RE["isPlainObject"])(t.source)||(t.source=t.source.getID()),Object(RE["isString"])(t.target)||Object(RE["isPlainObject"])(t.target)||(t.target=t.target.getID()),t},e.prototype.setSource=function(t){this.setEnd("source",t),this.set("source",t)},e.prototype.setTarget=function(t){this.setEnd("target",t),this.set("target",t)},e.prototype.getSource=function(){return this.get("source")},e.prototype.getTarget=function(){return this.get("target")},e.prototype.updatePosition=function(){return!1},e.prototype.update=function(t,e){void 0===e&&(e=void 0);var n=this.get("model"),r=n.visible,i=t.visible;r!==i&&void 0!==i&&this.changeVisibility(i);var o=this.get("source"),a=this.get("target");if(o&&!o.destroyed&&a&&!a.destroyed){var s=this.get("styles");if(t.stateStyles){var l=t.stateStyles;Object(RE["mix"])(s,l),delete t.stateStyles}Object.assign(n,t),this.updateShape(e),this.afterUpdate(),this.clearCache()}},e.prototype.destroy=function(){var e=this.get("source".concat(qA)),n=this.get("target".concat(qA));e&&!e.destroyed&&e.removeEdge(this),n&&!n.destroyed&&n.removeEdge(this),t.prototype.destroy.call(this)},e}(UA),YA=WA,XA="anchorPointsCache",JA="bboxCache",ZA=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(NE["__extends"])(e,t),e.prototype.getNearestPoint=function(t,e){for(var n=0,r=t[0],i=KM(t[0],e),o=0;o<t.length;o++){var a=t[o],s=KM(a,e);s<i&&(r=a,i=s,n=o)}return r.anchorIndex=n,r},e.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getInEdges=function(){var t=this;return this.get("edges").filter((function(e){return e.get("target")===t}))},e.prototype.getOutEdges=function(){var t=this;return this.get("edges").filter((function(e){return e.get("source")===t}))},e.prototype.getNeighbors=function(t){var e=this,n=this.get("edges");if("target"===t){var r=function(t){return t.getSource()===e};return n.filter(r).map((function(t){return t.getTarget()}))}if("source"===t){var i=function(t){return t.getTarget()===e};return n.filter(i).map((function(t){return t.getSource()}))}var o=function(t){return t.getSource()===e?t.getTarget():t.getSource()};return n.map(o)},e.prototype.getLinkPointByAnchor=function(t){var e=this.getAnchorPoints();return e[t]},e.prototype.getLinkPoint=function(t){var e,n,r=this.get("keyShape"),i=r.get("type"),o=this.get("type"),a=this.getBBox();"combo"===o?(e=a.centerX||(a.maxX+a.minX)/2,n=a.centerY||(a.maxY+a.minY)/2):(e=a.centerX,n=a.centerY);var s,l=this.getAnchorPoints();switch(i){case"circle":s=WM({x:e,y:n,r:a.width/2},t);break;case"ellipse":s=YM({x:e,y:n,rx:a.width/2,ry:a.height/2},t);break;default:s=HM(a,t)}var u=s;return l.length&&(u||(u=t),u=this.getNearestPoint(l,u)),u||(u={x:e,y:n}),u},e.prototype.getAnchorPoints=function(){var t=this.get(XA);if(!t){t=[];var e=this.get("shapeFactory"),n=this.getBBox(),r=this.get("model"),i=this.getShapeCfg(r),o=r.type,a=e.getAnchorPoints(o,i)||[];Object(RE["each"])(a,(function(e,r){var i={x:n.minX+e[0]*n.width,y:n.minY+e[1]*n.height,anchorIndex:r};t.push(i)})),this.set(XA,t)}return t},e.prototype.addEdge=function(t){this.get("edges").push(t)},e.prototype.lock=function(){this.set("locked",!0)},e.prototype.unlock=function(){this.set("locked",!1)},e.prototype.hasLocked=function(){return this.get("locked")},e.prototype.removeEdge=function(t){var e=this.getEdges(),n=e.indexOf(t);n>-1&&e.splice(n,1)},e.prototype.clearCache=function(){this.set(JA,null),this.set(XA,null)},e.prototype.getUpdateType=function(t){var e,n,r,i,o;if(t){var a=!Object(RE["isNil"])(t.x),s=!Object(RE["isNil"])(t.y),l=Object.keys(t);if(1===l.length&&(a||s)||2===l.length&&a&&s)return"move";if(Object(RE["isNumber"])(t.x)||Object(RE["isNumber"])(t.y)||t.type||t.anchorPoints||t.size||(null===t||void 0===t?void 0:t.style)&&((null===(e=null===t||void 0===t?void 0:t.style)||void 0===e?void 0:e.r)||(null===(n=null===t||void 0===t?void 0:t.style)||void 0===n?void 0:n.width)||(null===(r=null===t||void 0===t?void 0:t.style)||void 0===r?void 0:r.height)||(null===(i=null===t||void 0===t?void 0:t.style)||void 0===i?void 0:i.rx)||(null===(o=null===t||void 0===t?void 0:t.style)||void 0===o?void 0:o.ry)))return"bbox|label";var u=l.includes("label")||l.includes("labelCfg");return u?"style|label":"style"}},e.prototype.setState=function(e,n){var r=this;this.optimize?t.prototype.setState.call(this,e,n):this.runWithBBoxAffected((function(){return t.prototype.setState.call(r,e,n)}))},e.prototype.clearStates=function(e){var n=this;this.optimize?t.prototype.clearStates.call(this,e):this.runWithBBoxAffected((function(){return t.prototype.clearStates.call(n,e)}))},e.prototype.runWithBBoxAffected=function(t){var e=["r","width","height","rx","ry","lineWidth"],n=this.getKeyShape().attr(),r={};Object.keys(this.getKeyShape().attr()).forEach((function(t){e.includes(t)&&(r[t]=n[t])})),t();for(var i=this.getKeyShape().attr(),o=0;o<e.length;o++){var a=e[o];if(i[a]!==r[a]){this.clearCache(),this.getEdges().forEach((function(t){return t.refresh()}));break}}},e}(UA),KA=ZA,QA="bboxCache",$A="bboxCanvasCache",tO="sizeCache",eO="anchorPointsCache",nO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(NE["__extends"])(e,t),e.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},e.prototype.getShapeCfg=function(t){var e=this.get("styles"),n=this.get("bbox");if(e&&n){var r=t,i=Object(RE["isNumber"])(t.size)?[t.size,t.size]:t.size,o=Object(RE["isNumber"])(t.fixSize)?[t.fixSize,t.fixSize]:t.fixSize,a=i||o||jT.defaultCombo.size,s={r:(Math.max(n.width,n.height)||Math.max(a[0],a[1]))/2,width:n.width||a[0],height:n.height||a[1]};r.style=Object(NE["__assign"])(Object(NE["__assign"])(Object(NE["__assign"])({},e),t.style),s);var l=t.padding||jT.defaultCombo.padding;return Object(RE["isNumber"])(l)?(s.r+=l,s.width+=2*l,s.height+=2*l):(s.r=s.r+Math.max.apply(Math,l),s.width+=l[1]+l[3]||2*l[1],s.height+=l[0]+l[2]||2*l[0]),this.set(tO,s),r}return t},e.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var t=this.get("keyShape"),e=this.get("group"),n=this.get(QA)||{},r=n.x,i=n.x,o=this.get(tO),a=HT(t,e);if(a.centerX=(a.minX+a.maxX)/2,a.centerY=(a.minY+a.maxY)/2,o){o.width=Math.max(o.width,a.width),o.height=Math.max(o.height,a.height),this.set(tO,o);var s=t.get("type");"circle"===s?(a.width=2*o.r,a.height=2*o.r):(a.width=o.width,a.height=o.height),a.minX=a.centerX-a.width/2,a.minY=a.centerY-a.height/2,a.maxX=a.centerX+a.width/2,a.maxY=a.centerY+a.height/2}else a.width=a.maxX-a.minX,a.height=a.maxY-a.minY,a.centerX=(a.minX+a.maxX)/2,a.centerY=(a.minY+a.maxY)/2;return a.x=a.minX,a.y=a.minY,a.x===r&&a.y===i||this.set(eO,null),a}},e.prototype.getChildren=function(){var t=this;return{nodes:t.getNodes(),combos:t.getCombos()}},e.prototype.getNodes=function(){var t=this;return t.get("nodes")},e.prototype.getCombos=function(){var t=this;return t.get("combos")},e.prototype.addChild=function(t){var e=this,n=t.getType();switch(n){case"node":e.addNode(t);break;case"combo":e.addCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.addCombo=function(t){var e=this;return e.get("combos").push(t),!0},e.prototype.addNode=function(t){var e=this;return e.get("nodes").push(t),!0},e.prototype.removeChild=function(t){var e=this,n=t.getType();switch(n){case"node":e.removeNode(t);break;case"combo":e.removeCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.removeCombo=function(t){if(t){var e=this.getCombos(),n=e.indexOf(t);return n>-1&&(e.splice(n,1),!0)}},e.prototype.removeNode=function(t){if(t){var e=this.getNodes(),n=e.indexOf(t);return n>-1&&(e.splice(n,1),!0)}},e.prototype.getUpdateType=function(t){},e.prototype.getBBox=function(){this.set($A,null);var t=this.calculateCanvasBBox();return t},e.prototype.clearCache=function(){this.set(QA,null),this.set($A,null),this.set(eO,null)},e.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),e=this.get("group");t&&e.stopAnimate(),e["shapeMap"]={},this.clearCache(),this.set(tO,null),this.set("bbox",null),e.remove(),this._cfg=null,this.destroyed=!0}},e}(KA),rO=nO,iO="node",oO="edge",aO="vedge",sO="combo",lO="default",uO="Mapper",cO="stateStyles",hO=function(){function t(t){var e=this;this.edgeToBeUpdateMap={},this.throttleRefresh=Object(RE["throttle"])((function(t){var n=e.graph;if(n&&!n.get("destroyed")){var r=e.edgeToBeUpdateMap;if(r){var i=Object.values(r);i.length&&(i.forEach((function(t){var e=t.edge;if(e&&!e.destroyed){var n=e.getSource(),r=e.getTarget();n&&!n.destroyed&&r&&!r.destroyed&&e.refresh(t.updateType)}})),e.edgeToBeUpdateMap={})}}}),16,{trailing:!0,leading:!0}),this.graph=t,this.destroyed=!1}return t.prototype.addItem=function(t,e){var n=this.graph,r=t===aO?oO:t,i=n.get("".concat(r,"Group"))||n.get("group"),o=Object(RE["upperFirst"])(r),a=null,s=n.get(r+Object(RE["upperFirst"])(cO))||{},l=n.get(lO+o);e[cO]&&(s=e[cO]),l&&Object(RE["each"])(l,(function(t,n){Object(RE["isObject"])(t)&&!Object(RE["isArray"])(t)?e[n]=Object(RE["deepMix"])({},t,e[n]):Object(RE["isArray"])(t)?e[n]=e[n]||Object(RE["clone"])(l[n]):e[n]=e[n]||l[n]}));var u=n.get(r+uO);if(u){var c=u(e);c[cO]&&(s=c[cO],delete c[cO]),Object(RE["each"])(c,(function(t,n){Object(RE["isObject"])(t)&&!Object(RE["isArray"])(t)?e[n]=Object(RE["deepMix"])({},e[n],t):e[n]=c[n]||e[n]}))}if(n.emit("beforeadditem",{type:t,model:e}),t===oO||t===aO){var h=void 0,d=void 0;if(h=e.source,d=e.target,h&&Object(RE["isString"])(h)&&(h=n.findById(h)),d&&Object(RE["isString"])(d)&&(d=n.findById(d)),!h||!d)return void console.warn("The source or target node of edge ".concat(e.id," does not exist!"));h.getType&&"combo"===h.getType()&&(e.isComboEdge=!0),d.getType&&"combo"===d.getType()&&(e.isComboEdge=!0),a=new YA({model:e,source:h,target:d,styles:s,linkCenter:n.get("linkCenter"),group:i.addGroup()})}else if(t===iO)a=new KA({model:e,styles:s,group:i.addGroup()});else if(t===sO){var f=e.children,p=rA(f,n),g=void 0,m=void 0;if(isNaN(p.x)?isNaN(e.x)&&(g=100*Math.random()):g=p.x,isNaN(p.y)?isNaN(e.y)&&(m=100*Math.random()):m=p.y,isNaN(e.x)||isNaN(e.y))e.x=g,e.y=m;else{var y=e.x-g,v=e.y-m;this.updateComboSucceeds(e.id,y,v,f)}var b=i.addGroup();b.setZIndex(e.depth),a=new rO({model:e,styles:s,animate:n.get("animate"),bbox:e.collapsed?rA([],n):p,group:b}),e.collapsed||"circle"!==a.getKeyShape().get("type")||(p.width=Math.hypot(p.height,p.width),p.height=p.width,a.set("bbox",p),a.refresh());var _=a.getModel();(f||[]).forEach((function(t){var e=n.findById(t.id);a.addChild(e),t.depth=_.depth+2}))}if(a)return a.setOptimize(n.getNodes().length>n.get("optimizeThreshold")),n.get("".concat(t,"s")).push(a),n.get("itemMap")[a.get("id")]=a,n.emit("afteradditem",{item:a,model:e}),a},t.prototype.updateItem=function(t,e){var n,r,i=this,o=this.graph;if(Object(RE["isString"])(t)&&(t=o.findById(t)),t&&!t.destroyed){var a="";t.getType&&(a=t.getType());var s=o.get(a+uO),l=t.getModel(),u=l.x,c=l.y,h=t.getUpdateType(e);if(s){var d=Object(RE["deepMix"])({},l,e),f=s(d),p=Object(RE["deepMix"])({},l,f,e);f[cO]&&(t.set("styles",p[cO]),delete p[cO]),Object(RE["each"])(p,(function(t,n){e[n]=t}))}else Object(RE["each"])(e,(function(t,n){l[n]&&Object(RE["isObject"])(t)&&!Object(RE["isArray"])(t)&&(e[n]=Object(NE["__assign"])(Object(NE["__assign"])({},l[n]),e[n]))}));if(o.emit("beforeupdateitem",{item:t,cfg:e}),a===oO){if(e.source){var g=e.source;Object(RE["isString"])(g)&&(g=o.findById(g)),t.setSource(g)}if(e.target){var m=e.target;Object(RE["isString"])(m)&&(m=o.findById(m)),t.setTarget(m)}t.update(e)}else if(a===iO){t.update(e,h);var y=t.getEdges();"move"===h?Object(RE["each"])(y,(function(t){i.edgeToBeUpdateMap[t.getID()]={edge:t,updateType:h},i.throttleRefresh()})):(null===h||void 0===h?void 0:h.includes("bbox"))&&Object(RE["each"])(y,(function(t){t.refresh(h)}))}else if(a===sO){if(t.update(e,h),!isNaN(e.x)||!isNaN(e.y)){var v=e.x-u||0,b=e.y-c||0;this.updateComboSucceeds(l.id,v,b)}var _=t.getEdges(),x=(null===h||void 0===h?void 0:h.includes("bbox"))||"move"===h;if(x&&a===sO){var w=t.get("shapeFactory"),S=l.type||"circle",E=void 0===l.animate||void 0===e.animate?null===(r=null===(n=w[S])||void 0===n?void 0:n.options)||void 0===r?void 0:r.animate:l.animate||e.animate;E?setTimeout((function(){if(t&&!t.destroyed){var e=t.getKeyShape();e&&!e.destroyed&&Object(RE["each"])(_,(function(t){t&&!t.destroyed&&t.refresh()}))}}),201):Object(RE["each"])(_,(function(t){t.refresh()}))}}t.setOptimize(o.getNodes().length>o.get("optimizeThreshold")),o.emit("afterupdateitem",{item:t,cfg:e})}},t.prototype.updateCombo=function(t,e,n){var r,i,o=this,a=this.graph;if(Object(RE["isString"])(t)&&(t=a.findById(t)),t&&!t.destroyed){var s=t.getModel(),l=rA(e,a,t),u=l.x,c=l.y;t.set("bbox",l);var h=u,d=c;n?(h=isNaN(s.x)?u:s.x,d=isNaN(s.y)?c:s.y):(h=isNaN(u)?s.x:u,d=isNaN(c)?s.y:c),t.update({x:h,y:d});var f=t.get("shapeFactory"),p=s.type||"circle",g=void 0===s.animate?null===(i=null===(r=f[p])||void 0===r?void 0:r.options)||void 0===i?void 0:i.animate:s.animate;g?setTimeout((function(){if(t&&!t.destroyed){var e=t.getKeyShape();e&&!e.destroyed&&(t.getShapeCfg(s),o.updateComboEdges(t))}}),201):this.updateComboEdges(t)}},t.prototype.updateComboEdges=function(t){for(var e,n,r=t.getEdges()||[],i=0;i<r.length;i++){var o=r[i];(null===o||void 0===o?void 0:o.destroyed)||(null===(e=null===o||void 0===o?void 0:o.getSource())||void 0===e?void 0:e.destroyed)||(null===(n=null===o||void 0===o?void 0:o.getTarget())||void 0===n?void 0:n.destroyed)||o.refresh()}},t.prototype.collapseCombo=function(t,e){void 0===e&&(e=!0);var n=this.graph;Object(RE["isString"])(t)&&(t=n.findById(t));var r=t.getChildren();r.nodes.forEach((function(t){n.hideItem(t,e)})),r.combos.forEach((function(t){n.hideItem(t,e)}))},t.prototype.updateComboSucceeds=function(t,e,n,r){var i=this;void 0===r&&(r=[]);var o=this.graph;if(e||n){var a=r;if(!(null===a||void 0===a?void 0:a.length)){var s=o.get("comboTrees");null===s||void 0===s||s.forEach((function(e){ZT(e,(function(e){return e.id!==t||(a=e.children,!1)}))}))}null===a||void 0===a||a.forEach((function(t){var r=o.findById(t.id);if(r){var a=r.getModel();i.updateItem(t.id,{x:(a.x||0)+e,y:(a.y||0)+n})}}))}},t.prototype.expandCombo=function(t,e){void 0===e&&(e=!0);var n=this.graph;Object(RE["isString"])(t)&&(t=n.findById(t));var r=t.getChildren(),i=new Set;r.nodes.forEach((function(t){n.showItem(t,e),t.getEdges().forEach((function(t){return i.add(t)}))})),r.combos.forEach((function(t){t.getModel().collapsed?t.show():n.showItem(t,e),t.getEdges().forEach((function(t){return i.add(t)}))})),i.forEach((function(t){return t.refresh()}))},t.prototype.removeItem=function(t){var e=this,n=this.graph;if(Object(RE["isString"])(t)&&(t=n.findById(t)),t&&!t.destroyed){var r=Object(RE["clone"])(t.getModel()),i="";t.getType&&(i=t.getType()),n.emit("beforeremoveitem",{item:r,type:i});var o=n.get("".concat(i,"s")),a=o.indexOf(t);if(a>-1&&o.splice(a,1),i===oO){var s=n.get("v".concat(i,"s")),l=s.indexOf(t);l>-1&&s.splice(l,1)}var u=t.get("id"),c=n.get("itemMap");delete c[u];var h=n.get("comboTrees"),d=t.get("id");if(i===iO){var f=t.getModel().comboId;if(h&&f){var p=h,g=!1;h.forEach((function(t){g||ZT(t,(function(t){if(t.id===d&&p){var e=p.indexOf(t);return p.splice(e,1),g=!0,!1}return p=t.children,!0}))}))}for(var m=t.getEdges(),y=m.length-1;y>=0;y--)n.removeItem(m[y],!1);f&&n.updateCombo(f)}else if(i===sO){var v,b=t.getModel().parentId,_=!1;(h||[]).forEach((function(t){_||ZT(t,(function(t){return t.id!==d||(v=t,_=!0,!1)}))})),v.removed=!0,v&&v.children&&v.children.forEach((function(t){e.removeItem(t.id)}));for(m=t.getEdges(),y=m.length;y>=0;y--)n.removeItem(m[y],!1);b&&n.updateCombo(b)}t.destroy(),n.emit("afterremoveitem",{item:r,type:i})}},t.prototype.setItemState=function(t,e,n){var r=this.graph,i=e;Object(RE["isString"])(n)&&(i="".concat(e,":").concat(n)),t.hasState(i)===n&&n||Object(RE["isString"])(n)&&t.hasState(i)||(r.emit("beforeitemstatechange",{item:t,state:i,enabled:n}),t.setState(e,n),r.autoPaint(),r.emit("afteritemstatechange",{item:t,state:i,enabled:n}))},t.prototype.priorityState=function(t,e){var n=this.graph,r=t;Object(RE["isString"])(t)&&(r=n.findById(t)),this.setItemState(r,e,!1),this.setItemState(r,e,!0)},t.prototype.clearItemStates=function(t,e){var n=this.graph;Object(RE["isString"])(t)&&(t=n.findById(t)),n.emit("beforeitemstatesclear",{item:t,states:e}),t.clearStates(e),n.emit("afteritemstatesclear",{item:t,states:e})},t.prototype.refreshItem=function(t){var e=this.graph;Object(RE["isString"])(t)&&(t=e.findById(t)),e.emit("beforeitemrefresh",{item:t}),t.refresh(),e.emit("afteritemrefresh",{item:t})},t.prototype.addCombos=function(t,e){var n=this,r=this.graph;(t||[]).forEach((function(t){KT(t,(function(t){var r;return e.forEach((function(e){e.id===t.id&&(e.children=t.children,e.depth=t.depth,r=e)})),r&&n.addItem("combo",r),!0}))}));var i=r.get("comboGroup");i&&i.sort()},t.prototype.changeItemVisibility=function(t,e){var n=this,r=this.graph;if(Object(RE["isString"])(t)&&(t=r.findById(t)),t){if(r.emit("beforeitemvisibilitychange",{item:t,visible:e}),t.changeVisibility(e),t.getType&&t.getType()===iO){var i=t.getEdges();Object(RE["each"])(i,(function(t){(!e||t.get("source").isVisible()&&t.get("target").isVisible())&&n.changeItemVisibility(t,e)}))}else if(t.getType&&t.getType()===sO){var o=r.get("comboTrees"),a=t.get("id"),s=[],l=!1;(o||[]).forEach((function(t){l||t.children&&0!==t.children.length&&ZT(t,(function(t){return t.id!==a||(s=t.children,l=!0,!1)}))})),s&&(!e||e&&!t.getModel().collapsed)&&s.forEach((function(t){var i=r.findById(t.id);n.changeItemVisibility(i,e)}));i=t.getEdges();Object(RE["each"])(i,(function(t){(!e||t.get("source").isVisible()&&t.get("target").isVisible())&&n.changeItemVisibility(t,e)}))}return r.emit("afteritemvisibilitychange",{item:t,visible:e}),t}console.warn("The item to be shown or hidden does not exist!")},t.prototype.destroy=function(){this.graph=null,this.destroyed=!0},t}(),dO=hO,fO=function(){function t(t){this.graph=t,this.destroyed=!1}return t.prototype.updateState=function(t,e,n){var r=this.graph.get("states"),i=e;Object(RE["isString"])(n)&&(i="".concat(e,":").concat(n)),r[i]||(r[i]=[]),n?r[i].push(t):r[i]=r[i].filter((function(e){return e!==t})),this.graph.set("states",r),this.graph.emit("graphstatechange",{states:r})},t.prototype.updateStates=function(t,e,n){var r=this.graph.get("states"),i=Object(RE["isString"])(e)?[e]:e;i.forEach((function(e){var i=e;r[i]||(r[i]=[]),Object(RE["isString"])(n)&&(i="".concat(e,":").concat(n)),n?r[i].push(t):r[i]=r[i].filter((function(e){return e!==t}))})),this.graph.set("states",r),this.graph.emit("graphstatechange",{states:e})},t.prototype.destroy=function(){this.graph=null,this.destroyed=!0},t}(),pO=fO,gO=n("2ef1"),mO=function(t,e){return t&&e?t.replace(/\\?\{([^{}]+)\}/g,(function(t,n){if("\\"===t.charAt(0))return t.slice(1);var r=e[n];return 0===r&&(r="0"),r||""})):t},yO=function(t){var e=[];if(t.length<2)throw new Error("point length must largn than 2, now it's ".concat(t.length));for(var n=0,r=t;n<r.length;n++){var i=r[n],o=i.x,a=i.y;e.push(o),e.push(a)}var s=Object(gO["a"])(e);return s.unshift(["M",t[0].x,t[0].y]),s},vO=function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i={x:(1-n)*t.x+n*e.x,y:(1-n)*t.y+n*e.y},o=[0,0];UE["c"].normalize(o,[e.x-t.x,e.y-t.y]),o&&(o[0]||o[1])||(o=[0,0]);var a=[-o[1]*r,o[0]*r];return i.x+=a[0],i.y+=a[1],i},bO=function(t,e){var n=t.length;if(!n)return"";for(var r="",i="",o=0;o<n;o++){var a=t[o];i=0===o?"M{x} {y}":"L{x} {y}",r+=mO(i,a)}return e&&(r+="Z"),r},_O=function(t){var e=[];return t.forEach((function(t){var n=t[0];if("A"!==n)for(var r=1;r<t.length;r+=2)e.push([t[r],t[r+1]]);else{var i=t.length;e.push([t[i-2],t[i-1]])}})),e},xO=function(t){if(t.length<2)throw new Error("point length must largn than 2, now it's ".concat(t.length));var e=t[0],n=t[1],r=t[t.length-1],i=t[t.length-2];t.unshift(r),t.unshift(i),t.push(e),t.push(n);for(var o=[],a=1;a<t.length-2;a+=1){var s=t[a-1].x,l=t[a-1].y,u=t[a].x,c=t[a].y,h=t[a+1].x,d=t[a+1].y,f=a!==t.length-2?t[a+2].x:h,p=a!==t.length-2?t[a+2].y:d,g=u+(h-s)/6,m=c+(d-l)/6,y=h-(f-u)/6,v=d-(p-c)/6;o.push(["C",g,m,y,v,h,d])}return o.unshift(["M",r.x,r.y]),o},wO=function(t,e){return UE["c"].scale([0,0],UE["c"].normalize([0,0],t),e)},SO=function(t,e){var n=[t[1]-e[1],e[0]-t[0]],r=Math.sqrt(n[0]*n[0]+n[1]*n[1]);if(0===r)throw new Error("p0 should not be equal to p1");return[n[0]/r,n[1]/r]},EO=function(t,e){return[e[0]-t[0],e[1]-t[1]]};function CO(t,e){var n=function(t){var n=[t[0][0],t[0][1]-e],r=[t[0][0],t[0][1]+e];return"M ".concat(n," A ").concat(e,",").concat(e,",0,0,0,").concat(r," A ").concat(e,",").concat(e,",0,0,0,").concat(n)},r=function(t){var n=UE["c"].scale([0,0],SO(t[0],t[1]),e),r=UE["c"].scale([0,0],n,-1),i=UE["c"].add([0,0],t[0],n),o=UE["c"].add([0,0],t[1],n),a=UE["c"].add([0,0],t[1],r),s=UE["c"].add([0,0],t[0],r);return"M ".concat(i," L ").concat(o," A ").concat([e,e,"0,0,0",a].join(",")," L ").concat(s," A ").concat([e,e,"0,0,0",i].join(","))};if(!t||t.length<1)return"";if(1===t.length)return n(t);if(2===t.length)return r(t);for(var i=new Array(t.length),o=0;o<i.length;++o){var a=0===o?t[t.length-1]:t[o-1],s=t[o],l=UE["c"].scale([0,0],SO(a,s),e);i[o]=[UE["c"].add([0,0],a,l),UE["c"].add([0,0],s,l)]}var u="A ".concat([e,e,"0,0,0,"].join(","));return i=i.map((function(t,e){var n="";return 0===e&&(n="M ".concat(i[i.length-1][1]," ")),n+="".concat(u+t[0]," L ").concat(t[1]),n})),i.join(" ")}function MO(t,e){var n=t.length,r=function(t){var n=[t[0][0],t[0][1]-e],r=[t[0][0],t[0][1]+e];return"M ".concat(n," A ").concat([e,e,"0,0,0",r].join(",")," A ").concat([e,e,"0,0,0",n].join(","))},i=function(t){var n=EO(t[0],t[1]),r=wO(n,e),i=UE["c"].add([0,0],t[0],UE["c"].scale([0,0],r,-1)),o=UE["c"].add([0,0],t[1],r),a=1.2*e,s=wO(UE["c"].normalize([0,0],n),a),l=UE["c"].scale([0,0],s,-1),u=UE["c"].add([0,0],i,l),c=UE["c"].add([0,0],o,l),h=UE["c"].add([0,0],i,s);return"M ".concat(i," C ").concat([u,c,o].join(",")," S ").concat([h,i].join(",")," Z")};if(!t||n<1)return"";if(1===n)return r(t);if(2===n)return i(t);for(var o=t.map((function(e,r){var i=t[(r+1)%n];return{p:e,v:UE["c"].normalize([0,0],EO(e,i))}})),a=0;a<o.length;++a){var s=a>0?a-1:n-1,l=UE["c"].normalize([0,0],UE["c"].add([0,0],o[s].v,UE["c"].scale([0,0],o[a].v,-1)));o[a].p=UE["c"].add([0,0],o[a].p,UE["c"].scale([0,0],l,e))}return o.map((function(t){var e=t.p;return{x:e[0],y:e[1]}}))}var TO=function(t,e){for(var n=[],r=0;r<5;r++){var i=Math.cos((18+72*r)/180*Math.PI)*t,o=Math.sin((18+72*r)/180*Math.PI)*t,a=Math.cos((54+72*r)/180*Math.PI)*e,s=Math.sin((54+72*r)/180*Math.PI)*e;0===r?n.push(["M",i,-o]):n.push(["L",i,-o]),n.push(["L",a,-s])}return n.push(["Z"]),n},AO=function(t,e,n){return(t.y-n.y)*(e.x-n.x)-(t.x-n.x)*(e.y-n.y)},OO=function(t){var e=t.map((function(t){return{x:t.getModel().x,y:t.getModel().y}}));e.sort((function(t,e){return t.x===e.x?t.y-e.y:t.x-e.x}));for(var n={},r=e.length-1;r>=0;r--){var i=e[r],o=i.x,a=i.y;n["".concat(o,"-").concat(a)]&&e.splice(r,1),n["".concat(o,"-").concat(a)]=!0}if(1===e.length)return e;var s=[];for(r=0;r<e.length;r++){while(s.length>=2&&AO(s[s.length-2],s[s.length-1],e[r])<=0)s.pop();s.push(e[r])}var l=[];for(r=e.length-1;r>=0;r--){while(l.length>=2&&AO(l[l.length-2],l[l.length-1],e[r])<=0)l.pop();l.push(e[r])}l.pop(),s.pop();var u=s.concat(l);return u},kO={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function IO(t,e,n){var r=!1,i=function(t,n){return e.cells[t+n*e.width]},o=function(t,e){var r=0;return i(t-1,e-1)>=n&&(r+=1),i(t,e-1)>n&&(r+=2),i(t-1,e)>n&&(r+=4),i(t,e)>n&&(r+=8),r},a=function(n,r){for(var i,a,s=n,l=r,u=0;u<e.width*e.height;u++){if(i=s,a=l,t.findIndex((function(t){return t.x===s&&t.y===l}))>-1){if(t[0].x===s&&t[0].y===l)return!0}else t.push({x:s,y:l});var c=o(s,l);switch(c){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:s++;break;case 12:case 14:case 4:s--;break;case 6:0===i&&(-1===a?s-=1:s+=1);break;case 1:case 13:case 5:l--;break;case 9:1===i&&(0===a?l-=1:l+=1);break;case 10:case 8:case 11:l++;break;default:return console.warn("Marching squares invalid state: ".concat(c)),!0}}};this.march=function(){for(var t=0;t<e.width&&!r;t+=1)for(var s=0;s<e.height&&!r;s+=1)i(t,s)>n&&15!==o(t,s)&&(r=a(t,s));return r}}var PO=function(t,e,n){var r=Math.ceil(t/n),i=Math.ceil(e/n),o=new Float32Array(Math.max(0,r*i)).fill(0);return{cells:o,width:r,height:i}},LO=function(t,e,n){var r=null,i=Number.POSITIVE_INFINITY;return e.forEach((function(e){var o={x:t.getModel().x,y:t.getModel().y},a={x:e.getModel().x,y:e.getModel().y},s=yT(o,a),l=new hT(o.x,o.y,a.x,a.y),u=n.reduce((function(t,e){return gT(e,l)>0?t+1:t}),0);s*Math.pow(u+1,2)<i&&(r=e,i=s*Math.pow(u+1,2))})),r},NO=function(t,e){var n=Number.POSITIVE_INFINITY,r=null;return t.forEach((function(t){var i=gT(t,e);i>=0&&i<n&&(r=t,n=i)})),r},RO=function(t,e,n,r){var i=[],o=[];o.push(t);var a=!0,s=0,l=function(t,e){var n=!1;return e.forEach((function(e){n||(bT(t,{x:e.x1,y:e.y1})||bT(t,{x:e.x2,y:e.y2}))&&(n=!0)})),n},u=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i.getBBox(),a=[[o.x,o.y],[o.x+o.width,o.y],[o.x,o.y+o.height],[o.x+o.width,o.y+o.height]];if(sT(a,t.x,t.y))return!0}return!1};while(a&&s<n){a=!1;var c=function(){var t=o.pop(),n=NO(e,t);if(n){var c=pT(n,t),h=c[0],d=c[1];if(2===d){var f=function(s){var c=r,d=zO(n,c,h,s),f=l(d,o)||l(d,i),p=u(d,e);while(!f&&p&&c>=1)c/=1.5,d=zO(n,c,h,s),f=l(d,o)||l(d,i),p=u(d,e);!d||f||s&&p||(o.push(new hT(t.x1,t.y1,d.x,d.y)),o.push(new hT(d.x,d.y,t.x2,t.y2)),a=!0)};f(!0),a||f(!1)}}a||i.push(t),s+=1};while(!a&&o.length)c()}while(o.length)i.push(o.pop());return i};function DO(t,e,n,r,i){var o=LO(t,n,e);if(null===o)return[];var a=function(t){var n=[];while(t.length>0){var r=t.pop();if(0===t.length){n.push(r);break}var i=t.pop(),o=new hT(r.x1,r.y1,i.x2,i.y2),a=NO(e,o);a?(n.push(r),t.push(i)):t.push(o)}return n},s=new hT(t.getModel().x,t.getModel().y,o.getModel().x,o.getModel().y),l=RO(s,e,r,i),u=a(l);return u}var FO=function(t,e,n){var r=Object.assign(kO,n),i=mT(t.map((function(t){return{x:t.getModel().x,y:t.getModel().y}})));t=t.sort((function(t,e){return yT({x:t.getModel().x,y:t.getModel().y},i)-yT({x:e.getModel().x,y:e.getModel().y},i)}));var o=[],a=[];t.forEach((function(t){var n=DO(t,e,o,r.maxRoutingIterations,r.morphBuffer);n.forEach((function(t){a.push(t)})),o.push(t)}));for(var s=jO(t,a,r.nodeR0),l=PO(s.width,s.height,r.pixelGroupSize),u=[],c=[],h=0;h<r.maxMarchingIterations;h++)if(BO(t,e,a,s,l,r),u=[],c=[],new IO(u,l,r.threshold).march()){var d=u.map((function(t){return{x:Math.round(t.x*r.pixelGroupSize+s.minX),y:Math.round(t.y*r.pixelGroupSize+s.minY)}}));if(d){var f=d.length;if(r.skip>1){f=Math.floor(d.length/r.skip);while(f<3&&r.skip>1)r.skip-=1,f=Math.floor(d.length/r.skip)}for(var p=0,g=0;g<f;g+=1,p+=r.skip)c.push({x:d[p].x,y:d[p].y})}var m=function(){for(var e=0,n=t;e<n.length;e++){var r=n[e],i=c.map((function(t){return[t.x,t.y]}));if(!sT(i,r.getBBox().centerX,r.getBBox().centerY))return!1}return!0};if(c&&m())return c;if(r.threshold*=.9,h<=.5*r.maxMarchingIterations)r.memberInfluenceFactor*=1.2,r.edgeInfluenceFactor*=1.2;else{if(!(0!==r.nonMemberInfluenceFactor&&e.length>0))break;r.nonMemberInfluenceFactor*=.8}}return c};function jO(t,e,n){var r={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},i=[];t.forEach((function(t){i.push(t.getBBox())})),e.forEach((function(t){i.push(t.getBBox())}));for(var o=0,a=i;o<a.length;o++){var s=a[o];r.minX=(s.minX<r.minX?s.minX:r.minX)-n,r.minY=(s.minY<r.minY?s.minY:r.minY)-n,r.maxX=(s.maxX>r.maxX?s.maxX:r.maxX)+n,r.maxY=(s.maxY>r.maxY?s.maxY:r.maxY)+n}return r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.x=r.minX,r.y=r.minY,r}function BO(t,e,n,r,i,o){function a(t,e){var n=Math.floor((t-e)/o.pixelGroupSize);return n<0?0:n}function s(t,e){return t*o.pixelGroupSize+e}var l=(o.nodeR0-o.nodeR1)*(o.nodeR0-o.nodeR1),u=(o.edgeR0-o.edgeR1)*(o.edgeR0-o.edgeR1),c=function(t,e){var n=Math.min(a(t.minX,e+r.minX),i.width),o=Math.min(a(t.minY,e+r.minY),i.height),s=Math.min(a(t.maxX,-e+r.minX),i.width),l=Math.min(a(t.maxY,-e+r.minY),i.height);return[n,o,s,l]},h=function(t,e){for(var n=t.getBBox(),a=c(n,o.nodeR1),l=a[0],u=a[1],h=a[2],d=a[3],f=u;f<d;f+=1)for(var p=l;p<h;p+=1)if(!(e<0&&i[p+f*i.width]<=0)){var g=s(p,r.minX),m=s(f,r.minY),y=_T({x:g,y:m},{x:n.minX,y:n.minY,width:n.width,height:n.height});if(y<Math.pow(o.nodeR1,2)){var v=Math.sqrt(y)-o.nodeR1;i.cells[p+f*i.width]+=e*v*v}}},d=function(t,e){for(var n=t.getBBox(),a=c(n,o.edgeR1),l=a[0],u=a[1],h=a[2],d=a[3],f=u;f<d;f+=1)for(var p=l;p<h;p+=1)if(!(e<0&&i.cells[p+f*i.width]<=0)){var g=s(p,r.minX),m=s(f,r.minY),y=vT({x:g,y:m},t);if(y<Math.pow(o.edgeR1,2)){var v=Math.sqrt(y)-o.edgeR1;i.cells[p+f*i.width]+=e*v*v}}};o.nodeInfluenceFactor&&t.forEach((function(t){h(t,o.nodeInfluenceFactor/l)})),o.edgeInfluenceFactor&&n.forEach((function(t){d(t,o.edgeInfluenceFactor/u)})),o.negativeNodeInfluenceFactor&&e.forEach((function(t){h(t,o.negativeNodeInfluenceFactor/l)}))}function zO(t,e,n,r){var i=t.getBBox(),o=n[0],a=n[1],s=n[2],l=n[3],u={topLeft:{x:i.minX-e,y:i.minY-e},topRight:{x:i.maxX+e,y:i.minY-e},bottomLeft:{x:i.minX-e,y:i.maxY+e},bottomRight:{x:i.maxX+e,y:i.maxY+e}},c=i.height*i.width;function h(t,e){return i.width*(.5*(t.y-i.minY+(e.y-i.minY)))}if(a){if(o)return r?u.topLeft:u.bottomRight;if(s)return r?u.bottomLeft:u.topRight;var d=h(a,l);return d<.5*c?a.y>l.y?r?u.topLeft:u.bottomRight:r?u.topRight:u.bottomLeft:a.y<l.y?r?u.bottomLeft:u.topRight:r?u.bottomRight:u.topLeft}if(l){if(o)return r?u.topRight:u.bottomLeft;if(s)return r?u.bottomRight:u.topLeft}var f=h(o,s);return f<.5*c?o.x>s.x?r?u.topLeft:u.bottomRight:r?u.bottomLeft:u.topRight:o.x<s.x?r?u.topRight:u.bottomLeft:r?u.bottomRight:u.topLeft}var UO=function(){function t(t,e){this.cfg=Object(RE["deepMix"])(this.getDefaultCfg(),e),this.graph=t,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map((function(e){return Object(RE["isString"])(e)?t.findById(e):e})),this.nonMembers=this.cfg.nonMembers.map((function(e){return Object(RE["isString"])(e)?t.findById(e):e})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return t.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},t.prototype.setPadding=function(){var t=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+t:10+t,this.cfg.bubbleCfg={nodeR0:this.padding-t,nodeR1:this.padding-t,morphBuffer:this.padding-t}},t.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),"round-convex"!==this.type&&"smooth-convex"!==this.type&&"bubble"!==this.type&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},t.prototype.calcPath=function(t,e){var n,r,i;switch(this.type){case"round-convex":n=OO(t),i=CO(n.map((function(t){return[t.x,t.y]})),this.padding),r=Object(gO["b"])(i);break;case"smooth-convex":n=OO(t),2===n.length?(i=CO(n.map((function(t){return[t.x,t.y]})),this.padding),r=Object(gO["b"])(i)):n.length>2&&(i=MO(n.map((function(t){return[t.x,t.y]})),this.padding),r=xO(i));break;case"bubble":n=FO(t,e,this.cfg.bubbleCfg),r=n.length>=2&&xO(n);break;default:}return r},t.prototype.render=function(){this.group.addShape("path",{attrs:Object(NE["__assign"])({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id,capture:!1}),this.group.toBack()},t.prototype.addMember=function(t){if(t){Object(RE["isString"])(t)&&(t=this.graph.findById(t)),this.members.push(t);var e=this.nonMembers.indexOf(t);return e>-1&&this.nonMembers.splice(e,1),this.updateData(this.members,this.nonMembers),!0}},t.prototype.addNonMember=function(t){if(t){Object(RE["isString"])(t)&&(t=this.graph.findById(t)),this.nonMembers.push(t);var e=this.members.indexOf(t);return e>-1&&this.members.splice(e,1),this.updateData(this.members,this.nonMembers),!0}},t.prototype.removeMember=function(t){if(t){Object(RE["isString"])(t)&&(t=this.graph.findById(t));var e=this.members.indexOf(t);return e>-1&&(this.members.splice(e,1),this.updateData(this.members,this.nonMembers),!0)}},t.prototype.removeNonMember=function(t){if(t){Object(RE["isString"])(t)&&(t=this.graph.findById(t));var e=this.nonMembers.indexOf(t);return e>-1&&(this.nonMembers.splice(e,1),this.updateData(this.members,this.nonMembers),!0)}},t.prototype.updateData=function(t,e){var n=this;this.group.findById(this.id).remove(),t&&(this.members=t.map((function(t){return Object(RE["isString"])(t)?n.graph.findById(t):t}))),e&&(this.nonMembers=e.map((function(t){return Object(RE["isString"])(t)?n.graph.findById(t):t}))),this.path=this.calcPath(this.members,this.nonMembers),this.render()},t.prototype.updateStyle=function(t){var e=this.group.findById(this.id);e.attr(Object(NE["__assign"])({},t))},t.prototype.updateCfg=function(t){var e=this;this.cfg=Object(RE["deepMix"])(this.cfg,t),this.id=this.cfg.id,this.group=this.cfg.group,t.members&&(this.members=this.cfg.members.map((function(t){return Object(RE["isString"])(t)?e.graph.findById(t):t}))),t.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map((function(t){return Object(RE["isString"])(t)?e.graph.findById(t):t}))),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},t.prototype.contain=function(t){var e,n,r=this;e=Object(RE["isString"])(t)?this.graph.findById(t):t;var i=e.getKeyShape();if("path"===e.get("type"))n=_O(i.attr("path"));else{var o=i.getCanvasBBox();n=[[o.minX,o.minY],[o.maxX,o.minY],[o.maxX,o.maxY],[o.minX,o.maxY]]}return n=n.map((function(t){var e=r.graph.getPointByCanvas(t[0],t[1]);return[e.x,e.y]})),cT(n,_O(this.path))},t.prototype.destroy=function(){this.group.remove(),this.cfg=null},t}(),GO=UO,qO=UE["a"].transform,VO="node",HO=function(t){function e(e){var n=t.call(this)||this;return n.sortCombos=Object(RE["debounce"])((function(){var t=n.get("comboSorted");if(n&&!n.destroyed&&!t){n.set("comboSorted",!0);var e=[],r={},i=n.get("comboTrees");(i||[]).forEach((function(t){ZT(t,(function(t){return e[t.depth]?e[t.depth].push(t.id):e[t.depth]=[t.id],r[t.id]=t.depth,!0}))}));var o=n.getEdges().concat(n.get("vedges"));(o||[]).forEach((function(t){var n=t.getModel(),i=r[n.source]||0,o=r[n.target]||0,a=Math.max(i,o);e[a]?e[a].push(n.id):e[a]=[n.id]})),e.forEach((function(t){if(t&&t.length)for(var e=t.length-1;e>=0;e--){var r=n.findById(t[e]);r&&r.toFront()}}))}}),500,!1),n.cfg=Object(RE["deepMix"])(n.getDefaultCfg(),e),n.init(),n.animating=!1,n.destroyed=!1,n.cfg.enabledStack&&(n.undoStack=new jM(n.cfg.maxStep),n.redoStack=new jM(n.cfg.maxStep)),n}return Object(NE["__extends"])(e,t),e.prototype.init=function(){this.initCanvas();var t=new wA(this),e=new cA(this),n=new dO(this),r=new pO(this);this.set({viewController:t,modeController:e,itemController:n,stateController:r}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},e.prototype.initGroups=function(){var t=this.get("canvas");if(t){var e=t.get("el"),n=(e||{}).id,r=void 0===n?"g6":n,i=t.addGroup({id:"".concat(r,"-root"),className:jT.rootContainerClassName});if(this.get("groupByTypes")){var o=i.addGroup({id:"".concat(r,"-edge"),className:jT.edgeContainerClassName}),a=i.addGroup({id:"".concat(r,"-node"),className:jT.nodeContainerClassName}),s=i.addGroup({id:"".concat(r,"-combo"),className:jT.comboContainerClassName});s.toBack(),this.set({nodeGroup:a,edgeGroup:o,comboGroup:s})}var l=i.addGroup({id:"".concat(r,"-delegate"),className:jT.delegateContainerClassName});this.set({delegateGroup:l}),this.set("group",i)}},e.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.02,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[],optimizeThreshold:1e3}},e.prototype.set=function(t,e){return Object(RE["isPlainObject"])(t)?this.cfg=Object(NE["__assign"])(Object(NE["__assign"])({},this.cfg),t):this.cfg[t]=e,"enabledStack"!==t||!e||this.undoStack||this.redoStack||(this.undoStack=new jM(this.cfg.maxStep),this.redoStack=new jM(this.cfg.maxStep)),this},e.prototype.get=function(t){var e;return null===(e=this.cfg)||void 0===e?void 0:e[t]},e.prototype.getGroup=function(){return this.get("group")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.getMinZoom=function(){return this.get("minZoom")},e.prototype.setMinZoom=function(t){return this.set("minZoom",t)},e.prototype.getMaxZoom=function(){return this.get("maxZoom")},e.prototype.setMaxZoom=function(t){return this.set("maxZoom",t)},e.prototype.getWidth=function(){return this.get("width")},e.prototype.getHeight=function(){return this.get("height")},e.prototype.clearItemStates=function(t,e){Object(RE["isString"])(t)&&(t=this.findById(t));var n=this.get("itemController");e||(e=t.get("states")),n.clearItemStates(t,e);var r=this.get("stateController");r.updateStates(t,e,!1)},e.prototype.node=function(t){"function"===typeof t&&this.set("nodeMapper",t)},e.prototype.edge=function(t){"function"===typeof t&&this.set("edgeMapper",t)},e.prototype.combo=function(t){"function"===typeof t&&this.set("comboMapper",t)},e.prototype.findById=function(t){return this.get("itemMap")[t]},e.prototype.find=function(t,e){var n,r=this.get("".concat(t,"s"));return Object(RE["each"])(r,(function(t,r){if(e(t,r))return n=t,n})),n},e.prototype.findAll=function(t,e){var n=[];return Object(RE["each"])(this.get("".concat(t,"s")),(function(t,r){e(t,r)&&n.push(t)})),n},e.prototype.findAllByState=function(t,e,n){return n?this.findAll(t,(function(t){return t.hasState(e)&&n(t)})):this.findAll(t,(function(t){return t.hasState(e)}))},e.prototype.translate=function(t,e,n,r){var i=this,o=this.get("group"),a=Object(RE["clone"])(o.getMatrix());if(a||(a=[1,0,0,0,1,0,0,0,1]),n){var s=aA({animateCfg:r,callback:function(){return i.emit("viewportchange",{action:"translate",matrix:o.getMatrix()})}});nT(o,{x:o.getCanvasBBox().x+t,y:o.getCanvasBBox().y+e},n,s||{duration:500,easing:"easeCubic"})}else a=qO(a,[["t",t,e]]),o.setMatrix(a),this.emit("viewportchange",{action:"translate",matrix:a}),this.autoPaint()},e.prototype.moveTo=function(t,e,n,r){var i=this.get("group");nT(i,{x:t,y:e},n,r||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:i.getMatrix()})},e.prototype.fitView=function(t,e,n,r){t&&this.set("fitViewPadding",t);var i=this.get("viewController");e?i.fitViewByRules(e,n,r):i.fitView(n,r),this.autoPaint()},e.prototype.fitCenter=function(t,e){var n=this.get("viewController");n.fitCenter(t,e),this.autoPaint()},e.prototype.addBehaviors=function(t,e){var n=this.get("modeController");return n.manipulateBehaviors(t,e,!0),this},e.prototype.removeBehaviors=function(t,e){var n=this.get("modeController");return n.manipulateBehaviors(t,e,!1),this},e.prototype.updateBehavior=function(t,e,n){var r=this.get("modeController");return r.updateBehavior(t,e,n),this},e.prototype.zoom=function(t,e,n,r){var i=this,o=this.get("group"),a=Object(RE["clone"])(o.getMatrix())||[1,0,0,0,1,0,0,0,1],s=this.get("minZoom"),l=this.get("maxZoom"),u=this.getZoom()||1,c=u*t,h=t,d=!1;if(s&&c<s?(h=s/u,d=!0):l&&c>l&&(h=l/u,d=!0),a=qO(a,e?[["t",-e.x,-e.y],["s",h,h],["t",e.x,e.y]]:[["s",h,h]]),n){var f=Object(RE["clone"])(o.getMatrix());f||(f=[1,0,0,0,1,0,0,0,1]);var p=f[0],g=p*h,m=aA({animateCfg:r,callback:function(){return i.emit("viewportchange",{action:"zoom",matrix:o.getMatrix()})}});o.animate((function(t){if(1===t)f=a;else{var n=wT(p,g,t)/f[0];f=qO(f,e?[["t",-e.x,-e.y],["s",n,n],["t",e.x,e.y]]:[["s",n,n]])}return{matrix:f}}),m)}else o.setMatrix(a),this.emit("viewportchange",{action:"zoom",matrix:a}),this.autoPaint();return!d},e.prototype.zoomTo=function(t,e,n,r){var i=t/this.getZoom();return this.zoom(i,e,n,r)},e.prototype.focusItem=function(t,e,n){var r=this.get("viewController"),i=!1;e?i=!0:void 0===e&&(i=this.get("animate"));var o={};n?o=n:void 0===n&&(o=this.get("animateCfg")),r.focus(t,i,o),this.autoPaint()},e.prototype.focusItems=function(t,e,n,r){var i=this.get("viewController");i.focusItems(t,e,n,r)},e.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},e.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},e.prototype.getPointByClient=function(t,e){var n=this.get("viewController");return n.getPointByClient(t,e)},e.prototype.getClientByPoint=function(t,e){var n=this.get("viewController");return n.getClientByPoint(t,e)},e.prototype.getPointByCanvas=function(t,e){var n=this.get("viewController");return n.getPointByCanvas(t,e)},e.prototype.getCanvasByPoint=function(t,e){var n=this.get("viewController");return n.getCanvasByPoint(t,e)},e.prototype.getGraphCenterPoint=function(){var t=this.get("group").getCanvasBBox();return{x:(t.minX+t.maxX)/2,y:(t.minY+t.maxY)/2}},e.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},e.prototype.showItem=function(t,e){void 0===e&&(e=!0);var n=this.get("itemController"),r=n.changeItemVisibility(t,!0);if(e&&this.get("enabledStack")){var i=r.getID(),o=r.getType(),a={},s={};switch(o){case"node":a.nodes=[{id:i,visible:!1}],s.nodes=[{id:i,visible:!0}];break;case"edge":a.nodes=[{id:i,visible:!1}],s.edges=[{id:i,visible:!0}];break;case"combo":a.nodes=[{id:i,visible:!1}],s.combos=[{id:i,visible:!0}];break;default:break}this.pushStack("visible",{before:a,after:s})}},e.prototype.hideItem=function(t,e){void 0===e&&(e=!0);var n=this.get("itemController"),r=n.changeItemVisibility(t,!1);if(e&&this.get("enabledStack")){var i=r.getID(),o=r.getType(),a={},s={};switch(o){case"node":a.nodes=[{id:i,visible:!0}],s.nodes=[{id:i,visible:!1}];break;case"edge":a.nodes=[{id:i,visible:!0}],s.edges=[{id:i,visible:!1}];break;case"combo":a.nodes=[{id:i,visible:!0}],s.combos=[{id:i,visible:!1}];break;default:break}this.pushStack("visible",{before:a,after:s})}},e.prototype.refreshItem=function(t){var e=this.get("itemController");e.refreshItem(t)},e.prototype.setAutoPaint=function(t){var e=this;e.set("autoPaint",t);var n=e.get("canvas");n.set("autoDraw",t)},e.prototype.remove=function(t,e){void 0===e&&(e=!0),this.removeItem(t,e)},e.prototype.removeItem=function(t,e){void 0===e&&(e=!0);var n=t;if(Object(RE["isString"])(t)&&(n=this.findById(t)),!n&&Object(RE["isString"])(t))console.warn("The item ".concat(t," to be removed does not exist!"));else if(n){var r="";if(n.getType&&(r=n.getType()),e&&this.get("enabledStack")){var i=Object(NE["__assign"])(Object(NE["__assign"])({},n.getModel()),{itemType:r}),o={};switch(r){case"node":o.nodes=[i],o.edges=[];for(var a=n.getEdges(),s=a.length-1;s>=0;s--)o.edges.push(Object(NE["__assign"])(Object(NE["__assign"])({},a[s].getModel()),{itemType:"edge"}));break;case"edge":o.edges=[i];break;case"combo":o.combos=[i];break;default:break}this.pushStack("delete",{before:o,after:{}})}if("node"===r){var l=n.getModel();l.comboId&&this.updateComboTree(n,void 0,!1)}var u=this.get("itemController");if(u.removeItem(n),"combo"===r){var c=nA(this.get("comboTrees"));this.set("comboTrees",c)}}},e.prototype.innerAddItem=function(t,e,n){if(!lA(t,e))return!1;if(!e.id||!this.findById(e.id)){var r,i=this.get("comboTrees")||[];if("combo"===t){var o=this.get("itemMap"),a=!1;if(i.forEach((function(i){a||KT(i,(function(i){if(e.parentId===i.id){a=!0;var s=Object(NE["__assign"])({id:e.id,depth:i.depth+2},e);i.children?i.children.push(s):i.children=[s],e.depth=s.depth,r=n.addItem(t,e)}var l=o[i.id];return a&&l&&l.getType&&"combo"===l.getType()&&n.updateCombo(l,i.children),!0}))})),!a){var s=Object(NE["__assign"])({id:e.id,depth:0},e);e.depth=s.depth,i.push(s),r=n.addItem(t,e)}this.set("comboTrees",i),e.collapsed&&(this.collapseCombo(r,!1),this.updateCombo(r))}else if("node"===t&&Object(RE["isString"])(e.comboId)&&i){var l=this.findById(e.comboId);l&&l.getType&&"combo"!==l.getType()&&console.warn("'".concat(e.comboId,"' is not a id of a combo in the graph, the node will be added without combo.")),r=n.addItem(t,e);var u=this.get("itemMap"),c=!1,h=!1;i.forEach((function(t){h||c||KT(t,(function(t){if(t.id===e.id)return h=!0,!1;if(e.comboId===t.id&&!h){c=!0;var r=Object(RE["clone"])(e);r.itemType="node",t.children?t.children.push(r):t.children=[r],r.depth=t.depth+1}return c&&u[t.id].getType&&"combo"===u[t.id].getType()&&n.updateCombo(u[t.id],t.children),!0}))}))}else r=n.addItem(t,e);if("node"===t&&e.comboId||"combo"===t&&e.parentId){l=this.findById(e.comboId||e.parentId);l&&l.getType&&"combo"===l.getType()&&l.addChild(r)}return r}console.warn("This item exists already. Be sure the id %c".concat(e.id,"%c is unique."),"font-size: 20px; color: red;","")},e.prototype.addItem=function(t,e,n,r){void 0===n&&(n=!0),void 0===r&&(r=!0);var i=this.get("comboSorted");this.set("comboSorted",i&&!r);var o=this.get("itemController"),a=this.innerAddItem(t,e,o);if(!1===a||!0===a)return a;var s=this.get("combos");if(s&&s.length>0&&this.sortCombos(),this.autoPaint(),n&&this.get("enabledStack")){var l=Object(NE["__assign"])(Object(NE["__assign"])({},a.getModel()),{itemType:t}),u={};switch(t){case"node":u.nodes=[l];break;case"edge":u.edges=[l];break;case"combo":u.combos=[l];break;default:break}this.pushStack("add",{before:{},after:u})}return a},e.prototype.addItems=function(t,e,n){void 0===t&&(t=[]),void 0===e&&(e=!0),void 0===n&&(n=!0);var r=this.get("comboSorted");this.set("comboSorted",r&&!n);for(var i=this.get("itemController"),o=[],a=0;a<t.length;a++){var s=t[a];"edge"!==s.type&&"vedge"!==s.type?o.push(this.innerAddItem(s.type,s.model,i)):o.push(void 0)}for(a=0;a<t.length;a++){s=t[a];"edge"!==s.type&&"vedge"!==s.type||(o[a]=this.innerAddItem(s.type,s.model,i))}if(n){var l=this.get("combos");l&&l.length>0&&this.sortCombos()}if(this.autoPaint(),e&&this.get("enabledStack")){var u={nodes:[],edges:[],combos:[]};for(a=0;a<t.length;a++){var c=t[a].type,h=o[a];if(h&&!0!==h){var d=Object(NE["__assign"])(Object(NE["__assign"])({},h.getModel()),{itemType:c});switch(c){case"node":u.nodes.push(d);break;case"edge":u.edges.push(d);break;case"combo":u.combos.push(d);break;default:break}}}this.pushStack("addItems",{before:{},after:u})}return o},e.prototype.add=function(t,e,n,r){return void 0===n&&(n=!0),void 0===r&&(r=!0),this.addItem(t,e,n,r)},e.prototype.updateItem=function(t,e,n){var r=this;void 0===n&&(n=!0);var i,o=this.get("itemController");i=Object(RE["isString"])(t)?this.findById(t):t;var a,s=n&&this.get("enabledStack");s&&(a=Object(RE["clone"])(i.getModel()));var l="";i.getType&&(l=i.getType());var u=Object(NE["__spreadArray"])([],i.getStates(),!0);if("combo"===l&&Object(RE["each"])(u,(function(t){return r.setItemState(i,t,!1)})),o.updateItem(i,e),"combo"===l&&Object(RE["each"])(u,(function(t){return r.setItemState(i,t,!0)})),s){var c={nodes:[],edges:[],combos:[]},h={nodes:[],edges:[],combos:[]},d=Object(NE["__assign"])({id:a.id},e);switch(l){case"node":c.nodes.push(a),h.nodes.push(d);break;case"edge":c.edges.push(a),h.edges.push(d);break;case"combo":c.combos.push(a),h.combos.push(d);break;default:break}this.pushStack("update",{before:c,after:h})}},e.prototype.update=function(t,e,n){void 0===n&&(n=!0),this.updateItem(t,e,n)},e.prototype.setItemState=function(t,e,n){Object(RE["isString"])(t)&&(t=this.findById(t));var r=this.get("itemController");r.setItemState(t,e,n);var i=this.get("stateController");i.updateState(t,e,n)},e.prototype.priorityState=function(t,e){var n=this.get("itemController");n.priorityState(t,e)},e.prototype.data=function(t){sA(t),this.set("data",t)},e.prototype.render=function(){var t=this;this.set("comboSorted",!1);var e=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!e)throw new Error("data must be defined first");var n=e.nodes,r=void 0===n?[]:n,i=e.edges,o=void 0===i?[]:i,a=e.combos,s=void 0===a?[]:a;if(this.clear(!0),this.emit("beforerender"),t.addItems(r.map((function(t){return{type:"node",model:t}})),!1,!1),0!==(null===s||void 0===s?void 0:s.length)){var l=eA(s,r);this.set("comboTrees",l),t.addCombos(s)}t.addItems(o.map((function(t){return{type:"edge",model:t}})),!1,!1);var u=t.get("animate");(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",!1);var c=t.get("layoutController");if(c){if(c.layout(h),this.destroyed)return}else h();function h(){(t.get("comboTrees")||[]).forEach((function(e){KT(e,(function(e){var n=t.findById(e.id);return"combo"===n.getType()&&e.collapsed&&(t.collapseCombo(e.id,!1),t.updateCombo(n)),!0}))})),t.get("fitView")?t.fitView():t.get("fitCenter")&&t.fitCenter(),t.autoPaint(),t.emit("afterrender"),(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",u),setTimeout((function(){var e;null===(e=t.getCombos())||void 0===e||e.forEach((function(t){t.set("animate",!0)}))}),0)}if(!this.get("groupByTypes"))if(s&&0!==s.length)this.sortCombos();else if(e.nodes&&e.edges&&e.nodes.length<e.edges.length){var d=this.getNodes();d.forEach((function(t){t.toFront()}))}else{var f=this.getEdges();f.forEach((function(t){t.toBack()}))}},e.prototype.read=function(t){this.data(t),this.render()},e.prototype.diffItems=function(t,e,n){var r,i=this,o=this.get("itemMap");Object(RE["each"])(n,(function(n){if(r=o[n.id],r){if(i.get("animate")&&t===VO){var a=r.getContainer().getMatrix();a||(a=[1,0,0,0,1,0,0,0,1]),r.set("originAttrs",{x:a[6],y:a[7]})}i.updateItem(r,n,!1)}else r=i.addItem(t,n,!1);r&&e["".concat(t,"s")].push(r)}))},e.prototype.changeData=function(t,e){var n,r=this;void 0===e&&(e=!0);var i=this,o=t||i.get("data");if(!sA(o))return this;this.emit("beforechangedata"),e&&this.get("enabledStack")&&this.pushStack("changedata",{before:i.save(),after:o}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map((function(t){return i.clearItemStates(t)})),this.getEdges().map((function(t){return i.clearItemStates(t)}));var a=this.get("canvas"),s=a.get("localRefresh");a.set("localRefresh",!1),i.get("data")||(i.data(o),i.render());var l=this.get("itemMap"),u={nodes:[],edges:[]},c=o.combos;if(c){var h=eA(c,o.nodes);this.set("comboTrees",h)}else this.set("comboTrees",[]);this.diffItems("node",u,o.nodes),Object(RE["each"])(l,(function(t,e){l[e].getModel().depth=0,t.getType&&"edge"===t.getType()||(t.getType&&"combo"===t.getType()?(delete l[e],t.destroy()):u.nodes.indexOf(t)<0&&(delete l[e],i.remove(t,!1)))}));for(var d=this.getCombos(),f=d.length,p=f-1;p>=0;p--)d[p].destroyed&&d.splice(p,1);c&&(i.addCombos(c),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",u,o.edges),Object(RE["each"])(l,(function(t,e){(!t.getType||"node"!==t.getType()&&"combo"!==t.getType())&&u.edges.indexOf(t)<0&&(delete l[e],i.remove(t,!1))})),(this.get("comboTrees")||[]).forEach((function(t){KT(t,(function(t){var e=r.findById(t.id);return"combo"===e.getType()&&t.collapsed&&r.collapseCombo(t.id,!1),!0}))})),this.set({nodes:u.nodes,edges:u.edges});var g=(this.get("layout")||{}).relayoutAtChangeData,m=void 0===g||g,y=this.get("layoutController");return m&&y&&(y.changeData((function(){setTimeout((function(){var t;null===(t=i.getCombos())||void 0===t||t.forEach((function(t){t.set("animate",!0)}))}),0)})),i.get("animate")&&!y.getLayoutType()?(i.positionsAnimate(),null===(n=i.getCombos())||void 0===n||n.forEach((function(t){return t.set("animate",!0)}))):i.autoPaint()),setTimeout((function(){a.set("localRefresh",s)}),16),this.set("data",o),this.emit("afterchangedata"),this},e.prototype.addCombos=function(t){var e=this,n=e.get("comboTrees"),r=this.get("itemController");r.addCombos(n,t)},e.prototype.createCombo=function(t,e,n){var r=this;void 0===n&&(n=!0);var i=this.get("itemController");this.set("comboSorted",!1);var o,a="";if(t){if(Object(RE["isString"])(t))a=t,o={id:t};else{if(a=t.id,!a)return void console.warn("Create combo failed. Please assign a unique string id for the adding combo.");o=t}var s=n&&this.get("enabledStack"),l={nodes:[],combos:[]};s&&e.forEach((function(t){var e=r.findById(t),n=e.getType();if("node"===n||"combo"===n){var i=e.getModel();l["".concat(n,"s")].push({id:t,parentId:"node"===n?i.comboId:i.parentId})}}));var u=this.get("comboTrees"),c=new Set(e),h=new Map;u&&(u.forEach((function(t){KT(t,(function(t,e,n){if(c.has(t.id)){if(e){var o=r.findById(e.id),a=r.findById(t.id);e.children.splice(n,1),o.removeChild(a),i.updateCombo(o,e.children)}"combo"===t.itemType&&h.set(t.id,t)}return!0}))})),u=u.filter((function(t){return!c.has(t.id)})),this.set("comboTrees",u));var d={nodes:[],combos:[]},f=e.map((function(t){var e=r.findById(t),n=e.getModel(),i="";e.getType&&(i=e.getType());var o=h.get(t)||{id:e.getID(),itemType:i};return"combo"===i?(o.parentId=a,n.parentId=a):"node"===i&&(o.comboId=a,n.comboId=a),s&&d["".concat(i,"s")].push({id:n.id,parentId:a}),o}));o.children=f,this.addItem("combo",o,!1),this.set("comboSorted",!1),u&&(u.forEach((function(t){ZT(t,(function(t){return t.id!==a||(t.itemType="combo",t.children=f,!1)}))})),this.sortCombos()),s&&(d.combos.push(o),this.pushStack("createCombo",{before:l,after:d}));var p=this.findById(a);!p.getModel().parentId&&p.getChildren().combos.length&&this.updateComboTree(p,void 0,!1),setTimeout((function(){p.set("animate",!0)}),0)}},e.prototype.uncombo=function(t,e){var n,r,i=this;void 0===e&&(e=!0);var o=this,a=t;if(Object(RE["isString"])(t)&&(a=this.findById(t)),!a||a.getType&&"combo"!==a.getType())console.warn("The item is not a combo!");else{var s=a.getModel(),l=a.getModel().parentId,u=o.get("comboTrees");u||(u=[]);var c,h=this.get("itemMap"),d=a.get("id"),f=[],p=this.get("combos"),g=this.findById(l),m=e&&this.get("enabledStack"),y={};if(m&&(y=Object(RE["clone"])(s),y.children=[]),u.forEach((function(t){c||KT(t,(function(t){var e;if(t.id===d){c=t;var n=a.getEdges().map((function(t){return t.getID()}));n.forEach((function(t){i.removeItem(t,!1)}));var r=p.indexOf(a);p.splice(r,1),delete h[d];var o=Object(RE["clone"])(a.getModel());a.destroy(),i.emit("afterremoveitem",{item:o,type:"combo"})}if(l&&c&&t.id===l){g.removeCombo(a),f=t.children;r=f.indexOf(c);return-1!==r&&f.splice(r,1),null===(e=c.children)||void 0===e||e.forEach((function(t){var e=i.findById(t.id),n=e.getModel();e.getType&&"combo"===e.getType()?(t.parentId=l,delete t.comboId,n.parentId=l,delete n.comboId):e.getType&&"node"===e.getType()&&(t.comboId=l,n.comboId=l),g.addChild(e),f.push(t)})),i.updateCombo(g),!1}return!0}))})),!l&&c){var v=u.indexOf(c);u.splice(v,1),null===(n=c.children)||void 0===n||n.forEach((function(t){t.parentId=void 0;var e=i.findById(t.id).getModel();delete e.parentId,delete e.comboId,"node"!==t.itemType&&u.push(t)}))}if(m){var b={nodes:[],combos:[]},_={nodes:[],combos:[]};null===(r=c.children)||void 0===r||r.forEach((function(t){var e=i.findById(t.id),n=e.getType();"node"!==n&&"combo"!==n||(b["".concat(n,"s")].push({id:t.id,parentId:d}),_["".concat(n,"s")].push({id:t.id,parentId:l}))})),b.combos.push(y),this.pushStack("uncombo",{before:b,after:_})}}},e.prototype.updateCombos=function(t){var e=this;void 0===t&&(t=!1);var n=this,r=this.get("comboTrees"),i=n.get("itemController"),o=n.get("itemMap");(r||[]).forEach((function(n){KT(n,(function(n){var r;if(!n)return!0;var a=o[n.id];if("combo"===(null===(r=null===a||void 0===a?void 0:a.getType)||void 0===r?void 0:r.call(a))){var s=Object(NE["__spreadArray"])([],a.getStates(),!0);Object(RE["each"])(s,(function(t){return e.setItemState(a,t,!1)})),i.updateCombo(a,n.children,t),Object(RE["each"])(s,(function(t){return e.setItemState(a,t,!0)}))}return!0}))})),n.sortCombos()},e.prototype.updateCombo=function(t){var e,n=this,r=this,i=t;if(Object(RE["isString"])(t)&&(i=this.findById(t)),!i||i.getType&&"combo"!==i.getType())console.warn("The item to be updated is not a combo!");else{e=i.get("id");var o=this.get("comboTrees"),a=r.get("itemController"),s=r.get("itemMap");(o||[]).forEach((function(t){KT(t,(function(t){if(!t)return!0;var r=s[t.id];if(e===t.id&&r&&r.getType&&"combo"===r.getType()){var i=Object(NE["__spreadArray"])([],r.getStates(),!0);Object(RE["each"])(i,(function(t){r.getStateStyle(t)&&n.setItemState(r,t,!1)})),a.updateCombo(r,t.children),Object(RE["each"])(i,(function(t){r.getStateStyle(t)&&n.setItemState(r,t,!0)})),e&&(e=t.parentId)}return!0}))}))}},e.prototype.updateComboTree=function(t,e,n){void 0===n&&(n=!0);var r,i=this;this.set("comboSorted",!1),r=Object(RE["isString"])(t)?i.findById(t):t;var o=r.getModel(),a=o.comboId||o.parentId,s="";if(r.getType&&(s=r.getType()),e&&"combo"===s){var l,u=this.get("comboTrees"),c=!0;if((u||[]).forEach((function(t){l||ZT(t,(function(t){if(!l)return t.id===r.getID()&&(l=t),!0}))})),ZT(l,(function(t){return t.id!==e||(c=!1,!1)})),!c)return void console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!")}if(n&&this.get("enabledStack")){var h={},d={};"combo"===s?(h.combos=[{id:o.id,parentId:o.parentId}],d.combos=[{id:o.id,parentId:e}]):"node"===s&&(h.nodes=[{id:o.id,parentId:o.comboId}],d.nodes=[{id:o.id,parentId:e}]),this.pushStack("updateComboTree",{before:h,after:d})}if(o.parentId||o.comboId){var f=this.findById(o.parentId||o.comboId);f&&f.removeChild(r)}if("combo"===s?o.parentId=e:"node"===s&&(o.comboId=e),e){var p=this.findById(e);p&&p.addChild(r)}if(a){p=this.findById(a);p&&p.removeChild(r)}var g=nA(this.get("comboTrees"),o.id,e);this.set("comboTrees",g),this.updateCombos()},e.prototype.save=function(){var t=[],e=[],n=[];return Object(RE["each"])(this.get("nodes"),(function(e){t.push(e.getModel())})),Object(RE["each"])(this.get("edges"),(function(t){e.push(t.getModel())})),Object(RE["each"])(this.get("combos"),(function(t){n.push(t.getModel())})),{nodes:t,edges:e,combos:n}},e.prototype.changeSize=function(t,e){var n=this.get("viewController");return n.changeSize(t,e),this},e.prototype.refresh=function(){var t=this;if(t.emit("beforegraphrefresh"),t.get("animate"))t.positionsAnimate();else{var e=t.get("nodes"),n=t.get("edges"),r=t.get("edges");Object(RE["each"])(e,(function(t){t.refresh()})),Object(RE["each"])(n,(function(t){t.refresh()})),Object(RE["each"])(r,(function(t){t.refresh()}))}t.emit("aftergraphrefresh"),t.autoPaint()},e.prototype.getNodes=function(){return this.get("nodes")},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getCombos=function(){return this.get("combos")},e.prototype.getComboChildren=function(t){if(Object(RE["isString"])(t)&&(t=this.findById(t)),t&&(!t.getType||"combo"===t.getType()))return t.getChildren();console.warn("The combo does not exist!")},e.prototype.positionsAnimate=function(t){var e=this;e.emit("beforeanimate");var n=e.get("animateCfg"),r=n.onFrame,i=t?e.getNodes().concat(e.getCombos()):e.getNodes(),o=i.map((function(t){var e=t.getModel();return{id:e.id,x:e.x,y:e.y}}));e.stopAnimate();var a=e.get("canvas");e.animating=!0,setTimeout((function(){a.animate((function(n){Object(RE["each"])(o,(function(t){var i=e.findById(t.id);if(i&&!i.destroyed){var o=i.get("originAttrs"),a=i.get("model"),s=i.getContainer().getMatrix();if(void 0!==o&&null!==o||(s&&(o={x:s[6],y:s[7]}),i.set("originAttrs",o||0)),r){var l=r(i,n,t,o||{x:0,y:0});i.set("model",Object.assign(a,l))}else o?(a.x=o.x+(t.x-o.x)*n,a.y=o.y+(t.y-o.y)*n):(a.x=t.x,a.y=t.y)}})),e.refreshPositions(t)}),{duration:n.duration,easing:n.easing,callback:function(){Object(RE["each"])(i,(function(t){t.set("originAttrs",null)})),n.callback&&n.callback(),e.emit("afteranimate"),e.animating=!1}})}),0)},e.prototype.refreshPositions=function(t){var e=this;e.emit("beforegraphrefreshposition");var n,r=e.get("nodes"),i=e.get("edges"),o=e.get("vedges"),a=e.get("combos"),s={},l=function(t){Object(RE["each"])(t,(function(t){n=t.getModel();var e=t.get("originAttrs");if(!e||n.x!==e.x||n.y!==e.y){var r=t.updatePosition({x:n.x,y:n.y});s[n.id]=r,n.comboId&&(s[n.comboId]=s[n.comboId]||r),n.parentId&&(s[n.parentId]=s[n.parentId]||r)}}))};l(a),l(r),a&&0!==a.length&&(t?(l(a),e.updateCombos()):e.updateCombos()),Object(RE["each"])(i,(function(t){var e=t.getSource().getModel(),n=t.getTarget();if(!Object(RE["isPlainObject"])(n)){var r=n.getModel();(s[e.id]||s[r.id]||t.getModel().isComboEdge)&&t.refresh()}})),Object(RE["each"])(o,(function(t){t.refresh()})),e.emit("aftergraphrefreshposition"),e.autoPaint()},e.prototype.stopAnimate=function(){var t=this.get("canvas"),e=t.cfg.timeline;e&&e.stopAllAnimations()},e.prototype.isAnimating=function(){return this.animating},e.prototype.getZoom=function(){var t=this.get("group").getMatrix();return t?t[0]:1},e.prototype.getCurrentMode=function(){var t=this.get("modeController");return t.getMode()},e.prototype.setMode=function(t){var e=this.get("modeController");return e.setMode(t),this},e.prototype.clear=function(t){var e;return void 0===t&&(t=!1),null===(e=this.get("canvas"))||void 0===e||e.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],vedges:[],groups:[],combos:[],comboTrees:[]}),t||this.emit("afterrender"),this},e.prototype.updateLayout=function(t,e,n,r){var i=this;void 0===t&&(t={}),void 0===r&&(r=!0);var o=this.get("layoutController");if(Object(RE["isString"])(t)&&(t={type:t}),e){var a=n;a||(a="begin"===e?{x:0,y:0}:{x:this.getWidth()/2,y:this.getHeight()/2}),a=this.getPointByCanvas(a.x,a.y);var s=["force","gForce","fruchterman","force2"];s.includes(t.type)||!t.type&&s.includes(null===o||void 0===o?void 0:o.layoutType)?t.center=[a.x,a.y]:this.once("afterlayout",(function(t){var n=i.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];a.x=a.x*n[0]+n[6],a.y=a.y*n[0]+n[7];var r=i.getGroup().getCanvasBBox(),o=r.minX,s=r.maxX,l=r.minY,u=r.maxY,c={x:(o+s)/2,y:(l+u)/2};"begin"===e&&(c.x=o,c.y=l),i.translate(a.x-c.x,a.y-c.y)}))}var l=Object(NE["__assign"])({},this.get("layout")),u={};Object.assign(u,l,t),t.pipes&&!t.type?delete u.type:!t.pipes&&u.type&&delete u.pipes,this.set("layout",u),o&&(o.isLayoutTypeSame(u)&&u.gpuEnabled===l.gpuEnabled?o.updateLayoutCfg(u):o.changeLayout(u),r&&this.get("enabledStack")&&this.pushStack("layout",{before:l,after:u}))},e.prototype.destroyLayout=function(){var t=this.get("layoutController");null===t||void 0===t||t.destroyLayout()},e.prototype.layout=function(){var t,e=this.get("layoutController"),n=this.get("layout");n&&e&&(n.workerEnabled?e.layout():(null===(t=e.layoutMethods)||void 0===t?void 0:t.length)?e.relayout(!0):e.layout())},e.prototype.collapseCombo=function(t,e){var n=this;if(void 0===e&&(e=!0),!this.destroyed)if(Object(RE["isString"])(t)&&(t=this.findById(t)),t){this.emit("beforecollapseexpandcombo",{action:"collapse",item:t});var r=t.getModel(),i=this.get("itemController");i.collapseCombo(t,e),r.collapsed=!0;var o=this.getEdges().concat(this.get("vedges")),a=[],s=this.get("comboTrees"),l=!1;(s||[]).forEach((function(t){l||ZT(t,(function(t){if(l&&t.depth<=r.depth)return!1;if(r.id===t.id&&(l=!0),l){var e=n.findById(t.id);e&&e.getType&&"combo"===e.getType()&&(a=a.concat(e.getNodes()),a=a.concat(e.getCombos()))}return!0}))}));var u={};o.forEach((function(t){var e=t.getModel(),i=e.isVEdge,o=e.size,s=void 0===o?1:o;if(!t.isVisible()||i){var l,c=t.getSource(),h=t.getTarget(),d=null;if(c.getModel().id===r.id||a.includes(c)&&!a.includes(h)?(d=h,l=!1):(h.getModel().id===r.id||!a.includes(c)&&a.includes(h))&&(d=c,l=!0),d){if(i)return void n.removeItem(t,!1);var f=d.getModel();while(!d.isVisible()){var p=f.parentId,g=f.comboId,m=p||g;if(d=n.findById(m),!d||!m)return;f=d.getModel()}var y=f.id,v=l?{source:y,target:r.id,size:s,isVEdge:!0}:{source:r.id,target:y,size:s,isVEdge:!0},b="".concat(v.source,"-").concat(v.target);if(u[b])return void(u[b].size+=s);u[b]=v}}})),this.addItems(Object.values(u).map((function(t){return{type:"vedge",model:t}})),!1),this.emit("aftercollapseexpandcombo",{action:"collapse",item:t})}else console.warn("The combo to be collapsed does not exist!")},e.prototype.expandCombo=function(t,e){var n=this;if(void 0===e&&(e=!0),Object(RE["isString"])(t)&&(t=this.findById(t)),!t||t.getType&&"combo"!==t.getType())console.warn("The combo to be collapsed does not exist!");else{this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var r=t.getModel(),i=this.get("itemController");i.expandCombo(t,e),r.collapsed=!1;var o=this.getEdges().concat(this.get("vedges")),a=[],s=this.get("comboTrees"),l=!1;(s||[]).forEach((function(t){l||ZT(t,(function(t){if(l&&t.depth<=r.depth)return!1;if(r.id===t.id&&(l=!0),l){var e=n.findById(t.id);e&&e.getType&&"combo"===e.getType()&&(a=a.concat(e.getNodes()),a=a.concat(e.getCombos()))}return!0}))}));var u={};o.forEach((function(t){if(!t.isVisible()||t.getModel().isVEdge){var e,i=t.getSource(),o=t.getTarget(),s=i.get("id"),l=o.get("id"),c=null;if(s===r.id||a.includes(i)&&!a.includes(o)?(c=o,e=!1):l===r.id||!a.includes(i)&&a.includes(o)?(c=i,e=!0):a.includes(i)&&a.includes(o)&&i.isVisible()&&o.isVisible()&&t.show(),c){var h=t.getModel(),d=h.isVEdge,f=h.size,p=void 0===f?1:f;if(d)return void n.removeItem(t,!1);var g=c.getModel();while(!c.isVisible()){var m=g.parentId,y=g.comboId,v=m||y;if(c=n.findById(v),!c||!v)return;g=c.getModel()}var b=g.id,_=e?o:i,x=_.getModel();while(!_.isVisible()){var w=x.parentId,S=x.comboId,E=w||S;if(_=n.findById(E),!_||!E)return;if(x.comboId===r.id||x.parentId===r.id)break;x=_.getModel()}var C=x.id;if(b){var M=e?{source:b,target:C,isVEdge:!0,size:p}:{source:C,target:b,isVEdge:!0,size:p},T="".concat(M.source,"-").concat(M.target);if(u[T])return void(u[T].size+=p);u[T]=M}}}})),this.addItems(Object.values(u).map((function(t){return{type:"vedge",model:t}})),!1),this.emit("aftercollapseexpandcombo",{action:"expand",item:t})}},e.prototype.collapseExpandCombo=function(t,e){if(void 0===e&&(e=!0),Object(RE["isString"])(t)&&(t=this.findById(t)),t&&(!t.getType||"combo"===t.getType())){var n=t.getModel(),r=this.findById(n.parentId);while(r){var i=r.getModel();if(i.collapsed)return console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),void(r=void 0);r=this.findById(i.parentId)}var o=n.collapsed;o?this.expandCombo(t,e):this.collapseCombo(t,e),this.updateCombo(t)}},e.prototype.getNeighbors=function(t,e){var n=t;return Object(RE["isString"])(t)&&(n=this.findById(t)),n.getNeighbors(e)},e.prototype.getNodeDegree=function(t,e,n){void 0===e&&(e=void 0),void 0===n&&(n=!1);var r=t;Object(RE["isString"])(t)&&(r=this.findById(t));var i=this.get("degrees");i&&!n||(i=sC(this.save()),this.set("degrees",i));var o=i[r.getID()],a=0;if(!o)return 0;switch(e){case"in":a=o.inDegree;break;case"out":a=o.outDegree;break;case"all":a=o;break;default:a=o.degree;break}return a},e.prototype.getUndoStack=function(){return this.undoStack},e.prototype.getRedoStack=function(){return this.redoStack},e.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},e.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear(),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack}))},e.prototype.pushStack=function(t,e,n){if(void 0===t&&(t="update"),void 0===n&&(n="undo"),this.get("enabledStack")){var r=e?Object(RE["clone"])(e):{before:{},after:Object(RE["clone"])(this.save())};"redo"===n?this.redoStack.push({action:t,data:r}):this.undoStack.push({action:t,data:r}),this.emit("stackchange",{action:t,stackType:n,undoStack:this.undoStack,redoStack:this.redoStack})}else console.warn("请先启用 undo & redo 功能，在实例化 Graph 时候配置 enabledStack: true !")},e.prototype.getAdjMatrix=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=this.get("directed"));var n=this.get("adjMatrix");return n&&t||(n=qE(this.save(),e),this.set("adjMatrix",n)),n},e.prototype.getShortestPathMatrix=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=this.get("directed"));var n=this.get("adjMatrix"),r=this.get("shortestPathMatrix");return n&&t||(n=qE(this.save(),e),this.set("adjMatrix",n)),r&&t||(r=MC(this.save(),e),this.set("shortestPathMatrix",r)),r},e.prototype.on=function(e,n,r){return t.prototype.on.call(this,e,n,r)},e.prototype.destroy=function(){var t,e,n,r,i;this.emit("beforedestroy"),this.clear(),this.clearStack(),null===(t=this.get("itemController"))||void 0===t||t.destroy(),null===(e=this.get("modeController"))||void 0===e||e.destroy(),null===(n=this.get("viewController"))||void 0===n||n.destroy(),null===(r=this.get("stateController"))||void 0===r||r.destroy(),null===(i=this.get("canvas"))||void 0===i||i.destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null,this.emit("afterdestroy")},e.prototype.createHull=function(t){if(t.members&&!(t.members.length<1)){var e=this.get("hullGroup"),n=this.get("hullMap");if(n||(n={},this.set("hullMap",n)),e&&!e.get("destroyed")||(e=this.get("group").addGroup({id:"hullGroup"}),e.toBack(),this.set("hullGroup",e)),n[t.id])return console.warn("Existed hull id."),n[t.id];var r=e.addGroup({id:"".concat(t.id,"-container")}),i=new GO(this,Object(NE["__assign"])(Object(NE["__assign"])({},t),{group:r})),o=i.id;return n[o]=i,i}console.warn("Create hull failed! The members is empty.")},e.prototype.getHulls=function(){return this.get("hullMap")},e.prototype.getHullById=function(t){return this.get("hullMap")[t]},e.prototype.removeHull=function(t){var e,n;n=Object(RE["isString"])(t)?this.getHullById(t):t,null===(e=this.get("hullMap"))||void 0===e||delete e[n.id],n.destroy()},e.prototype.removeHulls=function(){var t=this.getHulls();t&&Object.keys(t).length&&(Object.keys(t).forEach((function(e){var n=t[e];n.destroy()})),this.set("hullMap",{}))},e}(zE["a"]),WO=HO;function YO(t){return YO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},YO(t)}var XO=UE["a"].transform,JO="-shape",ZO="-label",KO=["startArrow","endArrow"],QO={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},$O={lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},tk={edge:$O,node:QO,combo:QO},ek="-label-bg",nk={options:{labelCfg:{style:{fontFamily:jT.windowFontFamily}},descriptionCfg:{style:{fontFamily:jT.windowFontFamily}}},itemType:"",type:"",getCustomConfig:function(t){return{}},getOptions:function(t,e){return"move"===e||(null===e||void 0===e?void 0:e.includes("bbox"))?t:Object(RE["deepMix"])({},this.options,this.getCustomConfig(t)||{},t)},draw:function(t,e){e["shapeMap"]={},this.mergeStyle=this.getOptions(t);var n=this.drawShape(t,e);if(n.set("className",this.itemType+JO),e["shapeMap"][this.itemType+JO]=n,t.label){var r=this.drawLabel(t,e);r.set("className",this.itemType+ZO),e["shapeMap"][this.itemType+ZO]=r}return n},afterDraw:function(t,e,n){},drawShape:function(t,e){return null},drawLabel:function(t,e){var n=(this.mergeStyle||this.getOptions(t)||{}).labelCfg,r=n||{},i=this.getLabelStyle(t,r,e),o=i.rotate;delete i.rotate;var a=e.addShape("text",{attrs:i,draggable:!0,className:"text-shape",name:"text-shape",labelRelated:!0});if(e["shapeMap"]["text-shape"]=a,!isNaN(o)&&""!==o){var s=a.getBBox(),l=[1,0,0,0,1,0,0,0,1];if(i.rotateCenter)switch(i.rotateCenter){case"center":l=XO(l,[["t",-s.width/2,-s.height/2],["r",o],["t",s.width/2,s.height/2]]);break;case"lefttop":l=XO(l,[["t",-i.x,-i.y],["r",o],["t",i.x,i.y]]);break;case"leftcenter":l=XO(l,[["t",-i.x,-i.y-s.height/2],["r",o],["t",i.x,i.y+s.height/2]]);break;default:l=XO(l,[["t",-s.width/2,-s.height/2],["r",o],["t",s.width/2,s.height/2]]);break}else l=XO(l,[["t",-i.x,-i.y-s.height/2],["r",o],["t",i.x,i.y+s.height/2]]);a.setMatrix(l)}if(i.background){var u=this.drawLabelBg(t,e,a),c=this.itemType+ek;u.set("classname",c),e["shapeMap"][c]=u,a.toFront()}return a},drawLabelBg:function(t,e,n){var r=this.options.labelCfg,i=Object(RE["mix"])({},r,t.labelCfg),o=this.getLabelBgStyleByPosition(n,i),a=e.addShape("rect",{name:"text-bg-shape",attrs:o,labelRelated:!0});return e["shapeMap"]["text-bg-shape"]=a,a},getLabelStyleByPosition:function(t,e,n){return{text:t.label}},getLabelBgStyleByPosition:function(t,e){return{}},getLabelStyle:function(t,e,n){var r=this.getLabelStyleByPosition(t,e,n),i="".concat(this.itemType,"Label"),o=jT[i]?jT[i].style:null;return Object(NE["__assign"])(Object(NE["__assign"])(Object(NE["__assign"])({},o),r),e.style)},getShapeStyle:function(t){return t.style},update:function(t,e,n){this.updateShapeStyle(t,e,n),this.updateLabel(t,e,n)},updateShapeStyle:function(t,e,n){var r,i=e.getContainer(),o=e.getKeyShape(),a=Object(RE["mix"])({},o.attr(),t.style),s=function(t){var e,n=a[t];if(Object(RE["isPlainObject"])(n)){var s=(null===(r=i["shapeMap"])||void 0===r?void 0:r[t])||i.find((function(e){return e.get("name")===t}));null===s||void 0===s||s.attr(n)}else o.attr((e={},e[t]=n,e))};for(var l in a)s(l)},updateLabel:function(t,e,n){var r,i,o=e.getContainer(),a=(this.mergeStyle||this.getOptions({},n)||{}).labelCfg,s=void 0===a?{}:a,l=this.itemType+ZO,u=o["shapeMap"][l]||o.find((function(t){return t.get("className")===l})),c=this.itemType+ek,h=o["shapeMap"][c]||o.find((function(t){return t.get("className")===c}));if(u&&void 0===t.label&&(o.removeChild(u),delete o["shapeMap"][l],h&&(o.removeChild(h),delete o["shapeMap"][c])),t.label||""===t.label)if(u){(!n||"bbox|label"===n||"edge"===this.itemType&&"style"!==n)&&(s=Object(RE["deepMix"])(s,t.labelCfg));var d=this.getLabelStyleByPosition(t,s,o),f=null===(r=t.labelCfg)||void 0===r?void 0:r.style,p=Object(NE["__assign"])(Object(NE["__assign"])({},d),f),g=p.rotate;if(delete p.rotate,isNaN(g)||""===g)1!==(null===(i=u.getMatrix())||void 0===i?void 0:i[4])&&u.resetMatrix(),u.attr(p);else{var m=[1,0,0,0,1,0,0,0,1];m=XO(m,[["t",-p.x,-p.y],["r",g],["t",p.x,p.y]]),p.matrix=m,u.attr(p)}if(h)if(p.background){var y=this.getLabelBgStyleByPosition(u,s);h.attr(y)}else o.removeChild(h);else p.background&&(h=this.drawLabelBg(t,o,u),h.set("classname",c),o["shapeMap"][c]=h,u.toFront())}else{var v=this.drawLabel(t,o);v.set("className",l),o["shapeMap"][l]=v}},afterUpdate:function(t,e){},setState:function(t,e,n){var r,i,o,a=n.get("keyShape");if(a&&!a.destroyed){var s=n.getType(),l=Object(RE["isBoolean"])(e)?t:"".concat(t,":").concat(e),u=this.getStateStyle(l,n),c=n.getStateStyle(l);if(c||u){var h=Object(RE["mix"])({},c||u),d=n.getContainer(),f={x:1,y:1,cx:1,cy:1,matrix:1};if("combo"===s&&(f.r=1,f.width=1,f.height=1),e){var p=function(t){var e,n=h[t];if(Object(RE["isPlainObject"])(n)&&!KO.includes(t)){var r=(null===(o=d["shapeMap"])||void 0===o?void 0:o[t])||d.find((function(e){return e.get("name")===t}));null===r||void 0===r||r.attr(n)}else a.attr((e={},e[t]=n,e))};for(var g in h)p(g)}else{var m=oA(n.getCurrentStatesStyle()),y=n.getModel(),v=Object(RE["mix"])({},y.style,oA(n.getOriginStyle())),b=a.get("name"),_=a.attr(),x={};Object.keys(_).forEach((function(t){if("img"!==t){var e=_[t];e&&"object"===YO(e)?x[t]=Object(RE["clone"])(e):x[t]=e}}));var w={},S=function(t){var e=h[t];if(Object(RE["isPlainObject"])(e)&&!KO.includes(t)){var n=d["shapeMap"][t]||d.find((function(e){return e.get("name")===t}));if(n){var r=oA(n.attr());Object(RE["each"])(e,(function(e,i){if(t===b&&x[i]&&!f[i]){delete x[i];var o=v[t][i]||tk[s][i];a.attr(i,o)}else if(r[i]||0===r[i]){delete r[i];var l=v[t][i]||tk[s][i];n.attr(i,l)}})),w[t]=r}}else if(x[t]&&!f[t]){delete x[t];var i=v[t]||(v[b]?v[b][t]:void 0)||tk[s][t];a.attr(t,i)}};for(var E in h)S(E);for(var g in b?w[b]=x:Object(RE["mix"])(w,x),m)if(!f[g]){var C=m[g];Object(RE["isPlainObject"])(C)&&!KO.includes(g)||(b?(Object(RE["mix"])(v[b],(i={},i[g]=C,i)),delete v[g]):Object(RE["mix"])(v,(r={},r[g]=C,r)),delete m[g])}var M={};Object(RE["deepMix"])(M,v,w,m);var T=!1,A=function(t){var e,n,r=M[t];if(Object(RE["isPlainObject"])(r)&&!KO.includes(t)){var i=d["shapeMap"][t]||d.find((function(e){return e.get("name")===t}));i&&(("text"===i.get("type")||i.get("labelRelated"))&&(delete r.x,delete r.y,delete r.matrix),t===b&&("combo"===s&&(delete r.r,delete r.width,delete r.height),T=!0),i.attr(r))}else if(!T){var o=r||tk[s][t];"combo"===s?b||a.attr((e={},e[t]=o,e)):a.attr((n={},n[t]=o,n))}};for(var O in M)A(O)}}}},getStateStyle:function(t,e){var n=e.getModel(),r=e.getType(),i=this.getOptions(n),o=i.stateStyles,a=i.style,s=void 0===a?{}:a,l=n.stateStyles?n.stateStyles[t]:o&&o[t];return"combo"===r?Object(RE["clone"])(l):Object(RE["mix"])({},s,l)},getControlPoints:function(t){return t.controlPoints},getAnchorPoints:function(t){var e,n,r=(null===t||void 0===t?void 0:t.anchorPoints)||(null===(e=this.getCustomConfig(t))||void 0===e?void 0:e.anchorPoints)||(null===(n=this.options)||void 0===n?void 0:n.anchorPoints);return r}},rk={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:jT.nodeLabel.offset,getSize:function(t){var e,n=(null===(e=this.mergeStyle)||void 0===e?void 0:e.size)||t.size||this.getOptions({}).size||jT.defaultNode.size;return Object(RE["isArray"])(n)&&1===n.length&&(n=[n[0],n[0]]),Object(RE["isArray"])(n)||(n=[n,n]),n},getLabelStyleByPosition:function(t,e){var n=e.maxLength,r=t.label;n&&(r=tA(r,n));var i=e.position||this.labelPosition;if("center"===i)return{x:0,y:0,text:r,textBaseline:"middle",textAlign:"center"};var o=e.offset;Object(RE["isNil"])(o)&&(o=this.offset);var a,s=this.getSize(t);switch(i){case"top":a={x:0,y:-s[1]/2-o,textBaseline:"bottom",textAlign:"center"};break;case"bottom":a={x:0,y:s[1]/2+o,textBaseline:"top",textAlign:"center"};break;case"left":a={x:-s[0]/2-o,y:0,textBaseline:"middle",textAlign:"right"};break;default:a={x:s[0]/2+o,y:0,textBaseline:"middle",textAlign:"left"};break}return a.text=r,a},getLabelBgStyleByPosition:function(t,e){var n;if(!t)return{};var r=null===(n=e.style)||void 0===n?void 0:n.background;if(!r)return{};var i=t.getBBox(),o=pA(r.padding),a=i.width+o[1]+o[3],s=i.height+o[0]+o[2];return Object(NE["__assign"])(Object(NE["__assign"])({x:i.minX-o[3],y:i.minY-o[0]},r),{width:a,height:s})},drawShape:function(t,e){var n=this.shapeType,r=this.getShapeStyle(t),i=e.addShape(n,{attrs:r,draggable:!0,name:"node-shape"});return e["shapeMap"]["node-shape"]=i,i},updateLinkPoints:function(t,e){var n,r=(this.mergeStyle||this.getOptions(t)).linkPoints,i=e["shapeMap"]["link-point-left"]||e.find((function(t){return"link-point-left"===t.get("className")})),o=e["shapeMap"]["link-point-right"]||e.find((function(t){return"link-point-right"===t.get("className")})),a=e["shapeMap"]["link-point-top"]||e.find((function(t){return"link-point-top"===t.get("className")})),s=e["shapeMap"]["link-point-bottom"]||e.find((function(t){return"link-point-bottom"===t.get("className")}));i&&(n=i.attr()),o&&!n&&(n=o.attr()),a&&!n&&(n=a.attr()),s&&!n&&(n=s.attr()),n||(n=r);var l=Object(RE["mix"])({},n,t.linkPoints),u=l.fill,c=l.stroke,h=l.lineWidth,d=l.size/2;d||(d=l.r);var f=t.linkPoints?t.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},p=f.left,g=f.right,m=f.top,y=f.bottom,v=this.getSize(t),b=v[0],_=v[1],x={r:d,fill:u,stroke:c,lineWidth:h};if(i)p||void 0===p?i.attr(Object(NE["__assign"])(Object(NE["__assign"])({},x),{x:-b/2,y:0})):(i.remove(),delete e["shapeMap"]["link-point-left"]);else if(p){var w="link-point-left";e["shapeMap"][w]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},x),{x:-b/2,y:0}),className:w,name:w,isAnchorPoint:!0})}if(o)g||void 0===g||(o.remove(),delete e["shapeMap"]["link-point-right"]),o.attr(Object(NE["__assign"])(Object(NE["__assign"])({},x),{x:b/2,y:0}));else if(g){var S="link-point-right";e["shapeMap"][S]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},x),{x:b/2,y:0}),className:S,name:S,isAnchorPoint:!0})}if(a)m||void 0===m||(a.remove(),delete e["shapeMap"]["link-point-top"]),a.attr(Object(NE["__assign"])(Object(NE["__assign"])({},x),{x:0,y:-_/2}));else if(m){var E="link-point-top";e["shapeMap"][E]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},x),{x:0,y:-_/2}),className:E,name:E,isAnchorPoint:!0})}if(s)y||void 0===y?s.attr(Object(NE["__assign"])(Object(NE["__assign"])({},x),{x:0,y:_/2})):(s.remove(),delete e["shapeMap"]["link-point-bottom"]);else if(y){var C="link-point-bottom";e["shapeMap"][C]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},x),{x:0,y:_/2}),className:C,name:C,isAnchorPoint:!0})}},updateShape:function(t,e,n,r,i){var o=e.get("keyShape");o.attr(Object(NE["__assign"])({},n)),this.updateLabel(t,e,i),r&&this.updateIcon(t,e)},updateIcon:function(t,e){var n=this,r=e.getContainer(),i=(this.mergeStyle||this.getOptions(t)).icon,o=t.icon?t.icon:{show:void 0,text:void 0},a=o.show,s=o.text,l=r["shapeMap"]["".concat(this.type,"-icon")]||r.find((function(t){return t.get("name")==="".concat(n.type,"-icon")}));if(l)if(a||void 0===a){var u=Object(RE["mix"])({},l.attr(),i),c=u.width,h=void 0===c?20:c,d=u.height,f=void 0===d?20:d;("iconfont"===u.fontFamily||u.hasOwnProperty("text"))&&(h=0,f=0),l.attr(Object(NE["__assign"])(Object(NE["__assign"])({},u),{x:-h/2,y:-f/2}))}else l.remove(),delete r["shapeMap"]["".concat(this.type,"-icon")];else if(a){var p="".concat(this.type,"-icon");if(s)r["shapeMap"][p]=r.addShape("text",{attrs:Object(NE["__assign"])({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:p,name:p});else{h=i.width,f=i.height;r["shapeMap"][p]=r.addShape("image",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},i),{x:-h/2,y:-f/2}),className:p,name:p})}var g=r["shapeMap"]["node-label"]||r.find((function(t){return"node-label"===t.get("name")}));g&&g.toFront()}}},ik=Object(NE["__assign"])(Object(NE["__assign"])({},nk),rk);FA.registerNode("single-node",ik);var ok="edge-shape";function ak(t){var e=t;return"start"===t?e="end":"end"===t&&(e="start"),e}var sk={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:jT.defaultEdge.size,style:{x:0,y:0,stroke:jT.defaultEdge.style.stroke,lineAppendWidth:jT.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:jT.edgeLabel.style.fill,fontSize:jT.edgeLabel.style.fontSize,fontFamily:jT.windowFontFamily}},stateStyles:Object(NE["__assign"])({},jT.edgeStateStyles)},getPath:function(t){var e=[];return Object(RE["each"])(t,(function(t,n){0===n?e.push(["M",t.x,t.y]):e.push(["L",t.x,t.y])})),e},getShapeStyle:function(t){var e=this.options.style,n={stroke:t.color},r=Object(RE["mix"])({},e,n,t.style),i=t.size||jT.defaultEdge.size;t=this.getPathPoints(t);var o=t.startPoint,a=t.endPoint,s=this.getControlPoints(t),l=[o];s&&(l=l.concat(s)),l.push(a);var u=this.getPath(l),c=Object(RE["mix"])({},jT.defaultEdge.style,{stroke:jT.defaultEdge.color,lineWidth:i,path:u},r);return c},updateShapeStyle:function(t,e,n){var r,i=e.getContainer(),o=(null===(r=e.getKeyShape)||void 0===r?void 0:r.call(e))||i["shapeMap"]["edge-shape"],a=t.size;t=this.getPathPoints(t);var s=t.startPoint,l=t.endPoint,u=this.getControlPoints(t),c=[s];u&&(c=c.concat(u)),c.push(l);var h=o.attr(),d=t.style||{};void 0===d.stroke&&(d.stroke=t.color);var f=t.sourceNode,p=t.targetNode,g={radius:d.radius};u||(g={source:f,target:p,offset:d.offset,radius:d.radius});var m=this.getPath(c,g),y={};"move"===n?y={path:m}:(h.endArrow&&!1===d.endArrow&&(t.style.endArrow={path:""}),h.startArrow&&!1===d.startArrow&&(t.style.startArrow={path:""}),y=Object(NE["__assign"])({},t.style),void 0===y.lineWidth&&(y.lineWdith=(Object(RE["isNumber"])(a)?a:null===a||void 0===a?void 0:a[0])||h.lineWidth),void 0===y.path&&(y.path=m),void 0===y.stroke&&(y.stroke=h.stroke||t.color)),o&&o.attr(y)},getLabelStyleByPosition:function(t,e,n){var r,i=e.position||this.labelPosition,o={},a=null===n||void 0===n?void 0:n["shapeMap"][ok];r="start"===i?0:"end"===i?1:.5;var s,l=e.refX||this.refX,u=e.refY||this.refY;if(t.startPoint.x===t.endPoint.x&&t.startPoint.y===t.endPoint.y)return o.x=t.startPoint.x+l,o.y=t.startPoint.y+u,o.text=t.label,o;s=Object(RE["isNil"])(e.autoRotate)?this.labelAutoRotate:e.autoRotate;var c=YT(a,r,l,u,s);return o.x=c.x,o.y=c.y,o.rotate=c.rotate,o.textAlign=this._getTextAlign(i,c.angle),o.text=t.label,o},getLabelBgStyleByPosition:function(t,e){if(!t)return{};var n=t.getBBox(),r=e.style&&e.style.background;if(!r)return{};var i,o=r.padding,a=n.width+o[1]+o[3],s=n.height+o[0]+o[2],l=Object(NE["__assign"])(Object(NE["__assign"])({},r),{width:a,height:s,x:n.minX-o[3],y:n.minY-o[0],matrix:[1,0,0,0,1,0,0,0,1]});return i=Object(RE["isNil"])(e.autoRotate)?this.labelAutoRotate:e.autoRotate,i&&(l.matrix=t.attr("matrix")||[1,0,0,0,1,0,0,0,1]),l},_getTextAlign:function(t,e){var n="center";return e?(e%=2*Math.PI,"center"!==t&&(n=e>=0&&e<=Math.PI/2||e>=1.5*Math.PI&&e<2*Math.PI?t:ak(t)),n):t},getControlPoints:function(t){return t.controlPoints},getPathPoints:function(t){return t},drawShape:function(t,e){var n=this.getShapeStyle(t),r=e.addShape("path",{className:ok,name:ok,attrs:n});return e["shapeMap"][ok]=r,r},drawLabel:function(t,e){var n=this.options.labelCfg,r=Object(RE["deepMix"])({},n,t.labelCfg),i=this.getLabelStyle(t,r,e),o=i.rotate;delete i.rotate;var a=e.addShape("text",{attrs:i,name:"text-shape",labelRelated:!0,draggable:!0});if(e["shapeMap"]["text-shape"]=a,isNaN(o)||""===o||a.rotateAtStart(o),i.background){var s=this.drawLabelBg(t,e,a,i,o),l=this.itemType+ek;s.set("classname",l),e["shapeMap"][l]=s,a.toFront()}return a},drawLabelBg:function(t,e,n,r,i){var o=this.options.labelCfg,a=Object(RE["deepMix"])({},o,t.labelCfg),s=this.getLabelBgStyleByPosition(n,a),l=e.addShape("rect",{name:"text-bg-shape",attrs:s,labelRelated:!0});return e["shapeMap"]["text-bg-shape"]=l,l}},lk=Object(NE["__assign"])(Object(NE["__assign"])({},nk),sk);FA.registerEdge("single-edge",lk),FA.registerEdge("line",{getControlPoints:function(){}},"single-edge"),FA.registerEdge("spline",{getPath:function(t){var e=yO(t);return e}},"single-edge"),FA.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(t){var e,n,r=t.startPoint,i=t.endPoint,o={x:(r.x+i.x)/2,y:(r.y+i.y)/2};if(void 0!==t.controlPoints){if(n=t.controlPoints[0],e=ZM(r,n,i),r.x<=i.x&&r.y>i.y?this.clockwise=e.x>n.x?0:1:r.x<=i.x&&r.y<i.y?this.clockwise=e.x>n.x?1:0:r.x>i.x&&r.y<=i.y?this.clockwise=e.y<n.y?0:1:this.clockwise=e.y<n.y?1:0,(n.x-r.x)/(n.y-r.y)===(i.x-r.x)/(i.y-r.y))return[]}else{void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),Object(RE["isArray"])(t.curveOffset)&&(t.curveOffset=t.curveOffset[0]),t.curveOffset<0?this.clockwise=0:this.clockwise=1;var a={x:i.x-r.x,y:i.y-r.y},s=Math.atan2(a.y,a.x);n={x:t.curveOffset*Math.cos(-Math.PI/2+s)+o.x,y:t.curveOffset*Math.sin(-Math.PI/2+s)+o.y},e=ZM(r,n,i)}var l=KM(r,e),u=[{x:l,y:l}];return u},getPath:function(t){var e=[];return e.push(["M",t[0].x,t[0].y]),2===t.length?e.push(["L",t[1].x,t[1].y]):e.push(["A",t[1].x,t[1].y,0,0,this.clockwise,t[2].x,t[2].y]),e}},"single-edge"),FA.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(t){var e=t.controlPoints;if(!e||!e.length){var n=t.startPoint,r=t.endPoint;void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),void 0===t.curvePosition&&(t.curvePosition=this.curvePosition),Object(RE["isArray"])(t.curveOffset)&&(t.curveOffset=t.curveOffset[0]),Object(RE["isArray"])(t.curvePosition)&&(t.curvePosition=t.curveOffset[0]);var i=vO(n,r,t.curvePosition,t.curveOffset);e=[i]}return e},getPath:function(t){var e=[];return e.push(["M",t[0].x,t[0].y]),e.push(["Q",t[1].x,t[1].y,t[2].x,t[2].y]),e}},"single-edge"),FA.registerEdge("cubic",{curvePosition:[.5,.5],curveOffset:[-20,20],getControlPoints:function(t){var e=t.controlPoints;if(void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),void 0===t.curvePosition&&(t.curvePosition=this.curvePosition),Object(RE["isNumber"])(t.curveOffset)&&(t.curveOffset=[t.curveOffset,-t.curveOffset]),Object(RE["isNumber"])(t.curvePosition)&&(t.curvePosition=[t.curvePosition,1-t.curvePosition]),!e||!e.length||e.length<2){var n=t.startPoint,r=t.endPoint,i=vO(n,r,t.curvePosition[0],t.curveOffset[0]),o=vO(n,r,t.curvePosition[1],t.curveOffset[1]);e=[i,o]}return e},getPath:function(t){var e=[];return e.push(["M",t[0].x,t[0].y]),e.push(["C",t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y]),e}},"single-edge"),FA.registerEdge("cubic-vertical",{curvePosition:[.5,.5],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(t){var e=t.startPoint,n=t.endPoint;void 0===t.curvePosition&&(t.curvePosition=this.curvePosition),void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),void 0===t.minCurveOffset&&(t.minCurveOffset=this.minCurveOffset),Object(RE["isNumber"])(t.curveOffset)&&(t.curveOffset=[t.curveOffset,-t.curveOffset]),Object(RE["isNumber"])(t.minCurveOffset)&&(t.minCurveOffset=[t.minCurveOffset,-t.minCurveOffset]),Object(RE["isNumber"])(t.curvePosition)&&(t.curvePosition=[t.curvePosition,1-t.curvePosition]);var r=n.y-e.y,i=[0,0];t.curveOffset?i=t.curveOffset:Math.abs(r)<Math.abs(t.minCurveOffset[0])&&(i=t.minCurveOffset);var o={x:e.x,y:e.y+r*this.curvePosition[0]+i[0]},a={x:n.x,y:n.y-r*this.curvePosition[1]+i[1]};return[o,a]}},"cubic"),FA.registerEdge("cubic-horizontal",{curvePosition:[.5,.5],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(t){var e=t.startPoint,n=t.endPoint;void 0===t.curvePosition&&(t.curvePosition=this.curvePosition),void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),void 0===t.minCurveOffset&&(t.minCurveOffset=this.minCurveOffset),Object(RE["isNumber"])(t.curveOffset)&&(t.curveOffset=[t.curveOffset,-t.curveOffset]),Object(RE["isNumber"])(t.minCurveOffset)&&(t.minCurveOffset=[t.minCurveOffset,-t.minCurveOffset]),Object(RE["isNumber"])(t.curvePosition)&&(t.curvePosition=[t.curvePosition,1-t.curvePosition]);var r=n.x-e.x,i=[0,0];t.curveOffset?i=t.curveOffset:Math.abs(r)<Math.abs(t.minCurveOffset[0])&&(i=t.minCurveOffset);var o={x:e.x+r*this.curvePosition[0]+i[0],y:e.y},a={x:n.x-r*this.curvePosition[1]+i[1],y:n.y},s=[o,a];return s}},"cubic"),FA.registerEdge("loop",{getPathPoints:function(t){return WT(t)},getControlPoints:function(t){return t.controlPoints},afterDraw:function(t){t.controlPoints=void 0},afterUpdate:function(t){t.controlPoints=void 0}},"cubic");var uk={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:jT.comboLabel.refX,refY:jT.comboLabel.refY,options:{style:{stroke:jT.defaultCombo.style.stroke,fill:jT.defaultCombo.style.fill,lineWidth:jT.defaultCombo.style.lineWidth},labelCfg:{style:{fill:jT.comboLabel.style.fill,fontSize:jT.comboLabel.style.fontSize,fontFamily:jT.windowFontFamily}},stateStyles:Object(NE["__assign"])({},jT.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},getSize:function(t){var e=Object(RE["clone"])(t.size||this.options.size||jT.defaultCombo.size);return Object(RE["isArray"])(e)&&1===e.length&&(e=[e[0],e[0]]),Object(RE["isArray"])(e)||(e=[e,e]),e},getLabelStyleByPosition:function(t,e){var n=e.position||this.labelPosition,r=t.style,i=t.padding||this.options.padding;Object(RE["isArray"])(i)&&(i=Math.max.apply(Math,i));var o=e.refX,a=e.refY;Object(RE["isNil"])(o)&&(o=this.refX),Object(RE["isNil"])(a)&&(a=this.refY);var s,l=this.getSize(t),u=Math.max(r.r,l[0]/2)||l[0]/2,c=u+i;switch(n){case"top":s={x:0,y:-c-a,textBaseline:"bottom",textAlign:"center"};break;case"bottom":s={x:0,y:c+a,textBaseline:"bottom",textAlign:"center"};break;case"left":s={x:-c+o,y:0,textAlign:"left"};break;case"center":s={x:0,y:0,text:t.label,textAlign:"center"};break;default:s={x:c+o,y:0,textAlign:"right"};break}return s.text=t.label,s},drawShape:function(t,e){var n=this.shapeType,r=this.getShapeStyle(t),i=e.addShape(n,{attrs:r,draggable:!0,name:"combo-shape"});return i},updateCollapsedIcon:function(t,e,n){var r=t.collapsed,i=t.collapsedSubstituteIcon,o=void 0===i?{}:i,a=Object.assign({},this.options.collapsedSubstituteIcon,o),s=a.show,l=a.img,u=a.width,c=a.height,h=e.getContainer(),d=h.find((function(t){return"combo-collapsed-substitute-icon"===t.get("name")})),f=d&&!d.destroyed,p=e.get("keyShape");if(r&&s){if(f)d.show();else{var g={width:u||2*n.r||n.width,height:c||2*n.r||n.height};d=h.addShape("image",{attrs:Object(NE["__assign"])({img:l,x:-g.width/2,y:-g.height/2},g),name:"combo-collapsed-substitute-icon",draggable:!0})}p.hide()}else f&&(d.hide(),p.show())},updateShape:function(t,e,n){var r=this,i=e.get("keyShape"),o=e.get("animate"),a=o&&(void 0===t.animate?this.options.animate:t.animate);a&&i.animate?(t.collapsed||this.updateCollapsedIcon(t,e,n),i.animate(n,{duration:200,easing:"easeLinear",callback:function(){t.collapsed&&r.updateCollapsedIcon(t,e,n)}})):(i.attr(Object(NE["__assign"])({},n)),this.updateCollapsedIcon(t,e,n)),this.updateLabel(t,e)}},ck=Object(NE["__assign"])(Object(NE["__assign"])({},nk),uk);FA.registerCombo("single-combo",ck),FA.registerCombo("circle",{options:{size:[jT.defaultCombo.size[0],jT.defaultCombo.size[0]],padding:Math.max.apply(Math,jT.defaultCombo.padding),animate:!0,style:{stroke:jT.defaultCombo.style.stroke,fill:jT.defaultCombo.style.fill,lineWidth:jT.defaultCombo.style.lineWidth},labelCfg:{style:{fill:jT.comboLabel.style.fill,fontSize:jT.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:Object(NE["__assign"])({},jT.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"circle",labelPosition:"top",drawShape:function(t,e){var n=this.getShapeStyle(t);delete n.height,delete n.width;var r=e.addShape("circle",{attrs:n,className:"circle-combo",name:"circle-combo",draggable:!0});return r},getShapeStyle:function(t){var e=this.options.style,n=t.padding||this.options.padding;Object(RE["isArray"])(n)&&(n=Math.max.apply(Math,n));var r,i={stroke:t.color},o=Object(RE["mix"])({},e,i,t.style),a=t.collapsed&&t.fixCollapseSize?t.fixCollapseSize:t.fixSize;if(a)r=Object(RE["isNumber"])(a)?a/2:a[0]/2;else{var s=this.getSize(t);r=!Object(RE["isNumber"])(o.r)||isNaN(o.r)?s[0]/2||jT.defaultCombo.style.r:Math.max(o.r,s[0]/2)||s[0]/2}o.r=r+n;var l=Object(NE["__assign"])({x:0,y:0},o);return t.style?t.style.r=r:t.style={r:r},l},update:function(t,e){var n=this.getSize(t),r=t.padding||this.options.padding;Object(RE["isArray"])(r)&&(r=Math.max.apply(Math,r));var i,o=Object(RE["clone"])(t.style),a=t.collapsed&&t.fixCollapseSize?t.fixCollapseSize:t.fixSize;i=a?Object(RE["isNumber"])(a)?a/2:a[0]/2:Math.max(o.r,n[0]/2)||n[0]/2,o.r=i+r;var s=e.get("sizeCache");s&&(s.r=o.r);var l={stroke:t.color},u=e.get("keyShape"),c=Object(RE["mix"])({},u.attr(),l,o);t.style?t.style.r=i:t.style={r:i},this.updateShape(t,e,c,!0)}},"single-combo"),FA.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:jT.defaultCombo.style.stroke,fill:jT.defaultCombo.style.fill,lineWidth:jT.defaultCombo.style.lineWidth},labelCfg:{style:{fill:jT.comboLabel.style.fill,fontSize:jT.comboLabel.style.fontSize,fontFamily:jT.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:Object(NE["__assign"])({},jT.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"rect",labelPosition:"top",drawShape:function(t,e){var n=this.getShapeStyle(t),r=e.addShape("rect",{attrs:n,className:"rect-combo",name:"rect-combo",draggable:!0});return r},getLabelStyleByPosition:function(t,e){var n=e.position||this.labelPosition,r=t.style,i=t.padding||this.options.padding;Object(RE["isNumber"])(i)&&(i=[i,i,i,i]);var o=e.refX,a=e.refY;Object(RE["isNil"])(o)&&(o=this.refX),Object(RE["isNil"])(a)&&(a=this.refY);var s,l=-r.width/2-i[3],u=r.width/2+i[1],c=-r.height/2-i[0],h=r.height/2+i[2];switch(n){case"top":s={x:l+o,y:c+a,textBaseline:"top",textAlign:"left"};break;case"bottom":s={x:0,y:h+a,textBaseline:"top",textAlign:"center"};break;case"left":s={x:l+a,y:0,textAlign:"left"};break;case"center":s={x:0,y:0,text:t.label,textAlign:"center"};break;case"top-center":s={x:0,y:c+a,textBaseline:"top",textAlign:"center"};break;default:s={x:u+o,y:0,textAlign:"right"};break}return s.text=t.label,s},getShapeStyle:function(t){var e=this.options.style,n=t.padding||this.options.padding;Object(RE["isNumber"])(n)&&(n=[n,n,n,n]);var r,i,o={stroke:t.color},a=Object(RE["mix"])({},e,o,t.style),s=this.getSize(t),l=t.collapsed&&t.fixCollapseSize?t.fixCollapseSize:t.fixSize;l?Object(RE["isNumber"])(l)?(r=l,i=l):(r=l[0],i=l[1]):(r=!Object(RE["isNumber"])(a.width)||isNaN(a.width)?s[0]||jT.defaultCombo.style.width:Math.max(a.width,s[0])||s[0],i=!Object(RE["isNumber"])(a.height)||isNaN(a.height)?s[1]||jT.defaultCombo.style.height:Math.max(a.height,s[1])||s[1]);var u=-r/2-n[3],c=-i/2-n[0];a.width=r+n[1]+n[3],a.height=i+n[0]+n[2];var h=Object(NE["__assign"])({x:u,y:c},a);return t.style?(t.style.width=r,t.style.height=i):t.style={width:r,height:i},h},update:function(t,e){var n=this.getSize(t),r=t.padding||this.options.padding;Object(RE["isNumber"])(r)&&(r=[r,r,r,r]);var i,o,a=Object(RE["clone"])(t.style),s=t.collapsed&&t.fixCollapseSize?t.fixCollapseSize:t.fixSize;s?Object(RE["isNumber"])(s)?(i=s,o=s):(i=s[0],o=s[1]):(i=Math.max(a.width,n[0])||n[0],o=Math.max(a.height,n[1])||n[1]),a.width=i+r[1]+r[3],a.height=o+r[0]+r[2];var l=e.get("sizeCache");l&&(l.width=a.width,l.height=a.height),a.x=-i/2-r[3],a.y=-o/2-r[0];var u={stroke:t.color},c=e.get("keyShape"),h=Object(RE["mix"])({},c.attr(),u,a);t.style?(t.style.width=i,t.style.height=o):t.style={width:i,height:o},this.updateShape(t,e,h,!1)}},"single-combo"),FA.registerNode("simple-circle",{options:{size:jT.defaultNode.size,style:{x:0,y:0,stroke:jT.defaultNode.style.stroke,fill:jT.defaultNode.style.fill,lineWidth:jT.defaultNode.style.lineWidth},labelCfg:{style:{fill:jT.nodeLabel.style.fill,fontSize:jT.nodeLabel.style.fontSize,fontFamily:jT.windowFontFamily}},stateStyles:Object(NE["__assign"])({},jT.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",shapeMap:{},drawShape:function(t,e){var n=this.getShapeStyle(t),r="".concat(this.type,"-keyShape"),i=e.addShape("circle",{attrs:n,className:"".concat(this.type,"-keyShape"),name:r,draggable:!0});return e["shapeMap"][r]=i,i},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},r=Object(RE["deepMix"])({},e,n),i=this.getSize(t),o=i[0]/2,a=Object(NE["__assign"])({x:0,y:0,r:o},r);return a},update:function(t,e,n){var r=this.getSize(t),i={stroke:t.color,r:r[0]/2},o=e.get("keyShape"),a=Object(RE["deepMix"])({},o.attr(),i,t.style);this.updateShape(t,e,a,!0,n)}},"single-node"),FA.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:jT.defaultNode.style.stroke,fill:jT.defaultNode.style.fill,lineWidth:jT.defaultNode.style.lineWidth},labelCfg:{style:{fill:jT.nodeLabel.style.fill,fontSize:jT.nodeLabel.style.fontSize,fontFamily:jT.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:Object(NE["__assign"])({},jT.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(t,e){var n=this.getShapeStyle(t),r=e.addShape("rect",{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return r},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},r=Object(RE["mix"])({},e,n),i=this.getSize(t),o=r.width||i[0],a=r.height||i[1],s=Object(NE["__assign"])({x:-o/2,y:-a/2,width:o,height:a},r);return s},update:function(t,e,n){e.getContainer();var r=(this.mergeStyle||this.getOptions(t)).style,i=this.getSize(t),o=e.get("keyShape");t.size||(i[0]=o.attr("width")||r.width,i[1]=o.attr("height")||r.height);var a={stroke:t.color,x:-i[0]/2,y:-i[1]/2,width:i[0],height:i[1]},s=Object(RE["mix"])({},r,o.attr(),a);s=Object(RE["mix"])(s,t.style),this.updateShape(t,e,s,!1,n)}},"single-node"),FA.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,labelCfg:{style:{fontFamily:jT.windowFontFamily}},clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(t,e){var n=this.shapeType,r=this.getShapeStyle(t);delete r.fill;var i=e.addShape(n,{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return this.drawClip(t,i),i},drawClip:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).clipCfg;if(n.show){var r=n.type,i=n.x,o=n.y,a=n.style;if("circle"===r){var s=n.r;e.setClip({type:"circle",attrs:Object(NE["__assign"])({r:s,x:i,y:o},a)})}else if("rect"===r){var l=n.width,u=n.height,c=i-l/2,h=o-u/2;e.setClip({type:"rect",attrs:Object(NE["__assign"])({x:c,y:h,width:l,height:u},a)})}else if("ellipse"===r){var d=n.rx,f=n.ry;e.setClip({type:"ellipse",attrs:Object(NE["__assign"])({x:i,y:o,rx:d,ry:f},a)})}else if("polygon"===r){var p=n.points;e.setClip({type:"polygon",attrs:Object(NE["__assign"])({points:p},a)})}else if("path"===r){var g=n.path;e.setClip({type:"path",attrs:Object(NE["__assign"])({path:g},a)})}}},getShapeStyle:function(t){var e=this.mergeStyle||this.getOptions(t),n=e.style,r=e.img,i=this.getSize(t),o=i[0],a=i[1];n&&(o=n.width||i[0],a=n.height||i[1]);var s=Object(NE["__assign"])({x:-o/2,y:-a/2,width:o,height:a,img:r},n);return s},updateShapeStyle:function(t,e){var n=e.getContainer(),r="".concat(this.itemType,"-shape"),i=n["shapeMap"][r]||n.find((function(t){return t.get("className")===r}))||e.getKeyShape(),o=this.getShapeStyle(t);i&&!i.destroyed&&i.attr(o)}},"single-node");var hk,dk,fk,pk,gk={triangle:function(t,e,n){void 0===t&&(t=10),void 0===e&&(e=15),void 0===n&&(n=0);var r=2*n,i="M ".concat(r,",0 L ").concat(r+e,",-").concat(t/2," L ").concat(r+e,",").concat(t/2," Z");return i},vee:function(t,e,n){void 0===t&&(t=15),void 0===e&&(e=20),void 0===n&&(n=0);var r=2*n,i="M ".concat(r,",0 L ").concat(r+e,",-").concat(t/2,"\n        L ").concat(r+2*e/3,",0 L ").concat(r+e,",").concat(t/2," Z");return i},circle:function(t,e){void 0===t&&(t=5),void 0===e&&(e=0);var n=2*e,r="M ".concat(n,", 0\n            a ").concat(t,",").concat(t," 0 1,0 ").concat(2*t,",0\n            a ").concat(t,",").concat(t," 0 1,0 ").concat(2*-t,",0");return r},rect:function(t,e,n){void 0===t&&(t=10),void 0===e&&(e=10),void 0===n&&(n=0);var r=2*n,i="M ".concat(r,",").concat(-t/2," \n        L ").concat(r+e,",").concat(-t/2," \n        L ").concat(r+e,",").concat(t/2," \n        L ").concat(r,",").concat(t/2," Z");return i},diamond:function(t,e,n){void 0===t&&(t=15),void 0===e&&(e=15),void 0===n&&(n=0);var r=2*n,i="M ".concat(r,",0 \n        L ").concat(r+e/2,",").concat(-t/2," \n        L ").concat(r+e,",0 \n        L ").concat(r+e/2,",").concat(t/2," Z");return i},triangleRect:function(t,e,n,r,i,o){void 0===t&&(t=15),void 0===e&&(e=15),void 0===n&&(n=15),void 0===r&&(r=3),void 0===i&&(i=5),void 0===o&&(o=0);var a=2*o,s=a+e+i,l="M ".concat(a,",0 L ").concat(a+e,",-").concat(t/2," L ").concat(a+e,",").concat(t/2," Z\n            M ").concat(s,", -").concat(n/2,"\n            L ").concat(s+r," -").concat(n/2,"\n            L ").concat(s+r," ").concat(n/2,"\n            L ").concat(s," ").concat(n/2,"\n            Z");return l}},mk={collapse:function(t,e,n){return[["M",t-n,e],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0],["M",t-n+4,e],["L",t+n-4,e]]},expand:function(t,e,n){return[["M",t-n,e],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0],["M",t-n+4,e],["L",t-n+2*n-4,e],["M",t-n+n,e-n+4],["L",t,e+n-4]]},upTriangle:function(t,e,n){var r=n*Math.cos(Math.PI/6),i=n*Math.sin(Math.PI/6);return[["M",t-r,e+i],["L",t+r,e+i],["L",t,e-n],["Z"]]},downTriangle:function(t,e,n){var r=n*Math.cos(Math.PI/6),i=n*Math.sin(Math.PI/6);return[["M",t-r,e-i],["L",t+r,e-i],["L",t,e+n],["Z"]]}},yk=FA,vk=["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"],bk=function(t){return"force"===t||"g6force"===t||"gForce"===t||"force2"===t},_k=UE["a"].transform,xk=Object(NE["__assign"])(Object(NE["__assign"])(Object(NE["__assign"])(Object(NE["__assign"])(Object(NE["__assign"])(Object(NE["__assign"])(Object(NE["__assign"])({},a),o),s),i),l),u),{transform:_k,mat3:UE["b"]}),wk=xk,Sk=function(){function t(t){this.graph=t,this.layoutCfg=t.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}return t.prototype.initLayout=function(){},t.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},t.prototype.getLayoutCfgType=function(t){var e=t.type;if(e)return e;var n=t.pipes;return Array.isArray(n)?n.map((function(t){return(null===t||void 0===t?void 0:t.type)||""})):null},t.prototype.isLayoutTypeSame=function(t){var e=this.getLayoutCfgType(t),n=Array.isArray(this.layoutType),r=Array.isArray(e);return n&&r?this.layoutType.every((function(t,n){return t===e[n]})):!Array.isArray(e)&&!Array.isArray(this.layoutType)&&(null===t||void 0===t?void 0:t.type)===this.layoutType},t.prototype.refreshLayout=function(){var t=this,e=t.graph,n=t.layoutType,r=t.layoutCfg,i=void 0===r?{}:r;if(e){var o=i.animate,a=void 0===o&&("force"===n||"force2"===n),s=bk(n)&&(o||a);e.get("animate")&&!s?e.positionsAnimate("comboCombined"===n):e.refreshPositions("comboCombined"===n)}},t.prototype.changeLayout=function(t){var e=t.disableTriggerLayout,n=Object(NE["__rest"])(t,["disableTriggerLayout"]);this.layoutCfg=n,this.layoutType=n.type||this.layoutType,e||this.layout()},t.prototype.changeData=function(t){this.layout(t)},t.prototype.destoryLayoutMethods=function(){var t=this.layoutMethods,e=[];return null===t||void 0===t||t.forEach((function(t){var n,r=null===(n=t.getType)||void 0===n?void 0:n.call(t);r&&e.push(r),t.destroy()})),this.layoutMethods=[],e},t.prototype.destroyLayout=function(){this.destoryLayoutMethods();var t=this.graph;t&&!t.get("destroyed")&&t.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},t.prototype.setDataFromGraph=function(){for(var t,e=[],n=[],r=[],i=[],o=[],a=[],s=[],l=this.graph.getNodes(),u=this.graph.getEdges(),c=this.graph.getCombos(),h=l.length,d=0;d<h;d++){var f=l[d];if(f&&!f.destroyed){var p=f.getModel();f.isVisible()?e.push(p):n.push(p)}}var g=u.length;for(d=0;d<g;d++){var m=u[d];if(m&&!m.destroyed){p=m.getModel();m.isVisible()?p.isComboEdge?o.push(p):r.push(p):i.push(p)}}var y=c.length;for(d=0;d<y;d++){var v=c[d];if(!v.destroyed){p=v.getModel();v.isVisible()?a.push(p):s.push(p)}}return{nodes:e,hiddenNodes:n,edges:r,hiddenEdges:i,combos:a,hiddenCombos:s,comboEdges:o,vedges:null===(t=this.graph.get("vedges"))||void 0===t?void 0:t.map((function(t){return t.getModel()}))}},t.prototype.relayout=function(t){var e=this,n=this,r=n.graph,i=n.layoutMethods,o=n.layoutCfg;if(r&&!r.get("destroyed")){var a=Promise.resolve();if(t){this.data=this.setDataFromGraph();var s=this.data.nodes;if(!s)return!1;a=this.initPositions(o.center,s)}r.emit("beforelayout"),null===i||void 0===i||i.forEach((function(t,n){var r=o[n]||o;a=a.then((function(){var t,a=e.execLayoutMethod(r,n);return n===i.length-1&&(null===(t=o.onAllLayoutEnd)||void 0===t||t.call(o)),a}))}))}},t.prototype.filterLayoutData=function(t,e){var n,r,i=t.nodes,o=t.edges,a=Object(NE["__rest"])(t,["nodes","edges"]);if(!i)return t;n=Object(RE["isFunction"])(null===e||void 0===e?void 0:e.nodesFilter)?e.nodesFilter:function(){return!0};var s=i.filter(n);if(Object(RE["isFunction"])(null===e||void 0===e?void 0:e.edgesFilter))r=e.edgesFilter;else{var l=s.reduce((function(t,e){return t[e.id]=!0,t}),{});r=function(t){return l[t.source]&&l[t.target]}}return Object(NE["__assign"])({nodes:s,edges:o.filter(r)},a)},t.prototype.getLayoutBBox=function(t){var e=this.graph,n=Object(RE["groupBy"])(e.getNodes(),(function(t){return t.getModel().layoutOrder})),r=Object.values(n).map((function(t){var e=vA(t);return e.size=[e.width,e.height],e})),i=Object.values(Object(RE["groupBy"])(t,"layoutOrder"));return{groupNodes:i,layoutNodes:r}},t.prototype.layoutAnimate=function(){},t.prototype.moveToZero=function(){var t=this.graph,e=t.get("data"),n=e.nodes;if(void 0!==n[0].x&&null!==n[0].x&&!yA(n[0].x)){for(var r=[0,0],i=n.length,o=0;o<i;o++){var a=n[o];r[0]+=a.x,r[1]+=a.y}r[0]/=n.length,r[1]/=n.length;for(o=0;o<i;o++){a=n[o];a.x-=r[0],a.y-=r[1]}}},t.prototype.initPositions=function(t,e){var n;return Object(NE["__awaiter"])(this,void 0,void 0,(function(){var r,i,o;return Object(NE["__generator"])(this,(function(a){return r=this.graph,(null===e||void 0===e?void 0:e.length)?(i=e.filter((function(t){return yA(t.x)||yA(t.y)})),o=i?i.length:0,o?[2,null===(n=this.initWithPreset)||void 0===n?void 0:n.call(this,(function(){}),(function(){var e=.85*r.get("width"),n=.85*r.get("height"),a=Math.ceil(Math.sqrt(o)*(e/n)),s=Math.ceil(o/a),l=e/(a-1),u=n/(s-1);isFinite(l)&&l||(l=0),isFinite(u)&&l||(u=0);for(var c=t[0]-e/2,h=t[1]-n/2,d=0;d<o;d++){var f=i[d];yA(+f.x)&&(!1,f.x=d%a*l+c),yA(+f.y)&&(!1,f.y=Math.floor(d/a)*u+h)}}))]:[2]):[2,Promise.resolve()]}))}))},t.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},t}(),Ek=Sk,Ck=function(){function t(t){this.graph=t,this.destroyed=!1,this.initEvents()}return t}(),Mk=Ck,Tk=yk.registerNode,Ak=yk.registerEdge,Ok=yk.registerCombo,kk=BE.registerBehavior,Ik=jT,Pk=(jT.version,yk.registerNode,yk.registerEdge,yk.registerCombo,BE.registerBehavior,n("1683")),Lk=n("53c8"),Nk=n("bfb1");function Rk(t,e,n){if(t){if("function"===typeof t.addEventListener)return t.addEventListener(e,n,!1),{remove:function(){t.removeEventListener(e,n,!1)}};if("function"===typeof t.attachEvent)return t.attachEvent("on"+e,n),{remove:function(){t.detachEvent("on"+e,n)}}}}function Dk(){hk=document.createElement("table"),dk=document.createElement("tr"),fk=/^\s*<(\w+|!)[^>]*>/,pk={tr:document.createElement("tbody"),tbody:hk,thead:hk,tfoot:hk,td:dk,th:dk,"*":document.createElement("div")}}function Fk(t){hk||Dk();var e=fk.test(t)&&RegExp.$1;e&&e in pk||(e="*");var n=pk[e];t="string"===typeof t?t.replace(/(^\s*)|(\s*$)/g,""):t,n.innerHTML=""+t;var r=n.childNodes[0];return r&&n.contains(r)&&n.removeChild(r),r}function jk(t,e){if(t)for(var n in e)e.hasOwnProperty(n)&&(t.style[n]=e[n]);return t}var Bk=n("6929"),zk=n.n(Bk),Uk=n("94c7"),Gk=n.n(Uk),qk=2,Vk=.16,Hk=.05,Wk=.05,Yk=.15,Xk=5,Jk=4,Zk=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function Kk(t,e,n){var r;return r=Math.round(t.h)>=60&&Math.round(t.h)<=240?n?Math.round(t.h)-qk*e:Math.round(t.h)+qk*e:n?Math.round(t.h)+qk*e:Math.round(t.h)-qk*e,r<0?r+=360:r>=360&&(r-=360),r}function Qk(t,e,n){return 0===t.h&&0===t.s?t.s:(r=n?t.s-Vk*e:e===Jk?t.s+Vk:t.s+Hk*e,r>1&&(r=1),n&&e===Xk&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2)));var r}function $k(t,e,n){var r;return r=n?t.v+Wk*e:t.v-Yk*e,r>1&&(r=1),Number(r.toFixed(2))}function tI(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=Gk()(t),i=Xk;i>0;i-=1){var o=r.toHsv(),a=Gk()({h:Kk(o,i,!0),s:Qk(o,i,!0),v:$k(o,i,!0)}).toHexString();n.push(a)}n.push(r.toHexString());for(var s=1;s<=Jk;s+=1){var l=r.toHsv(),u=Gk()({h:Kk(l,s),s:Qk(l,s),v:$k(l,s)}).toHexString();n.push(u)}return"dark"===e.theme?Zk.map((function(t){var r=t.index,i=t.opacity,o=Gk.a.mix(e.backgroundColor||"#141414",n[r],100*i).toHexString();return o})):n}var eI={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},nI={},rI={};Object.keys(eI).forEach((function(t){nI[t]=tI(eI[t]),nI[t].primary=nI[t][5],rI[t]=tI(eI[t],{theme:"dark",backgroundColor:"#141414"}),rI[t].primary=rI[t][5]}));nI.red,nI.volcano,nI.gold,nI.orange,nI.yellow,nI.lime,nI.green,nI.cyan,nI.blue,nI.geekblue,nI.purple,nI.magenta,nI.grey;var iI=function(t,e,n){var r=zk()(t),i=zk()(e);return zk()([(1-n)*r.red()+n*i.red(),(1-n)*r.green()+n*i.green(),(1-n)*r.blue()+n*i.blue()]).rgb()},oI=function(t,e,n){void 0===e&&(e="#fff"),void 0===n&&(n="rgb(150, 150, 150)");var r=iI(e,t,.05).rgb().toString(),i=iI(e,t,.1).rgb().toString(),o=iI(e,t,.2).rgb().toString(),a=iI(e,t,.4).rgb().toString(),s=iI(e,n,.02).rgb().toString(),l=iI(e,n,.05).rgb().toString(),u=iI(e,n,.1).rgb().toString(),c=iI(e,n,.2).rgb().toString(),h=iI(e,n,.3).rgb().toString(),d=tI(t,{theme:"default",backgroundColor:e}),f=zk()(t).hex().toLowerCase(),p=d.indexOf(f),g=t;return-1!==p&&(g=d[p+1]),{mainStroke:t,mainFill:i,activeStroke:t,activeFill:r,inactiveStroke:a,inactiveFill:r,selectedStroke:t,selectedFill:e,highlightStroke:g,highlightFill:o,disableStroke:h,disableFill:l,edgeMainStroke:h,edgeActiveStroke:t,edgeInactiveStroke:c,edgeSelectedStroke:t,edgeHighlightStroke:t,edgeDisableStroke:u,comboMainStroke:h,comboMainFill:s,comboActiveStroke:t,comboActiveFill:r,comboInactiveStroke:h,comboInactiveFill:s,comboSelectedStroke:t,comboSelectedFill:s,comboHighlightStroke:g,comboHighlightFill:s,comboDisableStroke:c,comboDisableFill:l}},aI=function(t,e,n){void 0===e&&(e="#fff"),void 0===n&&(n="#777");var r=iI(e,t,.2).rgb().toString(),i=iI(e,t,.3).rgb().toString(),o=iI(e,t,.6).rgb().toString(),a=iI(e,t,.8).rgb().toString(),s=iI(e,n,.2).rgb().toString(),l=iI(e,n,.25).rgb().toString(),u=iI(e,n,.3).rgb().toString(),c=iI(e,n,.4).rgb().toString(),h=iI(e,n,.5).rgb().toString(),d=tI(t,{theme:"dark",backgroundColor:e}),f=zk()(t).hex().toLowerCase(),p=d.indexOf(f),g=t;return-1!==p&&(g=d[p+1]),{mainStroke:a,mainFill:r,activeStroke:t,activeFill:i,inactiveStroke:a,inactiveFill:r,selectedStroke:t,selectedFill:r,highlightStroke:t,highlightFill:o,disableStroke:h,disableFill:l,edgeMainStroke:n,edgeActiveStroke:t,edgeInactiveStroke:n,edgeSelectedStroke:t,edgeHighlightStroke:t,edgeDisableStroke:u,comboMainStroke:c,comboMainFill:l,comboActiveStroke:t,comboActiveFill:s,comboInactiveStroke:c,comboInactiveFill:l,comboSelectedStroke:t,comboSelectedFill:s,comboHighlightStroke:g,comboHighlightFill:l,comboDisableStroke:c,comboDisableFill:s}},sI=function(t,e,n,r){return void 0===e&&(e="#fff"),void 0===n&&(n="default"),void 0===r&&(r="rgb(150, 150, 150)"),"default"===n?oI(t,e,"rgb(150, 150, 150)"):aI(t,e,"#777")},lI=function(t,e,n,r){void 0===e&&(e="#fff"),void 0===n&&(n="default"),void 0===r&&(r="rgb(150, 150, 150)");var i=[];return t.forEach((function(t){i.push(sI(t,e,n,r))})),i},uI="rgb(95, 149, 255)",cI="rgb(255, 255, 255)",hI="rgb(0, 0, 0)",dI=sI(uI,cI),fI={version:"0.8.22",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:dI.mainStroke,fill:dI.mainFill},size:20,color:dI.mainStroke,linkPoints:{size:8,lineWidth:1,fill:dI.activeFill,stroke:dI.activeStroke}},nodeStateStyles:{active:{fill:dI.activeFill,stroke:dI.activeStroke,lineWidth:2,shadowColor:dI.mainStroke,shadowBlur:10},selected:{fill:dI.selectedFill,stroke:dI.selectedStroke,lineWidth:4,shadowColor:dI.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:dI.highlightFill,stroke:dI.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:dI.inactiveFill,stroke:dI.inactiveStroke,lineWidth:1},disable:{fill:dI.disableFill,stroke:dI.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:hI,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:dI.edgeMainStroke,lineAppendWidth:2},color:dI.edgeMainStroke},edgeStateStyles:{active:{stroke:dI.edgeActiveStroke,lineWidth:1},selected:{stroke:dI.edgeSelectedStroke,lineWidth:2,shadowColor:dI.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:dI.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:dI.edgeInactiveStroke,lineWidth:1},disable:{stroke:dI.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:hI,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:dI.comboMainFill,lineWidth:1,stroke:dI.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:dI.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:dI.comboActiveStroke,lineWidth:1,fill:dI.comboActiveFill},selected:{stroke:dI.comboSelectedStroke,lineWidth:2,fill:dI.comboSelectedFill,shadowColor:dI.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:dI.comboHighlightStroke,lineWidth:2,fill:dI.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:dI.comboInactiveStroke,fill:dI.comboInactiveFill,lineWidth:1},disable:{stroke:dI.comboDisableStroke,fill:dI.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"},pI=function(t){var e=t.clone();return gI(t,e),e},gI=function t(e,n){var r;e.isGroup()&&n.isGroup()&&(null===(r=e.get("children"))||void 0===r||r.forEach((function(e,r){var i=n.get("children")[r];t(e,i)})));var i=e.get("type"),o=n.get("type");if("image"===i&&"image"===o){var a=e.get("clipShape");a&&n.setClip({type:a.get("type"),attrs:a.attr()})}},mI=wk.cloneEvent,yI=wk.isViewportChanged,vI=function(t){function e(e){var n=t.call(this,e)||this;return n.extendEvents=[],n.dragging=!1,n.mousedown=!1,n.preItem=null,n.destroy(),n.graph=e,n.destroyed=!1,n.initEvents(),n}return Object(NE["__extends"])(e,t),e.prototype.initEvents=function(){var t=this,e=t.graph,n=t.extendEvents,r=void 0===n?[]:n,i=e.get("canvas"),o=i.get("el"),a=Object(RE["wrapBehavior"])(this,"onCanvasEvents"),s=Object(RE["wrapBehavior"])(this,"onExtendEvents"),l=Object(RE["wrapBehavior"])(this,"onWheelEvent");i.off("*").on("*",a),this.canvasHandler=a,r.push(Rk(o,"wheel",l)),"undefined"!==typeof window&&(r.push(Rk(window,"keydown",s)),r.push(Rk(window,"keyup",s)),r.push(Rk(window,"focus",s))),this.resetHandler&&e.off("afterchangedata",this.resetHandler),this.resetHandler=Object(RE["wrapBehavior"])(this,"resetStatus"),e.on("afterchangedata",this.resetHandler)},e.getItemRoot=function(t){while(t&&!t.get("item"))t=t.get("parent");return t},e.prototype.onCanvasEvents=function(t){var n=this,r=this.graph,i=r.get("canvas"),o=t.target,a=t.type;switch(a){case"drag":this.onCanvasEvents(Object.assign({},t,{type:"mousemove"}));break;case"dragend":this.onCanvasEvents(Object.assign({},t,{type:"mouseup"}));break;case"mousedown":this.mousedown=!0;break;case"dragend":case"mouseup":setTimeout((function(){return n.mousedown=!1}));break;case"click":if(!this.mousedown)return;break;default:break}t.canvasX=t.x,t.canvasY=t.y;var s={x:t.canvasX,y:t.canvasY},l=r.get("group"),u=l.getMatrix();if(u||(u=[1,0,0,0,1,0,0,0,1]),yI(u)&&(s=r.getPointByClient(t.clientX,t.clientY)),t.x=s.x,t.y=s.y,t.currentTarget=r,o===i)return"mousemove"!==a&&"mouseleave"!==a||this.handleMouseMove(t,"canvas"),t.target=i,t.item=null,r.emit(a,t),void r.emit("canvas:".concat(a),t);var c=e.getItemRoot(o);if(c){var h=c.get("item");if(!h.destroyed){var d=h.getType();if(t.target=o,t.item=h,t.canvasX===t.x&&t.canvasY===t.y){var f=r.getCanvasByPoint(t.x,t.y);t.canvasX=f.x,t.canvasY=f.y}t.name&&!t.name.includes(":")?(r.emit("".concat(d,":").concat(a),t),r.emit(a,t)):t.name&&r.emit(t.name,t),"dragstart"===a&&(this.dragging=!0),"dragend"===a&&(this.dragging=!1),"mousemove"===a&&this.handleMouseMove(t,d)}}else r.emit(a,t)},e.prototype.onExtendEvents=function(t){this.graph.emit(t.type,t)},e.prototype.onWheelEvent=function(t){Object(RE["isNil"])(t.wheelDelta)&&(t.wheelDelta=-t.detail),this.graph.emit("wheel",t)},e.prototype.handleMouseMove=function(t,e){var n=this,r=n.graph,i=n.preItem,o=r.get("canvas"),a=t.target===o?null:t.item;t=mI(t),i&&i!==a&&!i.destroyed&&(t.item=i,this.emitCustomEvent(i.getType(),"mouseleave",t),this.dragging&&this.emitCustomEvent(i.getType(),"dragleave",t)),a&&i!==a&&(t.item=a,this.emitCustomEvent(e,"mouseenter",t),this.dragging&&this.emitCustomEvent(e,"dragenter",t)),this.preItem=a},e.prototype.emitCustomEvent=function(t,e,n){n.type=e,this.graph.emit("".concat(t,":").concat(e),n)},e.prototype.resetStatus=function(){this.mousedown=!1,this.dragging=!1,this.preItem=null},e.prototype.destroy=function(){var t=this,e=t.graph,n=t.canvasHandler,r=t.extendEvents,i=e.get("canvas");i.off("*",n),Object(RE["each"])(r,(function(t){t.remove()})),this.resetStatus(),this.extendEvents.length=0,this.canvasHandler=null,this.resetHandler=null,this.destroyed=!0},e}(Mk),bI=vI,_I=n("2e4c"),xI=n("0519"),wI=n.n(xI),SI=wk.traverseTree,EI=function(t,e){var n;return n=t?Object(RE["isNumber"])(t)?function(e){return t}:t:function(t){return e||1},n},CI=function(t,e){var n=[],r=[],i={},o=0;for(o=0;o<t.length;o++){var a=t[o];i[a.id]=o,n.push(a.x),n.push(a.y),n.push(0),n.push(0),r.push([])}for(o=0;o<e.length;o++){var s=e[o];r[i[s.source]].push(i[s.target]),r[i[s.target]].push(i[s.source])}var l=0;for(o=0;o<t.length;o++){var u=n.length,c=r[o],h=c.length;n[4*o+2]=u,n[4*o+3]=c.length,l=Math.max(l,c.length);for(var d=0;d<h;++d){var f=c[d];n.push(+f)}}while(n.length%4!==0)n.push(0);return{array:new Float32Array(n),maxEdgePerVetex:l}},MI=function(t,e,n){var r=[],i=[],o={},a=0;for(a=0;a<t.length;a++){var s=t[a];o[s.id]=a,r.push(s.x),r.push(s.y),r.push(0),r.push(0),i.push([])}for(a=0;a<e.length;a++){var l=e[a];i[o[l.source]].push(o[l.target]),i[o[l.source]].push(n(l)),i[o[l.target]].push(o[l.source]),i[o[l.target]].push(n(l))}var u=0;for(a=0;a<t.length;a++){var c=r.length,h=i[a],d=h.length;r[4*a+2]=c,r[4*a+3]=d/2,u=Math.max(u,d/2);for(var f=0;f<d;++f){var p=h[f];r.push(+p)}}while(r.length%4!==0)r.push(0);return{array:new Float32Array(r),maxEdgePerVetex:u}},TI=function(t,e,n,r){var i=[],o=[],a={},s=0;for(s=0;s<t.length;s++){var l=t[s];a[l.id]=s,i.push(l.x),i.push(l.y),i.push(0),i.push(0),o.push([])}for(s=0;s<e.length;s++){var u=e[s];o[a[u.source]].push(a[u.target]),o[a[u.source]].push(n(u)),o[a[u.source]].push(r(u)),o[a[u.source]].push(0),o[a[u.target]].push(a[u.source]),o[a[u.target]].push(n(u)),o[a[u.target]].push(r(u)),o[a[u.target]].push(0)}var c=0;for(s=0;s<t.length;s++){var h=i.length,d=o[s],f=d.length;i[4*s+2]=h+1048576*f/4,i[4*s+3]=0,c=Math.max(c,f/4);for(var p=0;p<f;++p){var g=d[p];i.push(+g)}}while(i.length%4!==0)i.push(0);return{array:new Float32Array(i),maxEdgePerVetex:c}},AI=function(t,e){var n=[],r=t.length,i={};return e.forEach((function(e){t.forEach((function(t,o){if(void 0===i[e[t]]&&(i[e[t]]=Object.keys(i).length),n.push(i[e[t]]),o===r-1)while(n.length%4!==0)n.push(0)}))})),{array:new Float32Array(n),count:Object.keys(i).length}},OI=function(t){for(var e=[],n=t.length,r=t[0].length,i=function(r){t.forEach((function(t,i){if(e.push(t[r]),i===n-1)while(e.length%4!==0)e.push(0)}))},o=0;o<r;o++)i(o);return new Float32Array(e)},kI=function(t,e){var n=["V","TB","BT"],r={x:1/0,y:1/0},i={x:-1/0,y:-1/0},o="x",a="y";e&&n.indexOf(e)>=0&&(a="x",o="y");var s=0;SI(t,(function(t){return s++,t.x>i.x&&(i.x=t.x),t.x<r.x&&(r.x=t.x),t.y>i.y&&(i.y=t.y),t.y<r.y&&(r.y=t.y),!0}));var l=2*Math.PI/s,u=i[a]-r[a];return 0===u||SI(t,(function(e){var n=(e[a]-r[a])/u*(2*Math.PI-l)+l,i=Math.abs("x"===o?e.x-t.x:e.y-t.y);return e.x=i*Math.cos(n),e.y=i*Math.sin(n),!0})),t},II=function t(){return"undefined"===typeof window||"undefined"===typeof document?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var t=document.createElement("canvas");return!(!window.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(e){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var t=document.createElement("div");return t.id="webgl-error-message",t.style.fontFamily="monospace",t.style.fontSize="13px",t.style.fontWeight="normal",t.style.textAlign="center",t.style.background="#fff",t.style.color="#000",t.style.padding="1.5em",t.style.width="400px",t.style.margin="5em auto 0",this.webgl||(t.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join("\n")),t},addGetWebGLMessage:function(e){e=e||{};var n=void 0!==e.parent?e.parent:document.body,r=void 0!==e.id?e.id:"oldie",i=t().getWebGLErrorMessage();i.id=r,n.appendChild(i)}}},PI=function(){var t=navigator.userAgent.toLowerCase();return t.indexOf("firefox")>-1?"firefox":t.indexOf("safari")>-1?"safari":t.indexOf("opr")>-1?"opera":t.indexOf("chrome")>-1?"chrome":t.indexOf("trident")>-1?"ie 11":t.indexOf("ie")>-1?"ie":"unknown"},LI=Object(NE["__assign"])(Object(NE["__assign"])(Object(NE["__assign"])(Object(NE["__assign"])(Object(NE["__assign"])({},wk),c),h),d),f),NI=LI,RI=NI.radialLayout,DI=function(){function t(t){this.type=t.type,this.radial=t.radial,this.config=t}return t.prototype.init=function(t){var e=this;this.data=t,this.radial?this.layoutMethod=function(t){var n=wI.a[e.type](t,e.config);return RI(n),n}:this.layoutMethod=function(t){return wI.a[e.type](t,e.config)}},t.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},t.prototype.layout=function(t){return this.init(t),this.execute()},t}(),FI=DI;Object(_I["registerLayout"])("grid",_I["GridLayout"]),Object(_I["registerLayout"])("random",_I["RandomLayout"]),Object(_I["registerLayout"])("force",_I["ForceLayout"]),Object(_I["registerLayout"])("circular",_I["CircularLayout"]),Object(_I["registerLayout"])("dagre",_I["DagreLayout"]),Object(_I["registerLayout"])("dagreCompound",_I["DagreCompoundLayout"]),Object(_I["registerLayout"])("radial",_I["RadialLayout"]),Object(_I["registerLayout"])("concentric",_I["ConcentricLayout"]),Object(_I["registerLayout"])("mds",_I["MDSLayout"]),Object(_I["registerLayout"])("fruchterman",_I["FruchtermanLayout"]),Object(_I["registerLayout"])("fruchterman-gpu",_I["FruchtermanGPULayout"]),Object(_I["registerLayout"])("gForce",_I["GForceLayout"]),Object(_I["registerLayout"])("force2",_I["Force2Layout"]),Object(_I["registerLayout"])("gForce-gpu",_I["GForceGPULayout"]),Object(_I["registerLayout"])("comboForce",_I["ComboForceLayout"]),Object(_I["registerLayout"])("comboCombined",_I["ComboCombinedLayout"]),Object(_I["registerLayout"])("forceAtlas2",_I["ForceAtlas2Layout"]);var jI=function(t,e){e.isCustomLayout=!0,_I["Layouts"][t]=Object(_I["registerLayout"])(t,e)},BI=function(){function t(t,e){var n=t.toString(),r=new Blob(["importScripts('".concat(e,"');(").concat(n,")()")],{type:"text/javascript"});return new Worker(URL.createObjectURL(r))}return t}(),zI=BI,UI=function(t){function e(){var t={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};function e(e){var n=e.data.type;return n===t.RUN||n===t.GPURUN}function n(e){var n=this,r=e.data.type;switch(r){case t.RUN:var i,o=e.data,a=o.nodes,s=o.edges,l=o.layoutCfg,u=void 0===l?{}:l,c=u.type,h=layout.getLayoutByName(c);if(!h){this.postMessage({type:t.ERROR,message:"layout ".concat(c," not found")});break}u.onLayoutEnd=function(){n.postMessage({type:t.END,nodes:a}),null===i||void 0===i||i.destroy()},i=new h(u),i.init({nodes:a,edges:s}),i.execute();break;case t.GPURUN:var d=e.data,f=d.nodes,p=(s=d.edges,d.layoutCfg),g=(u=void 0===p?{}:p,d.canvas);c=u.type,h=layout.getLayoutByName(c);if(!h){this.postMessage({type:t.ERROR,message:"layout ".concat(c," not found")});break}if("gpu"!==c.split("-")[1]){this.postMessage({type:t.ERROR,message:"layout ".concat(c," does not support GPU")});break}var m=new h(u);m.init({nodes:f,edges:s}),m.executeWithWorker(g,this);break;default:break}}layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("force2",layout.Force2Layout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("dagreCompound",layout.DagreCompoundLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("comboCombined",layout.ComboCombinedLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout),onmessage=function(t){e(t)&&n(t)}}void 0===t&&(t="https://unpkg.com/@antv/layout@0.3.23/dist/layout.min.js");var n=new zI(e,t);return n},GI={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};function qI(t){return qI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qI(t)}var VI=function(t){return setTimeout(t,16)},HI=function(t){return clearTimeout(t)},WI={requestAnimationFrame:function(t){var e="undefined"!==typeof window&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||VI;return e(t)},cancelAnimationFrame:function(t){var e="undefined"!==typeof window&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||HI;return e(t)}},YI=["fruchterman","gForce"],XI=["force","grid","circular"],JI=function(t){function e(e){var n=t.call(this,e)||this;return n.graph=e,n.layoutCfg=e.get("layout")||{},n.layoutType=n.getLayoutType(),n.worker=null,n.workerData={},n.initLayout(),n}return Object(NE["__extends"])(e,t),e.prototype.initLayout=function(){},e.prototype.getWorker=function(){return this.worker||("undefined"===typeof Worker?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=UI(this.layoutCfg.workerScriptURL)),this.worker},e.prototype.stopWorker=function(){var t=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,t.requestId&&(WI.cancelAnimationFrame(t.requestId),t.requestId=null),t.requestId2&&(WI.cancelAnimationFrame(t.requestId2),t.requestId2=null))},e.prototype.execLayoutMethod=function(t,e){var n=this;return new Promise((function(r,i){return Object(NE["__awaiter"])(n,void 0,void 0,(function(){var n,o,a,s,l,u,c,h,d,f;return Object(NE["__generator"])(this,(function(p){switch(p.label){case 0:if(n=this.graph,!n||n.get("destroyed"))return[2];o=t.type,t.onLayoutEnd=function(){n.emit("aftersublayout",{type:o}),r()},o&&this.isGPU&&(eP(o)?o="".concat(o,"-gpu"):console.warn("The '".concat(o,"' layout does not support GPU calculation for now, it will run in CPU."))),wk.isForce(o)?(a=t.onTick,s=t.animate,l=void 0===s&&("force"===o||"force2"===o),d=function(){a&&a(),(s||l)&&n.refreshPositions()},t.tick=d):"comboForce"!==o&&"comboCombined"!==o||(t.comboTrees=n.get("comboTrees")),u=!1;try{c=new _I["Layouts"][o](t),this.layoutMethods[e]&&this.layoutMethods[e].destroy(),this.layoutMethods[e]=c}catch(g){console.warn("The layout method: '".concat(o,"' does not exist! Please specify it first.")),i()}return u=c.enableTick,u&&(h=t.onTick,d=function(){h&&h(),n.refreshPositions()},c.tick=d),f=this.filterLayoutData(this.data,t),tP(f,e),c.init(f),n.emit("beforesublayout",{type:o}),[4,c.execute()];case 1:return p.sent(),c.isCustomLayout&&t.onLayoutEnd&&t.onLayoutEnd(),[2]}}))}))}))},e.prototype.updateLayoutMethod=function(t,e){var n=this;return new Promise((function(r,i){return Object(NE["__awaiter"])(n,void 0,void 0,(function(){var n,i,o,a,s,l,u;return Object(NE["__generator"])(this,(function(c){switch(c.label){case 0:return n=this.graph,i=null===e||void 0===e?void 0:e.type,e.onLayoutEnd=function(){n.emit("aftersublayout",{type:i}),r()},wk.isForce(i)&&(o=e.onTick,a=e.animate,s=void 0===a&&("force"===i||"force2"===i),l=function(){null===o||void 0===o||o(),(a||s)&&n.refreshPositions()},e.tick=l),u=this.filterLayoutData(this.data,e),t.init(u),t.updateCfg(e),n.emit("beforesublayout",{type:i}),[4,t.execute()];case 1:return c.sent(),t.isCustomLayout&&e.onLayoutEnd&&e.onLayoutEnd(),[2]}}))}))}))},e.prototype.layout=function(t){var e,n=this,r=this.graph;if(r&&!r.get("destroyed")){this.data=this.setDataFromGraph();var i=this.data,o=i.nodes,a=i.hiddenNodes;if(!o)return!1;var s=r.get("width"),l=r.get("height"),u={};Object.assign(u,{width:s,height:l,center:[s/2,l/2]},this.layoutCfg),this.layoutCfg=u;var c=u.type,h=!1;null===(e=this.layoutMethods)||void 0===e||e.forEach((function(t){var e;return h=!!(null===(e=t.nodes)||void 0===e?void 0:e.length)||h}));var d=this.destoryLayoutMethods();r.emit("beforelayout");var f=Promise.resolve();h&&c&&1===(null===d||void 0===d?void 0:d.length)&&d[0]===c?this.tweakInit():f=this.initPositions(u.center,o);var p=this.initPositions(u.center,a);p.then(),this.isGPU=nP(u,c);var g=u.onLayoutEnd,m=u.layoutEndFormatted,y=u.adjust;if(m||(u.layoutEndFormatted=!0,u.onAllLayoutEnd=function(){return Object(NE["__awaiter"])(n,void 0,void 0,(function(){return Object(NE["__generator"])(this,(function(t){switch(t.label){case 0:return g&&g(o),this.refreshLayout(),y&&u.pipes?[4,this.adjustPipesBox(this.data,y)]:[3,2];case 1:t.sent(),this.refreshLayout(),t.label=2;case 2:return r.emit("afterlayout"),[2]}}))}))}),this.stopWorker(),u.workerEnabled&&this.layoutWithWorker(this.data,t))return!0;var v=!1;return u.type?(v=!0,f=f.then((function(){return Object(NE["__awaiter"])(n,void 0,void 0,(function(){return Object(NE["__generator"])(this,(function(t){switch(t.label){case 0:return[4,this.execLayoutMethod(u,0)];case 1:return[2,t.sent()]}}))}))}))):u.pipes&&(v=!0,u.pipes.forEach((function(t,e){f=f.then((function(){return Object(NE["__awaiter"])(n,void 0,void 0,(function(){return Object(NE["__generator"])(this,(function(n){switch(n.label){case 0:return[4,this.execLayoutMethod(t,e)];case 1:return[2,n.sent()]}}))}))}))}))),v?f.then((function(){u.onAllLayoutEnd&&u.onAllLayoutEnd(),t&&t()})).catch((function(t){console.warn("graph layout failed,",t)})):(r.refreshPositions(),null===t||void 0===t||t()),!1}},e.prototype.tweakInit=function(){var t=this,e=t.data,n=t.graph,r=e.nodes,i=e.edges;if(null===r||void 0===r?void 0:r.length){var o={};r.forEach((function(t){var e=t.x,n=t.y;isNaN(e)||isNaN(n)||(o[t.id]={x:e,y:n},t.mass=t.mass||2)})),i.forEach((function(t){var e=t.source,n=t.target,r=o[e],i=o[n];!r&&i?o[e]={x:i.x+80*(Math.random()-.5),y:i.y+80*(Math.random()-.5)}:!i&&r&&(o[n]={x:r.x+80*(Math.random()-.5),y:r.y+80*(Math.random()-.5)})}));var a=n.get("width"),s=n.get("height");r.forEach((function(t){var e=o[t.id]||{x:a/2+20*(Math.random()-.5),y:s/2+20*(Math.random()-.5)};t.x=e.x,t.y=e.y}))}},e.prototype.initWithPreset=function(t,e){var n=this;return new Promise((function(r,i){return Object(NE["__awaiter"])(n,void 0,void 0,(function(){var n,i,o,a,s,l,u;return Object(NE["__generator"])(this,(function(c){switch(c.label){case 0:return n=this,i=n.layoutCfg,o=n.data,a=i.preset,(null===a||void 0===a?void 0:a.type)&&_I["Layouts"][null===a||void 0===a?void 0:a.type]?(s=nP(a,a.type),l=s?"".concat(a.type,"-gpu"):a.type,u=new _I["Layouts"][l](a),delete i.preset,u.init(o),[4,u.execute()]):(null===e||void 0===e||e(),r(),[2,!1]);case 1:return c.sent(),null===t||void 0===t||t(),r(),[2,!0]}}))}))}))},e.prototype.layoutWithWorker=function(t,e){var n=this,r=this,i=r.layoutCfg,o=r.graph,a=this.getWorker(),s=this.workerData;if(!a)return!1;s.requestId=null,s.requestId2=null,s.currentTick=null,s.currentTickData=null,o.emit("beforelayout");var l=Promise.resolve(),u=!1;if(i.type)u=!0,l=l.then((function(){return n.runWebworker(a,t,i)}));else if(i.pipes){u=!0;for(var c=function(e){l=l.then((function(){return n.runWebworker(a,t,e)}))},h=0,d=i.pipes;h<d.length;h++){var f=d[h];c(f)}}return u&&l.then((function(){i.onAllLayoutEnd&&i.onAllLayoutEnd(),null===e||void 0===e||e()})).catch((function(t){console.error("layout failed",t)})),!0},e.prototype.runWebworker=function(t,e,n){var r=this,i=this.isGPU,o=this.filterLayoutData(e,n),a=o.nodes,s=o.edges,l=document.createElement("canvas"),u=i&&"undefined"!==typeof window&&window.navigator&&!navigator["gpu"]&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in l,c=QI(n,(function(t){return"function"!==typeof t}));if(u){var h=l.transferControlToOffscreen();c.type="".concat(c.type,"-gpu"),t.postMessage({type:GI.GPURUN,nodes:a,edges:s,layoutCfg:c,canvas:h},[h])}else t.postMessage({type:GI.RUN,nodes:a,edges:s,layoutCfg:c});return new Promise((function(e,i){t.onmessage=function(t){r.handleWorkerMessage(e,i,t,o,n)}}))},e.prototype.handleWorkerMessage=function(t,e,n,r,i){var o=this,a=o.graph,s=o.workerData,l=n.data,u=l.type,c=function(){i.onTick&&i.onTick()};switch(u){case GI.TICK:s.currentTick=l.currentTick,s.currentTickData=l,s.requestId||(s.requestId=WI.requestAnimationFrame((function(){KI(r,l),a.refreshPositions(),c(),l.currentTick===l.totalTicks?t():s.currentTick===l.totalTicks&&(s.requestId2=WI.requestAnimationFrame((function(){KI(r,s.currentTickData),a.refreshPositions(),s.requestId2=null,c(),t()}))),s.requestId=null})));break;case GI.END:null==s.currentTick&&(KI(r,l),t());break;case GI.GPUEND:null==s.currentTick&&($I(r,l),t());break;case GI.ERROR:console.warn("Web-Worker layout error!",l.message),e();break;default:e();break}},e.prototype.updateLayoutCfg=function(t){var e=this,n=this,r=n.graph,i=n.layoutMethods;if(r&&!r.get("destroyed")){var o=t.disableTriggerLayout,a=Object(NE["__rest"])(t,["disableTriggerLayout"]),s=Object(RE["mix"])({},this.layoutCfg,a);if(this.layoutCfg=s,!o)if(null===i||void 0===i?void 0:i.length){if(this.data=this.setDataFromGraph(),this.stopWorker(),!a.workerEnabled||!this.layoutWithWorker(this.data,null)){r.emit("beforelayout");var l=Promise.resolve(),u=!1;1===(null===i||void 0===i?void 0:i.length)?(u=!0,l=l.then((function(){return Object(NE["__awaiter"])(e,void 0,void 0,(function(){return Object(NE["__generator"])(this,(function(t){switch(t.label){case 0:return[4,this.updateLayoutMethod(i[0],s)];case 1:return[2,t.sent()]}}))}))}))):(null===i||void 0===i?void 0:i.length)&&(u=!0,i.forEach((function(t,n){var r=s.pipes[n];l=l.then((function(){return Object(NE["__awaiter"])(e,void 0,void 0,(function(){return Object(NE["__generator"])(this,(function(e){switch(e.label){case 0:return[4,this.updateLayoutMethod(t,r)];case 1:return[2,e.sent()]}}))}))}))}))),u&&l.then((function(){s.onAllLayoutEnd&&s.onAllLayoutEnd()})).catch((function(t){console.warn("layout failed",t)}))}}else this.layout()}},e.prototype.adjustPipesBox=function(t,e){var n=this;return new Promise((function(r){var i=t.nodes;(null===i||void 0===i?void 0:i.length)||r(),XI.includes(e)||(console.warn("The adjust type ".concat(e," is not supported yet, please assign it with 'force', 'grid', or 'circular'.")),r());var o={center:n.layoutCfg.center,nodeSize:function(t){return Math.max(t.height,t.width)},preventOverlap:!0,onLayoutEnd:function(){}},a=n.getLayoutBBox(i),s=a.groupNodes,l=a.layoutNodes,u=Object(RE["clone"])(l);o.onLayoutEnd=function(){null===l||void 0===l||l.forEach((function(t,e){var n,r,i,o=t.x-(null===(n=u[e])||void 0===n?void 0:n.x),a=t.y-(null===(r=u[e])||void 0===r?void 0:r.y);null===(i=s[e])||void 0===i||i.forEach((function(t){t.x+=o,t.y+=a}))})),r()};var c=new _I["Layouts"][e](o);c.layout({nodes:l})}))},e.prototype.destroy=function(){this.destoryLayoutMethods();var t=this.worker;t&&(t.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},e}(Ek),ZI=JI;function KI(t,e){for(var n=t.nodes,r=e.nodes,i=n.length,o=0;o<i;o++){var a=n[o];a.x=r[o].x,a.y=r[o].y}}function QI(t,e){var n={};return t&&"object"===qI(t)?(Object.keys(t).forEach((function(r){t.hasOwnProperty(r)&&e(t[r])&&(n[r]=t[r])})),n):t}function $I(t,e){for(var n=t.nodes,r=e.vertexEdgeData,i=n.length,o=0;o<i;o++){var a=n[o],s=r[4*o],l=r[4*o+1];a.x=s,a.y=l}}function tP(t,e){var n;if(null===(n=null===t||void 0===t?void 0:t.nodes)||void 0===n?void 0:n.length){var r=t.nodes;r.forEach((function(t){t.layoutOrder=e}))}}function eP(t){return YI.includes(t)}function nP(t,e){var n=e;e&&"gpu"===e.split("-")[1]&&(n=e.split("-")[0],t.gpuEnabled=!0);var r=!1;return t.gpuEnabled&&(r=!0,II().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),r=!1)),r&&!eP(n)&&(console.warn("The '".concat(n,"' layout does not support GPU calculation for now, it will run in CPU.")),r=!1),r}var rP=UE["a"].transform,iP="svg",oP=function(t){function e(e){var n=t.call(this,e)||this,r=n.get("defaultNode");return r||n.set("defaultNode",{type:"circle"}),r.type||(r.type="circle",n.set("defaultNode",r)),n.destroyed=!1,n}return Object(NE["__extends"])(e,t),e.prototype.initLayoutController=function(){var t=new ZI(this);this.set({layoutController:t})},e.prototype.initEventController=function(){var t=new bI(this);this.set({eventController:t})},e.prototype.initCanvas=function(){var t=this.get("container");if("string"===typeof t&&(t=document.getElementById(t),this.set("container",t)),!t)throw new Error("invalid container");var e=t.clientWidth,n=t.clientHeight,r=this.get("width")||e,i=this.get("height")||n;this.get("width")||this.get("height")||(this.set("width",e),this.set("height",n));var o,a=this.get("renderer");if(a===iP)o=new Nk["Canvas"]({container:t,width:r,height:i});else{var s={container:t,width:r,height:i},l=this.get("pixelRatio");l&&(s.pixelRatio=l,window.devicePixelRatio=l),o=new Lk["Canvas"](s)}this.set("canvas",o)},e.prototype.initPlugins=function(){var t=this;Object(RE["each"])(t.get("plugins"),(function(e){!e.destroyed&&e.initPlugin&&e.initPlugin(t)}))},e.prototype.downloadImageWatermark=function(t,e,n,r){return Object(NE["__awaiter"])(this,void 0,void 0,(function(){var i,o,a;return Object(NE["__generator"])(this,(function(s){switch(s.label){case 0:return i=t.style.backgroundImage,o=i.slice(5,i.length-2),a=new Image,a.src=o,[4,new Promise((function(t){a.onload=function(){var i=e.createPattern(a,"repeat");e.rect(0,0,n,r),e.fillStyle=i,e.fill(),t("")}}))];case 1:return s.sent(),[2]}}))}))},e.prototype.asyncToDataUrl=function(t,e,n,r,i,o){var a=this,s=document.querySelector(".g6-graph-watermarker"),l=this.get("canvas"),u=l.getRenderer(),c=o||l.get("el"),h="";t||(t="image/png"),setTimeout((function(){return Object(NE["__awaiter"])(a,void 0,void 0,(function(){var o,a,l,d,f,p,g,m,y,v;return Object(NE["__generator"])(this,(function(b){switch(b.label){case 0:return"svg"!==u?[3,1]:(o=c.cloneNode(!0),a=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),l=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",a),l.replaceChild(o,l.documentElement),d=(new XMLSerializer).serializeToString(l),h="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(d)),[3,4]);case 1:return f=void 0,p=c.getContext("2d"),g=r||this.get("width"),m=i||this.get("height"),y=void 0,s?[4,this.downloadImageWatermark(s,p,g,m)]:[3,3];case 2:b.sent(),b.label=3;case 3:if(e){v="undefined"!==typeof window?window.devicePixelRatio:1;try{f=p.getImageData(0,0,g*v,m*v),y=p.globalCompositeOperation,p.globalCompositeOperation="destination-over",p.fillStyle=e,p.fillRect(0,0,g,m)}catch(_){console.error("Download image failed. Out of memory at ImageData creation")}}h=c.toDataURL(t),e&&(p.clearRect(0,0,g,m),p.putImageData(f,0,0),p.globalCompositeOperation=y),b.label=4;case 4:return n&&n(h),[2]}}))}))}),16)},e.prototype.toDataURL=function(t,e){var n=this.get("canvas"),r=n.getRenderer(),i=n.get("el");t||(t="image/png");var o="";if("svg"===r){var a=i.cloneNode(!0),s=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),l=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",s);l.replaceChild(a,l.documentElement);var u=(new XMLSerializer).serializeToString(l);o="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(u))}else{var c=void 0,h=i.getContext("2d"),d=Math.max(this.get("width"),500),f=Math.max(this.get("height"),500),p=void 0;if(e){var g="undefined"!==typeof window&&window.devicePixelRatio||1;try{c=h.getImageData(0,0,d*g,f*g),p=h.globalCompositeOperation,h.globalCompositeOperation="destination-over",h.fillStyle=e,h.fillRect(0,0,d,f)}catch(m){console.error("Download image failed. Out of memory at ImageData creation")}}o=i.toDataURL(t),e&&(h.clearRect(0,0,d,f),h.putImageData(c,0,0),h.globalCompositeOperation=p)}return o},e.prototype.toFullDataURL=function(t,e,n){var r=this.get("group").getCanvasBBox(),i=r.height,o=r.width,a=this.get("renderer"),s=Fk('<div id="virtual-image"></div>'),l=n?n.backgroundColor:void 0,u=n?n.padding:void 0;u?Object(RE["isNumber"])(u)&&(u=[u,u,u,u]):u=[0,0,0,0];var c=i+u[0]+u[2],h=o+u[1]+u[3],d={container:s,height:c,width:h,quickHit:!0},f="svg"===a?new Nk["Canvas"](d):new Lk["Canvas"](d),p=this.get("group"),g=p.clone(),m=Object(RE["clone"])(g.getMatrix());m||(m=[1,0,0,0,1,0,0,0,1]);var y=(r.maxX+r.minX)/2,v=(r.maxY+r.minY)/2;m=rP(m,[["t",-y,-v],["t",o/2+u[3],i/2+u[0]]]),g.resetMatrix(),g.setMatrix(m),f.add(g);var b=f.get("el"),_="";e||(e="image/png"),setTimeout((function(){if("svg"===a){var n=b.cloneNode(!0),r=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),i=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",r);i.replaceChild(n,i.documentElement);var o=(new XMLSerializer).serializeToString(i);_="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(o))}else{var s=void 0,u=b.getContext("2d"),d=void 0;if(l){var f="undefined"!==typeof window?window.devicePixelRatio:1;try{s=u.getImageData(0,0,h*f,c*f),d=u.globalCompositeOperation,u.globalCompositeOperation="destination-over",u.fillStyle=l,u.fillRect(0,0,h,c)}catch(p){console.error("Download image failed. Out of memory at ImageData creation")}}_=b.toDataURL(e),l&&(u.clearRect(0,0,h,c),u.putImageData(s,0,0),u.globalCompositeOperation=d)}t&&t(_)}),16)},e.prototype.downloadFullImage=function(t,e,n){var r=this,i=this.get("group").getCanvasBBox(),o=i.height,a=i.width,s=this.get("renderer"),l=Fk('<div id="virtual-image"></div>'),u=document.querySelector(".g6-graph-watermarker"),c=n?n.backgroundColor:void 0,h=n?n.padding:void 0;h?Object(RE["isNumber"])(h)&&(h=[h,h,h,h]):h=[0,0,0,0];var d=o+h[0]+h[2],f=a+h[1]+h[3];if(u){var p=this.get("graphWaterMarker").cfg||{},g=p.width,m=p.height;d=Math.ceil(d/m)*m,f=Math.ceil(f/g)*g}var y={container:l,height:d,width:f},v="svg"===s?new Nk["Canvas"](y):new Lk["Canvas"](y),b=this.get("group"),_=pI(b),x=Object(RE["clone"])(_.getMatrix());x||(x=[1,0,0,0,1,0,0,0,1]);var w=(i.maxX+i.minX)/2,S=(i.maxY+i.minY)/2;x=rP(x,[["t",-w,-S],["t",a/2+h[3],o/2+h[0]]]),_.resetMatrix(),_.setMatrix(x),v.add(_);var E=v.get("el");e||(e="image/png"),this.asyncToDataUrl(e,c,(function(n){var i=document.createElement("a"),o=(t||"graph")+("svg"===s?".svg":".".concat(e.split("/")[1]));r.dataURLToImage(n,s,i,o);var a=document.createEvent("MouseEvents");a.initEvent("click",!1,!1),i.dispatchEvent(a)}),f,d,E)},e.prototype.downloadImage=function(t,e,n){var r=this,i=this;i.stopAnimate();var o=i.get("canvas"),a=o.getRenderer();e||(e="image/png");var s=(t||"graph")+("svg"===a?".svg":".".concat(e.split("/")[1])),l=document.createElement("a");i.asyncToDataUrl(e,n,(function(t){r.dataURLToImage(t,a,l,s);var e=document.createEvent("MouseEvents");e.initEvent("click",!1,!1),l.dispatchEvent(e)}))},e.prototype.dataURLToImage=function(t,e,n,r){if(t&&"data:"!==t){if("undefined"!==typeof window)if(window.Blob&&window.URL&&"svg"!==e){var i=t.split(","),o="";if(i&&i.length>0){var a=i[0].match(/:(.*?);/);a&&a.length>=2&&(o=a[1])}var s=atob(i[1]),l=s.length,u=new Uint8Array(l);while(l--)u[l]=s.charCodeAt(l);var c=new Blob([u],{type:o});window.navigator.msSaveBlob?window.navigator.msSaveBlob(c,r):n.addEventListener("click",(function(){n.download=r,n.href=window.URL.createObjectURL(c)}))}else n.addEventListener("click",(function(){n.download=r,n.href=t}))}else console.error("Download image failed. The graph is too large or there is invalid attribute values in graph items")},e.prototype.addPlugin=function(t){var e=this;t.destroyed||(e.get("plugins").push(t),t.initPlugin(e))},e.prototype.removePlugin=function(t){var e=this.get("plugins"),n=e.indexOf(t);n>=0&&(t.destroyPlugin(),e.splice(n,1))},e.prototype.setImageWaterMarker=function(t,e){void 0===t&&(t=fI.waterMarkerImage);var n=this.get("container");Object(RE["isString"])(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var r=this.get("graphWaterMarker"),i=Object(RE["deepMix"])({},fI.imageWaterMarkerConfig,e),o=i.width,a=i.height,s=i.compatible,l=i.image;if(!t){var u=s?n:document.querySelector(".g6-graph-watermarker");return u&&(u.style.cssText=void 0),void(r&&r.clear())}if(r)r.clear();else{var c={container:n,width:o,height:a,capture:!1},h=this.get("pixelRatio");h&&(c.pixelRatio=h,window.devicePixelRatio=h),r=new Lk["Canvas"](c),this.set("graphWaterMarker",r)}r.get("el").style.display="none";var d=r.get("context"),f=l.rotate,p=l.x,g=l.y;d.rotate(-f*Math.PI/180);var m=new Image;m.crossOrigin="anonymous",m.src=t,m.onload=function(){if(d.drawImage(m,p,g,l.width,l.height),d.rotate(f*Math.PI/180),s)n.style.cssText="background-image: url(".concat(r.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var t=document.querySelector(".g6-graph-watermarker");t||(t=document.createElement("div"),t.className="g6-graph-watermarker"),t.className="g6-graph-watermarker",r.destroyed||(t.style.cssText="background-image: url(".concat(r.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;"),n.appendChild(t))}}},e.prototype.setTextWaterMarker=function(t,e){var n=this.get("container");Object(RE["isString"])(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var r=this.get("graphWaterMarker"),i=Object(RE["deepMix"])({},fI.textWaterMarkerConfig,e),o=i.width,a=i.height,s=i.compatible,l=i.text;if(!(null===t||void 0===t?void 0:t.length)){var u=s?n:document.querySelector(".g6-graph-watermarker");return u&&(u.style.cssText=void 0),void(r&&r.clear())}if(r)r.clear();else{var c={container:n,width:o,height:a,capture:!1},h=this.get("pixelRatio");h&&(c.pixelRatio=h,window.devicePixelRatio=h),r=new Lk["Canvas"](c),this.set("graphWaterMarker",r)}r.get("el").style.display="none";var d=r.get("context"),f=l.rotate,p=l.fill,g=l.fontFamily,m=l.fontSize,y=l.baseline,v=l.x,b=l.y,_=l.lineHeight;d.rotate(-f*Math.PI/180),d.font="".concat(m,"px ").concat(g),d.fillStyle=p,d.textBaseline=y;for(var x=Object(RE["isString"])(t)?[t]:t,w=x.length-1;w>=0;w--)d.fillText(x[w],v,b+w*_);if(d.rotate(f*Math.PI/180),s)n.style.cssText="background-image: url(".concat(r.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var S=document.querySelector(".g6-graph-watermarker");S||(S=document.createElement("div"),S.className="g6-graph-watermarker"),S.style.cssText="background-image: url(".concat(r.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;"),n.appendChild(S)}},e.prototype.destroy=function(){var e,n,r,i;Object(RE["each"])(this.get("plugins"),(function(t){t.destroyPlugin()}));var o=this.get("tooltips");if(o)for(var a=0;a<o.length;a++){var s=o[a];if(s){var l=s.parentElement;l&&l.removeChild(s)}}null===(e=this.get("eventController"))||void 0===e||e.destroy(),null===(n=this.get("layoutController"))||void 0===n||n.destroy(),null===(r=this.get("graphWaterMarker"))||void 0===r||r.destroy(),null===(i=document.querySelector(".g6-graph-watermarker"))||void 0===i||i.remove(),t.prototype.destroy.call(this)},e}(WO),aP=oP;function sP(t){return sP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sP(t)}function lP(t,e){if(void 0===e&&(e=new WeakMap),null===t)return t;if(t instanceof Date)return new Date(t);if(t instanceof RegExp)return new RegExp(t);if("object"!==sP(t))return t;if(e.get(t))return e.get(t);var n=Array.isArray(t)?[]:{};for(var r in e.set(t,n),t)t.hasOwnProperty(r)&&void 0!==t[r]&&(n[r]=lP(t[r],e));return n}function uP(t){try{return structuredClone(t)}catch(e){return lP(t)}}var cP=NI.radialLayout,hP=NI.traverseTree,dP=function(t){function e(e){var n=t.call(this,e)||this;return n.layoutAnimating=!1,n.set("removeList",[]),n.set("layoutMethod",n.getLayout()),n}return Object(NE["__extends"])(e,t),e.prototype.getLayout=function(){var t=this.get("layout");return t?"function"===typeof t?t:(t.type||(t.type="dendrogram"),t.direction||(t.direction="indented"===t.type?"LR":"TB"),t.radial?function(e){var n=wI.a[t.type](e,t);return cP(n),n}:function(e){return wI.a[t.type](e,t)}):null},e.indexOfChild=function(t,e){var n=-1;return Object(RE["each"])(t,(function(t,r){if(e===t.id)return n=r,!1})),n},e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.animate=!0,e},e.prototype.innerAddChild=function(t,e,n){var r=this,i=t.data;i&&(i.x=t.x,i.y=t.y,i.depth=t.depth);var o=r.addItem("node",i,!1);if(e){if(o.set("parent",e),n){var a=e.get("originAttrs");if(a)o.set("originAttrs",a);else{var s=e.getModel();o.set("originAttrs",{x:s.x,y:s.y})}}var l=e.get("children");l?l.push(o):e.set("children",[o]),r.addItem("edge",{source:e.get("id"),target:o.get("id"),id:"".concat(e.get("id"),":").concat(o.get("id"))},!1)}return Object(RE["each"])(t.children||[],(function(t){r.innerAddChild(t,o,n)})),r.emit("afteraddchild",{item:o,parent:e}),o},e.prototype.innerUpdateChild=function(t,n,r){var i=this,o=i.findById(t.id);if(o){Object(RE["each"])(t.children||[],(function(t){i.innerUpdateChild(t,o,r)}));var a,s,l=o.get("children");if(l){var u=l.length;if(u>0)for(var c=l.length-1;c>=0;c--){var h=l[c].getModel();-1===e.indexOfChild(t.children||[],h.id)&&(i.innerRemoveChild(h.id,{x:t.x,y:t.y},r),l.splice(c,1))}}o.get("originAttrs")&&(a=o.get("originAttrs").x,s=o.get("originAttrs").y);var d=o.getModel();r&&o.set("originAttrs",{x:d.x,y:d.y}),o.set("model",Object.assign(d,t.data)),a===t.x&&s===t.y||o.updatePosition({x:t.x,y:t.y})}else i.innerAddChild(t,n,r)},e.prototype.innerRemoveChild=function(t,e,n){var r=this,i=r.findById(t);if(i)if(Object(RE["each"])(i.get("children"),(function(t){r.innerRemoveChild(t.getModel().id,e,n)})),n){var o=i.getModel();i.set("to",e),i.set("originAttrs",{x:o.x,y:o.y}),r.get("removeList").push(i)}else r.removeItem(i,!1)},e.prototype.changeData=function(t,e){void 0===e&&(e=!0);var n=this;this.getNodes().map((function(t){return n.clearItemStates(t)})),this.getEdges().map((function(t){return n.clearItemStates(t)})),e&&this.get("enabledStack")&&this.pushStack("changedata",{before:n.get("originData"),after:t||n.get("data")}),t?(n.data(t),n.render(!1)):n.layout(this.get("fitView"))},e.prototype.changeLayout=function(t){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon");var e=this;e.updateLayout(t)},e.prototype.updateLayout=function(t,e,n,r){void 0===r&&(r=!0);var i=this;if(t){if(r&&this.get("enabledStack")&&this.pushStack("layout",{before:i.get("layout"),after:t}),i.set("layout",t),i.set("layoutMethod",i.getLayout()),i.layout(),e){var o=n;o||(o="begin"===e?{x:0,y:0}:{x:this.getWidth()/2,y:this.getHeight()/2}),o=this.getPointByCanvas(o.x,o.y);var a=this.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];o.x=o.x*a[0]+a[6],o.y=o.y*a[0]+a[7];var s=this.getGroup().getCanvasBBox(),l=s.minX,u=s.maxX,c=s.minY,h=s.maxY,d={x:(l+u)/2,y:(c+h)/2};"begin"===e&&(d.x=l,d.y=c),this.translate(o.x-d.x,o.y-d.y)}}else console.warn("layout cannot be null")},e.prototype.refreshLayout=function(t){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon");var e=this;e.layout(t)},e.prototype.layout=function(t){var e=this,n=this,r=n.get("data"),i=n.get("layoutMethod"),o=n.get("layout"),a=r;if(null===o||void 0===o?void 0:o.excludeInvisibles){r=Object(RE["clone"])(n.get("data"));var s={};hP(r,(function(t){var n=t.children;if(!(null===n||void 0===n?void 0:n.length))return!0;for(var r=n.length-1;r>=0;r--){var i=e.findById(n[r].id),o=i?!i.isVisible():!1===n[r].visible;o&&(s[t.id]=s[t.id]||[],s[t.id].push({idx:r,child:n.splice(r,1)[0]}))}})),a=i?i(r,n.get("layout")):r,hP(a,(function(t){var e=s[t.id];if(null===e||void 0===e?void 0:e.length)for(var n=e.length-1;n>=0;n--){var r=e[n],i=r.idx,o=r.child;t.children.splice(i,0,o)}}))}else a=i?i(r,n.get("layout")):r;var l=n.get("animate");if(n.emit("beforerefreshlayout",{data:r,layoutData:a}),n.emit("beforelayout"),n.innerUpdateChild(a,void 0,l),t){var u=n.get("viewController");u.fitView()}l?n.layoutAnimate(a):(n.refresh(),n.paint()),n.emit("afterrefreshlayout",{data:r,layoutData:a}),n.emit("afterlayout")},e.prototype.addChild=function(t,e,n){void 0===n&&(n=!0);var r=this;r.emit("beforeaddchild",{model:t,parent:e}),Object(RE["isString"])(e)||(e=e.get("id"));var i=r.findDataById(e);if(i){i.children||(i.children=[]),i.children.push(t);var o=r.findById(e);o.refresh(),r.changeData(void 0,n)}},e.prototype.updateChildren=function(t,e,n){void 0===n&&(n=!0);var r=this,i=r.findById(e);if(e&&i){var o=r.findDataById(e);o.children=t,i.refresh(),r.changeData(void 0,n)}else console.warn("Update children failed! There is no node with id '".concat(e,"'"))},e.prototype.updateChild=function(t,n,r){void 0===r&&(r=!0);var i=this;if(n&&i.findById(n)){var o=i.findDataById(n),a=i.findById(t.id);if(o.children||(o.children=[]),a){var s=e.indexOfChild(o.children,t.id);s>-1&&(o.children[s]=t)}else o.children.push(t);var l=i.findById(n);null===l||void 0===l||l.refresh(),i.changeData(void 0,r)}else i.changeData(t,r)},e.prototype.removeChild=function(t,n){void 0===n&&(n=!0);var r,i=this,o=i.findById(t);if(r=o?null===o||void 0===o?void 0:o.get("parent"):i.getNodes().find((function(e){var n=e.getModel().children||[];return!!n.find((function(e){return e.id===t}))})),r&&!r.destroyed){var a=r.get("id"),s=i.findDataById(a),l=s&&s.children||[],u=e.indexOfChild(l,t);l.splice(u,1),r.refresh()}i.changeData(void 0,n)},e.prototype.findDataById=function(t,e){var n=this;if(e||(e=n.get("data")),t===e.id)return e;var r=null;return Object(RE["each"])(e.children||[],(function(e){return e.id===t?(r=e,!1):(r=n.findDataById(t,e),!r&&void 0)})),r},e.prototype.layoutAnimate=function(t,e){var n=this,r=this.get("animateCfg");n.emit("beforeanimate",{data:t}),n.getEdges().forEach((function(t){var e=t.get("model");e.sourceAnchor||(e.sourceAnchor=t.get("sourceAnchorIndex"))})),this.get("canvas").animate((function(r){hP(t,(function(i){var o=n.findById(i.id);if(o){var a=o.get("originAttrs"),s=o.get("model");if(a||(a={x:s.x,y:s.y},o.set("originAttrs",a)),e){var l=e(o,r,a,t);o.set("model",Object.assign(s,l))}else s.x=a.x+(i.x-a.x)*r,s.y=a.y+(i.y-a.y)*r}return!0})),Object(RE["each"])(n.get("removeList"),(function(t){var e=t.getModel(),n=t.get("originAttrs"),i=t.get("to");e.x=n.x+(i.x-n.x)*r,e.y=n.y+(i.y-n.y)*r})),n.refreshPositions()}),{duration:r.duration,easing:r.ease,callback:function(){Object(RE["each"])(n.getNodes(),(function(t){t.set("originAttrs",null)})),Object(RE["each"])(n.get("removeList"),(function(t){n.removeItem(t,!1)})),n.set("removeList",[]),r.callback&&r.callback(),n.emit("afteranimate",{data:t})},delay:r.delay})},e.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},e.prototype.isLayoutAnimating=function(){return this.layoutAnimating},e.prototype.render=function(t){void 0===t&&(t=!0);var e=this,n=e.get("data");if(!n||!Object(RE["isObject"])(n)||!Object.keys(n).length)throw new Error("data must be defined first");e.clear(),t&&this.get("enabledStack")&&this.clearStack(),e.emit("beforerender"),e.layout(this.get("fitView")),e.emit("afterrender")},e.prototype.save=function(){return this.get("data")},e.prototype.data=function(e){t.prototype.data.call(this,e),this.set("originData",uP(e))},e}(aP),fP=dP,pP=function(){function t(t){this._cfgs=Object(RE["deepMix"])(this.getDefaultCfgs(),t),this._events={},this.destroyed=!1}return t.prototype.getDefaultCfgs=function(){return{}},t.prototype.initPlugin=function(t){var e=this;e.set("graph",t);var n=e.getEvents(),r={};Object(RE["each"])(n,(function(n,i){var o=Object(RE["wrapBehavior"])(e,n);r[i]=o,t.on(i,o)})),this._events=r,this.init()},t.prototype.getEvents=function(){return{}},t.prototype.get=function(t){var e;return null===(e=this._cfgs)||void 0===e?void 0:e[t]},t.prototype.set=function(t,e){this._cfgs[t]=e},t.prototype.destroy=function(){},t.prototype.destroyPlugin=function(){this.destroy();var t=this.get("graph"),e=this._events;Object(RE["each"])(e,(function(e,n){t.off(n,e)})),this._events=null,this._cfgs=null,this.destroyed=!0},t}(),gP=pP,mP=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),yP="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",vP=function(t){function e(e){return t.call(this,e)||this}return mP(e,t),e.prototype.getDefaultCfgs=function(){return{img:yP,follow:!0}},e.prototype.init=function(){var t=this.get("graph"),e=t.get("container"),n=t.get("canvas").get("el"),r=this.get("img")||yP;r.includes("url(")||(r='url("'.concat(r,'")'));var i=Fk("<div class='g6-grid-container' style=\"position:absolute;overflow:hidden;z-index: -1;\"></div>"),o=Fk("<div\n        class='g6-grid'\n        style='position:absolute;\n        background-image: ".concat(r,";\n        user-select: none\n        '></div>"));this.set("container",i),this.set("gridContainer",o),this.positionInit(),i.appendChild(o),e.insertBefore(i,n)},e.prototype.positionInit=function(){var t=this.get("graph"),e=t.get("minZoom"),n=t.get("width"),r=t.get("height");jk(this.get("container"),{width:"".concat(n,"px"),height:"".concat(r,"px")});var i=80*n/e,o=80*r/e;jk(this.get("gridContainer"),{width:"".concat(i,"px"),height:"".concat(o,"px"),left:"-".concat(i/2,"px"),top:"-".concat(o/2,"px")})},e.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},e.prototype.updateGrid=function(t){var e=this.get("gridContainer"),n=t.matrix;n||(n=[1,0,0,0,1,0,0,0,1]);var r=this.get("follow"),i="matrix(".concat(n[0],", ").concat(n[1],", ").concat(n[3],", ").concat(n[4],", ").concat(r?n[6]:"0",", ").concat(r?n[7]:"0",")");jk(e,{transform:i})},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t=this.get("graph"),e=t.get("container"),n=this.get("container");e.removeChild(n)},e}(gP),bP=vP,_P=n("1aef"),xP=n.n(_P),wP=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();"undefined"!==typeof document&&xP()("\n  .g6-component-contextmenu {\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    background-color: rgba(255, 255, 255, 0.9);\n    padding: 10px 8px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n  }\n  .g6-contextmenu-ul {\n    padding: 0;\n    margin: 0;\n    list-style: none;\n  }\n\n");var SP=function(t){function e(e){return t.call(this,e)||this}return wP(e,t),e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(t){return"\n          <ul class='g6-contextmenu-ul'>\n            <li>菜单项1</li>\n            <li>菜单项2</li>\n          </ul>\n        "},shouldBegin:function(t){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},e.prototype.getEvents=function(){return"click"===this.get("trigger")?{click:"onMenuShow",touchend:"onMenuShow"}:{contextmenu:"onMenuShow"}},e.prototype.init=function(){var t=this.get("className"),e=Fk("<div class=".concat(t||"g6-component-contextmenu","></div>"));jk(e,{top:"0px",position:"absolute",visibility:"hidden"});var n=this.get("container");n||(n=this.get("graph").get("container")),Object(RE["isString"])(n)&&(n=document.getElementById(n)),n.appendChild(e),this.set("menu",e)},e.prototype.onMenuShow=function(t){var e=this;t.preventDefault();var n=this.get("itemTypes");if(t.item){if(t.item&&t.item.getType&&-1===n.indexOf(t.item.getType()))return void e.onMenuHide()}else if(-1===n.indexOf("canvas"))return void e.onMenuHide();var r=this.get("shouldBegin");if(r(t)){var i=this.get("menu"),o=this.get("getContent"),a=this.get("graph"),s=o(t,a);Object(RE["isString"])(s)?i.innerHTML=s:i.innerHTML=s.outerHTML,this.removeMenuEventListener();var l=this.get("handleMenuClick");if(l){var u=function(e){l(e.target,t.item,a)};this.set("handleMenuClickWrapper",u),i.addEventListener("click",u)}var c=a.get("width"),h=a.get("height"),d=i.getBoundingClientRect(),f=this.get("offsetX")||0,p=this.get("offsetY")||0,g=a.getContainer().offsetTop,m=a.getContainer().offsetLeft,y=t.canvasX+m+f,v=t.canvasY+g+p;y+d.width>c&&(y=t.canvasX-d.width-f+m),v+d.height>h&&(v=t.canvasY-d.height-p+g),v<0&&(v=0),jk(i,{top:"".concat(v,"px"),left:"".concat(y,"px"),visibility:"visible"});var b="click"===this.get("trigger"),_=function(t){b?b=!1:e.onMenuHide()};document.body.addEventListener("click",_),this.set("handler",_)}},e.prototype.removeMenuEventListener=function(){var t=this.get("handleMenuClickWrapper"),e=this.get("handler");if(t){var n=this.get("menu");n.removeEventListener("click",t),this.set("handleMenuClickWrapper",null)}e&&document.body.removeEventListener("click",e)},e.prototype.onMenuHide=function(){var t=this.get("menu");t&&jk(t,{visibility:"hidden"}),this.removeMenuEventListener()},e.prototype.destroy=function(){var t=this.get("menu");if(this.removeMenuEventListener(),t){var e=this.get("container");e||(e=this.get("graph").get("container")),Object(RE["isString"])(e)&&(e=document.getElementById(e)),e.removeChild(t)}},e}(gP),EP=SP,CP=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),MP=function(){return MP=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},MP.apply(this,arguments)},TP=Math.max,AP=UE["a"].transform,OP="default",kP="keyShape",IP="delegate",PP="svg",LP=function(t){function e(e){var n=t.call(this,e)||this;return n.handleUpdateCanvas=Object(RE["debounce"])((function(t){var e=n;e.destroyed||e.updateCanvas()}),100,!1),n}return CP(e,t),e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0,hideEdge:!1}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,e=this._cfgs,n=e.size,r=e.graph;if(!this.destroyed){var i=this.get("canvas"),o=i.get("container"),a=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,s=navigator.userAgent.toLowerCase().indexOf("safari")>-1,l=Fk("\n      <div\n        class=".concat(e.viewportClassName,"\n        style='position:absolute;\n          left:0;\n          top:0;\n          box-sizing:border-box;\n          outline: 2px solid #1980ff;\n          cursor:move'\n        draggable=").concat(!s&&!a,"\n      </div>")),u=0,c=0,h=!1,d=0,f=0,p=0,g=0,m=0,y=0,v=s||a?"mousedown":"dragstart";l.addEventListener(v,(function(i){var o,a;if(i.dataTransfer){var s=new Image;s.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",null===(a=(o=i.dataTransfer).setDragImage)||void 0===a||a.call(o,s,0,0);try{i.dataTransfer.setData("text/html","view-port-minimap")}catch(b){i.dataTransfer.setData("text","view-port-minimap")}}if(e.refresh=!1,i.target===l){var v=l.style;d=parseInt(v.left,10),f=parseInt(v.top,10),p=parseInt(v.width,10),g=parseInt(v.height,10),p>n[0]||g>n[1]||(y=r.getZoom(),m=t.get("ratio"),h=!0,u=i.clientX,c=i.clientY)}}),!1);var b=function(t){if(h&&!Object(RE["isNil"])(t.clientX)&&!Object(RE["isNil"])(t.clientY)){var e=u-t.clientX,i=c-t.clientY;(d-e<0||d-e+p>=n[0])&&(e=0),(f-i<0||f-i+g>=n[1])&&(i=0),d-=e,f-=i,jk(l,{left:"".concat(d,"px"),top:"".concat(f,"px")}),r.translate(e*y/m,i*y/m),u=t.clientX,c=t.clientY}};s||a||l.addEventListener("drag",b,!1);var _=function(){h=!1,e.refresh=!0},x=s||a?"mouseup":"dragend";l.addEventListener(x,_,!1),o.addEventListener("mouseleave",_),o.addEventListener("mouseup",_),(s||a)&&o.addEventListener("mousemove",b,!1),this.set("viewport",l),o.appendChild(l)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),e=this.get("totaldx"),n=this.get("totaldy"),r=this.get("graph"),i=this.get("size"),o=r.get("canvas").get("el"),a=r.get("width")||o.scrollWidth||500,s=r.get("height")||o.scrollHeight||500,l=r.getPointByCanvas(0,0),u=r.getPointByCanvas(a,s),c=this.get("viewport");c||this.initViewport();var h=(u.x-l.x)*t,d=(u.y-l.y)*t,f=l.x*t+e,p=l.y*t+n,g=f+h,m=p+d;f<0&&(h+=f,f=0),g>i[0]&&(h-=g-i[0]),p<0&&(d+=p,p=0),m>i[1]&&(d-=m-i[1]),this.set("ratio",t);var y="".concat(f,"px"),v="".concat(p,"px");jk(c,{left:y,top:v,width:"".concat(h,"px"),height:"".concat(d,"px")})}},e.prototype.updateGraphShapes=function(){var t=this._cfgs.graph,e=this.get("canvas"),n=t.get("group");if(!n.destroyed){var r;e.clear(),this.get("hideEdge")?(r=e.addGroup(),n.get("children").forEach((function(t){t.get("id").includes("-edge")||r.add(t.clone())}))):(r=n.clone(),r.resetMatrix(),e.add(r));var i=t.get("renderer");i===PP&&this.updateVisible(r)}},e.prototype.updateVisible=function(t){var e=this;if(t.isGroup()||t.get("visible")){var n=t.get("children");if(!n||!n.length)return;n.forEach((function(t){t.get("visible")||t.hide(),e.updateVisible(t)}))}else t.hide()},e.prototype.updateKeyShapes=function(){var t=this,e=this._cfgs.graph,n=this.get("canvas"),r=n.get("children")[0]||n.addGroup();this.get("hideEdge")||Object(RE["each"])(e.getEdges(),(function(e){t.updateOneEdgeKeyShape(e,r)})),Object(RE["each"])(e.getNodes(),(function(e){t.updateOneNodeKeyShape(e,r)}));var i=e.getCombos();if(i&&i.length){var o=r.find((function(t){return"comboGroup"===t.get("name")}))||r.addGroup({name:"comboGroup"});setTimeout((function(){t.destroyed||(Object(RE["each"])(i,(function(e){t.updateOneComboKeyShape(e,o)})),null===o||void 0===o||o.sort(),null===o||void 0===o||o.toBack(),t.updateCanvas())}),250)}this.clearDestroyedShapes()},e.prototype.updateOneComboKeyShape=function(t,e){if(!this.destroyed){var n=this.get("itemMap")||{},r=n[t.get("id")],i=t.getBBox(),o=t.get("keyShape").clone(),a=o.attr(),s={x:i.centerX,y:i.centerY};r?s=Object.assign(a,s):(r=o,e.add(r));var l=r.get("type");"rect"!==l&&"image"!==l||(s.x=i.minX,s.y=i.minY),r.attr(s),t.isVisible()?r.show():r.hide(),r.exist=!0;var u=t.getModel().depth;isNaN(u)||r.set("zIndex",u),n[t.get("id")]=r,this.set("itemMap",n)}},e.prototype.updateOneNodeKeyShape=function(t,e){var n=this.get("itemMap")||{},r=n[t.get("id")],i=t.getBBox(),o=t.get("keyShape").clone(),a=o.attr(),s={x:i.centerX,y:i.centerY};r?(s=Object.assign(a,s),r.toFront()):(r=o,e.add(r));var l=r.get("type");"rect"!==l&&"image"!==l||(s.x=i.minX,s.y=i.minY),r.attr(s),t.isVisible()?r.show():r.hide(),r.exist=!0;var u=t.getModel().depth;isNaN(u)||r.set("zIndex",u),n[t.get("id")]=r,this.set("itemMap",n)},e.prototype.updateDelegateShapes=function(){var t=this,e=this._cfgs.graph,n=this.get("canvas"),r=n.get("children")[0]||n.addGroup();this.get("hideEdge")||Object(RE["each"])(e.getEdges(),(function(e){t.updateOneEdgeKeyShape(e,r)})),Object(RE["each"])(e.getNodes(),(function(e){t.updateOneNodeDelegateShape(e,r)}));var i=e.getCombos();if(i&&i.length){var o=r.find((function(t){return"comboGroup"===t.get("name")}))||r.addGroup({name:"comboGroup"});setTimeout((function(){t.destroyed||(Object(RE["each"])(i,(function(e){t.updateOneComboKeyShape(e,o)})),null===o||void 0===o||o.sort(),null===o||void 0===o||o.toBack(),t.updateCanvas())}),250)}this.clearDestroyedShapes()},e.prototype.clearDestroyedShapes=function(){var t=this.get("itemMap")||{},e=Object.keys(t);if(e&&0!==e.length)for(var n=e.length-1;n>=0;n--){var r=t[e[n]],i=r.exist;r.exist=!1,i||(r.remove(),delete t[e[n]])}},e.prototype.updateOneEdgeKeyShape=function(t,e){var n=this.get("itemMap")||{},r=n[t.get("id")];if(r){var i=t.get("keyShape").attr("path");r.attr("path",i)}else r=t.get("keyShape").clone(),e.add(r);t.isVisible()?r.show():r.hide(),r.exist=!0,n[t.get("id")]=r,this.set("itemMap",n)},e.prototype.updateOneNodeDelegateShape=function(t,e){var n=this.get("delegateStyle"),r=this.get("itemMap")||{},i=r[t.get("id")],o=t.getBBox();if(i){var a={x:o.minX,y:o.minY,width:o.width,height:o.height};i.attr(a),i.toFront()}else i=e.addShape("rect",{attrs:MP({x:o.minX,y:o.minY,width:o.width,height:o.height},n),name:"minimap-node-shape"});t.isVisible()?i.show():i.hide(),i.exist=!0,r[t.get("id")]=i,this.set("itemMap",r)},e.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},e.prototype.initContainer=function(){var t=this,e=t.get("graph"),n=t.get("size"),r=t.get("className"),i=t.get("container"),o=Fk("<div class='".concat(r,"' style='width: ").concat(n[0],"px; height: ").concat(n[1],"px; overflow: hidden'></div>"));Object(RE["isString"])(i)&&(i=document.getElementById(i)),i?i.appendChild(o):e.get("container").appendChild(o),t.set("container",o);var a,s=Fk('<div class="g6-minimap-container" style="position: relative;"></div>');o.appendChild(s),s.addEventListener("dragenter",(function(t){t.preventDefault()})),s.addEventListener("dragover",(function(t){t.preventDefault()}));var l=e.get("renderer");a=l===PP?new Nk["Canvas"]({container:s,width:n[0],height:n[1]}):new Lk["Canvas"]({container:s,width:n[0],height:n[1]}),t.set("canvas",a),t.updateCanvas()},e.prototype.updateCanvas=function(){if(!this.destroyed){var t=this.get("refresh");if(t){var e=this.get("graph");if(!e.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var n=this.get("size"),r=this.get("canvas"),i=this.get("type"),o=this.get("padding");if(!r.destroyed){switch(i){case OP:this.updateGraphShapes();break;case kP:this.updateKeyShapes();break;case IP:this.updateDelegateShapes();break;default:break}var a=r.get("children")[0];if(a){a.resetMatrix();var s=a.getCanvasBBox(),l=e.get("canvas").getCanvasBBox(),u=e.getZoom()||1,c=l.width/u,h=l.height/u;Number.isFinite(s.width)&&(c=TP(s.width,c),h=TP(s.height,h)),c+=2*o,h+=2*o;var d=Math.min(n[0]/c,n[1]/h),f=[1,0,0,0,1,0,0,0,1],p=0,g=0;Number.isFinite(s.minX)&&(p=-s.minX),Number.isFinite(s.minY)&&(g=-s.minY);var m=(n[0]-(c-2*o)*d)/2,y=(n[1]-(h-2*o)*d)/2;f=AP(f,[["t",p,g],["s",d,d],["t",m,y]]),a.setMatrix(f),this.set("ratio",d),this.set("totaldx",m+p*d),this.set("totaldy",y+g*d),this.set("dx",m),this.set("dy",y),this.updateViewport()}}}}}},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t;null===(t=this.get("canvas"))||void 0===t||t.destroy();var e=this.get("container");(null===e||void 0===e?void 0:e.parentNode)&&e.parentNode.removeChild(e)},e}(gP),NP=LP,RP=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function DP(t,e,n){var r=t.x-e.x,i=t.y-e.y;return!n||Math.abs(r)>n||Math.abs(i)>n?Math.sqrt(r*r+i*i):n}function FP(t,e){return t.x*e.x+t.y*e.y}function jP(t,e){var n=(e.source.y-e.target.y)/(e.source.x-e.target.x),r=(n*n*e.source.x+n*(t.y-e.source.y)+t.x)/(n*n+1),i=n*(r-e.source.x)+e.source.y;return{x:r,y:i}}var BP=function(t){function e(e){return t.call(this,e)||this}return RP(e,t),e.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},e.prototype.init=function(){var t=this.get("graph"),e=this.get("onTick"),n=function(){e&&e(),t.refreshPositions()};this.set("tick",n)},e.prototype.bundling=function(t){var e=this;if(e.set("data",t),!e.isTicking()){var n=t.edges||[],r=t.nodes||[],i={},o=!1;if(r.forEach((function(t){null!==t.x&&null!==!t.y&&void 0!==t.x&&void 0!==!t.y||(o=!0),i[t.id]=t})),o)throw new Error("please layout the graph or assign x and y for nodes first");e.set("nodeIdMap",i);var a=e.get("divisions"),s=e.get("divRate"),l=e.divideEdges(a);e.set("edgePoints",l);var u=e.getEdgeBundles();e.set("edgeBundles",u);for(var c=e.get("cycles"),h=e.get("iterations"),d=e.get("iterRate"),f=e.get("lambda"),p=0;p<c;p++){for(var g=function(t){var r=[];n.forEach((function(t,n){if(t.source!==t.target){var o=i[t.source],s=i[t.target];r[n]=e.getEdgeForces({source:o,target:s},n,a,f);for(var u=0;u<a+1;u++)l[n][u].x+=r[n][u].x,l[n][u].y+=r[n][u].y}}))},m=0;m<h;m++)g(m);f/=2,a*=s,h*=d,l=e.divideEdges(a),e.set("edgePoints",l)}n.forEach((function(t,e){t.source!==t.target&&(t.type="polyline",t.controlPoints=l[e].slice(1,l[e].length-1))}));var y=e.get("graph");y.refresh()}},e.prototype.updateBundling=function(t){var e=this,n=t.data;if(n&&e.set("data",n),e.get("ticking")&&e.set("ticking",!1),Object.keys(t).forEach((function(n){e.set(n,t[n])})),t.onTick){var r=this.get("graph");e.set("tick",(function(){t.onTick(),r.refresh()}))}e.bundling(n)},e.prototype.divideEdges=function(t){var e=this,n=e.get("data").edges,r=e.get("nodeIdMap"),i=e.get("edgePoints");return i&&void 0!==i||(i=[]),n.forEach((function(n,o){var a;i[o]&&void 0!==i[o]||(i[o]=[]);var s=r[n.source],l=r[n.target];if(1===t)i[o].push({x:s.x,y:s.y}),i[o].push({x:.5*(s.x+l.x),y:.5*(s.y+l.y)}),i[o].push({x:l.x,y:l.y});else{var u=0;u=(null===(a=i[o])||void 0===a?void 0:a.length)?e.getEdgeLength(i[o]):DP({x:s.x,y:s.y},{x:l.x,y:l.y});var c=u/(t+1),h=c,d=[{x:s.x,y:s.y}];i[o].forEach((function(t,e){if(0!==e){var n=DP(t,i[o][e-1]);while(n>h){var r=h/n,a={x:i[o][e-1].x,y:i[o][e-1].y};a.x+=r*(t.x-i[o][e-1].x),a.y+=r*(t.y-i[o][e-1].y),d.push(a),n-=h,h=c}h-=n}})),d.push({x:l.x,y:l.y}),i[o]=d}})),i},e.prototype.getEdgeLength=function(t){var e=0;return t.forEach((function(n,r){0!==r&&(e+=DP(n,t[r-1]))})),e},e.prototype.getEdgeBundles=function(){var t=this,e=t.get("data"),n=e.edges||[],r=t.get("bundleThreshold"),i=t.get("nodeIdMap"),o=t.get("edgeBundles");return o||(o=[]),n.forEach((function(t,e){o[e]&&void 0!==o[e]||(o[e]=[])})),n.forEach((function(e,a){var s=i[e.source],l=i[e.target];n.forEach((function(e,n){if(!(n<=a)){var u=i[e.source],c=i[e.target],h=t.getBundleScore({source:s,target:l},{source:u,target:c});h>=r&&(o[a].push(n),o[n].push(a))}}))})),o},e.prototype.getBundleScore=function(t,e){var n=this;t.vx=t.target.x-t.source.x,t.vy=t.target.y-t.source.y,e.vx=e.target.x-e.source.x,e.vy=e.target.y-e.source.y,t.length=DP({x:t.source.x,y:t.source.y},{x:t.target.x,y:t.target.y}),e.length=DP({x:e.source.x,y:e.source.y},{x:e.target.x,y:e.target.y});var r=n.getAngleScore(t,e),i=n.getScaleScore(t,e),o=n.getPositionScore(t,e),a=n.getVisibilityScore(t,e);return r*i*o*a},e.prototype.getAngleScore=function(t,e){var n=FP({x:t.vx,y:t.vy},{x:e.vx,y:e.vy});return n/(t.length*e.length)},e.prototype.getScaleScore=function(t,e){var n=(t.length+e.length)/2,r=2/(n/Math.min(t.length,e.length)+Math.max(t.length,e.length)/n);return r},e.prototype.getPositionScore=function(t,e){var n=(t.length+e.length)/2,r={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2},i={x:(e.source.x+e.target.x)/2,y:(e.source.y+e.target.y)/2},o=DP(r,i);return n/(n+o)},e.prototype.getVisibilityScore=function(t,e){var n=this.getEdgeVisibility(t,e),r=this.getEdgeVisibility(e,t);return n<r?n:r},e.prototype.getEdgeVisibility=function(t,e){var n=jP(e.source,t),r=jP(e.target,t),i={x:(n.x+r.x)/2,y:(n.y+r.y)/2},o={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2};return Math.max(0,1-2*DP(i,o)/DP(n,r))},e.prototype.getEdgeForces=function(t,e,n,r){for(var i=this,o=i.get("edgePoints"),a=i.get("K"),s=a/(DP(t.source,t.target)*(n+1)),l=[{x:0,y:0}],u=1;u<n;u++){var c={x:0,y:0},h=i.getSpringForce({pre:o[e][u-1],cur:o[e][u],next:o[e][u+1]},s),d=i.getElectrostaticForce(u,e);c.x=r*(h.x+d.x),c.y=r*(h.y+d.y),l.push(c)}return l.push({x:0,y:0}),l},e.prototype.getSpringForce=function(t,e){var n=t.pre.x+t.next.x-2*t.cur.x,r=t.pre.y+t.next.y-2*t.cur.y;return n*=e,r*=e,{x:n,y:r}},e.prototype.getElectrostaticForce=function(t,e){var n=this,r=n.get("eps"),i=n.get("edgeBundles"),o=n.get("edgePoints"),a=i[e],s={x:0,y:0};return a.forEach((function(n){var i={x:o[n][t].x-o[e][t].x,y:o[n][t].y-o[e][t].y};if(Math.abs(i.x)>r||Math.abs(i.y)>r){var a=DP(o[n][t],o[e][t]),l=1/a;s.x+=i.x*l,s.y+=i.y*l}})),s},e.prototype.isTicking=function(){return this.get("ticking")},e.prototype.getSimulation=function(){return this.get("forceSimulation")},e.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),t.prototype.destroy.call(this)},e}(gP),zP=BP,UP=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),GP=function(){return GP=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},GP.apply(this,arguments)},qP=.05,VP={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},HP=function(t){function e(e){return t.call(this,e)||this}return UP(e,t),e.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:Object(RE["clone"])(VP),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"magnify"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"magnify"};break}return t},e.prototype.init=function(){var t=this,e=t.get("r");t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{}),t.set("r2",e*e);var n=t.get("d");t.set("molecularParam",(n+1)*e)},e.prototype.createDelegate=function(t){var e=this,n=this,r=n.get("delegate");r&&!r.destroyed||(n.magnify(t),r=n.get("delegate"),r.on("dragstart",(function(t){n.set("delegateCenterDiff",{x:r.attr("x")-t.x,y:r.attr("y")-t.y})})),r.on("drag",(function(t){n.magnify(t)})),"wheel"===this.get("scaleDBy")&&r.on("mousewheel",(function(t){e.scaleDByWheel(t)})),"wheel"===this.get("scaleRBy")&&r.on("mousewheel",(function(t){n.scaleRByWheel(t)})))},e.prototype.scaleRByWheel=function(t){var e=this;if(t&&t.originalEvent){t.preventDefault&&t.preventDefault();var n,r=e.get("graph"),i=e.get("delegate"),o=i?{x:i.attr("x"),y:i.attr("y")}:void 0,a=o||r.getPointByClient(t.clientX,t.clientY);n=t.originalEvent.wheelDelta<0?1-qP:1/(1-qP);var s=e.get("maxR"),l=e.get("minR"),u=e.get("r");(u>(s||r.get("height"))&&n>1||u<(l||.05*r.get("height"))&&n<1)&&(n=1),u*=n,e.set("r",u),e.set("r2",u*u);var c=e.get("d");e.set("molecularParam",(c+1)*u),e.set("delegateCenterDiff",void 0),e.magnify(t,a)}},e.prototype.scaleRByDrag=function(t){var e=this;if(t){var n,r=e.get("dragPrePos"),i=e.get("graph"),o=i.getPointByClient(t.clientX,t.clientY);n=t.x-r.x<0?1-qP:1/(1-qP);var a=e.get("maxR"),s=e.get("minR"),l=e.get("r");(l>(a||i.get("height"))&&n>1||l<(s||.05*i.get("height"))&&n<1)&&(n=1),l*=n,e.set("r",l),e.set("r2",l*l);var u=e.get("d");e.set("molecularParam",(u+1)*l),e.magnify(t,o),e.set("dragPrePos",{x:t.x,y:t.y})}},e.prototype.scaleDByWheel=function(t){var e=this;if(t||t.originalEvent){t.preventDefault&&t.preventDefault();var n=0;n=t.originalEvent.wheelDelta<0?-.1:.1;var r=e.get("d"),i=r+n,o=e.get("maxD"),a=e.get("minD");if(i<o&&i>a){e.set("d",i);var s=e.get("r");e.set("molecularParam",(i+1)*s);var l=e.get("delegate"),u=l?{x:l.attr("x"),y:l.attr("y")}:void 0;e.set("delegateCenterDiff",void 0),e.magnify(t,u)}}},e.prototype.scaleDByDrag=function(t){var e=this,n=e.get("dragPrePos"),r=t.x-n.x>0?.1:-.1,i=e.get("d"),o=i+r,a=e.get("maxD"),s=e.get("minD");if(o<a&&o>s){e.set("d",o);var l=e.get("r");e.set("molecularParam",(o+1)*l),e.magnify(t)}e.set("dragPrePos",{x:t.x,y:t.y})},e.prototype.magnify=function(t,e){var n=this;n.restoreCache();var r=n.get("graph"),i=n.get("cachedMagnifiedModels"),o=n.get("cachedOriginPositions"),a=n.get("showLabel"),s=n.get("r"),l=n.get("r2"),u=n.get("d"),c=n.get("molecularParam"),h=r.getNodes(),d=h.length,f=e?{x:e.x,y:e.y}:{x:t.x,y:t.y};!n.get("dragging")||"mousemove"!==n.get("trigger")&&"click"!==n.get("trigger")||(f=n.get("cacheCenter"));var p=n.get("delegateCenterDiff");p&&(f.x+=p.x,f.y+=p.y),n.updateDelegate(f,s);for(var g=0;g<d;g++){var m=h[g].getModel(),y=m.x,v=m.y;if(!isNaN(y)&&!isNaN(v)){var b=(y-f.x)*(y-f.x)+(v-f.y)*(v-f.y);if(!isNaN(b)&&b<l&&0!==b){var _=Math.sqrt(b),x=c*_/(u*_+s),w=(y-f.x)/_,S=(v-f.y)/_;if(m.x=w*x+f.x,m.y=S*x+f.y,o[m.id]||(o[m.id]={x:y,y:v,texts:[]}),i.push(m),a&&2*_<s)for(var E=h[g],C=E.getContainer(),M=C.getChildren(),T=M.length,A=0;A<T;A++){var O=M[A];"text"===O.get("type")&&(o[m.id].texts.push({visible:O.get("visible"),shape:O}),O.set("visible",!0))}}}}r.refreshPositions()},e.prototype.restoreCache=function(){for(var t=this,e=t.get("cachedMagnifiedModels"),n=t.get("cachedOriginPositions"),r=e.length,i=0;i<r;i++){var o=e[i],a=o.id,s=n[a];o.x=s.x,o.y=s.y;for(var l=s.texts.length,u=0;u<l;u++){var c=s.texts[u];c.shape.set("visible",c.visible)}}t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{})},e.prototype.updateParams=function(t){var e=this,n=t.r,r=t.d,i=t.trigger,o=t.minD,a=t.maxD,s=t.minR,l=t.maxR,u=t.scaleDBy,c=t.scaleRBy;isNaN(t.r)||(e.set("r",n),e.set("r2",n*n)),isNaN(r)||e.set("d",r),isNaN(a)||e.set("maxD",a),isNaN(o)||e.set("minD",o),isNaN(l)||e.set("maxR",l),isNaN(s)||e.set("minR",s);var h=e.get("d"),d=e.get("r");if(e.set("molecularParam",(h+1)*d),"mousemove"!==i&&"click"!==i&&"drag"!==i||e.set("trigger",i),"drag"===u||"wheel"===u||"unset"===u){e.set("scaleDBy",u),e.get("delegate").remove(),e.get("delegate").destroy();var f=e.get("dPercentText");f&&(f.remove(),f.destroy())}if("drag"===c||"wheel"===c||"unset"===c){e.set("scaleRBy",c),e.get("delegate").remove(),e.get("delegate").destroy();f=e.get("dPercentText");f&&(f.remove(),f.destroy())}},e.prototype.updateDelegate=function(t,e){var n=this,r=this,i=r.get("graph"),o=r.get("delegate");if(!o||o.destroyed){var a=i.get("group"),s=r.get("delegateStyle")||VP;o=a.addShape("circle",{attrs:GP({r:e/1.5,x:t.x,y:t.y},s),name:"lens-shape",draggable:!0}),"drag"!==this.get("trigger")&&("wheel"===this.get("scaleRBy")?o.on("mousewheel",(function(t){r.scaleRByWheel(t)})):"drag"===this.get("scaleRBy")&&(o.on("dragstart",(function(t){r.set("dragging",!0),r.set("cacheCenter",{x:t.x,y:t.y}),r.set("dragPrePos",{x:t.x,y:t.y})})),o.on("drag",(function(t){r.scaleRByDrag(t)})),o.on("dragend",(function(t){r.set("dragging",!1)}))),"wheel"===this.get("scaleDBy")?o.on("mousewheel",(function(t){n.scaleDByWheel(t)})):"drag"===this.get("scaleDBy")&&(o.on("dragstart",(function(t){r.set("dragging",!0),r.set("cacheCenter",{x:t.x,y:t.y}),r.set("dragPrePos",{x:t.x,y:t.y})})),o.on("drag",(function(t){n.scaleDByDrag(t)})),o.on("dragend",(function(t){r.set("dragging",!1)}))))}else o.attr({x:t.x,y:t.y,r:e/1.5});if(r.get("showDPercent")){var l=Math.round((r.get("d")-r.get("minD"))/(r.get("maxD")-r.get("minD"))*100),u=r.get("dPercentText"),c=t.y+e/1.5+16;if(!u||u.destroyed){var h=i.get("group");u=h.addShape("text",{attrs:{text:"".concat(l,"%"),x:t.x,y:c,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),r.set("dPercentText",u)}else u.attr({text:"".concat(l,"%"),x:t.x,y:c})}r.set("delegate",o)},e.prototype.clear=function(){var t=this.get("graph");this.restoreCache(),t.refreshPositions();var e=this.get("delegate");e&&!e.destroyed&&(e.remove(),e.destroy());var n=this.get("dPercentText");n&&!n.destroyed&&(n.remove(),n.destroy())},e.prototype.destroy=function(){this.clear()},e}(gP),WP=HP,YP=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),XP=.05;"undefined"!==typeof document&&xP()("\n  .g6-component-toolbar {\n    position: absolute;\n    list-style-type: none;\n    padding: 6px;\n    left: 0px;\n    top: 0px;\n    background-color: rgba(255, 255, 255, 0.9);\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    margin: 0;\n  }\n  .g6-component-toolbar li {\n    float: left;\n    text-align: center;\n    width: 35px;\n    height: 24px;\n    cursor: pointer;\n\t\tlist-style-type:none;\n    list-style: none;\n    margin-left: 0px;\n  }\n  .g6-component-toolbar li .icon {\n    opacity: 0.7;\n  }\n  .g6-component-toolbar li .icon:hover {\n    opacity: 1;\n  }\n");var JP=function(t){if(!t)return[];if(t.composedPath)return t.composedPath();var e=[],n=t.target;while(n){if(e.push(n),"HTML"===n.tagName)return e.push(document,window),e;n=n.parentElement}return e},ZP=function(t){function e(e){return t.call(this,e)||this}return YP(e,t),e.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(t){return'\n          <ul class=\'g6-component-toolbar\'>\n            <li code=\'redo\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>\n              </svg>\n            </li>\n            <li code=\'undo\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>\n              </svg>\n            </li>\n            <li  code=\'zoomOut\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>\n              </svg>\n            </li>\n            <li code=\'zoomIn\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>\n              </svg>\n            </li>\n            <li code=\'realZoom\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">\n                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>\n              </svg>\n            </li>\n            <li code=\'autoZoom\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">\n                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>\n              </svg>\n            </li>\n          </ul>\n        '},zoomSensitivity:2}},e.prototype.init=function(){var t=this,e=this.get("graph"),n=this.get("getContent"),r=n(e),i=r;Object(RE["isString"])(r)&&(i=Fk(r));var o=this.get("className");i.setAttribute("class",o||"g6-component-toolbar");var a=this.get("container");a||(a=this.get("graph").get("container")),Object(RE["isString"])(a)&&(a=document.getElementById(a)),a.appendChild(i),this.set("toolBar",i);var s=this.get("handleClick");i.addEventListener("click",(function(n){var r=JP(n).filter((function(t){return"LI"===t.nodeName}));if(0!==r.length){var i=r[0].getAttribute("code");i&&(s?s(i,e):t.handleDefaultOperator(i))}}));var l=this.get("position");l&&jk(i,{top:"".concat(l.y,"px"),left:"".concat(l.x,"px")}),this.bindUndoRedo()},e.prototype.bindUndoRedo=function(){var t=this.get("graph"),e=document.querySelector('.g6-component-toolbar li[code="undo"]'),n=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),r=document.querySelector('.g6-component-toolbar li[code="redo"]'),i=document.querySelector('.g6-component-toolbar li[code="redo"] svg');e&&n&&r&&i&&(e.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4"),r.setAttribute("style","cursor: not-allowed"),i.setAttribute("style","opacity: 0.4"),t.on("stackchange",(function(t){var o=t.undoStack,a=t.redoStack,s=o.length,l=a.length;0===s?(e.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4")):(e.removeAttribute("style"),n.removeAttribute("style")),0===l?(r.setAttribute("style","cursor: not-allowed"),i.setAttribute("style","opacity: 0.4")):(r.removeAttribute("style"),i.removeAttribute("style"))})))},e.prototype.undo=function(){var t=this.get("graph"),e=t.getUndoStack();if(e&&0!==e.length){var n=e.pop();if(n){var r=n.action;t.pushStack(r,Object(RE["clone"])(n.data),"redo");var i=n.data.before;if("add"===r&&(i=n.data.after),!i)return;switch(r){case"visible":Object.keys(i).forEach((function(e){var n=i[e];n&&n.forEach((function(e){var n=t.findById(e.id);e.visible?t.showItem(n,!1):t.hideItem(n,!1)}))}));break;case"render":case"update":Object.keys(i).forEach((function(e){var n=i[e];n&&n.forEach((function(e){var n=t.findById(e.id);delete e.id,t.updateItem(n,e,!1),"combo"===n.getType()&&t.updateCombo(n)}))}));break;case"changedata":t.changeData(i,!1);break;case"delete":Object.keys(i).forEach((function(e){var n=i[e];n&&n.forEach((function(e){var n=e.itemType;delete e.itemType,t.addItem(n,e,!1)}))}));break;case"add":Object.keys(i).forEach((function(e){var n=i[e];n&&n.forEach((function(e){t.removeItem(e.id,!1)}))}));break;case"updateComboTree":Object.keys(i).forEach((function(e){var n=i[e];n&&n.forEach((function(e){t.updateComboTree(e.id,e.parentId,!1)}))}));break;case"createCombo":var o=n.data.after.combos,a=o[o.length-1];Object.keys(i).forEach((function(e){var n=i[e];n&&n.forEach((function(e){t.updateComboTree(e.id,e.parentId,!1)}))})),t.removeItem(a.id,!1);break;case"uncombo":var s=i.combos[i.combos.length-1],l=i.nodes.concat(i.combos).map((function(t){return t.id})).filter((function(t){return t!==s.id}));t.createCombo(s,l,!1);break;case"layout":t.updateLayout(i,void 0,void 0,!1);break;default:}}}},e.prototype.redo=function(){var t=this.get("graph"),e=t.getRedoStack();if(e&&0!==e.length){var n=e.pop();if(n){var r=n.action,i=n.data.after;if(t.pushStack(r,Object(RE["clone"])(n.data)),"delete"===r&&(i=n.data.before),!i)return;switch(r){case"visible":Object.keys(i).forEach((function(e){var n=i[e];n&&n.forEach((function(e){var n=t.findById(e.id);e.visible?t.showItem(n,!1):t.hideItem(n,!1)}))}));break;case"render":case"update":Object.keys(i).forEach((function(e){var n=i[e];n&&n.forEach((function(e){var n=t.findById(e.id);delete e.id,t.updateItem(n,e,!1),"combo"===n.getType()&&t.updateCombo(n)}))}));break;case"changedata":t.changeData(i,!1);break;case"delete":i.edges&&i.edges.forEach((function(e){t.removeItem(e.id,!1)})),i.nodes&&i.nodes.forEach((function(e){t.removeItem(e.id,!1)})),i.combos&&i.combos.forEach((function(e){t.removeItem(e.id,!1)}));break;case"add":Object.keys(i).forEach((function(e){var n=i[e];n&&n.forEach((function(e){var n=e.itemType;delete e.itemType,t.addItem(n,e,!1)}))}));break;case"updateComboTree":Object.keys(i).forEach((function(e){var n=i[e];n&&n.forEach((function(e){t.updateComboTree(e.id,e.parentId,!1)}))}));break;case"createCombo":var o=i.combos[i.combos.length-1];t.createCombo(o,o.children.map((function(t){return t.id})),!1);break;case"uncombo":var a=n.data.before.combos,s=a[a.length-1];t.uncombo(s.id,!1);break;case"layout":t.updateLayout(i,void 0,void 0,!1);break;default:}}}},e.prototype.zoomOut=function(){var t=this.get("graph"),e=t.getZoom(),n=1/(1-XP*this.get("zoomSensitivity")),r=this.get("maxZoom")||t.get("maxZoom");n*e>r||t.zoomTo(e*n)},e.prototype.zoomIn=function(){var t=this.get("graph"),e=t.getZoom(),n=1-XP*this.get("zoomSensitivity"),r=this.get("minZoom")||t.get("minZoom");n*e<r||t.zoomTo(e*n)},e.prototype.realZoom=function(){var t=this.get("graph");t.zoomTo(1)},e.prototype.autoZoom=function(){var t=this.get("graph");t.fitView([20,20])},e.prototype.handleDefaultOperator=function(t){switch(t){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":this.zoomOut();break;case"zoomIn":this.zoomIn();break;case"realZoom":this.realZoom();break;case"autoZoom":this.autoZoom();break;default:}},e.prototype.destroy=function(){var t=this.get("toolBar");if(t){var e=this.get("container");e||(e=this.get("graph").get("container")),Object(RE["isString"])(e)&&(e=document.getElementById(e)),e.removeChild(t)}var n=this.get("handleClick");n&&t.removeEventListener("click",n)},e}(gP),KP=ZP,QP=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();"undefined"!==typeof document&&xP()("\n  .g6-component-tooltip {\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    background-color: rgba(255, 255, 255, 0.9);\n    padding: 10px 8px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n  }\n  .tooltip-type {\n    padding: 0;\n    margin: 0;\n  }\n  .tooltip-id {\n    color: #531dab;\n  }\n");var $P=function(t){function e(e){return t.call(this,e)||this}return QP(e,t),e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(t){return"\n          <h4 class='tooltip-type'>类型：".concat(t.item.getType(),"</h4>\n          <span class='tooltip-id'>ID：").concat(t.item.getID(),"</span>\n        ")},shouldBegin:function(t){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},e.prototype.getEvents=function(){return"click"===this.get("trigger")?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},e.prototype.init=function(){var t=this,e=t.get("className")||"g6-component-tooltip",n=Fk("<div class='".concat(e,"'></div>")),r=t.get("container");r||(r=t.get("graph").get("container")),Object(RE["isString"])(r)&&(r=document.getElementById(r)),jk(n,{position:"absolute",visibility:"hidden",display:"none"}),r.appendChild(n),"click"!==t.get("trigger")&&(n.addEventListener("mouseenter",(function(t){jk(n,{visibility:"visible",display:"unset"})})),n.addEventListener("mouseleave",(function(e){t.hideTooltip()}))),t.set("tooltip",n)},e.prototype.onClick=function(t){var e=this.get("itemTypes");if(!t.item||!t.item.getType||-1!==e.indexOf(t.item.getType())){var n=t.item,r=this.get("graph");this.currentTarget===n?(this.currentTarget=null,this.hideTooltip(),r.emit("tooltipchange",{item:t.item,action:"hide"})):(this.currentTarget=n,this.showTooltip(t),r.emit("tooltipchange",{item:t.item,action:"show"}))}},e.prototype.onMouseEnter=function(t){var e=this.get("itemTypes");if(!t.item||!t.item.getType||-1!==e.indexOf(t.item.getType())){var n=t.item,r=this.get("graph");this.currentTarget=n,this.showTooltip(t),r.emit("tooltipchange",{item:t.item,action:"show"})}},e.prototype.onMouseMove=function(t){var e=this.get("itemTypes");t.item&&t.item.getType&&-1===e.indexOf(t.item.getType())||this.currentTarget&&t.item===this.currentTarget&&this.showTooltip(t)},e.prototype.onMouseLeave=function(){this.hideTooltip();var t=this.get("graph");t.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},e.prototype.clearContainer=function(){var t=this.get("tooltip");t&&(t.innerHTML="")},e.prototype.showTooltip=function(t){if(t.item){var e=this.get("itemTypes");if(!t.item.getType||-1!==e.indexOf(t.item.getType())){var n=this.get("tooltip"),r=this.get("getContent"),i=r(t);Object(RE["isString"])(i)?n.innerHTML=i:(this.clearContainer(),n.appendChild(i)),this.updatePosition(t)}}},e.prototype.hideTooltip=function(){var t=this.get("tooltip");t&&jk(t,{visibility:"hidden",display:"none"})},e.prototype.updatePosition=function(t){var e=this.get("shouldBegin"),n=this.get("tooltip");if(e(t)){var r=this.get("graph"),i=r.get("width"),o=r.get("height"),a=this.get("offsetX")||0,s=this.get("offsetY")||0,l=r.getPointByClient(t.clientX,t.clientY),u=this.get("fixToNode"),c=t.item;if(c.getType&&"node"===c.getType()&&u&&Object(RE["isArray"])(u)&&u.length>=2){var h=c.getBBox();l={x:h.minX+h.width*u[0],y:h.minY+h.height*u[1]}}var d=r.getCanvasByPoint(l.x,l.y),f=d.x,p=d.y,g=r.getContainer(),m={x:f+g.offsetLeft+a,y:p+g.offsetTop+s};jk(n,{visibility:"visible",display:"unset"});var y=n.getBoundingClientRect();f+y.width+a>i&&(m.x-=y.width+a),p+y.height+s>o&&(m.y-=y.height+s,m.y<0&&(m.y=0)),jk(n,{left:"".concat(m.x,"px"),top:"".concat(m.y,"px")})}else jk(n,{visibility:"hidden",display:"none"})},e.prototype.hide=function(){this.onMouseLeave()},e.prototype.destroy=function(){var t=this.get("tooltip");if(t){var e=this.get("container");e||(e=this.get("graph").get("container")),Object(RE["isString"])(e)&&(e=document.getElementById(e)),e.removeChild(t)}},e}(gP),tL=$P,eL="timebarstartplay",nL="timebarendplay",rL="valuechange",iL="timebarConfigChanged",oL="playPauseBtn",aL="nextStepBtn",sL="preStepBtn",lL=function(){function t(t){var e=t.x,n=void 0===e?0:e,r=t.y,i=void 0===r?0:r,o=t.container,a=t.text,s=t.padding,l=void 0===s?[4,4,4,4]:s,u=t.className,c=void 0===u?"g6-component-timebar-tooltip":u,h=t.backgroundColor,d=void 0===h?"#000":h,f=t.textColor,p=void 0===f?"#fff":f,g=t.opacity,m=void 0===g?.8:g,y=t.fontSize,v=void 0===y?12:y;this.container=o,this.className=c,this.backgroundColor=d,this.textColor=p,this.x=n,this.y=i,this.text=a,this.padding=l,this.opacity=m,this.fontSize=v,this.render()}return t.prototype.render=function(){var t=this,e=t.className,n=(t.x,t.y,t.backgroundColor),r=t.textColor,i=t.text,o=t.padding,a=t.opacity,s=t.fontSize,l=t.container,u=Fk("<div class='".concat(e,"' style=\"position: absolute; width: fit-content; height: fit-content; opacity: ").concat(a,'"></div>'));Object(RE["isString"])(l)&&(l=document.getElementById(l)),l.appendChild(u),t.parentHeight=l.offsetHeight,t.parentWidth=l.offsetWidth,jk(u,{visibility:"hidden",top:0,left:0});var c=Fk("\n      <div style='position: absolute; white-space:nowrap; background-color: ".concat(n,"; font-size: ").concat(s,"px; border-radius: 4px; width: fit-content; height: fit-content; color: ").concat(r,"; padding: ").concat(o[0],"px ").concat(o[1],"px ").concat(o[2],"px ").concat(o[3],"px'></div>"));c.innerHTML=i,u.appendChild(c),t.backgroundDOM=c;var h=Fk("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid ".concat(n,"'></div>"));u.appendChild(h),t.arrowDOM=h,t.container=u},t.prototype.show=function(t){var e=this,n=t.text,r=t.x;t.y,t.clientX,t.clientY;e.backgroundDOM.innerHTML=n;var i=e.backgroundDOM.offsetWidth,o=e.backgroundDOM.offsetHeight,a=e.arrowDOM.offsetWidth,s=e.arrowDOM.offsetHeight;jk(e.container,{top:"".concat(-o-s,"px"),left:"".concat(r,"px"),visibility:"visible"}),jk(e.backgroundDOM,{marginLeft:"".concat(-i/2,"px")}),jk(e.arrowDOM,{marginLeft:"".concat(-a/2,"px"),top:"".concat(o,"px")});var l=r-i/2,u=r+i/2;l<0?jk(e.backgroundDOM,{marginLeft:"".concat(-i/2-l,"px")}):u>e.parentWidth&&jk(e.backgroundDOM,{marginLeft:"".concat(-i/2-u+e.parentWidth+12,"px")})},t.prototype.hide=function(){jk(this.container,{top:0,left:0,visibility:"hidden"})},t}(),uL=lL,cL=function(){return cL=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},cL.apply(this,arguments)},hL=function(){function t(t){this.config=Object(RE["deepMix"])({},t),this.init()}return t.prototype.update=function(t){this.config=Object(RE["deepMix"])({},this.config,t),this.updateElement(),this.renderMarker()},t.prototype.init=function(){this.initElement(),this.renderMarker()},t.prototype.initElement=function(){var t=this.config,e=t.group,n=t.style,r=n.scale,i=void 0===r?1:r,o=n.offsetX,a=void 0===o?0:o,s=n.offsetY,l=void 0===s?0:s,u=this.config.x+a,c=this.config.y+l,h=e.addGroup({name:oL});this.startMarkerGroup=h.addGroup({name:oL}),this.circle=e.addShape("circle",{attrs:cL({x:u,y:c,r:this.config.r*i},n),name:oL}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(u,c,i),fill:n.stroke||"#aaa"},name:"start-marker"}),this.pauseMarkerGroup=h.addGroup({name:oL});var d=.25*this.config.r*i,f=.5*this.config.r*Math.sqrt(3)*i;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:u-.375*this.config.r*i,y:c-f/2,width:d,height:f,fill:n.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:u+1/8*this.config.r*i,y:c-f/2,width:d,height:f,fill:n.stroke||"#aaa",lineWidth:0}})},t.prototype.updateElement=function(){var t=this.config.style,e=t.scale,n=void 0===e?1:e,r=t.offsetX,i=void 0===r?0:r,o=t.offsetY,a=void 0===o?0:o,s=this.config.x+i,l=this.config.y+a;this.circle.attr("x",s),this.circle.attr("y",l),this.circle.attr("r",this.config.r*n),this.startMarker.attr("path",this.getStartMarkerPath(s,l,n));var u=.25*this.config.r*n,c=.5*this.config.r*Math.sqrt(3)*n;this.pauseLeftMarker.attr("x",s-.375*this.config.r*n),this.pauseLeftMarker.attr("y",l-c/2),this.pauseLeftMarker.attr("width",u),this.pauseLeftMarker.attr("height",c),this.pauseRightMarker.attr("x",s+1/8*this.config.r*n),this.pauseRightMarker.attr("y",l-c/2),this.pauseRightMarker.attr("width",u),this.pauseRightMarker.attr("height",c)},t.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},t.prototype.getStartMarkerPath=function(t,e,n){var r=.5*this.config.r*Math.sqrt(3)*n;return[["M",t-r/Math.sqrt(3)/2,e-r/2],["L",t+r/Math.sqrt(3),e],["L",t-r/Math.sqrt(3)/2,e+r/2]]},t}(),dL=hL,fL=function(){return fL=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},fL.apply(this,arguments)},pL=UE["a"].transform,gL="#aaa",mL="green",yL={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},vL={fill:"#fff"},bL={fill:"green"},_L={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},xL={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},wL={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:_L,timeTypeControllerStyle:xL},SL=110,EL=50,CL={SINGLE:"single",RANGE:"range"},ML=function(){function t(t){this.controllerCfg=Object(RE["deepMix"])({},wL,t),this.group=t.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType=this.controllerCfg.defaultTimeType||CL.RANGE,this.fontFamily=t.fontFamily||"Arial, sans-serif",this.init()}return t.prototype.init=function(){this.renderPlayButton()},t.prototype.getNextMarkerPath=function(t,e,n){return[["M",t,e-n],["L",t+n,e],["L",t,e+n],["Z",t,e-n],["M",t,e],["L",t-n,e-n],["L",t-n,e+n],["Z"]]},t.prototype.getPreMarkerPath=function(t,e,n){return[["M",t,e-n],["L",t-n,e],["L",t,e+n],["L",t,e-n],["M",t,e],["L",t+n,e-n],["L",t+n,e+n],["Z"]]},t.prototype.renderPlayButton=function(){var t=this.controllerCfg,e=t.width,n=t.height,r=t.x,i=t.y,o=t.hideTimeTypeController,a=t.fill,s=void 0===a?gL:a,l=t.stroke,u=void 0===l?mL:l,c=t.containerStyle,h=void 0===c?{}:c,d=fL(fL({},yL),t.playBtnStyle||{}),f=fL(fL({},vL),t.preBtnStyle||{}),p=fL(fL({},bL),t.nextBtnStyle||{}),g=n/2-5,m=i+10,y=this.controllerGroup.addShape("rect",{attrs:fL({x:r,y:m,width:e,height:n,stroke:u,fill:s},h),name:"container-rect"});this.playButton?this.playButton.update({x:e/2,y:m,r:g}):this.playButton=new dL({group:this.controllerGroup,x:e/2,y:m+g+5,r:g,isPlay:this.isPlay,style:d});var v=f.offsetX||0,b=f.offsetY||0,_=(f.scale||1)*g;this.controllerGroup.addShape("path",{attrs:fL({path:this.getPreMarkerPath(e/2-5*g+v,m+g+5+b,.5*_)},f),name:sL});var x=p.offsetX||0,w=p.offsetY||0,S=(p.scale||1)*g;this.controllerGroup.addShape("path",{attrs:fL({path:this.getNextMarkerPath(e/2+5*g+x,m+g+5+w,.5*S)},p),name:aL}),y.toBack(),this.renderSpeedBtn(),o||this.renderToggleTime(),this.bindEvent();var E=this.controllerCfg.scale,C=void 0===E?1:E,M=this.controllerGroup.getCanvasBBox(),T=(M.maxX+M.minX)/2,A=(M.maxY+M.minY)/2,O=pL([1,0,0,0,1,0,0,0,1],[["t",-T,-A],["s",C,C],["t",T,A]]);this.controllerGroup.setMatrix(O)},t.prototype.renderSpeedBtn=function(){var t=this.controllerCfg,e=t.y,n=t.width,r=t.hideTimeTypeController,i=fL(fL({},_L),this.controllerCfg.speedControllerStyle||{}),o=i.scroller,a=void 0===o?{}:o,s=i.text,l=void 0===s?{}:s,u=i.pointer,c=void 0===u?{}:u,h=i.scale,d=void 0===h?1:h,f=i.offsetX,p=void 0===f?0:f,g=i.offsetY,m=void 0===g?0:g,y=this.controllerGroup.addGroup({name:"speed-group"});this.speedGroup=y;var v=[],b=5;this.speedAxisY=[19,22,26,32,39];for(var _=0;_<5;_++){var x=e+this.speedAxisY[_],w=n-(r?EL:SL);y.addShape("line",{attrs:fL({x1:w,x2:w+15,y1:x,y2:x},a),speed:b,name:"speed-rect"}),this.speedAxisY[_]=x,v.push(b),b-=1}this.speedText=y.addShape("text",{attrs:fL({x:n-(r?EL:SL)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},l),name:"speed-text"}),this.speedPoint=y.addShape("path",{attrs:fL({path:this.getPointerPath(n-(r?EL:SL),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},c),name:"speed-pointer"});var S=this.speedGroup.getCanvasBBox(),E=(S.maxX+S.minX)/2,C=(S.maxY+S.minY)/2,M=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];M=pL(M,[["t",-E,-C],["s",d,d],["t",E+p*d,C+m*d]]),this.speedGroup.setMatrix(M)},t.prototype.getPointerPath=function(t,e){return[["M",t,e],["L",t-10,e-4],["L",t-10,e+4],["Z"]]},t.prototype.renderToggleTime=function(){var t,e,n=this.controllerCfg,r=n.width,i=n.defaultTimeType,o=fL(fL({},xL),this.controllerCfg.timeTypeControllerStyle||{}),a=o.scale,s=void 0===a?1:a,l=o.offsetX,u=void 0===l?0:l,c=o.offsetY,h=void 0===c?0:c,d=o.box,f=void 0===d?{}:d,p=o.check,g=void 0===p?{}:p,m=o.text,y=void 0===m?{}:m;this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"});var v=i===CL.SINGLE;this.toggleGroup.addShape("rect",{attrs:fL({x:r-EL,y:this.speedAxisY[0]+3.5},f),isChecked:v,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:fL({path:[["M",r-EL+3,this.speedAxisY[1]+6],["L",r-EL+7,this.speedAxisY[1]+10],["L",r-EL+12,this.speedAxisY[1]+4]]},g),capture:!1,name:"check-icon"}),v||this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:fL({text:v?(null===(t=this.controllerCfg)||void 0===t?void 0:t.timeRangeControllerText)||"时间范围":(null===(e=this.controllerCfg)||void 0===e?void 0:e.timePointControllerText)||"单一时间",x:r-EL+15,y:this.speedAxisY[0]+4,fontFamily:"undefined"!==typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},y),name:"checked-text"});var b=this.toggleGroup.getCanvasBBox(),_=(b.maxX+b.minX)/2,x=(b.maxY+b.minY)/2,w=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];w=pL(w,[["t",-_,-x],["s",s,s],["t",_+u*s,x+h*s]]),this.toggleGroup.setMatrix(w)},t.prototype.bindEvent=function(){var t=this;this.speedGroup.on("speed-rect:click",(function(e){var n=e.target.attr("y1"),r=t.speedPoint.attr("matrix"),i=t.speedAxisY.indexOf(r[7]||0),o=t.speedAxisY.indexOf(n),a=t.speedAxisY[o]-t.speedAxisY[i];r=pL(r,[["t",0,a]]),t.speedPoint.setMatrix(r),t.currentSpeed=t.speedAxisY.length-o,t.speedText.attr("text","".concat(t.currentSpeed,".0X")),t.group.emit(iL,{speed:t.currentSpeed,type:t.currentType})})),this.speedGroup.on("mousewheel",(function(e){e.preventDefault();var n=t.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1],r=n[7],i=t.speedAxisY.indexOf(r);if(-1===i){var o=1/0;t.speedAxisY.forEach((function(t,e){var n=Math.abs(t-r);o>n&&(o=n,i=e)}))}i=e.originalEvent.deltaY>0?Math.max(0,i-1):Math.min(t.speedAxisY.length-1,i+1);var a=t.speedAxisY[i]-r;n=pL(n,[["t",0,a]]),t.speedPoint.setMatrix(n),t.currentSpeed=t.speedAxisY.length-i,t.speedText.attr("text","".concat(t.currentSpeed,".0X")),t.group.emit(iL,{speed:t.currentSpeed,type:t.currentType})})),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",(function(e){var n,r,i=e.target.get("isChecked");i?(t.checkedIcon.hide(),t.checkedText.attr("text",(null===(r=t.controllerCfg)||void 0===r?void 0:r.timePointControllerText)||"单一时间"),t.currentType=CL.RANGE):(t.checkedIcon.show(),t.checkedText.attr("text",(null===(n=t.controllerCfg)||void 0===n?void 0:n.timeRangeControllerText)||"时间范围"),t.currentType=CL.SINGLE),e.target.set("isChecked",!i),t.group.emit(iL,{type:t.currentType,speed:t.currentSpeed})}))},t.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},t}(),TL=ML,AL=function(){return AL=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},AL.apply(this,arguments)},OL=UE["a"].transform,kL={fill:"#5B8FF9"},IL={fill:"#e6e8e9"},PL=function(){function t(t){this.frameCount=0,this.fontFamily="Arial, sans-serif";var e=t.graph,n=t.canvas,r=t.group,i=t.width,o=t.height,a=t.padding,s=t.data,l=t.start,u=t.end,c=t.x,h=void 0===c?0:c,d=t.y,f=void 0===d?0:d,p=t.tickLabelFormatter,g=t.selectedTickStyle,m=void 0===g?kL:g,y=t.unselectedTickStyle,v=void 0===y?IL:y,b=t.tooltipBackgroundColor,_=t.tooltipFomatter,x=t.tickLabelStyle,w=t.controllerCfg,S=void 0===w?{speed:1}:w;this.graph=e,this.group=r,this.sliceGroup=r.addGroup({name:"slice-group"}),this.canvas=n,this.width=i,this.height=o,this.padding=a,this.data=s,this.start=l,this.end=u,this.tickLabelFormatter=p,this.tickLabelStyle=x||{},this.selectedTickStyle=m,this.unselectedTickStyle=v,this.controllerCfg=S,this.currentSpeed=S.speed||1,this.x=h,this.y=f,this.tooltipBackgroundColor=b,this.tooltipFomatter=_,this.fontFamily="undefined"!==typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return t.prototype.renderSlices=function(){var t=this,e=this,n=e.width,r=e.height,i=e.padding,o=e.data,a=e.start,s=e.end,l=e.tickLabelFormatter,u=e.selectedTickStyle,c=e.unselectedTickStyle,h=e.tickLabelStyle,d=n-2*i,f=10,p=4,g=3*i+p+f,m=r-g-2*i,y=2,v=o.length,b=(d-y*(v-1))/v;this.tickWidth=b;var _=this.sliceGroup,x=[],w=[],S=Math.round(v*a),E=Math.round(v*s);this.startTickRectId=S,this.endTickRectId=E;var C=h.rotate;delete h.rotate,o.forEach((function(e,r){var o=r>=S&&r<=E,a=o?u:c,s=_.addShape("rect",{attrs:AL({x:i+r*(b+y),y:i,width:b,height:m},a),draggable:!0,name:"tick-rect-".concat(r)}),d=_.addShape("rect",{attrs:{x:i+r*b+y*(2*r-1)/2,y:i,width:0===r||r===v-1?b+y/2:b+y,height:m,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-".concat(r)});d.toFront();var f,g=s.getBBox(),M=(g.minX+g.maxX)/2;if(x.push({rect:s,pickRect:d,value:e.date,x:M,y:g.minY}),l?(f=l(e),!Object(RE["isString"])(f)&&f&&(f=e.date)):r%Math.round(v/10)===0&&(f=e.date),f){w.push(f);var T=g.maxY+2*i;_.addShape("line",{attrs:{stroke:"#BFBFBF",x1:M,y1:T,x2:M,y2:T+p},name:"tick-line"});var A=T+p+i,O=_.addShape("text",{attrs:AL({fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:M,y:A,textAlign:"center",text:f,textBaseline:"top",fontSize:10,fontFamily:t.fontFamily||"Arial, sans-serif"},h),capture:!1,name:"tick-label"}),k=O.getBBox();if(k.maxX>n?O.attr("textAlign","right"):k.minX<0&&O.attr("textAlign","left"),Object(RE["isNumber"])(C)&&10!==w.length){var I=OL([1,0,0,0,1,0,0,0,1],[["t",-M,-A],["r",C],["t",M-5,A+2]]);O.attr({textAlign:"left",matrix:I})}1===w.length?O.attr({textAlign:"left"}):10===w.length&&O.attr({textAlign:"right"})}})),this.tickRects=x;var M=this.group;this.currentSpeed=1,this.controllerBtnGroup=new TL(AL({group:M,x:this.x,y:this.y+r+5,width:n,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"},this.controllerCfg))},t.prototype.initEvent=function(){var t=this,e=this.sliceGroup;e.on("click",(function(e){var n=e.target;if("rect"===n.get("type")&&n.get("name")){var r=parseInt(n.get("name").split("-")[2],10);if(!isNaN(r)){var i=t.tickRects,o=t.unselectedTickStyle;i.forEach((function(t){t.rect.attr(o)}));var a=t.selectedTickStyle;i[r].rect.attr(a),t.startTickRectId=r,t.endTickRectId=r;var s=i.length,l=r/s;t.graph.emit(rL,{value:[l,l]})}}})),e.on("dragstart",(function(e){var n=t.tickRects,r=t.unselectedTickStyle;n.forEach((function(t){t.rect.attr(r)}));var i=e.target,o=parseInt(i.get("name").split("-")[2],10),a=t.selectedTickStyle;n[o].rect.attr(a),t.startTickRectId=o;var s=n.length,l=o/s;t.graph.emit(rL,{value:[l,l]}),t.dragging=!0})),e.on("dragover",(function(e){if(t.dragging&&"rect"===e.target.get("type")){for(var n=parseInt(e.target.get("name").split("-")[2],10),r=t.startTickRectId,i=t.tickRects,o=t.selectedTickStyle,a=t.unselectedTickStyle,s=0;s<i.length;s++){var l=s>=r&&s<=n?o:a;i[s].rect.attr(l)}var u=i.length;t.endTickRectId=n;var c=r/u,h=n/u;t.graph.emit(rL,{value:[c,h]})}})),e.on("drop",(function(e){if(t.dragging&&(t.dragging=!1,"rect"===e.target.get("type"))){var n=t.startTickRectId,r=parseInt(e.target.get("name").split("-")[2],10);if(!(r<n)){var i=t.selectedTickStyle,o=t.tickRects;o[r].rect.attr(i),t.endTickRectId=r;var a=o.length,s=n/a,l=r/a;t.graph.emit(rL,{value:[s,l]})}}}));var n=this,r=n.tooltipBackgroundColor,i=n.tooltipFomatter,o=n.canvas,a=new uL({container:o.get("container"),backgroundColor:r}),s=this.tickRects;s.forEach((function(t){var e=t.pickRect;e.on("mouseenter",(function(t){var e=t.target;if("rect"===e.get("type")){var n=parseInt(e.get("name").split("-")[2],10),r=o.getClientByPoint(s[n].x,s[n].y);a.show({x:s[n].x,y:s[n].y,clientX:r.x,clientY:r.y,text:i?i(s[n].value):s[n].value})}})),e.on("mouseleave",(function(t){a.hide()}))}));var l=this.group;l.on("".concat(oL,":click"),(function(){t.isPlay=!t.isPlay,t.changePlayStatus()})),l.on("".concat(aL,":click"),(function(){t.updateStartEnd(1)})),l.on("".concat(sL,":click"),(function(){t.updateStartEnd(-1)})),l.on(iL,(function(e){e.type;var n=e.speed;t.currentSpeed=n}))},t.prototype.changePlayStatus=function(t){void 0===t&&(t=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(eL,null)):this.playHandler&&("undefined"!==typeof window&&window.cancelAnimationFrame(this.playHandler),t&&this.graph.emit(nL,null))},t.prototype.startPlay=function(){var t=this;return"undefined"!==typeof window?window.requestAnimationFrame((function(){var e=t.currentSpeed;t.frameCount%(60/e)===0&&(t.frameCount=0,t.updateStartEnd(1)),t.frameCount++,t.isPlay&&(t.playHandler=t.startPlay())})):void 0},t.prototype.updateStartEnd=function(t){var e=this,n=this.tickRects,r=n.length,i=this.unselectedTickStyle,o=this.selectedTickStyle,a=e.endTickRectId;if(t>0?e.endTickRectId++:(n[e.endTickRectId].rect.attr(i),e.endTickRectId--),a!==e.startTickRectId)e.endTickRectId<e.startTickRectId&&(e.startTickRectId=e.endTickRectId);else{for(var s=e.startTickRectId;s<=e.endTickRectId-1;s++)n[s].rect.attr(i);e.startTickRectId=e.endTickRectId}if(n[e.endTickRectId]){n[e.endTickRectId].rect.attr(o);var l=e.startTickRectId/r,u=e.endTickRectId/r;this.graph.emit(rL,{value:[l,u]})}},t.prototype.destory=function(){var t=this.sliceGroup;t.off("click"),t.off("dragstart"),t.off("dragover"),t.off("drop"),this.tickRects.forEach((function(t){var e=t.pickRect;e.off("mouseenter"),e.off("mouseleave")})),this.tickRects.length=0,t.off("".concat(oL,":click")),t.off("".concat(aL,":click")),t.off("".concat(sL,":click")),t.off(iL),this.sliceGroup.destroy()},t}(),LL=PL,NL={};function RL(t){return NL[t]}function DL(t,e){NL[t]=e}var FL=function(){function t(t){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=t,this.initCfg(),this.init()}return t.prototype.translate=function(t){return t},t.prototype.change=function(t){Object(RE["assign"])(this.__cfg__,t),this.init()},t.prototype.clone=function(){return this.constructor(this.__cfg__)},t.prototype.getTicks=function(){var t=this;return Object(RE["map"])(this.ticks,(function(e,n){return Object(RE["isObject"])(e)?e:{text:t.getText(e,n),tickValue:e,value:t.scale(e)}}))},t.prototype.getText=function(t,e){var n=this.formatter,r=n?n(t,e):t;return Object(RE["isNil"])(r)||!Object(RE["isFunction"])(r.toString)?"":r.toString()},t.prototype.getConfig=function(t){return this.__cfg__[t]},t.prototype.init=function(){Object(RE["assign"])(this,this.__cfg__),this.setDomain(),Object(RE["isEmpty"])(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},t.prototype.initCfg=function(){},t.prototype.setDomain=function(){},t.prototype.calculateTicks=function(){var t=this.tickMethod,e=[];if(Object(RE["isString"])(t)){var n=RL(t);if(!n)throw new Error("There is no method to to calculate ticks!");e=n(this)}else Object(RE["isFunction"])(t)&&(e=t(this));return e},t.prototype.rangeMin=function(){return this.range[0]},t.prototype.rangeMax=function(){return this.range[1]},t.prototype.calcPercent=function(t,e,n){return Object(RE["isNumber"])(t)?(t-e)/(n-e):NaN},t.prototype.calcValue=function(t,e,n){return e+t*(n-e)},t}(),jL=FL,BL=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="cat",e.isCategory=!0,e}return Object(NE["__extends"])(e,t),e.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var t=0;t<this.values.length;t++)this.translateIndexMap.set(this.values[t],t)}},e.prototype.translate=function(t){this.buildIndexMap();var e=this.translateIndexMap.get(t);return void 0===e&&(e=Object(RE["isNumber"])(t)?t:NaN),e},e.prototype.scale=function(t){var e=this.translate(t),n=this.calcPercent(e,this.min,this.max);return this.calcValue(n,this.rangeMin(),this.rangeMax())},e.prototype.invert=function(t){var e=this.max-this.min,n=this.calcPercent(t,this.rangeMin(),this.rangeMax()),r=Math.round(e*n)+this.min;return r<this.min||r>this.max?NaN:this.values[r]},e.prototype.getText=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=e;return Object(RE["isNumber"])(e)&&!this.values.includes(e)&&(i=this.values[i]),t.prototype.getText.apply(this,Object(NE["__spreadArrays"])([i],n))},e.prototype.initCfg=function(){this.tickMethod="cat"},e.prototype.setDomain=function(){if(Object(RE["isNil"])(this.getConfig("min"))&&(this.min=0),Object(RE["isNil"])(this.getConfig("max"))){var t=this.values.length;this.max=t>1?t-1:t}this.translateIndexMap&&(this.translateIndexMap=void 0)},e}(jL),zL=BL,UL=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,GL="\\d\\d?",qL="\\d\\d",VL="\\d{3}",HL="\\d{4}",WL="[^\\s]+",YL=/\[([^]*?)\]/gm;function XL(t,e){for(var n=[],r=0,i=t.length;r<i;r++)n.push(t[r].substr(0,e));return n}var JL=function(t){return function(e,n){var r=n[t].map((function(t){return t.toLowerCase()})),i=r.indexOf(e.toLowerCase());return i>-1?i:null}};function ZL(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];for(var a in o)t[a]=o[a]}return t}var KL=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],QL=["January","February","March","April","May","June","July","August","September","October","November","December"],$L=XL(QL,3),tN=XL(KL,3),eN={dayNamesShort:tN,dayNames:KL,monthNamesShort:$L,monthNames:QL,amPm:["am","pm"],DoFn:function(t){return t+["th","st","nd","rd"][t%10>3?0:(t-t%10!==10?1:0)*t%10]}},nN=ZL({},eN),rN=function(t){return nN=ZL(nN,t)},iN=function(t){return t.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},oN=function(t,e){void 0===e&&(e=2),t=String(t);while(t.length<e)t="0"+t;return t},aN={D:function(t){return String(t.getDate())},DD:function(t){return oN(t.getDate())},Do:function(t,e){return e.DoFn(t.getDate())},d:function(t){return String(t.getDay())},dd:function(t){return oN(t.getDay())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return String(t.getMonth()+1)},MM:function(t){return oN(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},YY:function(t){return oN(String(t.getFullYear()),4).substr(2)},YYYY:function(t){return oN(t.getFullYear(),4)},h:function(t){return String(t.getHours()%12||12)},hh:function(t){return oN(t.getHours()%12||12)},H:function(t){return String(t.getHours())},HH:function(t){return oN(t.getHours())},m:function(t){return String(t.getMinutes())},mm:function(t){return oN(t.getMinutes())},s:function(t){return String(t.getSeconds())},ss:function(t){return oN(t.getSeconds())},S:function(t){return String(Math.round(t.getMilliseconds()/100))},SS:function(t){return oN(Math.round(t.getMilliseconds()/10),2)},SSS:function(t){return oN(t.getMilliseconds(),3)},a:function(t,e){return t.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(t,e){return t.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+oN(100*Math.floor(Math.abs(e)/60)+Math.abs(e)%60,4)},Z:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+oN(Math.floor(Math.abs(e)/60),2)+":"+oN(Math.abs(e)%60,2)}},sN=function(t){return+t-1},lN=[null,GL],uN=[null,WL],cN=["isPm",WL,function(t,e){var n=t.toLowerCase();return n===e.amPm[0]?0:n===e.amPm[1]?1:null}],hN=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(t){var e=(t+"").match(/([+-]|\d\d)/gi);if(e){var n=60*+e[1]+parseInt(e[2],10);return"+"===e[0]?n:-n}return 0}],dN={D:["day",GL],DD:["day",qL],Do:["day",GL+WL,function(t){return parseInt(t,10)}],M:["month",GL,sN],MM:["month",qL,sN],YY:["year",qL,function(t){var e=new Date,n=+(""+e.getFullYear()).substr(0,2);return+(""+(+t>68?n-1:n)+t)}],h:["hour",GL,void 0,"isPm"],hh:["hour",qL,void 0,"isPm"],H:["hour",GL],HH:["hour",qL],m:["minute",GL],mm:["minute",qL],s:["second",GL],ss:["second",qL],YYYY:["year",HL],S:["millisecond","\\d",function(t){return 100*+t}],SS:["millisecond",qL,function(t){return 10*+t}],SSS:["millisecond",VL],d:lN,dd:lN,ddd:uN,dddd:uN,MMM:["month",WL,JL("monthNamesShort")],MMMM:["month",WL,JL("monthNames")],a:cN,A:cN,ZZ:hN,Z:hN},fN={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},pN=function(t){return ZL(fN,t)},gN=function(t,e,n){if(void 0===e&&(e=fN["default"]),void 0===n&&(n={}),"number"===typeof t&&(t=new Date(t)),"[object Date]"!==Object.prototype.toString.call(t)||isNaN(t.getTime()))throw new Error("Invalid Date pass to format");e=fN[e]||e;var r=[];e=e.replace(YL,(function(t,e){return r.push(e),"@@@"}));var i=ZL(ZL({},nN),n);return e=e.replace(UL,(function(e){return aN[e](t,i)})),e.replace(/@@@/g,(function(){return r.shift()}))};function mN(t,e,n){if(void 0===n&&(n={}),"string"!==typeof e)throw new Error("Invalid format in fecha parse");if(e=fN[e]||e,t.length>1e3)return null;var r=new Date,i={year:r.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},o=[],a=[],s=e.replace(YL,(function(t,e){return a.push(iN(e)),"@@@"})),l={},u={};s=iN(s).replace(UL,(function(t){var e=dN[t],n=e[0],r=e[1],i=e[3];if(l[n])throw new Error("Invalid format. "+n+" specified twice in format");return l[n]=!0,i&&(u[i]=!0),o.push(e),"("+r+")"})),Object.keys(u).forEach((function(t){if(!l[t])throw new Error("Invalid format. "+t+" is required in specified format")})),s=s.replace(/@@@/g,(function(){return a.shift()}));var c=t.match(new RegExp(s,"i"));if(!c)return null;for(var h,d=ZL(ZL({},nN),n),f=1;f<c.length;f++){var p=o[f-1],g=p[0],m=p[2],y=m?m(c[f],d):+c[f];if(null==y)return null;i[g]=y}if(1===i.isPm&&null!=i.hour&&12!==+i.hour?i.hour=+i.hour+12:0===i.isPm&&12===+i.hour&&(i.hour=0),null==i.timezoneOffset){h=new Date(i.year,i.month,i.day,i.hour,i.minute,i.second,i.millisecond);for(var v=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],b=(f=0,v.length);f<b;f++)if(l[v[f][0]]&&i[v[f][0]]!==h[v[f][1]]())return null}else if(h=new Date(Date.UTC(i.year,i.month,i.day,i.hour,i.minute-i.timezoneOffset,i.second,i.millisecond)),i.month>11||i.month<0||i.day>31||i.day<1||i.hour>23||i.hour<0||i.minute>59||i.minute<0||i.second>59||i.second<0)return null;return h}var yN={format:gN,parse:mN,defaultI18n:eN,setGlobalDateI18n:rN,setGlobalDateMasks:pN},vN=yN,bN=function(t){return function(e,n,r,i){var o=Object(RE["isNil"])(r)?0:r,a=Object(RE["isNil"])(i)?e.length:i;while(o<a){var s=o+a>>>1;t(e[s])>n?a=s:o=s+1}return o}},_N="format";function xN(t,e){var n=p[_N]||vN[_N];return n(t,e)}function wN(t){return Object(RE["isString"])(t)&&(t=t.indexOf("T")>0?new Date(t).getTime():new Date(t.replace(/-/gi,"/")).getTime()),Object(RE["isDate"])(t)&&(t=t.getTime()),t}var SN=1e3,EN=60*SN,CN=60*EN,MN=24*CN,TN=31*MN,AN=365*MN,ON=[["HH:mm:ss",SN],["HH:mm:ss",10*SN],["HH:mm:ss",30*SN],["HH:mm",EN],["HH:mm",10*EN],["HH:mm",30*EN],["HH",CN],["HH",6*CN],["HH",12*CN],["YYYY-MM-DD",MN],["YYYY-MM-DD",4*MN],["YYYY-WW",7*MN],["YYYY-MM",TN],["YYYY-MM",4*TN],["YYYY-MM",6*TN],["YYYY",380*MN]];function kN(t,e,n){var r=(e-t)/n,i=bN((function(t){return t[1]}))(ON,r)-1,o=ON[i];return i<0?o=ON[0]:i>=ON.length&&(o=Object(RE["last"])(ON)),o}var IN=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="timeCat",e}return Object(NE["__extends"])(e,t),e.prototype.translate=function(t){t=wN(t);var e=this.values.indexOf(t);return-1===e&&(e=Object(RE["isNumber"])(t)&&t<this.values.length?t:NaN),e},e.prototype.getText=function(t,e){var n=this.translate(t);if(n>-1){var r=this.values[n],i=this.formatter;return r=i?i(r,e):xN(r,this.mask),r}return t},e.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},e.prototype.setDomain=function(){var e=this.values;Object(RE["each"])(e,(function(t,n){e[n]=wN(t)})),e.sort((function(t,e){return t-e})),t.prototype.setDomain.call(this)},e}(zL),PN=IN,LN=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isContinuous=!0,e}return Object(NE["__extends"])(e,t),e.prototype.scale=function(t){if(Object(RE["isNil"])(t))return NaN;var e=this.rangeMin(),n=this.rangeMax(),r=this.max,i=this.min;if(r===i)return e;var o=this.getScalePercent(t);return e+o*(n-e)},e.prototype.init=function(){t.prototype.init.call(this);var e=this.ticks,n=Object(RE["head"])(e),r=Object(RE["last"])(e);n<this.min&&(this.min=n),r>this.max&&(this.max=r),Object(RE["isNil"])(this.minLimit)||(this.min=n),Object(RE["isNil"])(this.maxLimit)||(this.max=r)},e.prototype.setDomain=function(){var t=Object(RE["getRange"])(this.values),e=t.min,n=t.max;Object(RE["isNil"])(this.min)&&(this.min=e),Object(RE["isNil"])(this.max)&&(this.max=n),this.min>this.max&&(this.min=e,this.max=n)},e.prototype.calculateTicks=function(){var e=this,n=t.prototype.calculateTicks.call(this);return this.nice||(n=Object(RE["filter"])(n,(function(t){return t>=e.min&&t<=e.max}))),n},e.prototype.getScalePercent=function(t){var e=this.max,n=this.min;return(t-n)/(e-n)},e.prototype.getInvertPercent=function(t){return(t-this.rangeMin())/(this.rangeMax()-this.rangeMin())},e}(jL),NN=LN,RN=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="linear",e.isLinear=!0,e}return Object(NE["__extends"])(e,t),e.prototype.invert=function(t){var e=this.getInvertPercent(t);return this.min+e*(this.max-this.min)},e.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},e}(NN),DN=RN;function FN(t,e){var n,r=Math.E;return n=e>=0?Math.pow(r,Math.log(e)/t):-1*Math.pow(r,Math.log(-e)/t),n}function jN(t,e){return 1===t?1:Math.log(e)/Math.log(t)}function BN(t,e,n){Object(RE["isNil"])(n)&&(n=Math.max.apply(null,t));var r=n;return Object(RE["each"])(t,(function(t){t>0&&t<r&&(r=t)})),r===n&&(r=n/e),r>1&&(r=1),r}var zN=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="log",e}return Object(NE["__extends"])(e,t),e.prototype.invert=function(t){var e,n=this.base,r=jN(n,this.max),i=this.rangeMin(),o=this.rangeMax()-i,a=this.positiveMin;if(a){if(0===t)return 0;e=jN(n,a/n);var s=1/(r-e)*o;if(t<s)return t/s*a}else e=jN(n,this.min);var l=(t-i)/o,u=l*(r-e)+e;return Math.pow(n,u)},e.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},e.prototype.setDomain=function(){t.prototype.setDomain.call(this);var e=this.min;if(e<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");0===e&&(this.positiveMin=BN(this.values,this.base,this.max))},e.prototype.getScalePercent=function(t){var e=this.max,n=this.min;if(e===n)return 0;if(t<=0)return 0;var r,i=this.base,o=this.positiveMin;return o&&(n=1*o/i),r=t<o?t/o/(jN(i,e)-jN(i,n)):(jN(i,t)-jN(i,n))/(jN(i,e)-jN(i,n)),r},e}(NN),UN=zN,GN=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="pow",e}return Object(NE["__extends"])(e,t),e.prototype.invert=function(t){var e=this.getInvertPercent(t),n=this.exponent,r=FN(n,this.max),i=FN(n,this.min),o=e*(r-i)+i,a=o>=0?1:-1;return Math.pow(o,n)*a},e.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},e.prototype.getScalePercent=function(t){var e=this.max,n=this.min;if(e===n)return 0;var r=this.exponent,i=(FN(r,t)-FN(r,n))/(FN(r,e)-FN(r,n));return i},e}(NN),qN=GN,VN=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="time",e}return Object(NE["__extends"])(e,t),e.prototype.getText=function(t,e){var n=this.translate(t),r=this.formatter;return r?r(n,e):xN(n,this.mask)},e.prototype.scale=function(e){var n=e;return(Object(RE["isString"])(n)||Object(RE["isDate"])(n))&&(n=this.translate(n)),t.prototype.scale.call(this,n)},e.prototype.translate=function(t){return wN(t)},e.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},e.prototype.setDomain=function(){var t=this.values,e=this.getConfig("min"),n=this.getConfig("max");if(Object(RE["isNil"])(e)&&Object(RE["isNumber"])(e)||(this.min=this.translate(this.min)),Object(RE["isNil"])(n)&&Object(RE["isNumber"])(n)||(this.max=this.translate(this.max)),t&&t.length){var r=[],i=1/0,o=i,a=0;Object(RE["each"])(t,(function(t){var e=wN(t);if(isNaN(e))throw new TypeError("Invalid Time: "+t+" in time scale!");i>e?(o=i,i=e):o>e&&(o=e),a<e&&(a=e),r.push(e)})),t.length>1&&(this.minTickInterval=o-i),Object(RE["isNil"])(e)&&(this.min=i),Object(RE["isNil"])(n)&&(this.max=a)}},e}(DN),HN=VN,WN=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="quantize",e}return Object(NE["__extends"])(e,t),e.prototype.invert=function(t){var e=this.ticks,n=e.length,r=this.getInvertPercent(t),i=Math.floor(r*(n-1));if(i>=n-1)return Object(RE["last"])(e);if(i<0)return Object(RE["head"])(e);var o=e[i],a=e[i+1],s=i/(n-1),l=(i+1)/(n-1);return o+(r-s)/(l-s)*(a-o)},e.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},e.prototype.calculateTicks=function(){var e=t.prototype.calculateTicks.call(this);return this.nice||(Object(RE["last"])(e)!==this.max&&e.push(this.max),Object(RE["head"])(e)!==this.min&&e.unshift(this.min)),e},e.prototype.getScalePercent=function(t){var e=this.ticks;if(t<Object(RE["head"])(e))return 0;if(t>Object(RE["last"])(e))return 1;var n=0;return Object(RE["each"])(e,(function(e,r){if(!(t>=e))return!1;n=r})),n/(e.length-1)},e}(NN),YN=WN,XN=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="quantile",e}return Object(NE["__extends"])(e,t),e.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},e}(YN),JN=XN,ZN={};function KN(t){return ZN[t]}function QN(t,e){if(KN(t))throw new Error("type '"+t+"' existed.");ZN[t]=e}var $N=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="identity",e.isIdentity=!0,e}return Object(NE["__extends"])(e,t),e.prototype.calculateTicks=function(){return this.values},e.prototype.scale=function(t){return this.values[0]!==t&&Object(RE["isNumber"])(t)?t:this.range[0]},e.prototype.invert=function(t){var e=this.range;return t<e[0]||t>e[1]?NaN:this.values[0]},e}(jL),tR=$N;function eR(t){var e=t.values,n=t.tickInterval,r=t.tickCount,i=t.showLast;if(Object(RE["isNumber"])(n)){var o=Object(RE["filter"])(e,(function(t,e){return e%n===0})),a=Object(RE["last"])(e);return i&&Object(RE["last"])(o)!==a&&o.push(a),o}var s=e.length,l=t.min,u=t.max;if(Object(RE["isNil"])(l)&&(l=0),Object(RE["isNil"])(u)&&(u=e.length-1),!Object(RE["isNumber"])(r)||r>=s)return e.slice(l,u+1);if(r<=0||u<=0)return[];for(var c=1===r?s:Math.floor(s/(r-1)),h=[],d=l,f=0;f<r;f++){if(d>=u)break;d=Math.min(l+f*c,u),f===r-1&&i?h.push(e[u]):h.push(e[d])}return h}function nR(t){var e=t.min,n=t.max,r=t.nice,i=t.tickCount,o=new sR;return o.domain([e,n]),r&&o.nice(i),o.ticks(i)}var rR=5,iR=Math.sqrt(50),oR=Math.sqrt(10),aR=Math.sqrt(2),sR=function(){function t(){this._domain=[0,1]}return t.prototype.domain=function(t){return t?(this._domain=Array.from(t,Number),this):this._domain.slice()},t.prototype.nice=function(t){var e,n;void 0===t&&(t=rR);var r,i=this._domain.slice(),o=0,a=this._domain.length-1,s=this._domain[o],l=this._domain[a];return l<s&&(e=[l,s],s=e[0],l=e[1],n=[a,o],o=n[0],a=n[1]),r=uR(s,l,t),r>0?(s=Math.floor(s/r)*r,l=Math.ceil(l/r)*r,r=uR(s,l,t)):r<0&&(s=Math.ceil(s*r)/r,l=Math.floor(l*r)/r,r=uR(s,l,t)),r>0?(i[o]=Math.floor(s/r)*r,i[a]=Math.ceil(l/r)*r,this.domain(i)):r<0&&(i[o]=Math.ceil(s*r)/r,i[a]=Math.floor(l*r)/r,this.domain(i)),this},t.prototype.ticks=function(t){return void 0===t&&(t=rR),lR(this._domain[0],this._domain[this._domain.length-1],t||rR)},t}();function lR(t,e,n){var r,i,o,a,s=-1;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=uR(t,e,n))||!isFinite(a))return[];if(a>0){t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(i=Math.ceil(e-t+1));while(++s<i)o[s]=(t+s)*a}else{t=Math.floor(t*a),e=Math.ceil(e*a),o=new Array(i=Math.ceil(t-e+1));while(++s<i)o[s]=(t-s)/a}return r&&o.reverse(),o}function uR(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=iR?10:o>=oR?5:o>=aR?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=iR?10:o>=oR?5:o>=aR?2:1)}function cR(t,e,n){var r;return r="ceil"===n?Math.ceil(t/e):"floor"===n?Math.floor(t/e):Math.round(t/e),r*e}function hR(t,e,n){var r=cR(t,n,"floor"),i=cR(e,n,"ceil");r=Object(RE["fixedBase"])(r,n),i=Object(RE["fixedBase"])(i,n);for(var o=[],a=Math.max((i-r)/(Math.pow(2,12)-1),n),s=r;s<=i;s+=a){var l=Object(RE["fixedBase"])(s,a);o.push(l)}return{min:r,max:i,ticks:o}}function dR(t,e,n){var r,i=t.minLimit,o=t.maxLimit,a=t.min,s=t.max,l=t.tickCount,u=void 0===l?5:l,c=Object(RE["isNil"])(i)?Object(RE["isNil"])(e)?a:e:i,h=Object(RE["isNil"])(o)?Object(RE["isNil"])(n)?s:n:o;if(c>h&&(r=[c,h],h=r[0],c=r[1]),u<=2)return[c,h];for(var d=(h-c)/(u-1),f=[],p=0;p<u;p++)f.push(c+d*p);return f}function fR(t){var e=t.min,n=t.max,r=t.tickInterval,i=t.minLimit,o=t.maxLimit,a=nR(t);return Object(RE["isNil"])(i)&&Object(RE["isNil"])(o)?r?hR(e,n,r).ticks:a:dR(t,Object(RE["head"])(a),Object(RE["last"])(a))}function pR(t){return Math.abs(t)<1e-15?t:parseFloat(t.toFixed(15))}var gR=[1,5,2,2.5,4,3],mR=100*Number.EPSILON;function yR(t,e){return(t%e+e)%e}function vR(t){return Math.round(1e12*t)/1e12}function bR(t,e,n,r,i,o){var a=Object(RE["size"])(e),s=Object(RE["indexOf"])(e,t),l=0,u=yR(r,o);return(u<mR||o-u<mR)&&r<=0&&i>=0&&(l=1),1-s/(a-1)-n+l}function _R(t,e,n){var r=Object(RE["size"])(e),i=Object(RE["indexOf"])(e,t),o=1;return 1-i/(r-1)-n+o}function xR(t,e,n,r,i,o){var a=(t-1)/(o-i),s=(e-1)/(Math.max(o,r)-Math.min(n,i));return 2-Math.max(a/s,s/a)}function wR(t,e){return t>=e?2-(t-1)/(e-1):1}function SR(t,e,n,r){var i=e-t;return 1-.5*(Math.pow(e-r,2)+Math.pow(t-n,2))/Math.pow(.1*i,2)}function ER(t,e,n){var r=e-t;if(n>r){var i=(n-r)/2;return 1-Math.pow(i,2)/Math.pow(.1*r,2)}return 1}function CR(){return 1}function MR(t,e,n,r,i,o){void 0===n&&(n=5),void 0===r&&(r=!0),void 0===i&&(i=gR),void 0===o&&(o=[.25,.2,.5,.05]);var a=n<0?0:Math.round(n);if(Number.isNaN(t)||Number.isNaN(e)||"number"!==typeof t||"number"!==typeof e||!a)return{min:0,max:0,ticks:[]};if(e-t<1e-15||1===a)return{min:t,max:e,ticks:[t]};if(e-t>1e148){var s=n||5,l=(e-t)/s;return{min:t,max:e,ticks:Array(s).fill(null).map((function(e,n){return pR(t+l*n)}))}}var u={score:-2,lmin:0,lmax:0,lstep:0},c=1;while(c<1/0){for(var h=0;h<i.length;h+=1){var d=i[h],f=_R(d,i,c);if(o[0]*f+o[1]+o[2]+o[3]<u.score){c=1/0;break}var p=2;while(p<1/0){var g=wR(p,a);if(o[0]*f+o[1]+o[2]*g+o[3]<u.score)break;var m=(e-t)/(p+1)/c/d,y=Math.ceil(Math.log10(m));while(y<1/0){var v=c*d*Math.pow(10,y),b=ER(t,e,v*(p-1));if(o[0]*f+o[1]*b+o[2]*g+o[3]<u.score)break;var _=Math.floor(e/v)*c-(p-1)*c,x=Math.ceil(t/v)*c;if(_<=x){s=x-_;for(var w=0;w<=s;w+=1){var S=_+w,E=S*(v/c),C=E+v*(p-1),M=v,T=bR(d,i,c,E,C,M),A=SR(t,e,E,C),O=xR(p,a,t,e,E,C),k=CR(),I=o[0]*T+o[1]*A+o[2]*O+o[3]*k;I>u.score&&(!r||E<=t&&C>=e)&&(u.lmin=E,u.lmax=C,u.lstep=M,u.score=I)}}y+=1}p+=1}}c+=1}var P=pR(u.lmax),L=pR(u.lmin),N=pR(u.lstep),R=Math.floor(vR((P-L)/N))+1,D=new Array(R);D[0]=pR(L);for(h=1;h<R;h++)D[h]=pR(D[h-1]+N);return{min:Math.min(t,Object(RE["head"])(D)),max:Math.max(e,Object(RE["last"])(D)),ticks:D}}function TR(t){var e=t.min,n=t.max,r=t.tickCount,i=t.nice,o=t.tickInterval,a=t.minLimit,s=t.maxLimit,l=MR(e,n,r,i).ticks;return Object(RE["isNil"])(a)&&Object(RE["isNil"])(s)?o?hR(e,n,o).ticks:l:dR(t,Object(RE["head"])(l),Object(RE["last"])(l))}function AR(t){var e,n=t.base,r=t.tickCount,i=t.min,o=t.max,a=t.values,s=jN(n,o);if(i>0)e=Math.floor(jN(n,i));else{var l=BN(a,n,o);e=Math.floor(jN(n,l))}for(var u=s-e,c=Math.ceil(u/r),h=[],d=e;d<s+c;d+=c)h.push(Math.pow(n,d));return i<=0&&h.unshift(0),h}function OR(t,e,n){if(void 0===n&&(n=5),t===e)return{max:e,min:t,ticks:[t]};var r=n<0?0:Math.round(n);if(0===r)return{max:e,min:t,ticks:[]};var i=1.5,o=.5+1.5*i,a=e-t,s=a/r,l=Math.pow(10,Math.floor(Math.log10(s))),u=l;2*l-s<i*(s-u)&&(u=2*l,5*l-s<o*(s-u)&&(u=5*l,10*l-s<i*(s-u)&&(u=10*l)));for(var c=Math.ceil(e/u),h=Math.floor(t/u),d=Math.max(c*u,e),f=Math.min(h*u,t),p=Math.floor((d-f)/u)+1,g=new Array(p),m=0;m<p;m++)g[m]=pR(f+m*u);return{min:f,max:d,ticks:g}}function kR(t){var e=t.exponent,n=t.tickCount,r=Math.ceil(FN(e,t.max)),i=Math.floor(FN(e,t.min)),o=OR(i,r,n).ticks;return o.map((function(t){var n=t>=0?1:-1;return Math.pow(t,e)*n}))}function IR(t,e){var n=t.length*e;return 1===e?t[t.length-1]:0===e?t[0]:n%1!==0?t[Math.ceil(n)-1]:t.length%2===0?(t[n-1]+t[n])/2:t[n]}function PR(t){var e=t.tickCount,n=t.values;if(!n||!n.length)return[];for(var r=n.slice().sort((function(t,e){return t-e})),i=[],o=0;o<e;o++){var a=o/(e-1);i.push(IR(r,a))}return i}function LR(t){var e=t.min,n=t.max,r=t.tickCount,i=t.tickInterval,o=t.minLimit,a=t.maxLimit,s=OR(e,n,r).ticks;return Object(RE["isNil"])(o)&&Object(RE["isNil"])(a)?i?hR(e,n,i).ticks:s:dR(t,Object(RE["head"])(s),Object(RE["last"])(s))}function NR(t){var e=t.min,n=t.max,r=t.minTickInterval,i=t.tickInterval,o=t.tickCount;if(i)o=Math.ceil((n-e)/i);else{i=kN(e,n,o)[1];var a=(n-e)/i,s=a/o;s>1&&(i*=Math.ceil(s)),r&&i<r&&(i=r)}i=Math.max(Math.floor((n-e)/(Math.pow(2,12)-1)),i);for(var l=[],u=e;u<n+i;u+=i)l.push(u);return l}function RR(t){var e=eR(Object(NE["__assign"])({showLast:!0},t));return e}function DR(t){return new Date(t).getFullYear()}function FR(t){return new Date(t,0,1).getTime()}function jR(t){return new Date(t).getMonth()}function BR(t,e){var n=DR(t),r=DR(e),i=jR(t),o=jR(e);return 12*(r-n)+(o-i)%12}function zR(t,e){return new Date(t,e,1).getTime()}function UR(t,e){return Math.ceil((e-t)/MN)}function GR(t,e){return Math.ceil((e-t)/CN)}function qR(t,e){return Math.ceil((e-t)/6e4)}function VR(t){var e=t.min,n=t.max,r=t.minTickInterval,i=t.tickCount,o=t.tickInterval,a=[];o||(o=(n-e)/i,r&&o<r&&(o=r)),o=Math.max(Math.floor((n-e)/(Math.pow(2,12)-1)),o);var s=DR(e);if(o>AN)for(var l=DR(n),u=Math.ceil(o/AN),c=s;c<=l+u;c+=u)a.push(FR(c));else if(o>TN){var h=Math.ceil(o/TN),d=jR(e),f=BR(e,n);for(c=0;c<=f+h;c+=h)a.push(zR(s,c+d))}else if(o>MN){var p=new Date(e),g=p.getFullYear(),m=p.getMonth(),y=p.getDate(),v=Math.ceil(o/MN),b=UR(e,n);for(c=0;c<b+v;c+=v)a.push(new Date(g,m,y+c).getTime())}else if(o>CN){p=new Date(e),g=p.getFullYear(),m=p.getMonth(),v=p.getDate();var _=p.getHours(),x=Math.ceil(o/CN),w=GR(e,n);for(c=0;c<=w+x;c+=x)a.push(new Date(g,m,v,_+c).getTime())}else if(o>EN){var S=qR(e,n),E=Math.ceil(o/EN);for(c=0;c<=S+E;c+=E)a.push(e+c*EN)}else{var C=o;C<SN&&(C=SN);var M=Math.floor(e/SN)*SN,T=Math.ceil((n-e)/SN),A=Math.ceil(C/SN);for(c=0;c<T+A;c+=A)a.push(M+c*SN)}return a.length>=512&&console.warn("Notice: current ticks length("+a.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+o+") is too small, increase the value to solve the problem!"),a}DL("cat",eR),DL("time-cat",RR),DL("wilkinson-extended",TR),DL("r-pretty",LR),DL("time",NR),DL("time-pretty",VR),DL("log",AR),DL("pow",kR),DL("quantile",PR),DL("d3-linear",fR),QN("cat",zL),QN("category",zL),QN("identity",tR),QN("linear",DN),QN("log",UN),QN("pow",qN),QN("time",HN),QN("timeCat",PN),QN("quantize",YN),QN("quantile",JN);var HR=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};function WR(t){return Object(RE["map"])(t,(function(t,e){var n=0===e?"M":"L",r=t[0],i=t[1];return[n,r,i]}))}function YR(t){return WR(t)}function XR(t){if(t.length<=2)return YR(t);var e=[];Object(RE["each"])(t,(function(t){Object(RE["isEqual"])(t,e.slice(e.length-2))||e.push(t[0],t[1])}));var n=gO["a"](e,!1),r=Object(RE["head"])(t),i=r[0],o=r[1];return n.unshift(["M",i,o]),n}function JR(t,e,n,r){void 0===r&&(r=!0);var i=new DN({values:t}),o=new zL({values:Object(RE["map"])(t,(function(t,e){return e}))}),a=Object(RE["map"])(t,(function(t,r){return[o.scale(r)*e,n-i.scale(t)*n]}));return r?XR(a):YR(a)}function ZR(t,e,n,r){void 0===r&&(r=5);for(var i=new DN({values:t}),o=new zL({values:Object(RE["map"])(t,(function(t,e){return e}))}),a=Object(RE["map"])(t,(function(t,r){return[o.scale(r)*e,n-i.scale(t)*n]})),s=[],l=0;l<a.length;l++){var u=a[l],c={x:u[0],y:u[1],y0:n,size:r},h=$R(c);s.push.apply(s,h)}return tD(s)}function KR(t,e){var n=new DN({values:t}),r=Math.max(0,n.min);return e-n.scale(r)*e}function QR(t,e,n,r){var i=HR([],t,!0),o=KR(r,n);return i.push(["L",e,o]),i.push(["L",0,o]),i.push(["Z"]),i}function $R(t){var e,n,r,i,o=t.x,a=t.y,s=t.y0,l=t.size;Object(RE["isArray"])(a)?(e=a[0],n=a[1]):(e=s,n=a),Object(RE["isArray"])(o)?(r=o[0],i=o[1]):(r=o-l/2,i=o+l/2);var u=[{x:r,y:e},{x:r,y:n}];return u.push({x:i,y:n},{x:i,y:e}),u}function tD(t,e){void 0===e&&(e=!0);var n=[],r=t[0];n.push(["M",r.x,r.y]);for(var i=1,o=t.length;i<o;i++)n.push(["L",t[i].x,t[i].y]);return e&&(n.push(["L",r.x,r.y]),n.push(["z"])),n}var eD=function(){return eD=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},eD.apply(this,arguments)},nD={stroke:"#C5C5C5",strokeOpacity:.85},rD={fill:"#CACED4",opacity:.85},iD=function(){function t(t){var e=t.x,n=void 0===e?0:e,r=t.y,i=void 0===r?0:r,o=t.width,a=void 0===o?200:o,s=t.height,l=void 0===s?26:s,u=t.smooth,c=void 0===u||u,h=t.isArea,d=void 0!==h&&h,f=t.data,p=void 0===f?[]:f,g=t.lineStyle,m=t.areaStyle,y=t.group,v=t.interval,b=void 0===v?null:v;this.group=y,this.x=n,this.y=i,this.width=a,this.height=l,this.data=p,this.smooth=c,this.isArea=d,this.lineStyle=Object.assign({},nD,g),this.areaStyle=Object.assign({},rD,m),this.intervalConfig=b,this.renderLine()}return t.prototype.renderLine=function(){var t=this,e=t.x,n=t.y,r=t.width,i=t.height,o=(t.barWidth,t.data),a=t.smooth,s=t.isArea,l=t.lineStyle,u=t.areaStyle,c=this.group.addGroup({name:"trend-group"});if(o){var h=JR(o,r,i,a);if(c.addShape("path",{attrs:eD({path:h},l),name:"trend-line"}),s){var d=QR(h,r,i,o);c.addShape("path",{attrs:eD({path:d},u),name:"trend-area"})}}this.intervalConfig&&c.addShape("path",{attrs:eD({path:ZR(this.intervalConfig.data,r,i,this.intervalConfig.style.barWidth)},this.intervalConfig.style),name:"trend-interval"}),c.move(e,n)},t.prototype.destory=function(){this.group.destroy()},t}(),oD=iD,aD=function(){return aD=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},aD.apply(this,arguments)},sD={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},lD={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize"},uD=function(){function t(t){var e=t.group,n=t.name,r=t.type,i=t.x,o=void 0===i?0:i,a=t.y,s=void 0===a?0:a,l=t.width,u=void 0===l?2:l,c=t.height,h=void 0===c?24:c,d=t.style,f=void 0===d?{}:d;this.group=e,this.name=n,this.handleType=r,this.x=o,this.y=s,this.width=u,this.height=h,"trend"===r?this.style=aD(aD({},sD),f):"simple"===r&&(this.style=aD(aD({},lD),f)),this.renderHandle()}return t.prototype.setX=function(t){this.setXY(t,void 0)},t.prototype.setY=function(t){this.setXY(void 0,t)},t.prototype.setXY=function(t,e){Object(RE["isNumber"])(t)&&(this.x=t),Object(RE["isNumber"])(e)&&(this.y=e),this.updateXY()},t.prototype.renderHandle=function(){var t=this,e=t.width,n=t.height,r=t.style,i=t.name,o=r.fill,a=r.stroke,s=r.radius,l=r.opacity,u=r.cursor;this.handleGroup=this.group.addGroup(),"trend"===this.handleType?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:e,height:n,fill:o,stroke:a,radius:s,opacity:l,cursor:u},name:"".concat(i,"-handler")}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:e/2,y:0,r:2*e,fill:o,stroke:a,radius:s,opacity:l,cursor:u,lineAppendWidth:12},name:"".concat(i,"-handler")}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:e/2,y:n,r:2*e,fill:o,stroke:a,radius:s,opacity:l,cursor:u},name:"".concat(i,"-handler")})):"simple"===this.handleType&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:e/2,y:n/2,r:2*e,fill:o,stroke:a,radius:s,opacity:l,cursor:u,lineWidth:2},name:"".concat(i,"-handler")})),this.updateXY(),"trend"===this.handleType?this.bindTrendEvents():"simple"===this.handleType&&this.bindSimpleEvents()},t.prototype.bindSimpleEvents=function(){var t=this,e=this.name;this.handleGroup.on("".concat(e,"-handler:mouseenter"),(function(){var e=t.style.highLightFill;t.topCircle.attr("fill",e)})),this.handleGroup.on("".concat(e,"-handler:mouseleave"),(function(){var e=t.style.fill;t.topCircle.attr("fill",e)}))},t.prototype.bindTrendEvents=function(){var t=this,e=this.name;this.handleGroup.on("".concat(e,"-handler:mouseenter"),(function(){var e=t.style.highLightFill;t.verticalLine.attr("fill",e),t.topCircle.attr("fill",e),t.bottomCircle.attr("fill",e)})),this.handleGroup.on("".concat(e,"-handler:mouseleave"),(function(){var e=t.style.fill;t.verticalLine.attr("fill",e),t.topCircle.attr("fill",e),t.bottomCircle.attr("fill",e)}))},t.prototype.show=function(){this.handleGroup.show()},t.prototype.hide=function(){this.handleGroup.hide()},t.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},t}(),cD=uD,hD=function(){return hD=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},hD.apply(this,arguments)},dD=UE["a"].transform,fD={fill:"#416180",opacity:.05},pD={fill:"#416180",opacity:.15,radius:5},gD={fill:"#5B8FF9",opacity:.3,cursor:"grab"},mD=2,yD={width:mD,height:24},vD={textBaseline:"middle",fill:"#000",opacity:.45},bD={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35},_D={lineWidth:1,stroke:"#ccc"},xD=function(){function t(t){var e=this;this.prevX=0,this.onMouseDown=function(t){return function(n){e.currentHandler=t;var r=n.originalEvent;r.stopPropagation(),r.preventDefault(),e.prevX=Object(RE["get"])(r,"touches.0.pageX",r.pageX);var i=e.canvas.get("container");i.addEventListener("mousemove",e.onMouseMove),i.addEventListener("mouseup",e.onMouseUp),i.addEventListener("mouseleave",e.onMouseUp),i.addEventListener("touchmove",e.onMouseMove),i.addEventListener("touchend",e.onMouseUp),i.addEventListener("touchcancel",e.onMouseUp)}},this.onMouseMove=function(t){t.stopPropagation(),t.preventDefault();var n=Object(RE["get"])(t,"touches.0.pageX",t.pageX),r=n-e.prevX,i=e.adjustOffsetRange(r/e.width);e.updateStartEnd(i),e.updateUI(),e.prevX=n},this.onMouseUp=function(){e.currentHandler&&(e.currentHandler=void 0);var t=e.canvas.get("container");t&&(t.removeEventListener("mousemove",e.onMouseMove),t.removeEventListener("mouseup",e.onMouseUp),t.removeEventListener("mouseleave",e.onMouseUp),t.removeEventListener("touchmove",e.onMouseMove),t.removeEventListener("touchend",e.onMouseUp),t.removeEventListener("touchcancel",e.onMouseUp))};var n=t.x,r=void 0===n?0:n,i=t.y,o=void 0===i?0:i,a=t.width,s=void 0===a?100:a,l=t.height,u=t.padding,c=void 0===u?10:u,h=t.trendCfg,d=t.controllerCfg,f=void 0===d?{speed:1}:d,p=t.backgroundStyle,g=void 0===p?{}:p,m=t.foregroundStyle,y=void 0===m?{}:m,v=t.handlerStyle,b=void 0===v?{}:v,_=t.textStyle,x=void 0===_?{}:_,w=t.start,S=void 0===w?0:w,E=t.end,C=void 0===E?1:E,M=t.minText,T=void 0===M?"":M,A=t.maxText,O=void 0===A?"":A,k=t.group,I=t.graph,P=t.canvas,L=t.tick,N=void 0===L?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(t){return t},ticks:[]}:L,R=t.type;this.graph=I,this.canvas=P,this.group=k,this.timeBarType=R,this.x=r,this.y=o,this.width=s,this.height=l,this.padding=c,this.ticks=N.ticks,this.trendCfg=h,this.controllerCfg=f,this.currentSpeed=f.speed||1,this.tickLabelFormatter=N.tickLabelFormatter,"trend"===R?this.backgroundStyle=hD(hD({},fD),g):"simple"===R&&(this.backgroundStyle=hD(hD({},pD),g)),this.foregroundStyle=hD(hD({},gD),y),this.handlerStyle=hD(hD({},yD),b),this.textStyle=hD(hD({},vD),x),this.tickLabelStyle=hD(hD({},bD),N.tickLabelStyle),this.tickLineStyle=hD(hD({},_D),N.tickLineStyle),this.currentMode=f.defaultTimeType||CL.RANGE,this.start=S,this.end=C,this.minText=T,this.maxText=O,this.fontFamily="undefined"!==typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return t.prototype.update=function(t){var e=t.x,n=t.y,r=t.width,i=t.height,o=t.minText,a=t.maxText,s=t.start,l=t.end;this.start=Math.min(1,Math.max(s,0)),this.end=Math.min(1,Math.max(l,0)),Object(RE["assign"])(this,{x:e,y:n,width:r,height:i,minText:o,maxText:a}),this.updateUI()},t.prototype.setText=function(t,e){this.minTextShape.attr("text",t),this.maxTextShape.attr("text",e)},t.prototype.renderSlider=function(){var t=this,e=this,n=e.width,r=e.height,i=e.timeBarType;if("trend"===i&&Object(RE["size"])(Object(RE["get"])(this.trendCfg,"data"))){var o=new oD(hD(hD({x:this.x,y:this.y,width:n,height:r},this.trendCfg),{group:this.group}));this.trendComponent=o}var a=this.group.addGroup({name:"slider-group"});a.addShape("rect",{attrs:hD({x:0,y:0,width:n,height:r},this.backgroundStyle),name:"background"});var s=this.group.addGroup();"trend"===i?(this.minTextShape=s.addShape("text",{attrs:hD({x:0,y:r/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=s.addShape("text",{attrs:hD({y:r/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})):(this.minTextShape=s.addShape("text",{attrs:hD({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=s.addShape("text",{attrs:hD({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:hD({x:0,y:this.y,height:r},this.foregroundStyle),name:"foreground-shape"}),this.foregroundShape.on("mousedown",(function(t){t.target.attr("cursor","grabbing")})),this.foregroundShape.on("mouseup",(function(e){e.target.attr("cursor",t.foregroundStyle.cursor||"grab")}));var l=Object(RE["get"])(this.handlerStyle,"width",2),u=Object(RE["get"])(this.handlerStyle,"height",24),c=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new cD({name:"minHandlerShape",group:c,type:i,x:this.x,y:this.y,width:l,height:u,style:this.handlerStyle});var h=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new cD({name:"maxHandlerShape",group:h,type:i,x:this.x,y:this.y,width:l,height:u,style:this.handlerStyle});var d=this.ticks,f=n/(d.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach((function(t){t.destroy()}));var p=-1/0,g=this.tickLabelStyle.rotate;delete this.tickLabelStyle.rotate,this.textList=d.map((function(e,n){var i;t.tickPosList.push(t.x+n*f),t.tickLabelFormatter?(i=t.tickLabelFormatter(e),!Object(RE["isString"])(i)&&i&&(i=e.date)):i=e.date;var o=t.x+n*f,a=t.y+r+5,s=t.group.addShape("text",{attrs:hD({x:o,y:a,text:i,fontFamily:t.fontFamily||"Arial, sans-serif"},t.tickLabelStyle),name:"tick-label"});if(Object(RE["isNumber"])(g)&&n!==d.length-1){var l=dD([1,0,0,0,1,0,0,0,1],[["t",-o,-a],["r",g],["t",o-5,a+2]]);s.attr({textAlign:"left",matrix:l})}0===n?s.attr({textAlign:"left"}):n!==d.length-1&&s.attr({textAlign:"right"});var u=t.group.addShape("line",{attrs:hD({x1:t.x+n*f,y1:t.y+r+2,x2:t.x+n*f,y2:t.y+r+6},t.tickLineStyle),name:"tick-line"});u.toBack();var c=s.getBBox();return c.minX>p?(s.show(),u.show(),p=c.minX+c.width+10):(s.hide(),u.hide()),s})),this.controllerBtnGroup=new TL(hD({group:this.group,x:this.x,y:this.y+r+25,width:n,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),a.move(this.x,this.y),this.bindEvents(),this.currentMode===CL.SINGLE&&(this.minHandlerShape.hide(),this.foregroundShape.hide(),this.minTextShape.hide())},t.prototype.bindEvents=function(){var t=this,e=this.group.find((function(t){return"minHandlerShape"===t.get("name")}));e&&(e.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),e.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var n=this.group.find((function(t){return"maxHandlerShape"===t.get("name")}));n&&(n.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),n.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("".concat(oL,":click"),(function(){t.isPlay=!t.isPlay,t.currentHandler=t.maxHandlerShape,t.changePlayStatus()})),this.group.on("".concat(aL,":click"),(function(){t.currentHandler=t.maxHandlerShape,t.updateStartEnd(.01),t.updateUI()})),this.group.on("".concat(sL,":click"),(function(){t.currentHandler=t.maxHandlerShape,t.updateStartEnd(-.01),t.updateUI()})),this.group.on(iL,(function(e){var n=e.type,r=e.speed;t.currentSpeed=r,t.currentMode=n,n===CL.SINGLE?(t.minHandlerShape.hide(),t.foregroundShape.hide(),t.minTextShape.hide()):n===CL.RANGE&&(t.minHandlerShape.show(),t.foregroundShape.show(),t.minTextShape.show())}))},t.prototype.adjustTickIndex=function(t){for(var e=0;e<this.tickPosList.length-1;e++)if(this.tickPosList[e]<=t&&t<=this.tickPosList[e+1])return Math.abs(this.tickPosList[e]-t)<Math.abs(t-this.tickPosList[e+1])?e:e+1;return 0},t.prototype.adjustOffsetRange=function(t){switch(this.currentHandler){case this.minHandlerShape:var e=0-this.start,n=1-this.start;return Math.min(n,Math.max(e,t));case this.maxHandlerShape:e=0-this.end,n=1-this.end;return Math.min(n,Math.max(e,t));case this.foregroundShape:e=0-this.start,n=1-this.end;return Math.min(n,Math.max(e,t));default:return 0}},t.prototype.updateStartEnd=function(t){var e=this.ticks[this.adjustTickIndex(this.start*this.width)],n=this.ticks[this.adjustTickIndex(this.end*this.width)];if(!this.currentHandler)return this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):null===e||void 0===e?void 0:e.date,void(this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):null===n||void 0===n?void 0:n.date);switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=t,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):e.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=t,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date;break;case this.foregroundShape:this.start+=t,this.end+=t,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):e.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date;break;default:break}},t.prototype.updateUI=function(){var t=this;this.start<0&&(this.start=0),this.start>1&&(this.start=1),this.end>1&&(this.end=1),this.end<0&&(this.end=0);var e=this.x+this.start*this.width,n=this.x+this.end*this.width;this.foregroundShape.attr("x",e),this.foregroundShape.attr("width",n-e);var r=Object(RE["get"])(this.handlerStyle,"width",mD);this.setText(this.minText,this.maxText);var i=this.dodgeText([e,n]),o=i[0],a=i[1];this.minHandlerShape.setX(e-r/2),Object(RE["each"])(o,(function(e,n){return t.minTextShape.attr(n,e)})),this.maxHandlerShape.setX(n-r/2),Object(RE["each"])(a,(function(e,n){return t.maxTextShape.attr(n,e)})),this.currentMode===CL.RANGE?this.graph.emit(rL,{value:[this.start,this.end].sort()}):this.currentMode===CL.SINGLE&&this.graph.emit(rL,{value:[this.end,this.end]})},t.prototype.dodgeText=function(t){var e,n,r=2,i=Object(RE["get"])(this.handlerStyle,"width",mD),o=this.minTextShape,a=this.maxTextShape,s=t[0],l=t[1],u=!1;s>l&&(e=[l,s],s=e[0],l=e[1],n=[a,o],o=n[0],a=n[1],u=!0);var c=o.getBBox(),h=a.getBBox(),d=null,f=null;return"trend"===this.timeBarType?(d=s-c.width<this.x+r?{x:s+i/2+r,textAlign:"left"}:{x:s-i/2-r,textAlign:"right"},f=l+h.width>this.x+this.width?{x:l-i/2-r,textAlign:"right"}:{x:l+i/2+r,textAlign:"left"}):"simple"===this.timeBarType&&(d=o.attr("x")>c.width?{x:s,textAlign:"center"}:{x:s,textAlign:"left"},f=a.attr("x")>this.width-h.width?{x:l,textAlign:"right"}:{x:l,textAlign:"center"}),u?[f,d]:[d,f]},t.prototype.startPlay=function(){var t=this;return"undefined"!==typeof window?window.requestAnimationFrame((function(){var e=t,n=e.ticks,r=e.width,i=t.currentSpeed,o=r/n.length,a=o/(1e3*(10-i)/60),s=t.adjustOffsetRange(a/t.width);t.updateStartEnd(s),t.updateUI(),t.isPlay&&(t.playHandler=t.startPlay())})):void 0},t.prototype.changePlayStatus=function(t){void 0===t&&(t=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(eL,null)):this.playHandler&&("undefined"!==typeof window&&window.cancelAnimationFrame(this.playHandler),t&&this.graph.emit(nL,null))},t.prototype.destory=function(){this.graph.off(rL,(function(){}));var t=this.group,e=t.find((function(t){return"minHandlerShape"===t.get("name")}));e&&(e.off("minHandlerShape-handler:mousedown"),e.off("minHandlerShape-handler:touchstart"),e.destroy());var n=t.find((function(t){return"maxHandlerShape"===t.get("name")}));n&&(n.off("maxHandlerShape-handler:mousedown"),n.off("maxHandlerShape-handler:touchstart"),n.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),t.off("".concat(oL,":click")),t.off("".concat(aL,":click")),t.off("".concat(sL,":click")),t.off(iL),t.destroy(),this.trendComponent&&this.trendComponent.destory()},t}(),wD=xD,SD=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ED=function(){return ED=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ED.apply(this,arguments)},CD=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},MD=4,TD=26,AD=function(t){function e(e){var n=t.call(this,e)||this;return n.afterrenderListener=function(t){return n.filterData({})},n.valueChangeListener=Object(RE["throttle"])((function(t){return n.filterData(t)}),200,{trailing:!0,leading:!0}),n.changeData=function(t){var e=n.get("graph");n.cacheGraphData=e.get("data"),n.filterData({})},n}return SD(e,t),e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1,filterItemTypes:["node"],containerCSS:{},putInGraphContainer:!0}},e.prototype.initContainer=function(){var t,e,n=this.get("graph"),r=this._cfgs,i=r.width,o=r.height,a=r.putInGraphContainer,s=this.get("className")||"g6-component-timebar",l=this.get("container");if(l?(Object(RE["isString"])(l)&&(l=document.getElementById(l)),t=l):(t=Fk("<div class='".concat(s,"'></div>")),jk(t,{position:"relative"})),a){var u=this.get("graph").get("container");u.appendChild(t)}this.set("timeBarContainer",t);var c=n.get("renderer");e="SVG"===c?new Nk["Canvas"]({container:t,width:i,height:o}):new Lk["Canvas"]({container:t,width:i,height:o}),this.get("containerCSS")&&jk(t,this.get("containerCSS")),this.set("canvas",e)},e.prototype.init=function(){this.initContainer();var t=this.get("canvas"),e=t.addGroup({name:"timebar-group"});this.set("timeBarGroup",e),this.renderTrend(),this.initEvent();var n="undefined"!==typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",n)},e.prototype.play=function(){this.togglePlay(!0)},e.prototype.pause=function(){this.togglePlay(!1)},e.prototype.togglePlay=function(t){var e=this.get("timebar");e&&(e.isPlay=!!t,e.changePlayStatus())},e.prototype.renderTrend=function(){var t=this,e=this._cfgs,n=e.width,r=e.x,i=e.y,o=e.padding,a=e.type,s=e.trend,l=e.slider,u=e.controllerCfg,c=e.textStyle,h=e.tick,d=e.backgroundStyle,f=e.foregroundStyle,p=s.data,g=CD(s,["data"]),m=n-2*o,y="trend"===a?TD:MD,v=this.get("graph"),b=this.get("timeBarGroup"),_=this.get("canvas"),x=null;if("trend"===a||"simple"===a){var w=this.get("getValue");x=new wD(ED(ED({graph:v,canvas:_,group:b,type:a,x:r+o,y:"trend"===a?i+o:i+o+15,width:m,height:y,padding:o,backgroundStyle:d,foregroundStyle:f,trendCfg:ED(ED({},g),{data:p.map((function(t){return(null===w||void 0===w?void 0:w(t))||t.value}))})},l),{tick:{ticks:p,tickLabelFormatter:h.tickLabelFormatter,tickLabelStyle:h.tickLabelStyle,tickLineStyle:h.tickLineStyle},handlerStyle:ED(ED({},l.handlerStyle),{height:l.height||y}),controllerCfg:u,textStyle:c}))}else"tick"===a&&(x=new LL(ED({graph:v,canvas:_,group:b,x:r+o,y:i+o,width:n,height:42,padding:2,controllerCfg:u},h)));var S=function e(){var n=t.get("timebar");n.draggingHandler=!1,n.isPlay&&(n.isPlay=!1,n.currentHandler=n.maxHandlerShape,n.changePlayStatus()),document.removeEventListener("mouseup",e)};_.on("mousedown",(function(t){"maxHandlerShape-handler"!==t.target.get("name")&&"minHandlerShape-handler"!==t.target.get("name")&&t.target!==x.foregroundShape||document.addEventListener("mouseup",S)})),this.set("timebar",x)},e.prototype.filterData=function(t){var e,n=t.value;if(!n){n=[];var r=this._cfgs.type;r&&"trend"!==r&&"simple"!==r?"tick"===r&&(n[0]=this._cfgs.tick.start,n[1]=this._cfgs.tick.end):(n[0]=this._cfgs.slider.start,n[1]=this._cfgs.slider.end)}var i=null,o=this._cfgs.type;if("trend"===o||"simple"===o?i=this._cfgs.trend.data:"tick"===o&&(i=this._cfgs.tick.data),i&&0!==i.length){var a=this.get("rangeChange"),s=this.get("graph"),l=Math.round(i.length*n[0]),u=Math.round(i.length*n[1]);u=u>=i.length?i.length-1:u,l=l>=i.length?i.length-1:l;var c=null===(e=this._cfgs.tick)||void 0===e?void 0:e.tickLabelFormatter,h=c?c(i[l]):i[l].date,d=c?c(i[u]):i[u].date;if("tick"!==o){var f=this.get("timebar");f.setText(h,d)}if(a)a(s,h,d);else{(!this.cacheGraphData||this.cacheGraphData.nodes&&0===this.cacheGraphData.nodes.length)&&(this.cacheGraphData=s.get("data"));var p=this.get("filterItemTypes"),g=this.get("changeData"),m=this.get("getDate"),y=this.get("shouldIgnore"),v=i[l].date,b=i[u].date;if(g||void 0===g){var _=this.cacheGraphData.nodes,x=this.cacheGraphData.edges,w={},S={};s.getNodes().forEach((function(t){return w[t.getID()]=!0})),s.getEdges().forEach((function(t){return S[t.getID()]=!0})),p.includes("node")&&(null===_||void 0===_||_.forEach((function(t){var e=+((null===m||void 0===m?void 0:m(t))||t.date),n=e>=v&&e<=b||(null===y||void 0===y?void 0:y("node",t,{min:v,max:b})),r=w[t.id];r&&!n?(s.removeItem(t.id),w[t.id]=!1):!r&&n&&(s.addItem("node",t),w[t.id]=!0)})),null===x||void 0===x||x.forEach((function(t){var e=w[t.source]&&w[t.target]||(null===y||void 0===y?void 0:y("edge",t,{min:v,max:b})),n=!!s.findById(t.id);n&&!e?(s.removeItem(t.id),S[t.id]=!1):!n&&e?(s.addItem("edge",t),S[t.id]=!0):n||(S[t.id]=!1)}))),(this.get("filterEdge")||p.includes("edge"))&&(null===x||void 0===x||x.filter((function(t){var e=+((null===m||void 0===m?void 0:m(t))||t.date),n=e>=v&&e<=b||(null===y||void 0===y?void 0:y("edge",t,{min:v,max:b})),r=w[t.source]&&w[t.target],i=n&&r,o=S[t.id];o&&!i?(S[t.id]=!1,s.removeItem(t.id)):!o&&i&&(S[t.id]=!0,s.addItem("edge",t))})))}else p.includes("node")&&s.getNodes().forEach((function(t){var e=t.getModel();if(!(null===y||void 0===y?void 0:y("node",e,{min:v,max:b}))){var n=+((null===m||void 0===m?void 0:m(e))||e.date);n<v||n>b?s.hideItem(t):s.showItem(t)}})),(this.get("filterEdge")||p.includes("edge"))&&s.getEdges().forEach((function(t){var e=t.getModel();if(!(null===y||void 0===y?void 0:y("edge",e,{min:i[l].date,max:i[u].date}))){var n=+((null===m||void 0===m?void 0:m(e))||e.date);if(n<i[l].date||n>i[u].date)s.hideItem(t);else{var r=t.getSource().isVisible(),o=t.getTarget().isVisible();r&&o&&s.showItem(t)}}}))}}else console.warn("请配置 TimeBar 组件的数据")},e.prototype.initEvent=function(){var t=this.get("graph");t.on("afterchangedata",this.changeData),t.on("afterrender",this.afterrenderListener),t.on(rL,this.valueChangeListener)},e.prototype.destroy=function(){var e=this.get("graph");e.off("afterchangedata",this.changeData),e.off("afterrender",this.afterrenderListener),e.off(rL,this.valueChangeListener);var n=this.get("timebar");n&&n.destory&&n.destory(),t.prototype.destroy.call(this);var r=this.get("timeBarContainer");if(r){var i=this.get("container");i||(i=this.get("graph").get("container")),Object(RE["isString"])(i)&&(i=document.getElementById(i)),i===r&&(i=i.parentElement),i.removeChild(r)}},e}(gP),OD=AD,kD=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ID=wk.applyMatrix;function PD(t,e){var n,r;if(t.naturalWidth)n=t.naturalWidth,r=t.naturalHeight;else{var i=new Image;i.src=t.src,i.onload=function(){e&&e(i.width,i.height)}}return[n,r]}var LD=function(t){function e(e){return t.call(this,e)||this}return kD(e,t),e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,e=this._cfgs,n=e.graph;if(!this.destroyed){var r=this.get("container");Object(RE["isString"])(r)&&(r=document.getElementById(r));var i=Fk("<div class=".concat(e.viewportClassName,"\n      style='position:absolute;\n        left:0;\n        top:0;\n        box-sizing:border-box;\n        border: 2px solid #1980ff;\n        cursor:move'\n      </div>")),o=0,a=0,s=!1,l=0,u=0,c=0,h=0,d=0,f=0;r.addEventListener("mousedown",(function(r){if(e.refresh=!1,r.target===i){var l=i.style;c=parseInt(l.width,10),h=parseInt(l.height,10);var u=t.get("width"),p=t.get("height");c>u||h>p||(f=n.getZoom(),d=t.get("ratio"),s=!0,o=r.clientX,a=r.clientY)}}),!1),r.addEventListener("mousemove",(function(e){if(s&&!Object(RE["isNil"])(e.clientX)&&!Object(RE["isNil"])(e.clientY)){var r=t.get("width"),p=t.get("height"),g=i.style;l=parseInt(g.left,10),u=parseInt(g.top,10),c=parseInt(g.width,10),h=parseInt(g.height,10);var m=o-e.clientX,y=a-e.clientY;l-m<0?m=l:l-m+c>=r&&(m=0),u-y<0?y=u:u-y+h>=p&&(y=0),l-=m,u-=y,jk(i,{left:"".concat(l,"px"),top:"".concat(u,"px")}),n.translate(m*f/d,y*f/d),o=e.clientX,a=e.clientY}}),!1),r.addEventListener("mouseleave",(function(){s=!1,e.refresh=!0}),!1),r.addEventListener("mouseup",(function(){s=!1,e.refresh=!0}),!1),this.set("viewport",i),r.appendChild(i)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),e=this.get("width"),n=this.get("height"),r=this.get("graph"),i=r.get("width"),o=r.get("height"),a=i/o,s=r.getGroup(),l=s.getCanvasBBox(),u=[(l.minX+l.maxX)/2,(l.minY+l.maxY)/2],c=[l.maxX-l.minX,l.maxY-l.minY],h={centerX:u[0],centerY:u[1],width:0,height:0,minX:0,minY:0};l[0]/l[1]>a?(h.width=c[0],h.height=h.width/a):(h.height=c[1],h.width=h.height*a),h.minX=u[0]-h.width/2,h.minY=u[1]-h.height/2;var d=s.getMatrix();d||(d=[1,0,0,0,1,0,0,0,1]);var f=UE["b"].invert([1,0,0,0,1,0,0,0,1],d),p=ID({x:h.minX,y:h.minY},f),g=r.getCanvasByPoint(p.x,p.y),m=this.get("viewport");m||this.initViewport();var y=i/h.width,v=y*e,b=y*n,_=e*-g.x/h.width,x=n*-g.y/h.height,w=_+v,S=x+b;_<0&&(v+=_,_=0),w>e&&(v-=w-e),x<0&&(b+=x,x=0),S>n&&(b-=S-n),this.set("ratio",t);var E="".concat(_,"px"),C="".concat(x,"px");jk(m,{left:E,top:C,width:"".concat(v,"px"),height:"".concat(b,"px")})}},e.prototype.init=function(){this.initContainer()},e.prototype.initContainer=function(){var t=this,e=t.get("graph"),n=e.get("width"),r=e.get("height"),i=r/n,o=t.get("className"),a=t.get("container"),s=t.get("width"),l=t.get("height");s||l||(s=200),s?(l=i*s,t.set("height",l)):(s=1/i*l,t.set("width",s));var u=Fk("<div class='".concat(o,"' style='width: ").concat(s,"px; height: ").concat(l,"px; overflow: hidden; position: relative;'></div>"));Object(RE["isString"])(a)&&(a=document.getElementById(a)),a?a.appendChild(u):e.get("container").appendChild(u),t.set("container",u);var c=Fk('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');u.appendChild(c);var h=Fk('<span style="display: table-cell; vertical-align: middle; "></span>');c.appendChild(h),t.set("containerDOM",c),t.set("containerSpan",h);var d=Fk('<img alt="" src="'.concat(this.get("graphImg"),'" style="display: inline-block; user-select: none;" draggable="false" />'));t.set("imgDOM",d),t.updateImgSize(),h.appendChild(d),t.updateCanvas()},e.prototype.updateImgSize=function(){var t=this,e=t.get("imgDOM"),n=t.get("width"),r=t.get("height");e.onload=function(){var t=PD(e);t[0]>t[1]?e.width=n:e.height=r}},e.prototype.updateCanvas=function(){var t=this.get("refresh");if(t){var e=this.get("graph");if(!e.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var n=this.get("width"),r=e.get("canvas").getCanvasBBox(),i=r.width,o=n/i;this.set("ratio",o),this.updateViewport()}}},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.updateGraphImg=function(t){var e=this,n=e.get("imgDOM");n.remove(),e.set("graphImg",t);var r=Fk('<img alt="" src="'.concat(t,'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>'));e.set("imgDOM",r),r.src=t,e.updateImgSize();var i=e.get("containerSpan");i.appendChild(r),e.updateCanvas()},e.prototype.destroy=function(){var t=this.get("container");t.parentNode.removeChild(t)},e}(gP),ND=LD,RD=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),DD=function(){return DD=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},DD.apply(this,arguments)},FD=wk.distance,jD=.05,BD={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},zD=function(t){function e(e){return t.call(this,e)||this}return RD(e,t),e.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:Object(RE["clone"])(BD),showLabel:"edge",scaleRBy:"wheel"}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"filter"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"filter"};break}return t},e.prototype.init=function(){var t=this,e=t.get("showLabel"),n="node"===e||"both"===e,r="edge"===e||"both"===e;t.set("showNodeLabel",n),t.set("showEdgeLabel",r);var i=t.get("shouldShow");i||t.set("shouldShow",(function(){return!0}))},e.prototype.createDelegate=function(t){var e=this,n=e.get("delegate");n&&!n.destroyed||(e.filter(t),n=e.get("delegate"),n.on("dragstart",(function(t){})),n.on("drag",(function(t){e.filter(t)})),"wheel"===this.get("scaleRBy")&&n.on("mousewheel",(function(t){e.scaleRByWheel(t)})))},e.prototype.scaleRByWheel=function(t){var e=this;if(t&&t.originalEvent){t.preventDefault&&t.preventDefault();var n,r=e.get("graph"),i=e.get("delegate"),o=i?{x:i.attr("x"),y:i.attr("y")}:void 0;o||r.getPointByClient(t.clientX,t.clientY);n=t.originalEvent.wheelDelta<0?1-jD:1/(1-jD);var a=e.get("maxR"),s=e.get("minR"),l=e.get("r");(l>(a||r.get("height"))&&n>1||l<(s||.05*r.get("height"))&&n<1)&&(n=1),l*=n,e.set("r",l),e.filter(t)}},e.prototype.filter=function(t){var e=this,n=e.get("graph"),r=n.getNodes(),i={},o=e.get("r"),a=e.get("type"),s={x:t.x,y:t.y};e.updateDelegate(s,o);var l=e.get("shouldShow"),u=e.get("vShapes");u&&u.forEach((function(t){t.remove(),t.destroy()})),u=[],r.forEach((function(t){var e=t.getModel(),n=e.x,r=e.y;FD({x:n,y:r},s)<o&&(i[e.id]=t)}));var c=n.getEdges(),h=[];c.forEach((function(t){var e=t.getModel(),n=e.source,r=e.target;l(e)&&("only-source"===a||"one"===a?i[n]&&!i[r]&&h.push(t):"only-target"===a||"one"===a?i[r]&&!i[n]&&h.push(t):"both"===a&&i[n]&&i[r]&&h.push(t))}));var d=e.get("showNodeLabel"),f=e.get("showEdgelabel"),p=n.get("group");h.forEach((function(t){var e=t.get("group").get("children");e.forEach((function(t){var e=t.get("type"),n=p.addShape(e,{attrs:t.attr()});u.push(n),d&&"text"===e&&n.set("visible",!0)}))})),Object.keys(i).forEach((function(t){var e=i[t],n=e.get("group").clone();if(p.add(n),u.push(n),f)for(var r=n.get("children"),o=0;o<r.length;o++){var a=r[o];"text"===a.get("type")&&a.set("visible",!0)}})),e.set("vShapes",u)},e.prototype.updateParams=function(t){var e=this,n=t.r,r=t.trigger,i=t.minR,o=t.maxR,a=t.scaleRBy,s=t.showLabel,l=t.shouldShow;if(isNaN(t.r)||e.set("r",n),isNaN(o)||e.set("maxR",o),isNaN(i)||e.set("minR",i),"mousemove"!==r&&"click"!==r||e.set("trigger",r),"wheel"===a||"unset"===a){e.set("scaleRBy",a),e.get("delegate").remove(),e.get("delegate").destroy();var u=e.get("dPercentText");u&&(u.remove(),u.destroy())}"node"!==s&&"both"!==s||e.set("showNodeLabel",!0),"edge"!==s&&"both"!==s||e.set("showEdgeLabel",!0),l&&e.set("shouldShow",l)},e.prototype.updateDelegate=function(t,e){var n=this,r=n.get("graph"),i=n.get("delegate");if(!i||i.destroyed){var o=r.get("group"),a=n.get("delegateStyle")||BD;i=o.addShape("circle",{attrs:DD({r:e,x:t.x,y:t.y},a),name:"lens-shape",draggable:!0}),"drag"!==this.get("trigger")&&"wheel"===this.get("scaleRBy")&&i.on("mousewheel",(function(t){n.scaleRByWheel(t)}))}else i.attr({x:t.x,y:t.y,r:e});n.set("delegate",i)},e.prototype.clear=function(){var t=this,e=t.get("vShapes");e&&e.forEach((function(t){t.remove(),t.destroy()})),e=[],t.set("vShapes",e);var n=t.get("delegate");n&&!n.destroyed&&(n.remove(),n.destroy())},e.prototype.destroy=function(){this.clear()},e}(gP),UD=zD,GD=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qD=wk.pointLineDistance,VD={stroke:"#FA8C16",lineWidth:1},HD=function(t){function e(e){return t.call(this,e)||this}return GD(e,t),e.prototype.getDefaultCfgs=function(){return{line:VD,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},e.prototype.init=function(){},e.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},e.prototype.onDragStart=function(){this.initBoxLine()},e.prototype.onDrag=function(t){var e=t.item,n=e.get("delegateShape")||e,r=n.getBBox(),i=e.getModel(),o=i.x-r.x,a=i.y-r.y;this.show({x:r.minX+o,y:r.minY+a},{width:r.width,height:r.height})},e.prototype.onDragEnd=function(){this.destory()},e.prototype.initBoxLine=function(){var t=this._cfgs,e=t.horizontalLines,n=t.verticalLines,r=t.itemAlignType,i=this.get("graph"),o=i.getNodes();o.forEach((function(t){var i=t.getBBox(),o=t.get("id");!0===r||"horizontal"===r?(e["".concat(o,"tltr")]=[i.minX,i.minY,i.maxX,i.minY,t],e["".concat(o,"lcrc")]=[i.minX,i.centerY,i.maxX,i.centerY,t],e["".concat(o,"blbr")]=[i.minX,i.maxY,i.maxX,i.maxY,t]):"center"===r&&(e["".concat(o,"lcrc")]=[i.minX,i.centerY,i.maxX,i.centerY,t]),!0===r||"vertical"===r?(n["".concat(o,"tlbl")]=[i.minX,i.minY,i.minX,i.maxY,t],n["".concat(o,"tcbc")]=[i.centerX,i.minY,i.centerX,i.maxY,t],n["".concat(o,"trbr")]=[i.maxX,i.minY,i.maxX,i.maxY,t]):"center"===r&&(n["".concat(o,"tcbc")]=[i.centerX,i.minY,i.centerX,i.maxY,t])}))},e.prototype.show=function(t,e){var n=Object(RE["mix"])({},t);return this.itemAlign(t,e,n),t},e.prototype.itemAlign=function(t,e,n){var r=this,i=this._cfgs,o=i.horizontalLines,a=i.verticalLines,s=i.tolerance,l={x:n.x+e.width/2,y:n.y},u={x:n.x+e.width/2,y:n.y+e.height/2},c={x:n.x+e.width/2,y:n.y+e.height},h={x:n.x,y:n.y+e.height/2},d={x:n.x+e.width,y:n.y+e.height/2},f=[],p=[],g=null;if(this.clearAlignLine(),Object(RE["each"])(o,(function(t){t[4].isVisible&&(f.push(r.getLineDisObject(t,l)),f.push(r.getLineDisObject(t,u)),f.push(r.getLineDisObject(t,c)))})),Object(RE["each"])(a,(function(t){t[4].isVisible&&(p.push(r.getLineDisObject(t,h)),p.push(r.getLineDisObject(t,u)),p.push(r.getLineDisObject(t,d)))})),f.sort((function(t,e){return t.dis-e.dis})),p.sort((function(t,e){return t.dis-e.dis})),0!==f.length&&f[0].dis<s){t.y=f[0].line[1]-f[0].point.y+n.y,g={type:"item",horizontals:[f[0]]};for(var m=1;m<3;m++)f[0].dis===f[m].dis&&g.horizontals.push(f[m])}if(0!==p.length&&p[0].dis<s){t.x=p[0].line[0]-p[0].point.x+n.x,g?g.verticals=[p[0]]:g={type:"item",verticals:[p[0]]};for(m=1;m<3;m++)p[0].dis===p[m].dis&&g.verticals.push(p[m])}g&&(g.bbox=e,this.addAlignLine(g))},e.prototype.addAlignLine=function(t){var e=t.bbox,n=t.type,r=t.horizontals,i=t.verticals,o=this._cfgs,a=o.line,s=o.alignLines,l=this.get("graph"),u=l.get("group");"item"===n&&(r&&Object(RE["each"])(r,(function(t){var n,r,i=t.line,o=t.point,l=(i[0]+i[2])/2;o.x<l?(n=o.x-e.width/2,r=Math.max(i[0],i[2])):(n=o.x+e.width/2,r=Math.min(i[0],i[2]));var c=Object(RE["mix"])({x1:n,y1:i[1],x2:r,y2:i[1]},a),h=u.addShape("line",{attrs:c,capture:!1});s.push(h)})),i&&Object(RE["each"])(i,(function(t){var n,r,i=t.line,o=t.point,l=(i[1]+i[3])/2;o.y<l?(n=o.y-e.height/2,r=Math.max(i[1],i[3])):(n=o.y+e.height/2,r=Math.min(i[1],i[3]));var c=Object(RE["mix"])({x1:i[0],y1:n,x2:i[0],y2:r},a),h=u.addShape("line",{attrs:c,capture:!1});s.push(h)})))},e.prototype.getLineDisObject=function(t,e){return{line:t,point:e,dis:qD(t,e)}},e.prototype.getContainer=function(){return this.get("container")},e.prototype.clearAlignLine=function(){var t=this._cfgs.alignLines;Object(RE["each"])(t,(function(t){t.remove()})),t.length=0},e.prototype.destory=function(){var t=this._cfgs,e=t.horizontalLines,n=t.verticalLines,r=this.get("graph"),i=r.getNodes();i.forEach((function(t){var r=t.get("id");delete e["".concat(r,"tltr")],delete e["".concat(r,"lcrc")],delete e["".concat(r,"blbr")],delete n["".concat(r,"tlbl")],delete n["".concat(r,"tcbc")],delete n["".concat(r,"trbr")]})),this.clearAlignLine()},e}(gP),WD=HD,YD=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),XD=function(){return XD=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},XD.apply(this,arguments)},JD=["click","mouseenter"],ZD=function(t){function e(e){return t.call(this,e)||this}return YD(e,t),e.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},e.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var t=this.get("filter")||{},e=t.multiple;e&&"mouseenter"===t.trigger&&this.set("multiple",!1);var n=this.get("align");if(!n){var r=this.get("position").split("-");r.includes("left")&&(n="left"),n=r.includes("right")?"right":"center",this.set("align",n)}var i=this.get("graph"),o=i.get("container"),a=Fk("<div class='g6-legend-container' style=\"position: absolute;\"></div>");o.appendChild(a),this.set("container",a);var s=this.render();jk(a,this.getContainerPos(s)),this.bindEvents()},e.prototype.getContainerPos=function(t){void 0===t&&(t=[0,0]);var e=this,n=e.get("graph"),r=this.get("offsetX"),i=this.get("offsetY"),o=this.get("margin"),a=this.get("position").split("-"),s={top:0,right:1,bottom:2,left:3},l=0,u=0,c={left:(n.getWidth()-t[0])/2+l,top:(n.getHeight()-t[1])/2+u};return a.forEach((function(e){var r=o[s[e]],i=e;switch(e){case"top":r+=u;break;case"left":r+=l;break;case"bottom":r=n.getHeight()-t[1]-r+u,i="top";break;default:r=n.getWidth()-t[0]-r+l,i="left";break}c[i]=r})),c.top+=i+n.getContainer().offsetTop,c.left+=r+n.getContainer().offsetLeft,Object.keys(c).forEach((function(t){c[t]="".concat(c[t],"px")})),c},e.prototype.bindEvents=function(){var t=this,e=t.get("filter");if(e&&e.enable){var n=e.trigger||"click";JD.includes(n)||(console.warn("Trigger for legend filterling must be 'click' or 'mouseenter', 'click' will take effect by default."),n="click");var r=t.get("legendCanvas");"mouseenter"===n?(r.on("node-container:mouseenter",(function(e){return t.filterData(e)})),r.on("node-container:mouseleave",(function(e){t.clearFilter(),t.clearActiveLegend()}))):(r.on("node-container:click",(function(e){return t.filterData(e)})),r.on("click",(function(e){e.target&&e.target.isCanvas&&e.target.isCanvas()&&(t.clearFilter(),t.clearActiveLegend())})))}},e.prototype.changeData=function(t){this.set("data",t);var e=this.render();jk(this.get("container"),this.getContainerPos(e))},e.prototype.activateLegend=function(t){var e=this.get("filter"),n=null===e||void 0===e?void 0:e.multiple;n||this.clearActiveLegend();var r=t.get("parent");r.get("active")?(r.set("active",!1),this.findLegendItemsByState("active").length&&r.set("inactive",!0)):(r.set("inactive",!1),r.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach((function(t){t.set("inactive",!0)})):this.clearActiveLegend();var i=(null===e||void 0===e?void 0:e.legendStateStyles)||{},o=(null===i||void 0===i?void 0:i.inactive)||{opacity:.5,"text-shape":{opacity:.5}},a=o["text-shape"]||{};this.findLegendItemsByState("inactive").forEach((function(t){var e=t.get("children"),n=e[0],r=e[1];n.attr(XD(XD({},n.get("oriAttrs")),o)),r.attr(XD(XD({},r.get("oriAttrs")),a))}));var s=(null===i||void 0===i?void 0:i.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}},l=s["text-shape"]||{};this.findLegendItemsByState("active").forEach((function(t){var e=t.get("children"),n=e[0],r=e[1];n.attr(XD(XD({},n.get("oriAttrs")),s)),r.attr(XD(XD({},r.get("oriAttrs")),l))}))},e.prototype.findLegendItemsByState=function(t,e,n){void 0===e&&(e="all"),void 0===n&&(n=!0);var r=this.get("legendCanvas").find((function(t){return"root"===t.get("name")})),i=r.find((function(t){return"node-group"===t.get("name")})),o=r.find((function(t){return"edge-group"===t.get("name")}));return"node"===e?i.get("children").filter((function(e){return!!e.get(t)===n})):"edge"===e?o.get("children").filter((function(e){return!!e.get(t)===n})):i.get("children").filter((function(e){return!!e.get(t)===n})).concat(o.get("children").filter((function(e){return!!e.get(t)===n})))},e.prototype.clearActiveLegend=function(){var t=this.get("legendCanvas"),e=t.find((function(t){return"root"===t.get("name")})),n=[e.find((function(t){return"node-group"===t.get("name")})),e.find((function(t){return"edge-group"===t.get("name")}))];n.forEach((function(t){t.get("children").forEach((function(t){t.set("active",!1),t.set("inactive",!1);var e=t.get("children"),n=e[0],r=e[1];n.attr(n.get("oriAttrs")),r.attr(r.get("oriAttrs"))}))}))},e.prototype.filterData=function(t){var e=this.get("filter"),n=null===e||void 0===e?void 0:e.filterFunctions;if(e&&n){var r=this.get("legendCanvas"),i=this.get("graph"),o=e.graphActiveState||"active",a=e.graphInactiveState||"inactive",s=e.multiple;this.clearFilter(),s||this.clearActiveLegend(),this.activateLegend(t.target);var l=r.find((function(t){return"root"===t.get("name")})),u=l.find((function(t){return"node-group"===t.get("name")})),c=l.find((function(t){return"edge-group"===t.get("name")})),h=u.get("children").filter((function(t){return t.get("active")})),d=c.get("children").filter((function(t){return t.get("active")})),f=0,p=["getNodes","getEdges"];p.forEach((function(t){i[t]().forEach((function(e){var r=!1,s="getNodes"===t?h:d;s.forEach((function(t){var i=n[t.get("id")];r=r||i(e.getModel())})),r?(i.setItemState(e,a,!1),i.setItemState(e,o,!0),f++):(i.setItemState(e,o,!1),i.setItemState(e,a,!0))}))})),f||p.forEach((function(t){i[t]().forEach((function(t){i.clearItemStates(t,[a])}))}))}},e.prototype.clearFilter=function(){var t=this.get("graph"),e=this.get("filter");if(e){var n=e.graphActiveState||"active",r=e.graphInactiveState||"inactive";t.getNodes().forEach((function(e){t.clearItemStates(e,[n,r])})),t.getEdges().forEach((function(e){t.clearItemStates(e,[n,r])}))}},e.prototype.render=function(){var t=this;this.processData();var e=this.get("legendCanvas");e?e.clear():e=new Lk["Canvas"]({container:this.get("container"),width:200,height:200});var n=e.addGroup({name:"root"}),r=n.addGroup({name:"node-group"}),i=n.addGroup({name:"edge-group"});this.set("legendCanvas",e);var o=this.get("itemsData"),a=["nodes","edges"],s=[r,i];a.forEach((function(e,n){o[e].forEach((function(r){var i,o,a=s[n].addGroup({id:r.id,name:"node-container"}),l=r.type,u=t.getShapeSize(r),c=u.width,h=u.height,d=u.r,f=t.getStyle(e.substr(0,4),r);switch(r.type){case"circle":o={r:d,x:0,y:0};break;case"rect":o={width:c,height:h,x:-c/2,y:-h/2};break;case"ellipse":o={rx:c,ry:h,x:0,y:0},l="ellipse";break;case"line":o={x1:-c/2,y1:0,x2:c/2,y2:0},l="line";break;case"quadratic":o={path:[["M",-c/2,0],["Q",0,c/2,c/2,0]]},l="path";break;case"cubic":o={path:[["M",-c/2,0],["C",-c/6,c/2,c/6,-c/2,c/2,0]]},l="path";break;case"diamond":o={path:[["M",0,-h],["L",c,0],["L",0,h],["L",-c,0],["Z"]]},l="path";break;case"triangle":o={path:[["M",-c,h],["L",0,-h],["L",c,h],["Z"]]},l="path";break;case"star":o={path:wk.getStarPath(3*d,1.2*d)},l="path";break;default:o={r:d,x:0,y:0};break}var p=a.addShape(l,{attrs:XD(XD({},o),f),name:"".concat(r.type,"-node-keyShape"),oriAttrs:XD({opacity:1},f)});if(r.label){var g=p.getBBox(),m=(null===(i=r.labelCfg)||void 0===i?void 0:i.style)||{},y=XD({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},m);a.addShape("text",{attrs:XD({x:g.maxX+4,y:0,text:r.label},y),className:"legend-label",name:"".concat(r.type,"-node-text"),oriAttrs:y})}}))}));var l,u=this.get("padding"),c=n.find((function(t){return"title-container"===t.get("name")})),h={height:0,maxY:0,width:0};if(this.get("title")){c||(c=n.addGroup({name:"title-container"}));var d={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:u[0]},f=this.get("titleConfig")||{},p=Object.assign(d,f.style||{});l=c.addShape("text",{attrs:XD({text:this.get("title")},p)}),h=c.getCanvasBBox(),c.setMatrix([1,0,0,0,1,0,f.offsetX,f.offsetY,1])}this.layoutItems();var g=n.getCanvasBBox(),m=r.getCanvasBBox(),y=m.minX<0?Math.abs(m.minX)+u[3]:u[3],v=h.maxY<m.minY?Math.abs(h.maxY-m.minY)+u[0]:h.maxY+u[0],b=[1,0,0,0,1,0,y,v,1];r.setMatrix(b),g=n.getCanvasBBox();var _=[g.minX+g.width+u[1],g.minY+g.height+u[2]];if(l){f=XD({position:"center",offsetX:0,offsetY:0},this.get("titleConfig"));h=c.getCanvasBBox();var x=c.getMatrix()||[1,0,0,0,1,0,0,0,1];"center"===f.position?x[6]=_[0]/2+f.offsetX:"right"===f.position?(x[6]=_[0]-u[3]+f.offsetX,l.attr({textAlign:"right"})):(x[6]=u[3]+f.offsetX,l.attr({textAlign:"left"})),c.setMatrix(x),h=c.getCanvasBBox(),y=m.minX<0?Math.abs(m.minX)+u[3]:u[3],v=m.minY<h.maxY?Math.abs(h.maxY-m.minY)+u[0]:h.maxY+u[0],b=[1,0,0,0,1,0,y,v,1],r.setMatrix(b);var w=[1,0,0,0,1,0,y,v,1];"vertical"===this.get("layout")?w[6]+=m.maxX+this.get("horiSep"):w[7]+=m.maxY+this.get("vertiSep"),i.setMatrix(w)}else{m=r.getCanvasBBox();var S=[1,0,0,0,1,0,0,0,1];"vertical"===this.get("layout")?S[6]+=b[6]+m.maxX+this.get("horiSep"):S[7]+=b[7]+m.maxY+this.get("vertiSep"),i.setMatrix(S)}g=n.getCanvasBBox(),m=r.getCanvasBBox(),b=r.getMatrix()||[1,0,0,0,1,0,0,0,1];var E=i.getMatrix()||[1,0,0,0,1,0,0,0,1],C=i.getCanvasBBox();_=[Math.max(m.width+b[6],C.width+E[6])+u[1],Math.max(m.height+b[7],C.height+E[7])+u[2]],e.changeSize(_[0],_[1]);var M=this.get("containerStyle"),T=n.getMatrix()||[1,0,0,0,1,0,0,0,1],A=wk.invertMatrix({x:0,y:0},T),O=n.addShape("rect",{attrs:XD({x:A.x+(M.lineWidth||1),y:A.y+(M.lineWidth||1),width:_[0]-2*(M.lineWidth||1),height:_[1]-2*(M.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},M),name:"legend-back-rect",capture:!1});return O.toBack(),_},e.prototype.layoutItems=function(){var t=this.get("legendCanvas"),e=this.get("horiSep"),n=this.get("vertiSep"),r=this.get("layout"),i=this.get("align"),o=[0,0],a=t.find((function(t){return"root"===t.get("name")})),s=a.find((function(t){return"node-group"===t.get("name")})),l=a.find((function(t){return"edge-group"===t.get("name")})),u={min:0,max:-1/0},c=-1/0;s.get("children").forEach((function(t,i){0===i&&(u.min=o[0]);var a=t.get("children")[0],s=t.getCanvasBBox(),l=a.getBBox(),h=l.width,d=l.height,f=0,p=0,g=0;"vertical"===r?(p=o[1],g=o[0]+h/2,o[0]=g+s.height+n,f=s.maxX+p+h/2):(p=o[0]+h/2,g=o[1],o[0]=p+s.width+e,f=s.maxY+g+d/2),o[0]>u.max&&(u.max=o[0]),f>c&&(c=f),t.setMatrix([1,0,0,0,1,0,p,g,1])}));var h=u.max-u.min,d={min:0,max:-1/0},f=s.getCanvasBBox();o[0]=0,o[1]="vertical"===r?f.maxX+e:f.maxY+n,l.get("children").forEach((function(t,i){0===i&&(d.min=o[0]);var a=t.get("children")[0],s=t.getCanvasBBox(),l=a.getBBox(),u=l.width,c=l.height,h=0,f=0;"vertical"===r?(h=o[1],f=o[0],o[0]=f+s.height+n,t.setMatrix([1,0,0,0,1,0,0,f+c/2,1])):(h=o[0],f=o[1],o[0]=h+s.width+e,t.setMatrix([1,0,0,0,1,0,h+u/2,0,1])),o[0]>d.max&&(d.max=o[0])}));var p=d.max-d.min;if(i&&""!==i&&"left"!==i){var g=h-p,m="center"===i?Math.abs(g)/2:Math.abs(g),y=g<0?s:l;y.get("children").forEach((function(t){var e=t.getMatrix()||[1,0,0,0,1,0,0,0,1];"vertical"===r?e[7]+=m:e[6]+=m,t.setMatrix(e)}))}},e.prototype.processData=function(){var t=this.get("data"),e={nodes:[],edges:[]};t.nodes&&(t.nodes.sort((function(t,e){return t.order-e.order})),t.nodes.forEach((function(t){var n,r,i,o,a,s=t.size||[(null===(n=t.style)||void 0===n?void 0:n.width)||(null===(r=t.style)||void 0===r?void 0:r.r)||8,(null===(i=t.style)||void 0===i?void 0:i.height)||(null===(o=t.style)||void 0===o?void 0:o.r)||8],l=(null===(a=t.labelCfg)||void 0===a?void 0:a.style)||{};e.nodes.push({id:t.id||Object(RE["uniqueId"])(),type:t.type||"circle",style:XD({},t.style),order:t.order,label:t.label,itemType:"node",size:s,labelCfg:{position:"right",style:XD({fontFamily:"Arial"},l)}})}))),t.edges&&(t.edges.sort((function(t,e){return t.order-e.order})),t.edges.forEach((function(t){var n,r,i=t.type||"line";"cubic-horizontal"===t.type&&(i="cubic");var o=(null===(n=t.labelCfg)||void 0===n?void 0:n.style)||{},a=t.size||[(null===(r=t.style)||void 0===r?void 0:r.width)||8,1];e.edges.push({id:t.id||Object(RE["uniqueId"])(),type:i,size:a,style:XD({lineWidth:Object(RE["isArray"])(a)?a[1]:1},t.style),order:t.order,label:t.label,itemType:"edge",labelCfg:{position:"right",style:XD({fontFamily:"Arial"},o)}})}))),this.set("itemsData",e)},e.prototype.getContainer=function(){return this.get("container")},e.prototype.formatArray=function(t){var e=this.get(t);if(Object(RE["isNumber"])(e))this.set(t,[e,e,e,e]);else if(Object(RE["isArray"])(e))switch(e.length){case 0:this.set(t,[0,0,0,0]);break;case 1:this.set(t,[e[0],e[0],e[0],e[0]]);break;case 2:this.set(t,[e[0],e[1],e[0],e[1]]);break;case 3:this.set(t,[e[0],e[1],e[2],e[1]]);break;default:break}return this.get(t)},e.prototype.getShapeSize=function(t){var e,n,r;return t.size&&(Object(RE["isArray"])(t.size)?(e=t.size[0],n=t.size[1]||t.size[0],r=t.size[0]/2):Object(RE["isNumber"])(t.size)&&(e=t.size,n=t.size,r=t.size/2)),t.style&&(t.style.width&&(e=t.style.width),t.style.height&&(n=t.style.height),t.style.r&&(r=t.style.r)),r||(r=5),e||(e=r),n||(n=r),{width:e,height:n,r:r}},e.prototype.getStyle=function(t,e){var n="node"===t?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1};return XD(XD({},n),e.style||{})},e.prototype.destroy=function(){var t=this.get("legendCanvas");null===t||void 0===t||t.destroy();var e=this.get("graph"),n=e.get("container"),r=this.get("container");n.removeChild(r)},e}(gP),KD=ZD,QD=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$D=function(){return $D=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},$D.apply(this,arguments)},tF=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};"undefined"!==typeof document&&xP()("\n  .g6-annotation-container {\n    background-color: rgba(255, 255, 255, 0.3);\n    padding: 8px;\n  }\n  .g6-annotation-wrapper {\n    background-color: #fff;\n    box-shadow: 0 0 8px rgba(0, 0, 0, 0.85);\n  }\n  .g6-annotation-header-wapper {\n    height: fit-content;\n    width: 100%;\n    background-color: #5B8FF9;\n    display: inline-flex;\n    cursor: move;\n  }\n  .g6-annotation-title {\n    margin: 4px 40px 4px 8px;\n    cursor: text;\n    min-width: 32px;\n  }\n  .g6-annotation-collapse {\n    margin: 4px;\n    cursor: pointer;\n  }\n  .g6-annotation-expand {\n    margin: 4px;\n    cursor: pointer;\n  }\n  .g6-annotation-close {\n    margin: 4px 8px 4px 0;\n    cursor: pointer;\n  }\n  .g6-annotation-content {\n    padding: 8px;\n    width: fit-content;\n    cursor: text;\n    word-break: break-all;\n    min-width: 32px;\n  }\n  .g6-annotation-title-input-wrapper {\n    margin: 4px 40px 4px 8px;\n  }\n  .g6-annotation-content-input {\n    height: 100%;\n    word-break: break-all;\n  }\n  .g6-annotation-content-input-wrapper {\n    margin: 8px;\n    height: 100%;\n  }\n");var eF="canvas-annotation",nF=function(t){function e(e){return t.call(this,e)||this}return QD(e,t),e.prototype.getDefaultCfgs=function(){return{trigger:"click",editable:!0,itemHighlightState:"highlight",linkHighlightStyle:{shadowColor:"#5B8FF9",shadowBlur:10},cardCfg:{minHeight:60,width:"fit-content",height:"fit-content",collapseType:"minimize",closeType:"hide",borderRadius:5,maxTitleLength:20}}},e.prototype.getEvents=function(){var t={viewportchange:"updateLinks",afterlayout:"updateLinks",aftergraphrefreshposition:"updateLinks",afterupdateitem:"updateLink",afterchangedata:"onGraphDataChange",afteritemvisibilitychange:"onGraphItemVisibilityChange"};switch(this.get("trigger")){case"click":t=$D($D({},t),{"node:click":"showAnnotation","edge:click":"showAnnotation"})}return t},e.prototype.getDOMContent=function(t){if(!this.destroyed){var e=t.collapsed,n=t.maxWidth,r=t.title,i=void 0===r?"":r,o=t.content,a=void 0===o?"":o,s=t.borderRadius,l=void 0===s?5:s,u=e?"<p class='g6-annotation-expand'>+</p>":"<p class='g6-annotation-collapse'>-</p>",c=e?"":" <p class='g6-annotation-content'>".concat(a,"</p>"),h="<p class='g6-annotation-close'>x</p>",d=e?"".concat(l,"px"):"".concat(l,"px ").concat(l,"px 0 0");return'<div class="g6-annotation-wrapper" style="border-radius: '.concat(l,"px; max-width: ").concat(n,'px">\n        <div\n          class="g6-annotation-header-wapper"\n          style="border-radius: ').concat(d,";\"\n        >\n          <h4 class='g6-annotation-title'>").concat(i,"</h4>\n          ").concat(u,"\n          ").concat(h,"\n        </div>\n        ").concat(c,"\n      </div>")}},e.prototype.init=function(){var t=this;if(!t.destroyed){var e=t.get("graph"),n=e.getContainer(),r=t.get("container"),i=this.get("containerCfg");i?(r=this.createContainer(),n.appendChild(r)):r=n,this.set("container",r);var o=n.getBoundingClientRect(),a=new Lk["Canvas"]({container:n,width:o.right-o.left,height:o.bottom-o.top});jk(a.get("el"),{position:"absolute",top:0,left:0,pointerEvents:"none"}),window.addEventListener("resize",Object(RE["debounce"])((function(){return t.resizeCanvas(t)}),100));var s=a.addGroup({id:"annotation-link-group"});t.set("linkGroup",s),t.set("canvas",a),t.get("getTitle")||t.set("getTitle",(function(t){var e,n=(null===(e=null===t||void 0===t?void 0:t.getModel)||void 0===e?void 0:e.call(t))||{},r=n.label,i=n.id;return r||i||"-"})),t.get("getContent")||t.set("getContent",(function(t){var e,n;if(!t)return"-";var r=(null===(e=t.getModel)||void 0===e?void 0:e.call(t))||{},i=r.label,o=r.id,a=null===(n=t.getType)||void 0===n?void 0:n.call(t),s=a?"".concat(a,": "):"";return"".concat(s).concat(i||o||"")}));var l=t.get("defaultData");l&&this.readData(l)}},e.prototype.createContainer=function(){var t=this;if(!this.destroyed){var e=this.get("containerCfg"),n=this.get("graph"),r=n.getContainer(),i=r.getBoundingClientRect(),o=i.left,a=i.right,s=i.top,l=i.bottom,u=l-s,c=a-o,h=e.position,d=void 0===h?"top":h,f=e.offsetX,p=void 0===f?0:f,g=e.offsetY,m=void 0===g?0:g,y=tF(e,["position","offsetX","offsetY"]),v=e.height,b=void 0===v?"fit-content":v,_=e.width,x=void 0===_?n.getWidth():_;"100%"===b&&(b=u),"100%"===x&&(x=c);var w="unset",S="unset",E={};switch(d){case"right":w="".concat(u,"px"),E={top:0,right:0},E.right+=o+p,E.top+=s+m;break;case"bottom":S="".concat(c,"px"),E={bottom:0,left:0},E.left+=o+p,E.bottom+=s+m;break;case"top":S="".concat(c,"px");case"left":w="".concat(u,"px");default:E={top:0,left:0},E.left+=o+p,E.top+=s+m;break}Object.keys(E).forEach((function(t){E[t]="".concat(E[t],"px")}));var C=Fk("<div class='".concat(e.className," g6-annotation-container'></div>"));return jk(C,$D($D({position:"absolute",display:"top"===d||"bottom"===d?"inline-flex":"unset",width:Object(RE["isNumber"])(x)?"".concat(x,"px"):x,height:Object(RE["isNumber"])(b)?"".concat(b,"px"):b,maxHeight:w,maxWidth:S,overflow:"scroll"},E),y)),r.appendChild(C),C.addEventListener("scroll",(function(e){t.updateLinks()})),C}},e.prototype.resizeCanvas=function(t){clearTimeout(t.resizeTimer),t.resizeTimer=setTimeout((function(){if(t&&!t.destroyed){var e=t.get("container").getBoundingClientRect(),n=e.right-e.left,r=e.bottom-e.top;t.get("canvas").changeSize(n,r),t.updateOutsideCards(t)}}),250)},e.prototype.updateOutsideCards=function(t){var e=t||this,n=e.get("cardInfoMap")||{},r=e.get("graph"),i=r.getPointByCanvas(0,0),o=r.getPointByCanvas(r.getWidth(),r.getHeight()),a=r.getClientByPoint(i.x,i.y),s=a.x,l=a.y,u=r.getClientByPoint(o.x,o.y),c=u.x,h=u.y;Object.values(n).forEach((function(t){var e=t.card;if(e){var n=e.style,r=aF(n.left),i=aF(n.top),o=e.getBoundingClientRect(),a=o.width,u=o.height,d=r,f=i;r+a>c-s&&(d=c-s-a),r<0&&(d=0),i+u>h-l&&(f=h-l-u),i<0&&(f=0),jk(e,{left:"".concat(d,"px"),top:"".concat(f,"px")})}})),e.updateLinks()},e.prototype.showAnnotation=function(t){if(!this.destroyed){var e=t.item;this.toggleAnnotation(e)}},e.prototype.hideCards=function(){var t=this;if(!t.destroyed){var e=t.get("cardInfoMap")||{};Object.keys(e).forEach((function(e){t.hideCard(e)}))}},e.prototype.toggleAnnotation=function(t,e){var n,r;void 0===e&&(e={});var i=this;if(!i.destroyed){var o=i.get("cardInfoMap")||{},a=i.get("graph"),s=i.get("container"),l=i.get("containerCfg"),u=Object.assign({},i.get("cardCfg")||{},e),c=u.minHeight,h=u.minWidth,d=u.width,f=u.height,p=u.collapsed,g=void 0!==p&&p,m=u.x,y=u.y,v=u.title,b=u.content,_=u.maxTitleLength,x=u.defaultBegin,w=tF(u,["minHeight","minWidth","width","height","collapsed","x","y","title","content","maxTitleLength","defaultBegin"]),S=i.get("linkGroup"),E=this.get("rows")||[[]],C=null===(n=t.isCanvas)||void 0===n?void 0:n.call(t),M=C?eF:t.getID(),T=o[M]||{},A=T.card,O=T.link,k=T.x,I=T.y,P=T.title,L=T.content,N=this.get("getTitle"),R=this.get("getContent"),D=this.get("getContentPlaceholder")||function(){return""},F=this.get("getTitlePlaceHolder")||function(){return""},j=D(t),B=F(t),z=Fk(this.getDOMContent($D({itemId:M,collapsed:g,title:(null===(r=P||v||(null===N||void 0===N?void 0:N(t)))||void 0===r?void 0:r.substr(0,_))||B,content:L||b||(null===R||void 0===R?void 0:R(t))||j},w))),U=Object(RE["isNumber"])(c)?"".concat(c,"px"):c;jk(z,{minHeight:g?"unset":U,minWidth:Object(RE["isNumber"])(h)?"".concat(h,"px"):h,height:f,width:d});var G,q=!!A;if(q?(null===O||void 0===O||O.remove(!0),s.replaceChild(z,A)):s.appendChild(z),!l){if(G=s.getBoundingClientRect()||{},void 0!==m&&void 0!==y)k=m,I=y;else if(!q&&!C){var V=G.top,H=x||{},W=H.left,Y=H.right,X=void 0===Y?16:Y,J=H.top,Z=void 0===J?8:J,K=H.bottom,Q=X,$=Z;isNaN(W)||(Q=s.scrollWidth-W),isNaN(K)||($=s.scrollHeight-K);var tt=Object(RE["isNumber"])(h)?h:100;k=s.scrollWidth-z.scrollWidth-(E.length-1)*tt-Q;var et=E[E.length-1],nt=(et[et.length-1]||{}).bbox;I=(null===nt||void 0===nt?void 0:nt.bottom)-V||$}jk(z,{position:"absolute",left:"".concat(k,"px"),top:"".concat(I,"px"),cusor:l?"unset":"move"})}this.bindListener(z,M);var rt=z.getBoundingClientRect();if(!C){var it=oF(t,rt,a,this.get("canvas")),ot=this.get("linkStyle");O=S.addShape("path",{attrs:$D({lineWidth:1,lineDash:[5,5],stroke:"#ccc",path:it},ot)})}if(o[M]=$D($D({},o[M]||{}),{id:M,collapsed:g,card:z,link:O,x:k,y:I,cardBBox:rt,content:L||b,title:P||v,contentPlaceholder:j,titlePlaceholder:B,isCanvas:C}),i.set("cardInfoMap",o),l)this.updateCardPositionsInConatainer(),this.updateLinks();else{var at=!isNaN(m)&&!isNaN(y);if(!q&&!C&&!at){var st=G.bottom,lt=void 0===st?0:st;V=G.top;E[E.length-1].push({id:M,bbox:rt}),rt.top>lt-V-rt.height-16&&E.push([]),this.set("rows",E)}}this.updateCardSize(M);var ut=this.get("onAnnotationChange");null===ut||void 0===ut||ut(o[M],q?"update":"create")}},e.prototype.updateCardPositionsInConatainer=function(){if(!this.destroyed){var t=this.get("cardInfoMap");if(t){var e=this.get("container"),n=this.get("containerCfg").position,r=e.getBoundingClientRect().width,i=getComputedStyle(e),o=aF(i["paddingLeft"])+aF(i["paddingRight"]);r-=o,Object.values(t).forEach((function(t){var e=t.card,i=e.getBoundingClientRect().width;switch(n){case"right":jk(e,{marginLeft:r?"".concat(r-i,"px"):"0px"});break;case"top":case"bottom":jk(e,{marginLeft:"8px"});default:break}}))}}},e.prototype.handleExpandCollapseCard=function(t){if(!this.destroyed){var e=this.get("graph"),n=this.get("cardInfoMap");if(n){var r=n[t].collapsed,i=e.findById(t);if(i){var o=this.get("cardCfg").collapseType;"hide"!==o||r?this.toggleAnnotation(i,{collapsed:!r}):this.hideCard(t),n[t]=$D($D({},n[t]),{collapsed:!r})}}}},e.prototype.hideCard=function(t){if(!this.destroyed){var e=this.get("cardInfoMap");if(e&&e[t]){var n=e[t],r=n.card,i=n.link;jk(r,{display:"none"}),null===i||void 0===i||i.hide();var o=this.get("onAnnotationChange");o(e[t],"hide")}}},e.prototype.removeCard=function(t){if(!this.destroyed){var e=this.get("cardInfoMap");if(e){var n=e[t],r=n.card,i=n.link,o=this.get("container");o.removeChild(r),null===i||void 0===i||i.remove(!0),delete e[t];var a=this.get("onAnnotationChange");a(n,"remove")}}},e.prototype.bindListener=function(t,e){var n=this;if(!this.destroyed){t.addEventListener("mousemove",(function(t){var r;if("g6-annotation-collapse"===t.target.className?r="collapse":"g6-annotation-expand"===t.target.className?r="expand":"g6-annotation-close"===t.target.className&&(r="close"),r){var i=n.get("cardCfg").onMouseEnterIcon,o=void 0===i?function(){}:i;o(t,e,r)}})),t.addEventListener("mouseout",(function(t){var r;if("g6-annotation-collapse"===t.target.className?r="collapse":"g6-annotation-expand"===t.target.className?r="expand":"g6-annotation-close"===t.target.className&&(r="close"),r){var i=n.get("cardCfg").onMouseLeaveIcon,o=void 0===i?function(){}:i;o(t,e,r)}})),t.addEventListener("mouseenter",(function(t){var r=n.get("cardInfoMap");if(r){var i=n.get("graph"),o=i.findById(e);if(o){var a=n.get("itemHighlightState");i.setItemState(o,a,!0)}var s=r[e].link;if(s){var l=n.get("linkHighlightStyle")||{};s.attr(l)}}})),t.addEventListener("mouseleave",(function(t){var r=n.get("cardInfoMap");if(r){var i=n.get("graph"),o=i.findById(e);if(o){var a=n.get("itemHighlightState");i.setItemState(o,a,!1)}var s=r[e].link;if(s){var l=n.get("linkHighlightStyle")||{};Object.keys(l).forEach((function(t){s.attr(t,void 0),s.attr(t,void 0)}));var u=n.get("linkStyle");s.attr(u)}}})),t.addEventListener("click",(function(t){var r=(n.get("cardCfg")||{}).onClickIcon;if("g6-annotation-collapse"===t.target.className||"g6-annotation-expand"===t.target.className){var i=n.get("cardCfg").collapseType;"hide"===i?n.hideCard(e):n.handleExpandCollapseCard(e),null===r||void 0===r||r(t,e,"g6-annotation-collapse"===t.target.className?"collapse":"expand")}else if("g6-annotation-close"===t.target.className){var o=n.get("cardCfg").closeType;"remove"===o?n.removeCard(e):n.hideCard(e),null===r||void 0===r||r(t,e,"close")}}));var r=this.get("editable");r&&t.addEventListener("dblclick",(function(t){var r=n.get("cardInfoMap"),i=(n.get("cardCfg")||{}).maxTitleLength,o=void 0===i?20:i;if(r){var a=t.target,s=a.className;if("g6-annotation-title"===s||"g6-annotation-content"===s){var l="g6-annotation-title"===s?a.getBoundingClientRect():a.parentNode.getBoundingClientRect(),u=l.width,c=l.height,h=getComputedStyle(a),d="g6-annotation-title"===s?"input":"textarea",f=Fk("<".concat(d,' class="').concat(s,'-input" type="textarea" style="width:').concat(u,"px; height: ").concat(c,'px; min-width: 16px;"/>')),p=Fk('<div class="'.concat(s,'-input-wrapper" style="width: ').concat(u,"px; height: ").concat(c,"px; min-width: 16px; margin-right: ").concat(h["marginRight"],'" />'));p.appendChild(f),a.parentNode.replaceChild(p,a);var g=r[e],m=g.contentPlaceholder,y=g.titlePlaceholder,v=g.content,b=g.title,_=v;"g6-annotation-title"===s?(f.name="title",f.maxLength=o,_=b):f.name="content",_?(f.innerHTML=a.innerHTML,f.value=a.innerHTML):f.placeholder="g6-annotation-title"===s?y:m,f.focus(),f.addEventListener("blur",(function(t){f.value&&(a.innerHTML=f.value,g[f.name||"title"]=f.value),p.parentNode.replaceChild(a,p),n.updateCardSize(e);var r=n.get("onAnnotationChange");null===r||void 0===r||r(g,"update")}))}}}));var i=["g6-annotation-title","g6-annotation-content","g6-annotation-title-input","g6-annotation-content-input"];t.draggable=!0,t.addEventListener("dragstart",(function(e){var r=e.target.className;if(!i.includes(r)){var o=t.style;n.set("dragging",{card:t,x:e.clientX,y:e.clientY,left:aF(o.left),top:aF(o.top)})}})),t.addEventListener("drag",(function(t){t.preventDefault();var r=n.get("cardInfoMap");if(r){var i=t.clientX,o=t.clientY,a=n.get("dragging");if(!isNaN(i)&&!isNaN(o)&&a){var s=a.x,l=a.y,u=a.left,c=a.top,h=a.card,d=i-s,f=o-l;u+=d,c+=f;var p=n.get("graph"),g=p.getPointByCanvas(0,0),m=p.getPointByCanvas(p.getWidth(),p.getHeight()),y=p.getClientByPoint(g.x,g.y),v=y.x,b=y.y,_=p.getClientByPoint(m.x,m.y),x=_.x,w=_.y,S=h.getBoundingClientRect(),E=S.right-S.left,C=S.bottom-S.top;(u>x-v-E&&d>0||u<0&&d<0)&&(u-=d),(c>w-b-C&&f>0||c<0&&f<0)&&(c-=f),jk(h,{left:"".concat(u,"px"),top:"".concat(c,"px"),visibility:"hidden"}),s=i,l=o;var M=(r[e]||{}).link;if(M){var T=p.findById(e);M.attr("path",oF(T,S,p,n.get("canvas")))}n.set("dragging",{x:s,y:l,left:u,top:c,card:h})}}}));var o=function(t){var r=n.get("cardInfoMap");if(r){var i=n.get("dragging");if(i){var o=i.left,a=i.top,s=i.card;r[e].x=o,r[e].y=a,jk(s,{visibility:"visible"}),n.set("dragging",!1);var l=n.get("rows");null===l||void 0===l||l.forEach((function(t){for(var n=t.length-1;n>=0;n--)t[n].id===e&&t.splice(n,1)}));var u=n.get("onAnnotationChange");null===u||void 0===u||u(r[e],"update")}}};t.addEventListener("dragend",o)}},e.prototype.updateCardSize=function(t){var e=this.get("cardInfoMap");if(e){var n=e[t].card,r=n.getBoundingClientRect().width,i=n.getElementsByClassName("g6-annotation-title")[0];if(i){var o=getComputedStyle(i),a=aF(o["marginLeft"]),s=i.getBoundingClientRect().width;jk(i,{marginRight:"".concat(r-a-24-16-s,"px")})}}},e.prototype.updateLink=function(t){var e=t.item;if(e){var n=this.get("cardInfoMap");if(n){var r=this.get("canvas"),i=this.get("graph"),o=e.getID(),a=n[o]||{},s=a.link,l=a.card;if(s){var u=oF(e,l.getBoundingClientRect(),i,r);s.attr("path",u)}}}},e.prototype.updateLinks=function(){var t=this;if(!this.destroyed){var e=this.get("cardInfoMap");if(e){var n=this.get("graph");Object.values(e).forEach((function(e){var r=e.id,i=n.findById(r);t.updateLink({item:i})}))}}},e.prototype.onGraphDataChange=function(){var t=this,e=this.get("cardInfoMap");if(e){var n=this.get("graph");Object.values(e).forEach((function(e){var r=e.id,i=e.card,o=e.isCanvas;if(i&&!o&&"none"!==i.style.display){var a=n.findById(r);a&&a.isVisible()?t.toggleAnnotation(a):t.hideCard(r)}}))}},e.prototype.onGraphItemVisibilityChange=function(t){var e=t.item,n=t.visible;if(e&&!e.destroyed){var r=this.get("cardInfoMap");if(r){var i=e.getID();r[i]&&(n||this.hideCard(i))}}},e.prototype.saveData=function(t){void 0===t&&(t=!1);var e=this.get("cardInfoMap");if(e){var n=this.get("graph"),r=this.get("getTitle"),i=this.get("getContent"),o=[];return Object.values(e).forEach((function(e){var a=e.title,s=e.content,l=e.x,u=e.y,c=e.id,h=e.collapsed,d=e.card;if(!d||"none"!==d.style.display||t){var f=n.findById(c)||n.get("canvas");o.push({id:c,x:l,y:u,collapsed:h,title:a||(null===r||void 0===r?void 0:r(f)),content:s||(null===i||void 0===i?void 0:i(f)),visible:d&&"none"!==d.style.display})}})),o}},e.prototype.readData=function(t){var e=this,n=this.get("graph");t.forEach((function(t){var r=t.id,i=t.x,o=t.y,a=t.title,s=t.content,l=t.collapsed,u=t.visible,c=n.findById(r);if(c||r!==eF||(c=n.get("canvas")),!c){var h=e.get("cardInfoMap")||{};return h[r]=t,void e.set("cardInfoMap",h)}e.toggleAnnotation(c,{x:i,y:o,title:a,content:s,collapsed:l}),u||e.hideCard(r)}))},e.prototype.clear=function(){var t=this.get("cardInfoMap");if(t){var e=this.get("container");Object.values(t).forEach((function(t){var n=t.card,r=t.link;e.removeChild(n),null===r||void 0===r||r.remove(!0)})),this.set("cardInfoMap",{})}},e.prototype.destroy=function(){var t;this.clear(),null===(t=this.get("canvas"))||void 0===t||t.destroy();var e=this.get("graph");e&&!e.destroyed&&(this.get("containerCfg")&&e.getContainer().removeChild(this.get("container")),this.destroyed=!0)},e}(gP),rF=nF,iF=function(t,e){var n,r,i=1/0;Object.keys(t).forEach((function(o){var a=t[o];Object.keys(e).forEach((function(t){var s=e[t],l=a.x-s.x,u=a.y-s.y,c=l*l+u*u;i>c&&(i=c,n=a,r=s,[o,t])}))}));var o=20,a=wk.getControlPoint(n,r,.5,o);return[["M",n.x,n.y],["Q",a.x,a.y,r.x,r.y]]},oF=function(t,e,n,r){var i,o,a=t.getType();if("edge"===a)o=[t.getKeyShape().getPoint(.5)];else{var s=null===(i=t.getKeyShape)||void 0===i?void 0:i.call(t).getBBox(),l=s.minX,u=s.minY,c=s.maxX,h=s.maxY,d=t.getModel(),f=d.x,p=d.y;l+=f,u+=p,c+=f,h+=p,o={left:{x:l,y:(u+h)/2},right:{x:c,y:(u+h)/2},top:{x:(l+c)/2,y:u},bottom:{x:(l+c)/2,y:h}}}Object.keys(o).forEach((function(t){var e=o[t],i=e.x,a=e.y,s=n.getClientByPoint(i,a);o[t]=r.getPointByClient(s.x,s.y)}));var g=e.top,m=void 0===g?0:g,y=e.left,v=void 0===y?0:y,b=e.right,_=void 0===b?0:b,x=e.bottom,w=void 0===x?0:x,S={left:r.getPointByClient(v,(m+w)/2),right:r.getPointByClient(_,(m+w)/2),top:r.getPointByClient((v+_)/2,m),bottom:r.getPointByClient((v+_)/2,w)};return iF(o,S)},aF=function(t){return Number(t.replace(/\s+|px/gi,""))||0},sF={PluginBase:gP,Menu:EP,Grid:bP,Minimap:NP,Bundling:zP,ToolBar:KP,Tooltip:tL,Fisheye:WP,TimeBar:OD,ImageMinimap:ND,EdgeFilterLens:UD,SnapLine:WD,Legend:KD,Annotation:rF},lF=sF,uF=lF;Tk("circle",{options:{size:Ik.defaultNode.size,style:{x:0,y:0,stroke:Ik.defaultNode.style.stroke,fill:Ik.defaultNode.style.fill,lineWidth:Ik.defaultNode.style.lineWidth},labelCfg:{style:{fill:Ik.nodeLabel.style.fill,fontSize:Ik.nodeLabel.style.fontSize,fontFamily:Ik.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Ik.defaultNode.linkPoints.size,lineWidth:Ik.defaultNode.linkPoints.lineWidth,fill:Ik.defaultNode.linkPoints.fill,stroke:Ik.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(NE["__assign"])({},Ik.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).icon,r=void 0===n?{}:n,i=this.getShapeStyle(t),o=Object(RE["deepMix"])({},r,t.icon),a="".concat(this.type,"-keyShape"),s=e.addShape("circle",{attrs:i,className:a,name:a,draggable:!0});e["shapeMap"][a]=s;var l=o.width,u=o.height,c=o.show,h=o.text;if(c){var d="".concat(this.type,"-icon");e["shapeMap"][d]=h?e.addShape("text",{attrs:Object(NE["__assign"])({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:d,name:d,draggable:!0}):e.addShape("image",{attrs:Object(NE["__assign"])({x:-l/2,y:-u/2},o),className:d,name:d,draggable:!0})}return this.drawLinkPoints(t,e),s},drawLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints;if(n){var r=n||{},i=r.top,o=r.left,a=r.right,s=r.bottom,l=r.size,u=r.r,c=Object(NE["__rest"])(r,["top","left","right","bottom","size","r"]),h=this.getSize(t),d=h[0]/2;if(o){var f="link-point-left";e["shapeMap"][f]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},c),{x:-d,y:0,r:l/2||u||5}),className:f,name:f,isAnchorPoint:!0})}if(a){var p="link-point-right";e["shapeMap"][p]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},c),{x:d,y:0,r:l/2||u||5}),className:p,name:p,isAnchorPoint:!0})}if(i){var g="link-point-top";e["shapeMap"][g]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},c),{x:0,y:-d,r:l/2||u||5}),className:g,name:g,isAnchorPoint:!0})}if(s){var m="link-point-bottom";e["shapeMap"][m]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},c),{x:0,y:d,r:l/2||u||5}),className:m,name:m,isAnchorPoint:!0})}}},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},r=Object(RE["deepMix"])({},e,n),i=this.getSize(t),o=i[0]/2,a=Object(NE["__assign"])({x:0,y:0,r:o},r);return a},update:function(t,e,n){var r=e.getContainer(),i=this.getSize(t),o=Object(NE["__assign"])({},t.style);void 0===t.style.stroke&&t.color&&(o.stroke=t.color),void 0!==t.style.r||isNaN(i[0])||(o.r=i[0]/2),this.updateShape(t,e,o,!0,n),this.updateLinkPoints(t,r)}},"single-node"),Tk("rect",{options:{size:[100,30],style:{radius:0,stroke:Ik.defaultNode.style.stroke,fill:Ik.defaultNode.style.fill,lineWidth:Ik.defaultNode.style.lineWidth},labelCfg:{style:{fill:Ik.nodeLabel.style.fill,fontSize:Ik.nodeLabel.style.fontSize,fontFamily:Ik.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Ik.defaultNode.linkPoints.size,lineWidth:Ik.defaultNode.linkPoints.lineWidth,fill:Ik.defaultNode.linkPoints.fill,stroke:Ik.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:Object(NE["__assign"])({},Ik.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(t,e){var n=this.getShapeStyle(t),r=e.addShape("rect",{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return e["shapeMap"]["".concat(this.type,"-keyShape")]=r,this.drawLinkPoints(t,e),r},drawLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints,r=void 0===n?{}:n,i=r.top,o=r.left,a=r.right,s=r.bottom,l=r.size,u=r.r,c=Object(NE["__rest"])(r,["top","left","right","bottom","size","r"]),h=this.getSize(t),d=h[0],f=h[1];o&&(e["shapeMap"]["link-point-left"]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},c),{x:-d/2,y:0,r:l/2||u||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),a&&(e["shapeMap"]["link-point-right"]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},c),{x:d/2,y:0,r:l/2||u||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),i&&(e["shapeMap"]["link-point-top"]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},c),{x:0,y:-f/2,r:l/2||u||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),s&&(e["shapeMap"]["link-point-bottom"]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},c),{x:0,y:f/2,r:l/2||u||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},r=Object(RE["mix"])({},e,n),i=this.getSize(t),o=r.width||i[0],a=r.height||i[1],s=Object(NE["__assign"])({x:-o/2,y:-a/2,width:o,height:a},r);return s},update:function(t,e,n){var r=e.getContainer(),i=this.getOptions({}).style,o=this.getSize(t),a=e.get("keyShape");t.size||(o[0]=a.attr("width")||i.width,o[1]=a.attr("height")||i.height);var s={stroke:t.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},l=Object(RE["mix"])({},i,a.attr(),s);l=Object(RE["mix"])(l,t.style),this.updateShape(t,e,l,!1,n),this.updateLinkPoints(t,r)}},"single-node"),Tk("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:Ik.defaultNode.style.stroke,fill:Ik.defaultNode.style.fill,lineWidth:Ik.defaultNode.style.lineWidth},labelCfg:{style:{fill:Ik.nodeLabel.style.fill,fontSize:Ik.nodeLabel.style.fontSize,fontFamily:Ik.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Ik.defaultNode.linkPoints.size,lineWidth:Ik.defaultNode.linkPoints.lineWidth,fill:Ik.defaultNode.linkPoints.fill,stroke:Ik.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(NE["__assign"])({},Ik.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).icon,r=void 0===n?{}:n,i=this.getShapeStyle(t),o=e.addShape("ellipse",{attrs:i,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0});e["shapeMap"]["ellipse-keyShape"]=o;var a=r.width,s=r.height,l=r.show,u=r.text;return l&&(e["shapeMap"]["".concat(this.type,"-icon")]=u?e.addShape("text",{attrs:Object(NE["__assign"])({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},r),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):e.addShape("image",{attrs:Object(NE["__assign"])({x:-a/2,y:-s/2},r),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(t,e),o},drawLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints,r=void 0===n?{}:n,i=r.top,o=r.left,a=r.right,s=r.bottom,l=r.size,u=r.r,c=Object(NE["__rest"])(r,["top","left","right","bottom","size","r"]),h=this.getSize(t),d=h[0]/2,f=h[1]/2;o&&(e["shapeMap"]["link-point-left"]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},c),{x:-d,y:0,r:l/2||u||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),a&&(e["shapeMap"]["link-point-right"]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},c),{x:d,y:0,r:l/2||u||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),i&&(e["shapeMap"]["link-point-top"]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},c),{x:0,y:-f,r:l/2||u||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),s&&(e["shapeMap"]["link-point-bottom"]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},c),{x:0,y:f,r:l/2||u||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},r=Object(RE["mix"])({},e,n),i=this.getSize(t),o=i[0]/2,a=i[1]/2,s=Object(NE["__assign"])({x:0,y:0,rx:o,ry:a},r);return s},update:function(t,e,n){var r=e.getContainer(),i=this.getOptions({}).style,o=this.getSize(t),a={stroke:t.color,rx:o[0]/2,ry:o[1]/2},s=e.get("keyShape"),l=Object(RE["mix"])({},i,s.attr(),a);l=Object(RE["mix"])(l,t.style),this.updateShape(t,e,l,!0,n),this.updateLinkPoints(t,r)}},"single-node"),Tk("diamond",{options:{size:[80,80],style:{stroke:Ik.defaultNode.style.stroke,fill:Ik.defaultNode.style.fill,lineWidth:Ik.defaultNode.style.lineWidth},labelCfg:{style:{fill:Ik.nodeLabel.style.fill,fontSize:Ik.nodeLabel.style.fontSize,fontFamily:Ik.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Ik.defaultNode.linkPoints.size,lineWidth:Ik.defaultNode.linkPoints.lineWidth,fill:Ik.defaultNode.linkPoints.fill,stroke:Ik.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(NE["__assign"])({},Ik.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).icon,r=void 0===n?{}:n,i=this.getShapeStyle(t),o=e.addShape("path",{attrs:i,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});e["shapeMap"]["".concat(this.type,"-keyShape")]=o;var a=r.width,s=r.height,l=r.show,u=r.text;return l&&(e["shapeMap"]["".concat(this.type,"-icon")]=u?e.addShape("text",{attrs:Object(NE["__assign"])({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},r),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):e.addShape("image",{attrs:Object(NE["__assign"])({x:-a/2,y:-s/2},r),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(t,e),o},drawLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints,r=void 0===n?{}:n,i=r.top,o=r.left,a=r.right,s=r.bottom,l=r.size,u=r.r,c=Object(NE["__rest"])(r,["top","left","right","bottom","size","r"]),h=this.getSize(t),d=h[0],f=h[1];o&&(e["shapeMap"]["link-point-left"]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},c),{x:-d/2,y:0,r:l/2||u||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),a&&(e["shapeMap"]["link-point-right"]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},c),{x:d/2,y:0,r:l/2||u||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),i&&(e["shapeMap"]["link-point-top"]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},c),{x:0,y:-f/2,r:l/2||u||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),s&&(e["shapeMap"]["link-point-bottom"]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},c),{x:0,y:f/2,r:l/2||u||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getPath:function(t){var e=this.getSize(t),n=e[0],r=e[1],i=[["M",0,-r/2],["L",n/2,0],["L",0,r/2],["L",-n/2,0],["Z"]];return i},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},r=Object(RE["mix"])({},e,n),i=this.getPath(t),o=Object(NE["__assign"])({path:i},r);return o},update:function(t,e,n){var r=e.getContainer(),i=this.getOptions({}).style,o=this.getPath(t),a={stroke:t.color,path:o},s=e.get("keyShape"),l=Object(RE["mix"])({},i,s.attr(),a);l=Object(RE["mix"])(l,t.style),this.updateShape(t,e,l,!0,n),this.updateLinkPoints(t,r)}},"single-node"),Tk("triangle",{options:{size:40,direction:"up",style:{stroke:Ik.defaultNode.style.stroke,fill:Ik.defaultNode.style.fill,lineWidth:Ik.defaultNode.style.lineWidth},labelCfg:{style:{fill:Ik.nodeLabel.style.fill,fontSize:Ik.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Ik.defaultNode.linkPoints.size,lineWidth:Ik.defaultNode.linkPoints.lineWidth,fill:Ik.defaultNode.linkPoints.fill,stroke:Ik.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:Object(NE["__assign"])({},Ik.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(t,e){var n=this.mergeStyle||this.getOptions(t),r=n.icon,i=void 0===r?{}:r,o=n.direction,a=this.getShapeStyle(t),s=t.direction||o,l=e.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});e["shapeMap"]["".concat(this.type,"-keyShape")]=l;var u=i.width,c=i.height,h=i.show,d=i.offset,f=i.text;if(h)if(f)e["shapeMap"]["".concat(this.type,"-icon")]=e.addShape("text",{attrs:Object(NE["__assign"])({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0});else{var p=-u/2,g=-c/2;"up"!==s&&"down"!==s||(g+=d),"left"!==s&&"right"!==s||(p+=d),e["shapeMap"]["".concat(this.type,"-icon")]=e.addShape("image",{attrs:Object(NE["__assign"])({x:p,y:g},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})}return this.drawLinkPoints(t,e),l},drawLinkPoints:function(t,e){var n=this.mergeStyle||this.getOptions(t),r=n.linkPoints,i=void 0===r?{}:r,o=n.direction,a=t.direction||o,s=i.top,l=i.left,u=i.right,c=i.bottom,h=i.size,d=i.r,f=Object(NE["__rest"])(i,["top","left","right","bottom","size","r"]),p=this.getSize(t),g=p[0];if(l){var m=null,y=g*Math.sin(1/3*Math.PI),v=g*Math.sin(1/3*Math.PI);"up"===a?m=[-v,y]:"down"===a?m=[-v,-y]:"left"===a&&(m=[-v,v-y]),m&&(e["shapeMap"]["link-point-left"]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},f),{x:m[0],y:m[1],r:h/2||d||5}),className:"link-point-left",name:"link-point-left"}))}if(u){var b=null;y=g*Math.sin(1/3*Math.PI),v=g*Math.sin(1/3*Math.PI);"up"===a?b=[v,y]:"down"===a?b=[v,-y]:"right"===a&&(b=[v,v-y]),b&&(e["shapeMap"]["link-point-right"]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},f),{x:b[0],y:b[1],r:h/2||d||5}),className:"link-point-right",name:"link-point-right"}))}if(s){var _=null;y=g*Math.sin(1/3*Math.PI),v=g*Math.sin(1/3*Math.PI);"up"===a?_=[v-y,-y]:"left"===a?_=[v,-y]:"right"===a&&(_=[-v,-y]),_&&(e["shapeMap"]["link-point-top"]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},f),{x:_[0],y:_[1],r:h/2||d||5}),className:"link-point-top",name:"link-point-top"}))}if(c){var x=null;y=g*Math.sin(1/3*Math.PI),v=g*Math.sin(1/3*Math.PI);"down"===a?x=[-v+y,y]:"left"===a?x=[v,y]:"right"===a&&(x=[-v,y]),x&&(e["shapeMap"]["link-point-bottom"]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},f),{x:x[0],y:x[1],r:h/2||d||5}),className:"link-point-bottom",name:"link-point-bottom"}))}},getPath:function(t){var e=(this.mergeStyle||this.getOptions(t)).direction,n=t.direction||e,r=this.getSize(t),i=r[0],o=i*Math.sin(1/3*Math.PI),a=i*Math.sin(1/3*Math.PI),s=[["M",-a,o],["L",0,-o],["L",a,o],["Z"]];return"down"===n?s=[["M",-a,-o],["L",a,-o],["L",0,o],["Z"]]:"left"===n?s=[["M",-a,a-o],["L",a,-a],["L",a,a],["Z"]]:"right"===n&&(s=[["M",a,a-o],["L",-a,a],["L",-a,-a],["Z"]]),s},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},r=Object(RE["mix"])({},e,n),i=this.getPath(t),o=Object(NE["__assign"])({path:i},r);return o},update:function(t,e,n){var r=e.getContainer(),i=this.getOptions({}).style,o=this.getPath(t),a={stroke:t.color,path:o},s=e.get("keyShape"),l=Object(RE["mix"])({},i,s.attr(),a);l=Object(RE["mix"])(l,t.style),this.updateShape(t,e,l,!0,n),this.updateLinkPoints(t,r)},updateLinkPoints:function(t,e){var n=this.getOptions({}),r=n.linkPoints,i=n.direction,o=t.direction||i,a=e["shapeMap"]["link-point-left"]||e.find((function(t){return"link-point-left"===t.get("className")})),s=e["shapeMap"]["link-point-right"]||e.find((function(t){return"link-point-right"===t.get("className")})),l=e["shapeMap"]["link-point-top"]||e.find((function(t){return"link-point-top"===t.get("className")})),u=e["shapeMap"]["link-point-bottom"]||e.find((function(t){return"link-point-bottom"===t.get("className")})),c=r,h=a||s||l||u;h&&(c=h.attr());var d=Object(RE["mix"])({},c,t.linkPoints),f=d.fill,p=d.stroke,g=d.lineWidth,m=d.size/2;m||(m=d.r);var y=t.linkPoints?t.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},v=y.left,b=y.right,_=y.top,x=y.bottom,w=this.getSize(t),S=w[0],E={r:m,fill:f,stroke:p,lineWidth:g},C=null,M=S*Math.sin(1/3*Math.PI),T=S*Math.sin(1/3*Math.PI);"up"===o?C=[-T,M]:"down"===o?C=[-T,-M]:"left"===o&&(C=[-T,T-M]),C&&(a?v||void 0===v?a.attr(Object(NE["__assign"])(Object(NE["__assign"])({},E),{x:C[0],y:C[1]})):(a.remove(),delete e["shapeMap"]["link-point-left"]):v&&(e["shapeMap"]["link-point-left"]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},E),{x:C[0],y:C[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})));var A=null;"up"===o?A=[T,M]:"down"===o?A=[T,-M]:"right"===o&&(A=[T,T-M]),A&&(s?b||void 0===b?s.attr(Object(NE["__assign"])(Object(NE["__assign"])({},E),{x:A[0],y:A[1]})):(s.remove(),delete e["shapeMap"]["link-point-right"]):b&&(e["shapeMap"]["link-point-right"]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},E),{x:A[0],y:A[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})));var O=null;"up"===o?O=[T-M,-M]:"left"===o?O=[T,-M]:"right"===o&&(O=[-T,-M]),O&&(l?_||void 0===_?l.attr(Object(NE["__assign"])(Object(NE["__assign"])({},E),{x:O[0],y:O[1]})):(l.remove(),delete e["shapeMap"]["link-point-top"]):_&&(e["shapeMap"]["link-point-top"]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},E),{x:O[0],y:O[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})));var k=null;"down"===o?k=[-T+M,M]:"left"===o?k=[T,M]:"right"===o&&(k=[-T,M]),k&&(u?x||void 0===x?u.attr(Object(NE["__assign"])(Object(NE["__assign"])({},E),{x:k[0],y:k[1]})):(u.remove(),delete e["shapeMap"]["link-point-bottom"]):x&&(e["shapeMap"]["link-point-bottom"]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},E),{x:k[0],y:k[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})))}},"single-node"),Tk("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:Ik.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14,fontFamily:Ik.windowFontFamily},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf",fontFamily:Ik.windowFontFamily},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).preRect,r=void 0===n?{}:n,i=this.getShapeStyle(t),o=this.getSize(t),a=o[0],s=o[1],l=e.addShape("rect",{attrs:i,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});e["shapeMap"]["".concat(this.type,"-keyShape")]=l;var u=r.show,c=Object(NE["__rest"])(r,["show"]);return u&&(e["shapeMap"]["pre-rect"]=e.addShape("rect",{attrs:Object(NE["__assign"])({x:-a/2,y:-s/2,height:s},c),className:"pre-rect",name:"pre-rect",draggable:!0})),this.drawLogoIcon(t,e),this.drawStateIcon(t,e),this.drawLinkPoints(t,e),l},drawLogoIcon:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).logoIcon,r=void 0===n?{}:n,i=this.getSize(t),o=i[0];if(r.show){var a=r.width,s=r.height,l=r.x,u=r.y,c=r.offset,h=r.text,d=Object(NE["__rest"])(r,["width","height","x","y","offset","text"]);e["shapeMap"]["rect-logo-icon"]=h?e.addShape("text",{attrs:Object(NE["__assign"])({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},d),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):e.addShape("image",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},d),{x:l||-o/2+a+c,y:u||-s/2,width:a,height:s}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).stateIcon,r=void 0===n?{}:n,i=this.getSize(t),o=i[0];if(r.show){var a=r.width,s=r.height,l=r.x,u=r.y,c=r.offset,h=r.text,d=Object(NE["__rest"])(r,["width","height","x","y","offset","text"]);e["shapeMap"]["rect-state-icon"]=h?e.addShape("text",{attrs:Object(NE["__assign"])({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},d),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):e.addShape("image",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},d),{x:l||o/2-a+c,y:u||-s/2,width:a,height:s}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints,r=void 0===n?{}:n,i=r.top,o=r.left,a=r.right,s=r.bottom,l=r.size,u=r.r,c=Object(NE["__rest"])(r,["top","left","right","bottom","size","r"]),h=this.getSize(t),d=h[0],f=h[1];o&&(e["shapeMap"]["link-point-left"]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},c),{x:-d/2,y:0,r:l/2||u||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),a&&(e["shapeMap"]["link-point-right"]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},c),{x:d/2,y:0,r:l/2||u||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),i&&(e["shapeMap"]["link-point-top"]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},c),{x:0,y:-f/2,r:l/2||u||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),s&&(e["shapeMap"]["link-point-bottom"]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},c),{x:0,y:f/2,r:l/2||u||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},drawLabel:function(t,e){var n=this.getOptions(t),r=n.labelCfg,i=void 0===r?{}:r,o=n.logoIcon,a=void 0===o?{}:o,s=n.descriptionCfg,l=void 0===s?{}:s,u=this.getSize(t),c=u[0],h=null,d=a.show,f=a.width,p=-c/2+i.offset;d&&(p=-c/2+f+i.offset);var g=i.style,m=l.style,y=l.paddingTop;return Object(RE["isString"])(t.description)?(h=e.addShape("text",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},g),{x:p,y:-5,text:t.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),e["shapeMap"]["text-shape"]=h,e["shapeMap"]["rect-description"]=e.addShape("text",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},m),{x:p,y:17+(y||0),text:t.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})):(h=e.addShape("text",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},g),{x:p,y:7,text:t.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),e["shapeMap"]["text-shape"]=h),h},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},r=Object(RE["mix"])({},e,n),i=this.getSize(t),o=r.width||i[0],a=r.height||i[1],s=Object(NE["__assign"])({x:-o/2,y:-a/2,width:o,height:a},r);return s},update:function(t,e){var n=this.mergeStyle||this.getOptions(t),r=n.style,i=void 0===r?{}:r,o=n.labelCfg,a=void 0===o?{}:o,s=n.descriptionCfg,l=void 0===s?{}:s,u=this.getSize(t),c=u[0],h=u[1],d=e.get("keyShape");d.attr(Object(NE["__assign"])(Object(NE["__assign"])({},i),{x:-c/2,y:-h/2,width:c,height:h}));var f=e.getContainer(),p=f["shapeMap"]["rect-logo-icon"]||f.find((function(t){return"rect-logo-icon"===t.get("className")})),g=p?p.attr():{},m=Object(RE["mix"])({},g,t.logoIcon),y=m.width;void 0===y&&(y=this.options.logoIcon.width);var v=t.logoIcon?t.logoIcon.show:void 0,b=a.offset,_=-c/2+y+b;v||void 0===v||(_=-c/2+b);var x=f["shapeMap"]["node-label"]||f.find((function(t){return"node-label"===t.get("className")})),w=f["shapeMap"]["rect-description"]||f.find((function(t){return"rect-description"===t.get("className")}));if(t.label)if(x){var S=t.labelCfg?t.labelCfg.style:{},E=Object(RE["mix"])({},x.attr(),S);t.label&&(E.text=t.label),E.x=_,Object(RE["isString"])(t.description)&&(E.y=-5),w&&(w.resetMatrix(),w.attr({x:_})),x.resetMatrix(),x.attr(E)}else f["shapeMap"]["node-label"]=f.addShape("text",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},a.style),{x:_,y:t.description?-5:7,text:t.label}),className:"node-label",name:"node-label",draggable:!0,labelRelated:!0});if(Object(RE["isString"])(t.description)){var C=l.paddingTop;if(w){S=t.descriptionCfg?t.descriptionCfg.style:{};var M=Object(RE["mix"])({},w.attr(),S);Object(RE["isString"])(t.description)&&(M.text=t.description),M.x=_,w.resetMatrix(),w.attr(Object(NE["__assign"])(Object(NE["__assign"])({},M),{y:17+(C||0)}))}else f["shapeMap"]["rect-description"]=f.addShape("text",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},l.style),{x:_,y:17+(C||0),text:t.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})}var T=f["shapeMap"]["pre-rect"]||f.find((function(t){return"pre-rect"===t.get("className")}));if(T&&!T.destroyed){var A=Object(RE["mix"])({},T.attr(),t.preRect);T.attr(Object(NE["__assign"])(Object(NE["__assign"])({},A),{x:-c/2,y:-h/2,height:h}))}if(p&&!p.destroyed)if(v||void 0===v){var O=m.width,k=m.height,I=m.x,P=m.y,L=m.offset,N=Object(NE["__rest"])(m,["width","height","x","y","offset"]);p.attr(Object(NE["__assign"])(Object(NE["__assign"])({},N),{x:I||-c/2+O+L,y:P||-k/2,width:O,height:k}))}else p.remove(),delete f["shapeMap"]["pre-rect"];else v&&this.drawLogoIcon(t,f);var R=f["shapeMap"]["rect-state-icon"]||f.find((function(t){return"rect-state-icon"===t.get("className")})),D=R?R.attr():{},F=Object(RE["mix"])({},D,t.stateIcon);if(R){F.show||void 0===F.show||(R.remove(),delete f["shapeMap"]["rect-state-icon"]);var j=F.width,B=(k=F.height,I=F.x,P=F.y,F.offset),z=Object(NE["__rest"])(F,["width","height","x","y","offset"]);R.attr(Object(NE["__assign"])(Object(NE["__assign"])({},z),{x:I||c/2-j+B,y:P||-k/2,width:j,height:k}))}else F.show&&this.drawStateIcon(t,f);this.updateLinkPoints(t,f)},getOptions:function(t,e){return"move"===e?t:Object(RE["deepMix"])({},this.options,this.getCustomConfig(t)||{},t)}},"single-node"),Tk("star",{options:{size:60,style:{stroke:Ik.defaultNode.style.stroke,fill:Ik.defaultNode.style.fill,lineWidth:Ik.defaultNode.style.lineWidth},labelCfg:{style:{fill:Ik.nodeLabel.style.fill,fontSize:Ik.nodeLabel.style.fontSize,fontFamily:Ik.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Ik.defaultNode.linkPoints.size,lineWidth:Ik.defaultNode.linkPoints.lineWidth,fill:Ik.defaultNode.linkPoints.fill,stroke:Ik.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(NE["__assign"])({},Ik.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).icon,r=void 0===n?{}:n,i=this.getShapeStyle(t),o=e.addShape("path",{attrs:i,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});e["shapeMap"]["".concat(this.type,"-keyShape")]=o;var a=r.width,s=r.height,l=r.show,u=r.text;return l&&(e["shapeMap"]["".concat(this.type,"-icon")]=u?e.addShape("text",{attrs:Object(NE["__assign"])({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},r),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):e.addShape("image",{attrs:Object(NE["__assign"])({x:-a/2,y:-s/2},r),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(t,e),o},drawLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints,r=void 0===n?{}:n,i=r.top,o=r.left,a=r.right,s=r.leftBottom,l=r.rightBottom,u=r.size,c=r.r,h=Object(NE["__rest"])(r,["top","left","right","leftBottom","rightBottom","size","r"]),d=this.getSize(t),f=d[0];if(a){var p=Math.cos(.1*Math.PI)*f,g=Math.sin(.1*Math.PI)*f;e["shapeMap"]["link-point-right"]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},h),{x:p,y:-g,r:u/2||c||5}),className:"link-point-right",name:"link-point-right"})}if(i){p=Math.cos(.5*Math.PI)*f,g=Math.sin(.5*Math.PI)*f;e["shapeMap"]["link-point-top"]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},h),{x:p,y:-g,r:u/2||c||5}),className:"link-point-top",name:"link-point-top"})}if(o){p=Math.cos(.9*Math.PI)*f,g=Math.sin(.9*Math.PI)*f;e["shapeMap"]["link-point-left"]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},h),{x:p,y:-g,r:u/2||c||5}),className:"link-point-left",name:"link-point-left"})}if(s){p=Math.cos(1.3*Math.PI)*f,g=Math.sin(1.3*Math.PI)*f;e["shapeMap"]["link-point-bottom"]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},h),{x:p,y:-g,r:u/2||c||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})}if(l){p=Math.cos(1.7*Math.PI)*f,g=Math.sin(1.7*Math.PI)*f;e["shapeMap"]["link-point-right-bottom"]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},h),{x:p,y:-g,r:u/2||c||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"})}},getPath:function(t){var e=this.getSize(t),n=e[0],r=3*n/8,i=t.innerR||r;return wk.getStarPath(n,i)},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},r=Object(RE["mix"])({},e,n),i=this.getPath(t),o=Object(NE["__assign"])({path:i},r);return o},update:function(t,e,n){var r=e.getContainer(),i=this.getOptions({}).style,o=this.getPath(t),a={stroke:t.color,path:o},s=e.get("keyShape"),l=Object(RE["mix"])({},i,s.attr(),a);l=Object(RE["mix"])(l,t.style),this.updateShape(t,e,l,!0,n),this.updateLinkPoints(t,r)},updateLinkPoints:function(t,e){var n=this.getOptions({}).linkPoints,r=e["shapeMap"]["link-point-left"]||e.find((function(t){return"link-point-left"===t.get("className")})),i=e["shapeMap"]["link-point-right"]||e.find((function(t){return"link-point-right"===t.get("className")})),o=e["shapeMap"]["link-point-top"]||e.find((function(t){return"link-point-top"===t.get("className")})),a=e["shapeMap"]["link-point-left-bottom"]||e.find((function(t){return"link-point-left-bottom"===t.get("className")})),s=e["shapeMap"]["link-point-left-bottom"]||e.find((function(t){return"link-point-right-bottom"===t.get("className")})),l=n,u=r||i||o||a||s;u&&(l=u.attr());var c=Object(RE["mix"])({},l,t.linkPoints),h=c.fill,d=c.stroke,f=c.lineWidth,p=c.size/2;p||(p=c.r);var g=t.linkPoints?t.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},m=g.left,y=g.right,v=g.top,b=g.leftBottom,_=g.rightBottom,x=this.getSize(t),w=x[0],S={r:p,fill:h,stroke:d,lineWidth:f},E=Math.cos(.1*Math.PI)*w,C=Math.sin(.1*Math.PI)*w;i?y||void 0===y?i.attr(Object(NE["__assign"])(Object(NE["__assign"])({},S),{x:E,y:-C})):(i.remove(),delete e["shapeMap"]["link-point-right"]):y&&(e["shapeMap"]["link-point-right"]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},S),{x:E,y:-C}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),E=Math.cos(.5*Math.PI)*w,C=Math.sin(.5*Math.PI)*w,o?v||void 0===v?o.attr(Object(NE["__assign"])(Object(NE["__assign"])({},S),{x:E,y:-C})):(o.remove(),delete e["shapeMap"]["link-point-top"]):v&&(e["shapeMap"]["link-point-top"]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},S),{x:E,y:-C}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),E=Math.cos(.9*Math.PI)*w,C=Math.sin(.9*Math.PI)*w,r?m||void 0===m?r.attr(Object(NE["__assign"])(Object(NE["__assign"])({},S),{x:E,y:-C})):(r.remove(),delete e["shapeMap"]["link-point-left"]):m&&(e["shapeMap"]["link-point-left"]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},S),{x:E,y:-C}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),E=Math.cos(1.3*Math.PI)*w,C=Math.sin(1.3*Math.PI)*w,a?b||void 0===b?a.attr(Object(NE["__assign"])(Object(NE["__assign"])({},S),{x:E,y:-C})):(a.remove(),delete e["shapeMap"]["link-point-left-bottom"]):b&&(e["shapeMap"]["link-point-left-bottom"]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},S),{x:E,y:-C}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0})),E=Math.cos(1.7*Math.PI)*w,C=Math.sin(1.7*Math.PI)*w,s?_||void 0===_?s.attr(Object(NE["__assign"])(Object(NE["__assign"])({},S),{x:E,y:-C})):(s.remove(),delete e["shapeMap"]["link-point-right-bottom"]):_&&(e["shapeMap"]["link-point-right-bottom"]=e.addShape("circle",{attrs:Object(NE["__assign"])(Object(NE["__assign"])({},S),{x:E,y:-C}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0}))}},"single-node");var cF=wk.defaultSubjectColors,hF="fan-shape-";Tk("donut",{options:{size:Ik.defaultNode.size,style:{x:0,y:0,stroke:Ik.defaultNode.style.stroke,fill:Ik.defaultNode.style.fill,lineWidth:Ik.defaultNode.style.lineWidth},labelCfg:{style:{fill:Ik.nodeLabel.style.fill,fontSize:Ik.nodeLabel.style.fontSize,fontFamily:Ik.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Ik.defaultNode.linkPoints.size,lineWidth:Ik.defaultNode.linkPoints.lineWidth,fill:Ik.defaultNode.linkPoints.fill,stroke:Ik.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(NE["__assign"])({},Ik.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).icon,r=void 0===n?{}:n,i=this.getShapeStyle(t),o=Object(RE["deepMix"])({},r,t.icon),a=e.addShape("circle",{attrs:i,className:"".concat(this.type,"-keyShape"),draggable:!0,name:"".concat(this.type,"-keyShape")});e["shapeMap"]["".concat(this.type,"-keyShape")]=a;var s=o.width,l=o.height,u=o.show,c=o.text;return u&&(e["shapeMap"]["".concat(this.type,"-icon")]=c?e.addShape("text",{attrs:Object(NE["__assign"])({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):e.addShape("image",{attrs:Object(NE["__assign"])({x:-s/2,y:-l/2},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),dF(t,e,a),this.drawLinkPoints(t,e),a},updateShape:function(t,e,n,r,i){var o=e.get("keyShape");o.attr(Object(NE["__assign"])({},n)),pF(t,e,o),this.updateLabel(t,e,i),r&&this.updateIcon(t,e)}},"circle");var dF=function(t,e,n){var r=t.donutAttrs,i=void 0===r?{}:r,o=t.donutColorMap,a=void 0===o?{}:o,s=Object.keys(i).length;if(i&&s>1){var l=gF(i,a),u=l.configs,c=l.totalValue;if(c){var h=mF(n),d=h.lineWidth,f=h.arcR,p=[f,0],g=0;if(1===s)return void fF(e,{arcR:f,arcBegin:p,beginAngle:g,config:u[0],fanIndex:0,lineWidth:d,totalValue:c,drawWhole:!0});for(var m=0;m<u.length;m++){var y=fF(e,{arcR:f,arcBegin:p,beginAngle:g,config:u[m],fanIndex:m,lineWidth:d,totalValue:c});if(y.shouldEnd)return;p=y.arcBegin,g=y.beginAngle}}}},fF=function(t,e){var n,r,i,o=e.arcR,a=e.arcBegin,s=e.beginAngle,l=e.config,u=e.fanIndex,c=e.lineWidth,h=e.totalValue,d=e.drawWhole,f=void 0!==d&&d,p=e.updateShape,g=void 0===p?void 0:p,m=l.value/h;if(m<.001)return{beginAngle:s,arcBegin:a,shape:void 0,shouldEnd:!1};if(f||m>.999)n=[o,1e-4],i=1;else{var y=m*Math.PI*2;r=s+y,n=[o*Math.cos(r),-o*Math.sin(r)],i=y>Math.PI?1:0}var v={path:[["M",a[0],a[1]],["A",o,o,0,i,0,n[0],n[1]]],stroke:l.color||(null===g||void 0===g?void 0:g.attr("stroke"))||cF[u%cF.length],lineWidth:c};return g?g.attr(v):t["shapeMap"]["".concat(hF).concat(u)]=t.addShape("path",{attrs:v,name:"".concat(hF).concat(u),draggable:!0}),{beginAngle:r,arcBegin:n,shape:t["shapeMap"]["".concat(hF).concat(u)],shouldEnd:f||m>.999}},pF=function(t,e,n){var r=t.donutAttrs,i=t.donutColorMap,o=void 0===i?{}:i,a={},s=e.getContainer();if(r){var l=gF(r,o),u=l.configs,c=l.totalValue;if(c)for(var h=mF(n),d=h.lineWidth,f=h.arcR,p=[f,0],g=0,m=0;m<u.length;m++){var y="".concat(hF).concat(m),v=fF(s,{arcR:f,arcBegin:p,beginAngle:g,config:u[m],fanIndex:m,lineWidth:d,totalValue:c,drawWhole:1===u.length,updateShape:s["shapeMap"][y]});if(v.shape&&(a[y]=!0),v.shouldEnd)break;p=v.arcBegin,g=v.beginAngle}}var b=Object.keys(s["shapeMap"]).filter((function(t){return t.includes(hF)}));b.forEach((function(t){a[t]||(s["shapeMap"][t].remove(!0),delete s["shapeMap"][t])}))},gF=function(t,e){var n=0,r=[];return Object.keys(t).forEach((function(i){var o=+t[i];isNaN(o)||(r.push({key:i,value:o,color:e[i]}),n+=o)})),{totalValue:n,configs:r}},mF=function(t){var e=t.attr("r"),n=.6*e,r=(e+n)/2,i=e-n;return{lineWidth:i,arcR:r}},yF=function(t){var e=t.x,n=t.y;return{x:e,y:n,centerX:e,centerY:n,minX:e,minY:n,maxX:e,maxY:n,height:0,width:0}},vF=function(t){void 0===t&&(t=[]);var e=[],n=[];t.forEach((function(t){e.push(t.x),n.push(t.y)}));var r=Math.min.apply(Math,e),i=Math.max.apply(Math,e),o=Math.min.apply(Math,n),a=Math.max.apply(Math,n);return{centerX:(r+i)/2,centerY:(o+a)/2,maxX:i,maxY:a,minX:r,minY:o,height:a-o,width:i-r}},bF=function(t){for(var e=[],n={},r=t.length,i=r-1;i>=0;i--){var o=t[i];o.id="".concat(o.x,"|||").concat(o.y),n[o.id]||(n[o.id]=o,e.push(o))}return e},_F=function(t){return bF(t)},xF=function(t,e){return t.width||t.height?{centerX:t.centerX,centerY:t.centerY,minX:t.minX-e,minY:t.minY-e,maxX:t.maxX+e,maxY:t.maxY+e,height:t.height+2*e,width:t.width+2*e}:t},wF=function(t,e){var n=Math.abs(t.x-e.centerX),r=Math.abs(t.y-e.centerY);return 0===n&&0===r?0:n/e.width>r/e.height},SF=function(t,e,n){var r=wF(e,t);if(0===r){var i=t.centerX,o=t.centerY;return n.y<e.y?o=t.minY:n.x>e.x?i=t.maxX:n.x<e.x?i=t.minX:n.x===e.x&&(o=t.maxY),{x:i,y:o}}return r?{x:e.x>t.centerX?t.maxX:t.minX,y:e.y}:{x:e.x,y:e.y>t.centerY?t.maxY:t.minY}},EF=function(t,e){var n=Math.min(t.minX,e.minX),r=Math.min(t.minY,e.minY),i=Math.max(t.maxX,e.maxX),o=Math.max(t.maxY,e.maxY);return{centerX:(n+i)/2,centerY:(r+o)/2,minX:n,minY:r,maxX:i,maxY:o,height:o-r,width:i-n}},CF=function(t){return[{x:t.minX,y:t.minY},{x:t.maxX,y:t.minY},{x:t.maxX,y:t.maxY},{x:t.minX,y:t.maxY}]},MF=function(t,e){var n=t.x,r=t.y;return n<e.minX||n>e.maxX||r<e.minY||r>e.maxY},TF=function(t,e){return e<t.minX||e>t.maxX?[]:[{x:e,y:t.minY},{x:e,y:t.maxY}]},AF=function(t,e){return e<t.minY||e>t.maxY?[]:[{x:t.minX,y:e},{x:t.maxX,y:e}]},OF=function(t,e){return TF(t,e.x).concat(AF(t,e.y))},kF=function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},IF=function(t,e){var n=-2,r=0;return e.forEach((function(e){e&&(t.x===e.x&&(r+=n),t.y===e.y&&(r+=n))})),r},PF=function(t,e,n,r,i){return kF(t,e)+kF(t,n)+IF(t,[e,n,r,i])},LF=function t(e,n,r,i,o){void 0===o&&(o=0),e.unshift(n[i]),r[i]&&r[i]!==i&&o<=100&&t(e,n,r,r[i],o+1)},NF=function(t,e,n,r){var i=n.x-t.x,o=n.y-t.y,a=r.x-t.x,s=r.y-t.y,l=n.x-e.x,u=n.y-e.y,c=r.x-e.x,h=r.y-e.y,d=i*s-o*a,f=l*h-u*c,p=i*u-o*l,g=a*h-s*c;return d*f<=0&&p*g<=0},RF=function(t,e,n){if(n.width||n.height){var r=CF(n),i=r[0],o=r[1],a=r[2],s=r[3];return NF(t,e,i,o)||NF(t,e,i,s)||NF(t,e,o,a)||NF(t,e,a,s)}return!1},DF=function(t,e,n,r){var i=[];return t.forEach((function(t){if(t!==e&&(t.x===e.x||t.y===e.y)){if(RF(t,e,n)||RF(t,e,r))return;i.push(t)}})),bF(i)},FF=function(t,e,n,r,i,o,a){var s,l=[],u=(s={},s[e.id]=e,s),c={},h={},d={};h[e.id]=0,d[e.id]=PF(e,n,e);var f=new qF;f.add({id:e.id,value:d[e.id]});var p,g={};t.forEach((function(t){g[t.id]=t}));while(Object.keys(u).length){var m=f.minId(!1);if(!m)break;if(p=u[m],p===n){var y=[];return LF(y,g,c,n.id),y}delete u[p.id],f.remove(p.id),l.push(p);var v=DF(t,p,r,i),b=function(t){t.forEach((function(t){if(-1===l.indexOf(t)){var r=t.id;u[r]||(u[r]=t);var i=d[p.id]+kF(p,t);h[r]&&i>=h[r]||(c[r]=p.id,h[r]=i,d[r]=h[r]+PF(t,n,e,o,a)),f.add({id:r,value:d[r]})}}))};b(v)}return[e,n]},jF=function(t,e,n){return!(t.x===e.x&&e.x===n.x||t.y===e.y&&e.y===n.y)},BF=function(t,e,n,r){var i=kF(t,e),o=kF(n,e);i<r&&(r=i),o<r&&(r=o);var a={x:e.x-r/i*(e.x-t.x),y:e.y-r/i*(e.y-t.y)},s={x:e.x-r/o*(e.x-n.x),y:e.y-r/o*(e.y-n.y)};return[a,s]},zF=function(t,e){var n=[],r=t[0];return n.push("M".concat(r.x," ").concat(r.y)),t.forEach((function(r,i){var o=t[i+1],a=t[i+2];if(o&&a)if(jF(r,o,a)){var s=BF(r,o,a,e),l=s[0],u=s[1];n.push("L".concat(l.x," ").concat(l.y)),n.push("Q".concat(o.x," ").concat(o.y," ").concat(u.x," ").concat(u.y)),n.push("L".concat(u.x," ").concat(u.y))}else n.push("L".concat(o.x," ").concat(o.y));else o&&n.push("L".concat(o.x," ").concat(o.y))})),n.join("")},UF=function(t,e,n,r,i){var o,a;if(n&&n.getType())if("combo"===n.getType()){var s=n.getKeyShape().getBBox();if(s){var l=n.getModel(),u=l.x,c=l.y;o={x:u,y:c,width:s.width,height:s.height,minX:s.minX+u,maxX:s.maxX+u,minY:s.minY+c,maxY:s.maxY+c},o.centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2}else o=yF(t)}else o=n&&n.getBBox();else o=yF(t);if(r&&r.getType())if("combo"===r.getType()){var h=r.getKeyShape().getBBox();if(h){var d=r.getModel(),f=d.x,p=d.y;a={x:f,y:p,width:h.width,height:h.height,minX:h.minX+f,maxX:h.maxX+f,minY:h.minY+p,maxY:h.maxY+p},a.centerX=(a.minX+a.maxX)/2,a.centerY=(a.minY+a.maxY)/2}else a=yF(e)}else a=r&&r.getBBox();else a=yF(e);var g=xF(o,i),m=xF(a,i),y=SF(g,t,e),v=SF(m,e,t),b=vF([y,v]),_=EF(g,b),x=EF(m,b),w=[];w=w.concat(CF(_)).concat(CF(x));var S={x:(t.x+e.x)/2,y:(t.y+e.y)/2};[b,_,x].forEach((function(t){w=w.concat(OF(t,S).filter((function(t){return MF(t,g)&&MF(t,m)})))})),[{x:y.x,y:v.y},{x:v.x,y:y.y}].forEach((function(t){MF(t,g)&&MF(t,m)&&w.push(t)})),w.unshift(y),w.push(v),w=bF(w);var E=FF(w,y,v,o,a,t,e);return E.unshift(t),E.push(e),_F(E)},GF=function(t){if(!(null===t||void 0===t?void 0:t.length))return t;for(var e=t[t.length-1],n={x:e.x,y:e.y},r=[e],i=[e],o=t.length-2;o>=0;o--){var a=t[o];if(a.x===n.x?r.push(a):(r=[a],n.x=a.x),a.y===n.y?i.push(a):(i=[a],n.y=a.y),r.length>2){var s=t.indexOf(r[1]);s>-1&&t.splice(s,1)}else if(i.length>2){s=t.indexOf(i[1]);s>-1&&t.splice(s,1)}}return t},qF=function(){function t(){this.arr=[],this.map={},this.arr=[],this.map={}}return t.prototype._innerAdd=function(t,e){var n=[0,e-1];while(n[1]-n[0]>1){var r=Math.floor((n[0]+n[1])/2);if(this.arr[r].value>t.value)n[1]=r;else{if(!(this.arr[r].value<t.value))return this.arr.splice(r,0,t),void(this.map[t.id]=!0);n[0]=r}}this.arr.splice(n[1],0,t),this.map[t.id]=!0},t.prototype.add=function(t){delete this.map[t.id];var e=this.arr.length;return e?this.arr[e-1].value<t.value?(this.arr.push(t),void(this.map[t.id]=!0)):void this._innerAdd(t,e):(this.arr.push(t),void(this.map[t.id]=!0))},t.prototype.remove=function(t){this.map[t]&&delete this.map[t]},t.prototype._clearAndGetMinId=function(){for(var t,e=this.arr.length-1;e>=0;e--)this.map[this.arr[e].id]?t=this.arr[e].id:this.arr.splice(e,1);return t},t.prototype._findFirstId=function(){while(this.arr.length){var t=this.arr.shift();if(this.map[t.id])return t.id}},t.prototype.minId=function(t){return t?this._clearAndGetMinId():this._findFirstId()},t}(),VF=function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},HF=function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},WF=function(t,e){return[t,e]},YF=function(t,e,n,r,i){return _F(UF(t,e,n,r,i.offset))},XF={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:VF,fallbackRoute:YF},JF=(Math.PI,function(t,e){var n=Math.round(Math.abs(t/e)),r=t<0?-1:1;return n<0?0:r*n}),ZF=function(t,e,n){var r={};return t.forEach((function(t){if(t)for(var i=xF(t.getBBox(),n),o=JF(i.minX,e);o<=JF(i.maxX,e);o+=1)for(var a=JF(i.minY,e);a<=JF(i.maxY,e);a+=1)r["".concat(o,"|||").concat(a)]=!0})),r},KF=function(t,e){var n=e.x-t.x,r=e.y-t.y;return n||r?Math.atan2(r,n):0},QF=function(t,e){var n=Math.abs(t-e);return n>Math.PI?2*Math.PI-n:n},$F=function(t,e,n){for(var r=1/0,i=0,o=e.length;i<o;i++){var a=n(t,e[i]);a<r&&(r=a)}return r},tj=function(t,e,n,r,i){var o=[];if(!n)return[t];var a=i.directions,s=i.offset,l=n.getBBox(),u=e.x>l.minX&&e.x<l.maxX&&e.y>l.minY&&e.y<l.maxY,c=xF(l,s);for(var h in c)c[h]=JF(c[h],i.gridSize);if(u){for(var d=0,f=a;d<f.length;d++){var p=f[d],g=[[{x:c.minX,y:c.minY},{x:c.maxX,y:c.minY}],[{x:c.minX,y:c.minY},{x:c.minX,y:c.maxY}],[{x:c.maxX,y:c.minY},{x:c.maxX,y:c.maxY}],[{x:c.minX,y:c.maxY},{x:c.maxX,y:c.maxY}]];for(h=0;h<4;h++){var m=g[h],y=wk.getLineIntersect(t,{x:t.x+p.stepX*c.width,y:t.y+p.stepY*c.height},m[0],m[1]);y&&!RF(t,y,l)&&(y.id="".concat(y.x,"|||").concat(y.y),o.push(y))}}return o}var v=SF(c,t,r);return v.id="".concat(v.x,"|||").concat(v.y),[v]},ej=function(t,e,n,r){var i=KF(t,e),o=n[t.id];if(!o){var a=KF(r,t);return QF(a,i)}var s=KF({x:o.x,y:o.y},t);return QF(s,i)},nj=function(t,e,n,r,i,o,a){var s=[r],l=r,u=t.id,c=t.x,h=t.y,d={x:c,y:h,id:u};ej(d,o,e,n)&&(l={x:o.x===r.x?r.x:d.x*a,y:o.y===r.y?r.y:d.y*a},s.unshift(l));var f=e[u];while(f&&f.id!==u){var p={x:c,y:h,id:u},g={x:f.x,y:f.y,id:f.id},m=ej(g,p,e,n);m&&(l={x:g.x===p.x?l.x:g.x*a,y:g.y===p.y?l.y:g.y*a},s.unshift(l)),u=g.id,c=g.x,h=g.y,f=e[u]}return s[0].x=c===n.x?i.x:l.x,s[0].y=h===n.y?i.y:l.y,s.unshift(i),s},rj=function(t,e,n,r,i){if(isNaN(t.x)||isNaN(e.x))return[];var o=Object(RE["deepMix"])(XF,i);o.obstacles=o.obstacles||[];var a=o.penalties,s=o.gridSize,l=ZF(o.obstacles.concat([n,r]),s,o.offset),u={x:JF(t.x,s),y:JF(t.y,s)},c={x:JF(e.x,s),y:JF(e.y,s)};t.id="".concat(u.x,"|||").concat(u.y),e.id="".concat(c.x,"|||").concat(c.y);var h=tj(u,t,n,c,o),d=tj(c,e,r,u,o);h.forEach((function(t){delete l[t.id]})),d.forEach((function(t){delete l[t.id]}));for(var f={},p={},g={},m={},y={},v=new qF,b=0;b<h.length;b++){var _=h[b];f[_.id]=_,m[_.id]=0,y[_.id]=$F(_,d,o.distFunc),v.add({id:_.id,value:y[_.id]})}var x,w,S,E,C,M,T=o.maximumLoops,A=1/0,O={};d.forEach((function(t){O["".concat(t.x,"|||").concat(t.y)]=!0})),Object.keys(f).forEach((function(t){var e=f[t].id;y[e]<=A&&(A=y[e],x=f[e])}));while(Object.keys(f).length>0&&T>0){var k=v.minId((T+1)%30===0);if(!k)break;if(x=f[k],O["".concat(x.x,"|||").concat(x.y)])return nj(x,g,u,e,t,c,s);delete f[x.id],v.remove(x.id),p[x.id]=!0;for(b=0;b<o.directions.length;b++){w=o.directions[b];var I="".concat(Math.round(x.x)+w.stepX,"|||").concat(Math.round(x.y)+w.stepY);if(S={x:x.x+w.stepX,y:x.y+w.stepY,id:I},!p[I]&&(M=ej(x,S,g,u),!(M>o.maxAllowedDirectionChange)&&!l[I])){f[I]||(f[I]=S);var P=a[M];E=o.distFunc(x,S)+(isNaN(P)?s:P),C=m[x.id]+E;var L=m[I];L&&C>=L||(g[I]=x,m[I]=C,y[I]=C+$F(S,d,o.distFunc),v.add({id:I,value:y[I]}))}}T-=1}return o.fallbackRoute(t,e,n,r,o)};Ak("polyline",{options:{color:Ik.defaultEdge.color,size:Ik.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:Ik.defaultEdge.style.stroke,lineAppendWidth:Ik.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:Ik.edgeLabel.style.fill,fontSize:Ik.edgeLabel.style.fontSize,fontFamily:Ik.windowFontFamily}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:Object(NE["__assign"])({},Ik.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(t,e){var n=this.getShapeStyle(t);0===n.radius&&delete n.radius;var r=e.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:n});return e["shapeMap"]["edge-shape"]=r,r},getShapeStyle:function(t){var e=this.options.style,n={stroke:t.color},r=Object(RE["mix"])({},e,n,t.style);t=this.getPathPoints(t),this.radius=r.radius,this.offset=r.offset;var i=t.startPoint,o=t.endPoint,a=this.getControlPoints(t),s=[i];a&&(s=s.concat(a)),s.push(o);var l=t.sourceNode,u=t.targetNode,c=r.radius,h=this.options.routeCfg,d=Object(RE["mix"])({},h,t.routeCfg);d.offset=r.offset;var f=this.getPath(s,l,u,c,d,!Boolean(a));(Object(RE["isArray"])(f)&&f.length<=1||Object(RE["isString"])(f)&&-1===f.indexOf("L"))&&(f="M0 0, L0 0"),(isNaN(i.x)||isNaN(i.y)||isNaN(o.x)||isNaN(o.y))&&(f="M0 0, L0 0");var p=Object(RE["mix"])({},Ik.defaultEdge.style,r,{lineWidth:t.size,path:f});return p},updateShapeStyle:function(t,e){var n=e.getContainer();if(e.isVisible()){var r={stroke:t.color},i=n["shapeMap"]["edge-shape"]||n.find((function(t){return"edge-shape"===t.get("className")}))||e.getKeyShape(),o=t.size;t=this.getPathPoints(t);var a=t.startPoint,s=t.endPoint,l=this.getControlPoints(t),u=[a];l&&(u=u.concat(l)),u.push(s);var c=i.attr(),h=Object(RE["mix"])({},r,c,t.style),d=t.sourceNode,f=t.targetNode,p=h.radius,g=this.options.routeCfg,m=Object(RE["mix"])({},g,t.routeCfg);m.offset=h.offset;var y=this.getPath(u,d,f,p,m,!Boolean(l));(Object(RE["isArray"])(y)&&y.length<=1||Object(RE["isString"])(y)&&-1===y.indexOf("L"))&&(y="M0 0, L0 0"),(isNaN(a.x)||isNaN(a.y)||isNaN(s.x)||isNaN(s.y))&&(y="M0 0, L0 0"),c.endArrow&&!1===h.endArrow&&(t.style.endArrow={path:""}),c.startArrow&&!1===h.startArrow&&(t.style.startArrow={path:""});var v=Object(RE["mix"])(r,i.attr(),{lineWidth:o,path:y},t.style);i&&i.attr(v)}},getPath:function(t,e,n,r,i,o){var a=i.offset,s=i.obstacles,l=i.simple;if(!a||t.length>2||!1===o){if(r)return zF(t,r);var u=[];return Object(RE["each"])(t,(function(t,e){0===e?u.push(["M",t.x,t.y]):u.push(["L",t.x,t.y])})),u}!1===l||(null===s||void 0===s?void 0:s.length)||(l=!0);var c=l?UF(t[t.length-1],t[0],n,e,a):rj(t[0],t[t.length-1],e,n,i);if(!c||!c.length)return"M0 0, L0 0";if(r){var h=zF(c,r);return h}c=GF(c);var d=wk.pointsToPolygon(c);return d}},"single-edge");var ij=NI.cloneEvent,oj=NI.isNaN,aj=Math.abs,sj=10,lj=["shift","ctrl","alt","control"],uj={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{mousedown:"onMouseDown",drag:"onDragMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(t){var e=this.origin,n=+t.clientX,r=+t.clientY;if(!oj(n)&&!oj(r)){var i=n-e.x,o=r-e.y;"x"===this.get("direction")?o=0:"y"===this.get("direction")&&(i=0),this.origin={x:n,y:r};var a=this.graph.get("width"),s=this.graph.get("height"),l=this.graph.get("canvas").getCanvasBBox(),u=this.scalableRange,c=this.scalableRange;u<1&&u>-1&&(u*=a,c*=s),(l.minX<=a+u&&l.minX+i>a+u||l.maxX+u>=0&&l.maxX+u+i<0)&&(i=0),(l.minY<=s+c&&l.minY+o>s+c||l.maxY+c>=0&&l.maxY+c+o<0)&&(o=0),this.graph.translate(i,o)}},onTouchStart:function(t){var e=this,n=t.originalEvent.touches,r=n[0],i=n[1];r&&i||(t.preventDefault(),this.mousedown=!0,e.onDragStart(t))},onMouseDown:function(t){this.mousedown=!0},onDragMove:function(t){this.mousedown&&(this.dragstart?this.onDrag(t):(this.dragstart=!0,this.onDragStart(t)))},onDragStart:function(t){var e=this,n=t.originalEvent;if((!n||"touchstart"===t.name||0===n.button)&&("touchstart"===t.name||"undefined"===typeof window||!window.event||window.event.buttons||window.event.button)&&this.shouldBegin(t,this)&&!e.keydown&&this.allowDrag(t)){if(e.origin={x:t.clientX,y:t.clientY},e.dragging=!1,this.enableOptimize){for(var r=this.graph,i=r.getEdges(),o=0,a=i.length;o<a;o++){var s=i[o].get("group").get("children");s&&s.forEach((function(t){t.set("ori-visibility",t.get("ori-visibility")||t.get("visible")),t.hide()}))}for(var l=r.getNodes(),u=0,c=l.length;u<c;u++)for(var h=l[u].getContainer(),d=h.get("children"),f=0,p=d;f<p.length;f++){var g=p[f],m=g.get("isKeyShape");m||(g.set("ori-visibility",g.get("ori-visibility")||g.get("visible")),g.hide())}}if("undefined"!==typeof window){var y=this;this.handleDOMContextMenu=function(t){return y.onMouseUp(t)},document.body.addEventListener("contextmenu",this.handleDOMContextMenu)}}},onTouchMove:function(t){var e=this,n=t.originalEvent.touches,r=n[0],i=n[1];r&&i?this.onMouseUp(t):(t.preventDefault(),e.onDrag(t))},onDrag:function(t){if(this.mousedown){var e=this.graph;if(!this.keydown&&this.allowDrag(t)&&(t=ij(t),this.origin)){if(this.dragging)t.type="drag",e.emit("canvas:drag",t);else{if(aj(this.origin.x-t.clientX)+aj(this.origin.y-t.clientY)<sj)return;this.shouldBegin(t,this)&&(t.type="dragstart",e.emit("canvas:dragstart",t),this.originPosition={x:t.clientX,y:t.clientY},this.dragging=!0)}this.shouldUpdate(t,this)&&this.updateViewport(t)}}},onMouseUp:function(t){var e,n;this.mousedown=!1,this.dragstart=!1;var r=this.graph;if(!this.keydown){var i=r.getZoom(),o=r.get("modeController"),a=null===(n=null===(e=null===o||void 0===o?void 0:o.modes[o.mode])||void 0===e?void 0:e.filter((function(t){return"zoom-canvas"===t.type})))||void 0===n?void 0:n[0],s=a?a.optimizeZoom||.1:0;if(this.enableOptimize){for(var l=r.getEdges(),u=0,c=l.length;u<c;u++){var h=l[u].get("group").get("children");h&&h.forEach((function(t){var e=t.get("ori-visibility");t.set("ori-visibility",void 0),e&&t.show()}))}if(i>s)for(var d=r.getNodes(),f=0,p=d.length;f<p;f++)for(var g=d[f].getContainer(),m=g.get("children"),y=0,v=m;y<v.length;y++){var b=v[y],_=b.get("isKeyShape");if(!_){var x=b.get("ori-visibility");b.set("ori-visibility",void 0),x&&b.show()}}}this.dragging?(t=ij(t),this.shouldEnd(t,this)&&this.updateViewport(t),t.type="dragend",t.dx=t.clientX-this.originPosition.x,t.dy=t.clientY-this.originPosition.y,r.emit("canvas:dragend",t),this.endDrag(),"undefined"!==typeof window&&document.body.removeEventListener("contextmenu",this.handleDOMContextMenu)):this.origin=null}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1,this.mousedown=!1,this.dragstart=!1},onKeyDown:function(t){var e=this,n=t.key;n&&(lj.indexOf(n.toLowerCase())>-1?e.keydown=!0:e.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1},allowDrag:function(t){var e,n,r=t.target,i=r&&r.isCanvas&&r.isCanvas();if(Object(RE["isBoolean"])(this.allowDragOnItem)&&!this.allowDragOnItem&&!i)return!1;if(Object(RE["isObject"])(this.allowDragOnItem)){var o=this.allowDragOnItem,a=o.node,s=o.edge,l=o.combo,u=null===(n=null===(e=t.item)||void 0===e?void 0:e.getType)||void 0===n?void 0:n.call(e);if(!a&&"node"===u)return!1;if(!s&&"edge"===u)return!1;if(!l&&"combo"===u)return!1}return!0}},cj={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1,enableStack:!0}},getEvents:function(){return{"node:mousedown":"onMouseDown",drag:"onDragMove",dragend:"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onDragEnd",afterchangedata:"onDragEnd"}},validationCombo:function(t){if(!this.origin||!t||t.destroyed)return!1;var e=t.getType();return"combo"===e},onTouchStart:function(t){if(t.item){var e=this;try{var n=t.originalEvent.touches,r=n[0],i=n[1];if(r&&i)return;t.preventDefault()}catch(o){console.warn("Touch original event not exist!")}this.mousedown={item:t.item,target:t.target,origin:{x:t.x,y:t.y}},this.dragstart=!0,e.onDragStart(t)}},onTouchMove:function(t){var e=this;try{var n=t.originalEvent.touches,r=n[0],i=n[1];if(r&&i)return void e.onDragEnd(t);t.preventDefault()}catch(t){console.warn("Touch original event not exist!")}e.onDrag(t)},onMouseDown:function(t){this.mousedown={item:t.item,target:t.target,origin:{x:t.x,y:t.y}},"undefined"===typeof window||this.windowEventBinded||(this.windowEventBinded=!0,document.body.addEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.addEventListener("mouseup",this.onDragEnd.bind(this)))},onDragMove:function(t){var e,n;"node"===(null===(n=null===(e=t.item)||void 0===e?void 0:e.getType)||void 0===n?void 0:n.call(e))?this.mousedown&&(this.dragstart?this.onDrag(Object(NE["__assign"])(Object(NE["__assign"])({},t),this.mousedown)):(this.dragstart=!0,this.onDragStart(t))):this.onDragEnd()},onDragStart:function(t){var e=this;if(this.currentShouldEnd=!0,this.shouldBegin(Object(NE["__assign"])(Object(NE["__assign"])({},t),this.mousedown),this)){var n=this.mousedown,r=n.item,i=n.target;if(r&&!r.destroyed&&!r.hasLocked()){var o=r.getContainer();if(o.set("capture",!1),this.cachedCaptureItems||(this.cachedCaptureItems=[]),this.cachedCaptureItems.push(r),i){var a=i.get("isAnchorPoint");if(a)return}var s=this.graph;this.targets=[],this.targetCombo=null;var l=s.findAllByState("node",this.selectedState),u=r.get("id"),c=l.filter((function(t){var e=t.get("id");return u===e}));if(0===c.length?this.targets.push(r):l.length>1?l.forEach((function(t){var n=t.hasLocked();n||e.targets.push(t)})):this.targets.push(r),this.graph.get("enabledStack")&&this.enableStack){var h=[];this.targets.forEach((function(t){var e=t.getModel(),n=e.x,r=e.y,i=e.id;h.push({x:n,y:r,id:i})})),this.set("beforeDragNodes",h)}this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach((function(t){var n=t.getEdges();n.forEach((function(t){t.isVisible()&&(e.hidenEdge[t.getID()]=!0,t.hide())}))})),this.origin=this.mousedown.origin,this.point={},this.originPoint={}}}},onDrag:function(t){var e=this;if(this.mousedown&&this.origin&&this.shouldUpdate(t,this))if(this.get("enableDelegate"))this.updateDelegate(t);else if(this.enableDebounce)this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:t,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos});else{var n={};this.targets.map((function(r){e.update(r,t);var i=r.getModel().comboId;i&&(n[i]=e.graph.findById(i))})),this.onlyChangeComboSize&&this.updateParentCombos()}},onDragEnd:function(t){var e,n=this;if(this.mousedown=!1,this.dragstart=!1,"undefined"!==typeof window&&this.windowEventBinded&&(this.windowEventBinded=!1,document.body.removeEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.removeEventListener("mouseup",this.onDragEnd.bind(this))),this.origin){null===(e=this.cachedCaptureItems)||void 0===e||e.forEach((function(t){var e=t.getContainer();e.set("capture",!0)})),this.cachedCaptureItems=[],this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach((function(t){var e=t.getEdges();e.forEach((function(t){n.hidenEdge[t.getID()]&&t.show(),t.refresh()}))})),this.hidenEdge={};var r=this.graph;if(r.get("enabledStack")&&this.enableStack){var i={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.get("beforeDragNodes").forEach((function(t){i.before.nodes.push(t)})),this.targets.forEach((function(t){var e=t.getModel(),n=e.x,r=e.y,o=e.id;i.after.nodes.push({x:n,y:r,id:o})})),r.pushStack("update",Object(RE["clone"])(i))}r.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(t){var e=t.item;if(this.currentShouldEnd=this.shouldEnd(t,e,this),this.updatePositions(t,!this.currentShouldEnd),this.currentShouldEnd&&this.validationCombo(e)){var n=this.graph;if(this.comboActiveState&&n.setItemState(e,this.comboActiveState,!1),this.targetCombo=e,this.onlyChangeComboSize)n.updateCombos();else{var r=e.getModel();this.targets.map((function(t){var e=t.getModel();e.comboId!==r.id&&n.updateComboTree(t,r.id)})),n.updateCombo(e)}n.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(t){var e=this.graph;this.currentShouldEnd=this.shouldEnd(t,void 0,this),this.updatePositions(t,!this.currentShouldEnd),this.targets&&0!==this.targets.length&&this.currentShouldEnd&&(this.onlyChangeComboSize?this.updateParentCombos():this.targets.map((function(t){var n=t.getModel();n.comboId&&e.updateComboTree(t)})))},onDropNode:function(t){if(this.targets&&0!==this.targets.length){var e=this,n=t.item,r=e.graph,i=n.getModel().comboId,o=i?r.findById(i):void 0;if(this.currentShouldEnd=this.shouldEnd(t,o,this),this.updatePositions(t,!this.currentShouldEnd),this.currentShouldEnd){if(this.onlyChangeComboSize)this.updateParentCombos();else if(i){var a=r.findById(i);e.comboActiveState&&r.setItemState(a,e.comboActiveState,!1),this.targets.map((function(t){var e=t.getModel();i!==e.comboId&&r.updateComboTree(t,i)})),r.updateCombo(a)}else this.targets.map((function(t){var e=t.getModel();e.comboId&&r.updateComboTree(t)}));r.emit("dragnodeend",{items:this.targets,targetItem:n})}}},onDragEnter:function(t){var e=t.item;if(this.validationCombo(e)){var n=this.graph;this.comboActiveState&&n.setItemState(e,this.comboActiveState,!0)}},onDragLeave:function(t){var e=t.item;if(this.validationCombo(e)){var n=this.graph;this.comboActiveState&&n.setItemState(e,this.comboActiveState,!1)}},updatePositions:function(t,e){var n=this;this.targets&&0!==this.targets.length&&(this.get("enableDelegate")?this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:t,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos}):e||this.targets.map((function(e){return n.update(e,t)})):this.targets.map((function(r){return n.update(r,t,e)})))},update:function(t,e,n){var r=this.origin,i=t.get("model"),o=t.get("id");this.point[o]||(this.point[o]={x:i.x||0,y:i.y||0});var a=e.x-r.x+this.point[o].x,s=e.y-r.y+this.point[o].y;n&&(a+=r.x-e.x,s+=r.y-e.y);var l={x:a,y:s};this.get("updateEdge")?this.graph.updateItem(t,l,!1):t.updatePosition(l)},debounceUpdate:Object(RE["debounce"])((function(t){var e=t.targets,n=t.graph,r=t.point,i=t.origin,o=t.evt,a=t.updateEdge,s=t.onlyChangeComboSize,l=t.updateParentCombos;e.map((function(t){var e=t.get("model"),s=t.get("id");r[s]||(r[s]={x:e.x||0,y:e.y||0});var l=o.x-i.x+r[s].x,u=o.y-i.y+r[s].y,c={x:l,y:u};a?n.updateItem(t,c,!1):t.updatePosition(c)})),s&&l(n,e)}),50,!0),updateDelegate:function(t){var e=this.graph;if(this.delegateRect){var n=t.x-this.origin.x+this.originPoint.minX,r=t.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:n,y:r})}else{var i=e.get("group"),o=Object(RE["deepMix"])({},fI.delegateStyle,this.delegateStyle),a=this.calculationGroupPosition(t),s=a.x,l=a.y,u=a.width,c=a.height,h=a.minX,d=a.minY;this.originPoint={x:s,y:l,width:u,height:c,minX:h,minY:d},this.delegateRect=i.addShape("rect",{attrs:Object(NE["__assign"])({width:u,height:c,x:s,y:l},o),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(t){var e=this.targets;0===e.length&&e.push(t.item);for(var n=1/0,r=-1/0,i=1/0,o=-1/0,a=0;a<e.length;a++){var s=e[a],l=s.getBBox(),u=l.minX,c=l.minY,h=l.maxX,d=l.maxY;u<n&&(n=u),c<i&&(i=c),h>r&&(r=h),d>o&&(o=d)}var f=Math.floor(n),p=Math.floor(i),g=Math.ceil(r)-Math.floor(n),m=Math.ceil(o)-Math.floor(i);return{x:f,y:p,width:g,height:m,minX:n,minY:i}},updateParentCombos:function(t,e){var n=t||this.graph,r=e||this.targets,i={};null===r||void 0===r||r.forEach((function(t){var e=t.getModel().comboId;e&&(i[e]=n.findById(e))})),Object.values(i).forEach((function(t){t&&n.updateCombo(t)}))}},hj={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return"mouseenter"===this.get("trigger")?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(t){var e=this;try{var n=t.originalEvent.touches,r=n[0],i=n[1];if(r&&i)return;t.preventDefault()}catch(t){console.warn("Touch original event not exist!")}e.setAllItemStates(t)},clearOnTouchStart:function(t){var e=this;try{var n=t.originalEvent.touches,r=n[0],i=n[1];if(r&&i)return;t.preventDefault()}catch(t){console.warn("Touch original event not exist!")}e.clearActiveState(t)},setAllItemStates:function(t){clearTimeout(this.timer),this.throttleSetAllItemStates(t,this)},clearActiveState:function(t){var e=this;this.timer=setTimeout((function(){e.throttleClearActiveState(t,e)}),50)},throttleSetAllItemStates:Object(RE["throttle"])((function(t,e){var n=t.item,r=e.graph;if(r&&!r.destroyed&&(e.item=n,e.shouldUpdate(t.item,{event:t,action:"activate"},e))){for(var i=e.activeState,o=e.inactiveState,a=r.getNodes(),s=r.getCombos(),l=r.getEdges(),u=r.get("vedges"),c=a.length,h=s.length,d=l.length,f=u.length,p=e.inactiveItems||{},g=e.activeItems||{},m=0;m<c;m++){var y=a[m],v=y.getID(),b=y.hasState("selected");e.resetSelected&&b&&r.setItemState(y,"selected",!1),g[v]&&(r.setItemState(y,i,!1),delete g[v]),o&&!p[v]&&(r.setItemState(y,o,!0),p[v]=y)}for(m=0;m<h;m++){var _=s[m],x=_.getID();b=_.hasState("selected");e.resetSelected&&b&&r.setItemState(_,"selected",!1),g[x]&&(r.setItemState(_,i,!1),delete g[x]),o&&!p[x]&&(r.setItemState(_,o,!0),p[x]=_)}for(m=0;m<d;m++){var w=l[m],S=w.getID();g[S]&&(r.setItemState(w,i,!1),delete g[S]),o&&!p[S]&&(r.setItemState(w,o,!0),p[S]=w)}for(m=0;m<f;m++){var E=u[m],C=E.getID();g[C]&&(r.setItemState(E,i,!1),delete g[C]),o&&!p[C]&&(r.setItemState(E,o,!0),p[C]=E)}if(n&&!n.destroyed){o&&(r.setItemState(n,o,!1),delete p[n.getID()]),g[n.getID()]||(r.setItemState(n,i,!0),g[n.getID()]=n);var M=n.getEdges(),T=M.length;for(m=0;m<T;m++){w=M[m],S=w.getID();var A=void 0;A=w.getSource()===n?w.getTarget():w.getSource();var O=A.getID();o&&p[O]&&(r.setItemState(A,o,!1),delete p[O]),g[O]||(r.setItemState(A,i,!0),g[O]=A),p[S]&&(r.setItemState(w,o,!1),delete p[S]),g[S]||(r.setItemState(w,i,!0),g[S]=w),w.toFront()}}e.activeItems=g,e.inactiveItems=p,r.emit("afteractivaterelations",{item:t.item,action:"activate"})}}),50,{trailing:!0,leading:!0}),throttleClearActiveState:Object(RE["throttle"])((function(t,e){var n=e.get("graph");if(n&&!n.destroyed&&e.shouldUpdate(t.item,{event:t,action:"deactivate"},e)){var r=e.activeState,i=e.inactiveState,o=e.activeItems||{},a=e.inactiveItems||{};Object.values(o).filter((function(t){return!t.destroyed})).forEach((function(t){n.clearItemStates(t,r)})),Object.values(a).filter((function(t){return!t.destroyed})).forEach((function(t){n.clearItemStates(t,i)})),e.activeItems={},e.inactiveItems={},n.emit("afteractivaterelations",{item:t.item||e.get("item"),action:"deactivate"})}}),50,{trailing:!0,leading:!0})},dj=Math.min,fj=Math.max,pj=Math.abs,gj="shift",mj=["drag","shift","ctrl","alt","control"],yj={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:gj,includeEdges:!0,includeCombos:!1,selectedEdges:[],selectedNodes:[],selectedCombos:[]}},getEvents:function(){return mj.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=gj,console.warn("Behavior brush-select 的 trigger 参数不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'")),"drag"===this.trigger?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(t){var e=t.item,n=this.brush;e||("drag"===this.trigger||this.keydown)&&(this.selectedNodes&&0!==this.selectedNodes.length&&this.clearStates(),n||(n=this.createBrush()),this.originPoint={x:t.canvasX,y:t.canvasY},n.attr({width:0,height:0}),n.show(),this.dragging=!0)},onMouseMove:function(t){this.dragging&&("drag"===this.trigger||this.keydown)&&this.updateBrush(t)},onMouseUp:function(t){this.graph;(this.brush||this.dragging)&&("drag"===this.trigger||this.keydown)&&(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(t),this.dragging=!1)},clearStates:function(){var t=this,e=t.graph,n=t.selectedState,r=e.findAllByState("node",n),i=e.findAllByState("edge",n),o=e.findAllByState("combo",n);r.forEach((function(t){return e.setItemState(t,n,!1)})),i.forEach((function(t){return e.setItemState(t,n,!1)})),o.forEach((function(t){return e.setItemState(t,n,!1)})),this.selectedNodes=[],this.selectedEdges=[],this.selectedCombos=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges,this.selectedCombos),e.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},isBBoxCenterInRect:function(t,e,n,r,i){var o=t.getBBox();return o.centerX>=e&&o.centerX<=n&&o.centerY>=r&&o.centerY<=i},getSelectedNodes:function(t){var e=this,n=this,r=n.graph,i=n.originPoint,o=n.shouldUpdate,a=n.isBBoxCenterInRect,s=this.selectedState,l={x:t.x,y:t.y},u=r.getPointByCanvas(i.x,i.y),c=dj(l.x,u.x),h=fj(l.x,u.x),d=dj(l.y,u.y),f=fj(l.y,u.y),p=[],g=[];r.getNodes().forEach((function(t){if(t.isVisible()&&a(t,c,h,d,f)&&o(t,"select",e)){p.push(t);var n=t.getModel();g.push(n.id),r.setItemState(t,s,!0)}}));var m=[];this.includeEdges&&p.forEach((function(t){var n=t.getOutEdges();n.forEach((function(t){if(t.isVisible()){var n=t.getModel(),i=n.source,a=n.target;g.includes(i)&&g.includes(a)&&o(t,"select",e)&&(m.push(t),r.setItemState(t,e.selectedState,!0))}}))}));var y=[];this.includeCombos&&r.getCombos().forEach((function(t){if(t.isVisible()&&a(t,c,h,d,f)&&o(t,"select",e)){y.push(t);var n=t.getModel();g.push(n.id),r.setItemState(t,s,!0)}})),this.selectedEdges=m,this.selectedNodes=p,this.selectedCombos=y,this.onSelect&&this.onSelect(p,m,y),r.emit("nodeselectchange",{selectedItems:{nodes:p,edges:m,combos:y},select:!0})},createBrush:function(){var t=this,e=t.graph.get("canvas").addShape("rect",{attrs:t.brushStyle,capture:!1,name:"brush-shape"});return this.brush=e,this.delegate=e,e},updateBrush:function(t){var e=this.originPoint;this.brush.attr({width:pj(t.canvasX-e.x),height:pj(t.canvasY-e.y),x:dj(t.canvasX,e.x),y:dj(t.canvasY,e.y)})},onKeyDown:function(t){var e=t.key;if(e){var n=this.trigger.toLowerCase(),r=e.toLowerCase();this.keydown=r===n||"control"===r&&"ctrl"===n||"ctrl"===r&&"control"===n}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}},vj="shift",bj=["shift","ctrl","alt","control"],_j={getDefaultCfg:function(){return{multiple:!0,trigger:vj,selectedState:"selected",selectNode:!0,selectEdge:!1,selectCombo:!0}},getEvents:function(){var t=this;return bj.indexOf(t.trigger.toLowerCase())>-1||(t.trigger=vj,console.warn("Behavior click-select 的 trigger 参数不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'")),t.multiple?{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(t){var e=this,n=t.item;if(n&&!n.destroyed){var r=n.getType(),i=e.graph,o=e.keydown,a=e.multiple,s=e.shouldUpdate,l=e.shouldBegin;if(l(t,e)){if(!o||!a){var u=i.findAllByState("node",e.selectedState).concat(i.findAllByState("edge",e.selectedState)).concat(i.findAllByState("combo",e.selectedState));Object(RE["each"])(u,(function(t){t!==n&&i.setItemState(t,e.selectedState,!1)}))}var c=function(){switch(r){case"node":return e.selectNode;case"edge":return e.selectEdge;case"combo":return e.selectCombo;default:return!1}}();if(c)if(n.hasState(e.selectedState)){s(t,e)&&i.setItemState(n,e.selectedState,!1);h=i.findAllByState("node",e.selectedState),d=i.findAllByState("edge",e.selectedState),f=i.findAllByState("combo",e.selectedState);i.emit("nodeselectchange",{target:n,selectedItems:{nodes:h,edges:d,combos:f},select:!1})}else{s(t,e)&&i.setItemState(n,e.selectedState,!0);h=i.findAllByState("node",e.selectedState),d=i.findAllByState("edge",e.selectedState),f=i.findAllByState("combo",e.selectedState);i.emit("nodeselectchange",{target:n,selectedItems:{nodes:h,edges:d,combos:f},select:!0})}else{var h=i.findAllByState("node",e.selectedState),d=i.findAllByState("edge",e.selectedState),f=i.findAllByState("combo",e.selectedState);i.emit("nodeselectchange",{selectedItems:{nodes:h,edges:d,combos:f},select:!1})}}}},onCanvasClick:function(t){var e=this,n=this,r=n.graph,i=n.shouldBegin;if(i(t,this)){var o=r.findAllByState("node",this.selectedState);Object(RE["each"])(o,(function(t){r.setItemState(t,e.selectedState,!1)}));var a=r.findAllByState("edge",this.selectedState);Object(RE["each"])(a,(function(t){r.setItemState(t,e.selectedState,!1)}));var s=r.findAllByState("combo",this.selectedState);Object(RE["each"])(s,(function(t){r.setItemState(t,e.selectedState,!1)})),r.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})}},onKeyDown:function(t){var e=this,n=t.key;n&&(n.toLowerCase()===this.trigger.toLowerCase()||"control"===n.toLowerCase()?e.keydown=!0:e.keydown=!1)},onKeyUp:function(){var t=this;t.keydown=!1}},xj=UE["a"].transform,wj=.05,Sj={getDefaultCfg:function(){return this.isFireFox="firefox"===PI(),{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"},animate:!1,animateCfg:{duration:500}}},getEvents:function(){var t=this.fixSelectedItems;return t.fixState||(t.fixState="selected"),t.fixAll&&(t.fixLineWidth=!0,t.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(t){var e=t.originalEvent.touches,n=e[0],r=e[1];t.preventDefault(),r&&(this.shouldBegin&&!this.shouldBegin(t,this)||(this.startPoint={pageX:n.pageX,pageY:n.pageY},this.moveable=!0,r&&(this.endPoint={pageX:r.pageX,pageY:r.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1))},onTouchMove:function(t){if(this.moveable){t.preventDefault();var e=t.originalEvent.touches,n=e[0],r=e[1];if(r){this.endPoint||(this.endPoint={pageX:r.pageX,pageY:r.pageY});var i=function(t,e){return Math.hypot(e.x-t.x,e.y-t.y)},o=i({x:n.pageX,y:n.pageY},{x:r.pageX,y:r.pageY})/i({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),a=this.originScale*o;this.currentScale=a;var s=this.get("minZoom")||this.graph.get("minZoom"),l=this.get("maxZoom")||this.graph.get("maxZoom");if(!(a>l||a<s)){var u=this.get("animate"),c=this.get("animateCfg"),h=this.graph.get("canvas"),d=h.getPointByClient(t.clientX,t.clientY);this.graph.zoomTo(a,{x:d.x,y:d.y},u,c),this.graph.emit("wheelzoom",t)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(t){var e=this,n=this,r=n.graph,i=n.fixSelectedItems;if((!this.shouldBegin||this.shouldBegin(t,this))&&this.shouldUpdate(t,this)){t.preventDefault();var o=r.get("canvas"),a=o.getPointByClient(t.clientX,t.clientY),s=this.get("sensitivity"),l=r.getZoom(),u=l,c=l;u=this.isFireFox?t.deltaY>0||t.wheelDelta<0?1-wj*s:1/(1-wj*s):t.wheelDelta<0?1-wj*s:1/(1-wj*s),c=l*u;var h=this.get("minZoom")||r.get("minZoom"),d=this.get("maxZoom")||r.get("maxZoom");c>d?c=d:c<h&&(c=h);var f=this.get("enableOptimize");if(f){var p=this.get("optimizeZoom"),g=this.get("optimized"),m=r.getNodes(),y=r.getEdges(),v=m.length,b=y.length;if(!g){for(var _=0;_<v;_++){var x=m[_];if(!x.destroyed)for(var w=x.get("group").get("children"),S=w.length,E=0;E<S;E++){var C=w[E];C.destoryed||C.get("isKeyShape")||(C.set("ori-visibility",C.get("ori-visibility")||C.get("visible")),C.hide())}}for(var M=0;M<b;M++){var T=y[M];for(w=T.get("group").get("children"),S=w.length,E=0;E<S;E++){C=w[E];C.set("ori-visibility",C.get("ori-visibility")||C.get("visible")),C.hide()}}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var A=setTimeout((function(){var t=r.getZoom(),n=e.get("optimized");if(n){e.set("optimized",!1);for(var i=0;i<v;i++){var o=m[i],a=o.get("group").get("children"),s=a.length;if(t<p){var l=o.getKeyShape(),u=l.get("ori-visibility");l.set("ori-visibility",void 0),u&&l.show()}else for(var c=0;c<s;c++){var h=a[c];u=h.get("ori-visibility");h.set("ori-visibility",void 0),!h.get("visible")&&u&&u&&h.show()}}for(var d=0;d<b;d++){var f=y[d];a=f.get("group").get("children"),s=a.length;if(t<p){l=f.getKeyShape(),u=l.get("ori-visibility");l.set("ori-visibility",void 0),u&&l.show()}else for(c=0;c<s;c++){h=a[c];if(!h.get("visible")){u=h.get("ori-visibility");h.set("ori-visibility",void 0),u&&h.show()}}}}}),100);this.set("timeout",A)}if(l<=1){var O=void 0,k=void 0;if(i.fixAll||i.fixLineWidth||i.fixLabel){O=r.findAllByState("node",i.fixState),k=r.findAllByState("edge",i.fixState);for(var I=l/c,P=O.length,L=0;L<P;L++){x=O[L];var N=x.getContainer(),R=x.getModel(),D=x.getOriginStyle(),F=x.getStateStyle(i.fixState),j=x.get("shapeFactory").getShape(R.type).getStateStyle(i.fixState,x)[i.fixState];if(i.fixAll){if(c<=1){var B=Object(RE["clone"])(N.getMatrix());B||(B=[1,0,0,0,1,0,0,0,1]);var z=x.getModel(),U=z.x,G=z.y;B=xj(B,[["t",-U,-G],["s",I,I],["t",U,G]]),N.setMatrix(B)}}else for(w=N.get("children"),S=w.length,E=0;E<S;E++){C=w[E];var q=void 0,V=void 0;if(i.fixLabel){var H=C.get("type");if("text"===H){q=C.attr("fontSize")||12;var W=F[C.get("name")],Y=j[C.get("name")],X=W?W.fontSize:12,J=Y?Y.fontSize:12,Z=X||J||12;if(c<=1&&C.attr("fontSize",Z/c),V)break}}if(i.fixLineWidth&&C.get("isKeyShape")){V=C.attr("lineWidth")||0;var K=F.lineWidth||j.lineWidth||D.lineWidth||0;if(c<=1&&C.attr("lineWidth",K/c),q)break}}}for(var Q=k.length,$=0;$<Q;$++)for(T=k[$],N=T.getContainer(),w=N.get("children"),R=T.getModel(),F=T.getStateStyle(i.fixState),j=T.get("shapeFactory").getShape(R.type).getStateStyle(i.fixState,T)[i.fixState],S=w.length,E=0;E<S;E++){C=w[E],q=void 0,V=void 0;if(i.fixLabel||i.fixAll){H=C.get("type");if("text"===H){q=C.attr("fontSize")||12;W=F[C.get("name")],Y=j[C.get("name")],X=W?W.fontSize:12,J=Y?Y.fontSize:12,Z=X||J||12;if(c<=1&&C.attr("fontSize",Z/c),V)break}}if((i.fixLineWidth||i.fixAll)&&C.get("isKeyShape")){V=C.attr("lineWidth")||0;K=F.lineWidth||j.lineWidth||1;if(c<=1&&C.attr("lineWidth",K/c),q)break}}}}var tt=this.get("animate"),et=this.get("animateCfg");r.zoomTo(c,{x:a.x,y:a.y},tt,et),r.emit("wheelzoom",t)}}},Ej={onMouseEnter:function(t){var e=t.item;this.currentTarget=e,this.showTooltip(t),this.graph.emit("tooltipchange",{item:t.item,action:"show"})},onMouseMove:function(t){this.shouldUpdate(t,this)?this.currentTarget&&t.item===this.currentTarget&&this.updatePosition(t):this.hideTooltip()},onMouseLeave:function(t){this.shouldEnd(t,this)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(t){var e=this.container;if(t.item&&!t.item.destroyed){e||(e=this.createTooltip(this.graph.get("canvas")),this.container=e);var n=this.formatText(t.item.get("model"),t);e.innerHTML=n,jk(this.container,{visibility:"visible"}),this.updatePosition(t)}},hideTooltip:function(){jk(this.container,{visibility:"hidden"})},updatePosition:function(t){var e=this.get("shouldBegin"),n=this,r=n.width,i=n.height,o=n.container,a=n.graph;if(e(t,this)){var s=a.getPointByClient(t.clientX,t.clientY),l=a.getCanvasByPoint(s.x,s.y),u=l.x,c=l.y,h=o.getBoundingClientRect();u>r/2?u-=h.width:u+=this.offset,c>i/2?c-=h.height:c+=this.offset;var d="".concat(u,"px"),f="".concat(c,"px");jk(this.container,{left:d,top:f,visibility:"visible"})}else jk(o,{visibility:"hidden"})},createTooltip:function(t){var e=t.get("el");e.style.position="relative";var n=Fk('<div class="g6-tooltip g6-'.concat(this.item,'-tooltip"></div>'));return e.parentNode.appendChild(n),jk(n,{position:"absolute",visibility:"visible"}),this.width=t.get("width"),this.height=t.get("height"),this.container=n,this.graph.get("tooltips").push(n),n}},Cj=Object(NE["__assign"])({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(t){return t.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},Ej),Mj=Object(NE["__assign"])({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(t){return"source: ".concat(t.source," target: ").concat(t.target)}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},Ej),Tj="click",Aj=["click","dblclick"],Oj={getDefaultCfg:function(){return{trigger:Tj,onChange:function(){}}},getEvents:function(){var t,e;return Aj.includes(this.trigger)?e=this.trigger:(e=Tj,console.warn("Behavior collapse-expand 的 trigger 参数不合法，请输入 'click' 或 'dblclick'")),t={},t["node:".concat(e)]="onNodeClick",t.touchstart="onNodeClick",t},onNodeClick:function(t){var e=this;if("click"===this.trigger){if(this.timer)return clearTimeout(this.timer),void(this.timer=0);this.timer=setTimeout((function(){e.toggle(t),clearTimeout(e.timer),e.timer=0}),200)}else this.toggle(t)},toggle:function(t){var e=t.item;if(e){var n=this.graph.findDataById(e.get("id"));if(n){var r=n.children;if(r&&0!==r.length){var i=!n.collapsed;this.shouldBegin(t,i,this)&&(n.collapsed=i,e.getModel().collapsed=i,this.graph.emit("itemcollapsed",{item:t.item,collapsed:i}),this.shouldUpdate(t,i,this)&&(this.onChange(e,i,this),this.graph.layout()))}}}}},kj=NI.calculationItemsBBox,Ij=function t(e,n){if(!1!==n(e)&&e){var r=e.get("combos");if(0===r.length)return!1;Object(RE["each"])(r,(function(e){t(e,n)}))}},Pj={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected",enableStack:!0}},getEvents:function(){return{"combo:mousedown":"onMouseDown","combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(t){var e=t.item;if(!e||e.destroyed)return!1;if(!this.shouldUpdate(t,this))return!1;var n=e.getType();return"combo"===n},onMouseDown:function(t){this.origin={x:t.x,y:t.y}},onDragStart:function(t){var e=this,n=this.graph,r=t.item;if(this.currentShouldEnd=!0,this.validationCombo(t)){this.targets=[];var i=n.findAllByState("combo",this.selectedState),o=r.get("id"),a=i.filter((function(t){var e=t.get("id");return o===e}));0===a.length?this.targets.push(r):this.targets=i;var s=[];this.targets.forEach((function(t){var e=t.getModel(),n=e.x,r=e.y,i=e.id;s.push({x:n,y:r,id:i})})),this.set("beforeDragItems",s),this.activeState&&this.targets.map((function(t){var r=t.getModel();if(r.parentId){var i=n.findById(r.parentId);i&&n.setItemState(i,e.activeState,!0)}})),this.point={},this.originPoint={},this.currentItemChildCombos=[],Ij(r,(function(t){if(t.destroyed)return!1;var n=t.getModel();return e.currentItemChildCombos.push(n.id),!0}))}},onDrag:function(t){var e=this;if(this.origin&&this.validationCombo(t))if(this.enableDelegate)this.updateDelegate(t);else{if(this.activeState){var n=this.graph,r=t.item,i=r.getModel(),o=n.getCombos(),a=r.getBBox(),s=a.centerX,l=a.centerY,u=a.width,c=o.filter((function(t){var n=t.getModel();return i.parentId,n.id!==i.id&&!e.currentItemChildCombos.includes(n.id)}));c.map((function(t){var r=t.getBBox(),i=r.centerX,o=r.centerY,a=r.width,c=s-i,h=l-o,d=2*Math.sqrt(c*c+h*h);u+a-d>.8*u?n.setItemState(t,e.activeState,!0):n.setItemState(t,e.activeState,!1)}))}Object(RE["each"])(this.targets,(function(n){e.updateCombo(n,t)})),this.onlyChangeComboSize&&this.updateParentCombos()}},updatePositions:function(t,e){var n=this;(this.enableDelegate||e)&&Object(RE["each"])(this.targets,(function(r){n.updateCombo(r,t,e)}))},onDrop:function(t){var e=this,n=t.item;if(this.currentShouldEnd=this.shouldEnd(t,n,this),this.updatePositions(t,!this.currentShouldEnd),this.currentShouldEnd&&n&&this.targets&&!n.destroyed){var r=this.graph,i=n.getModel();this.targets.map((function(t){var o=t.getModel();o.parentId!==i.id?(e.activeState&&r.setItemState(n,e.activeState,!1),e.onlyChangeComboSize?r.updateCombo(t):r.updateComboTree(t,i.id,!1)):r.updateCombo(n)})),this.end(n,t),this.endComparison=!0}},onNodeDrop:function(t){var e=this;if(this.targets&&0!==this.targets.length){var n=this.graph,r=t.item,i=r.getModel().comboId,o=i?n.findById(i):void 0;if(this.currentShouldEnd=this.shouldEnd(t,o,this),this.updatePositions(t,!this.currentShouldEnd),this.currentShouldEnd){var a;if(i){if(this.activeState){var s=n.findById(i);n.setItemState(s,this.activeState,!1)}this.targets.map((function(t){e.onlyChangeComboSize?n.updateCombo(t):i!==t.getID()&&(a=n.findById(i),i!==t.getModel().parentId&&n.updateComboTree(t,i,!1))}))}else this.targets.map((function(t){if(e.onlyChangeComboSize)n.updateCombo(t);else{var r=t.getModel();r.comboId&&n.updateComboTree(t,void 0,!1)}}));this.endComparison=!0,this.end(a,t)}}},onDragEnter:function(t){if(this.origin&&this.validationCombo(t)){var e=t.item,n=this.graph;this.activeState&&n.setItemState(e,this.activeState,!0)}},onDragLeave:function(t){if(this.origin&&this.validationCombo(t)){var e=t.item,n=this.graph;this.activeState&&n.setItemState(e,this.activeState,!1)}},onDragEnd:function(t){if(this.targets&&0!==this.targets.length){var e=t.item;this.currentShouldEnd&&this.updatePositions(t);var n=this.getParentCombo(e.getModel().parentId),r=this.graph;n&&this.activeState&&r.setItemState(n,this.activeState,!1),this.end(void 0,t)}},end:function(t,e){var n=this;if(this.origin){var r=this.graph;if(this.delegateShape){var i=r.get("delegateGroup");i.clear(),this.delegateShape=null}if(t&&this.activeState&&r.setItemState(t,this.activeState,!1),!t){var o=r.get("enabledStack")&&this.enableStack,a={before:{nodes:[],edges:[],combos:[].concat(this.get("beforeDragItems"))},after:{nodes:[],edges:[],combos:[]}};this.targets.map((function(t){if(n.onlyChangeComboSize){r.updateCombo(t);var e=t.getModel(),i=e.x,s=e.y,l=e.id;a.after.combos.push({x:i,y:s,id:l}),r.pushStack("update",a)}else r.updateComboTree(t,void 0,o)}))}this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(t,e,n){var r=this;if(void 0===n&&(n={}),!1!==e(t,n)&&t){var i=t.get("combos");Object(RE["each"])(i,(function(t){r.traverse(t,e,n)}));var o=t.get("nodes");Object(RE["each"])(o,(function(t){r.traverse(t,e,n)}))}},updateCombo:function(t,e,n){this.updateSingleItem(t,e,n);var r={};this.traverse(t,(function(t,e){return!t.destroyed&&(t.getEdges().forEach((function(t){return e[t.getID()]=t})),!0)}),r),Object.values(r).forEach((function(t){return t.refresh()}))},updateSingleItem:function(t,e,n){var r=this.origin,i=this.graph,o=t.getModel(),a=t.get("id");this.point[a]||(this.point[a]={x:o.x,y:o.y});var s=e.x-r.x+this.point[a].x,l=e.y-r.y+this.point[a].y;n&&(s+=r.x-e.x,l+=r.y-e.y),i.updateItem(t,{x:s,y:l},!1)},getParentCombo:function(t){var e=this.graph;if(t){var n=e.findById(t);if(n)return n}},updateDelegate:function(t){var e=this.graph;if(this.delegateShape){var n=t.x-this.origin.x+this.originPoint.minX,r=t.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:n,y:r})}else{var i=e.get("delegateGroup"),o=null;o=this.targets.length>1?kj(this.targets):this.targets[0].getBBox();var a=o.x,s=o.y,l=o.width,u=o.height,c=o.minX,h=o.minY;this.originPoint={x:a,y:s,width:l,height:u,minX:c,minY:h};var d=Object(NE["__assign"])(Object(NE["__assign"])({},fI.delegateStyle),this.delegateStyle);this.delegateShape=i.addShape("rect",{attrs:Object(NE["__assign"])({width:o.width,height:o.height,x:o.x,y:o.y},d),name:"combo-delegate-shape"}),this.delegateShape.set("capture",!1),this.delegate=this.delegateShape}},updateParentCombos:function(){var t=this,e=t.graph,n=t.targets,r={};null===n||void 0===n||n.forEach((function(t){var n=t.getModel().parentId;n&&(r[n]=e.findById(n))})),Object.values(r).forEach((function(t){t&&e.updateCombo(t)}))}},Lj="dblclick",Nj=["click","dblclick"],Rj={getDefaultCfg:function(){return{trigger:Lj,relayout:!0}},getEvents:function(){var t,e;return Nj.includes(this.trigger)?e=this.trigger:(e=Lj,console.warn("Behavior collapse-expand-group 的 trigger 参数不合法，请输入 'click' 或 'dblclick'")),t={},t["combo:".concat(e)]="onComboClick",t},onComboClick:function(t){var e=t.item,n=this,r=n.graph,i=n.relayout;if(e&&!e.destroyed&&"combo"===e.getType()){var o=e.getModel(),a=o.id;a&&(r.collapseExpandCombo(a),i&&r.get("layout")?r.layout():r.refreshPositions())}}},Dj=NI.isPolygonsIntersect,Fj=NI.pathToPoints,jj="shift",Bj=["drag","shift","ctrl","alt","control"],zj=function(t,e){var n,r=t.getKeyShape();if("path"===t.get("type"))n=Fj(r.attr("path"));else{var i=r.getCanvasBBox();n=[[i.minX,i.minY],[i.maxX,i.minY],[i.maxX,i.maxY],[i.minX,i.maxY]]}return Dj(e,n)},Uj={getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},shouldDeselect:void 0,selectedState:"selected",trigger:jj,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return Bj.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=jj,console.warn("Behavior lasso-select 的 trigger 参数不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'")),"drag"===this.trigger?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(t){var e=this.lasso,n=t.item;n||("drag"===this.trigger||this.keydown)&&(this.selectedNodes&&0!==this.selectedNodes.length&&this.clearStates("dragstart"),e||(e=this.createLasso()),this.dragging=!0,this.originPoint={x:t.x,y:t.y},this.points.push(this.originPoint),e.show())},onDragMove:function(t){this.dragging&&("drag"===this.trigger||this.keydown)&&(this.points.push({x:t.x,y:t.y}),this.updateLasso(t))},onDragEnd:function(t){(this.lasso||this.dragging)&&("drag"===this.trigger||this.keydown)&&(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var t=this.points,e=[];return t.length&&(t.forEach((function(t,n){0===n?e.push(["M",t.x,t.y]):e.push(["L",t.x,t.y])})),e.push(["L",t[0].x,t[0].y])),e},clearStates:function(t){void 0===t&&(t="canvas:click");var e=this,n=e.graph,r=e.selectedState,i=e.shouldDeselect,o=n.findAllByState("node",r),a=n.findAllByState("edge",r);i&&!i({action:t,nodes:o,edges:a})||(o.forEach((function(t){return n.setItemState(t,r,!1)})),a.forEach((function(t){return n.setItemState(t,r,!1)}))),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],n.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var t=this,e=this,n=e.graph,r=e.shouldUpdate,i=this.points.map((function(t){return[n.getCanvasByPoint(t.x,t.y).x,n.getCanvasByPoint(t.x,t.y).y]})),o=this.selectedState,a=[],s=[];n.getNodes().forEach((function(e){if(e.isVisible()&&zj(e,i)&&r(e,"select",t)){a.push(e);var l=e.getModel();s.push(l.id),n.setItemState(e,o,!0)}}));var l=[];this.includeEdges&&a.forEach((function(e){var i=e.getOutEdges();i.forEach((function(e){if(e.isVisible()){var i=e.getModel(),o=i.source,a=i.target;s.includes(o)&&s.includes(a)&&r(e,"select",t)&&(l.push(e),n.setItemState(e,t.selectedState,!0))}}))})),this.selectedEdges=l,this.selectedNodes=a,this.onSelect&&this.onSelect(a,l),n.emit("nodeselectchange",{selectedItems:{nodes:a,edges:l},select:!0})},createLasso:function(){var t=this,e=t.graph.get("delegateGroup").addShape("path",{attrs:Object(NE["__assign"])({path:[]},t.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=e,this.delegate=e,this.points=[],e},updateLasso:function(t){var e=this;this.lasso.attr({path:e.getLassoPath()})},onKeyDown:function(t){var e=t.key;e&&(e.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}},Gj="click",qj=["click","drag"],Vj=void 0,Hj=["shift","ctrl","control","alt","meta",void 0],Wj={getDefaultCfg:function(){return{trigger:Gj,key:Vj,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var t,e=this;return qj.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=Gj,console.warn("Behavior create-edge 的 trigger 参数不合法，请输入 'click'，'drag'")),e.key&&-1===Hj.indexOf(e.key.toLowerCase())&&(e.trigger=Vj,console.warn("Behavior create-edge 的 key 参数不合法，请输入 'shift'，'ctrl'，'alt'，'control'，或 undefined")),"drag"===e.trigger?t={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:"click"===e.trigger&&(t={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),e.key&&(t.keydown="onKeyDown",t.keyup="onKeyUp"),t},onDragEnd:function(t){var e=this;if(!e.key||e.keydown){var n=t.item;n&&n.getID()!==e.source&&"node"===n.getType()||e.cancelCreating({item:e.edge,x:t.x,y:t.y})}},onClick:function(t){var e=this;if(!e.key||e.keydown){var n=t.item,r=e.graph,i=n.getModel(),o=e.getEdgeConfig;if(e.addingEdge&&e.edge){if(!e.shouldEnd(t,e))return;var a=void 0;a=o&&Object(RE["isFunction"])(o)?o({source:e.source,target:i.id},e):e.edgeConfig;var s=Object(NE["__assign"])({target:i.id},a);if(e.source===i.id&&(s.type="loop"),r.emit("beforecreateedge",{}),r.updateItem(e.edge,s,!1),r.get("enabledStack")){var l=Object(NE["__assign"])(Object(NE["__assign"])({},e.edge.getModel()),{itemType:"edge"}),u={};u.edges=[l],r.pushStack("add",{before:{},after:u})}r.emit("aftercreateedge",{edge:e.edge}),e.edge.getKeyShape().set("capture",!0),e.edge=null,e.addingEdge=!1}else{if(!e.shouldBegin(t,e))return;a=void 0;a=o&&Object(RE["isFunction"])(o)?o({source:i.id,target:i.id},e):e.edgeConfig,e.edge=r.addItem("edge",Object(NE["__assign"])({source:i.id,target:i.id},a),!1),e.source=i.id,e.addingEdge=!0,e.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(t){var e=this;if(!e.key||e.keydown){e.edge&&e.edge.destroyed&&e.cancelCreating({item:e.edge});var n={x:t.x,y:t.y};e.graph.findById(e.source)?e.addingEdge&&e.edge&&e.graph.updateItem(e.edge,{target:n},!1):e.addingEdge=!1}},cancelCreating:function(t){var e,n,r=this;if(!r.key||r.keydown){var i=r.graph,o=t.item;return r.addingEdge&&(r.edge===o||(null===(n=null===(e=t.target)||void 0===e?void 0:e.isCanvas)||void 0===n?void 0:n.call(e)))?(r.edge&&!r.edge.destroyed&&i.removeItem(r.edge,!1),r.edge=null,void(r.addingEdge=!1)):void 0}},onKeyDown:function(t){var e=this,n=t.key;n&&(n.toLowerCase()===e.key.toLowerCase()?e.keydown=!0:e.keydown=!1)},onKeyUp:function(){var t=this;t.addingEdge&&t.edge&&(t.graph.removeItem(t.edge,!1),t.addingEdge=!1,t.edge=null),this.keydown=!1}},Yj="ctrl",Xj=["shift","ctrl","alt","control"],Jj="1",Zj={getDefaultCfg:function(){return{trigger:Yj,combinedKey:Jj,functionName:"fitView",functionParams:[]}},getEvents:function(){return Xj.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=Yj,console.warn("Behavior shortcuts-fit-view 的 trigger 参数 '".concat(this.trigger,"' 不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'"))),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(t){var e=t.key;if(e){var n=this.trigger.toLowerCase(),r=e.toLowerCase();this.triggerKeydown||(this.triggerKeydown=r===n||"control"===r&&"ctrl"===n||"ctrl"===r&&"control"===n);var i=this.graph;if(!i[this.functionName])return console.warn("Behavior shortcuts-fit-view 的 functionName 参数 '".concat(this.functionName,"' 不合法，它不是 Graph 的一个函数名")),{};if(!this.triggerKeydown||this.combinedKey){var o=this.combinedKey.toLowerCase();this.triggerKeydown&&(r===o||"control"===r&&"ctrl"===o||"ctrl"===r&&"control"===o)&&(this.functionParams&&this.functionParams.length?i[this.functionName].apply(i,this.functionParams):i[this.functionName]())}else this.functionParams&&this.functionParams.length?i[this.functionName].apply(i,this.functionParams):i[this.functionName]()}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}},Kj=["shift","ctrl","alt","control","meta"],Qj={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0,allowDragOnItem:!0}},getEvents:function(){return this.zoomKey&&-1!==Kj.indexOf(this.zoomKey)||(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(t){var e=this;if(this.allowDrag(t)){var n=this.graph,r=Array.isArray(this.zoomKey)?[].concat(this.zoomKey):[this.zoomKey];r.includes("control")&&r.push("ctrl");var i=r.some((function(e){return t["".concat(e,"Key")]}));if(i){var o=n.get("canvas"),a=o.getPointByClient(t.clientX,t.clientY),s=n.getZoom();t.wheelDelta>0?s+=.05*s:s-=.05*s,n.zoomTo(s,{x:a.x,y:a.y})}else{var l=t.deltaX||t.movementX,u=t.deltaY||t.movementY;!u&&navigator.userAgent.indexOf("Firefox")>-1&&(u=125*-t.wheelDelta/3);var c=this.graph.get("width"),h=this.graph.get("height"),d=this.graph.get("canvas").getCanvasBBox(),f=this.scalableRange,p=this.scalableRange;f<1&&f>-1&&(f*=c,p*=h);var g=d.minX,m=d.maxX,y=d.minY,v=d.maxY;l>0?m<-f?l=0:m-l<-f&&(l=m+f):l<0&&(g>c+f?l=0:g-l>c+f&&(l=g-(c+f))),u>0?v<-p?u=0:v-u<-p&&(u=v+p):u<0&&(y>h+p?u=0:y-u>h+p&&(u=y-(h+p))),"x"===this.get("direction")?u=0:"y"===this.get("direction")&&(l=0),n.translate(-l,-u)}t.preventDefault();var b=this.get("enableOptimize");if(b){var _=this.get("optimizeZoom"),x=this.get("optimized"),w=n.getNodes(),S=n.getEdges(),E=w.length,C=S.length;if(!x){for(var M=0;M<E;M++){var T=w[M];if(!T.destroyed)for(var A=T.get("group").get("children"),O=A.length,k=0;k<O;k++){var I=A[k];I.destoryed||I.get("isKeyShape")||(I.set("ori-visibility",I.get("ori-visibility")||I.get("visible")),I.hide())}}for(var P=0;P<C;P++){var L=S[P];for(A=L.get("group").get("children"),O=A.length,k=0;k<O;k++){I=A[k];I.set("ori-visibility",I.get("ori-visibility")||I.get("visible")),I.hide()}}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var N=setTimeout((function(){var t=n.getZoom(),r=e.get("optimized");if(r){e.set("optimized",!1);for(var i=0;i<E;i++){var o=w[i],a=o.get("group").get("children"),s=a.length;if(t<_){var l=o.getKeyShape(),u=l.get("ori-visibility");u&&l.show()}else for(var c=0;c<s;c++){var h=a[c];u=h.get("ori-visibility");!h.get("visible")&&u&&u&&h.show()}}for(var d=0;d<C;d++){var f=S[d];a=f.get("group").get("children"),s=a.length;if(t<_){l=f.getKeyShape(),u=l.get("ori-visibility");u&&l.show()}else for(c=0;c<s;c++){h=a[c];if(!h.get("visible")){u=h.get("ori-visibility");u&&h.show()}}}}}),100);this.set("timeout",N)}}},allowDrag:function(t){var e,n,r=t.target,i=r&&r.isCanvas&&r.isCanvas();if(Object(RE["isBoolean"])(this.allowDragOnItem)&&!this.allowDragOnItem&&!i)return!1;if(Object(RE["isObject"])(this.allowDragOnItem)){var o=this.allowDragOnItem,a=o.node,s=o.edge,l=o.combo,u=null===(n=null===(e=t.item)||void 0===e?void 0:e.getType)||void 0===n?void 0:n.call(e);if(!a&&"node"===u)return!1;if(!s&&"edge"===u)return!1;if(!l&&"combo"===u)return!1}return!0}},$j={"drag-canvas":uj,"zoom-canvas":Sj,"drag-node":cj,"activate-relations":hj,"brush-select":yj,"click-select":_j,"lasso-select":Uj,tooltip:Cj,"edge-tooltip":Mj,"collapse-expand":Oj,"drag-combo":Pj,"collapse-expand-combo":Rj,"create-edge":Wj,"shortcuts-call":Zj,"scroll-canvas":Qj};Object(RE["each"])($j,(function(t,e){kk(e,t)}));var tB=Object(NE["__assign"])(Object(NE["__assign"])({},r),Pk),eB=(uF.Grid,uF.Minimap,uF.Bundling,uF.Menu,uF.Fisheye),nB=(uF.ToolBar,uF.Tooltip,uF.TimeBar),rB=uF.ImageMinimap,iB=uF.EdgeFilterLens,oB=uF.SnapLine,aB=(uF.Legend,uF.Annotation),sB={version:fI.version,Graph:aP,TreeGraph:fP,Util:NI,Layout:_I["Layouts"],TreeLayout:FI,registerLayout:jI,Global:fI,registerBehavior:kk,registerCombo:Ok,registerEdge:Ak,registerNode:Tk,Minimap:uF.Minimap,Grid:uF.Grid,Bundling:uF.Bundling,Menu:uF.Menu,ToolBar:uF.ToolBar,Tooltip:uF.Tooltip,Legend:uF.Legend,TimeBar:nB,SnapLine:oB,Fisheye:eB,ImageMinimap:rB,EdgeFilterLens:iB,Annotation:aB,Algorithm:tB,Arrow:gk,Marker:mk,Shape:yk};sB.version="4.8.22";var lB=sB;class uB{constructor(){this.config=null,this.graph=null,this.data=null,this.collpasedData={},this.importG6(),this.CLASS_NAME="SuperMap.G6Render"}importG6(){lB||console.log("please import g6, eg：https://gw.alipayobjects.com/os/lib/antv/g6/4.3.2/dist/g6.min.js")}initGraph(t){const e=new lB.Graph(t);return this.graph=e,t&&!1===t.highlightNode||this.highlightNode(e),t&&!1===t.highlightEdge||this.highlightEdge(e),!1===t.dragCanvas&&!1===t.dragNode||this.stopDefaultEventPropagation(),e}_getContextMenu(){const t=new lB.Menu({shouldBegin(t){return!!(t.target&&t.target.isCanvas&&t.target.isCanvas())||!!t.item},getContent:t=>{const{item:e}=t;if(t.target&&t.target.isCanvas&&t.target.isCanvas())return;if(!e)return;const n=e.getType(),r=e.getModel();return n&&r&&"node"===n?this.isCollpased(r.id)?"<ul>\n              <li id='expand'>展开</li>\n              <li id='hide'>隐藏</li>\n            </ul>":"<ul>\n              <li id='collapse'>折叠</li>\n              <li id='hide'>隐藏</li>\n            </ul>":void 0},handleMenuClick:(t,e)=>{const n=t.id.split("-");switch(n[0]){case"hide":this.hideItem(e);break;case"expand":this.expandNode(e);break;case"collapse":this.collapseNode(e);break;case"show":this.showItem(e);break;default:break}},offsetX:26,offsetY:0,itemTypes:["node","edge","canvas"]});return t}_getGraphConfig(t){const e={speed:120,maxIteration:83,tick:()=>{this.refreshPositions()}},n={type:"fruchterman",gravity:5},r={},i={type:"line",style:{endArrow:{path:"M 0,0 L 2,1 L 2,-1 Z"},lineWidth:.5},labelCfg:{autoRotate:!0,style:{fontSize:4,fill:"#333"}}},o={default:["drag-canvas","zoom-canvas","drag-node"]},a=this._getContextMenu(),s=[new lB.ToolBar,a],l="#b4d6ff",u={lineWidth:3,stroke:l},c={stroke:l,lineWidth:2,endArrow:{path:"M 0,0 L 2,1 L 2,-1 Z",fill:l}},h=(t="knowledgeGraph")=>{const a=document.querySelector("#"+t);return{container:t,width:a.scrollWidth,height:a.scrollHeight,plugins:s,modes:o,layout:{...n,...e},defaultNode:r,defaultEdge:i,nodeStateStyles:{hover:u},edgeStateStyles:{hover:c}}};if(!t)return this._setToolBarStyle(),h();t.container=t.container||"knowledgeGraph";const d="string"===typeof t.container?document.querySelector("#"+t.container):t.container;return t.width=t.width||d.scrollWidth,t.height=t.height||d.scrollHeight,t.layout={...n,...t.layout||{},...!1!==t.animate?e:{}},t.defaultNode={...r,...t.defaultNode||{}},t.defaultEdge={...i,...t.defaultEdge||{}},t.modes={default:[!1!==t.dragCanvas&&"drag-canvas",!1!==t.zoomCanvas&&"zoom-canvas",!1!==t.dragNode&&"drag-node"]},t.nodeStateStyles={hover:{...u,...t.nodeHighlightStyle||{}}},t.edgeStateStyles={hover:{...c,...t.edgeHighlightStyle||{}}},!1!==t.showToolBar&&(t.plugins=[new lB.ToolBar],this._setToolBarStyle()),!1!==t.showContextMenu&&(t.plugins=[...t.plugins||[],a],this._setToolBarStyle()),t}changeSize(t,e){return this.graph.changeSize(t,e)}autoResize(){const t=this.getContainer();window.addEventListener("resize",()=>{const e=t.scrollWidth,n=t.scrollHeight;this.graph.changeSize(e,n),this.graph.refresh()})}zoom(t,e,n,r){this.graph.zoom(t,e,n,r)}zoomTo(t,e,n,r){this.graph.zoomTo(t,e,n,r)}fitView(t,e,n,r){this.graph.fitView(t,e,n,r)}fitCenter(t,e){this.graph.fitCenter(t,e)}getGraphCenterPoint(){return this.graph.getGraphCenterPoint()}getViewPortCenterPoint(){return this.graph.getViewPortCenterPoint()}getZoom(){return this.graph.getZoom()}getMinZoom(){return this.graph.getMinZoom()}setMinZoom(t){this.graph.setMinZoom(t)}getMaxZoom(){return this.graph.getMaxZoom()}setMaxZoom(t){this.graph.setMaxZoom(t)}getWidth(){return this.graph.getWidth()}getHeight(){return this.graph.getHeight()}setCenter(t){var e=this.graph.getWidth()/2,n=this.graph.getHeight()/2,r=this.graph.getCanvasByPoint(t.x,t.y);this.graph.translate(e-r.x,n-r.y)}_setToolBarStyle(){xP()("\n      .g6-component-toolbar li[code='redo'],\n      .g6-component-toolbar li[code='undo'],\n      .g6-component-toolbar li[code='realZoom'] {\n        display: none;\n      }\n      .g6-component-contextmenu {\n        position: absolute;\n        z-index: 2;\n        list-style-type: none;\n        border-radius: 6px;\n        font-size: 14px;\n        width: fit-content;\n        transition: opacity .2s;\n        text-align: center;\n        box-shadow: 0 5px 18px 0 rgba(0, 0, 0, 0.6);\n        border: 0px;\n      }\n      .g6-component-contextmenu ul {\n        padding-left: 0px;\n        margin: 0;\n      }\n      .g6-component-contextmenu li {\n        cursor: pointer;\n        list-style-type: none;\n        list-style: none;\n        margin-left: 0;\n        line-height: 38px;\n        padding: 0px 35px;\n      }\n      .g6-component-contextmenu li:hover {\n        color: #333;\n        background: #aaaaaa45;\n      }\n    ")}highlightNode(t=this.graph){function e(){t.setAutoPaint(!1),t.getNodes().forEach((function(e){t.clearItemStates(e)})),t.paint(),t.setAutoPaint(!0)}t.on("node:mouseenter",(function(e){const n=e.item;t.setAutoPaint(!1),t.getNodes().forEach((function(e){t.clearItemStates(e)})),t.setItemState(n,"hover",!0),t.paint(),t.setAutoPaint(!0)})),t.on("node:mouseleave",e)}highlightEdge(t=this.graph){function e(){t.setAutoPaint(!1),t.getEdges().forEach((function(e){t.clearItemStates(e)})),t.paint(),t.setAutoPaint(!0)}t.on("edge:mouseenter",(function(e){const n=e.item;t.setAutoPaint(!1),t.getNodes().forEach((function(e){t.clearItemStates(e)})),t.setItemState(n,"hover",!0),t.paint(),t.setAutoPaint(!0)})),t.on("edge:mouseleave",e)}setData(t,e=this.graph){this.data?e.changeData(t):e.data(t),this.data=t}render(t=this.graph){return t.render()}updateGraph(t,e=this.graph){this.data=t,e.changeData(t)}refresh(t=this.graph){t.refresh()}getContainer(t=this.graph){return t.getContainer()}getCanvas(t=this.graph){return t.get("canvas")}getNodes(t=this.graph){return t.getNodes()}getEdges(t=this.graph){return t.getEdges()}getNeighbors(t,e,n=this.graph){return n.getNeighbors(t,e)}findById(t,e=this.graph){return e.findById(t)}find(t,e,n=this.graph){return n.find(t,e)}findAll(t,e,n=this.graph){return n.findAll(t,e)}getEdgesByNode(t){return t.getEdges()}getInEdges(t){return t.getInEdges()}getOutEdges(t){return t.getOutEdges()}getSourceByEdge(t){return t.getSource()}getTargetByEdge(t){return t.getTarget()}expandNode(t){const e=t.getModel().id;this._expandCollapseNode(this.collpasedData[e],"show"),delete this.collpasedData[e]}collapseNode(t){const e=t.getModel().id,n=[];this._collapseFunc(t,n),this.collpasedData[e]=n,this._expandCollapseNode(n)}isCollpased(t){return!!this.collpasedData[t]}_collapseFunc(t,e=[]){const n=this.getNeighbors(t,"target"),r=this.getNeighbors(t,"source");for(let i=0;i<n.length;i++){const t=n[i],r=t.getModel();let o=this.getNeighbors(t);1===o.length&&e.push({id:r.id})}for(let i=0;i<r.length;i++){const t=r[i],n=t.getModel();let o=this.getNeighbors(t),a=this.getNeighbors(t,"source");if(1===o.length||0===a.length)e.push({id:n.id});else{const r=[];this._collapseFunc(t,r),e.push({id:n.id,children:r})}}return e}_expandCollapseNode(t,e="hide"){t&&t.forEach(t=>{"hide"===e?this.hideItem(t.id):(this.showItem(t.id),this.isCollpased(t.id)&&delete this.collpasedData[t.id]),t.children&&this._expandCollapseNode(t.children,e)})}showItem(t,e,n=this.graph){n.showItem(t,e)}hideItem(t,e,n=this.graph){n.hideItem(t,e)}show(t){t.show()}hide(t){t.hide()}changeVisibility(t,e){t.changeVisibility(e)}isVisible(t){return t.isVisible()}getModel(t){return t.getModel()}addItem(t,e,n=this.graph){n.addItem(t,e)}removeItem(t,e=this.graph){e.removeItem(t)}updateItem(t,e,n=this.graph){n.updateItem(t,e)}refreshItem(t,e=this.graph){e.refreshItem(t)}refreshPositions(t=this.graph){t.refreshPositions()}on(t,e,n=this.graph){n.on(t,e)}off(t,e,n=this.graph){n.off(t,e)}toDataURL(t,e,n=this.graph){n.toDataURL(t,e)}bindNodeDefaultDragEvent(t=this.graph){t.on("node:dragstart",(function(t){cB(t)})),t.on("node:drag",(function(t){cB(t)})),t.on("node:dragend",(function(t){t.item.get("model").fx=null,t.item.get("model").fy=null}))}stopDefaultEventPropagation(t=this.graph){t.on("click",(function(t){t.stopPropagation()})),t.on("mousedown",(function(t){t.stopPropagation()})),t.on("mouseover",(function(t){t.stopPropagation()})),t.on("mouseout",(function(t){t.stopPropagation()}))}clear(t=this.graph){t.clear()}destroy(t=this.graph){t.destroy()}}function cB(t){const e=t.item.get("model");return e.fx=t.x,e.fy=t.y,e.x=t.x,e.y=t.y,e}var hB=n("cd3f"),dB=n.n(hB);class fB{constructor(t,e="G6"){this.graph=null,this.config=dB()(t),this.graphRender=null,this.type=e,this.createGraphRender(this.type),this.config=this.graphRender._getGraphConfig(this.config),this.createGraph(this.config),this.CLASS_NAME="SuperMap.KnowledgeGraph"}static dataFromGraphMap(t,e){return wE(t,e)}static dataFromKnowledgeGraphQuery(t){return wE(t)}handleNodeStatus(t){const{expand:e,collapse:n,hidden:r}=t;this.expandNodes(e),this.collapseNodes(n),this.hideNodes(r)}expandNodes(t){t&&t.forEach(t=>{this.expandNode(t+"")})}collapseNodes(t){t&&t.forEach(t=>{this.collapseNode(t+"")})}hideNodes(t){t&&t.forEach(t=>{this.hideItem(t+"")})}createGraphRender(t){"G6"===t&&(this.graphRender=new uB)}createGraph(t){const e=this.initGraph(t);return this.graph=e,this.autoResize(),e}getGraph(){return this.graph}autoResize(){this.config&&!1!==this.config.autoResize&&this.graphRender.autoResize()}zoom(t,e,n,r){this.graphRender.zoom(t,e,n,r)}zoomTo(t,e,n,r){this.graphRender.zoomTo(t,e,n,r)}fitView(t,e,n,r){this.graphRender.fitView(t,e,n,r)}fitCenter(t,e){this.graphRender.fitCenter(t,e)}getGraphCenterPoint(){return this.graphRender.getGraphCenterPoint()}getViewPortCenterPoint(){return this.graphRender.getViewPortCenterPoint()}getZoom(){return this.graphRender.getZoom()}getMinZoom(){return this.graphRender.getMinZoom()}setMinZoom(t){this.graphRender.setMinZoom(t)}getMaxZoom(){return this.graphRender.getMaxZoom()}setMaxZoom(t){this.graphRender.setMaxZoom(t)}getWidth(){return this.graphRender.getWidth()}getHeight(){return this.graphRender.getHeight()}initGraph(t){const e=this.graphRender.initGraph(t);this.graph=e;const n=()=>{void 0!==this.config.zoom&&this.zoom(this.config.zoom),void 0!==this.config.center&&this.graphRender.setCenter({x:this.config.center[0],y:this.config.center[1]})};return this.graph.on("beforelayout",n),e}setData(t,e=this.graph){t=t||{nodes:[],edges:[]},this.config&&this.config.nodeLabelMaxWidth&&(t.nodes=this.nodeLabelOpenEllipsis(this.config.nodeLabelMaxWidth,t.nodes)),this.graphRender.setData(t,e),this.render(e),this.data=t}render(t=this.graph){t&&this.graphRender.render(t)}updateGraph(t,e=this.graph){e&&this.graphRender.updateGraph(t,e)}refresh(){return this.graphRender.refresh()}changeSize(t,e){return this.graphRender.changeSize(t,e)}resize(t,e){this.graphRender.changeSize(t,e),this.graphRender.refresh()}getContainer(){return this.graphRender.getContainer()}getCanvas(){return this.graphRender.getCanvas()}getNodes(){return this.graphRender.getNodes()}getEdges(){return this.graphRender.getEdges()}getNeighbors(t,e){return this.graphRender.getNeighbors(t,e)}findById(t){return this.graphRender.findById(t)}find(t,e){return this.graphRender.find(t,e)}findAll(t,e){return this.graphRender.findAll(t,e)}getEdgesByNode(t){return this.graphRender.getEdgesByNode(t)}getInEdges(t){return this.graphRender.getInEdges(t)}getOutEdges(t){return this.graphRender.getOutEdges(t)}getSourceByEdge(t){return this.graphRender.getSourceByEdge(t)}getTargetByEdge(t){return this.graphRender.getTargetByEdge(t)}expandNode(t){const e=this.findById(t);e&&this.graphRender.expandNode(e)}collapseNode(t){const e=this.findById(t);e&&this.graphRender.collapseNode(e)}showItem(t,e){this.graphRender.showItem(t,e)}hideItem(t,e){this.graphRender.hideItem(t,e)}show(t){this.graphRender.show(t)}hide(t){this.graphRender.hide(t)}changeVisibility(t,e){this.graphRender.changeVisibility(t,e)}isVisible(t){return this.graphRender.isVisible(t)}getModel(t){return this.graphRender.getModel(t)}addItem(t,e){return this.graphRender.addItem(t,e)}removeItem(t){return this.graphRender.removeItem(t)}updateItem(t,e){return this.graphRender.updateItem(t,e)}refreshItem(t){return this.graphRender.refreshItem(t)}refreshPositions(){return this.graphRender.refreshPositions()}on(t,e){this.graphRender.on(t,e)}off(t,e){this.graphRender.off(t,e)}toDataURL(t,e){this.graphRender.toDataURL(t,e)}nodeLabelOpenEllipsis(t,e){return e?t?e.map(e=>{const n=e.labelCfg&&e.labelCfg.fontSize||this.defaultNode&&this.defaultNode.labelCfg&&this.defaultNode.labelCfg.fontSize||14;return e.label=pB(e.label,t,n),e}):e:[]}clear(t=this.graph){t&&t.clear()}destroy(t=this.graph){t&&t.destroy()}}function pB(t,e,n){const r=t=>{let e=0;for(let n=0;n<t.length;n++)t.charCodeAt(n)>0&&t.charCodeAt(n)<128?e++:e+=2;return e},i=1*n;e*=1.6;const o=r(t)*i,a="…";if(o>e){const n=Math.floor((e-20)/i),r=t.substring(0,n);return(t.substring(n).length+a.length)*i>e?r+"\n"+t.substring(n,n+n-2)+a:0==t.substring(n).length?r:r+"\n"+t.substring(n)}return t}g.Lang=Sl,g.i18n=g.Lang.i18n,g.Util={...g.Util,...Wt},g.Browser=Gt,g.INCHES_PER_UNIT=Yt,g.METERS_PER_INCH=Xt,g.DOTS_PER_INCH=Ht,g.IS_GECKO=Vt,g.setCORS=Re,g.isCORS=De,g.setRequestTimeout=Fe,g.getRequestTimeout=je,g.FetchRequest=Be,g.inherit=Rt,g.mixin=Dt,g.String=Ft,g.Number=jt,g.Function=Bt,g.Array=zt,g.Date=he,g.Event=de,g.Bounds=Qt,g.Credential=ce,g.Events=fe,g.Feature=pe,g.Geometry=Ut,g.Pixel=Nt,g.Size=Lt,g.Feature.Vector=me,g.Geometry.Collection=$t,g.Geometry.Curve=ee,g.Geometry.GeoText=ie,g.Geometry.LinearRing=oe,g.Geometry.LineString=re,g.Geometry.MultiLineString=ae,g.Geometry.MultiPoint=te,g.Geometry.MultiPolygon=se,g.Geometry.Point=ne,g.Geometry.Polygon=le,g.Geometry.Rectangle=ue,g.Components.Chart=lE,g.Components.ChartViewModel=sE,g.Components.MessageBox=bl,g.Components.AttributesPopContainer=pE,g.Components.CityTabsPage=mE,g.Components.CommonContainer=cE,g.Components.DropDownBox=dE,g.Components.IndexTabsPageContainer=gE,g.Components.NavTabsPage=yE,g.Components.PaginationContainer=vE,g.Components.PopContainer=fE,g.Components.Select=hE,g.Components.TemplateBase=uE,g.Components.FileReaderUtil=oE,g.TimeControlBase=Te,g.TimeFlowControl=Ae,g.Format=g.Format||ye,g.Format.GeoJSON=Ee,g.Format.JSON=ve,g.Format.WKT=Ce,g.iManager=qe,g.iManagerCreateNodeParam=Ge,g.iManagerServiceBase=Ue,g.iPortal=Je,g.iPortalAddDataParam=$e,g.iPortalAddResourceParam=Ke,g.iPortalDataConnectionInfoParam=nn,g.iPortalDataMetaInfoParam=tn,g.iPortalDataStoreInfoParam=en,g.iPortalQueryParam=He,g.iPortalQueryResult=We,g.iPortalRegisterServiceParam=Qe,g.iPortalResource=Ye,g.iPortalServiceBase=Ve,g.iPortalShareEntity=Ze,g.iPortalShareParam=Xe,g.iPortalUser=rn,g.AddressMatchService=ln,g.AggregationParameter=un,g.AreaSolarRadiationParameters=dn,g.AreaSolarRadiationService=pn,g.BucketAggParameter=cn,g.BufferAnalystParameters=yn,g.BufferAnalystService=wn,g.BufferDistance=gn,g.BuffersAnalystJobsParameter=Mn,g.BuffersAnalystJobsService=An,g.BufferSetting=mn,g.BurstPipelineAnalystParameters=On,g.BurstPipelineAnalystService=In,g.ChartFeatureInfoSpecsService=Pn,g.ChartQueryFilterParameter=Ln,g.ChartQueryParameters=Nn,g.ChartQueryService=Dn,g.ClipParameter=Fn,g.ColorDictionary=jn,g.CommonServiceBase=on,g.ComputeWeightMatrixParameters=Un,g.ComputeWeightMatrixService=Gn,g.CreateDatasetParameters=ia,g.DataFlowService=qn,g.DataReturnOption=vn,g.DatasetBufferAnalystParameters=_n,g.DatasetInfo=Vn,g.DatasetOverlayAnalystParameters=Wn,g.DatasetService=zr,g.DatasetSurfaceAnalystParameters=Jn,g.DatasetThiessenAnalystParameters=Kn,g.DatasourceConnectionInfo=Sn,g.DatasourceService=Qn,g.DensityAnalystService=tr,g.DensityKernelAnalystParameters=$n,g.EditFeaturesParameters=er,g.EditFeaturesService=nr,g.FacilityAnalyst3DParameters=rr,g.FacilityAnalystSinks3DParameters=ir,g.FacilityAnalystSinks3DService=or,g.FacilityAnalystSources3DParameters=ar,g.FacilityAnalystSources3DService=sr,g.FacilityAnalystStreamParameters=lr,g.FacilityAnalystStreamService=ur,g.FacilityAnalystTracedown3DParameters=cr,g.FacilityAnalystTracedown3DService=hr,g.FacilityAnalystTraceup3DParameters=dr,g.FacilityAnalystTraceup3DService=fr,g.FacilityAnalystUpstream3DParameters=pr,g.FacilityAnalystUpstream3DService=gr,g.FieldParameters=mr,g.FieldsFilter=Aa,g.FieldStatisticService=vr,g.FieldStatisticsParameters=yr,g.FilterParameter=bn,g.FindClosestFacilitiesParameters=br,g.FindClosestFacilitiesService=_r,g.FindLocationParameters=xr,g.FindLocationService=wr,g.FindMTSPPathsParameters=Sr,g.FindMTSPPathsService=Er,g.FindPathParameters=Cr,g.FindPathService=Mr,g.FindServiceAreasParameters=Tr,g.FindServiceAreasService=Ar,g.FindTSPPathsParameters=Or,g.FindTSPPathsService=kr,g.GenerateSpatialDataParameters=Ir,g.GenerateSpatialDataService=Pr,g.GeoCodingParameter=an,g.GeoDecodingParameter=sn,g.GeoHashGridAggParameter=Lr,g.GeometryBatchAnalystService=Xo,g.GeometryBufferAnalystParameters=xn,g.GeometryOverlayAnalystParameters=Nr,g.GeometrySurfaceAnalystParameters=Rr,g.GeometryThiessenAnalystParameters=Dr,g.GeoprocessingService=Fr,g.GeoRelationAnalystParameters=jr,g.GeoRelationAnalystService=Br,g.GetFeaturesByBoundsParameters=Gr,g.GetFeaturesByBoundsService=Vr,g.GetFeaturesByBufferParameters=Hr,g.GetFeaturesByBufferService=Wr,g.GetFeaturesByGeometryParameters=Yr,g.GetFeaturesByGeometryService=Xr,g.GetFeaturesByIDsParameters=Jr,g.GetFeaturesByIDsService=Zr,g.GetFeaturesBySQLParameters=Kr,g.GetFeaturesBySQLService=Qr,g.GetFeaturesParametersBase=Ur,g.GetFeaturesServiceBase=qr,g.GetFieldsService=$r,g.GetGridCellInfosParameters=ti,g.GetGridCellInfosService=ei,g.GetLayersInfoService=Ii,g.Grid=Ai,g.HillshadeParameter=fa,g.Image=Oi,g.ImageCollectionService=Ma,g.ImageGFAspect=Na,g.ImageGFHillShade=La,g.ImageGFOrtho=Ra,g.ImageGFSlope=Da,g.ImageRenderingRule=Pa,g.ImageSearchParameter=ka,g.ImageService=Ta,g.ImageStretchOption=Ia,g.InterpolationAnalystParameters=Pi,g.InterpolationAnalystService=Fi,g.InterpolationDensityAnalystParameters=Ni,g.InterpolationIDWAnalystParameters=Ri,g.InterpolationKrigingAnalystParameters=Di,g.InterpolationRBFAnalystParameters=Li,g.JoinItem=Ci,g.KernelDensityJobParameter=ji,g.KernelDensityJobsService=Bi,g.LabelImageCell=Ui,g.LabelMatrixCell=zi,g.LabelMixedTextStyle=si,g.LabelSymbolCell=Gi,g.LabelThemeCell=qi,g.LayerStatus=Vi,g.LinkItem=Hi,g.MappingParameters=Cn,g.MapService=Wi,g.MathExpressionAnalysisParameters=Yi,g.MathExpressionAnalysisService=Xi,g.MeasureParameters=Ji,g.MeasureService=Zi,g.MetricsAggParameter=hn,g.NDVIParameter=da,g.NetworkAnalystServiceBase=kn,g.OutputSetting=En,g.OverlapDisplayedOptions=Ki,g.OverlayAnalystParameters=Hn,g.OverlayAnalystService=Qi,g.OverlayGeoJobParameter=$i,g.OverlayGeoJobsService=to,g.PointWithMeasure=xe,g.ProcessingServiceBase=Tn,g.QueryByBoundsParameters=eo,g.QueryByBoundsService=ro,g.QueryByDistanceParameters=io,g.QueryByDistanceService=oo,g.QueryByGeometryParameters=ao,g.QueryByGeometryService=so,g.QueryBySQLParameters=lo,g.QueryBySQLService=uo,g.QueryParameters=Rn,g.QueryService=co,g.RasterFunctionParameter=ha,g.Route=we,g.RouteCalculateMeasureParameters=ho,g.RouteCalculateMeasureService=fo,g.RouteLocatorParameters=po,g.RouteLocatorService=go,g.ServerColor=be,g.ServerFeature=mo,g.ServerGeometry=Se,g.ServerStyle=_e,g.ServerTextStyle=ri,g.ServerTheme=Ti,g.SetDatasourceParameters=yo,g.SetLayerInfoParameters=vo,g.SetLayerInfoService=bo,g.SetLayersInfoParameters=_o,g.SetLayersInfoService=xo,g.SetLayerStatusParameters=wo,g.SetLayerStatusService=So,g.SingleObjectQueryJobsParameter=Eo,g.SingleObjectQueryJobsService=Co,g.Sortby=Oa,g.SpatialAnalystBase=fn,g.StopQueryParameters=Mo,g.StopQueryService=To,g.SummaryAttributesJobsParameter=Ao,g.SummaryAttributesJobsService=Oo,g.SummaryMeshJobParameter=ko,g.SummaryMeshJobsService=Io,g.SummaryRegionJobParameter=Po,g.SummaryRegionJobsService=Lo,g.SupplyCenter=No,g.SurfaceAnalystParameters=Xn,g.SurfaceAnalystParametersSetting=Yn,g.SurfaceAnalystService=Ro,g.TerrainCurvatureCalculationParameters=Do,g.TerrainCurvatureCalculationService=Fo,g.Theme=ni,g.ThemeDotDensity=vi,g.ThemeFlow=jo,g.ThemeGraduatedSymbol=_i,g.ThemeGraduatedSymbolStyle=bi,g.ThemeGraph=yi,g.ThemeGraphAxes=fi,g.ThemeGraphItem=mi,g.ThemeGraphSize=pi,g.ThemeGraphText=gi,g.ThemeGridRange=zo,g.ThemeGridRangeItem=Bo,g.ThemeGridUnique=Go,g.ThemeGridUniqueItem=Uo,g.ThemeLabel=hi,g.ThemeLabelAlongLine=ui,g.ThemeLabelBackground=ci,g.ThemeLabelItem=ii,g.ThemeLabelText=li,g.ThemeLabelUniqueItem=qo,g.ThemeMemoryData=Vo,g.ThemeOffset=ai,g.ThemeParameters=Ho,g.ThemeRange=wi,g.ThemeRangeItem=xi,g.ThemeService=Wo,g.ThemeUnique=di,g.ThemeUniqueItem=oi,g.ThiessenAnalystParameters=Zn,g.ThiessenAnalystService=Yo,g.TilesetsService=Jo,g.TopologyValidatorJobsParameter=Zo,g.TopologyValidatorJobsService=Ko,g.TransferLine=Qo,g.TransferPathParameters=$o,g.TransferPathService=ta,g.TransferSolutionParameters=ea,g.TransferSolutionService=na,g.TransportationAnalystParameter=zn,g.TransportationAnalystResultSetting=Bn,g.UGCLayer=Si,g.UGCMapLayer=Ei,g.UGCSubLayer=Mi,g.UpdateDatasetParameters=la,g.UpdateEdgeWeightParameters=ra,g.UpdateEdgeWeightService=oa,g.UpdateTurnNodeWeightParameters=aa,g.UpdateTurnNodeWeightService=sa,g.Vector=ki,g.VectorClipJobsParameter=ua,g.VectorClipJobsService=ca,g.WebPrintingJobContent=xa,g.WebPrintingJobCustomItems=pa,g.WebPrintingJobExportOptions=Sa,g.WebPrintingJobImage=ga,g.WebPrintingJobLayers=ma,g.WebPrintingJobLayoutOptions=wa,g.WebPrintingJobLegendOptions=ya,g.WebPrintingJobLittleMapOptions=va,g.WebPrintingJobNorthArrowOptions=ba,g.WebPrintingJobParameters=Ea,g.WebPrintingJobScaleBarOptions=_a,g.WebPrintingService=Ca,g.Online=qa,g.OnlineData=Ga,g.OnlineQueryDatasParameter=Va,g.ServiceStatus=ja,g.DataItemType=At,g.DataItemOrderBy=Ba,g.FilterField=za,g.OnlineServiceBase=Ua,g.Feature=g.Feature||{},g.Feature.Theme=Ws,g.Feature.Theme.Bar=Xs,g.Feature.Theme.Bar3D=Js,g.Feature.Theme.Circle=Ks,g.Feature.Theme.Graph=Ys,g.Feature.Theme.Line=Qs,g.Feature.Theme.Pie=$s,g.Feature.Theme.Point=tl,g.Feature.Theme.RankSymbol=Zs,g.Feature.Theme.Ring=el,g.Feature.Theme.ThemeVector=nl,g.Feature.ShapeParameters=fs,g.Feature.ShapeParameters.Circle=xs,g.Feature.ShapeParameters.Image=_s,g.Feature.ShapeParameters.Label=bs,g.Feature.ShapeParameters.Line=gs,g.Feature.ShapeParameters.Point=ps,g.Feature.ShapeParameters.Polygon=ms,g.Feature.ShapeParameters.Rectangle=ys,g.Feature.ShapeParameters.Sector=vs,g.Feature.ShapeFactory=Hs,g.LevelRenderer=fl,g.KeyServiceParameter=Ha,g.SecurityManager=ze,g.ServerInfo=Wa,g.TokenServiceParameter=Ya,g.ThemeStyle=ds,g.CartoCSS=cs,g.ElasticSearch=Za,g.ArrayStatistic=es,g.ColorsPickerUtil=ts,g.DataFormat=m,g.ServerType=y,g.GeometryType=v,g.QueryOption=b,g.JoinType=_,g.SpatialQueryMode=x,g.SpatialRelationType=w,g.MeasureMode=S,g.Unit=E,g.BufferRadiusUnit=C,g.EngineType=M,g.ThemeGraphTextFormat=T,g.ThemeGraphType=A,g.GraphAxesTextDisplayMode=O,g.GraduatedMode=k,g.RangeMode=I,g.ThemeType=P,g.ColorGradientType=L,g.TextAlignment=N,g.FillGradientMode=R,g.AlongLineDirection=D,g.LabelBackShape=F,g.LabelOverLengthMode=j,g.DirectionType=B,g.OverlayOperationType=V,g.OutputType=H,g.SideType=z,g.SupplyCenterType=U,g.TurnType=G,g.BufferEndType=q,g.SmoothMethod=W,g.SurfaceAnalystMethod=Y,g.DataReturnMode=X,g.EditType=J,g.TransferTactic=Z,g.TransferPreference=K,g.GridType=Q,g.ColorSpaceType=tt,g.LayerType=et,g.UGCLayerType=nt,g.StatisticMode=rt,g.PixelFormat=it,g.SearchMode=ot,g.InterpolationAlgorithmType=at,g.VariogramMode=st,g.Exponent=lt,g.ClientType=ut,g.ChartType=ct,g.ClipAnalystMode=ht,g.AnalystAreaUnit=dt,g.AnalystSizeUnit=ft,g.StatisticAnalystMode=pt,g.SummaryType=gt,g.TopologyValidatorRule=mt,g.BucketAggType=yt,g.MetricsAggType=vt,g.GetFeatureMode=bt,g.RasterFunctionType=_t,g.ResourceType=xt,g.OrderBy=wt,g.OrderType=St,g.SearchType=Et,g.AggregationTypes=Ct,g.PermissionType=Mt,g.EntityType=Tt,g.WebExportFormatType=Ot,g.WebScaleOrientationType=kt,g.WebScaleType=It,g.WebScaleUnit=Pt,g.KnowledgeGraph=fB;var gB=n("e11e"),mB=n.n(gB),yB=function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]},vB=1,bB=2,_B=3,xB=4,wB=5,SB=6378137,EB=6356752.314,CB=.0066943799901413165,MB=484813681109536e-20,TB=Math.PI/2,AB=.16666666666666666,OB=.04722222222222222,kB=.022156084656084655,IB=1e-10,PB=.017453292519943295,LB=57.29577951308232,NB=Math.PI/4,RB=2*Math.PI,DB=3.14159265359,FB={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},jB={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},BB=/[\s_\-\/\(\)]/g;function zB(t,e){if(t[e])return t[e];var n,r,i=Object.keys(t),o=e.toLowerCase().replace(BB,""),a=-1;while(++a<i.length)if(n=i[a],r=n.toLowerCase().replace(BB,""),r===o)return t[n]}var UB=function(t){var e,n,r,i={},o=t.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var n=e.split("=");return n.push(!0),t[n[0].toLowerCase()]=n[1],t}),{}),a={proj:"projName",datum:"datumCode",rf:function(t){i.rf=parseFloat(t)},lat_0:function(t){i.lat0=t*PB},lat_1:function(t){i.lat1=t*PB},lat_2:function(t){i.lat2=t*PB},lat_ts:function(t){i.lat_ts=t*PB},lon_0:function(t){i.long0=t*PB},lon_1:function(t){i.long1=t*PB},lon_2:function(t){i.long2=t*PB},alpha:function(t){i.alpha=parseFloat(t)*PB},gamma:function(t){i.rectified_grid_angle=parseFloat(t)},lonc:function(t){i.longc=t*PB},x_0:function(t){i.x0=parseFloat(t)},y_0:function(t){i.y0=parseFloat(t)},k_0:function(t){i.k0=parseFloat(t)},k:function(t){i.k0=parseFloat(t)},a:function(t){i.a=parseFloat(t)},b:function(t){i.b=parseFloat(t)},r_a:function(){i.R_A=!0},zone:function(t){i.zone=parseInt(t,10)},south:function(){i.utmSouth=!0},towgs84:function(t){i.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){i.to_meter=parseFloat(t)},units:function(t){i.units=t;var e=zB(jB,t);e&&(i.to_meter=e.to_meter)},from_greenwich:function(t){i.from_greenwich=t*PB},pm:function(t){var e=zB(FB,t);i.from_greenwich=(e||parseFloat(t))*PB},nadgrids:function(t){"@null"===t?i.datumCode="none":i.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(i.axis=t)},approx:function(){i.approx=!0}};for(e in o)n=o[e],e in a?(r=a[e],"function"===typeof r?r(n):i[r]=n):i[e]=n;return"string"===typeof i.datumCode&&"WGS84"!==i.datumCode&&(i.datumCode=i.datumCode.toLowerCase()),i},GB=ez,qB=1,VB=2,HB=3,WB=4,YB=5,XB=-1,JB=/\s/,ZB=/[A-Za-z]/,KB=/[A-Za-z84_]/,QB=/[,\]]/,$B=/[\d\.E\-\+]/;function tz(t){if("string"!==typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=qB}function ez(t){var e=new tz(t);return e.output()}function nz(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var r=e?{}:t,i=n.reduce((function(t,e){return rz(e,t),t}),r);e&&(t[e]=i)}function rz(t,e){if(Array.isArray(t)){var n=t.shift();if("PARAMETER"===n&&(n=t.shift()),1===t.length)return Array.isArray(t[0])?(e[n]={},void rz(t[0],e[n])):void(e[n]=t[0]);if(t.length)if("TOWGS84"!==n){if("AXIS"===n)return n in e||(e[n]=[]),void e[n].push(t);var r;switch(Array.isArray(n)||(e[n]={}),n){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[n]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&rz(t[2],e[n]));case"SPHEROID":case"ELLIPSOID":return e[n]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&rz(t[3],e[n]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void nz(e,n,t);default:r=-1;while(++r<t.length)if(!Array.isArray(t[r]))return rz(t,e[n]);return nz(e,n,t)}}else e[n]=t;else e[n]=!0}else e[t]=!0}tz.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==WB)while(JB.test(t)){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case qB:return this.neutral(t);case VB:return this.keyword(t);case WB:return this.quoted(t);case YB:return this.afterquote(t);case HB:return this.number(t);case XB:return}},tz.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=WB);if(QB.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},tz.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=qB)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=qB,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=XB))):void 0},tz.prototype.number=function(t){if(!$B.test(t)){if(QB.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},tz.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=YB},tz.prototype.keyword=function(t){if(KB.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=qB)}if(!QB.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},tz.prototype.neutral=function(t){if(ZB.test(t))return this.word=t,void(this.state=VB);if('"'===t)return this.word="",void(this.state=WB);if($B.test(t))return this.word=t,void(this.state=HB);if(!QB.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},tz.prototype.output=function(){while(this.place<this.text.length)this.readCharicter();if(this.state===XB)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var iz=.017453292519943295;function oz(t,e){var n=e[0],r=e[1];!(n in t)&&r in t&&(t[n]=t[r],3===e.length&&(t[n]=e[2](t[n])))}function az(t){return t*iz}function sz(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"===typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",n=0,r=t.AXIS.length;n<r;++n){var i=[t.AXIS[n][0].toLowerCase(),t.AXIS[n][1].toLowerCase()];-1!==i[0].indexOf("north")||("y"===i[0]||"lat"===i[0])&&"north"===i[1]?e+="n":-1!==i[0].indexOf("south")||("y"===i[0]||"lat"===i[0])&&"south"===i[1]?e+="s":-1!==i[0].indexOf("east")||("x"===i[0]||"lon"===i[0])&&"east"===i[1]?e+="e":-1===i[0].indexOf("west")&&("x"!==i[0]&&"lon"!==i[0]||"west"!==i[1])||(e+="w")}2===e.length&&(e+="u"),3===e.length&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var o=t.GEOGCS;function a(e){var n=t.to_meter||1;return e*n}"GEOGCS"===t.type&&(o=t),o&&(o.DATUM?t.datumCode=o.DATUM.name.toLowerCase():t.datumCode=o.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(t.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=o.DATUM.SPHEROID.a,t.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(t.datum_params=o.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a);var s=function(e){return oz(t,e)},l=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",az],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",az],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",az],["lat0","latitude_of_origin",az],["lat0","standard_parallel_1",az],["lat1","standard_parallel_1",az],["lat2","standard_parallel_2",az],["azimuth","Azimuth"],["alpha","azimuth",az],["srsCode","name"]];l.forEach(s),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName?!t.lat_ts&&t.lat0&&"Polar_Stereographic"===t.projName&&(t.lat_ts=t.lat0,t.lat0=az(t.lat0>0?90:-90)):(t.lat0=az(t.lat1>0?90:-90),t.lat_ts=t.lat1)}var lz=function(t){var e=GB(t),n=e.shift(),r=e.shift();e.unshift(["name",r]),e.unshift(["type",n]);var i={};return rz(e,i),sz(i),i};function uz(t){var e=this;if(2===arguments.length){var n=arguments[1];"string"===typeof n?"+"===n.charAt(0)?uz[t]=UB(arguments[1]):uz[t]=lz(arguments[1]):uz[t]=n}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?uz.apply(e,t):uz(t)}));if("string"===typeof t){if(t in uz)return uz[t]}else"EPSG"in t?uz["EPSG:"+t.EPSG]=t:"ESRI"in t?uz["ESRI:"+t.ESRI]=t:"IAU2000"in t?uz["IAU2000:"+t.IAU2000]=t:console.log(t);return}}yB(uz);var cz=uz;function hz(t){return"string"===typeof t}function dz(t){return t in cz}var fz=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function pz(t){return fz.some((function(e){return t.indexOf(e)>-1}))}var gz=["3857","900913","3785","102113"];function mz(t){var e=zB(t,"authority");if(e){var n=zB(e,"epsg");return n&&gz.indexOf(n)>-1}}function yz(t){var e=zB(t,"extension");if(e)return zB(e,"proj4")}function vz(t){return"+"===t[0]}function bz(t){if(!hz(t))return t;if(dz(t))return cz[t];if(pz(t)){var e=lz(t);if(mz(e))return cz["EPSG:3857"];var n=yz(e);return n?UB(n):e}return vz(t)?UB(t):void 0}var _z=bz,xz=function(t,e){var n,r;if(t=t||{},!e)return t;for(r in e)n=e[r],void 0!==n&&(t[r]=n);return t},wz=function(t,e,n){var r=t*e;return n/Math.sqrt(1-r*r)},Sz=function(t){return t<0?-1:1},Ez=function(t){return Math.abs(t)<=DB?t:t-Sz(t)*RB},Cz=function(t,e,n){var r=t*n,i=.5*t;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(TB-e))/r},Mz=function(t,e){for(var n,r,i=.5*t,o=TB-2*Math.atan(e),a=0;a<=15;a++)if(n=t*Math.sin(o),r=TB-2*Math.atan(e*Math.pow((1-n)/(1+n),i))-o,o+=r,Math.abs(r)<=1e-10)return o;return-9999};function Tz(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=wz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function Az(t){var e,n,r=t.x,i=t.y;if(i*LB>90&&i*LB<-90&&r*LB>180&&r*LB<-180)return null;if(Math.abs(Math.abs(i)-TB)<=IB)return null;if(this.sphere)e=this.x0+this.a*this.k0*Ez(r-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(NB+.5*i));else{var o=Math.sin(i),a=Cz(this.e,i,o);e=this.x0+this.a*this.k0*Ez(r-this.long0),n=this.y0-this.a*this.k0*Math.log(a)}return t.x=e,t.y=n,t}function Oz(t){var e,n,r=t.x-this.x0,i=t.y-this.y0;if(this.sphere)n=TB-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var o=Math.exp(-i/(this.a*this.k0));if(n=Mz(this.e,o),-9999===n)return null}return e=Ez(this.long0+r/(this.a*this.k0)),t.x=e,t.y=n,t}var kz=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"],Iz={init:Tz,forward:Az,inverse:Oz,names:kz};function Pz(){}function Lz(t){return t}var Nz=["longlat","identity"],Rz={init:Pz,forward:Lz,inverse:Lz,names:Nz},Dz=[Iz,Rz],Fz={},jz=[];function Bz(t,e){var n=jz.length;return t.names?(jz[n]=t,t.names.forEach((function(t){Fz[t.toLowerCase()]=n})),this):(console.log(e),!0)}function zz(t){if(!t)return!1;var e=t.toLowerCase();return"undefined"!==typeof Fz[e]&&jz[Fz[e]]?jz[Fz[e]]:void 0}function Uz(){Dz.forEach(Bz)}var Gz={start:Uz,add:Bz,get:zz},qz={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},Vz=qz.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};function Hz(t,e,n,r){var i=t*t,o=e*e,a=(i-o)/i,s=0;r?(t*=1-a*(AB+a*(OB+a*kB)),i=t*t,a=0):s=Math.sqrt(a);var l=(i-o)/o;return{es:a,e:s,ep2:l}}function Wz(t,e,n,r,i){if(!t){var o=zB(qz,r);o||(o=Vz),t=o.a,e=o.b,n=o.rf}return n&&!e&&(e=(1-1/n)*t),(0===n||Math.abs(t-e)<IB)&&(i=!0,e=t),{a:t,b:e,rf:n,sphere:i}}qz.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var Yz={};function Xz(t,e,n,r,i,o,a){var s={};return s.datum_type=void 0===t||"none"===t?wB:xB,e&&(s.datum_params=e.map(parseFloat),0===s.datum_params[0]&&0===s.datum_params[1]&&0===s.datum_params[2]||(s.datum_type=vB),s.datum_params.length>3&&(0===s.datum_params[3]&&0===s.datum_params[4]&&0===s.datum_params[5]&&0===s.datum_params[6]||(s.datum_type=bB,s.datum_params[3]*=MB,s.datum_params[4]*=MB,s.datum_params[5]*=MB,s.datum_params[6]=s.datum_params[6]/1e6+1))),a&&(s.datum_type=_B,s.grids=a),s.a=n,s.b=r,s.es=i,s.ep2=o,s}Yz.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},Yz.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},Yz.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},Yz.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},Yz.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},Yz.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},Yz.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},Yz.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},Yz.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},Yz.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},Yz.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},Yz.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},Yz.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},Yz.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},Yz.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},Yz.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},Yz.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};var Jz=Xz,Zz={};function Kz(t,e){var n=new DataView(e),r=eU(n),i=nU(n,r);i.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var o=iU(n,i,r),a={header:i,subgrids:o};return Zz[t]=a,a}function Qz(t){if(void 0===t)return null;var e=t.split(",");return e.map($z)}function $z(t){if(0===t.length)return null;var e="@"===t[0];return e&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:Zz[t]||null,isNull:!1}}function tU(t){return t/3600*Math.PI/180}function eU(t){var e=t.getInt32(8,!1);return 11!==e&&(e=t.getInt32(8,!0),11!==e&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function nU(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:rU(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}function rU(t,e,n){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,n)))}function iU(t,e,n){for(var r=176,i=[],o=0;o<e.nSubgrids;o++){var a=aU(t,r,n),s=sU(t,r,a,n),l=Math.round(1+(a.upperLongitude-a.lowerLongitude)/a.longitudeInterval),u=Math.round(1+(a.upperLatitude-a.lowerLatitude)/a.latitudeInterval);i.push({ll:[tU(a.lowerLongitude),tU(a.lowerLatitude)],del:[tU(a.longitudeInterval),tU(a.latitudeInterval)],lim:[l,u],count:a.gridNodeCount,cvs:oU(s)})}return i}function oU(t){return t.map((function(t){return[tU(t.longitudeShift),tU(t.latitudeShift)]}))}function aU(t,e,n){return{name:rU(t,e+8,e+16).trim(),parent:rU(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,n),upperLatitude:t.getFloat64(e+88,n),lowerLongitude:t.getFloat64(e+104,n),upperLongitude:t.getFloat64(e+120,n),latitudeInterval:t.getFloat64(e+136,n),longitudeInterval:t.getFloat64(e+152,n),gridNodeCount:t.getInt32(e+168,n)}}function sU(t,e,n,r){for(var i=e+176,o=16,a=[],s=0;s<n.gridNodeCount;s++){var l={latitudeShift:t.getFloat32(i+s*o,r),longitudeShift:t.getFloat32(i+s*o+4,r),latitudeAccuracy:t.getFloat32(i+s*o+8,r),longitudeAccuracy:t.getFloat32(i+s*o+12,r)};a.push(l)}return a}function lU(t,e){if(!(this instanceof lU))return new lU(t);e=e||function(t){if(t)throw t};var n=_z(t);if("object"===typeof n){var r=lU.projections.get(n.projName);if(r){if(n.datumCode&&"none"!==n.datumCode){var i=zB(Yz,n.datumCode);i&&(n.datum_params=n.datum_params||(i.towgs84?i.towgs84.split(","):null),n.ellps=i.ellipse,n.datumName=i.datumName?i.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var o=Wz(n.a,n.b,n.rf,n.ellps,n.sphere),a=Hz(o.a,o.b,o.rf,n.R_A),s=Qz(n.nadgrids),l=n.datum||Jz(n.datumCode,n.datum_params,o.a,o.b,a.es,a.ep2,s);xz(this,n),xz(this,r),this.a=o.a,this.b=o.b,this.rf=o.rf,this.sphere=o.sphere,this.es=a.es,this.e=a.e,this.ep2=a.ep2,this.datum=l,this.init(),e(null,this)}else e(t)}else e(t)}lU.projections=Gz,lU.projections.start();var uU=lU;function cU(t,e){return t.datum_type===e.datum_type&&(!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(t.datum_type===vB?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type!==bB||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]))}function hU(t,e,n){var r,i,o,a,s=t.x,l=t.y,u=t.z?t.z:0;if(l<-TB&&l>-1.001*TB)l=-TB;else if(l>TB&&l<1.001*TB)l=TB;else{if(l<-TB)return{x:-1/0,y:-1/0,z:t.z};if(l>TB)return{x:1/0,y:1/0,z:t.z}}return s>Math.PI&&(s-=2*Math.PI),i=Math.sin(l),a=Math.cos(l),o=i*i,r=n/Math.sqrt(1-e*o),{x:(r+u)*a*Math.cos(s),y:(r+u)*a*Math.sin(s),z:(r*(1-e)+u)*i}}function dU(t,e,n,r){var i,o,a,s,l,u,c,h,d,f,p,g,m,y,v,b,_=1e-12,x=_*_,w=30,S=t.x,E=t.y,C=t.z?t.z:0;if(i=Math.sqrt(S*S+E*E),o=Math.sqrt(S*S+E*E+C*C),i/n<_){if(y=0,o/n<_)return v=TB,b=-r,{x:t.x,y:t.y,z:t.z}}else y=Math.atan2(E,S);a=C/o,s=i/o,l=1/Math.sqrt(1-e*(2-e)*s*s),h=s*(1-e)*l,d=a*l,m=0;do{m++,c=n/Math.sqrt(1-e*d*d),b=i*h+C*d-c*(1-e*d*d),u=e*c/(c+b),l=1/Math.sqrt(1-u*(2-u)*s*s),f=s*(1-u)*l,p=a*l,g=p*h-f*d,h=f,d=p}while(g*g>x&&m<w);return v=Math.atan(p/Math.abs(f)),{x:y,y:v,z:b}}function fU(t,e,n){if(e===vB)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(e===bB){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],u=n[6];return{x:u*(t.x-l*t.y+s*t.z)+r,y:u*(l*t.x+t.y-a*t.z)+i,z:u*(-s*t.x+a*t.y+t.z)+o}}}function pU(t,e,n){if(e===vB)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(e===bB){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],u=n[6],c=(t.x-r)/u,h=(t.y-i)/u,d=(t.z-o)/u;return{x:c+l*h-s*d,y:-l*c+h+a*d,z:s*c-a*h+d}}}function gU(t){return t===vB||t===bB}var mU=function(t,e,n){if(cU(t,e))return n;if(t.datum_type===wB||e.datum_type===wB)return n;var r=t.a,i=t.es;if(t.datum_type===_B){var o=yU(t,!1,n);if(0!==o)return;r=SB,i=CB}var a=e.a,s=e.b,l=e.es;if(e.datum_type===_B&&(a=SB,s=EB,l=CB),i===l&&r===a&&!gU(t.datum_type)&&!gU(e.datum_type))return n;if(n=hU(n,i,r),gU(t.datum_type)&&(n=fU(n,t.datum_type,t.datum_params)),gU(e.datum_type)&&(n=pU(n,e.datum_type,e.datum_params)),n=dU(n,l,a,s),e.datum_type===_B){var u=yU(e,!0,n);if(0!==u)return}return n};function yU(t,e,n){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;for(var r={x:-n.x,y:n.y},i={x:Number.NaN,y:Number.NaN},o=[],a=0;a<t.grids.length;a++){var s=t.grids[a];if(o.push(s.name),s.isNull){i=r;break}if(s.mandatory,null!==s.grid){var l=s.grid.subgrids[0],u=(Math.abs(l.del[1])+Math.abs(l.del[0]))/1e4,c=l.ll[0]-u,h=l.ll[1]-u,d=l.ll[0]+(l.lim[0]-1)*l.del[0]+u,f=l.ll[1]+(l.lim[1]-1)*l.del[1]+u;if(!(h>r.y||c>r.x||f<r.y||d<r.x)&&(i=vU(r,e,l),!isNaN(i.x)))break}else if(s.mandatory)return console.log("Unable to find mandatory grid '"+s.name+"'"),-1}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*LB+" "+r.y*LB+" tried: '"+o+"'"),-1):(n.x=-i.x,n.y=i.y,0)}function vU(t,e,n){var r={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return r;var i={x:t.x,y:t.y};i.x-=n.ll[0],i.y-=n.ll[1],i.x=Ez(i.x-Math.PI)+Math.PI;var o=bU(i,n);if(e){if(isNaN(o.x))return r;o.x=i.x-o.x,o.y=i.y-o.y;var a,s,l=9,u=1e-12;do{if(s=bU(o,n),isNaN(s.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}a={x:i.x-(s.x+o.x),y:i.y-(s.y+o.y)},o.x+=a.x,o.y+=a.y}while(l--&&Math.abs(a.x)>u&&Math.abs(a.y)>u);if(l<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=Ez(o.x+n.ll[0]),r.y=o.y+n.ll[1]}else isNaN(o.x)||(r.x=t.x+o.x,r.y=t.y+o.y);return r}function bU(t,e){var n,r={x:t.x/e.del[0],y:t.y/e.del[1]},i={x:Math.floor(r.x),y:Math.floor(r.y)},o={x:r.x-1*i.x,y:r.y-1*i.y},a={x:Number.NaN,y:Number.NaN};if(i.x<0||i.x>=e.lim[0])return a;if(i.y<0||i.y>=e.lim[1])return a;n=i.y*e.lim[0]+i.x;var s={x:e.cvs[n][0],y:e.cvs[n][1]};n++;var l={x:e.cvs[n][0],y:e.cvs[n][1]};n+=e.lim[0];var u={x:e.cvs[n][0],y:e.cvs[n][1]};n--;var c={x:e.cvs[n][0],y:e.cvs[n][1]},h=o.x*o.y,d=o.x*(1-o.y),f=(1-o.x)*(1-o.y),p=(1-o.x)*o.y;return a.x=f*s.x+d*l.x+p*c.x+h*u.x,a.y=f*s.y+d*l.y+p*c.y+h*u.y,a}var _U=function(t,e,n){var r,i,o,a=n.x,s=n.y,l=n.z||0,u={};for(o=0;o<3;o++)if(!e||2!==o||void 0!==n.z)switch(0===o?(r=a,i=-1!=="ew".indexOf(t.axis[o])?"x":"y"):1===o?(r=s,i=-1!=="ns".indexOf(t.axis[o])?"y":"x"):(r=l,i="z"),t.axis[o]){case"e":u[i]=r;break;case"w":u[i]=-r;break;case"n":u[i]=r;break;case"s":u[i]=-r;break;case"u":void 0!==n[i]&&(u.z=r);break;case"d":void 0!==n[i]&&(u.z=-r);break;default:return null}return u},xU=function(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e},wU=function(t){SU(t.x),SU(t.y)};function SU(t){if("function"===typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!==typeof t||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function EU(t,e){return(t.datum.datum_type===vB||t.datum.datum_type===bB||t.datum.datum_type===_B)&&"WGS84"!==e.datumCode||(e.datum.datum_type===vB||e.datum.datum_type===bB||e.datum.datum_type===_B)&&"WGS84"!==t.datumCode}function CU(t,e,n,r){var i;n=Array.isArray(n)?xU(n):{x:n.x,y:n.y,z:n.z,m:n.m};var o=void 0!==n.z;if(wU(n),t.datum&&e.datum&&EU(t,e)&&(i=new uU("WGS84"),n=CU(t,i,n,r),t=i),r&&"enu"!==t.axis&&(n=_U(t,!1,n)),"longlat"===t.projName)n={x:n.x*PB,y:n.y*PB,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),n=t.inverse(n),!n)return;if(t.from_greenwich&&(n.x+=t.from_greenwich),n=mU(t.datum,e.datum,n),n)return e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),"longlat"===e.projName?n={x:n.x*LB,y:n.y*LB,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),r&&"enu"!==e.axis?_U(e,!0,n):(o||delete n.z,n)}var MU=uU("WGS84");function TU(t,e,n,r){var i,o,a;return Array.isArray(n)?(i=CU(t,e,n,r)||{x:NaN,y:NaN},n.length>2?"undefined"!==typeof t.name&&"geocent"===t.name||"undefined"!==typeof e.name&&"geocent"===e.name?"number"===typeof i.z?[i.x,i.y,i.z].concat(n.splice(3)):[i.x,i.y,n[2]].concat(n.splice(3)):[i.x,i.y].concat(n.splice(2)):[i.x,i.y]):(o=CU(t,e,n,r),a=Object.keys(n),2===a.length||a.forEach((function(r){if("undefined"!==typeof t.name&&"geocent"===t.name||"undefined"!==typeof e.name&&"geocent"===e.name){if("x"===r||"y"===r||"z"===r)return}else if("x"===r||"y"===r)return;o[r]=n[r]})),o)}function AU(t){return t instanceof uU?t:t.oProj?t.oProj:uU(t)}function OU(t,e,n){t=AU(t);var r,i=!1;return"undefined"===typeof e?(e=t,t=MU,i=!0):("undefined"!==typeof e.x||Array.isArray(e))&&(n=e,e=t,t=MU,i=!0),e=AU(e),n?TU(t,e,n):(r={forward:function(n,r){return TU(t,e,n,r)},inverse:function(n,r){return TU(e,t,n,r)}},i&&(r.oProj=e),r)}var kU=OU,IU=6,PU="AJSAJS",LU="AFAFAF",NU=65,RU=73,DU=79,FU=86,jU=90,BU={forward:zU,inverse:UU,toPoint:GU};function zU(t,e){return e=e||5,XU(HU({lat:t[1],lon:t[0]}),e)}function UU(t){var e=WU(QU(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function GU(t){var e=WU(QU(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function qU(t){return t*(Math.PI/180)}function VU(t){return t/Math.PI*180}function HU(t){var e,n,r,i,o,a,s,l,u,c=t.lat,h=t.lon,d=6378137,f=.00669438,p=.9996,g=qU(c),m=qU(h);u=Math.floor((h+180)/6)+1,180===h&&(u=60),c>=56&&c<64&&h>=3&&h<12&&(u=32),c>=72&&c<84&&(h>=0&&h<9?u=31:h>=9&&h<21?u=33:h>=21&&h<33?u=35:h>=33&&h<42&&(u=37)),e=6*(u-1)-180+3,l=qU(e),n=f/(1-f),r=d/Math.sqrt(1-f*Math.sin(g)*Math.sin(g)),i=Math.tan(g)*Math.tan(g),o=n*Math.cos(g)*Math.cos(g),a=Math.cos(g)*(m-l),s=d*((1-f/4-3*f*f/64-5*f*f*f/256)*g-(3*f/8+3*f*f/32+45*f*f*f/1024)*Math.sin(2*g)+(15*f*f/256+45*f*f*f/1024)*Math.sin(4*g)-35*f*f*f/3072*Math.sin(6*g));var y=p*r*(a+(1-i+o)*a*a*a/6+(5-18*i+i*i+72*o-58*n)*a*a*a*a*a/120)+5e5,v=p*(s+r*Math.tan(g)*(a*a/2+(5-i+9*o+4*o*o)*a*a*a*a/24+(61-58*i+i*i+600*o-330*n)*a*a*a*a*a*a/720));return c<0&&(v+=1e7),{northing:Math.round(v),easting:Math.round(y),zoneNumber:u,zoneLetter:YU(c)}}function WU(t){var e=t.northing,n=t.easting,r=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var o,a,s,l,u,c,h,d,f,p,g=.9996,m=6378137,y=.00669438,v=(1-Math.sqrt(1-y))/(1+Math.sqrt(1-y)),b=n-5e5,_=e;r<"N"&&(_-=1e7),d=6*(i-1)-180+3,o=y/(1-y),h=_/g,f=h/(m*(1-y/4-3*y*y/64-5*y*y*y/256)),p=f+(3*v/2-27*v*v*v/32)*Math.sin(2*f)+(21*v*v/16-55*v*v*v*v/32)*Math.sin(4*f)+151*v*v*v/96*Math.sin(6*f),a=m/Math.sqrt(1-y*Math.sin(p)*Math.sin(p)),s=Math.tan(p)*Math.tan(p),l=o*Math.cos(p)*Math.cos(p),u=m*(1-y)/Math.pow(1-y*Math.sin(p)*Math.sin(p),1.5),c=b/(a*g);var x=p-a*Math.tan(p)/u*(c*c/2-(5+3*s+10*l-4*l*l-9*o)*c*c*c*c/24+(61+90*s+298*l+45*s*s-252*o-3*l*l)*c*c*c*c*c*c/720);x=VU(x);var w,S=(c-(1+2*s+l)*c*c*c/6+(5-2*l+28*s-3*l*l+8*o+24*s*s)*c*c*c*c*c/120)/Math.cos(p);if(S=d+VU(S),t.accuracy){var E=WU({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});w={top:E.lat,right:E.lon,bottom:x,left:S}}else w={lat:x,lon:S};return w}function YU(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function XU(t,e){var n="00000"+t.easting,r="00000"+t.northing;return t.zoneNumber+t.zoneLetter+JU(t.easting,t.northing,t.zoneNumber)+n.substr(n.length-5,e)+r.substr(r.length-5,e)}function JU(t,e,n){var r=ZU(n),i=Math.floor(t/1e5),o=Math.floor(e/1e5)%20;return KU(i,o,r)}function ZU(t){var e=t%IU;return 0===e&&(e=IU),e}function KU(t,e,n){var r=n-1,i=PU.charCodeAt(r),o=LU.charCodeAt(r),a=i+t-1,s=o+e,l=!1;a>jU&&(a=a-jU+NU-1,l=!0),(a===RU||i<RU&&a>RU||(a>RU||i<RU)&&l)&&a++,(a===DU||i<DU&&a>DU||(a>DU||i<DU)&&l)&&(a++,a===RU&&a++),a>jU&&(a=a-jU+NU-1),s>FU?(s=s-FU+NU-1,l=!0):l=!1,(s===RU||o<RU&&s>RU||(s>RU||o<RU)&&l)&&s++,(s===DU||o<DU&&s>DU||(s>DU||o<DU)&&l)&&(s++,s===RU&&s++),s>FU&&(s=s-FU+NU-1);var u=String.fromCharCode(a)+String.fromCharCode(s);return u}function QU(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";var e,n=t.length,r=null,i="",o=0;while(!/[A-Z]/.test(e=t.charAt(o))){if(o>=2)throw"MGRSPoint bad conversion from: "+t;i+=e,o++}var a=parseInt(i,10);if(0===o||o+3>n)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(o++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+t;r=t.substring(o,o+=2);var l=ZU(a),u=$U(r.charAt(0),l),c=tG(r.charAt(1),l);while(c<eG(s))c+=2e6;var h=n-o;if(h%2!==0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var d,f,p,g,m,y=h/2,v=0,b=0;return y>0&&(d=1e5/Math.pow(10,y),f=t.substring(o,o+y),v=parseFloat(f)*d,p=t.substring(o+y),b=parseFloat(p)*d),g=v+u,m=b+c,{easting:g,northing:m,zoneLetter:s,zoneNumber:a,accuracy:d}}function $U(t,e){var n=PU.charCodeAt(e-1),r=1e5,i=!1;while(n!==t.charCodeAt(0)){if(n++,n===RU&&n++,n===DU&&n++,n>jU){if(i)throw"Bad character: "+t;n=NU,i=!0}r+=1e5}return r}function tG(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var n=LU.charCodeAt(e-1),r=0,i=!1;while(n!==t.charCodeAt(0)){if(n++,n===RU&&n++,n===DU&&n++,n>FU){if(i)throw"Bad character: "+t;n=NU,i=!0}r+=1e5}return r}function eG(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function nG(t,e,n){if(!(this instanceof nG))return new nG(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"===typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"===typeof t&&"undefined"===typeof e){var r=t.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}nG.fromMGRS=function(t){return new nG(GU(t))},nG.prototype.toMGRS=function(t){return zU([this.x,this.y],t)};var rG=nG,iG=1,oG=.25,aG=.046875,sG=.01953125,lG=.01068115234375,uG=.75,cG=.46875,hG=.013020833333333334,dG=.007120768229166667,fG=.3645833333333333,pG=.005696614583333333,gG=.3076171875,mG=function(t){var e=[];e[0]=iG-t*(oG+t*(aG+t*(sG+t*lG))),e[1]=t*(uG-t*(aG+t*(sG+t*lG)));var n=t*t;return e[2]=n*(cG-t*(hG+t*dG)),n*=t,e[3]=n*(fG-t*pG),e[4]=n*t*gG,e},yG=function(t,e,n,r){return n*=e,e*=e,r[0]*t-n*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))},vG=20,bG=function(t,e,n){for(var r=1/(1-e),i=t,o=vG;o;--o){var a=Math.sin(i),s=1-e*a*a;if(s=(yG(i,a,Math.cos(i),n)-t)*(s*Math.sqrt(s))*r,i-=s,Math.abs(s)<IB)return i}return i};function _G(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=mG(this.es),this.ml0=yG(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function xG(t){var e,n,r,i=t.x,o=t.y,a=Ez(i-this.long0),s=Math.sin(o),l=Math.cos(o);if(this.es){var u=l*a,c=Math.pow(u,2),h=this.ep2*Math.pow(l,2),d=Math.pow(h,2),f=Math.abs(l)>IB?Math.tan(o):0,p=Math.pow(f,2),g=Math.pow(p,2);e=1-this.es*Math.pow(s,2),u/=Math.sqrt(e);var m=yG(o,s,l,this.en);n=this.a*(this.k0*u*(1+c/6*(1-p+h+c/20*(5-18*p+g+14*h-58*p*h+c/42*(61+179*g-g*p-479*p)))))+this.x0,r=this.a*(this.k0*(m-this.ml0+s*a*u/2*(1+c/12*(5-p+9*h+4*d+c/30*(61+g-58*p+270*h-330*p*h+c/56*(1385+543*g-g*p-3111*p))))))+this.y0}else{var y=l*Math.sin(a);if(Math.abs(Math.abs(y)-1)<IB)return 93;if(n=.5*this.a*this.k0*Math.log((1+y)/(1-y))+this.x0,r=l*Math.cos(a)/Math.sqrt(1-Math.pow(y,2)),y=Math.abs(r),y>=1){if(y-1>IB)return 93;r=0}else r=Math.acos(r);o<0&&(r=-r),r=this.a*this.k0*(r-this.lat0)+this.y0}return t.x=n,t.y=r,t}function wG(t){var e,n,r,i,o=(t.x-this.x0)*(1/this.a),a=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+a/this.k0,n=bG(e,this.es,this.en),Math.abs(n)<TB){var s=Math.sin(n),l=Math.cos(n),u=Math.abs(l)>IB?Math.tan(n):0,c=this.ep2*Math.pow(l,2),h=Math.pow(c,2),d=Math.pow(u,2),f=Math.pow(d,2);e=1-this.es*Math.pow(s,2);var p=o*Math.sqrt(e)/this.k0,g=Math.pow(p,2);e*=u,r=n-e*g/(1-this.es)*.5*(1-g/12*(5+3*d-9*c*d+c-4*h-g/30*(61+90*d-252*c*d+45*f+46*c-g/56*(1385+3633*d+4095*f+1574*f*d)))),i=Ez(this.long0+p*(1-g/6*(1+2*d+c-g/20*(5+28*d+24*f+8*c*d+6*c-g/42*(61+662*d+1320*f+720*f*d))))/l)}else r=TB*Sz(a),i=0;else{var m=Math.exp(o/this.k0),y=.5*(m-1/m),v=this.lat0+a/this.k0,b=Math.cos(v);e=Math.sqrt((1-Math.pow(b,2))/(1+Math.pow(y,2))),r=Math.asin(e),a<0&&(r=-r),i=0===y&&0===b?0:Ez(Math.atan2(y,b)+this.long0)}return t.x=i,t.y=r,t}var SG=["Fast_Transverse_Mercator","Fast Transverse Mercator"],EG={init:_G,forward:xG,inverse:wG,names:SG},CG=function(t){var e=Math.exp(t);return e=(e-1/e)/2,e},MG=function(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),r=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(r,2))},TG=function(t){var e=1+t,n=e-1;return 0===n?t:t*Math.log(e)/n},AG=function(t){var e=Math.abs(t);return e=TG(e*(1+e/(MG(1,e)+1))),t<0?-e:e},OG=function(t,e){var n,r=2*Math.cos(2*e),i=t.length-1,o=t[i],a=0;while(--i>=0)n=r*o-a+t[i],a=o,o=n;return e+n*Math.sin(2*e)},kG=function(t,e){var n,r=2*Math.cos(e),i=t.length-1,o=t[i],a=0;while(--i>=0)n=r*o-a+t[i],a=o,o=n;return Math.sin(e)*n},IG=function(t){var e=Math.exp(t);return e=(e+1/e)/2,e},PG=function(t,e,n){var r,i,o=Math.sin(e),a=Math.cos(e),s=CG(n),l=IG(n),u=2*a*l,c=-2*o*s,h=t.length-1,d=t[h],f=0,p=0,g=0;while(--h>=0)r=p,i=f,p=d,f=g,d=u*p-r-c*f+t[h],g=c*p-i+u*f;return u=o*l,c=a*s,[u*d-c*g,u*g+c*d]};function LG(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(EG.init.apply(this),this.forward=EG.forward,this.inverse=EG.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),n*=e,this.cgb[1]=n*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n*=e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),n*=e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(e*(-24832/14175)-2.4)),n*=e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n*=e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),n*=e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n*=e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n*=e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n*=e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=.6650675310896665*n;var r=OG(this.cbg,this.lat0);this.Zb=-this.Qn*(r+kG(this.gtu,2*r))}function NG(t){var e=Ez(t.x-this.long0),n=t.y;n=OG(this.cbg,n);var r=Math.sin(n),i=Math.cos(n),o=Math.sin(e),a=Math.cos(e);n=Math.atan2(r,a*i),e=Math.atan2(o*i,MG(r,i*a)),e=AG(Math.tan(e));var s,l,u=PG(this.gtu,2*n,2*e);return n+=u[0],e+=u[1],Math.abs(e)<=2.623395162778?(s=this.a*(this.Qn*e)+this.x0,l=this.a*(this.Qn*n+this.Zb)+this.y0):(s=1/0,l=1/0),t.x=s,t.y=l,t}function RG(t){var e,n,r=(t.x-this.x0)*(1/this.a),i=(t.y-this.y0)*(1/this.a);if(i=(i-this.Zb)/this.Qn,r/=this.Qn,Math.abs(r)<=2.623395162778){var o=PG(this.utg,2*i,2*r);i+=o[0],r+=o[1],r=Math.atan(CG(r));var a=Math.sin(i),s=Math.cos(i),l=Math.sin(r),u=Math.cos(r);i=Math.atan2(a*u,MG(l,u*s)),r=Math.atan2(l,u*s),e=Ez(r+this.long0),n=OG(this.cgb,i)}else e=1/0,n=1/0;return t.x=e,t.y=n,t}var DG=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"],FG={init:LG,forward:NG,inverse:RG,names:DG},jG=function(t,e){if(void 0===t){if(t=Math.floor(30*(Ez(e)+Math.PI)/Math.PI)+1,t<0)return 0;if(t>60)return 60}return t},BG="etmerc";function zG(){var t=jG(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*PB,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,FG.init.apply(this),this.forward=FG.forward,this.inverse=FG.inverse}var UG=["Universal Transverse Mercator System","utm"],GG={init:zG,names:UG,dependsOn:BG},qG=function(t,e){return Math.pow((1-t)/(1+t),e)},VG=20;function HG(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+NB)/(Math.pow(Math.tan(.5*this.lat0+NB),this.C)*qG(this.e*t,this.ratexp))}function WG(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+NB),this.C)*qG(this.e*Math.sin(n),this.ratexp))-TB,t.x=this.C*e,t}function YG(t){for(var e=1e-14,n=t.x/this.C,r=t.y,i=Math.pow(Math.tan(.5*r+NB)/this.K,1/this.C),o=VG;o>0;--o){if(r=2*Math.atan(i*qG(this.e*Math.sin(t.y),-.5*this.e))-TB,Math.abs(r-t.y)<e)break;t.y=r}return o?(t.x=n,t.y=r,t):null}var XG=["gauss"],JG={init:HG,forward:WG,inverse:YG,names:XG};function ZG(){JG.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function KG(t){var e,n,r,i;return t.x=Ez(t.x-this.long0),JG.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),r=Math.cos(t.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*r),t.x=i*n*Math.sin(t.x),t.y=i*(this.cosc0*e-this.sinc0*n*r),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function QG(t){var e,n,r,i,o;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,o=Math.sqrt(t.x*t.x+t.y*t.y)){var a=2*Math.atan2(o,this.R2);e=Math.sin(a),n=Math.cos(a),i=Math.asin(n*this.sinc0+t.y*e*this.cosc0/o),r=Math.atan2(t.x*e,o*this.cosc0*n-t.y*this.sinc0*e)}else i=this.phic0,r=0;return t.x=r,t.y=i,JG.inverse.apply(this,[t]),t.x=Ez(t.x+this.long0),t}var $G=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"],tq={init:ZG,forward:KG,inverse:QG,names:$G};function eq(t,e,n){return e*=n,Math.tan(.5*(TB+t))*Math.pow((1-e)/(1+e),.5*n)}function nq(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=IB&&(this.k0=.5*(1+Sz(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=IB&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=IB&&(this.k0=.5*this.cons*wz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Cz(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=wz(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-TB,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function rq(t){var e,n,r,i,o,a,s=t.x,l=t.y,u=Math.sin(l),c=Math.cos(l),h=Ez(s-this.long0);return Math.abs(Math.abs(s-this.long0)-Math.PI)<=IB&&Math.abs(l+this.lat0)<=IB?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*u+this.coslat0*c*Math.cos(h)),t.x=this.a*e*c*Math.sin(h)+this.x0,t.y=this.a*e*(this.coslat0*u-this.sinlat0*c*Math.cos(h))+this.y0,t):(n=2*Math.atan(this.ssfn_(l,u,this.e))-TB,i=Math.cos(n),r=Math.sin(n),Math.abs(this.coslat0)<=IB?(o=Cz(this.e,l*this.con,this.con*u),a=2*this.a*this.k0*o/this.cons,t.x=this.x0+a*Math.sin(s-this.long0),t.y=this.y0-this.con*a*Math.cos(s-this.long0),t):(Math.abs(this.sinlat0)<IB?(e=2*this.a*this.k0/(1+i*Math.cos(h)),t.y=e*r):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*r+this.cosX0*i*Math.cos(h))),t.y=e*(this.cosX0*r-this.sinX0*i*Math.cos(h))+this.y0),t.x=e*i*Math.sin(h)+this.x0,t))}function iq(t){var e,n,r,i,o;t.x-=this.x0,t.y-=this.y0;var a=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var s=2*Math.atan(a/(2*this.a*this.k0));return e=this.long0,n=this.lat0,a<=IB?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(s)*this.sinlat0+t.y*Math.sin(s)*this.coslat0/a),e=Math.abs(this.coslat0)<IB?this.lat0>0?Ez(this.long0+Math.atan2(t.x,-1*t.y)):Ez(this.long0+Math.atan2(t.x,t.y)):Ez(this.long0+Math.atan2(t.x*Math.sin(s),a*this.coslat0*Math.cos(s)-t.y*this.sinlat0*Math.sin(s))),t.x=e,t.y=n,t)}if(Math.abs(this.coslat0)<=IB){if(a<=IB)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,r=a*this.cons/(2*this.a*this.k0),n=this.con*Mz(this.e,r),e=this.con*Ez(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else i=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=IB?o=this.X0:(o=Math.asin(Math.cos(i)*this.sinX0+t.y*Math.sin(i)*this.cosX0/a),e=Ez(this.long0+Math.atan2(t.x*Math.sin(i),a*this.cosX0*Math.cos(i)-t.y*this.sinX0*Math.sin(i)))),n=-1*Mz(this.e,Math.tan(.5*(TB+o)));return t.x=e,t.y=n,t}var oq=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],aq={init:nq,forward:rq,inverse:iq,names:oq,ssfn_:eq};function sq(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,r=this.rf,i=1/r,o=2*i-Math.pow(i,2),a=this.e=Math.sqrt(o);this.R=this.k0*n*Math.sqrt(1-o)/(1-o*Math.pow(e,2)),this.alpha=Math.sqrt(1+o/(1-o)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var s=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+t/2)),u=Math.log((1+a*e)/(1-a*e));this.K=s-this.alpha*l+this.alpha*a/2*u}function lq(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),r=-this.alpha*(e+n)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(o))),s=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*a+this.x0,t}function uq(t){var e=t.x-this.x0,n=t.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),a=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),s=this.lambda0+a/this.alpha,l=0,u=o,c=-1e3,h=0;while(Math.abs(u-c)>1e-7){if(++h>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),c=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=s,t.y=u,t}var cq=["somerc"],hq={init:sq,forward:lq,inverse:uq,names:cq},dq=1e-7;function fq(t){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],n="object"===typeof t.PROJECTION?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||-1!==e.indexOf(n)}function pq(){var t,e,n,r,i,o,a,s,l,u,c,h=0,d=0,f=0,p=0,g=0,m=0,y=0;this.no_off=fq(this),this.no_rot="no_rot"in this;var v=!1;"alpha"in this&&(v=!0);var b=!1;if("rectified_grid_angle"in this&&(b=!0),v&&(y=this.alpha),b&&(h=this.rectified_grid_angle*PB),v||b)d=this.longc;else if(f=this.long1,g=this.lat1,p=this.long2,m=this.lat2,Math.abs(g-m)<=dq||(t=Math.abs(g))<=dq||Math.abs(t-TB)<=dq||Math.abs(Math.abs(this.lat0)-TB)<=dq||Math.abs(Math.abs(m)-TB)<=dq)throw new Error;var _=1-this.es;e=Math.sqrt(_),Math.abs(this.lat0)>IB?(s=Math.sin(this.lat0),n=Math.cos(this.lat0),t=1-this.es*s*s,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/_),this.A=this.B*this.k0*e/t,r=this.B*e/(n*Math.sqrt(t)),i=r*r-1,i<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=r,this.E*=Math.pow(Cz(this.e,this.lat0,s),this.B)):(this.B=1/e,this.A=this.k0,this.E=r=i=1),v||b?(v?(c=Math.asin(Math.sin(y)/r),b||(h=y)):(c=h,y=Math.asin(r*Math.sin(c))),this.lam0=d-Math.asin(.5*(i-1/i)*Math.tan(c))/this.B):(o=Math.pow(Cz(this.e,g,Math.sin(g)),this.B),a=Math.pow(Cz(this.e,m,Math.sin(m)),this.B),i=this.E/o,l=(a-o)/(a+o),u=this.E*this.E,u=(u-a*o)/(u+a*o),t=f-p,t<-Math.pi?p-=RB:t>Math.pi&&(p+=RB),this.lam0=Ez(.5*(f+p)-Math.atan(u*Math.tan(.5*this.B*(f-p))/l)/this.B),c=Math.atan(2*Math.sin(this.B*Ez(f-this.lam0))/(i-1/i)),h=y=Math.asin(r*Math.sin(c))),this.singam=Math.sin(c),this.cosgam=Math.cos(c),this.sinrot=Math.sin(h),this.cosrot=Math.cos(h),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(y))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*c,this.v_pole_n=this.ArB*Math.log(Math.tan(NB-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(NB+i))}function gq(t){var e,n,r,i,o,a,s,l,u={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-TB)>IB){if(o=this.E/Math.pow(Cz(this.e,t.y,Math.sin(t.y)),this.B),a=1/o,e=.5*(o-a),n=.5*(o+a),i=Math.sin(this.B*t.x),r=(e*this.singam-i*this.cosgam)/n,Math.abs(Math.abs(r)-1)<IB)throw new Error;l=.5*this.ArB*Math.log((1-r)/(1+r)),a=Math.cos(this.B*t.x),s=Math.abs(a)<dq?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+i*this.singam,a)}else l=t.y>0?this.v_pole_n:this.v_pole_s,s=this.ArB*t.y;return this.no_rot?(u.x=s,u.y=l):(s-=this.u_0,u.x=l*this.cosrot+s*this.sinrot,u.y=s*this.cosrot-l*this.sinrot),u.x=this.a*u.x+this.x0,u.y=this.a*u.y+this.y0,u}function mq(t){var e,n,r,i,o,a,s,l={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(n=t.y,e=t.x):(n=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),r=Math.exp(-this.BrA*n),i=.5*(r-1/r),o=.5*(r+1/r),a=Math.sin(this.BrA*e),s=(a*this.cosgam+i*this.singam)/o,Math.abs(Math.abs(s)-1)<IB)l.x=0,l.y=s<0?-TB:TB;else{if(l.y=this.E/Math.sqrt((1+s)/(1-s)),l.y=Mz(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(i*this.cosgam-a*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l}var yq=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"],vq={init:pq,forward:gq,inverse:mq,names:yq};function bq(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<IB)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),r=wz(this.e,e,n),i=Cz(this.e,this.lat1,e),o=Math.sin(this.lat2),a=Math.cos(this.lat2),s=wz(this.e,o,a),l=Cz(this.e,this.lat2,o),u=Cz(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>IB?this.ns=Math.log(r/s)/Math.log(i/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function _q(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=IB&&(n=Sz(n)*(TB-2*IB));var r,i,o=Math.abs(Math.abs(n)-TB);if(o>IB)r=Cz(this.e,n,Math.sin(n)),i=this.a*this.f0*Math.pow(r,this.ns);else{if(o=n*this.ns,o<=0)return null;i=0}var a=this.ns*Ez(e-this.long0);return t.x=this.k0*(i*Math.sin(a))+this.x0,t.y=this.k0*(this.rh-i*Math.cos(a))+this.y0,t}function xq(t){var e,n,r,i,o,a=(t.x-this.x0)/this.k0,s=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+s*s),n=1):(e=-Math.sqrt(a*a+s*s),n=-1);var l=0;if(0!==e&&(l=Math.atan2(n*a,n*s)),0!==e||this.ns>0){if(n=1/this.ns,r=Math.pow(e/(this.a*this.f0),n),i=Mz(this.e,r),-9999===i)return null}else i=-TB;return o=Ez(l/this.ns+this.long0),t.x=o,t.y=i,t}var wq=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"],Sq={init:bq,forward:_q,inverse:xq,names:wq};function Eq(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function Cq(t){var e,n,r,i,o,a,s,l=t.x,u=t.y,c=Ez(l-this.long0);return e=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/e)-this.s45),r=-c*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),o=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(i)),a=this.n*o,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),t.y=s*Math.cos(a)/1,t.x=s*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t}function Mq(t){var e,n,r,i,o,a,s,l,u=t.x;t.x=t.y,t.y=u,this.czech||(t.y*=-1,t.x*=-1),a=Math.sqrt(t.x*t.x+t.y*t.y),o=Math.atan2(t.y,t.x),i=o/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/a,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),n=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),t.x=this.long0-n/this.alfa,s=e,l=0;var c=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(s))/(1-this.e*Math.sin(s)),this.e/2))-this.s45),Math.abs(s-t.y)<1e-10&&(l=1),s=t.y,c+=1}while(0===l&&c<15);return c>=15?null:t}var Tq=["Krovak","krovak"],Aq={init:Eq,forward:Cq,inverse:Mq,names:Tq},Oq=function(t,e,n,r,i){return t*i-e*Math.sin(2*i)+n*Math.sin(4*i)-r*Math.sin(6*i)},kq=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))},Iq=function(t){return.375*t*(1+.25*t*(1+.46875*t))},Pq=function(t){return.05859375*t*t*(1+.75*t)},Lq=function(t){return t*t*t*(35/3072)},Nq=function(t,e,n){var r=e*n;return t/Math.sqrt(1-r*r)},Rq=function(t){return Math.abs(t)<TB?t:t-Sz(t)*Math.PI},Dq=function(t,e,n,r,i){var o,a;o=t/e;for(var s=0;s<15;s++)if(a=(t-(e*o-n*Math.sin(2*o)+r*Math.sin(4*o)-i*Math.sin(6*o)))/(e-2*n*Math.cos(2*o)+4*r*Math.cos(4*o)-6*i*Math.cos(6*o)),o+=a,Math.abs(a)<=1e-10)return o;return NaN};function Fq(){this.sphere||(this.e0=kq(this.es),this.e1=Iq(this.es),this.e2=Pq(this.es),this.e3=Lq(this.es),this.ml0=this.a*Oq(this.e0,this.e1,this.e2,this.e3,this.lat0))}function jq(t){var e,n,r=t.x,i=t.y;if(r=Ez(r-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(r)),n=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var o=Math.sin(i),a=Math.cos(i),s=Nq(this.a,this.e,o),l=Math.tan(i)*Math.tan(i),u=r*Math.cos(i),c=u*u,h=this.es*a*a/(1-this.es),d=this.a*Oq(this.e0,this.e1,this.e2,this.e3,i);e=s*u*(1-c*l*(1/6-(8-l+8*h)*c/120)),n=d-this.ml0+s*o/a*c*(.5+(5-l+6*h)*c/24)}return t.x=e+this.x0,t.y=n+this.y0,t}function Bq(t){t.x-=this.x0,t.y-=this.y0;var e,n,r=t.x/this.a,i=t.y/this.a;if(this.sphere){var o=i+this.lat0;e=Math.asin(Math.sin(o)*Math.cos(r)),n=Math.atan2(Math.tan(r),Math.cos(o))}else{var a=this.ml0/this.a+i,s=Dq(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-TB)<=IB)return t.x=this.long0,t.y=TB,i<0&&(t.y*=-1),t;var l=Nq(this.a,this.e,Math.sin(s)),u=l*l*l/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(s),2),h=r*this.a/l,d=h*h;e=s-l*Math.tan(s)/u*h*h*(.5-(1+3*c)*h*h/24),n=h*(1-d*(c/3+(1+3*c)*c*d/15))/Math.cos(s)}return t.x=Ez(n+this.long0),t.y=Rq(e),t}var zq=["Cassini","Cassini_Soldner","cass"],Uq={init:Fq,forward:jq,inverse:Bq,names:zq},Gq=function(t,e){var n;return t>1e-7?(n=t*e,(1-t*t)*(e/(1-n*n)-.5/t*Math.log((1-n)/(1+n)))):2*e},qq=1,Vq=2,Hq=3,Wq=4;function Yq(){var t,e=Math.abs(this.lat0);if(Math.abs(e-TB)<IB?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<IB?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=Gq(this.e,1),this.mmf=.5/(1-this.es),this.apa=nV(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=Gq(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function Xq(t){var e,n,r,i,o,a,s,l,u,c,h=t.x,d=t.y;if(h=Ez(h-this.long0),this.sphere){if(o=Math.sin(d),c=Math.cos(d),r=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(n=this.mode===this.EQUIT?1+c*r:1+this.sinph0*o+this.cosph0*c*r,n<=IB)return null;n=Math.sqrt(2/n),e=n*c*Math.sin(h),n*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*c*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(d+this.lat0)<IB)return null;n=NB-.5*d,n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)),e=n*Math.sin(h),n*=r}}else{switch(s=0,l=0,u=0,r=Math.cos(h),i=Math.sin(h),o=Math.sin(d),a=Gq(this.e,o),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(s=a/this.qp,l=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:u=1+this.sinb1*s+this.cosb1*l*r;break;case this.EQUIT:u=1+l*r;break;case this.N_POLE:u=TB+d,a=this.qp-a;break;case this.S_POLE:u=d-TB,a=this.qp+a;break}if(Math.abs(u)<IB)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),n=this.mode===this.OBLIQ?this.ymf*u*(this.cosb1*s-this.sinb1*l*r):(u=Math.sqrt(2/(1+l*r)))*s*this.ymf,e=this.xmf*u*l*i;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(u=Math.sqrt(a))*i,n=r*(this.mode===this.S_POLE?u:-u)):e=n=0;break}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t}function Jq(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,i,o,a,s,l=t.x/this.a,u=t.y/this.a;if(this.sphere){var c,h=0,d=0;if(c=Math.sqrt(l*l+u*u),n=.5*c,n>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(d=Math.sin(n),h=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(c)<=IB?0:Math.asin(u*d/c),l*=d,u=h*c;break;case this.OBLIQ:n=Math.abs(c)<=IB?this.lat0:Math.asin(h*this.sinph0+u*d*this.cosph0/c),l*=d*this.cosph0,u=(h-Math.sin(n)*this.sinph0)*c;break;case this.N_POLE:u=-u,n=TB-n;break;case this.S_POLE:n-=TB;break}e=0!==u||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(l,u):0}else{if(s=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(l/=this.dd,u*=this.dd,a=Math.sqrt(l*l+u*u),a<IB)return t.x=this.long0,t.y=this.lat0,t;i=2*Math.asin(.5*a/this.rq),r=Math.cos(i),l*=i=Math.sin(i),this.mode===this.OBLIQ?(s=r*this.sinb1+u*i*this.cosb1/a,o=this.qp*s,u=a*this.cosb1*r-u*this.sinb1*i):(s=u*i/a,o=this.qp*s,u=a*r)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(u=-u),o=l*l+u*u,!o)return t.x=this.long0,t.y=this.lat0,t;s=1-o/this.qp,this.mode===this.S_POLE&&(s=-s)}e=Math.atan2(l,u),n=rV(Math.asin(s),this.apa)}return t.x=Ez(this.long0+e),t.y=n,t}var Zq=.3333333333333333,Kq=.17222222222222222,Qq=.10257936507936508,$q=.06388888888888888,tV=.0664021164021164,eV=.016415012942191543;function nV(t){var e,n=[];return n[0]=t*Zq,e=t*t,n[0]+=e*Kq,n[1]=e*$q,e*=t,n[0]+=e*Qq,n[1]+=e*tV,n[2]=e*eV,n}function rV(t,e){var n=t+t;return t+e[0]*Math.sin(n)+e[1]*Math.sin(n+n)+e[2]*Math.sin(n+n+n)}var iV=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],oV={init:Yq,forward:Xq,inverse:Jq,names:iV,S_POLE:qq,N_POLE:Vq,EQUIT:Hq,OBLIQ:Wq},aV=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)};function sV(){Math.abs(this.lat1+this.lat2)<IB||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=wz(this.e3,this.sin_po,this.cos_po),this.qs1=Gq(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=wz(this.e3,this.sin_po,this.cos_po),this.qs2=Gq(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Gq(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>IB?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function lV(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var r=Gq(this.e3,this.sin_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,o=this.ns0*Ez(e-this.long0),a=i*Math.sin(o)+this.x0,s=this.rh-i*Math.cos(o)+this.y0;return t.x=a,t.y=s,t}function uV(t){var e,n,r,i,o,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),r=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),r=-1),i=0,0!==e&&(i=Math.atan2(r*t.x,r*t.y)),r=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-r*r)/(2*this.ns0)):(n=(this.c-r*r)/this.ns0,a=this.phi1z(this.e3,n)),o=Ez(i/this.ns0+this.long0),t.x=o,t.y=a,t}function cV(t,e){var n,r,i,o,a,s=aV(.5*e);if(t<IB)return s;for(var l=t*t,u=1;u<=25;u++)if(n=Math.sin(s),r=Math.cos(s),i=t*n,o=1-i*i,a=.5*o*o/r*(e/(1-l)-n/o+.5/t*Math.log((1-i)/(1+i))),s+=a,Math.abs(a)<=1e-7)return s;return null}var hV=["Albers_Conic_Equal_Area","Albers","aea"],dV={init:sV,forward:lV,inverse:uV,names:hV,phi1z:cV};function fV(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function pV(t){var e,n,r,i,o,a,s,l,u=t.x,c=t.y;return r=Ez(u-this.long0),e=Math.sin(c),n=Math.cos(c),i=Math.cos(r),a=this.sin_p14*e+this.cos_p14*n*i,o=1,a>0||Math.abs(a)<=IB?(s=this.x0+this.a*o*n*Math.sin(r)/a,l=this.y0+this.a*o*(this.cos_p14*e-this.sin_p14*n*i)/a):(s=this.x0+this.infinity_dist*n*Math.sin(r),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*i)),t.x=s,t.y=l,t}function gV(t){var e,n,r,i,o,a;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(i=Math.atan2(e,this.rc),n=Math.sin(i),r=Math.cos(i),a=aV(r*this.sin_p14+t.y*n*this.cos_p14/e),o=Math.atan2(t.x*n,e*this.cos_p14*r-t.y*this.sin_p14*n),o=Ez(this.long0+o)):(a=this.phic0,o=0),t.x=o,t.y=a,t}var mV=["gnom"],yV={init:fV,forward:pV,inverse:gV,names:mV},vV=function(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*TB:TB;for(var r,i,o,a,s=Math.asin(.5*e),l=0;l<30;l++)if(i=Math.sin(s),o=Math.cos(s),a=t*i,r=Math.pow(1-a*a,2)/(2*o)*(e/(1-t*t)-i/(1-a*a)+.5/t*Math.log((1-a)/(1+a))),s+=r,Math.abs(r)<=1e-10)return s;return NaN};function bV(){this.sphere||(this.k0=wz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function _V(t){var e,n,r=t.x,i=t.y,o=Ez(r-this.long0);if(this.sphere)e=this.x0+this.a*o*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var a=Gq(this.e,Math.sin(i));e=this.x0+this.a*this.k0*o,n=this.y0+this.a*a*.5/this.k0}return t.x=e,t.y=n,t}function xV(t){var e,n;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=Ez(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=vV(this.e,2*t.y*this.k0/this.a),e=Ez(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t}var wV=["cea"],SV={init:bV,forward:_V,inverse:xV,names:wV};function EV(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function CV(t){var e=t.x,n=t.y,r=Ez(e-this.long0),i=Rq(n-this.lat0);return t.x=this.x0+this.a*r*this.rc,t.y=this.y0+this.a*i,t}function MV(t){var e=t.x,n=t.y;return t.x=Ez(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=Rq(this.lat0+(n-this.y0)/this.a),t}var TV=["Equirectangular","Equidistant_Cylindrical","eqc"],AV={init:EV,forward:CV,inverse:MV,names:TV},OV=20;function kV(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=kq(this.es),this.e1=Iq(this.es),this.e2=Pq(this.es),this.e3=Lq(this.es),this.ml0=this.a*Oq(this.e0,this.e1,this.e2,this.e3,this.lat0)}function IV(t){var e,n,r,i=t.x,o=t.y,a=Ez(i-this.long0);if(r=a*Math.sin(o),this.sphere)Math.abs(o)<=IB?(e=this.a*a,n=-1*this.a*this.lat0):(e=this.a*Math.sin(r)/Math.tan(o),n=this.a*(Rq(o-this.lat0)+(1-Math.cos(r))/Math.tan(o)));else if(Math.abs(o)<=IB)e=this.a*a,n=-1*this.ml0;else{var s=Nq(this.a,this.e,Math.sin(o))/Math.tan(o);e=s*Math.sin(r),n=this.a*Oq(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+s*(1-Math.cos(r))}return t.x=e+this.x0,t.y=n+this.y0,t}function PV(t){var e,n,r,i,o,a,s,l,u;if(r=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=IB)e=Ez(r/this.a+this.long0),n=0;else{var c;for(a=this.lat0+i/this.a,s=r*r/this.a/this.a+a*a,l=a,o=OV;o;--o)if(c=Math.tan(l),u=-1*(a*(l*c+1)-l-.5*(l*l+s)*c)/((l-a)/c-1),l+=u,Math.abs(u)<=IB){n=l;break}e=Ez(this.long0+Math.asin(r*Math.tan(l)/this.a)/Math.sin(n))}else if(Math.abs(i+this.ml0)<=IB)n=0,e=Ez(this.long0+r/this.a);else{var h,d,f,p,g;for(a=(this.ml0+i)/this.a,s=r*r/this.a/this.a+a*a,l=a,o=OV;o;--o)if(g=this.e*Math.sin(l),h=Math.sqrt(1-g*g)*Math.tan(l),d=this.a*Oq(this.e0,this.e1,this.e2,this.e3,l),f=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),p=d/this.a,u=(a*(h*p+1)-p-.5*h*(p*p+s))/(this.es*Math.sin(2*l)*(p*p+s-2*a*p)/(4*h)+(a-p)*(h*f-2/Math.sin(2*l))-f),l-=u,Math.abs(u)<=IB){n=l;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=Ez(this.long0+Math.asin(r*h/this.a)/Math.sin(n))}return t.x=e,t.y=n,t}var LV=["Polyconic","poly"],NV={init:kV,forward:IV,inverse:PV,names:LV};function RV(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function DV(t){var e,n=t.x,r=t.y,i=r-this.lat0,o=n-this.long0,a=i/MB*1e-5,s=o,l=1,u=0;for(e=1;e<=10;e++)l*=a,u+=this.A[e]*l;var c,h,d=u,f=s,p=1,g=0,m=0,y=0;for(e=1;e<=6;e++)c=p*d-g*f,h=g*d+p*f,p=c,g=h,m=m+this.B_re[e]*p-this.B_im[e]*g,y=y+this.B_im[e]*p+this.B_re[e]*g;return t.x=y*this.a+this.x0,t.y=m*this.a+this.y0,t}function FV(t){var e,n,r,i=t.x,o=t.y,a=i-this.x0,s=o-this.y0,l=s/this.a,u=a/this.a,c=1,h=0,d=0,f=0;for(e=1;e<=6;e++)n=c*l-h*u,r=h*l+c*u,c=n,h=r,d=d+this.C_re[e]*c-this.C_im[e]*h,f=f+this.C_im[e]*c+this.C_re[e]*h;for(var p=0;p<this.iterations;p++){var g,m,y=d,v=f,b=l,_=u;for(e=2;e<=6;e++)g=y*d-v*f,m=v*d+y*f,y=g,v=m,b+=(e-1)*(this.B_re[e]*y-this.B_im[e]*v),_+=(e-1)*(this.B_im[e]*y+this.B_re[e]*v);y=1,v=0;var x=this.B_re[1],w=this.B_im[1];for(e=2;e<=6;e++)g=y*d-v*f,m=v*d+y*f,y=g,v=m,x+=e*(this.B_re[e]*y-this.B_im[e]*v),w+=e*(this.B_im[e]*y+this.B_re[e]*v);var S=x*x+w*w;d=(b*x+_*w)/S,f=(_*x-b*w)/S}var E=d,C=f,M=1,T=0;for(e=1;e<=9;e++)M*=E,T+=this.D[e]*M;var A=this.lat0+T*MB*1e5,O=this.long0+C;return t.x=O,t.y=A,t}var jV=["New_Zealand_Map_Grid","nzmg"],BV={init:RV,forward:DV,inverse:FV,names:jV};function zV(){}function UV(t){var e=t.x,n=t.y,r=Ez(e-this.long0),i=this.x0+this.a*r,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=i,t.y=o,t}function GV(t){t.x-=this.x0,t.y-=this.y0;var e=Ez(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t}var qV=["Miller_Cylindrical","mill"],VV={init:zV,forward:UV,inverse:GV,names:qV},HV=20;function WV(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=mG(this.es)}function YV(t){var e,n,r=t.x,i=t.y;if(r=Ez(r-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(i),a=HV;a;--a){var s=(this.m*i+Math.sin(i)-o)/(this.m+Math.cos(i));if(i-=s,Math.abs(s)<IB)break}else i=1!==this.n?Math.asin(this.n*Math.sin(i)):i;e=this.a*this.C_x*r*(this.m+Math.cos(i)),n=this.a*this.C_y*i}else{var l=Math.sin(i),u=Math.cos(i);n=this.a*yG(i,l,u,this.en),e=this.a*r*u/Math.sqrt(1-this.es*l*l)}return t.x=e,t.y=n,t}function XV(t){var e,n,r,i;return t.x-=this.x0,r=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,r/=this.C_x*(this.m+Math.cos(e)),this.m?e=aV((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=aV(Math.sin(e)/this.n)),r=Ez(r+this.long0),e=Rq(e)):(e=bG(t.y/this.a,this.es,this.en),i=Math.abs(e),i<TB?(i=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)),r=Ez(n)):i-IB<TB&&(r=this.long0)),t.x=r,t.y=e,t}var JV=["Sinusoidal","sinu"],ZV={init:WV,forward:YV,inverse:XV,names:JV};function KV(){}function QV(t){var e=t.x,n=t.y,r=Ez(e-this.long0),i=n,o=Math.PI*Math.sin(n);while(1){var a=-(i+Math.sin(i)-o)/(1+Math.cos(i));if(i+=a,Math.abs(a)<IB)break}i/=2,Math.PI/2-Math.abs(n)<IB&&(r=0);var s=.900316316158*this.a*r*Math.cos(i)+this.x0,l=1.4142135623731*this.a*Math.sin(i)+this.y0;return t.x=s,t.y=l,t}function $V(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var r=Ez(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var i=Math.asin(n);return t.x=r,t.y=i,t}var tH=["Mollweide","moll"],eH={init:KV,forward:QV,inverse:$V,names:tH};function nH(){Math.abs(this.lat1+this.lat2)<IB||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=kq(this.es),this.e1=Iq(this.es),this.e2=Pq(this.es),this.e3=Lq(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=wz(this.e,this.sinphi,this.cosphi),this.ml1=Oq(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<IB?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=wz(this.e,this.sinphi,this.cosphi),this.ml2=Oq(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Oq(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function rH(t){var e,n=t.x,r=t.y;if(this.sphere)e=this.a*(this.g-r);else{var i=Oq(this.e0,this.e1,this.e2,this.e3,r);e=this.a*(this.g-i)}var o=this.ns*Ez(n-this.long0),a=this.x0+e*Math.sin(o),s=this.y0+this.rh-e*Math.cos(o);return t.x=a,t.y=s,t}function iH(t){var e,n,r,i;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var o=0;if(0!==n&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere)return i=Ez(this.long0+o/this.ns),r=Rq(this.g-n/this.a),t.x=i,t.y=r,t;var a=this.g-n/this.a;return r=Dq(a,this.e0,this.e1,this.e2,this.e3),i=Ez(this.long0+o/this.ns),t.x=i,t.y=r,t}var oH=["Equidistant_Conic","eqdc"],aH={init:nH,forward:rH,inverse:iH,names:oH};function sH(){this.R=this.a}function lH(t){var e,n,r=t.x,i=t.y,o=Ez(r-this.long0);Math.abs(i)<=IB&&(e=this.x0+this.R*o,n=this.y0);var a=aV(2*Math.abs(i/Math.PI));(Math.abs(o)<=IB||Math.abs(Math.abs(i)-TB)<=IB)&&(e=this.x0,n=i>=0?this.y0+Math.PI*this.R*Math.tan(.5*a):this.y0+Math.PI*this.R*-Math.tan(.5*a));var s=.5*Math.abs(Math.PI/o-o/Math.PI),l=s*s,u=Math.sin(a),c=Math.cos(a),h=c/(u+c-1),d=h*h,f=h*(2/u-1),p=f*f,g=Math.PI*this.R*(s*(h-p)+Math.sqrt(l*(h-p)*(h-p)-(p+l)*(d-p)))/(p+l);o<0&&(g=-g),e=this.x0+g;var m=l+h;return g=Math.PI*this.R*(f*m-s*Math.sqrt((p+l)*(l+1)-m*m))/(p+l),n=i>=0?this.y0+g:this.y0-g,t.x=e,t.y=n,t}function uH(t){var e,n,r,i,o,a,s,l,u,c,h,d,f;return t.x-=this.x0,t.y-=this.y0,h=Math.PI*this.R,r=t.x/h,i=t.y/h,o=r*r+i*i,a=-Math.abs(i)*(1+o),s=a-2*i*i+r*r,l=-2*a+1+2*i*i+o*o,f=i*i/l+(2*s*s*s/l/l/l-9*a*s/l/l)/27,u=(a-s*s/3/l)/l,c=2*Math.sqrt(-u/3),h=3*f/u/c,Math.abs(h)>1&&(h=h>=0?1:-1),d=Math.acos(h)/3,n=t.y>=0?(-c*Math.cos(d+Math.PI/3)-s/3/l)*Math.PI:-(-c*Math.cos(d+Math.PI/3)-s/3/l)*Math.PI,e=Math.abs(r)<IB?this.long0:Ez(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(r*r-i*i)+o*o))/2/r),t.x=e,t.y=n,t}var cH=["Van_der_Grinten_I","VanDerGrinten","vandg"],hH={init:sH,forward:lH,inverse:uH,names:cH};function dH(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function fH(t){var e,n,r,i,o,a,s,l,u,c,h,d,f,p,g,m,y,v,b,_,x,w,S,E=t.x,C=t.y,M=Math.sin(t.y),T=Math.cos(t.y),A=Ez(E-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=IB?(t.x=this.x0+this.a*(TB-C)*Math.sin(A),t.y=this.y0-this.a*(TB-C)*Math.cos(A),t):Math.abs(this.sin_p12+1)<=IB?(t.x=this.x0+this.a*(TB+C)*Math.sin(A),t.y=this.y0+this.a*(TB+C)*Math.cos(A),t):(v=this.sin_p12*M+this.cos_p12*T*Math.cos(A),m=Math.acos(v),y=m?m/Math.sin(m):1,t.x=this.x0+this.a*y*T*Math.sin(A),t.y=this.y0+this.a*y*(this.cos_p12*M-this.sin_p12*T*Math.cos(A)),t):(e=kq(this.es),n=Iq(this.es),r=Pq(this.es),i=Lq(this.es),Math.abs(this.sin_p12-1)<=IB?(o=this.a*Oq(e,n,r,i,TB),a=this.a*Oq(e,n,r,i,C),t.x=this.x0+(o-a)*Math.sin(A),t.y=this.y0-(o-a)*Math.cos(A),t):Math.abs(this.sin_p12+1)<=IB?(o=this.a*Oq(e,n,r,i,TB),a=this.a*Oq(e,n,r,i,C),t.x=this.x0+(o+a)*Math.sin(A),t.y=this.y0+(o+a)*Math.cos(A),t):(s=M/T,l=Nq(this.a,this.e,this.sin_p12),u=Nq(this.a,this.e,M),c=Math.atan((1-this.es)*s+this.es*l*this.sin_p12/(u*T)),h=Math.atan2(Math.sin(A),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(A)),b=0===h?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(h)-Math.PI)<=IB?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(A)*Math.cos(c)/Math.sin(h)),d=this.e*this.sin_p12/Math.sqrt(1-this.es),f=this.e*this.cos_p12*Math.cos(h)/Math.sqrt(1-this.es),p=d*f,g=f*f,_=b*b,x=_*b,w=x*b,S=w*b,m=l*b*(1-_*g*(1-g)/6+x/8*p*(1-2*g)+w/120*(g*(4-7*g)-3*d*d*(1-7*g))-S/48*p),t.x=this.x0+m*Math.sin(h),t.y=this.y0+m*Math.cos(h),t))}function pH(t){var e,n,r,i,o,a,s,l,u,c,h,d,f,p,g,m,y,v,b,_,x,w,S,E;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if(e=Math.sqrt(t.x*t.x+t.y*t.y),e>2*TB*this.a)return;return n=e/this.a,r=Math.sin(n),i=Math.cos(n),o=this.long0,Math.abs(e)<=IB?a=this.lat0:(a=aV(i*this.sin_p12+t.y*r*this.cos_p12/e),s=Math.abs(this.lat0)-TB,o=Math.abs(s)<=IB?this.lat0>=0?Ez(this.long0+Math.atan2(t.x,-t.y)):Ez(this.long0-Math.atan2(-t.x,t.y)):Ez(this.long0+Math.atan2(t.x*r,e*this.cos_p12*i-t.y*this.sin_p12*r))),t.x=o,t.y=a,t}return l=kq(this.es),u=Iq(this.es),c=Pq(this.es),h=Lq(this.es),Math.abs(this.sin_p12-1)<=IB?(d=this.a*Oq(l,u,c,h,TB),e=Math.sqrt(t.x*t.x+t.y*t.y),f=d-e,a=Dq(f/this.a,l,u,c,h),o=Ez(this.long0+Math.atan2(t.x,-1*t.y)),t.x=o,t.y=a,t):Math.abs(this.sin_p12+1)<=IB?(d=this.a*Oq(l,u,c,h,TB),e=Math.sqrt(t.x*t.x+t.y*t.y),f=e-d,a=Dq(f/this.a,l,u,c,h),o=Ez(this.long0+Math.atan2(t.x,t.y)),t.x=o,t.y=a,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),m=Math.atan2(t.x,t.y),p=Nq(this.a,this.e,this.sin_p12),y=Math.cos(m),v=this.e*this.cos_p12*y,b=-v*v/(1-this.es),_=3*this.es*(1-b)*this.sin_p12*this.cos_p12*y/(1-this.es),x=e/p,w=x-b*(1+b)*Math.pow(x,3)/6-_*(1+3*b)*Math.pow(x,4)/24,S=1-b*w*w/2-x*w*w*w/6,g=Math.asin(this.sin_p12*Math.cos(w)+this.cos_p12*Math.sin(w)*y),o=Ez(this.long0+Math.asin(Math.sin(m)*Math.sin(w)/Math.cos(g))),E=Math.sin(g),a=Math.atan2((E-this.es*S*this.sin_p12)*Math.tan(g),E*(1-this.es)),t.x=o,t.y=a,t)}var gH=["Azimuthal_Equidistant","aeqd"],mH={init:dH,forward:fH,inverse:pH,names:gH};function yH(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function vH(t){var e,n,r,i,o,a,s,l,u=t.x,c=t.y;return r=Ez(u-this.long0),e=Math.sin(c),n=Math.cos(c),i=Math.cos(r),a=this.sin_p14*e+this.cos_p14*n*i,o=1,(a>0||Math.abs(a)<=IB)&&(s=this.a*o*n*Math.sin(r),l=this.y0+this.a*o*(this.cos_p14*e-this.sin_p14*n*i)),t.x=s,t.y=l,t}function bH(t){var e,n,r,i,o,a,s;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),n=aV(e/this.a),r=Math.sin(n),i=Math.cos(n),a=this.long0,Math.abs(e)<=IB?(s=this.lat0,t.x=a,t.y=s,t):(s=aV(i*this.sin_p14+t.y*r*this.cos_p14/e),o=Math.abs(this.lat0)-TB,Math.abs(o)<=IB?(a=this.lat0>=0?Ez(this.long0+Math.atan2(t.x,-t.y)):Ez(this.long0-Math.atan2(-t.x,t.y)),t.x=a,t.y=s,t):(a=Ez(this.long0+Math.atan2(t.x*r,e*this.cos_p14*i-t.y*this.sin_p14*r)),t.x=a,t.y=s,t))}var _H=["ortho"],xH={init:yH,forward:vH,inverse:bH,names:_H},wH={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},SH={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function EH(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=TB-NB/2?this.face=wH.TOP:this.lat0<=-(TB-NB/2)?this.face=wH.BOTTOM:Math.abs(this.long0)<=NB?this.face=wH.FRONT:Math.abs(this.long0)<=TB+NB?this.face=this.long0>0?wH.RIGHT:wH.LEFT:this.face=wH.BACK,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function CH(t){var e,n,r,i,o,a,s={x:0,y:0},l={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,n=t.x,this.face===wH.TOP)i=TB-e,n>=NB&&n<=TB+NB?(l.value=SH.AREA_0,r=n-TB):n>TB+NB||n<=-(TB+NB)?(l.value=SH.AREA_1,r=n>0?n-DB:n+DB):n>-(TB+NB)&&n<=-NB?(l.value=SH.AREA_2,r=n+TB):(l.value=SH.AREA_3,r=n);else if(this.face===wH.BOTTOM)i=TB+e,n>=NB&&n<=TB+NB?(l.value=SH.AREA_0,r=-n+TB):n<NB&&n>=-NB?(l.value=SH.AREA_1,r=-n):n<-NB&&n>=-(TB+NB)?(l.value=SH.AREA_2,r=-n-TB):(l.value=SH.AREA_3,r=n>0?-n+DB:-n-DB);else{var u,c,h,d,f,p,g;this.face===wH.RIGHT?n=AH(n,+TB):this.face===wH.BACK?n=AH(n,+DB):this.face===wH.LEFT&&(n=AH(n,-TB)),d=Math.sin(e),f=Math.cos(e),p=Math.sin(n),g=Math.cos(n),u=f*g,c=f*p,h=d,this.face===wH.FRONT?(i=Math.acos(u),r=TH(i,h,c,l)):this.face===wH.RIGHT?(i=Math.acos(c),r=TH(i,h,-u,l)):this.face===wH.BACK?(i=Math.acos(-u),r=TH(i,h,-c,l)):this.face===wH.LEFT?(i=Math.acos(-c),r=TH(i,h,u,l)):(i=r=0,l.value=SH.AREA_0)}return a=Math.atan(12/DB*(r+Math.acos(Math.sin(r)*Math.cos(NB))-TB)),o=Math.sqrt((1-Math.cos(i))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(r))))),l.value===SH.AREA_1?a+=TB:l.value===SH.AREA_2?a+=DB:l.value===SH.AREA_3&&(a+=1.5*DB),s.x=o*Math.cos(a),s.y=o*Math.sin(a),s.x=s.x*this.a+this.x0,s.y=s.y*this.a+this.y0,t.x=s.x,t.y=s.y,t}function MH(t){var e,n,r,i,o,a,s,l,u,c,h,d,f={lam:0,phi:0},p={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,n=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?p.value=SH.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(p.value=SH.AREA_1,e-=TB):t.x<0&&-t.x>=Math.abs(t.y)?(p.value=SH.AREA_2,e=e<0?e+DB:e-DB):(p.value=SH.AREA_3,e+=TB),u=DB/12*Math.tan(e),o=Math.sin(u)/(Math.cos(u)-1/Math.sqrt(2)),a=Math.atan(o),r=Math.cos(e),i=Math.tan(n),s=1-r*r*i*i*(1-Math.cos(Math.atan(1/Math.cos(a)))),s<-1?s=-1:s>1&&(s=1),this.face===wH.TOP)l=Math.acos(s),f.phi=TB-l,p.value===SH.AREA_0?f.lam=a+TB:p.value===SH.AREA_1?f.lam=a<0?a+DB:a-DB:p.value===SH.AREA_2?f.lam=a-TB:f.lam=a;else if(this.face===wH.BOTTOM)l=Math.acos(s),f.phi=l-TB,p.value===SH.AREA_0?f.lam=-a+TB:p.value===SH.AREA_1?f.lam=-a:p.value===SH.AREA_2?f.lam=-a-TB:f.lam=a<0?-a-DB:-a+DB;else{var g,m,y;g=s,u=g*g,y=u>=1?0:Math.sqrt(1-u)*Math.sin(a),u+=y*y,m=u>=1?0:Math.sqrt(1-u),p.value===SH.AREA_1?(u=m,m=-y,y=u):p.value===SH.AREA_2?(m=-m,y=-y):p.value===SH.AREA_3&&(u=m,m=y,y=-u),this.face===wH.RIGHT?(u=g,g=-m,m=u):this.face===wH.BACK?(g=-g,m=-m):this.face===wH.LEFT&&(u=g,g=m,m=-u),f.phi=Math.acos(-y)-TB,f.lam=Math.atan2(m,g),this.face===wH.RIGHT?f.lam=AH(f.lam,-TB):this.face===wH.BACK?f.lam=AH(f.lam,-DB):this.face===wH.LEFT&&(f.lam=AH(f.lam,+TB))}0!==this.es&&(c=f.phi<0?1:0,h=Math.tan(f.phi),d=this.b/Math.sqrt(h*h+this.one_minus_f_squared),f.phi=Math.atan(Math.sqrt(this.a*this.a-d*d)/(this.one_minus_f*d)),c&&(f.phi=-f.phi));return f.lam+=this.long0,t.x=f.lam,t.y=f.phi,t}function TH(t,e,n,r){var i;return t<IB?(r.value=SH.AREA_0,i=0):(i=Math.atan2(e,n),Math.abs(i)<=NB?r.value=SH.AREA_0:i>NB&&i<=TB+NB?(r.value=SH.AREA_1,i-=TB):i>TB+NB||i<=-(TB+NB)?(r.value=SH.AREA_2,i=i>=0?i-DB:i+DB):(r.value=SH.AREA_3,i+=TB)),i}function AH(t,e){var n=t+e;return n<-DB?n+=RB:n>+DB&&(n-=RB),n}var OH=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"],kH={init:EH,forward:CH,inverse:MH,names:OH},IH=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],PH=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],LH=.8487,NH=1.3523,RH=LB/5,DH=1/RH,FH=18,jH=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},BH=function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])};function zH(t,e,n,r){for(var i=e;r;--r){var o=t(i);if(i-=o,Math.abs(o)<n)break}return i}function UH(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function GH(t){var e=Ez(t.x-this.long0),n=Math.abs(t.y),r=Math.floor(n*RH);r<0?r=0:r>=FH&&(r=FH-1),n=LB*(n-DH*r);var i={x:jH(IH[r],n)*e,y:jH(PH[r],n)};return t.y<0&&(i.y=-i.y),i.x=i.x*this.a*LH+this.x0,i.y=i.y*this.a*NH+this.y0,i}function qH(t){var e={x:(t.x-this.x0)/(this.a*LH),y:Math.abs(t.y-this.y0)/(this.a*NH)};if(e.y>=1)e.x/=IH[FH][0],e.y=t.y<0?-TB:TB;else{var n=Math.floor(e.y*FH);for(n<0?n=0:n>=FH&&(n=FH-1);;)if(PH[n][0]>e.y)--n;else{if(!(PH[n+1][0]<=e.y))break;++n}var r=PH[n],i=5*(e.y-r[0])/(PH[n+1][0]-r[0]);i=zH((function(t){return(jH(r,t)-e.y)/BH(r,t)}),i,IB,100),e.x/=jH(IH[n],i),e.y=(5*n+i)*PB,t.y<0&&(e.y=-e.y)}return e.x=Ez(e.x+this.long0),e}var VH=["Robinson","robin"],HH={init:UH,forward:GH,inverse:qH,names:VH};function WH(){this.name="geocent"}function YH(t){var e=hU(t,this.es,this.a);return e}function XH(t){var e=dU(t,this.es,this.a,this.b);return e}var JH=["Geocentric","geocentric","geocent","Geocent"],ZH={init:WH,forward:YH,inverse:XH,names:JH},KH={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},QH={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function $H(){if(Object.keys(QH).forEach(function(t){if("undefined"===typeof this[t])this[t]=QH[t].def;else{if(QH[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);QH[t].num&&(this[t]=parseFloat(this[t]))}QH[t].degrees&&(this[t]=this[t]*PB)}.bind(this)),Math.abs(Math.abs(this.lat0)-TB)<IB?this.mode=this.lat0<0?KH.S_POLE:KH.N_POLE:Math.abs(this.lat0)<IB?this.mode=KH.EQUIT:(this.mode=KH.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)}function tW(t){t.x-=this.long0;var e,n,r,i,o=Math.sin(t.y),a=Math.cos(t.y),s=Math.cos(t.x);switch(this.mode){case KH.OBLIQ:n=this.sinph0*o+this.cosph0*a*s;break;case KH.EQUIT:n=a*s;break;case KH.S_POLE:n=-o;break;case KH.N_POLE:n=o;break}switch(n=this.pn1/(this.p-n),e=n*a*Math.sin(t.x),this.mode){case KH.OBLIQ:n*=this.cosph0*o-this.sinph0*a*s;break;case KH.EQUIT:n*=o;break;case KH.N_POLE:n*=-a*s;break;case KH.S_POLE:n*=a*s;break}return r=n*this.cg+e*this.sg,i=1/(r*this.sw*this.h1+this.cw),e=(e*this.cg-n*this.sg)*this.cw*i,n=r*i,t.x=e*this.a,t.y=n*this.a,t}function eW(t){t.x/=this.a,t.y/=this.a;var e,n,r,i={x:t.x,y:t.y};r=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*r,n=this.pn1*t.y*this.cw*r,t.x=e*this.cg+n*this.sg,t.y=n*this.cg-e*this.sg;var o=MG(t.x,t.y);if(Math.abs(o)<IB)i.x=0,i.y=t.y;else{var a,s;switch(s=1-o*o*this.pfact,s=(this.p-Math.sqrt(s))/(this.pn1/o+o/this.pn1),a=Math.sqrt(1-s*s),this.mode){case KH.OBLIQ:i.y=Math.asin(a*this.sinph0+t.y*s*this.cosph0/o),t.y=(a-this.sinph0*Math.sin(i.y))*o,t.x*=s*this.cosph0;break;case KH.EQUIT:i.y=Math.asin(t.y*s/o),t.y=a*o,t.x*=s;break;case KH.N_POLE:i.y=Math.asin(a),t.y=-t.y;break;case KH.S_POLE:i.y=-Math.asin(a);break}i.x=Math.atan2(t.x,t.y)}return t.x=i.x+this.long0,t.y=i.y,t}var nW=["Tilted_Perspective","tpers"],rW={init:$H,forward:tW,inverse:eW,names:nW};function iW(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function oW(t){var e,n,r,i,o=t.x,a=t.y;if(o-=this.long0,"ellipse"===this.shape){a=Math.atan(this.radius_p2*Math.tan(a));var s=this.radius_p/MG(this.radius_p*Math.cos(a),Math.sin(a));if(n=s*Math.cos(o)*Math.cos(a),r=s*Math.sin(o)*Math.cos(a),i=s*Math.sin(a),(this.radius_g-n)*n-r*r-i*i*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(r/MG(i,e)),t.y=this.radius_g_1*Math.atan(i/e)):(t.x=this.radius_g_1*Math.atan(r/e),t.y=this.radius_g_1*Math.atan(i/MG(r,e)))}else"sphere"===this.shape&&(e=Math.cos(a),n=Math.cos(o)*e,r=Math.sin(o)*e,i=Math.sin(a),e=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(r/MG(i,e)),t.y=this.radius_g_1*Math.atan(i/e)):(t.x=this.radius_g_1*Math.atan(r/e),t.y=this.radius_g_1*Math.atan(i/MG(r,e))));return t.x=t.x*this.a,t.y=t.y*this.a,t}function aW(t){var e,n,r,i,o=-1,a=0,s=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),a=Math.tan(t.x/this.radius_g_1)*MG(1,s)):(a=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*MG(1,a));var l=s/this.radius_p;if(e=a*a+l*l+o*o,n=2*this.radius_g*o,r=n*n-4*e*this.C,r<0)return t.x=Number.NaN,t.y=Number.NaN,t;i=(-n-Math.sqrt(r))/(2*e),o=this.radius_g+i*o,a*=i,s*=i,t.x=Math.atan2(a,o),t.y=Math.atan(s*Math.cos(t.x)/o),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),a=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+s*s)):(a=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+a*a)),e=a*a+s*s+o*o,n=2*this.radius_g*o,r=n*n-4*e*this.C,r<0)return t.x=Number.NaN,t.y=Number.NaN,t;i=(-n-Math.sqrt(r))/(2*e),o=this.radius_g+i*o,a*=i,s*=i,t.x=Math.atan2(a,o),t.y=Math.atan(s*Math.cos(t.x)/o)}return t.x=t.x+this.long0,t}var sW=["Geostationary Satellite View","Geostationary_Satellite","geos"],lW={init:iW,forward:oW,inverse:aW,names:sW},uW=function(t){t.Proj.projections.add(EG),t.Proj.projections.add(FG),t.Proj.projections.add(GG),t.Proj.projections.add(tq),t.Proj.projections.add(aq),t.Proj.projections.add(hq),t.Proj.projections.add(vq),t.Proj.projections.add(Sq),t.Proj.projections.add(Aq),t.Proj.projections.add(Uq),t.Proj.projections.add(oV),t.Proj.projections.add(dV),t.Proj.projections.add(yV),t.Proj.projections.add(SV),t.Proj.projections.add(AV),t.Proj.projections.add(NV),t.Proj.projections.add(BV),t.Proj.projections.add(VV),t.Proj.projections.add(ZV),t.Proj.projections.add(eH),t.Proj.projections.add(aH),t.Proj.projections.add(hH),t.Proj.projections.add(mH),t.Proj.projections.add(xH),t.Proj.projections.add(kH),t.Proj.projections.add(HH),t.Proj.projections.add(ZH),t.Proj.projections.add(rW),t.Proj.projections.add(lW)};kU.defaultDatum="WGS84",kU.Proj=uU,kU.WGS84=new kU.Proj("WGS84"),kU.Point=rG,kU.toPoint=xU,kU.defs=cz,kU.nadgrid=Kz,kU.transform=CU,kU.mgrs=BU,kU.version="__VERSION__",uW(kU);var cW=kU;window.proj4=cW,window.Proj4js=cW,mB.a.Proj=mB.a.Proj||{},mB.a.Proj._isProj4Obj=function(t){return"undefined"!==typeof t.inverse&&"undefined"!==typeof t.forward},mB.a.Proj.Projection=mB.a.Class.extend({initialize:function(t,e,n,r){var i=mB.a.Proj._isProj4Obj(t);this._proj=i?t:this._projFromCodeDef(t,e);var o=n;mB.a.Util.isArray(n)&&(o=mB.a.bounds(n)),this.bounds=i?e:o,this.wrapLng=r},project:function(t){var e=this._proj.forward([t.lng,t.lat]);return new mB.a.Point(e[0],e[1])},unproject:function(t,e){this.bounds&&!this.wrapLng&&(t.x=t.x<this.bounds.min.x?this.bounds.min.x:t.x>this.bounds.max.x?this.bounds.max.x:t.x,t.y=t.y<this.bounds.min.y?this.bounds.min.y:t.y>this.bounds.max.y?this.bounds.max.y:t.y);var n=this._proj.inverse([t.x,t.y]);return new mB.a.LatLng(n[1],n[0],e)},_projFromCodeDef:function(t,e){if(e)cW.defs(t,e);else if(void 0===cW.defs[t]){var n=t.split(":");if(n.length>3&&(t=n[n.length-3]+":"+n[n.length-1]),void 0===cW.defs[t])throw"No projection definition for code "+t}return cW(t)},getUnits:function(){return this._proj.oProj.units||"degrees"}});var hW=mB.a.Class.extend({includes:mB.a.CRS,options:{transformation:new mB.a.Transformation(1,0,-1,0)},initialize:function(t,e){var n,r,i;if(e.bounds&&4===e.bounds.length){const[t,n,r,i]=e.bounds;e.bounds=[[t,n],[r,i]]}if(mB.a.Proj._isProj4Obj(t)?(r=t,n=r.srsCode,e=e||{},this.projection=new mB.a.Proj.Projection(r,e.bounds,e.wrapLng)):(n=t,e=e||{},i=e.def||"",this.projection=new mB.a.Proj.Projection(n,i,e.bounds,e.wrapLng)),mB.a.Util.setOptions(this,e),this.options.wrapLng&&(this.wrapLng=this.options.wrapLng),this.code=n,this.transformation=this.options.transformation,this.options.dpi=this.options.dpi||96,this.options.bounds&&(this.options.bounds=mB.a.bounds(this.options.bounds)),!this.options.origin&&this.options.bounds&&(this.options.origin=[this.options.bounds.min.x,this.options.bounds.max.y]),this.options.origin&&(this.options.origin instanceof mB.a.Point&&(this.options.origin=[this.options.origin.x,this.options.origin.y]),this.transformation=new mB.a.Transformation(1,-this.options.origin[0],-1,this.options.origin[1])),this.options.scales&&this.options.scales.length>0)this.scales=this.options.scales,this._scales=this._toProj4Scales(this.options.scales,this.options.dpi);else if(this.options.scaleDenominators&&this.options.scaleDenominators.length>0){this.scales=[];for(let t=0;t<this.options.scaleDenominators.length;t++)this.scales[t]=1/this.options.scaleDenominators[t];this._scales=this._toProj4Scales(this.scales,this.options.dpi)}else if(this.options.resolutions&&this.options.resolutions.length>0){this._scales=[];for(let t=this.options.resolutions.length-1;t>=0;t--)this.options.resolutions[t]&&(this._scales[t]=1/this.options.resolutions[t])}else this.options.bounds&&(this._scales=this._getDefaultProj4ScalesByBounds(this.options.bounds));this._rectify(),this.infinite=!this.options.bounds},_rectify:function(){if(this._scales&&(this.resolutions||(this.resolutions=[],this.resolutions=this._proj4ScalesToResolutions(this._scales)),!this.scales)){this.scales=[];for(let e=0;e<this.resolutions.length;e++){var t=this.resolutions[e]*this.options.dpi*(1/.0254)*this._getMeterPerMapUnit(this.projection.getUnits());this.scales[e]=1/t}}},scale:function(t){var e,n,r,i,o=Math.floor(t);return t===o?this._scales[t]:(e=this._scales[o],n=this._scales[o+1],r=n-e,i=t-o,e+r*i)},zoom:function(t){var e,n,r,i=this._closestElement(this._scales,t),o=this._scales.indexOf(i);return i?t===i?o:(n=o+1,e=this._scales[n],void 0===e?o:(r=e-i,(t-i)/r+o)):0},distance:mB.a.CRS.Earth.distance,R:mB.a.CRS.Earth.R,_closestElement:function(t,e){for(var n,r=t.length;r--;)t[r]<=e&&(void 0===n||n<t[r])&&(n=t[r]);return n},_proj4ScalesToResolutions(t){var e=[];if(!t)return e;for(var n=0;n<t.length;n++)e[n]=1/t[n];return e},_toProj4Scales:function(t,e){var n=[];if(!t)return n;for(var r=0;r<t.length;r++){var i=this.projection?this._getMeterPerMapUnit(this.projection.getUnits()):1;n[r]=1/(.0254/((e||96)*t[r])/i)}return n},_getMeterPerMapUnit:function(t){var e=6378137,n=1;return"meter"===t?n=1:"degrees"===t||"degree"===t?n=2*Math.PI*e/360:"kilometer"===t?n=.001:"inch"===t?n=1/.025399999918:"feet"===t&&(n=.3048),n},_getDefaultProj4ScalesByBounds:function(t){if(!t)return[];for(var e=t.getSize(),n=Math.max(e.x,e.y),r=n/256,i=[],o=23,a=0;a<o;a++)i[a]=Math.pow(2,a)/r;return i}}),dW=function(t,e){return new hW(t,e)};let fW={Prefix:"Leaflet with <span>© <a href='https://iclient.supermap.io' title='SuperMap iClient' target='_blank'>SuperMap iClient</a></span>",Common:{attribution:"Map Data <span>© <a href='http://support.supermap.com.cn/product/iServer.aspx' title='SuperMap iServer' target='_blank'>SuperMap iServer</a></span>"},Online:{attribution:"Map Data <span>© <a href='https://www.supermapol.com' title='SuperMap Online' target='_blank'>SuperMap Online</a></span>"},ECharts:{attribution:"© 2018 百度 ECharts"},MapV:{attribution:"© 2018 百度 MapV "},Turf:{attribution:"<span>© <a href='https://turfjs.org/' title='turfjs' target='_blank'>turfjs</a></span>"},Baidu:{attribution:"Map Data © 2018 Baidu - GS(2016)2089号 - Data © 长地万方"},Cloud:{attribution:"Map Data ©2014 SuperMap - GS(2014)6070号-data©Navinfo"},Tianditu:{attribution:"Map Data <a href='https://www.tianditu.gov.cn' target='_blank'><img style='background-color:transparent;bottom:2px;opacity:1;' src='https://api.tianditu.gov.cn/img/map/logo.png' width='53px' height='22px' opacity='0'></a>"}};var pW=fW;function gW(t){t.map(t=>(t.defaultFunction=t.prototype.toGeoJSON,t.include({toGeoJSON:function(e){return t.defaultFunction.call(this,e||10)}}),t))}mB.a.Control.Attribution.include({options:{position:"bottomright",prefix:pW.Prefix}}),mB.a.Map.include({latLngToAccurateContainerPoint:function(t){var e=this.project(mB.a.latLng(t)),n=e._subtract(this.getPixelOrigin());return mB.a.point(n).add(this._getMapPanePos())}}),gW([mB.a.Polyline,mB.a.Polygon,mB.a.Marker,mB.a.CircleMarker,mB.a.Circle,mB.a.LayerGroup]);var mW=mB.a.Evented.extend({options:{url:null,proxy:null,withCredentials:!1,crossOrigin:null},initialize:function(t,e){t&&(t=t.indexOf("/")!==t.length-1?t:t.substr(0,t.length-1)),this.url=t,mB.a.setOptions(this,e),this.fire("initialized",this)},destroy:function(){this.fire("destroy",this)}}),yW=mW.extend({options:{projection:null},initialize:function(t,e){e=e||{},mB.a.setOptions(this,e),e.projection&&(this.options.projection=e.projection),mW.prototype.initialize.call(this,t,e)},getMapInfo:function(t){var e=this,n=new Wi(e.url,{proxy:e.options.proxy,withCredentials:e.options.withCredentials,crossOrigin:e.options.crossOrigin,headers:e.options.headers,projection:e.options.projection});n.processAsync(t)},getWkt(t){var e=this,n=new Wi(e.url+"/prjCoordSys.wkt",{proxy:e.options.proxy,withCredentials:e.options.withCredentials,withoutFormatSuffix:!0,crossOrigin:e.options.crossOrigin,headers:e.options.headers,projection:e.options.projection});n.processAsync(t)},getTilesets:function(t){var e=this,n=new Jo(e.url,{proxy:e.options.proxy,withCredentials:e.options.withCredentials,crossOrigin:e.options.crossOrigin,headers:e.options.headers,eventListeners:{scope:e,processCompleted:t,processFailed:t}});n.processAsync()}}),vW=function(t,e){return new yW(t,e)},bW=mB.a.Control.extend({options:{layer:null,position:"topleft",title:"switch tile version",tooltip:"top",collapsed:!0,nextText:"+",lastText:"-",ico:"V",orientation:"horizontal",switch:!0},onAdd:function(){"vertical"!==this.options.orientation&&(this.options.orientation="horizontal");var t=this._initLayout();return this.options.layer&&this.setLayer(this.options.layer),t},setContent:function(t){var e=mB.a.Util.extend({},t);this.setVersionName(e.desc).setToolTip(e.desc)},setVersionName:function(t){var e=t;return t||(e=this.getValue()),this._sliderValue.innerHTML=e,this},setToolTip:function(t){return this.tooltip.innerHTML=t,this},updateLength:function(t){t>0&&(this.length=t,this.max=this.length-1,this.slider.setAttribute("max",this.max))},setLayer:function(t){t&&(this.options.layer=t);var e=this,n=e.options.layer;n.on("tilesetsinfoloaded",(function(t){var n=t&&t.tileVersions;e.update(n)})),n.on("tileversionschanged",(function(t){var n=t&&t.tileVersion;e.setContent(n)})),e.getTileSetsInfo()},update:function(t){this.tileVersions=t||[],this.updateLength(this.tileVersions.length)},getTileSetsInfo:function(){var t=this;t.options.layer&&new yW(t.options.layer._url).getTilesets((function(e){t.options.layer.setTileSetsInfo(e.result)}))},removeLayer:function(){this.options.layer=null},nextTilesVersion:function(){return this.firstLoad?(this.options.layer.nextTilesVersion(),this.firstLoad=!1,this):(parseInt(this.slider.value)>this.max-1||(this.slider.value=parseInt(this.slider.value)+1,this.options.layer.nextTilesVersion()),this)},lastTilesVersion:function(){return parseInt(this.slider.value)<this.min+1||(this.slider.value=parseInt(this.slider.value)-1,this.options.layer.lastTilesVersion()),this},tilesVersion:function(t){for(var e=this.options.layer,n=this.tileVersions,r=n.length,i=0;i<r;i++)if(n[i].name==t){e.updateCurrentTileSetsIndex(i),e.changeTilesVersion();break}},getValue:function(){return this.slider.value},getVersion:function(){var t=this.tileVersions[this.getValue()];return t&&t.name},_initLayout:function(){var t="leaflet-control-ctv";this._container=mB.a.DomUtil.create("div",t+" "+t+"-"+this.options.orientation),this._sliderBtn=mB.a.DomUtil.create("a",t+"-toggle",this._container),this._sliderBtn.setAttribute("title",this.options.title),this._sliderBtn.innerHTML=this.options.ico,this._sliderValue=mB.a.DomUtil.create("p",t+"-value",this._container),this._sliderValue.innerHTML=this.options.ico;var e="leaflet-ctv-slider";return this._sliderContent=mB.a.DomUtil.create("div",e+"-main  tooltip",this._container),this.tooltip=mB.a.DomUtil.create("span","tooltip-text  tooltip-"+this.options.tooltip,this._sliderContent),this.tooltip.innerHTML=this.options.ico,this.options.switch&&(this._next=mB.a.DomUtil.create("a",e+"-incdec "+e+"-next",this._sliderContent),this._next.innerHTML=this.options.nextText,mB.a.DomEvent.on(this._next,"click",this.nextTilesVersion,this),mB.a.DomUtil.addClass(this._container,t+"-incdec")),this._sliderContainer=mB.a.DomUtil.create("div",e+"-container",this._sliderContent),this.slider=mB.a.DomUtil.create("input",e,this._sliderContainer),this.min=null==this.min||isNaN(this.min)?0:parseInt(this.min),this.slider.setAttribute("title",this.options.title),this.slider.setAttribute("id","slider"),this.slider.setAttribute("type","range"),this.slider.setAttribute("min",this.min),this.slider.setAttribute("max",0),this.slider.setAttribute("step",1),this.slider.setAttribute("value",0),this.firstLoad=!0,"oninput"in this.slider||"onchange"in this.slider?mB.a.DomEvent.on(this.slider,"change",this._tilesVersion,this):this.slider.onpropertychange=this._tilesVersion,this.options.switch&&(this._last=mB.a.DomUtil.create("a",e+"-incdec "+e+"-last",this._sliderContent),this._last.innerHTML=this.options.lastText,mB.a.DomEvent.on(this._last,"click",this.lastTilesVersion,this)),"vertical"===this.options.orientation?(this.slider.style.width="170px",this._sliderContainer.style.height="170px"):this._sliderContainer.style.width="150px",mB.a.DomEvent.disableClickPropagation(this._container),this.options.collapsed?(mB.a.Browser.android||mB.a.DomEvent.on(this._container,"mouseenter",this._expand,this).on(this._container,"mouseleave",this._collapse,this),mB.a.Browser.touch?mB.a.DomEvent.on(this._sliderBtn,"click",mB.a.DomEvent.stop).on(this._sliderBtn,"click",this._expand,this):mB.a.DomEvent.on(this._sliderBtn,"focus",this._expand,this)):this._expand(),this._container},_expand:function(){mB.a.DomUtil.addClass(this._container,"leaflet-control-ctv-expanded")},_collapse:function(){mB.a.DomUtil.removeClass(this._container,"leaflet-control-ctv-expanded")},_tilesVersion:function(){var t=this.getVersion();this.tilesVersion(t)}});mB.a.Map.mergeOptions({changeTileVersionControl:!1}),mB.a.Map.addInitHook((function(){this.options.changeTileVersionControl&&(this.changeTileVersionControl=new bW,this.addControl(this.changeTileVersionControl))}));var _W=function(t){return new bW(t)},xW=mB.a.Control.extend({options:{position:"bottomright",imageUrl:null,link:null,width:null,height:null,alt:"SuperMap iClient"},onAdd:function(){var t=mB.a.DomUtil.create("div","iclient-leaflet-logo");t.style.marginTop=0,t.style.marginBottom=0,t.style.marginLeft=0,t.style.marginRight=0;var e=Me;this.options.imageUrl&&(e=this.options.imageUrl);var n=this.options.alt,r="94px",i="29px",o="width:"+r+";height:"+i+";";this.options.imageUrl&&(r=this.options.width,i=this.options.height,o="width:"+r+";height:"+i+";",r&&i||(o=""));var a=this.options.link;return t.innerHTML="<a href='"+a+"' target='_blank' style='border: none;display: block;'><img src="+e+" alt='"+n+"' style='border: none;"+o+"margin-right:5px;margin-bottom:2px;white-space: nowrap'></a>",t}});mB.a.Map.mergeOptions({logoControl:!0}),mB.a.Map.addInitHook((function(){!this._logoAdded&&this.options.logoControl&&(!0===this.options.logoControl?this.logoControl=new xW:this.options.logoControl instanceof mB.a.Control&&(this.logoControl=this.options.logoControl),this.logoControl&&(this.addControl(this.logoControl),this._logoAdded=!0))}));var wW=function(t){return new xW(t)};const SW=function(t){return"[object Array]"==Object.prototype.toString.call(t)},EW={toSuperMapBounds(t){return t&&-1!==["FeatureCollection","Feature"].indexOf(t.type)&&(t=mB.a.geoJSON(t).getBounds()),t instanceof mB.a.LatLngBounds?new Qt(t.getSouthWest().lng,t.getSouthWest().lat,t.getNorthEast().lng,t.getNorthEast().lat):t instanceof mB.a.Bounds?new Qt(t.min.x,t.min.y,t.max.x,t.max.y):SW(t)?new Qt(t[0],t[1],t[2],t[3]):new Qt},isArray:SW,toProcessingParam(t){var e={};if(t.length<1)e="";else{for(var n=[],r=0;r<t.length;r++){var i={};i.x=t[r][0],i.y=t[r][1],n.push(i)}e.type="REGION",e.points=n}return e}};var CW=mB.a.extend({},mB.a.CRS.EPSG3857,{code:"Baidu",scale:function(t){return 6378137*Math.PI*2/Math.pow(2,18-t)},transformation:function(){var t=.5/(6378137*Math.PI);return new mB.a.Transformation(t,0,-t,0)}()}),MW=[];for(let $=1;$<19;$++)MW.push(1.40625/Math.pow(2,$));var TW=dW("EPSG:4326",{origin:[-180,90],resolutions:MW,bounds:mB.a.bounds([-180,-90],[180,90]),wrapLng:[-180,180]});const AW=2*Math.PI*6378137,OW=AW/2;var kW=[];for(let $=1;$<19;$++)kW.push(AW/256/Math.pow(2,$));var IW=dW("EPSG:3857",{origin:[-OW,OW],resolutions:kW,bounds:mB.a.bounds([-OW,-OW],[OW,OW]),wrapLng:[-180,180]}),PW=mB.a.Class.extend({initialize:function(t){this.bounds=t},project:function(t){return new mB.a.Point(t.lng,t.lat)},unproject:function(t){return new mB.a.LatLng(t.y,t.x)}}),LW=function(t){return new PW(t)},NW=mB.a.Class.extend({includes:mB.a.CRS,initialize:function(t){t.origin&&(this.transformation=new mB.a.Transformation(1,-t.origin.x,-1,t.origin.y)),this.projection=LW(t.bounds),this.bounds=t.bounds,this.origin=t.origin,this.resolutions=t.resolutions},scale:function(t){let e;if(!this.resolutions||0===this.resolutions.length){const n=Math.max(this.bounds.getSize().x,this.bounds.getSize().y);return e=1/(n/256),e*Math.pow(2,t)}return this.resolutions[t]?1/this.resolutions[t]:1/this.resolutions[0]*Math.pow(2,t)},zoom:function(t){let e;if(!this.resolutions||0===this.resolutions.length){const n=Math.max(this.bounds.getSize().x,this.bounds.getSize().y);return e=1/(n/256),Math.log(t/e)/Math.LN2}const n=this.resolutions.indexOf(1/t);return n>-1?n:Math.log(t/(1/this.resolutions[0]))/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,r=e.lat-t.lat;return Math.sqrt(n*n+r*r)},infinite:!1}),RW=function(t){return new NW(t)},DW=function(t){return t?(new Ee).toGeoJSON(t):t},FW=function(t){if(!t)return t;var e,n=new Ee;if(-1!=["FeatureCollection","Feature","Geometry"].indexOf(t.type))e=n.read(t,t.type);else if("function"===typeof t.toGeoJSON){var r=t.toGeoJSON();e=r?n.read(r,r.type):t}var i=e||t;return mB.a.Util.isArray(e)&&(1===e.length?i=e[0]:e.length>1&&(i=[],e.map((function(t){return i.push(t.geometry),t})))),i&&i.geometry?i.geometry:i},jW=ns,BW=function(t,e,n){var r=1/.0254,i=jW(n),o=t*e*r*i;return o=1/o,o},zW=function(t,e,n){var r=1/.0254,i=jW(n),o=t*e*r*i;return o=1/o,o},UW=function(t){return t>1?1/t:t},GW=function(t,e,n,r){var i=null,o=1e4;return r=r||6378137,n=n||"",t>0&&e>0?(t=UW(t),"degree"===n.toLowerCase()||"degrees"===n.toLowerCase()||"dd"===n.toLowerCase()?(i=.0254*o/e/t/(2*Math.PI*r/360)/o,i):(i=.0254*o/e/t/o,i)):-1},qW=function(t,e=mB.a.CRS.EPSG4326,n){let r=null,i=null;if(-1===["FeatureCollection","Feature","Geometry"].indexOf(t.type))if(t.toGeoJSON)t=t.toGeoJSON();else if(t instanceof mB.a.LatLngBounds)t=mB.a.rectangle(t).toGeoJSON();else{if(!(t instanceof mB.a.Bounds))throw new Error("This tool only supports data conversion in geojson format or Vector Layers of Leaflet.");t=mB.a.rectangle([[t.getTopLeft().x,t.getTopLeft().y],[t.getBottomRight().x,t.getBottomRight().y]]).toGeoJSON()}const o={point:function(t){return i(t)},multipoint:function(t){return o["linestring"].apply(this,[t])},linestring:function(t){let e=[],n=null;for(let i=0,a=t.length;i<a;++i){try{n=o["point"].apply(this,[t[i]])}catch(r){throw r}e.push(n)}return e},multilinestring:function(t){return o["polygon"].apply(this,[t])},polygon:function(t){let e,n=[];for(let i=0,a=t.length;i<a;++i){try{e=o["linestring"].apply(this,[t[i]])}catch(r){throw r}n.push(e)}return n},multipolygon:function(t){let e=[],n=null;for(let i=0,a=t.length;i<a;++i){try{n=o["polygon"].apply(this,[t[i]])}catch(r){throw r}e.push(n)}return e}};return a(t,l);function a(t,e){if(r=t,i=e,"Feature"===t.type)r=s(t);else if("FeatureCollection"===t.type){let e=[];for(let r=0;r<t.features.length;++r)try{e.push(s(t.features[r]))}catch(n){e=null}r.features=e}return r}function s(t){const e=t.geometry;if(!Wt.isArray(e.coordinates))throw"Geometry must have coordinates array: "+e;if(!o[e.type.toLowerCase()])throw"Unsupported geometry type: "+e.type;try{e.coordinates=o[e.type.toLowerCase()].apply(this,[e.coordinates])}catch(n){throw n}return t.geometry=e,t}function l(t){var r=e.unproject({x:t[0],y:t[1]});const i=n.project(r);return[i.x,i.y]}},VW=mB.a.TileLayer.extend({url:"http://online{num}.map.bdimg.com/onlinelabel/?qt=tile&x={x}&y={y}&z={z}&styles={styles}&udt=20150815&scaler=1",options:{minZoom:3,maxZoom:19,bounds:mB.a.latLngBounds(mB.a.latLng(-85.0511287798,-180),mB.a.latLng(85.0511287798,180)),retina:mB.a.Browser.retina,attribution:pW.Baidu.attribution},initialize:function(t,e){t&&(this.url=t),mB.a.setOptions(this,e),this.options.retina&&(this.options.maxZoom=18),mB.a.stamp(this)},getTileUrl:function(t){var e=mB.a.Util.template(this.url,{num:Math.abs((t.x+t.y)%8)+1,x:t.x,y:-t.y-1,z:this._getZoomForUrl(),styles:this.options.retina?"ph":"pl"});return this.options.tileProxy&&(e=this.options.tileProxy+encodeURIComponent(e)),e}}),HW=function(t,e){return new VW(t,e)},WW=mB.a.TileLayer.extend({defaultURL:"http://t2.dituhui.com/FileService/image",options:{mapName:"quanguo",type:"web",minZoom:3,maxZoom:18,attribution:pW.Cloud.attribution},initialize:function(t,e){mB.a.setOptions(this,e);var n=t||this.defaultURL;this._url=n+"?map="+this.options.mapName+"&type="+this.options.type,mB.a.stamp(this)},getTileUrl:function(t){var e=this._url,n=e+"&x="+t.x+"&y="+t.y+"&z="+t.z;return this.options.tileProxy&&(n=this.options.tileProxy+encodeURIComponent(n)),n}}),YW=function(t,e){return new WW(t,e)},XW=gB["Layer"].extend({options:{layersID:null,redirect:!1,transparent:!0,cacheEnabled:!0,clipRegionEnabled:!1,clipRegion:null,prjCoordSys:null,overlapDisplayed:!1,overlapDisplayedOptions:null,opacity:1,alt:"",pane:"tilePane",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:"",attribution:pW.Common.attribution,updateInterval:150,tileProxy:null,format:"png"},initialize:function(t,e){this._url=t,gB["Util"].setOptions(this,e)},onAdd:function(t){this.update=gB["Util"].throttle(this.update,this.options.updateInterval,this),t.on("moveend",this.update,this),this._currentImage&&this._currentImage._bounds.equals(this._map.getBounds())?t.addLayer(this._currentImage):this._currentImage&&(this._map.removeLayer(this._currentImage),this._currentImage=null),this.update()},onRemove:function(){this._currentImage&&this._map.removeLayer(this._currentImage),this._map.off("moveend",this.update,this)},bringToFront:function(){return this.options.position="front",this._currentImage&&this._currentImage.bringToFront(),this},bringToBack:function(){return this.options.position="back",this._currentImage&&this._currentImage.bringToBack(),this},getOpacity:function(){return this.options.opacity},setOpacity:function(t){return this.options.opacity=t,this._currentImage&&this._currentImage.setOpacity(t),this},getImageUrl:function(t){let e=Wt.urlPathAppend(this._url,"image."+this.options.format),n=e+gB["Util"].getParamString(Object.assign({},this._initAllRequestParams(),t),e);return n=ze.appendCredential(n),this.options.tileProxy&&(n=this.options.tileProxy+encodeURIComponent(n)),this.options.cacheEnabled||(n+="&_t="+(new Date).getTime()),n},_getImageParams:function(t){var e=this._calculateImageSize(t);return{viewBounds:this._compriseBounds(this._calculateBounds(t)),width:e.x,height:e.y}},_initAllRequestParams:function(){var t=this,e=t.options||{},n={},r=!0===e.redirect&&e.redirect;n["redirect"]=r;var i=!0===e.transparent&&e.transparent;n["transparent"]=i;var o=!1!==e.cacheEnabled||e.cacheEnabled;return n["cacheEnabled"]=o,e.prjCoordSys&&(n["prjCoordSys"]=JSON.stringify(e.prjCoordSys)),e.layersID&&(n["layersID"]=e.layersID),e.rasterfunction&&(n["rasterfunction"]=JSON.stringify(e.rasterfunction)),e.clipRegionEnabled&&e.clipRegion&&(n["clipRegionEnabled"]=e.clipRegionEnabled,n["clipRegion"]=JSON.stringify(Se.fromGeometry(FW(e.clipRegion)))),!1===e.overlapDisplayed?(n["overlapDisplayed"]=!1,e.overlapDisplayedOptions&&(n["overlapDisplayedOptions"]=t.overlapDisplayedOptions.toString())):n["overlapDisplayed"]=!0,n},_requestImage:function(t,e){var n=this.getImageUrl(t);this._loadImage(n,e)},_loadImage:function(t,e){if(this._map){var n=new gB["ImageOverlay"](t,e,{opacity:0,alt:this.options.alt,zIndex:this.options.zIndex,className:this.options.className,errorOverlayUrl:this.options.error,crossOrigin:this.options.crossOrigin,pane:this.options.pane||this.getPane(),interactive:this.options.interactive}).addTo(this._map),r=function(t){n.off("error",i,this);var r=this._map;if(r){var o=t.target,a=this._currentImage;o._bounds&&o._bounds.equals(e)&&o._bounds.equals(r.getBounds())?(this._currentImage=o,"front"===this.options.position&&this.bringToFront(),"back"===this.options.position&&this.bringToBack(),this._currentImage._map&&this._currentImage.setOpacity(this.options.opacity),a&&r.removeLayer(a),a&&a._map&&a._map.removeLayer(a)):r.removeLayer(o),this.fire("load",{bounds:e})}},i=function(){this._map.removeLayer(n),this.fire("error"),n.off("load",r,this)};n.once("load",r,this),n.once("error",i,this),this.fire("loading",{bounds:e})}},update:function(){if(this._map){var t=this._map.getZoom(),e=this._map.getBounds();if(t>(this._map.options.maxZoom||18)||t<(this._map.options.minZoom||0))this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null);else{var n=this._getImageParams(e);n?this._requestImage(n,e):this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null)}}},_calculateBounds:function(t){var e=this._map.options.crs.project(t.getNorthEast()),n=this._map.options.crs.project(t.getSouthWest());return mB.a.bounds(e,n)},_compriseBounds:function(t){var e={leftBottom:{x:t.getBottomLeft().x,y:t.getTopRight().y},rightTop:{x:t.getTopRight().x,y:t.getBottomLeft().y}};return JSON.stringify(e)},_calculateImageSize:function(t){var e=new mB.a.Bounds(this._map.latLngToLayerPoint(t.getNorthWest()),this._map.latLngToLayerPoint(t.getSouthEast()));return e.getSize()}}),JW=function(t,e){return new XW(t,e)},ZW=mB.a.TileLayer.extend({options:{version:"1.0.0",style:"",tilematrixSet:"",format:"image/png",tileSize:256,matrixIds:null,layer:"",requestEncoding:"KVP",attribution:"",noWrap:!0},initialize:function(t,e){this._url=t,mB.a.setOptions(this,e);var n=this.options;if("REST"===n.requestEncoding){var r={"image/png":"png","image/png8":"png","image/png24":"png","image/png32":"png",png:"png","image/jpeg":"jpg","image/jpg":"jpg",jpeg:"jpg",jpg:"jpg"};this.formatSuffix="."+(r[n.format]||n.format.split("/").pop()||"png")}else n.requestEncoding="KVP"},getTileUrl:function(t){var e=this._getZoomForUrl(),n=this.options.matrixIds?this.options.matrixIds[e].identifier:e,r=this._url.indexOf("?"),i=r>-1?this._url.substring(0,this._url.indexOf("?")):this._url,o=r>-1?this._url.substring(this._url.indexOf("?")):"";i=mB.a.Util.template(i,{s:this._getSubdomain(t)});var a={service:"WMTS",request:"GetTile",version:this.options.version,style:this.options.style,tilematrixSet:this.options.tilematrixSet,format:this.options.format,width:this.options.tileSize,height:this.options.tileSize,layer:this.options.layer,tilematrix:n,tilerow:t.y,tilecol:t.x};if(this.options.tileProxy&&(i=this.options.tileProxy+i),"KVP"===this.options.requestEncoding)i+=mB.a.Util.getParamString(a,i);else if("REST"===this.options.requestEncoding){var s="/"+a.layer+"/"+a.style+"/"+a.tilematrixSet+"/"+a.tilematrix+"/"+a.tilerow+"/"+a.tilecol+this.formatSuffix;i+=s}return i=Wt.urlAppend(i,o),i=ze.appendCredential(i),i}}),KW=function(t,e){return new ZW(t,e)},QW=ZW.extend({layerLabelMap:{vec:"cva",ter:"cta",img:"cia"},layerZoomMap:{vec:18,ter:14,img:18},options:{layerType:"vec",isLabel:!1,attribution:pW.Tianditu.attribution,url:"https://t{s}.tianditu.gov.cn/{layer}_{proj}/wmts?",zoomOffset:1,key:"",dpi:96,style:"default",format:"tiles",subdomains:[0,1,2,3,4,5,6,7],bounds:[[-90,-180],[90,180]],noWrap:!0},initialize:function(t){t=t||{},mB.a.setOptions(this,t),this.options.layer=this.options.isLabel?this.layerLabelMap[this.options.layerType]:this.options.layerType,this.options.maxZoom=this.layerZoomMap[this.options.layerType]-1,ZW.prototype.initialize.call(this,this.options.url,this.options),mB.a.stamp(this),this.options.key&&(this._url=`${this._url}tk=${this.options.key}`)},onAdd:function(t){this.options.tilematrixSet="EPSG:4326"===t.options.crs.code?"c":"w",this._url=this._url.replace("{layer}",this.options.layer).replace("{proj}",this.options.tilematrixSet),ZW.prototype.onAdd.call(this,t)},_isValidTile:function(t){const e=this._map.options.crs;if(!e.infinite){const n=this._globalTileRange;if((!e.wrapLng||this.options.noWrap)&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;const n=this._tileCoordsToBounds(t);return mB.a.latLngBounds(this.options.bounds).overlaps(n)}}),$W=function(t){return new QW(t)},tY=mB.a.TileLayer.extend({options:{layersID:null,redirect:!1,transparent:!0,cacheEnabled:!0,clipRegionEnabled:!1,clipRegion:null,prjCoordSys:null,overlapDisplayed:!1,overlapDisplayedOptions:null,tileversion:null,crs:null,format:"png",tileProxy:null,attribution:pW.Common.attribution,subdomains:null},initialize:function(t,e){this._url=t,mB.a.TileLayer.prototype.initialize.apply(this,arguments),mB.a.setOptions(this,e),mB.a.stamp(this),this.tileSetsIndex=-1,this.tempIndex=-1},onAdd:function(t){this._crs=this.options.crs||t.options.crs,mB.a.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this.getScaleFromCoords(t),n=this._getLayerUrl(),r=n+"&scale="+e+"&x="+t.x+"&y="+t.y;return this.options.tileProxy&&(r=this.options.tileProxy+encodeURIComponent(r)),this.options.cacheEnabled||(r+="&_t="+(new Date).getTime()),this.options.subdomains&&(r=mB.a.Util.template(r,{s:this._getSubdomain(t)})),r},getScale:function(t){var e=this,n=t||e._map.getZoom();return e.scales[n]},getScaleFromCoords:function(t){var e,n=this;return n.scales&&n.scales[t.z]?n.scales[t.z]:(n.scales=n.scales||{},e=n.getDefaultScale(t),n.scales[t.z]=e,e)},getDefaultScale:function(t){var e=this,n=e._crs;if(n.scales)return n.scales[t.z];var r=e._tileCoordsToBounds(t),i=n.project(r.getNorthEast()),o=n.project(r.getSouthWest()),a=e.options.tileSize,s=Math.max(Math.abs(i.x-o.x)/a,Math.abs(i.y-o.y)/a),l=E.METER;if(n.code){var u=n.code.split(":");if(u&&u.length>1){var c=parseInt(u[1]);l=c&&c>=4e3&&c<=5e3?E.DEGREE:E.METER}}return BW(s,96,l)},setTileSetsInfo:function(t){this.tileSets=t,mB.a.Util.isArray(this.tileSets)&&(this.tileSets=this.tileSets[0]),this.tileSets&&(this.fire("tilesetsinfoloaded",{tileVersions:this.tileSets.tileVersions}),this.changeTilesVersion())},lastTilesVersion:function(){this.tempIndex=this.tileSetsIndex-1,this.changeTilesVersion()},nextTilesVersion:function(){this.tempIndex=this.tileSetsIndex+1,this.changeTilesVersion()},changeTilesVersion:function(){var t=this;if(null!=t.tileSets&&!(t.tempIndex===t.tileSetsIndex||this.tempIndex<0)){var e=t.tileSets.tileVersions;if(e&&t.tempIndex<e.length&&t.tempIndex>=0){var n=e[t.tempIndex].name,r=t.mergeTileVersionParam(n);r&&(t.tileSetsIndex=t.tempIndex,t.fire("tileversionschanged",{tileVersion:e[t.tempIndex]}))}}},updateCurrentTileSetsIndex:function(t){this.tempIndex=t},mergeTileVersionParam:function(t){return!!t&&(this.requestParams["tileversion"]=t,this._paramsChanged=!0,this.redraw(),this._paramsChanged=!1,!0)},_getLayerUrl:function(){return this._paramsChanged&&(this._layerUrl=this._createLayerUrl()),this._layerUrl||this._createLayerUrl()},_createLayerUrl:function(){let t=Wt.urlPathAppend(this._url,"tileImage."+this.options.format);return this.requestParams=this.requestParams||this._getAllRequestParams(),t=Wt.urlAppend(t,gB["Util"].getParamString(this.requestParams)),t=ze.appendCredential(t),this._layerUrl=t,t},_getAllRequestParams:function(){var t=this,e=t.options||{},n={},r=this.options.tileSize;r instanceof mB.a.Point||(r=mB.a.point(r,r)),n["width"]=r.x,n["height"]=r.y,n["redirect"]=!0===e.redirect,n["transparent"]=!0===e.transparent,n["cacheEnabled"]=!(!1===e.cacheEnabled),e.prjCoordSys&&(n["prjCoordSys"]=JSON.stringify(e.prjCoordSys)),e.layersID&&(n["layersID"]=e.layersID.toString()),e.clipRegionEnabled&&e.clipRegion&&(e.clipRegion=Se.fromGeometry(FW(e.clipRegion)),n["clipRegionEnabled"]=e.clipRegionEnabled,n["clipRegion"]=JSON.stringify(e.clipRegion));var i=t._crs;if(i.options&&i.options.origin)n["origin"]=JSON.stringify({x:i.options.origin[0],y:i.options.origin[1]});else if(i.projection&&i.projection.bounds){var o=i.projection.bounds,a=mB.a.point(o.min.x,o.max.y);n["origin"]=JSON.stringify({x:a.x,y:a.y})}return!1===e.overlapDisplayed?(n["overlapDisplayed"]=!1,e.overlapDisplayedOptions&&(n["overlapDisplayedOptions"]=e.overlapDisplayedOptions)):n["overlapDisplayed"]=!0,!0===n.cacheEnabled&&e.tileversion&&(n["tileversion"]=e.tileversion.toString()),e.rasterfunction&&(n["rasterfunction"]=JSON.stringify(e.rasterfunction)),n}}),eY=function(t,e){return new tY(t,e)},nY=n("d4f4"),rY=n.n(nY),iY={TEXT:{fontSize:"14px",fontFamily:"Arial Unicode MS Regular,Microsoft YaHei",textAlign:"left",color:"rgba(255,255,255,0)",fillColor:"rgba(80,80,80,1)",weight:1,globalAlpha:1},POINT:{fillColor:"#ffcc00",color:"#cc3333",weight:1,radius:3,opacity:1},LINE:{color:"rgba(0,0,0,0)",weight:1,lineCap:"butt",lineJoin:"round",dashOffset:0,dashArray:[],opacity:1},REGION:{color:"rgba(0,0,0,0)",fillColor:"rgba(0,0,0,0)",weight:1,lineCap:"butt",lineJoin:"round",dashOffset:0,opacity:1,fillOpacity:1,dashArray:[]}},oY={TEXT:{"text-size":"fontSize","text-face-name":"fontFamily","text-align":"textAlign","text-name":"textName","text-weight":"fontWeight","text-halo-color":"color","text-fill":"fillColor","text-comp-op":"globalCompositeOperation"},POINT:{"point-file":"iconUrl","point-fill":"fillColor","point-radius":"radius","point-halo-color":"color","point-comp-op":"globalCompositeOperation"},LINE:{"line-color":"color","line-width":"weight","line-cap":"lineCap","line-join":"lineJoin","line-dash-offset":"dashOffset","line-opacity":"opacity","line-dasharray":"dashArray","line-comp-op":"globalCompositeOperation"},REGION:{"line-color":"color","line-width":"weight","line-cap":"lineCap","line-join":"lineJoin","line-dash-offset":"dashOffset","line-opacity":"opacity","line-dasharray":"dashArray","polygon-fill":"fillColor","polygon-opacity":"fillOpacity","polygon-comp-op":"globalCompositeOperation"}},aY={lineWidth:{leafletStyle:"weight",type:"number",unit:"mm",defaultValue:.1},fillForeColor:{leafletStyle:"fillColor",type:"color",defaultValue:"rgba(0,0,0,0)"},foreColor:{leafletStyle:"color",type:"color",defaultValue:"rgba(0,0,0,0)"},markerSize:{leafletStyle:"markerSize",type:"number",unit:"mm",defaultValue:2.4},lineColor:{leafletStyle:"color",type:"color",defaultValue:"#000000"}},sY={clear:"",src:"",dst:"","src-over":"source-over","dst-over":"destination-over","src-in":"source-in","dst-in":"destination-in","src-out":"source-out","dst-out":"destination-out","src-atop":"source-atop","dst-atop":"destination-atop",xor:"xor",plus:"lighter",minus:"",multiply:"",screen:"",overlay:"",darken:"",lighten:"lighter","color-dodge":"","color-burn":"","hard-light":"","soft-light":"",difference:"",exclusion:"",contrast:"",invert:"","invert-rgb":"","grain-merge":"","grain-extract":"",hue:"",saturation:"",color:"",value:""};class lY{constructor(t){this.cartoCSS=null,this.mapUrl=t}pretreatedCartoCSS(t,e){e&&(t=this.processCharacters(t)),this.cartoCSS=this.cartoCSS||{};var n=new cs(t).getShaders();if(n)for(var r=0;r<n.length;r++){var i=n[r].elements[0],o=n[r].attachment;this.cartoCSS[i.clean]=this.cartoCSS[i.clean]||{},this.cartoCSS[i.clean][o]=this.cartoCSS[i.clean][o]||[],this.cartoCSS[i.clean][o].push(n[r])}}processCharacters(t){var e=t;if(e){var n=this;e=e.replace(/[@]/gi,"___"),e=e.replace(/\\#/gi,"#");var r={};return n.layersInfo&&Object.keys(n.layersInfo).sort().forEach((function(t){var n=t.replace(/[@#\s]/gi,"___"),i=t,o=Object.keys(r);for(let e=o.length;e>-1;e--)if(t.indexOf(o[e])>-1){i=t.replace(o[e],r[o[e]]);break}i=i.replace(/[#]/gi,"#"),r[t]=n,e=e.replace(new RegExp(i,"g"),n)})),e=e.replace(/[#]/gi,"\n#"),e=e.replace(/\[zoom/gi,"[scale"),e}}pickShader(t){if(!this.cartoCSS)return null;var e=t.replace(/[@#\s]/gi,"___");return this.cartoCSS[e]}getDefaultStyle(t){var e={},n=iY[t];for(var r in n){var i=n[r];e[r]=i}return e}getStyleFromiPortalMarker(t){return 0==t.indexOf("./")?null:mB.a.icon({iconUrl:t,iconSize:mB.a.point(48,43),iconAnchor:mB.a.point(24,43),popupAnchor:mB.a.point(0,-43)})}getStyleFromiPortalStyle(t,e,n){var r=n?JSON.parse(n):null,i={};if("Point"===e||"MultiPoint"===e){var o=r||t.pointStyle;return o.externalGraphic?0==o.externalGraphic.indexOf("./")?null:mB.a.icon({iconUrl:o.externalGraphic,iconSize:mB.a.point(o.graphicWidth,o.graphicHeight),iconAnchor:mB.a.point(-o.graphicXOffset,-o.graphicYOffset),popupAnchor:mB.a.point(0,-o.graphicHeight)}):(i.radius=o.pointRadius,i.color=o.strokeColor,i.opacity=o.strokeOpacity,i.lineCap=o.strokeLineCap,i.weight=o.strokeWidth,i.fillColor=o.fillColor,i.fillOpacity=o.fillOpacity,i.dashArray=this.dashStyle(o,1),i)}if("LineString"===e||"MultiLineString"===e||"Box"===e){var a=r||t.lineStyle;return i.color=a.strokeColor,i.opacity=a.strokeOpacity,i.fillOpacity=a.fillOpacity,i.lineCap=a.strokeLineCap,i.weight=a.strokeWidth,i.dashArray=this.dashStyle(a,1),i}if("Polygon"===e||"MultiPolygon"===e){var s=r||t.polygonStyle;return i.color=s.strokeColor,i.opacity=s.strokeOpacity,i.lineCap=s.strokeLineCap,i.weight=s.strokeWidth,i.fillColor=s.fillColor,i.fillOpacity=s.fillOpacity,i.dashArray=this.dashStyle(s,1),i}}dashStyle(t,e){if(!t)return[];var n=t.strokeWidth*e,r=t.strokeDashstyle;switch(r){case"solid":return[];case"dot":return[1,4*n];case"dash":return[4*n,4*n];case"dashdot":return[4*n,4*n,1,4*n];case"longdash":return[8*n,4*n];case"longdashdot":return[8*n,4*n,1,4*n];default:return r?Wt.isArray(r)?r:(r=Ft.trim(r).replace(/\s+/g,","),r.replace(/\[|\]/gi,"").split(",")):[]}}getValidStyleFromCarto(t,e,n,r,i){if(!n)return null;var o=r.type,a=r.properties.attributes||{},s=this.getDefaultStyle(o);i=void 0===i||i,a.FEATUREID=r.properties.id,a.SCALE=e;for(var l,u,c=oY[o],h=0,d=n.length;h<d;h++){var f=n[h],p=c[f.property],g=f.getValue(a,t,!0);if(null!==g&&p)if("fontSize"===p)i&&(g*=.8),l=g+"px",s.fontSize=l;else if("fontName"===p)u=g,s.fontName=u;else{if("globalCompositeOperation"===p){if(g=sY[g],!g)continue}else if(i&&"iconUrl"===p){g=this.mapUrl+"/tileFeature/symbols/"+g.replace(/(___)/gi,"@"),g=g.replace(/(__0__0__)/gi,"__8__8__"),s["iconUrl"]=g;continue}"weight"===p&&g<1&&(g=Math.ceil(g)),s[p]=g}}return s}getValidStyleFromLayerInfo(t,e){var n=t.type,r=this.getDefaultStyle(n),i=e&&e.layerStyle;if(!i)return r;if("POINT"===n){var o=Math.ceil(i.markerSize*Ht*Yt["mm"])||8,a={transparent:!0,resourceType:"SYMBOLMARKER",picWidth:o,picHeight:o,style:JSON.stringify(i)};return r.iconUrl=Wt.urlAppend(this.mapUrl+"/symbol.png",Wt.getParameterString(a)),r.iconSize=[o,o],r}if("TEXT"===n){if(i=t.properties.textStyle||e.layerStyle,r.fontWeight=i.bold?i.fontWeight:"normal",i.fontHeight){var s=i.fontHeight*Ht*Yt["mm"]*.85;r.fontSize=s+"px",r.textHeight=s}if(i.fontName&&(r.fontFamily=i.fontName.indexOf("@")?i.fontName.replace(/@/g,""):i.fontName),i.align){var l=i.align.replace(/TOP|MIDDLE|BASELINE|BOTTOM/,"");r.textAlign=l.toLowerCase()}return r.weight=i.outline?i.outlineWidth:0,i.backColor&&(r.color="rgba("+i.backColor.red+","+i.backColor.green+","+i.backColor.blue+",1)"),i.foreColor&&(r.fillColor="rgba("+i.foreColor.red+","+i.foreColor.green+","+i.foreColor.blue+",1)"),r.rotation=i.rotation||0,r}var u=i["fillSymbolID"]>7?0:i["fillSymbolID"],c=i["lineSymbolID"]>5?0:i["lineSymbolID"];for(var h in i){var d=aY[h];if(d){var f=d.leafletStyle;switch(d.type){case"number":{let t=i[h];d.unit&&(t=t*Ht*Yt[d.unit]*2.5),r[f]=t;break}case"color":{var p=i[h];let t,e=1;if("fillColor"===f)0!==u&&1!==u||(e=1-u,t="rgba("+p.red+","+p.green+","+p.blue+","+e+")");else if("color"===f){if(0===c||5===c)e=0===c?1:0;else{var g=[1,0];switch(c){case 1:g=[9.7,3.7];break;case 2:g=[3.7,3.7];break;case 3:g=[9.7,3.7,2.3,3.7];break;case 4:g=[9.7,3.7,2.3,3.7,2.3,3.7];break;default:break}r.lineDasharray=g}t="rgba("+p.red+","+p.green+","+p.blue+","+e+")"}r[f]=t;break}default:break}}}return e.textField&&(r.textAlign="LEFT"),r}}var uY=mB.a.Class.extend({initialize:function(t){t=t||{};var e=t.latLng||t._latLng;this._latLng=mB.a.latLng(e.lat,e.lng),this._style=t.style||t._canvas,this.attributes=t.attributes,this.id=t.id?t.id:null},getId(){return this.id},setId(t){this.id=t},setLatLng:function(t){this._latLng=t},setCanvas:function(t){this._style=t},setAttributes:function(t){this.attributes=t},getLatLng:function(){return this._latLng},getCanvas:function(){return this._style},getAttributes:function(){return this.attributes},setStyle:function(t){this._style=t},getStyle:function(){return this._style}}),cY=function(t){return new uY(t)},hY=mB.a.Class.extend({initialize:function(t,e){this.geometry=t,this.attributes=e},toFeature:function(){let t=this.geometry;if(t.toGeoJSON){const e=t.toGeoJSON();return e.properties=this.attributes,(new Ee).read(e)[0]}if(3===t.length)t=new ie(t[1],t[0],t[2]);else if(2===t.length)t=new ne(t[0],t[1]);else if(t instanceof mB.a.LatLng)t=new ne(t.lng,t.lat);else if(t instanceof mB.a.Point)t=new ne(t.x,t.y);else if(t instanceof mB.a.CircleMarker){var e=t.getLatLng();t=new ne(e.lng,e.lat)}return new me(t,this.attributes)},reverseLatLngs:function(t){mB.a.Util.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++)t[e]=[t[e].lng,t[e].lat];return t}}),dY=function(t,e){return new hY(t,e)},fY=mB.a.Layer.extend({options:{alwaysMapCRS:!1,id:Wt.createUniqueID("themeLayer_"),opacity:1,TFEvents:[],attribution:pW.Common.attribution},initialize:function(t,e){mB.a.Util.setOptions(this,e),this.name=t,this.features=[],this.TFEvents=this.options.TFEvents,this.levelRenderer=new fl,this.movingOffset=[0,0]},getEvents:function(){var t=this,e={zoomend:t._reset,moveend:t._reset,resize:t._resize};return this._map._zoomAnimated&&(e.zoomanim=t._zoomAnim),e},onRemove:function(t){var e=this;mB.a.DomUtil.remove(e.container),t.off("mousemove",e.mouseMoveHandler)},onAdd:function(t){var e=this;if(e.map=e._map=t,e._initContainer(),e.levelRenderer){var n=t.getSize();e.container.style.width=n.x+"px",e.container.style.height=n.y+"px",e._updateOpacity(),e.renderer=e.levelRenderer.init(e.container),e.renderer.clear(),e.features&&e.features.length>0&&e._reset(),e.addTFEvents(),e.mouseMoveHandler=function(t){var n=t.layerPoint;e.currentMousePosition=mB.a.point(n.x+e.movingOffset[0],n.y+e.movingOffset[1])},t.on("mousemove",e.mouseMoveHandler),e.update(t.getBounds())}else t.removeLayer(e)},addFeatures:function(t){},redrawThematicFeatures:function(t){},destroyFeatures:function(t){if(void 0===t&&(t=this.features),t){this.removeFeatures(t),Array.isArray(t)||(t=[t]);for(var e=t.length-1;e>=0;e--)t[e].destroy()}},removeFeatures:function(t){var e=this;if(t){if(t===e.features)return e.removeAllFeatures();mB.a.Util.isArray(t)||"function"===typeof t||(t=[t]);for(var n=[],r=0;r<e.features.length;r++){var i=e.features[r];if(t&&"function"===typeof t)t(i)&&e.features.splice(r--,1);else{var o=mB.a.Util.indexOf(t,i);-1===o?n.push(i):e.features.splice(r--,1)}}for(var a=[],s=0,l=e.features.length;s<l;s++)i=e.features[s],a.push(i);e.features=[],e.addFeatures(a),e.renderer&&(e._map?e.redrawThematicFeatures(e._map.getBounds()):e.redrawThematicFeatures());var u=0==n.length;e.fire("featuresremoved",{features:n,succeed:u})}},removeAllFeatures:function(){var t=this;t.renderer&&t.renderer.clear(),t.features=[],t.fire("featuresremoved",{features:[],succeed:!0})},getFeatures:function(t){for(var e=this.features.length,n=[],r=0;r<e;++r)(!t||t&&"function"===typeof t&&t(this.features[r]))&&n.push(this.features[r]);return n},getFeatureBy:function(t,e){var n=this,r=null;for(var i in n.features)if(n.features[i][t]===e){r=n.features[i];break}return r},getFeatureById:function(t){return this.getFeatureBy("id",t)},getFeaturesByAttribute:function(t,e){var n,r=this,i=[];for(var o in r.features)n=r.features[o],n&&n.attributes&&n.attributes[t]===e&&i.push(n);return i},update:function(t){var e=this._map.containerPointToLayerPoint([0,0]);mB.a.DomUtil.setPosition(this.container,e);var n=this;n.renderer&&n.redrawThematicFeatures(t),n.currentMousePosition&&(n.currentMousePosition=mB.a.point(n.currentMousePosition.x-n.movingOffset[0],n.currentMousePosition.y-n.movingOffset[1])),n.movingOffset=[0,0],n._zoom=n._map.getZoom(),n._center=n._map.getCenter()},setOpacity:function(t){var e=this;t!==e.options.opacity&&(isNaN(t)||(e.options.opacity=t,e._updateOpacity()))},redraw:function(){var t=this;return!!t.renderer&&(t._map?t.redrawThematicFeatures(t._map.getBounds()):t.redrawThematicFeatures(),!0)},on:function(t,e,n){return this.renderer?this.renderer.on(t,e):mB.a.Layer.prototype.on.call(this,t,e),this},off:function(t,e,n){var r=this;return r.renderer?r.renderer.un(t,e):mB.a.Layer.prototype.off.call(this,t,e),this},fire:function(t,e,n){return this.renderer&&this.renderer.trigger(t,e),mB.a.Layer.prototype.fire.call(this,t,e,n),this},addTFEvents:function(){for(var t=this,e=t.TFEvents,n=e.length,r=0;r<n;r++)t.renderer.on(e[r][0],e[r][1])},getLocalXY:function(t){if(!this._map)return t;var e=t;mB.a.Util.isArray(t)&&(e=mB.a.point(t[0],t[1])),t instanceof mB.a.Point||(e=t instanceof ne||t instanceof ie?mB.a.point(t.x,t.y):mB.a.point(t.lon,t.lat));var n=this._map.latLngToAccurateContainerPoint(this.options.alwaysMapCRS?this._map.options.crs.unproject(e):mB.a.latLng(e.y,e.x));return[n.x,n.y]},toiClientFeature:function(t){Wt.isArray(t)||(t=[t]);let e=[];for(let n=0;n<t.length;n++)if(t[n]instanceof hY)e.push(t[n].toFeature());else if(t[n]instanceof me)e.push(t[n]);else if(-1!=["FeatureCollection","Feature","Geometry"].indexOf(t[n].type)){const r=new Ee;e=e.concat(r.read(t[n]))}else{if(!t[n].geometry||!t[n].geometry.parts)throw new Error(`features[${n}]'s type is not be supported.`);e.push(mo.fromJson(t[n]).toFeature())}return e},toFeature:function(t){return this.toiClientFeature(t)},_initContainer:function(){var t=this.getPane(),e=this._map.options.zoomAnimation&&mB.a.Browser.any3d,n="themeLayer leaflet-layer leaflet-zoom-"+(e?"animated":"hide");this.container=mB.a.DomUtil.create("div",n,t);var r=mB.a.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);this.container.id=this.options.id,this.container.style[r]="50% 50%",this.container.style.position="absolute",this.container.style.zIndex=200},_zoomAnim:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._getCenterOffset(t.center)._multiplyBy(-e).subtract(this._map._getMapPanePos());mB.a.DomUtil.setTransform?mB.a.DomUtil.setTransform(this.container,n,e):this.container.style[mB.a.DomUtil.TRANSFORM]=mB.a.DomUtil.getTranslateString(n)+" scale("+e+")"},_updateOpacity:function(){var t=this;Wt.modifyDOMElement(t.container,null,null,null,null,null,null,t.options.opacity),null!==t._map&&t._map.fire("changelayer",{layer:t,property:"opacity"})},_reset:function(){var t=this,e=t._map.getBounds();t.update(e);var n=t._map.getSize(),r=this._map.containerPointToLayerPoint([0,0]);mB.a.DomUtil.setPosition(this.container,r),parseFloat(t.container.width)!==parseFloat(n.x)&&(t.container.width=n.x+"px"),parseFloat(t.container.height)!==parseFloat(n.y)&&(t.container.height=n.y+"px"),t.redraw()},_resize:function(){var t=this,e=t._map.getSize();t.container.style.width=e.x+"px",t.container.style.height=e.y+"px",t.renderer.resize()}}),pY=fY.extend({options:{nodesClipPixel:2,isHoverAble:!1,isMultiHover:!1,isClickAble:!0,isAllowFeatureStyle:!1},initialize:function(t,e){fY.prototype.initialize.call(this,t,e),mB.a.Util.setOptions(this,e);var n=this;n.cache={},n.cacheFields=[],n.style={},n.highlightStyle={}},addFeatures:function(t){var e=this;e.fire("beforefeaturesadded",{features:t}),this.features=this.toiClientFeature(t),e.isCustomSetMaxCacheCount||(e.maxCacheCount=5*e.features.length),e.renderer&&(e._map?e.redrawThematicFeatures(e._map.getBounds()):e.redrawThematicFeatures())},removeFeatures:function(t){this.clearCache(),fY.prototype.removeFeatures.call(this,t)},removeAllFeatures:function(){this.clearCache(),fY.prototype.removeAllFeatures.call(this,arguments)},redrawThematicFeatures:function(t){var e=this,n=e.renderer.getHoverOne(),r=null;if(n&&n.refDataID&&(r=n.refDataID),this.options.alwaysMapCRS&&t&&t instanceof mB.a.LatLngBounds){var i=this._map.options.crs;t=mB.a.bounds(i.project(t.getSouthWest()),i.project(t.getNorthEast()))}t=EW.toSuperMapBounds(t),e.renderer.clearAll();for(var o=e.features,a=e.cache,s=e.cacheFields,l=e._map.getZoom(),u=e.maxCacheCount,c=0,h=o.length;c<h;c++){var d=o[c],f=d.geometry.getBounds();if(!t||t.intersectsBounds(f)){var p=d.id+"_zoom_"+l.toString();if(a[p])a[p].updateAndAddShapes();else{var g=e.createThematicFeature(o[c]);if(!(g.getShapesCount()<1)&&(a[p]=g,s.push(p),s.length>u)){var m=s[0];s.splice(0,1),delete a[m]}}}}if(e.renderer.render(),r&&e.options.isHoverAble&&e.options.isMultiHover){var y=this.getShapesByFeatureID(r);this.renderer.updateHoverShapes(y)}},createThematicFeature:function(t){var e=this,n=e.getStyleByData(t);t.style&&e.isAllowFeatureStyle&&(n=Wt.copyAttributesWithClip(t.style));var r={};r.nodesClipPixel=e.options.nodesClipPixel,r.isHoverAble=e.options.isHoverAble,r.isMultiHover=e.options.isMultiHover,r.isClickAble=e.options.isClickAble,r.highlightStyle=Hs.transformStyle(e.highlightStyle);for(var i=new nl(t,e,Hs.transformStyle(n),r),o=0;o<i.shapes.length;o++)e.renderer.addShape(i.shapes[o]);return i},redraw:function(){return this.clearCache(),fY.prototype.redraw.apply(this,arguments)},clearCache:function(){this.cache={},this.cacheFields=[]},clear:function(){var t=this;t.renderer.clearAll(),t.renderer.refresh(),t.removeAllFeatures(),t.clearCache()},getCacheCount:function(){return this.cacheFields.length},setMaxCacheCount:function(t){isNaN(t)||(this.maxCacheCount=t,this.isCustomSetMaxCacheCount=!0)},getShapesByFeatureID:function(t){var e=this,n=[],r=e.renderer.getAllShapes();if(!t)return r;for(var i=0,o=r.length;i<o;i++){var a=r[i];a.refDataID&&t===a.refDataID&&n.push(a)}return n}}),gY=pY.extend({initialize:function(t,e){pY.prototype.initialize.call(this,t,e),this.style=[],this.themeField=null,this.styleGroups=[]},getStyleByData:function(t){var e=this,n=t,r=Wt.copyAttributesWithClip({},e.style),i=e.styleGroups,o=!1,a=null,s=e.styleGroups&&e.styleGroups.length>0;if(e.themeField&&s&&n.attributes){var l=e.themeField,u=n.attributes;for(var c in u)if(l===c){o=!0,a=u[c];break}}if(o)for(var h=0,d=i.length;h<d;h++)if(a.toString()===i[h].value.toString()){var f=i[h].style;r=Wt.copyAttributesWithClip(r,f)}return r}}),mY=function(t,e){return new gY(t,e)},yY=pY.extend({initialize:function(t,e){pY.prototype.initialize.call(this,t,e),this.style=[],this.themeField=null,this.styleGroups=[]},getStyleByData:function(t){var e=this,n=t,r=Wt.copyAttributesWithClip({},e.style),i=e.styleGroups,o=!1,a=null,s=e.styleGroups&&e.styleGroups.length>0;if(e.themeField&&s&&n.attributes){var l=e.themeField,u=n.attributes;for(var c in u)if(l===c){o=!0,a=u[c];break}}if(o)for(var h=0,d=i.length;h<d;h++){var f=h===d-1?a>=i[h].start&&a<=i[h].end:a>=i[h].start&&a<i[h].end;if(f){var p=i[h].style;r=Wt.copyAttributesWithClip(r,p)}}return r}}),vY=function(t,e){return new yY(t,e)},bY=pY.extend({options:{isOverLay:!0,isAvoid:!0},initialize:function(t,e){pY.prototype.initialize.call(this,t,e),mB.a.Util.setOptions(this,e),this.style=[],this.themeField=null,this.styleGroups=[],this.defaultStyle={fontColor:"#000000",fontOpacity:1,fontSize:"12px",fontStyle:"normal",fontWeight:"normal",labelAlign:"cm",labelXOffset:0,labelYOffset:0,labelRotation:0,fill:!1,fillColor:"#ee9900",fillOpacity:.4,stroke:!1,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",labelRect:!0,labelSelect:!0,_isGeoTextStrategyStyle:!0},this.getPxBoundsMode=0,this.labelFeatures=[]},onAdd:function(t){pY.prototype.onAdd.call(this,t),this.container.style.zIndex=200},redrawThematicFeatures:function(t){if(this.features.length>0&&0==this.labelFeatures.length)for(var e=this.setLabelsStyle(this.features),n=0,r=e.length;n<r;n++)this.labelFeatures.push(e[n]);this.features=this.getDrawnLabels(this.labelFeatures),pY.prototype.redrawThematicFeatures.call(this,t)},removeFeatures:function(t){this.labelFeatures=[],pY.prototype.removeFeatures.call(this,t)},removeAllFeatures:function(){this.labelFeatures=[],pY.prototype.removeAllFeatures.call(this,arguments)},getDrawnLabels:function(t){for(var e,n,r,i,o=[],a=[],s={labelAlign:"cm",labelXOffset:0,labelYOffset:0},l=this._map,u=l.getSize(),c=l.getZoom(),h=0,d=t.length;h<d;h++){n=t[h],(n.isStyleChange||void 0===n.isStyleChange)&&(n=this.setStyle(n));var f=this.getLabelPxLocation(n);if(f.x>=0&&f.x<=u.x&&f.y>=0&&f.y<=u.y){if(n.style.minZoomLevel>-1&&c<=n.style.minZoomLevel)continue;if(n.style.maxZoomLevel>-1&&c>n.style.maxZoomLevel)continue;var p=null;n.isStyleChange?(n.isStyleChange=null,p=this.calculateLabelBounds(n,f)):p=n.geometry.bsInfo.w&&n.geometry.bsInfo.h?this.calculateLabelBounds2(n,f):this.calculateLabelBounds(n,f);var g=new Qt(0,u.y,u.x,0),m=p.length;if(this.options.isAvoid){var y=this.getAvoidInfo(g,p);if(y){if("left"===y.aspectW){n.style.labelXOffset+=y.offsetX;for(let t=0;t<m;t++)p[t].x+=y.offsetX}else if("right"===y.aspectW){n.style.labelXOffset+=-y.offsetX;for(let t=0;t<m;t++)p[t].x+=-y.offsetX}if("top"===y.aspectH){n.style.labelYOffset+=y.offsetY;for(let t=0;t<m;t++)p[t].y+=y.offsetY}else if("bottom"===y.aspectH){n.style.labelYOffset+=-y.offsetY;for(let t=0;t<m;t++)p[t].y+=-y.offsetY}n.isStyleChange=!0}}if(this.options.isOverLay){var v=!1;if(0!=h)for(let t=0;t<a.length;t++)if(this.isQuadrilateralOverLap(p,a[t])){v=!0;break}if(v)continue;a.push(p)}var b=[];for(let t=0;t<m-1;t++)b.push(l.containerPointToLatLng(p[t]));var _=b[3],x=b[1],w=new Qt(_.lng,_.lat,x.lng,x.lat),S=w.getCenterLonLat(),E=new ie(S.lon,S.lat,n.attributes[this.themeField]);E.calculateBounds(),r=Wt.cloneObject(n.style),i=Wt.cloneObject(Wt.copyAttributes(r,s)),e=new me(E,n.attributes,i),e.id=n.id,e.fid=n.fid,o.push(e)}}return o},getStyleByData:function(t){var e=t;if(e.style=Wt.copyAttributes(e.style,this.defaultStyle),this.style&&this.style.fontSize&&parseFloat(this.style.fontSize)<12&&(this.style.fontSize="12px"),e.style=Wt.copyAttributes(e.style,this.style),this.themeField&&this.styleGroups&&e.attributes){var n=this.themeField,r=e.attributes,i=this.styleGroups,o=!1,a=null;for(var s in r)if(n===s){o=!0,a=r[s];break}if(o)for(var l=0,u=i.length;l<u;l++)if(a>=i[l].start&&a<i[l].end){var c=i[l].style;c&&c.fontSize&&parseFloat(c.fontSize)<12&&(c.fontSize="12px"),e.style=Wt.copyAttributes(e.style,c)}e.style.label=e.attributes[this.themeField]}return e.style},setLabelsStyle:function(t){for(var e,n=[],r=0,i=t.length;r<i;r++){var o=t[r];if("SuperMap.Geometry.GeoText"!==o.geometry.CLASS_NAME)return t;(o.geometry.bsInfo.w||o.geometry.bsInfo.h)&&(o.geometry.bsInfo.w=null,o.geometry.bsInfo.h=null,o.geometry.labelWTmp=null),e=this.setStyle(o),e.layer=this.layer,n.push(e)}return n},setStyle:function(t){var e=t;if(e.style=Wt.copyAttributes(e.style,this.defaultStyle),this.style&&this.style.fontSize&&parseFloat(this.style.fontSize)<12&&(this.style.fontSize="12px"),e.style=Wt.copyAttributes(e.style,this.style),this.groupField&&this.styleGroups&&e.attributes){var n=this.groupField,r=e.attributes,i=this.styleGroups,o=!1,a=null;for(var s in r)if(n===s){o=!0,a=r[s];break}if(o)for(var l=0,u=i.length;l<u;l++)if(a>=i[l].start&&a<i[l].end){var c=i[l].style;c&&c.fontSize&&parseFloat(c.fontSize)<12&&(c.fontSize="12px"),e.style=Wt.copyAttributes(e.style,c)}}return e.style.label=e.geometry.text,e},getLabelPxLocation:function(t){var e=t.geometry,n=t.style,r=e.getCentroid(),i=this._map.latLngToContainerPoint(this.options.alwaysMapCRS?this._map.options.crs.unproject(mB.a.point(r.x,r.y)):mB.a.latLng(r.y,r.x)),o=mB.a.point(i.x,i.y);if(n.labelXOffset||n.labelYOffset){var a=isNaN(n.labelXOffset)?0:n.labelXOffset,s=isNaN(n.labelYOffset)?0:n.labelYOffset,l=o.add(mB.a.point(a,-s));return mB.a.point(l.x,l.y)}return mB.a.point(o.x,o.y)},calculateLabelBounds:function(t,e){var n=t.geometry,r=null,i=null;if(0==this.getPxBoundsMode)r=n.getLabelPxBoundsByText(e,t.style);else{if(1!==this.getPxBoundsMode)return null;i=this.getLabelInfo(t.geometry.getCentroid(),t.style),r=n.getLabelPxBoundsByLabel(e,i.w,i.h,t.style)}var o=[];return o=t.style.labelRotation%180==0?[{x:r.left,y:r.top},{x:r.right,y:r.top},{x:r.right,y:r.bottom},{x:r.left,y:r.bottom},{x:r.left,y:r.top}]:this.rotationBounds(r,e,t.style.labelRotation),n.bounds=new Qt(o[1].x,o[3].y,o[2].x,o[4].y),o},calculateLabelBounds2:function(t,e){var n,r,i,o,a,s=t.geometry.bsInfo,l=t.style,u=Wt.cloneObject(e);if(l.labelAlign&&"cm"!==l.labelAlign)switch(l.labelAlign){case"lt":u.x+=s.w/2,u.y+=s.h/2;break;case"lm":u.x+=s.w/2;break;case"lb":u.x+=s.w/2,u.y-=s.h/2;break;case"ct":u.y+=s.h/2;break;case"cb":u.y-=s.h/2;break;case"rt":u.x-=s.w/2,u.y+=s.h/2;break;case"rm":u.x-=s.w/2;break;case"rb":u.x-=s.w/2,u.y-=s.h/2;break;default:break}r=u.x-s.w/2,i=u.y+s.h/2,a=l.fontStyle&&"italic"===l.fontStyle?u.x+s.w/2+parseInt(parseFloat(l.fontSize)/2):u.x+s.w/2,o=u.y-s.h/2,n=new Qt(r,i,a,o);var c=[];return c=l.labelRotation%180==0?[{x:n.left,y:n.top},{x:n.right,y:n.top},{x:n.right,y:n.bottom},{x:n.left,y:n.bottom},{x:n.left,y:n.top}]:this.rotationBounds(n,e,l.labelRotation),t.geometry.bounds=new Qt(c[1].x,c[3].y,c[2].x,c[4].y),c},getLabelInfo:function(t,e){var n={l:"left",r:"right",t:"top",b:"bottom"},r={l:0,r:-1,t:0,b:-1};e=Wt.extend({fontColor:"#000000",labelAlign:"cm"},e);var i=this.getLocalXY(t),o=0;if(e.labelXOffset||e.labelYOffset){var a=isNaN(e.labelXOffset)?0:e.labelXOffset,s=isNaN(e.labelYOffset)?0:e.labelYOffset;i[0]+=a,i[1]-=s}var l=document.createElement("canvas");l.globalAlpha=0,l.lineWidth=1;var u=l.getContext("2d");u.fillStyle=e.fontColor,u.globalAlpha=e.fontOpacity||1;var c,h,d,f=[e.fontStyle?e.fontStyle:"normal","normal",e.fontWeight?e.fontWeight:"normal",e.fontSize?e.fontSize:"1em",e.fontFamily?e.fontFamily:"sans-serif"].join(" "),p=e.label.split("\n"),g=p.length;if(u.fillText){u.font=f,u.textAlign=n[e.labelAlign[0]]||"center",u.textBaseline=n[e.labelAlign[1]]||"middle",c=r[e.labelAlign[1]],null==c&&(c=-.5),h=u.measureText("Mg").height||u.measureText("xx").width,i[1]+=h*c*(g-1);for(let t=0;t<g;t++)d=u.measureText(p[t]).width,o<d&&(o=d)}else if(u.mozDrawText){u.mozTextStyle=f,c=r[e.labelAlign[1]],null==c&&(c=-.5),h=u.mozMeasureText("xx"),i[1]+=h*(1+c*g);for(let t=0;t<g;t++)d=u.measureText(p[t]).width,o<d&&(o=d)}var m={};return o?(m.w=o,m.h=e.fontSize,m.rows=p.length,m):null},rotationBounds:function(t,e,n){var r=mB.a.point(t.left,t.top),i=mB.a.point(t.right,t.top),o=mB.a.point(t.right,t.bottom),a=mB.a.point(t.left,t.bottom),s=[];s.push(this.getRotatedLocation(r.x,r.y,e.x,e.y,n)),s.push(this.getRotatedLocation(i.x,i.y,e.x,e.y,n)),s.push(this.getRotatedLocation(o.x,o.y,e.x,e.y,n)),s.push(this.getRotatedLocation(a.x,a.y,e.x,e.y,n));for(var l=[],u=0;u<s.length;u++)l.push({x:s[u].x,y:s[u].y});return l.push({x:s[0].x,y:s[0].y}),l},getRotatedLocation:function(t,e,n,r,i){var o,a,s={};return e=-e,r=-r,i=-i,o=(t-n)*Math.cos(i/180*Math.PI)-(e-r)*Math.sin(i/180*Math.PI)+n,a=(t-n)*Math.sin(i/180*Math.PI)+(e-r)*Math.cos(i/180*Math.PI)+r,s.x=o,s.y=-a,s},getAvoidInfo:function(t,e){if(5!==e.length)return null;for(var n=[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.right,y:t.bottom},{x:t.left,y:t.bottom},{x:t.left,y:t.top}],r=!1,i=n.length,o=e.length,a=0,s=0,l="",u="",c=0;c<i-1;c++)for(var h=0;h<o-1;h++){var d=Wt.lineIntersection(n[c],n[c+1],e[h],e[h+1]);"SuperMap.Geometry.Point"===d.CLASS_NAME&&(f(e[h]),f(e[h+1]),r=!0)}return r?{aspectW:u,aspectH:l,offsetX:a,offsetY:s}:null;function f(e){if(!t.contains(e.x,e.y)){if(e.y<t.top){let n=Math.abs(t.top-e.y);n>s&&(s=n,l="top")}if(e.y>t.bottom){let n=Math.abs(e.y-t.bottom);n>s&&(s=n,l="bottom")}if(e.x<t.left){let n=Math.abs(t.left-e.x);n>a&&(a=n,u="left")}if(e.x>t.right){let n=Math.abs(e.x-t.right);n>a&&(a=n,u="right")}}}},isQuadrilateralOverLap:function(t,e){var n=t.length,r=e.length;if(5!==n||5!==r)return null;var i=!1;for(let s=0;s<n;s++)if(this.isPointInPoly(t[s],e)){i=!0;break}for(let s=0;s<r;s++)if(this.isPointInPoly(e[s],t)){i=!0;break}for(let s=0;s<n-1;s++){if(i)break;for(var o=0;o<r-1;o++){var a=Wt.lineIntersection(t[s],t[s+1],e[o],e[o+1]);if("SuperMap.Geometry.Point"===a.CLASS_NAME){i=!0;break}}}return i},isPointInPoly:function(t,e){for(var n=!1,r=-1,i=e.length,o=i-1;++r<i;o=r)(e[r].y<=t.y&&t.y<e[o].y||e[o].y<=t.y&&t.y<e[r].y)&&t.x<(e[o].x-e[r].x)*(t.y-e[r].y)/(e[o].y-e[r].y)+e[r].x&&(n=!n);return n}}),_Y=function(t,e){return new bY(t,e)};class xY{constructor(t,e){this.url=t,this.options=e||{}}getFeaturesByIDs(t,e,n){var r=this,i=new Zr(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{processCompleted:e,processFailed:e},format:n});i.processAsync(t)}getFeaturesByBounds(t,e,n){var r=this,i=new Vr(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{processCompleted:e,processFailed:e},format:r._processFormat(n)});i.processAsync(t)}getFeaturesByBuffer(t,e,n){var r=this,i=new Wr(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{processCompleted:e,processFailed:e},format:r._processFormat(n)});i.processAsync(t)}getFeaturesBySQL(t,e,n){var r=this,i=new Qr(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{processCompleted:e,processFailed:e},format:r._processFormat(n)});i.processAsync(t)}getFeaturesByGeometry(t,e,n){var r=this,i=new Xr(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{processCompleted:e,processFailed:e},format:r._processFormat(n)});i.processAsync(t)}editFeatures(t,e){if(t&&t.dataSourceName&&t.dataSetName){var n=this,r=n.url,i=t.dataSourceName,o=t.dataSetName;r=Wt.urlPathAppend(r,"datasources/"+i+"/datasets/"+o);var a=new nr(r,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{processCompleted:e,processFailed:e}});a.processAsync(t)}}_processFormat(t){return t||m.GEOJSON}}var wY=mW.extend({initialize:function(t,e){mW.prototype.initialize.call(this,t,e),this._featureService=new xY(t,e)},getFeaturesByIDs:function(t,e,n){t=this._processParams(t),this._featureService.getFeaturesByIDs(t,e,n)},getFeaturesByBounds:function(t,e,n){t=this._processParams(t),this._featureService.getFeaturesByBounds(t,e,n)},getFeaturesByBuffer:function(t,e,n){t=this._processParams(t),this._featureService.getFeaturesByBuffer(t,e,n)},getFeaturesBySQL:function(t,e,n){t=this._processParams(t),this._featureService.getFeaturesBySQL(t,e,n)},getFeaturesByGeometry:function(t,e,n){t=this._processParams(t),this._featureService.getFeaturesByGeometry(t,e,n)},editFeatures:function(t,e){if(t&&t.dataSourceName&&t.dataSetName){var n=this,r=n.url,i=t.dataSourceName,o=t.dataSetName;r=Wt.urlPathAppend(r,"datasources/"+i+"/datasets/"+o);var a=new nr(r,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{processCompleted:e,processFailed:e}});a.processAsync(n._processParams(t))}},_processParams:function(t){if(!t)return{};t.returnContent=null==t.returnContent||t.returnContent,t.fromIndex=t.fromIndex?t.fromIndex:0,t.toIndex=t.toIndex?t.toIndex:-1,t.isUseBatch=null!=t.isUseBatch&&t.isUseBatch,t.bounds&&(t.bounds=EW.toSuperMapBounds(t.bounds)),t.geometry&&(t.geometry=FW(t.geometry)),t.editType&&(t.editType=t.editType.toLowerCase());var e=this;if(t.features){var n=[];mB.a.Util.isArray(t.features)?t.features.map((function(t){return n.push(e._createServerFeature(t)),t})):n.push(e._createServerFeature(t.features)),t.features=n}return t},_createServerFeature:function(t){var e,n={},r=[],i=[];for(var o in e=t||{},e.properties)r.push(o),i.push(e.properties[o]);return n.fieldNames=r,n.fieldValues=i,e.id&&(n.id=e.id),n.geometry=FW(e),n},_processFormat:function(t){return t||m.GEOJSON}}),SY=function(t,e){return new wY(t,e)},EY=mB.a.Path.extend({options:{fontStyle:"normal",fontWeight:"normal",fontSize:"1em",fontFamily:"sans-serif",textAlign:"center",textBaseline:"middle",vfactor:-.5,labelRotation:0,globalAlpha:1,label:""},initialize:function(t,e){mB.a.Util.setOptions(this,e),this._latlng=t},setLatLng:function(t){return this._latlng=t,this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._clickTolerance(),e=[t,t];this._pxBounds=new mB.a.Bounds(this._point.subtract(e),this._point.add(e))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateUnicode(this)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._clickTolerance()}}),CY=function(t,e){return new EY(t,e)};mB.a.Canvas.include({_updateUnicode:function(t){if(!this._drawing)return;let e={x:t._point.x,y:t._point.y},n=this._ctx,r=[t.options.fontStyle,"normal",t.options.fontWeight,t.options.fontSize,t.options.fontFamily].join(" "),i=t.options.label.replace(/^&#x/,"");i=String.fromCharCode(parseInt(i,16));let o=i.split("\n"),a=o.length;if(n.fillStyle=t.options.fontColor,n.globalAlpha=1,t.options.fontOpacity>=0&&t.options.fontOpacity<1&&(n.globalAlpha=t.options.fontOpacity),n.fillText){n.font=r,n.textAlign=t.options.textAlign,n.textBaseline=t.options.textBaseline;let i=t.options.vfactor,s=n.measureText("Mg").height||n.measureText("xx").width;e.y+=s*i*(a-1);for(let r=0;r<a;r++)0!=t.options.labelRotation?(n.save(),n.translate(e.x,e.y),n.rotate(t.options.labelRotation*Math.PI/180),n.fillText(o[r],0,s*r),n.restore()):n.fillText(o[r],e.x,e.y)}else if(n.mozDrawText){n.mozTextStyle=r;let i=t.options.textAlign,s=t.options.vfactor,l=n.mozMeasureText("xx");e.y+=l*(1+s*a);for(let t=0;t<a;t++){let r=e.x+i*n.mozMeasureText(o[t]),a=e.y+t*l;n.translate(r,a),n.mozDrawText(o[t]),n.translate(-r,-a)}}}});var MY=mB.a.LayerGroup.extend({options:{map:"map",server:"",featureLayerPopupEnable:!0,featureLayerPopup:null,credentialValue:null,credentialKey:"key",attribution:pW.Online.attribution},defaultFeatureLayerPopup:function(t){return t.feature.properties.attributes.title+":"+t.feature.properties.attributes.description},initialize:function(t,e){(t||e)&&(this._layers={},mB.a.setOptions(this,e),this.id=t,this.load(),this.cartoCSSToLeaflet=new lY)},load:function(){this.options.server.indexOf("http://")<0&&this.options.server.indexOf("https://")<0&&(this.options.server="http://"+this.options.server);var t=this.options.server+"/web/maps/"+this.id+".json";this.options.credentialValue&&(t+="?"+this.options.credentialKey+"="+this.options.credentialValue);var e=this;Be.get(t).then((function(t){return t.json()})).then((function(t){if(t){var n=t.layers;e.mapInfo=t,e.createLayersByJson(n)}}))},addLayerWrapper:function(t,e,n){return e&&this.createMap(n),this.addLayer(t),t.labelLayer&&this.addLayer(t.labelLayer),this},createLayersByJson:function(t){if(mB.a.Util.isArray(t)&&0!==t.length){this.layers=[];for(var e=[],n=0;n<t.length;n++){var r=t[n];r["_originIndex"]=n;var i=r.layerType=r.layerType||"BASE_LAYER";"BASE_LAYER"===i?(r.isBaseLayer=!0,this.createLayer(r.type,r)):e.unshift(r)}while(e.length>0){var o=e.pop(),a=o.type,s=o.layerType=o.layerType||"BASE_LAYER";"OVERLAY_LAYER"!==s&&(a=s),this.createLayer(a,o)}this.fire("maploaded",{map:this._map})}},createCRS:function(t,e,n,r,i){return t<0?new NW({bounds:i,origin:r,resolutions:n}):910112===t||910102===t?CW:(910111===t&&(t=3857),910101===t&&(t=4326),dW("EPSG:"+t,{origin:r,resolutions:n,bounds:i}))},createMap:function(t){var e=t.crs||mB.a.CRS.EPSG3857,n=mB.a.latLngBounds(e.unproject(t.bounds.min),e.unproject(t.bounds.max));this._map=mB.a.map(this.options.map,{center:n.getCenter(),maxZoom:t.maxZoom||22,minZoom:t.minZoom||0,zoom:t.zoom||0,crs:e,renderer:mB.a.canvas()}),e instanceof NW?this._map.setZoom(t.zoom?t.zoom+2:2,{maxZoom:t.maxZoom||22}):this._map.fitBounds(n,{maxZoom:t.maxZoom||22})},getResolutionsFromScales:function(t,e,n,r){for(var i=[],o=0;o<t.length;o++)i.push(GW(t[o],e,n,r));return i},createLayer:function(t,e){var n=e.prjCoordSys,r=n&&n.epsgCode||this.mapInfo.epsgCode,i=this.mapInfo.center||e.center,o=this.mapInfo.level||e.level,a=this.mapInfo.extent||e.bounds,s=e.scales,l=e.isBaseLayer,u=e.opacity,c=mB.a.bounds([a.leftBottom.x,a.leftBottom.y],[a.rightTop.x,a.rightTop.y]),h=e.bounds?mB.a.bounds([e.bounds.leftBottom.x,e.bounds.leftBottom.y],[e.bounds.rightTop.x,e.bounds.rightTop.y]):c;i||(i=h.getCenter());var d,f=mB.a.point(h.min.x,h.max.y),p=s?this.getResolutionsFromScales(s,96,e.units):null,g=this.createCRS(r,n?n.type:"",p,f,h),m={bounds:c,center:mB.a.point(i.x,i.y),crs:g,zoom:o};switch(t){case"SUPERMAP_REST":d=eY(e.url,{transparent:!0,opacity:u});break;case"SUPERMAP_REST_VECTOR":break;case"TIANDITU_VEC":case"TIANDITU_IMG":case"TIANDITU_TER":m.crs=4326===r?TW:IW,m.minZoom=1,m.zoom=1+m.zoom,d=this.createTiandituLayer(e);break;case"BAIDU":m.crs=CW,m.zoom=3+m.zoom,m.minZoom=3,d=HW();break;case"BING":break;case"WMS":d=this.createWmsLayer(e);break;case"WMTS":m.resolutions=this.getResolutionsFromScales(s,90.71446714322,e.units);var y=e.identifier,v=y.substring(y.indexOf("_")+1);d=KW(e.url,{layer:v,style:"default",tilematrixSet:y,format:"image/png"});break;case"CLOUD":m.crs=mB.a.CRS.EPSG3857,m.zoom=3+m.zoom,m.minZoom=3,d=YW(e.url,{opacity:u});break;case"MARKER_LAYER":d=this.createMarkersLayer(e,g);break;case"FEATURE_LAYER":"ANIMATORVECTOR"==e.identifier||(d="THEME"==e.identifier?this.createThemeLayer(e):this.createVectorLayer(e,g));break;default:throw new Error("unSupported Layer Type")}d&&e.isVisible&&this.addLayerWrapper(d,l,m)},createTiandituLayer:function(t){var e=t.type.split("_")[1].toLowerCase(),n="OVERLAY_LAYER"===t.layerType,r=new QW({layerType:e,isLabel:n});return r},createMarkersLayer:function(t,e){var n=this,r=t.markers||[],i=function(t){var n=e.unproject(mB.a.point(t[0],t[1]));return new mB.a.LatLng(n.lat,n.lng,t[2])},o=mB.a.geoJSON(DW(r),{pointToLayer:function(t,e){var n=new mB.a.Marker(e);return n.setStyle=function(t){t&&n.setIcon(t)},n},coordsToLatLng:i,style:function(t){return n.cartoCSSToLeaflet.getStyleFromiPortalMarker(t.properties.icon)}});return this.options.featureLayerPopupEnable&&o.bindPopup(this.options.featureLayerPopup||this.defaultFeatureLayerPopup),o},createWmsLayer:function(t){var e=t.url,n=t.opacity,r=t.subLayers;return r&&"undefined"!==r&&"null"!==r||(r="0"),mB.a.tileLayer.wms(e,{layers:r,format:"image/png",transparent:!0,noWrap:!0,opacity:n})},createVectorLayer:function(t,e){var n=t.style,r=t.opacity,i=this,o=function(t){var n=e.unproject(mB.a.point(t[0],t[1]));return new mB.a.LatLng(n.lat,n.lng,t[2])};if(!t.url){var a=mB.a.geoJSON(DW(t.features),{pointToLayer:function(t,e){var n=new mB.a.Marker(e);return n.setStyle=function(t){t&&n.setIcon(t)},n},coordsToLatLng:o,style:function(t){let e=i.cartoCSSToLeaflet.getStyleFromiPortalStyle(n||{},t.geometry.type,t.properties.style);return e&&e.dashArray&&0==e.dashArray.length&&(e.dashArray=null),e},opacity:r});return this.options.featureLayerPopupEnable&&a.bindPopup(this.options.featureLayerPopup||this.defaultFeatureLayerPopup),a}for(var s=t.url,l=t.name,u=t.features,c=0;c<u.length;c++){var h=u[c];h.visible&&this.getFeaturesBySQL(s,l,h.name,"",m.GEOJSON,t=>{var e=mB.a.geoJSON(t.result,{pointToLayer:function(t,e){var n=new mB.a.Marker(e);return n.setStyle=function(t){t&&n.setIcon(t)},n},coordsToLatLng:o,style:function(t){return this.cartoCSSToLeaflet.getStyleFromiPortalStyle(n||{},t.geometry.type,t.properties.style)},opacity:r});this.options.featureLayerPopupEnable&&e.bindPopup(i.options.featureLayerPopup||i.defaultFeatureLayerPopup),this.addLayer(e)})}},getFeaturesBySQL:function(t,e,n,r,i,o){r=r||"SMID > 0";var a=new Kr({queryParameter:{name:n+"@"+e,attributeFilter:r},datasetNames:[e+":"+n],fromIndex:0,toIndex:1e5});SY(t).getFeaturesBySQL(a,o,i)},createThemeLayer:function(t){var e,n=t.themeSettings&&JSON.parse(t.themeSettings),r=n.type;if(t.themeSettings=n,e="HEAT"===r?this.createHeatLayer(t,n):"UNIQUE"===r?this.createUniqueLayer(t,n):"RANGE"===r?this.createRangeLayer(t,n):this.createBaseThemeLayer(t,n),e&&(this.addFeature2ThemeLayer(t,e),e.on("add",t=>{this.registerThemeEvent(t.target)})),n&&n.labelField){var i=this.createLabelLayer(t,n);i.on("add",t=>{this.registerThemeEvent(t.target)}),e.labelLayer=i}return e},createBaseThemeLayer:function(t,e){let n=t.style,r=t.opacity,i=e.vectorType,o=n.pointStyle;o.fill="LINE"!==i;var a={};a.radius=o.pointRadius,a.color=o.strokeColor,a.opacity=o.strokeOpacity,a.lineCap=o.strokeLineCap,a.weight=o.strokeWidth,a.fillColor=o.fillColor,a.fillOpacity=o.fillOpacity;var s=(t,e)=>mB.a.circleMarker(e,a);return o.unicode&&(s=(t,e)=>new EY(e,o)),mB.a.geoJSON({type:"GeometryCollection",geometries:[]},{pointToLayer:s,opacity:r})},createUniqueLayer:function(t,e){for(var n=t.title,r=e.field,i=[],o=e.settings,a=t.isVisible,s=t.opacity,l=e.vectorType,u=0;u<o.length;u++){var c={};c.value=o[u].value,c.style=o[u].style,i.push(c)}var h=new gY(n,{opacity:s,visibility:a});this.registerThemeEvent(h),h.style=t.style.pointStyle,h.style.fill="LINE"!==l,h.style.stroke=!0,h.themeField=r,h.styleGroups=i;var d=this;return h.on("click",(function(t){if(t.target&&t.target.refDataID){var e=h.getFeatureById(t.target.refDataID);d.events.triggerEvent("uniquefeatureclicked",e,h)}})),h},createRangeLayer:function(t,e){var n=t.title,r=e.field,i=[],o=e.settings,a=t.isVisible,s=t.opacity,l=e.vectorType,u=t.style.pointStyle;u.fill="LINE"!==l;for(var c=0;c<o.length;c++){var h={};h.start=o[c].start,h.end=o[c].end,h.style=o[c].style,i.push(h)}var d=new yY(n,{visibility:a,opacity:s});return this.registerThemeEvent(d),d.style=t.style.pointStyle,d.style.stroke=!0,d.themeField=r,d.styleGroups=i,d},createLabelLayer:function(t,e){var n,r=t.title,i=e.labelField,o=e.settings,a=t.isVisible;n=!o||o.length>0?{fillColor:"#ffffff"}:o[0].style;var s=mB.a.Util.extend(new ds,n);s.fontWeight="bold",s.fontSize="14px",s.labelRect=!0,s.strokeColor=s.fillColor,s.fontColor=e.labelColor,e.labelFont&&(s.fontFamily=e.labelFont);var l=new bY(r,{visibility:a,opacity:.7});return this.registerThemeEvent(l),l.style=s,l.themeField=i,l.styleGroups=[],l},createHeatLayer:function(t,e){let n,r=e.colors||["blue","cyan","lime","yellow","red"],i={};for(let a=0,s=r.length,l=1;a<s;a++)i[l/s]=r[a],l++;let o=e.settings[0].radius;return"千米"!==e.heatUnit&&"km"!==e.heatUnit||(o=1e3*e.heatRadius),e.settings[0]&&e.settings[0].featureWeight&&(n=e.settings[0].featureWeight),mB.a.heatLayer([],{radius:o/2,minOpacity:t.opacity,gradient:i,blur:o/2,featureWeight:n})},addFeature2ThemeLayer:function(t,e){if("FEATURE_LAYER"===t.layerType&&"THEME"===t.identifier){var n=this,r=!!t.datasourceName,i=t.cartoCSS;if(i)var o=this.getCartoCSS2Obj(i).needTransform,a=this.getCartoCSS2Obj(i).isAddFile;var s,l,u,c=t.url,h=t.credential,d=t.themeSettings,f=d.filter;if(a){var p=JSON.parse(t.datasourceName),g=this.getSQLFromFilter(f);if(c)this.getFeatureFromFileAdded(t,(function(r){var i,a,s=[];if("EXCEL"===r.type||"CSV"===r.type){i=n.parseFeatureFromEXCEL.apply(n,[r.content.rows,r.content.colTitles,!1,p]);for(var l=0,u=i.length;l<u;l++)a=rY()({attr:i[l].attributes},g),a.length>0&&s.push(i[l])}else{i=n.parseFeatureFromJson(r.content);for(var c=0,h=i.length;c<h;c++)a=rY()({attr:i[c].attributes},g),a.length>0&&s.push(i[c])}var d="4326",f=t.prjCoordSys&&t.prjCoordSys.epsgCode;o?n.changeFeatureLayerEpsgCode(f,d,e,s,(function(t){O(t)})):O(s)}),(function(){}));else{for(var y=[],v=t.features,b=0,_=v.length;b<_;b++){var x=v[b],w=rY()({attr:x.attributes},g);if(w.length>0){var S=x.geometry.points[0].x,E=x.geometry.points[0].y,C=new ne(S,E),M=new me(C,x.attributes,x.style);y.push(M)}}O(y)}}else if(r){var T=t.datasourceName;s=t.subLayers&&JSON.parse(t.subLayers),l=s.length&&s.length>0?s[0]:s,u=l&&l.name,this.getFeaturesBySQL(t.url,T,u,d.filter,m.ISERVER,n=>{var r,i,a=n.result,s=[];if(a&&a.features){r=a.features;for(var l=0,u=r.length;l<u;l++)i=mo.fromJson(r[l]).toFeature(),s.push(i);var c="4326",h=t.prjCoordSys&&t.prjCoordSys.epsgCode;o?this.changeFeatureLayerEpsgCode(h,c,e,s,(function(t){O(t)})):O(r)}})}else{s=t.subLayers&&JSON.parse(t.subLayers),l=s.length&&s.length>0?s[0]:s,u=l&&l.name;var A=t.prjCoordSys&&t.prjCoordSys.epsgCode;this.getFeaturesBySQL(c,h,u,f,m.ISERVER,(function(t){var r="4326";o?n.changeFeatureLayerEpsgCode(A,r,e,t,(function(t){O(t)})):O(t)}))}}function O(r){if(e&&e.labelLayer instanceof bY&&n.addFeature2LabelLayer(e.labelLayer,r,t),mB.a.HeatLayer&&e instanceof mB.a.HeatLayer){var i=[];for(let t=0,n=r.length;t<n;t++){let n=r[t].geometry;i[t]=mB.a.latLng(n.y,n.x),e.options.featureWeight&&(i[t]=[i[t].lat,i[t].lng,parseFloat(r[t].attributes[e.options.featureWeight])])}e.setLatLngs(i)}else e instanceof mB.a.GeoJSON?e.addData((new Ee).toGeoJSON(r)):e.addFeatures(r)}},addFeature2LabelLayer:function(t,e,n){if(e){var r,i,o=n.themeSettings;o="string"===typeof o?JSON.parse(n.themeSettings):n.themeSettings;for(var a,s=o.labelField,l=t.style,u=[],c=n.styleString&&JSON.parse(n.styleString),h=0;h<e.length;h++){a=this.getLabelLngLat(o.vectorType,e[h]),this.setLabelOffset(o.vectorType,c,e[h],l),r=e[h];var d=r.attributes;i=new hY([a.lat,a.lng,d[s]],d),u.push(i)}t.style=l,t.addFeatures(u)}},setLabelOffset:function(t,e,n,r){if("POINT"===t){var i=e.pointStyle.pointRadius||0,o=e.pointStyle.strokeWidth||0,a=parseInt(e.pointStyle.fontSize)||0;r.labelXOffset=0,r.labelYOffset=e.pointStyle.unicode?20+a:25+(i+o)}},getLabelLngLat:function(t,e){var n={};if("POINT"===t){var r=e.geometry;n.lng=r.x,n.lat=r.y}else if("LINE"===t){var i,o,a=e.geometry.components;if(a[0].x)i=a.length,o=parseInt(i/2),n.lng=a[o].x,n.lat=a[o].y;else{var s=a[0].components;i=s.length,o=parseInt(i/2),n.lng=s[o].x,n.lat=s[o].y}}else{var l=e.geometry.getCentroid();n.lng=l.x,n.lat=l.y}return n},changeFeatureLayerEpsgCode:function(t,e,n,r,i){var o,a,s=this,l=[];if(t&&e){if(r&&r.length>0){for(o=0,a=r.length;o<a;o++){var u=r[o],c=u.geometry,h=c.getVertices();l=l.concat(h)}t="EPSG:"+t,e="EPSG:"+e,s.coordsTransform(t,e,l,function(t,e){return function(t){var n=0,r=t.length;for(o=n;o<r;o++){var a=l[o],u=t[o];a.x=u.x,a.y=u.y,a.calculateBounds()}for(o=0,r=e.length;o<r;o++){var c=e[o],h=c.geometry;h.components&&s.calculateComponents(h.components),h.calculateBounds()}i&&i.call(s,e)}}(0,r))}return!0}},calculateComponents:function(t){if(t)if(t.components)this.calculateComponents(t.components);else for(var e=0,n=t.length;e<n;e++){var r=t[e];r.components&&this.calculateComponents(r.components),r.calculateBounds()}},coordsTransform:function(t,e,n,r){var i,o=this.SERVER_TYPE_MAP[t],a=this.SERVER_TYPE_MAP[e];if(t!==e&&o&&a){var s=this.SERVER_TYPE_MAP["EPSG:3857"],l=this.SERVER_TYPE_MAP["EPSG:4326"];if(o!==s&&o!==l||a!==s&&a!==l){var u=o+"_"+a;this.postTransform(u,n,r)}else this.projTransform(t,e,n,r)}else{if(n&&void 0!==n.length){i=[];for(var c=0,h=n.length;c<h;c++){var d={x:n[c].x,y:n[c].y};i.push(d)}}else i={x:n.x,y:n.y};r&&r.call(this,i)}},projTransform:function(t,e,n,r){var i,o=this;if(cW){if(n&&void 0!==n.length){i=[];for(var a=0,s=n.length;a<s;a++){var l=cW(t,e,[n[a].x,n[a].y]);i.push({x:l[0],y:l[1]})}}else i=cW(t,e,[n.x,n.y]),i={x:i[0],y:i[1]};r&&(o.fire("coordconvertsuccess",{newCoor:i}),r.call(o,i))}},postTransform:function(t,e,n){var r=this,i=[];if(!t)return n.call(r,null);if(e&&void 0!==e.length)for(var o=0,a=e.length;o<a;o++)i.push({x:e[o].x,y:e[o].y});else i=[{x:e.x,y:e.y}];if(0===i.length)return n.call(r,null);var s={convertType:t,points:i},l=this.server+"/apps/viewer/coordconvert.json";s=JSON.stringify(s);var u={};!Wt.isInTheSameDomain(l)&&this.proxy&&(u.proxy=this.proxy),Be.post(l,s,u).then(t=>t.json()).then(t=>{var r=t;e||void 0===e.length||(r=r[0]),this.fire("coordconvertsuccess",{newCoors:r}),n.call(this,r)}).catch(t=>{this.actived&&this.fire("coordconvertfailed",{err:t})})},getSQLFromFilter:function(t){return t?(t=t.replace(/=/g,"==").replace(/and|AND/g,"&&").replace(/or|OR/g,"||").replace(/>==/g,">=").replace(/<==/g,"<=")," *  where ("+t+")"):" * where (1==1||1>=0)"},getAttributesObjFromTable:function(t,e){if(0!==t.length&&0!==e.length){for(var n=[],r=0;r<t.length;r++){for(var i={},o=0;o<e.length;o++)i[e[o]]=t[r][o];n.push(i)}return n}},parseFeatureFromEXCEL:function(t,e,n,r){for(var i=this.getAttributesObjFromTable(t,e),o=[],a=0,s=i.length;a<s;a++){var l=i[a][r["lon"]],u=i[a][r["lat"]];if(l&&u){l=parseFloat(l),u=parseFloat(u);var c,h=new ne(l,u);c=n?new uY(h,i[a],null):new me(h,i[a],null),o.push(c)}}return o},parseFeatureFromJson:function(t){var e=new Ee,n=e.read(t);if(null==n){var r=JSON.parse(t.replace(/'/,'"'));(r.isAnalyseResult||"MapEditor"===r.type||"DataInsights"===r.type||"ISERVER"===r.type)&&(r=r.data.recordsets[0].features),e=new Ee,n=e.read(r)}for(var i=0,o=n.length;i<o;i++)n[i].attributes=n[i].attributes.properties||n[i].attributes;return n},getFeatureFromFileAdded:function(t,e,n,r){var i=r?t.url+"?currentPage=1&&pageSize=9999999":t.url;Be.get(i).then(t=>t.json()).then(t=>{e&&e(t)}).catch(t=>n&&n(t))},getCartoCSS2Obj:function(t){var e,n=!1;return t.indexOf("}")>-1?(t=JSON.parse(t),n=t.needTransform,e=t.isAddFile):"needTransform"===t?(n=!0,e=!1):e="true"===t,{isAddFile:e,needTransform:n}},registerThemeEvent:function(t){t.on("click",e=>{if(!t.map)return;let n;this.selectedFeature&&(this.fire("featureunselected",{feature:this.selectedFeature}),this.selectedFeature=null),e.target&&e.target.refDataID&&(n=t.getFeatureById(e.target.refDataID)),n&&(this.selectedFeature=n,this.fire("featureselected",{feature:n}))}),t.on("mousemove",e=>{if(t.map&&e.target&&e.target.refDataID){let n;e.target&&e.target.refDataID&&(n=t.getFeatureById(e.target.refDataID)),n&&this.fire("featuremousemove",{feature:n})}})},SERVER_TYPE_MAP:{"EPSG:4326":"WGS84","EPSG:3857":"MERCATOR","EPSG:900913":"MERCATOR","EPSG:102113":"MERCATOR","EPSG:910101":"GCJ02","EPSG:910111":"GCJ02MERCATOR","EPSG:910102":"BD","EPSG:910112":"BDMERCATOR"}}),TY=function(t,e){return new MY(t,e)},AY=mB.a.TileLayer.extend({options:{collectionId:null,sqlFilter:null,ids:null,names:null,renderingRule:null,format:"png",zoomOffset:1,transparent:!0,cacheEnabled:!0,tileProxy:null,attribution:pW.Common.attribution,subdomains:null},initialize:function(t,e){this._url=t,mB.a.TileLayer.prototype.initialize.apply(this,arguments),mB.a.setOptions(this,e),mB.a.stamp(this)},onAdd:function(t){mB.a.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._getLayerUrl(),n=e+"&z="+this._getZoomForUrl()+"&x="+t.x+"&y="+t.y;return this.options.tileProxy&&(n=this.options.tileProxy+encodeURIComponent(n)),this.options.cacheEnabled||(n+="&_t="+(new Date).getTime()),this.options.subdomains&&(n=mB.a.Util.template(n,{s:this._getSubdomain(t)})),n},_getLayerUrl:function(){return this._layerUrl||this._createLayerUrl()},_createLayerUrl:function(){let t=Wt.urlPathAppend(this._url,`/collections/${this.options.collectionId}/tile.${this.options.format}`);return this.requestParams=this.requestParams||this._getAllRequestParams(),t=Wt.urlAppend(t,gB["Util"].getParamString(this.requestParams)),t=ze.appendCredential(t),this._layerUrl=t,t},_getAllRequestParams:function(){var t=this,e=t.options||{},n={};return n["transparent"]=!0===e.transparent,n["cacheEnabled"]=!(!1===e.cacheEnabled),e.sqlFilter&&(n["sqlFilter"]=e.sqlFilter),e.renderingRule&&(n["renderingRule"]=JSON.stringify(e.renderingRule)),e.ids&&(n["ids"]=e.ids.join(",")),e.names&&(n["names"]=e.names.join(",")),n}}),OY=function(t,e){return new AY(t,e)};function kY(t,e){e=e||{};const n=e.mapOptions||{},r=e.layerOptions||{};return new Promise((e,i)=>{new yW(t).getMapInfo(async o=>{if("processCompleted"===o.type){const{prjCoordSys:i}=o.result,a=BY(i);PY(i)||await LY(t,a);const s=RY(o.result,n),l=mB.a.map("map",{...s,...n}),u=new tY(t,{noWrap:!0,...r});return u.addTo(l),void e({map:l,layer:u})}i()})})}function IY(t,e){const{maxZoom:n=22}=e||{},{bounds:r,prjCoordSys:i,dpi:o,visibleScales:a,coordUnit:s}=t,l=rs(a,r,o,s,n);if(PY(i))return UY(r);const u=BY(i);return NY(u)?GY(u,{bounds:r,dpi:o,resolutions:l}):void 0}function PY(t){return"PCS_NON_EARTH"===t.type}async function LY(t,e){if(!NY(e,!1)){const n=await zY(t);n&&cW.defs(e,n)}}function NY(t,e=!0){try{cW(t)}catch(n){return e&&console.error(`The projection of ${t} is missing, please register the projection of ${t} first, refer to the documentation: https://iclient.supermap.io/web/introduction/leafletDevelop.html#multiProjection`),!1}return!0}function RY(t,e){const{bounds:n,center:r,scale:i,visibleScales:o,prjCoordSys:a,dpi:s,coordUnit:l}=t,{maxZoom:u=22}=e,c=rs(o,n,s,l,u),h=IY({prjCoordSys:a,bounds:n,dpi:s,visibleScales:o,coordUnit:l},{maxZoom:u}),d=h.resolutions||c,f={crs:h,center:jY(h,{center:r,bounds:n}),zoom:DY({scale:i,dpi:s,coordUnit:l},d),maxZoom:FY(c)};return f}function DY({scale:t,dpi:e,coordUnit:n},r){const i=zW(t,e,n);return is(i,r)}function FY(t){return t.length>0?t.length-1:22}function jY(t,{center:e,bounds:n}){const r="string"===typeof t?t:t.code;return"number"!==typeof e.x&&"number"!==typeof e.y&&(e={lat:(n.bottom+n.top)/2,lng:(n.left+n.right)/2}),"EPSG:4326"===r?{lat:e.y,lng:e.x}:t.unproject(mB.a.point(e.x,e.y))}function BY(t){const{type:e,epsgCode:n}=t;return"PCS_NON_EARTH"==e?"":"EPSG:"+n}async function zY(t){return new Promise((e,n)=>{new yW(t,{withoutFormatSuffix:!0}).getWkt(t=>{if("processCompleted"!==t.type)n();else{const n=t.result.data;e(n)}})})}function UY(t){let e={bounds:mB.a.bounds([t.left,t.bottom],[t.right,t.top]),origin:mB.a.point(t.left,t.top)};return new NW(e)}function GY(t,{bounds:e,dpi:n,resolutions:r}){const i=cW(t,"EPSG:4326").forward([e.left,0],!0),o=cW(t,"EPSG:4326").forward([e.right,0],!0),a=[parseInt(i[0]),parseInt(o[0])];let s={wrapLng:a,bounds:mB.a.bounds([e.left,e.bottom],[e.right,e.top]),origin:[e.left,e.top],dpi:n};return r&&r.length>0&&(s.resolutions=r),new hW(t,s)}var qY=mW.extend({options:{geometry:null,prjCoordSys:null,excludeField:null},initialize:function(t,e){e=e||{},mB.a.setOptions(this,e),e.projection&&(this.options.prjCoordSys=e.projection),mW.prototype.initialize.call(this,t,e),this.dataFlow=new qn(t,e),this.dataFlow.events.on({broadcastSocketConnected:this._defaultEvent,broadcastSocketError:this._defaultEvent,broadcastFailed:this._defaultEvent,broadcastSucceeded:this._defaultEvent,subscribeSocketConnected:this._defaultEvent,subscribeSocketError:this._defaultEvent,messageSucceeded:this._defaultEvent,setFilterParamSucceeded:this._defaultEvent,scope:this})},initBroadcast:function(){return this.dataFlow.initBroadcast(),this},broadcast:function(t){this.dataFlow.broadcast(t)},initSubscribe:function(){return this.dataFlow.initSubscribe(),this},setExcludeField:function(t){return this.dataFlow.setExcludeField(t),this.options.excludeField=t,this},setGeometry:function(t){return this.dataFlow.setGeometry(t),this.options.geometry=t,this},unSubscribe:function(){this.dataFlow.unSubscribe()},unBroadcast:function(){this.dataFlow.unBroadcast()},_defaultEvent:function(t){this.fire(t.eventType||t.type,t)}}),VY=function(t,e){return new qY(t,e)},HY=n("fdf9"),WY=HY["baiduMapLayer"]?HY["baiduMapLayer"].__proto__:Function;class YY extends WY{constructor(t,e,n,r){if(super(t,n,r),WY){var i=this;r=r||{},i.init(r),i.argCheck(r),this.canvasLayer=e,this.clickEvent=this.clickEvent.bind(this),this.mousemoveEvent=this.mousemoveEvent.bind(this),this._moveStartEvent=this.moveStartEvent.bind(this),this._moveEndEvent=this.moveEndEvent.bind(this),this._zoomStartEvent=this.zoomStartEvent.bind(this),this.bindEvent()}}clickEvent(t){var e=this.map.containerPointToLayerPoint([0,0]),n=this.devicePixelRatio=this.canvasLayer.devicePixelRatio=window.devicePixelRatio||1,r=t.layerPoint;super.clickEvent(mB.a.point((r.x-e.x)/n,(r.y-e.y)/n),t)}mousemoveEvent(t){var e=t.layerPoint;super.mousemoveEvent(e,t)}bindEvent(){var t=this.map;this.options.methods&&(this.options.methods.click&&t.on("click",this.clickEvent),this.options.methods.mousemove&&t.on("mousemove",this.mousemoveEvent)),this.map.on("movestart",this._moveStartEvent),this.map.on("moveend",this._moveEndEvent),this.map.on("zoomstart",this._zoomStartEvent)}destroy(){this.unbindEvent(),this.clearData(),this.animator&&this.animator.stop(),this.animator=null,this.canvasLayer=null}unbindEvent(){var t=this.map;this.options.methods&&(this.options.methods.click&&t.off("click",this.clickEvent),this.options.methods.mousemove&&t.off("mousemove",this.mousemoveEvent)),this.map.off("movestart",this._moveStartEvent),this.map.off("moveend",this._moveEndEvent),this.map.off("zoomstart",this._zoomStartEvent)}getContext(){return this.canvasLayer.getCanvas().getContext(this.context)}addData(t,e){var n=t;t&&t.get&&(n=t.get()),this.dataSet.add(n),this.update({options:e})}update(t){var e=t||{},n=e.data;n&&n.get&&(n=n.get()),void 0!=n&&this.dataSet.set(n),super.update({options:e.options})}getData(){return this.dataSet}removeData(t){if(this.dataSet){var e=this.dataSet.get({filter:function(e){return null==t||"function"!==typeof t||!t(e)}});this.dataSet.set(e),this.update({options:null})}}clearData(){this.dataSet&&this.dataSet.clear(),this.update({options:null})}_canvasUpdate(t){if(this.canvasLayer){var e=this,n=e.options.animation,r=this.getContext(),i=this.map;if(e.isEnabledTime()){if(void 0===t)return void this.clear(r);"2d"===this.context&&(r.save(),r.globalCompositeOperation="destination-out",r.fillStyle="rgba(0, 0, 0, .1)",r.fillRect(0,0,r.canvas.width,r.canvas.height),r.restore())}else this.clear(r);if("2d"===this.context)for(var o in e.options)r[o]=e.options[o];else r.clear(r.COLOR_BUFFER_BIT);if(!(e.options.minZoom&&i.getZoom()<e.options.minZoom||e.options.maxZoom&&i.getZoom()>e.options.maxZoom)){var a=i.getBounds(),s=a.getEast()-a.getWest(),l=a.getNorth()-a.getSouth(),u=i.getSize(),c=s/u.x,h=l/u.y,d=jW("DEGREE")*c,f=this.canvasLayer.getTopLeft(),p=i.latLngToAccurateContainerPoint(f),g={transferCoordinate:function(t){var n;n="2d"===e.context?i.latLngToAccurateContainerPoint(mB.a.latLng(t[1],t[0])):{x:(t[0]-f.lng)/c,y:(f.lat-t[1])/h};var r={x:n.x-p.x,y:n.y-p.y};return[r.x,r.y]}};void 0!==t&&(g.filter=function(e){var r=n.trails||10;return t&&e.time>t-r&&e.time<t});var m=e.dataSet.get(g);this.processData(m);var y=i.latLngToContainerPoint(mB.a.latLng(0,0)),v={x:y.x-p.x,y:y.y-p.y};"m"===e.options.unit?(e.options.size&&(e.options._size=e.options.size/d),e.options.width&&(e.options._width=e.options.width/d),e.options.height&&(e.options._height=e.options.height/d)):(e.options._size=e.options.size,e.options._height=e.options.height,e.options._width=e.options.width),this.drawContext(r,m,e.options,v),e.options.updateCallback&&e.options.updateCallback(t)}}}init(t){var e=this;e.options=t,this.initDataRange(t),this.context=e.options.context||"2d",e.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(e.options.zIndex),this.initAnimator()}addAnimatorEvent(){}moveStartEvent(){var t=this.options.animation;this.isEnabledTime()&&this.animator&&(this.steps.step=t.stepsRange.start,this._hide())}moveEndEvent(){this.canvasLayer.draw(),this._show()}zoomStartEvent(){this._hide()}clear(t){t&&t.clearRect&&t.clearRect(0,0,t.canvas.width,t.canvas.height)}_hide(){this.canvasLayer.canvas.style.display="none"}_show(){this.canvasLayer.canvas.style.display="block"}draw(){this.canvasLayer.draw()}}var XY=mB.a.Layer.extend({options:{attributionPrefix:null,attribution:pW.MapV.attribution},initialize:function(t,e,n){n=n||{},this.dataSet=t||{},this.mapVOptions=e||{},this.render=this.render.bind(this),mB.a.Util.setOptions(this,n),this.options.attributionPrefix&&(this.options.attribution=this.options.attributionPrefix+this.options.attribution),this.canvas=this._createCanvas(),mB.a.stamp(this)},onAdd:function(t){this._map=t;var e=this.getPane(),n=this.container=mB.a.DomUtil.create("div","leaflet-layer leaflet-zoom-animated",e);n.appendChild(this.canvas);var r=t.getSize();n.style.width=r.x+"px",n.style.height=r.y+"px",this.renderer=new YY(t,this,this.dataSet,this.mapVOptions),this.draw(),this.fire("loaded")},onRemove:function(){mB.a.DomUtil.remove(this.container),this.renderer.destroy()},addData:function(t,e){this.renderer.addData(t,e)},update:function(t){this.renderer.update(t)},getData:function(){return this.renderer&&(this.dataSet=this.renderer.getData()),this.dataSet},removeData:function(t){this.renderer&&this.renderer.removeData(t)},clearData:function(){this.renderer.clearData()},draw:function(){return this._reset()},setZIndex:function(t){this.canvas.style.zIndex=t},render:function(){this.renderer._canvasUpdate()},getCanvas:function(){return this.canvas},getContainer:function(){return this.container},getTopLeft:function(){var t,e=this._map;if(e){var n=e.getBounds();t=n.getNorthWest()}return t},_createCanvas:function(){var t=document.createElement("canvas");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=this.options.zIndex||600;var e="undefined"===typeof window?{}:window,n=this.devicePixelRatio=e.devicePixelRatio||1;return this.mapVOptions.context&&"2d"!==this.mapVOptions.context||t.getContext("2d").scale(n,n),t},_resize:function(){var t=this.canvas;if(t){var e=this._map,n=e.getSize();"heatmap"===this.mapVOptions.draw?(t.width=parseInt(n.x)*this.devicePixelRatio,t.height=parseInt(n.y)*this.devicePixelRatio):(t.width=parseInt(n.x),t.height=parseInt(n.y)),t.style.width=n.x+"px",t.style.height=n.y+"px";var r=e.getBounds(),i=e.latLngToLayerPoint(r.getNorthWest());mB.a.DomUtil.setPosition(t,i)}},_reset:function(){this._resize(),this._render()},redraw:function(){this._resize(),this._render()},_render:function(){this.render()}}),JY=function(t,e,n){return new XY(t,e,n)},ZY=XY.extend({initialize:function(t,e){e=e||{},mB.a.Util.setOptions(this,e),this.data=[],this.mapVOptions={draw:"simple"},XY.prototype.initialize.call(this,new window.mapv.DataSet([]),this.mapVOptions,e),this.idCache={},this.url=t,this._last=new Date,this._imageCache={}},onMessageSuccessed:function(t){const e=t.featureResult.properties["id"],n=t.featureResult.geometry,r={geometry:t.featureResult.geometry};if("Point"===n.type&&this.options.pointToLayer){const i=this.options.pointToLayer(t.featureResult,mB.a.latLng(n.coordinates[1],n.coordinates[0]));if(i instanceof mB.a.Marker){this.mapVOptions.draw="icon";let o=i.options.icon;const a=o._getIconUrl("icon"),s=o.options.iconSize?o.options.iconSize[0]:null,l=o.options.iconSize?o.options.iconSize[1]:null,u=`${a}_${s}_${l}`;let c=this._imageCache[u];c||(c=o.createIcon(),this._imageCache[u]=c,c.onload=()=>{this.update({data:this.data,options:this.mapVOptions})}),r.icon=c,(o.options.iconSize||c.style.height)&&(this.mapVOptions.offset={x:0,y:-(o.options.iconSize[1]||c.style.height)/2}),this.options.deg&&(r.deg=this.options.deg,"function"===typeof r.deg&&this.idCache[e]&&this.data[this.idCache[e]]&&(r.deg=r.deg(t.featureResult,mB.a.latLng(n.coordinates[1],n.coordinates[0]),this.data[this.idCache[e]])))}if(i instanceof mB.a.CircleMarker){this.mapVOptions.draw="simple";const t=this._toMapvStyle(i);for(const e in t)t.hasOwnProperty(e)&&(r[e]=t[e])}}else if(this.options.style){const e=this._toMapvStyle(this.options.style(t.featureResult));for(const t in e)e.hasOwnProperty(t)&&(r[t]=e[t])}void 0==this.idCache[e]?(this.data.push(r),this.idCache[e]=this.data.length-1):this.data[this.idCache[e]]=r,new Date-this._last>200&&(this._last=new Date,this.update({data:this.data,options:this.mapVOptions}))},_toMapvStyle:function(t){const e={draw:"simple"};return e.strokeStyle=t.color,e.lineWidth=t.width,e.globalAlpha=t.fillOpacity||t.opacity,e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.fillStyle=t.fillColor,e.size=t.radius,e}}),KY=mB.a.GeoJSON.extend({initialize:function(t,e){e=e||{},e.style&&!e.pointToLayer&&(e.pointToLayer=function(t,n){return mB.a.circleMarker(n,e.style())}),mB.a.Util.setOptions(this,e),this._layers={},mB.a.stamp(this),this.url=t,this.idCache={}},onMessageSuccessed:function(t){const e=t.featureResult,n=t.featureResult.properties[this.options.idField];let r=null;void 0!==n&&this.idCache[n]?(r=this.getLayer(this.idCache[n]),this._updateLayerData(r,e)):(r=mB.a.GeoJSON.geometryToLayer(e,this.options),r.feature=mB.a.GeoJSON.asFeature(e),this.addLayer(r),void 0!==n&&(this.idCache[n]=this.getLayerId(r))),this.options.onEachFeature&&this.options.onEachFeature(e,r)},_updateLayerData:function(t,e){e.properties&&(t.feature.properties=e.properties);var n=[];switch(e.geometry.type){case"Point":n=mB.a.GeoJSON.coordsToLatLng(e.geometry.coordinates),t.setLatLng(n);break;case"LineString":n=mB.a.GeoJSON.coordsToLatLngs(e.geometry.coordinates,0),t.setLatLngs(n);break;case"MultiLineString":case"Polygon":n=mB.a.GeoJSON.coordsToLatLngs(e.geometry.coordinates,1),t.setLatLngs(n);break;case"MultiPolygon":n=mB.a.GeoJSON.coordsToLatLngs(e.geometry.coordinates,2),t.setLatLngs(n);break}}}),QY=mB.a.LayerGroup.extend({options:{geometry:null,prjCoordSys:null,excludeField:null,idField:"id",render:"normal"},initialize:function(t,e){e=e||{},mB.a.Util.setOptions(this,e),this.url=t,this._layers={},this.dataService=new qY(this.url,{geometry:this.options.geometry,prjCoordSys:this.options.prjCoordSys,excludeField:this.options.excludeField})},onAdd:function(t){this.dataService.initSubscribe(),this.dataService.on("subscribeSocketConnected",t=>this.fire("subscribesucceeded",t)),this.dataService.on("subscribeSocketError",t=>this.fire("subscribefailed",t)),this.dataService.on("messageSucceeded",t=>this._onMessageSuccessed(t)),this.dataService.on("setFilterParamSucceeded",t=>this.fire("setfilterparamsucceeded",t)),"mapv"===this.options.render?this.addLayer(new ZY(this.url,this.options)):this.addLayer(new KY(this.url,this.options)),mB.a.LayerGroup.prototype.onAdd.call(this,t)},onRemove:function(t){mB.a.LayerGroup.prototype.onRemove.call(this,t),this.dataService&&this.dataService.unSubscribe()},setExcludeField:function(t){return this.dataService.setExcludeField(t),this.options.excludeField=t,this},setGeometry:function(t){return this.dataService.setGeometry(t),this.options.geometry=t,this},_onMessageSuccessed:function(t){this.getLayers().map(e=>(e.onMessageSuccessed&&(e.onMessageSuccessed(t),this.fire("dataupdated",{layer:e,data:t.featureResult})),e))}}),$Y=function(t,e){return new QY(t,e)};const tX=mB.a.Layer.extend({includes:[],_echartsContainer:null,_map:null,_ec:null,_echartsOptions:null,options:{attribution:pW.ECharts.attribution,loadWhileAnimating:!1},initialize:function(t,e){mB.a.Util.setOptions(this,e),this.setOption(t)},setOption:function(t,e,n){const r=t.baseOption||t;r.LeafletMap=r.LeafletMap||{roam:!0},r.animation=!0===r.animation,this._echartsOptions=t,this._ec&&this._ec.setOption(t,e,n)},getEcharts:function(){return this._ec},_disableEchartsContainer:function(){this._echartsContainer.style.visibility="hidden"},_enableEchartsContainer:function(){this._echartsContainer.style.visibility="visible"},onAdd:function(t){this._map=t,this._initEchartsContainer(),this._ec=_l["init"](this._echartsContainer),this._ec.leafletMap=t;const e=this;t.on("zoomstart",(function(){e._disableEchartsContainer()})),!e.options.loadWhileAnimating&&t.on("movestart",(function(){e._disableEchartsContainer()})),_l["registerAction"]({type:"LeafletMapLayout",event:"LeafletMapLayout",update:"updateLayout"},(function(t){})),_l["registerCoordinateSystem"]("leaflet",eX),_l["extendComponentModel"]({type:"LeafletMap",getBMap:function(){return this.__LeafletMap},defaultOption:{roam:!1}}),_l["extendComponentView"]({type:"LeafletMap",render:function(t,n,r){let i=!0,o=n.scheduler.ecInstance.leafletMap;const a=r.getZr().painter.getViewportRoot(),s=o.options.zoomAnimation&&mB.a.Browser.any3d;a.className=" leaflet-layer leaflet-zoom-"+(s?"animated":"hide")+" echarts-layer";const l=mB.a.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);a.style[l]="50% 50%";const u=t.coordinateSystem,c=r.getZr().painter.getLayers();rX(e._map,a);const h=function(){if(i)return;const n=rX(e._map,a);if(!e.options.loadWhileAnimating){for(let t in c)c.hasOwnProperty(t)&&c[t]&&d(c[t].ctx);e._enableEchartsContainer()}u.setMapOffset(n),t.__mapOffset=n,r.dispatchAction({type:"LeafletMapLayout"})};function d(t){t&&t.clearRect&&t.clearRect(0,0,t.canvas.width,t.canvas.height)}function f(){i||(r.dispatchAction({type:"LeafletMapLayout"}),e._enableEchartsContainer())}e._oldMoveHandler&&o.off(e.options.loadWhileAnimating?"move":"moveend",e._oldMoveHandler),e._oldZoomEndHandler&&o.off("zoomend",e._oldZoomEndHandler),o.on(e.options.loadWhileAnimating?"move":"moveend",h),o.on("zoomend",f),e._oldMoveHandler=h,e._oldZoomEndHandler=f,i=!1}}),this._ec.setOption(this._echartsOptions)},onRemove:function(){this._ec.clear(),this._ec.dispose(),delete this._ec,mB.a.DomUtil.remove(this._echartsContainer),this._oldZoomEndHandler&&(this._map.off("zoomend",this._oldZoomEndHandler),this._oldZoomEndHandler=null),this._oldMoveHandler&&(this._map.off(this.options.loadWhileAnimating?"move":"moveend",this._oldMoveHandler),this._oldMoveHandler=null),this._resizeHandler&&(this._map.off("resize",this._resizeHandler),this._resizeHandler=null),delete this._map},_initEchartsContainer:function(){const t=this._map.getSize(),e=document.createElement("div");e.style.position="absolute",e.style.height=t.y+"px",e.style.width=t.x+"px",e.style.zIndex=10,this._echartsContainer=e,this.getPane().appendChild(this._echartsContainer);const n=this;function r(t){let e=t.newSize;n._echartsContainer.style.width=e.x+"px",n._echartsContainer.style.height=e.y+"px",n._ec.resize()}this._map.on("resize",r),this._resizeHandler=r}});function eX(t){this._LeafletMap=t,this.dimensions=["lng","lat"],this._mapOffset=nX(t)}function nX(t){const e=t.containerPointToLayerPoint([0,0]),n=[e.x||0,e.y||0];return n}function rX(t,e){const n=nX(t);return e.style.left=n[0]+"px",e.style.top=n[1]+"px",n}eX.prototype.dimensions=["lng","lat"],eX.prototype.setMapOffset=function(t){this._mapOffset=t},eX.prototype.getBMap=function(){return this._LeafletMap},eX.prototype.prepareCustoms=function(){const t=_l["util"],e=this.getViewRect();return{coordSys:{type:"leaflet",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:t.bind(this.dataToPoint,this),size:t.bind(n,this)}};function n(e,n){return n=n||[0,0],t.map([0,1],(function(t){const r=n[t],i=e[t]/2,o=[],a=[];return o[t]=r-i,a[t]=r+i,o[1-t]=a[1-t]=n[1-t],Math.abs(this.dataToPoint(o)[t]-this.dataToPoint(a)[t])}),this)}},eX.prototype.dataToPoint=function(t){null===t[1]&&(t[1]=mB.a.CRS.EPSG3857.projection.MAX_LATITUDE);const e=this._LeafletMap.latLngToLayerPoint([t[1],t[0]]),n=this._mapOffset;return[e.x-n[0],e.y-n[1]]},eX.prototype.fixLat=function(t){return t>=90?89.99999999999999:t<=-90?-89.99999999999999:t},eX.prototype.pointToData=function(t){let e=this._mapOffset,n=this._LeafletMap.layerPointToLatLng([t[0]+e[0],t[1]+e[1]]);return[n.lng,n.lat]},eX.prototype.getViewRect=function(){const t=this._LeafletMap.getSize();return new _l["graphic"].BoundingRect(0,0,t.x,t.y)},eX.prototype.getRoamTransform=function(){return _l["matrix"].create()},eX.dimensions=eX.prototype.dimensions,eX.create=function(t){let e,n=t.scheduler.ecInstance.leafletMap;t.eachComponent("LeafletMap",(function(t){e||(e=new eX(n)),t.coordinateSystem=e,t.coordinateSystem.setMapOffset(t.__mapOffset||nX(n))})),t.eachSeries((function(t){"leaflet"===t.get("coordinateSystem")&&(e||(e=new eX(n)),t.coordinateSystem=e,t.animation=!0===t.animation)}))};const iX=function(t,e){return new tX(t,e)};class oX{static supportWebGL(){return aX("webgl")}static supportWebGL2(){return aX("webgl2")}static supportCanvas(){return aX("2d")}}function aX(t){var e=document.createElement("canvas");return e&&e.getContext(t)}var sX=mB.a.Class.extend({options:{radius:10,angele:60,spaceAngle:0,count:3,fill:!1,stroke:!0,color:"#3388ff",weight:1,lineCap:"round",lineJoin:"round",fillColor:"#66ccff",fillOpacity:.2,fillRule:"evenodd",opacity:1,strokeWidth:1},initialize:function(t){t=t||{},mB.a.Util.setOptions(this,t),this._canvas=document.createElement("canvas"),this._canvas.width=2*(this.options.radius+this.options.weight),this._canvas.height=2*(this.options.radius+this.options.weight),this._ctx=this._canvas.getContext("2d");var e=void 0===this.options.strokeWidth?1:this.options.strokeWidth;this.options.width=2*(this.options.radius+e)+1,this._initStyle()},getStyle:function(){return this._canvas},drawSector:function(t,e,n,r,i,o){i=i/180*Math.PI,o=o/180*Math.PI,t.moveTo(e,n),t.lineTo(e+r*Math.cos(i),n+r*Math.sin(i)),t.arc(e,n,r,i,o),t.lineTo(e,n)},_initStyle:function(){var t=0,e=this.options,n=e.angle;if(e.spaceAngle=360/e.count-e.angle,!(e.spaceAngle<0)){this._ctx.beginPath(),this.anchor=[e.width/2,e.width/2];for(var r=0;r<e.count;r++)this.drawSector(this._ctx,this.anchor[0],this.anchor[1],e.radius,t,n),t=n+e.spaceAngle,n=t+e.angle;this._fillStroke()}},_fillStroke:function(){var t=this.options;t.fill&&(this._ctx.globalAlpha=t.fillOpacity,this._ctx.fillStyle=t.fillColor||t.color,this._ctx.fill(t.fillRule||"evenodd")),t.stroke&&0!==t.weight&&(this._ctx.globalAlpha=t.opacity,this._ctx.lineWidth=t.weight,this._ctx.strokeStyle=t.color,this._ctx.lineCap=t.lineCap,this._ctx.lineJoin=t.lineJoin,this._ctx.stroke())}}),lX=function(t){return new sX(t)},uX=mB.a.Class.extend({options:{stroke:!0,color:"#3388ff",weight:1,opacity:1,lineCap:"round",lineJoin:"round",fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",radius:3},initialize:function(t){t=t||{},mB.a.Util.setOptions(this,t),this._canvas=document.createElement("canvas"),this._canvas.width=2*(this.options.radius+this.options.weight),this._canvas.height=2*(this.options.radius+this.options.weight),this._ctx=this._canvas.getContext("2d"),this._initStyle()},getCanvas:function(){return this._canvas},getStyle:function(){return this._canvas},_initStyle:function(){this._ctx.beginPath(),this._ctx.arc(this._canvas.width/2,this._canvas.height/2,this.options.radius,0,2*Math.PI),this._fillStroke()},_fillStroke:function(){var t=this.options;t.fill&&(this._ctx.globalAlpha=t.fillOpacity,this._ctx.fillStyle=t.fillColor||t.color,this._ctx.fill(t.fillRule||"evenodd")),t.stroke&&0!==t.weight&&(this._ctx.globalAlpha=t.opacity,this._ctx.lineWidth=t.weight,this._ctx.strokeStyle=t.color,this._ctx.lineCap=t.lineCap,this._ctx.lineJoin=t.lineJoin,this._ctx.stroke())}}),cX=function(t){return new uX(t)},hX=mB.a.Class.extend({options:{img:null,origin:[0,0],anchor:null,size:null},initialize:function(t){t=t||{},mB.a.Util.setOptions(this,t),this._canvas=document.createElement("canvas"),this._canvas.width=2*(this.options.radius+this.options.weight),this._canvas.height=2*(this.options.radius+this.options.weight),this._ctx=this._canvas.getContext("2d")},getStyle:function(){return this.options}}),dX=function(t){return new hX(t)};const fX=mB.a.Util.falseFn;var pX=mB.a.Class.extend({initialize:function(t,e){this.layer=t,e=e||{},mB.a.Util.setOptions(this,e)},getRenderer:function(){return this.options.renderer},update:function(){this.getRenderer()._clear(),this.getRenderer()._draw()},_getGraphicAtPoint:function(t){const e=this.layer,n=e._map;let r=e._getGraphicsInBounds();for(let i=r.length-1;i>=0;i--){let e,o,a;const s=n.latLngToLayerPoint(r[i].getLatLng());let l=r[i].getStyle();if(!l&&this.defaultStyle&&(l=this.defaultStyle),l.img){let t=l.img.width,n=l.img.height;l.size&&l.size[0]&&l.size[1]&&(t=l.size[0],n=l.size[1]);const r=l.anchor||[t/2,n/2];e=mB.a.point(s.x-r[0],s.y-r[1]),o=mB.a.point(e.x+t,e.y+n)}else e=mB.a.point(s.x-l.width/2,s.y-l.height/2),o=mB.a.point(s.x+l.width/2,s.y+l.height/2);if(a=mB.a.bounds(e,o),a.contains(t))return r[i]}return null},containsPoint:function(t){return!!this._getGraphicAtPoint(t)},_handleClick:function(t){t.target=null;const e=this.layer,n=e._map,r=this._getGraphicAtPoint(n.latLngToLayerPoint(t.latlng));if(r)return this.layer._renderer._ctx.canvas.style.cursor="pointer",t.target=r,void("click"===t.type&&e.options.onClick&&e.options.onClick.call(e,r,t));this.layer._renderer._ctx.canvas.style.cursor="auto"},_clearBuffer:fX});mB.a.Canvas.include({drawGraphics:function(t,e){var n=this;n._drawing&&t.forEach((function(t){var r=t.getStyle();!r&&e&&(r=e),r.img?n._drawImage.call(n,n._ctx,r,t.getLatLng()):n._drawCanvas.call(n,n._ctx,r,t.getLatLng())}))},_drawCanvas:function(t,e,n){var r=e,i=this._map.latLngToLayerPoint(n),o=i.x-r.width/2,a=i.y-r.height/2,s=r.width,l=r.height;t.drawImage(r,o,a,s,l)},_drawImage:function(t,e,n){var r,i;if(e.size){var o=e.size;r=o[0],i=o[1]}else r=e.img.width,i=e.img.height;var a=this._coordinateToPoint(n),s=mB.a.point(a),l=mB.a.point(e.anchor||[r/2,i/2]);a=[s.x-l.x,s.y-l.y],t.drawImage(e.img,a[0],a[1],r,i)},_coordinateToPoint:function(t){if(!this._map)return t;var e=t;mB.a.Util.isArray(t)?e=mB.a.latLng(t[0],t[1]):t instanceof mB.a.LatLng&&(e=mB.a.latLng(t.lat,t.lng));var n=this._map.latLngToLayerPoint(e);return[n.x,n.y]}});const gX=mB.a.Util.falseFn,mX=function(){let t=document.createElement("div"),e=["transform","WebkitTransform","MozTransform","OTransform","msTransform"];for(let n=0;n<e.length;n++){let r=e[n];if(void 0!==t.style[r])return r}return e[0]}();var yX=mB.a.Class.extend({initialize:function(t,e){this.layer=t;let n=e||{};mB.a.Util.setOptions(this,n),this.options.radius=this._pixelToMeter(this.options.radius),this._initContainer()},getRenderer:function(){return this},update:function(t){t&&t.length>-1&&(this._data=t),this._renderLayer.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,updateTriggersChanged:!0}),this._refreshData();let e=this._getLayerState();e.data=this._data||[],this._layerDefaultStyleCache=null,this._renderLayer.setNeedsRedraw(!0),this._renderLayer.setState(e)},drawGraphics:function(t){this._clearBuffer();let e=this.layer._map.getSize();this._container.width!==e.x&&(this._container.width=e.x),this._container.height!==e.y&&(this._container.height=e.y);let n=this.layer._map.getPanes().mapPane,r=n._leaflet_pos;this._container.style[mX]="translate("+-Math.round(r.x)+"px,"+-Math.round(r.y)+"px)",this._data=t||[],this._renderLayer||this._createInnerRender(),this._draw()},_initContainer:function(){this._container=this._createCanvas(this.options.width,this.options.height),this._layerContainer=this.options.container,this._wrapper=mB.a.DomUtil.create("div","deck-wrapper",this._layerContainer),this._wrapper.appendChild(this._container)},_createCanvas:function(t,e){let n=mB.a.DomUtil.create("canvas","graphicLayer  leaflet-layer leaflet-zoom-hide");return n.oncontextmenu=mB.a.Util.falseFn,n.width=t,n.height=e,n.style.width=t+"px",n.style.height=e+"px",n},_pixelToMeter:function(t){const e=this.layer._map.getBounds(),n=(e.getEast()-e.getWest())/this.layer._map.getSize().x,r=n*(6378137*Math.PI/180);return t*r},_createInnerRender:function(){let t=this,e=this._getLayerState(),{color:n,radius:r,opacity:i,highlightColor:o,radiusScale:a,radiusMinPixels:s,radiusMaxPixels:l,strokeWidth:u,outline:c}=e,h={id:"scatter-plot",data:t._data,pickable:Boolean(this.options.onClick)||Boolean(this.options.onHover),autoHighlight:!0,color:n,opacity:i,radius:r,radiusScale:a,highlightColor:o,radiusMinPixels:s,radiusMaxPixels:l,strokeWidth:u,coordinateSystem:this._isWGS84()?window.DeckGL.COORDINATE_SYSTEM.LNGLAT_OFFSETS:window.DeckGL.COORDINATE_SYSTEM.LNGLAT,isGeographicCoordinateSystem:this._isWGS84(),outline:c,getPosition:function(t){if(!t)return[0,0,0];let e=t.getLatLng();return e&&[e.lng,e.lat,0]},getColor:function(e){let n=t._getLayerDefaultStyle(),r=e&&e.options;return r&&r.color||n.color},getRadius:function(e){let n=t._getLayerDefaultStyle(),r=e&&e.getStyle();return r&&r.radius||n.radius},updateTriggers:{getColor:[n],getRadius:[r]}},d=this;this.options.onClick&&(h.onClick=function(){d._container.style.cursor="pointer",d.options.onClick.apply(d,arguments)}),this.options.onHover&&(h.onHover=function(){d._container.style.cursor="pointer",d.options.onHover.apply(d,arguments)}),t._renderLayer=new window.DeckGL.ScatterplotLayer(h)},_getLayerDefaultStyle:function(){if(this._layerDefaultStyleCache)return this._layerDefaultStyleCache;let{color:t,opacity:e,radius:n,radiusScale:r,radiusMinPixels:i,radiusMaxPixels:o,strokeWidth:a,outline:s}=this.layer.options;return n=this._pixelToMeter(n),this._layerDefaultStyleCache={color:t,opacity:e,radius:n,radiusScale:r,radiusMinPixels:i,radiusMaxPixels:o,strokeWidth:a,outline:s},this._layerDefaultStyleCache},_getLayerState:function(){let t=this.layer.getState();return t.zoom=t.zoom-1,t},_draw:function(){let t=this._getLayerState();this._refreshData(),t.data=this._data||[];let e={};for(let n in t)e[n]=t[n];this._layerDefaultStyleCache=null,this._renderLayer.setNeedsRedraw(!0),e.layers=[this._renderLayer],e.canvas=this._container,e.onBeforeRender=this._onBeforeRender.bind(this),e.onAfterRender=this._onAfterRender.bind(this),e.coordinateSystem=this._isWGS84()?window.DeckGL.COORDINATE_SYSTEM.LNGLAT_OFFSETS:window.DeckGL.COORDINATE_SYSTEM.LNGLAT,e.isGeographicCoordinateSystem=this._isWGS84(),this.deckGL?this.deckGL.setProps(e):this.deckGL=new window.DeckGL.experimental.DeckGLJS(e)},_clearBuffer:function(){if(this.deckGL){let t=this.deckGL.layerManager;t&&t.context.gl.clear(t.context.gl.COLOR_BUFFER_BIT)}return this},_refreshData:function(){let t=this._data||[],e=mB.a.Util.isArray(t)?[].concat(t):[t];this._renderLayer.props.data||(this._renderLayer.props.data=[]),this._renderLayer.props.data.length=0;for(let n=0;n<e.length;n++)this._renderLayer.props.data.push(e[n]);this._data=this._renderLayer.props.data},_handleClick:gX,_onBeforeRender:gX,_onAfterRender:gX,_removePath:function(){return this._wrapper.parentElement.removeChild(this._wrapper),this._container=null,this._wrapper=null,this},_initPath:gX,_addPath:gX,containsPoint:gX,_isWGS84(){return"EPSG:4326"===this.layer._map.options.crs.code}});const vX=["canvas","webgl"],bX={color:[0,0,0,255],opacity:.8,radius:10,radiusScale:1,radiusMinPixels:0,radiusMaxPixels:Number.MAX_SAFE_INTEGER,strokeWidth:1,outline:!1},_X={"EPSG:4326":1.40625,"EPSG:3857":156543.03392804688},xX={"EPSG:4326":1,"EPSG:3857":0};var wX=mB.a.Path.extend({initialize:function(t,e){this.graphics=[].concat(t);let n=e||{};n.pane="overlayPane",mB.a.Util.setOptions(this,n),this.options.render=this.options.render||vX[0],oX.supportWebGL2()||(this.options.render=vX[0]),this.options.interactive&&this.on("click mousemove dblclick mousedown mouseup mouseout contextmenu",this._handleClick,this)},getEvents:function(){const t={resize:this._resize.bind(this),moveend:this._moveEnd.bind(this)};return t},onAdd:function(t){this._map=t,this._crs=t.options.crs,this.defaultStyle=this._getDefaultStyle(this.options),this._renderer=this._createRenderer(),this._container=this._renderer._container,mB.a.Path.prototype.onAdd.call(this)},onRemove:function(){this.off("click mousemove dblclick mousedown mouseup contextmenu",this._handleClick,this),this._renderer._removePath(this)},setGraphics:function(t){this.graphics=this.graphics||[],this.graphics.length=0;let e=mB.a.Util.isArray(t)?[].concat(t):[t];this.graphics=[].concat(e),this.update()},addGraphics:function(t){this.graphics=this.graphics||[];let e=mB.a.Util.isArray(t)?[].concat(t):[t];this.graphics=this.graphics.concat(e),this.update()},getGraphicBy(t,e){let n=null;for(let r in this.graphics)if(this.graphics[r][t]===e){n=this.graphics[r];break}return n},getGraphicById(t){return this.getGraphicBy("id",t)},getGraphicsByAttribute(t,e){var n,r=[];for(let i in this.graphics)n=this.graphics[i],n&&n.attributes&&n.attributes[t]===e&&r.push(n);return r},removeGraphics(t=null){if(!t||0===t.length||t===this.graphics)return this.graphics.length=0,void this.update();Wt.isArray(t)||(t=[t]);for(let e=t.length-1;e>=0;e--){let n=t[e],r=Wt.indexOf(this.graphics,n);-1!==r&&this.graphics.splice(r,1)}this.update()},setStyle:function(t){let e=this.options,n={color:e.color,radius:e.radius,opacity:e.opacity,highlightColor:e.highlightColor,radiusScale:e.radiusScale,radiusMinPixels:e.radiusMinPixels,radiusMaxPixels:e.radiusMaxPixels,strokeWidth:e.strokeWidth,outline:e.outline};this.options=mB.a.Util.extend(this.options,n,t),this.defaultStyle=this._getDefaultStyle(this.options),this.update()},update:function(){this._layerRenderer.update(this.graphics)},clear:function(){this.removeGraphics()},getRenderer:function(){return this._renderer},getState:function(){let t=this._map,e=t.getSize().x,n=t.getSize().y,r=t.getCenter(),i=r.lng,o=r.lat,a=xX[this._crs.code]||0;_X[this._crs.code]&&this._crs.resolutions&&this._crs.resolutions.length>0&&(a=Math.round(Math.log2(_X[this._crs.code]/this._crs.resolutions[0])));let s=t.getZoom()+a,l=t.getMaxZoom()+a,u={longitude:i,latitude:o,zoom:s,maxZoom:l,pitch:0,bearing:0},c={};for(let d in u)c[d]=u[d];c.width=e,c.height=n;let h=this.options;return c.color=h.color,c.radius=h.radius,c.opacity=h.opacity,c.highlightColor=h.highlightColor,c.radiusScale=h.radiusScale,c.radiusMinPixels=h.radiusMinPixels,c.radiusMaxPixels=h.radiusMaxPixels,c.strokeWidth=h.strokeWidth,c.outline=h.outline,c},_resize:function(){let t=this._map.getSize();this._container.width=t.x,this._container.height=t.y,this._container.style.width=t.x+"px",this._container.style.height=t.y+"px";let e=this._map.containerPointToLayerPoint([0,0]);mB.a.DomUtil.setPosition(this._container,e),this._update()},_moveEnd:function(){this._layerRenderer instanceof yX&&this._update()},_createRenderer:function(){let t,e=this._map,n=e.getSize().x,r=e.getSize().y;if(this.options.render===vX[0])t=new pX(this,{width:n,height:r,renderer:e.getRenderer(this)});else{let i=mB.a.Util.setOptions({},bX),o=mB.a.Util.setOptions({options:i},this.options);o=mB.a.Util.setOptions(this,o),o.container=e.getPane("overlayPane"),o.width=n,o.height=r,t=new yX(this,o)}return t.defaultStyle=this.defaultStyle,this._layerRenderer=t,this._layerRenderer.getRenderer()},_update:function(){this._map&&this._updatePath()},_updatePath:function(){let t=this._getGraphicsInBounds();this._renderer.drawGraphics(t,this.defaultStyle)},_project:function(){let t=this;t._getGraphicsInBounds().map((function(e){let n=t._map.latLngToLayerPoint(e.getLatLng()),r=t._clickTolerance(),i=[e._anchor+r,e._anchor+r];return e._pxBounds=new mB.a.Bounds(n.subtract(i),n.add(i)),e})),t._pxBounds=mB.a.bounds(mB.a.point(0,0),mB.a.point(this._container.width,this._container.height))},_getDefaultStyle:function(t){const e={};if(t.color){e.fill=!0;const n=this.toRGBA(t.color);e.color=n,e.fillColor=n}return t.opacity&&(e.opacity=t.opacity,e.fillOpacity=t.opacity),t.radius&&(e.radius=t.radius),t.strokeWidth&&(e.weight=t.strokeWidth),t.outline&&(e.stroke=t.outline),new uX(e).getStyle()},toRGBA(t){return`rgba(${t[0]},${t[1]},${t[2]},${(t[3]||255)/255})`},_getGraphicsInBounds:function(){let t=this,e=[],n=t._map.getBounds();return this.graphics.map((function(t){return n.contains(t.getLatLng())&&e.push(t),t})),e},_handleClick:function(t){this._layerRenderer._handleClick(t)},beforeAdd:mB.a.Util.falseFn,_containsPoint:function(t){return this._layerRenderer.containsPoint(t)}});let SX=function(t,e){return new wX(t,e)};var EX=fY.extend({options:{isOverLay:!0},initialize:function(t,e,n){var r=[];r.push(t),r.push(n),fY.prototype.initialize.apply(this,r),this.chartsType=e,this.themeFields=n&&n.themeFields?n.themeFields:null,this.charts=n&&n.charts?n.charts:[],this.cache=n&&n.cache?n.cache:{},this.chartsSetting=n&&n.chartsSetting?n.chartsSetting:{}},setChartsType:function(t){this.chartsType=t,this.redraw()},addFeatures:function(t){var e=this;e.fire("beforefeaturesadded",{features:t}),this.features=this.toiClientFeature(t),e.renderer&&(e._map?e.redrawThematicFeatures(e._map.getBounds()):e.redrawThematicFeatures())},redrawThematicFeatures:function(t){var e=this;e.renderer.clearAll();var n=e.features;if(this.options.alwaysMapCRS&&t&&t instanceof mB.a.LatLngBounds){var r=this._map.options.crs;t=mB.a.bounds(r.project(t.getSouthWest()),r.project(t.getNorthEast()))}t=EW.toSuperMapBounds(t);for(var i=0,o=n.length;i<o;i++){var a=n[i],s=a.geometry.getBounds();if(!t||t.intersectsBounds(s)){var l=e.cache,u=a.id;if(!l[u]){l[u]=u;var c=e.createThematicFeature(a),h=e.overlayWeightField&&a.attributes[e.overlayWeightField]&&!isNaN(a.attributes[e.overlayWeightField]);c&&h&&(c["__overlayWeight"]=a.attributes[e.overlayWeightField]),c&&e.charts.push(c)}}}e.drawCharts()},createThematicFeature:function(t){var e,n=this;return Ws[n.chartsType]&&n.themeFields&&n.chartsSetting&&(e=new Ws[n.chartsType](t,n,n.themeFields,n.chartsSetting)),!!e&&(e.assembleShapes(),e)},drawCharts:function(){var t=this;t.renderer&&(t.overlayWeightField&&t._sortChart(),t.options&&!t.options.isOverLay?t._addOverlayShape():t._addNoOverlayShape(),t.renderer.render())},getShapesByFeatureID:function(t){var e=this,n=[],r=e.renderer.getAllShapes();if(!t)return r;for(var i=0,o=r.length;i<o;i++){var a=r[i];a.refDataID&&t===a.refDataID&&n.push(a)}return n},isQuadrilateralOverLap:function(t,e){var n=this,r=t.length,i=e.length;if(5!==r||5!==i)return null;for(var o=!1,a=0;a<r;a++)if(n.isPointInPoly(t[a],e)){o=!0;break}for(let l=0;l<i;l++)if(n.isPointInPoly(e[l],t)){o=!0;break}for(let l=0;l<r-1;l++){if(o)break;for(let n=0;n<i-1;n++){var s=Wt.lineIntersection(t[l],t[l+1],e[n],e[n+1]);if("SuperMap.Geometry.Point"===s.CLASS_NAME){o=!0;break}}}return o},isPointInPoly:function(t,e){for(var n=!1,r=-1,i=e.length,o=i-1;++r<i;o=r)(e[r].y<=t.y&&t.y<e[o].y||e[o].y<=t.y&&t.y<e[r].y)&&t.x<(e[o].x-e[r].x)*(t.y-e[r].y)/(e[o].y-e[r].y)+e[r].x&&(n=!n);return n},isChartInMap:function(t,e){for(var n=t,r=!1,i=0,o=e.length;i<o;i++){var a=e[i];if(a.x>=n.left&&a.x<=n.right&&a.y>=n.top&&a.y<=n.bottom){r=!0;break}}return r},clearCache:function(){this.cache={},this.charts=[]},removeFeatures:function(t){var e=this;e.clearCache(),fY.prototype.removeFeatures.call(e,t)},removeAllFeatures:function(){var t=this;t.clearCache(),fY.prototype.removeAllFeatures.apply(t,arguments)},redraw:function(){var t=this;return t.clearCache(),fY.prototype.redraw.apply(t,arguments)},clear:function(){var t=this;t.renderer&&(t.renderer.clearAll(),t.renderer.refresh()),t.removeAllFeatures(),t.clearCache()},getWeightFieldValue:function(t,e,n){if(("undefined"===typeof n||isNaN(n))&&(n=0),!t.attributes)return n;var r=t.attributes[e];return("undefined"===typeof r||isNaN(r))&&(r=n),r},_sortChart:function(){var t=this;t.charts&&t.charts.sort((function(t,e){return"undefined"===typeof t["__overlayWeight"]&&"undefined"===typeof e["__overlayWeight"]?0:"undefined"!==typeof t["__overlayWeight"]&&"undefined"===typeof e["__overlayWeight"]?-1:"undefined"===typeof t["__overlayWeight"]&&"undefined"!==typeof e["__overlayWeight"]?1:"undefined"!==typeof t["__overlayWeight"]&&"undefined"!==typeof e["__overlayWeight"]?parseFloat(t["__overlayWeight"])<parseFloat(e["__overlayWeight"])?1:-1:0}))},_addOverlayShape:function(){for(var t=this,e=t.charts,n=0,r=e.length;n<r;n++)for(var i=e[n],o=i.resetLocation(),a=i.shapes,s=0,l=a.length;s<l;s++)a[s].refOriginalPosition=o,t.renderer.addShape(a[s])},_addNoOverlayShape:function(){var t=this,e=t._map.getBounds(),n=this._map.options.crs;this.options.alwaysMapCRS&&(e=mB.a.bounds(n.project(e.getSouthWest()),n.project(e.getNorthEast()))),e=EW.toSuperMapBounds(e);for(var r=t.charts,i=[],o=t.getLocalXY(new Kt(e.left,e.top)),a=t.getLocalXY(new Kt(e.right,e.bottom)),s=new Qt(o[0],a[1],a[0],o[1]),l=0,u=r.length;l<u;l++){var c=r[l],h=c.resetLocation(),d=c.chartBounds,f=[{x:d.left,y:d.top},{x:d.left,y:d.bottom},{x:d.right,y:d.bottom},{x:d.right,y:d.top},{x:d.left,y:d.top}];if(!s||t.isChartInMap(s,f)){var p=!1;for(let e=0;e<i.length;e++)if(t.isQuadrilateralOverLap(f,i[e])){p=!0;break}if(!p){i.push(f);var g=c.shapes;for(let e=0,n=g.length;e<n;e++)g[e].refOriginalPosition=h,t.renderer.addShape(g[e])}}}}}),CX=function(t,e,n){return new EX(t,e,n)},MX=EX.extend({initialize:function(t,e,n){EX.prototype.initialize.apply(this,arguments),this.symbolType=e,this.symbolSetting={}},setSymbolType:function(t){this.symbolType=t,this.redraw()},createThematicFeature:function(t){var e,n=this;return Ws[n.symbolType]&&n.themeField&&n.symbolSetting&&(e=new Ws[n.symbolType](t,n,[n.themeField],n.symbolSetting)),!!e&&(e.assembleShapes(),e)}}),TX=function(t,e,n){return new MX(t,e,n)},AX=mB.a.SVG.extend({initialize:function(t,e,n){mB.a.SVG.prototype.initialize.call(this,n),this._tileCoord=t,this._size=e,this._initContainer(),this._container.setAttribute("width",this._size.x),this._container.setAttribute("height",this._size.y),this._container.setAttribute("viewBox",[0,0,this._size.x,this._size.y].join(" ")),this._layers={}},getCoord:function(){return this._tileCoord},getContainer:function(){return this._container},onAdd:mB.a.Util.falseFn,addTo:function(t){if(this._map=t,this.options.interactive)for(var e in this._layers){var n=this._layers[e];n._path.style.pointerEvents="auto",this._map._targets[mB.a.stamp(n._path)]=n}},removeFrom:function(t){var e=t||this._map;if(this.options.interactive)for(var n in this._layers){var r=this._layers[n];delete e._targets[mB.a.stamp(r._path)]}delete this._map},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup||(this._rootGroup=this._container),this._rootGroup.appendChild(t._path),this._layers[mB.a.stamp(t)]=t},_updateIcon:function(t){var e=t._path=mB.a.SVG.create("image"),n=t.options,r=n.iconUrl;if(n.iconSize){var i=mB.a.point(n.iconSize),o=i&&i.divideBy(2,!0),a=t._point.subtract(o);e.setAttribute("x",a.x),e.setAttribute("y",a.y),e.setAttribute("width",i.x+"px"),e.setAttribute("height",i.y+"px")}else{var s=new Image;s.src=r,mB.a.DomEvent.on(s,"load",(function(){var n=mB.a.point([s.width,s.height]),r=n&&n.divideBy(2,!0),i=t._point.subtract(r);e.setAttribute("x",i.x),e.setAttribute("y",i.y),e.setAttribute("width",n.x+"px"),e.setAttribute("height",n.y+"px")}))}e.setAttribute("href",r)}}),OX=mB.a.Canvas.extend({initialize:function(t,e,n){mB.a.Canvas.prototype.initialize.call(this,n),this._tileCoord=t,this._size=e,this._initContainer(),this._container.setAttribute("width",this._size.x),this._container.setAttribute("height",this._size.y),this._layers={},this._drawnLayers={},this._drawing=!0,n.interactive&&(this._container.style.pointerEvents="auto")},getCoord:function(){return this._tileCoord},getContainer:function(){return this._container},getOffset:function(){return this._tileCoord.scaleBy(this._size).subtract(this._map.getPixelOrigin())},onAdd:mB.a.Util.falseFn,addTo:function(t){this._map=t},removeFrom:function(t){delete this._map},_updateDashArray:function(t){var e=t.options.dashArray;if(e&&"string"===typeof e){var n,r=e.split(","),i=[];for(n=0;n<r.length;n++)i.push(Number(r[n]));t.options._dashArray=i}else t.options._dashArray=e},_onClick:function(t){var e,n,r=this._map.mouseEventToLayerPoint(t).subtract(this.getOffset());for(var i in this._layers)e=this._layers[i],e.options.interactive&&e._containsPoint(r)&&!this._map._draggableMoved(e)&&(n=e);n&&(mB.a.DomEvent.stop(t),this._fireEvent([n],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t).subtract(this.getOffset());this._handleMouseHover(t,e)}},_updateIcon:function(t){if(this._drawing){var e=t.options,n=this._ctx,r=t._getImage();if(e.iconSize&&r.complete){var i=mB.a.point(e.iconSize),o=i&&i.divideBy(2,!0),a=t._point.subtract(o);n.drawImage(r,a.x,a.y,i.x,i.y)}else mB.a.DomEvent.on(r,"load",(function(){var e=mB.a.point([r.width,r.height]),i=e&&e.divideBy(2,!0),o=t._point.subtract(i);n.drawImage(r,o.x,o.y,e.x,e.y)}));this._drawnLayers[t._leaflet_id]=t}}}),kX={LABEL:"LABEL",TEXT:"TEXT",POINT:"POINT",LINE:"LINE",REGION:"REGION"},IX=mB.a.Class.extend({initialize:function(t){this.properties=t.properties,this.type=t.type,this.layerName=t.layerName},render:function(t,e){this._renderer=t,this._container=t._container,this.options=e,t._initPath(this),t._updateStyle(this);var n=this.getElement();n&&this.layerName&&mB.a.DomUtil.addClass(n,this.layerName)},updateStyle:function(t,e){this.options=e,t._updateStyle(this)},getElement:function(){return this._path||this._renderer._container},_getPixelBounds:function(){for(var t=this._parts,e=mB.a.bounds([]),n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.length;i++)e.extend(r[i]);var o=this._clickTolerance(),a=new mB.a.Point(o,o);return e.min._subtract(a),e.max._add(a),e},_clickTolerance:mB.a.Path.prototype._clickTolerance}),PX=mB.a.Path.extend({includes:IX.prototype,options:{color:"white",fillColor:"black",fill:!0,fillOpacity:1,opacity:.6,weight:1,rotation:0,stroke:!0,fontFamily:"Arial Unicode MS Regular",fontSize:14,fontWeight:"normal",textAlign:"center",offsetX:1,offsetY:1},initialize:function(t,e){IX.prototype.initialize.call(this,t),this._makeFeatureParts(t,e),this.options.offsetX=e||1,this.options.offsetY=e||1},render:function(t,e){if(this.properties.texts&&(this._text=this.properties.texts[0]),!this._text){var n=this.properties.attributes;this._text=n&&this.properties.textField&&n[this.properties.textField]||""}var r=this.options;this._pxBounds=mB.a.bounds(this._point,this._point),IX.prototype.render.apply(this,[t,e]),this.options=mB.a.Util.extend(r,e),this._updatePath()},_makeFeatureParts:function(t,e){e=e||{x:1,y:1};var n=t.geometry[0];"object"===typeof n[0]&&"x"in n[0]?(this._point=mB.a.point(n[0]).scaleBy(e),this._empty=mB.a.Util.falseFn):(this._point=mB.a.point(n).scaleBy(e),this._empty=mB.a.Util.falseFn)},makeInteractive:function(){this._updateBounds()},updateStyle:function(t,e){return this._updateBounds(),IX.prototype.updateStyle.call(this,t,e)},_updateBounds:function(){var t=this._renderer._getTextWidth(this),e=[t/2,t/2];this._pxBounds=mB.a.bounds(this._point.subtract(e),this._point.add(e))},_updatePath:function(){this._renderer._updateText(this)},_containsPoint:function(t){return!1}});OX.include({_getTextWidth:function(t){return this._ctx.measureText(t._text).width},_updateText:function(t){if(this._drawing&&!t._empty()){var e=this.getContainer(),n=this._map.getSize();e.width=n.x,e.height=n.y,e.style.width=n.x+"px",e.style.height=n.y+"px";var r=this._ctx,i=t.options,o=i.offsetX||1,a=i.offsetY||1,s=t._point.subtract(mB.a.point(o,a));i.fill&&(this._drawnLayers[t._leaflet_id]=t,r.fillRect(0,0,n.x,n.y),r.font=[i.fontWeight?i.fontWeight:"normal",i.fontSize?i.fontSize:"14px",i.fontFamily?i.fontFamily:"Arial Unicode MS Regular,Microsoft Yahei"].join(" "),r.textAlign=i.textAlign,r.lineWidth=i.weight,r.fillStyle=i.fillColor,r.fillText(t._text,s.x,s.y),r.strokeStyle=i.color,r.strokeText(t._text,s.x,s.y),r.rotate(i.rotation))}}}),AX.include({_getTextWidth:function(t){return t._path.getComputedTextLength()||0},_initPath:function(t){var e;PX&&t instanceof PX?(e=t._path=mB.a.SVG.create("text"),e.textContent=t._text):e=t._path=mB.a.SVG.create("path"),t.options.className&&mB.a.DomUtil.addClass(e,t.options.className),t.options.interactive&&mB.a.DomUtil.addClass(e,"leaflet-interactive"),this._updateStyle(t),this._layers[mB.a.stamp(t)]=t},_updateText:function(t){var e=t._path,n=t.options,r=n.offsetX||1,i=n.offsetY||1,o=t._point.subtract(mB.a.point(r,i));e.setAttribute("x",o.x),e.setAttribute("y",o.y),n.rotation=n.rotation||0,e.setAttribute("transform","rotate("+n.rotation/Math.PI*180+" "+o.x+" "+o.y+")"),e.setAttribute("text-anchor","center"===n.textAlign?"middle":n.textAlign),e.style.fontSize=n.fontSize,e.style.fontFamily=n.fontFamily,e.style.fontWeight=n.fontWeight||"normal",e.style.glyphOrientationVertical=n.rotation||"",n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-linecap","round"),e.setAttribute("stroke-linejoin","round"),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight>1?n.weight/10:n.weight)):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity)):e.setAttribute("fill","none")}});var LX,NX=mB.a.CircleMarker.extend({includes:IX.prototype,statics:{iconCache:{}},initialize:function(t,e){IX.prototype.initialize.call(this,t),this._makeFeatureParts(t,e)},getLatLng:void 0,render:function(t,e){IX.prototype.render.call(this,t,e),this._radius=e.radius||mB.a.CircleMarker.prototype.options.radius,this._updatePath()},_makeFeatureParts:function(t,e){e=e||{x:1,y:1};var n=t.geometry[0];"object"===typeof n[0]&&"x"in n[0]?(this._point=mB.a.point(n[0]).scaleBy(e),this._empty=mB.a.Util.falseFn):(this._point=mB.a.point(n).scaleBy(e),this._empty=mB.a.Util.falseFn)},makeInteractive:function(){this._updateBounds()},updateStyle:function(t,e){return this._radius=e.radius||this._radius,this._updateBounds(),IX.prototype.updateStyle.call(this,t,e)},_updateBounds:function(){var t=this.options.iconUrl;if(t&&this.options.iconSize){var e=mB.a.point(this.options.iconSize),n=e&&e.divideBy(2,!0),r=this._point.subtract(n);this._pxBounds=new mB.a.Bounds(r,r.add(e))}else mB.a.CircleMarker.prototype._updateBounds.call(this)},_updatePath:function(){this.options.iconUrl?this._renderer._updateIcon(this):mB.a.CircleMarker.prototype._updatePath.call(this)},_getImage:function(){if(!this.options.iconUrl)return null;var t=this.options.iconUrl,e=NX.iconCache[t];if(!e){var n=this.options.iconSize||[50,50];e=NX.iconCache[t]=this._createIcon(t,n)}return e},_createIcon:function(t,e){var n=t;if(!n)throw new Error("iconUrl not set in Icon options (see the docs).");var r=document.createElement("img"),i="icon";r.src=n,r.className="leaflet-marker-"+i+" "+(this.layerName||"");var o=e;if("number"===typeof o&&(o=[o,o]),o){var a=mB.a.point(o),s=mB.a.point(a&&a.divideBy(2,!0));a&&(r.style.width=a.x+"px",r.style.height=a.y+"px"),s&&(r.style.marginLeft=-s.x+"px",r.style.marginTop=-s.y+"px")}return r.onload=function(){o||(r.style.width=this.width+"px",r.style.height=this.height+"px")},r},_containsPoint:function(t){var e=this.options.iconUrl;return e?this._pxBounds.contains(t):mB.a.CircleMarker.prototype._containsPoint.call(this,t)}}),RX={_makeFeatureParts:function(t,e){e=e||{x:1,y:1};var n,r=t.geometry;this._parts=[];for(var i=0;i<r.length;i++){for(var o=r[i],a=[],s=0;s<o.length;s++)n=o[s],a.push(mB.a.point(n).scaleBy(e));this._parts.push(a)}},makeInteractive:function(){this._pxBounds=this._getPixelBounds()}},DX=mB.a.Polyline.extend({includes:[IX.prototype,RX],initialize:function(t,e){IX.prototype.initialize.call(this,t),this._makeFeatureParts(t,e)},render:function(t,e){e.fill=!1,IX.prototype.render.call(this,t,e),this._updatePath()},updateStyle:function(t,e){e.fill=!1,IX.prototype.updateStyle.call(this,t,e)}}),FX=mB.a.Polygon.extend({includes:[IX.prototype,RX],initialize:function(t,e){IX.prototype.initialize.call(this,t),this._makeFeatureParts(t,e)},render:function(t,e){IX.prototype.render.call(this,t,e),this._updatePath()}}),jX=n("7915"),BX=n.n(jX),zX=n("740e"),UX=mB.a.Class.extend({initialize:function(t){this.url=t},getTile:function(){var t=this;return Be.get(t.url,null,{timeout:1e4}).then((function(t){return t.ok?t.blob().then((function(t){var e=new FileReader;return new Promise((function(n){e.addEventListener("loadend",(function(){var t=new BX.a(e.result);return n(new zX["VectorTile"](t))})),e.readAsArrayBuffer(t)}))})):{layers:[]}})).then((function(e){return t._processVectorTileSpec(e)}))},_processVectorTileSpec:function(t){var e=[];for(var n in t.layers){for(var r=[],i=0;i<t.layers[n].length;i++){var o=t.layers[n].feature(i);switch(o.geometry=o.loadGeometry(),o.layerName=n,o.properties={attributes:mB.a.Util.extend({},o.properties),id:o.id},o.type){case 1:o.type=kX.POINT;break;case 2:o.type=kX.LINE;break;case 3:o.type=kX.REGION;break;default:break}r.push(o)}var a={};a.features=r,a.layerName=n,a.extent=t.layers[n].extent,e.push(a)}return e}}),GX=mB.a.Class.extend({initialize:function(t){this.url=t},getTile:function(){var t=this;return Be.get(t.url,null,{timeout:1e4}).then((function(t){return t.json()})).then((function(e){return t._processRecordSets(e,t)}))},_processRecordSets:function(t,e){var n=t.recordsets;if(n=e._convertToGeoJSON(n),!n)return null;for(var r=0;r<n.length;r++){for(var i=n[r],o=0;o<i.features.length;o++){var a=i.features[o];a=e._convertToVectorLayerFeature(a,e),a.layerName=i.layerName,i.features[o]=a}i.extent=256,delete i.fieldTypes,delete i.fields}return n},_convertToVectorLayerFeature:function(t,e){if(t.geometry){var n,r,i,o,a={},s=t.geometry,l=s.type,u=s.coordinates,c=t.properties,h=c.id;if("Point"===l)a=c&&c.texts?e._createFeature(h,kX.TEXT,[u],c):e._createFeature(h,kX.POINT,[u],c);else if("MultiPoint"===l)a=e._createFeature(h,kX.POINT,u,c);else if("LineString"===l)a=e._createFeature(h,kX.LINE,[u],c);else if("MultiLineString"===l||"Polygon"===l){for(i=[],n=0;n<u.length;n++)o=u[n],"Polygon"===l&&(o.outer=0===n),i.push(o);var d="Polygon"===l?kX.REGION:kX.LINE;a=e._createFeature(h,d,i,c)}else{if("MultiPolygon"!==l)throw new Error("Illegal GeoJSON object");for(i=[],n=0;n<u.length;n++)for(r=0;r<u[n].length;r++)o=u[n][r],o.outer=0===r,i.push(o);a=e._createFeature(h,kX.REGION,i,c)}return a}},_convertToGeoJSON:function(t){if(t){for(var e=0;e<t.length;e++){for(var n=t[e],r=0;r<n.features.length;r++){for(var i=n.features[r],o=[],a=0,s=0;s<i.geometry.parts.length;s++){for(var l=2*i.geometry.parts[s],u=0,c=a;u<l;u+=2,c+=2){var h=i.geometry.points[c],d=i.geometry.points[c+1];o.push({x:h,y:d})}a+=l}i.geometry.points=o}n.features=DW(n.features).features}return t}},_createFeature:function(t,e,n,r){return{id:t,type:e,geometry:n,properties:r}}}),qX={JSON:"JSON",MVT:"MVT",PBF:"PBF"},VX=mB.a.Class.extend({initialize:function(t,e){this.layer=t.layer,this.tileSize=t.layer.getTileSize(),this.format=t.format,this.coords=t.coords,this.renderer=t.renderer,this.done=e,this.layer._textVectorTiles={}},renderTile:function(){var t,e=this,n=e.layer,r=e.coords,i=n._getTileUrl(r),o=[qX.MVT,qX.PBF];t=o.indexOf(e.format.toUpperCase())>-1?new UX(i):new GX(i),t.getTile().then((function(t){e.render(t,r)}))},render:function(t,e){if(t){for(var n=this,r=n.renderer,i=n.layer,o=0;o<t.length;o++){var a=t[o],s=a.layerName;i._dataLayerNames[s]=!0;for(var l=n.tileSize.divideBy(a.extent),u=i.getLayerStyleInfo(a.layerName),c=0;c<a.features.length;c++){var h=a.features[c];if(h){u&&u.type===kX.LABEL&&h.type===kX.POINT&&h.properties.attributes&&(h.type=kX.TEXT);var d=n._getStyleOptions(e,h,s,n);if(d.length){var f=n._createFeatureLayer(h,l);if(f){var p={scope:n,coords:e,renderer:r};if(!n._extractTextLayer(h,f,d,p)){for(var g=0;g<d.length;g++){var m=n._validateStyle(d[g],h.type);f.render(r,m),r._addPath(f)}i.options.interactive&&f.makeInteractive();var y=i._getFeatureKey(h.id,s);r._features[y]={layerName:s,feature:f}}}}}}}i._map&&r.addTo(i._map),mB.a.Util.requestAnimFrame(n.done.bind(e,null,n.layer._vectorTiles[n.layer._tileCoordsToKey(e)]))}},_extractTextLayer:function(t,e,n,r){if(t.type!==kX.TEXT)return!1;var i=r.scope,o=r.coords,a=i.layer,s=a._tileCoordsToKey(o),l=t.id,u=t.layerName,c=a._textVectorTiles[s];return c||(c={layers:{},coords:o,renderer:r.renderer}),c.layers[l]={layer:e,style:n,layerName:u},a._textVectorTiles[s]=c,!0},_getStyleOptions:function(t,e,n,r){var i=r,o=i.layer,a=o.getVectorTileLayerStyle(t,e)||i._defaultStyle(e.type),s=e.id,l=o._getFeatureKey(s,n),u=o._overriddenStyles[l];return a=u||a,a=a instanceof Function?a(e.properties,t.z):a,a=a instanceof Array?a:[a],a},_createFeatureLayer:function(t,e){var n;switch(t.type){case kX.POINT:n=new NX(t,e);break;case kX.LINE:n=new DX(t,e);break;case kX.REGION:n=new FX(t,e);break;case kX.TEXT:n=new PX(t,e);break;default:break}var r=this.layer;return n&&r.options.interactive&&n.addEventParent(r),n},_validateStyle:function(t,e){switch(mB.a.Path.prototype.options.weight=1,mB.a.Path.prototype.options.fillOpacity=1,e){case kX.POINT:return mB.a.extend({},mB.a.CircleMarker.prototype.options,t);case kX.LINE:return mB.a.extend({},mB.a.Polyline.prototype.options,t);case kX.REGION:return mB.a.extend({},mB.a.Polygon.prototype.options,t);case kX.TEXT:return mB.a.extend({},PX.prototype.options,t);default:break}},_defaultStyle:function(t){var e=mB.a.Path.prototype.options;switch(e.weight=1,e.fillOpacity=1,e.radius=3,t){case kX.POINT:return mB.a.extend({},e,mB.a.CircleMarker.prototype.options);case kX.LINE:return mB.a.extend({},e,mB.a.Polyline.prototype.options);case kX.REGION:return mB.a.extend({},e,mB.a.Polygon.prototype.options);case kX.TEXT:return mB.a.extend({},e,PX.prototype.options);default:break}}}),HX=mB.a.GridLayer.extend({options:{vectorTileLayerStyles:null,renderer:"SVG",format:qX.JSON,interactive:!0,maxZoom:23},initialize:function(t){var e=this;mB.a.setOptions(e,t),mB.a.GridLayer.prototype.initialize.call(e,t),e._vectorTiles={},e._overriddenStyles={},e.vectorTileLayerStyles=e.options.vectorTileLayerStyles,e.on("tileunload",(function(t){var n=e._tileCoordsToKey(t.coords),r=e._vectorTiles[n];r&&e._map&&r.removeFrom(e._map),delete e._vectorTiles[n]}),e),e.on("tileerror ",e._renderText,e),e.on("load",e._renderText,e),e._dataLayerNames={}},createTile:function(t,e){var n=this,r=n.getTileSize(),i=null;return i="Canvas"===n.options.renderer?new OX(t,r,n.options):new AX(t,r,n.options),n._vectorTiles[n._tileCoordsToKey(t)]=i,i._features={},new VX({layer:n,format:n.options.format,coords:t,renderer:i},e).renderTile(),i.getContainer()},getStyles:function(){return this.vectorTileLayerStyles},getStyle:function(t){return this.vectorTileLayerStyles&&this.vectorTileLayerStyles[t]},setFeatureStyle:function(t,e,n){var r=this._getFeatureKey(t,e);for(var i in this._overriddenStyles[r]=n,this._vectorTiles){var o=this._vectorTiles[i],a=o._features,s=a[r];if(s){var l=s.feature;this._updateStyles(l,o,n)}}return this},resetFeatureStyle:function(t,e){var n=this._getFeatureKey(t,e);for(var r in delete this._overriddenStyles[n],this._vectorTiles){var i=this._vectorTiles[r],o=i._features[n];if(o){var a=o.feature,s=this.vectorTileLayerStyles[o.layerName];this._updateStyles(a,i,s)}}return this},getDataLayerNames:function(){return Object.keys(this._dataLayerNames)},_removeAllTiles:function(){mB.a.GridLayer.prototype._removeAllTiles.call(this),this._textVectorTiles={}},_renderText:function(){var t=this._textVectorTiles;for(var e in t){var n=t[e],r=n.renderer;for(var i in n.layers){for(var o=n.layers[i],a=o.style,s=o.layer,l=0;l<a.length;l++)s.render(r,a[l]),r._addPath(s);this.options.interactive&&s.makeInteractive()}}},_getFeatureKey:function(t,e){return t=t||0,e=e||"null",t+"_"+e},_updateStyles:function(t,e,n){n=n instanceof Function?n(t.properties,e.getCoord().z):n,n instanceof Array||(n=[n]);for(var r=0;r<n.length;r++){var i=this._extendStyle(n[r],t.type);t.updateStyle(e,i)}},_extendStyle:function(t,e){switch(e){case kX.POINT:return mB.a.extend({},mB.a.CircleMarker.prototype.options,t);case kX.LINE:return mB.a.extend({},mB.a.Polyline.prototype.options,t);case kX.REGION:return mB.a.extend({},mB.a.Polygon.prototype.options,t);case kX.TEXT:return mB.a.extend({},PX.prototype.options,t);default:break}}}),WX=HX.extend({options:{crs:null,cartoCSS:null,layerNames:null,layersID:null,serverCartoCSSStyle:!0,processCharacters:!1,returnAttributes:!1,expands:null,cacheEnabled:!1,tileTemplate:null,subdomains:"abc",timeout:1e4,attribution:pW.Common.attribution},initialize:function(t,e){e=e||{},e.noWrap=null==e.noWrap||e.noWrap,mB.a.setOptions(this,e),HX.prototype.initialize.call(this,e),mB.a.stamp(this);var n=this;if(!t||t.indexOf("http")<0)return t="",this;n.url=t,t.indexOf("/")===t.length-1&&(t=t.substr(0,t.length-1),n.url=t),this.cartoCSSToLeaflet=new lY(n.url),n.initLayersInfo(),!n.options.serverCartoCSSStyle&&n.options.cartoCSS&&n.setClientCartoCSS(n.options.cartoCSS)},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._map=t,this._initLayerUrl(),!this.options.tileTemplate&&this.options.serverCartoCSSStyle||this._initGrid()},initLayersInfo:function(){var t=this,e=Wt.urlPathAppend(t.url,"layers");Be.get(ze.appendCredential(e),null,{timeout:t.options.timeout}).then((function(t){return t.json()})).then((function(e){if(t.layersInfoInitialized=!0,t.layersInfo=e,t.layersInfo){for(var n={},r=0,i=t.layersInfo.length;r<i;r++)for(var o=t.layersInfo[r].subLayers.layers,a=0,s=o.length;a<s;a++)o[a].layerIndex=s-a,n[o[a].name]=o[a];t.layersInfo=n,t.cartoCSSToLeaflet.layersInfo=n,t.options.serverCartoCSSStyle&&t.getVectorStylesFromServer()}})).catch((function(t){console.error("error",t)}))},getLayerStyleInfo:function(t){var e,n=this;if(n.layersStyles=n.layersStyles||{},e=n.layersStyles[t],e)return e;if(!n.layersInfo)return{};var r=n.layersInfo[t];if(!r)return null;switch(e={layerIndex:r.layerIndex,ugcLayerType:r.ugcLayerType},r.ugcLayerType){case"VECTOR":e.layerStyle=r.style?r.style:null;break;case"THEME":var i=r.theme;e.layerStyle=i?i.defaultStyle:null,i&&"LABEL"===i.type&&(e.type=i.type,e.textField=i.labelExpression);break;default:r.style&&(e.layerStyle=r.style);break}return n.layersStyles[t]=e,e},getVectorStylesFromServer:function(){var t=this,e=Wt.urlPathAppend(t.url,"tileFeature/vectorstyles");Be.get(ze.appendCredential(e),null,{timeout:t.options.timeout}).then((function(t){return t.json()})).then((function(e){if(!e||!e.style)return null;e.style&&"cartoCSS"===e.type&&t.setServerCartoCSS(e.style),t.options&&t.setClientCartoCSS(t.options.cartoCSS),t._initGrid()})).catch((function(t){console.error("error",t)}))},setServerCartoCSS:function(t){this.cartoCSSToLeaflet.pretreatedCartoCSS(t,!0)},setClientCartoCSS:function(t){let e=!1;this.options.processCharacters&&(e=this.options.processCharacters),this.cartoCSSToLeaflet.pretreatedCartoCSS(t,e)},getVectorTileLayerStyle:function(t,e){if(!e)return null;var n=this,r=e.layerName,i=n.getLayerStyleInfo(r);if(i&&i.textField){var o=i.textField;if(o&&o.indexOf(".")){var a=o.split(".");o=a&&a.length>0&&a[a.length-1]}e.properties.textField=o}n.vectorTileLayerStyles=n.vectorTileLayerStyles||{};var s=n.vectorTileLayerStyles[r];if(s)return e=this._mergeFeatureTextField(e,s),s;var l=this.getScaleFromCoords(t),u=this.cartoCSSToLeaflet.pickShader(r)||[];for(var c in s=[],u)for(var h=u[c],d=0;d<h.length;d++){var f=this.cartoCSSToLeaflet.getValidStyleFromCarto(t.z,l,h[d],e,this.options.serverCartoCSSStyle);f&&s.push(f)}return e=this._mergeFeatureTextField(e,s),"TEXT"!==e.type&&0!==s.length||(s=this.cartoCSSToLeaflet.getValidStyleFromLayerInfo(e,i),"TEXT"===e.type&&(s.textName="["+e.properties.textField+"]")),n.vectorTileLayerStyles[r]=s,s},getScale:function(t){var e=this,n=t||e._map.getZoom();return e.scales[n]},getScaleFromCoords:function(t){var e,n=this;return n.scales&&n.scales[t.z]?n.scales[t.z]:(n.scales=n.scales||{},e=n.getDefaultScale(t),n.scales[t.z]=e,e)},getDefaultScale:function(t){var e=this,n=e._crs;if(n.scales)return n.scales[t.z];var r=e._tileCoordsToBounds(t),i=n.project(r.getNorthEast()),o=n.project(r.getSouthWest()),a=e.options.tileSize,s=Math.max(Math.abs(i.x-o.x)/a,Math.abs(i.y-o.y)/a),l=E.METER;if(n.code){var u=n.code.split(":");if(u&&u.length>1){var c=parseInt(u[1]);l=c&&c>=4e3&&c<=5e3?E.DEGREE:E.METER}}return BW(s,96,l)},_mergeFeatureTextField:function(t,e){if(!this.options.serverCartoCSSStyle||!e||"TEXT"!==t.type)return t;var n=e;mB.a.Util.isArray(e)||(n=[e]);for(var r=0;r<n.length;r++){var i=n[r].textName;i&&t.properties&&(t.properties.textField=i.substring(1,i.length-1))}return t},_getTileUrl:function(t){var e=this,n=e.options.tileTemplate;return n?e._getTileTemplateUrl(t):e._getDefaultTileUrl(t)},_getTileTemplateUrl:function(t){var e=this,n=e.options.tileTemplate,r={s:e._getSubdomain(t),x:t.x,y:t.y,z:t.z};if(e._map&&!e._map.options.crs.infinite){var i=e._globalTileRange.max.y-t.y;e.options.tms&&(r["y"]=i),r["-y"]=i}var o=mB.a.Util.template(n,mB.a.extend(r,e.options));return o},_initGrid:function(){HX.prototype.onAdd.call(this,this._map)},_getSubdomain:mB.a.TileLayer.prototype._getSubdomain,_getDefaultTileUrl:function(t){var e=t.x,n=t.y,r=this._tileUrl+"&x="+e+"&y="+n,i=this.getScaleFromCoords(t);return r+="&scale="+i,r},_initLayerUrl:function(){var t=this.options;if(this.url){var e=t.format.toString().toLowerCase();this._tileUrl=Wt.urlPathAppend(this.url,"tileFeature."+e),this._tileUrl=Wt.urlAppend(this._tileUrl,encodeURI(this._createURLParam(t)))}},_createURLParam:function(t){var e=[],n=this._getCredential(this._tileUrl);if(n&&e.push(n),t.layersID&&e.push("layersID="+t.layersID),t.layerNames){mB.a.Util.isArray(t.layerNames)||(t.layerNames=[t.layerNames]);var r="["+t.layerNames.join(",")+"]";e.push("layerNames="+r)}var i=this._crs;if(i.options&&i.options.origin)e.push("origin="+JSON.stringify({x:i.options.origin[0],y:i.options.origin[1]}));else if(i.projection&&i.projection.bounds){var o=i.projection.bounds,a=mB.a.point(o.min.x,o.max.y);e.push("origin="+JSON.stringify({x:a.x,y:a.y}))}t.expands&&e.push("expands="+t.expands),e.push("returnAttributes="+t.returnAttributes),e.push("cacheEnabled="+t.cacheEnabled);var s=this.options.tileSize;return e.push("width="+s),e.push("height="+s),e.join("&")},_getCredential:function(t){var e=ze.getToken(t),n=e?new ce(e,"token")||new ce(e,"key"):null;return n?n.getUrlParameters():null}}),YX=function(t,e){return new WX(t,e)},XX=n("595b"),JX=mB.a.GeoJSON.extend({turfMap:{"Measurement.along":["line","distance","units"],"Measurement.area":["geojson"],"Measurement.bbox":["geojson"],"Measurement.bboxPolygon":["bbox"],"Measurement.bearing":["start","end","final"],"Measurement.center":["geojson","properties"],"Measurement.centerOfMass":["geojson","properties"],"Measurement.centroid":["geojson","properties"],"Measurement.destination":["origin","distance","bearing","units"],"Measurement.distance":["from","to","units"],"Measurement.envelope":["geojson"],"Measurement.length":["geojson","units"],"Measurement.midpoint":["point1","point2"],"Measurement.pointOnFeature":["geojson"],"Measurement.polygonTangents":["point","polygon"],"Measurement.rhumbBearing":["start","end","final"],"Measurement.rhumbDestination":["origin","distance","bearing","units"],"Measurement.rhumbDistance":["from","to","units"],"Measurement.square":["bbox"],"Measurement.greatCircle":["start","end","properties","npoints","offset"],"CoordinateMutation.cleanCoords":["geojson","mutate"],"CoordinateMutation.flip":["geojson","mutate"],"CoordinateMutation.rewind":["geojson","reverse","mutate"],"CoordinateMutation.round":["num","precision"],"CoordinateMutation.truncate":["geojson","precision","coordinates","mutate"],"Transformation.bboxClip":["feature","bbox"],"Transformation.bezierSpline":["line","resolution","sharpness"],"Transformation.buffer":["geojson","radius","units","steps"],"Transformation.circle":["center","radius","steps","units","properties"],"Transformation.clone":["geojson"],"Transformation.concave":["points","maxEdge","units"],"Transformation.convex":["geojson","concavity"],"Transformation.difference":["polygon1","polygon2"],"Transformation.dissolve":["featureCollection","propertyName"],"Transformation.intersect":["poly1","poly2"],"Transformation.lineOffset":["geojson","distance","units"],"Transformation.simplify":["feature","tolerance","highQuality"],"Transformation.tesselate":["poly"],"Transformation.transformRotate":["geojson","angle","pivot","mutate"],"Transformation.transformTranslate":["geojson","distance","direction","units","zTranslation","mutate"],"Transformation.transformScale":["geojson","factor","origin","mutate"],"Transformation.union":["A"],"Transformation.voronoi":["points","bbox"],"featureConversion.combine":["fc"],"featureConversion.explode":["geojson"],"featureConversion.flatten":["geojson"],"featureConversion.lineStringToPolygon":["lines","properties","autoComplete","orderCoords"],"featureConversion.polygonize":["geojson"],"featureConversion.polygonToLineString":["polygon","properties"],"Misc.kinks":["featureIn"],"Misc.lineArc":["center","radius","bearing1","bearing2","steps","units"],"Misc.lineChunk":["geojson","segmentLength","units","reverse"],"Misc.lineIntersect":["line1","line2"],"Misc.lineOverlap":["line1","line2"],"Misc.lineSegment":["geojson"],"Misc.lineSlice":["startPt","stopPt","line"],"Misc.lineSliceAlong":["line","startDist","stopDist","units"],"Misc.lineSplit":["line","splitter"],"Misc.mask":["polygon","mask"],"Misc.pointOnLine":["lines","pt","units"],"Misc.sector":["center","radius","bearing1","bearing2","steps","units"],"Misc.shortestPath":["start","end","obstacles","units","resolution"],"Misc.unkinkPolygon":["geojson"],"Helper.featureCollection":["features","bbox","id"],"Helper.feature":["geometry","properties","bbox","id"],"Helper.geometryCollection":["geometries","properties","bbox","id"],"Helper.lineString":["coordinates","properties","bbox","id"],"Helper.multiLineString":["coordinates","properties","bbox","id"],"Helper.multiPoint":["coordinates","properties","bbox","id"],"Helper.multiPolygon":["coordinates","properties","bbox","id"],"Helper.point":["coordinates","properties","bbox","id"],"Helper.polygon":["coordinates","properties","bbox","id"],"Data.sample":["featurecollection","num"],"Interpolation.interpolate":["points","cellSize","gridType","property","units","weight"],"Interpolation.isobands":["pointGrid","breaks","zProperty","commonProperties","breaksProperties"],"Interpolation.isolines":["pointGrid","breaks","zProperty","commonProperties","breaksProperties"],"Interpolation.planepoint":["point","triangle"],"Interpolation.tin":["points","z"],"Joins.pointsWithinPolygon":["points","polygons"],"Joins.tag":["points","polygons","field","outField","mask","properties"],"Grids.hexGrid":["bbox","cellSide","units","triangles"],"Grids.pointGrid":["bbox","cellSide","units","mask","properties"],"Grids.squareGrid":["bbox","cellSide","units","mask","properties"],"Grids.triangleGrid":["bbox","cellSide","units","mask","properties"],"Classification.nearestPoint":["targetPoint","points"],"Aggregation.collect":["polygons","points","inProperty","outProperty"],"Aggregation.clustersDbscan":["points","maxDistance","units","minPoints","mutate"],"Aggregation.clustersKmeans":["points","numberOfClusters","mutate"],"Meta.coordAll":["geojson"],"Meta.coordEach":["geojson","callback","excludeWrapCoord"],"Meta.coordReduce":["geojson","callback","initialValue","excludeWrapCoord"],"Meta.featureEach":["geojson","callback"],"Meta.featureReduce":["geojson","callback","initialValue"],"Meta.flattenEach":["geojson","callback"],"Meta.flattenReduce":["geojson","callback","initialValue"],"Meta.getCoord":["coord"],"Meta.getCoords":["coords"],"Meta.getGeom":["geojson"],"Meta.getGeomType":["geojson","name"],"Meta.geomEach":["geojson","callback"],"Meta.geomReduce":["geojson","callback","initialValue"],"Meta.propEach":["geojson","callback"],"Meta.propReduce":["geojson","callback","initialValue"],"Meta.segmentEach":["geojson","callback"],"Meta.segmentReduce":["geojson","callback","initialValue"],"Meta.getCluster":["geojson","filter"],"Meta.clusterEach":["geojson","property","callback"],"Meta.clusterReduce":["geojson","property","callback","initialValue"],"Assertions.collectionOf":["featureCollection","type","name"],"Assertions.containsNumber":["coordinates"],"Assertions.geojsonType":["value","type","name"],"Assertions.featureOf":["feature","type","name"],"Booleans.booleanClockwise":["line"],"Booleans.booleanContains":["feature1","feature2"],"Booleans.booleanCrosses":["feature1","feature2"],"Booleans.booleanDisjoint":["feature1","feature2"],"Booleans.booleanEqual":["feature1","feature2"],"Booleans.booleanOverlap":["feature1","feature2"],"Booleans.booleanParallel":["feature1","feature2"],"Booleans.booleanPointInPolygon":["point","polygon","ignoreBoundary"],"Booleans.booleanPointOnLine":["point","linestring","ignoreEndVertices"],"UnitConversion.bearingToAngle":["bearing"],"UnitConversion.convertArea":["area","originalUnit","finalUnit"],"UnitConversion.convertLength":["length","originalUnit","finalUnit"],"UnitConversion.degreesToradians":["degrees"],"UnitConversion.lengthToRadians":["distance","units"],"UnitConversion.lengthToDegrees":["distance","units"],"UnitConversion.radiansToLength":["radians","units"],"UnitConversion.radiansToDegrees":["radians"],"UnitConversion.toMercator":["geojson","mutate"],"UnitConversion.toWgs84":["geojson","mutate"]},options:{attribution:pW.Turf.attribution},initialize:function(t){t=t||{},mB.a.Util.setOptions(this,t),mB.a.stamp(this),this._layers={}},turfOptionMap:{"Measurement.along":["line","distance",{units:""}],"Measurement.bboxPolygon":["bbox",{properties:"",id:""}],"Measurement.bearing":["start","end",{final:""}],"Measurement.center":["geojson",{properties:""}],"Measurement.destination":["origin","distance","bearing",{units:"",properties:""}],"Measurement.distance":["from","to",{units:""}],"Measurement.length":["geojson",{units:""}],"Measurement.rhumbBearing":["start","end",{final:""}],"Measurement.rhumbDestination":["origin","distance","bearing",{units:"",properties:""}],"Measurement.rhumbDistance":["from","to",{units:""}],"Measurement.greatCircle":["start","end",{properties:"",npoints:"",offset:""}],"CoordinateMutation.cleanCoords":["geojson",{mutate:""}],"CoordinateMutation.flip":["geojson",{mutate:""}],"CoordinateMutation.rewind":["geojson",{mutate:"",reverse:""}],"CoordinateMutation.truncate":["geojson",{precision:"",coordinates:"",mutate:""}],"Transformation.bezierSpline":["line",{resolution:"",sharpness:""}],"Transformation.buffer":["geojson","radius",{units:"",steps:""}],"Transformation.circle":["center","radius",{units:"",steps:"",properties:""}],"Transformation.concave":["points",{maxEdge:"",units:""}],"Transformation.convex":["geojson",{concavity:""}],"Transformation.dissolve":["featureCollection",{propertyName:""}],"Transformation.lineOffset":["geojson","distance",{units:""}],"Transformation.simplify":["geojson",{tolerance:"",highQuality:""}],"Transformation.transformRotate":["geojson","angle",{pivot:"",mutate:""}],"Transformation.transformTranslate":["geojson","distance","direction",{units:"",zTranslation:"",mutate:""}],"Transformation.transformScale":["geojson","factor",{origin:"",mutate:""}],"Transformation.voronoi":["points",{bbox:""}],"featureConversion.lineStringToPolygon":["lines",{properties:"",autoComplete:"",orderCoords:""}],"featureConversion.polygonToLineString":["polygon",{properties:""}],"Misc.lineArc":["center","radius","bearing1","bearing2",{steps:"",units:""}],"Misc.lineChunk":["geojson","segmentLength",{units:"",reverse:""}],"Misc.lineOverlap":["line1","line2",{tolerance:""}],"Misc.lineSliceAlong":["line","startDist","stopDist",{units:""}],"Misc.pointOnLine":["lines","pt",{units:""}],"Misc.sector":["center","radius","bearing1","bearing2",{units:"",steps:"",properties:""}],"Misc.shortestPath":["start","end",{obstacles:"",units:"",resolution:""}],"Helper.feature":["geometry","properties",{bbox:"",id:""}],"Helper.geometryCollection":["geometries","properties",{bbox:"",id:""}],"Helper.lineString":["coordinates","properties",{bbox:"",id:""}],"Helper.multiLineString":["coordinates","properties",{bbox:"",id:""}],"Helper.multiPoint":["coordinates","properties",{bbox:"",id:""}],"Helper.multiPolygon":["coordinates","properties",{bbox:"",id:""}],"Helper.point":["coordinates","properties",{bbox:"",id:""}],"Helper.polygon":["coordinates","properties",{bbox:"",id:""}],"Interpolation.interpolate":["points","cellSize",{gridType:"",property:"",units:"",weight:""}],"Interpolation.isobands":["pointGrid","breaks",{zProperty:"",commonProperties:"",breaksProperties:""}],"Interpolation.isolines":["pointGrid","breaks",{zProperty:"",commonProperties:"",breaksProperties:""}],"Grids.hexGrid":["bbox","cellSide",{units:"",triangles:"",properties:"",mask:""}],"Grids.pointGrid":["bbox","cellSide",{units:"",mask:"",properties:""}],"Grids.squareGrid":["bbox","cellSide",{units:"",mask:"",properties:""}],"Grids.triangleGrid":["bbox","cellSide",{units:"",mask:"",properties:""}],"Aggregation.clustersDbscan":["points","maxDistance",{units:"",minPoints:"",mutate:""}],"Aggregation.clustersKmeans":["points",{numberOfClusters:"",mutate:""}],"Booleans.booleanPointInPolygon":["point","polygon",{ignoreBoundary:""}],"Booleans.booleanPointOnLine":["point","linestring",{ignoreEndVertices:""}],"UnitConversion.toMercator":["geojson",{mutate:""}],"UnitConversion.toWgs84":["geojson",{mutate:""}]},process:function(t,e,n,r){var i;try{i=XX[t.split(".")[1]].apply(this,this.parse(t,e))}catch(o){i=XX[t.split(".")[1]].apply(this,this.parseOption(t,e))}r=null==r||r,r&&this.addData([i]),n&&n(i)},parse:function(t,e){if("Transformation.union"===t)return e["A"];var n=[],r=this.turfMap[t];return r&&r.map((function(t){return n.push(e[t]),e[t]})),n},parseOption(t,e){var n=[],r=this.turfOptionMap[t];return r.map((function(t){if(t instanceof Object){var r=t;Object.keys(r).forEach((function(t){r[t]=e[t]})),n.push(r)}else n.push(e[t]);return e})),n}}),ZX=function(t){return new JX(t)},KX=mB.a.Class.extend({initialize:function(t,e){this.geometry=t,this.attributes=e},toFeature:function(){var t=this.geometry,e=[];if(t instanceof mB.a.LatLng)e=[t.lng,t.lat];else if(t instanceof mB.a.Point)e=[t.x,t.y];else if(t instanceof mB.a.CircleMarker){var n=t.getLatLng();e=[n.lng,n.lat]}else e=t;return 2===e.length&&(t=new ne(e[0],e[1])),new me(t,this.attributes)}}),QX=function(t,e){return new KX(t,e)},$X=mB.a.Layer.extend({options:{alwaysMapCRS:!1,id:Wt.createUniqueID("heatMapLayer_"),featureWeight:null,opacity:1,colors:["blue","cyan","lime","yellow","red"],useGeoUnit:!1,radius:50,attribution:pW.Common.attribution},initialize:function(t,e){mB.a.Util.setOptions(this,e),this.name=t,this.features=[],this.maxWeight=null,this.minWeight=null,this.rootCanvas=null,this.canvasContext=null,this.maxWidth=null,this.maxHeight=null,this.id=this.options.id,this.featureWeight=this.options.featureWeight,this.colors=this.options.colors,this.useGeoUnit=this.options.useGeoUnit,this.opacity=this.options.opacity,this.radius=this.options.radius,this.blur=this.options.blur,this.movingOffset=[0,0]},onRemove:function(t){var e=this;mB.a.DomUtil.remove(e.rootCanvas),t.off("mousemove",e.mouseMoveHandler)},onAdd:function(t){var e=this;if(e._map=t,e._createCanvasContainer(),e.rootCanvas){var n=t.getSize();e.rootCanvas.width=e.maxWidth=n.x,e.rootCanvas.height=e.maxHeight=n.y,e._updateOpacity(),e.mouseMoveHandler=function(t){var n=t.layerPoint;e.currentMousePosition=mB.a.point(n.x+e.movingOffset[0],n.y+e.movingOffset[1])},t.on("mousemove",e.mouseMoveHandler),e.update()}else t.removeLayer(e)},addFeatures:function(t){this.features=this.toiClientFeature(t),this.refresh()},refresh:function(){if(0!==this.features.length&&this._map){var t=this._map.getBounds();this.updateHeatPoints(t)}},updateHeatPoints:function(t){this.features&&this.features.length>0?this.convertFastToPixelPoints(t):this.canvasContext.clearRect(0,0,this.maxWidth,this.maxWidth)},convertFastToPixelPoints:function(t){var e,n,r,i,o,a,s,l=[],u=t.getEast()-t.getWest(),c=t.getNorth()-t.getSouth(),h=this._map.getSize();i=u/h.x>c/h.y?u/h.x:c/h.y,this.useRadius=this.useGeoUnit?parseInt(this.radius/i):this.radius;for(var d=0;d<this.features.length;d++){var f=this.features[d],p=f.geometry,g=this.getLocalXY(new Kt(p.x,p.y));this.featureWeight?(g.weight=f.attributes[this.featureWeight],this.maxWeight||(o=o||g.weight,a=a||g.weight,o=Math.max(o,g.weight),a=Math.min(a,g.weight))):g.weight=1,e=Math.floor(g[0]),n=Math.floor(g[1]),r=g.weight,l.push([e,n,r])}this.maxWeight?this.draw(l,this.maxWeight):(s=o&&a?(o+a)/2:1,this.draw(l,s))},draw:function(t,e){if(!(this.maxHeight>0&&this.maxWidth>0))return!1;var n=this.canvasContext;this.canvasContext.clearRect(0,0,this.maxWidth,this.maxHeight),this.drawCircle(this.useRadius),this.createGradient();for(var r=0;r<t.length;r++){var i=t[r];this.canvasContext.globalAlpha=Math.max(i[2]/e,.05),this.canvasContext.drawImage(this.circle,i[0]-this.useRadius,i[1]-this.useRadius)}var o=n.getImageData(0,0,this.maxWidth,this.maxHeight);this.colorize(o.data,this.grad),n.putImageData(o,0,0)},colorize:function(t,e){for(var n,r=0;r<t.length;r+=4)n=4*t[r+3],n&&(t[r]=e[n],t[r+1]=e[n+1],t[r+2]=e[n+2])},drawCircle:function(t){var e=this.blur||t/2,n=this.circle=document.createElement("canvas"),r=n.getContext("2d");n.height=2*t,n.width=2*t,r.shadowOffsetX=r.shadowOffsetY=2*t,r.shadowBlur=e,r.shadowColor="#000000",r.beginPath(),r.arc(-t,-t,t/2,0,2*Math.PI,!0),r.closePath(),r.fill()},createGradient:function(){var t=this.colors,e=document.createElement("canvas"),n=e.getContext("2d"),r=n.createLinearGradient(0,0,0,256);e.height=256,e.width=1;for(var i=1,o=0,a=t.length;o<a;o++)r.addColorStop(i/a,t[o]),i++;n.fillStyle=r,n.fillRect(0,0,1,256),this.grad=n.getImageData(0,0,1,256).data},update:function(){var t=this._map.containerPointToLayerPoint([0,0]);mB.a.DomUtil.setPosition(this.rootCanvas,t);var e=this;e.refresh(),e.currentMousePosition&&(e.currentMousePosition=mB.a.point(e.currentMousePosition.x-e.movingOffset[0],e.currentMousePosition.y-e.movingOffset[1])),e.movingOffset=[0,0],e._zoom=e._map.getZoom(),e._center=e._map.getCenter()},getLocalXY:function(t){if(!this._map)return t;var e=t;mB.a.Util.isArray(t)&&(e=mB.a.point(t[0],t[1])),t instanceof mB.a.Point||(e=t instanceof ne||t instanceof ie?mB.a.point(t.x,t.y):mB.a.point(t.lon,t.lat));var n=this._map.latLngToContainerPoint(this.options.alwaysMapCRS?this._map.options.crs.unproject(e):mB.a.latLng(e.y,e.x));return[n.x,n.y]},setOpacity:function(t){var e=this;t!==e.options.opacity&&(t&&(e.options.opacity=t),e._updateOpacity())},removeFeatures:function(t){if(t&&0!==t.length&&this.features&&0!==this.features.length){if(t===this.features)return this.removeAllFeatures();Wt.isArray(t)||(t=[t]);for(var e,n,r=[],i=0,o=t.length;i<o;i++)e=t[i],n=Wt.indexOf(this.features,e),-1!==n?this.features.splice(n,1):r.push(e);var a=0==r.length;this._map.fire("featuresremoved",{features:r,succeed:a}),this.refresh()}},removeAllFeatures:function(){this.features=[],this.refresh()},_createCanvasContainer:function(){var t=this.getPane(),e=this._map.options.zoomAnimation&&mB.a.Browser.any3d,n="heatMapLayer leaflet-layer leaflet-zoom-"+(e?"animated":"hide");this.rootCanvas=mB.a.DomUtil.create("canvas",n,t);var r=mB.a.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);this.rootCanvas.id=this.id,this.rootCanvas.style[r]="50% 50%",this.rootCanvas.style.position="absolute",this.rootCanvas.style.zIndex=200,Wt.modifyDOMElement(this.rootCanvas,null,null,null,null,null,null,this.opacity),this.canvasContext=this.rootCanvas.getContext("2d")},_updateOpacity:function(){var t=this;Wt.modifyDOMElement(t.rootCanvas,null,null,null,null,null,null,t.options.opacity),null!==t._map&&t._map.fire("changelayer",{layer:t,property:"opacity"})},getEvents:function(){var t=this,e={zoomend:t._reset,moveend:t._reset,resize:t._resize};return this._map._zoomAnimated&&(e.zoomanim=t._zoomAnim),e},toiClientFeature:function(t){mB.a.Util.isArray(t)||(t=[t]);let e=[];for(let n=0,r=t.length;n<r;n++)if(t[n]instanceof KX)e.push(t[n].toFeature());else if(-1!=["FeatureCollection","Feature","Geometry"].indexOf(t[n].type)){const r=new Ee;e=e.concat(r.read(t[n]))}else{if(!t[n].geometry||!t[n].geometry.parts)throw new Error("Features's type does not match, please check.");e.push(mo.fromJson(t[n]).toFeature())}return e},_zoomAnim:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._getCenterOffset(t.center)._multiplyBy(-e).subtract(this._map._getMapPanePos());mB.a.DomUtil.setTransform?mB.a.DomUtil.setTransform(this.rootCanvas,n,e):this.rootCanvas.style[mB.a.DomUtil.TRANSFORM]=mB.a.DomUtil.getTranslateString(n)+" scale("+e+")"},_reset:function(){var t=this;t.update();var e=t._map.getSize(),n=this._map.containerPointToLayerPoint([0,0]);mB.a.DomUtil.setPosition(this.rootCanvas,n),parseFloat(t.rootCanvas.width)!==parseFloat(e.x)&&(t.rootCanvas.width=e.x),parseFloat(t.rootCanvas.height)!==parseFloat(e.y)&&(t.rootCanvas.height=e.y),t.refresh()},_resize:function(){var t=this,e=t._map.getSize();t.maxWidth=e.x,t.maxHeight=e.y}}),tJ=function(t,e){return new $X(t,e)},eJ=n("62a7"),nJ=n.n(eJ);(function(t){t[t["Unknown"]=0]="Unknown",t[t["Point"]=1]="Point",t[t["LineString"]=2]="LineString",t[t["Polygon"]=3]="Polygon",t[t["MultiPoint"]=4]="MultiPoint",t[t["MultiLineString"]=5]="MultiLineString",t[t["MultiPolygon"]=6]="MultiPolygon",t[t["GeometryCollection"]=7]="GeometryCollection",t[t["CircularString"]=8]="CircularString",t[t["CompoundCurve"]=9]="CompoundCurve",t[t["CurvePolygon"]=10]="CurvePolygon",t[t["MultiCurve"]=11]="MultiCurve",t[t["MultiSurface"]=12]="MultiSurface",t[t["Curve"]=13]="Curve",t[t["Surface"]=14]="Surface",t[t["PolyhedralSurface"]=15]="PolyhedralSurface",t[t["TIN"]=16]="TIN",t[t["Triangle"]=17]="Triangle"})(LX||(LX={}));const rJ=4,iJ=4,oJ=4,aJ=new Int32Array(2),sJ=new Float32Array(aJ.buffer),lJ=new Float64Array(aJ.buffer),uJ=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0];var cJ,hJ;(function(t){t[t["UTF8_BYTES"]=1]="UTF8_BYTES",t[t["UTF16_STRING"]=2]="UTF16_STRING"})(cJ||(cJ={}));class dJ{constructor(t){this.bytes_=t,this.position_=0}static allocate(t){return new dJ(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return aJ[0]=this.readInt32(t),sJ[0]}readFloat64(t){return aJ[uJ?0:1]=this.readInt32(t),aJ[uJ?1:0]=this.readInt32(t+4),lJ[0]}writeInt8(t,e){this.bytes_[t]=e}writeUint8(t,e){this.bytes_[t]=e}writeInt16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeUint16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeInt32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeUint32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeInt64(t,e){this.writeInt32(t,Number(BigInt.asIntN(32,e))),this.writeInt32(t+4,Number(BigInt.asIntN(32,e>>BigInt(32))))}writeUint64(t,e){this.writeUint32(t,Number(BigInt.asUintN(32,e))),this.writeUint32(t+4,Number(BigInt.asUintN(32,e>>BigInt(32))))}writeFloat32(t,e){sJ[0]=e,this.writeInt32(t,aJ[0])}writeFloat64(t,e){lJ[0]=e,this.writeInt32(t,aJ[uJ?0:1]),this.writeInt32(t+4,aJ[uJ?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+rJ+iJ)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let e=0;e<iJ;e++)t+=String.fromCharCode(this.readInt8(this.position_+rJ+e));return t}__offset(t,e){const n=t-this.readInt32(t);return e<this.readInt16(n)?this.readInt16(n+e):0}__union(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t}__string(t,e){t+=this.readInt32(t);const n=this.readInt32(t);let r="",i=0;if(t+=rJ,e===cJ.UTF8_BYTES)return this.bytes_.subarray(t,t+n);while(i<n){let e;const n=this.readUint8(t+i++);if(n<192)e=n;else{const r=this.readUint8(t+i++);if(n<224)e=(31&n)<<6|63&r;else{const o=this.readUint8(t+i++);if(n<240)e=(15&n)<<12|(63&r)<<6|63&o;else{const a=this.readUint8(t+i++);e=(7&n)<<18|(63&r)<<12|(63&o)<<6|63&a}}}e<65536?r+=String.fromCharCode(e):(e-=65536,r+=String.fromCharCode(55296+(e>>10),56320+(1023&e)))}return r}__union_with_string(t,e){return"string"===typeof t?this.__string(e):this.__union(t,e)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+rJ}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=iJ)throw new Error("FlatBuffers: file identifier must be length "+iJ);for(let e=0;e<iJ;e++)if(t.charCodeAt(e)!=this.readInt8(this.position()+rJ+e))return!1;return!0}createScalarList(t,e){const n=[];for(let r=0;r<e;++r)null!==t(r)&&n.push(t(r));return n}createObjList(t,e){const n=[];for(let r=0;r<e;++r){const e=t(r);null!==e&&n.push(e.unpack())}return n}}class fJ{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsGeometry(t,e){return(e||new fJ).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsGeometry(t,e){return t.setPosition(t.position()+oJ),(e||new fJ).__init(t.readInt32(t.position())+t.position(),t)}ends(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint32(this.bb.__vector(this.bb_pos+e)+4*t):0}endsLength(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}endsArray(){const t=this.bb.__offset(this.bb_pos,4);return t?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}xy(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}xyLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}xyArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}z(t){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}zLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}zArray(){const t=this.bb.__offset(this.bb_pos,8);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}m(t){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}mLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}mArray(){const t=this.bb.__offset(this.bb_pos,10);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}t(t){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}tLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}tArray(){const t=this.bb.__offset(this.bb_pos,12);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}tm(t){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readUint64(this.bb.__vector(this.bb_pos+e)+8*t):BigInt(0)}tmLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}type(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readUint8(this.bb_pos+t):LX.Unknown}parts(t,e){const n=this.bb.__offset(this.bb_pos,18);return n?(e||new fJ).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}partsLength(){const t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}static startGeometry(t){t.startObject(8)}static addEnds(t,e){t.addFieldOffset(0,e,0)}static createEndsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addInt32(e[n]);return t.endVector()}static startEndsVector(t,e){t.startVector(4,e,4)}static addXy(t,e){t.addFieldOffset(1,e,0)}static createXyVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addFloat64(e[n]);return t.endVector()}static startXyVector(t,e){t.startVector(8,e,8)}static addZ(t,e){t.addFieldOffset(2,e,0)}static createZVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addFloat64(e[n]);return t.endVector()}static startZVector(t,e){t.startVector(8,e,8)}static addM(t,e){t.addFieldOffset(3,e,0)}static createMVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addFloat64(e[n]);return t.endVector()}static startMVector(t,e){t.startVector(8,e,8)}static addT(t,e){t.addFieldOffset(4,e,0)}static createTVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addFloat64(e[n]);return t.endVector()}static startTVector(t,e){t.startVector(8,e,8)}static addTm(t,e){t.addFieldOffset(5,e,0)}static createTmVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()}static startTmVector(t,e){t.startVector(8,e,8)}static addType(t,e){t.addFieldInt8(6,e,LX.Unknown)}static addParts(t,e){t.addFieldOffset(7,e,0)}static createPartsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startPartsVector(t,e){t.startVector(4,e,4)}static endGeometry(t){const e=t.endObject();return e}static createGeometry(t,e,n,r,i,o,a,s,l){return fJ.startGeometry(t),fJ.addEnds(t,e),fJ.addXy(t,n),fJ.addZ(t,r),fJ.addM(t,i),fJ.addT(t,o),fJ.addTm(t,a),fJ.addType(t,s),fJ.addParts(t,l),fJ.endGeometry(t)}}function pJ(t,e){const n=[];for(let r=0;r<t.length;r+=2){const i=[t[r],t[r+1]];e&&i.push(e[r>>1]),n.push(i)}return n}function gJ(t,e,n){if(!n||0===n.length)return[pJ(t,e)];let r=0;const i=Array.from(n).map(e=>t.slice(r,r=e<<1));let o;return e&&(r=0,o=Array.from(n).map(t=>e.slice(r,r=t))),i.map((t,e)=>pJ(t,o?o[e]:void 0))}function mJ(t,e){const n=t.xyArray(),r=t.zArray();switch(e){case LX.Point:{const t=Array.from(n);return r&&t.push(r[0]),t}case LX.MultiPoint:case LX.LineString:return pJ(n,r);case LX.MultiLineString:return gJ(n,r,t.endsArray());case LX.Polygon:return gJ(n,r,t.endsArray())}}function yJ(t,e){let n=e;if(n===LX.Unknown&&(n=t.type()),n===LX.GeometryCollection){const e=[];for(let n=0;n<t.partsLength();n++){const r=t.parts(n),i=r.type();e.push(yJ(r,i))}return{type:LX[n],geometries:e}}if(n===LX.MultiPolygon){const e=[];for(let n=0;n<t.partsLength();n++)e.push(yJ(t.parts(n),LX.Polygon));return{type:LX[n],coordinates:e.map(t=>t.coordinates)}}const r=mJ(t,n);return{type:LX[n],coordinates:r}}(function(t){t[t["Byte"]=0]="Byte",t[t["UByte"]=1]="UByte",t[t["Bool"]=2]="Bool",t[t["Short"]=3]="Short",t[t["UShort"]=4]="UShort",t[t["Int"]=5]="Int",t[t["UInt"]=6]="UInt",t[t["Long"]=7]="Long",t[t["ULong"]=8]="ULong",t[t["Float"]=9]="Float",t[t["Double"]=10]="Double",t[t["String"]=11]="String",t[t["Json"]=12]="Json",t[t["DateTime"]=13]="DateTime",t[t["Binary"]=14]="Binary"})(hJ||(hJ={}));class vJ{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsColumn(t,e){return(e||new vJ).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsColumn(t,e){return t.setPosition(t.position()+oJ),(e||new vJ).__init(t.readInt32(t.position())+t.position(),t)}name(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}type(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):hJ.Byte}title(t){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}description(t){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null}width(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt32(this.bb_pos+t):-1}precision(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readInt32(this.bb_pos+t):-1}scale(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readInt32(this.bb_pos+t):-1}nullable(){const t=this.bb.__offset(this.bb_pos,18);return!t||!!this.bb.readInt8(this.bb_pos+t)}unique(){const t=this.bb.__offset(this.bb_pos,20);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}primaryKey(){const t=this.bb.__offset(this.bb_pos,22);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}metadata(t){const e=this.bb.__offset(this.bb_pos,24);return e?this.bb.__string(this.bb_pos+e,t):null}static startColumn(t){t.startObject(11)}static addName(t,e){t.addFieldOffset(0,e,0)}static addType(t,e){t.addFieldInt8(1,e,hJ.Byte)}static addTitle(t,e){t.addFieldOffset(2,e,0)}static addDescription(t,e){t.addFieldOffset(3,e,0)}static addWidth(t,e){t.addFieldInt32(4,e,-1)}static addPrecision(t,e){t.addFieldInt32(5,e,-1)}static addScale(t,e){t.addFieldInt32(6,e,-1)}static addNullable(t,e){t.addFieldInt8(7,+e,1)}static addUnique(t,e){t.addFieldInt8(8,+e,0)}static addPrimaryKey(t,e){t.addFieldInt8(9,+e,0)}static addMetadata(t,e){t.addFieldOffset(10,e,0)}static endColumn(t){const e=t.endObject();return t.requiredField(e,4),e}static createColumn(t,e,n,r,i,o,a,s,l,u,c,h){return vJ.startColumn(t),vJ.addName(t,e),vJ.addType(t,n),vJ.addTitle(t,r),vJ.addDescription(t,i),vJ.addWidth(t,o),vJ.addPrecision(t,a),vJ.addScale(t,s),vJ.addNullable(t,l),vJ.addUnique(t,u),vJ.addPrimaryKey(t,c),vJ.addMetadata(t,h),vJ.endColumn(t)}}class bJ{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFeature(t,e){return(e||new bJ).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFeature(t,e){return t.setPosition(t.position()+oJ),(e||new bJ).__init(t.readInt32(t.position())+t.position(),t)}geometry(t){const e=this.bb.__offset(this.bb_pos,4);return e?(t||new fJ).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}properties(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0}propertiesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}propertiesArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}columns(t,e){const n=this.bb.__offset(this.bb_pos,8);return n?(e||new vJ).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}columnsLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFeature(t){t.startObject(3)}static addGeometry(t,e){t.addFieldOffset(0,e,0)}static addProperties(t,e){t.addFieldOffset(1,e,0)}static createPropertiesVector(t,e){t.startVector(1,e.length,1);for(let n=e.length-1;n>=0;n--)t.addInt8(e[n]);return t.endVector()}static startPropertiesVector(t,e){t.startVector(1,e,1)}static addColumns(t,e){t.addFieldOffset(2,e,0)}static createColumnsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startColumnsVector(t,e){t.startVector(4,e,4)}static endFeature(t){const e=t.endObject();return e}static finishFeatureBuffer(t,e){t.finish(e)}static finishSizePrefixedFeatureBuffer(t,e){t.finish(e,void 0,!0)}static createFeature(t,e,n,r){return bJ.startFeature(t),bJ.addGeometry(t,e),bJ.addProperties(t,n),bJ.addColumns(t,r),bJ.endFeature(t)}}new TextEncoder;const _J=new TextDecoder;function xJ(t,e){const n={};if(!e||0===e.length)return n;const r=t.propertiesArray();if(!r)return n;const i=new DataView(r.buffer,r.byteOffset),o=t.propertiesLength();let a=0;while(a<o){const t=i.getUint16(a,!0);a+=2;const o=e[t],s=o.name;switch(o.type){case hJ.Bool:n[s]=!!i.getUint8(a),a+=1;break;case hJ.Byte:n[s]=i.getInt8(a),a+=1;break;case hJ.UByte:n[s]=i.getUint8(a),a+=1;break;case hJ.Short:n[s]=i.getInt16(a,!0),a+=2;break;case hJ.UShort:n[s]=i.getUint16(a,!0),a+=2;break;case hJ.Int:n[s]=i.getInt32(a,!0),a+=4;break;case hJ.UInt:n[s]=i.getUint32(a,!0),a+=4;break;case hJ.Long:n[s]=Number(i.getBigInt64(a,!0)),a+=8;break;case hJ.ULong:n[s]=Number(i.getBigUint64(a,!0)),a+=8;break;case hJ.Float:n[s]=i.getFloat32(a,!0),a+=4;break;case hJ.Double:n[s]=i.getFloat64(a,!0),a+=8;break;case hJ.DateTime:case hJ.String:{const t=i.getUint32(a,!0);a+=4,n[s]=_J.decode(r.subarray(a,a+t)),a+=t;break}case hJ.Json:{const t=i.getUint32(a,!0);a+=4;const e=_J.decode(r.subarray(a,a+t));n[s]=JSON.parse(e),a+=t;break}default:throw new Error("Unknown type "+o.type)}}return n}function wJ(t,e){const n=e.columns,r=yJ(t.geometry(),e.geometryType),i={type:"Feature",geometry:r,properties:xJ(t,n)};return i}var SJ=new Uint8Array(0),EJ=function(){return this._source.cancel()};function CJ(t,e){if(!t.length)return e;if(!e.length)return t;var n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}var MJ=function(){var t=this,e=t._array.subarray(t._index);return t._source.read().then((function(n){return t._array=SJ,t._index=0,n.done?e.length>0?{done:!1,value:e}:{done:!0,value:void 0}:{done:!1,value:CJ(e,n.value)}}))},TJ=function(t){if((t|=0)<0)throw new Error("invalid length");var e=this,n=this._array.length-this._index;if(this._index+t<=this._array.length)return Promise.resolve(this._array.subarray(this._index,this._index+=t));var r=new Uint8Array(t);return r.set(this._array.subarray(this._index)),function i(){return e._source.read().then((function(o){return o.done?(e._array=SJ,e._index=0,n>0?r.subarray(0,n):null):n+o.value.length>=t?(e._array=o.value,e._index=t-n,r.set(o.value.subarray(0,t-n),n),r):(r.set(o.value,n),n+=o.value.length,i())}))}()};function AJ(t){return"function"===typeof t.slice?t:new OJ("function"===typeof t.read?t:t.getReader())}function OJ(t){this._source=t,this._array=SJ,this._index=0}OJ.prototype.read=MJ,OJ.prototype.slice=TJ,OJ.prototype.cancel=EJ;class kJ{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsCrs(t,e){return(e||new kJ).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsCrs(t,e){return t.setPosition(t.position()+oJ),(e||new kJ).__init(t.readInt32(t.position())+t.position(),t)}org(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}code(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}name(t){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}description(t){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null}wkt(t){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__string(this.bb_pos+e,t):null}codeString(t){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__string(this.bb_pos+e,t):null}static startCrs(t){t.startObject(6)}static addOrg(t,e){t.addFieldOffset(0,e,0)}static addCode(t,e){t.addFieldInt32(1,e,0)}static addName(t,e){t.addFieldOffset(2,e,0)}static addDescription(t,e){t.addFieldOffset(3,e,0)}static addWkt(t,e){t.addFieldOffset(4,e,0)}static addCodeString(t,e){t.addFieldOffset(5,e,0)}static endCrs(t){const e=t.endObject();return e}static createCrs(t,e,n,r,i,o,a){return kJ.startCrs(t),kJ.addOrg(t,e),kJ.addCode(t,n),kJ.addName(t,r),kJ.addDescription(t,i),kJ.addWkt(t,o),kJ.addCodeString(t,a),kJ.endCrs(t)}}class IJ{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsHeader(t,e){return(e||new IJ).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsHeader(t,e){return t.setPosition(t.position()+oJ),(e||new IJ).__init(t.readInt32(t.position())+t.position(),t)}name(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}envelope(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}envelopeLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}envelopeArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}geometryType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):LX.Unknown}hasZ(){const t=this.bb.__offset(this.bb_pos,10);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}hasM(){const t=this.bb.__offset(this.bb_pos,12);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}hasT(){const t=this.bb.__offset(this.bb_pos,14);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}hasTm(){const t=this.bb.__offset(this.bb_pos,16);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}columns(t,e){const n=this.bb.__offset(this.bb_pos,18);return n?(e||new vJ).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}columnsLength(){const t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}featuresCount(){const t=this.bb.__offset(this.bb_pos,20);return t?this.bb.readUint64(this.bb_pos+t):BigInt("0")}indexNodeSize(){const t=this.bb.__offset(this.bb_pos,22);return t?this.bb.readUint16(this.bb_pos+t):16}crs(t){const e=this.bb.__offset(this.bb_pos,24);return e?(t||new kJ).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}title(t){const e=this.bb.__offset(this.bb_pos,26);return e?this.bb.__string(this.bb_pos+e,t):null}description(t){const e=this.bb.__offset(this.bb_pos,28);return e?this.bb.__string(this.bb_pos+e,t):null}metadata(t){const e=this.bb.__offset(this.bb_pos,30);return e?this.bb.__string(this.bb_pos+e,t):null}static startHeader(t){t.startObject(14)}static addName(t,e){t.addFieldOffset(0,e,0)}static addEnvelope(t,e){t.addFieldOffset(1,e,0)}static createEnvelopeVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addFloat64(e[n]);return t.endVector()}static startEnvelopeVector(t,e){t.startVector(8,e,8)}static addGeometryType(t,e){t.addFieldInt8(2,e,LX.Unknown)}static addHasZ(t,e){t.addFieldInt8(3,+e,0)}static addHasM(t,e){t.addFieldInt8(4,+e,0)}static addHasT(t,e){t.addFieldInt8(5,+e,0)}static addHasTm(t,e){t.addFieldInt8(6,+e,0)}static addColumns(t,e){t.addFieldOffset(7,e,0)}static createColumnsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startColumnsVector(t,e){t.startVector(4,e,4)}static addFeaturesCount(t,e){t.addFieldInt64(8,e,BigInt("0"))}static addIndexNodeSize(t,e){t.addFieldInt16(9,e,16)}static addCrs(t,e){t.addFieldOffset(10,e,0)}static addTitle(t,e){t.addFieldOffset(11,e,0)}static addDescription(t,e){t.addFieldOffset(12,e,0)}static addMetadata(t,e){t.addFieldOffset(13,e,0)}static endHeader(t){const e=t.endObject();return e}static finishHeaderBuffer(t,e){t.finish(e)}static finishSizePrefixedHeaderBuffer(t,e){t.finish(e,void 0,!0)}}function PJ(t){const e=IJ.getRootAsHeader(t),n=e.featuresCount(),r=e.indexNodeSize(),i=[];for(let l=0;l<e.columnsLength();l++){const t=e.columns(l);if(!t)throw new Error("Column unexpectedly missing");if(!t.name())throw new Error("Column name unexpectedly missing");i.push({name:t.name(),type:t.type(),title:t.title(),description:t.description(),width:t.width(),precision:t.precision(),scale:t.scale(),nullable:t.nullable(),unique:t.unique(),primary_key:t.primaryKey()})}const o=e.crs(),a=o?{org:o.org(),code:o.code(),name:o.name(),description:o.description(),wkt:o.wkt(),code_string:o.codeString()}:null,s={geometryType:e.geometryType(),columns:i,envelope:null,featuresCount:Number(n),indexNodeSize:r,crs:a,title:e.title(),description:e.description(),metadata:e.metadata()};return s}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var LJ=function(t,e){return LJ=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},LJ(t,e)};function NJ(t,e){function n(){this.constructor=t}LJ(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function RJ(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function a(t){try{l(r.next(t))}catch(e){o(e)}}function s(t){try{l(r["throw"](t))}catch(e){o(e)}}function l(t){t.done?n(t.value):i(t.value).then(a,s)}l((r=r.apply(t,e||[])).next())}))}function DJ(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(t){return function(e){return l([t,e])}}function l(o){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function FJ(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function jJ(t){return this instanceof jJ?(this.v=t,this):new jJ(t)}function BJ(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){o.push([t,e,n,r])>1||s(t,e)}))})}function s(t,e){try{l(i[t](e))}catch(n){h(o[0][3],n)}}function l(t){t.value instanceof jJ?Promise.resolve(t.value.v).then(u,c):h(o[0][2],t)}function u(t){s("next",t)}function c(t){s("throw",t)}function h(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}}var zJ=function(t){function e(e){var n=t.call(this,e)||this;return Object.defineProperty(n,"name",{value:"RepeaterOverflowError",enumerable:!1}),"function"===typeof Object.setPrototypeOf?Object.setPrototypeOf(n,n.constructor.prototype):n.__proto__=n.constructor.prototype,"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(n,n.constructor),n}return NJ(e,t),e}(Error);(function(){function t(t){if(t<0)throw new RangeError("Capacity may not be less than 0");this._c=t,this._q=[]}Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"full",{get:function(){return this._q.length>=this._c},enumerable:!1,configurable:!0}),t.prototype.add=function(t){if(this.full)throw new Error("Buffer full");this._q.push(t)},t.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()}})(),function(){function t(t){if(t<1)throw new RangeError("Capacity may not be less than 1");this._c=t,this._q=[]}Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.add=function(t){while(this._q.length>=this._c)this._q.shift();this._q.push(t)},t.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()}}(),function(){function t(t){if(t<1)throw new RangeError("Capacity may not be less than 1");this._c=t,this._q=[]}Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.add=function(t){this._q.length<this._c&&this._q.push(t)},t.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()}}();function UJ(t){null!=t&&"function"===typeof t.then&&t.then(XJ,XJ)}var GJ=0,qJ=1,VJ=2,HJ=3,WJ=4,YJ=1024,XJ=function(){};function JJ(t){var e=t.err,n=Promise.resolve(t.execution).then((function(t){if(null!=e)throw e;return t}));return t.err=void 0,t.execution=n.then((function(){}),(function(){})),void 0===t.pending?n:t.pending.then((function(){return n}))}function ZJ(t,e){var n=t.state>=HJ;return Promise.resolve(e).then((function(e){return!n&&t.state>=WJ?JJ(t).then((function(t){return{value:t,done:!0}})):{value:e,done:n}}))}function KJ(t,e){var n,r;if(!(t.state>=VJ))if(t.state=VJ,t.onnext(),t.onstop(),null==t.err&&(t.err=e),0!==t.pushes.length||"undefined"!==typeof t.buffer&&!t.buffer.empty)try{for(var i=FJ(t.pushes),o=i.next();!o.done;o=i.next()){var a=o.value;a.resolve()}}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}else QJ(t)}function QJ(t){var e,n;if(!(t.state>=HJ)){t.state<VJ&&KJ(t),t.state=HJ,t.buffer=void 0;try{for(var r=FJ(t.nexts),i=r.next();!i.done;i=r.next()){var o=i.value,a=void 0===t.pending?JJ(t):t.pending.then((function(){return JJ(t)}));o.resolve(ZJ(t,a))}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}t.pushes=[],t.nexts=[]}}function $J(t){t.state>=WJ||(t.state<HJ&&QJ(t),t.state=WJ)}function tZ(t,e){if(UJ(e),t.pushes.length>=YJ)throw new zJ("No more than "+YJ+" pending calls to push are allowed on a single repeater.");if(t.state>=VJ)return Promise.resolve(void 0);var n,r=void 0===t.pending?Promise.resolve(e):t.pending.then((function(){return e}));if(r=r.catch((function(e){t.state<VJ&&(t.err=e),$J(t)})),t.nexts.length){var i=t.nexts.shift();i.resolve(ZJ(t,r)),n=t.nexts.length?Promise.resolve(t.nexts[0].value):new Promise((function(e){return t.onnext=e}))}else"undefined"===typeof t.buffer||t.buffer.full?n=new Promise((function(e){return t.pushes.push({resolve:e,value:r})})):(t.buffer.add(r),n=Promise.resolve(void 0));var o=!0,a={},s=n.catch((function(t){if(o)throw t}));return a.then=function(t,e){return o=!1,Promise.prototype.then.call(n,t,e)},a.catch=function(t){return o=!1,Promise.prototype.catch.call(n,t)},a.finally=n.finally.bind(n),t.pending=r.then((function(){return s})).catch((function(e){t.err=e,$J(t)})),a}function eZ(t){var e=KJ.bind(null,t),n=new Promise((function(e){return t.onstop=e}));return e.then=n.then.bind(n),e.catch=n.catch.bind(n),e.finally=n.finally.bind(n),e}function nZ(t){if(!(t.state>=qJ)){t.state=qJ;var e=tZ.bind(null,t),n=eZ(t);t.execution=new Promise((function(r){return r(t.executor(e,n))})),t.execution.catch((function(){return KJ(t)}))}}var rZ,iZ=new WeakMap,oZ=function(){function t(t,e){iZ.set(this,{executor:t,buffer:e,err:void 0,state:GJ,pushes:[],nexts:[],pending:void 0,execution:void 0,onnext:XJ,onstop:XJ})}return t.prototype.next=function(t){UJ(t);var e=iZ.get(this);if(void 0===e)throw new Error("WeakMap error");if(e.nexts.length>=YJ)throw new zJ("No more than "+YJ+" pending calls to next are allowed on a single repeater.");if(e.state<=GJ&&nZ(e),e.onnext(t),"undefined"!==typeof e.buffer&&!e.buffer.empty){var n=ZJ(e,e.buffer.remove());if(e.pushes.length){var r=e.pushes.shift();e.buffer.add(r.value),e.onnext=r.resolve}return n}if(e.pushes.length){var i=e.pushes.shift();return e.onnext=i.resolve,ZJ(e,i.value)}return e.state>=VJ?(QJ(e),ZJ(e,JJ(e))):new Promise((function(n){return e.nexts.push({resolve:n,value:t})}))},t.prototype.return=function(t){UJ(t);var e=iZ.get(this);if(void 0===e)throw new Error("WeakMap error");return QJ(e),e.execution=Promise.resolve(e.execution).then((function(){return t})),ZJ(e,JJ(e))},t.prototype.throw=function(t){var e=iZ.get(this);if(void 0===e)throw new Error("WeakMap error");return e.state<=GJ||e.state>=VJ||"undefined"!==typeof e.buffer&&!e.buffer.empty?(QJ(e),null==e.err&&(e.err=t),ZJ(e,JJ(e))):this.next(Promise.reject(t))},t.prototype[Symbol.asyncIterator]=function(){return this},t.race=sZ,t.merge=lZ,t.zip=uZ,t.latest=cZ,t}();function aZ(t,e){var n,r,i=[],o=function(t){null!=t&&"function"===typeof t[Symbol.asyncIterator]?i.push(t[Symbol.asyncIterator]()):null!=t&&"function"===typeof t[Symbol.iterator]?i.push(t[Symbol.iterator]()):i.push(function(){return BJ(this,arguments,(function(){return DJ(this,(function(n){switch(n.label){case 0:return e.yieldValues?[4,jJ(t)]:[3,3];case 1:return[4,n.sent()];case 2:n.sent(),n.label=3;case 3:return e.returnValues?[4,jJ(t)]:[3,5];case 4:return[2,n.sent()];case 5:return[2]}}))}))}())};try{for(var a=FJ(t),s=a.next();!s.done;s=a.next()){var l=s.value;o(l)}}catch(u){n={error:u}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return i}function sZ(t){var e=this,n=aZ(t,{returnValues:!0});return new oZ((function(t,r){return RJ(e,void 0,void 0,(function(){var e,i,o,a,s,l;return DJ(this,(function(u){switch(u.label){case 0:if(!n.length)return r(),[2];i=!1,r.then((function(){e(),i=!0})),u.label=1;case 1:u.trys.push([1,,5,7]),a=void 0,s=0,l=function(){var i,l,u,c,h,d;return DJ(this,(function(f){switch(f.label){case 0:i=s;try{for(h=void 0,l=FJ(n),u=l.next();!u.done;u=l.next())c=u.value,Promise.resolve(c.next()).then((function(t){t.done?(r(),void 0===o&&(o=t)):s===i&&(s++,e(t))}),(function(t){return r(t)}))}catch(p){h={error:p}}finally{try{u&&!u.done&&(d=l.return)&&d.call(l)}finally{if(h)throw h.error}}return[4,new Promise((function(t){return e=t}))];case 1:return a=f.sent(),void 0===a?[3,3]:[4,t(a.value)];case 2:f.sent(),f.label=3;case 3:return[2]}}))},u.label=2;case 2:return i?[3,4]:[5,l()];case 3:return u.sent(),[3,2];case 4:return[2,o&&o.value];case 5:return r(),[4,Promise.race(n.map((function(t){return t.return&&t.return()})))];case 6:return u.sent(),[7];case 7:return[2]}}))}))}))}function lZ(t){var e=this,n=aZ(t,{yieldValues:!0});return new oZ((function(t,r){return RJ(e,void 0,void 0,(function(){var e,i,o,a=this;return DJ(this,(function(s){switch(s.label){case 0:if(!n.length)return r(),[2];e=[],i=!1,r.then((function(){var t,n;i=!0;try{for(var r=FJ(e),o=r.next();!o.done;o=r.next()){var a=o.value;a()}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}})),s.label=1;case 1:return s.trys.push([1,,3,4]),[4,Promise.all(n.map((function(n,s){return RJ(a,void 0,void 0,(function(){var a,l;return DJ(this,(function(u){switch(u.label){case 0:u.trys.push([0,,6,9]),u.label=1;case 1:return i?[3,5]:(Promise.resolve(n.next()).then((function(t){return e[s](t)}),(function(t){return r(t)})),[4,new Promise((function(t){e[s]=t}))]);case 2:return a=u.sent(),void 0===a?[3,4]:a.done?(o=a,[2]):[4,t(a.value)];case 3:u.sent(),u.label=4;case 4:return[3,1];case 5:return[3,9];case 6:return l=n.return,l?[4,n.return()]:[3,8];case 7:l=u.sent(),u.label=8;case 8:return[7];case 9:return[2]}}))}))})))];case 2:return s.sent(),[2,o&&o.value];case 3:return r(),[7];case 4:return[2]}}))}))}))}function uZ(t){var e=this,n=aZ(t,{returnValues:!0});return new oZ((function(t,r){return RJ(e,void 0,void 0,(function(){var e,i,o,a;return DJ(this,(function(s){switch(s.label){case 0:if(!n.length)return r(),[2,[]];i=!1,r.then((function(){e(),i=!0})),s.label=1;case 1:s.trys.push([1,,6,8]),s.label=2;case 2:return i?[3,5]:(Promise.all(n.map((function(t){return t.next()}))).then((function(t){return e(t)}),(function(t){return r(t)})),[4,new Promise((function(t){return e=t}))]);case 3:return o=s.sent(),void 0===o?[2]:(a=o.map((function(t){return t.value})),o.some((function(t){return t.done}))?[2,a]:[4,t(a)]);case 4:return s.sent(),[3,2];case 5:return[3,8];case 6:return r(),[4,Promise.all(n.map((function(t){return t.return&&t.return()})))];case 7:return s.sent(),[7];case 8:return[2]}}))}))}))}function cZ(t){var e=this,n=aZ(t,{yieldValues:!0,returnValues:!0});return new oZ((function(t,r){return RJ(e,void 0,void 0,(function(){var e,i,o,a,s,l=this;return DJ(this,(function(u){switch(u.label){case 0:if(!n.length)return r(),[2,[]];i=[],o=!1,r.then((function(){var t,n;e();try{for(var r=FJ(i),a=r.next();!a.done;a=r.next()){var s=a.value;s()}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}o=!0})),u.label=1;case 1:return u.trys.push([1,,5,7]),Promise.all(n.map((function(t){return t.next()}))).then((function(t){return e(t)}),(function(t){return r(t)})),[4,new Promise((function(t){return e=t}))];case 2:return a=u.sent(),void 0===a?[2]:(s=a.map((function(t){return t.value})),a.every((function(t){return t.done}))?[2,s]:[4,t(s.slice())]);case 3:return u.sent(),[4,Promise.all(n.map((function(e,n){return RJ(l,void 0,void 0,(function(){var l;return DJ(this,(function(u){switch(u.label){case 0:if(a[n].done)return[2,a[n].value];u.label=1;case 1:return o?[3,4]:(Promise.resolve(e.next()).then((function(t){return i[n](t)}),(function(t){return r(t)})),[4,new Promise((function(t){return i[n]=t}))]);case 2:return l=u.sent(),void 0===l?[2,a[n].value]:l.done?[2,l.value]:(s[n]=l.value,[4,t(s.slice())]);case 3:return u.sent(),[3,1];case 4:return[2]}}))}))})))];case 4:return[2,u.sent()];case 5:return r(),[4,Promise.all(n.map((function(t){return t.return&&t.return()})))];case 6:return u.sent(),[7];case 7:return[2]}}))}))}))}class hZ{constructor(){this._extraRequestThreshold=262144}extraRequestThreshold(){return this._extraRequestThreshold}setExtraRequestThreshold(t){if(t<0)throw new Error("extraRequestThreshold cannot be negative");this._extraRequestThreshold=t}}hZ.global=new hZ,function(t){t[t["Debug"]=0]="Debug",t[t["Info"]=1]="Info",t[t["Warn"]=2]="Warn",t[t["Error"]=3]="Error"}(rZ||(rZ={}));class dZ{static debug(...t){this.log(rZ.Debug,...t)}static info(...t){this.log(rZ.Info,...t)}static warn(...t){this.log(rZ.Warn,...t)}static error(...t){this.log(rZ.Error,...t)}static log(t,...e){if(!(this.logLevel>t))switch(t){case rZ.Debug:console.debug(...e);break;case rZ.Info:console.info(...e);break;case rZ.Warn:console.warn(...e);break;case rZ.Error:console.error(...e);break}}}dZ.logLevel=rZ.Info;const fZ=40,pZ=16;function gZ(t,e){e=Math.min(Math.max(+e,2),65535);let n=t,r=n;do{n=Math.ceil(n/e),r+=n}while(1!==n);return r*fZ}function mZ(t,e){if(e<2)throw new Error("Node size must be at least 2");if(0===t)throw new Error("Number of items must be greater than 0");let n=t,r=n;const i=[n];do{n=Math.ceil(n/e),r+=n,i.push(n)}while(1!==n);const o=[];n=r;for(const s of i)o.push(n-s),n-=s;o.reverse(),i.reverse();const a=[];for(let s=0;s<i.length;s++)a.push([o[s],o[s]+i[s]]);return a.reverse(),a}async function*yZ(t,e,n,r){class i{constructor(t,e){this._level=e,this.nodes=t}level(){return this._level}startNode(){return this.nodes[0]}endNode(){return this.nodes[1]}extendEndNodeToNewOffset(t){console.assert(t>this.nodes[1]),this.nodes[1]=t}toString(){return`[NodeRange level: ${this._level}, nodes: ${this.nodes[0]}-${this.nodes[1]}]`}}const{minX:o,minY:a,maxX:s,maxY:l}=n;dZ.info(`tree items: ${t}, nodeSize: ${e}`);const u=mZ(t,e),c=u[0][0],h=(()=>{const t=[0,1],e=u.length-1;return new i(t,e)})(),d=[h];dZ.debug(`starting stream search with queue: ${d}, numItems: ${t}, nodeSize: ${e}, levelBounds: ${u}`);while(0!=d.length){const n=d.shift();dZ.debug(`popped node: ${n}, queueLength: ${d.length}`);const h=n.startNode(),f=h>=c,[,p]=u[n.level()],g=Math.min(n.endNode()+e,p),m=g-h,y=await r(h*fZ,m*fZ),v=new Float64Array(y),b=new Uint32Array(y);for(let e=h;e<g;e++){const r=5*(e-h);if(s<v[r+0])continue;if(l<v[r+1])continue;if(o>v[r+2])continue;if(a>v[r+3])continue;const u=b[8+(r<<1)],p=b[9+(r<<1)],g=vZ(p,u);if(f){const n=(()=>{if(e<t-1){const t=5*(e-h+1),n=b[8+(t<<1)],r=b[9+(t<<1)],i=vZ(r,n);return i-g}return null})();yield[g,e-c,n];continue}const m=hZ.global.extraRequestThreshold()/fZ,y=d[d.length-1];if(void 0!==y&&y.level()==n.level()-1&&g<y.endNode()+m){dZ.debug(`Merging "nodeRange" request into existing range: ${y}, newOffset: ${y.endNode()} -> ${g}`),y.extendEndNodeToNewOffset(g);continue}const _=(()=>{const t=n.level()-1,e=[g,g+1];return new i(e,t)})();void 0!==y&&y.level()==_.level()?dZ.info(`Same level, but too far away. Pushing new request at offset: ${g} rather than merging with distant ${y}`):dZ.info(`Pushing new level for ${_} onto queue with nearestNodeRange: ${y} since there's not already a range for this level.`),d.push(_)}}}function vZ(t,e){if(0!=(4293918720&t))throw Error("integer is too large to be safely represented");const n=e+t*2**32;return n}const bZ=new Uint8Array([102,103,98,3,102,103,98,0]),_Z=4;class xZ{constructor(t,e,n,r){this.headerClient=t,this.header=e,this.headerLength=n,this.indexLength=r}static async open(t){const e=2024,n=new wZ(t),r=(()=>{const t=pZ,e=3;let n,r=0;for(n=0;n<e;n++){const e=t**n*fZ;r+=e}return r})(),i=e+r;dZ.debug(`fetching header. minReqLength: ${i} (assumedHeaderLength: ${e}, assumedIndexLength: ${r})`);{const t=new Uint8Array(await n.getRange(0,8,i,"header"));if(!t.subarray(0,3).every((t,e)=>bZ[e]===t))throw dZ.error(`bytes: ${t} != ${bZ}`),new Error("Not a FlatGeobuf file");dZ.debug("magic bytes look good")}let o;{const t=await n.getRange(8,4,i,"header");o=new DataView(t).getUint32(0,!0);const e=10485760;if(o>e||o<8)throw new Error("Invalid header size");dZ.debug("headerLength: "+o)}const a=await n.getRange(12,o,i,"header"),s=new dJ(new Uint8Array(a)),l=PJ(s),u=gZ(l.featuresCount,l.indexNodeSize);return dZ.debug("completed: opening http reader"),new xZ(n,l,o,u)}async*selectBbox(t){const e=this.lengthBeforeTree(),n=this.headerClient,r=async function(t,r){const i=0;return n.getRange(e+t,r,i,"index")},i=[];let o=[];for await(const s of yZ(this.header.featuresCount,this.header.indexNodeSize,t,r)){const[t,,]=s;let[,,e]=s;if(!e){dZ.info("final feature");const t=hZ.global.extraRequestThreshold();e=t}if(0==o.length){o.push([t,e]);continue}const n=o[o.length-1],r=t-(n[0]+n[1]);r>hZ.global.extraRequestThreshold()&&(dZ.info(`Pushing new feature batch, since gap ${r} was too large`),i.push(o),o=[]),o.push([t,e])}this.headerClient.logUsage("header+index"),o.length>0&&i.push(o);const a=i.flatMap(t=>this.readFeatureBatch(t));yield*oZ.merge(a)}lengthBeforeTree(){return bZ.length+_Z+this.headerLength}lengthBeforeFeatures(){return this.lengthBeforeTree()+this.indexLength}buildFeatureClient(){return new wZ(this.headerClient.httpClient)}async*readFeatureBatch(t){const[e]=t[0],[n,r]=t[t.length-1],i=e,o=n+r,a=o-i,s=this.buildFeatureClient();for(const[l]of t)yield await this.readFeature(s,l,a);s.logUsage("feature")}async readFeature(t,e,n){const r=e+this.lengthBeforeFeatures();let i;{const e=await t.getRange(r,4,n,"feature length");i=new DataView(e).getUint32(0,!0)}const o=await t.getRange(r+4,i,n,"feature data"),a=new Uint8Array(o),s=new Uint8Array(i+_Z);s.set(a,_Z);const l=new dJ(s);return l.setPosition(_Z),bJ.getRootAsFeature(l)}}class wZ{constructor(t){this.bytesEverUsed=0,this.bytesEverFetched=0,this.buffer=new ArrayBuffer(0),this.head=0,this.httpClient="string"===typeof t?new SZ(t):t}async getRange(t,e,n,r){this.bytesEverUsed+=e;const i=t-this.head,o=i+e;if(i>=0&&o<=this.buffer.byteLength)return this.buffer.slice(i,o);const a=Math.max(e,n);return this.bytesEverFetched+=a,dZ.debug(`requesting for new Range: ${t}-${t+e-1}`),this.buffer=await this.httpClient.getRange(t,a,r),this.head=t,this.buffer.slice(0,e)}logUsage(t){const e=t.split(" ")[0],n=this.bytesEverUsed,r=this.bytesEverFetched,i=(100*n/r).toFixed(2);dZ.info(`${e} bytes used/requested: ${n} / ${r} = ${i}%`)}}class SZ{constructor(t){this.requestsEverMade=0,this.bytesEverRequested=0,this.url=t}async getRange(t,e,n){this.requestsEverMade+=1,this.bytesEverRequested+=e;const r=`bytes=${t}-${t+e-1}`;dZ.info(`request: #${this.requestsEverMade}, purpose: ${n}), bytes: (this_request: ${e}, ever: ${this.bytesEverRequested}), Range: ${r}`);const i=await fetch(this.url,{headers:{Range:r}});return i.arrayBuffer()}}function EZ(t,e,n){if(!t.subarray(0,3).every((t,e)=>bZ[e]===t))throw new Error("Not a FlatGeobuf file");const r=new dJ(t),i=r.readUint32(bZ.length);r.setPosition(bZ.length+_Z);const o=PJ(r);n&&n(o);let a=bZ.length+_Z+i;const{indexNodeSize:s,featuresCount:l}=o;s>0&&(a+=gZ(l,s));const u=[];while(a<r.capacity()){const t=r.readUint32(a);r.setPosition(a+_Z);const n=bJ.getRootAsFeature(r);u.push(e(n,o)),a+=_Z+t}return u}async function*CZ(t,e,n){const r=AJ(t),i=async t=>await r.slice(t);let o=new Uint8Array(await i(8,"magic bytes"));if(!o.subarray(0,3).every((t,e)=>bZ[e]===t))throw new Error("Not a FlatGeobuf file");o=new Uint8Array(await i(4,"header length"));let a=new dJ(o);const s=a.readUint32(0);o=new Uint8Array(await i(s,"header data")),a=new dJ(o);const l=PJ(a);n&&n(l);const{indexNodeSize:u,featuresCount:c}=l;if(u>0){const t=gZ(c,u);await i(t,"entire index, w/o rect")}let h;while(h=await TZ(i,l,e))yield h}async function*MZ(t,e,n,r){const i=await xZ.open(t);dZ.debug("opened reader"),r&&r(i.header);for await(const o of i.selectBbox(e))yield n(o,i.header)}async function TZ(t,e,n){let r=new Uint8Array(await t(4,"feature length"));if(0===r.byteLength)return;let i=new dJ(r);const o=i.readUint32(0);r=new Uint8Array(await t(o,"feature data"));const a=new Uint8Array(o+4);a.set(r,4),i=new dJ(a),i.setPosition(_Z);const s=bJ.getRootAsFeature(i);return n(s,e)}function AZ(t,e){const n=EZ(t,wJ,e);return{type:"FeatureCollection",features:n}}function OZ(t,e){return CZ(t,wJ,e)}function kZ(t,e,n){return MZ(t,e,wJ,n)}function IZ(t,e,n){return t instanceof Uint8Array?AZ(t,n):t instanceof ReadableStream?OZ(t,n):kZ(t,e,n)}var PZ=mB.a.LayerGroup.extend({initialize:function(t,e){this.options=e||{},this.strategy=this.options.strategy||"bbox",this._layers={},this.url=t,this.previousLayer=null,this.loadedExtentsRtree_=new nJ.a,this.extent=this.options.extent,this._cacheIds=[],this._validatedId=!1,this._checked=!1,this.idField=this.options.idField||"SmID",this._updateFeaturesFn=this._updateFeatures.bind(this),mB.a.Util.setOptions(this,e)},onAdd:function(t){this.map=t;let e=[];if("bbox"===this.strategy){const n=t.getBounds();e=[n.getWest(),n.getSouth(),n.getEast(),n.getNorth()],t.on("moveend",this._updateFeaturesFn)}if(this.extent){const t=ss(this.extent,e);e=t&&t.length?t:this.extent}this._handleFeatures(e)},onRemove:function(t){this.loadedExtentsRtree_.clear(),this.loadedExtentsRtree_=null,"bbox"===this.strategy&&(t.off("moveend",this._updateFeaturesFn),this._cacheIds=[])},_updateFeatures:async function(t){const e=t.target;let n=[e.getBounds().getSouthWest(),e.getBounds().getNorthEast()];const r=[n[0].lng,n[0].lat,n[1].lng,n[1].lat],i=this._forEachInExtent(r,t=>this._containsExtent(t.extent,r));i||this._handleFeatures(r)},_handleFeatures:async function(t){let e,n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};t.length?(n.value={extent:t.slice()},this.loadedExtentsRtree_.insert(n)):e=await this._getStream(this.url);const r=IZ(e&&e.body||this.url,n);this._validatedId||(this.curLayer=mB.a.geoJSON(null,this.options),this.previousLayer&&this.removeLayer(this.previousLayer),this.previousLayer=this.curLayer,this.curLayer.addTo(this));for await(let i of r){if("bbox"===this.strategy){let t=i.properties[this.idField];if(t&&!this._validatedId&&(this._validatedId=!0,this._checked=!0),t&&this._checked){if(this._cacheIds.includes(t))continue;this._cacheIds.push(t)}}this.options.featureLoader&&"function"===typeof this.options.featureLoader&&(i=this.options.featureLoader(i)),this.curLayer.addData(i)}},async _getStream(t){return await Be.get(t,{},{withoutFormatSuffix:!0}).then((function(t){return t}))},_containsExtent:function(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]},_getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]},n=this.loadedExtentsRtree_.search(e);return n.map((function(t){return t.value}))},_forEachInExtent(t,e){return this._forEach(this._getInExtent(t),e)},_forEach(t,e){let n;for(let r=0,i=t.length;r<i;r++)if(n=e(t[r]),n)return n;return n}}),LZ=function(t,e){return new PZ(t,e)},NZ=mW.extend({initialize:function(t,e){mW.prototype.initialize.call(this,t,e),this._knowledgeGraphService=new Fa(this.url,e)},query(t,e){this._knowledgeGraphService.query(t,e)},getGraphMaps(t){this._knowledgeGraphService.getGraphMaps(t)},getGraphMap(t,e){this._knowledgeGraphService.getGraphMap(t,e)},async getGraphMapData(t){const e=await this._knowledgeGraphService.getGraphMapData(t);return e}});class RZ extends mB.a.Evented{initialize(t,e){if(!t)return;this.graph=null,this.EVENT_TYPES=["loaded"];const n=t.split("/").pop();this.url=t.replace("/graphmaps/"+n,""),this.createGraphMap(n,e)}async createGraphMap(t,e){this.knowledgeGraphService=this.createKnowledgeGraphService(this.url,e);const n=await this.knowledgeGraphService.getGraphMapData(t),r=fB.dataFromGraphMap(n.data,n.graphMap);this.graph=new fB(e&&e.config),this.graph.on("beforelayout",()=>{this.fire(this.EVENT_TYPES[0])}),this.graph.setData(r),this.graph.handleNodeStatus(LE(n.graphMap))}createKnowledgeGraphService(t,e){return new NZ(t,e)}}var DZ=mW.extend({initialize:function(t,e){mW.prototype.initialize.call(this,t,e);var n=this;this._addressMatchService=new ln(this.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers})},code:function(t,e){this._addressMatchService.code(Wt.urlPathAppend(this.url,"geocoding"),t,e)},decode:function(t,e){this._addressMatchService.decode(Wt.urlPathAppend(this.url,"geodecoding"),t,e)}}),FZ=function(t,e){return new DZ(t,e)};class jZ{constructor(t,e){this.url=t,this.options=e||{}}queryChart(t,e,n){var r=this,i=t,o=r._processFormat(n),a=new Dn(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:o});a.processAsync(i)}getChartFeatureInfo(t){var e=this,n=Wt.urlPathAppend(e.url,"chartFeatureInfoSpecs"),r=new Pn(n,{proxy:e.options.proxy,withCredentials:e.options.withCredentials,crossOrigin:e.options.crossOrigin,headers:e.options.headers,eventListeners:{scope:e,processCompleted:t,processFailed:t}});r.processAsync()}_processFormat(t){return t||m.GEOJSON}}var BZ=mW.extend({initialize:function(t,e){mW.prototype.initialize.call(this,t,e),this._chartServiceBase=new jZ(t,e)},queryChart:function(t,e,n){t=this._processParams(t),this._chartServiceBase.queryChart(t,e,n)},getChartFeatureInfo:function(t){this._chartServiceBase.getChartFeatureInfo(t)},_processParams:function(t){if(!t)return{};t.returnContent=null==t.returnContent||t.returnContent,t.chartQueryFilterParameters&&!mB.a.Util.isArray(t.chartQueryFilterParameters)&&(t.chartQueryFilterParameters=[t.chartQueryFilterParameters]),t.bounds&&(t.bounds=EW.toSuperMapBounds(t.bounds))},_processFormat:function(t){return t||m.GEOJSON}}),zZ=function(t,e){return new BZ(t,e)},UZ=mW.extend({initialize:function(t,e){mW.prototype.initialize.call(this,t,e),this._datasetService=new zr(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers})},getDatasets:function(t,e){t&&this._datasetService.getDatasetsService(t,e)},getDataset:function(t,e,n){t&&e&&this._datasetService.getDatasetService(t,e,n)},setDataset(t,e){if(t instanceof ia||t instanceof la){if(t instanceof ia)var n={datasetType:t.datasetType,datasourceName:t.datasourceName,datasetName:t.datasetName};else t instanceof la&&(n={datasetName:t.datasetName,datasourceName:t.datasourceName,isFileCache:t.isFileCache,description:t.description,prjCoordSys:t.prjCoordSys,charset:t.charset});this._datasetService.setDatasetService(n,e)}},deleteDataset:function(t,e,n){this._datasetService.deleteDatasetService(t,e,n)}}),GZ=function(t,e){return new UZ(t,e)},qZ=mW.extend({initialize:function(t,e){mW.prototype.initialize.call(this,t,e),this._datasourceService=new Qn(this.url,{proxy:this.proxy,withCredentials:this.withCredentials,crossOrigin:this.crossOrigin,headers:this.headers})},getDatasources:function(t){this._datasourceService.getDatasourcesService(t)},getDatasource:function(t,e){t&&this._datasourceService.getDatasourceService(t,e)},setDatasource:function(t,e){if(!(t instanceof yo))return;const n={description:t.description,coordUnit:t.coordUnit,distanceUnit:t.distanceUnit,datasourceName:t.datasourceName};this._datasourceService.setDatasourceService(n,e)}}),VZ=function(t,e){return new qZ(t,e)};class HZ{constructor(t,e){this.url=t,this.options=e||{}}getFields(t,e){var n=this,r=new $r(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:e,processFailed:e},datasource:t.datasource,dataset:t.dataset});r.processAsync()}getFieldStatisticsInfo(t,e){if(t instanceof yr){var n=this,r=t.fieldName,i=t.statisticMode;i&&!Array.isArray(i)&&(i=[i]),n.currentStatisticResult={fieldName:r},n._statisticsCallback=e,i.forEach(e=>{n.currentStatisticResult[e]=null,n._fieldStatisticRequest(t.datasource,t.dataset,r,e)})}}_fieldStatisticRequest(t,e,n,r){var i=this,o=new vr(i.url,{eventListeners:{scope:i,processCompleted:i._processCompleted.bind(i),processFailed:i._statisticsCallback},datasource:t,dataset:e,field:n,statisticMode:r,crossOrigin:i.options.crossOrigin,headers:i.options.headers});o.processAsync()}_processCompleted(t,e){var n=this,r=!0,i=t.result;for(var o in this.currentStatisticResult&&null==n.currentStatisticResult[i.mode]&&(this.currentStatisticResult[i.mode]=i.result),n.currentStatisticResult)if(null==n.currentStatisticResult[o]){r=!1;break}r&&n._statisticsCallback({result:n.currentStatisticResult,options:e})}}var WZ=mW.extend({initialize:function(t,e){mW.prototype.initialize.call(this,t,e),this._fieldService=new HZ(t,e)},getFields:function(t,e){this._fieldService.getFields(t,e)},getFieldStatisticsInfo:function(t,e){this._fieldService.getFieldStatisticsInfo(t,e)}}),YZ=function(t,e){return new WZ(t,e)},XZ=mW.extend({initialize:function(t,e){mW.prototype.initialize.call(this,t,e),this._gridCellQueryService=new ei(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers})},getGridCellInfos:function(t,e){if(!t)return null;this._gridCellQueryService.processAsync(t,e)}}),JZ=function(t,e){return new XZ(t,e)};const ZZ=mW.extend({initialize:function(t,e){e=e||{},mB.a.setOptions(this,e),mW.prototype.initialize.call(this,t,e),this.headers={},this.crossOrigin=!0,this.withCredentials=!0,this.proxy=!0,this._geoprocessingJobsService=new Fr(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers})},getTools:function(t){this._geoprocessingJobsService.getTools(t)},getTool:function(t,e){this._geoprocessingJobsService.getTool(t,e)},execute:function(t,e,n,r){this._geoprocessingJobsService.execute(t,e,n,r)},submitJob:function(t,e,n,r){this._geoprocessingJobsService.submitJob(t,e,n,r)},waitForJobCompletion:function(t,e,n,r){this._geoprocessingJobsService.waitForJobCompletion(t,e,n,r)},getJobInfo:function(t,e,n){this._geoprocessingJobsService.getJobInfo(t,e,n)},cancelJob:function(t,e,n){this._geoprocessingJobsService.cancelJob(t,e,n)},getJobs:function(t,e){this._geoprocessingJobsService.getJobs(t,e)},getResults:function(t,e,n,r){this._geoprocessingJobsService.getResults(t,e,n,r)}}),KZ=function(t,e){return new ZZ(t,e)};class QZ{constructor(t,e){this.url=t,this.options=e||{}}getLayersInfo(t){var e=this,n=new Ii(e.url,{proxy:e.options.proxy,withCredentials:e.options.withCredentials,crossOrigin:e.options.crossOrigin,headers:e.options.headers,eventListeners:{processCompleted:t,processFailed:t}});n.processAsync()}setLayerInfo(t,e){if(t){var n=this,r=t.resourceID,i=t.tempLayerName,o=t.layerInfo;if(r&&i){var a=Wt.urlPathAppend(n.url,"tempLayersSet/"+r+"/"+i),s=new bo(a,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{processCompleted:e,processFailed:e}});s.processAsync(o)}}}setLayersInfo(t,e){if(t){var n=this,r=t.resourceID,i=!!t.isTempLayers&&t.isTempLayers,o=t.layersInfo;if((!i||r)&&o){var a=new xo(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{processCompleted:e,processFailed:e},resourceID:r,isTempLayers:i});a.processAsync(o)}}}setLayerStatus(t,e){if(t){var n=this,r=new So(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{processCompleted:e,processFailed:e}});r.processAsync(t)}}}var $Z=mW.extend({initialize:function(t,e){mW.prototype.initialize.call(this,t,e),this._layerInfoService=new QZ(t,e)},getLayersInfo:function(t){this._layerInfoService.getLayersInfo(t)},setLayerInfo:function(t,e){this._layerInfoService.setLayerInfo(t,e)},setLayersInfo:function(t,e){this._layerInfoService.setLayersInfo(t,e)},setLayerStatus:function(t,e){this._layerInfoService.setLayerStatus(t,e)}}),tK=function(t,e){return new $Z(t,e)},eK=mW.extend({initialize:function(t,e){mW.prototype.initialize.call(this,t,e)},measureDistance:function(t,e){return this.measure(S.DISTANCE,t,e),this},measureArea:function(t,e){return this.measure(S.AREA,t,e),this},measure:function(t,e,n){if(e instanceof Ji){var r=this;e.geometry&&(e.geometry=FW(e.geometry));var i=new Zi(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,measureMode:t});i.processAsync(e,n)}}}),nK=function(t,e){return new eK(t,e)};class rK{constructor(t,e){this.url=t,this.options=e||{}}sinksFacilityAnalyst(t,e){var n=this,r=new or(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:e,processFailed:e}});r.processAsync(t)}sourcesFacilityAnalyst(t,e){var n=this,r=new sr(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:e,processFailed:e}});r.processAsync(t)}traceUpFacilityAnalyst(t,e){var n=this,r=new fr(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:e,processFailed:e}});r.processAsync(t)}traceDownFacilityAnalyst(t,e){var n=this,r=new hr(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:e,processFailed:e}});r.processAsync(t)}upstreamFacilityAnalyst(t,e){var n=this,r=new gr(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:e,processFailed:e}});r.processAsync(t)}}var iK=mW.extend({initialize:function(t,e){mW.prototype.initialize.call(this,t,e),this._networkAnalyst3DService=new rK(t,e)},sinksFacilityAnalyst:function(t,e){this._networkAnalyst3DService.sinksFacilityAnalyst(t,e)},sourcesFacilityAnalyst:function(t,e){this._networkAnalyst3DService.sourcesFacilityAnalyst(t,e)},traceUpFacilityAnalyst:function(t,e){this._networkAnalyst3DService.traceUpFacilityAnalyst(t,e)},traceDownFacilityAnalyst:function(t,e){this._networkAnalyst3DService.traceDownFacilityAnalyst(t,e)},upstreamFacilityAnalyst:function(t,e){this._networkAnalyst3DService.upstreamFacilityAnalyst(t,e)}}),oK=function(t,e){return new iK(t,e)};class aK{constructor(t,e){this.url=t,this.options=e||{}}burstPipelineAnalyst(t,e){var n=this,r=new In(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:e,processFailed:e}});r.processAsync(t)}computeWeightMatrix(t,e){var n=this,r=new Gn(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:e,processFailed:e}});r.processAsync(t)}findClosestFacilities(t,e,n){var r=this,i=new _r(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:r._processFormat(n)});i.processAsync(t)}streamFacilityAnalyst(t,e,n){var r=this,i=new ur(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:r._processFormat(n)});i.processAsync(t)}findLocation(t,e,n){var r=this,i=new wr(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:r._processFormat(n)});i.processAsync(t)}findPath(t,e,n){var r=this,i=new Mr(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:r._processFormat(n)});i.processAsync(t)}findTSPPaths(t,e,n){var r=this,i=new kr(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:r._processFormat(n)});i.processAsync(t)}findMTSPPaths(t,e,n){var r=this,i=new Er(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:r._processFormat(n)});i.processAsync(t)}findServiceAreas(t,e,n){var r=this,i=new Ar(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:r._processFormat(n)});i.processAsync(t)}updateEdgeWeight(t,e){var n=this,r=new oa(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:e,processFailed:e}});r.processAsync(t)}updateTurnNodeWeight(t,e){var n=this,r=new sa(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:e,processFailed:e}});r.processAsync(t)}_processFormat(t){return t||m.GEOJSON}}var sK=mW.extend({initialize:function(t,e){mW.prototype.initialize.call(this,t,e),this._networkAnalystService=new aK(t,e)},burstPipelineAnalyst:function(t,e){t=this._processParams(t),this._networkAnalystService.burstPipelineAnalyst(t,e)},computeWeightMatrix:function(t,e){t=this._processParams(t),this._networkAnalystService.computeWeightMatrix(t,e)},findClosestFacilities:function(t,e,n){t=this._processParams(t),this._networkAnalystService.findClosestFacilities(t,e,n)},streamFacilityAnalyst:function(t,e,n){t=this._processParams(t),this._networkAnalystService.streamFacilityAnalyst(t,e,n)},findLocation:function(t,e,n){t=this._processParams(t),this._networkAnalystService.findLocation(t,e,n)},findPath:function(t,e,n){t=this._processParams(t),this._networkAnalystService.findPath(t,e,n)},findTSPPaths:function(t,e,n){t=this._processParams(t),this._networkAnalystService.findTSPPaths(t,e,n)},findMTSPPaths:function(t,e,n){t=this._processParams(t),this._networkAnalystService.findMTSPPaths(t,e,n)},findServiceAreas:function(t,e,n){t=this._processParams(t),this._networkAnalystService.findServiceAreas(t,e,n)},updateEdgeWeight:function(t,e){this._networkAnalystService.updateEdgeWeight(t,e)},updateTurnNodeWeight:function(t,e){this._networkAnalystService.updateTurnNodeWeight(t,e)},_processParams:function(t){if(!t)return{};if(t.centers&&mB.a.Util.isArray(t.centers)&&t.centers.map((function(e,n){return t.centers[n]=e instanceof mB.a.LatLng?{x:e.lng,y:e.lat}:e,t.centers[n]})),t.nodes&&mB.a.Util.isArray(t.nodes)&&t.nodes.map((function(e,n){return t.nodes[n]=e instanceof mB.a.LatLng?{x:e.lng,y:e.lat}:e,t.nodes[n]})),t.event&&t.event instanceof mB.a.LatLng&&(t.event={x:t.event.lng,y:t.event.lat}),t.facilities&&mB.a.Util.isArray(t.facilities)&&t.facilities.map((function(e,n){return t.facilities[n]=e instanceof mB.a.LatLng?{x:e.lng,y:e.lat}:e,t.facilities[n]})),t.parameter&&t.parameter.barrierPoints){var e=t.parameter.barrierPoints;mB.a.Util.isArray(e)?e.map((function(e,n){return t.parameter.barrierPoints[n]=e instanceof mB.a.LatLng?{x:e.lng,y:e.lat}:e,t.parameter.barrierPoints[n]})):t.parameter.barrierPoints=[e instanceof mB.a.LatLng?{x:e.lng,y:e.lat}:e]}return t},_processFormat:function(t){return t||m.GEOJSON}}),lK=function(t,e){return new sK(t,e)};class uK{constructor(t,e){this.url=t,this.options=e||{},this.kernelDensityJobs={},this.summaryMeshJobs={},this.queryJobs={},this.summaryRegionJobs={},this.vectorClipJobs={},this.overlayGeoJobs={},this.buffersJobs={},this.topologyValidatorJobs={},this.summaryAttributesJobs={}}getKernelDensityJobs(t,e){var n=this,r=n._processFormat(e),i=new Bi(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:r});i.getKernelDensityJobs()}getKernelDensityJob(t,e,n){var r=this,i=r._processFormat(n),o=new Bi(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:i});o.getKernelDensityJob(t)}addKernelDensityJob(t,e,n,r){var i=this,o=i._processFormat(r),a=new Bi(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,crossOrigin:i.options.crossOrigin,headers:i.options.headers,eventListeners:{scope:i,processCompleted:e,processFailed:e,processRunning:function(t){i.kernelDensityJobs[t.id]=t.state}},format:o});a.addKernelDensityJob(t,n)}getKernelDensityJobState(t){return this.kernelDensityJobs[t]}getSummaryMeshJobs(t,e){var n=this,r=n._processFormat(e),i=new Io(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:r});i.getSummaryMeshJobs()}getSummaryMeshJob(t,e,n){var r=this,i=r._processFormat(n),o=new Io(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:i});o.getSummaryMeshJob(t)}addSummaryMeshJob(t,e,n,r){var i=this,o=i._processFormat(r),a=new Io(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,crossOrigin:i.options.crossOrigin,headers:i.options.headers,eventListeners:{scope:i,processCompleted:e,processFailed:e,processRunning:function(t){i.summaryMeshJobs[t.id]=t.state}},format:o});a.addSummaryMeshJob(t,n)}getSummaryMeshJobState(t){return this.summaryMeshJobs[t]}getQueryJobs(t,e){var n=this,r=n._processFormat(e),i=new Co(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:r});i.getQueryJobs()}getQueryJob(t,e,n){var r=this,i=r._processFormat(n),o=new Co(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:i});o.getQueryJob(t)}addQueryJob(t,e,n,r){var i=this,o=i._processFormat(r),a=new Co(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,crossOrigin:i.options.crossOrigin,headers:i.options.headers,eventListeners:{scope:i,processCompleted:e,processFailed:e,processRunning:function(t){i.queryJobs[t.id]=t.state}},format:o});a.addQueryJob(t,n)}getQueryJobState(t){return this.queryJobs[t]}getSummaryRegionJobs(t,e){var n=this,r=n._processFormat(e),i=new Lo(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:r});i.getSummaryRegionJobs()}getSummaryRegionJob(t,e,n){var r=this,i=r._processFormat(n),o=new Lo(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:i});o.getSummaryRegionJob(t)}addSummaryRegionJob(t,e,n,r){var i=this,o=i._processFormat(r),a=new Lo(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,crossOrigin:i.options.crossOrigin,headers:i.options.headers,eventListeners:{scope:i,processCompleted:e,processFailed:e,processRunning:function(t){i.summaryRegionJobs[t.id]=t.state}},format:o});a.addSummaryRegionJob(t,n)}getSummaryRegionJobState(t){return this.summaryRegionJobs[t]}getVectorClipJobs(t,e){var n=this,r=n._processFormat(e),i=new ca(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:r});i.getVectorClipJobs()}getVectorClipJob(t,e,n){var r=this,i=r._processFormat(n),o=new ca(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:i});o.getVectorClipJob(t)}addVectorClipJob(t,e,n,r){var i=this,o=i._processFormat(r),a=new ca(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,crossOrigin:i.options.crossOrigin,headers:i.options.headers,eventListeners:{scope:i,processCompleted:e,processFailed:e,processRunning:function(t){i.vectorClipJobs[t.id]=t.state}},format:o});a.addVectorClipJob(t,n)}getVectorClipJobState(t){return this.vectorClipJobs[t]}getOverlayGeoJobs(t,e){var n=this,r=n._processFormat(e),i=new to(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:r});i.getOverlayGeoJobs()}getOverlayGeoJob(t,e,n){var r=this,i=r._processFormat(n),o=new to(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:i});o.getOverlayGeoJob(t)}addOverlayGeoJob(t,e,n,r){var i=this,o=i._processFormat(r),a=new to(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,crossOrigin:i.options.crossOrigin,headers:i.options.headers,eventListeners:{scope:i,processCompleted:e,processFailed:e,processRunning:function(t){i.overlayGeoJobs[t.id]=t.state}},format:o});a.addOverlayGeoJob(t,n)}getoverlayGeoJobState(t){return this.overlayGeoJobs[t]}getBuffersJobs(t,e){var n=this,r=n._processFormat(e),i=new An(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:r});i.getBuffersJobs()}getBuffersJob(t,e,n){var r=this,i=r._processFormat(n),o=new An(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:i});o.getBuffersJob(t)}addBuffersJob(t,e,n,r){var i=this,o=i._processFormat(r),a=new An(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,crossOrigin:i.options.crossOrigin,headers:i.options.headers,eventListeners:{scope:i,processCompleted:e,processFailed:e,processRunning:function(t){i.buffersJobs[t.id]=t.state}},format:o});a.addBuffersJob(t,n)}getBuffersJobState(t){return this.buffersJobs[t]}getTopologyValidatorJobs(t,e){var n=this,r=n._processFormat(e),i=new Ko(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:r});i.getTopologyValidatorJobs()}getTopologyValidatorJob(t,e,n){var r=this,i=r._processFormat(n),o=new Ko(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:i});o.getTopologyValidatorJob(t)}addTopologyValidatorJob(t,e,n,r){var i=this,o=i._processFormat(r),a=new Ko(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,crossOrigin:i.options.crossOrigin,headers:i.options.headers,eventListeners:{scope:i,processCompleted:e,processFailed:e,processRunning:function(t){i.topologyValidatorJobs[t.id]=t.state}},format:o});a.addTopologyValidatorJob(t,n)}getTopologyValidatorJobState(t){return this.topologyValidatorJobs[t]}getSummaryAttributesJobs(t,e){var n=this,r=n._processFormat(e),i=new Oo(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:r});i.getSummaryAttributesJobs()}getSummaryAttributesJob(t,e,n){var r=this,i=r._processFormat(n),o=new Oo(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:i});o.getSummaryAttributesJob(t)}addSummaryAttributesJob(t,e,n,r){var i=this,o=i._processFormat(r),a=new Oo(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,crossOrigin:i.options.crossOrigin,headers:i.options.headers,eventListeners:{scope:i,processCompleted:e,processFailed:e,processRunning:function(t){i.summaryAttributesJobs[t.id]=t.state}},format:o});a.addSummaryAttributesJob(t,n)}getSummaryAttributesJobState(t){return this.summaryAttributesJobs[t]}_processFormat(t){return t||m.GEOJSON}}var cK=mW.extend({initialize:function(t,e){e=e||{},mB.a.setOptions(this,e),mW.prototype.initialize.call(this,t,e),this.kernelDensityJobs={},this.summaryMeshJobs={},this.queryJobs={},this.summaryRegionJobs={},this.vectorClipJobs={},this.overlayGeoJobs={},this.buffersJobs={},this.topologyValidatorJobs={},this.summaryAttributesJobs={},this._processingService=new uK(t,e)},getKernelDensityJobs:function(t,e){this._processingService.getKernelDensityJobs(t,e)},getKernelDensityJob:function(t,e,n){this._processingService.getKernelDensityJob(t,e,n)},addKernelDensityJob:function(t,e,n,r){let i=this._processParams(t);this._processingService.addKernelDensityJob(i,e,n,r)},getKernelDensityJobState:function(t){return this._processingService.getKernelDensityJobState(t)},getSummaryMeshJobs:function(t,e){this._processingService.getSummaryMeshJobs(t,e)},getSummaryMeshJob:function(t,e,n){this._processingService.getSummaryMeshJob(t,e,n)},addSummaryMeshJob:function(t,e,n,r){t=this._processParams(t),this._processingService.addSummaryMeshJob(t,e,n,r)},getSummaryMeshJobState:function(t){return this._processingService.getSummaryMeshJobState(t)},getQueryJobs:function(t,e){this._processingService.getQueryJobs(t,e)},getQueryJob:function(t,e,n){this._processingService.getQueryJob(t,e,n)},addQueryJob:function(t,e,n,r){t=this._processParams(t),this._processingService.addQueryJob(t,e,n,r)},getQueryJobState:function(t){return this._processingService.getQueryJobState(t)},getSummaryRegionJobs:function(t,e){this._processingService.getSummaryRegionJobs(t,e)},getSummaryRegionJob:function(t,e,n){this._processingService.getSummaryRegionJob(t,e,n)},addSummaryRegionJob:function(t,e,n,r){t=this._processParams(t),this._processingService.addSummaryRegionJob(t,e,n,r)},getSummaryRegionJobState:function(t){return this._processingService.getSummaryRegionJobState(t)},getVectorClipJobs:function(t,e){this._processingService.getVectorClipJobs(t,e)},getVectorClipJob:function(t,e,n){this._processingService.getVectorClipJob(t,e,n)},addVectorClipJob:function(t,e,n,r){t=this._processParams(t),this._processingService.addVectorClipJob(t,e,n,r)},getVectorClipJobState:function(t){return this._processingService.getVectorClipJobState(t)},getOverlayGeoJobs:function(t,e){this._processingService.getOverlayGeoJobs(t,e)},getOverlayGeoJob:function(t,e,n){this._processingService.getOverlayGeoJob(t,e,n)},addOverlayGeoJob:function(t,e,n,r){t=this._processParams(t),this._processingService.addOverlayGeoJob(t,e,n,r)},getoverlayGeoJobState:function(t){return this._processingService.getoverlayGeoJobState(t)},getBuffersJobs:function(t,e){this._processingService.getBuffersJobs(t,e)},getBuffersJob:function(t,e,n){this._processingService.getBuffersJob(t,e,n)},addBuffersJob:function(t,e,n,r){t=this._processParams(t),this._processingService.addBuffersJob(t,e,n,r)},getBuffersJobState:function(t){return this._processingService.getBuffersJobState(t)},getTopologyValidatorJobs:function(t,e){this._processingService.getTopologyValidatorJobs(t,e)},getTopologyValidatorJob:function(t,e,n){this._processingService.getTopologyValidatorJob(t,e,n)},addTopologyValidatorJob:function(t,e,n,r){t=this._processParams(t),this._processingService.addTopologyValidatorJob(t,e,n,r)},getTopologyValidatorJobState:function(t){return this._processingService.getTopologyValidatorJobState(t)},getSummaryAttributesJobs:function(t,e){this._processingService.getSummaryAttributesJobs(t,e)},getSummaryAttributesJob:function(t,e,n){this._processingService.getSummaryAttributesJob(t,e,n)},addSummaryAttributesJob:function(t,e,n,r){t=this._processParams(t),this._processingService.addSummaryAttributesJob(t,e,n,r)},getSummaryAttributesJobState:function(t){return this._processingService.getSummaryAttributesJobState(t)},_processParams:function(t){return t?(t.bounds&&(t.bounds=EW.toSuperMapBounds(t.bounds)),t.query&&(t.query=EW.toSuperMapBounds(t.query)),t.geometryQuery&&(t.geometryQuery=EW.toProcessingParam(t.geometryQuery)),t.geometryClip&&(t.geometryClip=EW.toProcessingParam(t.geometryClip)),t):{}}}),hK=function(t,e){return new cK(t,e)},dK=mW.extend({initialize:function(t,e){mW.prototype.initialize.call(this,t,e),this._queryService=new co(t,e)},queryByBounds:function(t,e,n){t=this._processParams(t),this._queryService.queryByBounds(t,e,n)},queryByDistance:function(t,e,n){t=this._processParams(t),this._queryService.queryByDistance(t,e,n)},queryBySQL:function(t,e,n){t=this._processParams(t),this._queryService.queryBySQL(t,e,n)},queryByGeometry:function(t,e,n){t=this._processParams(t),this._queryService.queryByGeometry(t,e,n)},_processParams:function(t){return t?(t.returnContent=null==t.returnContent||t.returnContent,t.queryParams&&!mB.a.Util.isArray(t.queryParams)&&(t.queryParams=[t.queryParams]),t.bounds&&(t.bounds=EW.toSuperMapBounds(t.bounds)),t.geometry&&(t.geometry instanceof mB.a.Point?t.geometry=new ne(t.geometry.x,t.geometry.y):t.geometry=FW(t.geometry)),t):{}}}),fK=function(t,e){return new dK(t,e)};class pK{constructor(t,e){this.url=t,this.options=e||{}}getAreaSolarRadiationResult(t,e,n){var r=this,i=new pn(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:r._processFormat(n)});i.processAsync(t)}bufferAnalysis(t,e,n){var r=this,i=new wn(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:r._processFormat(n)});i.processAsync(t)}densityAnalysis(t,e,n){var r=this,i=new tr(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:r._processFormat(n)});i.processAsync(t)}generateSpatialData(t,e,n){var r=this,i=new Pr(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:r._processFormat(n)});i.processAsync(t)}geoRelationAnalysis(t,e,n){var r=this,i=new Br(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:r._processFormat(n)});i.processAsync(t)}interpolationAnalysis(t,e,n){var r=this,i=new Fi(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:r._processFormat(n)});i.processAsync(t)}mathExpressionAnalysis(t,e,n){var r=this,i=new Xi(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:r._processFormat(n)});i.processAsync(t)}overlayAnalysis(t,e,n){var r=this,i=new Qi(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:r._processFormat(n)});i.processAsync(t)}routeCalculateMeasure(t,e,n){var r=this,i=new fo(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:r._processFormat(n)});i.processAsync(t)}routeLocate(t,e,n){var r=this,i=new go(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:r._processFormat(n)});i.processAsync(t)}surfaceAnalysis(t,e,n){var r=this,i=new Ro(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:r._processFormat(n)});i.processAsync(t)}terrainCurvatureCalculate(t,e,n){var r=this,i=new Fo(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:r._processFormat(n)});i.processAsync(t)}thiessenAnalysis(t,e,n){var r=this,i=new Yo(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:r._processFormat(n)});i.processAsync(t)}geometrybatchAnalysis(t,e,n){for(var r=this,i=new Xo(r.url,{eventListeners:{scope:r,processCompleted:e,processFailed:e},format:r._processFormat(n)}),o=[],a=0;a<t.length;a++){var s=t[a];o.push({analystName:s.analystName,param:s.param})}i.processAsync(o)}_processFormat(t){return t||m.GEOJSON}}var gK=mW.extend({initialize:function(t,e){mW.prototype.initialize.call(this,t,e),this._spatialAnalystService=new pK(t,e)},getAreaSolarRadiationResult:function(t,e,n){this._spatialAnalystService.getAreaSolarRadiationResult(t,e,n)},bufferAnalysis:function(t,e,n){t=this._processParams(t),this._spatialAnalystService.bufferAnalysis(t,e,n)},densityAnalysis:function(t,e,n){t=this._processParams(t),this._spatialAnalystService.densityAnalysis(t,e,n)},generateSpatialData:function(t,e,n){this._spatialAnalystService.generateSpatialData(t,e,n)},geoRelationAnalysis:function(t,e,n){t=this._processParams(t),this._spatialAnalystService.geoRelationAnalysis(t,e,n)},interpolationAnalysis:function(t,e,n){t=this._processParams(t),this._spatialAnalystService.interpolationAnalysis(t,e,n)},mathExpressionAnalysis:function(t,e,n){t=this._processParams(t),this._spatialAnalystService.mathExpressionAnalysis(t,e,n)},overlayAnalysis:function(t,e,n){t=this._processParams(t),this._spatialAnalystService.overlayAnalysis(t,e,n)},routeCalculateMeasure:function(t,e,n){t=this._processParams(t),this._spatialAnalystService.routeCalculateMeasure(t,e,n)},routeLocate:function(t,e,n){t=this._processParams(t),this._spatialAnalystService.routeLocate(t,e,n)},surfaceAnalysis:function(t,e,n){t=this._processParams(t),this._spatialAnalystService.surfaceAnalysis(t,e,n)},terrainCurvatureCalculate:function(t,e,n){this._spatialAnalystService.terrainCurvatureCalculate(t,e,n)},thiessenAnalysis:function(t,e,n){t=this._processParams(t),this._spatialAnalystService.thiessenAnalysis(t,e,n)},geometrybatchAnalysis:function(t,e,n){for(var r=0;r<t.length;r++)t[r].param=this._processParams(t[r].param);this._spatialAnalystService.geometrybatchAnalysis(t,e,n)},_processParams:function(t){if(!t)return{};if(t.bounds&&(t.bounds=EW.toSuperMapBounds(t.bounds)),t.inputPoints)for(let s=0;s<t.inputPoints.length;s++){let e=t.inputPoints[s];mB.a.Util.isArray(e)&&(t.inputPoints[s]={x:e[0],y:e[1],tag:e[2]})}if(t.points)for(let s=0;s<t.points.length;s++){let e=t.points[s];mB.a.Util.isArray(e)?t.points[s]={x:e[0],y:e[1]}:e instanceof mB.a.LatLng?t.points[s]={x:e.lng,y:e.lat}:t.points[s]={x:e.x,y:e.y}}if(t.point&&(mB.a.Util.isArray(t.point)?t.point={x:t.point[0],y:t.point[1]}:t.point instanceof mB.a.LatLng?t.point={x:t.point.lng,y:t.point.lat}:t.point={x:t.point.x,y:t.point.y}),t.extractRegion&&(t.extractRegion=FW(t.extractRegion)),t.extractParameter&&t.extractParameter.clipRegion&&(t.extractParameter.clipRegion=FW(t.extractParameter.clipRegion)),t.clipParam&&t.clipParam.clipRegion&&(t.clipParam.clipRegion=FW(t.clipParam.clipRegion)),t.sourceGeometry){var e=null;t.sourceGeometrySRID&&(e=t.sourceGeometrySRID),t.sourceGeometry=FW(t.sourceGeometry),e&&(t.sourceGeometry.SRID=e),delete t.sourceGeometry.sourceGeometrySRID}if(t.operateGeometry&&(t.operateGeometry=FW(t.operateGeometry)),t.sourceGeometries){for(var n=[],r=0;r<t.sourceGeometries.length;r++)n.push(FW(t.sourceGeometries[r]));t.sourceGeometries=n}if(t.operateGeometries){for(var i=[],o=0;o<t.operateGeometries.length;o++)i.push(FW(t.operateGeometries[o]));t.operateGeometries=i}if(t.sourceRoute&&t.sourceRoute instanceof mB.a.Polyline){var a={type:"LINEM"};a.parts=[t.sourceRoute.getLatLngs().length],a.points=[];for(let e=0;e<t.sourceRoute.getLatLngs().length;e++){let n=t.sourceRoute.getLatLngs()[e];a.points=a.points.concat({x:n.lng,y:n.lat,measure:n.alt})}t.sourceRoute=a}return t.operateRegions&&mB.a.Util.isArray(t.operateRegions)&&t.operateRegions.map((function(e,n){return t.operateRegions[n]=FW(e),t.operateRegions[n]})),t},_processFormat:function(t){return t||m.GEOJSON}}),mK=function(t,e){return new gK(t,e)},yK=mW.extend({initialize:function(t,e){mW.prototype.initialize.call(this,t,e),this._themeService=new Wo(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers})},getThemeInfo:function(t,e){this._themeService.processAsync(t,e)}}),vK=function(t,e){return new yK(t,e)};class bK{constructor(t,e){this.url=t,this.options=e||{}}queryStop(t,e){var n=this,r=new To(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:e,processFailed:e}});r.processAsync(t)}analysisTransferPath(t,e){var n=this,r=new ta(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:e,processFailed:e}});r.processAsync(t)}analysisTransferSolution(t,e){var n=this,r=new na(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:e,processFailed:e}});r.processAsync(t)}}var _K=mW.extend({initialize:function(t,e){mW.prototype.initialize.call(this,t,e),this._commonTrafficTransferAnalystService=new bK(t,e)},queryStop:function(t,e){this._commonTrafficTransferAnalystService.queryStop(t,e)},analysisTransferPath:function(t,e){t=this._processParams(t),this._commonTrafficTransferAnalystService.analysisTransferPath(t,e)},analysisTransferSolution:function(t,e){t=this._processParams(t),this._commonTrafficTransferAnalystService.analysisTransferSolution(t,e)},_processParams:function(t){return t?(t.points&&mB.a.Util.isArray(t.points)&&t.points.map((function(e,n){return t.points[n]=e instanceof mB.a.LatLng?{x:e.lng,y:e.lat}:e,t.points[n]})),t):{}}}),xK=function(t,e){return new _K(t,e)},wK=mW.extend({initialize:function(t,e){mW.prototype.initialize.call(this,t,e),this._webPrintingService=new Ca(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers})},createWebPrintingJob(t,e){t&&this._webPrintingService.createWebPrintingJob(this._processParams(t),e)},getPrintingJob:function(t,e){this._webPrintingService.getPrintingJob(t,e)},getPrintingJobResult:function(t,e){this._webPrintingService.getPrintingJobResult(t,e)},getLayoutTemplates:function(t){this._webPrintingService.getLayoutTemplates(t)},_processParams(t){return t.layoutOptions&&t.layoutOptions.littleMapOptions&&(t.layoutOptions.littleMapOptions.center=this._toPointObject(t.layoutOptions.littleMapOptions.center)),t.exportOptions&&(t.exportOptions.center=this._toPointObject(t.exportOptions.center)),t},_toPointObject(t){return mB.a.Util.isArray(t)?{x:t[0],y:t[1]}:t instanceof ne||t instanceof mB.a.Point?{x:t.x,y:t.y}:t instanceof mB.a.LatLng?{x:t.lng,y:t.lat}:t}}),SK=function(t,e){return new wK(t,e)},EK=mW.extend({initialize:function(t,e){mW.prototype.initialize.call(this,t,e),this._imageService=new Ta(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers})},getCollections:function(t){this._imageService.getCollections(t)},getCollectionByID:function(t,e){this._imageService.getCollectionByID(t,e)},search:function(t,e){this._imageService.search(t,e)}}),CK=function(t,e){return new EK(t,e)},MK=mW.extend({initialize:function(t,e){mW.prototype.initialize.call(this,t,e),this._imageCollectionService=new Ma(this.url,{collectionId:this.options.collectionId,proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers})},getLegend:function(t,e){this._imageCollectionService.getLegend(t,e)},getStatistics:function(t){this._imageCollectionService.getStatistics(t)},getTileInfo:function(t){this._imageCollectionService.getTileInfo(t)},deleteItemByID(t,e){this._imageCollectionService.deleteItemByID(t,e)},getItemByID(t,e){this._imageCollectionService.getItemByID(t,e)}}),TK=function(t,e){return new MK(t,e)},AK=mB.a.Control.extend({options:{position:"topright",style:(t,e)=>e?mB.a.circleMarker(e,{fillColor:"blue",weight:1,opacity:1,color:"blue",fillOpacity:.6}):{fillColor:"blue",weight:1,opacity:1,color:"blue",fillOpacity:.6},onEachFeature:null},initialize(t){mB.a.setOptions(this,t),this._event=new mB.a.Evented,this.rootContainer=null},onAdd(t){return this.map=t,this.rootContainer=this._initView(),this.rootContainer},on(t,e){this._event.on(t,e)},off(t,e){e?this._event.off(t,e):this._event.off(t)},_initView(){},_preventMapEvent(t,e){t&&e&&(t.addEventListener("mouseover",(function(){e.dragging.disable(),e.scrollWheelZoom.disable(),e.doubleClickZoom.disable()})),t.addEventListener("mouseout",(function(){e.dragging.enable(),e.scrollWheelZoom.enable(),e.doubleClickZoom.enable()})))}}),OK=function(t){return new AK(t)},kK=mB.a.Evented.extend({initialize(){this.fileModel=new vl},readFile(t){let e=t.target,n=e.files[0];if(n.size>this.fileModel.FileConfig.fileMaxSize)return this.fire("filesizeexceed",{messageType:"warring",message:Sl.i18n("msg_fileSizeExceeded")}),!1;let r=e.value,i=n.name,o=bE.getFileType(i);if(!o)return this.fire("errorfileformat",{messageType:"failure",message:Sl.i18n("msg_fileTypeUnsupported")}),!1;""!==i&&(this.fileModel.set("loadFileObject",{file:n,filePath:r,fileName:i,fileType:o}),this._readData())},_readData(){const t=this,e=this.fileModel.loadFileObject.fileType;oE.readFile(e,{file:this.fileModel.loadFileObject.file,path:this.fileModel.loadFileObject.filePath},n=>{oE.processDataToGeoJson(e,n,t=>{t&&this.fire("openfilesucceeded",{result:t,layerName:this.fileModel.loadFileObject.fileName.split(".")[0]})},e=>{t.fire("openfilefailed",{messageType:"failure",message:e})},this)},()=>{t.fire("openfilefailed",{messageType:"failure",message:Sl.i18n("msg_openFileFail")})},this)}}),IK=function(t){return new kK(t)},PK=AK.extend({options:{layer:null},initialize(t){AK.prototype.initialize.apply(this,[t]),this.viewModel=new kK},setViewStyle(t,e){this.rootContainer.style[t]=e},_initView(){const t=mB.a.DomUtil.create("div","component-openfile");t.id="openFile",this.fileSelect=mB.a.DomUtil.create("div","",t),this.label=mB.a.DomUtil.create("label","component-openfile__span--select",this.fileSelect),this.label.htmlFor="input_file",mB.a.DomUtil.create("div","supermapol-icons-upload",this.label);const e=mB.a.DomUtil.create("span","component-openfile__span",this.label);return e.appendChild(document.createTextNode(Sl.i18n("text_chooseFile"))),this.fileInput=mB.a.DomUtil.create("input","component-openfile__input",this.fileSelect),this.fileInput.id="input_file",this.fileInput.type="file",this.fileInput.accept=".json,.geojson,.csv,.xls,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel",this.fileInput.onchange=t=>{this.messageBox.closeView(),this.viewModel.readFile(t)},this.messageBox=new bl,this.viewModel.on("filesizeexceed",t=>{this.messageBox.showView(t.message,t.messageType)}),this.viewModel.on("errorfileformat",t=>{this.messageBox.showView(t.message,t.messageType)}),this.viewModel.on("openfilefailed",t=>{this.messageBox.showView(t.message,t.messageType),this._event.fire("openfilefailed",t)}),this.viewModel.on("readdatafail",t=>{this.messageBox.showView(t.message,t.messageType)}),this.viewModel.on("openfilesucceeded",t=>{this._event.fire("openfilesucceeded",t)}),this._preventMapEvent(t,this.map),t}}),LK=function(t){return new PK(t)};const NK={HOT:{HOT:["北京市","上海市","广州市","深圳市","南京市","杭州市","天津市","重庆市","成都市","青岛市","苏州市","无锡市","常州市","温州市","武汉市","长沙市","南昌市","三亚市","合肥市","石家庄市"]},AB:{A:["阿拉善盟","鞍山市","安庆市","安阳市","阿坝藏族羌族自治州","安顺市","阿里地区","安康市","阿克苏地区","阿勒泰地区","阿拉尔市"],B:["北京市","保定市","包头市","巴彦淖尔市","本溪市","白山市","白城市","蚌埠市","亳州市","滨州市","北海市","百色市","白沙黎族自治县","保亭黎族苗族自治县","巴中市","毕节地区","保山市","宝鸡市","白银市","博尔塔拉蒙古自治州","巴音郭楞蒙古自治州","北区"]},CD:{C:["重庆市","成都市","常州市","长沙市","承德市","沧州市","长治市","赤峰市","朝阳市","长春市","滁州市","巢湖市","池州市","常德市","郴州市","潮州市","崇左市","澄迈县","昌江黎族自治县","楚雄彝族自治州","昌都地区","昌吉回族自治州"],D:["大同市","大连市","丹东市","大庆市","大兴安岭地区","东营市","德州市","东莞市","儋州市","东方市","定安县","德阳市","达州市","大理白族自治州","德宏傣族景颇族自治州","迪庆藏族自治州","定西市","东区","大埔区","大堂区"]},EFG:{E:["鄂尔多斯市","鄂州市","恩施土家族苗族自治州"],F:["抚顺市","阜新市","阜阳市","福州市","抚州市","佛山市","防城港市"],G:["广州市","赣州市","桂林市","贵港市","广元市","广安市","贵阳市","固原市","高雄市","高雄县","甘南藏族自治州","甘孜藏族自治州"]},H:{H:["杭州市","合肥市","邯郸市","衡水市","呼和浩特市","呼伦贝尔市","葫芦岛市","哈尔滨市","鹤岗市","黑河市","淮安市","湖州市","淮南市","淮北市","黄山市","菏泽市","鹤壁市","黄石市","黄冈市","衡阳市","怀化市","惠州市","河源市","贺州市","河池市","海口市","红河哈尼族彝族自治州","汉中市","海东地区","海北藏族自治州","黄南藏族自治州","海南藏族自治州","果洛藏族自治州","海西蒙古族藏族自治州","哈密地区","和田地区","花莲县","黄大仙区","花地玛堂区"]},J:{J:["晋城市","晋中市","锦州市","吉林市","鸡西市","佳木斯市","嘉兴市","金华市","景德镇市","九江市","吉安市","济南市","济宁市","焦作市","济源市","荆门市","荆州市","江门市","湛江市","揭阳市","嘉峪关市","金昌市","酒泉市","基隆市","嘉义市","嘉义县","九龙城区","嘉模堂区"]},KL:{K:["开封市","昆明市","克拉玛依市","克孜勒苏柯尔克孜自治州","喀什地区"],L:["廊坊市","临汾市","吕梁市","辽阳市","辽源市","连云港市","丽水市","六安市","龙岩市","莱芜市","临沂市","聊城市","洛阳市","漯河市","娄底市","柳州市","来宾市","临高县","乐东黎族自治县","陵水黎族自治县","泸州市","乐山市","凉山彝族自治州","六盘水市","丽江市","临沧市","拉萨市","林芝地区","兰州市","陇南市","临夏回族自治州"]},MNP:{M:["牡丹江市","马鞍山市","茂名市","梅州市","绵阳市","眉山市","苗栗县"],N:["南京市","南昌市","南通市","宁波市","南平市","宁德市","南阳市","南宁市","南沙群岛","内江市","南充市","怒江傈傈族自治州","那曲地区","南投县"],P:["盘锦市","莆田市","萍乡市","平顶山市","濮阳市","攀枝花市","平凉市","屏东县","澎湖县"]},QR:{Q:["青岛市","秦皇岛市","齐齐哈尔市","黔西南布依族苗族自治州","七台河市","衢州市","泉州市","潜江市","清远市","钦州市","琼海市","曲靖市","庆阳市","荃湾区","黔东南苗族侗族自治州","黔南布依族苗族自治州","琼中黎族苗族自治县"],R:["日照市","日喀则地区"]},S:{S:["上海市","深圳市","苏州市","石家庄市","三亚市","朔州市","沈阳市","四平市","松原市","双鸭山市","绥化市","宿迁市","绍兴市","宿州市","三明市","上饶市","三门峡市","商丘市","十堰市","随州市","邵阳市","韶关市","汕头市","汕尾市","三亚市","遂宁市","思茅市","山南地区","商洛市","石嘴山市","石河子市","深水埗区","沙田区","神农架林区","圣安多尼堂区","圣方济各堂区"]},T:{T:["天津市","唐山市","太原市","通辽市","铁岭市","通化市","泰州市","台州市","铜陵市","泰安市","天门市","屯昌县","铜仁地区","铜川市","天水市","吐鲁番地区","塔城地区","图木舒克市","台北市","台中市","台南市","台北县","桃园县","台中县","台南县","台东县","屯门区"]},W:{W:["无锡市","温州市","武汉市","乌海市","乌兰察布市","芜湖市","潍坊市","威海市","梧州市","五指山市","文昌市","万宁市","文山壮族苗族自治州","渭南市","武威市","吴忠市","乌鲁木齐市","五家渠市","湾仔区","望德堂区"]},X:{X:["邢台市","忻州市","兴安盟","徐州市","宣城市","厦门市","新余市","新乡市","许昌市","信阳市","襄樊市","孝感市","咸宁市","仙桃市","湘潭市","西安市","咸阳市","西宁市","新竹市","新竹县","西贡区","锡林郭勒盟","西沙群岛","湘西土家族苗族自治州","西双版纳傣族自治州"]},Y:{Y:["阳泉市","运城市","营口市","延边朝鲜族自治州","伊春市","盐城市","扬州市","鹰潭市","宜春市","烟台市","宜昌市","岳阳市","益阳市","永州市","阳江市","云浮市","玉林市","宜宾市","雅安市","玉溪市","延安市","榆林市","玉树藏族自治州","银川市","伊犁哈萨克自治州","宜兰县","云林县","油尖旺区","元朗区"]},Z:{Z:["郑州市","张家口市","镇江市","舟山市","漳州市","淄博市","枣庄市","周口市","驻马店市","株洲市","张家界市","珠海市","肇庆市","中山市","自贡市","资阳市","遵义市","昭通市","张掖市","中卫市","彰化县","中西区","中沙群岛的岛礁及其海域"]}};class RK{constructor(t){this.layers=[],t&&t.length>0&&this.addLayers(t),this.currentLayerDataModel=null}addLayers(t,e,n,r){for(let i=0;i<t.length;i++){let o=t[i].layerName;if(t[i].layer instanceof mB.a.GeoJSON){let n=new DK(t[i].layer);this.layers[o]=n,e&&e.call(r,{layerName:o,layer:n})}else n&&n.call(r,"")}}setCurrentLayerDataModel(t){this.layers[t]&&(this.currentLayerDataModel=this.layers[t])}}class DK{constructor(t){if(this.layer=t,this.features=t.getLayers(),this.attributeNames=[],this.features[0].feature.properties)for(let e in this.features[0].feature.properties)this.attributeNames.push(e);this.operatingAttributeNames=[],this.attributes={}}setOperatingAttributeNames(t){this.operatingAttributeNames=t}getAllAttributeNames(){return this.attributeNames}getAttributeNamesByType(t){if(this.features[0].feature.properties){let e=this.features[0].feature.properties,n=[];if("Num"===t)for(let t in e)isNaN(e[t])||n.push(t);else n=this.attributeNames;return n}}getAllFeatures(){return this.features}getAttributeValueByAttributeName(t){if(this.attributes[t])return this.attributes[t];this.attributes[t]=[];for(let e=0;e<this.features.length;e++)this.attributes[t].push([this.features[e].feature.properties[t]]);return this.attributes[t]}getFeaturesByKeyWord(t){let e=[],n=new RegExp(t.toLowerCase());const r=this;return this.features.forEach((function(t){if(!t.feature.properties)return null;let i,o=t.feature.properties;i=r.operatingAttributeNames.length>0?r.operatingAttributeNames:r.attributeNames;for(let r=0,a=i.length;r<a;r++)if(o[i[r]]&&n.test(o[i[r]].toString().toLowerCase())){let n=i[r],a=o[i[r]];t.filterAttribute={filterAttributeName:n,filterAttributeValue:a},e.push(t);break}})),e}}var FK=mB.a.Evented.extend({options:{cityGeoCodingConfig:{addressUrl:"https://www.supermapol.com/iserver/services/localsearch/rest/searchdatas/China/poiinfos",key:"fvV2osxwuZWlY0wJb8FEb2i5"}},initialize(t,e){if(!t)return new Error("Cannot find map, fileModel.map cannot be null.");this.map=t,mB.a.Util.setOptions(this,e),this.dataModel=new RK,this.geoCodeParam={keyWords:"北京市",city:"北京市",pageSize:this.options.pageSize,pageNum:this.options.pageNum},this.searchCache={}},search(t,e){e?this.searchFromLayer(t,e):this.searchFromCityLocalSearchService(t)},searchFromLayer(t,e){if(this.dataModel.layers[e]){let n=this.dataModel.layers[e].getFeaturesByKeyWord(t);n&&n.length>0?this.fire("searchlayersucceeded",{result:n}):this.fire("searchfailed",{searchType:"searchLayersField"})}},searchFromCityLocalSearchService(t){if(this.searchCache[t])this.fire("geocodesucceeded",{result:this.searchCache[t]});else{this.geoCodeParam.keyWords=t||this.geoCodeParam.city;const e=this;let n=this._getSearchUrl(this.geoCodeParam);Be.get(n).then(t=>t.json()).then(t=>{if(t.error||0===t.poiInfos.length)e.fire("searchfailed",{searchType:"searchGeocodeField"});else if(t.poiInfos){const n=e._dataToGeoJson(t.poiInfos,e.geoCodeParam);e.fire("geocodesucceeded",{result:n})}})}},addSearchLayers(t){this.dataModel.addLayers(t,t=>{this.fire("newlayeradded",{layerName:t.layerName})},null,this)},panToLayer(t){this.dataModel.layers[t]&&this.map.flyToBounds(this.dataModel.layers[t].layer.getBounds())},panToCity(t){this.geoCodeParam.keyWords=t,this.geoCodeParam.city=t;const e=this;let n=this._getSearchUrl(this.geoCodeParam);Be.get(n).then(t=>t.json()).then(t=>{if(t.poiInfos.length>0){const n=mB.a.latLng(t.poiInfos[0].location.y,t.poiInfos[0].location.x);e.map.setView(n,8)}else e.fire("searchfailed",{searchType:"cityGeocodeField"})})},_dataToGeoJson(t,e){let n=[];for(let r=0;r<t.length;r++){let i={type:"Feature",geometry:{type:"Point",coordinates:[t[r].location.x,t[r].location.y]},properties:{name:t[r].name||e.keyWords,address:t[r].formatedAddress||t[r].address}};n.push(i)}return n},_getSearchUrl(t){let e=this.options.cityGeoCodingConfig.addressUrl+`.json?keywords=${t.keyWords}&city=${t.city}&pageSize=${t.pageSize}&pageNum=${t.pageNum}&key=${this.options.cityGeoCodingConfig.key}`;return e}}),jK=function(t){return new FK(t)},BK=AK.extend({options:{cityConfig:NK,cityGeoCodingConfig:{addressUrl:"https://www.supermapol.com/iserver/services/localsearch/rest/searchdatas/China/poiinfos",key:"fvV2osxwuZWlY0wJb8FEb2i5"},isGeoCoding:!0,pageSize:10,pageNum:1,perPageDataNum:8},initialize(t){AK.prototype.initialize.apply(this,[t]),this.currentSearchLayerName="",this.isSearchLayer=!1,this.perPageDataNum=this.options.perPageDataNum},onAdd:function(t){return this.viewModel=new FK(t,this.options),AK.prototype.onAdd.apply(this,[t])},addSearchLayer(t){this.viewModel.addSearchLayers(t)},_initView(){const t=this,e=document.createElement("div");e.setAttribute("class","component-search-container");const n=document.createElement("div");n.setAttribute("class","component-search");const r=document.createElement("div");r.setAttribute("class","component-search__settings");const i=document.createElement("div");i.setAttribute("class","component-search__settings__name"),r.appendChild(i);const o=document.createElement("span");o.setAttribute("class","supermapol-icons-solid-down-triangle"),r.appendChild(o);let a=null;if(this.options.isGeoCoding){const t=new mE({config:this.options.cityConfig});a=t.getElement(),t.content.onclick=t=>{"SPAN"===t.target.nodeName&&t.target.innerText&&(this.viewModel.panToCity(t.target.innerHTML),this.messageBox.closeView(),i.removeChild(i.firstChild),i.insertBefore(document.createTextNode(t.target.innerHTML),i.firstChild),this.isSearchLayer=!1)},i.appendChild(document.createTextNode(t.content.getElementsByTagName("span")[0].innerText))}const s=function(){const e=document.createElement("div");e.setAttribute("class","component-search__layers");const n=document.createElement("div");n.setAttribute("class","component-search-layers-content"),e.appendChild(n);const r=document.createElement("div");r.setAttribute("class","component-search__layers__header");const o=document.createElement("div");o.setAttribute("class","load-btn"),r.appendChild(o);const a=document.createElement("span");a.setAttribute("class","supermapol-icons-poi-load"),o.appendChild(a);const s=document.createElement("span");s.appendChild(document.createTextNode(Sl.i18n("text_loadSearchCriteria"))),o.appendChild(s);const l=document.createElement("div");l.setAttribute("class","save-btn"),r.appendChild(l);const u=document.createElement("span");u.setAttribute("class","supermapol-icons-poi-save"),l.appendChild(u);const c=document.createElement("span");c.appendChild(document.createTextNode(Sl.i18n("text_saveSearchCriteria"))),l.appendChild(c);const h=document.createElement("div");return h.setAttribute("class","component-search__layers__body"),h.onclick=e=>{t.clearSearchResult();let n=null;if("component-search__layers__itme__singleselect"===e.target.classList[0])n=e.target;else{if("component-single-default-img"!==e.target.classList[0]&&"single-label"!==e.target.classList[0])return;n=e.target.parentNode}document.getElementsByClassName("component-single-checked-img").length>0&&document.getElementsByClassName("component-single-checked-img")[0].setAttribute("class","component-single-default-img"),n.firstChild.setAttribute("class","component-single-checked-img"),t.currentSearchLayerName=n.lastChild.innerText,t.isSearchLayer=!0,i.removeChild(i.firstChild),i.insertBefore(document.createTextNode(t.currentSearchLayerName),i.firstChild),t.viewModel.panToLayer(t.currentSearchLayerName),t.messageBox.closeView()},n.appendChild(h),e}();let l=[];a&&l.push({title:Sl.i18n("title_searchCity"),content:a}),l.push({title:Sl.i18n("title_searchLayer"),content:s});const u=new yE({tabs:l}),c=u.getElement();u.closeView(),n.appendChild(c),r.onclick=()=>{c.hidden?u.showView():u.closeView()},n.appendChild(r),i.innerText||i.appendChild(document.createTextNode(Sl.i18n("text_label_chooseSearchLayers")));const h=document.createElement("div");h.setAttribute("class","component-search__input");const d=document.createElement("input");d.type="text",d.placeholder=Sl.i18n("text_label_searchTips"),h.appendChild(d),this.poiInput=d;const f=document.createElement("span");f.setAttribute("class","supermapol-icons-close"),f.hidden=!0,h.appendChild(f),n.appendChild(h);const p=document.createElement("div");p.setAttribute("class","component-search-icon supermapol-icons-search");const g=new vE;this._resultDomObj=g,p.onclick=()=>{g.closeView(),this.clearSearchResult(),this.messageBox.closeView(),u.closeView();const t=this.poiInput.value.trim();""!==t?this.isSearchLayer?this.viewModel.search(t,this.currentSearchLayerName):this.viewModel.search(t):this.messageBox.showView(Sl.i18n("msg_searchKeywords"))},d.onkeypress=t=>{if(13==t.which){var e=document.createEvent("HTMLEvents");e.initEvent("click",!1,!0),p.dispatchEvent(e)}},n.appendChild(p);const m=function(){const e=g.getElement();return e.style.position="absolute",e.style.top="44px",e.style.right="0",g.closeView(),g.content.onclick=e=>{let n=null;if("component-search-result-info"===e.target.parentNode.className)n=e.target.parentNode.parentNode;else if("component-search__resultitme"===e.target.parentNode.className)n=e.target.parentNode;else{if("component-search__resultitme"!==e.target.className)return;n=e.target}document.getElementsByClassName("component-search__resultitme-selected").length>0&&document.getElementsByClassName("component-search__resultitme-selected")[0].classList.remove("component-search__resultitme-selected"),n.firstChild.classList.add("component-search__resultitme-selected");let r=n.children[1].firstChild.innerText;t._linkageFeature(r)},e}();return n.appendChild(m),f.onclick=t=>{this.clearSearchResult(),d.value="",t.target.hidden=!0,g.closeView()},d.oninput=()=>{f.hidden=!1},this.messageBox=new bl,this._addViewModelListener(),e.appendChild(n),this._preventMapEvent(e,this.map),e},_createSearchLayerItem(t){const e=document.createElement("div");e.setAttribute("class","component-search__layers__itme");const n=document.createElement("div");n.setAttribute("class","component-search__layers__itme__singleselect");const r=document.createElement("div");r.setAttribute("class","component-single-default-img"),n.appendChild(r);const i=document.createElement("span");i.setAttribute("class","single-label"),i.innerHTML=t,n.appendChild(i),e.appendChild(n),document.getElementsByClassName("component-search__layers__body")[0].appendChild(e)},_createResultItem(t,e){const n=document.createElement("div");n.setAttribute("class","component-search__resultitme");let r=document.createElement("div");"Point"===t||"MultiPoint"===t?r.setAttribute("class","supermapol-icons-marker-layer component-search-result-icon"):"LineString"===t||"MultiLineString "===t?r.setAttribute("class","supermapol-icons-line-layer component-search-result-icon"):"Polygon"===t||"MultiPolygon"===t?r.setAttribute("class","supermapol-icons-polygon-layer component-search-result-icon"):r.setAttribute("class","supermapol-icons-point-layer component-search-result-icon"),n.appendChild(r);const i=document.createElement("div");i.setAttribute("class","component-search-result-info");const o=document.createElement("div");i.appendChild(o);const a=document.createElement("div");e.name?(o.innerHTML=e.name,a.innerHTML=e.address,i.appendChild(a)):o.innerHTML=e.filterAttributeName+": "+e.filterAttributeValue,n.appendChild(i);const s=document.createElement("div");return s.setAttribute("class","component-checkbox component-checkbox-default-img"),n},_addViewModelListener(){this.viewModel.on("searchlayerschanged",t=>{for(let e=0;e<t.length;e++)this._createSearchLayerItem(t[e])}),this.viewModel.on("newlayeradded",t=>{this._createSearchLayerItem(t.layerName)}),this.viewModel.on("searchlayersucceeded",t=>{const e=t.result;this.clearSearchResult(),this.searchResultLayer=mB.a.featureGroup(e,{pointToLayer:this.options.style,style:this.options.style}).bindPopup((function(t){if(t.feature.properties)return new pE({attributes:t.feature.properties}).getElement()})).addTo(this.map),this.searchResultLayer.eachLayer(t=>{this.options.onEachFeature?this.options.onEachFeature(t.toGeoJSON(),t):this._featureOnclickEvent.bind(this)(t.toGeoJSON(),t)}),this.searchLayersData=e,this._prepareResultData(e),this._event.fire("searchlayersucceeded",{result:this.searchResultLayer.toGeoJSON()})}),this.viewModel.on("geocodesucceeded",t=>{const e=t.result;this.clearSearchResult(),this.searchResultLayer=mB.a.geoJSON(e,{pointToLayer:this.options.style,style:this.options.style,onEachFeature:this.options.onEachFeature||this._featureOnclickEvent.bind(this)}).bindPopup((function(t){if(t.feature.properties)return new pE({attributes:t.feature.properties}).getElement()})).addTo(this.map),this.searchLayersData=e,this._prepareResultData(e),this._event.fire("geocodesucceeded",{result:e})}),this.viewModel.on("searchfailed",t=>{let e="";e="searchGeocodeField"===t.searchType?Sl.i18n("msg_searchGeocodeField"):"cityGeocodeField"===t.searchType?Sl.i18n("msg_cityGeocodeField"):Sl.i18n("msg_getFeatureField"),this.messageBox.showView(e),this._event.fire("searchfailed",{message:e})})},_prepareResultData(t){this.currentResult=t;let e=Math.ceil(t.length/this.perPageDataNum);this._resultDomObj.setPageLink(e),this._createResultListByPageNum(1,t),this._resultDomObj.showView(),this._resultDomObj.setLinkageEvent(r);const n=this;function r(t){n._createResultListByPageNum(t,n.currentResult)}},_createResultListByPageNum(t,e){let n,r=0;1===t&&e.length<this.perPageDataNum?n=e.length-1:t*this.perPageDataNum>e.length?(r=this.perPageDataNum*(t-1),n=e.length-1):(r=this.perPageDataNum*(t-1),n=t*this.perPageDataNum-1);const i=document.createElement("div");for(let a=r;a<=n;a++){let t,n="Point";e[a].filterAttribute?(n=e[a].feature.geometry.type,t=e[a].filterAttribute):t=e[a].properties,i.appendChild(this._createResultItem(n,t))}this._resultDomObj.setContent(i),this._resultDomObj.showView(),i.firstChild.getElementsByClassName("component-search-result-icon")[0].classList.add("component-search__resultitme-selected");const o=i.firstChild.getElementsByClassName("component-search-result-info")[0].firstChild.innerText;!this._selectMarkerFeature&&this._linkageFeature(o)},_flyToBounds(t){const e=t.getSouthWest(),n=t.getNorthEast();e.lat===n.lat&&e.lng===n.lng?this.map.flyTo(e):this.map.fitBounds(t)},_linkageFeature(t){let e="";e=this.isSearchLayer?t.split(":")[1].trim():t,this._selectFeature&&this._selectFeature.addTo(this.map),this.searchResultLayer.eachLayer(t=>{(!e||t.filterAttribute&&t.filterAttribute.filterAttributeValue===e||t.feature.properties&&t.feature.properties.name===e)&&(t.remove(),this._setSelectedLayerStyle(t))})},clearSearchResult(){this.searchResultLayer&&(this.map.closePopup(),!this.isSearchLayer&&this.map.removeLayer(this.searchResultLayer),this._selectMarkerFeature&&this.map.removeLayer(this._selectMarkerFeature),this._selectFeaturethis&&this.map.removeLayer(this._selectFeature),this._selectMarkerFeature=null,this._selectFeature=null,this.searchResultLayer=null,this.currentResult=null)},_featureOnclickEvent(t,e){e.on("click",()=>{let n,r,i=document.getElementsByClassName("component-pagination__link")[0];this._resultDomObj._changePageEvent({target:i.children[0].children[0]}),this._selectFeature&&this._selectFeature.addTo(this.map),e.remove();for(let s=0;s<this.searchLayersData.length;s++){let i=this.searchLayersData[s];if(i.properties&&i.properties.name===t.properties.name||i.filterAttribute&&i.filterAttribute.filterAttributeName+": "+i.filterAttribute.filterAttributeValue===e.filterAttribute.filterAttributeName+": "+e.filterAttribute.filterAttributeValue){r=s%this.perPageDataNum,n=parseInt(s/this.perPageDataNum)+1;break}}if(n>1)for(let t=1;t<n;t++){let t;t=document.getElementsByClassName("component-pagination__link")[0],this._resultDomObj._changePageEvent({target:t.children[t.children.length-2].children[0]})}let o=document.getElementsByClassName("component-search-result-info"),a=o[r].children[0];if(a.innerHTML===t.properties.name||a.innerHTML===e.filterAttribute.filterAttributeName+": "+e.filterAttribute.filterAttributeValue){let t=o[r].parentNode;document.getElementsByClassName("component-search__resultitme-selected").length>0&&document.getElementsByClassName("component-search__resultitme-selected")[0].classList.remove("component-search__resultitme-selected"),t.firstChild.classList.add("component-search__resultitme-selected"),this._setSelectedLayerStyle(e)}},this)},_setSelectedLayerStyle(t){let e;this._selectMarkerFeature&&this._selectMarkerFeature.remove(),this._selectMarkerFeature=null,this._selectFeature=t,this._selectMarkerFeature=mB.a.geoJSON(t.toGeoJSON(),{pointToLayer:(t,e)=>mB.a.marker(e,{icon:mB.a.divIcon({className:"component-select-marker-icon",iconAnchor:[15,0]})}),style:{fillColor:"red",weight:1,opacity:1,color:"red",fillOpacity:.2}}).addTo(this.map),this._selectMarkerFeature.bindPopup((function(){return new pE({attributes:t.feature.properties}).getElement()}),{closeOnClick:!1}).openPopup().addTo(this.map),this._flyToBounds(this.searchResultLayer.getBounds()),t.getLatLng?e=t.getLatLng():t.getCenter&&(e=t.getCenter()),this.map.setView(e)}}),zK=function(t){return new BK(t)},UK=mB.a.Evented.extend({options:{_defaultLayerOptions:{style:null,onEachFeature:function(t,e){let n="属性信息如下：<br>";for(let r in t.properties)n+=r+": "+t.properties[r]+"<br>";e.bindPopup(n)}}},initialize(t,e=null){if(!t)return new Error("Cannot find map, fileModel.map cannot be null.");this.map=t,mB.a.Util.extend(this.options._defaultLayerOptions,e),this.options._defaultLayerOptions.pointToLayer=this.options._defaultLayerOptions.style,this.popupsStatus=!0,this.dataFlowStatus=!1,this.dataFlowUrl="",this.currentFeatures=[],this.dataFlowLayer=null},subscribe(t){if(this.dataFlowUrl===t){if(this.dataFlowStatus)return void this.fire("dataflowservicesubscribed")}else this.dataFlowUrl=t;this.dataFlowStatus=!0,this.dataFlowLayer&&(this.dataFlowLayer.remove(),this.dataFlowLayer=null);const e=new QY(t,this.options._defaultLayerOptions);e.on("subscribesucceeded",t=>{this.fire("subscribesucceeded",{result:t})}),e.on("subscribefailed",t=>{this.fire("subscribefailed",{result:t})}),e.on("dataupdated",t=>{this.fire("dataupdated",{result:t});let e=t.layer.getBounds(),n=EW.toSuperMapBounds(this.map.getBounds()),r=EW.toSuperMapBounds(e);n.intersectsBounds(r)||(r.left===r.right&&r.top===r.bottom?this.map.setView(e.getCenter()):this.map.flyToBounds(e)),this.popupsStatus&&this.openPopups()}),e.addTo(this.map),this.dataFlowLayer=e},cancelSubscribe(){this.dataFlowLayer&&(this.dataFlowStatus=!1,this.dataFlowLayer.dataService.unSubscribe(),this.dataFlowLayer.remove(),this.dataFlowLayer=null)},openPopups(){if(this.popupsStatus=!0,this.dataFlowLayer){const t=this.dataFlowLayer.getLayers();for(let e=0;e<t.length;e++)for(let n=0;n<t[e].getLayers().length;n++)t[e].getLayers()[n].openPopup()}},closePopups(){if(this.popupsStatus=!1,this.dataFlowLayer){const t=this.dataFlowLayer.getLayers();for(let e=0;e<t.length;e++)for(let n=0;n<t[e].getLayers().length;n++)t[e].getLayers()[n].closePopup()}}}),GK=function(t){return new UK(t)},qK=AK.extend({initialize(t){AK.prototype.initialize.apply(this,[t])},onAdd(t){let e={};return this.options.style&&(e.style=this.options.style),this.options.onEachFeature&&(e.style=this.options.onEachFeature),this.viewModel=new UK(t,e),AK.prototype.onAdd.apply(this,[t])},_initView(){const t=new cE({title:Sl.i18n("title_dataFlowService")}),e=t.getElement(),n=t.getContentElement();n.style.padding="10px 18px";const r=document.createElement("div");r.setAttribute("class","component-dataflow__container");const i=document.createElement("div");i.setAttribute("class","component-input-default");const o=document.createElement("input");o.setAttribute("class","component-input-default"),o.type="text",o.placeholder=Sl.i18n("text_input_value_inputDataFlowUrl"),o.title=Sl.i18n("text_input_value_inputDataFlowUrl"),i.appendChild(o);const a=document.createElement("span");a.setAttribute("class","supermapol-icons-close"),a.hidden=!0,a.onclick=t=>{o.value="",t.target.hidden=!0},o.oninput=()=>{a.hidden=!1},i.appendChild(a),r.appendChild(i),n.appendChild(r);const s=document.createElement("div");s.setAttribute("class","component-dataflow__container");const l=document.createElement("div");l.setAttribute("class","component-checkbox-container");const u=document.createElement("div");u.setAttribute("class","component-checkbox-default component-checkbox-selected-img"),u.checked=!0,l.appendChild(u);const c=document.createElement("div");c.setAttribute("class","component-label component-label-selected"),c.innerHTML=Sl.i18n("text_displayFeaturesInfo"),l.appendChild(c),u.onclick=t=>{t.target.checked=!t.target.checked,t.target.checked?(c.setAttribute("class","component-label component-label-selected"),t.target.setAttribute("class","component-checkbox-default component-checkbox-selected-img"),this.viewModel.openPopups()):(c.setAttribute("class","component-label"),t.target.setAttribute("class","component-checkbox-default component-checkbox-default-img"),this.viewModel.closePopups())},s.appendChild(l),n.appendChild(s);const h=document.createElement("div");h.setAttribute("class","component-dataflow__container component-init-center");const d=document.createElement("button");d.setAttribute("class","component-button-default"),d.innerHTML=Sl.i18n("text_subscribe"),d.onclick=()=>{const t=o.value;""!==t?this.viewModel.subscribe(t):this.messageBox.showView(Sl.i18n("msg_inputDataFlowUrlFirst"))},h.appendChild(d);const f=document.createElement("button");return f.setAttribute("class","component-button-default"),f.innerHTML=Sl.i18n("text_cancelSubscribe"),f.onclick=()=>{this.viewModel.cancelSubscribe()},h.appendChild(f),n.appendChild(h),this.messageBox=new bl,this.viewModel.on("dataflowservicesubscribed",()=>{this.messageBox.showView(Sl.i18n("msg_dataflowservicesubscribed"))}),this.viewModel.on("subscribesucceeded",()=>{this.messageBox.showView(Sl.i18n("msg_subscribesucceeded"))}),this.viewModel.on("dataupdated",t=>{this.messageBox.closeView(),this._event.fire("dataupdated",t)}),this._preventMapEvent(e,this.map),e}}),VK=function(t){return new qK(t)};class HK{constructor(t,e){this.layerName=t,this.layer=e}}var WK=function(t,e){return new HK(t,e)};class YK extends mB.a.Evented{initialize(t){this.workerUrl=t,this.turfLayers=[]}getLayersData(t){let e={},n={},r={},i={};for(let s=0;s<t;s++)t[s]=new HK(t[s].layerName,t[s].layer);this.geoJsonLayersDataModel=new RK(t);let o=[];for(let s=0;s<t.length;s++)o[t[s].layerName]={fields:t[s].fields,layer:t[s].layer.toGeoJSON()};for(let s in this.geoJsonLayersDataModel.layers){let t;t=o[s].fields?o[s].fields:this.geoJsonLayersDataModel.layers[s].getAttributeNamesByType("Num");let e=[];for(let n=0;n<t.length;n++){e[t[n]]=this.geoJsonLayersDataModel.layers[s].getAttributeValueByAttributeName(t[n]);let r=e[t[n]];for(var a=0;a<r.length;a++)""!=r[a]&&"undefined"!=typeof r[a]||(r.splice(a,1),a-=1),r[a]=parseFloat(r[a]);e[t[n]]=Array.from(new Set(r.sort((function(t,e){return t-e}))))}let l={layerName:s,fields:t,fieldsValue:e,features:o[s].layer},u=o[s].layer.features[0].geometry.type;"Point"===u?n[s]=l:"LineString"===u?r[s]=l:"Polygon"===u&&(i[s]=l)}return e["point"]=n,e["lineString"]=r,e["polygon"]=i,e}analysis(t,e){this.geoJsonLayersDataModel.setCurrentLayerDataModel(t.analysisLayers),this.worker=new Worker(this.workerUrl);let n=this.geoJsonLayersDataModel.currentLayerDataModel.layer.toGeoJSON();if("isolines"===t.analysisMethod){let r=t.analysisFieldsValue.split(","),i=n;for(let t=0;t<r.length;t++)r[t]=parseFloat(r[t]);let o=this,a={pointGrid:i,analysisMethod:t.analysisMethod,breaks:r,zProperty:t.analysisFields,analysisCellSize:t.analysisCellSize,options:{gridType:"point",property:t.analysisFields,weight:Number(t.analysisBreaks)}};this.worker.postMessage(a),this.worker.onmessage=n=>{if(0===n.data.features.length)o.fire("analysisfailed");else{o.fire("analysissucceeded",{data:n.data});let r=mB.a.geoJSON(n.data,{style:{color:"#1060C2",weight:3},onEachFeature:function(t,e){t.properties&&e.bindPopup(new pE(t.properties).getElement()),e.on({mouseover:function(){e.setStyle({color:"#ffffff",weight:5})},mouseout:function(){e.setStyle({color:"#1060C2",weight:3})},click:function(){e.setStyle({color:"#ffffff",weight:5})}})}}).addTo(e);o.turfLayers.push(r),o.fire("layerloaded",{layer:r,name:t.resultLayersName}),o.worker.terminate()}}}else if("buffer"===t.analysisMethod){let r=this,i={analysisMethod:"buffer",radius:t.radius,unit:t.unit,isSave:t.isSaveStatus,isUnion:t.isUnion,geoJson:n};this.worker.postMessage(i),this.worker.onmessage=n=>{let i=mB.a.geoJSON(n.data,{style:{color:"#ffffff",fillColor:"#1060C2",fillOpacity:.5,weight:1.5},onEachFeature:function(t,e){t.properties&&e.bindPopup(new pE(t.properties).getElement()),e.on({mouseover:function(){e.setStyle({color:"#ffffff",fillColor:"rgb(46,40,79)",fillOpacity:.5,weight:5})},mouseout:function(){e.setStyle({color:"#ffffff",fillColor:"#1060C2",fillOpacity:.5,weight:1.5})},click:function(){e.setStyle({color:"#ffffff",fillColor:"rgb(46,40,79)",fillOpacity:.5,weight:2})}})}}).addTo(e);r.turfLayers.push(i),r.fire("layerloaded",{layer:i,name:t.resultLayersName}),r.worker.terminate()}}}clearLayers(){for(let t in this.turfLayers)this.turfLayers[t].clearLayers();this.fire("layersremoved",{layers:this.turfLayers})}cancelAnalysis(){this.worker.terminate()}}var XK=function(t){return new YK(t)},JK=AK.extend({initialize:function(t,e){if(!t)throw new Error("workerUrl is required");this.workerUrl=t,AK.prototype.initialize.apply(this,[e])},onAdd:function(t){return this.map=t,AK.prototype.onAdd.apply(this,[t])},addLayer:function(t){this.layers=this.layers||[],this.layers.push(t);let e=this.viewModel.getLayersData(this.layers);this.fillDataToView(e)},fillDataToView:function(t){if(!t)return;this.fillData=t;let e=document.getElementById("dropDownTop").getAttribute("data-value"),n={};switch(e){case"isolines":n=t["point"];break;case"buffer":n=t["point"];break}if("{}"==JSON.stringify(n))return;let r=[];for(let g in n)r.push(g);let i=document.getElementById("layersSelect"),o=document.getElementById("layerSelectName");i.innerHTML="",o.title=r[0],o.innerHTML=r[0],this._createOptions(i,r),this.layerSelectObj.optionClickEvent(i,o,this.layersSelectOnchange);let a=n[o.title],s=a.fields,l=a.fieldsValue;this.currentData=a,this.currentFillData=n;let u=document.getElementById("fieldsSelect");u.innerHTML="";let c=document.getElementById("fieldsSelectName");c.innerHTML=s[0],c.title=s[0],this._createOptions(u,s),this.fieldsSelectObj.optionClickEvent(u,c,this.fieldsSelectOnchange);let h=c.title,d=document.getElementById("getValueTextArea");d.value=l[h].toString().replace(/,/g,",\r\n"),d.setAttribute("data-value",l[h]);let f=document.getElementById("resultLayersName"),p=document.getElementById("dropDownTop").getAttribute("data-value");switch(p){case"isolines":f.value=Sl.i18n("text_label_isolines")+o.title;break;case"buffer":f.value=Sl.i18n("text_label_buffer")+o.title;break}},_initView:function(){this.workerUrl&&(this.viewModel=new YK(this.workerUrl));let t=new cE({title:Sl.i18n("title_clientComputing")}).getElement();t.classList.add("component-analysis"),t.children[0].style.fontSize="12px";let e=[{title:Sl.i18n("text_isoline"),dataValue:"isolines",remark:Sl.i18n("text_extractDiscreteValue"),icon:{className:"component-analyst-isoline-img"}},{title:Sl.i18n("text_buffer"),dataValue:"buffer",remark:Sl.i18n("text_specifyTheDistance"),icon:{className:"component-analyst-buffer-img"}}],n=t.children[1];n.classList.add("component-content--scroll"),n.classList.add("component-content--analysis");let r=new dE(e).getElement();n.appendChild(r);let i=r.children[0].children[0],o=r.children[0].children[2].children[0];i.children[0].id="dropDownTop";let a=mB.a.DomUtil.create("div","component-analysis__container",n),s=mB.a.DomUtil.create("div","component-analysis__container__analysisLayer",a),l=mB.a.DomUtil.create("div","component-analysis__selecttool",s);l.id="layerSelectControl";let u={optionsArr:[""],labelName:Sl.i18n("text_label_analysisLayer")},c=new hE(u),h=c.getElement();this.layerSelectObj=c,l.appendChild(h);let d=h.children[1].children[0];d.id="layerSelectName";let f=h.children[1].children[2].children[0].children[0];f.id="layersSelect";let p=mB.a.DomUtil.create("div","component-analysis__container__analysistype",a),g=mB.a.DomUtil.create("div","component-clientcomputation__isoline",p),m={optionsArr:[""],labelName:Sl.i18n("text_label_extractField"),optionsClickCb:this.fieldsSelectOnchange},y=mB.a.DomUtil.create("div","component-analysis__selecttool",g),v=new hE(m),b=v.getElement();this.fieldsSelectObj=v;let _=b.children[1].children[0];_.id="fieldsSelectName";let x=b.children[1].children[2].children[0].children[0];x.id="fieldsSelect",y.appendChild(b);let w=mB.a.DomUtil.create("div","component-analysis__container",g),S=mB.a.DomUtil.create("span","component-textarea__name",w);S.innerHTML=Sl.i18n("text_label_extractedValue");let E=mB.a.DomUtil.create("div","component-textarea",w);E.id="getValueText";let C=mB.a.DomUtil.create("div","",E),M=mB.a.DomUtil.create("div","component-scrollarea-content",C);M.setAttribute("tabindex","1");let T=mB.a.DomUtil.create("textarea","component-textarea__content",M);T.id="getValueTextArea",T.setAttribute("rows","20");let A=mB.a.DomUtil.create("div","",g),O=mB.a.DomUtil.create("span","",A);O.innerHTML=Sl.i18n("text_label_distanceAttenuation");let k=mB.a.DomUtil.create("input","",A);k.value="3";let I=mB.a.DomUtil.create("div","",g),P=mB.a.DomUtil.create("span","",I);P.innerHTML=Sl.i18n("text_label_gridSize");let L=mB.a.DomUtil.create("input","",I);L.value="30";let N=mB.a.DomUtil.create("div","component-clientcomputation__buffer hidden",p),R=mB.a.DomUtil.create("div","component-clientcomputation__buffer--radius",N),D=mB.a.DomUtil.create("span","",R);D.innerHTML=Sl.i18n("text_label_bufferRadius");let F=mB.a.DomUtil.create("div","",R),j=mB.a.DomUtil.create("input","buffer-radius-input",F);j.id="bufferRadiusInput",j.value="10",j.setAttribute("placeholder",Sl.i18n("text_label_defaultkilometers"));let B=mB.a.DomUtil.create("div","component-clientcomputation__buffer--unit",F);B.id="bufferUnit";let z={optionsArr:[Sl.i18n("text_option_kilometer")],labelName:Sl.i18n("text_label_unit")},U=new hE(z).getElement(),G=U.children[1].children[0];G.id="bufferUnitSelectName";let q=U.children[1].children[2].children[0].children[0];q.id="bufferUnitSelect",U.children[0].style.display="none",B.appendChild(U);let V=mB.a.DomUtil.create("div","",R),H=mB.a.DomUtil.create("div","component-clientcomputation__buffer--issaveattrs",V);H.id="saveAttrsContainer";let W=mB.a.DomUtil.create("div","checkbox checkbox-fault",H);W.id="saveAttrsCheckbox";let Y=mB.a.DomUtil.create("div","lable",H);Y.id="saveAttrsLabel",Y.innerHTML=Sl.i18n("text_retainOriginal");let X=mB.a.DomUtil.create("div","component-clientcomputation__buffer--isunion",V);X.id="isUnionContainer";let J=mB.a.DomUtil.create("div","checkbox checkbox-fault",X);J.id="isUnionCheckbox";let Z=mB.a.DomUtil.create("div","lable",X);Z.innerHTML=Sl.i18n("text_mergeBuffer"),Z.id="isUnionLabel";let K=mB.a.DomUtil.create("div","component-analysis__container__resultLayersName",a),Q=mB.a.DomUtil.create("span","",K);Q.innerHTML=Sl.i18n("text_label_resultLayerName");let $=mB.a.DomUtil.create("input","",K);$.id="resultLayersName";let tt=mB.a.DomUtil.create("div","component-analysis__container__analysisbtn",a),et=mB.a.DomUtil.create("div","component-analysis__analysisbtn",tt),nt=mB.a.DomUtil.create("button","component-analysis__analysisbtn--analysis",et);nt.innerHTML=Sl.i18n("btn_analyze");let rt=mB.a.DomUtil.create("div","component-analysis__analysisbtn--analysing-container hidden",et),it=mB.a.DomUtil.create("div","component-analysis__analysisbtn--analysising",rt),ot=mB.a.DomUtil.create("div","component-analysis__svg-container",it);ot.id="analyse_background",ot.innerHTML='<svg class="component-analysis__svg-rotate" width="16px" height="16px" version="1.1" xmlns="http://www.w3.org/2000/svg">\n            <path id="ring" fill="#FFF" transform="translate(8,8)" d="M 0 0 v -8 A 8 8 0 1 1 -8.00 0 z"></path>\n            <circle cx="8" cy="8" r="6" fill="#38ADF5"></circle>\n            <rect class="svg-top" x="8" y="0" rx="2" ry="2" width="2" height="2" style="fill: rgb(255, 255, 255); stroke-width: 0;"></rect>\n            <rect class="svg-left" x="0" y="8" rx="2" ry="2" width="2" height="2" style="fill: rgb(255, 255, 255); stroke-width: 0;"></rect>\n        </svg>',mB.a.DomUtil.create("span","",it).innerHTML=Sl.i18n("btn_analyzing");let at=mB.a.DomUtil.create("button","component-analysis__analysisbtn--cancel",rt);at.innerHTML=Sl.i18n("btn_cancelAnalysis");let st=mB.a.DomUtil.create("button","component-analysis__analysisbtn--analysis component-analysis__analysisbtn--deletelayers",et);st.innerHTML=Sl.i18n("btn_emptyTheAnalysisLayer");for(let pt=0;pt<o.children.length;pt++)o.children[pt].onclick=()=>{i.innerHTML=o.children[pt].outerHTML,i.children[0].id="dropDownTop";let t=document.getElementById("layersSelect"),e=document.getElementById("layerSelectName"),r=o.children[pt].getAttribute("data-value"),a={};switch(r){case"buffer":g.classList.add("hidden"),N.classList.remove("hidden"),n.style.height="422px",$.value=Sl.i18n("text_label_buffer")+e.title,a=this.fillData["point"];break;case"isolines":g.classList.remove("hidden"),N.classList.add("hidden"),n.style.height="712px",$.value=Sl.i18n("text_label_isolines")+e.title,a=this.fillData["point"];break}if(this.currentFillData===a)return;if(t.innerHTML="","{}"==JSON.stringify(a))return $.value="",e.title="",void(e.innerHTML="");let s=[];for(let n in a)s.push(n);e.title=s[0],e.innerHTML=s[0],this._createOptions(t,s),this.layerSelectObj.optionClickEvent(t,e,this.layersSelectOnchange),"buffer"===r?$.value=Sl.i18n("text_label_buffer")+s[0]:"isolines"===r&&($.value=Sl.i18n("text_label_isolines")+s[0]),this.currentData=a[e.title],this.currentFillData=a};function lt(t){if(this.currentData){let e=this.currentData,n=t.title;T.value=e.fieldsValue[n].toString().replace(/,/g,",\r\n"),T.setAttribute("data-value",e.fieldsValue[n])}}function ut(t){if(this.currentData){let e=t.title,n=this.currentFillData[e];this.currentData=n,x.innerHTML="",this._createOptions(x,n.fields);let r=document.getElementById("fieldsSelectName"),i=n.fields[0];r.title=i,r.innerHTML=i;let o=i;this.fieldsSelectObj.optionClickEvent(x,r,this.fieldsSelectOnchange),T.value=n.fieldsValue[o].toString().replace(/,/g,",\r\n"),T.setAttribute("data-value",n.fieldsValue[o]);let a=document.getElementById("dropDownTop").getAttribute("data-value");switch(a){case"buffer":$.value=Sl.i18n("text_label_buffer")+e;break;case"isolines":$.value=Sl.i18n("text_label_isolines")+e;break}}}this.fieldsSelectOnchange=lt.bind(this),this.layersSelectOnchange=ut.bind(this);let ct=!0,ht=!1;function dt(){let t=document.getElementById("dropDownTop"),e=t.getAttribute("data-value"),n=document.getElementById("resultLayersName").value,r=d.title,i=_.title,o=T.value.replace(/[\r\n]/g,"").split(",").toString(),a=k.value,s=L.value,l={analysisMethod:e,analysisLayers:r,analysisFields:i,analysisFieldsValue:o,analysisBreaks:a,analysisCellSize:s,resultLayersName:n};return l}function ft(){let t=document.getElementById("dropDownTop"),e=document.getElementById("resultLayersName").value,n=d.title,r=t.getAttribute("data-value"),i=j.value,o=G.title,a={analysisMethod:r,analysisLayers:n,radius:i,unit:o,resultLayersName:e,isSaveStatus:ct,isUnion:ht};return a}return Y.classList.add("selected"),W.classList.add("checkbox-active"),H.onclick=()=>{ct?(W.classList.add("checkbox-fault"),W.classList.remove("checkbox-active"),Y.classList.remove("selected"),ct=!1):(W.classList.add("checkbox-active"),W.classList.remove("checkbox-fault"),Y.classList.add("selected"),ct=!0,ht&&(J.classList.add("checkbox-fault"),J.classList.remove("checkbox-active"),ht=!1))},X.onclick=()=>{ht?(J.classList.add("checkbox-fault"),J.classList.remove("checkbox-active"),Z.classList.remove("selected"),ht=!1):(J.classList.add("checkbox-active"),J.classList.remove("checkbox-fault"),Z.classList.add("selected"),ht=!0,ct&&(W.classList.add("checkbox-fault"),W.classList.remove("checkbox-active"),ct=!1))},this.messageBox=new bl,nt.onclick=()=>{rt.style.display="block",nt.style.display="none";let t,e=document.getElementById("dropDownTop"),n=e.getAttribute("data-value");switch(n){case"isolines":t=dt();break;case"buffer":t=ft();break}this.viewModel.analysis(t,this.map),this.viewModel.on("layerloaded",t=>{rt.style.display="none",nt.style.display="block",this._event.fire("analysissucceeded",{layer:t.layer,name:t.name})}),this.viewModel.on("analysisfailed",()=>{rt.style.display="none",nt.style.display="block",this.messageBox.showView(Sl.i18n("msg_resultIsEmpty"),"failure"),this._event.fire("analysisfailed")})},at.onclick=()=>{rt.style.display="none",nt.style.display="block",this.viewModel.cancelAnalysis()},st.onclick=()=>{this.viewModel.on("layersremoved",t=>{this._event.fire("layersremoved",{layers:t.layers})}),this.viewModel.clearLayers()},this._preventMapEvent(t,this.map),t},_createOptions(t,e){for(let n in e){let r=document.createElement("div"),i=e[n];r.className="component-selecttool__option",r.title=i,r.innerHTML=i,r.setAttribute("data-value",i),t.appendChild(r)}}}),ZK=function(t){return new JK(t)};class KK{constructor(t){this.layerName=t.layerName,this.layer=t.layer,this.fields=t.fields||null}}var QK=function(t){return new KK(t)};class $K extends mB.a.Evented{initialize(t){this.processingUrl=t}getDatasetsName(){let t=this.processingUrl;this.dataset=[],this.dataset["datasetNames"]=[],this.dataset["childUrl"]=[];let e="http://"+t.split("/")[2],n=e+"/iserver/services/datacatalog/rest/datacatalog/sharefile.json",r=e+"/iserver/services/datacatalog/rest/datacatalog/relationship/datasets.json",i=this;Be.get(n).then((function(t){return t.json()})).then((function(t){i.dataset["datasetNames"]=i.dataset["datasetNames"].concat(t.datasetNames),i.dataset["childUrl"]=i.dataset["childUrl"].concat(t.childUriList);let e=i;Be.get(r).then((function(t){return t.json()})).then((function(t){e.dataset["datasetNames"]=e.dataset["datasetNames"].concat(t.datasetNames),e.dataset["childUrl"]=e.dataset["childUrl"].concat(t.childUriList);let n=[];for(let r in e.dataset["datasetNames"])n[e.dataset.datasetNames[r]]=e.dataset.childUrl[r];e.fire("datasetsloaded",{result:{dataset:e.dataset,datasetHash:n}})}))}))}getDatasetInfo(t){let e,n=this;Be.get(t).then((function(t){return t.json()})).then((function(t){let r=t.datasetInfo;"LINE"===r.datasetType||"LINE"===r.type?e="LINE":"POINT"===r.datasetType||"POINT"===r.type||"CSV"===r.type?e="POINT":"REGION"!==r.datasetType&&"REGION"!==r.type||(e="REGION");let i=[],o=r.fieldInfos||r.fieldInfo||null;if(o){for(let t in o)i.push(o[t].name);n.fire("datasetinfoloaded",{result:{type:e,fields:i}})}else{let r=t.childUriList[0].replace("//fields","/fields");Be.get(r).then((function(t){return t.json()})).then((function(t){let r=t.fieldNames,i=[];for(let e in r)i.push(r[e]);n.fire("datasetinfoloaded",{result:{type:e,fields:i}})}))}}))}}class tQ extends mB.a.Evented{initialize(t){this.processingUrl=t}getDatasetsName(){let t=this.processingUrl;this.resultLayers=[],this.datasetNames=[],this.distributedAnalysisModel=new $K(t),this.distributedAnalysisModel.getDatasetsName();let e=this;this.distributedAnalysisModel.on("datasetsloaded",(function(t){e.fire("datasetsloaded",{result:t.result})}))}getDatasetInfo(t){this.distributedAnalysisModel.getDatasetInfo(t);let e=this;this.distributedAnalysisModel.on("datasetinfoloaded",(function(t){let n=t.result.type,r=t.result.fields;e.fire("datasetinfoloaded",{result:{type:n,fields:r}})}))}analysis(t,e){let n=new cK(this.processingUrl);if(t.analysisParam instanceof ji){let r=t.analysisParam,i=this;n.addKernelDensityJob(r,(function(n){n.error?i.fire("analysisfailed",{error:n.error}):n.result.setting.serviceInfo.targetServiceInfos.map((function(n){return"RESTMAP"===n.serviceType&&Be.get(n.serviceAddress+"/maps").then((function(t){return t.json()})).then((function(n){let r=n[0].path;i.fire("analysissucceed",{result:n});let o=eY(r,{noWrap:!0,transparent:!0});i.resultLayers.push(o),o.addTo(e);let a=new Date,s=t.resultLayerName||a.getTime();i.fire("layerloaded",{layer:o,name:s})})),n}))}))}}clearLayers(){for(let t in this.resultLayers)this.resultLayers[t].remove();this.fire("layersremoved",{layers:this.resultLayers}),this.resultLayers=[]}}var eQ=function(t){return new tQ(t)},nQ=AK.extend({initialize:function(t,e){AK.prototype.initialize.apply(this,[e]),this.viewModel=new tQ(t)},onAdd:function(t){return this._fillDataToView(),AK.prototype.onAdd.apply(this,[t])},_fillDataToView:function(){this.viewModel.on("datasetsloaded",t=>{let e=t.result.dataset.datasetNames;this.datasetSelect.innerHTML="",this._createOptions(this.datasetSelect,e),this.datasetSelectObj.optionClickEvent(this.datasetSelect,this.datasetSelectName,this.datasetSelectOnchange),this.dataHash=t.result.datasetHash}),this.viewModel.getDatasetsName()},_initView:function(){let t=new cE({title:Sl.i18n("title_distributedAnalysis")}).getElement();t.classList.add("component-analysis"),t.children[0].style.fontSize="12px";let e=mB.a.DomUtil.create("div","component-content component-content--scroll component-content--analysis",t),n=[{title:Sl.i18n("text_densityAnalysis"),dataValue:"density",remark:Sl.i18n("text_CalculateTheValuePerUnitArea"),icon:{className:"component-analyst-density-img"}}],r=new dE(n).getElement();e.appendChild(r);let i=r.children[0].children[0].children[0],o=mB.a.DomUtil.create("div","component-analysis__container",e),a=mB.a.DomUtil.create("div","analysistype",o),s=mB.a.DomUtil.create("div","component-analysis__container__analysisLayer",a),l=mB.a.DomUtil.create("div","component-analysis__selecttool",s),u={optionsArr:[Sl.i18n("text_option_selectDataset")],labelName:Sl.i18n("text_label_dataset"),optionsClickCb:ct.bind(this)},c=new hE(u),h=c.getElement();this.datasetSelectObj=c,l.appendChild(h);let d=h.children[1].children[0];this.datasetSelectName=d;let f=h.children[1].children[2].children[0].children[0];f.children[0].style.display="none",this.datasetSelect=f;let p=mB.a.DomUtil.create("div","component-analysis__idw",s),g=[{optionsArr:[Sl.i18n("text_option_simplePointDensityAnalysis"),Sl.i18n("text_option_nuclearDensityAnalysis")],labelName:Sl.i18n("text_label_analyticalMethod")},{optionsArr:[Sl.i18n("text_option_quadrilateral"),Sl.i18n("text_option_hexagon")],labelName:Sl.i18n("text_label_meshType")}],m=mB.a.DomUtil.create("div","component-analysis__idw__selecttool",p);for(let dt in g){let t=new hE(g[dt]).getElement();m.appendChild(t)}let y={optionsArr:[Sl.i18n("text_option_notSet")],labelName:Sl.i18n("text_label_weightField")},v=new hE(y),b=v.getElement();m.appendChild(b),this.weightFieldsSelectObj=v;let _=m.children[0].children[1].children[0];_.setAttribute("data-value","0");let x=m.children[0].children[1].children[2].children[0].children[0],w=["0","1"];this._setEleAtribute(w,"data-value",x.children);let S=m.children[1].children[1].children[0];S.setAttribute("data-value","0");let E=m.children[1].children[1].children[2].children[0].children[0],C=["0","1"];this._setEleAtribute(C,"data-value",E.children);let M=m.children[2].children[1].children[0],T=m.children[2].children[1].children[2].children[0].children[0],A=[{spanName:Sl.i18n("text_label_queryRange"),value:""}];for(let dt in A)this._creatInputBox(A[dt],m);let O=m.children[3].children[1];O.setAttribute("placeholder",Sl.i18n("text_label_queryRangeTips")),O.title=Sl.i18n("text_label_queryRangeTips");let k={optionsArr:["Meter","Kilometer","Yard","Foot","Mile"]},I={labelName:Sl.i18n("text_label_gridSizeInMeters"),selectOptions:k},P=this._creatUnitSelectBox(I,m),L=P.children[1].children[0];L.value="1000";let N=P.children[1].children[1].children[0].children[0].children[0],R={optionsArr:["Meter","Kilometer","Yard","Foot","Mile"]},D={labelName:Sl.i18n("text_label_searchRadius"),selectOptions:R},F=this._creatUnitSelectBox(D,m),j=F.children[1].children[0];j.value="300";let B=F.children[1].children[1].children[0].children[0].children[0],z={labelName:Sl.i18n("text_label_areaUnit"),optionsArr:["SquareMile","SquareMeter","Hectare","Acre","SquareFoot","SquareYard"]},U=new hE(z).getElement();m.appendChild(U);let G=U.children[1].children[0],q=mB.a.DomUtil.create("div","range-content",a),V={optionsArr:[Sl.i18n("text_option_notSet"),Sl.i18n("text_option_equidistantSegmentation"),Sl.i18n("text_option_logarithm"),Sl.i18n("text_option_equalCountingSegment"),Sl.i18n("text_option_squareRootSegmentation")],labelName:Sl.i18n("text_label_thematicMapSegmentationMode"),optionsClickCb:$};q.appendChild(new hE(V).getElement());let H=q.children[0].children[1].children[0];H.setAttribute("data-value","NOTSET");let W=q.children[0].children[1].children[2].children[0].children[0],Y=["NOTSET","EQUALINTERVAL","LOGARITHM","QUANTILE","SQUAREROOT"];this._setEleAtribute(Y,"data-value",W.children);let X=this._creatInputBox({spanName:Sl.i18n("text_label_thematicMapSegmentationParameters"),value:"20"},q);X.classList.add("hidden");let J=new hE({optionsArr:[Sl.i18n("text_option_greenOrangePurpleGradient"),Sl.i18n("text_option_greenOrangeRedGradient"),Sl.i18n("text_option_rainbowGradient"),Sl.i18n("text_option_spectralGradient"),Sl.i18n("text_option_terrainGradient")],labelName:Sl.i18n("text_label_thematicMapColorGradientMode")}).getElement();q.appendChild(J),J.classList.add("hidden");let Z=J.children[1].children[2].children[0].children[0],K=J.children[1].children[0];K.setAttribute("data-value","GREENORANGEVIOLET");let Q=["GREENORANGEVIOLET","GREENORANGERED","RAINBOW","SPECTRUM","TERRAIN"];function $(t){"NOTSET"!==t.getAttribute("data-value")?(X.classList.remove("hidden"),J.classList.remove("hidden")):(X.classList.add("hidden"),J.classList.add("hidden"))}this._setEleAtribute(Q,"data-value",Z.children);let tt=mB.a.DomUtil.create("div","",a),et=mB.a.DomUtil.create("span","",tt);et.innerHTML=Sl.i18n("text_label_resultLayerName");let nt=mB.a.DomUtil.create("input","component-distributeanalysis__input",tt),rt=mB.a.DomUtil.create("div","component-analysis__container__analysisbtn",o),it=mB.a.DomUtil.create("div","component-analysis__analysisbtn",rt),ot=mB.a.DomUtil.create("button","component-analysis__analysisbtn--analysis",it);ot.innerHTML=Sl.i18n("btn_analyze");let at=mB.a.DomUtil.create("div","component-analysis__analysisbtn--analysing-container hidden",it),st=mB.a.DomUtil.create("div","component-analysis__analysisbtn--analysising",at);st.style.width="200px";let lt=mB.a.DomUtil.create("div","component-analysis__svg-container",st);lt.innerHTML='<svg class="component-analysis__svg-rotate" width="16px" height="16px" version="1.1" xmlns="http://www.w3.org/2000/svg">\n            <path id="ring" fill="#FFF" transform="translate(8,8)" d="M 0 0 v -8 A 8 8 0 1 1 -8.00 0 z"></path>\n            <circle cx="8" cy="8" r="6" fill="#38ADF5"></circle>\n            <rect class="svg-top" x="8" y="0" rx="2" ry="2" width="2" height="2" style="fill: rgb(255, 255, 255); stroke-width: 0;"></rect>\n            <rect class="svg-left" x="0" y="8" rx="2" ry="2" width="2" height="2" style="fill: rgb(255, 255, 255); stroke-width: 0;"></rect>\n        </svg>',mB.a.DomUtil.create("span","",st).innerHTML=Sl.i18n("btn_analyzing");let ut=mB.a.DomUtil.create("button","component-analysis__analysisbtn--analysis component-analysis__analysisbtn--deletelayers",it);function ct(t){if(this.messageBox.closeView(),this.dataHash){T.innerHTML="";let e=this.dataHash[t.title],n=this;this.viewModel.on("datasetinfoloaded",(function(t){M.title=Sl.i18n("text_option_notSet"),M.innerHTML=Sl.i18n("text_option_notSet"),T.innerHTML="";let e=i.getAttribute("data-value"),r=t.result.type,o=t.result.fields;"density"===e&&("REGION"===r||"LINE"===r?n.messageBox.showView(Sl.i18n("msg_datasetOrMethodUnsupport"),"failure"):(n.messageBox.closeView(),n._createOptions(T,o),n.weightFieldsSelectObj.optionClickEvent(T,M)))})),this.viewModel.getDatasetInfo(e)}}function ht(){let t,e,n=i.getAttribute("data-value"),r=_.getAttribute("data-value"),o=S.getAttribute("data-value"),a=O.value,s=N.title,l=B.title,u=G.title,c=K.getAttribute("data-value"),h=H.getAttribute("data-value"),f=new Date,p=nt.value||f.getTime();t="NOTSET"===h?"":{rangeMode:h,rangeCount:X.value,colorGradientType:c},"density"===n&&(e=new ji({datasetName:d.title,method:r,meshType:o,resolution:L.value,fields:M.title,radius:j.value,meshSizeUnit:s,radiusUnit:l,areaUnit:u,query:a,mappingParameters:new Cn({rangeMode:t.rangeMode,rangeCount:t.rangeCount,colorGradientType:t.colorGradientType})}));let g={analysisParam:e,resultLayerName:p};return g}return ut.id="deleteLayersBtn",ut.innerHTML=Sl.i18n("btn_emptyTheAnalysisLayer"),this.messageBox=new bl,this.datasetSelectOnchange=ct.bind(this),ot.onclick=()=>{this.messageBox.closeView();let t=ht();d.title===Sl.i18n("text_option_selectDataset")?this.messageBox.showView(Sl.i18n("msg_selectDataset"),"failure"):M.title===Sl.i18n("text_option_notSet")?this.messageBox.showView(Sl.i18n("msg_setTheWeightField"),"failure"):(this.messageBox.closeView(),at.style.display="block",ot.style.display="none",this.viewModel.on("layerloaded",t=>{at.style.display="none",ot.style.display="block",this._event.fire("analysissucceeded",{layer:t.layer,name:t.name})}),this.viewModel.on("analysisfailed",t=>{this.messageBox.showView(Sl.i18n("msg_theFieldNotSupportAnalysis"),"failure"),at.style.display="none",ot.style.display="block",this._event.fire("analysisfailed",{error:t.error})}),this.viewModel.analysis(t,this.map))},ut.onclick=()=>{this.viewModel.on("layersremoved",t=>{this._event.fire("layersremoved",{layers:t.layers})}),this.viewModel.clearLayers()},this._preventMapEvent(t,this.map),t},_createOptions(t,e){for(let n in e){let r=document.createElement("div");r.className="component-selecttool__option",r.title=e[n],r.innerHTML=e[n],r.setAttribute("data-value",e[n]),t.appendChild(r)}},_creatInputBox(t,e){let n=mB.a.DomUtil.create("div","",e),r=mB.a.DomUtil.create("span","",n);r.innerHTML=t.spanName;let i=mB.a.DomUtil.create("input","",n);return i.value=t.value,i.className="component-distributeanalysis__input",n},_creatUnitSelectBox(t,e){let n=mB.a.DomUtil.create("div","component-clientcomputation__buffer--radius",e),r=mB.a.DomUtil.create("span","",n);r.innerHTML=t.labelName;let i=mB.a.DomUtil.create("div","",n);mB.a.DomUtil.create("input","buffer-radius-input",i);let o=mB.a.DomUtil.create("div","component-clientcomputation__buffer--unit",i),a=t.selectOptions,s=new hE(a).getElement();return o.appendChild(s),n},_setEleAtribute(t,e,n){for(let r=0;r<n.length;r++)n[r].setAttribute(e,t[r])}}),rQ=function(t){return new nQ(t)};class iQ extends mB.a.Evented{initialize(t){this.dataserviceUrl=t,this.resultLayers=[]}getFeatures(t,e){let n=this.dataserviceUrl,r=this,i=SY(n);t instanceof Jr?i.getFeaturesByIDs(t,(function(t){r._getQureyResult(t,e)})):t instanceof Kr?i.getFeaturesBySQL(t,(function(t){r._getQureyResult(t,e)})):t instanceof Gr?i.getFeaturesByBounds(t,(function(t){r._getQureyResult(t,e)})):t instanceof Hr?i.getFeaturesByBuffer(t,(function(t){r._getQureyResult(t,e)})):t instanceof Yr&&i.getFeaturesByGeometry(t,(function(t){r._getQureyResult(t,e)}))}_getQureyResult(t,e){if(t.error)return void this.fire("getfeaturesfailed",{error:t.error});let n=mB.a.geoJSON(t.result.features,{onEachFeature:function(t,e){e.bindPopup("ID: "+t.properties.SMID)},pointToLayer:function(t,e){return mB.a.circleMarker(e,{radius:6})}}).addTo(e);this.resultLayers.push(n),this.fire("getfeaturessucceeded",{result:t.result.features})}clearLayers(){for(let t in this.resultLayers)this.resultLayers[t].remove();this.resultLayers=[]}}var oQ=function(t){return new oQ(t)},aQ=AK.extend({initialize:function(t,e,n){if(AK.prototype.initialize.apply(this,[n]),this.dataServiceUrl=t,!e||0===e.length)throw new Error("Please configure the dataset of the query！");this.dataSetNames=e instanceof Array?e:e.split(" ")},onAdd:function(t){return AK.prototype.onAdd.apply(this,[t])},onRemove:function(){this.map.off("pm:create")},setDataSetNames(t){this.dataSetNames=t instanceof Array?t:t.split(" ")},setGetFeatureMode(t){this.getFeatureMode=t,this._getFeatureModeOnchange(this.getFeatureMode)},setDataServiceUrl(t){this.dataServiceUrl=t,this.viewModel=new iQ(this.dataServiceUrl)},_getFeatureModeOnchange(t){let e;e=t&&"{}"!=JSON.stringify(t)?t:["ID","SQL","BOUNDS","BUFFER","SPATIAL"];let n=document.getElementById("queryModelControl");n.innerHTML="",this.creatQueryModeSelect(e,n)},_initView:function(){this.viewModel=new iQ(this.dataServiceUrl),this.messageBox=new bl;let t=new cE({title:Sl.i18n("title_dataServiceQuery")}).getElement();t.classList.add("component-servicequery__container"),t.children[0].classList.add("component-servicequery__title");let e=t.children[1];e.classList.add("component-content--scroll"),e.classList.add("data-services");let n,r=mB.a.DomUtil.create("div","component-analysis__container",e),i=mB.a.DomUtil.create("div","component-servicequery__analysistype",r),o=mB.a.DomUtil.create("div","component-analysis__container__analysisLayer",i),a=this.options.getFeatureMode;n=a&&"{}"!=JSON.stringify(a)?a:["ID","SQL","BOUNDS","BUFFER","SPATIAL"];let s=mB.a.DomUtil.create("div","",o);s.id="queryModelContainer";let l=mB.a.DomUtil.create("div","component-analysis__selecttool",s);l.id="queryModelControl",this.creatQueryModeSelect=Z.bind(this),this.queryModeltOnchange=K.bind(this),this.creatQueryModeSelect(n,l);let u=mB.a.DomUtil.create("div","component-analysis__container component-textarea--dataservice__container",o),c=mB.a.DomUtil.create("span","textarea-name",u);c.innerHTML=Sl.i18n("text_label_IDArrayOfFeatures");let h=mB.a.DomUtil.create("div","component-textarea component-textarea--dataservice",u);h.id="getfeaturesIdArr";let d=mB.a.DomUtil.create("div","scrollarea",h),f=mB.a.DomUtil.create("div","component-scrollarea-content",d);f.setAttribute("tabindex","1");let p=mB.a.DomUtil.create("textarea","component-textarea__content",f);p.value="[1,2,3]",p.id="getValueTextArea";let g=mB.a.DomUtil.create("div","component-servicequery__maxfeatures-container hidden",o),m={spanName:Sl.i18n("text_label_maxFeatures"),value:"1000"},y=this._creatInputBox(m,g),v=y.children[1];v.classList.add("max-features-input");let b=mB.a.DomUtil.create("div","component-servicequery__distance-container hidden",o),_={spanName:Sl.i18n("text_label_bufferDistance"),value:"10"},x=this._creatInputBox(_,b),w=x.children[1],S=mB.a.DomUtil.create("div","component-analysis__container component-textarea--dataservice__container hidden",o),E=mB.a.DomUtil.create("span","textarea-name",S),C=mB.a.DomUtil.create("div","",S),M=mB.a.DomUtil.create("div","component-servicequery__rangeicon-container",C);E.innerHTML=Sl.i18n("text_label_queryRange1");let T=mB.a.DomUtil.create("div","component-servicequery__rangeicon supermapol-icons-polygon-layer bounds",M),A=mB.a.DomUtil.create("div","component-servicequery__rangeicon supermapol-icons-line-layer hidden",M),O=mB.a.DomUtil.create("div","component-servicequery__rangeicon supermapol-icons-point-layer hidden",M),k=mB.a.DomUtil.create("div","component-textarea component-textarea--rangequery",C);k.id="getfeaturesIdArr";let I=mB.a.DomUtil.create("div","",k),P=mB.a.DomUtil.create("div","component-scrollarea-content",I);P.setAttribute("tabindex","1");let L=mB.a.DomUtil.create("textarea","component-textarea__content component-textarea--rangequery__content",P);L.value='{"leftBottom":{"x":-5,"y":-5},"rightTop":{"x":5,"y":5}}';let N=mB.a.DomUtil.create("div","component-servicequery__spatialquerymode-container hidden",o),R={optionsArr:["CONTAIN","CROSS","DISJOINT","IDENTITY","INTERSECT","NONE","OVERLAP","TOUCH","WITHIN"],labelName:Sl.i18n("text_label_spatialQueryMode")},D=mB.a.DomUtil.create("div","component-analysis__selecttool",N),F=new hE(R).getElement();F.children[1].classList.add("dataservice-select"),D.appendChild(F);let j=F.children[1].children[0];j.id="spatialQueryModeSelectName";let B=F.children[1].children[2];B.classList.add("component-servicequery__spatialquerymode__selectcontent");let z=mB.a.DomUtil.create("div","component-analysis__container__analysisbtn",o),U=mB.a.DomUtil.create("div","component-analysis__analysisbtn",z),G=mB.a.DomUtil.create("button","component-analysis__analysisbtn--analysis",U);G.innerHTML=Sl.i18n("btn_query");let q=mB.a.DomUtil.create("div","component-analysis__analysisbtn--analysing-container hidden",U),V=mB.a.DomUtil.create("div","component-analysis__analysisbtn--analysising component-servicequery__querybtn--querying",q),H=mB.a.DomUtil.create("div","component-analysis__svg-container",V);H.innerHTML='<svg class="component-analysis__svg-rotate" width="16px" height="16px" version="1.1" xmlns="http://www.w3.org/2000/svg">\n             <path id="ring" fill="#FFF" transform="translate(8,8)" d="M 0 0 v -8 A 8 8 0 1 1 -8.00 0 z"></path>\n             <circle cx="8" cy="8" r="6" fill="#38ADF5"></circle>\n             <rect class="svg-top" x="8" y="0" rx="2" ry="2" width="2" height="2" style="fill: rgb(255, 255, 255); stroke-width: 0;"></rect>\n             <rect class="svg-left" x="0" y="8" rx="2" ry="2" width="2" height="2" style="fill: rgb(255, 255, 255); stroke-width: 0;"></rect>\n         </svg>',mB.a.DomUtil.create("span","",V).innerHTML=Sl.i18n("btn_querying");let W=mB.a.DomUtil.create("button","component-analysis__analysisbtn--analysis component-analysis__analysisbtn--deletelayers",U);W.innerHTML=Sl.i18n("btn_emptyTheRresultLayer"),K(n[0]);let Y,X,J=this;function Z(t,e){let n;if(t instanceof Array&&t.length>1){let r={optionsArr:t,labelName:Sl.i18n("text_label_queryMode"),optionsClickCb:this.queryModeltOnchange},i=new hE(r).getElement();e.appendChild(i),n=i.children[1].children[0],i.children[1].classList.add("dataservice-select");let o=i.children[1];o.classList.add("dataservice-select"),o.classList.add("querymodel-select")}else{let e=mB.a.DomUtil.create("span","",s);e.innerHTML=Sl.i18n("text_label_queryMode"),n=mB.a.DomUtil.create("div","component-servicequery__querymode-selectname",s);let r=mB.a.DomUtil.create("span","",n);r.innerHTML=t instanceof Array?t[0]:t,n.title=r.innerHTML,this.queryModeltOnchange(n)}return n.id="queryModelSelectName",n}function K(t){let e;switch(e=t.title?t.title:t,g.classList.add("hidden"),S.classList.add("hidden"),b.classList.add("hidden"),A.classList.add("hidden"),O.classList.add("hidden"),T.classList.remove("bounds"),N.classList.add("hidden"),c.innerHTML=Sl.i18n("text_label_featureFilter"),p.value="SMID<10","BUFFER"!==e&&"SPATIAL"!==e||(S.classList.remove("hidden"),E.innerHTML=Sl.i18n("text_label_geometricObject"),L.value='{"type":"Feature","properties":{},"geometry":{"type":"Point","coordinates":[84.90234375,40.25390625]}}',A.classList.remove("hidden"),O.classList.remove("hidden")),e){case"ID":c.innerHTML=Sl.i18n("text_label_IDArrayOfFeatures"),p.value="[1,2,3]";break;case"SQL":g.classList.remove("hidden");break;case"BOUNDS":S.classList.remove("hidden"),E.innerHTML=Sl.i18n("text_label_queryRange"),L.value='{"leftBottom":{"x":-5,"y":-5},"rightTop":{"x":5,"y":5}}',T.classList.add("bounds");break;case"BUFFER":b.classList.remove("hidden");break;case"SPATIAL":N.classList.remove("hidden");break}}function Q(){let t,e=J.dataSetNames,n=document.getElementById("queryModelSelectName"),r=n.title,i=p.value;if("ID"===r){let n=p.value,r=n.substring(1,n.length-1).split(",");t=new Jr({IDs:r,datasetNames:e})}else if("SQL"===r){let n=v.value;t=new Kr({queryParameter:{attributeFilter:i},datasetNames:e,maxFeatures:n})}else if("BOUNDS"===r){if(!Y){let t=JSON.parse(L.value);Y=mB.a.bounds([t.leftBottom.x,t.leftBottom.y],[t.rightTop.x,t.rightTop.y])}t=new Gr({attributeFilter:i,datasetNames:e,bounds:Y})}else if("BUFFER"===r){let n=w.value,r=JSON.parse(L.value),o=X||r;t=new Hr({attributeFilter:i,datasetNames:e,bufferDistance:n,geometry:o})}else if("SPATIAL"===r){let n=j.title,r=JSON.parse(L.value),o=X||r;t=new Yr({attributeFilter:i,datasetNames:e,spatialQueryMode:n,geometry:o})}return t}return G.onclick=()=>{this.messageBox.closeView(),q.style.display="block",G.style.display="none";let t=Q();this.viewModel.on("getfeaturessucceeded",t=>{q.style.display="none",G.style.display="block",0===t.result.features.length&&this.messageBox.showView(Sl.i18n("msg_dataReturnedIsEmpty"),"success"),this._event.fire("getfeaturessucceeded",{result:t.result})}),this.viewModel.on("getfeaturesfailed",t=>{q.style.display="none",G.style.display="block",this.messageBox.showView(t.error.errorMsg,"failure"),this._event.fire("getfeaturesfailed",{error:t.error})}),this.viewModel.getFeatures(t,this.map)},T.onclick=t=>{let e=document.getElementById("queryModelSelectName"),n=e.title;X&&X.remove(),"BOUNDS"===n?this.map.pm.enableDraw("Rectangle"):this.map.pm.enableDraw("Poly"),t.stopPropagation(),t.preventDefault()},A.onclick=t=>{X&&X.remove(),this.map.pm.enableDraw("Line"),t.stopPropagation(),t.preventDefault()},O.onclick=t=>{X&&X.remove(),this.map.pm.enableDraw("Marker"),t.stopPropagation(),t.preventDefault()},this.map.on("pm:create",t=>{if("Rectangle"===t.shape){X=t.layer;let e=X.getBounds();Y=mB.a.bounds([e._southWest.lng,e._southWest.lat],[e._northEast.lng,e._northEast.lat]);let n={leftBottom:{x:e._southWest.lng,y:e._southWest.lat},rightTop:{x:e._northEast.lng,y:e._northEast.lat}};L.value=JSON.stringify(n)}"Marker"===t.shape&&(X=t.layer,L.value=JSON.stringify(t.layer.toGeoJSON()),this.map.pm.disableDraw("Marker")),"Line"===t.shape&&(X=t.layer,L.value=JSON.stringify(t.layer.toGeoJSON())),"Polygon"===t.shape&&(X=t.layer,L.value=JSON.stringify(t.layer.toGeoJSON()))}),W.onclick=()=>{this.viewModel.clearLayers()},this._preventMapEvent(t,this.map),t},_creatInputBox(t,e){let n=mB.a.DomUtil.create("div","",e),r=mB.a.DomUtil.create("span","",n);r.innerHTML=t.spanName;let i=mB.a.DomUtil.create("input","",n);return i.value=t.value,n}}),sQ=function(t,e,n){return new aQ(t,e,n)};mB.a.supermap={...g,Components:{...g.Components},...mB.a.supermap},mB.a.supermap.components=mB.a.supermap.components||{},mB.a.supermap.Components=mB.a.supermap.Components||{},mB.a.supermap.control=mB.a.supermap.control||{},mB.a.supermap.Util={},mB.a.Util.toGeoJSON=DW,mB.a.supermap.Util.toGeoJSON=DW,mB.a.Util.toSuperMapGeometry=FW,mB.a.supermap.Util.toSuperMapGeometry=FW,mB.a.Util.resolutionToScale=BW,mB.a.supermap.Util.resolutionToScale=BW,mB.a.Util.scaleToResolution=zW,mB.a.supermap.Util.scaleToResolution=zW,mB.a.Util.getMeterPerMapUnit=jW,mB.a.supermap.Util.getMeterPerMapUnit=jW,mB.a.Util.GetResolutionFromScaleDpi=GW,mB.a.supermap.Util.getResolutionFromScaleDpi=GW,mB.a.supermap.Util.GetResolutionFromScaleDpi=GW,mB.a.Util.NormalizeScale=UW,mB.a.supermap.Util.normalizeScale=UW,mB.a.supermap.Util.NormalizeScale=UW,mB.a.Util.transform=qW,mB.a.supermap.Util.transform=qW,mB.a.Proj=mB.a.Proj||{},mB.a.supermap.Proj=mB.a.supermap.Proj||{},mB.a.Proj.CRS=dW,mB.a.supermap.Proj.crs=dW,mB.a.supermap.Proj.CRS=hW,mB.a.Projection={},mB.a.supermap.Projection=mB.a.supermap.Projection||{},mB.a.Projection.NonProjection=LW,mB.a.supermap.Projection.nonProjection=LW,mB.a.supermap.Projection.NonProjection=PW,mB.a.supermap.CRS=mB.a.supermap.CRS||{},mB.a.CRS.NonEarthCRS=RW,mB.a.supermap.CRS.NonEarthCRS=NW,mB.a.supermap.CRS.nonEarthCRS=RW,mB.a.CRS.BaiduCRS=CW,mB.a.supermap.CRS.BaiduCRS=CW,mB.a.CRS.TianDiTu_WGS84CRS=TW,mB.a.supermap.CRS.TianDiTu_WGS84CRS=TW,mB.a.CRS.TianDiTu_MercatorCRS=IW,mB.a.supermap.CRS.TianDiTu_MercatorCRS=IW,mB.a.CRS.TianDiTu_Mercator=IW,mB.a.supermap.CRS.TianDiTu_Mercator=IW,mB.a.CRS.TianDiTu_WGS84=TW,mB.a.supermap.CRS.TianDiTu_WGS84=TW,mB.a.CRS.Baidu=CW,mB.a.supermap.CRS.Baidu=CW,mB.a.supermap.CommontypesConversion=EW,mB.a.supermap.components.clientComputationLayer=QK,mB.a.supermap.Components.ClientComputationLayer=KK,mB.a.supermap.components.clientComputation=ZK,mB.a.supermap.Components.ClientComputation=JK,mB.a.supermap.components.clientComputationViewModel=XK,mB.a.supermap.Components.ClientComputationViewModel=YK,mB.a.supermap.components.geoJSONLayerWithName=WK,mB.a.supermap.Components.GeoJSONLayerWithName=HK,mB.a.supermap.components.GeoJsonLayersDataModel=RK,mB.a.supermap.Components.GeoJsonLayersDataModel=RK,mB.a.supermap.components.dataFlow=VK,mB.a.supermap.Components.DataFlow=qK,mB.a.supermap.components.dataFlowViewModel=GK,mB.a.supermap.Components.DataFlowViewModel=UK,mB.a.supermap.components.dataServiceQuery=sQ,mB.a.supermap.Components.DataServiceQuery=aQ,mB.a.supermap.components.dataServiceQueryViewModel=oQ,mB.a.supermap.Components.DataServiceQueryViewModel=iQ,mB.a.supermap.components.DistributedAnalysisModel=$K,mB.a.supermap.Components.DistributedAnalysisModel=$K,mB.a.supermap.components.distributedAnalysis=rQ,mB.a.supermap.Components.DistributedAnalysis=nQ,mB.a.supermap.components.distributedAnalysisViewModel=eQ,mB.a.supermap.Components.DistributedAnalysisViewModel=tQ,mB.a.supermap.components.openFile=LK,mB.a.supermap.Components.OpenFile=PK,mB.a.supermap.components.openFileViewModel=IK,mB.a.supermap.Components.OpenFileViewModel=kK,mB.a.supermap.components.search=zK,mB.a.supermap.Components.Search=BK,mB.a.supermap.components.searchViewModel=jK,mB.a.supermap.Components.SearchViewModel=FK,mB.a.supermap.components.componentsViewBase=OK,mB.a.supermap.Components.ComponentsViewBase=AK,mB.a.supermap.control.changeTileVersion=_W,mB.a.supermap.control.ChangeTileVersion=bW,mB.a.supermap.control.logo=wW,mB.a.supermap.control.Logo=xW,mB.a.supermap.baiduTileLayer=HW,mB.a.supermap.BaiduTileLayer=VW,mB.a.supermap.cloudTileLayer=YW,mB.a.supermap.CloudTileLayer=WW,mB.a.supermap.imageMapLayer=JW,mB.a.supermap.ImageMapLayer=XW,mB.a.supermap.imageTileLayer=OY,mB.a.supermap.ImageTileLayer=AY,mB.a.supermap.tiandituTileLayer=$W,mB.a.supermap.TiandituTileLayer=QW,mB.a.supermap.tiledMapLayer=eY,mB.a.supermap.TiledMapLayer=tY,mB.a.supermap.wmtsLayer=KW,mB.a.supermap.WMTSLayer=ZW,mB.a.supermap.webmap=TY,mB.a.supermap.WebMap=MY,mB.a.supermap.initMap=kY,mB.a.supermap.crsFromMapJSON=IY,mB.a.supermap.CartoCSSToLeaflet=lY,mB.a.supermap.DefaultStyle=iY,mB.a.supermap.CartoStyleMap=oY,mB.a.supermap.ServerStyleMap=aY,mB.a.supermap.CompOpMap=sY,mB.a.supermap.circleStyle=cX,mB.a.supermap.CircleStyle=uX,mB.a.supermap.cloverStyle=lX,mB.a.supermap.CloverStyle=sX,mB.a.supermap.graphic=cY,mB.a.supermap.Graphic=uY,mB.a.supermap.imageStyle=dX,mB.a.supermap.ImageStyle=hX,mB.a.supermap.themeFeature=dY,mB.a.supermap.ThemeFeature=hY,mB.a.supermap.dataFlowLayer=$Y,mB.a.supermap.DataFlowLayer=QY,mB.a.supermap.echartsLayer=iX,mB.a.supermap.EchartsLayer=tX,mB.a.supermap.graphicLayer=SX,mB.a.supermap.GraphicLayer=wX,mB.a.supermap.graphThemeLayer=CX,mB.a.supermap.GraphThemeLayer=EX,mB.a.supermap.heatMapFeature=QX,mB.a.supermap.HeatMapFeature=KX,mB.a.supermap.heatMapLayer=tJ,mB.a.supermap.HeatMapLayer=$X,mB.a.supermap.labelThemeLayer=_Y,mB.a.supermap.LabelThemeLayer=bY,mB.a.supermap.mapVLayer=JY,mB.a.supermap.MapVLayer=XY,mB.a.supermap.rangeThemeLayer=vY,mB.a.supermap.RangeThemeLayer=yY,mB.a.supermap.rankSymbolThemeLayer=TX,mB.a.supermap.RankSymbolThemeLayer=MX,mB.a.supermap.tiledVectorLayer=YX,mB.a.supermap.TileVectorLayer=WX,mB.a.supermap.TiledVectorLayer=WX,mB.a.supermap.turfLayer=ZX,mB.a.supermap.TurfLayer=JX,mB.a.supermap.FGBLayer=PZ,mB.a.supermap.FGBLayer=LZ,mB.a.supermap.unicodeMarker=CY,mB.a.supermap.UnicodeMarker=EY,mB.a.supermap.uniqueThemeLayer=mY,mB.a.supermap.UniqueThemeLayer=gY,mB.a.supermap.VectorTileFormat=qX,mB.a.supermap.addressMatchService=FZ,mB.a.supermap.AddressMatchService=DZ,mB.a.supermap.chartService=zZ,mB.a.supermap.ChartService=BZ,mB.a.supermap.dataFlowService=VY,mB.a.supermap.DataFlowService=qY,mB.a.supermap.datasetService=GZ,mB.a.supermap.DatasetService=UZ,mB.a.supermap.datasourceService=VZ,mB.a.supermap.DatasourceService=qZ,mB.a.supermap.featureService=SY,mB.a.supermap.FeatureService=wY,mB.a.supermap.fieldService=YZ,mB.a.supermap.FieldService=WZ,mB.a.supermap.geoprocessingService=KZ,mB.a.supermap.GeoprocessingService=ZZ,mB.a.supermap.gridCellInfosService=JZ,mB.a.supermap.GridCellInfosService=XZ,mB.a.supermap.imageCollectionService=TK,mB.a.supermap.ImageCollectionService=MK,mB.a.supermap.imageService=CK,mB.a.supermap.ImageService=EK,mB.a.supermap.layerInfoService=tK,mB.a.supermap.LayerInfoService=$Z,mB.a.supermap.mapService=vW,mB.a.supermap.MapService=yW,mB.a.supermap.measureService=nK,mB.a.supermap.MeasureService=eK,mB.a.supermap.networkAnalyst3DService=oK,mB.a.supermap.NetworkAnalyst3DService=iK,mB.a.supermap.networkAnalystService=lK,mB.a.supermap.NetworkAnalystService=sK,mB.a.supermap.processingService=hK,mB.a.supermap.ProcessingService=cK,mB.a.supermap.queryService=fK,mB.a.supermap.QueryService=dK,mB.a.supermap.ServiceBase=mW,mB.a.supermap.spatialAnalystService=mK,mB.a.supermap.SpatialAnalystService=gK,mB.a.supermap.themeService=vK,mB.a.supermap.ThemeService=yK,mB.a.supermap.trafficTransferAnalystService=xK,mB.a.supermap.TrafficTransferAnalystService=_K,mB.a.supermap.webPrintingJobService=SK,mB.a.supermap.WebPrintingJobService=wK,mB.a.supermap.KnowledgeGraphService=NZ,mB.a.supermap.GraphMap=RZ,mB.a.supermap.CommonUtil=Wt},d485:function(t,e,n){t.exports=o;var r=n("faa1").EventEmitter,i=n("3fb5");function o(){r.call(this)}i(o,r),o.Readable=n("69cf"),o.Writable=n("4ee5"),o.Duplex=n("3fed"),o.Transform=n("d17b"),o.PassThrough=n("c2ae"),o.Stream=o,o.prototype.pipe=function(t,e){var n=this;function i(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",i),t.on("drain",o),t._isStdio||e&&!1===e.end||(n.on("end",s),n.on("close",l));var a=!1;function s(){a||(a=!0,t.end())}function l(){a||(a=!0,"function"===typeof t.destroy&&t.destroy())}function u(t){if(c(),0===r.listenerCount(this,"error"))throw t}function c(){n.removeListener("data",i),t.removeListener("drain",o),n.removeListener("end",s),n.removeListener("close",l),n.removeListener("error",u),t.removeListener("error",u),n.removeListener("end",c),n.removeListener("close",c),t.removeListener("close",c)}return n.on("error",u),t.on("error",u),n.on("end",c),n.on("close",c),t.on("close",c),t.emit("pipe",n),t}},d497:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["flat_settings","master_timeout","local","pretty","human","error_trace","source","filter_path"],a={flatSettings:"flat_settings",masterTimeout:"master_timeout",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["name"]){const t=new n("Missing required parameter: name");return r(t,l)}if(null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,name:d,...f}=t;f=i(o,a,f,u),null==c&&(c="HEAD");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g="/_template/"+encodeURIComponent(d);const m={method:c,path:g,body:null,querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},d4b7:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["format","local","master_timeout","h","help","s","v","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,...f}=t;f=i(o,a,f,u),null==c&&(c="GET");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g=null!=d?"/_cat/count/"+encodeURIComponent(d):"/_cat/count";const m={method:c,path:g,body:null,querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},d4c65:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=new Map;function i(t,e){r.set(t,e)}function o(t){return r.get(t)}var a=function(t){var e=t.attr(),n=e.x,r=e.y,i=e.width,o=e.height;return{x:n,y:r,width:i,height:o}},s=function(t){var e=t.attr(),n=e.x,r=e.y,i=e.r;return{x:n-i,y:r-i,width:2*i,height:2*i}},l=n("1183");function u(t,e){return t&&e?{minX:Math.min(t.minX,e.minX),minY:Math.min(t.minY,e.minY),maxX:Math.max(t.maxX,e.maxX),maxY:Math.max(t.maxY,e.maxY)}:t||e}function c(t,e){var n=t.get("startArrowShape"),r=t.get("endArrowShape"),i=null,o=null;return n&&(i=n.getCanvasBBox(),e=u(e,i)),r&&(o=r.getCanvasBBox(),e=u(e,o)),e}var h=function(t){for(var e=t.attr(),n=e.points,r=[],i=[],o=0;o<n.length;o++){var a=n[o];r.push(a[0]),i.push(a[1])}var s=l["f"].getBBoxByArray(r,i),u=s.x,h=s.y,d=s.width,f=s.height,p={minX:u,minY:h,maxX:u+d,maxY:h+f};return p=c(t,p),{x:p.minX,y:p.minY,width:p.maxX-p.minX,height:p.maxY-p.minY}},d=function(t){for(var e=t.attr(),n=e.points,r=[],i=[],o=0;o<n.length;o++){var a=n[o];r.push(a[0]),i.push(a[1])}return l["f"].getBBoxByArray(r,i)},f=n("bc88"),p=function(t){var e=t.attr(),n=e.x,r=e.y,i=e.text,o=e.fontSize,a=e.lineHeight,s=e.font;s||(s=Object(f["a"])(e));var l,u=Object(f["c"])(i,s);if(u){var c=e.textAlign,h=e.textBaseline,d=Object(f["b"])(i,o,a),p={x:n,y:r-d};c&&("end"===c||"right"===c?p.x-=u:"center"===c&&(p.x-=u/2)),h&&("top"===h?p.y+=d:"middle"===h&&(p.y+=d/2)),l={x:p.x,y:p.y,width:u,height:d}}else l={x:n,y:r,width:0,height:0};return l},g=n("2ef1"),m=n("8937");function y(t,e){for(var n=[],r=[],i=[],o=0;o<t.length;o++){var a=t[o],s=a.currentPoint,u=a.params,c=a.prePoint,h=void 0;switch(a.command){case"Q":h=l["e"].box(c[0],c[1],u[1],u[2],u[3],u[4]);break;case"C":h=l["b"].box(c[0],c[1],u[1],u[2],u[3],u[4],u[5],u[6]);break;case"A":var d=a.arcParams;h=l["a"].box(d.cx,d.cy,d.rx,d.ry,d.xRotation,d.startAngle,d.endAngle);break;default:n.push(s[0]),r.push(s[1]);break}h&&(a.box=h,n.push(h.x,h.x+h.width),r.push(h.y,h.y+h.height)),e&&("L"===a.command||"M"===a.command)&&a.prePoint&&a.nextPoint&&i.push(a)}n=n.filter((function(t){return!Number.isNaN(t)&&t!==1/0&&t!==-1/0})),r=r.filter((function(t){return!Number.isNaN(t)&&t!==1/0&&t!==-1/0}));var f=Object(m["min"])(n),p=Object(m["min"])(r),g=Object(m["max"])(n),y=Object(m["max"])(r);if(0===i.length)return{x:f,y:p,width:g-f,height:y-p};for(o=0;o<i.length;o++){a=i[o],s=a.currentPoint;var b=void 0;s[0]===f?(b=v(a,e),f-=b.xExtra):s[0]===g&&(b=v(a,e),g+=b.xExtra),s[1]===p?(b=v(a,e),p-=b.yExtra):s[1]===y&&(b=v(a,e),y+=b.yExtra)}return{x:f,y:p,width:g-f,height:y-p}}function v(t,e){var n=t.prePoint,r=t.currentPoint,i=t.nextPoint,o=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),a=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),s=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),l=Math.acos((o+a-s)/(2*Math.sqrt(o)*Math.sqrt(a)));if(!l||0===Math.sin(l)||Object(m["isNumberEqual"])(l,0))return{xExtra:0,yExtra:0};var u=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),c=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));u=u>Math.PI/2?Math.PI-u:u,c=c>Math.PI/2?Math.PI-c:c;var h={xExtra:Math.cos(l/2-u)*(e/2*(1/Math.sin(l/2)))-e/2||0,yExtra:Math.cos(c-l/2)*(e/2*(1/Math.sin(l/2)))-e/2||0};return h}var b=function(t){var e=t.attr(),n=e.path,r=e.stroke,i=r?e.lineWidth:0,o=t.get("segments")||Object(g["d"])(n),a=y(o,i),s=a.x,l=a.y,u=a.width,h=a.height,d={minX:s,minY:l,maxX:s+u,maxY:l+h};return d=c(t,d),{x:d.minX,y:d.minY,width:d.maxX-d.minX,height:d.maxY-d.minY}},_=function(t){var e=t.attr(),n=e.x1,r=e.y1,i=e.x2,o=e.y2,a=Math.min(n,i),s=Math.max(n,i),l=Math.min(r,o),u=Math.max(r,o),h={minX:a,maxX:s,minY:l,maxY:u};return h=c(t,h),{x:h.minX,y:h.minY,width:h.maxX-h.minX,height:h.maxY-h.minY}},x=function(t){var e=t.attr(),n=e.x,r=e.y,i=e.rx,o=e.ry;return{x:n-i,y:r-o,width:2*i,height:2*o}};i("rect",a),i("image",a),i("circle",s),i("marker",s),i("polyline",h),i("polygon",d),i("text",p),i("path",b),i("line",_),i("ellipse",x)},d4f4:function(t,e,n){var r=n("43da"),i="&&",o="||",a="and",s="or",l="!",u="=",c="~",h=l+u,d=l+c,f=">",p=">=",g="<",m="<=",y="*",v=",",b=".",_="(",x=")",w="where",S={pathway:[],groups:{}},E={},C={},M=console.log;function T(t){var e=I(t,w),n=e[0],r=e[1];S.pathway=I(n,v);for(var i=0,o=S.pathway.length;i<o;i++)S.pathway[i]=I(S.pathway[i],b),S.pathway[i][0]==y&&S.pathway[i].shift(),0===S.pathway[i].length&&S.pathway.splice(i,1);var a=-1,s=-1,l=0;while(l<r.length){if(r[l]===_)a=l;else if(r[l]===x&&(s=l,s>a&&-1!==a)){var u="gr_"+(new Date).getTime();S.groups[u]=r.substring(a+1,s),r=r.replace(_+S.groups[u]+x,u),l=-1}l+=1}A(E,r)}function A(t,e){var n=k(e,i),r=k(e,o);if(n!==Number.MAX_VALUE||r!==Number.MAX_VALUE)if(n<r){t.and=t.and||[];var a=I(e,i);t.and.push(a[0]),A(t.and,a[1])}else{t.or=t.or||[];a=I(e,o);t.or.push(a[0]),A(t.or,a[1])}else S.groups[e]?(e=S.groups[e],A(t,e)):(Array.isArray(t)?t.push(e):t.or=[e],O(E.or?E.or:E.and))}function O(t){for(var e in t)if(t.hasOwnProperty(e))if(Array.isArray(t[e]))O(t[e]);else if("string"===typeof t[e])if(P(t[e],h)){var n=I(t[e],h);t[e]={ne:[n[0],n[1]]}}else if(P(t[e],d)){n=I(t[e],d);t[e]={nreq:[n[0],n[1]]}}else if(P(t[e],c)){n=I(t[e],c);t[e]={req:[n[0],n[1]]}}else if(P(t[e],p)){n=I(t[e],p);t[e]={ge:[n[0],n[1]]}}else if(P(t[e],f)){n=I(t[e],f);t[e]={gt:[n[0],n[1]]}}else if(P(t[e],m)){n=I(t[e],m);t[e]={le:[n[0],n[1]]}}else if(P(t[e],g)){n=I(t[e],g);t[e]={lt:[n[0],n[1]]}}else if(P(t[e],u)){n=I(t[e],u);t[e]={eq:[n[0],n[1]]}}}function k(t,e){var n=t.indexOf(e);return-1===n?Number.MAX_VALUE:n}function I(t,e){return t.split(e).map((function(t){return t.trim()}))}function P(t,e){return t.indexOf(e)>-1}function L(t,e){var n=I(e,b),i=t;for(var o in n){if(!i.hasOwnProperty(n[o]))return"";i=i[n[o]]}return i=r.isDate(i)?i.valueOf():r.isDateString(i)?r.parseDateFromString(i):i.toString(),i}function N(t,e){var n=!1;for(var r in t){var i=r===a?R:r===s?N:D;if(n=n||i(t[r],e),C.trace&&M(S.step,"======((( or",t[r],n),n)return n}return n}function R(t,e){var n=!0;for(var r in t){var i=r===a?R:r===s?N:D;if(n=n&&i(t[r],e),C.trace&&M(S.step,"======((( and",t[r],n),!n)return n}return n}function D(t,e){if(S.step+=1,t.or){var n=N(t.or,e);return C.trace&&M(S.step,"OR",t,n),n}if(t.and){n=R(t.and,e);return C.trace&&M(S.step,"AND",t,n),n}if("object"===typeof t)return t.eq?L(e,t.eq[0])===t.eq[1]:t.ne?L(e,t.ne[0])!==t.ne[1]:t.req?P(L(e,t.req[0]),t.req[1]):t.nreq?!P(L(e,t.nreq[0]),t.nreq[1]):t.gt?L(e,t.gt[0])>t.gt[1]:t.ge?L(e,t.ge[0])>=t.ge[1]:t.lt?L(e,t.lt[0])<t.lt[1]:t.le?L(e,t.le[0])<=t.le[1]:D(t,e)}function F(t){var e=[];for(var n in t)D(E,t[n])&&e.push(t[n]);return e}function j(t){return t&&S.pathway.length>0?t.map((function(t){for(var e={},n=0,r=S.pathway.length;n<r;n++){var i=S.pathway[n].join(b);e[i]=L(t,i)}return e})):t}function B(t,e,n){return S={pathway:[],groups:{},step:0},E={},n=n||{trace:!1},C=n,T(e),j(F(t))}"undefined"!=typeof t.exports&&(t.exports=B),"undefined"!=typeof window&&(window.Query=B)},d60a:function(t,e){t.exports=function(t){return t&&"object"===typeof t&&"function"===typeof t.copy&&"function"===typeof t.fill&&"function"===typeof t.readUInt8}},d633:function(t,e){function n(t,e){if(t&&e)return n(t)(e);if("function"!==typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){r[e]=t[e]})),r;function r(){for(var e=new Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];var r=t.apply(this,e),i=e[e.length-1];return"function"===typeof r&&r!==i&&Object.keys(i).forEach((function(t){r[t]=i[t]})),r}}t.exports=n},d63b:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["format","local","master_timeout","h","help","s","v","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,name:d,...f}=t;f=i(o,a,f,u),null==c&&(c="GET");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g=null!=d?"/_cat/templates/"+encodeURIComponent(d):"/_cat/templates";const m={method:c,path:g,body:null,querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},d871:function(t,e,n){var r,i,o;(function(n,a){i=[e,t],r=a,o="function"===typeof r?r.apply(e,i):r,void 0===o||(t.exports=o)})(0,(function(t,e){"use strict";var n={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function r(){return"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random())}function i(t){try{delete window[t]}catch(e){window[t]=void 0}}function o(t){var e=document.getElementById(t);e&&document.getElementsByTagName("head")[0].removeChild(e)}function a(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=t,s=e.timeout||n.timeout,l=e.jsonpCallback||n.jsonpCallback,u=void 0;return new Promise((function(n,c){var h=e.jsonpCallbackFunction||r(),d=l+"_"+h;window[h]=function(t){n({ok:!0,json:function(){return Promise.resolve(t)}}),u&&clearTimeout(u),o(d),i(h)},a+=-1===a.indexOf("?")?"?":"&";var f=document.createElement("script");f.setAttribute("src",""+a+l+"="+h),e.charset&&f.setAttribute("charset",e.charset),f.id=d,document.getElementsByTagName("head")[0].appendChild(f),u=setTimeout((function(){c(new Error("JSONP request to "+t+" timed out")),i(h),o(d),window[h]=function(){i(h)}}),s),f.onerror=function(){c(new Error("JSONP request to "+t+" failed")),i(h),o(d),u&&clearTimeout(u)}}))}e.exports=a}))},d8f3:function(t,e,n){"use strict";const r=t=>null!==t&&("object"===typeof t||"function"===typeof t);t.exports=t=>t instanceof Promise||r(t)&&"function"===typeof t.then&&"function"===typeof t.catch},d917:function(t,e,n){"use strict";const r=n("f654"),{inspect:i}=n("3022"),o=n("9490"),a=n("24f8"),s=n("34eb")("elasticsearch"),l=n("60d9"),u=n("6f59"),c=/[^\u0021-\u00ff]/,{TimeoutError:h,ConfigurationError:d}=n("e9f1");class f{constructor(t={}){if(this.url=t.url,this.ssl=t.ssl||null,this.id=t.id||y(t.url.href),this.headers=t.headers||null,this.auth=t.auth||{username:null,password:null},this.deadCount=0,this.resurrectTimeout=0,this._openRequests=0,this._status=t.status||f.statuses.ALIVE,this.roles=Object.assign({},p,t.roles),!["http:","https:"].includes(this.url.protocol))throw new d(`Invalid protocol: '${this.url.protocol}'`);if("function"===typeof t.agent)this.agent=t.agent();else{const e=t.agent&&!1===t.agent.keepAlive,n=Object.assign({},{keepAlive:!0,keepAliveMsecs:1e3,maxSockets:e?1/0:256,maxFreeSockets:256},t.agent);this.agent="http:"===this.url.protocol?new o.Agent(n):new a.Agent(Object.assign({},n,this.ssl))}this.makeRequest="http:"===this.url.protocol?o.request:a.request}request(t,e){this._openRequests++;var n=!1;const r=this.buildRequestObject(t);if(!0===c.test(r.path))return e(new TypeError("ERR_UNESCAPED_CHARACTERS: "+r.path),null),{abort:()=>{}};s("Starting a new request",t);const i=this.makeRequest(r);return i.on("response",r=>{!1===n&&(n=!0,this._openRequests--,!0===t.asStream?e(null,r):e(null,l(r)))}),i.on("timeout",()=>{!1===n&&(n=!0,this._openRequests--,i.abort(),e(new h("Request timed out",t),null))}),i.on("error",t=>{!1===n&&(n=!0,this._openRequests--,e(t,null))}),i.on("abort",()=>{s("Request aborted",t),!1===n&&(n=!0,this._openRequests--)}),i.setNoDelay(!0),!0===v(t.body)?u(t.body,i,t=>{null!=t&&!1===n&&(n=!0,this._openRequests--,e(t,null))}):i.end(t.body),i}close(t=(()=>{})){s("Closing connection",this.id),this._openRequests>0?setTimeout(()=>this.close(t),1e3):(this.agent.destroy(),t())}setRole(t,e){if(-1===m.indexOf(t))throw new d(`Unsupported role: '${t}'`);if("boolean"!==typeof e)throw new d("enabled should be a boolean");return this.roles[t]=e,this}get status(){return this._status}set status(t){r(~g.indexOf(t),`Unsupported status: '${t}'`),this._status=t}buildRequestObject(t){const e=this.url,{username:n,password:r}=this.auth,i={protocol:e.protocol,hostname:"["===e.hostname[0]?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:"",href:e.href,origin:e.origin,port:""!==e.port?e.port:void 0,headers:this.headers,auth:null!=n&&null!=r?`${n}:${r}`:void 0,agent:this.agent},o=Object.keys(t);for(var a=0,s=o.length;a<s;a++){var l=o[a];"path"===l?i.pathname=b(i.pathname,t[l]):"querystring"===l&&!0===!!t[l]?""===i.search?i.search="?"+t[l]:i.search+="&"+t[l]:"headers"===l?i.headers=Object.assign({},i.headers,t.headers):i[l]=t[l]}return i.path=i.pathname+i.search,i}[i.custom](t,e){return{url:y(this.url.toString()),id:this.id,headers:this.headers,deadCount:this.deadCount,resurrectTimeout:this.resurrectTimeout,_openRequests:this._openRequests,status:this.status,roles:this.roles}}toJSON(){return{url:y(this.url.toString()),id:this.id,headers:this.headers,deadCount:this.deadCount,resurrectTimeout:this.resurrectTimeout,_openRequests:this._openRequests,status:this.status,roles:this.roles}}}f.statuses={ALIVE:"alive",DEAD:"dead"},f.roles={MASTER:"master",DATA:"data",INGEST:"ingest",ML:"ml"};const p={[f.roles.MASTER]:!0,[f.roles.DATA]:!0,[f.roles.INGEST]:!0,[f.roles.ML]:!1},g=Object.keys(f.statuses).map(t=>f.statuses[t]),m=Object.keys(f.roles).map(t=>f.roles[t]);function y(t){return-1===t.indexOf("@")?t:t.slice(0,t.indexOf("//")+2)+t.slice(t.indexOf("@")+1)}function v(t){return null!=t&&"function"===typeof t.pipe}function b(t,e){const n="/"===t[t.length-1],r="/"===e[0];return!0===n&&!0===r?t+e.slice(1):n!==r?t+e:t+"/"+e}t.exports=f},d938:function(t,e,n){var r=n("b639").Buffer;t.exports=function(t){if(t instanceof Uint8Array){if(0===t.byteOffset&&t.byteLength===t.buffer.byteLength)return t.buffer;if("function"===typeof t.buffer.slice)return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}if(r.isBuffer(t)){for(var e=new Uint8Array(t.length),n=t.length,i=0;i<n;i++)e[i]=t[i];return e.buffer}throw new Error("Argument must be a Buffer")}},d98b:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["master_timeout","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,id:d,...f}=t;f=i(o,a,f,u),null==c&&(c="GET");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g=null!=d?"/_ingest/pipeline/"+encodeURIComponent(d):"/_ingest/pipeline";const m={method:c,path:g,body:null,querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},d9c5:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getOutDegree=e.getInDegree=e.default=void 0;var r=function(t){var e={},n=t.nodes,r=void 0===n?[]:n,i=t.edges,o=void 0===i?[]:i;return r.forEach((function(t){e[t.id]={degree:0,inDegree:0,outDegree:0}})),o.forEach((function(t){e[t.source].degree++,e[t.source].outDegree++,e[t.target].degree++,e[t.target].inDegree++})),e},i=r;e.default=i;var o=function(t,e){var n=r(t);return n[e]?r(t)[e].inDegree:0};e.getInDegree=o;var a=function(t,e){var n=r(t);return n[e]?r(t)[e].outDegree:0};e.getOutDegree=a},dbb5:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["flush","ignore_unavailable","allow_no_indices","expand_wildcards","max_num_segments","only_expunge_deletes","operation_threading","wait_for_merge","pretty","human","error_trace","source","filter_path"],a={ignoreUnavailable:"ignore_unavailable",allowNoIndices:"allow_no_indices",expandWildcards:"expand_wildcards",maxNumSegments:"max_num_segments",onlyExpungeDeletes:"only_expunge_deletes",operationThreading:"operation_threading",waitForMerge:"wait_for_merge",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,...f}=t;f=i(o,a,f,u),null==c&&(c="POST");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g=null!=d?"/"+encodeURIComponent(d)+"/_forcemerge":"/_forcemerge";const m={method:c,path:g,body:"",querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},dc14:function(t,e,n){"use strict";(function(e){t.exports=f;var r=n("966d"),i=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?setImmediate:r,o=n("b639").Buffer;f.WritableState=d;var a=n("3a7c");a.inherits=n("3fb5");var s,l={deprecate:n("b7d1")};(function(){try{s=n("d485")}catch(t){}finally{s||(s=n("faa1").EventEmitter)}})();var u;o=n("b639").Buffer;function c(){}function h(t,e,n){this.chunk=t,this.encoding=e,this.callback=n,this.next=null}function d(t,e){u=u||n("b19a"),t=t||{},this.objectMode=!!t.objectMode,e instanceof u&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=!1===t.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){x(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new O(this),this.corkedRequestsFree.next=new O(this)}function f(t){if(u=u||n("b19a"),!(this instanceof f)&&!(this instanceof u))return new f(t);this._writableState=new d(t,this),this.writable=!0,t&&("function"===typeof t.write&&(this._write=t.write),"function"===typeof t.writev&&(this._writev=t.writev)),s.call(this)}function p(t,e){var n=new Error("write after end");t.emit("error",n),r(e,n)}function g(t,e,n,i){var a=!0;if(!o.isBuffer(n)&&"string"!==typeof n&&null!==n&&void 0!==n&&!e.objectMode){var s=new TypeError("Invalid non-string/buffer chunk");t.emit("error",s),r(i,s),a=!1}return a}function m(t,e,n){return t.objectMode||!1===t.decodeStrings||"string"!==typeof e||(e=new o(e,n)),e}function y(t,e,n,r,i){n=m(e,n,r),o.isBuffer(n)&&(r="buffer");var a=e.objectMode?1:n.length;e.length+=a;var s=e.length<e.highWaterMark;if(s||(e.needDrain=!0),e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest=new h(n,r,i),l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else v(t,e,!1,a,n,r,i);return s}function v(t,e,n,r,i,o,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function b(t,e,n,i,o){--e.pendingcb,n?r(o,i):o(i),t._writableState.errorEmitted=!0,t.emit("error",i)}function _(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function x(t,e){var n=t._writableState,r=n.sync,o=n.writecb;if(_(n),e)b(t,n,r,e,o);else{var a=C(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||E(t,n),r?i(w,t,n,a,o):w(t,n,a,o)}}function w(t,e,n,r){n||S(t,e),e.pendingcb--,r(),T(t,e)}function S(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function E(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),o=e.corkedRequestsFree;o.entry=n;var a=0;while(n)i[a]=n,n=n.next,a+=1;v(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,e.corkedRequestsFree=o.next,o.next=null}else{while(n){var s=n.chunk,l=n.encoding,u=n.callback,c=e.objectMode?1:s.length;if(v(t,e,!1,c,s,l,u),n=n.next,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=n,e.bufferProcessing=!1}function C(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function M(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function T(t,e){var n=C(e);return n&&(0===e.pendingcb?(M(t,e),e.finished=!0,t.emit("finish")):M(t,e)),n}function A(t,e,n){e.ending=!0,T(t,e),n&&(e.finished?r(n):t.once("finish",n)),e.ended=!0,t.writable=!1}function O(t){var e=this;this.next=null,this.entry=null,this.finish=function(n){var r=e.entry;e.entry=null;while(r){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}}a.inherits(f,s),d.prototype.getBuffer=function(){var t=this.bufferedRequest,e=[];while(t)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(d.prototype,"buffer",{get:l.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(t){}}(),f.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},f.prototype.write=function(t,e,n){var r=this._writableState,i=!1;return"function"===typeof e&&(n=e,e=null),o.isBuffer(t)?e="buffer":e||(e=r.defaultEncoding),"function"!==typeof n&&(n=c),r.ended?p(this,n):g(this,r,t,n)&&(r.pendingcb++,i=y(this,r,t,e,n)),i},f.prototype.cork=function(){var t=this._writableState;t.corked++},f.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||E(this,t))},f.prototype.setDefaultEncoding=function(t){if("string"===typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);this._writableState.defaultEncoding=t},f.prototype._write=function(t,e,n){n(new Error("not implemented"))},f.prototype._writev=null,f.prototype.end=function(t,e,n){var r=this._writableState;"function"===typeof t?(n=t,t=null,e=null):"function"===typeof e&&(n=e,e=null),null!==t&&void 0!==t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||A(this,r,n)}}).call(this,n("4362"))},dc90:function(t,e,n){function r(t){function e(t){let e=0;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return r.colors[Math.abs(e)%r.colors.length]}function r(t){let e,n,o,a=null;function s(...t){if(!s.enabled)return;const n=s,i=Number(new Date),o=i-(e||i);n.diff=o,n.prev=e,n.curr=i,e=i,t[0]=r.coerce(t[0]),"string"!==typeof t[0]&&t.unshift("%O");let a=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(e,i)=>{if("%%"===e)return"%";a++;const o=r.formatters[i];if("function"===typeof o){const r=t[a];e=o.call(n,r),t.splice(a,1),a--}return e}),r.formatArgs.call(n,t);const l=n.log||r.log;l.apply(n,t)}return s.namespace=t,s.useColors=r.useColors(),s.color=r.selectColor(t),s.extend=i,s.destroy=r.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(n!==r.namespaces&&(n=r.namespaces,o=r.enabled(t)),o),set:t=>{a=t}}),"function"===typeof r.init&&r.init(s),s}function i(t,e){const n=r(this.namespace+("undefined"===typeof e?":":e)+t);return n.log=this.log,n}function o(t){let e;r.save(t),r.namespaces=t,r.names=[],r.skips=[];const n=("string"===typeof t?t:"").split(/[\s,]+/),i=n.length;for(e=0;e<i;e++)n[e]&&(t=n[e].replace(/\*/g,".*?"),"-"===t[0]?r.skips.push(new RegExp("^"+t.slice(1)+"$")):r.names.push(new RegExp("^"+t+"$")))}function a(){const t=[...r.names.map(l),...r.skips.map(l).map(t=>"-"+t)].join(",");return r.enable(""),t}function s(t){if("*"===t[t.length-1])return!0;let e,n;for(e=0,n=r.skips.length;e<n;e++)if(r.skips[e].test(t))return!1;for(e=0,n=r.names.length;e<n;e++)if(r.names[e].test(t))return!0;return!1}function l(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}function u(t){return t instanceof Error?t.stack||t.message:t}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.debug=r,r.default=r,r.coerce=u,r.disable=a,r.enable=o,r.enabled=s,r.humanize=n("1468"),r.destroy=c,Object.keys(t).forEach(e=>{r[e]=t[e]}),r.names=[],r.skips=[],r.formatters={},r.selectColor=e,r.enable(r.load()),r}t.exports=r},dccd:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getFuncByUnknownType=e.getFunc=e.isFunction=void 0;var r=n("f271"),i=n("4b03"),o=function(t){return"function"===typeof t};e.isFunction=o;var a=function(t,e,n){var r;return r=n||((0,i.isNumber)(t)?function(){return t}:function(){return e}),r};e.getFunc=a;var s=function(t,n,o){return void 0===o&&(o=!0),n||0===n?(0,e.isFunction)(n)?n:(0,i.isNumber)(n)?function(){return n}:(0,r.isArray)(n)?function(){if(o){var e=Math.max.apply(Math,n);return isNaN(e)?t:e}return n}:(0,r.isObject)(n)?function(){if(o){var e=Math.max(n.width,n.height);return isNaN(e)?t:e}return[n.width,n.height]}:function(){return t}:function(e){return e.size?(0,r.isArray)(e.size)?e.size[0]>e.size[1]?e.size[0]:e.size[1]:(0,r.isObject)(e.size)?e.size.width>e.size.height?e.size.width:e.size.height:e.size:t}};e.getFuncByUnknownType=s},dcfe:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.uniqueId=e.getOutEdgesNodeId=e.getNeighbors=e.getEdgesByNodeId=void 0;var r=function(t,e,n){void 0===e&&(e=[]);var r=e.filter((function(e){return e.source===t||e.target===t}));if("target"===n){var i=function(e){return e.source===t};return r.filter(i).map((function(t){return t.target}))}if("source"===n){var o=function(e){return e.target===t};return r.filter(o).map((function(t){return t.source}))}var a=function(e){return e.source===t?e.target:e.source};return r.map(a)};e.getNeighbors=r;var i=function(t,e){return e.filter((function(e){return e.source===t}))};e.getOutEdgesNodeId=i;var o=function(t,e){return e.filter((function(e){return e.source===t||e.target===t}))};e.getEdgesByNodeId=o;var a=function(t){void 0===t&&(t=0);var e="".concat(Math.random()).split(".")[1].substr(0,5),n="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(t,"-").concat(e).concat(n)};e.uniqueId=a},dd3c:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["requests_per_second","pretty","human","error_trace","source","filter_path"],a={requestsPerSecond:"requests_per_second",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["requests_per_second"]&&null==t["requestsPerSecond"]){const t=new n("Missing required parameter: requests_per_second or requestsPerSecond");return r(t,l)}if(null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,taskId:d,task_id:f,...p}=t;p=i(o,a,p,u),null==c&&(c="POST");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m=null!=(f||d)?"/_reindex/"+encodeURIComponent(f||d)+"/_rethrottle":null!=(f||d)?"/_update_by_query/"+encodeURIComponent(f||d)+"/_rethrottle":"/_delete_by_query/"+encodeURIComponent(f||d)+"/_rethrottle";const y={method:c,path:m,body:"",querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},ddeb:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["master_timeout","wait_for_completion","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",waitForCompletion:"wait_for_completion",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["repository"]){const t=new n("Missing required parameter: repository");return r(t,l)}if(null==t["snapshot"]){const t=new n("Missing required parameter: snapshot");return r(t,l)}if(null!=t["snapshot"]&&null==t["repository"]){const t=new n("Missing required parameter of the url: repository");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,repository:d,snapshot:f,...p}=t;p=i(o,a,p,u),null==c&&(c="PUT");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m="/_snapshot/"+encodeURIComponent(d)+"/"+encodeURIComponent(f);const y={method:c,path:m,body:h||"",querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},e099:function(t,e,n){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,s){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"===typeof t?o(a(t),(function(a){var s=encodeURIComponent(r(a))+n;return i(t[a])?o(t[a],(function(t){return s+encodeURIComponent(r(t))})).join(e):s+encodeURIComponent(r(t[a]))})).join(e):s?encodeURIComponent(r(s))+n+encodeURIComponent(r(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var a=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},e11e:function(t,e,n){
/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */
(function(t,n){n(e)})(0,(function(t){"use strict";var e="1.9.4";function n(t){var e,n,r,i;for(n=1,r=arguments.length;n<r;n++)for(e in i=arguments[n],i)t[e]=i[e];return t}var r=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function i(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var r=n.call(arguments,2);return function(){return t.apply(e,r.length?r.concat(n.call(arguments)):arguments)}}var o=0;function a(t){return"_leaflet_id"in t||(t["_leaflet_id"]=++o),t._leaflet_id}function s(t,e,n){var r,i,o,a;return a=function(){r=!1,i&&(o.apply(n,i),i=!1)},o=function(){r?i=arguments:(t.apply(n,arguments),setTimeout(a,e),r=!0)},o}function l(t,e,n){var r=e[1],i=e[0],o=r-i;return t===r&&n?t:((t-i)%o+o)%o+i}function u(){return!1}function c(t,e){if(!1===e)return t;var n=Math.pow(10,void 0===e?6:e);return Math.round(t*n)/n}function h(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function d(t){return h(t).split(/\s+/)}function f(t,e){for(var n in Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?r(t.options):{}),e)t.options[n]=e[n];return t.options}function p(t,e,n){var r=[];for(var i in t)r.push(encodeURIComponent(n?i.toUpperCase():i)+"="+encodeURIComponent(t[i]));return(e&&-1!==e.indexOf("?")?"&":"?")+r.join("&")}var g=/\{ *([\w_ -]+) *\}/g;function m(t,e){return t.replace(g,(function(t,n){var r=e[n];if(void 0===r)throw new Error("No value provided for variable "+t);return"function"===typeof r&&(r=r(e)),r}))}var y=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function v(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var b="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function _(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var x=0;function w(t){var e=+new Date,n=Math.max(0,16-(e-x));return x=e+n,window.setTimeout(t,n)}var S=window.requestAnimationFrame||_("RequestAnimationFrame")||w,E=window.cancelAnimationFrame||_("CancelAnimationFrame")||_("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function C(t,e,n){if(!n||S!==w)return S.call(window,i(t,e));t.call(e)}function M(t){t&&E.call(window,t)}var T={__proto__:null,extend:n,create:r,bind:i,get lastId(){return o},stamp:a,throttle:s,wrapNum:l,falseFn:u,formatNum:c,trim:h,splitWords:d,setOptions:f,getParamString:p,template:m,isArray:y,indexOf:v,emptyImageUrl:b,requestFn:S,cancelFn:E,requestAnimFrame:C,cancelAnimFrame:M};function A(){}function O(t){if("undefined"!==typeof L&&L&&L.Mixin){t=y(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}A.extend=function(t){var e=function(){f(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=e.__super__=this.prototype,o=r(i);for(var a in o.constructor=e,e.prototype=o,this)Object.prototype.hasOwnProperty.call(this,a)&&"prototype"!==a&&"__super__"!==a&&(e[a]=this[a]);return t.statics&&n(e,t.statics),t.includes&&(O(t.includes),n.apply(null,[o].concat(t.includes))),n(o,t),delete o.statics,delete o.includes,o.options&&(o.options=i.options?r(i.options):{},n(o.options,t.options)),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=o._initHooks.length;t<e;t++)o._initHooks[t].call(this)}},e},A.include=function(t){var e=this.prototype.options;return n(this.prototype,t),t.options&&(this.prototype.options=e,this.mergeOptions(t.options)),this},A.mergeOptions=function(t){return n(this.prototype.options,t),this},A.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"===typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var k={on:function(t,e,n){if("object"===typeof t)for(var r in t)this._on(r,t[r],e);else{t=d(t);for(var i=0,o=t.length;i<o;i++)this._on(t[i],e,n)}return this},off:function(t,e,n){if(arguments.length)if("object"===typeof t)for(var r in t)this._off(r,t[r],e);else{t=d(t);for(var i=1===arguments.length,o=0,a=t.length;o<a;o++)i?this._off(t[o]):this._off(t[o],e,n)}else delete this._events;return this},_on:function(t,e,n,r){if("function"===typeof e){if(!1===this._listens(t,e,n)){n===this&&(n=void 0);var i={fn:e,ctx:n};r&&(i.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(i)}}else console.warn("wrong listener type: "+typeof e)},_off:function(t,e,n){var r,i,o;if(this._events&&(r=this._events[t],r))if(1!==arguments.length)if("function"===typeof e){var a=this._listens(t,e,n);if(!1!==a){var s=r[a];this._firingCount&&(s.fn=u,this._events[t]=r=r.slice()),r.splice(a,1)}}else console.warn("wrong listener type: "+typeof e);else{if(this._firingCount)for(i=0,o=r.length;i<o;i++)r[i].fn=u;delete this._events[t]}},fire:function(t,e,r){if(!this.listens(t,r))return this;var i=n({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var o=this._events[t];if(o){this._firingCount=this._firingCount+1||1;for(var a=0,s=o.length;a<s;a++){var l=o[a],u=l.fn;l.once&&this.off(t,u,l.ctx),u.call(l.ctx||this,i)}this._firingCount--}}return r&&this._propagateEvent(i),this},listens:function(t,e,n,r){"string"!==typeof t&&console.warn('"string" type argument expected');var i=e;"function"!==typeof e&&(r=!!e,i=void 0,n=void 0);var o=this._events&&this._events[t];if(o&&o.length&&!1!==this._listens(t,i,n))return!0;if(r)for(var a in this._eventParents)if(this._eventParents[a].listens(t,e,n,r))return!0;return!1},_listens:function(t,e,n){if(!this._events)return!1;var r=this._events[t]||[];if(!e)return!!r.length;n===this&&(n=void 0);for(var i=0,o=r.length;i<o;i++)if(r[i].fn===e&&r[i].ctx===n)return i;return!1},once:function(t,e,n){if("object"===typeof t)for(var r in t)this._on(r,t[r],e,!0);else{t=d(t);for(var i=0,o=t.length;i<o;i++)this._on(t[i],e,n,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[a(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[a(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,n({layer:t.target,propagatedFrom:t.target},t),!0)}};k.addEventListener=k.on,k.removeEventListener=k.clearAllEventListeners=k.off,k.addOneTimeEventListener=k.once,k.fireEvent=k.fire,k.hasEventListeners=k.listens;var I=A.extend(k);function P(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var N=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function R(t,e,n){return t instanceof P?t:y(t)?new P(t[0],t[1]):void 0===t||null===t?t:"object"===typeof t&&"x"in t&&"y"in t?new P(t.x,t.y):new P(t,e,n)}function D(t,e){if(t)for(var n=e?[t,e]:t,r=0,i=n.length;r<i;r++)this.extend(n[r])}function F(t,e){return!t||t instanceof D?t:new D(t,e)}function j(t,e){if(t)for(var n=e?[t,e]:t,r=0,i=n.length;r<i;r++)this.extend(n[r])}function B(t,e){return t instanceof j?t:new j(t,e)}function z(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function U(t,e,n){return t instanceof z?t:y(t)&&"object"!==typeof t[0]?3===t.length?new z(t[0],t[1],t[2]):2===t.length?new z(t[0],t[1]):null:void 0===t||null===t?t:"object"===typeof t&&"lat"in t?new z(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new z(t,e,n)}P.prototype={clone:function(){return new P(this.x,this.y)},add:function(t){return this.clone()._add(R(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(R(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new P(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new P(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=N(this.x),this.y=N(this.y),this},distanceTo:function(t){t=R(t);var e=t.x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return t=R(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=R(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+c(this.x)+", "+c(this.y)+")"}},D.prototype={extend:function(t){var e,n;if(!t)return this;if(t instanceof P||"number"===typeof t[0]||"x"in t)e=n=R(t);else if(t=F(t),e=t.min,n=t.max,!e||!n)return this;return this.min||this.max?(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)):(this.min=e.clone(),this.max=n.clone()),this},getCenter:function(t){return R((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return R(this.min.x,this.max.y)},getTopRight:function(){return R(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return t="number"===typeof t[0]||t instanceof P?R(t):F(t),t instanceof D?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=F(t);var e=this.min,n=this.max,r=t.min,i=t.max,o=i.x>=e.x&&r.x<=n.x,a=i.y>=e.y&&r.y<=n.y;return o&&a},overlaps:function(t){t=F(t);var e=this.min,n=this.max,r=t.min,i=t.max,o=i.x>e.x&&r.x<n.x,a=i.y>e.y&&r.y<n.y;return o&&a},isValid:function(){return!(!this.min||!this.max)},pad:function(t){var e=this.min,n=this.max,r=Math.abs(e.x-n.x)*t,i=Math.abs(e.y-n.y)*t;return F(R(e.x-r,e.y-i),R(n.x+r,n.y+i))},equals:function(t){return!!t&&(t=F(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight()))}},j.prototype={extend:function(t){var e,n,r=this._southWest,i=this._northEast;if(t instanceof z)e=t,n=t;else{if(!(t instanceof j))return t?this.extend(U(t)||B(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return r||i?(r.lat=Math.min(e.lat,r.lat),r.lng=Math.min(e.lng,r.lng),i.lat=Math.max(n.lat,i.lat),i.lng=Math.max(n.lng,i.lng)):(this._southWest=new z(e.lat,e.lng),this._northEast=new z(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,r=Math.abs(e.lat-n.lat)*t,i=Math.abs(e.lng-n.lng)*t;return new j(new z(e.lat-r,e.lng-i),new z(n.lat+r,n.lng+i))},getCenter:function(){return new z((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new z(this.getNorth(),this.getWest())},getSouthEast:function(){return new z(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"===typeof t[0]||t instanceof z||"lat"in t?U(t):B(t);var e,n,r=this._southWest,i=this._northEast;return t instanceof j?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=r.lat&&n.lat<=i.lat&&e.lng>=r.lng&&n.lng<=i.lng},intersects:function(t){t=B(t);var e=this._southWest,n=this._northEast,r=t.getSouthWest(),i=t.getNorthEast(),o=i.lat>=e.lat&&r.lat<=n.lat,a=i.lng>=e.lng&&r.lng<=n.lng;return o&&a},overlaps:function(t){t=B(t);var e=this._southWest,n=this._northEast,r=t.getSouthWest(),i=t.getNorthEast(),o=i.lat>e.lat&&r.lat<n.lat,a=i.lng>e.lng&&r.lng<n.lng;return o&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=B(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},z.prototype={equals:function(t,e){if(!t)return!1;t=U(t);var n=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return n<=(void 0===e?1e-9:e)},toString:function(t){return"LatLng("+c(this.lat,t)+", "+c(this.lng,t)+")"},distanceTo:function(t){return q.distance(this,U(t))},wrap:function(){return q.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return B([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new z(this.lat,this.lng,this.alt)}};var G={latLngToPoint:function(t,e){var n=this.projection.project(t),r=this.scale(e);return this.transformation._transform(n,r)},pointToLatLng:function(t,e){var n=this.scale(e),r=this.transformation.untransform(t,n);return this.projection.unproject(r)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t),r=this.transformation.transform(e.min,n),i=this.transformation.transform(e.max,n);return new D(r,i)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?l(t.lng,this.wrapLng,!0):t.lng,n=this.wrapLat?l(t.lat,this.wrapLat,!0):t.lat,r=t.alt;return new z(n,e,r)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),r=e.lat-n.lat,i=e.lng-n.lng;if(0===r&&0===i)return t;var o=t.getSouthWest(),a=t.getNorthEast(),s=new z(o.lat-r,o.lng-i),l=new z(a.lat-r,a.lng-i);return new j(s,l)}},q=n({},G,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,r=t.lat*n,i=e.lat*n,o=Math.sin((e.lat-t.lat)*n/2),a=Math.sin((e.lng-t.lng)*n/2),s=o*o+Math.cos(r)*Math.cos(i)*a*a,l=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*l}}),V=6378137,H={R:V,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,r=Math.max(Math.min(n,t.lat),-n),i=Math.sin(r*e);return new P(this.R*t.lng*e,this.R*Math.log((1+i)/(1-i))/2)},unproject:function(t){var e=180/Math.PI;return new z((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=V*Math.PI;return new D([-t,-t],[t,t])}()};function W(t,e,n,r){if(y(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=n,this._d=r}function Y(t,e,n,r){return new W(t,e,n,r)}W.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new P((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var X=n({},q,{code:"EPSG:3857",projection:H,transformation:function(){var t=.5/(Math.PI*H.R);return Y(t,.5,-t,.5)}()}),J=n({},X,{code:"EPSG:900913"});function Z(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function K(t,e){var n,r,i,o,a,s,l="";for(n=0,i=t.length;n<i;n++){for(a=t[n],r=0,o=a.length;r<o;r++)s=a[r],l+=(r?"L":"M")+s.x+" "+s.y;l+=e?Dt.svg?"z":"x":""}return l||"M0 0"}var Q=document.documentElement.style,$="ActiveXObject"in window,tt=$&&!document.addEventListener,et="msLaunchUri"in navigator&&!("documentMode"in document),nt=Rt("webkit"),rt=Rt("android"),it=Rt("android 2")||Rt("android 3"),ot=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),at=rt&&Rt("Google")&&ot<537&&!("AudioNode"in window),st=!!window.opera,lt=!et&&Rt("chrome"),ut=Rt("gecko")&&!nt&&!st&&!$,ct=!lt&&Rt("safari"),ht=Rt("phantom"),dt="OTransition"in Q,ft=0===navigator.platform.indexOf("Win"),pt=$&&"transition"in Q,gt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!it,mt="MozPerspective"in Q,yt=!window.L_DISABLE_3D&&(pt||gt||mt)&&!dt&&!ht,vt="undefined"!==typeof orientation||Rt("mobile"),bt=vt&&nt,_t=vt&&gt,xt=!window.PointerEvent&&window.MSPointerEvent,wt=!(!window.PointerEvent&&!xt),St="ontouchstart"in window||!!window.TouchEvent,Et=!window.L_NO_TOUCH&&(St||wt),Ct=vt&&st,Mt=vt&&ut,Tt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,At=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",u,e),window.removeEventListener("testPassiveEventSupport",u,e)}catch(n){}return t}(),Ot=function(){return!!document.createElement("canvas").getContext}(),kt=!(!document.createElementNS||!Z("svg").createSVGRect),It=!!kt&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>","http://www.w3.org/2000/svg"===(t.firstChild&&t.firstChild.namespaceURI)}(),Pt=!kt&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"===typeof e.adj}catch(n){return!1}}(),Lt=0===navigator.platform.indexOf("Mac"),Nt=0===navigator.platform.indexOf("Linux");function Rt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Dt={ie:$,ielt9:tt,edge:et,webkit:nt,android:rt,android23:it,androidStock:at,opera:st,chrome:lt,gecko:ut,safari:ct,phantom:ht,opera12:dt,win:ft,ie3d:pt,webkit3d:gt,gecko3d:mt,any3d:yt,mobile:vt,mobileWebkit:bt,mobileWebkit3d:_t,msPointer:xt,pointer:wt,touch:Et,touchNative:St,mobileOpera:Ct,mobileGecko:Mt,retina:Tt,passiveEvents:At,canvas:Ot,svg:kt,vml:Pt,inlineSvg:It,mac:Lt,linux:Nt},Ft=Dt.msPointer?"MSPointerDown":"pointerdown",jt=Dt.msPointer?"MSPointerMove":"pointermove",Bt=Dt.msPointer?"MSPointerUp":"pointerup",zt=Dt.msPointer?"MSPointerCancel":"pointercancel",Ut={touchstart:Ft,touchmove:jt,touchend:Bt,touchcancel:zt},Gt={touchstart:Qt,touchmove:Kt,touchend:Kt,touchcancel:Kt},qt={},Vt=!1;function Ht(t,e,n){return"touchstart"===e&&Zt(),Gt[e]?(n=Gt[e].bind(this,n),t.addEventListener(Ut[e],n,!1),n):(console.warn("wrong event specified:",e),u)}function Wt(t,e,n){Ut[e]?t.removeEventListener(Ut[e],n,!1):console.warn("wrong event specified:",e)}function Yt(t){qt[t.pointerId]=t}function Xt(t){qt[t.pointerId]&&(qt[t.pointerId]=t)}function Jt(t){delete qt[t.pointerId]}function Zt(){Vt||(document.addEventListener(Ft,Yt,!0),document.addEventListener(jt,Xt,!0),document.addEventListener(Bt,Jt,!0),document.addEventListener(zt,Jt,!0),Vt=!0)}function Kt(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){for(var n in e.touches=[],qt)e.touches.push(qt[n]);e.changedTouches=[e],t(e)}}function Qt(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&Ye(e),Kt(t,e)}function $t(t){var e,n,r={};for(n in t)e=t[n],r[n]=e&&e.bind?e.bind(t):e;return t=r,r.type="dblclick",r.detail=2,r.isTrusted=!1,r._simulated=!0,r}var te=200;function ee(t,e){t.addEventListener("dblclick",e);var n,r=0;function i(t){if(1===t.detail){if("mouse"!==t.pointerType&&(!t.sourceCapabilities||t.sourceCapabilities.firesTouchEvents)){var i=Je(t);if(!i.some((function(t){return t instanceof HTMLLabelElement&&t.attributes.for}))||i.some((function(t){return t instanceof HTMLInputElement||t instanceof HTMLSelectElement}))){var o=Date.now();o-r<=te?(n++,2===n&&e($t(t))):n=1,r=o}}}else n=t.detail}return t.addEventListener("click",i),{dblclick:e,simDblclick:i}}function ne(t,e){t.removeEventListener("dblclick",e.dblclick),t.removeEventListener("click",e.simDblclick)}var re,ie,oe,ae,se,le=Ce(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ue=Ce(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ce="webkitTransition"===ue||"OTransition"===ue?ue+"End":"transitionend";function he(t){return"string"===typeof t?document.getElementById(t):t}function de(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&document.defaultView){var r=document.defaultView.getComputedStyle(t,null);n=r?r[e]:null}return"auto"===n?null:n}function fe(t,e,n){var r=document.createElement(t);return r.className=e||"",n&&n.appendChild(r),r}function pe(t){var e=t.parentNode;e&&e.removeChild(t)}function ge(t){while(t.firstChild)t.removeChild(t.firstChild)}function me(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function ye(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function ve(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=we(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function be(t,e){if(void 0!==t.classList)for(var n=d(e),r=0,i=n.length;r<i;r++)t.classList.add(n[r]);else if(!ve(t,e)){var o=we(t);xe(t,(o?o+" ":"")+e)}}function _e(t,e){void 0!==t.classList?t.classList.remove(e):xe(t,h((" "+we(t)+" ").replace(" "+e+" "," ")))}function xe(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function we(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function Se(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&Ee(t,e)}function Ee(t,e){var n=!1,r="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(r)}catch(i){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+r+"(opacity="+e+")"}function Ce(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function Me(t,e,n){var r=e||new P(0,0);t.style[le]=(Dt.ie3d?"translate("+r.x+"px,"+r.y+"px)":"translate3d("+r.x+"px,"+r.y+"px,0)")+(n?" scale("+n+")":"")}function Te(t,e){t._leaflet_pos=e,Dt.any3d?Me(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function Ae(t){return t._leaflet_pos||new P(0,0)}if("onselectstart"in document)re=function(){Fe(window,"selectstart",Ye)},ie=function(){Be(window,"selectstart",Ye)};else{var Oe=Ce(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);re=function(){if(Oe){var t=document.documentElement.style;oe=t[Oe],t[Oe]="none"}},ie=function(){Oe&&(document.documentElement.style[Oe]=oe,oe=void 0)}}function ke(){Fe(window,"dragstart",Ye)}function Ie(){Be(window,"dragstart",Ye)}function Pe(t){while(-1===t.tabIndex)t=t.parentNode;t.style&&(Le(),ae=t,se=t.style.outlineStyle,t.style.outlineStyle="none",Fe(window,"keydown",Le))}function Le(){ae&&(ae.style.outlineStyle=se,ae=void 0,se=void 0,Be(window,"keydown",Le))}function Ne(t){do{t=t.parentNode}while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function Re(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var De={__proto__:null,TRANSFORM:le,TRANSITION:ue,TRANSITION_END:ce,get:he,getStyle:de,create:fe,remove:pe,empty:ge,toFront:me,toBack:ye,hasClass:ve,addClass:be,removeClass:_e,setClass:xe,getClass:we,setOpacity:Se,testProp:Ce,setTransform:Me,setPosition:Te,getPosition:Ae,get disableTextSelection(){return re},get enableTextSelection(){return ie},disableImageDrag:ke,enableImageDrag:Ie,preventOutline:Pe,restoreOutline:Le,getSizedParentNode:Ne,getScale:Re};function Fe(t,e,n,r){if(e&&"object"===typeof e)for(var i in e)Ge(t,i,e[i],n);else{e=d(e);for(var o=0,a=e.length;o<a;o++)Ge(t,e[o],n,r)}return this}var je="_leaflet_events";function Be(t,e,n,r){if(1===arguments.length)ze(t),delete t[je];else if(e&&"object"===typeof e)for(var i in e)qe(t,i,e[i],n);else if(e=d(e),2===arguments.length)ze(t,(function(t){return-1!==v(e,t)}));else for(var o=0,a=e.length;o<a;o++)qe(t,e[o],n,r);return this}function ze(t,e){for(var n in t[je]){var r=n.split(/\d/)[0];e&&!e(r)||qe(t,r,null,null,n)}}var Ue={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ge(t,e,n,r){var i=e+a(n)+(r?"_"+a(r):"");if(t[je]&&t[je][i])return this;var o=function(e){return n.call(r||t,e||window.event)},s=o;!Dt.touchNative&&Dt.pointer&&0===e.indexOf("touch")?o=Ht(t,e,o):Dt.touch&&"dblclick"===e?o=ee(t,o):"addEventListener"in t?"touchstart"===e||"touchmove"===e||"wheel"===e||"mousewheel"===e?t.addEventListener(Ue[e]||e,o,!!Dt.passiveEvents&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?(o=function(e){e=e||window.event,$e(t,e)&&s(e)},t.addEventListener(Ue[e],o,!1)):t.addEventListener(e,s,!1):t.attachEvent("on"+e,o),t[je]=t[je]||{},t[je][i]=o}function qe(t,e,n,r,i){i=i||e+a(n)+(r?"_"+a(r):"");var o=t[je]&&t[je][i];if(!o)return this;!Dt.touchNative&&Dt.pointer&&0===e.indexOf("touch")?Wt(t,e,o):Dt.touch&&"dblclick"===e?ne(t,o):"removeEventListener"in t?t.removeEventListener(Ue[e]||e,o,!1):t.detachEvent("on"+e,o),t[je][i]=null}function Ve(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function He(t){return Ge(t,"wheel",Ve),this}function We(t){return Fe(t,"mousedown touchstart dblclick contextmenu",Ve),t["_leaflet_disable_click"]=!0,this}function Ye(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Xe(t){return Ye(t),Ve(t),this}function Je(t){if(t.composedPath)return t.composedPath();var e=[],n=t.target;while(n)e.push(n),n=n.parentNode;return e}function Ze(t,e){if(!e)return new P(t.clientX,t.clientY);var n=Re(e),r=n.boundingClientRect;return new P((t.clientX-r.left)/n.x-e.clientLeft,(t.clientY-r.top)/n.y-e.clientTop)}var Ke=Dt.linux&&Dt.chrome?window.devicePixelRatio:Dt.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Qe(t){return Dt.edge?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/Ke:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}function $e(t,e){var n=e.relatedTarget;if(!n)return!0;try{while(n&&n!==t)n=n.parentNode}catch(r){return!1}return n!==t}var tn={__proto__:null,on:Fe,off:Be,stopPropagation:Ve,disableScrollPropagation:He,disableClickPropagation:We,preventDefault:Ye,stop:Xe,getPropagationPath:Je,getMousePosition:Ze,getWheelDelta:Qe,isExternalTarget:$e,addListener:Fe,removeListener:Be},en=I.extend({run:function(t,e,n,r){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(r||.5,.2),this._startPos=Ae(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=C(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),Te(this._el,n),this.fire("step")},_complete:function(){M(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),nn=I.extend({options:{crs:X,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=f(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(U(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ue&&Dt.any3d&&!Dt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Fe(this._proxy,ce,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,r){if(e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(U(t),e,this.options.maxBounds),r=r||{},this._stop(),this._loaded&&!r.reset&&!0!==r){void 0!==r.animate&&(r.zoom=n({animate:r.animate},r.zoom),r.pan=n({animate:r.animate,duration:r.duration},r.pan));var i=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,r.zoom):this._tryAnimatedPan(t,r.pan);if(i)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e,r.pan&&r.pan.noMoveStart),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(Dt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(Dt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var r=this.getZoomScale(e),i=this.getSize().divideBy(2),o=t instanceof P?t:this.latLngToContainerPoint(t),a=o.subtract(i).multiplyBy(1-1/r),s=this.containerPointToLatLng(i.add(a));return this.setView(s,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():B(t);var n=R(e.paddingTopLeft||e.padding||[0,0]),r=R(e.paddingBottomRight||e.padding||[0,0]),i=this.getBoundsZoom(t,!1,n.add(r));if(i="number"===typeof e.maxZoom?Math.min(e.maxZoom,i):i,i===1/0)return{center:t.getCenter(),zoom:i};var o=r.subtract(n).divideBy(2),a=this.project(t.getSouthWest(),i),s=this.project(t.getNorthEast(),i),l=this.unproject(a.add(s).divideBy(2).add(o),i);return{center:l,zoom:i}},fitBounds:function(t,e){if(t=B(t),!t.isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=R(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new en,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){be(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){if(n=n||{},!1===n.animate||!Dt.any3d)return this.setView(t,e,n);this._stop();var r=this.project(this.getCenter()),i=this.project(t),o=this.getSize(),a=this._zoom;t=U(t),e=void 0===e?a:e;var s=Math.max(o.x,o.y),l=s*this.getZoomScale(a,e),u=i.distanceTo(r)||1,c=1.42,h=c*c;function d(t){var e=t?-1:1,n=t?l:s,r=l*l-s*s+e*h*h*u*u,i=2*n*h*u,o=r/i,a=Math.sqrt(o*o+1)-o,c=a<1e-9?-18:Math.log(a);return c}function f(t){return(Math.exp(t)-Math.exp(-t))/2}function p(t){return(Math.exp(t)+Math.exp(-t))/2}function g(t){return f(t)/p(t)}var m=d(0);function y(t){return s*(p(m)/p(m+c*t))}function v(t){return s*(p(m)*g(m+c*t)-f(m))/h}function b(t){return 1-Math.pow(1-t,1.5)}var _=Date.now(),x=(d(1)-m)/c,w=n.duration?1e3*n.duration:1e3*x*.8;function S(){var n=(Date.now()-_)/w,o=b(n)*x;n<=1?(this._flyToFrame=C(S,this),this._move(this.unproject(r.add(i.subtract(r).multiplyBy(v(o)/u)),a),this.getScaleZoom(s/y(o),a),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}return this._moveStart(!0,n.noMoveStart),S.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return t=B(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),r=this._limitCenter(n,this._zoom,B(t));return n.equals(r)||this.panTo(r,e),this._enforcingBounds=!1,this},panInside:function(t,e){e=e||{};var n=R(e.paddingTopLeft||e.padding||[0,0]),r=R(e.paddingBottomRight||e.padding||[0,0]),i=this.project(this.getCenter()),o=this.project(t),a=this.getPixelBounds(),s=F([a.min.add(n),a.max.subtract(r)]),l=s.getSize();if(!s.contains(o)){this._enforcingBounds=!0;var u=o.subtract(s.getCenter()),c=s.extend(o).getSize().subtract(l);i.x+=u.x<0?-c.x:c.x,i.y+=u.y<0?-c.y:c.y,this.panTo(this.unproject(i),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=n({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var r=this.getSize(),o=e.divideBy(2).round(),a=r.divideBy(2).round(),s=o.subtract(a);return s.x||s.y?(t.animate&&t.pan?this.panBy(s):(t.pan&&this._rawPanBy(s),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:r})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=n({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=i(this._handleGeolocationResponse,this),r=i(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,r,t):navigator.geolocation.getCurrentPosition(e,r,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var e=t.coords.latitude,n=t.coords.longitude,r=new z(e,n),i=r.toBounds(2*t.coords.accuracy),o=this._locateOptions;if(o.setView){var a=this.getBoundsZoom(i);this.setView(r,o.maxZoom?Math.min(a,o.maxZoom):a)}var s={latlng:r,bounds:i,timestamp:t.timestamp};for(var l in t.coords)"number"===typeof t.coords[l]&&(s[l]=t.coords[l]);this.fire("locationfound",s)}},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(e){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),pe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(M(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)pe(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),r=fe("div",n,e||this._mapPane);return t&&(this._panes[t]=r),r},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),n=this.unproject(t.getTopRight());return new j(e,n)},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=B(t),n=R(n||[0,0]);var r=this.getZoom()||0,i=this.getMinZoom(),o=this.getMaxZoom(),a=t.getNorthWest(),s=t.getSouthEast(),l=this.getSize().subtract(n),u=F(this.project(s,r),this.project(a,r)).getSize(),c=Dt.any3d?this.options.zoomSnap:1,h=l.x/u.x,d=l.y/u.y,f=e?Math.max(h,d):Math.min(h,d);return r=this.getScaleZoom(f,r),c&&(r=Math.round(r/(c/100))*(c/100),r=e?Math.ceil(r/c)*c:Math.floor(r/c)*c),Math.max(i,Math.min(o,r))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new P(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new D(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"===typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=void 0===e?this._zoom:e;var r=n.zoom(t*n.scale(e));return isNaN(r)?1/0:r},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(U(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(R(t),e)},layerPointToLatLng:function(t){var e=R(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(U(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(U(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(B(t))},distance:function(t,e){return this.options.crs.distance(U(t),U(e))},containerPointToLayerPoint:function(t){return R(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return R(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(R(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(U(t)))},mouseEventToContainerPoint:function(t){return Ze(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=he(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");Fe(e,"scroll",this._onScroll,this),this._containerId=a(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&Dt.any3d,be(t,"leaflet-container"+(Dt.touch?" leaflet-touch":"")+(Dt.retina?" leaflet-retina":"")+(Dt.ielt9?" leaflet-oldie":"")+(Dt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=de(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&"sticky"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Te(this._mapPane,new P(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(be(t.markerPane,"leaflet-zoom-hide"),be(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e,n){Te(this._mapPane,new P(0,0));var r=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var i=this._zoom!==e;this._moveStart(i,n)._move(t,e)._moveEnd(i),this.fire("viewreset"),r&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n,r){void 0===e&&(e=this._zoom);var i=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),r?n&&n.pinch&&this.fire("zoom",n):((i||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return M(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){Te(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[a(this._container)]=this;var e=t?Be:Fe;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),Dt.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){M(this._resizeRequest),this._resizeRequest=C((function(){this.invalidateSize({debounceMoveend:!0})}),this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){var n,r=[],i="mouseout"===e||"mouseover"===e,o=t.target||t.srcElement,s=!1;while(o){if(n=this._targets[a(o)],n&&("click"===e||"preclick"===e)&&this._draggableMoved(n)){s=!0;break}if(n&&n.listens(e,!0)){if(i&&!$e(o,t))break;if(r.push(n),i)break}if(o===this._container)break;o=o.parentNode}return r.length||s||i||!this.listens(e,!0)||(r=[this]),r},_isClickDisabled:function(t){while(t&&t!==this._container){if(t["_leaflet_disable_click"])return!0;t=t.parentNode}},_handleDOMEvent:function(t){var e=t.target||t.srcElement;if(!(!this._loaded||e["_leaflet_disable_events"]||"click"===t.type&&this._isClickDisabled(e))){var n=t.type;"mousedown"===n&&Pe(e),this._fireDOMEvent(t,n)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,r){if("click"===t.type){var i=n({},t);i.type="preclick",this._fireDOMEvent(i,i.type,r)}var o=this._findEventTargets(t,e);if(r){for(var a=[],s=0;s<r.length;s++)r[s].listens(e,!0)&&a.push(r[s]);o=a.concat(o)}if(o.length){"contextmenu"===e&&Ye(t);var l=o[0],u={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var c=l.getLatLng&&(!l._radius||l._radius<=10);u.containerPoint=c?this.latLngToContainerPoint(l.getLatLng()):this.mouseEventToContainerPoint(t),u.layerPoint=this.containerPointToLayerPoint(u.containerPoint),u.latlng=c?l.getLatLng():this.layerPointToLatLng(u.layerPoint)}for(s=0;s<o.length;s++)if(o[s].fire(e,u,!0),u.originalEvent._stopped||!1===o[s].options.bubblingMouseEvents&&-1!==v(this._mouseEvents,e))return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return Ae(this._mapPane)||new P(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var n=t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return n.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var r=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(r)},_latLngBoundsToNewLayerBounds:function(t,e,n){var r=this._getNewPixelOrigin(n,e);return F([this.project(t.getSouthWest(),e)._subtract(r),this.project(t.getNorthWest(),e)._subtract(r),this.project(t.getSouthEast(),e)._subtract(r),this.project(t.getNorthEast(),e)._subtract(r)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var r=this.project(t,e),i=this.getSize().divideBy(2),o=new D(r.subtract(i),r.add(i)),a=this._getBoundsOffset(o,n,e);return Math.abs(a.x)<=1&&Math.abs(a.y)<=1?t:this.unproject(r.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),r=new D(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(r,e))},_getBoundsOffset:function(t,e,n){var r=F(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),i=r.min.subtract(t.min),o=r.max.subtract(t.max),a=this._rebound(i.x,-o.x),s=this._rebound(i.y,-o.y);return new P(a,s)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),r=Dt.any3d?this.options.zoomSnap:1;return r&&(t=Math.round(t/r)*r),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){_e(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n))&&(this.panBy(n,e),!0)},_createAnimProxy:function(){var t=this._proxy=fe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",(function(t){var e=le,n=this._proxy.style[e];Me(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()}),this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){pe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();Me(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(e),i=this._getCenterOffset(t)._divideBy(1-1/r);return!(!0!==n.animate&&!this.getSize().contains(i))&&(C((function(){this._moveStart(!0,n.noMoveStart||!1)._animateZoom(t,e,!0)}),this),!0)},_animateZoom:function(t,e,n,r){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,be(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:r}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&_e(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function rn(t,e){return new nn(t,e)}var on=A.extend({options:{position:"topright"},initialize:function(t){f(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),r=t._controlCorners[n];return be(e,"leaflet-control"),-1!==n.indexOf("bottom")?r.insertBefore(e,r.firstChild):r.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(pe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),an=function(t){return new on(t)};nn.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=fe("div",e+"control-container",this._container);function r(r,i){var o=e+r+" "+e+i;t[r+i]=fe("div",o,n)}r("top","left"),r("top","right"),r("bottom","left"),r("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)pe(this._controlCorners[t]);pe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var sn=on.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,r){return n<r?-1:r<n?1:0}},initialize:function(t,e,n){for(var r in f(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,t)this._addLayer(t[r],r);for(r in e)this._addLayer(e[r],r,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return on.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(a(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){be(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(be(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):_e(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return _e(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=fe("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),We(e),He(e);var r=this._section=fe("section",t+"-list");n&&(this._map.on("click",this.collapse,this),Fe(e,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var i=this._layersLink=fe("a",t+"-toggle",e);i.href="#",i.title="Layers",i.setAttribute("role","button"),Fe(i,{keydown:function(t){13===t.keyCode&&this._expandSafely()},click:function(t){Ye(t),this._expandSafely()}},this),n||this.expand(),this._baseLayersList=fe("div",t+"-base",r),this._separator=fe("div",t+"-separator",r),this._overlaysList=fe("div",t+"-overlays",r),e.appendChild(r)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&a(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(i((function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)}),this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ge(this._baseLayersList),ge(this._overlaysList),this._layerControlInputs=[];var t,e,n,r,i=0;for(n=0;n<this._layers.length;n++)r=this._layers[n],this._addItem(r),e=e||r.overlay,t=t||!r.overlay,i+=r.overlay?0:1;return this.options.hideSingleBase&&(t=t&&i>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(a(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",r=document.createElement("div");return r.innerHTML=n,r.firstChild},_addItem:function(t){var e,n=document.createElement("label"),r=this._map.hasLayer(t.layer);t.overlay?(e=document.createElement("input"),e.type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=r):e=this._createRadioElement("leaflet-base-layers_"+a(this),r),this._layerControlInputs.push(e),e.layerId=a(t.layer),Fe(e,"click",this._onInputClick,this);var i=document.createElement("span");i.innerHTML=" "+t.name;var o=document.createElement("span");n.appendChild(o),o.appendChild(e),o.appendChild(i);var s=t.overlay?this._overlaysList:this._baseLayersList;return s.appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){if(!this._preventClick){var t,e,n=this._layerControlInputs,r=[],i=[];this._handlingClick=!0;for(var o=n.length-1;o>=0;o--)t=n[o],e=this._getLayer(t.layerId).layer,t.checked?r.push(e):t.checked||i.push(e);for(o=0;o<i.length;o++)this._map.hasLayer(i[o])&&this._map.removeLayer(i[o]);for(o=0;o<r.length;o++)this._map.hasLayer(r[o])||this._map.addLayer(r[o]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,r=this._map.getZoom(),i=n.length-1;i>=0;i--)t=n[i],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&r<e.options.minZoom||void 0!==e.options.maxZoom&&r>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,Fe(t,"click",Ye),this.expand();var e=this;setTimeout((function(){Be(t,"click",Ye),e._preventClick=!1}))}}),ln=function(t,e,n){return new sn(t,e,n)},un=on.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=fe("div",e+" leaflet-bar"),r=this.options;return this._zoomInButton=this._createButton(r.zoomInText,r.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(r.zoomOutText,r.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,r,i){var o=fe("a",n,r);return o.innerHTML=t,o.href="#",o.title=e,o.setAttribute("role","button"),o.setAttribute("aria-label",e),We(o),Fe(o,"click",Xe),Fe(o,"click",i,this),Fe(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";_e(this._zoomInButton,e),_e(this._zoomOutButton,e),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(be(this._zoomOutButton,e),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(be(this._zoomInButton,e),this._zoomInButton.setAttribute("aria-disabled","true"))}});nn.mergeOptions({zoomControl:!0}),nn.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new un,this.addControl(this.zoomControl))}));var cn=function(t){return new un(t)},hn=on.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",n=fe("div",e),r=this.options;return this._addScales(r,e+"-line",n),t.on(r.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=fe("div",e,n)),t.imperial&&(this._iScale=fe("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,r,i=3.2808399*t;i>5280?(e=i/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(r=this._getRoundNum(i),this._updateScale(this._iScale,r+" ft",r/i))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,e*n}}),dn=function(t){return new hn(t)},fn='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',pn=on.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Dt.inlineSvg?fn+" ":"")+"Leaflet</a>"},initialize:function(t){f(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=fe("div","leaflet-control-attribution"),We(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",(function(){this.removeAttribution(t.layer.getAttribution())}),this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(' <span aria-hidden="true">|</span> ')}}});nn.mergeOptions({attributionControl:!0}),nn.addInitHook((function(){this.options.attributionControl&&(new pn).addTo(this)}));var gn=function(t){return new pn(t)};on.Layers=sn,on.Zoom=un,on.Scale=hn,on.Attribution=pn,an.layers=ln,an.zoom=cn,an.scale=dn,an.attribution=gn;var mn=A.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});mn.addTo=function(t,e){return t.addHandler(e,this),this};var yn={Events:k},vn=Dt.touch?"touchstart mousedown":"mousedown",bn=I.extend({options:{clickTolerance:3},initialize:function(t,e,n,r){f(this,r),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(Fe(this._dragStartTarget,vn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(bn._dragging===this&&this.finishDrag(!0),Be(this._dragStartTarget,vn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!ve(this._element,"leaflet-zoom-anim")))if(t.touches&&1!==t.touches.length)bn._dragging===this&&this.finishDrag();else if(!(bn._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches)&&(bn._dragging=this,this._preventOutline&&Pe(this._element),ke(),re(),!this._moving)){this.fire("down");var e=t.touches?t.touches[0]:t,n=Ne(this._element);this._startPoint=new P(e.clientX,e.clientY),this._startPos=Ae(this._element),this._parentScale=Re(n);var r="mousedown"===t.type;Fe(document,r?"mousemove":"touchmove",this._onMove,this),Fe(document,r?"mouseup":"touchend touchcancel",this._onUp,this)}},_onMove:function(t){if(this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new P(e.clientX,e.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,Ye(t),this._moved||(this.fire("dragstart"),this._moved=!0,be(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),be(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,this._lastEvent=t,this._updatePosition()))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),Te(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){_e(document.body,"leaflet-dragging"),this._lastTarget&&(_e(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Be(document,"mousemove touchmove",this._onMove,this),Be(document,"mouseup touchend touchcancel",this._onUp,this),Ie(),ie();var e=this._moved&&this._moving;this._moving=!1,bn._dragging=!1,e&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function _n(t,e,n){var r,i,o,a,s,l,u,c,h,d=[1,4,2,8];for(i=0,u=t.length;i<u;i++)t[i]._code=Ln(t[i],e);for(a=0;a<4;a++){for(c=d[a],r=[],i=0,u=t.length,o=u-1;i<u;o=i++)s=t[i],l=t[o],s._code&c?l._code&c||(h=Pn(l,s,c,e,n),h._code=Ln(h,e),r.push(h)):(l._code&c&&(h=Pn(l,s,c,e,n),h._code=Ln(h,e),r.push(h)),r.push(s));t=r}return t}function xn(t,e){var n,r,i,o,a,s,l,u,c;if(!t||0===t.length)throw new Error("latlngs not passed");Dn(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var h=U([0,0]),d=B(t),f=d.getNorthWest().distanceTo(d.getSouthWest())*d.getNorthEast().distanceTo(d.getNorthWest());f<1700&&(h=wn(t));var p=t.length,g=[];for(n=0;n<p;n++){var m=U(t[n]);g.push(e.project(U([m.lat-h.lat,m.lng-h.lng])))}for(s=l=u=0,n=0,r=p-1;n<p;r=n++)i=g[n],o=g[r],a=i.y*o.x-o.y*i.x,l+=(i.x+o.x)*a,u+=(i.y+o.y)*a,s+=3*a;c=0===s?g[0]:[l/s,u/s];var y=e.unproject(R(c));return U([y.lat+h.lat,y.lng+h.lng])}function wn(t){for(var e=0,n=0,r=0,i=0;i<t.length;i++){var o=U(t[i]);e+=o.lat,n+=o.lng,r++}return U([e/r,n/r])}var Sn,En={__proto__:null,clipPolygon:_n,polygonCenter:xn,centroid:wn};function Cn(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=kn(t,n),t=An(t,n),t}function Mn(t,e,n){return Math.sqrt(Rn(t,e,n,!0))}function Tn(t,e,n){return Rn(t,e,n)}function An(t,e){var n=t.length,r=typeof Uint8Array!==void 0+""?Uint8Array:Array,i=new r(n);i[0]=i[n-1]=1,On(t,i,e,0,n-1);var o,a=[];for(o=0;o<n;o++)i[o]&&a.push(t[o]);return a}function On(t,e,n,r,i){var o,a,s,l=0;for(a=r+1;a<=i-1;a++)s=Rn(t[a],t[r],t[i],!0),s>l&&(o=a,l=s);l>n&&(e[o]=1,On(t,e,n,r,o),On(t,e,n,o,i))}function kn(t,e){for(var n=[t[0]],r=1,i=0,o=t.length;r<o;r++)Nn(t[r],t[i])>e&&(n.push(t[r]),i=r);return i<o-1&&n.push(t[o-1]),n}function In(t,e,n,r,i){var o,a,s,l=r?Sn:Ln(t,n),u=Ln(e,n);Sn=u;while(1){if(!(l|u))return[t,e];if(l&u)return!1;o=l||u,a=Pn(t,e,o,n,i),s=Ln(a,n),o===l?(t=a,l=s):(e=a,u=s)}}function Pn(t,e,n,r,i){var o,a,s=e.x-t.x,l=e.y-t.y,u=r.min,c=r.max;return 8&n?(o=t.x+s*(c.y-t.y)/l,a=c.y):4&n?(o=t.x+s*(u.y-t.y)/l,a=u.y):2&n?(o=c.x,a=t.y+l*(c.x-t.x)/s):1&n&&(o=u.x,a=t.y+l*(u.x-t.x)/s),new P(o,a,i)}function Ln(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function Nn(t,e){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r}function Rn(t,e,n,r){var i,o=e.x,a=e.y,s=n.x-o,l=n.y-a,u=s*s+l*l;return u>0&&(i=((t.x-o)*s+(t.y-a)*l)/u,i>1?(o=n.x,a=n.y):i>0&&(o+=s*i,a+=l*i)),s=t.x-o,l=t.y-a,r?s*s+l*l:new P(o,a)}function Dn(t){return!y(t[0])||"object"!==typeof t[0][0]&&"undefined"!==typeof t[0][0]}function Fn(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Dn(t)}function jn(t,e){var n,r,i,o,a,s,l,u;if(!t||0===t.length)throw new Error("latlngs not passed");Dn(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var c=U([0,0]),h=B(t),d=h.getNorthWest().distanceTo(h.getSouthWest())*h.getNorthEast().distanceTo(h.getNorthWest());d<1700&&(c=wn(t));var f=t.length,p=[];for(n=0;n<f;n++){var g=U(t[n]);p.push(e.project(U([g.lat-c.lat,g.lng-c.lng])))}for(n=0,r=0;n<f-1;n++)r+=p[n].distanceTo(p[n+1])/2;if(0===r)u=p[0];else for(n=0,o=0;n<f-1;n++)if(a=p[n],s=p[n+1],i=a.distanceTo(s),o+=i,o>r){l=(o-r)/i,u=[s.x-l*(s.x-a.x),s.y-l*(s.y-a.y)];break}var m=e.unproject(R(u));return U([m.lat+c.lat,m.lng+c.lng])}var Bn={__proto__:null,simplify:Cn,pointToSegmentDistance:Mn,closestPointOnSegment:Tn,clipSegment:In,_getEdgeIntersection:Pn,_getBitCode:Ln,_sqClosestPointOnSegment:Rn,isFlat:Dn,_flat:Fn,polylineCenter:jn},zn={project:function(t){return new P(t.lng,t.lat)},unproject:function(t){return new z(t.y,t.x)},bounds:new D([-180,-90],[180,90])},Un={R:6378137,R_MINOR:6356752.314245179,bounds:new D([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,r=t.lat*e,i=this.R_MINOR/n,o=Math.sqrt(1-i*i),a=o*Math.sin(r),s=Math.tan(Math.PI/4-r/2)/Math.pow((1-a)/(1+a),o/2);return r=-n*Math.log(Math.max(s,1e-10)),new P(t.lng*e*n,r)},unproject:function(t){for(var e,n=180/Math.PI,r=this.R,i=this.R_MINOR/r,o=Math.sqrt(1-i*i),a=Math.exp(-t.y/r),s=Math.PI/2-2*Math.atan(a),l=0,u=.1;l<15&&Math.abs(u)>1e-7;l++)e=o*Math.sin(s),e=Math.pow((1-e)/(1+e),o/2),u=Math.PI/2-2*Math.atan(a*e)-s,s+=u;return new z(s*n,t.x*n/r)}},Gn={__proto__:null,LonLat:zn,Mercator:Un,SphericalMercator:H},qn=n({},q,{code:"EPSG:3395",projection:Un,transformation:function(){var t=.5/(Math.PI*Un.R);return Y(t,.5,-t,.5)}()}),Vn=n({},q,{code:"EPSG:4326",projection:zn,transformation:Y(1/180,1,-1/180,.5)}),Hn=n({},G,{projection:zn,transformation:Y(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,r=e.lat-t.lat;return Math.sqrt(n*n+r*r)},infinite:!0});G.Earth=q,G.EPSG3395=qn,G.EPSG3857=X,G.EPSG900913=J,G.EPSG4326=Vn,G.Simple=Hn;var Wn=I.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[a(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[a(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",(function(){e.off(n,this)}),this)}this.onAdd(e),this.fire("add"),e.fire("layeradd",{layer:this})}}});nn.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=a(t);return this._layers[e]||(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=a(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return a(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){t=t?y(t)?t:[t]:[];for(var e=0,n=t.length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[a(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=a(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var r in this._zoomBoundLayers){var i=this._zoomBoundLayers[r].options;t=void 0===i.minZoom?t:Math.min(t,i.minZoom),e=void 0===i.maxZoom?e:Math.max(e,i.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Yn=Wn.extend({initialize:function(t,e){var n,r;if(f(this,e),this._layers={},t)for(n=0,r=t.length;n<r;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){var e="number"===typeof t?t:this.getLayerId(t);return e in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,n,r=Array.prototype.slice.call(arguments,1);for(e in this._layers)n=this._layers[e],n[t]&&n[t].apply(n,r);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return a(t)}}),Xn=function(t,e){return new Yn(t,e)},Jn=Yn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Yn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Yn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new j;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),Zn=function(t,e){return new Jn(t,e)},Kn=A.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){f(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var r=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(r,t),(this.options.crossOrigin||""===this.options.crossOrigin)&&(r.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),r},_setIconStyles:function(t,e){var n=this.options,r=n[e+"Size"];"number"===typeof r&&(r=[r,r]);var i=R(r),o=R("shadow"===e&&n.shadowAnchor||n.iconAnchor||i&&i.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),o&&(t.style.marginLeft=-o.x+"px",t.style.marginTop=-o.y+"px"),i&&(t.style.width=i.x+"px",t.style.height=i.y+"px")},_createImg:function(t,e){return e=e||document.createElement("img"),e.src=t,e},_getIconUrl:function(t){return Dt.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Qn(t){return new Kn(t)}var $n=Kn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return"string"!==typeof $n.imagePath&&($n.imagePath=this._detectIconPath()),(this.options.imagePath||$n.imagePath)+Kn.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var e=function(t,e,n){var r=e.exec(t);return r&&r[n]};return t=e(t,/^url\((['"])?(.+)\1\)$/,2),t&&e(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=fe("div","leaflet-default-icon-path",document.body),e=de(t,"background-image")||de(t,"backgroundImage");if(document.body.removeChild(t),e=this._stripUrl(e),e)return e;var n=document.querySelector('link[href$="leaflet.css"]');return n?n.href.substring(0,n.href.length-"leaflet.css".length-1):""}}),tr=mn.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new bn(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),be(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&_e(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,r=this._marker.options.autoPanSpeed,i=this._marker.options.autoPanPadding,o=Ae(e._icon),a=n.getPixelBounds(),s=n.getPixelOrigin(),l=F(a.min._subtract(s).add(i),a.max._subtract(s).subtract(i));if(!l.contains(o)){var u=R((Math.max(l.max.x,o.x)-l.max.x)/(a.max.x-l.max.x)-(Math.min(l.min.x,o.x)-l.min.x)/(a.min.x-l.min.x),(Math.max(l.max.y,o.y)-l.max.y)/(a.max.y-l.max.y)-(Math.min(l.min.y,o.y)-l.min.y)/(a.min.y-l.min.y)).multiplyBy(r);n.panBy(u,{animate:!1}),this._draggable._newPos._add(u),this._draggable._startPos._add(u),Te(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=C(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(M(this._panRequest),this._panRequest=C(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,r=Ae(e._icon),i=e._map.layerPointToLatLng(r);n&&Te(n,r),e._latlng=i,t.latlng=i,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){M(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),er=Wn.extend({options:{icon:new $n,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){f(this,e),this._latlng=U(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=U(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),r=!1;n!==this._icon&&(this._icon&&this._removeIcon(),r=!0,t.title&&(n.title=t.title),"IMG"===n.tagName&&(n.alt=t.alt||"")),be(n,e),t.keyboard&&(n.tabIndex="0",n.setAttribute("role","button")),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Fe(n,"focus",this._panOnFocus,this);var i=t.icon.createShadow(this._shadow),o=!1;i!==this._shadow&&(this._removeShadow(),o=!0),i&&(be(i,e),i.alt=""),this._shadow=i,t.opacity<1&&this._updateOpacity(),r&&this.getPane().appendChild(this._icon),this._initInteraction(),i&&o&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Be(this._icon,"focus",this._panOnFocus,this),pe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&pe(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&Te(this._icon,t),this._shadow&&Te(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(be(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),tr)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new tr(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&Se(this._icon,t),this._shadow&&Se(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var e=this.options.icon.options,n=e.iconSize?R(e.iconSize):R(0,0),r=e.iconAnchor?R(e.iconAnchor):R(0,0);t.panInside(this._latlng,{paddingTopLeft:r,paddingBottomRight:n.subtract(r)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function nr(t,e){return new er(t,e)}var rr=Wn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return f(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ir=rr.extend({options:{fill:!0,radius:10},initialize:function(t,e){f(this,e),this._latlng=U(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=U(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return rr.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),r=[t+n,e+n];this._pxBounds=new D(this._point.subtract(r),this._point.add(r))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function or(t,e){return new ir(t,e)}var ar=ir.extend({initialize:function(t,e,r){if("number"===typeof e&&(e=n({},r,{radius:e})),f(this,e),this._latlng=U(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new j(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:rr.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,r=n.options.crs;if(r.distance===q.distance){var i=Math.PI/180,o=this._mRadius/q.R/i,a=n.project([e+o,t]),s=n.project([e-o,t]),l=a.add(s).divideBy(2),u=n.unproject(l).lat,c=Math.acos((Math.cos(o*i)-Math.sin(e*i)*Math.sin(u*i))/(Math.cos(e*i)*Math.cos(u*i)))/i;(isNaN(c)||0===c)&&(c=o/Math.cos(Math.PI/180*e)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(c)?0:l.x-n.project([u,t-c]).x,this._radiusY=l.y-a.y}else{var h=r.unproject(r.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(h).x}this._updateBounds()}});function sr(t,e,n){return new ar(t,e,n)}var lr=rr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){f(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,r=1/0,i=null,o=Rn,a=0,s=this._parts.length;a<s;a++)for(var l=this._parts[a],u=1,c=l.length;u<c;u++){e=l[u-1],n=l[u];var h=o(t,e,n,!0);h<r&&(r=h,i=o(t,e,n))}return i&&(i.distance=Math.sqrt(r)),i},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return jn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=U(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new j,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Dn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=Dn(t),r=0,i=t.length;r<i;r++)n?(e[r]=U(t[r]),this._bounds.extend(e[r])):e[r]=this._convertLatLngs(t[r]);return e},_project:function(){var t=new D;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new P(t,t);this._rawPxBounds&&(this._pxBounds=new D([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)]))},_projectLatlngs:function(t,e,n){var r,i,o=t[0]instanceof z,a=t.length;if(o){for(i=[],r=0;r<a;r++)i[r]=this._map.latLngToLayerPoint(t[r]),n.extend(i[r]);e.push(i)}else for(r=0;r<a;r++)this._projectLatlngs(t[r],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,n,r,i,o,a,s,l=this._parts;for(e=0,r=0,i=this._rings.length;e<i;e++)for(s=this._rings[e],n=0,o=s.length;n<o-1;n++)a=In(s[n],s[n+1],t,n,!0),a&&(l[r]=l[r]||[],l[r].push(a[0]),a[1]===s[n+1]&&n!==o-2||(l[r].push(a[1]),r++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,r=t.length;n<r;n++)t[n]=Cn(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,r,i,o,a,s,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,o=this._parts.length;n<o;n++)for(s=this._parts[n],r=0,a=s.length,i=a-1;r<a;i=r++)if((e||0!==r)&&Mn(t,s[i],s[r])<=l)return!0;return!1}});function ur(t,e){return new lr(t,e)}lr._flat=Fn;var cr=lr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return xn(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var e=lr.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof z&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){lr.prototype._setLatLngs.call(this,t),Dn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Dn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new P(e,e);if(t=new D(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var r,i=0,o=this._rings.length;i<o;i++)r=_n(this._rings[i],t,!0),r.length&&this._parts.push(r)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,r,i,o,a,s,l,u=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,s=this._parts.length;i<s;i++)for(e=this._parts[i],o=0,l=e.length,a=l-1;o<l;a=o++)n=e[o],r=e[a],n.y>t.y!==r.y>t.y&&t.x<(r.x-n.x)*(t.y-n.y)/(r.y-n.y)+n.x&&(u=!u);return u||lr.prototype._containsPoint.call(this,t,!0)}});function hr(t,e){return new cr(t,e)}var dr=Jn.extend({initialize:function(t,e){f(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,r,i=y(t)?t:t.features;if(i){for(e=0,n=i.length;e<n;e++)r=i[e],(r.geometries||r.geometry||r.features||r.coordinates)&&this.addData(r);return this}var o=this.options;if(o.filter&&!o.filter(t))return this;var a=fr(t,o);return a?(a.feature=_r(t),a.defaultOptions=a.options,this.resetStyle(a),o.onEachFeature&&o.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=n({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer((function(e){this._setLayerStyle(e,t)}),this)},_setLayerStyle:function(t,e){t.setStyle&&("function"===typeof e&&(e=e(t.feature)),t.setStyle(e))}});function fr(t,e){var n,r,i,o,a="Feature"===t.type?t.geometry:t,s=a?a.coordinates:null,l=[],u=e&&e.pointToLayer,c=e&&e.coordsToLatLng||gr;if(!s&&!a)return null;switch(a.type){case"Point":return n=c(s),pr(u,t,n,e);case"MultiPoint":for(i=0,o=s.length;i<o;i++)n=c(s[i]),l.push(pr(u,t,n,e));return new Jn(l);case"LineString":case"MultiLineString":return r=mr(s,"LineString"===a.type?0:1,c),new lr(r,e);case"Polygon":case"MultiPolygon":return r=mr(s,"Polygon"===a.type?1:2,c),new cr(r,e);case"GeometryCollection":for(i=0,o=a.geometries.length;i<o;i++){var h=fr({geometry:a.geometries[i],type:"Feature",properties:t.properties},e);h&&l.push(h)}return new Jn(l);case"FeatureCollection":for(i=0,o=a.features.length;i<o;i++){var d=fr(a.features[i],e);d&&l.push(d)}return new Jn(l);default:throw new Error("Invalid GeoJSON object.")}}function pr(t,e,n,r){return t?t(e,n):new er(n,r&&r.markersInheritOptions&&r)}function gr(t){return new z(t[1],t[0],t[2])}function mr(t,e,n){for(var r,i=[],o=0,a=t.length;o<a;o++)r=e?mr(t[o],e-1,n):(n||gr)(t[o]),i.push(r);return i}function yr(t,e){return t=U(t),void 0!==t.alt?[c(t.lng,e),c(t.lat,e),c(t.alt,e)]:[c(t.lng,e),c(t.lat,e)]}function vr(t,e,n,r){for(var i=[],o=0,a=t.length;o<a;o++)i.push(e?vr(t[o],Dn(t[o])?0:e-1,n,r):yr(t[o],r));return!e&&n&&i.length>0&&i.push(i[0].slice()),i}function br(t,e){return t.feature?n({},t.feature,{geometry:e}):_r(e)}function _r(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var xr={toGeoJSON:function(t){return br(this,{type:"Point",coordinates:yr(this.getLatLng(),t)})}};function wr(t,e){return new dr(t,e)}er.include(xr),ar.include(xr),ir.include(xr),lr.include({toGeoJSON:function(t){var e=!Dn(this._latlngs),n=vr(this._latlngs,e?1:0,!1,t);return br(this,{type:(e?"Multi":"")+"LineString",coordinates:n})}}),cr.include({toGeoJSON:function(t){var e=!Dn(this._latlngs),n=e&&!Dn(this._latlngs[0]),r=vr(this._latlngs,n?2:e?1:0,!0,t);return e||(r=[r]),br(this,{type:(n?"Multi":"")+"Polygon",coordinates:r})}}),Yn.include({toMultiPoint:function(t){var e=[];return this.eachLayer((function(n){e.push(n.toGeoJSON(t).geometry.coordinates)})),br(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var n="GeometryCollection"===e,r=[];return this.eachLayer((function(e){if(e.toGeoJSON){var i=e.toGeoJSON(t);if(n)r.push(i.geometry);else{var o=_r(i);"FeatureCollection"===o.type?r.push.apply(r,o.features):r.push(o)}}})),n?br(this,{geometries:r,type:"GeometryCollection"}):{type:"FeatureCollection",features:r}}});var Sr=wr,Er=Wn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=B(e),f(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(be(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){pe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&me(this._image),this},bringToBack:function(){return this._map&&ye(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=B(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:fe("img");be(e,"leaflet-image-layer"),this._zoomAnimated&&be(e,"leaflet-zoom-animated"),this.options.className&&be(e,this.options.className),e.onselectstart=u,e.onmousemove=u,e.onload=i(this.fire,this,"load"),e.onerror=i(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Me(this._image,n,e)},_reset:function(){var t=this._image,e=new D(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();Te(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){Se(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Cr=function(t,e,n){return new Er(t,e,n)},Mr=Er.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:fe("video");if(be(e,"leaflet-image-layer"),this._zoomAnimated&&be(e,"leaflet-zoom-animated"),this.options.className&&be(e,this.options.className),e.onselectstart=u,e.onmousemove=u,e.onloadeddata=i(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),r=[],o=0;o<n.length;o++)r.push(n[o].src);this._url=n.length>0?r:[e.src]}else{y(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style["objectFit"]="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted,e.playsInline=!!this.options.playsInline;for(var a=0;a<this._url.length;a++){var s=fe("source");s.src=this._url[a],e.appendChild(s)}}}});function Tr(t,e,n){return new Mr(t,e,n)}var Ar=Er.extend({_initImage:function(){var t=this._image=this._url;be(t,"leaflet-image-layer"),this._zoomAnimated&&be(t,"leaflet-zoom-animated"),this.options.className&&be(t,this.options.className),t.onselectstart=u,t.onmousemove=u}});function Or(t,e,n){return new Ar(t,e,n)}var kr=Wn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,e){t&&(t instanceof z||y(t))?(this._latlng=U(t),f(this,e)):(f(this,t),this._source=e),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Se(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Se(this._container,1),this.bringToFront(),this.options.interactive&&(be(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(Se(this._container,0),this._removeTimeout=setTimeout(i(pe,void 0,this._container),200)):pe(this._container),this.options.interactive&&(_e(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=U(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&me(this._container),this},bringToBack:function(){return this._map&&ye(this._container),this},_prepareOpen:function(t){var e=this._source;if(!e._map)return!1;if(e instanceof Jn){e=null;var n=this._source._layers;for(var r in n)if(n[r]._map){e=n[r];break}if(!e)return!1;this._source=e}if(!t)if(e.getCenter)t=e.getCenter();else if(e.getLatLng)t=e.getLatLng();else{if(!e.getBounds)throw new Error("Unable to get source layer LatLng.");t=e.getBounds().getCenter()}return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"===typeof this._content?this._content(this._source||this):this._content;if("string"===typeof e)t.innerHTML=e;else{while(t.hasChildNodes())t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=R(this.options.offset),n=this._getAnchor();this._zoomAnimated?Te(this._container,t.add(n)):e=e.add(t).add(n);var r=this._containerBottom=-e.y,i=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=r+"px",this._container.style.left=i+"px"}},_getAnchor:function(){return[0,0]}});nn.include({_initOverlay:function(t,e,n,r){var i=e;return i instanceof t||(i=new t(r).setContent(e)),n&&i.setLatLng(n),i}}),Wn.include({_initOverlay:function(t,e,n,r){var i=n;return i instanceof t?(f(i,r),i._source=this):(i=e&&!r?e:new t(r,this),i.setContent(n)),i}});var Ir=kr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,kr.prototype.openOn.call(this,t)},onAdd:function(t){kr.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof rr||this._source.on("preclick",Ve))},onRemove:function(t){kr.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof rr||this._source.off("preclick",Ve))},getEvents:function(){var t=kr.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",e=this._container=fe("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=fe("div",t+"-content-wrapper",e);if(this._contentNode=fe("div",t+"-content",n),We(e),He(this._contentNode),Fe(e,"contextmenu",Ve),this._tipContainer=fe("div",t+"-tip-container",e),this._tip=fe("div",t+"-tip",this._tipContainer),this.options.closeButton){var r=this._closeButton=fe("a",t+"-close-button",e);r.setAttribute("role","button"),r.setAttribute("aria-label","Close popup"),r.href="#close",r.innerHTML='<span aria-hidden="true">&#215;</span>',Fe(r,"click",(function(t){Ye(t),this.close()}),this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var r=t.offsetHeight,i=this.options.maxHeight,o="leaflet-popup-scrolled";i&&r>i?(e.height=i+"px",be(t,o)):_e(t,o),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();Te(this._container,e.add(n))},_adjustPan:function(){if(this.options.autoPan)if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning)this._autopanning=!1;else{var t=this._map,e=parseInt(de(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,r=this._containerWidth,i=new P(this._containerLeft,-n-this._containerBottom);i._add(Ae(this._container));var o=t.layerPointToContainerPoint(i),a=R(this.options.autoPanPadding),s=R(this.options.autoPanPaddingTopLeft||a),l=R(this.options.autoPanPaddingBottomRight||a),u=t.getSize(),c=0,h=0;o.x+r+l.x>u.x&&(c=o.x+r-u.x+l.x),o.x-c-s.x<0&&(c=o.x-s.x),o.y+n+l.y>u.y&&(h=o.y+n-u.y+l.y),o.y-h-s.y<0&&(h=o.y-s.y),(c||h)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([c,h]))}},_getAnchor:function(){return R(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Pr=function(t,e){return new Ir(t,e)};nn.mergeOptions({closePopupOnClick:!0}),nn.include({openPopup:function(t,e,n){return this._initOverlay(Ir,t,e,n).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),Wn.include({bindPopup:function(t,e){return this._popup=this._initOverlay(Ir,this._popup,t,e),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof Jn||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(this._popup&&this._map){Xe(t);var e=t.layer||t.target;this._popup._source!==e||e instanceof rr?(this._popup._source=e,this.openPopup(t.latlng)):this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var Lr=kr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){kr.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){kr.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=kr.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",e=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=fe("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+a(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,n,r=this._map,i=this._container,o=r.latLngToContainerPoint(r.getCenter()),a=r.layerPointToContainerPoint(t),s=this.options.direction,l=i.offsetWidth,u=i.offsetHeight,c=R(this.options.offset),h=this._getAnchor();"top"===s?(e=l/2,n=u):"bottom"===s?(e=l/2,n=0):"center"===s?(e=l/2,n=u/2):"right"===s?(e=0,n=u/2):"left"===s?(e=l,n=u/2):a.x<o.x?(s="right",e=0,n=u/2):(s="left",e=l+2*(c.x+h.x),n=u/2),t=t.subtract(R(e,n,!0)).add(c).add(h),_e(i,"leaflet-tooltip-right"),_e(i,"leaflet-tooltip-left"),_e(i,"leaflet-tooltip-top"),_e(i,"leaflet-tooltip-bottom"),be(i,"leaflet-tooltip-"+s),Te(i,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Se(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return R(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Nr=function(t,e){return new Lr(t,e)};nn.include({openTooltip:function(t,e,n){return this._initOverlay(Lr,t,e,n).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Wn.include({bindTooltip:function(t,e){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Lr,this._tooltip,t,e),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,n.click=this._openTooltip,this._map?this._addFocusListeners():n.add=this._addFocusListeners),this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof Jn||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var e="function"===typeof t.getElement&&t.getElement();e&&(Fe(e,"focus",(function(){this._tooltip._source=t,this.openTooltip()}),this),Fe(e,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var e="function"===typeof t.getElement&&t.getElement();e&&e.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(this._tooltip&&this._map)if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var e=this;this._map.once("moveend",(function(){e._openOnceFlag=!1,e._openTooltip(t)}))}else this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,n,r=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),r=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(r)}});var Rr=Kn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),n=this.options;if(n.html instanceof Element?(ge(e),e.appendChild(n.html)):e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var r=R(n.bgPos);e.style.backgroundPosition=-r.x+"px "+-r.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});function Dr(t){return new Rr(t)}Kn.Default=$n;var Fr=Wn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Dt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){f(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),pe(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(me(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ye(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=s(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof P?t:new P(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,r=-t(-1/0,1/0),i=0,o=n.length;i<o;i++)e=n[i].style.zIndex,n[i]!==this._container&&e&&(r=t(r,+e));isFinite(r)&&(this.options.zIndex=r+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Dt.ielt9){Se(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var r in this._tiles){var i=this._tiles[r];if(i.current&&i.loaded){var o=Math.min(1,(t-i.loaded)/200);Se(i.el,o),o<1?e=!0:(i.active?n=!0:this._onOpaqueTile(i),i.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(M(this._fadeFrame),this._fadeFrame=C(this._updateOpacity,this))}},_onOpaqueTile:u,_initContainer:function(){this._container||(this._container=fe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(pe(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var r=this._levels[t],i=this._map;return r||(r=this._levels[t]={},r.el=fe("div","leaflet-tile-container leaflet-zoom-animated",this._container),r.el.style.zIndex=e,r.origin=i.project(i.unproject(i.getPixelOrigin()),t).round(),r.zoom=t,this._setZoomTransform(r,i.getCenter(),i.getZoom()),u(r.el.offsetWidth),this._onCreateLevel(r)),this._level=r,r}},_onUpdateLevel:u,_onRemoveLevel:u,_onCreateLevel:u,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)e=this._tiles[t],e.retain=e.current;for(t in this._tiles)if(e=this._tiles[t],e.current&&!e.active){var r=e.coords;this._retainParent(r.x,r.y,r.z,r.z-5)||this._retainChildren(r.x,r.y,r.z,r.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)pe(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,r){var i=Math.floor(t/2),o=Math.floor(e/2),a=n-1,s=new P(+i,+o);s.z=+a;var l=this._tileCoordsToKey(s),u=this._tiles[l];return u&&u.active?(u.retain=!0,!0):(u&&u.loaded&&(u.retain=!0),a>r&&this._retainParent(i,o,a,r))},_retainChildren:function(t,e,n,r){for(var i=2*t;i<2*t+2;i++)for(var o=2*e;o<2*e+2;o++){var a=new P(i,o);a.z=n+1;var s=this._tileCoordsToKey(a),l=this._tiles[s];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),n+1<r&&this._retainChildren(i,o,n+1,r))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,r){var i=Math.round(e);i=void 0!==this.options.maxZoom&&i>this.options.maxZoom||void 0!==this.options.minZoom&&i<this.options.minZoom?void 0:this._clampZoom(i);var o=this.options.updateWhenZooming&&i!==this._tileZoom;r&&!o||(this._tileZoom=i,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==i&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var r=this._map.getZoomScale(n,t.zoom),i=t.origin.multiplyBy(r).subtract(this._map._getNewPixelOrigin(e,n)).round();Dt.any3d?Me(t.el,i,r):Te(t.el,i)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),r=this._tileZoom,i=this._map.getPixelWorldBounds(this._tileZoom);i&&(this._globalTileRange=this._pxBoundsToTileRange(i)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],r).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],r).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],r).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],r).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),r=e.getZoomScale(n,this._tileZoom),i=e.project(t,this._tileZoom).floor(),o=e.getSize().divideBy(2*r);return new D(i.subtract(o),i.add(o))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var r=this._getTiledPixelBounds(t),i=this._pxBoundsToTileRange(r),o=i.getCenter(),a=[],s=this.options.keepBuffer,l=new D(i.getBottomLeft().subtract([s,-s]),i.getTopRight().add([s,-s]));if(!(isFinite(i.min.x)&&isFinite(i.min.y)&&isFinite(i.max.x)&&isFinite(i.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var u in this._tiles){var c=this._tiles[u].coords;c.z===this._tileZoom&&l.contains(new P(c.x,c.y))||(this._tiles[u].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(t,n);else{for(var h=i.min.y;h<=i.max.y;h++)for(var d=i.min.x;d<=i.max.x;d++){var f=new P(d,h);if(f.z=this._tileZoom,this._isValidTile(f)){var p=this._tiles[this._tileCoordsToKey(f)];p?p.current=!0:a.push(f)}}if(a.sort((function(t,e){return t.distanceTo(o)-e.distanceTo(o)})),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));var g=document.createDocumentFragment();for(d=0;d<a.length;d++)this._addTile(a[d],g);this._level.el.appendChild(g)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var r=this._tileCoordsToBounds(t);return B(this.options.bounds).overlaps(r)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),r=t.scaleBy(n),i=r.add(n),o=e.unproject(r,t.z),a=e.unproject(i,t.z);return[o,a]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new j(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new P(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(pe(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){be(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=u,t.onmousemove=u,Dt.ielt9&&this.options.opacity<1&&Se(t,this.options.opacity)},_addTile:function(t,e){var n=this._getTilePos(t),r=this._tileCoordsToKey(t),o=this.createTile(this._wrapCoords(t),i(this._tileReady,this,t));this._initTile(o),this.createTile.length<2&&C(i(this._tileReady,this,t,null,o)),Te(o,n),this._tiles[r]={el:o,coords:t,current:!0},e.appendChild(o),this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,e,n){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var r=this._tileCoordsToKey(t);n=this._tiles[r],n&&(n.loaded=+new Date,this._map._fadeAnimated?(Se(n.el,0),M(this._fadeFrame),this._fadeFrame=C(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(be(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Dt.ielt9||!this._map._fadeAnimated?C(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new P(this._wrapX?l(t.x,this._wrapX):t.x,this._wrapY?l(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new D(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function jr(t){return new Fr(t)}var Br=Fr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,e){this._url=t,e=f(this,e),e.detectRetina&&Dt.retina&&e.maxZoom>0?(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom=Math.min(e.maxZoom,e.minZoom+1)):(e.zoomOffset++,e.maxZoom=Math.max(e.minZoom,e.maxZoom-1)),e.minZoom=Math.max(0,e.minZoom)):e.zoomReverse?e.minZoom=Math.min(e.maxZoom,e.minZoom):e.maxZoom=Math.max(e.minZoom,e.maxZoom),"string"===typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return Fe(n,"load",i(this._tileOnLoad,this,e,n)),Fe(n,"error",i(this._tileOnError,this,e,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"===typeof this.options.referrerPolicy&&(n.referrerPolicy=this.options.referrerPolicy),n.alt="",n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:Dt.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var r=this._globalTileRange.max.y-t.y;this.options.tms&&(e["y"]=r),e["-y"]=r}return m(this._url,n(e,this.options))},_tileOnLoad:function(t,e){Dt.ielt9?setTimeout(i(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var r=this.options.errorTileUrl;r&&e.getAttribute("src")!==r&&(e.src=r),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,n=this.options.zoomReverse,r=this.options.zoomOffset;return n&&(t=e-t),t+r},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(e=this._tiles[t].el,e.onload=u,e.onerror=u,!e.complete)){e.src=b;var n=this._tiles[t].coords;pe(e),delete this._tiles[t],this.fire("tileabort",{tile:e,coords:n})}},_removeTile:function(t){var e=this._tiles[t];if(e)return e.el.setAttribute("src",b),Fr.prototype._removeTile.call(this,t)},_tileReady:function(t,e,n){if(this._map&&(!n||n.getAttribute("src")!==b))return Fr.prototype._tileReady.call(this,t,e,n)}});function zr(t,e){return new Br(t,e)}var Ur=Br.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var r=n({},this.defaultWmsParams);for(var i in e)i in this.options||(r[i]=e[i]);e=f(this,e);var o=e.detectRetina&&Dt.retina?2:1,a=this.getTileSize();r.width=a.x*o,r.height=a.y*o,this.wmsParams=r},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,Br.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,r=F(n.project(e[0]),n.project(e[1])),i=r.min,o=r.max,a=(this._wmsVersion>=1.3&&this._crs===Vn?[i.y,i.x,o.y,o.x]:[i.x,i.y,o.x,o.y]).join(","),s=Br.prototype.getTileUrl.call(this,t);return s+p(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+a},setParams:function(t,e){return n(this.wmsParams,t),e||this.redraw(),this}});function Gr(t,e){return new Ur(t,e)}Br.WMS=Ur,zr.wms=Gr;var qr=Wn.extend({options:{padding:.1},initialize:function(t){f(this,t),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),be(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),r=this._map.getSize().multiplyBy(.5+this.options.padding),i=this._map.project(this._center,e),o=r.multiplyBy(-n).add(i).subtract(this._map._getNewPixelOrigin(t,e));Dt.any3d?Me(this._container,o,n):Te(this._container,o)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new D(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Vr=qr.extend({options:{tolerance:0},getEvents:function(){var t=qr.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){qr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Fe(t,"mousemove",this._onMouseMove,this),Fe(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Fe(t,"mouseout",this._handleMouseOut,this),t["_leaflet_disable_events"]=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){M(this._redrawRequest),delete this._ctx,pe(this._container),Be(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;for(var e in this._redrawBounds=null,this._layers)t=this._layers[e],t._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){qr.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),r=Dt.retina?2:1;Te(e,t.min),e.width=r*n.x,e.height=r*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",Dt.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){qr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[a(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,r=e.prev;n?n.prev=r:this._drawLast=r,r?r.next=n:this._drawFirst=n,delete t._order,delete this._layers[a(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"===typeof t.options.dashArray){var e,n,r=t.options.dashArray.split(/[, ]+/),i=[];for(n=0;n<r.length;n++){if(e=Number(r[n]),isNaN(e))return;i.push(e)}t.options._dashArray=i}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||C(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new D,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var r=this._drawFirst;r;r=r.next)t=r.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,r,i,o,a=t._parts,s=a.length,l=this._ctx;if(s){for(l.beginPath(),n=0;n<s;n++){for(r=0,i=a[n].length;r<i;r++)o=a[n][r],l[r?"lineTo":"moveTo"](o.x,o.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,r=Math.max(Math.round(t._radius),1),i=(Math.max(Math.round(t._radiusY),1)||r)/r;1!==i&&(n.save(),n.scale(1,i)),n.beginPath(),n.arc(e.x,e.y/i,r,0,2*Math.PI,!1),1!==i&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,r=this._map.mouseEventToLayerPoint(t),i=this._drawFirst;i;i=i.next)e=i.layer,e.options.interactive&&e._containsPoint(r)&&("click"!==t.type&&"preclick"!==t.type||!this._map._draggableMoved(e))&&(n=e);this._fireEvent(!!n&&[n],t)},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(_e(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var n,r,o=this._drawFirst;o;o=o.next)n=o.layer,n.options.interactive&&n._containsPoint(e)&&(r=n);r!==this._hoveredLayer&&(this._handleMouseOut(t),r&&(be(this._container,"leaflet-interactive"),this._fireEvent([r],t,"mouseover"),this._hoveredLayer=r)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(i((function(){this._mouseHoverThrottled=!1}),this),32)}},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var n=e.next,r=e.prev;n&&(n.prev=r,r?r.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))}},_bringToBack:function(t){var e=t._order;if(e){var n=e.next,r=e.prev;r&&(r.next=n,n?n.prev=r:r&&(this._drawLast=r),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}});function Hr(t){return Dt.canvas?new Vr(t):null}var Wr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Yr={_initContainer:function(){this._container=fe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(qr.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=Wr("shape");be(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=Wr("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[a(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;pe(e),t.removeInteractiveTarget(e),delete this._layers[a(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,r=t.options,i=t._container;i.stroked=!!r.stroke,i.filled=!!r.fill,r.stroke?(e||(e=t._stroke=Wr("stroke")),i.appendChild(e),e.weight=r.weight+"px",e.color=r.color,e.opacity=r.opacity,r.dashArray?e.dashStyle=y(r.dashArray)?r.dashArray.join(" "):r.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=r.lineCap.replace("butt","flat"),e.joinstyle=r.lineJoin):e&&(i.removeChild(e),t._stroke=null),r.fill?(n||(n=t._fill=Wr("fill")),i.appendChild(n),n.color=r.fillColor||r.color,n.opacity=r.fillOpacity):n&&(i.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),r=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+r+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){me(t._container)},_bringToBack:function(t){ye(t._container)}},Xr=Dt.vml?Wr:Z,Jr=qr.extend({_initContainer:function(){this._container=Xr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Xr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){pe(this._container),Be(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){qr.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),Te(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=Xr("path");t.options.className&&be(e,t.options.className),t.options.interactive&&be(e,"leaflet-interactive"),this._updateStyle(t),this._layers[a(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){pe(t._path),t.removeInteractiveTarget(t._path),delete this._layers[a(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,K(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),r=Math.max(Math.round(t._radiusY),1)||n,i="a"+n+","+r+" 0 1,0 ",o=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+i+2*n+",0 "+i+2*-n+",0 ";this._setPath(t,o)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){me(t._path)},_bringToBack:function(t){ye(t._path)}});function Zr(t){return Dt.svg||Dt.vml?new Jr(t):null}Dt.vml&&Jr.include(Yr),nn.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&Hr(t)||Zr(t)}});var Kr=cr.extend({initialize:function(t,e){cr.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=B(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Qr(t,e){return new Kr(t,e)}Jr.create=Xr,Jr.pointsToPath=K,dr.geometryToLayer=fr,dr.coordsToLatLng=gr,dr.coordsToLatLngs=mr,dr.latLngToCoords=yr,dr.latLngsToCoords=vr,dr.getFeature=br,dr.asFeature=_r,nn.mergeOptions({boxZoom:!0});var $r=mn.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Fe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Be(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){pe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),re(),ke(),this._startPoint=this._map.mouseEventToContainerPoint(t),Fe(document,{contextmenu:Xe,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=fe("div","leaflet-zoom-box",this._container),be(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new D(this._point,this._startPoint),n=e.getSize();Te(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(pe(this._box),_e(this._container,"leaflet-crosshair")),ie(),Ie(),Be(document,{contextmenu:Xe,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0);var e=new j(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});nn.addInitHook("addHandler","boxZoom",$r),nn.mergeOptions({doubleClickZoom:!0});var ti=mn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),r=e.options.zoomDelta,i=t.originalEvent.shiftKey?n-r:n+r;"center"===e.options.doubleClickZoom?e.setZoom(i):e.setZoomAround(t.containerPoint,i)}});nn.addInitHook("addHandler","doubleClickZoom",ti),nn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ei=mn.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new bn(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}be(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){_e(this._map._container,"leaflet-grab"),_e(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=B(this._map.options.maxBounds);this._offsetLimit=F(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){while(this._positions.length>1&&t-this._times[0]>50)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,r=this._draggable._newPos.x,i=(r-e+n)%t+e-n,o=(r+e+n)%t-e-n,a=Math.abs(i+n)<Math.abs(o+n)?i:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(t){var e=this._map,n=e.options,r=!n.inertia||t.noInertia||this._times.length<2;if(e.fire("dragend",t),r)e.fire("moveend");else{this._prunePositions(+new Date);var i=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,a=n.easeLinearity,s=i.multiplyBy(a/o),l=s.distanceTo([0,0]),u=Math.min(n.inertiaMaxSpeed,l),c=s.multiplyBy(u/l),h=u/(n.inertiaDeceleration*a),d=c.multiplyBy(-h/2).round();d.x||d.y?(d=e._limitOffset(d,e.options.maxBounds),C((function(){e.panBy(d,{duration:h,easeLinearity:a,noMoveStart:!0,animate:!0})}))):e.fire("moveend")}}});nn.addInitHook("addHandler","dragging",ei),nn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ni=mn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Fe(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Be(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,r=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(r,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,r=this._panKeys={},i=this.keyCodes;for(e=0,n=i.left.length;e<n;e++)r[i.left[e]]=[-1*t,0];for(e=0,n=i.right.length;e<n;e++)r[i.right[e]]=[t,0];for(e=0,n=i.down.length;e<n;e++)r[i.down[e]]=[0,t];for(e=0,n=i.up.length;e<n;e++)r[i.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,r=this._zoomKeys={},i=this.keyCodes;for(e=0,n=i.zoomIn.length;e<n;e++)r[i.zoomIn[e]]=t;for(e=0,n=i.zoomOut.length;e<n;e++)r[i.zoomOut[e]]=-t},_addHooks:function(){Fe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Be(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,r=this._map;if(n in this._panKeys){if(!r._panAnim||!r._panAnim._inProgress)if(e=this._panKeys[n],t.shiftKey&&(e=R(e).multiplyBy(3)),r.options.maxBounds&&(e=r._limitOffset(R(e),r.options.maxBounds)),r.options.worldCopyJump){var i=r.wrapLatLng(r.unproject(r.project(r.getCenter()).add(e)));r.panTo(i)}else r.panBy(e)}else if(n in this._zoomKeys)r.setZoom(r.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!r._popup||!r._popup.options.closeOnEscapeKey)return;r.closePopup()}Xe(t)}}});nn.addInitHook("addHandler","keyboard",ni),nn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ri=mn.extend({addHooks:function(){Fe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Be(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=Qe(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var r=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),r),Xe(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var r=this._delta/(4*this._map.options.wheelPxPerZoomLevel),i=4*Math.log(2/(1+Math.exp(-Math.abs(r))))/Math.LN2,o=n?Math.ceil(i/n)*n:i,a=t._limitZoom(e+(this._delta>0?o:-o))-e;this._delta=0,this._startTime=null,a&&("center"===t.options.scrollWheelZoom?t.setZoom(e+a):t.setZoomAround(this._lastMousePos,e+a))}});nn.addInitHook("addHandler","scrollWheelZoom",ri);var ii=600;nn.mergeOptions({tapHold:Dt.touchNative&&Dt.safari&&Dt.mobile,tapTolerance:15});var oi=mn.extend({addHooks:function(){Fe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Be(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),1===t.touches.length){var e=t.touches[0];this._startPos=this._newPos=new P(e.clientX,e.clientY),this._holdTimeout=setTimeout(i((function(){this._cancel(),this._isTapValid()&&(Fe(document,"touchend",Ye),Fe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",e))}),this),ii),Fe(document,"touchend touchcancel contextmenu",this._cancel,this),Fe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){Be(document,"touchend",Ye),Be(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),Be(document,"touchend touchcancel contextmenu",this._cancel,this),Be(document,"touchmove",this._onMove,this)},_onMove:function(t){var e=t.touches[0];this._newPos=new P(e.clientX,e.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,e){var n=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY});n._simulated=!0,e.target.dispatchEvent(n)}});nn.addInitHook("addHandler","tapHold",oi),nn.mergeOptions({touchZoom:Dt.touch,bounceAtZoomLimits:!0});var ai=mn.extend({addHooks:function(){be(this._map._container,"leaflet-touch-zoom"),Fe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){_e(this._map._container,"leaflet-touch-zoom"),Be(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(r)._divideBy(2))),this._startDist=n.distanceTo(r),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),Fe(document,"touchmove",this._onTouchMove,this),Fe(document,"touchend touchcancel",this._onTouchEnd,this),Ye(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]),o=n.distanceTo(r)/this._startDist;if(this._zoom=e.getScaleZoom(o,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&o<1||this._zoom>e.getMaxZoom()&&o>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var a=n._add(r)._divideBy(2)._subtract(this._centerPoint);if(1===o&&0===a.x&&0===a.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(a),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),M(this._animRequest);var s=i(e._move,e,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=C(s,this,!0),Ye(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,M(this._animRequest),Be(document,"touchmove",this._onTouchMove,this),Be(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});nn.addInitHook("addHandler","touchZoom",ai),nn.BoxZoom=$r,nn.DoubleClickZoom=ti,nn.Drag=ei,nn.Keyboard=ni,nn.ScrollWheelZoom=ri,nn.TapHold=oi,nn.TouchZoom=ai,t.Bounds=D,t.Browser=Dt,t.CRS=G,t.Canvas=Vr,t.Circle=ar,t.CircleMarker=ir,t.Class=A,t.Control=on,t.DivIcon=Rr,t.DivOverlay=kr,t.DomEvent=tn,t.DomUtil=De,t.Draggable=bn,t.Evented=I,t.FeatureGroup=Jn,t.GeoJSON=dr,t.GridLayer=Fr,t.Handler=mn,t.Icon=Kn,t.ImageOverlay=Er,t.LatLng=z,t.LatLngBounds=j,t.Layer=Wn,t.LayerGroup=Yn,t.LineUtil=Bn,t.Map=nn,t.Marker=er,t.Mixin=yn,t.Path=rr,t.Point=P,t.PolyUtil=En,t.Polygon=cr,t.Polyline=lr,t.Popup=Ir,t.PosAnimation=en,t.Projection=Gn,t.Rectangle=Kr,t.Renderer=qr,t.SVG=Jr,t.SVGOverlay=Ar,t.TileLayer=Br,t.Tooltip=Lr,t.Transformation=W,t.Util=T,t.VideoOverlay=Mr,t.bind=i,t.bounds=F,t.canvas=Hr,t.circle=sr,t.circleMarker=or,t.control=an,t.divIcon=Dr,t.extend=n,t.featureGroup=Zn,t.geoJSON=wr,t.geoJson=Sr,t.gridLayer=jr,t.icon=Qn,t.imageOverlay=Cr,t.latLng=U,t.latLngBounds=B,t.layerGroup=Xn,t.map=rn,t.marker=nr,t.point=R,t.polygon=hr,t.polyline=ur,t.popup=Pr,t.rectangle=Qr,t.setOptions=f,t.stamp=a,t.svg=Zr,t.svgOverlay=Or,t.tileLayer=zr,t.tooltip=Nr,t.transformation=Y,t.version=e,t.videoOverlay=Tr;var si=window.L;t.noConflict=function(){return window.L=si,this},window.L=t}))},e1c6:function(t,e){},e1ff:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(n("6fc0")),a=n("1de0"),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(o.default),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(a.Graph),u=function(){return 1},c=function(t,e){var n;if(t.nodeCount()<=1)return[];var r=f(t,e||u),i=h(r.graph,r.buckets,r.zeroIdx);return null===(n=i.map((function(e){return t.outEdges(e.v,e.w)})))||void 0===n?void 0:n.flat()},h=function(t,e,n){var r,i=[],o=e[e.length-1],a=e[0];while(t.nodeCount()){while(r=a.dequeue())d(t,e,n,r);while(r=o.dequeue())d(t,e,n,r);if(t.nodeCount())for(var s=e.length-2;s>0;--s)if(r=e[s].dequeue(),r){i=i.concat(d(t,e,n,r,!0));break}}return i},d=function(t,e,n,r,i){var o,a,s=[];return null===(o=t.inEdges(r.v))||void 0===o||o.forEach((function(r){var o=t.edge(r),a=t.node(r.v);i&&s.push({v:r.v,w:r.w,in:0,out:0}),void 0===a.out&&(a.out=0),a.out-=o,p(e,n,a)})),null===(a=t.outEdges(r.v))||void 0===a||a.forEach((function(r){var i=t.edge(r),o=r.w,a=t.node(o);void 0===a.in&&(a.in=0),a.in-=i,p(e,n,a)})),t.removeNode(r.v),i?s:void 0},f=function(t,e){var n=new l,r=0,i=0;t.nodes().forEach((function(t){n.setNode(t,{v:t,in:0,out:0})})),t.edges().forEach((function(t){var o=n.edge(t)||0,a=(null===e||void 0===e?void 0:e(t))||1,s=o+a;n.setEdge(t.v,t.w,s),i=Math.max(i,n.node(t.v).out+=a),r=Math.max(r,n.node(t.w).in+=a)}));for(var o=[],a=i+r+3,u=0;u<a;u++)o.push(new s);var c=r+1;return n.nodes().forEach((function(t){p(o,c,n.node(t))})),{buckets:o,zeroIdx:c,graph:n}},p=function(t,e,n){n.out?n["in"]?t[n.out-n["in"]+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)};e.default=c},e50d:function(t,e,n){n("8172"),n("efec"),n("a4d3"),n("e01a"),n("d3b7"),n("d9e2"),n("a9e3");var r=n("7037")["default"];function i(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}t.exports=i,t.exports.__esModule=!0,t.exports["default"]=t.exports},e563:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["ignore_unavailable","allow_no_indices","expand_wildcards","operation_threading","verbose","pretty","human","error_trace","source","filter_path"],a={ignoreUnavailable:"ignore_unavailable",allowNoIndices:"allow_no_indices",expandWildcards:"expand_wildcards",operationThreading:"operation_threading",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,...f}=t;f=i(o,a,f,u),null==c&&(c="GET");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g=null!=d?"/"+encodeURIComponent(d)+"/_segments":"/_segments";const m={method:c,path:g,body:null,querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},e5e2:function(t,e,n){"use strict";var r=function(){function t(t,e){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=t,this.name=t,this.originalEvent=e,this.timeStamp=e.timeStamp}return t.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t.prototype.toString=function(){var t=this.type;return"[Event (type="+t+")]"},t.prototype.save=function(){},t.prototype.restore=function(){},t}();e["a"]=r},e6a5:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["wait_for_active_shards","fields","_source","_source_exclude","_source_include","lang","parent","refresh","retry_on_conflict","routing","timeout","timestamp","ttl","version","version_type","pretty","human","error_trace","source","filter_path"],a={waitForActiveShards:"wait_for_active_shards",_sourceExclude:"_source_exclude",_sourceInclude:"_source_include",retryOnConflict:"retry_on_conflict",versionType:"version_type",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["id"]){const t=new n("Missing required parameter: id");return r(t,l)}if(null==t["index"]){const t=new n("Missing required parameter: index");return r(t,l)}if(null==t["type"]){const t=new n("Missing required parameter: type");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,id:d,index:f,type:p,...g}=t;g=i(o,a,g,u),null==c&&(c="POST");var m=s.ignore;"number"===typeof m&&(s.ignore=[m]);var y="";y="/"+encodeURIComponent(f)+"/"+encodeURIComponent(p)+"/"+encodeURIComponent(d)+"/_update";const v={method:c,path:y,body:h||"",querystring:g};return s.warnings=0===u.length?null:u,e(v,s,l)}}t.exports=r},e6ce:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["nodes","actions","detailed","parent_node","parent_task_id","wait_for_completion","group_by","pretty","human","error_trace","source","filter_path"],a={parentNode:"parent_node",parentTaskId:"parent_task_id",waitForCompletion:"wait_for_completion",groupBy:"group_by",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,...d}=t;d=i(o,a,d,u),null==c&&(c="GET");var f=s.ignore;"number"===typeof f&&(s.ignore=[f]);var p="";p="/_tasks";const g={method:c,path:p,body:null,querystring:d};return s.warnings=0===u.length?null:u,e(g,s,l)}}t.exports=r},e70d:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["wait_for_active_shards","parent","refresh","routing","timeout","version","version_type","pretty","human","error_trace","source","filter_path"],a={waitForActiveShards:"wait_for_active_shards",versionType:"version_type",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["id"]){const t=new n("Missing required parameter: id");return r(t,l)}if(null==t["index"]){const t=new n("Missing required parameter: index");return r(t,l)}if(null==t["type"]){const t=new n("Missing required parameter: type");return r(t,l)}if(null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=t["id"]&&(null==t["type"]||null==t["index"])){const t=new n("Missing required parameter of the url: type, index");return r(t,l)}if(null!=t["type"]&&null==t["index"]){const t=new n("Missing required parameter of the url: index");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,id:d,index:f,type:p,...g}=t;g=i(o,a,g,u),null==c&&(c="DELETE");var m=s.ignore;"number"===typeof m&&(s.ignore=[m]);var y="";y="/"+encodeURIComponent(f)+"/"+encodeURIComponent(p)+"/"+encodeURIComponent(d);const v={method:c,path:y,body:"",querystring:g};return s.warnings=0===u.length?null:u,e(v,s,l)}}t.exports=r},e73e:function(t,e,n){"use strict";var r=n("9ab4"),i=n("6855"),o=n("8937"),a=n("68de"),s=n("7349"),l=n("00f9"),u=n("22f9"),c=n("73ec"),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r["__extends"])(e,t),e.prototype.isEntityGroup=function(){return!0},e.prototype.createDom=function(){var t=Object(c["b"])("g");this.set("el",t);var e=this.getParent();if(e){var n=e.get("el");n||(n=e.createDom(),e.set("el",n)),n.appendChild(t)}return t},e.prototype.afterAttrsChange=function(e){t.prototype.afterAttrsChange.call(this,e);var n=this.get("canvas");if(n&&n.get("autoDraw")){var r=n.get("context");this.createPath(r,e)}},e.prototype.onCanvasChange=function(t){Object(s["b"])(this,t)},e.prototype.getShapeBase=function(){return a},e.prototype.getGroupBase=function(){return e},e.prototype.draw=function(t){var e=this.getChildren(),n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||this.createDom(),Object(l["a"])(this,t),this.createPath(t),e.length&&Object(s["a"])(t,e))},e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");Object(o["each"])(e||n,(function(t,e){u["b"][e]&&r.setAttribute(u["b"][e],t)})),Object(l["c"])(this)},e}(i["AbstractGroup"]);e["a"]=h},e897:function(t,e,n){"use strict";n.d(e,"b",(function(){return i["mat3"]})),n.d(e,"c",(function(){return i["vec2"]})),n.d(e,"d",(function(){return i["vec3"]})),n.d(e,"a",(function(){return r}));var r={};n.r(r),n.d(r,"leftTranslate",(function(){return o})),n.d(r,"leftRotate",(function(){return a})),n.d(r,"leftScale",(function(){return s})),n.d(r,"transform",(function(){return u})),n.d(r,"direction",(function(){return c})),n.d(r,"angleTo",(function(){return h})),n.d(r,"vertical",(function(){return d}));var i=n("20e73");function o(t,e,n){var r=[0,0,0,0,0,0,0,0,0];return i["mat3"].fromTranslation(r,n),i["mat3"].multiply(t,r,e)}function a(t,e,n){var r=[0,0,0,0,0,0,0,0,0];return i["mat3"].fromRotation(r,n),i["mat3"].multiply(t,r,e)}function s(t,e,n){var r=[0,0,0,0,0,0,0,0,0];return i["mat3"].fromScaling(r,n),i["mat3"].multiply(t,r,e)}function l(t,e,n){return i["mat3"].multiply(t,n,e)}function u(t,e){for(var n=t?[].concat(t):[1,0,0,0,1,0,0,0,1],r=0,i=e.length;r<i;r++){var u=e[r];switch(u[0]){case"t":o(n,n,[u[1],u[2]]);break;case"s":s(n,n,[u[1],u[2]]);break;case"r":a(n,n,u[1]);break;case"m":l(n,n,u[1]);break;default:break}}return n}function c(t,e){return t[0]*e[1]-e[0]*t[1]}function h(t,e,n){var r=i["vec2"].angle(t,e),o=c(t,e)>=0;return n?o?2*Math.PI-r:r:o?r:2*Math.PI-r}function d(t,e,n){return n?(t[0]=e[1],t[1]=-1*e[0]):(t[0]=-1*e[1],t[1]=e[0]),t}},e8ee:function(t,e,n){"use strict";var r=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0});var i=n("7908"),o=n("1d7c"),a=function(t){var e=(0,i.buildLayerMatrix)(t),n=t.graph().ranksep,o=0;null===e||void 0===e||e.forEach((function(e){var i=e.map((function(e){return t.node(e).height})),a=Math.max.apply(Math,r(r([],i,!1),[0],!1));null===e||void 0===e||e.forEach((function(e){t.node(e).y=o+a/2})),o+=a+n}))},s=function(t){var e=(0,i.buildLayerMatrix)(t),n=Object.assign((0,o.findType1Conflicts)(t,e),(0,o.findType2Conflicts)(t,e)),r={},a=[];["u","d"].forEach((function(i){a="u"===i?e:Object.values(e).reverse(),["l","r"].forEach((function(e){"r"===e&&(a=a.map((function(t){return Object.values(t).reverse()})));var s=("u"===i?t.predecessors:t.successors).bind(t),l=(0,o.verticalAlignment)(t,a,n,s),u=(0,o.horizontalCompaction)(t,a,l.root,l.align,"r"===e);"r"===e&&Object.keys(u).forEach((function(t){return u[t]=-u[t]})),r[i+e]=u}))}));var s=(0,o.findSmallestWidthAlignment)(t,r);return s&&(0,o.alignCoordinates)(r,s),(0,o.balance)(r,t.graph().align)},l=function(t){var e,n=(0,i.asNonCompoundGraph)(t);a(n);var r=s(n);null===(e=Object.keys(r))||void 0===e||e.forEach((function(t){n.node(t).x=r[t]}))};e.default=l},e901:function(t,e,n){(function(e){"use strict";if(e.__disableNativeFetch||!e.fetch){s.prototype.append=function(t,e){t=o(t),e=a(e);var n=this.map[t];n||(n=[],this.map[t]=n),n.push(e)},s.prototype["delete"]=function(t){delete this.map[o(t)]},s.prototype.get=function(t){var e=this.map[o(t)];return e?e[0]:null},s.prototype.getAll=function(t){return this.map[o(t)]||[]},s.prototype.has=function(t){return this.map.hasOwnProperty(o(t))},s.prototype.set=function(t,e){this.map[o(t)]=[a(e)]},s.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach((function(n){this.map[n].forEach((function(r){t.call(e,r,n,this)}),this)}),this)};var n={blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e},r=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this)},d.call(p.prototype),d.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new s(this.headers),url:this.url})},y.error=function(){var t=new y(null,{status:0,statusText:""});return t.type="error",t};var i=[301,302,303,307,308];y.redirect=function(t,e){if(-1===i.indexOf(e))throw new RangeError("Invalid status code");return new y(null,{status:e,headers:{location:t}})},e.Headers=s,e.Request=p,e.Response=y,e.fetch=function(t,e){return new Promise((function(r,i){var o;o=p.prototype.isPrototypeOf(t)&&!e?t:new p(t,e);var a=new XMLHttpRequest;function s(){return"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0}var l=!1;function u(){if(4===a.readyState){var t=1223===a.status?204:a.status;if(t<100||t>599){if(l)return;return l=!0,void i(new TypeError("Network request failed"))}var e={status:t,statusText:a.statusText,headers:m(a),url:s()},n="response"in a?a.response:a.responseText;l||(l=!0,r(new y(n,e)))}}a.onreadystatechange=u,a.onload=u,a.onerror=function(){l||(l=!0,i(new TypeError("Network request failed")))},a.open(o.method,o.url,!0);try{"include"===o.credentials&&("withCredentials"in a?a.withCredentials=!0:console&&console.warn&&console.warn("withCredentials is not supported, you can ignore this warning"))}catch(c){console&&console.warn&&console.warn("set withCredentials error:"+c)}"responseType"in a&&n.blob&&(a.responseType="blob"),o.headers.forEach((function(t,e){a.setRequestHeader(e,t)})),a.send("undefined"===typeof o._bodyInit?null:o._bodyInit)}))},e.fetch.polyfill=!0,t.exports&&(t.exports=e.fetch)}function o(t){if("string"!==typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function a(t){return"string"!==typeof t&&(t=String(t)),t}function s(t){this.map={},t instanceof s?t.forEach((function(t,e){this.append(e,t)}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function l(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function u(t){return new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function c(t){var e=new FileReader;return e.readAsArrayBuffer(t),u(e)}function h(t,e){var n=new FileReader,r=e.headers.map["content-type"]?e.headers.map["content-type"].toString():"",i=/charset\=[0-9a-zA-Z\-\_]*;?/,o=t.type.match(i)||r.match(i),a=[t];return o&&a.push(o[0].replace(/^charset\=/,"").replace(/;$/,"")),n.readAsText.apply(n,a),u(n)}function d(){return this.bodyUsed=!1,this._initBody=function(t,e){if(this._bodyInit=t,"string"===typeof t)this._bodyText=t;else if(n.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t,this._options=e;else if(n.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(t){if(!n.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t))throw new Error("unsupported BodyInit type")}else this._bodyText=""},n.blob?(this.blob=function(){var t=l(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(c)},this.text=function(){var t=l(this);if(t)return t;if(this._bodyBlob)return h(this._bodyBlob,this._options);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var t=l(this);return t||Promise.resolve(this._bodyText)},n.formData&&(this.formData=function(){return this.text().then(g)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(t){var e=t.toUpperCase();return r.indexOf(e)>-1?e:t}function p(t,e){e=e||{};var n=e.body;if(p.prototype.isPrototypeOf(t)){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new s(t.headers)),this.method=t.method,this.mode=t.mode,n||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=t;if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new s(e.headers)),this.method=f(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n,e)}function g(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}})),e}function m(t){var e=new s,n=t.getAllResponseHeaders().trim().split("\n");return n.forEach((function(t){var n=t.trim().split(":"),r=n.shift().trim(),i=n.join(":").trim();e.append(r,i)})),e}function y(t,e){e||(e={}),this._initBody(t,e),this.type="default",this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof s?e.headers:new s(e.headers),this.url=e.url||""}})("undefined"!==typeof self?self:this)},e929:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["flat_settings","timeout","pretty","human","error_trace","source","filter_path"],a={flatSettings:"flat_settings",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,nodeId:d,node_id:f,metric:p,...g}=t;g=i(o,a,g,u),null==c&&(c="GET");var m=s.ignore;"number"===typeof m&&(s.ignore=[m]);var y="";y=null!=(f||d)&&null!=p?"/_nodes/"+encodeURIComponent(f||d)+"/"+encodeURIComponent(p):null!=(f||d)?"/_nodes/"+encodeURIComponent(f||d):null!=p?"/_nodes/"+encodeURIComponent(p):"/_nodes";const v={method:c,path:y,body:null,querystring:g};return s.warnings=0===u.length?null:u,e(v,s,l)}}t.exports=r},e98d:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.pageRankAsync=e.minimumSpanningTreeAsync=e.louvainAsync=e.labelPropagationAsync=e.getOutDegreeAsync=e.getNeighborsAsync=e.getInDegreeAsync=e.getDegreeAsync=e.getAdjMatrixAsync=e.floydWarshallAsync=e.findShortestPathAsync=e.findAllPathAsync=e.dijkstraAsync=e.detectCycleAsync=e.detectAllUndirectedCycleAsync=e.detectAllDirectedCycleAsync=e.detectAllCyclesAsync=e.connectedComponentAsync=e.GADDIAsync=void 0;var r=o(n("c0d2")),i=n("9023");function o(t){return t&&t.__esModule?t:{default:t}}var a=function(t,e){return(0,r.default)(i.ALGORITHM.getAdjMatrix).apply(void 0,[t,e])};e.getAdjMatrixAsync=a;var s=function(t,e){return(0,r.default)(i.ALGORITHM.connectedComponent).apply(void 0,[t,e])};e.connectedComponentAsync=s;var l=function(t){return(0,r.default)(i.ALGORITHM.getDegree)(t)};e.getDegreeAsync=l;var u=function(t,e){return(0,r.default)(i.ALGORITHM.getInDegree)(t,e)};e.getInDegreeAsync=u;var c=function(t,e){return(0,r.default)(i.ALGORITHM.getOutDegree)(t,e)};e.getOutDegreeAsync=c;var h=function(t){return(0,r.default)(i.ALGORITHM.detectCycle)(t)};e.detectCycleAsync=h;var d=function(t){return(0,r.default)(i.ALGORITHM.detectAllCycles)(t)};e.detectAllCyclesAsync=d;var f=function(t){return(0,r.default)(i.ALGORITHM.detectAllDirectedCycle)(t)};e.detectAllDirectedCycleAsync=f;var p=function(t){return(0,r.default)(i.ALGORITHM.detectAllUndirectedCycle)(t)};e.detectAllUndirectedCycleAsync=p;var g=function(t,e,n,o){return(0,r.default)(i.ALGORITHM.dijkstra).apply(void 0,[t,e,n,o])};e.dijkstraAsync=g;var m=function(t,e,n,o){return(0,r.default)(i.ALGORITHM.findAllPath).apply(void 0,[t,e,n,o])};e.findAllPathAsync=m;var y=function(t,e,n,o,a){return(0,r.default)(i.ALGORITHM.findShortestPath).apply(void 0,[t,e,n,o,a])};e.findShortestPathAsync=y;var v=function(t,e){return(0,r.default)(i.ALGORITHM.floydWarshall).apply(void 0,[t,e])};e.floydWarshallAsync=v;var b=function(t,e,n,o){return void 0===o&&(o=1e3),(0,r.default)(i.ALGORITHM.labelPropagation)(t,e,n,o)};e.labelPropagationAsync=b;var _=function(t,e,n,o){return(0,r.default)(i.ALGORITHM.louvain)(t,e,n,o)};e.louvainAsync=_;var x=function(t,e,n){return(0,r.default)(i.ALGORITHM.minimumSpanningTree).apply(void 0,[t,e,n])};e.minimumSpanningTreeAsync=x;var w=function(t,e,n){return(0,r.default)(i.ALGORITHM.pageRank).apply(void 0,[t,e,n])};e.pageRankAsync=w;var S=function(t,e,n){return(0,r.default)(i.ALGORITHM.getNeighbors).apply(void 0,[t,e,n])};e.getNeighborsAsync=S;var E=function(t,e,n,o,a,s,l){return void 0===n&&(n=!1),void 0===s&&(s="cluster"),void 0===l&&(l="cluster"),(0,r.default)(i.ALGORITHM.GADDI).apply(void 0,[t,e,n,o,a,s,l])};e.GADDIAsync=E},e9d0:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["term_statistics","field_statistics","fields","offsets","positions","payloads","preference","routing","parent","realtime","version","version_type","pretty","human","error_trace","source","filter_path"],a={termStatistics:"term_statistics",fieldStatistics:"field_statistics",versionType:"version_type",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["index"]){const t=new n("Missing required parameter: index");return r(t,l)}if(null==t["type"]){const t=new n("Missing required parameter: type");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,type:f,id:p,...g}=t;g=i(o,a,g,u),null==c&&(c=null==h?"GET":"POST");var m=s.ignore;"number"===typeof m&&(s.ignore=[m]);var y="";y=null!=d&&null!=f&&null!=p?"/"+encodeURIComponent(d)+"/"+encodeURIComponent(f)+"/"+encodeURIComponent(p)+"/_termvectors":"/"+encodeURIComponent(d)+"/"+encodeURIComponent(f)+"/_termvectors";const v={method:c,path:y,body:h||"",querystring:g};return s.warnings=0===u.length?null:u,e(v,s,l)}}t.exports=r},e9f1:function(t,e,n){"use strict";class r extends Error{constructor(t){super(t),this.name="ElasticsearchClientError"}}class i extends r{constructor(t,e){super(t),Error.captureStackTrace(this,i),this.name="TimeoutError",this.message=t||"Timeout Error",this.meta=e}}class o extends r{constructor(t,e){super(t),Error.captureStackTrace(this,o),this.name="ConnectionError",this.message=t||"Connection Error",this.meta=e}}class a extends r{constructor(t,e){super(t),Error.captureStackTrace(this,a),this.name="NoLivingConnectionsError",this.message=t||"No Living Connections Error",this.meta=e}}class s extends r{constructor(t){super(t),Error.captureStackTrace(this,s),this.name="SerializationError",this.message=t||"Serialization Error"}}class l extends r{constructor(t){super(t),Error.captureStackTrace(this,l),this.name="DeserializationError",this.message=t||"Deserialization Error"}}class u extends r{constructor(t){super(t),Error.captureStackTrace(this,u),this.name="ConfigurationError",this.message=t||"Configuration Error"}}class c extends r{constructor(t){super("Response Error"),Error.captureStackTrace(this,c),this.name="ResponseError",this.message=t.body&&t.body.error&&t.body.error.type||"Response Error",this.meta=t}get body(){return this.meta.body}get statusCode(){return this.meta.body&&"number"===typeof this.meta.body.status?this.meta.body.status:this.meta.statusCode}get headers(){return this.meta.headers}}t.exports={ElasticsearchClientError:r,TimeoutError:i,ConnectionError:o,NoLivingConnectionsError:a,SerializationError:s,DeserializationError:l,ConfigurationError:u,ResponseError:c}},ea9c:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["timeout","master_timeout","ignore_unavailable","allow_no_indices","expand_wildcards","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",ignoreUnavailable:"ignore_unavailable",allowNoIndices:"allow_no_indices",expandWildcards:"expand_wildcards",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["index"]){const t=new n("Missing required parameter: index");return r(t,l)}if(null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,...f}=t;f=i(o,a,f,u),null==c&&(c="POST");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g="/"+encodeURIComponent(d)+"/_open";const m={method:c,path:g,body:"",querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},ebde:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["status","ignore_unavailable","allow_no_indices","expand_wildcards","operation_threading","pretty","human","error_trace","source","filter_path"],a={ignoreUnavailable:"ignore_unavailable",allowNoIndices:"allow_no_indices",expandWildcards:"expand_wildcards",operationThreading:"operation_threading",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,...f}=t;f=i(o,a,f,u),null==c&&(c="GET");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g=null!=d?"/"+encodeURIComponent(d)+"/_shard_stores":"/_shard_stores";const m={method:c,path:g,body:null,querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},ec38:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["stored_fields","parent","preference","realtime","refresh","routing","_source","_source_exclude","_source_include","version","version_type","pretty","human","error_trace","source","filter_path"],a={storedFields:"stored_fields",_sourceExclude:"_source_exclude",_sourceInclude:"_source_include",versionType:"version_type",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["id"]){const t=new n("Missing required parameter: id");return r(t,l)}if(null==t["index"]){const t=new n("Missing required parameter: index");return r(t,l)}if(null==t["type"]){const t=new n("Missing required parameter: type");return r(t,l)}if(null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,id:d,index:f,type:p,...g}=t;g=i(o,a,g,u),null==c&&(c="HEAD");var m=s.ignore;"number"===typeof m&&(s.ignore=[m]);var y="";y="/"+encodeURIComponent(f)+"/"+encodeURIComponent(p)+"/"+encodeURIComponent(d);const v={method:c,path:y,body:null,querystring:g};return s.warnings=0===u.length?null:u,e(v,s,l)}}t.exports=r},ee39:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["ignore_unavailable","allow_no_indices","expand_wildcards","pretty","human","error_trace","source","filter_path"],a={ignoreUnavailable:"ignore_unavailable",allowNoIndices:"allow_no_indices",expandWildcards:"expand_wildcards",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,...f}=t;f=i(o,a,f,u),null==c&&(c=null==h?"GET":"POST");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g=null!=d?"/"+encodeURIComponent(d)+"/_refresh":"/_refresh";const m={method:c,path:g,body:"",querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},eeda:function(t,e,n){"use strict";function r(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}var i=r();function o(t,e,n,r){var o=i,a=r+n;t^=-1;for(var s=r;s<a;s++)t=t>>>8^o[255&(t^e[s])];return-1^t}t.exports=o},ef77:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e,n){var r,i={};null===n||void 0===n||n.forEach((function(n){var o,a,s=t.parent(n);while(s){if(o=t.parent(s),o?(a=i[o],i[o]=s):(a=r,r=s),a&&a!==s)return void e.setEdge(a,s);s=o}}))};e.default=r},ef9c:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.feasibleTreeWithLayer=e.feasibleTree=void 0;var r=n("432d"),i=n("7908"),o=n("3979"),a=function(t){var e,n,i=new o.Graph({directed:!1}),a=t.nodes()[0],l=t.nodeCount();i.setNode(a,{});while(s(i,t)<l)e=c(i,t),n=i.hasNode(e.v)?(0,r.slack)(t,e):-(0,r.slack)(t,e),h(i,t,n);return i};e.feasibleTree=a;var s=function(t,e){var n=function(i){e.nodeEdges(i).forEach((function(o){var a=o.v,s=i===a?o.w:a;t.hasNode(s)||(0,r.slack)(e,o)||(t.setNode(s,{}),t.setEdge(i,s,{}),n(s))}))};return t.nodes().forEach(n),t.nodeCount()},l=function(t){var e,n,i=new o.Graph({directed:!1}),a=t.nodes()[0],s=t.nodes().filter((function(e){return!!t.node(e)})).length;i.setNode(a,{});while(u(i,t)<s)e=c(i,t),n=i.hasNode(e.v)?(0,r.slack)(t,e):-(0,r.slack)(t,e),h(i,t,n);return i};e.feasibleTreeWithLayer=l;var u=function(t,e){var n=function(i){var o;null===(o=e.nodeEdges(i))||void 0===o||o.forEach((function(o){var a=o.v,s=i===a?o.w:a;t.hasNode(s)||void 0===e.node(s).layer&&(0,r.slack)(e,o)||(t.setNode(s,{}),t.setEdge(i,s,{}),n(s))}))};return t.nodes().forEach(n),t.nodeCount()},c=function(t,e){return(0,i.minBy)(e.edges(),(function(n){return t.hasNode(n.v)!==t.hasNode(n.w)?(0,r.slack)(e,n):1/0}))},h=function(t,e,n){t.nodes().forEach((function(t){e.node(t).rank||(e.node(t).rank=0),e.node(t).rank+=n}))};e.default={feasibleTree:a,feasibleTreeWithLayer:l}},f1fb:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["analyzer","analyze_wildcard","default_operator","df","from","ignore_unavailable","allow_no_indices","conflicts","expand_wildcards","lenient","preference","q","routing","scroll","search_type","search_timeout","size","sort","_source","_source_exclude","_source_include","terminate_after","stats","version","request_cache","refresh","timeout","wait_for_active_shards","scroll_size","wait_for_completion","requests_per_second","slices","pretty","human","error_trace","source","filter_path"],a={analyzeWildcard:"analyze_wildcard",defaultOperator:"default_operator",ignoreUnavailable:"ignore_unavailable",allowNoIndices:"allow_no_indices",expandWildcards:"expand_wildcards",searchType:"search_type",searchTimeout:"search_timeout",_sourceExclude:"_source_exclude",_sourceInclude:"_source_include",terminateAfter:"terminate_after",requestCache:"request_cache",waitForActiveShards:"wait_for_active_shards",scrollSize:"scroll_size",waitForCompletion:"wait_for_completion",requestsPerSecond:"requests_per_second",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["index"]){const t=new n("Missing required parameter: index");return r(t,l)}if(null==t["body"]){const t=new n("Missing required parameter: body");return r(t,l)}if(null!=t["type"]&&null==t["index"]){const t=new n("Missing required parameter of the url: index");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,type:f,...p}=t;p=i(o,a,p,u),null==c&&(c="POST");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m=null!=d&&null!=f?"/"+encodeURIComponent(d)+"/"+encodeURIComponent(f)+"/_delete_by_query":"/"+encodeURIComponent(d)+"/_delete_by_query";const y={method:c,path:m,body:h||"",querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},f241:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["format","full_id","local","master_timeout","h","help","s","v","pretty","human","error_trace","source","filter_path"],a={fullId:"full_id",masterTimeout:"master_timeout",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,...d}=t;d=i(o,a,d,u),null==c&&(c="GET");var f=s.ignore;"number"===typeof f&&(s.ignore=[f]);var p="";p="/_cat/nodes";const g={method:c,path:p,body:null,querystring:d};return s.warnings=0===u.length?null:u,e(g,s,l)}}t.exports=r},f271:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n("4237"),e),i(n("910e"),e),i(n("4b03"),e),i(n("19d2"),e),i(n("291d"),e),i(n("dccd"),e)},f391:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){return e.map((function(e){var n=t.inEdges(e);if(!(null===n||void 0===n?void 0:n.length))return{v:e};var r={sum:0,weight:0};return null===n||void 0===n||n.forEach((function(e){var n=t.edge(e),i=t.node(e.v);r.sum+=n.weight*i.order,r.weight+=n.weight})),{v:e,barycenter:r.sum/r.weight,weight:r.weight}}))};e.default=r},f3c1:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["flat_settings","master_timeout","local","pretty","human","error_trace","source","filter_path"],a={flatSettings:"flat_settings",masterTimeout:"master_timeout",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,name:d,...f}=t;f=i(o,a,f,u),null==c&&(c="GET");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g=null!=d?"/_template/"+encodeURIComponent(d):"/_template";const m={method:c,path:g,body:null,querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},f5e5:function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"d",(function(){return c})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return f})),n.d(e,"e",(function(){return m})),n.d(e,"h",(function(){return y})),n.d(e,"f",(function(){return b})),n.d(e,"g",(function(){return _}));var r=n("8937"),i=n("af40"),o=n("9c29"),a=n("7326"),s=n("9f27"),l={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function u(t,e){var n=e.attr();for(var o in n){var a=n[o],s=l[o]?l[o]:o;"matrix"===s&&a?t.transform(a[0],a[1],a[3],a[4],a[6],a[7]):"lineDash"===s&&t.setLineDash?Object(r["isArray"])(a)&&t.setLineDash(a):("strokeStyle"===s||"fillStyle"===s?a=Object(i["b"])(t,e,a):"globalAlpha"===s&&(a*=t.globalAlpha),t[s]=a)}}function c(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];i.cfg.visible?i.draw(t,n):i.skipDraw()}}function h(t,e,n){var i=t.get("refreshElements");Object(r["each"])(i,(function(e){if(e!==t){var n=e.cfg.parent;while(n&&n!==t&&!n.cfg.refresh)n.cfg.refresh=!0,n=n.cfg.parent}})),i[0]===t?p(e,n):d(e,n)}function d(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.cfg.visible)if(r.cfg.hasChanged)r.cfg.refresh=!0,r.isGroup()&&p(r.cfg.children,e);else if(r.cfg.refresh)r.isGroup()&&d(r.cfg.children,e);else{var i=g(r,e);r.cfg.refresh=i,i&&r.isGroup()&&d(r.cfg.children,e)}}}function f(t){for(var e=0;e<t.length;e++){var n=t[e];n.cfg.hasChanged=!1,n.isGroup()&&!n.destroyed&&f(n.cfg.children)}}function p(t,e){for(var n=0;n<t.length;n++){var r=t[n];r.cfg.visible&&(r.cfg.refresh=!0,r.isGroup()&&p(r.get("children"),e))}}function g(t,e){var n=t.cfg.cacheCanvasBBox,r=t.cfg.isInView&&n&&Object(a["f"])(n,e);return r}function m(t,e,n,r){var i=n.path,a=n.startArrow,l=n.endArrow;if(i){var u=[0,0],c=[0,0],h={dx:0,dy:0};e.beginPath();for(var d=0;d<i.length;d++){var f=i[d],p=f[0];if(0===d&&a&&a.d){var g=t.getStartTangent();h=s["c"](g[0][0],g[0][1],g[1][0],g[1][1],a.d)}else if(d===i.length-2&&"Z"===i[d+1][0]&&l&&l.d){var m=i[d+1];if("Z"===m[0]){g=t.getEndTangent();h=s["c"](g[0][0],g[0][1],g[1][0],g[1][1],l.d)}}else if(d===i.length-1&&l&&l.d&&"Z"!==i[0]){g=t.getEndTangent();h=s["c"](g[0][0],g[0][1],g[1][0],g[1][1],l.d)}var y=h.dx,v=h.dy;switch(p){case"M":e.moveTo(f[1]-y,f[2]-v),c=[f[1],f[2]];break;case"L":e.lineTo(f[1]-y,f[2]-v);break;case"Q":e.quadraticCurveTo(f[1],f[2],f[3]-y,f[4]-v);break;case"C":e.bezierCurveTo(f[1],f[2],f[3],f[4],f[5]-y,f[6]-v);break;case"A":var b=void 0;r?(b=r[d],b||(b=Object(o["a"])(u,f),r[d]=b)):b=Object(o["a"])(u,f);var _=b.cx,x=b.cy,w=b.rx,S=b.ry,E=b.startAngle,C=b.endAngle,M=b.xRotation,T=b.sweepFlag;if(e.ellipse)e.ellipse(_,x,w,S,M,E,C,1-T);else{var A=w>S?w:S,O=w>S?1:w/S,k=w>S?S/w:1;e.translate(_,x),e.rotate(M),e.scale(O,k),e.arc(0,0,A,E,C,1-T),e.scale(1/O,1/k),e.rotate(-M),e.translate(-_,-x)}break;case"Z":e.closePath();break;default:break}if("Z"===p)u=c;else{var I=f.length;u=[f[I-2],f[I-1]]}}}}function y(t,e){var n=t.get("canvas");n&&("remove"===e&&(t._cacheCanvasBBox=t.get("cacheCanvasBBox")),t.get("hasChanged")||(t.set("hasChanged",!0),t.cfg.parent&&t.cfg.parent.get("hasChanged")||(n.refreshElement(t,e,n),n.get("autoDraw")&&n.draw())))}function v(t){var e;if(t.destroyed)e=t["_cacheCanvasBBox"];else{var n=t.get("cacheCanvasBBox"),r=n&&!(!n.width||!n.height),i=t.getCanvasBBox(),o=i&&!(!i.width||!i.height);r&&o?e=Object(a["l"])(n,i):r?e=n:o&&(e=i)}return e}function b(t){if(!t.length)return null;var e=[],n=[],i=[],o=[];return Object(r["each"])(t,(function(t){var r=v(t);r&&(e.push(r.minX),n.push(r.minY),i.push(r.maxX),o.push(r.maxY))})),{minX:Object(r["min"])(e),minY:Object(r["min"])(n),maxX:Object(r["max"])(i),maxY:Object(r["max"])(o)}}function _(t,e){return t&&e&&Object(a["f"])(t,e)?{minX:Math.max(t.minX,e.minX),minY:Math.max(t.minY,e.minY),maxX:Math.min(t.maxX,e.maxX),maxY:Math.min(t.maxY,e.maxY)}:null}},f654:function(t,e,n){"use strict";(function(e){var r=n("320c");
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function i(t,e){if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0}function o(t){return e.Buffer&&"function"===typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var a=n("3022"),s=Object.prototype.hasOwnProperty,l=Array.prototype.slice,u=function(){return"foo"===function(){}.name}();function c(t){return Object.prototype.toString.call(t)}function h(t){return!o(t)&&("function"===typeof e.ArrayBuffer&&("function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}var d=t.exports=b,f=/\s*function\s+([^\(\s]*)\s*/;function p(t){if(a.isFunction(t)){if(u)return t.name;var e=t.toString(),n=e.match(f);return n&&n[1]}}function g(t,e){return"string"===typeof t?t.length<e?t:t.slice(0,e):t}function m(t){if(u||!a.isFunction(t))return a.inspect(t);var e=p(t),n=e?": "+e:"";return"[Function"+n+"]"}function y(t){return g(m(t.actual),128)+" "+t.operator+" "+g(m(t.expected),128)}function v(t,e,n,r,i){throw new d.AssertionError({message:n,actual:t,expected:e,operator:r,stackStartFunction:i})}function b(t,e){t||v(t,!0,e,"==",d.ok)}function _(t,e,n,r){if(t===e)return!0;if(o(t)&&o(e))return 0===i(t,e);if(a.isDate(t)&&a.isDate(e))return t.getTime()===e.getTime();if(a.isRegExp(t)&&a.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"===typeof t||null!==e&&"object"===typeof e){if(h(t)&&h(e)&&c(t)===c(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===i(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(o(t)!==o(e))return!1;r=r||{actual:[],expected:[]};var s=r.actual.indexOf(t);return-1!==s&&s===r.expected.indexOf(e)||(r.actual.push(t),r.expected.push(e),w(t,e,n,r))}return n?t===e:t==e}function x(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function w(t,e,n,r){if(null===t||void 0===t||null===e||void 0===e)return!1;if(a.isPrimitive(t)||a.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var i=x(t),o=x(e);if(i&&!o||!i&&o)return!1;if(i)return t=l.call(t),e=l.call(e),_(t,e,n);var s,u,c=A(t),h=A(e);if(c.length!==h.length)return!1;for(c.sort(),h.sort(),u=c.length-1;u>=0;u--)if(c[u]!==h[u])return!1;for(u=c.length-1;u>=0;u--)if(s=c[u],!_(t[s],e[s],n,r))return!1;return!0}function S(t,e,n){_(t,e,!0)&&v(t,e,n,"notDeepStrictEqual",S)}function E(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(n){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function C(t){var e;try{t()}catch(n){e=n}return e}function M(t,e,n,r){var i;if("function"!==typeof e)throw new TypeError('"block" argument must be a function');"string"===typeof n&&(r=n,n=null),i=C(e),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),t&&!i&&v(i,n,"Missing expected exception"+r);var o="string"===typeof r,s=!t&&a.isError(i),l=!t&&i&&!n;if((s&&o&&E(i,n)||l)&&v(i,n,"Got unwanted exception"+r),t&&i&&n&&!E(i,n)||!t&&i)throw i}function T(t,e){t||v(t,!0,e,"==",T)}d.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=y(this),this.generatedMessage=!0);var e=t.stackStartFunction||v;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var n=new Error;if(n.stack){var r=n.stack,i=p(e),o=r.indexOf("\n"+i);if(o>=0){var a=r.indexOf("\n",o+1);r=r.substring(a+1)}this.stack=r}}},a.inherits(d.AssertionError,Error),d.fail=v,d.ok=b,d.equal=function(t,e,n){t!=e&&v(t,e,n,"==",d.equal)},d.notEqual=function(t,e,n){t==e&&v(t,e,n,"!=",d.notEqual)},d.deepEqual=function(t,e,n){_(t,e,!1)||v(t,e,n,"deepEqual",d.deepEqual)},d.deepStrictEqual=function(t,e,n){_(t,e,!0)||v(t,e,n,"deepStrictEqual",d.deepStrictEqual)},d.notDeepEqual=function(t,e,n){_(t,e,!1)&&v(t,e,n,"notDeepEqual",d.notDeepEqual)},d.notDeepStrictEqual=S,d.strictEqual=function(t,e,n){t!==e&&v(t,e,n,"===",d.strictEqual)},d.notStrictEqual=function(t,e,n){t===e&&v(t,e,n,"!==",d.notStrictEqual)},d.throws=function(t,e,n){M(!0,t,e,n)},d.doesNotThrow=function(t,e,n){M(!1,t,e,n)},d.ifError=function(t){if(t)throw t},d.strict=r(T,d,{equal:d.strictEqual,deepEqual:d.deepStrictEqual,notEqual:d.notStrictEqual,notDeepEqual:d.notDeepStrictEqual}),d.strict.strict=d.strict;var A=Object.keys||function(t){var e=[];for(var n in t)s.call(t,n)&&e.push(n);return e}}).call(this,n("c8ba"))},f7a6:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["format","node_id","actions","detailed","parent_node","parent_task","h","help","s","v","pretty","human","error_trace","source","filter_path"],a={nodeId:"node_id",parentNode:"parent_node",parentTask:"parent_task",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,...d}=t;d=i(o,a,d,u),null==c&&(c="GET");var f=s.ignore;"number"===typeof f&&(s.ignore=[f]);var p="";p="/_cat/tasks";const g={method:c,path:p,body:null,querystring:d};return s.warnings=0===u.length?null:u,e(g,s,l)}}t.exports=r},f83c:function(t,e,n){"use strict";var r=n("9ab4"),i=n("330d"),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r["__extends"])(e,t),e.prototype.isGroup=function(){return!0},e.prototype.isEntityGroup=function(){return!1},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=this.getChildren(),r=0;r<n.length;r++){var i=n[r];e.add(i.clone())}return e},e}(i["a"]);e["a"]=o},f893e:function(t,e,n){"use strict";function r(t){return[parseInt(t.substr(1,2),16),parseInt(t.substr(3,2),16),parseInt(t.substr(5,2),16)]}function i(t){var e=Math.round(t).toString(16);return 1===e.length?"0"+e:e}function o(t){return"#"+i(t[0])+i(t[1])+i(t[2])}n.r(e),n.d(e,"rgb2arr",(function(){return r})),n.d(e,"gradient",(function(){return d})),n.d(e,"toRGB",(function(){return u})),n.d(e,"toCSSGradient",(function(){return y})),n.d(e,"transform",(function(){return S})),n.d(e,"direction",(function(){return E})),n.d(e,"angleTo",(function(){return C})),n.d(e,"vertical",(function(){return M})),n.d(e,"path2String",(function(){return A})),n.d(e,"path2Curve",(function(){return ot})),n.d(e,"path2Absolute",(function(){return J})),n.d(e,"clonePath",(function(){return at})),n.d(e,"normalizePath",(function(){return K})),n.d(e,"reverseCurve",(function(){return st})),n.d(e,"arcToCubic",(function(){return tt})),n.d(e,"getPathBBox",(function(){return vt})),n.d(e,"getTotalLength",(function(){return bt})),n.d(e,"getPathBBoxTotalLength",(function(){return _t})),n.d(e,"getRotatedCurve",(function(){return wt})),n.d(e,"getPathArea",(function(){return Et})),n.d(e,"getDrawDirection",(function(){return Ct})),n.d(e,"getPointAtLength",(function(){return Mt})),n.d(e,"isPointInStroke",(function(){return Ot})),n.d(e,"distanceSquareRoot",(function(){return lt})),n.d(e,"equalizeSegments",(function(){return Pt})),n.d(e,"contains",(function(){return Dt})),n.d(e,"includes",(function(){return Dt})),n.d(e,"difference",(function(){return zt})),n.d(e,"find",(function(){return ae})),n.d(e,"findIndex",(function(){return le})),n.d(e,"firstValue",(function(){return ce})),n.d(e,"flatten",(function(){return de})),n.d(e,"flattenDeep",(function(){return pe})),n.d(e,"getRange",(function(){return ve})),n.d(e,"pull",(function(){return Se})),n.d(e,"pullAt",(function(){return Me})),n.d(e,"reduce",(function(){return Ae})),n.d(e,"remove",(function(){return ke})),n.d(e,"sortBy",(function(){return Le})),n.d(e,"union",(function(){return De})),n.d(e,"uniq",(function(){return Ne})),n.d(e,"valuesOfKey",(function(){return Fe})),n.d(e,"head",(function(){return je})),n.d(e,"last",(function(){return Be})),n.d(e,"startsWith",(function(){return Ue})),n.d(e,"endsWith",(function(){return qe})),n.d(e,"filter",(function(){return jt})),n.d(e,"every",(function(){return He})),n.d(e,"some",(function(){return Ye})),n.d(e,"group",(function(){return Qe})),n.d(e,"groupBy",(function(){return Ze})),n.d(e,"groupToMap",(function(){return Ke})),n.d(e,"getWrapBehavior",(function(){return tn})),n.d(e,"wrapBehavior",(function(){return nn})),n.d(e,"number2color",(function(){return an})),n.d(e,"parseRadius",(function(){return ln})),n.d(e,"clamp",(function(){return cn})),n.d(e,"fixedBase",(function(){return dn})),n.d(e,"isDecimal",(function(){return mn})),n.d(e,"isEven",(function(){return vn})),n.d(e,"isInteger",(function(){return _n})),n.d(e,"isNegative",(function(){return wn})),n.d(e,"isNumberEqual",(function(){return En})),n.d(e,"isOdd",(function(){return Mn})),n.d(e,"isPositive",(function(){return An})),n.d(e,"max",(function(){return ge})),n.d(e,"maxBy",(function(){return On})),n.d(e,"min",(function(){return me})),n.d(e,"minBy",(function(){return kn})),n.d(e,"mod",(function(){return Pn})),n.d(e,"toDegree",(function(){return Rn})),n.d(e,"toInteger",(function(){return Dn})),n.d(e,"toRadian",(function(){return Bn})),n.d(e,"forIn",(function(){return zn})),n.d(e,"has",(function(){return Un})),n.d(e,"hasKey",(function(){return Gn})),n.d(e,"hasValue",(function(){return Hn})),n.d(e,"keys",(function(){return Qt})),n.d(e,"isMatch",(function(){return te})),n.d(e,"values",(function(){return Vn})),n.d(e,"lowerCase",(function(){return Xn})),n.d(e,"lowerFirst",(function(){return Zn})),n.d(e,"substitute",(function(){return Qn})),n.d(e,"upperCase",(function(){return tr})),n.d(e,"upperFirst",(function(){return nr})),n.d(e,"getType",(function(){return or})),n.d(e,"isArguments",(function(){return sr})),n.d(e,"isArray",(function(){return Yt})),n.d(e,"isArrayLike",(function(){return Nt})),n.d(e,"isBoolean",(function(){return ur})),n.d(e,"isDate",(function(){return hr})),n.d(e,"isError",(function(){return fr})),n.d(e,"isFunction",(function(){return Ut})),n.d(e,"isFinite",(function(){return pr})),n.d(e,"isNil",(function(){return qt})),n.d(e,"isNull",(function(){return mr})),n.d(e,"isNumber",(function(){return pn})),n.d(e,"isObject",(function(){return Xt})),n.d(e,"isObjectLike",(function(){return ne})),n.d(e,"isPlainObject",(function(){return ie})),n.d(e,"isPrototype",(function(){return br})),n.d(e,"isRegExp",(function(){return xr})),n.d(e,"isString",(function(){return Ie})),n.d(e,"isType",(function(){return Wt})),n.d(e,"isUndefined",(function(){return Sr})),n.d(e,"isElement",(function(){return Cr})),n.d(e,"requestAnimationFrame",(function(){return Mr})),n.d(e,"clearAnimationFrame",(function(){return Tr})),n.d(e,"augment",(function(){return Ir})),n.d(e,"clone",(function(){return Lr})),n.d(e,"debounce",(function(){return Rr})),n.d(e,"memoize",(function(){return Dr})),n.d(e,"deepMix",(function(){return Ur})),n.d(e,"each",(function(){return Zt})),n.d(e,"extend",(function(){return qr})),n.d(e,"indexOf",(function(){return Hr})),n.d(e,"isEmpty",(function(){return Xr})),n.d(e,"isEqual",(function(){return Zr})),n.d(e,"isEqualWith",(function(){return Kr})),n.d(e,"map",(function(){return $r})),n.d(e,"mapValues",(function(){return ei})),n.d(e,"mix",(function(){return Or})),n.d(e,"assign",(function(){return Or})),n.d(e,"get",(function(){return ni})),n.d(e,"set",(function(){return ri})),n.d(e,"pick",(function(){return oi})),n.d(e,"omit",(function(){return ai})),n.d(e,"throttle",(function(){return si})),n.d(e,"toArray",(function(){return li})),n.d(e,"toString",(function(){return Wn})),n.d(e,"uniqueId",(function(){return ci})),n.d(e,"noop",(function(){return hi})),n.d(e,"identity",(function(){return di})),n.d(e,"size",(function(){return fi})),n.d(e,"Cache",(function(){return gi})),n.d(e,"isPointInPolygon",(function(){return bi})),n.d(e,"isPolygonsIntersect",(function(){return Mi}));var a,s=/rgba?\(([\s.,0-9]+)\)/;function l(){var t=document.createElement("i");return t.title="Web Colour Picker",t.style.display="none",document.body.appendChild(t),t}function u(t){if("#"===t[0]&&7===t.length)return t;a||(a=l()),a.style.color=t;var e=document.defaultView.getComputedStyle(a,"").getPropertyValue("color"),n=s.exec(e),r=n[1].split(/\s*,\s*/).map((function(t){return Number(t)}));return e=o(r),e}function c(t,e,n,r){return t[r]+(e[r]-t[r])*n}function h(t,e){var n=isNaN(Number(e))||e<0?0:e>1?1:Number(e),r=t.length-1,i=Math.floor(r*n),a=r*n-i,s=t[i],l=i===r?s:t[i+1];return o([c(s,l,a,0),c(s,l,a,1),c(s,l,a,2)])}function d(t){var e="string"===typeof t?t.split("-"):t,n=e.map((function(t){return r(-1===t.indexOf("#")?u(t):t)}));return function(t){return h(n,t)}}var f=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,p=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,g=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function m(t){return/^[r,R,L,l]{1}[\s]*\(/.test(t)}function y(t){if(m(t)){var e,n=void 0;if("l"===t[0]){var r=f.exec(t),i=+r[1]+90;n=r[2],e="linear-gradient("+i+"deg, "}else if("r"===t[0]){e="radial-gradient(";r=p.exec(t);n=r[4]}var o=n.match(g);return o.forEach((function(t,n){var r=t.split(":");e+=r[1]+" "+100*Number(r[0])+"%",n!==o.length-1&&(e+=", ")})),e+=")",e}return t}var v=n("20e73");function b(t,e,n){var r=[0,0,0,0,0,0,0,0,0];return v["mat3"].fromTranslation(r,n),v["mat3"].multiply(t,r,e)}function _(t,e,n){var r=[0,0,0,0,0,0,0,0,0];return v["mat3"].fromRotation(r,n),v["mat3"].multiply(t,r,e)}function x(t,e,n){var r=[0,0,0,0,0,0,0,0,0];return v["mat3"].fromScaling(r,n),v["mat3"].multiply(t,r,e)}function w(t,e,n){return v["mat3"].multiply(t,n,e)}function S(t,e){for(var n=t?[].concat(t):[1,0,0,0,1,0,0,0,1],r=0,i=e.length;r<i;r++){var o=e[r];switch(o[0]){case"t":b(n,n,[o[1],o[2]]);break;case"s":x(n,n,[o[1],o[2]]);break;case"r":_(n,n,o[1]);break;case"m":w(n,n,o[1]);break;default:break}}return n}function E(t,e){return t[0]*e[1]-e[0]*t[1]}function C(t,e,n){var r=v["vec2"].angle(t,e),i=E(t,e)>=0;return n?i?2*Math.PI-r:r:i?r:2*Math.PI-r}function M(t,e,n){return n?(t[0]=e[1],t[1]=-1*e[0]):(t[0]=-1*e[1],t[1]=e[0]),t}function T(t,e){if("off"===e)return[].concat(t);var n="number"===typeof e&&e>=1?Math.pow(10,e):1;return t.map((function(t){var r=t.slice(1).map(Number).map((function(t){return e?Math.round(t*n)/n:Math.round(t)}));return[t[0]].concat(r)}))}function A(t,e){return void 0===e&&(e="off"),T(t,e).map((function(t){return t[0]+t.slice(1).join(" ")})).join("")}var O=function(){return O=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},O.apply(this,arguments)};Object.create;function k(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create;"function"===typeof SuppressedError&&SuppressedError;var I={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function P(t,e,n){if(t[n].length>7){t[n].shift();var r=t[n],i=n;while(r.length)e[n]="A",t.splice(i+=1,0,["C"].concat(r.splice(0,6)));t.splice(n,1)}}var L={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function N(t){return Array.isArray(t)&&t.every((function(t){var e=t[0].toLowerCase();return L[e]===t.length-1&&"achlmqstvz".includes(e)}))}function R(t){return N(t)&&t.every((function(t){var e=t[0];return e===e.toUpperCase()}))}function D(t){return R(t)&&t.every((function(t){var e=t[0];return"ACLMQZ".includes(e)}))}function F(t){var e=t.pathValue[t.segmentStart],n=e.toLowerCase(),r=t.data;while(r.length>=L[n])if("m"===n&&r.length>2?(t.segments.push([e].concat(r.splice(0,2))),n="l",e="m"===e?"l":"L"):t.segments.push([e].concat(r.splice(0,L[n]))),!L[n])break}function j(t){var e=t.index,n=t.pathValue,r=n.charCodeAt(e);return 48===r?(t.param=0,void(t.index+=1)):49===r?(t.param=1,void(t.index+=1)):void(t.err='[path-util]: invalid Arc flag "'+n[e]+'", expecting 0 or 1 at index '+e)}function B(t){return t>=48&&t<=57||43===t||45===t||46===t}function z(t){return t>=48&&t<=57}function U(t){var e,n=t.max,r=t.pathValue,i=t.index,o=i,a=!1,s=!1,l=!1,u=!1;if(o>=n)t.err="[path-util]: Invalid path value at index "+o+', "pathValue" is missing param';else if(e=r.charCodeAt(o),43!==e&&45!==e||(o+=1,e=r.charCodeAt(o)),z(e)||46===e){if(46!==e){if(a=48===e,o+=1,e=r.charCodeAt(o),a&&o<n&&e&&z(e))return void(t.err="[path-util]: Invalid path value at index "+i+', "'+r[i]+'" illegal number');while(o<n&&z(r.charCodeAt(o)))o+=1,s=!0;e=r.charCodeAt(o)}if(46===e){u=!0,o+=1;while(z(r.charCodeAt(o)))o+=1,l=!0;e=r.charCodeAt(o)}if(101===e||69===e){if(u&&!s&&!l)return void(t.err="[path-util]: Invalid path value at index "+o+', "'+r[o]+'" invalid float exponent');if(o+=1,e=r.charCodeAt(o),43!==e&&45!==e||(o+=1),!(o<n&&z(r.charCodeAt(o))))return void(t.err="[path-util]: Invalid path value at index "+o+', "'+r[o]+'" invalid integer exponent');while(o<n&&z(r.charCodeAt(o)))o+=1}t.index=o,t.param=+t.pathValue.slice(i,o)}else t.err="[path-util]: Invalid path value at index "+o+', "'+r[o]+'" is not a number'}function G(t){var e=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return 10===t||13===t||8232===t||8233===t||32===t||9===t||11===t||12===t||160===t||t>=5760&&e.includes(t)}function q(t){var e=t.pathValue,n=t.max;while(t.index<n&&G(e.charCodeAt(t.index)))t.index+=1}function V(t){switch(32|t){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function H(t){return 97===(32|t)}function W(t){var e=t.max,n=t.pathValue,r=t.index,i=n.charCodeAt(r),o=L[n[r].toLowerCase()];if(t.segmentStart=r,V(i))if(t.index+=1,q(t),t.data=[],o){for(;;){for(var a=o;a>0;a-=1){if(!H(i)||3!==a&&4!==a?U(t):j(t),t.err.length)return;t.data.push(t.param),q(t),t.index<e&&44===n.charCodeAt(t.index)&&(t.index+=1,q(t))}if(t.index>=t.max)break;if(!B(n.charCodeAt(t.index)))break}F(t)}else F(t);else t.err='[path-util]: Invalid path value "'+n[r]+'" is not a path command'}var Y=function(){function t(t){this.pathValue=t,this.segments=[],this.max=t.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return t}();function X(t){if(N(t))return[].concat(t);var e=new Y(t);q(e);while(e.index<e.max&&!e.err.length)W(e);return e.err?e.err:e.segments}function J(t){if(R(t))return[].concat(t);var e=X(t),n=0,r=0,i=0,o=0;return e.map((function(t){var e,a=t.slice(1).map(Number),s=t[0],l=s.toUpperCase();if("M"===s)return n=a[0],r=a[1],i=n,o=r,["M",n,r];if(s!==l)switch(l){case"A":e=[l,a[0],a[1],a[2],a[3],a[4],a[5]+n,a[6]+r];break;case"V":e=[l,a[0]+r];break;case"H":e=[l,a[0]+n];break;default:var u=a.map((function(t,e){return t+(e%2?r:n)}));e=[l].concat(u)}else e=[l].concat(a);var c=e.length;switch(l){case"Z":n=i,r=o;break;case"H":n=e[1];break;case"V":r=e[1];break;default:n=e[c-2],r=e[c-1],"M"===l&&(i=n,o=r)}return e}))}function Z(t,e){var n=t[0],r=e.x1,i=e.y1,o=e.x2,a=e.y2,s=t.slice(1).map(Number),l=t;if("TQ".includes(n)||(e.qx=null,e.qy=null),"H"===n)l=["L",t[1],i];else if("V"===n)l=["L",r,t[1]];else if("S"===n){var u=2*r-o,c=2*i-a;e.x1=u,e.y1=c,l=["C",u,c].concat(s)}else if("T"===n){var h=2*r-e.qx,d=2*i-e.qy;e.qx=h,e.qy=d,l=["Q",h,d].concat(s)}else if("Q"===n){var f=s[0],p=s[1];e.qx=f,e.qy=p}return l}function K(t){if(D(t))return[].concat(t);for(var e=J(t),n=O({},I),r=0;r<e.length;r+=1){e[r]=Z(e[r],n);var i=e[r],o=i.length;n.x1=+i[o-2],n.y1=+i[o-1],n.x2=+i[o-4]||n.x1,n.y2=+i[o-3]||n.y1}return e}function Q(t){return D(t)&&t.every((function(t){var e=t[0];return"MC".includes(e)}))}function $(t,e,n){var r=t*Math.cos(n)-e*Math.sin(n),i=t*Math.sin(n)+e*Math.cos(n);return{x:r,y:i}}function tt(t,e,n,r,i,o,a,s,l,u){var c,h,d,f,p,g=t,m=e,y=n,v=r,b=s,_=l,x=120*Math.PI/180,w=Math.PI/180*(+i||0),S=[];if(u)h=u[0],d=u[1],f=u[2],p=u[3];else{c=$(g,m,-w),g=c.x,m=c.y,c=$(b,_,-w),b=c.x,_=c.y;var E=(g-b)/2,C=(m-_)/2,M=E*E/(y*y)+C*C/(v*v);M>1&&(M=Math.sqrt(M),y*=M,v*=M);var T=y*y,A=v*v,O=(o===a?-1:1)*Math.sqrt(Math.abs((T*A-T*C*C-A*E*E)/(T*C*C+A*E*E)));f=O*y*C/v+(g+b)/2,p=O*-v*E/y+(m+_)/2,h=Math.asin(((m-p)/v*Math.pow(10,9)>>0)/Math.pow(10,9)),d=Math.asin(((_-p)/v*Math.pow(10,9)>>0)/Math.pow(10,9)),h=g<f?Math.PI-h:h,d=b<f?Math.PI-d:d,h<0&&(h=2*Math.PI+h),d<0&&(d=2*Math.PI+d),a&&h>d&&(h-=2*Math.PI),!a&&d>h&&(d-=2*Math.PI)}var k=d-h;if(Math.abs(k)>x){var I=d,P=b,L=_;d=h+x*(a&&d>h?1:-1),b=f+y*Math.cos(d),_=p+v*Math.sin(d),S=tt(b,_,y,v,i,0,a,P,L,[d,I,f,p])}k=d-h;var N=Math.cos(h),R=Math.sin(h),D=Math.cos(d),F=Math.sin(d),j=Math.tan(k/4),B=4/3*y*j,z=4/3*v*j,U=[g,m],G=[g+B*R,m-z*N],q=[b+B*F,_-z*D],V=[b,_];if(G[0]=2*U[0]-G[0],G[1]=2*U[1]-G[1],u)return G.concat(q,V,S);S=G.concat(q,V,S);for(var H=[],W=0,Y=S.length;W<Y;W+=1)H[W]=W%2?$(S[W-1],S[W],w).y:$(S[W],S[W+1],w).x;return H}function et(t,e,n,r,i,o){var a=1/3,s=2/3;return[a*t+s*n,a*e+s*r,a*i+s*n,a*o+s*r,i,o]}function nt(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return[r+(o-r)*n,i+(a-i)*n]}var rt=function(t,e,n,r){var i=.5,o=nt([t,e],[n,r],i);return k(k([],o,!0),[n,r,n,r],!1)};function it(t,e){var n,r=t[0],i=t.slice(1).map(Number),o=i[0],a=i[1],s=e.x1,l=e.y1,u=e.x,c=e.y;switch("TQ".includes(r)||(e.qx=null,e.qy=null),r){case"M":return e.x=o,e.y=a,t;case"A":return n=[s,l].concat(i),["C"].concat(tt(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9]));case"Q":return e.qx=o,e.qy=a,n=[s,l].concat(i),["C"].concat(et(n[0],n[1],n[2],n[3],n[4],n[5]));case"L":return["C"].concat(rt(s,l,o,a));case"Z":return s===u&&l===c?["C",s,l,u,c,u,c]:["C"].concat(rt(s,l,u,c));default:}return t}function ot(t,e){if(void 0===e&&(e=!1),Q(t)){var n=[].concat(t);return e?[n,[]]:n}for(var r,i,o=K(t),a=O({},I),s=[],l="",u=o.length,c=[],h=0;h<u;h+=1){o[h]&&(l=o[h][0]),s[h]=l;var d=it(o[h],a);o[h]=d,P(o,s,h),u=o.length,"Z"===l&&c.push(h),r=o[h],i=r.length,a.x1=+r[i-2],a.y1=+r[i-1],a.x2=+r[i-4]||a.x1,a.y2=+r[i-3]||a.y1}return e?[o,c]:o}function at(t){return t.map((function(t){return Array.isArray(t)?[].concat(t):t}))}function st(t){var e=t.slice(1).map((function(e,n,r){return n?r[n-1].slice(-2).concat(e.slice(1)):t[0].slice(1).concat(e.slice(1))})).map((function(t){return t.map((function(e,n){return t[t.length-n-2*(1-n%2)]}))})).reverse();return[["M"].concat(e[0].slice(0,2))].concat(e.map((function(t){return["C"].concat(t.slice(2))})))}function lt(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}function ut(t,e,n,r,i){var o=lt([t,e],[n,r]),a={x:0,y:0};if("number"===typeof i)if(i<=0)a={x:t,y:e};else if(i>=o)a={x:n,y:r};else{var s=nt([t,e],[n,r],i/o),l=s[0],u=s[1];a={x:l,y:u}}return{length:o,point:a,min:{x:Math.min(t,n),y:Math.min(e,r)},max:{x:Math.max(t,n),y:Math.max(e,r)}}}function ct(t,e){var n=t.x,r=t.y,i=e.x,o=e.y,a=n*i+r*o,s=Math.sqrt((Math.pow(n,2)+Math.pow(r,2))*(Math.pow(i,2)+Math.pow(o,2))),l=n*o-r*i<0?-1:1,u=l*Math.acos(a/s);return u}function ht(t,e,n,r,i,o,a,s,l,u){var c=Math.abs,h=Math.sin,d=Math.cos,f=Math.sqrt,p=Math.PI,g=c(n),m=c(r),y=(i%360+360)%360,v=y*(p/180);if(t===s&&e===l)return{x:t,y:e};if(0===g||0===m)return ut(t,e,s,l,u).point;var b=(t-s)/2,_=(e-l)/2,x={x:d(v)*b+h(v)*_,y:-h(v)*b+d(v)*_},w=Math.pow(x.x,2)/Math.pow(g,2)+Math.pow(x.y,2)/Math.pow(m,2);w>1&&(g*=f(w),m*=f(w));var S=Math.pow(g,2)*Math.pow(m,2)-Math.pow(g,2)*Math.pow(x.y,2)-Math.pow(m,2)*Math.pow(x.x,2),E=Math.pow(g,2)*Math.pow(x.y,2)+Math.pow(m,2)*Math.pow(x.x,2),C=S/E;C=C<0?0:C;var M=(o!==a?1:-1)*f(C),T={x:M*(g*x.y/m),y:M*(-m*x.x/g)},A={x:d(v)*T.x-h(v)*T.y+(t+s)/2,y:h(v)*T.x+d(v)*T.y+(e+l)/2},O={x:(x.x-T.x)/g,y:(x.y-T.y)/m},k=ct({x:1,y:0},O),I={x:(-x.x-T.x)/g,y:(-x.y-T.y)/m},P=ct(O,I);!a&&P>0?P-=2*p:a&&P<0&&(P+=2*p),P%=2*p;var L=k+P*u,N=g*d(L),R=m*h(L),D={x:d(v)*N-h(v)*R+A.x,y:h(v)*N+d(v)*R+A.y};return D}function dt(t,e,n,r,i,o,a,s,l,u,c){var h,d=c.bbox,f=void 0===d||d,p=c.length,g=void 0===p||p,m=c.sampleSize,y=void 0===m?30:m,v="number"===typeof u,b=t,_=e,x=0,w=[b,_,x],S=[b,_],E=0,C={x:0,y:0},M=[{x:b,y:_}];v&&u<=0&&(C={x:b,y:_});for(var T=0;T<=y;T+=1){if(E=T/y,h=ht(t,e,n,r,i,o,a,s,l,E),b=h.x,_=h.y,f&&M.push({x:b,y:_}),g&&(x+=lt(S,[b,_])),S=[b,_],v&&x>=u&&u>w[2]){var A=(x-u)/(x-w[2]);C={x:S[0]*(1-A)+w[0]*A,y:S[1]*(1-A)+w[1]*A}}w=[b,_,x]}return v&&u>=x&&(C={x:s,y:l}),{length:x,point:C,min:{x:Math.min.apply(null,M.map((function(t){return t.x}))),y:Math.min.apply(null,M.map((function(t){return t.y})))},max:{x:Math.max.apply(null,M.map((function(t){return t.x}))),y:Math.max.apply(null,M.map((function(t){return t.y})))}}}function ft(t,e,n,r,i,o,a,s,l){var u=1-l;return{x:Math.pow(u,3)*t+3*Math.pow(u,2)*l*n+3*u*Math.pow(l,2)*i+Math.pow(l,3)*a,y:Math.pow(u,3)*e+3*Math.pow(u,2)*l*r+3*u*Math.pow(l,2)*o+Math.pow(l,3)*s}}function pt(t,e,n,r,i,o,a,s,l,u){var c,h=u.bbox,d=void 0===h||h,f=u.length,p=void 0===f||f,g=u.sampleSize,m=void 0===g?10:g,y="number"===typeof l,v=t,b=e,_=0,x=[v,b,_],w=[v,b],S=0,E={x:0,y:0},C=[{x:v,y:b}];y&&l<=0&&(E={x:v,y:b});for(var M=0;M<=m;M+=1){if(S=M/m,c=ft(t,e,n,r,i,o,a,s,S),v=c.x,b=c.y,d&&C.push({x:v,y:b}),p&&(_+=lt(w,[v,b])),w=[v,b],y&&_>=l&&l>x[2]){var T=(_-l)/(_-x[2]);E={x:w[0]*(1-T)+x[0]*T,y:w[1]*(1-T)+x[1]*T}}x=[v,b,_]}return y&&l>=_&&(E={x:a,y:s}),{length:_,point:E,min:{x:Math.min.apply(null,C.map((function(t){return t.x}))),y:Math.min.apply(null,C.map((function(t){return t.y})))},max:{x:Math.max.apply(null,C.map((function(t){return t.x}))),y:Math.max.apply(null,C.map((function(t){return t.y})))}}}function gt(t,e,n,r,i,o,a){var s=1-a;return{x:Math.pow(s,2)*t+2*s*a*n+Math.pow(a,2)*i,y:Math.pow(s,2)*e+2*s*a*r+Math.pow(a,2)*o}}function mt(t,e,n,r,i,o,a,s){var l,u=s.bbox,c=void 0===u||u,h=s.length,d=void 0===h||h,f=s.sampleSize,p=void 0===f?10:f,g="number"===typeof a,m=t,y=e,v=0,b=[m,y,v],_=[m,y],x=0,w={x:0,y:0},S=[{x:m,y:y}];g&&a<=0&&(w={x:m,y:y});for(var E=0;E<=p;E+=1){if(x=E/p,l=gt(t,e,n,r,i,o,x),m=l.x,y=l.y,c&&S.push({x:m,y:y}),d&&(v+=lt(_,[m,y])),_=[m,y],g&&v>=a&&a>b[2]){var C=(v-a)/(v-b[2]);w={x:_[0]*(1-C)+b[0]*C,y:_[1]*(1-C)+b[1]*C}}b=[m,y,v]}return g&&a>=v&&(w={x:i,y:o}),{length:v,point:w,min:{x:Math.min.apply(null,S.map((function(t){return t.x}))),y:Math.min.apply(null,S.map((function(t){return t.y})))},max:{x:Math.max.apply(null,S.map((function(t){return t.x}))),y:Math.max.apply(null,S.map((function(t){return t.y})))}}}function yt(t,e,n){for(var r,i,o,a,s,l,u,c,h,d=K(t),f="number"===typeof e,p=[],g=0,m=0,y=0,v=0,b=[],_=[],x=0,w={x:0,y:0},S=w,E=w,C=w,M=0,T=0,A=d.length;T<A;T+=1)h=d[T],c=h[0],u="M"===c,p=u?p:[g,m].concat(h.slice(1)),u?(y=h[1],v=h[2],w={x:y,y:v},S=w,x=0,f&&e<.001&&(C=w)):"L"===c?(r=ut(p[0],p[1],p[2],p[3],(e||0)-M),x=r.length,w=r.min,S=r.max,E=r.point):"A"===c?(i=dt(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],(e||0)-M,n||{}),x=i.length,w=i.min,S=i.max,E=i.point):"C"===c?(o=pt(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],(e||0)-M,n||{}),x=o.length,w=o.min,S=o.max,E=o.point):"Q"===c?(a=mt(p[0],p[1],p[2],p[3],p[4],p[5],(e||0)-M,n||{}),x=a.length,w=a.min,S=a.max,E=a.point):"Z"===c&&(p=[g,m,y,v],s=ut(p[0],p[1],p[2],p[3],(e||0)-M),x=s.length,w=s.min,S=s.max,E=s.point),f&&M<e&&M+x>=e&&(C=E),_.push(S),b.push(w),M+=x,l="Z"!==c?h.slice(-2):[y,v],g=l[0],m=l[1];return f&&e>=M&&(C={x:g,y:m}),{length:M,point:C,min:{x:Math.min.apply(null,b.map((function(t){return t.x}))),y:Math.min.apply(null,b.map((function(t){return t.y})))},max:{x:Math.max.apply(null,_.map((function(t){return t.x}))),y:Math.max.apply(null,_.map((function(t){return t.y})))}}}function vt(t,e){if(!t)return{x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var n=yt(t,void 0,O(O({},e),{length:!1})),r=n.min,i=r.x,o=r.y,a=n.max,s=a.x,l=a.y,u=s-i,c=l-o;return{width:u,height:c,x:i,y:o,x2:s,y2:l,cx:i+u/2,cy:o+c/2,cz:Math.max(u,c)+Math.min(u,c)/2}}function bt(t,e){return yt(t,void 0,O(O({},e),{bbox:!1,length:!0})).length}function _t(t,e){if(!t)return{length:0,x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var n=yt(t,void 0,O(O({},e),{bbox:!0,length:!0})),r=n.length,i=n.min,o=i.x,a=i.y,s=n.max,l=s.x,u=s.y,c=l-o,h=u-a;return{length:r,width:c,height:h,x:o,y:a,x2:l,y2:u,cx:o+c/2,cy:a+h/2,cz:Math.max(c,h)+Math.min(c,h)/2}}function xt(t){var e=t.length,n=e-1;return t.map((function(r,i){return t.map((function(r,o){var a,s=i+o;return 0===o||t[s]&&"M"===t[s][0]?(a=t[s],["M"].concat(a.slice(-2))):(s>=e&&(s-=n),t[s])}))}))}function wt(t,e){var n=t.length-1,r=[],i=0,o=0,a=xt(t);return a.forEach((function(i,a){t.slice(1).forEach((function(r,i){o+=lt(t[(a+i)%n].slice(-2),e[i%n].slice(-2))})),r[a]=o,o=0})),i=r.indexOf(Math.min.apply(null,r)),a[i]}function St(t,e,n,r,i,o,a,s){return 3*((s-e)*(n+i)-(a-t)*(r+o)+r*(t-i)-n*(e-o)+s*(i+t/3)-a*(o+e/3))/20}function Et(t){var e=0,n=0,r=0;return ot(t).map((function(t){var i;switch(t[0]){case"M":return e=t[1],n=t[2],0;default:var o=t.slice(1),a=o[0],s=o[1],l=o[2],u=o[3],c=o[4],h=o[5];return r=St(e,n,a,s,l,u,c,h),i=t.slice(-2),e=i[0],n=i[1],r}})).reduce((function(t,e){return t+e}),0)}function Ct(t){return Et(t)>=0}function Mt(t,e,n){return yt(t,e,O(O({},n),{bbox:!1,length:!0})).point}function Tt(t,e){var n=X(t);if("string"===typeof n)throw TypeError(n);var r=n.slice(),i=bt(r),o=r.length-1,a=0,s=0,l=n[0],u=l.slice(-2),c=u[0],h=u[1],d={x:c,y:h};if(o<=0||!e||!Number.isFinite(e))return{segment:l,index:0,length:s,point:d,lengthAtSegment:a};if(e>=i)return r=n.slice(0,-1),a=bt(r),s=i-a,{segment:n[o],index:o,length:s,lengthAtSegment:a};var f=[];while(o>0)l=r[o],r=r.slice(0,-1),a=bt(r),s=i-a,i=a,f.push({segment:l,index:o,length:s,lengthAtSegment:a}),o-=1;return f.find((function(t){var n=t.lengthAtSegment;return n<=e}))}function At(t,e){for(var n,r,i,o,a=X(t),s=K(a),l=bt(a),u=function(t){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r},c=8,h=0,d=0,f=1/0,p=0;p<=l;p+=c)n=Mt(s,p),h=u(n),h<f&&(r=n,d=p,f=h);c/=2;var g=0,m=0,y=0,v=0;while(c>.5)g=d-c,i=Mt(s,g),y=u(i),m=d+c,o=Mt(s,m),v=u(o),g>=0&&y<f?(r=i,d=g,f=y):m<=l&&v<f?(r=o,d=m,f=v):c/=2;var b=Tt(a,d),_=Math.sqrt(f);return{closest:r,distance:_,segment:b}}function Ot(t,e){var n=At(t,e).distance;return Math.abs(n)<.001}function kt(t,e){void 0===e&&(e=.5);var n=t.slice(0,2),r=t.slice(2,4),i=t.slice(4,6),o=t.slice(6,8),a=nt(n,r,e),s=nt(r,i,e),l=nt(i,o,e),u=nt(a,s,e),c=nt(s,l,e),h=nt(u,c,e);return[["C"].concat(a,u,h),["C"].concat(c,l,o)]}function It(t){return t.map((function(t,e,n){var r,i=e&&n[e-1].slice(-2).concat(t.slice(1)),o=e?pt(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],{bbox:!1}).length:0;return r=e?o?kt(i):[t,t]:[t],{s:t,ss:r,l:o}}))}function Pt(t,e,n){var r=It(t),i=It(e),o=r.length,a=i.length,s=r.filter((function(t){return t.l})).length,l=i.filter((function(t){return t.l})).length,u=r.filter((function(t){return t.l})).reduce((function(t,e){var n=e.l;return t+n}),0)/s||0,c=i.filter((function(t){return t.l})).reduce((function(t,e){var n=e.l;return t+n}),0)/l||0,h=n||Math.max(o,a),d=[u,c],f=[h-o,h-a],p=0,g=[r,i].map((function(t,e){return t.l===h?t.map((function(t){return t.s})):t.map((function(t,n){return p=n&&f[e]&&t.l>=d[e],f[e]-=p?1:0,p?t.ss:[t.s]})).flat()}));return g[0].length===g[1].length?g:Pt(g[0],g[1],h)}var Lt=function(t){return null!==t&&"function"!==typeof t&&isFinite(t.length)},Nt=Lt,Rt=function(t,e){return!!Nt(t)&&t.indexOf(e)>-1},Dt=Rt,Ft=function(t,e){if(!Nt(t))return t;for(var n=[],r=0;r<t.length;r++){var i=t[r];e(i,r)&&n.push(i)}return n},jt=Ft,Bt=function(t,e){return void 0===e&&(e=[]),jt(t,(function(t){return!Dt(e,t)}))},zt=Bt,Ut=function(t){return"function"===typeof t},Gt=function(t){return null===t||void 0===t},qt=Gt,Vt={}.toString,Ht=function(t,e){return Vt.call(t)==="[object "+e+"]"},Wt=Ht,Yt=function(t){return Array.isArray?Array.isArray(t):Wt(t,"Array")},Xt=function(t){var e=typeof t;return null!==t&&"object"===e||"function"===e};function Jt(t,e){var n;if(t)if(Yt(t)){for(var r=0,i=t.length;r<i;r++)if(n=e(t[r],r),!1===n)break}else if(Xt(t))for(var o in t)if(t.hasOwnProperty(o)&&(n=e(t[o],o),!1===n))break}var Zt=Jt,Kt=Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];return Zt(t,(function(n,r){Ut(t)&&"prototype"===r||e.push(r)})),e},Qt=Kt;function $t(t,e){var n=Qt(e),r=n.length;if(qt(t))return!r;for(var i=0;i<r;i+=1){var o=n[i];if(e[o]!==t[o]||!(o in t))return!1}return!0}var te=$t,ee=function(t){return"object"===typeof t&&null!==t},ne=ee,re=function(t){if(!ne(t)||!Wt(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;var e=t;while(null!==Object.getPrototypeOf(e))e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},ie=re;function oe(t,e){if(!Yt(t))return null;var n;if(Ut(e)&&(n=e),ie(e)&&(n=function(t){return te(t,e)}),n)for(var r=0;r<t.length;r+=1)if(n(t[r]))return t[r];return null}var ae=oe;function se(t,e,n){void 0===n&&(n=0);for(var r=n;r<t.length;r++)if(e(t[r],r))return r;return-1}var le=se,ue=function(t,e){for(var n=null,r=0;r<t.length;r++){var i=t[r],o=i[e];if(!qt(o)){n=Yt(o)?o[0]:o;break}}return n},ce=ue,he=function(t){if(!Yt(t))return[];for(var e=[],n=0;n<t.length;n++)e=e.concat(t[n]);return e},de=he,fe=function(t,e){if(void 0===e&&(e=[]),Yt(t))for(var n=0;n<t.length;n+=1)fe(t[n],e);else e.push(t);return e},pe=fe,ge=function(t){if(Yt(t))return t.reduce((function(t,e){return Math.max(t,e)}),t[0])},me=function(t){if(Yt(t))return t.reduce((function(t,e){return Math.min(t,e)}),t[0])},ye=function(t){var e=t.filter((function(t){return!isNaN(t)}));if(!e.length)return{min:0,max:0};if(Yt(t[0])){for(var n=[],r=0;r<t.length;r++)n=n.concat(t[r]);e=n}var i=ge(e),o=me(e);return{min:o,max:i}},ve=ye,be=Array.prototype,_e=be.splice,xe=be.indexOf,we=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r++){var i=e[r],o=-1;while((o=xe.call(t,i))>-1)_e.call(t,o,1)}return t},Se=we,Ee=Array.prototype.splice,Ce=function(t,e){if(!Nt(t))return[];var n=t?e.length:0,r=n-1;while(n--){var i=void 0,o=e[n];n!==r&&o===i||(i=o,Ee.call(t,o,1))}return t},Me=Ce,Te=function(t,e,n){if(!Yt(t)&&!ie(t))return t;var r=n;return Zt(t,(function(t,n){r=e(r,t,n)})),r},Ae=Te,Oe=function(t,e){var n=[];if(!Nt(t))return n;var r=-1,i=[],o=t.length;while(++r<o){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return Me(t,i),n},ke=Oe,Ie=function(t){return Wt(t,"String")};function Pe(t,e){var n;if(Ut(e))n=function(t,n){return e(t)-e(n)};else{var r=[];Ie(e)?r.push(e):Yt(e)&&(r=e),n=function(t,e){for(var n=0;n<r.length;n+=1){var i=r[n];if(t[i]>e[i])return 1;if(t[i]<e[i])return-1}return 0}}return t.sort(n),t}var Le=Pe;function Ne(t,e){void 0===e&&(e=new Map);var n=[];if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++){var o=t[r];e.has(o)||(n.push(o),e.set(o,!0))}return n}var Re=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Ne([].concat.apply([],t))},De=Re,Fe=function(t,e){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],a=o[e];if(!qt(a)){Yt(a)||(a=[a]);for(var s=0;s<a.length;s++){var l=a[s];r[l]||(n.push(l),r[l]=!0)}}}return n};function je(t){if(Nt(t))return t[0]}function Be(t){if(Nt(t)){var e=t;return e[e.length-1]}}function ze(t,e){return!(!Yt(t)&&!Ie(t))&&t[0]===e}var Ue=ze;function Ge(t,e){return!(!Yt(t)&&!Ie(t))&&t[t.length-1]===e}var qe=Ge,Ve=function(t,e){for(var n=0;n<t.length;n++)if(!e(t[n],n))return!1;return!0},He=Ve,We=function(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n))return!0;return!1},Ye=We,Xe=Object.prototype.hasOwnProperty;function Je(t,e){if(!e||!Yt(t))return{};for(var n,r={},i=Ut(e)?e:function(t){return t[e]},o=0;o<t.length;o++){var a=t[o];n=i(a),Xe.call(r,n)?r[n].push(a):r[n]=[a]}return r}var Ze=Je;function Ke(t,e){if(!e)return{0:t};if(!Ut(e)){var n=Yt(e)?e:e.replace(/\s+/g,"").split("*");e=function(t){for(var e="_",r=0,i=n.length;r<i;r++)e+=t[n[r]]&&t[n[r]].toString();return e}}return Ze(t,e)}var Qe=function(t,e){if(!e)return[t];var n=Ke(t,e),r=[];for(var i in n)r.push(n[i]);return r};function $e(t,e){return t["_wrap_"+e]}var tn=$e;function en(t,e){if(t["_wrap_"+e])return t["_wrap_"+e];var n=function(n){t[e](n)};return t["_wrap_"+e]=n,n}var nn=en,rn={};function on(t){var e=rn[t];if(!e){for(var n=t.toString(16),r=n.length;r<6;r++)n="0"+n;e="#"+n,rn[t]=e}return e}var an=on;function sn(t){var e=0,n=0,r=0,i=0;return Yt(t)?1===t.length?e=n=r=i=t[0]:2===t.length?(e=r=t[0],n=i=t[1]):3===t.length?(e=t[0],n=i=t[1],r=t[2]):(e=t[0],n=t[1],r=t[2],i=t[3]):e=n=r=i=t,{r1:e,r2:n,r3:r,r4:i}}var ln=sn,un=function(t,e,n){return t<e?e:t>n?n:t},cn=un,hn=function(t,e){var n=e.toString(),r=n.indexOf(".");if(-1===r)return Math.round(t);var i=n.substr(r+1).length;return i>20&&(i=20),parseFloat(t.toFixed(i))},dn=hn,fn=function(t){return Wt(t,"Number")},pn=fn,gn=function(t){return pn(t)&&t%1!==0},mn=gn,yn=function(t){return pn(t)&&t%2===0},vn=yn,bn=Number.isInteger?Number.isInteger:function(t){return pn(t)&&t%1===0},_n=bn,xn=function(t){return pn(t)&&t<0},wn=xn,Sn=1e-5;function En(t,e,n){return void 0===n&&(n=Sn),Math.abs(t-e)<n}var Cn=function(t){return pn(t)&&t%2!==0},Mn=Cn,Tn=function(t){return pn(t)&&t>0},An=Tn,On=function(t,e){if(Yt(t)){for(var n,r=-1/0,i=0;i<t.length;i++){var o=t[i],a=Ut(e)?e(o):o[e];a>r&&(n=o,r=a)}return n}},kn=function(t,e){if(Yt(t)){for(var n,r=1/0,i=0;i<t.length;i++){var o=t[i],a=Ut(e)?e(o):o[e];a<r&&(n=o,r=a)}return n}},In=function(t,e){return(t%e+e)%e},Pn=In,Ln=180/Math.PI,Nn=function(t){return Ln*t},Rn=Nn,Dn=parseInt,Fn=Math.PI/180,jn=function(t){return Fn*t},Bn=jn,zn=Zt,Un=function(t,e){return t.hasOwnProperty(e)},Gn=Un,qn=Object.values?function(t){return Object.values(t)}:function(t){var e=[];return Zt(t,(function(n,r){Ut(t)&&"prototype"===r||e.push(n)})),e},Vn=qn,Hn=function(t,e){return Dt(Vn(t),e)},Wn=function(t){return qt(t)?"":t.toString()},Yn=function(t){return Wn(t).toLowerCase()},Xn=Yn,Jn=function(t){var e=Wn(t);return e.charAt(0).toLowerCase()+e.substring(1)},Zn=Jn;function Kn(t,e){return t&&e?t.replace(/\\?\{([^{}]+)\}/g,(function(t,n){return"\\"===t.charAt(0)?t.slice(1):void 0===e[n]?"":e[n]})):t}var Qn=Kn,$n=function(t){return Wn(t).toUpperCase()},tr=$n,er=function(t){var e=Wn(t);return e.charAt(0).toUpperCase()+e.substring(1)},nr=er,rr={}.toString,ir=function(t){return rr.call(t).replace(/^\[object /,"").replace(/]$/,"")},or=ir,ar=function(t){return Wt(t,"Arguments")},sr=ar,lr=function(t){return Wt(t,"Boolean")},ur=lr,cr=function(t){return Wt(t,"Date")},hr=cr,dr=function(t){return Wt(t,"Error")},fr=dr,pr=function(t){return pn(t)&&isFinite(t)},gr=function(t){return null===t},mr=gr,yr=Object.prototype,vr=function(t){var e=t&&t.constructor,n="function"===typeof e&&e.prototype||yr;return t===n},br=vr,_r=function(t){return Wt(t,"RegExp")},xr=_r,wr=function(t){return void 0===t},Sr=wr,Er=function(t){return t instanceof Element||t instanceof Document},Cr=Er;function Mr(t){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)};return e(t)}function Tr(t){var e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;e(t)}function Ar(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&void 0!==e[n]&&(t[n]=e[n])}function Or(t,e,n,r){return e&&Ar(t,e),n&&Ar(t,n),r&&Ar(t,r),t}var kr=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t[0],r=1;r<t.length;r++){var i=t[r];Ut(i)&&(i=i.prototype),Or(n.prototype,i)}},Ir=kr,Pr=function(t){if("object"!==typeof t||null===t)return t;var e;if(Yt(t)){e=[];for(var n=0,r=t.length;n<r;n++)"object"===typeof t[n]&&null!=t[n]?e[n]=Pr(t[n]):e[n]=t[n]}else for(var i in e={},t)"object"===typeof t[i]&&null!=t[i]?e[i]=Pr(t[i]):e[i]=t[i];return e},Lr=Pr;function Nr(t,e,n){var r;return function(){var i=this,o=arguments,a=function(){r=null,n||t.apply(i,o)},s=n&&!r;clearTimeout(r),r=setTimeout(a,e),s&&t.apply(i,o)}}var Rr=Nr,Dr=function(t,e){if(!Ut(t))throw new TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=e?e.apply(this,r):r[0],a=n.cache;if(a.has(o))return a.get(o);var s=t.apply(this,r);return a.set(o,s),s};return n.cache=new Map,n},Fr=5;function jr(t,e){if(Object.hasOwn)return Object.hasOwn(t,e);if(null==t)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(t),e)}function Br(t,e,n,r){for(var i in n=n||0,r=r||Fr,e)if(jr(e,i)){var o=e[i];null!==o&&ie(o)?(ie(t[i])||(t[i]={}),n<r?Br(t[i],o,n+1,r):t[i]=e[i]):Yt(o)?(t[i]=[],t[i]=t[i].concat(o)):void 0!==o&&(t[i]=o)}}var zr=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)Br(t,e[r]);return t},Ur=zr,Gr=function(t,e,n,r){Ut(e)||(n=e,e=t,t=function(){});var i=Object.create?function(t,e){return Object.create(t,{constructor:{value:e}})}:function(t,e){function n(){}n.prototype=t;var r=new n;return r.constructor=e,r},o=i(e.prototype,t);return t.prototype=Or(o,t.prototype),t.superclass=i(e.prototype,e),Or(o,n),Or(t,r),t},qr=Gr,Vr=function(t,e){if(!Nt(t))return-1;var n=Array.prototype.indexOf;if(n)return n.call(t,e);for(var r=-1,i=0;i<t.length;i++)if(t[i]===e){r=i;break}return r},Hr=Vr,Wr=Object.prototype.hasOwnProperty;function Yr(t){if(qt(t))return!0;if(Nt(t))return!t.length;var e=or(t);if("Map"===e||"Set"===e)return!t.size;if(br(t))return!Object.keys(t).length;for(var n in t)if(Wr.call(t,n))return!1;return!0}var Xr=Yr,Jr=function(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Ie(t)||Ie(e))return!1;if(Nt(t)||Nt(e)){if(t.length!==e.length)return!1;for(var n=!0,r=0;r<t.length;r++)if(n=Jr(t[r],e[r]),!n)break;return n}if(ne(t)||ne(e)){var i=Object.keys(t),o=Object.keys(e);if(i.length!==o.length)return!1;for(n=!0,r=0;r<i.length;r++)if(n=Jr(t[i[r]],e[i[r]]),!n)break;return n}return!1},Zr=Jr,Kr=function(t,e,n){return Ut(n)?!!n(t,e):Zr(t,e)},Qr=function(t,e){if(!Nt(t))return t;for(var n=[],r=0;r<t.length;r++){var i=t[r];n.push(e(i,r))}return n},$r=Qr,ti=function(t){return t},ei=function(t,e){void 0===e&&(e=ti);var n={};return Xt(t)&&!qt(t)&&Object.keys(t).forEach((function(r){n[r]=e(t[r],r)})),n},ni=function(t,e,n){var r=0,i=Ie(e)?e.split("."):e;while(t&&r<i.length)t=t[i[r++]];return void 0===t||r<i.length?n:t},ri=function(t,e,n){var r=t,i=Ie(e)?e.split("."):e;return i.forEach((function(t,e){e<i.length-1?(Xt(r[t])||(r[t]=pn(i[e+1])?[]:{}),r=r[t]):r[t]=n})),t},ii=Object.prototype.hasOwnProperty,oi=function(t,e){if(null===t||!ie(t))return{};var n={};return Zt(e,(function(e){ii.call(t,e)&&(n[e]=t[e])})),n},ai=function(t,e){return Ae(t,(function(t,n,r){return e.includes(r)||(t[r]=n),t}),{})},si=function(t,e,n){var r,i,o,a,s=0;n||(n={});var l=function(){s=!1===n.leading?0:Date.now(),r=null,a=t.apply(i,o),r||(i=o=null)},u=function(){var u=Date.now();s||!1!==n.leading||(s=u);var c=e-(u-s);return i=this,o=arguments,c<=0||c>e?(r&&(clearTimeout(r),r=null),s=u,a=t.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(l,c)),a};return u.cancel=function(){clearTimeout(r),s=0,r=i=o=null},u},li=function(t){return Nt(t)?Array.prototype.slice.call(t):[]},ui={},ci=function(t){return t=t||"g",ui[t]?ui[t]+=1:ui[t]=1,t+ui[t]},hi=function(){},di=function(t){return t};function fi(t){return qt(t)?0:Nt(t)?t.length:Object.keys(t).length}var pi=function(){function t(){this.map={}}return t.prototype.has=function(t){return void 0!==this.map[t]},t.prototype.get=function(t,e){var n=this.map[t];return void 0===n?e:n},t.prototype.set=function(t,e){this.map[t]=e},t.prototype.clear=function(){this.map={}},t.prototype.delete=function(t){delete this.map[t]},t.prototype.size=function(){return Object.keys(this.map).length},t}(),gi=pi,mi=1e-6;function yi(t){return Math.abs(t)<mi?0:t<0?-1:1}function vi(t,e,n){return(n[0]-t[0])*(e[1]-t[1])===(e[0]-t[0])*(n[1]-t[1])&&Math.min(t[0],e[0])<=n[0]&&n[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=n[1]&&n[1]<=Math.max(t[1],e[1])}function bi(t,e,n){var r=!1,i=t.length;if(i<=2)return!1;for(var o=0;o<i;o++){var a=t[o],s=t[(o+1)%i];if(vi(a,s,[e,n]))return!0;yi(a[1]-n)>0!==yi(s[1]-n)>0&&yi(e-(n-a[1])*(a[0]-s[0])/(a[1]-s[1])-a[0])<0&&(r=!r)}return r}var _i=function(t,e,n){return t>=e&&t<=n};function xi(t,e,n,r){var i=.001,o={x:n.x-t.x,y:n.y-t.y},a={x:e.x-t.x,y:e.y-t.y},s={x:r.x-n.x,y:r.y-n.y},l=a.x*s.y-a.y*s.x,u=l*l,c=a.x*a.x+a.y*a.y,h=s.x*s.x+s.y*s.y,d=null;if(u>i*c*h){var f=(o.x*s.y-o.y*s.x)/l,p=(o.x*a.y-o.y*a.x)/l;_i(f,0,1)&&_i(p,0,1)&&(d={x:t.x+f*a.x,y:t.y+f*a.y})}return d}function wi(t){for(var e=[],n=t.length,r=0;r<n-1;r++){var i=t[r],o=t[r+1];e.push({from:{x:i[0],y:i[1]},to:{x:o[0],y:o[1]}})}if(e.length>1){var a=t[0],s=t[n-1];e.push({from:{x:s[0],y:s[1]},to:{x:a[0],y:a[1]}})}return e}function Si(t,e){var n=!1;return t.forEach((function(t){if(xi(t.from,t.to,e.from,e.to))return n=!0,!1})),n}function Ei(t){var e=t.map((function(t){return t[0]})),n=t.map((function(t){return t[1]}));return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,n),maxY:Math.max.apply(null,n)}}function Ci(t,e){return!(e.minX>t.maxX||e.maxX<t.minX||e.minY>t.maxY||e.maxY<t.minY)}function Mi(t,e){if(t.length<2||e.length<2)return!1;var n=Ei(t),r=Ei(e);if(!Ci(n,r))return!1;var i=!1;if(e.forEach((function(e){if(bi(t,e[0],e[1]))return i=!0,!1})),i)return!0;if(t.forEach((function(t){if(bi(e,t[0],t[1]))return i=!0,!1})),i)return!0;var o=wi(t),a=wi(e),s=!1;return a.forEach((function(t){if(Si(o,t))return s=!0,!1})),s}},f93c:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["ignore_unavailable","allow_no_indices","expand_wildcards","local","pretty","human","error_trace","source","filter_path"],a={ignoreUnavailable:"ignore_unavailable",allowNoIndices:"allow_no_indices",expandWildcards:"expand_wildcards",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null==t["index"]){const t=new n("Missing required parameter: index");return r(t,l)}if(null==t["type"]){const t=new n("Missing required parameter: type");return r(t,l)}if(null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=t["type"]&&null==t["index"]){const t=new n("Missing required parameter of the url: index");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,type:f,...p}=t;p=i(o,a,p,u),null==c&&(c="HEAD");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m="/"+encodeURIComponent(d)+"/_mapping/"+encodeURIComponent(f);const y={method:c,path:m,body:null,querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},fa97:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.FruchtermanLayout=void 0;var i=n("5bc9"),o=n("f271"),a=800,s=function(t){function e(e){var n=t.call(this)||this;return n.maxIteration=1e3,n.workerEnabled=!1,n.gravity=10,n.speed=5,n.clustering=!1,n.clusterGravity=10,n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.onLayoutEnd=function(){},n.tick=function(){},n.animate=!0,n.updateCfg(e),n}return r(e,t),e.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10,animate:!0}},e.prototype.execute=function(){var t,e,n=this,r=this,i=r.nodes;if(void 0!==r.timeInterval&&"undefined"!==typeof window&&window.clearInterval(r.timeInterval),i&&0!==i.length){r.width||"undefined"===typeof window||(r.width=window.innerWidth),r.height||"undefined"===typeof window||(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);var a=r.center;if(1===i.length)return i[0].x=a[0],i[0].y=a[1],void(null===(e=r.onLayoutEnd)||void 0===e||e.call(r));var s={},l={};return i.forEach((function(t,e){(0,o.isNumber)(t.x)||(t.x=Math.random()*n.width),(0,o.isNumber)(t.y)||(t.y=Math.random()*n.height),s[t.id]=t,l[t.id]=e})),r.nodeMap=s,r.nodeIdxMap=l,r.run()}null===(t=r.onLayoutEnd)||void 0===t||t.call(r)},e.prototype.run=function(){var t,e=this,n=e.nodes;if(n){var r=e.edges,i=e.maxIteration,o=e.workerEnabled,a=e.clustering,s=e.animate,l={};if(a&&n.forEach((function(t){void 0===l[t.cluster]&&(l[t.cluster]={name:t.cluster,cx:0,cy:0,count:0})})),o||!s){for(var u=0;u<i;u++)e.runOneStep(l);null===(t=e.onLayoutEnd)||void 0===t||t.call(e)}else{if("undefined"===typeof window)return;var c=0;this.timeInterval=window.setInterval((function(){var t;e.runOneStep(l),c++,c>=i&&(null===(t=e.onLayoutEnd)||void 0===t||t.call(e),window.clearInterval(e.timeInterval))}),0)}return{nodes:n,edges:r}}},e.prototype.runOneStep=function(t){var e,n=this,r=n.nodes;if(r){var i=n.edges,s=n.center,l=n.gravity,u=n.speed,c=n.clustering,h=n.height*n.width,d=Math.sqrt(h)/10,f=h/(r.length+1),p=Math.sqrt(f),g=[];if(r.forEach((function(t,e){g[e]={x:0,y:0}})),n.applyCalculate(r,i,g,p,f),c){for(var m in t)t[m].cx=0,t[m].cy=0,t[m].count=0;for(var m in r.forEach((function(e){var n=t[e.cluster];(0,o.isNumber)(e.x)&&(n.cx+=e.x),(0,o.isNumber)(e.y)&&(n.cy+=e.y),n.count++})),t)t[m].cx/=t[m].count,t[m].cy/=t[m].count;var y=n.clusterGravity||l;r.forEach((function(e,n){if((0,o.isNumber)(e.x)&&(0,o.isNumber)(e.y)){var r=t[e.cluster],i=Math.sqrt((e.x-r.cx)*(e.x-r.cx)+(e.y-r.cy)*(e.y-r.cy)),a=p*y;g[n].x-=a*(e.x-r.cx)/i,g[n].y-=a*(e.y-r.cy)/i}}))}r.forEach((function(t,e){if((0,o.isNumber)(t.x)&&(0,o.isNumber)(t.y)){var n=.01*p*l;g[e].x-=n*(t.x-s[0]),g[e].y-=n*(t.y-s[1])}})),r.forEach((function(t,e){if((0,o.isNumber)(t.fx)&&(0,o.isNumber)(t.fy))return t.x=t.fx,void(t.y=t.fy);if((0,o.isNumber)(t.x)&&(0,o.isNumber)(t.y)){var n=Math.sqrt(g[e].x*g[e].x+g[e].y*g[e].y);if(n>0){var r=Math.min(d*(u/a),n);t.x+=g[e].x/n*r,t.y+=g[e].y/n*r}}})),null===(e=n.tick)||void 0===e||e.call(n)}},e.prototype.applyCalculate=function(t,e,n,r,i){var o=this;o.calRepulsive(t,n,i),e&&o.calAttractive(e,n,r)},e.prototype.calRepulsive=function(t,e,n){t.forEach((function(r,i){e[i]={x:0,y:0},t.forEach((function(t,a){if(i!==a&&(0,o.isNumber)(r.x)&&(0,o.isNumber)(t.x)&&(0,o.isNumber)(r.y)&&(0,o.isNumber)(t.y)){var s=r.x-t.x,l=r.y-t.y,u=s*s+l*l;if(0===u){u=1;var c=i>a?1:-1;s=.01*c,l=.01*c}var h=n/u;e[i].x+=s*h,e[i].y+=l*h}}))}))},e.prototype.calAttractive=function(t,e,n){var r=this;t.forEach((function(t){var i=(0,o.getEdgeTerminal)(t,"source"),a=(0,o.getEdgeTerminal)(t,"target");if(i&&a){var s=r.nodeIdxMap[i],l=r.nodeIdxMap[a];if(s!==l){var u=r.nodeMap[i],c=r.nodeMap[a];if((0,o.isNumber)(c.x)&&(0,o.isNumber)(u.x)&&(0,o.isNumber)(c.y)&&(0,o.isNumber)(u.y)){var h=c.x-u.x,d=c.y-u.y,f=Math.sqrt(h*h+d*d),p=f*f/n;e[l].x-=h/f*p,e[l].y-=d/f*p,e[s].x+=h/f*p,e[s].y+=d/f*p}}}}))},e.prototype.stop=function(){this.timeInterval&&"undefined"!==typeof window&&window.clearInterval(this.timeInterval)},e.prototype.destroy=function(){var t=this;t.stop(),t.tick=null,t.nodes=null,t.edges=null,t.destroyed=!0},e.prototype.getType=function(){return"fruchterman"},e}(i.Base);e.FruchtermanLayout=s},faa1:function(t,e,n){"use strict";var r,i="object"===typeof Reflect?Reflect:null,o=i&&"function"===typeof i.apply?i.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};function a(t){console&&console.warn&&console.warn(t)}r=i&&"function"===typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var s=Number.isNaN||function(t){return t!==t};function l(){l.init.call(this)}t.exports=l,t.exports.once=_,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var u=10;function c(t){if("function"!==typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function h(t){return void 0===t._maxListeners?l.defaultMaxListeners:t._maxListeners}function d(t,e,n,r){var i,o,s;if(c(n),o=t._events,void 0===o?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]),void 0===s)s=o[e]=n,++t._eventsCount;else if("function"===typeof s?s=o[e]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),i=h(t),i>0&&s.length>i&&!s.warned){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=s.length,a(l)}return t}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=f.bind(r);return i.listener=n,r.wrapFn=i,i}function g(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"===typeof i?n?[i.listener||i]:[i]:n?b(i):y(i,i.length)}function m(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function y(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function v(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function b(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function _(t,e){return new Promise((function(n,r){function i(n){t.removeListener(e,o),r(n)}function o(){"function"===typeof t.removeListener&&t.removeListener("error",i),n([].slice.call(arguments))}w(t,e,o,{once:!0}),"error"!==e&&x(t,i,{once:!0})}))}function x(t,e,n){"function"===typeof t.on&&w(t,"error",e,n)}function w(t,e,n,r){if("function"===typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!==typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(o){r.once&&t.removeEventListener(e,i),n(o)}))}}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!==typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");u=t}}),l.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(t){if("number"!==typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},l.prototype.getMaxListeners=function(){return h(this)},l.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var l=i[t];if(void 0===l)return!1;if("function"===typeof l)o(l,this,e);else{var u=l.length,c=y(l,u);for(n=0;n<u;++n)o(c[n],this,e)}return!0},l.prototype.addListener=function(t,e){return d(this,t,e,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(t,e){return d(this,t,e,!0)},l.prototype.once=function(t,e){return c(e),this.on(t,p(this,t,e)),this},l.prototype.prependOnceListener=function(t,e){return c(e),this.prependListener(t,p(this,t,e)),this},l.prototype.removeListener=function(t,e){var n,r,i,o,a;if(c(e),r=this._events,void 0===r)return this;if(n=r[t],void 0===n)return this;if(n===e||n.listener===e)0===--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!==typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():v(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(t){var e,n,r;if(n=this._events,void 0===n)return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)i=o[r],"removeListener"!==i&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=n[t],"function"===typeof e)this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},l.prototype.listeners=function(t){return g(this,t,!0)},l.prototype.rawListeners=function(t){return g(this,t,!1)},l.listenerCount=function(t,e){return"function"===typeof t.listenerCount?t.listenerCount(e):m.call(t,e)},l.prototype.listenerCount=m,l.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},faf9:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.id=t.id||0,this.rx=t.rx,this.ry=t.ry,this.fx=0,this.fy=0,this.mass=t.mass,this.degree=t.degree,this.g=t.g||0}return t.prototype.distanceTo=function(t){var e=this.rx-t.rx,n=this.ry-t.ry;return Math.hypot(e,n)},t.prototype.setPos=function(t,e){this.rx=t,this.ry=e},t.prototype.resetForce=function(){this.fx=0,this.fy=0},t.prototype.addForce=function(t){var e=t.rx-this.rx,n=t.ry-this.ry,r=Math.hypot(e,n);r=r<1e-4?1e-4:r;var i=this.g*(this.degree+1)*(t.degree+1)/r;this.fx+=i*e/r,this.fy+=i*n/r},t.prototype.in=function(t){return t.contains(this.rx,this.ry)},t.prototype.add=function(e){var n=this.mass+e.mass,r=(this.rx*this.mass+e.rx*e.mass)/n,i=(this.ry*this.mass+e.ry*e.mass)/n,o=this.degree+e.degree,a={rx:r,ry:i,mass:n,degree:o};return new t(a)},t}();e.default=r},fd2c:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["local","master_timeout","flat_settings","ignore_unavailable","allow_no_indices","expand_wildcards","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",flatSettings:"flat_settings",ignoreUnavailable:"ignore_unavailable",allowNoIndices:"allow_no_indices",expandWildcards:"expand_wildcards",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=t["index"]&&null==t["metric"]){const t=new n("Missing required parameter of the url: metric");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,metric:f,...p}=t;p=i(o,a,p,u),null==c&&(c="GET");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m=null!=f&&null!=d?"/_cluster/state/"+encodeURIComponent(f)+"/"+encodeURIComponent(d):null!=f?"/_cluster/state/"+encodeURIComponent(f):"/_cluster/state";const y={method:c,path:m,body:null,querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},fd4b:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["level","local","master_timeout","timeout","wait_for_active_shards","wait_for_nodes","wait_for_events","wait_for_no_relocating_shards","wait_for_status","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",waitForActiveShards:"wait_for_active_shards",waitForNodes:"wait_for_nodes",waitForEvents:"wait_for_events",waitForNoRelocatingShards:"wait_for_no_relocating_shards",waitForStatus:"wait_for_status",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,index:d,...f}=t;f=i(o,a,f,u),null==c&&(c="GET");var p=s.ignore;"number"===typeof p&&(s.ignore=[p]);var g="";g=null!=d?"/_cluster/health/"+encodeURIComponent(d):"/_cluster/health";const m={method:c,path:g,body:null,querystring:f};return s.warnings=0===u.length?null:u,e(m,s,l)}}t.exports=r},fd7c:function(t,e,n){"use strict";const{stringify:r}=n("b383"),i=n("34eb")("elasticsearch"),o=n("d26d"),{SerializationError:a,DeserializationError:s}=n("e9f1");class l{serialize(t){i("Serializing",t);try{var e=JSON.stringify(t)}catch(n){throw new a(n.message)}return e}deserialize(t){i("Deserializing",t);try{var e=o.parse(t)}catch(n){throw new s(n.message)}return e}ndserialize(t){if(i("ndserialize",t),!1===Array.isArray(t))throw new a("The argument provided is not an array");for(var e="",n=0,r=t.length;n<r;n++)"string"===typeof t[n]?e+=t[n]+"\n":e+=this.serialize(t[n])+"\n";return e}qserialize(t){if(i("qserialize",t),null==t)return"";if("string"===typeof t)return t;const e=Object.keys(t);for(var n=0,o=e.length;n<o;n++){var a=e[n];void 0===t[a]?delete t[a]:!0===Array.isArray(t[a])&&(t[a]=t[a].join(","))}return r(t)}}t.exports=l},fdf9:function(t,e,n){(function(t){(function(t,n){n(e)})(0,(function(e){"use strict";var n="2.0.62",r=function(t){t&&t.clearRect&&t.clearRect(0,0,t.canvas.width,t.canvas.height)},i=function(t){var e=window.devicePixelRatio||1;t.canvas.width=t.canvas.width*e,t.canvas.height=t.canvas.height*e,t.canvas.style.width=t.canvas.width/e+"px",t.canvas.style.height=t.canvas.height/e+"px",t.scale(e,e)};function o(){this._subscribers={}}o.prototype.on=function(t,e){var n=this._subscribers[t];n||(n=[],this._subscribers[t]=n),n.push({callback:e})},o.prototype.off=function(t,e){var n=this._subscribers[t];if(n)for(var r=0;r<n.length;r++)n[r].callback==e&&(n.splice(r,1),r--)},o.prototype._trigger=function(t,e,n){if("*"==t)throw new Error("Cannot trigger event *");var r=[];t in this._subscribers&&(r=r.concat(this._subscribers[t])),"*"in this._subscribers&&(r=r.concat(this._subscribers["*"]));for(var i=0,o=r.length;i<o;i++){var a=r[i];a.callback&&a.callback(t,e,n||null)}};var a={municipalities:[{n:"北京",g:"116.395645,39.929986|12"},{n:"上海",g:"121.487899,31.249162|12"},{n:"天津",g:"117.210813,39.14393|12"},{n:"重庆",g:"106.530635,29.544606|12"}],provinces:[{n:"安徽",g:"117.216005,31.859252|8",cities:[{n:"合肥",g:"117.282699,31.866942|12"},{n:"安庆",g:"117.058739,30.537898|13"},{n:"蚌埠",g:"117.35708,32.929499|13"},{n:"亳州",g:"115.787928,33.871211|13"},{n:"巢湖",g:"117.88049,31.608733|13"},{n:"池州",g:"117.494477,30.660019|14"},{n:"滁州",g:"118.32457,32.317351|13"},{n:"阜阳",g:"115.820932,32.901211|13"},{n:"淮北",g:"116.791447,33.960023|13"},{n:"淮南",g:"117.018639,32.642812|13"},{n:"黄山",g:"118.29357,29.734435|13"},{n:"六安",g:"116.505253,31.755558|13"},{n:"马鞍山",g:"118.515882,31.688528|13"},{n:"宿州",g:"116.988692,33.636772|13"},{n:"铜陵",g:"117.819429,30.94093|14"},{n:"芜湖",g:"118.384108,31.36602|12"},{n:"宣城",g:"118.752096,30.951642|13"}]},{n:"福建",g:"117.984943,26.050118|8",cities:[{n:"福州",g:"119.330221,26.047125|12"},{n:"龙岩",g:"117.017997,25.078685|13"},{n:"南平",g:"118.181883,26.643626|13"},{n:"宁德",g:"119.542082,26.656527|14"},{n:"莆田",g:"119.077731,25.44845|13"},{n:"泉州",g:"118.600362,24.901652|12"},{n:"三明",g:"117.642194,26.270835|14"},{n:"厦门",g:"118.103886,24.489231|12"},{n:"漳州",g:"117.676205,24.517065|12"}]},{n:"甘肃",g:"102.457625,38.103267|6",cities:[{n:"兰州",g:"103.823305,36.064226|12"},{n:"白银",g:"104.171241,36.546682|13"},{n:"定西",g:"104.626638,35.586056|13"},{n:"甘南州",g:"102.917442,34.992211|14"},{n:"嘉峪关",g:"98.281635,39.802397|13"},{n:"金昌",g:"102.208126,38.516072|13"},{n:"酒泉",g:"98.508415,39.741474|13"},{n:"临夏州",g:"103.215249,35.598514|13"},{n:"陇南",g:"104.934573,33.39448|14"},{n:"平凉",g:"106.688911,35.55011|13"},{n:"庆阳",g:"107.644227,35.726801|13"},{n:"天水",g:"105.736932,34.584319|13"},{n:"武威",g:"102.640147,37.933172|13"},{n:"张掖",g:"100.459892,38.93932|13"}]},{n:"广东",g:"113.394818,23.408004|8",cities:[{n:"广州",g:"113.30765,23.120049|12"},{n:"潮州",g:"116.630076,23.661812|13"},{n:"东莞",g:"113.763434,23.043024|12"},{n:"佛山",g:"113.134026,23.035095|13"},{n:"河源",g:"114.713721,23.757251|12"},{n:"惠州",g:"114.410658,23.11354|12"},{n:"江门",g:"113.078125,22.575117|13"},{n:"揭阳",g:"116.379501,23.547999|13"},{n:"茂名",g:"110.931245,21.668226|13"},{n:"梅州",g:"116.126403,24.304571|13"},{n:"清远",g:"113.040773,23.698469|13"},{n:"汕头",g:"116.72865,23.383908|13"},{n:"汕尾",g:"115.372924,22.778731|14"},{n:"韶关",g:"113.594461,24.80296|13"},{n:"深圳",g:"114.025974,22.546054|12"},{n:"阳江",g:"111.97701,21.871517|14"},{n:"云浮",g:"112.050946,22.937976|13"},{n:"湛江",g:"110.365067,21.257463|13"},{n:"肇庆",g:"112.479653,23.078663|13"},{n:"中山",g:"113.42206,22.545178|12"},{n:"珠海",g:"113.562447,22.256915|13"}]},{n:"广西",g:"108.924274,23.552255|7",cities:[{n:"南宁",g:"108.297234,22.806493|12"},{n:"百色",g:"106.631821,23.901512|13"},{n:"北海",g:"109.122628,21.472718|13"},{n:"崇左",g:"107.357322,22.415455|14"},{n:"防城港",g:"108.351791,21.617398|15"},{n:"桂林",g:"110.26092,25.262901|12"},{n:"贵港",g:"109.613708,23.103373|13"},{n:"河池",g:"108.069948,24.699521|14"},{n:"贺州",g:"111.552594,24.411054|14"},{n:"来宾",g:"109.231817,23.741166|14"},{n:"柳州",g:"109.422402,24.329053|12"},{n:"钦州",g:"108.638798,21.97335|13"},{n:"梧州",g:"111.305472,23.485395|13"},{n:"玉林",g:"110.151676,22.643974|14"}]},{n:"贵州",g:"106.734996,26.902826|8",cities:[{n:"贵阳",g:"106.709177,26.629907|12"},{n:"安顺",g:"105.92827,26.228595|13"},{n:"毕节地区",g:"105.300492,27.302612|14"},{n:"六盘水",g:"104.852087,26.591866|13"},{n:"铜仁地区",g:"109.196161,27.726271|14"},{n:"遵义",g:"106.93126,27.699961|13"},{n:"黔西南州",g:"104.900558,25.095148|11"},{n:"黔东南州",g:"107.985353,26.583992|11"},{n:"黔南州",g:"107.523205,26.264536|11"}]},{n:"海南",g:"109.733755,19.180501|9",cities:[{n:"海口",g:"110.330802,20.022071|13"},{n:"白沙",g:"109.358586,19.216056|12"},{n:"保亭",g:"109.656113,18.597592|12"},{n:"昌江",g:"109.0113,19.222483|12"},{n:"儋州",g:"109.413973,19.571153|13"},{n:"澄迈",g:"109.996736,19.693135|13"},{n:"东方",g:"108.85101,18.998161|13"},{n:"定安",g:"110.32009,19.490991|13"},{n:"琼海",g:"110.414359,19.21483|13"},{n:"琼中",g:"109.861849,19.039771|12"},{n:"乐东",g:"109.062698,18.658614|12"},{n:"临高",g:"109.724101,19.805922|13"},{n:"陵水",g:"109.948661,18.575985|12"},{n:"三亚",g:"109.522771,18.257776|12"},{n:"屯昌",g:"110.063364,19.347749|13"},{n:"万宁",g:"110.292505,18.839886|13"},{n:"文昌",g:"110.780909,19.750947|13"},{n:"五指山",g:"109.51775,18.831306|13"}]},{n:"河北",g:"115.661434,38.61384|7",cities:[{n:"石家庄",g:"114.522082,38.048958|12"},{n:"保定",g:"115.49481,38.886565|13"},{n:"沧州",g:"116.863806,38.297615|13"},{n:"承德",g:"117.933822,40.992521|14"},{n:"邯郸",g:"114.482694,36.609308|13"},{n:"衡水",g:"115.686229,37.746929|13"},{n:"廊坊",g:"116.703602,39.518611|13"},{n:"秦皇岛",g:"119.604368,39.945462|12"},{n:"唐山",g:"118.183451,39.650531|13"},{n:"邢台",g:"114.520487,37.069531|13"},{n:"张家口",g:"114.893782,40.811188|13"}]},{n:"河南",g:"113.486804,34.157184|7",cities:[{n:"郑州",g:"113.649644,34.75661|12"},{n:"安阳",g:"114.351807,36.110267|12"},{n:"鹤壁",g:"114.29777,35.755426|13"},{n:"焦作",g:"113.211836,35.234608|13"},{n:"开封",g:"114.351642,34.801854|13"},{n:"洛阳",g:"112.447525,34.657368|12"},{n:"漯河",g:"114.046061,33.576279|13"},{n:"南阳",g:"112.542842,33.01142|13"},{n:"平顶山",g:"113.300849,33.745301|13"},{n:"濮阳",g:"115.026627,35.753298|12"},{n:"三门峡",g:"111.181262,34.78332|13"},{n:"商丘",g:"115.641886,34.438589|13"},{n:"新乡",g:"113.91269,35.307258|13"},{n:"信阳",g:"114.085491,32.128582|13"},{n:"许昌",g:"113.835312,34.02674|13"},{n:"周口",g:"114.654102,33.623741|13"},{n:"驻马店",g:"114.049154,32.983158|13"}]},{n:"黑龙江",g:"128.047414,47.356592|6",cities:[{n:"哈尔滨",g:"126.657717,45.773225|12"},{n:"大庆",g:"125.02184,46.596709|12"},{n:"大兴安岭地区",g:"124.196104,51.991789|10"},{n:"鹤岗",g:"130.292472,47.338666|13"},{n:"黑河",g:"127.50083,50.25069|14"},{n:"鸡西",g:"130.941767,45.32154|13"},{n:"佳木斯",g:"130.284735,46.81378|12"},{n:"牡丹江",g:"129.608035,44.588521|13"},{n:"七台河",g:"131.019048,45.775005|14"},{n:"齐齐哈尔",g:"123.987289,47.3477|13"},{n:"双鸭山",g:"131.171402,46.655102|13"},{n:"绥化",g:"126.989095,46.646064|13"},{n:"伊春",g:"128.910766,47.734685|14"}]},{n:"湖北",g:"112.410562,31.209316|8",cities:[{n:"武汉",g:"114.3162,30.581084|12"},{n:"鄂州",g:"114.895594,30.384439|14"},{n:"恩施",g:"109.517433,30.308978|14"},{n:"黄冈",g:"114.906618,30.446109|14"},{n:"黄石",g:"115.050683,30.216127|13"},{n:"荆门",g:"112.21733,31.042611|13"},{n:"荆州",g:"112.241866,30.332591|12"},{n:"潜江",g:"112.768768,30.343116|13"},{n:"神农架林区",g:"110.487231,31.595768|13"},{n:"十堰",g:"110.801229,32.636994|13"},{n:"随州",g:"113.379358,31.717858|13"},{n:"天门",g:"113.12623,30.649047|13"},{n:"仙桃",g:"113.387448,30.293966|13"},{n:"咸宁",g:"114.300061,29.880657|13"},{n:"襄阳",g:"112.176326,32.094934|12"},{n:"孝感",g:"113.935734,30.927955|13"},{n:"宜昌",g:"111.310981,30.732758|13"}]},{n:"湖南",g:"111.720664,27.695864|7",cities:[{n:"长沙",g:"112.979353,28.213478|12"},{n:"常德",g:"111.653718,29.012149|12"},{n:"郴州",g:"113.037704,25.782264|13"},{n:"衡阳",g:"112.583819,26.898164|13"},{n:"怀化",g:"109.986959,27.557483|13"},{n:"娄底",g:"111.996396,27.741073|13"},{n:"邵阳",g:"111.461525,27.236811|13"},{n:"湘潭",g:"112.935556,27.835095|13"},{n:"湘西州",g:"109.745746,28.317951|14"},{n:"益阳",g:"112.366547,28.588088|13"},{n:"永州",g:"111.614648,26.435972|13"},{n:"岳阳",g:"113.146196,29.378007|13"},{n:"张家界",g:"110.48162,29.124889|13"},{n:"株洲",g:"113.131695,27.827433|13"}]},{n:"江苏",g:"119.368489,33.013797|8",cities:[{n:"南京",g:"118.778074,32.057236|12"},{n:"常州",g:"119.981861,31.771397|12"},{n:"淮安",g:"119.030186,33.606513|12"},{n:"连云港",g:"119.173872,34.601549|12"},{n:"南通",g:"120.873801,32.014665|12"},{n:"苏州",g:"120.619907,31.317987|12"},{n:"宿迁",g:"118.296893,33.95205|13"},{n:"泰州",g:"119.919606,32.476053|13"},{n:"无锡",g:"120.305456,31.570037|12"},{n:"徐州",g:"117.188107,34.271553|12"},{n:"盐城",g:"120.148872,33.379862|12"},{n:"扬州",g:"119.427778,32.408505|13"},{n:"镇江",g:"119.455835,32.204409|13"}]},{n:"江西",g:"115.676082,27.757258|7",cities:[{n:"南昌",g:"115.893528,28.689578|12"},{n:"抚州",g:"116.360919,27.954545|13"},{n:"赣州",g:"114.935909,25.845296|13"},{n:"吉安",g:"114.992039,27.113848|13"},{n:"景德镇",g:"117.186523,29.303563|12"},{n:"九江",g:"115.999848,29.71964|13"},{n:"萍乡",g:"113.859917,27.639544|13"},{n:"上饶",g:"117.955464,28.457623|13"},{n:"新余",g:"114.947117,27.822322|13"},{n:"宜春",g:"114.400039,27.81113|13"},{n:"鹰潭",g:"117.03545,28.24131|13"}]},{n:"吉林",g:"126.262876,43.678846|7",cities:[{n:"长春",g:"125.313642,43.898338|12"},{n:"白城",g:"122.840777,45.621086|13"},{n:"白山",g:"126.435798,41.945859|13"},{n:"吉林",g:"126.564544,43.871988|12"},{n:"辽源",g:"125.133686,42.923303|13"},{n:"四平",g:"124.391382,43.175525|12"},{n:"松原",g:"124.832995,45.136049|13"},{n:"通化",g:"125.94265,41.736397|13"},{n:"延边",g:"129.485902,42.896414|13"}]},{n:"辽宁",g:"122.753592,41.6216|8",cities:[{n:"沈阳",g:"123.432791,41.808645|12"},{n:"鞍山",g:"123.007763,41.118744|13"},{n:"本溪",g:"123.778062,41.325838|12"},{n:"朝阳",g:"120.446163,41.571828|13"},{n:"大连",g:"121.593478,38.94871|12"},{n:"丹东",g:"124.338543,40.129023|12"},{n:"抚顺",g:"123.92982,41.877304|12"},{n:"阜新",g:"121.660822,42.01925|14"},{n:"葫芦岛",g:"120.860758,40.74303|13"},{n:"锦州",g:"121.147749,41.130879|13"},{n:"辽阳",g:"123.172451,41.273339|14"},{n:"盘锦",g:"122.073228,41.141248|13"},{n:"铁岭",g:"123.85485,42.299757|13"},{n:"营口",g:"122.233391,40.668651|13"}]},{n:"内蒙古",g:"114.415868,43.468238|5",cities:[{n:"呼和浩特",g:"111.660351,40.828319|12"},{n:"阿拉善盟",g:"105.695683,38.843075|14"},{n:"包头",g:"109.846239,40.647119|12"},{n:"巴彦淖尔",g:"107.423807,40.76918|12"},{n:"赤峰",g:"118.930761,42.297112|12"},{n:"鄂尔多斯",g:"109.993706,39.81649|12"},{n:"呼伦贝尔",g:"119.760822,49.201636|12"},{n:"通辽",g:"122.260363,43.633756|12"},{n:"乌海",g:"106.831999,39.683177|13"},{n:"乌兰察布",g:"113.112846,41.022363|12"},{n:"锡林郭勒盟",g:"116.02734,43.939705|11"},{n:"兴安盟",g:"122.048167,46.083757|11"}]},{n:"宁夏",g:"106.155481,37.321323|8",cities:[{n:"银川",g:"106.206479,38.502621|12"},{n:"固原",g:"106.285268,36.021523|13"},{n:"石嘴山",g:"106.379337,39.020223|13"},{n:"吴忠",g:"106.208254,37.993561|14"},{n:"中卫",g:"105.196754,37.521124|14"}]},{n:"青海",g:"96.202544,35.499761|7",cities:[{n:"西宁",g:"101.767921,36.640739|12"},{n:"果洛州",g:"100.223723,34.480485|11"},{n:"海东地区",g:"102.085207,36.51761|11"},{n:"海北州",g:"100.879802,36.960654|11"},{n:"海南州",g:"100.624066,36.284364|11"},{n:"海西州",g:"97.342625,37.373799|11"},{n:"黄南州",g:"102.0076,35.522852|11"},{n:"玉树州",g:"97.013316,33.00624|14"}]},{n:"山东",g:"118.527663,36.09929|8",cities:[{n:"济南",g:"117.024967,36.682785|12"},{n:"滨州",g:"117.968292,37.405314|12"},{n:"东营",g:"118.583926,37.487121|12"},{n:"德州",g:"116.328161,37.460826|12"},{n:"菏泽",g:"115.46336,35.26244|13"},{n:"济宁",g:"116.600798,35.402122|13"},{n:"莱芜",g:"117.684667,36.233654|13"},{n:"聊城",g:"115.986869,36.455829|12"},{n:"临沂",g:"118.340768,35.072409|12"},{n:"青岛",g:"120.384428,36.105215|12"},{n:"日照",g:"119.50718,35.420225|12"},{n:"泰安",g:"117.089415,36.188078|13"},{n:"威海",g:"122.093958,37.528787|13"},{n:"潍坊",g:"119.142634,36.716115|12"},{n:"烟台",g:"121.309555,37.536562|12"},{n:"枣庄",g:"117.279305,34.807883|13"},{n:"淄博",g:"118.059134,36.804685|12"}]},{n:"山西",g:"112.515496,37.866566|7",cities:[{n:"太原",g:"112.550864,37.890277|12"},{n:"长治",g:"113.120292,36.201664|12"},{n:"大同",g:"113.290509,40.113744|12"},{n:"晋城",g:"112.867333,35.499834|13"},{n:"晋中",g:"112.738514,37.693362|13"},{n:"临汾",g:"111.538788,36.099745|13"},{n:"吕梁",g:"111.143157,37.527316|14"},{n:"朔州",g:"112.479928,39.337672|13"},{n:"忻州",g:"112.727939,38.461031|12"},{n:"阳泉",g:"113.569238,37.869529|13"},{n:"运城",g:"111.006854,35.038859|13"}]},{n:"陕西",g:"109.503789,35.860026|7",cities:[{n:"西安",g:"108.953098,34.2778|12"},{n:"安康",g:"109.038045,32.70437|13"},{n:"宝鸡",g:"107.170645,34.364081|12"},{n:"汉中",g:"107.045478,33.081569|13"},{n:"商洛",g:"109.934208,33.873907|13"},{n:"铜川",g:"108.968067,34.908368|13"},{n:"渭南",g:"109.483933,34.502358|13"},{n:"咸阳",g:"108.707509,34.345373|13"},{n:"延安",g:"109.50051,36.60332|13"},{n:"榆林",g:"109.745926,38.279439|12"}]},{n:"四川",g:"102.89916,30.367481|7",cities:[{n:"成都",g:"104.067923,30.679943|12"},{n:"阿坝州",g:"102.228565,31.905763|15"},{n:"巴中",g:"106.757916,31.869189|14"},{n:"达州",g:"107.494973,31.214199|14"},{n:"德阳",g:"104.402398,31.13114|13"},{n:"甘孜州",g:"101.969232,30.055144|15"},{n:"广安",g:"106.63572,30.463984|13"},{n:"广元",g:"105.819687,32.44104|13"},{n:"乐山",g:"103.760824,29.600958|13"},{n:"凉山州",g:"102.259591,27.892393|14"},{n:"泸州",g:"105.44397,28.89593|14"},{n:"南充",g:"106.105554,30.800965|13"},{n:"眉山",g:"103.84143,30.061115|13"},{n:"绵阳",g:"104.705519,31.504701|12"},{n:"内江",g:"105.073056,29.599462|13"},{n:"攀枝花",g:"101.722423,26.587571|14"},{n:"遂宁",g:"105.564888,30.557491|12"},{n:"雅安",g:"103.009356,29.999716|13"},{n:"宜宾",g:"104.633019,28.769675|13"},{n:"资阳",g:"104.63593,30.132191|13"},{n:"自贡",g:"104.776071,29.359157|13"}]},{n:"西藏",g:"89.137982,31.367315|6",cities:[{n:"拉萨",g:"91.111891,29.662557|13"},{n:"阿里地区",g:"81.107669,30.404557|11"},{n:"昌都地区",g:"97.185582,31.140576|15"},{n:"林芝地区",g:"94.349985,29.666941|11"},{n:"那曲地区",g:"92.067018,31.48068|14"},{n:"日喀则地区",g:"88.891486,29.269023|14"},{n:"山南地区",g:"91.750644,29.229027|11"}]},{n:"新疆",g:"85.614899,42.127001|6",cities:[{n:"乌鲁木齐",g:"87.564988,43.84038|12"},{n:"阿拉尔",g:"81.291737,40.61568|13"},{n:"阿克苏地区",g:"80.269846,41.171731|12"},{n:"阿勒泰地区",g:"88.137915,47.839744|13"},{n:"巴音郭楞",g:"86.121688,41.771362|12"},{n:"博尔塔拉州",g:"82.052436,44.913651|11"},{n:"昌吉州",g:"87.296038,44.007058|13"},{n:"哈密地区",g:"93.528355,42.858596|13"},{n:"和田地区",g:"79.930239,37.116774|13"},{n:"喀什地区",g:"75.992973,39.470627|12"},{n:"克拉玛依",g:"84.88118,45.594331|13"},{n:"克孜勒苏州",g:"76.137564,39.750346|11"},{n:"石河子",g:"86.041865,44.308259|13"},{n:"塔城地区",g:"82.974881,46.758684|12"},{n:"图木舒克",g:"79.198155,39.889223|13"},{n:"吐鲁番地区",g:"89.181595,42.96047|13"},{n:"五家渠",g:"87.565449,44.368899|13"},{n:"伊犁州",g:"81.297854,43.922248|11"}]},{n:"云南",g:"101.592952,24.864213|7",cities:[{n:"昆明",g:"102.714601,25.049153|12"},{n:"保山",g:"99.177996,25.120489|13"},{n:"楚雄州",g:"101.529382,25.066356|13"},{n:"大理州",g:"100.223675,25.5969|14"},{n:"德宏州",g:"98.589434,24.44124|14"},{n:"迪庆州",g:"99.713682,27.831029|14"},{n:"红河州",g:"103.384065,23.367718|11"},{n:"丽江",g:"100.229628,26.875351|13"},{n:"临沧",g:"100.092613,23.887806|14"},{n:"怒江州",g:"98.859932,25.860677|14"},{n:"普洱",g:"100.980058,22.788778|14"},{n:"曲靖",g:"103.782539,25.520758|12"},{n:"昭通",g:"103.725021,27.340633|13"},{n:"文山",g:"104.089112,23.401781|14"},{n:"西双版纳",g:"100.803038,22.009433|13"},{n:"玉溪",g:"102.545068,24.370447|13"}]},{n:"浙江",g:"119.957202,29.159494|8",cities:[{n:"杭州",g:"120.219375,30.259244|12"},{n:"湖州",g:"120.137243,30.877925|12"},{n:"嘉兴",g:"120.760428,30.773992|13"},{n:"金华",g:"119.652576,29.102899|12"},{n:"丽水",g:"119.929576,28.4563|13"},{n:"宁波",g:"121.579006,29.885259|12"},{n:"衢州",g:"118.875842,28.95691|12"},{n:"绍兴",g:"120.592467,30.002365|13"},{n:"台州",g:"121.440613,28.668283|13"},{n:"温州",g:"120.690635,28.002838|12"},{n:"舟山",g:"122.169872,30.03601|13"}]}],other:[{n:"香港",g:"114.186124,22.293586|11"},{n:"澳门",g:"113.557519,22.204118|13"},{n:"台湾",g:"120.961454,23.80406|8"}]};function s(t){var e=t.split("|");return e[0]=e[0].split(","),{lng:parseFloat(e[0][0]),lat:parseFloat(e[0][1])}}var l={getProvinceNameByCityName:function(t){for(var e=a.provinces,n=0;n<e.length;n++)for(var r=e[n].n,i=e[n].cities,o=0;o<i.length;o++)if(i[o].n==t)return r;return null},getCenterByCityName:function(t){t=t.replace("市","");for(var e=0;e<a.municipalities.length;e++)if(a.municipalities[e].n==t)return s(a.municipalities[e].g);for(e=0;e<a.other.length;e++)if(a.other[e].n==t)return s(a.other[e].g);var n=a.provinces;for(e=0;e<n.length;e++){if(n[e].n==t)return s(n[e].g);for(var r=n[e].cities,i=0;i<r.length;i++)if(r[i].n==t)return s(r[i].g)}return null}},u=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),h=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},d=function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},f=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e},p=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)if(n.push(a.value),e&&n.length===e)break}catch(l){i=!0,o=l}finally{try{!r&&s["return"]&&s["return"]()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function g(t,e){o.bind(this)(),this._options=e||{},this._data=[],t&&this.add(t)}function m(t,e,n){var r=60*n+30,i=Math.PI/180*r;return[t.x+e*Math.cos(i),t.y+e*Math.sin(i)]}function y(t,e,n,r){for(var i=0;i<6;i++){var o=m({x:e,y:n},r,i);t.lineTo(o[0],o[1])}}g.prototype=Object.create(o.prototype),g.prototype.add=function(t,e){if(Array.isArray(t)){for(var n=0,r=t.length;n<r;n++)if(t[n]){if(t[n].time&&14==t[n].time.length&&"20"==t[n].time.substr(0,2)){var i=t[n].time;t[n].time=new Date(i.substr(0,4)+"-"+i.substr(4,2)+"-"+i.substr(6,2)+" "+i.substr(8,2)+":"+i.substr(10,2)+":"+i.substr(12,2)).getTime()}this._data.push(t[n])}}else{if(!(t instanceof Object))throw new Error("Unknown dataType");this._data.push(t)}this._dataCache=JSON.parse(JSON.stringify(this._data))},g.prototype.reset=function(){this._data=JSON.parse(JSON.stringify(this._dataCache))},g.prototype.get=function(t){t=t||{};new Date;var e=this._data;new Date;if(t.filter){for(var n=[],r=0;r<e.length;r++)t.filter(e[r])&&n.push(e[r]);e=n}return t.transferCoordinate&&(e=this.transferCoordinate(e,t.transferCoordinate,t.fromColumn,t.toColumn)),e},g.prototype.set=function(t){this._set(t),this._trigger("change")},g.prototype._set=function(t){this.clear(),this.add(t)},g.prototype.clear=function(t){this._data=[]},g.prototype.remove=function(t){},g.prototype.update=function(t,e){for(var n=this._data,r=0;r<n.length;r++)if(e){var i=!0;for(var o in e)n[r][o]!=e[o]&&(i=!1);i&&t&&t(n[r])}else t&&t(n[r]);this._dataCache=JSON.parse(JSON.stringify(this._data)),this._trigger("change")},g.prototype.transferCoordinate=function(t,e,n,r){r=r||"_coordinates",n=n||"coordinates";for(var i=0;i<t.length;i++){var o=t[i].geometry,a=o[n];switch(o.type){case"Point":o[r]=e(a);break;case"LineString":for(var s=[],l=0;l<a.length;l++)s.push(e(a[l]));o[r]=s;break;case"MultiLineString":case"Polygon":s=h(a);o[r]=s;break;case"MultiPolygon":s=[];for(var u=0;u<a.length;u++){var c=a[u];c=h(c);s.push(c)}o[r]=s;break}}function h(t){for(var n=[],r=0;r<t.length;r++){for(var i=t[r],o=[],a=0;a<i.length;a++)o.push(e(i[a]));n.push(o)}return n}return t},g.prototype.initGeometry=function(t){t?this._data.forEach((function(e){e.geometry=t(e)})):this._data.forEach((function(t){if(!t.geometry)if(t.lng&&t.lat)t.geometry={type:"Point",coordinates:[t.lng,t.lat]};else if(t.city){var e=l.getCenterByCityName(t.city);e&&(t.geometry={type:"Point",coordinates:[e.lng,e.lat]})}}))},g.prototype.getMax=function(t){var e=this._data;if(e&&!(e.length<=0)){for(var n=parseFloat(e[0][t]),r=1;r<e.length;r++){var i=parseFloat(e[r][t]);i>n&&(n=i)}return n}},g.prototype.getSum=function(t){var e=this._data;if(e&&!(e.length<=0)){for(var n=0,r=0;r<e.length;r++)e[r][t]&&(n+=parseFloat(e[r][t]));return n}},g.prototype.getMin=function(t){var e=this._data;if(e&&!(e.length<=0)){for(var n=parseFloat(e[0][t]),r=1;r<e.length;r++){var i=parseFloat(e[r][t]);i<n&&(n=i)}return n}},g.prototype.getUnique=function(t){var e=this._data;if(e&&!(e.length<=0)){for(var n={},r=1;r<e.length;r++)n[e[r][t]]=!0;e=[];for(var i in n)e.push(i);return e}};var v={drawDataSet:function(t,e,n){for(var r=e instanceof g?e.get():e,i=0,o=r.length;i<o;i++){var a=r[i];this.draw(t,a,n)}},draw:function(t,e,n){var r=e.geometry.type,i=e.geometry._coordinates||e.geometry.coordinates,o=e.symbol||n.symbol||"circle";switch(r){case"Point":var a=e._size||e.size||n._size||n.size||5;"circle"===o?("Point"===n.bigData&&t.moveTo(i[0],i[1]),t.arc(i[0],i[1],a,0,2*Math.PI)):"rect"===o?t.rect(i[0]-a/2,i[1]-a/2,a,a):"honeycomb"===o&&y(t,i[0],i[1],a);break;case"LineString":this.drawLineString(t,i);break;case"MultiLineString":for(var s=0;s<i.length;s++){var l=i[s];this.drawLineString(t,l)}break;case"Polygon":this.drawPolygon(t,i);break;case"MultiPolygon":for(s=0;s<i.length;s++){var u=i[s];if(this.drawPolygon(t,u),n.multiPolygonDraw){var c=n.multiPolygonDraw();if(c)return c}}break;default:console.error("type"+r+"is not support now!");break}},drawLineString:function(t,e){for(var n=0;n<e.length;n++){var r=e[n][0],i=e[n][1];0==n?t.moveTo(r,i):t.lineTo(r,i)}},drawPolygon:function(t,e){t.beginPath();for(var n=0;n<e.length;n++){var r=e[n];t.moveTo(r[0][0],r[0][1]);for(var i=1;i<r.length;i++)t.lineTo(r[i][0],r[i][1]);t.lineTo(r[0][0],r[0][1]),t.closePath()}}},b={draw:function(t,e,n){var r=e instanceof g?e.get():e;for(var i in t.save(),n)t[i]=n[i];if(n.bigData){t.save(),t.beginPath();for(var o=0,a=r.length;o<a;o++){var s=r[o];v.draw(t,s,n)}var l=n.bigData;"Point"==l||"Polygon"==l||"MultiPolygon"==l?(t.fill(),t.lineDash&&t.setLineDash(t.lineDash),s.lineDash&&t.setLineDash(s.lineDash),(s.strokeStyle||n.strokeStyle)&&n.lineWidth&&t.stroke()):"LineString"!=l&&"MultiLineString"!=l||t.stroke(),t.restore()}else for(o=0,a=r.length;o<a;o++){s=r[o];t.save(),(s.fillStyle||s._fillStyle)&&(t.fillStyle=s.fillStyle||s._fillStyle),(s.strokeStyle||s._strokeStyle)&&(t.strokeStyle=s.strokeStyle||s._strokeStyle),t.lineDash&&t.setLineDash(t.lineDash),s.lineDash&&t.setLineDash(s.lineDash);l=s.geometry.type;t.beginPath(),n.multiPolygonDraw=function(){t.fill(),(s.strokeStyle||n.strokeStyle)&&n.lineWidth&&t.stroke()},v.draw(t,s,n),"Point"==l||"Polygon"==l||"MultiPolygon"==l?(t.fill(),(s.strokeStyle||n.strokeStyle)&&n.lineWidth&&t.stroke()):"LineString"!=l&&"MultiLineString"!=l||((s.lineWidth||s._lineWidth)&&(t.lineWidth=s.lineWidth||s._lineWidth),t.stroke()),t.restore()}t.restore()}};function _(t,e){if("undefined"===typeof document);else{var n=document.createElement("canvas");t&&(n.width=t),e&&(n.height=e)}return n}function x(t){t=t||{},this.gradient=t.gradient||{.25:"rgba(0, 0, 255, 1)",.55:"rgba(0, 255, 0, 1)",.85:"rgba(255, 255, 0, 1)",1:"rgba(255, 0, 0, 1)"},this.maxSize=t.maxSize||35,this.minSize=t.minSize||0,this.max=t.max||100,this.min=t.min||0,this.initPalette()}x.prototype.setMax=function(t){this.max=t||100},x.prototype.setMin=function(t){this.min=t||0},x.prototype.setMaxSize=function(t){this.maxSize=t||35},x.prototype.setMinSize=function(t){this.minSize=t||0},x.prototype.initPalette=function(){var t=this.gradient,e=new _(256,1),n=this.paletteCtx=e.getContext("2d"),r=n.createLinearGradient(0,0,256,1);for(var i in t)r.addColorStop(parseFloat(i),t[i]);n.fillStyle=r,n.fillRect(0,0,256,1)},x.prototype.getColor=function(t){var e=this.getImageData(t);return"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]/256+")"},x.prototype.getImageData=function(t){var e=this.paletteCtx.getImageData(0,0,256,1).data;if(void 0===t)return e;var n=this.max,r=this.min;t>n&&(t=n),t<r&&(t=r);var i=4*Math.floor((t-r)/(n-r)*255);return[e[i],e[i+1],e[i+2],e[i+3]]},x.prototype.getSize=function(t){var e=0,n=this.max,r=this.min,i=this.maxSize,o=this.minSize;return t>n&&(t=n),t<r&&(t=r),n>r?(e=o+(t-r)/(n-r)*(i-o),e):i},x.prototype.getLegend=function(t){var e=this.gradient,n=t.width||20,r=t.height||180,i=new _(n,r),o=i.getContext("2d"),a=o.createLinearGradient(0,r,0,0);for(var s in e)a.addColorStop(parseFloat(s),e[s]);return o.fillStyle=a,o.fillRect(0,0,n,r),i};var w="undefined"===typeof window?{}:window,S=w.devicePixelRatio||1;function E(t){var e=t/2,n=t+e,r=1e4,i=new _(2*n,2*n),o=i.getContext("2d");return o.shadowBlur=e,o.shadowColor="black",o.shadowOffsetX=o.shadowOffsetY=r,o.beginPath(),o.arc(n-r,n-r,t,0,2*Math.PI,!0),o.closePath(),o.fill(),i}function C(t,e,n){var r=M(n),i=T(n),o=r-i,a=n.range||null,s=0,l=1024;a&&2===a.length&&(s=(a[0]-i)/o*1024),a&&2===a.length&&(l=(a[1]-i)/o*1024);for(var u,c=n.maxOpacity||.8,h=n.minOpacity||0,d=(a=n.range,3),f=t.length;d<f;d+=4)u=4*t[d],t[d]/256>c&&(t[d]=256*c),t[d]/256<h&&(t[d]=256*h),u&&u>=s&&u<=l?(t[d-3]=e[u],t[d-2]=e[u+1],t[d-1]=e[u+2]):t[d]=0}function M(t){var e=t.max||100;return e}function T(t){var e=t.min||0;return e}function A(t,e,n){var r=M(n),i=T(n),o=n._size;void 0==o&&(o=n.size,void 0==o&&(o=13));var a=new x({gradient:n.gradient,max:r,min:i}),s=E(o),l=s.width/2,u=s.height/2,c=e,h={};for(var d in c.forEach((function(t,e){var n=void 0===t.count?1:t.count,i=Math.min(1,n/r).toFixed(2);h[i]=h[i]||[],h[i].push(t)})),h)if(!isNaN(d)){var f=h[d];t.beginPath(),n.withoutAlpha||(t.globalAlpha=d),t.strokeStyle=a.getColor(d*r),f.forEach((function(e,i){if(e.geometry){var o=e.geometry._coordinates||e.geometry.coordinates,a=e.geometry.type;if("Point"===a){var c=void 0===e.count?1:e.count;t.globalAlpha=c/r,t.drawImage(s,o[0]-l,o[1]-u)}else if("LineString"===a){c=void 0===e.count?1:e.count;t.globalAlpha=c/r,t.beginPath(),v.draw(t,e,n),t.stroke()}}}))}}function O(t,e,n){if(!(t.canvas.width<=0||t.canvas.height<=0)){var r=n.strength||.3;t.strokeStyle="rgba(0,0,0,"+r+")";var i=new _(t.canvas.width,t.canvas.height),o=i.getContext("2d");o.scale(S,S),n=n||{};var a=e instanceof g?e.get():e;t.save();var s=new x({gradient:n.gradient});if(A(o,a,n),!n.absolute){var l=o.getImageData(0,0,t.canvas.width,t.canvas.height);C(l.data,s.getImageData(),n),t.putImageData(l,0,0),t.restore()}s=null,i=null}}var k={draw:O},I={draw:function(t,e,n){t.save();var r=e instanceof g?e.get():e,i={},o=n._size||n.size||50,a=!("enableCluster"in n)||n.enableCluster,s=n.offset||{x:0,y:0},l=new x({min:n.min||0,max:n.max||100,gradient:n.gradient});if(a){for(var u=0;u<r.length;u++){d=r[u].geometry._coordinates||r[u].geometry.coordinates,f=Math.floor((d[0]-s.x)/o)+","+Math.floor((d[1]-s.y)/o);i[f]||(i[f]=0),i[f]+=~~(r[u].count||1)}for(var c in i)c=c.split(","),t.beginPath(),t.rect(c[0]*o+.5+s.x,c[1]*o+.5+s.y,o,o),t.fillStyle=l.getColor(i[c]),t.fill(),n.strokeStyle&&n.lineWidth&&t.stroke()}else{for(var h=0;h<r.length;h++){var d=r[h].geometry._coordinates||r[h].geometry.coordinates,f=d.join(",");i[f]=r[h].count||1}for(var p in i)p=p.split(","),t.beginPath(),t.rect(+p[0]-o/2,+p[1]-o/2,o,o),t.fillStyle=l.getColor(i[p]),t.fill(),n.strokeStyle&&n.lineWidth&&t.stroke()}if(n.label&&!1!==n.label.show)for(var f in t.fillStyle=n.label.fillStyle||"white",n.label.font&&(t.font=n.label.font),n.label.shadowColor&&(t.shadowColor=n.label.shadowColor),n.label.shadowBlur&&(t.shadowBlur=n.label.shadowBlur),i){f=f.split(",");var m=i[f],y=t.measureText(m).width;a?t.fillText(m,f[0]*o+.5+s.x+o/2-y/2,f[1]*o+.5+s.y+o/2+5):t.fillText(m,+f[0]-y/2,+f[1]+5)}t.restore()}};function N(t,e,n){var r=60*n+30,i=Math.PI/180*r;return[t.x+e*Math.cos(i),t.y+e*Math.sin(i)]}var R={draw:function(t,e,n){t.save();var r=e instanceof g?e.get():e;for(var i in n)t[i]=n[i];var o=n.offset||{x:10,y:10},a=n._size||n.size||40;a=a/2/Math.sin(Math.PI/3);for(var s=2*a*Math.sin(Math.PI/3),l=1.5*a,u={},c=0;c<r.length;c++){var h=r[c].geometry._coordinates||r[c].geometry.coordinates,d=(h[1]-o.y)/l,f=Math.round(d),p=(h[0]-o.x)/s-(1&f?.5:0),m=Math.round(p),y=d-f;if(3*Math.abs(y)>1){var v=p-m,b=m+(p<m?-1:1)/2,_=f+(d<f?-1:1),w=p-b,S=d-_;v*v+y*y>w*w+S*S&&(m=b+(1&f?1:-1)/2,f=_)}var E=m+"-"+f,C=u[E];C?C.push(r[c]):(C=u[E]=[r[c]],C.i=m,C.j=f,C.x=(m+(1&f?.5:0))*s,C.y=f*l)}var M=new x({max:n.max||100,maxSize:a,gradient:n.gradient});for(var i in u){var T=u[i];t.beginPath();for(var A=0;A<6;A++){var O=N({x:T.x+o.x,y:T.y+o.y},a,A);t.lineTo(O[0],O[1])}t.closePath();var k=0;for(c=0;c<T.length;c++)k+=T[c].count||1;T.count=k,t.fillStyle=M.getColor(k),t.fill(),n.strokeStyle&&n.lineWidth&&t.stroke()}if(n.label&&!1!==n.label.show)for(var i in t.fillStyle=n.label.fillStyle||"white",n.label.font&&(t.font=n.label.font),n.label.shadowColor&&(t.shadowColor=n.label.shadowColor),n.label.shadowBlur&&(t.shadowBlur=n.label.shadowBlur),u){T=u[i];var I=T.count;I=I<0?I.toFixed(2):~~I;var P=t.measureText(I).width;t.fillText(I,T.x+o.x-P/2,T.y+o.y+5)}t.restore()}};function D(t,e,n){var r=t.createShader(n);return t.shaderSource(r,e),t.compileShader(r),r}function F(t,e,n){var r=D(t,e,t.VERTEX_SHADER),i=D(t,n,t.FRAGMENT_SHADER),o=t.createProgram();return t.attachShader(o,r),t.attachShader(o,i),t.linkProgram(o),t.useProgram(o),o}function j(t){var e=document.createElement("canvas"),n=e.getContext("2d");return e.width=1,e.height=1,n.fillStyle=t,n.fillRect(0,0,1,1),n.getImageData(0,0,1,1).data}var B=["attribute vec4 a_Position;","void main() {","gl_Position = a_Position;","gl_PointSize = 30.0;","}"].join(""),z=["precision mediump float;","uniform vec4 u_FragColor;","void main() {","gl_FragColor = u_FragColor;","}"].join("");function U(t,e,n){if(e){var r=F(t,B,z);t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE),t.clear(t.COLOR_BUFFER_BIT);var i=t.canvas.width/2,o=t.canvas.height/2,a=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,a);var s=t.getAttribLocation(r,"a_Position");t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(s);var l=t.getUniformLocation(r,"u_FragColor"),u=j(n.strokeStyle||"red");t.uniform4f(l,u[0]/255,u[1]/255,u[2]/255,u[3]/255),t.lineWidth(n.lineWidth||1);for(var c=0,h=e.length;c<h;c++){for(var d=e[c].geometry._coordinates,f=[],p=0;p<d.length;p++){var g=d[p],m=(g[0]-i)/i,y=(o-g[1])/o;f.push(m,y)}var v=new Float32Array(f);t.bufferData(t.ARRAY_BUFFER,v,t.STATIC_DRAW),t.drawArrays(t.LINE_STRIP,0,d.length)}}}var G={draw:U},q=["attribute vec4 a_Position;","attribute float a_PointSize;","void main() {","gl_Position = a_Position;","gl_PointSize = a_PointSize;","}"].join(""),V=["precision mediump float;","uniform vec4 u_FragColor;","void main() {","gl_FragColor = u_FragColor;","}"].join("");function H(t,e,n){if(e){var r=F(t,q,V),i=t.getAttribLocation(r,"a_Position"),o=t.getAttribLocation(r,"a_PointSize"),a=t.getUniformLocation(r,"u_FragColor");t.clear(t.COLOR_BUFFER_BIT);for(var s=t.canvas.width/2,l=t.canvas.height/2,u=[],c=0,h=0;h<e.length;h++){var d=e[h].geometry._coordinates,f=(d[0]-s)/s,p=(l-d[1])/l;f<-1||f>1||p<-1||p>1||(u.push(f,p),c++)}var g=new Float32Array(u),m=c,y=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,y),t.bufferData(t.ARRAY_BUFFER,g,t.STATIC_DRAW),t.vertexAttribPointer(i,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(i),t.vertexAttrib1f(o,n._size);var v=j(n.fillStyle||"red");t.uniform4f(a,v[0]/255,v[1]/255,v[2]/255,v[3]/255),t.drawArrays(t.POINTS,0,m)}}var W={draw:H};function Y(t,e,n){n=n||2;var r,i,o,a,s,l,u,c=e&&e.length,h=c?e[0]*n:t.length,d=X(t,0,h,n,!0),f=[];if(!d)return f;if(c&&(d=et(t,e,d,n)),t.length>80*n){r=o=t[0],i=a=t[1];for(var p=n;p<h;p+=n)s=t[p],l=t[p+1],s<r&&(r=s),l<i&&(i=l),s>o&&(o=s),l>a&&(a=l);u=Math.max(o-r,a-i)}return Z(d,f,n,r,i,u),f}function X(t,e,n,r,i){var o,a;if(i===xt(t,e,n,r)>0)for(o=e;o<n;o+=r)a=vt(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=vt(o,t[o],t[o+1],a);return a&&dt(a,a.next)&&(bt(a),a=a.next),a}function J(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!dt(r,r.next)&&0!==ht(r.prev,r,r.next))r=r.next;else{if(bt(r),r=e=r.prev,r===r.next)return null;n=!0}}while(n||r!==e);return e}function Z(t,e,n,r,i,o,a){if(t){!a&&o&&ot(t,r,i,o);var s,l,u=t;while(t.prev!==t.next)if(s=t.prev,l=t.next,o?Q(t,r,i,o):K(t))e.push(s.i/n),e.push(t.i/n),e.push(l.i/n),bt(t),t=l.next,u=l.next;else if(t=l,t===u){a?1===a?(t=$(t,e,n),Z(t,e,n,r,i,o,2)):2===a&&tt(t,e,n,r,i,o):Z(J(t),e,n,r,i,o,1);break}}}function K(t){var e=t.prev,n=t,r=t.next;if(ht(e,n,r)>=0)return!1;var i=t.next.next;while(i!==t.prev){if(ut(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&ht(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Q(t,e,n,r){var i=t.prev,o=t,a=t.next;if(ht(i,o,a)>=0)return!1;var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,l=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,u=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=st(s,l,e,n,r),d=st(u,c,e,n,r),f=t.nextZ;while(f&&f.z<=d){if(f!==t.prev&&f!==t.next&&ut(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&ht(f.prev,f,f.next)>=0)return!1;f=f.nextZ}f=t.prevZ;while(f&&f.z>=h){if(f!==t.prev&&f!==t.next&&ut(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&ht(f.prev,f,f.next)>=0)return!1;f=f.prevZ}return!0}function $(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!dt(i,o)&&ft(i,r,r.next,o)&&gt(i,o)&&gt(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),bt(r),bt(r.next),r=t=o),r=r.next}while(r!==t);return r}function tt(t,e,n,r,i,o){var a=t;do{var s=a.next.next;while(s!==a.prev){if(a.i!==s.i&&ct(a,s)){var l=yt(a,s);return a=J(a,a.next),l=J(l,l.next),Z(a,e,n,r,i,o),void Z(l,e,n,r,i,o)}s=s.next}a=a.next}while(a!==t)}function et(t,e,n,r){var i,o,a,s,l,u=[];for(i=0,o=e.length;i<o;i++)a=e[i]*r,s=i<o-1?e[i+1]*r:t.length,l=X(t,a,s,r,!1),l===l.next&&(l.steiner=!0),u.push(lt(l));for(u.sort(nt),i=0;i<u.length;i++)rt(u[i],n),n=J(n,n.next);return n}function nt(t,e){return t.x-e.x}function rt(t,e){if(e=it(t,e),e){var n=yt(e,t);J(n,n.next)}}function it(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n.prev;var l,u=n,c=n.x,h=n.y,d=1/0;r=n.next;while(r!==u)i>=r.x&&r.x>=c&&ut(o<h?i:a,o,c,h,o<h?a:i,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(i-r.x),(l<d||l===d&&r.x>n.x)&&gt(r,t)&&(n=r,d=l)),r=r.next;return n}function ot(t,e,n,r){var i=t;do{null===i.z&&(i.z=st(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,at(i)}function at(t){var e,n,r,i,o,a,s,l,u=1;do{n=t,t=null,o=null,a=0;while(n){for(a++,r=n,s=0,e=0;e<u;e++)if(s++,r=r.nextZ,!r)break;l=u;while(s>0||l>0&&r)0===s?(i=r,r=r.nextZ,l--):0!==l&&r?n.z<=r.z?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--):(i=n,n=n.nextZ,s--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(a>1);return t}function st(t,e,n,r,i){return t=32767*(t-n)/i,e=32767*(e-r)/i,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function lt(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function ut(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function ct(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!pt(t,e)&&gt(t,e)&&gt(e,t)&&mt(t,e)}function ht(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function dt(t,e){return t.x===e.x&&t.y===e.y}function ft(t,e,n,r){return!!(dt(t,e)&&dt(n,r)||dt(t,r)&&dt(n,e))||ht(t,e,n)>0!==ht(t,e,r)>0&&ht(n,r,t)>0!==ht(n,r,e)>0}function pt(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&ft(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function gt(t,e){return ht(t.prev,t,t.next)<0?ht(t,e,t.next)>=0&&ht(t,t.prev,e)>=0:ht(t,e,t.prev)<0||ht(t,t.next,e)<0}function mt(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!==n.next.y>o&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}function yt(t,e){var n=new _t(t.i,t.x,t.y),r=new _t(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function vt(t,e,n,r){var i=new _t(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function bt(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function _t(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function xt(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}Y.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(xt(t,0,o,n));if(i)for(var s=0,l=e.length;s<l;s++){var u=e[s]*n,c=s<l-1?e[s+1]*n:t.length;a-=Math.abs(xt(t,u,c,n))}var h=0;for(s=0;s<r.length;s+=3){var d=r[s]*n,f=r[s+1]*n,p=r[s+2]*n;h+=Math.abs((t[d]-t[p])*(t[f+1]-t[d+1])-(t[d]-t[f])*(t[p+1]-t[d+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},Y.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n};var wt=["attribute vec4 a_Position;","void main() {","gl_Position = a_Position;","gl_PointSize = 30.0;","}"].join(""),St=["precision mediump float;","uniform vec4 u_FragColor;","void main() {","gl_FragColor = u_FragColor;","}"].join("");function Et(t,e,n){if(e){t.clear(t.COLOR_BUFFER_BIT),t.viewport(0,0,t.canvas.width,t.canvas.height);var r=F(t,wt,St);t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE);var i=t.canvas.width/2,o=t.canvas.height/2;t.bindBuffer(t.ARRAY_BUFFER,t.createBuffer()),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,t.createBuffer());var a=t.getAttribLocation(r,"a_Position");t.vertexAttribPointer(a,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(a);var s=t.getUniformLocation(r,"u_FragColor"),l=j(n.fillStyle||"red");t.uniform4f(s,l[0]/255,l[1]/255,l[2]/255,l[3]/255),t.lineWidth(n.lineWidth||1);for(var u=[],c=[],h=65536,d=0,f=0,p=e.length;f<p;f++){var g=Y.flatten(e[f].geometry._coordinates||e[f].geometry.coordinates),m=g.vertices;d=u.length/2;for(var y=0;y<m.length;y+=2)m[y]=(m[y]-i)/i,m[y+1]=(o-m[y+1])/o;(u.length+m.length)/2>h&&(t.bufferData(t.ARRAY_BUFFER,new Float32Array(u),t.STATIC_DRAW),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(c),t.STATIC_DRAW),t.drawElements(t.TRIANGLES,c.length,t.UNSIGNED_SHORT,0),u.length=0,c.length=0,d=0);for(y=0;y<m.length;y++)u.push(m[y]);var v=Y(m,g.holes,g.dimensions);for(y=0;y<v.length;y++)c.push(v[y]+d)}t.bufferData(t.ARRAY_BUFFER,new Float32Array(u),t.STATIC_DRAW),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(c),t.STATIC_DRAW),t.drawElements(t.TRIANGLES,c.length,t.UNSIGNED_SHORT,0),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}}var Ct={draw:Et},Mt={draw:function(t,e,n){var r=e instanceof g?e.get():e;r.length>0&&("LineString"==r[0].geometry.type?G.draw(t,r,n):"Polygon"==r[0].geometry.type||"MultiPolygon"==r[0].geometry.type?Ct.draw(t,r,n):W.draw(t,r,n))}};function Tt(t,e){e=e||{};for(var n=[],r=0;r<t.length-1;r++){var i=At(t[r],t[r+1],e.count);i&&i.length>0&&(n=n.concat(i))}return n}function At(t,e,n){if(!t||!e)return null;var r,i,o,a,s,l,u=function(t){return 1-2*t+t*t},c=function(t){return 2*t-2*t*t},h=function(t){return t*t},d=[],f=(n=n||40,0),p=0;if("undefined"!=typeof e){var g=parseFloat(t.lat),m=parseFloat(e.lat),y=parseFloat(t.lng),v=parseFloat(e.lng);for(v>y&&parseFloat(v-y)>180&&y<0&&(y=parseFloat(360+y),v=parseFloat(360+v)),0,l=0,m==g?(r=0,i=y-v):v==y?(r=Math.PI/2,i=g-m):(r=Math.atan((m-g)/(v-y)),i=(m-g)/Math.sin(r)),0==l&&(l=r+Math.PI/5),o=i/2,s=o*Math.cos(l)+y,a=o*Math.sin(l)+g,f=0;f<n+1;f++){var b=y*u(p)+s*c(p)+v*h(p),_=g*u(p)+a*c(p)+m*h(p),x=t.lng,w=e.lng;d.push([x<0&&w>0?b-360:b,_]),p+=1/n}return d}"undefined"!=typeof d&&(d=[])}var Ot={getPoints:Tt},kt=function(){var t={},e=[],n=[],r=[],i=.1,o=.1,a=1,s=2,l=6,u=70,c=.6666667,h=.6,d=1e-8;function f(t,e){return t.x*e.x+t.y*e.y}function p(e){return{x:t[e.target].x-t[e.source].x,y:t[e.target].y-t[e.source].y}}function g(e){return Math.sqrt(Math.pow(t[e.source].x-t[e.target].x,2)+Math.pow(t[e.source].y-t[e.target].y,2))}function m(t){return Math.sqrt(Math.pow(t.source.x-t.target.x,2)+Math.pow(t.source.y-t.target.y,2))}function y(e){var n=(t[e.source].x+t[e.target].x)/2,r=(t[e.source].y+t[e.target].y)/2;return{x:n,y:r}}function v(t){for(var e=0,n=1;n<r[t].length;n++){var i=b(r[t][n],r[t][n-1]);e+=i}return e}function b(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function _(t,e){var n=Math.sqrt((e.target.x-e.source.x)*(e.target.x-e.source.x)+(e.target.y-e.source.y)*(e.target.y-e.source.y)),r=((e.source.y-t.y)*(e.source.y-e.target.y)-(e.source.x-t.x)*(e.target.x-e.source.x))/(n*n);return{x:e.source.x+r*(e.target.x-e.source.x),y:e.source.y+r*(e.target.y-e.source.y)}}function x(){for(var n=0;n<e.length;n++)1==a?r[n]=[]:(r[n]=[],r[n].push(t[e[n].source]),r[n].push(t[e[n].target]))}function w(){for(var t=0;t<e.length;t++)n[t]=[]}function S(e){for(var n=[],r=0;r<e.length;r++)t[e[r].source].x!=t[e[r].target].x&&t[e[r].source].y!=t[e[r].target].y&&n.push(e[r]);return n}function E(t,e,n){var i=r[t][e-1],o=r[t][e+1],a=r[t][e],s=i.x-a.x+o.x-a.x,l=i.y-a.y+o.y-a.y;return s*=n,l*=n,{x:s,y:l}}function C(t,e,i){for(var o={x:0,y:0},a=n[t],s=0;s<a.length;s++){var l={x:r[a[s]][e].x-r[t][e].x,y:r[a[s]][e].y-r[t][e].y};if(Math.abs(l.x)>d||Math.abs(l.y)>d){var u=1/Math.pow(m({source:r[a[s]][e],target:r[t][e]}),1);o.x+=l.x*u,o.y+=l.y*u}}return o}function M(t,n,r){for(var o=i/(g(e[t])*(n+1)),a=[{x:0,y:0}],s=1;s<n+1;s++){var l={x:0,y:0},u=E(t,s,o),c=C(t,s,r);l.x=r*(u.x+c.x),l.y=r*(u.y+c.y),a.push(l)}return a.push({x:0,y:0}),a}function T(n){for(var i=0;i<e.length;i++)if(1==n)r[i].push(t[e[i].source]),r[i].push(y(e[i])),r[i].push(t[e[i].target]);else{var o=v(i),a=o/(n+1),s=a,l=[];l.push(t[e[i].source]);for(var u=1;u<r[i].length;u++){var c=b(r[i][u],r[i][u-1]);while(c>s){var h=s/c,d=r[i][u-1].x,f=r[i][u-1].y;d+=h*(r[i][u].x-r[i][u-1].x),f+=h*(r[i][u].y-r[i][u-1].y),l.push({x:d,y:f}),c-=s,s=a}s-=c}l.push(t[e[i].target]),r[i]=l}}function A(t,e){var n=Math.abs(f(p(t),p(e))/(g(t)*g(e)));return n}function O(t,e){var n=(g(t)+g(e))/2,r=2/(n/Math.min(g(t),g(e))+Math.max(g(t),g(e))/n);return r}function k(e,n){var r=(g(e)+g(n))/2,i={x:(t[e.source].x+t[e.target].x)/2,y:(t[e.source].y+t[e.target].y)/2},o={x:(t[n.source].x+t[n.target].x)/2,y:(t[n.source].y+t[n.target].y)/2},a=r/(r+b(i,o));return a}function I(e,n){var r=_(t[n.source],{source:t[e.source],target:t[e.target]}),i=_(t[n.target],{source:t[e.source],target:t[e.target]}),o={x:(r.x+i.x)/2,y:(r.y+i.y)/2},a={x:(t[e.source].x+t[e.target].x)/2,y:(t[e.source].y+t[e.target].y)/2},s=Math.max(0,1-2*b(a,o)/b(r,i));return s}function L(t,e){return Math.min(I(t,e),I(e,t))}function N(t,e){var n=A(t,e)*O(t,e)*k(t,e)*L(t,e);return n}function R(t,e){return N(t,e)>=h}function D(){for(var t=0;t<e.length-1;t++)for(var r=t+1;r<e.length;r++)t!=r&&R(e[t],e[r])&&(n[t].push(r),n[r].push(t))}var F=function(){var t=o,n=u,i=a;x(),w(),T(i),D();for(var s=0;s<l;s++){for(var h=0;h<n;h++){for(var d=[],f=0;f<e.length;f++)d[f]=M(f,i,t);for(var p=0;p<e.length;p++)for(var g=0;g<i+1;g++)r[p][g].x+=d[p][g].x,r[p][g].y+=d[p][g].y}t/=2,i*=2,n*=c,T(i)}return r};return F.nodes=function(e){return 0==arguments.length?t:(t=e,F)},F.edges=function(t){return 0==arguments.length?e:(e=S(t),F)},F.bundling_stiffness=function(t){return 0==arguments.length?i:(i=t,F)},F.step_size=function(t){return 0==arguments.length?o:(o=t,F)},F.cycles=function(t){return 0==arguments.length?l:(l=t,F)},F.iterations=function(t){return 0==arguments.length?u:(u=t,F)},F.iterations_rate=function(t){return 0==arguments.length?c:(c=t,F)},F.subdivision_points_seed=function(t){return 0==arguments.length?P:(P=t,F)},F.subdivision_rate=function(t){return 0==arguments.length?s:(s=t,F)},F.compatbility_threshold=function(t){return 0==arguments.length?compatbility_threshold:(h=t,F)},F};function It(t){this.splitList=t||{other:1}}function Pt(t){this.splitList=t||[{start:0,value:"red"}]}It.prototype.get=function(t){var e=this.splitList,n=e["other"];for(var r in e)if(t==r){n=e[r];break}return n},It.prototype.generateByDataSet=function(t,e){var n=e||["rgba(255, 255, 0, 0.8)","rgba(253, 98, 104, 0.8)","rgba(255, 146, 149, 0.8)","rgba(255, 241, 193, 0.8)","rgba(110, 176, 253, 0.8)","rgba(52, 139, 251, 0.8)","rgba(17, 102, 252, 0.8)"],r=t.get();this.splitList={};for(var i=0,o=0;o<r.length;o++)if(void 0===this.splitList[r[o].count]&&(this.splitList[r[o].count]=n[i],i++),i>=n.length-1)break;this.splitList["other"]=n[n.length-1]},It.prototype.getLegend=function(t){var e=this.splitList,n=document.createElement("div");n.style.cssText="background:#fff; padding: 5px; border: 1px solid #ccc;";var r="";for(var i in e)r+='<div style="line-height: 19px;" value="'+i+'"><span style="vertical-align: -2px; display: inline-block; width: 30px;height: 19px;background:'+e[i]+';"></span><span style="margin-left: 3px;">'+i+"<span></div>";return n.innerHTML=r,n},Pt.prototype.get=function(t){for(var e=this.splitList,n=!1,r=0;r<e.length;r++)if((void 0===e[r].start||void 0!==e[r].start&&t>=e[r].start)&&(void 0===e[r].end||void 0!==e[r].end&&t<e[r].end)){n=e[r].value;break}return n},Pt.prototype.generateByDataSet=function(t){var e=t.getMin("count"),n=t.getMax("count");this.generateByMinMax(e,n)},Pt.prototype.generateByMinMax=function(t,e){var n=["rgba(255, 255, 0, 0.8)","rgba(253, 98, 104, 0.8)","rgba(255, 146, 149, 0.8)","rgba(255, 241, 193, 0.8)","rgba(110, 176, 253, 0.8)","rgba(52, 139, 251, 0.8)","rgba(17, 102, 252, 0.8)"],r=Number((e-t)/7);e=Number(e);var i=Number(t);this.splitList=[];var o=0;while(i<e)this.splitList.push({start:i,end:i+r,value:n[o]}),o++,i+=r},Pt.prototype.getLegend=function(t){this.splitList};var Lt=function(){function t(e,n,r){if(u(this,t),!e||!n)return console.warn("id 和 type 为必填项"),!1;if("baidu"==n){if(!BMap)return console.warn("请先引入百度地图JS API"),!1}else console.warn("暂不支持你的地图类型");this.type=n;var i=r&&r.center?r.center:[106.962497,38.208726],o=r&&r.zoom?r.zoom:5,a=this.map=new BMap.Map(e,{enableMapClick:!1});a.centerAndZoom(new BMap.Point(i[0],i[1]),o),a.enableScrollWheelZoom(!0),a.setMapStyle({style:"light"})}return c(t,[{key:"addLayer",value:function(t,e){if("baidu"==this.type)return new mapv.baiduMapLayer(this.map,dataSet,e)}},{key:"getMap",value:function(){return this.map}}]),t}();function Nt(t){this.options=t||{},this.paneName=this.options.paneName||"mapPane",this.context=this.options.context||"2d",this.zIndex=this.options.zIndex||0,this.mixBlendMode=this.options.mixBlendMode||null,this.enableMassClear=this.options.enableMassClear,this._map=t.map,this._lastDrawTime=null,this.show()}var Rt="undefined"===typeof window?{}:window,Dt=Rt.BMap||Rt.BMapGL;Dt&&(Nt.prototype=new Dt.Overlay,Nt.prototype.initialize=function(t){this._map=t;var e=this.canvas=document.createElement("canvas");e.style.cssText="position:absolute;left:0;top:0;z-index:"+this.zIndex+";user-select:none;",e.style.mixBlendMode=this.mixBlendMode,this.adjustSize();var n=t.getPanes()[this.paneName];n||(n=t.getPanes().floatShadow),n.appendChild(e);var r=this;return t.addEventListener("resize",(function(){r.adjustSize(),r._draw()})),t.addEventListener("update",(function(){r._draw()})),this.options.updateImmediate&&setTimeout((function(){r._draw()}),100),this.canvas},Nt.prototype.adjustSize=function(){var t=this._map.getSize(),e=this.canvas,n=this.devicePixelRatio=Rt.devicePixelRatio||1;e.width=t.width*n,e.height=t.height*n,"2d"==this.context&&e.getContext(this.context).scale(n,n),e.style.width=t.width+"px",e.style.height=t.height+"px"},Nt.prototype.draw=function(){var t=this;this.options.updateImmediate?t._draw():(clearTimeout(t.timeoutID),t.timeoutID=setTimeout((function(){t._draw()}),15))},Nt.prototype._draw=function(){var t=this._map,e=t.getSize(),n=t.getCenter();if(n){var r=t.pointToOverlayPixel(n);this.canvas.style.left=r.x-e.width/2+"px",this.canvas.style.top=r.y-e.height/2+"px",this.dispatchEvent("draw"),this.options.update&&this.options.update.call(this)}},Nt.prototype.getContainer=function(){return this.canvas},Nt.prototype.show=function(){this.canvas||this._map.addOverlay(this),this.canvas.style.display="block"},Nt.prototype.hide=function(){this.canvas.style.display="none"},Nt.prototype.setZIndex=function(t){this.zIndex=t,this.canvas.style.zIndex=this.zIndex},Nt.prototype.getZIndex=function(){return this.zIndex});var Ft=Ft||function(){var t=[];return{getAll:function(){return t},removeAll:function(){t=[]},add:function(e){t.push(e)},remove:function(e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)},update:function(e,n){if(0===t.length)return!1;var r=0;e=void 0!==e?e:Ft.now();while(r<t.length)t[r].update(e)||n?r++:t.splice(r,1);return!0}}}();function jt(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=360*Math.atan(r/n)/(2*Math.PI);return e[0]<t[0]&&(i+=180),i}"undefined"===typeof window&&"undefined"!==typeof t?Ft.now=function(){var e=t.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!==typeof window&&void 0!==window.performance&&void 0!==window.performance.now?Ft.now=window.performance.now.bind(window.performance):void 0!==Date.now?Ft.now=Date.now:Ft.now=function(){return(new Date).getTime()},Ft.Tween=function(t){var e,n=t,r={},i={},o={},a=1e3,s=0,l=!1,u=!1,c=!1,h=0,d=null,f=Ft.Easing.Linear.None,p=Ft.Interpolation.Linear,g=[],m=null,y=!1,v=null,b=null,_=null;this.to=function(t,e){return i=t,void 0!==e&&(a=e),this},this.start=function(t){for(var e in Ft.add(this),u=!0,y=!1,d=void 0!==t?t:Ft.now(),d+=h,i){if(i[e]instanceof Array){if(0===i[e].length)continue;i[e]=[n[e]].concat(i[e])}void 0!==n[e]&&(r[e]=n[e],r[e]instanceof Array===!1&&(r[e]*=1),o[e]=r[e]||0)}return this},this.stop=function(){return u?(Ft.remove(this),u=!1,null!==_&&_.call(n,n),this.stopChainedTweens(),this):this},this.end=function(){return this.update(d+a),this},this.stopChainedTweens=function(){for(var t=0,e=g.length;t<e;t++)g[t].stop()},this.delay=function(t){return h=t,this},this.repeat=function(t){return s=t,this},this.repeatDelay=function(t){return e=t,this},this.yoyo=function(t){return l=t,this},this.easing=function(t){return f=t,this},this.interpolation=function(t){return p=t,this},this.chain=function(){return g=arguments,this},this.onStart=function(t){return m=t,this},this.onUpdate=function(t){return v=t,this},this.onComplete=function(t){return b=t,this},this.onStop=function(t){return _=t,this},this.update=function(t){var u,_,x;if(t<d)return!0;for(u in!1===y&&(null!==m&&m.call(n,n),y=!0),_=(t-d)/a,_=_>1?1:_,x=f(_),i)if(void 0!==r[u]){var w=r[u]||0,S=i[u];S instanceof Array?n[u]=p(S,x):("string"===typeof S&&(S="+"===S.charAt(0)||"-"===S.charAt(0)?w+parseFloat(S):parseFloat(S)),"number"===typeof S&&(n[u]=w+(S-w)*x))}if(null!==v&&v.call(n,x),1===_){if(s>0){for(u in isFinite(s)&&s--,o){if("string"===typeof i[u]&&(o[u]=o[u]+parseFloat(i[u])),l){var E=o[u];o[u]=i[u],i[u]=E}r[u]=o[u]}return l&&(c=!c),d=void 0!==e?t+e:t+h,!0}null!==b&&b.call(n,n);for(var C=0,M=g.length;C<M;C++)g[C].start(d+a);return!1}return!0}},Ft.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1)}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-Ft.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*Ft.Easing.Bounce.In(2*t):.5*Ft.Easing.Bounce.Out(2*t-1)+.5}}},Ft.Interpolation={Linear:function(t,e){var n=t.length-1,r=n*e,i=Math.floor(r),o=Ft.Interpolation.Utils.Linear;return e<0?o(t[0],t[1],r):e>1?o(t[n],t[n-1],n-r):o(t[i],t[i+1>n?n:i+1],r-i)},Bezier:function(t,e){for(var n=0,r=t.length-1,i=Math.pow,o=Ft.Interpolation.Utils.Bernstein,a=0;a<=r;a++)n+=i(1-e,r-a)*i(e,a)*t[a]*o(r,a);return n},CatmullRom:function(t,e){var n=t.length-1,r=n*e,i=Math.floor(r),o=Ft.Interpolation.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(i=Math.floor(r=n*(1+e))),o(t[(i-1+n)%n],t[i],t[(i+1)%n],t[(i+2)%n],r-i)):e<0?t[0]-(o(t[0],t[0],t[1],t[1],-r)-t[0]):e>1?t[n]-(o(t[n],t[n],t[n-1],t[n-1],r-n)-t[n]):o(t[i?i-1:0],t[i],t[n<i+1?n:i+1],t[n<i+2?n:i+2],r-i)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=Ft.Interpolation.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:function(){var t=[1];return function(e){var n=1;if(t[e])return t[e];for(var r=e;r>1;r--)n*=r;return t[e]=n,n}}(),CatmullRom:function(t,e,n,r,i){var o=.5*(n-t),a=.5*(r-e),s=i*i,l=i*s;return(2*e-2*n+o+a)*l+(-3*e+3*n-2*o-a)*s+o*i+e}}};var Bt={},zt={draw:function(t,e,n){var r="http://huiyan.baidu.com/github/tools/gis-drawing/static/images/direction.png";n.arrow&&n.arrow.url&&(r=n.arrow.url),Bt[r]||(Bt[r]=null);var i=Bt[r];if(!i){var o=Array.prototype.slice.call(arguments),a=new Image;return a.onload=function(){Bt[r]=a,zt.draw.apply(null,o)},void(a.src=r)}var s=e instanceof g?e.get():e;for(var l in t.save(),n)t[l]=n[l];for(var u=[],c=null,h=0,d=s.length;h<d;h++){var f=s[h];t.save(),(f.fillStyle||f._fillStyle)&&(t.fillStyle=f.fillStyle||f._fillStyle),(f.strokeStyle||f._strokeStyle)&&(t.strokeStyle=f.strokeStyle||f._strokeStyle);var p=f.geometry.type;if(t.beginPath(),"LineString"===p)for(var m=f.geometry._coordinates||f.geometry.coordinates,y=void 0!==n.arrow.interval?n.arrow.interval:1,v=0;v<m.length;v+=y)if(m[v]&&m[v+1]){var b=m[v];if(c&&Ut(b,c)<30)continue;t.save();var _=jt(m[v],m[v+1]);t.translate(b[0],b[1]),t.rotate(_*Math.PI/180),t.drawImage(i,-i.width/2/2,-i.height/2/2,i.width/2,i.height/2),t.restore(),u.push(b),c=b}t.restore()}t.restore()}};function Ut(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}var Gt={draw:function(t,e,n){var i=e instanceof g?e.get():e;t.save(),t.fillStyle=n.fillStyle||"rgba(0, 0, 0, 0.5)",t.fillRect(0,0,t.canvas.width,t.canvas.height),n.multiPolygonDraw=function(){t.save(),t.clip(),r(t),t.restore()};for(var o=0,a=i.length;o<a;o++)t.beginPath(),v.drawDataSet(t,[i[o]],n),t.save(),t.clip(),r(t),t.restore();t.restore()}},qt={},Vt={},Ht={draw:function(t,e,n){t.save();for(var r=e instanceof g?e.get():e,i=0;i<r.length;i++){var o=r[i],a=o.geometry._coordinates||o.geometry.coordinates;if(t.beginPath(),o.properties&&o.properties.cluster){if(t.arc(a[0],a[1],o.size,0,2*Math.PI),t.fillStyle=o.fillStyle,t.fill(),n.label&&!1!==n.label.show){t.fillStyle=n.label.fillStyle||"white",n.label.font&&(t.font=n.label.font),n.label.shadowColor&&(t.shadowColor=n.label.shadowColor),n.label.shadowBlur&&(t.shadowBlur=n.label.shadowBlur);var s=o.properties.point_count,l=t.measureText(s).width;t.fillText(s,a[0]+.5-l/2,a[1]+.5+3)}}else this.drawIcon(o,n,t)}t.restore()},drawIcon:function(t,e,n){var r=t.geometry._coordinates||t.geometry.coordinates,i=p(r,2),o=i[0],a=i[1],s=Object.assign({},e.iconOptions,t.iconOptions),l=function(){n.beginPath(),n.arc(o,a,e.size||5,0,2*Math.PI),n.fillStyle=e.fillStyle||"red",n.fill()};if(s.url){var u=s.width,c=s.height,h=s.offset||{x:0,y:0};o=o-~~u/2+h.x,a=a-~~c/2+h.y;var d=window.encodeURIComponent(s.url),f=qt[d];f?"error"===f?l():u&&c?n.drawImage(f,o,a,u,c):n.drawImage(f,o,a):(Vt[d]||(Vt[d]=[],Wt(d,(function(t,e){Vt[e]&&Vt[e].forEach((function(e){return e(t)})),Vt[e]=null,qt[e]=t}),(function(t){Vt[t]&&Vt[t].forEach((function(e){return e("error",t)})),Vt[t]=null,qt[t]="error",l()}))),Vt[d].push(function(t,e,r,i){return function(o){"error"===o?l():r&&i?n.drawImage(o,t,e,r,i):n.drawImage(o,t,e)}}(o,a,u,c)))}else l()}};function Wt(t,e,n){var r=new Image;r.onload=function(){e&&e(r,t)},r.onerror=function(){n&&n(t)},r.src=window.decodeURIComponent(t)}var Yt={draw:function(t,e,n){var r=e instanceof g?e.get():e;for(var i in t.save(),n)t[i]=n[i];var o=[],a=n._size||n.size;a?t.font="bold "+a+"px Arial":a=12;var s=n.textKey||"text";if(n.textAlign||(t.textAlign="center"),n.textBaseline||(t.textBaseline="middle"),n.avoid)for(var l=0,u=r.length;l<u;l++){var c=r[l].offset||n.offset||{x:0,y:0},h=r[l].geometry._coordinates||r[l].geometry.coordinates,d=h[0]+c.x,f=h[1]+c.y,p=r[l][s],m=t.measureText(p).width,y=d-m/2,v=f-a/2,b={sw:{x:y,y:v+a},ne:{x:y+m,y:v}};Xt(o,b)||(o.push(b),y+=m/2,v+=a/2,t.fillText(p,y,v))}else for(l=0,u=r.length;l<u;l++){c=r[l].offset||n.offset||{x:0,y:0},h=r[l].geometry._coordinates||r[l].geometry.coordinates,d=h[0]+c.x,f=h[1]+c.y,p=r[l][s];t.fillText(p,d,f)}t.restore()}};function Xt(t,e){for(var n=0;n<t.length;n++)if(Jt(t[n],e))return!0;return!1}function Jt(t,e){var n=Math.min(t.ne.x,e.ne.x),r=Math.min(t.sw.y,e.sw.y),i=Math.max(t.sw.x,e.sw.x),o=Math.max(t.ne.y,e.ne.y);return n>i&&r>o}var Zt={},Kt={},Qt={draw:function(t,e,n){for(var r=e instanceof g?e.get():e,i=function(){var e=r[o];if(e.geometry)if(s=e.icon||n.icon,"string"===typeof s){var i=window.encodeURIComponent(s),a=Zt[i];a?$t(a,n,t,e):(Kt[i]||(Kt[i]=[],te(i,(function(t,e){Kt[e]&&Kt[e].forEach((function(e){return e(t)})),Kt[e]=null,Zt[e]=t}),(function(t){Kt[t]&&Kt[t].forEach((function(t){return t("error")})),Kt[t]=null,Zt[t]="error"}))),Kt[i].push((function(r){$t(r,n,t,e)})))}else $t(s,n,t,e)},o=0,a=r.length;o<a;o++){var s;i()}}};function $t(t,e,n,r){n.save();var i=r.geometry._coordinates||r.geometry.coordinates,o=i[0],a=i[1],s=e.offset||{x:0,y:0},l=r.width||e._width||e.width,u=r.height||e._height||e.height;if(o=o-~~l/2+s.x,a=a-~~u/2+s.y,"string"===typeof t)return n.beginPath(),n.arc(o,a,e.size||5,0,2*Math.PI),n.fillStyle=e.fillStyle||"red",void n.fill();var c=r.deg||e.deg;c&&(n.translate(o,a),n.rotate(c*Math.PI/180),n.translate(-o,-a)),e.sx&&e.sy&&e.swidth&&e.sheight&&e.width&&e.height?n.drawImage(t,e.sx,e.sy,e.swidth,e.sheight,o,a,l,u):l&&u?n.drawImage(t,o,a,l,u):n.drawImage(t,o,a),n.restore()}function te(t,e,n){var r=new Image;r.onload=function(){e&&e(r,t)},r.onerror=function(){n&&n(t)},r.src=window.decodeURIComponent(t)}function ee(t,e,n,r,i,o){if(!(i-r<=n)){var a=r+i>>1;ne(t,e,a,r,i,o%2),ee(t,e,n,r,a-1,o+1),ee(t,e,n,a+1,i,o+1)}}function ne(t,e,n,r,i,o){while(i>r){if(i-r>600){var a=i-r+1,s=n-r+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(s-a/2<0?-1:1),h=Math.max(r,Math.floor(n-s*u/a+c)),d=Math.min(i,Math.floor(n+(a-s)*u/a+c));ne(t,e,n,h,d,o)}var f=e[2*n+o],p=r,g=i;re(t,e,r,n),e[2*i+o]>f&&re(t,e,r,i);while(p<g){re(t,e,p,g),p++,g--;while(e[2*p+o]<f)p++;while(e[2*g+o]>f)g--}e[2*r+o]===f?re(t,e,r,g):(g++,re(t,e,g,i)),g<=n&&(r=g+1),n<=g&&(i=g-1)}}function re(t,e,n,r){ie(t,n,r),ie(e,2*n,2*r),ie(e,2*n+1,2*r+1)}function ie(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function oe(t,e,n,r,i,o,a){var s,l,u=[0,t.length-1,0],c=[];while(u.length){var h=u.pop(),d=u.pop(),f=u.pop();if(d-f<=a)for(var p=f;p<=d;p++)s=e[2*p],l=e[2*p+1],s>=n&&s<=i&&l>=r&&l<=o&&c.push(t[p]);else{var g=Math.floor((f+d)/2);s=e[2*g],l=e[2*g+1],s>=n&&s<=i&&l>=r&&l<=o&&c.push(t[g]);var m=(h+1)%2;(0===h?n<=s:r<=l)&&(u.push(f),u.push(g-1),u.push(m)),(0===h?i>=s:o>=l)&&(u.push(g+1),u.push(d),u.push(m))}}return c}function ae(t,e,n,r,i,o){var a=[0,t.length-1,0],s=[],l=i*i;while(a.length){var u=a.pop(),c=a.pop(),h=a.pop();if(c-h<=o)for(var d=h;d<=c;d++)se(e[2*d],e[2*d+1],n,r)<=l&&s.push(t[d]);else{var f=Math.floor((h+c)/2),p=e[2*f],g=e[2*f+1];se(p,g,n,r)<=l&&s.push(t[f]);var m=(u+1)%2;(0===u?n-i<=p:r-i<=g)&&(a.push(h),a.push(f-1),a.push(m)),(0===u?n+i>=p:r+i>=g)&&(a.push(f+1),a.push(c),a.push(m))}}return s}function se(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o}var le=function(t){return t[0]},ue=function(t){return t[1]},ce=function(t,e,n,r,i){void 0===e&&(e=le),void 0===n&&(n=ue),void 0===r&&(r=64),void 0===i&&(i=Float64Array),this.nodeSize=r,this.points=t;for(var o=t.length<65536?Uint16Array:Uint32Array,a=this.ids=new o(t.length),s=this.coords=new i(2*t.length),l=0;l<t.length;l++)a[l]=l,s[2*l]=e(t[l]),s[2*l+1]=n(t[l]);ee(a,s,r,0,a.length-1,0)};ce.prototype.range=function(t,e,n,r){return oe(this.ids,this.coords,t,e,n,r,this.nodeSize)},ce.prototype.within=function(t,e,n){return ae(this.ids,this.coords,t,e,n,this.nodeSize)};var he={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(t){return t}},de=function(t){this.options=xe(Object.create(he),t),this.trees=new Array(this.options.maxZoom+1)};function fe(t,e,n,r,i){return{x:t,y:e,zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function pe(t,e){var n=t.geometry.coordinates,r=n[0],i=n[1];return{x:ye(r),y:ve(i),zoom:1/0,index:e,parentId:-1}}function ge(t){return{type:"Feature",id:t.id,properties:me(t),geometry:{type:"Point",coordinates:[be(t.x),_e(t.y)]}}}function me(t){var e=t.numPoints,n=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return xe(xe({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function ye(t){return t/360+.5}function ve(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function be(t){return 360*(t-.5)}function _e(t){var e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function xe(t,e){for(var n in e)t[n]=e[n];return t}function we(t){return t.x}function Se(t){return t.y}function Ee(t){requestAnimationFrame(Ee),Ft.update(t)}de.prototype.load=function(t){var e=this.options,n=(e.log,e.minZoom),r=e.maxZoom,i=e.nodeSize;t.length;this.points=t;for(var o=[],a=0;a<t.length;a++)t[a].geometry&&o.push(pe(t[a],a));this.trees[r+1]=new ce(o,we,Se,i,Float32Array);for(var s=r;s>=n;s--){Date.now();o=this._cluster(o,s),this.trees[s]=new ce(o,we,Se,i,Float32Array)}return this},de.prototype.getClusters=function(t,e){var n=((t[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,t[1])),i=180===t[2]?180:((t[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,i=180;else if(n>i){var a=this.getClusters([n,r,180,o],e),s=this.getClusters([-180,r,i,o],e);return a.concat(s)}for(var l=this.trees[this._limitZoom(e)],u=l.range(ye(n),ve(o),ye(i),ve(r)),c=[],h=0,d=u;h<d.length;h+=1){var f=d[h],p=l.points[f];c.push(p.numPoints?ge(p):this.points[p.index])}return c},de.prototype.getChildren=function(t){var e=this._getOriginId(t),n=this._getOriginZoom(t),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);var o=i.points[e];if(!o)throw new Error(r);for(var a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=i.within(o.x,o.y,a),l=[],u=0,c=s;u<c.length;u+=1){var h=c[u],d=i.points[h];d.parentId===t&&l.push(d.numPoints?ge(d):this.points[d.index])}if(0===l.length)throw new Error(r);return l},de.prototype.getLeaves=function(t,e,n){e=e||10,n=n||0;var r=[];return this._appendLeaves(r,t,e,n,0),r},de.prototype.getTile=function(t,e,n){var r=this.trees[this._limitZoom(t)],i=Math.pow(2,t),o=this.options,a=o.extent,s=o.radius,l=s/a,u=(n-l)/i,c=(n+1+l)/i,h={features:[]};return this._addTileFeatures(r.range((e-l)/i,u,(e+1+l)/i,c),r.points,e,n,i,h),0===e&&this._addTileFeatures(r.range(1-l/i,u,1,c),r.points,i,n,i,h),e===i-1&&this._addTileFeatures(r.range(0,u,l/i,c),r.points,-1,n,i,h),h.features.length?h:null},de.prototype.getClusterExpansionZoom=function(t){var e=this._getOriginZoom(t)-1;while(e<=this.options.maxZoom){var n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e},de.prototype._appendLeaves=function(t,e,n,r,i){for(var o=this.getChildren(e),a=0,s=o;a<s.length;a+=1){var l=s[a],u=l.properties;if(u&&u.cluster?i+u.point_count<=r?i+=u.point_count:i=this._appendLeaves(t,u.cluster_id,n,r,i):i<r?i++:t.push(l),t.length===n)break}return i},de.prototype._addTileFeatures=function(t,e,n,r,i,o){for(var a=0,s=t;a<s.length;a+=1){var l=s[a],u=e[l],c=u.numPoints,h={type:1,geometry:[[Math.round(this.options.extent*(u.x*i-n)),Math.round(this.options.extent*(u.y*i-r))]],tags:c?me(u):this.points[u.index].properties},d=void 0;c?d=u.id:this.options.generateId?d=u.index:this.points[u.index].id&&(d=this.points[u.index].id),void 0!==d&&(h.id=d),o.features.push(h)}},de.prototype._limitZoom=function(t){return Math.max(this.options.minZoom,Math.min(+t,this.options.maxZoom+1))},de.prototype._cluster=function(t,e){for(var n=[],r=this.options,i=r.radius,o=r.extent,a=r.reduce,s=r.minPoints,l=i/(o*Math.pow(2,e)),u=0;u<t.length;u++){var c=t[u];if(!(c.zoom<=e)){c.zoom=e;for(var h=this.trees[e+1],d=h.within(c.x,c.y,l),f=c.numPoints||1,p=f,g=0,m=d;g<m.length;g+=1){var y=m[g],v=h.points[y];v.zoom>e&&(p+=v.numPoints||1)}if(p>=s){for(var b=c.x*f,_=c.y*f,x=a&&f>1?this._map(c,!0):null,w=(u<<5)+(e+1)+this.points.length,S=0,E=d;S<E.length;S+=1){var C=E[S],M=h.points[C];if(!(M.zoom<=e)){M.zoom=e;var T=M.numPoints||1;b+=M.x*T,_+=M.y*T,M.parentId=w,a&&(x||(x=this._map(c,!0)),a(x,this._map(M)))}}c.parentId=w,n.push(fe(b/p,_/p,w,p,x))}else if(n.push(c),p>1)for(var A=0,O=d;A<O.length;A+=1){var k=O[A],I=h.points[k];I.zoom<=e||(I.zoom=e,n.push(I))}}}return n},de.prototype._getOriginId=function(t){return t-this.points.length>>5},de.prototype._getOriginZoom=function(t){return(t-this.points.length)%32},de.prototype._map=function(t,e){if(t.numPoints)return e?xe({},t.properties):t.properties;var n=this.points[t.index].properties,r=this.options.map(n);return e&&r===n?xe({},r):r},"undefined"!==typeof window&&requestAnimationFrame(Ee);var Ce=function(){function t(e,n,r){u(this,t),n instanceof g||(n=new g(n)),this.dataSet=n,this.map=e,"cluster"===r.draw&&this.refreshCluster(r)}return c(t,[{key:"refreshCluster",value:function(t){t=t||this.options,this.supercluster=new de({maxZoom:t.maxZoom||19,radius:t.clusterRadius||100,minPoints:t.minPoints||2,extent:t.extent||512}),this.supercluster.load(this.dataSet.get()),this.supercluster.trees.forEach((function(t){var e=0,n=1/0;t.points.forEach((function(t){e=Math.max(t.numPoints||0,e),n=Math.min(t.numPoints||1/0,n)})),t.max=e,t.min=n})),this.clusterDataSet=new g}},{key:"getDefaultContextConfig",value:function(){return{globalAlpha:1,globalCompositeOperation:"source-over",imageSmoothingEnabled:!0,strokeStyle:"#000000",fillStyle:"#000000",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0)",lineWidth:1,lineCap:"butt",lineJoin:"miter",miterLimit:10,lineDashOffset:0,font:"10px sans-serif",textAlign:"start",textBaseline:"alphabetic"}}},{key:"initDataRange",value:function(t){var e=this;if(e.intensity=new x({maxSize:e.options.maxSize,minSize:e.options.minSize,gradient:e.options.gradient,max:e.options.max||this.dataSet.getMax("count")}),e.category=new It(e.options.splitList),e.choropleth=new Pt(e.options.splitList),void 0===e.options.splitList&&e.category.generateByDataSet(this.dataSet,e.options.color),void 0===e.options.splitList){var n=e.options.min||this.dataSet.getMin("count"),r=e.options.max||this.dataSet.getMax("count");e.choropleth.generateByMinMax(n,r)}}},{key:"getLegend",value:function(t){this.options.draw;var e=this;return"intensity"==e.options.draw||"heatmap"==e.options.draw?this.intensity.getLegend(t):"category"==e.options.draw?this.category.getLegend(t):void 0}},{key:"processData",value:function(t){var e=this,n=e.options.draw;if("bubble"==n||"intensity"==n||"category"==n||"choropleth"==n||"simple"==n)for(var r=0;r<t.length;r++){var i=t[r];"bubble"==e.options.draw?t[r]._size=e.intensity.getSize(i.count):t[r]._size=void 0;var o="_fillStyle";"LineString"!==t[r].geometry.type&&"stroke"!==e.options.styleType||(o="_strokeStyle"),"intensity"==e.options.draw?t[r][o]=e.intensity.getColor(i.count):"category"==e.options.draw?t[r][o]=e.category.get(i.count):"choropleth"==e.options.draw&&(t[r][o]=e.choropleth.get(i.count))}}},{key:"isEnabledTime",value:function(){var t=this.options.animation,e=t&&!(!1===t.enabled);return e}},{key:"argCheck",value:function(t){"heatmap"==t.draw&&t.strokeStyle&&console.warn("[heatmap] options.strokeStyle is discard, pleause use options.strength [eg: options.strength = 0.1]")}},{key:"drawContext",value:function(t,e,n,r){var i=this;switch(i.options.draw){case"heatmap":k.draw(t,e,i.options);break;case"grid":case"cluster":case"honeycomb":i.options.offset={x:r.x,y:r.y},"grid"===i.options.draw?I.draw(t,e,i.options):"cluster"===i.options.draw?Ht.draw(t,e,i.options):R.draw(t,e,i.options);break;case"text":Yt.draw(t,e,i.options);break;case"icon":Qt.draw(t,e,i.options);break;case"clip":Gt.draw(t,e,i.options);break;default:"webgl"==i.options.context?Mt.draw(i.canvasLayer.canvas.getContext("webgl"),e,i.options):b.draw(t,e,i.options)}i.options.arrow&&!1!==i.options.arrow.show&&zt.draw(t,e,i.options)}},{key:"isPointInPath",value:function(t,e){var n;t=this.canvasLayer.canvas.getContext(this.context);n="cluster"===this.options.draw&&(!this.options.maxClusterZoom||this.options.maxClusterZoom>=this.getZoom())?this.clusterDataSet.get():this.dataSet.get();for(var r=0;r<n.length;r++){t.beginPath();var i=this.options,o=e.x*this.canvasLayer.devicePixelRatio,a=e.y*this.canvasLayer.devicePixelRatio;i.multiPolygonDraw=function(){if(t.isPointInPath(o,a))return n[r]},v.draw(t,n[r],i);var s=n[r].geometry&&n[r].geometry.type;if(s.indexOf("LineString")>-1){if(t.isPointInStroke&&t.isPointInStroke(o,a))return n[r]}else if(t.isPointInPath(o,a))return n[r]}}},{key:"getClusterPoints",value:function(t){var e=this;if("Feature"!==t.type)return[];var n=this.supercluster.getChildren(t.id);return n.map((function(t){return"Feature"===t.type?e.getClusterPoints(t):t})).flat()}},{key:"clickEvent",value:function(t,e){if(this.options.methods){var n=this.isPointInPath(this.getContext(),t);if(n){if("cluster"===this.options.draw){var r=this.getClusterPoints(n);n.children=r}this.options.methods.click(n,e)}else this.options.methods.click(null,e)}}},{key:"mousemoveEvent",value:function(t,e){if(this.options.methods){var n=this.isPointInPath(this.getContext(),t);if(n){if("cluster"===this.options.draw){var r=this.getClusterPoints(n);n.children=r}this.options.methods.mousemove(n,e)}else this.options.methods.mousemove(null,e)}}},{key:"tapEvent",value:function(t,e){if(this.options.methods){var n=this.isPointInPath(this.getContext(),t);if(n){if("cluster"===this.options.draw){var r=this.getClusterPoints(n);n.children=r}this.options.methods.tap(n,e)}else this.options.methods.tap(null,e)}}},{key:"update",value:function(t,e){var n=this,r=t.options,i=n.options;for(var o in r)i[o]=r[o];n.init(i),!1!==e&&n.draw()}},{key:"setOptions",value:function(t){var e=this;e.dataSet.reset(),e.init(t),e.draw()}},{key:"set",value:function(t){var e=this,n=this.getContext(),r=this.getDefaultContextConfig();for(var i in r)n[i]=r[i];e.init(t.options),e.draw()}},{key:"destroy",value:function(){this.unbindEvent(),this.hide()}},{key:"initAnimator",value:function(){var t=this,e=t.options.animation;if("time"==t.options.draw||t.isEnabledTime()){e.stepsRange||(e.stepsRange={start:this.dataSet.getMin("time")||0,end:this.dataSet.getMax("time")||0}),this.steps={step:e.stepsRange.start},t.animator=new Ft.Tween(this.steps).onUpdate((function(){t._canvasUpdate(this.step)})).repeat(1/0),this.addAnimatorEvent();var n=1e3*e.duration||5e3;t.animator.to({step:e.stepsRange.end},n),t.animator.start()}else t.animator&&t.animator.stop()}},{key:"addAnimatorEvent",value:function(){}},{key:"animatorMovestartEvent",value:function(){var t=this.options.animation;this.isEnabledTime()&&this.animator&&(this.steps.step=t.stepsRange.start,this.animator.stop())}},{key:"animatorMoveendEvent",value:function(){this.isEnabledTime()&&this.animator&&this.animator.start()}}]),t}(),Me="undefined"===typeof window?{}:window,Te=Me.BMap||Me.BMapGL,Ae=function(t){function e(t,n,r){u(this,e);var i=f(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r));i.map=t,i.options=r||{},i.dataSet=n;var o=new Nt({map:t,zIndex:i.options.zIndex,update:i._canvasUpdate.bind(i)});i.init(i.options),i.canvasLayer=o,i.transferToMercator();var a=i;return n.on("change",(function(){a.transferToMercator(),o.draw()})),i.ctx=o.canvas.getContext("2d"),i.start(),i}return d(e,t),c(e,[{key:"draw",value:function(){this.canvasLayer.draw()}},{key:"init",value:function(t){var e=this;e.options=t,this.initDataRange(t),this.context=e.options.context||"2d",e.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(e.options.zIndex),e.options.max&&this.intensity.setMax(e.options.max),e.options.min&&this.intensity.setMin(e.options.min),this.initAnimator()}},{key:"transferToMercator",value:function(){var t,e=this.map,n=e.getMapType();if(t=n.getProjection?n.getProjection():{lngLatToPoint:function(t){var n=e.lnglatToMercator(t.lng,t.lat);return{x:n[0],y:n[1]}}},"bd09mc"!==this.options.coordType){var r=this.dataSet.get();r=this.dataSet.transferCoordinate(r,(function(e){var n=t.lngLatToPoint({lng:e[0],lat:e[1]});return[n.x,n.y]}),"coordinates","coordinates_mercator"),this.dataSet._set(r)}}},{key:"_canvasUpdate",value:function(){var t=this.ctx;if(t){var e,n,i,o=this.map;o.getMapType().getProjection?(e=o.getMapType().getProjection(),n=e.lngLatToPoint(o.getCenter())):(n={x:o.getCenter().lng,y:o.getCenter().lat},n.x>-180&&n.x<180&&(n=o.lnglatToMercator(n.x,n.y),n={x:n[0],y:n[1]}),e={lngLatToPoint:function(t){var e=o.lnglatToMercator(t.lng,t.lat);return{x:e[0],y:e[1]}}}),i=e.getZoomUnits?e.getZoomUnits(o.getZoom()):Math.pow(2,18-o.getZoom());var a=new Te.Pixel(n.x-o.getSize().width/2*i,n.y+o.getSize().height/2*i);r(t);var s={fromColumn:"bd09mc"==this.options.coordType?"coordinates":"coordinates_mercator",transferCoordinate:function(t){if(t){var e=(t[0]-a.x)/i,n=(a.y-t[1])/i;return[e,n]}}};this.data=this.dataSet.get(s),this.processData(this.data),this.drawAnimation()}}},{key:"drawAnimation",value:function(){var t=this.ctx,e=this.data;if(e){t.save(),t.globalCompositeOperation="destination-out",t.fillStyle="rgba(0, 0, 0, .1)",t.fillRect(0,0,t.canvas.width,t.canvas.height),t.restore(),t.save(),this.options.shadowColor&&(t.shadowColor=this.options.shadowColor),this.options.shadowBlur&&(t.shadowBlur=this.options.shadowBlur),this.options.globalAlpha&&(t.globalAlpha=this.options.globalAlpha),this.options.globalCompositeOperation&&(t.globalCompositeOperation=this.options.globalCompositeOperation);for(var n=this.options,r=0;r<e.length;r++)if("Point"===e[r].geometry.type){t.beginPath();var i=e[r].size||this.options.size,o=e[r].minSize||this.options.minSize||0;void 0===e[r]._size&&(e[r]._size=o),t.arc(e[r].geometry._coordinates[0],e[r].geometry._coordinates[1],e[r]._size,0,2*Math.PI,!0),t.closePath(),e[r]._size++,e[r]._size>i&&(e[r]._size=o),t.lineWidth=1,t.strokeStyle=e[r].strokeStyle||e[r]._strokeStyle||n.strokeStyle||"yellow",t.stroke();var a=e[r].fillStyle||e[r]._fillStyle||n.fillStyle;a&&(t.fillStyle=a,t.fill())}else if("LineString"===e[r].geometry.type){t.beginPath();var s=e[r].size||this.options.size||5;o=e[r].minSize||this.options.minSize||0;void 0===e[r]._index&&(e[r]._index=0);var l=e[r]._index;t.arc(e[r].geometry._coordinates[l][0],e[r].geometry._coordinates[l][1],s,0,2*Math.PI,!0),t.closePath(),e[r]._index++,e[r]._index>=e[r].geometry._coordinates.length&&(e[r]._index=0);var u=e[r].strokeStyle||n.strokeStyle;a=e[r].fillStyle||n.fillStyle||"yellow";t.fillStyle=a,t.fill(),u&&n.lineWidth&&(t.lineWidth=n.lineWidth||1,t.strokeStyle=u,t.stroke())}t.restore()}}},{key:"animate",value:function(){this.drawAnimation();var t=this.options.animateTime||100;this.timeout=setTimeout(this.animate.bind(this),t)}},{key:"start",value:function(){this.stop(),this.animate()}},{key:"stop",value:function(){clearTimeout(this.timeout)}},{key:"unbindEvent",value:function(){}},{key:"hide",value:function(){this.canvasLayer.hide(),this.stop()}},{key:"show",value:function(){this.start()}},{key:"clearData",value:function(){this.dataSet&&this.dataSet.clear(),this.update({options:null})}},{key:"destroy",value:function(){this.stop(),this.unbindEvent(),this.clearData(),this.map.removeOverlay(this.canvasLayer),this.canvasLayer=null}}]),e}(Ce),Oe="undefined"===typeof window?{}:window,ke=Oe.BMap||Oe.BMapGL,Ie=function(t){function e(t,n,r){u(this,e);var i=f(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r)),o=i;r=r||{},i.clickEvent=i.clickEvent.bind(i),i.mousemoveEvent=i.mousemoveEvent.bind(i),i.tapEvent=i.tapEvent.bind(i),o.init(r),o.argCheck(r),o.transferToMercator();var a=i.canvasLayer=new Nt({map:t,context:i.context,updateImmediate:r.updateImmediate,paneName:r.paneName,mixBlendMode:r.mixBlendMode,enableMassClear:r.enableMassClear,zIndex:r.zIndex,update:function(){o._canvasUpdate()}});return n.on("change",(function(){o.transferToMercator(),"cluster"===r.draw&&o.refreshCluster(),a.draw()})),i}return d(e,t),c(e,[{key:"clickEvent",value:function(t){var n=t.pixel;h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"clickEvent",this).call(this,n,t)}},{key:"mousemoveEvent",value:function(t){var n=t.pixel;h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"mousemoveEvent",this).call(this,n,t)}},{key:"tapEvent",value:function(t){var n=t.pixel;h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"tapEvent",this).call(this,n,t)}},{key:"bindEvent",value:function(t){this.unbindEvent();var e=this.map,n=0,r=this;this.options.methods&&(this.options.methods.click&&(e.setDefaultCursor("default"),e.addEventListener("click",this.clickEvent)),this.options.methods.mousemove&&e.addEventListener("mousemove",this.mousemoveEvent),"ontouchend"in window.document&&this.options.methods.tap&&(e.addEventListener("touchstart",(function(t){n=new Date})),e.addEventListener("touchend",(function(t){new Date-n<300&&r.tapEvent(t)}))))}},{key:"unbindEvent",value:function(t){var e=this.map;this.options.methods&&(this.options.methods.click&&e.removeEventListener("click",this.clickEvent),this.options.methods.mousemove&&e.removeEventListener("mousemove",this.mousemoveEvent))}},{key:"transferToMercator",value:function(t){t||(t=this.dataSet);var e,n=this.map,r=n.getMapType();if(e=r.getProjection?r.getProjection():{lngLatToPoint:function(t){var e=n.lnglatToMercator(t.lng,t.lat);return{x:e[0],y:e[1]}}},"bd09mc"!==this.options.coordType){var i=t.get();i=t.transferCoordinate(i,(function(t){if(t[0]<-180||t[0]>180||t[1]<-90||t[1]>90)return t;var n=e.lngLatToPoint({lng:t[0],lat:t[1]});return[n.x,n.y]}),"coordinates","coordinates_mercator"),t._set(i)}}},{key:"getContext",value:function(){return this.canvasLayer.canvas.getContext(this.context)}},{key:"_canvasUpdate",value:function(t){if(this.canvasLayer){var e,n,i,o=this,a=this.options.animation,s=this.canvasLayer._map;s.getMapType().getProjection?(e=s.getMapType().getProjection(),n=e.lngLatToPoint(s.getCenter())):(n={x:s.getCenter().lng,y:s.getCenter().lat},n.x>-180&&n.x<180&&(n=s.lnglatToMercator(n.x,n.y),n={x:n[0],y:n[1]}),e={lngLatToPoint:function(t){var e=s.lnglatToMercator(t.lng,t.lat);return{x:e[0],y:e[1]}}}),i=e.getZoomUnits?e.getZoomUnits(s.getZoom()):Math.pow(2,18-s.getZoom());var l=new ke.Pixel(n.x-s.getSize().width/2*i,n.y+s.getSize().height/2*i),u=this.getContext();if(this.isEnabledTime()){if(void 0===t)return void r(u);"2d"==this.context&&(u.save(),u.globalCompositeOperation="destination-out",u.fillStyle="rgba(0, 0, 0, .1)",u.fillRect(0,0,u.canvas.width,u.canvas.height),u.restore())}else r(u);if("2d"==this.context)for(var c in this.options)u[c]=this.options[c];else u.clear(u.COLOR_BUFFER_BIT);if(!(this.options.minZoom&&s.getZoom()<this.options.minZoom||this.options.maxZoom&&s.getZoom()>this.options.maxZoom)){var h=1;"2d"!=this.context&&(h=this.canvasLayer.devicePixelRatio);var d,f={fromColumn:"bd09mc"==this.options.coordType?"coordinates":"coordinates_mercator",transferCoordinate:function(t){var e=(t[0]-l.x)/i*h,n=(l.y-t[1])/i*h;return[e,n]}};void 0!==t&&(f.filter=function(e){var n=a.trails||10;return!!(t&&e.time>t-n&&e.time<t)});var p=this.getZoom();if("cluster"===this.options.draw&&(!this.options.maxClusterZoom||this.options.maxClusterZoom>=p)){var g=this.map.getBounds(),m=g.getNorthEast(),y=g.getSouthWest(),v=this.supercluster.getClusters([y.lng,y.lat,m.lng,m.lat],p);this.pointCountMax=this.supercluster.trees[p].max,this.pointCountMin=this.supercluster.trees[p].min;var b={},_=null,w=null;this.pointCountMax===this.pointCountMin?(_=this.options.fillStyle,w=this.options.minSize||8):b=new x({min:this.pointCountMin,max:this.pointCountMax,minSize:this.options.minSize||8,maxSize:this.options.maxSize||30,gradient:this.options.gradient});for(var S=0;S<v.length;S++){var E=v[S];E.properties&&E.properties.cluster_id?(v[S].size=w||b.getSize(E.properties.point_count),v[S].fillStyle=_||b.getColor(E.properties.point_count)):v[S].size=o.options.size}this.clusterDataSet.set(v),this.transferToMercator(this.clusterDataSet),d=o.clusterDataSet.get(f)}else d=o.dataSet.get(f);this.processData(d);var C=s.pointToPixel(new ke.Point(0,0));"m"==o.options.unit?(o.options.size&&(o.options._size=o.options.size/i),o.options.width&&(o.options._width=o.options.width/i),o.options.height&&(o.options._height=o.options.height/i)):(o.options._size=o.options.size,o.options._height=o.options.height,o.options._width=o.options.width),this.drawContext(u,d,o.options,C),o.options.updateCallback&&o.options.updateCallback(t)}}}},{key:"init",value:function(t){var e=this;e.options=t,this.initDataRange(t),this.context=e.options.context||"2d",e.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(e.options.zIndex),e.options.max&&this.intensity.setMax(e.options.max),e.options.min&&this.intensity.setMin(e.options.min),this.initAnimator(),this.bindEvent()}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"addAnimatorEvent",value:function(){this.map.addEventListener("movestart",this.animatorMovestartEvent.bind(this)),this.map.addEventListener("moveend",this.animatorMoveendEvent.bind(this))}},{key:"show",value:function(){this.map.addOverlay(this.canvasLayer),this.bindEvent()}},{key:"hide",value:function(){this.unbindEvent(),this.map.removeOverlay(this.canvasLayer)}},{key:"draw",value:function(){this.canvasLayer&&this.canvasLayer.draw()}},{key:"clearData",value:function(){this.dataSet&&this.dataSet.clear(),this.update({options:null})}},{key:"destroy",value:function(){this.unbindEvent(),this.clearData(),this.map.removeOverlay(this.canvasLayer),this.canvasLayer=null}}]),e}(Ce);function Pe(t){this.isAdded_=!1,this.isAnimated_=!1,this.paneName_=Pe.DEFAULT_PANE_NAME_,this.updateHandler_=null,this.resizeHandler_=null,this.topLeft_=null,this.centerListener_=null,this.resizeListener_=null,this.needsResize_=!0,this.requestAnimationFrameId_=null;var e=document.createElement("canvas");function n(t,e){return function(){e.apply(t)}}e.style.position="absolute",e.style.top=0,e.style.left=0,e.style.pointerEvents="none",this.canvas=e,this.canvasCssWidth_=300,this.canvasCssHeight_=150,this.resolutionScale_=1,this.repositionFunction_=n(this,this.repositionCanvas_),this.resizeFunction_=n(this,this.resize_),this.requestUpdateFunction_=n(this,this.update_),t&&this.setOptions(t)}var Le="undefined"===typeof window?{}:window;Le.google&&Le.google.maps&&(Pe.prototype=new google.maps.OverlayView,Pe.DEFAULT_PANE_NAME_="overlayLayer",Pe.CSS_TRANSFORM_=function(){for(var t=document.createElement("div"),e=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],n=0;n<e.length;n++){var r=e[n];if(void 0!==t.style[r])return r}return e[0]}(),Pe.prototype.requestAnimFrame_=Le.requestAnimationFrame||Le.webkitRequestAnimationFrame||Le.mozRequestAnimationFrame||Le.oRequestAnimationFrame||Le.msRequestAnimationFrame||function(t){return Le.setTimeout(t,1e3/60)},Pe.prototype.cancelAnimFrame_=Le.cancelAnimationFrame||Le.webkitCancelAnimationFrame||Le.mozCancelAnimationFrame||Le.oCancelAnimationFrame||Le.msCancelAnimationFrame||function(t){},Pe.prototype.setOptions=function(t){void 0!==t.animate&&this.setAnimate(t.animate),void 0!==t.paneName&&this.setPaneName(t.paneName),void 0!==t.updateHandler&&this.setUpdateHandler(t.updateHandler),void 0!==t.resizeHandler&&this.setResizeHandler(t.resizeHandler),void 0!==t.resolutionScale&&this.setResolutionScale(t.resolutionScale),void 0!==t.map&&this.setMap(t.map)},Pe.prototype.setAnimate=function(t){this.isAnimated_=!!t,this.isAnimated_&&this.scheduleUpdate()},Pe.prototype.isAnimated=function(){return this.isAnimated_},Pe.prototype.setPaneName=function(t){this.paneName_=t,this.setPane_()},Pe.prototype.getPaneName=function(){return this.paneName_},Pe.prototype.setPane_=function(){if(this.isAdded_){var t=this.getPanes();if(!t[this.paneName_])throw new Error('"'+this.paneName_+'" is not a valid MapPane name.');t[this.paneName_].appendChild(this.canvas)}},Pe.prototype.setResizeHandler=function(t){this.resizeHandler_=t},Pe.prototype.setResolutionScale=function(t){"number"===typeof t&&(this.resolutionScale_=t,this.resize_())},Pe.prototype.setUpdateHandler=function(t){this.updateHandler_=t},Pe.prototype.onAdd=function(){this.isAdded_||(this.isAdded_=!0,this.setPane_(),this.resizeListener_=google.maps.event.addListener(this.getMap(),"resize",this.resizeFunction_),this.centerListener_=google.maps.event.addListener(this.getMap(),"center_changed",this.repositionFunction_),this.resize_(),this.repositionCanvas_())},Pe.prototype.onRemove=function(){this.isAdded_&&(this.isAdded_=!1,this.topLeft_=null,this.canvas.parentElement.removeChild(this.canvas),this.centerListener_&&(google.maps.event.removeListener(this.centerListener_),this.centerListener_=null),this.resizeListener_&&(google.maps.event.removeListener(this.resizeListener_),this.resizeListener_=null),this.requestAnimationFrameId_&&(this.cancelAnimFrame_.call(Le,this.requestAnimationFrameId_),this.requestAnimationFrameId_=null))},Pe.prototype.resize_=function(){if(this.isAdded_){var t=this.getMap(),e=t.getDiv().offsetWidth,n=t.getDiv().offsetHeight,r=e*this.resolutionScale_,i=n*this.resolutionScale_,o=this.canvas.width,a=this.canvas.height;o===r&&a===i||(this.canvas.width=r,this.canvas.height=i,this.needsResize_=!0,this.scheduleUpdate()),this.canvasCssWidth_===e&&this.canvasCssHeight_===n||(this.canvasCssWidth_=e,this.canvasCssHeight_=n,this.canvas.style.width=e+"px",this.canvas.style.height=n+"px")}},Pe.prototype.draw=function(){this.repositionCanvas_()},Pe.prototype.repositionCanvas_=function(){var t=this.getMap(),e=t.getBounds().getNorthEast().lat(),n=t.getCenter(),r=Math.pow(2,t.getZoom()),i=n.lng()-180*this.canvasCssWidth_/(256*r);this.topLeft_=new google.maps.LatLng(e,i);var o=this.getProjection(),a=o.fromLatLngToDivPixel(n),s=-Math.round(this.canvasCssWidth_/2-a.x),l=-Math.round(this.canvasCssHeight_/2-a.y);this.canvas.style[Pe.CSS_TRANSFORM_]="translate("+s+"px,"+l+"px)",this.scheduleUpdate()},Pe.prototype.update_=function(){this.requestAnimationFrameId_=null,this.isAdded_&&(this.isAnimated_&&this.scheduleUpdate(),this.needsResize_&&this.resizeHandler_&&(this.needsResize_=!1,this.resizeHandler_()),this.updateHandler_&&this.updateHandler_())},Pe.prototype.getTopLeft=function(){return this.topLeft_},Pe.prototype.scheduleUpdate=function(){this.isAdded_&&!this.requestAnimationFrameId_&&(this.requestAnimationFrameId_=this.requestAnimFrame_.call(Le,this.requestUpdateFunction_))});var Ne=function(t){function e(t,n,r){u(this,e);var i=f(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r)),o=i;r=r||{},o.init(r),o.argCheck(r);var a={map:t,animate:!1,updateHandler:function(){o._canvasUpdate()},resolutionScale:resolutionScale};i.canvasLayer=new Pe(a);return i.clickEvent=i.clickEvent.bind(i),i.mousemoveEvent=i.mousemoveEvent.bind(i),i.bindEvent(),i}return d(e,t),c(e,[{key:"clickEvent",value:function(t){var n=t.pixel;h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"clickEvent",this).call(this,n,t)}},{key:"mousemoveEvent",value:function(t){var n=t.pixel;h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"mousemoveEvent",this).call(this,n,t)}},{key:"bindEvent",value:function(t){var e=this.map;this.options.methods&&(this.options.methods.click&&(e.setDefaultCursor("default"),e.addListener("click",this.clickEvent)),this.options.methods.mousemove&&e.addListener("mousemove",this.mousemoveEvent))}},{key:"unbindEvent",value:function(t){var e=this.map;this.options.methods&&(this.options.methods.click&&e.removeListener("click",this.clickEvent),this.options.methods.mousemove&&e.removeListener("mousemove",this.mousemoveEvent))}},{key:"getContext",value:function(){return this.canvasLayer.canvas.getContext(this.context)}},{key:"_canvasUpdate",value:function(t){if(this.canvasLayer){var e=this,n=e.options.animation,i=this.getContext();if(e.isEnabledTime()){if(void 0===t)return void r(i);"2d"==this.context&&(i.save(),i.globalCompositeOperation="destination-out",i.fillStyle="rgba(0, 0, 0, .1)",i.fillRect(0,0,i.canvas.width,i.canvas.height),i.restore())}else r(i);if("2d"==this.context)for(var o in e.options)i[o]=e.options[o];else i.clear(i.COLOR_BUFFER_BIT);if(!(e.options.minZoom&&s.getZoom()<e.options.minZoom||e.options.maxZoom&&s.getZoom()>e.options.maxZoom)){var a=1;"2d"!=this.context&&(a=this.canvasLayer.devicePixelRatio);var s=this.map,l=s.getProjection(),u=(a=Math.pow(2,s.zoom)*resolutionScale,l.fromLatLngToPoint(this.canvasLayer.getTopLeft())),c={transferCoordinate:function(t){var e=new google.maps.LatLng(t[1],t[0]),n=l.fromLatLngToPoint(e),r={x:(n.x-u.x)*a,y:(n.y-u.y)*a};return[r.x,r.y]}};void 0!==t&&(c.filter=function(e){var r=n.trails||10;return!!(t&&e.time>t-r&&e.time<t)});var h=e.dataSet.get(c);this.processData(h);var d=new google.maps.LatLng(0,0),f=l.fromLatLngToPoint(d),p={x:(f.x-u.x)*a,y:(f.y-u.y)*a};"m"==e.options.unit&&e.options.size?e.options._size=e.options.size/zoomUnit:e.options._size=e.options.size,this.drawContext(i,new g(h),e.options,p),e.options.updateCallback&&e.options.updateCallback(t)}}}},{key:"init",value:function(t){var e=this;e.options=t,this.initDataRange(t),this.context=e.options.context||"2d",e.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(e.options.zIndex),this.initAnimator()}},{key:"addAnimatorEvent",value:function(){this.map.addListener("movestart",this.animatorMovestartEvent.bind(this)),this.map.addListener("moveend",this.animatorMoveendEvent.bind(this))}},{key:"show",value:function(){this.map.addOverlay(this.canvasLayer)}},{key:"hide",value:function(){this.map.removeOverlay(this.canvasLayer)}},{key:"draw",value:function(){self.canvasLayer.draw()}}]),e}(Ce),Re=void 0;if("undefined"!==typeof maptalks){Re=function(t){function e(t,n,r){u(this,e);var i=f(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r));return i.options_=r,i.dataSet=n,i._initBaseLayer(r),i}return d(e,t),c(e,[{key:"_initBaseLayer",value:function(t){var e=this,n=this.baseLayer=new Ce(null,this.dataSet,t);e.init(t),n.argCheck(t)}},{key:"clickEvent",value:function(t){if(this.baseLayer){var e=t.containerPoint;this.baseLayer.clickEvent(e,t.domEvent)}}},{key:"mousemoveEvent",value:function(t){if(this.baseLayer){var e=t.containerPoint;this.baseLayer.mousemoveEvent(e,t.domEvent)}}},{key:"getEvents",value:function(){return{click:this.clickEvent,mousemove:this.mousemoveEvent}}},{key:"init",value:function(t){var e=this.baseLayer;e.options=t,e.initDataRange(t),e.context=e.options.context||"2d",e.initAnimator()}},{key:"addAnimatorEvent",value:function(){this.map.addListener("movestart",this.animatorMovestartEvent.bind(this)),this.map.addListener("moveend",this.animatorMoveendEvent.bind(this))}}]),e}(maptalks.Layer);var De=function(t){function e(){return u(this,e),f(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return d(e,t),c(e,[{key:"needToRedraw",value:function(){var t=this.layer.baseLayer;return!!t.isEnabledTime()||h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"needToRedraw",this).call(this)}},{key:"draw",value:function(){var t=this.layer.baseLayer;this.canvas&&t.isEnabledTime()&&!this._shouldClear||(this.prepareCanvas(),this._shouldClear=!1),this._update(this.gl||this.context,this._mapvFrameTime),delete this._mapvFrameTime,this.completeRender()}},{key:"drawOnInteracting",value:function(){this.draw(),this._shouldClear=!1}},{key:"onSkipDrawOnInteracting",value:function(){this._shouldClear=!0}},{key:"_canvasUpdate",value:function(t){this.setToRedraw(),this._mapvFrameTime=t}},{key:"_update",value:function(t,e){if(this.canvas){var n=this.layer.baseLayer,i=n.options.animation,o=this.getMap();if(n.isEnabledTime()){if(void 0===e)return void r(t);"2d"==n.context&&(t.save(),t.globalCompositeOperation="destination-out",t.fillStyle="rgba(0, 0, 0, .1)",t.fillRect(0,0,t.canvas.width,t.canvas.height),t.restore())}else r(t);if("2d"==n.context)for(var a in n.options)t[a]=n.options[a];else t.clear(t.COLOR_BUFFER_BIT);var s=1,l=new maptalks.Coordinate(0,0),u={fromColumn:"bd09mc"===n.options.coordType?"coordinates_mercator":"coordinates",transferCoordinate:function(t){l.x=t[0],l.y=t[1];var e=o.coordToContainerPoint(l)._multi(s).toArray();return e}};void 0!==e&&(u.filter=function(t){var n=i.trails||10;return!!(e&&t.time>e-n&&t.time<e)});var c=n.dataSet.get(u);n.processData(c),"m"==n.options.unit?(n.options.size&&(n.options._size=n.options.size/zoomUnit),n.options.width&&(n.options._width=n.options.width/zoomUnit),n.options.height&&(n.options._height=n.options.height/zoomUnit)):(n.options._size=n.options.size,n.options._height=n.options.height,n.options._width=n.options.width);var h=new maptalks.Point(0,0),d=o._pointToContainerPoint(h)._multi(s);n.drawContext(t,c,n.options,d),n.options.updateCallback&&n.options.updateCallback(e)}}},{key:"createCanvas",value:function(){if(!this.canvas){var t=this.getMap(),e=t.getSize(),n=t.getDevicePixelRatio?t.getDevicePixelRatio():maptalks.Browser.retina?2:1,r=n*e.width,i=n*e.height;this.canvas=maptalks.Canvas.createCanvas(r,i,t.CanvasClass);var o=this.layer.baseLayer.context;if("2d"===o)this.context=this.canvas.getContext("2d"),this.layer.options["globalCompositeOperation"]&&(this.context.globalCompositeOperation=this.layer.options["globalCompositeOperation"]),"heatmap"!==this.layer.baseLayer.options.draw&&1!==n&&this.context.scale(n,n);else{var a={alpha:!0,preserveDrawingBuffer:!0,antialias:!1};this.gl=this.canvas.getContext("webgl",a)}this.onCanvasCreate(),this._bindToMapv(),this.layer.fire("canvascreate",{context:this.context,gl:this.gl})}}},{key:"_bindToMapv",value:function(){var t=this.layer.baseLayer,e=this.getMap();this.devicePixelRatio=e.getDevicePixelRatio?e.getDevicePixelRatio():maptalks.Browser.retina?2:1,t.canvasLayer=this,t._canvasUpdate=this._canvasUpdate.bind(this),t.getContext=function(){var t=self.getRenderer();return t.gl||t.context}}}]),e}(maptalks.renderer.CanvasRenderer);Re.registerRenderer("canvas",De)}var Fe,je=Re,Be=function(t,e,n){if("undefined"!==typeof document){var r=document.createElement("canvas");return r.width=t,r.height=e,r}return new n(t,e)},ze=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments[1],r=arguments[2];u(this,e);var i=f(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r));return i.options=r,i.canvasLayer={canvas:null,devicePixelRatio:window.devicePixelRatio},i.layer_=null,i.initDataRange(r),i.initAnimator(),i.onEvents(),t.on("complete",(function(){this.init(t,r),this.argCheck(r)}),i),i}return d(e,t),c(e,[{key:"init",value:function(t,e){if(!t)throw new Error("not map object");this.map=t,this.context=this.options.context||"2d",this.getCanvasLayer()}},{key:"_canvasUpdate",value:function(t){this.render(this.canvasLayer.canvas,t)}},{key:"render",value:function(t,e){if(t){var n=this.map,i=t.getContext(this.context),o=this.options.animation;if(this.isEnabledTime()){if(void 0===e)return r(i),this;"2d"===this.context&&(i.save(),i.globalCompositeOperation="destination-out",i.fillStyle="rgba(0, 0, 0, .1)",i.fillRect(0,0,i.canvas.width,i.canvas.height),i.restore())}else r(i);if("2d"===this.context)for(var a in this.options)i[a]=this.options[a];else i.clear(i.COLOR_BUFFER_BIT);var s={transferCoordinate:function(t){var e=n.lngLatToContainer(new AMap.LngLat(t[0],t[1]));return[e["x"],e["y"]]}};void 0!==e&&(s.filter=function(t){var n=o.trails||10;return!!(e&&t.time>e-n&&t.time<e)});var l=this.dataSet.get(s);return this.processData(l),"m"===this.options.unit?(this.options.size&&(this.options._size=this.options.size/zoomUnit),this.options.width&&(this.options._width=this.options.width/zoomUnit),this.options.height&&(this.options._height=this.options.height/zoomUnit)):(this.options._size=this.options.size,this.options._height=this.options.height,this.options._width=this.options.width),this.drawContext(i,new g(l),this.options,{x:0,y:0}),this.options.updateCallback&&this.options.updateCallback(e),this}}},{key:"getCanvasLayer",value:function(){if(!this.canvasLayer.canvas&&!this.layer_){var t=this.canvasFunction(),e=this.map.getBounds();this.layer_=new AMap.CanvasLayer({canvas:t,bounds:this.options.bounds||e,zooms:this.options.zooms||[0,22]}),this.layer_.setMap(this.map),this.map.on("mapmove",this.canvasFunction,this),this.map.on("zoomchange",this.canvasFunction,this)}}},{key:"canvasFunction",value:function(){var t=[this.map.getSize().width,this.map.getSize().height],e=t[0],n=t[1];if(this.canvasLayer.canvas){this.canvasLayer.canvas.width=e,this.canvasLayer.canvas.height=n;var r=this.map.getBounds();this.layer_&&this.layer_.setBounds(this.options.bounds||r)}else this.canvasLayer.canvas=Be(e,n);return this.render(this.canvasLayer.canvas),this.canvasLayer.canvas}},{key:"removeLayer",value:function(){this.map&&(this.unEvents(),this.map.removeLayer(this.layer_),delete this.map,delete this.layer_,delete this.canvasLayer.canvas)}},{key:"getContext",value:function(){return this.canvasLayer.canvas.getContext(this.context)}},{key:"clickEvent",value:function(t){var n=t.pixel;h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"clickEvent",this).call(this,n,t)}},{key:"mousemoveEvent",value:function(t){var n=t.pixel;h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"mousemoveEvent",this).call(this,n,t)}},{key:"addAnimatorEvent",value:function(){this.map.on("movestart",this.animatorMovestartEvent,this),this.map.on("moveend",this.animatorMoveendEvent,this)}},{key:"onEvents",value:function(){var t=this.map;this.unEvents(),this.options.methods&&(this.options.methods.click&&t.on("click",this.clickEvent,this),this.options.methods.mousemove&&t.on("mousemove",this.mousemoveEvent,this))}},{key:"unEvents",value:function(){var t=this.map;this.options.methods&&(this.options.methods.click&&t.off("click",this.clickEvent,this),this.options.methods.mousemove&&t.off("mousemove",this.mousemoveEvent,this))}}]),e}(Ce),Ue=function(t,e){if("undefined"!==typeof document){var n=document.createElement("canvas");return n.width=t,n.height=e,n}},Ge=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments[1],r=arguments[2];u(this,e);var i=f(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r));return i.options=r,i.canvasLayer={canvas:null,devicePixelRatio:window.devicePixelRatio},i.layer_=null,i.previousCursor_=void 0,i.init(t,r),i.argCheck(r),i}return d(e,t),c(e,[{key:"init",value:function(t,e){if(!(t&&t instanceof ol.Map))throw new Error("not map object");this.$Map=t,this.context=this.options.context||"2d",this.getCanvasLayer(),this.initDataRange(e),this.initAnimator(),this.onEvents()}},{key:"_canvasUpdate",value:function(t){this.render(this.canvasLayer.canvas,t)}},{key:"render",value:function(t,e){var n=this.$Map,i=t.getContext(this.context),o=this.options.animation,a=this.options.hasOwnProperty("projection")?this.options.projection:"EPSG:4326",s=this.$Map.getView().getProjection().getCode();if(this.isEnabledTime()){if(void 0===e)return r(i),this;"2d"===this.context&&(i.save(),i.globalCompositeOperation="destination-out",i.fillStyle="rgba(0, 0, 0, .1)",i.fillRect(0,0,i.canvas.width,i.canvas.height),i.restore())}else r(i);if("2d"===this.context)for(var l in this.options)i[l]=this.options[l];else i.clear(i.COLOR_BUFFER_BIT);var u={};u.transferCoordinate=a===s?function(t){return n.getPixelFromCoordinate(t)}:function(t){return n.getPixelFromCoordinate(ol.proj.transform(t,a,s))},void 0!==e&&(u.filter=function(t){var n=o.trails||10;return!!(e&&t.time>e-n&&t.time<e)});var c=this.dataSet.get(u);return this.processData(c),"m"===this.options.unit?(this.options.size&&(this.options._size=this.options.size/zoomUnit),this.options.width&&(this.options._width=this.options.width/zoomUnit),this.options.height&&(this.options._height=this.options.height/zoomUnit)):(this.options._size=this.options.size,this.options._height=this.options.height,this.options._width=this.options.width),this.drawContext(i,new g(c),this.options,{x:0,y:0}),this.options.updateCallback&&this.options.updateCallback(e),this}},{key:"getCanvasLayer",value:function(){if(!this.canvasLayer.canvas&&!this.layer_){var t=this.getMapExtent();this.layer_=new ol.layer.Image({layerName:this.options.layerName,minResolution:this.options.minResolution,maxResolution:this.options.maxResolution,zIndex:this.options.zIndex,extent:t,source:new ol.source.ImageCanvas({canvasFunction:this.canvasFunction.bind(this),projection:this.$Map.getView().getProjection().getCode(),ratio:this.options.hasOwnProperty("ratio")?this.options.ratio:1})}),this.$Map.addLayer(this.layer_),this.$Map.un("precompose",this.reRender,this),this.$Map.on("precompose",this.reRender,this)}}},{key:"reRender",value:function(){if(this.layer_){var t=this.getMapExtent();this.layer_.setExtent(t)}}},{key:"canvasFunction",value:function(t,e,n,r,i){return this.canvasLayer.canvas?(this.canvasLayer.canvas.width=r[0],this.canvasLayer.canvas.height=r[1]):this.canvasLayer.canvas=Ue(r[0],r[1]),this.render(this.canvasLayer.canvas),this.canvasLayer.canvas}},{key:"getMapExtent",value:function(){var t=this.$Map.getSize();return this.$Map.getView().calculateExtent(t)}},{key:"addTo",value:function(t){this.init(t,this.options)}},{key:"removeLayer",value:function(){this.$Map&&(this.unEvents(),this.$Map.un("precompose",this.reRender,this),this.$Map.removeLayer(this.layer_),delete this.$Map,delete this.layer_,delete this.canvasLayer.canvas)}},{key:"getContext",value:function(){return this.canvasLayer.canvas.getContext(this.context)}},{key:"clickEvent",value:function(t){var n=t.pixel;h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"clickEvent",this).call(this,{x:n[0],y:n[1]},t)}},{key:"mousemoveEvent",value:function(t){var n=t.pixel;h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"mousemoveEvent",this).call(this,{x:n[0],y:n[1]},t)}},{key:"addAnimatorEvent",value:function(){this.$Map.on("movestart",this.animatorMovestartEvent,this),this.$Map.on("moveend",this.animatorMoveendEvent,this)}},{key:"onEvents",value:function(){var t=this.$Map;this.unEvents(),this.options.methods&&(this.options.methods.click&&t.on("click",this.clickEvent,this),this.options.methods.mousemove&&t.on("pointermove",this.mousemoveEvent,this))}},{key:"unEvents",value:function(){var t=this.$Map;this.options.methods&&(this.options.methods.click&&t.un("click",this.clickEvent,this),this.options.methods.pointermove&&t.un("pointermove",this.mousemoveEvent,this))}},{key:"setDefaultCursor",value:function(t,e){if(this.$Map){var n=this.$Map.getTargetElement();e?n.style.cursor!==t&&(this.previousCursor_=n.style.cursor,n.style.cursor=t):void 0!==this.previousCursor_&&(n.style.cursor=this.previousCursor_,this.previousCursor_=void 0)}}},{key:"show",value:function(){this.$Map.addLayer(this.layer_)}},{key:"hide",value:function(){this.$Map.removeLayer(this.layer_)}}]),e}(Ce),qe=function(t){function e(t,n,r,i){u(this,e);var o=f(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r,i));if(!Ce)return f(o);var a=o;return i=i||{},a.init(i),a.argCheck(i),o.canvasLayer=n,o.clickEvent=o.clickEvent.bind(o),o.mousemoveEvent=o.mousemoveEvent.bind(o),o._moveStartEvent=o.moveStartEvent.bind(o),o._moveEndEvent=o.moveEndEvent.bind(o),o._zoomStartEvent=o.zoomStartEvent.bind(o),o.bindEvent(),o}return d(e,t),c(e,[{key:"clickEvent",value:function(t){var n=this.map.containerPointToLayerPoint([0,0]),r=this.devicePixelRatio=this.canvasLayer.devicePixelRatio=window.devicePixelRatio,i=t.layerPoint;h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"clickEvent",this).call(this,L.point((i.x-n.x)/r,(i.y-n.y)/r),t)}},{key:"mousemoveEvent",value:function(t){var n=t.layerPoint;h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"mousemoveEvent",this).call(this,n,t)}},{key:"bindEvent",value:function(){var t=this.map;this.options.methods&&(this.options.methods.click&&t.on("click",this.clickEvent),this.options.methods.mousemove&&t.on("mousemove",this.mousemoveEvent)),this.map.on("movestart",this._moveStartEvent),this.map.on("moveend",this._moveEndEvent),this.map.on("zoomstart",this._zoomStartEvent)}},{key:"destroy",value:function(){this.unbindEvent(),this.clearData(),this.animator&&this.animator.stop(),this.animator=null,this.canvasLayer=null}},{key:"unbindEvent",value:function(){var t=this.map;this.options.methods&&(this.options.methods.click&&t.off("click",this.clickEvent),this.options.methods.mousemove&&t.off("mousemove",this.mousemoveEvent)),this.map.off("movestart",this._moveStartEvent),this.map.off("moveend",this._moveEndEvent),this.map.off("zoomstart",this._zoomStartEvent)}},{key:"getContext",value:function(){return this.canvasLayer.getCanvas().getContext(this.context)}},{key:"addData",value:function(t,e){var n=t;t&&t.get&&(n=t.get()),this.dataSet.add(n),this.update({options:e})}},{key:"update",value:function(t){var n=t||{},r=n.data;r&&r.get&&(r=r.get()),void 0!=r&&this.dataSet.set(r),h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this,{options:n.options})}},{key:"getData",value:function(){return this.dataSet}},{key:"removeData",value:function(t){if(this.dataSet){var e=this.dataSet.get({filter:function(e){return null==t||"function"!==typeof t||!t(e)}});this.dataSet.set(e),this.update({options:null})}}},{key:"clearData",value:function(){this.dataSet&&this.dataSet.clear(),this.update({options:null})}},{key:"_canvasUpdate",value:function(t){if(this.canvasLayer){var e=this,n=e.options.animation,r=this.getContext(),i=this.map;if(e.isEnabledTime()){if(void 0===t)return void this.clear(r);"2d"===this.context&&(r.save(),r.globalCompositeOperation="destination-out",r.fillStyle="rgba(0, 0, 0, .1)",r.fillRect(0,0,r.canvas.width,r.canvas.height),r.restore())}else this.clear(r);if("2d"===this.context)for(var o in e.options)r[o]=e.options[o];else r.clear(r.COLOR_BUFFER_BIT);if(!(e.options.minZoom&&i.getZoom()<e.options.minZoom||e.options.maxZoom&&i.getZoom()>e.options.maxZoom)){var a=i.getBounds(),s=a.getEast()-a.getWest(),l=a.getNorth()-a.getSouth(),u=i.getSize(),c=s/u.x,h=l/u.y,d=this.canvasLayer.getTopLeft(),f=i.latLngToContainerPoint(d),p={transferCoordinate:function(t){var n;n="2d"===e.context?i.latLngToContainerPoint(L.latLng(t[1],t[0])):{x:(t[0]-d.lng)/c,y:(d.lat-t[1])/h};var r={x:n.x-f.x,y:n.y-f.y};return[r.x,r.y]}};void 0!==t&&(p.filter=function(e){var r=n.trails||10;return t&&e.time>t-r&&e.time<t});var g=e.dataSet.get(p);this.processData(g),e.options._size=e.options.size;var m=i.latLngToContainerPoint(L.latLng(0,0)),y={x:m.x-f.x,y:m.y-f.y};this.drawContext(r,g,e.options,y),e.options.updateCallback&&e.options.updateCallback(t)}}}},{key:"init",value:function(t){var e=this;e.options=t,this.initDataRange(t),this.context=e.options.context||"2d",e.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(e.options.zIndex),this.initAnimator()}},{key:"addAnimatorEvent",value:function(){}},{key:"moveStartEvent",value:function(){var t=this.options.animation;this.isEnabledTime()&&this.animator&&(this.steps.step=t.stepsRange.start,this._hide())}},{key:"moveEndEvent",value:function(){this.canvasLayer.draw(),this._show()}},{key:"zoomStartEvent",value:function(){this._hide()}},{key:"clear",value:function(t){t&&t.clearRect&&t.clearRect(0,0,t.canvas.width,t.canvas.height)}},{key:"_hide",value:function(){this.canvasLayer.canvas.style.display="none"}},{key:"_show",value:function(){this.canvasLayer.canvas.style.display="block"}},{key:"draw",value:function(){this.canvasLayer.draw()}}]),e}(Ce);if("undefined"!==typeof L){var Ve=L.Layer.extend({options:{attributionPrefix:null,attribution:""},initialize:function(t,e,n){n=n||{},this.dataSet=t||{},this.mapVOptions=e||{},this.render=this.render.bind(this),L.Util.setOptions(this,n),this.options.attributionPrefix&&(this.options.attribution=this.options.attributionPrefix+this.options.attribution),this.canvas=this._createCanvas(),L.stamp(this)},onAdd:function(t){this._map=t;var e=this.getPane(),n=this.container=L.DomUtil.create("div","leaflet-layer leaflet-zoom-animated",e);n.appendChild(this.canvas);var r=t.getSize();n.style.width=r.x+"px",n.style.height=r.y+"px",this.renderer=new qe(t,this,this.dataSet,this.mapVOptions),this.draw(),this.fire("loaded")},onRemove:function(){L.DomUtil.remove(this.container),this.renderer.destroy()},addData:function(t,e){this.renderer.addData(t,e)},update:function(t){this.renderer.update(t)},getData:function(){return this.renderer&&(this.dataSet=this.renderer.getData()),this.dataSet},removeData:function(t){this.renderer&&this.renderer.removeData(t)},clearData:function(){this.renderer.clearData()},draw:function(){return this._reset()},setZIndex:function(t){this.canvas.style.zIndex=t},render:function(){this.renderer._canvasUpdate()},getCanvas:function(){return this.canvas},getContainer:function(){return this.container},getTopLeft:function(){var t,e=this._map;if(e){var n=e.getBounds();t=n.getNorthWest()}return t},_createCanvas:function(){var t=document.createElement("canvas");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=this.options.zIndex||600;var e="undefined"===typeof window?{}:window,n=this.devicePixelRatio=e.devicePixelRatio;return this.mapVOptions.context&&"2d"!==this.mapVOptions.context||t.getContext("2d").scale(n,n),t},_resize:function(){var t=this.canvas;if(t){var e=this._map,n=e.getSize();t.width=n.x,t.height=n.y,t.style.width=n.x+"px",t.style.height=n.y+"px";var r=e.getBounds(),i=e.latLngToLayerPoint(r.getNorthWest());L.DomUtil.setPosition(t,i)}},_reset:function(){this._resize(),this._render()},redraw:function(){this._resize(),this._render()},_render:function(){this.render()}});Fe=function(t,e,n){return new Ve(t,e,n)}}var He,We=Fe,Ye=function(t){function e(t,n,r,i){u(this,e);var o=f(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r));return Ce?(o.map=t,o.scene=t.scene,o.dataSet=n,r=r||{},o.init(r),o.argCheck(r),o.initDevicePixelRatio(),o.canvasLayer=i,o.stopAniamation=!1,o.animation=r.animation,o.clickEvent=o.clickEvent.bind(o),o.mousemoveEvent=o.mousemoveEvent.bind(o),o.bindEvent(),o):f(o)}return d(e,t),c(e,[{key:"initDevicePixelRatio",value:function(){this.devicePixelRatio=window.devicePixelRatio||1}},{key:"clickEvent",value:function(t){var n=t.point;h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"clickEvent",this).call(this,n,t)}},{key:"mousemoveEvent",value:function(t){var n=t.point;h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"mousemoveEvent",this).call(this,n,t)}},{key:"addAnimatorEvent",value:function(){}},{key:"animatorMovestartEvent",value:function(){var t=this.options.animation;this.isEnabledTime()&&this.animator&&(this.steps.step=t.stepsRange.start)}},{key:"animatorMoveendEvent",value:function(){this.isEnabledTime()&&this.animator}},{key:"bindEvent",value:function(){this.map,this.options.methods&&(this.options.methods.click,this.options.methods.mousemove)}},{key:"unbindEvent",value:function(){var t=this.map;this.options.methods&&(this.options.methods.click&&t.off("click",this.clickEvent),this.options.methods.mousemove&&t.off("mousemove",this.mousemoveEvent))}},{key:"getContext",value:function(){return this.canvasLayer.canvas.getContext(this.context)}},{key:"init",value:function(t){this.options=t,this.initDataRange(t),this.context=this.options.context||"2d",this.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(this.options.zIndex),this.initAnimator()}},{key:"_canvasUpdate",value:function(t){this.map;var e=this.scene;if(this.canvasLayer&&!this.stopAniamation){var n=this.options.animation,r=this.getContext();if(this.isEnabledTime()){if(void 0===t)return void this.clear(r);"2d"===this.context&&(r.save(),r.globalCompositeOperation="destination-out",r.fillStyle="rgba(0, 0, 0, .1)",r.fillRect(0,0,r.canvas.width,r.canvas.height),r.restore())}else this.clear(r);if("2d"===this.context)for(var i in this.options)r[i]=this.options[i];else r.clear(r.COLOR_BUFFER_BIT);var o={transferCoordinate:function(t){var n=Cesium.Cartesian3.fromDegrees(t[0],t[1]),r=Cesium.SceneTransforms.wgs84ToWindowCoordinates(e,n);return void 0==r?[-1,-1]:[r.x,r.y]}};void 0!==t&&(o.filter=function(e){var r=n.trails||10;return!!(t&&e.time>t-r&&e.time<t)});var a=this.dataSet.get(o);this.processData(a),"m"==this.options.unit&&this.options.size,this.options._size=this.options.size;var s=Cesium.SceneTransforms.wgs84ToWindowCoordinates(e,Cesium.Cartesian3.fromDegrees(0,0));this.drawContext(r,new g(a),this.options,s),this.options.updateCallback&&this.options.updateCallback(t)}}},{key:"updateData",value:function(t,n){var r=t;r&&r.get&&(r=r.get()),void 0!=r&&this.dataSet.set(r),h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this,{options:n})}},{key:"addData",value:function(t,e){var n=t;t&&t.get&&(n=t.get()),this.dataSet.add(n),this.update({options:e})}},{key:"getData",value:function(){return this.dataSet}},{key:"removeData",value:function(t){if(this.dataSet){var e=this.dataSet.get({filter:function(e){return null==t||"function"!=typeof t||!t(e)}});this.dataSet.set(e),this.update({options:null})}}},{key:"clearData",value:function(){this.dataSet&&this.dataSet.clear(),this.update({options:null})}},{key:"draw",value:function(){this.canvasLayer.draw()}},{key:"clear",value:function(t){t&&t.clearRect&&t.clearRect(0,0,t.canvas.width,t.canvas.height)}}]),e}(Ce);if("undefined"!==typeof Cesium){var Xe=0,Je=(Cesium,function(){function t(e,n,r,i){if(u(this,t),this.map=e,this.scene=e.scene,this.mapvBaseLayer=new Ye(e,n,r,this),this.mapVOptions=r,this.initDevicePixelRatio(),this.canvas=this._createCanvas(),this.render=this.render.bind(this),i)this.container=i;else{var o=e.container.querySelector(".cesium-viewer-cesiumWidgetContainer");this.container=o||e.container}this.addInnerContainer(),this.bindEvent(),this._reset()}return c(t,[{key:"initDevicePixelRatio",value:function(){this.devicePixelRatio=window.devicePixelRatio||1}},{key:"addInnerContainer",value:function(){this.container.appendChild(this.canvas)}},{key:"bindEvent",value:function(){var t=this;this.innerMoveStart=this.moveStartEvent.bind(this),this.innerMoveEnd=this.moveEndEvent.bind(this),this.scene.camera.moveStart.addEventListener(this.innerMoveStart,this),this.scene.camera.moveEnd.addEventListener(this.innerMoveEnd,this);var e=new Cesium.ScreenSpaceEventHandler(this.scene.canvas);e.setInputAction((function(e){t.innerMoveEnd()}),Cesium.ScreenSpaceEventType.LEFT_UP),e.setInputAction((function(e){t.innerMoveEnd()}),Cesium.ScreenSpaceEventType.MIDDLE_UP),this.handler=e}},{key:"unbindEvent",value:function(){this.scene.camera.moveStart.removeEventListener(this.innerMoveStart,this),this.scene.camera.moveEnd.removeEventListener(this.innerMoveEnd,this),this.scene.postRender.removeEventListener(this._reset,this),this.handler&&(this.handler.destroy(),this.handler=null)}},{key:"moveStartEvent",value:function(){this.mapvBaseLayer&&(this.mapvBaseLayer.animatorMovestartEvent(),this.scene.postRender.addEventListener(this._reset,this))}},{key:"moveEndEvent",value:function(){this.mapvBaseLayer&&(this.scene.postRender.removeEventListener(this._reset,this),this.mapvBaseLayer.animatorMoveendEvent(),this._reset())}},{key:"zoomStartEvent",value:function(){this._unvisiable()}},{key:"zoomEndEvent",value:function(){this._unvisiable()}},{key:"addData",value:function(t,e){void 0!=this.mapvBaseLayer&&this.mapvBaseLayer.addData(t,e)}},{key:"updateData",value:function(t,e){void 0!=this.mapvBaseLayer&&this.mapvBaseLayer.updateData(t,e)}},{key:"getData",value:function(){return this.mapvBaseLayer&&(this.dataSet=this.mapvBaseLayer.getData()),this.dataSet}},{key:"removeData",value:function(t){void 0!=this.mapvBaseLayer&&this.mapvBaseLayer&&this.mapvBaseLayer.removeData(t)}},{key:"removeAllData",value:function(){void 0!=this.mapvBaseLayer&&this.mapvBaseLayer.clearData()}},{key:"_visiable",value:function(){return this.canvas.style.display="block",this}},{key:"_unvisiable",value:function(){return this.canvas.style.display="none",this}},{key:"_createCanvas",value:function(){var t=document.createElement("canvas");t.id=this.mapVOptions.layerid||"mapv"+Xe++,t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=this.mapVOptions.zIndex||0,t.width=parseInt(this.map.canvas.width),t.height=parseInt(this.map.canvas.height),t.style.width=this.map.canvas.style.width,t.style.height=this.map.canvas.style.height;var e=this.devicePixelRatio;return"2d"==this.mapVOptions.context&&t.getContext(this.mapVOptions.context).scale(e,e),t}},{key:"_reset",value:function(){this.resizeCanvas(),this.fixPosition(),this.onResize(),this.render()}},{key:"draw",value:function(){this._reset()}},{key:"show",value:function(){this._visiable()}},{key:"hide",value:function(){this._unvisiable()}},{key:"destroy",value:function(){this.remove()}},{key:"remove",value:function(){void 0!=this.mapvBaseLayer&&(this.removeAllData(),this.mapvBaseLayer.clear(this.mapvBaseLayer.getContext()),this.mapvBaseLayer=void 0,this.canvas.parentElement.removeChild(this.canvas))}},{key:"update",value:function(t){void 0!=t&&this.updateData(t.data,t.options)}},{key:"resizeCanvas",value:function(){if(void 0!=this.canvas&&null!=this.canvas){var t=this.canvas;t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.width=parseInt(this.map.canvas.width),t.height=parseInt(this.map.canvas.height),t.style.width=this.map.canvas.style.width,t.style.height=this.map.canvas.style.height}}},{key:"fixPosition",value:function(){}},{key:"onResize",value:function(){}},{key:"render",value:function(){void 0!=this.mapvBaseLayer&&this.mapvBaseLayer._canvasUpdate()}}]),t}());He=function(t,e,n,r){return new Je(t,e,n,r)}}var Ze=He,Ke={getDataSet:function(t){var e=[],n=t.features;if(n)for(var r=0;r<n.length;r++){var i=n[r],o=i.geometry,a=i.properties,s={};for(var l in a)s[l]=a[l];s.geometry=o,e.push(s)}return new g(e)}},Qe={CSVToArray:function(t,e){e=e||",";var n=new RegExp("(\\"+e+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+e+"\\r\\n]*))","gi"),r=[[]],i=null;while(i=n.exec(t)){var o,a=i[1];a.length&&a!==e&&r.push([]),o=i[2]?i[2].replace(new RegExp('""',"g"),'"'):i[3],r[r.length-1].push(o)}return r},getDataSet:function(t,e){for(var n=this.CSVToArray(t,e||","),r=[],i=n[0],o=1;o<n.length-1;o++){for(var a=n[o],s={},l=0;l<a.length;l++){var u=a[l];"geometry"==i[l]&&(u=JSON.parse(u)),s[i[l]]=u}r.push(s)}return new g(r)}};e.version=n,e.canvasClear=r,e.canvasResolutionScale=i,e.canvasDrawSimple=b,e.canvasDrawHeatmap=k,e.canvasDrawGrid=I,e.canvasDrawHoneycomb=R,e.webglDrawSimple=Mt,e.webglDrawPoint=W,e.webglDrawLine=G,e.webglDrawPolygon=Ct,e.utilCityCenter=l,e.utilCurve=Ot,e.utilForceEdgeBundling=kt,e.utilDataRangeIntensity=x,e.utilDataRangeCategory=It,e.utilDataRangeChoropleth=Pt,e.Map=Lt,e.baiduMapCanvasLayer=Nt,e.baiduMapAnimationLayer=Ae,e.baiduMapLayer=Ie,e.googleMapCanvasLayer=Pe,e.googleMapLayer=Ne,e.MaptalksLayer=je,e.AMapLayer=ze,e.OpenlayersLayer=Ge,e.leafletMapLayer=We,e.cesiumMapLayer=Ze,e.DataSet=g,e.geojson=Ke,e.csv=Qe,Object.defineProperty(e,"__esModule",{value:!0})}))}).call(this,n("4362"))},fe37:function(t,e,n){"use strict";function r(t){const{makeRequest:e,ConfigurationError:n,handleError:r,snakeCaseKeys:i}=t,o=["format","bytes","local","master_timeout","h","help","s","v","pretty","human","error_trace","source","filter_path"],a={masterTimeout:"master_timeout",errorTrace:"error_trace",filterPath:"filter_path"};return function(t,s,l){if(s=s||{},"function"===typeof s&&(l=s,s={}),"function"!==typeof t&&null!=t||(l=t,t={},s={}),null!=t.body){const t=new n("This API does not require a body");return r(t,l)}if(null!=s.headers&&"object"!==typeof s.headers){const t=new n("Headers should be an object, instead got: "+typeof s.headers);return r(t,l)}var u=[],{method:c,body:h,nodeId:d,node_id:f,...p}=t;p=i(o,a,p,u),null==c&&(c="GET");var g=s.ignore;"number"===typeof g&&(s.ignore=[g]);var m="";m=null!=(f||d)?"/_cat/allocation/"+encodeURIComponent(f||d):"/_cat/allocation";const y={method:c,path:m,body:null,querystring:p};return s.warnings=0===u.length?null:u,e(y,s,l)}}t.exports=r},fe51:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var r=n("dcfe");function i(t){void 0===t&&(t={});var e=t,n=function(){},r=function(){var t={};return function(e){var n=e.next;return!t[n]&&(t[n]=!0,!0)}}();return e.allowTraversal=t.allowTraversal||r,e.enter=t.enter||n,e.leave=t.leave||n,e}function o(t,e,n,i,a){void 0===a&&(a=!0),i.enter({current:e,previous:n});var s=t.edges,l=void 0===s?[]:s;(0,r.getNeighbors)(e,l,a?"target":void 0).forEach((function(r){i.allowTraversal({previous:n,current:e,next:r})&&o(t,r,e,i,a)})),i.leave({current:e,previous:n})}function a(t,e,n,r){void 0===r&&(r=!0),o(t,e,"",i(n),r)}},fec4:function(t,e,n){(function(e){var n=9007199254740991,r="[object Arguments]",i="[object Function]",o="[object GeneratorFunction]",a="[object Map]",s="[object Object]",l="[object Promise]",u="[object Set]",c="[object WeakMap]",h="[object DataView]",d=/[\\^$.*+?()[\]{}|]/g,f=/^\[object .+?Constructor\]$/,p=/^(?:0|[1-9]\d*)$/,g="object"==typeof e&&e&&e.Object===Object&&e,m="object"==typeof self&&self&&self.Object===Object&&self,y=g||m||Function("return this")();function v(t,e){var n=-1,r=t?t.length:0,i=Array(r);while(++n<r)i[n]=e(t[n],n,t);return i}function b(t,e){var n=-1,r=Array(t);while(++n<t)r[n]=e(n);return r}function _(t,e){return v(e,(function(e){return[e,t[e]]}))}function x(t,e){return null==t?void 0:t[e]}function w(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(n){}return e}function S(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function E(t,e){return function(n){return t(e(n))}}function C(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}var M=Function.prototype,T=Object.prototype,A=y["__core-js_shared__"],O=function(){var t=/[^.]+$/.exec(A&&A.keys&&A.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),k=M.toString,I=T.hasOwnProperty,P=T.toString,L=RegExp("^"+k.call(I).replace(d,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),N=T.propertyIsEnumerable,R=E(Object.keys,Object),D=K(y,"DataView"),F=K(y,"Map"),j=K(y,"Promise"),B=K(y,"Set"),z=K(y,"WeakMap"),U=nt(D),G=nt(F),q=nt(j),V=nt(B),H=nt(z);function W(t,e){var n=it(t)||rt(t)?b(t.length,String):[],r=n.length,i=!!r;for(var o in t)!e&&!I.call(t,o)||i&&("length"==o||$(o,r))||n.push(o);return n}function Y(t){return P.call(t)}function X(t){if(!ut(t)||tt(t))return!1;var e=st(t)||w(t)?L:f;return e.test(nt(t))}function J(t){if(!et(t))return R(t);var e=[];for(var n in Object(t))I.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Z(t){return function(e){var n=Q(e);return n==a?S(e):n==u?C(e):_(e,t(e))}}function K(t,e){var n=x(t,e);return X(n)?n:void 0}var Q=Y;function $(t,e){return e=null==e?n:e,!!e&&("number"==typeof t||p.test(t))&&t>-1&&t%1==0&&t<e}function tt(t){return!!O&&O in t}function et(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||T;return t===n}function nt(t){if(null!=t){try{return k.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function rt(t){return at(t)&&I.call(t,"callee")&&(!N.call(t,"callee")||P.call(t)==r)}(D&&Q(new D(new ArrayBuffer(1)))!=h||F&&Q(new F)!=a||j&&Q(j.resolve())!=l||B&&Q(new B)!=u||z&&Q(new z)!=c)&&(Q=function(t){var e=P.call(t),n=e==s?t.constructor:void 0,r=n?nt(n):void 0;if(r)switch(r){case U:return h;case G:return a;case q:return l;case V:return u;case H:return c}return e});var it=Array.isArray;function ot(t){return null!=t&&lt(t.length)&&!st(t)}function at(t){return ct(t)&&ot(t)}function st(t){var e=ut(t)?P.call(t):"";return e==i||e==o}function lt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}function ut(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function ct(t){return!!t&&"object"==typeof t}function ht(t){return ot(t)?W(t):J(t)}var dt=Z(ht);t.exports=dt}).call(this,n("c8ba"))}}]);