(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10008ada"],{"1e95":function(e,t,o){},2546:function(e,t,o){"use strict";o("9b7e")},"9b7e":function(e,t,o){},b3bd:function(e,t,o){"use strict";o("1e95")},dd7b:function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login"},[o("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules}},[o("h3",{staticClass:"title"},[e._v(e._s(e.title))]),o("el-form-item",{attrs:{prop:"username"}},[o("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"账号"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}},[o("svg-icon",{staticClass:"el-input__icon input-icon",attrs:{slot:"prefix","icon-class":"user"},slot:"prefix"})],1)],1),o("el-form-item",{attrs:{prop:"password"}},[o("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}},[o("svg-icon",{staticClass:"el-input__icon input-icon",attrs:{slot:"prefix","icon-class":"password"},slot:"prefix"})],1)],1),o("el-form-item",{staticStyle:{"margin-left":"-1%"}},[o("el-form",{ref:"codeForm",staticClass:"login-form",staticStyle:{width:"100%","margin-left":"-6%","margin-top":"-6%"},attrs:{model:e.codeForm,rules:e.codeRules}},[o("el-form-item",{attrs:{prop:"code"}},[o("el-input",{staticStyle:{width:"67%"},attrs:{"auto-complete":"off",placeholder:"验证码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.codeForm.code,callback:function(t){e.$set(e.codeForm,"code",t)},expression:"codeForm.code"}},[o("svg-icon",{staticClass:"el-input__icon input-icon",attrs:{slot:"prefix","icon-class":"validCode"},slot:"prefix"})],1),o("div",{staticClass:"login-code",staticStyle:{"padding-left":"10%"}},[o("el-button",{attrs:{round:""},nativeOn:{click:function(t){return t.preventDefault(),e.getSmsCode(t)}}},[e._v(e._s(e.computeTime>0?"("+e.computeTime+"s)已发送":"获取验证码"))])],1)],1)],1)],1),o("el-form-item",{staticStyle:{width:"100%"}},[o("el-button",{staticStyle:{width:"100%"},attrs:{loading:e.loading,size:"medium",type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin(t)}}},[e.loading?o("span",[e._v("登 录 中...")]):o("span",[e._v("登 录")])]),e.register?o("div",{staticStyle:{float:"right"}},[o("router-link",{staticClass:"link-type",attrs:{to:"/register"}},[e._v("立即注册")])],1):e._e()],1)],1),o("div",{staticClass:"el-login-footer"})],1)},n=[],s=(o("14d9"),o("7ded")),r=o("852e"),a=o.n(r),l=o("21f2"),c=(o("8060"),{name:"Login",data:function(){return{codeUrl:"",computeTime:0,isSmsLogin:!1,title:"",loginForm:{username:"",password:"",rememberMe:!1,code:"",uuid:"",title:""},codeForm:{code:""},codeRules:{},loginRules:{username:[{required:!0,trigger:"blur",message:"请输入您的账号"}],password:[{required:!0,trigger:"blur",message:"请输入您的密码"}]},loading:!1,captchaEnabled:!0,register:!1,redirect:void 0,type:null}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},created:function(){},mounted:function(){this.type=this.$route.query.type,this.getCookie(),this.type&&(a.a.set("loginType",this.type),this.handleLogin()),this.title=a.a.get("title")},methods:{loginMethod:function(){this.isSmsLogin=!this.isSmsLogin},getSmsCode:function(){var e=this;this.computeTime||this.$refs.loginForm.validate((function(t){t&&Object(s["g"])({username:e.loginForm.username,password:e.loginForm.password}).then((function(t){200===t.code&&(e.$message({message:"验证码已发送",type:"success"}),e.computeTime=60,e.timer=setInterval((function(){e.computeTime--,e.computeTime<=0&&clearInterval(e.timer)}),1e3))}))}))},getCookie:function(){var e=a.a.get("username"),t=a.a.get("password");this.loginForm={username:void 0===e?this.loginForm.username:e,password:void 0===t?this.loginForm.password:Object(l["a"])(t)}},handleLogin:function(){var e=this;this.$refs.loginForm.validate((function(t){console.info(t),t&&e.$refs.codeForm.validate((function(t){console.info(t),t&&(e.loading=!0,e.loginForm.rememberMe?(a.a.set("username",e.loginForm.username,{expires:30}),a.a.set("password",Object(l["b"])(e.loginForm.password),{expires:30}),a.a.set("rememberMe",e.loginForm.rememberMe,{expires:30})):(a.a.remove("username"),a.a.remove("password"),a.a.remove("rememberMe")),e.loginForm.code=e.codeForm.code,e.$store.dispatch("Login",e.loginForm).then((function(t){console.info(e.redirec),e.$router.push({path:e.redirect||"/"}).catch((function(e){console.info("===================",e)}))})).catch((function(t){console.info("===================",t),e.loading=!1,e.captchaEnabled})))}))}))}}}),m=c,u=(o("b3bd"),o("2546"),o("2877")),d=Object(u["a"])(m,i,n,!1,null,"0ee16a66",null);t["default"]=d.exports}}]);