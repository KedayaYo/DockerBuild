import{_ as G}from"./index.9fa6ecce.js";/* empty css              */import{d as P,f as m,aJ as e,bb as a,ba as h,bX as M,aN as D,bU as C,bT as t,b6 as o,b5 as v,bO as r,aX as n,bN as U,aZ as y,be as X,bo as J,aS as b,t as Z,aG as z,C as K,D as Q,aI as Y}from"./arco.35cd4a57.js";import{s as L}from"./site.20be6969.js";import{g as _}from"./vue.1515c820.js";import{t as ee}from"./terrace.management.1f90c17c.js";/* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css              *//* empty css                *//* empty css               *//* empty css               */import{f as c,b as le,c as ue,F as te,d as ae,M as se,N as de,U as ie,H as oe,e as ne}from"./index.571baf06.js";import"./chart.c690dcf1.js";function O(s){return typeof s=="function"||Object.prototype.toString.call(s)==="[object Object]"&&!J(s)}const me=P({name:"SiteForm",props:{id:{type:String}},emits:["submit"],setup(s,{emit:H}){const E=m(),A=m([]),F=_(),g=m(c(le)),p=m(c(ue));m(c(te));const B=m(c(ae)),q=m(c(se)),R=m(c(de)),N=m(c(ie)),T=m(c(oe)),u=m({siteID:"",siteName:"",siteAddress:"",siteMode:1,siteLocation:[],siteOptionLocation:[],siteSafeLocation:[],siteAltitude:0,siteRHAltitude:0,videoPullAddr:"",videoPushAddr:"",siteFLVURL:"",siteRHHeading:0,siteRHHoverAltitude:0,siteOptionAltitude:0,siteOptionHoverAltitude:0,siteOptionHeading:0,siteSFMode:1,APPIDs:[],flightWay:1}),S=d=>{try{return typeof d!="string"?d:d.split(",").map(Number)}catch{return[]}},$=()=>F.go(-1),k=()=>{E.value.validate(d=>{if(d)b.error("\u8BF7\u5B8C\u5584\u7AD9\u70B9\u4FE1\u606F");else{const i={...u.value,siteLocation:S(u.value.siteLocation),siteOptionLocation:S(u.value.siteOptionLocation),siteSafeLocation:S(u.value.siteSafeLocation)};console.log(i),H("submit",{siteInformation:i,isNew:Boolean(!s.id)})}})},W=async()=>{const d=await ee.getAll();d.code===0&&(A.value=d.data)},j=async d=>{const i=`\u8BF7\u6C42${d}\u7AD9\u70B9\u6570\u636E\u5931\u8D25`;try{const f=await L.getOne(d);f.code===0?u.value=f.data:(F.go(-1),b.error(i))}catch{F.go(-1),b.error(i)}};W(),s.id&&j(s.id);const w=(d,i)=>{const f=d;if(Array.isArray(f))i();else if(!f)i("\u8BF7\u8F93\u5165\u7ECF\u7EAC\u5EA6\u5750\u6807");else try{const[x,V]=f.split(",");if(x===""||V==="")i("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u7ECF\u7EAC\u5EA6\u5750\u6807");else{const l=x>=-180&&x<=180,I=V>=-90&&V<=90;!l||!I?i("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u7ECF\u7EAC\u5EA6\u5750\u6807"):i()}}catch(x){console.log(x),i("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u7ECF\u7EAC\u5EA6\u5750\u6807")}};return()=>{let d,i,f,x,V;return e(X,null,{default:()=>[e(a,{class:"min-w-[1200px]",model:u,ref:E,labelColProps:{span:6},wrapperColProps:{span:18}},{default:()=>[e(h,{direction:"vertical",fill:!0},{default:()=>[e(M.Title,{heading:6},{default:()=>[D("\u7AD9\u70B9\u4FE1\u606F")]}),e(C,null,{default:()=>[e(t,{span:8,xs:24,sm:12,md:8,lg:8,xl:8,xxl:8},{default:()=>[e(o,{label:"\u7AD9\u70B9\u7F16\u53F7"},{default:()=>[e(v,{modelValue:u.value.siteID,"onUpdate:modelValue":l=>u.value.siteID=l},null)]})]}),e(t,{span:8,xs:24,sm:12,md:8,lg:8,xl:8,xxl:8},{default:()=>[e(o,{label:"\u7AD9\u70B9\u540D\u79F0",field:"siteName",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0"},{type:"string",match:/^(?:[\w\u4e00-\u9fa5·]{2,20})$/,max:200,message:"\u4EC5\u652F\u630120\u4F4D\u6587\u5B57\u3001\u6570\u5B57\u3001\u5B57\u6BCD\u3001_"}]},{default:()=>[e(v,{modelValue:u.value.siteName,"onUpdate:modelValue":l=>u.value.siteName=l},null)]})]}),e(t,{span:8,xs:24,sm:12,md:8,lg:8,xl:8,xxl:8},{default:()=>[e(o,{label:"\u7AD9\u70B9\u5730\u5740",field:"siteAddress",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0"},{type:"string",match:/^(?:[\w\u4e00-\u9fa5·]{2,30})$/,max:200,message:"\u4EC5\u652F\u63012-30\u4F4D\u6587\u5B57\u3001\u6570\u5B57\u3001\u5B57\u6BCD\u3001_"}]},{default:()=>[e(v,{modelValue:u.value.siteAddress,"onUpdate:modelValue":l=>u.value.siteAddress=l},null)]})]}),e(t,{span:8,xs:24,sm:12,md:8,lg:8,xl:8,xxl:8},{default:()=>[e(o,{label:"\u7AD9\u70B9\u7C7B\u578B",field:"siteMode",rules:[{required:!0,message:"\u7AD9\u70B9\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A"}]},{default:()=>[e(r,{options:g.value,fieldNames:{label:"title",value:"value"},modelValue:u.value.siteMode,"onUpdate:modelValue":l=>u.value.siteMode=l},null)]})]}),e(t,{span:8,xs:24,sm:12,md:8,lg:8,xl:8,xxl:8},{default:()=>[e(o,{label:"\u98DE\u884C\u6A21\u5F0F",field:"siteSFMode",rules:[{required:!0,message:"\u98DE\u884C\u6A21\u5F0F\u4E0D\u80FD\u4E3A\u7A7A"}]},{default:()=>[e(r,{modelValue:u.value.siteSFMode,"onUpdate:modelValue":l=>u.value.siteSFMode=l,options:p.value,fieldNames:{label:"title",value:"value"}},null)]})]}),e(t,{span:8,xs:24,sm:12,md:8,lg:8,xl:8,xxl:8},{default:()=>[e(a.Item,{label:"\u98DE\u884C\u65B9\u5F0F",field:"flightWay",rules:[{required:!0,message:"\u98DE\u884C\u65B9\u5F0F\u4E0D\u80FD\u4E3A\u7A7A"}]},{default:()=>[e(r,{modelValue:u.value.flightWay,"onUpdate:modelValue":l=>u.value.flightWay=l,options:[{label:"\u666E\u901A\u822A\u70B9",value:1},{label:"\u7CBE\u7EC6\u5316\u98DE\u884C",value:2}]},null)]})]}),e(t,{span:8,xs:24,sm:12,md:8,lg:8,xl:8,xxl:8},{default:()=>[e(a.Item,{label:"\u591A\u673A\u6A21\u5F0F",field:"isMultipleUAV",rules:[{required:!0,message:"\u591A\u673A\u6A21\u5F0F\u4E0D\u80FD\u4E3A\u7A7A"}]},{default:()=>[e(r,{modelValue:u.value.isMultipleUAV,"onUpdate:modelValue":l=>u.value.isMultipleUAV=l,options:[{label:"\u5173\u95ED",value:0},{label:"\u5F00\u542F",value:1}]},null)]})]}),e(t,{span:8,xs:24,sm:12,md:8,lg:8,xl:8,xxl:8},{default:()=>[e(a.Item,{label:"\u7AD9\u70B9\u5750\u6807",field:"siteLocation",rules:[{required:!0},{validator:w}]},{default:()=>[e(v,{modelValue:u.value.siteLocation,"onUpdate:modelValue":l=>u.value.siteLocation=l},null)]})]}),e(t,{span:8,xs:24,sm:12,md:8,lg:8,xl:8,xxl:8},{default:()=>[e(a.Item,{label:"\u5B89\u5168\u5750\u6807",field:"siteSafeLocation",rules:[{required:!0},{validator:w}]},{default:()=>[e(v,{modelValue:u.value.siteSafeLocation,"onUpdate:modelValue":l=>u.value.siteSafeLocation=l},null)]})]}),e(t,{span:8,xs:24,sm:12,md:8,lg:8,xl:8,xxl:8},{default:()=>[e(a.Item,{label:"\u5165\u822A\u9AD8\u5EA6",field:"UAVSTAltitude",rules:[{required:!0,message:"\u5165\u822A\u9AD8\u5EA6\u4E0D\u80FD\u4E3A\u7A7A"}]},{default:()=>[e(n,{class:"w-full",modelValue:u.value.UAVSTAltitude,"onUpdate:modelValue":l=>u.value.UAVSTAltitude=l},null)]})]}),e(t,{span:8,xs:24,sm:12,md:8,lg:8,xl:8,xxl:8},{default:()=>[e(a.Item,{label:"\u76F8\u5BF9\u9AD8\u5EA6",field:"siteAltitude",rules:[{required:!0,message:"\u76F8\u5BF9\u9AD8\u5EA6\u4E0D\u80FD\u4E3A\u7A7A"}]},{default:()=>[e(n,{modelValue:u.value.siteAltitude,"onUpdate:modelValue":l=>u.value.siteAltitude=l,class:"w-full"},null)]})]}),e(t,{span:8,xs:24,sm:12,md:8,lg:8,xl:8,xxl:8},{default:()=>[e(a.Item,{label:"\u6D77\u62D4\u9AD8\u5EA6",field:"siteHAltitude",rules:[{required:!0,message:"\u6D77\u62D4\u9AD8\u5EA6\u4E0D\u80FD\u4E3A\u7A7A"}]},{default:()=>[e(n,{class:"w-full",modelValue:u.value.siteHAltitude,"onUpdate:modelValue":l=>u.value.siteHAltitude=l},null)]})]}),e(t,{span:8,xs:24,sm:12,md:8,lg:8,xl:8,xxl:8},{default:()=>[e(a.Item,{label:"\u692D\u7403\u9AD8\u5EA6",field:"siteEllipsAltitude",rules:[{required:!0,message:"\u692D\u7403\u9AD8\u5EA6\u4E0D\u80FD\u4E3A\u7A7A"}]},{default:()=>[e(n,{modelValue:u.value.siteEllipsAltitude,"onUpdate:modelValue":l=>u.value.siteEllipsAltitude=l,class:"w-full"},null)]})]}),e(t,{span:8,xs:24,sm:12,md:8,lg:8,xl:8,xxl:8},{default:()=>[e(a.Item,{label:"\u8FD4\u822A\u9AD8\u5EA6",field:"siteRHAltitude",rules:[{required:!0,message:"\u8FD4\u822A\u9AD8\u5EA6\u4E0D\u80FD\u4E3A\u7A7A"}]},{default:()=>[e(n,{modelValue:u.value.siteRHAltitude,"onUpdate:modelValue":l=>u.value.siteRHAltitude=l,class:"w-full"},null)]})]}),e(t,{span:8,xs:24,sm:12,md:8,lg:8,xl:8,xxl:8},{default:()=>[e(a.Item,{label:"\u60AC\u505C\u9AD8\u5EA6",field:"siteRHHoverAltitude",rules:[{required:!0,message:"\u60AC\u505C\u9AD8\u5EA6\u4E0D\u80FD\u4E3A\u7A7A"}]},{default:()=>[e(n,{modelValue:u.value.siteRHHoverAltitude,"onUpdate:modelValue":l=>u.value.siteRHHoverAltitude=l,class:"w-full"},null)]})]}),e(t,{span:8,xs:24,sm:12,md:8,lg:8,xl:8,xxl:8},{default:()=>[e(a.Item,{label:"\u964D\u843D\u671D\u5411",field:"siteRHHeading",rules:[{required:!0,message:"\u65E0\u4EBA\u673A\u8FD4\u822A\u964D\u843D\u671D\u5411\u4E0D\u80FD\u4E3A\u7A7A"}]},{default:()=>[e(n,{modelValue:u.value.siteRHHeading,"onUpdate:modelValue":l=>u.value.siteRHHeading=l,class:"w-full",min:-180,max:180},null)]})]})]}),e(M.Title,{heading:6},{default:()=>[D("\u5907\u964D\u4FE1\u606F")]}),e(C,null,{default:()=>[e(t,{span:8,xs:24,sm:12,md:8,lg:8,xl:8,xxl:8},{default:()=>[e(a.Item,{label:"\u70B9\u4F4D\u7C7B\u578B",field:"siteOptionMode",rules:[{required:!0}]},{default:()=>[e(r,{modelValue:u.value.siteOptionMode,"onUpdate:modelValue":l=>u.value.siteOptionMode=l,options:c(ne),fieldNames:{label:"title",value:"value"}},null)]})]}),e(t,{span:8,xs:24,sm:12,md:8,lg:8,xl:8,xxl:8},{default:()=>[e(a.Item,{label:"\u4F4D\u7F6E\u5750\u6807",field:"siteOptionLocation",rules:[{required:!0},{validator:w}]},{default:()=>[e(v,{modelValue:u.value.siteOptionLocation,"onUpdate:modelValue":l=>u.value.siteOptionLocation=l},null)]})]}),e(t,{span:8,xs:24,sm:12,md:8,lg:8,xl:8,xxl:8},{default:()=>[e(a.Item,{label:"\u5907\u964D\u671D\u5411",field:"siteOptionHeading",rules:[{required:!0,message:"\u65E0\u4EBA\u673A\u5907\u964D\u673A\u5934\u671D\u5411\u4E0D\u80FD\u4E3A\u7A7A"}]},{default:()=>[e(n,{modelValue:u.value.siteOptionHeading,"onUpdate:modelValue":l=>u.value.siteOptionHeading=l,class:"w-full",min:-180,max:180},null)]})]}),e(t,{span:8,xs:24,sm:12,md:8,lg:8,xl:8,xxl:8},{default:()=>[e(a.Item,{label:"\u76F8\u5BF9\u9AD8\u5EA6",field:"siteOptionAltitude",rules:[{required:!0,message:"\u5907\u964D\u76F8\u5BF9\u9AD8\u5EA6\u4E0D\u80FD\u4E3A\u7A7A"}]},{default:()=>[e(n,{modelValue:u.value.siteOptionAltitude,"onUpdate:modelValue":l=>u.value.siteOptionAltitude=l,class:"w-full"},null)]})]}),e(t,{span:8,xs:24,sm:12,md:8,lg:8,xl:8,xxl:8},{default:()=>[e(a.Item,{label:"\u6D77\u62D4\u9AD8\u5EA6",field:"siteOptionHAltitude",rules:[{required:!0,message:"\u5907\u964D\u76F8\u5BF9\u9AD8\u5EA6\u4E0D\u80FD\u4E3A\u7A7A"}]},{default:()=>[e(n,{modelValue:u.value.siteOptionHAltitude,"onUpdate:modelValue":l=>u.value.siteOptionHAltitude=l,class:"w-full"},null)]})]}),e(t,{span:8,xs:24,sm:12,md:8,lg:8,xl:8,xxl:8},{default:()=>[e(a.Item,{label:"\u692D\u7403\u9AD8\u5EA6",field:"siteOptionEllipsAltitude",rules:[{required:!0,message:"\u5907\u964D\u76F8\u5BF9\u9AD8\u5EA6\u4E0D\u80FD\u4E3A\u7A7A"}]},{default:()=>[e(n,{modelValue:u.value.siteOptionEllipsAltitude,"onUpdate:modelValue":l=>u.value.siteOptionEllipsAltitude=l,class:"w-full"},null)]})]}),e(t,{span:8,xs:24,sm:12,md:8,lg:8,xl:8,xxl:8},{default:()=>[e(a.Item,{label:"\u8FD4\u822A\u9AD8\u5EA6",field:"siteOptionRHAltitude",rules:[{required:!0,message:"\u5907\u964D\u9AD8\u5EA6\u4E0D\u80FD\u4E3A\u7A7A"}]},{default:()=>[e(n,{modelValue:u.value.siteOptionRHAltitude,"onUpdate:modelValue":l=>u.value.siteOptionRHAltitude=l,class:"w-full"},null)]})]}),e(t,{span:8,xs:24,sm:12,md:8,lg:8,xl:8,xxl:8},{default:()=>[e(a.Item,{label:"\u60AC\u505C\u9AD8\u5EA6",field:"siteOptionHoverAltitude",rules:[{required:!0,message:"\u5907\u964D\u60AC\u505C\u9AD8\u5EA6\u4E0D\u80FD\u4E3A\u7A7A"}]},{default:()=>[e(n,{modelValue:u.value.siteOptionHoverAltitude,"onUpdate:modelValue":l=>u.value.siteOptionHoverAltitude=l,class:"w-full"},null)]})]})]}),e(M.Title,{heading:6},{default:()=>[D("\u914D\u7F6E\u4FE1\u606F")]}),e(C,null,{default:()=>[e(t,{span:8,xs:24,sm:12,md:8,lg:8,xl:8,xxl:8},{default:()=>[e(o,{label:"\u6240\u5C5E\u5E73\u53F0"},{default:()=>[e(r,{modelValue:u.value.APPIDs,"onUpdate:modelValue":l=>u.value.APPIDs=l,multiple:!0,"max-tag-count":2},{default:()=>{var l;return[(l=A==null?void 0:A.value)==null?void 0:l.map(I=>e(U,{value:I.id,label:I.PLATName,disabled:!0},null))]}})]})]}),e(t,{span:8,xs:24,sm:12,md:8,lg:8,xl:8,xxl:8},{default:()=>[e(o,{label:"\u4E0A\u4F20\u7C7B\u578B"},{default:()=>[e(r,{modelValue:u.value.mediaUploadType,"onUpdate:modelValue":l=>u.value.mediaUploadType=l},O(d=q.value.map(l=>e(U,{value:l.value,label:l.title},null)))?d:{default:()=>[d]})]})]}),e(t,{span:8,xs:24,sm:12,md:8,lg:8,xl:8,xxl:8},{default:()=>[e(o,{label:"\u63A7\u5236\u6A21\u5F0F"},{default:()=>[e(r,{modelValue:u.value.actionControlMode,"onUpdate:modelValue":l=>u.value.actionControlMode=l},O(i=B.value.map(l=>e(U,{value:l.value,label:l.title},null)))?i:{default:()=>[i]})]})]}),e(t,{span:8,xs:24,sm:12,md:8,lg:8,xl:8,xxl:8},{default:()=>[e(o,{label:"\u7F51\u7EDC\u6A21\u5F0F"},{default:()=>[e(r,{modelValue:u.value.networkMode,"onUpdate:modelValue":l=>u.value.networkMode=l},O(f=R.value.map(l=>e(U,{value:l.value,label:l.title},null)))?f:{default:()=>[f]})]})]}),e(t,{span:8,xs:24,sm:12,md:8,lg:8,xl:8,xxl:8},{default:()=>[e(o,{label:"MOP\u94FE\u8DEF"},{default:()=>[e(r,{modelValue:u.value.isUseMOPMode,"onUpdate:modelValue":l=>u.value.isUseMOPMode=l,options:[{value:0,label:"\u4E0D\u4F7F\u7528"},{value:1,label:"\u4F7F\u7528"}]},null)]})]}),e(t,{span:8,xs:24,sm:12,md:8,lg:8,xl:8,xxl:8},{default:()=>[e(o,{label:"\u65E0\u4EBA\u673A\u7EC8\u7AEF\u7A0B\u5E8F\u7248\u672C"},{default:()=>[e(r,{modelValue:u.value.UAVCPV,"onUpdate:modelValue":l=>u.value.UAVCPV=l},O(x=N.value.map(l=>e(U,{value:l.value,label:l.title},null)))?x:{default:()=>[x]})]})]}),e(t,{span:8,xs:24,sm:12,md:8,lg:8,xl:8,xxl:8},{default:()=>[e(o,{label:"\u673A\u5E93\u7EC8\u7AEF\u7A0B\u5E8F\u7248\u672C"},{default:()=>[e(r,{modelValue:u.value.HIVECPV,"onUpdate:modelValue":l=>u.value.HIVECPV=l},O(V=T.value.map(l=>e(U,{value:l.value,label:l.title},null)))?V:{default:()=>[V]})]})]})]}),e(M.Title,{heading:6},{default:()=>[D("\u89C6\u9891\u914D\u7F6E")]}),e(C,null,{default:()=>[e(t,{span:8,xs:24,sm:12,md:8,lg:8,xl:8,xxl:8},{default:()=>[e(o,{label:"\u62C9\u6D41\u5730\u5740"},{default:()=>[e(v,{modelValue:u.value.videoPullAddr,"onUpdate:modelValue":l=>u.value.videoPullAddr=l},null)]})]}),e(t,{span:8,xs:24,sm:12,md:8,lg:8,xl:8,xxl:8},{default:()=>[e(o,{label:"\u63A8\u6D41\u5730\u5740"},{default:()=>[e(v,{modelValue:u.value.videoPushAddr,"onUpdate:modelValue":l=>u.value.videoPushAddr=l},null)]})]}),e(t,{span:8,xs:24,sm:12,md:8,lg:8,xl:8,xxl:8},{default:()=>[e(o,{label:"FLV\u6D41\u5730\u5740"},{default:()=>[e(v,{modelValue:u.value.siteFLVURL,"onUpdate:modelValue":l=>u.value.siteFLVURL=l},null)]})]}),e(t,{span:8,xs:24,sm:12,md:8,lg:8,xl:8,xxl:8},{default:()=>[e(o,null,{default:()=>[e(h,null,{default:()=>[e(y,{type:"primary",onClick:k},{default:()=>[D("\u4FDD \u5B58")]}),e(y,{onClick:$},{default:()=>[D("\u53D6 \u6D88")]})]})]})]})]})]})]})]})}}}),re=P({name:"SiteCreateEdit",components:{SiteForm:me},props:{id:{type:String,default:""}},setup(s){const H=m(s!=null&&s.id?"\u66F4\u65B0\u7AD9\u70B9":"\u65B0\u5EFA\u7AD9\u70B9"),E=m((s==null?void 0:s.id)||""),A=_(),F=g=>{console.log(g.siteInformation),g.isNew?L.create(g.siteInformation).then(p=>{p.code===0?(b.success("\u8BF7\u6C42\u6210\u529F"),A.go(-1)):b.error(p.reason)}):L.update(g.siteInformation).then(p=>{p.code===0?(b.success("\u8BF7\u6C42\u6210\u529F"),A.go(-1)):b.error(p.reason)})};return{title:H,siteID:E,...Z(s),submit:F}}}),fe={class:"site-create-edit-page-wrap container w-full h-full"};function pe(s,H,E,A,F,g){const p=z("SiteForm"),B=C;return K(),Q("div",fe,[e(B,{style:{width:"100%"}},{default:Y(()=>[e(p,{id:s.siteID,onSubmit:s.submit},null,8,["id","onSubmit"])]),_:1})])}const we=G(re,[["render",pe]]);export{we as default};
