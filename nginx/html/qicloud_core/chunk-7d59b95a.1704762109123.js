(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7d59b95a"],{"0ddc":function(e,t,n){var a={"./1.png":"415f","./2.png":"8467","./3.png":"788c","./4.png":"54fc"};function o(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=r,e.exports=o,o.id="0ddc"},"160b":function(e,t,n){"use strict";const a=[{value:1,label:"入库"},{value:2,label:"在役"},{value:3,label:"故障"},{value:4,label:"报废"}];t["a"]=a},"30e6":function(e,t,n){},3272:function(e,t,n){"use strict";t["a"]={DJI_M210V2:{value:"经纬 M210 V2",label:"经纬 M210 V2"},DJI_M300RTK:{value:"经纬 M300 RTK",label:"经纬 M300 RTK"},DJI_M30:{value:"经纬 M30",label:" 经纬 M30"},DJI_Mavic2_hangye:{value:"御 Mavic 2 行业版",label:" 御 Mavic 2 行业版"},DJI_Mavic2_bianjiao:{value:"御Mavic 2变焦版",label:"御Mavic 2变焦版"},DJI_Phantom4Pro:{value:"精灵 Phantom 4 Pro",label:"精灵 Phantom 4 Pro"},DJI_Mavic2_hangyejinjie:{value:"御 2 行业进阶版",label:"御 2 行业进阶版"},DJI_AIR_2S:{value:"DJI AIR 2S",label:"DJI AIR 2S"},DH_X820:{value:"大华 X820",label:"大华 X820"},DH_X1550:{value:"大华 X1550",label:"大华 X1550"},DJI_MAVICE3_E:{value:"DJI_MAVICE3_E",label:"Mavic 3E"},DJI_MAVICE3_T:{value:"DJI_MAVICE3_T",label:"Mavic 3T"}}},"415f":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAAXNSR0IArs4c6QAAAydJREFUSEutll1IVFEQx3+zholpZWVRpBCFRoUWbvRl5EMUFX1AWFQ+RPVaBGlQL/nUx65Fj0IJIVqkBFFBRAWRfYtQvWS2mmlBYSLqBqntnbh73Vz1Xu+uduC+nJn//z8z98w5I7gtVeEi64FtCOtQFqGkhWFCF0IAgxcI9zhBHSI6FqU4GkvVQyoHUU4Bi9ziGrQHEM7RyzVKxbDD2Av6dQHCTWBljEIj3epR9lIin0caRgv6tQCoRZg1TjELpvxE2E2xPI3mGS7o000IdxESJyQWASv9CDsolgeRrSHBy5rNAPUIqf9FbIgkyCS8HJeP1jkDCms0obaNlxP4Z24x1hdmsqZ2j4SsDC/qIZQKN5Rp96bCHwPe/orFO8pHOUKJVAhWnzXFcvT3Z8D5zfCsFYoege25d44jwAmyBJ9uwMMTt3j3Z0J1oeVV/RaKHrshbOwGBUKZXgBOjgWPFmv4Cl6zQ8e3fIJf6xDynfDRYq/bYXXN+JQGe7POzPA7MMeO5kAmVA2W8U07bL0FnSFI80B6IjT9hqkeSJsEwZBly0qy9h3WDzPDPrtGXz0NXh6xYIaCKTgjGb73gkcgYzp86QIRmJkMvX1gGND9G44+hECfjaTS7yh4fSPsyx0OMoVVIcEztG/umQGEDGt/IAQ55dBol2VY0KGkS5OhZjcsmW2R33gHHzqsL30KJCZY/Rjsg5TJMC0JWrsg2A93foxdUsdDsywZKnfCinnQ2AGXnsOV5okeGr/6EEqcaPJSoXwreOdDWzecewLXW6Anzq4f5PfF1Phmeat2wvJ58K0HzjyGipZxZBpu/BivtpwpVnlz58KnTsi6FrdggCDZ1uXt18MIV90ozIv72EqofA+Pfrp5j7D/u7wjz9MXXiF43WgSBfrHHJNsGRoKM1k19DyZPmW6GKgHUtxE47QHw+9ssTSauOEjRpluQbn9n0eMXRTL/UiQo4coUxTMK3qimZqZ7YkWG51hJAyrvFVAXpzli7g3AEWRMkZzuA/CBqcRFsYkrDTj4Wz8g3A0uzmBp5CPsh1hLbBw2KgPzWh41L9LkGdOE3eE8i/alBPoBY2WZwAAAABJRU5ErkJggg=="},"4f2f":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"uav-list-wrap has-padding"},[t("el-card",[t("el-title",{attrs:{slot:"header"},slot:"header"},[e._v(" 无人机 ")]),t("el-form",{attrs:{inline:!0,size:"small"},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{prop:"UAVID"}},[t("el-input",{attrs:{clearable:"",placeholder:"请输入无人机编号"},model:{value:e.query.UAVID,callback:function(t){e.$set(e.query,"UAVID",t)},expression:"query.UAVID"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleQuery}},[e._v(" 查询 ")])],1),t("el-form-item",{staticClass:"float-right"},[t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"uav/uav/add",expression:"'uav/uav/add'"}],attrs:{icon:"el-icon-circle-plus-outline",type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v(" 新建 ")])],1)],1),t("el-table",{attrs:{data:e.droneList,"header-cell-style":e.headStyle,"row-class-name":e.tableRowClassName,"cell-style":e.rowStyle,height:"100px"}},[t("template",{slot:"empty"},[t("NoResult",{attrs:{"has-margin":!1}})],1),t("el-table-column",{attrs:{type:"index",label:"序号",width:"60"}}),t("el-table-column",{attrs:{label:"编号",prop:"UAVID"}}),t("el-table-column",{attrs:{label:"名称",prop:"UAVName"}}),t("el-table-column",{attrs:{label:"生产商",prop:"brand"}}),t("el-table-column",{attrs:{label:"序列号",prop:"FCSN"}}),t("el-table-column",{attrs:{label:"机身号",prop:"SN"}}),t("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function({row:n}){return[t("div",{staticClass:"device-status"},[t("img",{staticStyle:{width:"14px",height:"14px","margin-right":"8px"},attrs:{src:e.importDeviceIMG(n.status),alt:""}}),t("strong",{staticStyle:{"font-size":"14px"}},[e._v(e._s(e._f("formatDeviceStatus")(n.status)))])])]}}])}),t("el-table-column",{attrs:{label:"离线时间",prop:"lastOnlineTime"}}),t("el-table-column",{attrs:{label:"创建时间",prop:"createTime"}}),t("el-table-column",{attrs:{label:"更新时间",prop:"updateTime"}}),t("el-table-column",{attrs:{label:"操 作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"uav/uav/update",expression:"'uav/uav/update'"}],attrs:{type:"text"},on:{click:function(t){return e.handleEdit(n.row.UAVID)}}},[e._v(" 修改 "),t("i",{staticClass:"el-icon-edit"})]),t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"uav/uav/delete",expression:"'uav/uav/delete'"}],staticClass:"sky-danger",attrs:{type:"text"},on:{click:function(t){return e.handleRemove(n.row.UAVID)}}},[e._v(" 删除 "),t("i",{staticClass:"el-icon-delete"})]),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleEdit(n.row.UAVID,!0)}}},[e._v(" 详情 "),t("i",{staticClass:"el-icon-search"})])]}}])})],2),t("el-row",{staticClass:"sorter-wrap"},[t("el-pagination",{staticClass:"x-pagination float-right",attrs:{background:"",layout:"total, prev, pager, next, jumper","page-size":e.tableConfig.size,total:e.tableConfig.total},on:{"current-change":e.handleChangeCPage}})],1)],1),t("el-dialog",{staticClass:"protective-line",attrs:{center:"",visible:e.dialogVisible},on:{close:e.handleClose}},[t("el-title",{attrs:{slot:"title"},slot:"title"},[e._v(" "+e._s(e.isEdit?e.disabled?"详情":"编辑":"新建")+" ")]),t("DroneForm",{key:100*Math.random(),ref:"DroneInfoForm",attrs:{disabled:e.disabled,"dialog-visible":e.dialogVisible,"is-edit":e.isEdit,"site-list":e.siteList,data:e.droneInformation}}),t("span",{attrs:{slot:"footer"},slot:"footer"},[e.disabled?e._e():t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:function(t){return e.submit("DroneInfoForm")}}},[e._v("确 定")]),t("el-button",{attrs:{plain:"",type:"primary",size:"small",icon:"el-icon-circle-close"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")])],1)],1)],1)},o=[],r=n("c691"),i=n("514b"),s=n("fea2"),l=n("1165"),u={name:"SearchBar",components:{DroneForm:r["a"]},filters:{formatDeviceStatus:l["b"]},data(){return{disabled:!1,id:"",dialogVisible:!1,isEdit:!1,droneList:[],siteList:[],droneInformation:{},query:{UAVID:""},tableConfig:{total:0,page:1,size:13}}},created(){this.getDroneList(1,13),this.getSiteList()},methods:{importDeviceIMG(e){return e&&n("0ddc")(`./${e}.png`)},headStyle(){return"text-align:center;background:#F4F7FD"},rowStyle(){return"text-align:center"},tableRowClassName({rowIndex:e}){return e%2===0?"even-number":"uneven-number"},handleQuery(){const{UAVID:e}=this.query;this.tableConfig.page=1,this.tableConfig.size=13,this.getDroneList(1,13,e)},handleChangeCPage(e){this.tableConfig.page=e;const{page:t,size:n}=this.tableConfig;this.getDroneList(t,n)},async handleEdit(e,t){this.disabled=t,this.id=e,this.isEdit=!0;const{code:n,data:a,reason:o}=await this.$store.dispatch("uav/getDroneDetails",{UAVID:e});if(!Object(i["a"])(n))return this.$message.error("请求无人机信息失败:"+o);const r=this.formatSubmitInformation(a,a.siteID,this.isEdit,"UAVINFO_TEMPLATE");return this.droneInformation=r,this.dialogVisible=!0,r},handleRemove(e){this.$confirm("删除无人机, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{const{code:t,reason:n}=await this.$store.dispatch("uav/removeDrone",{UAVID:e});if(!Object(i["a"])(t))return this.$message.error("删除是失败:"+n);this.$message.success("删除成功"),this.getDroneList(1,13)}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},handleClose(){this.droneInformation={},this.dialogVisible=!1,this.isEdit=!1,this.disabled=!1},submit(e){this.$refs[e].submit().then(async e=>{const t=this.formatSubmitInformation(e,e.siteID,this.isEdit,"UAVINFO_TEMPLATE"),{code:n,reason:a}=await this.$store.dispatch("uav/"+(this.isEdit?"editDroneDetails":"addDroneInfo"),t);if(!Object(i["a"])(n))return this.$message.error(`${this.isEdit?"修改":"新建"}无人机失败:${a}`);this.$message.success((this.isEdit?"修改":"新建")+"无人机成功");const{page:o,size:r}=this.tableConfig;return this.getDroneList(o,r),this.dialogVisible=!1,""}).catch(()=>{})},resetForm(e){this.$refs[e].resetFields()},formatSubmitInformation(e,t,n,a="HIVEINFO_TEMPLATE"){const o={};return Object.keys(s["a"][a]).forEach(t=>{o[t]=e[t]}),o.siteID=t,n&&(o.newUAVID=o.UAVID),o},async getDroneList(e,t,n=""){const{code:a,data:o,reason:r}=await this.$store.dispatch("uav/getDroneList",{page:e,size:t,UAVID:n});if(!Object(i["a"])(a))return this.$message("请求失败"+r);const{list:s,total:l}=o;return console.log(s),this.tableConfig.total=void 0===l?this.tableConfig.total:l||0,this.droneList=s,s},async getSiteList(){const{code:e,data:t}=await this.$store.dispatch("site/getSiteGroup");if(!Object(i["a"])(e))return this.$message.error("请求失败");const{list:n}=t;return this.siteList=n,n}}},c=u,d=(n("65e9"),n("2877")),m=Object(d["a"])(c,a,o,!1,null,"45b11f5d",null);t["default"]=m.exports},"54fc":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAAXNSR0IArs4c6QAAAxxJREFUSEutlltsDGEUx3/fbuMFQSLpS1+EqDcPrO2FuDygqTYVqRIk1TauSStCq6jdCqqNW4NWpWWxbYImiEsjLhWLFRvvSEUiJIjESwXV3U9mxu7MtjM70zJv35xz/v9zznfO+Y7A5pMg8DAPN/kIcoFpSCapZoJvQB8xnhHjFhFCAmQqSGEllH5c9FCKi1qVxNmnkDeQR0D4iZmZmBLKOUzBzWXA44xnmFaEKCXiBe+GSoYRyiwWAFcRTB4lmWYm+UqUFSLCYyNOEqH0shjBTQRj/oksbiwZQFAowtyN/0oQylwyiRJBMP6/kOkg/biYLZ7yWqszJfpi3Hwg/A93ZudjhAyyxVWiGqGXMlx0mFoVl8GEdGhvSA26aiN8eQ8Pe8z1XFSIp3QItc+yeWNa+iUboKpNA+jcD6d95mA7T8DyKk22Zyn0Jq7MqN9HmOlCzmM+gzwyRTrYBQtX66Luo3BsR7Jq7Wko2KL/O7MNLjabO5bGAiGzaERQbZmv1gcwc5EuvnESGiu1s68dlpTrsltn4NBm69RLmhTCEIK5KS9oKGlLJbjTYOMx3exBEOrW2RVPSMhsPgHpdpo03wFPnrna3XNQb4jUGuyzEuEvx41uLI44aKAOzh6w9VdVkAyMjLCsGioak8Ev+aB1/wgInaa0tgUKLAri/gXYV+qEVE2pfdH4z8NiA2CwHsZO1HtPoQp1Q02xHWlISC9NuNhpqbm7FZZt0sW9XbBnjXZu7gHPUueVqrZFqsavOgwlNTrgw07YuzbZt6GkQT+01Kdo/FSjbdcpKNyqGd8LgG+9OdCRa5BTpMnatsOF42Z6fSwhUxveuZQTo90UbVMd/PwOAUOTmymW74LfP6zHWnx4q4TK8/SR50hm2936KOUvycCbeJ5U0mxmABFg3ChBrcz6lXdWhHmlKCSvGFkos+u648lj55myYkCReE7ikTRbovIQXPkPkfYjWWkkGxZh3OG/6Q0Cs+yCsJC/BNbG02jUcbII7wamOiR+S4xDI16EjeDqBn6buaRRAOSo5Mmr/lvgGYPcJJ8nVht3HPMPzdHvqANCsa8AAAAASUVORK5CYII="},"61f7":function(e,t,n){"use strict";n.d(t,"l",(function(){return a})),n.d(t,"g",(function(){return o})),n.d(t,"h",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"i",(function(){return l})),n.d(t,"a",(function(){return u})),n.d(t,"j",(function(){return c})),n.d(t,"k",(function(){return d})),n.d(t,"c",(function(){return m})),n.d(t,"e",(function(){return p})),n.d(t,"f",(function(){return A}));n("d9e2");const a=(e,t,n)=>{const a=/^[a-zA-Z0-9-_]{3,15}$/;t?a.test(t)?n():n(new Error("请输入不包含特殊字符的3-15位的合法用户名")):n(new Error("请输入用户名"))},o=(e,t,n)=>{const a=/^1(3\d|4[5-9]|5[0-35-9]|6[2567]|7[0-8]|8\d|9[0-35-9])\d{8}$/;if(a.test(t))return n();n(new Error("请输入合法的手机号"))};function r(e,t,n){const a=/^[\w.]{6,16}$/;return t?a.test(t)&&-1===t.indexOf("@")?n():n("6~16位，包含大小写字母和数字的组合"):n("请输入密码")}function i(e,t,n){const a=/^[a-zA-Z0-9_-]{10,40}$/;return t?a.test(t)?n():n(new Error("请输入合法机库编号,长度在10-40位字符")):n()}function s(e,t,n){const a=/^[a-zA-Z0-9_-]{10,40}$/;return t?a.test(t)?n():n(new Error("请输入无人机编号，长度在10-40位字符")):n()}function l(e,t,n){const a=/^[A-Z0-9]{13,30}$/;return a.test(t)?n():n(new Error("请输入合法SN编号"))}function u(e,t,n){return isNaN(t)?(n(new Error("非法的数值！")),!1):(n(),!0)}function c(e,t,n){const a=/^ST_[0-9]{8}$/;return t?a.test(t)?n():n(new Error("编号示例：ST_00000001")):n(new Error("请输入站点编号"))}function d(e,t,n){const a=/^[a-zA-Z,0-9,\u4E00-\uFA29,_,#]{4,16}$/;return a.test(t)?n():n(new Error("请输入合法站点名称（4-15个字符）"))}function m(e,t,n){return t>=5?n():n(new Error("返航悬停高度至少5米"))}function p(e,t,n){return t=t.toString(),t=t.replace(" ",""),""===t.trim()||isNaN(Number(t,10))?n(new Error("无效的数字")):n()}function A(e,t,n){const[a,o]=t.split(","),r=/^[\-\+]?(0(\.\d{1,10})?|([1-9](\d)?)(\.\d{1,10})?|1[0-7]\d{1}(\.\d{1,10})?|180\.0{1,10})$/,i=/^[\-\+]?((0|([1-8]\d?))(\.\d{1,10})?|90(\.0{1,10})?)$/;return r.test(a)&&i.test(o)?(n(),!0):(n(new Error("坐标例:121.3245671,31.123456")),!1)}},"65e9":function(e,t,n){"use strict";n("90df")},"788c":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAAXNSR0IArs4c6QAAAslJREFUSEullk1IVFEUx39nLMnIIDAqiCCcGunDFmqWabopKEmkMSMIkowWQbuMEkrbFErLWgQZFRE0o1IZhRuxRioZy7AMy7Eogj4oJHDTkHPjfYyN4zjvvrrLd8///M49755zj+CwlELopAyoRLEFwYtikSkTxlFEgMcI99hNSASVzqXMtqma8ZBPHTFOAl6nwOz9CB7OMcRVaSaWSpMSqO6ykii3gCJNULJZmEz2ShXvkzdmAFWQCjwEUeT8I8ySCd8Bv/h5lOhnGlAF2Y7QBWT+F+yvOApUSQ3d8U9TQBXAh4cwkO0IyzsGc7JhuIn0V8T0NEGMQqnljXVwQAXIwMMTrX/mPQwbLlkxvbsAg0cd4wPCxNgstUxawE4OEqNNR0nxTVi+zzL9EYLerVoyhEPip03MOuvgrfbVX3cGfKctyIcrMFCvB4QIflaLClCOh15dFauOQP5Fy3y0BYZOaEuJUSGqgxYUx7VVK2qgKGiZDzfAyHltKUKrAQyhKNVWLSuDEru0XtTB2DVtKRAygF9QLNFW5XihfNQy76+ET/e1pQhfRbXzy1WhLwS22f05VADfnusDIeoemAXstIE9i2Hc6GDaK+o+pRlAtQ3sFqOP6C8zpW4vjeHebwPvCPzW51mXpp1WoMGVLMcHc5fC54euZFZZuC18d4jp1mbhu21t84GNfZAxDwYK4ad2BBFe4bOadwf1KC5rSROb93g/9GzSkk01bxNoPU9PgUJH9domyGu2zD5eh/ABRwnCMyYpnnqeTGg7eea7BQscPaxpBE8WvD5F6lFpmgejcIqkhhHja/KIsQPhtqvOkz66KIpq2cODuFmqIcqABrROmh42gaI2ETbjhHG9mV7hBooCx/SmMjD+mWJ/PI2JJs6DsKIRRa4WWBhDOOt6EE50bk7g6ylFsQsoQchNGvXH7FG/i5f0zTZxx33+AelS3iEfYea2AAAAAElFTkSuQmCC"},8467:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAAXNSR0IArs4c6QAAA4NJREFUSEutlmlIFGEYx//P7FZmF1aUblqJdohldohlq9unThTbzUqKkA6CCjvAqKSS6EDrQ0FEdEhFH8qtpUOoIDrczSKxIKVUFDvQNdMurFSceWLGdnVd15na5tu8z//5/9553mMegtrDIHNRSCIEWgLQXACRAAV1pvEXANVEXMwiF9qSnHYQuC9L8hXMYQhlDkMGM+0GyRANDyvwI1ON9RdyCFJvGb0C0x6PDhdJfxWEOA0YbwmjRMcdK6ymj7U9g17AVHvoPAFsBTDyn2BdSU2QJIvN5Czq7uMBTH0SNl+Q+DbA/f2E/UmndpEp5WbSh3suPzcwzWGYJLJQAvCQ/wNzu7ToiGdZjfWV8ogCTCtI04nBxU//ec3UZiivaUPCHOtyq6gALXbDWgadV8vzK0683masPy+fGjLbx1Rp3voaqRnhh3ChNrtLzai2JdZNpKVFoSYifqTRR1VG0OPItFuYMCQGFkeoh56Z5pHZbsgFaKeqkwZBoH44DkwtQPigyXjYeBMnqzb3yOI8uZx2AEYNfn1KDAOjkB2dj+CAMDxvfoDcN2u89ASyy8AGAKP9AUYNNWHflHz0Fwag/FsJ9pct9WX3kcz20DZ/DnrciBTsijqlAOp+1WJrqQnc+zUqn8L2PoGrxu9DWGAkjlduQav43WvWC0M2YkPEXmX8c3sjtr9YgJaOT30USwH6Lml+fBmG9QtCU5sTJ6qy8Ppb12ZOH7cXy8I2Kuat4k9kvpiP5ra3aisjl9T3phk/aDpyY23QUz/F6GLtUTxsvIL0cVlYELzSbb7jZTLe/XipBoOyaSwOQx4zZflSRwyOR17sdXe4TWrFACHA/Z5TnoGyr/dVYZ0CztN08GcELUZ29Bkv02MV2/C06ZpGGKAcfK1XW9KoVdg6MddtfrbmIO46T2uGgVEdk1g3Sbm8zQ7DOjCdU8tebNiE9LGZKKy/hKvvD6vJPePuy9v1ewp58gygWX/nolUtlOqcs+Pdvyc5zVI8YjKLASUABmu10ahrIV1r3PWE5gpZ79FiLHMEL5JYf8Ofm6dHHdsF6ki9Zmy44xr3aqI6obqC//ClLQKJy7vDvL7QNYvO8gZeBqSZGsvWQyaUku7nalcZuwdVG2EJwh4CR2gBM6hGgHT4rxvh7uZyB/6qKMRIpE9mEhMAivBs9bmGWFfM3HE7Jsnp8NVxuzx/A04MSWVtJm/SAAAAAElFTkSuQmCC"},"90df":function(e,t,n){},c691:function(e,t,n){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"drone-infor-form-wrap"},[t("el-form",{ref:"droneInformationForm",attrs:{size:"small","label-position":"right","label-width":"110px",model:e.droneInformation,rules:e.rules,disabled:e.disabled}},[t("el-row",{attrs:{gutter:e.gutter}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"无人机编号",prop:"UAVID"}},[e.equipments.length?t("InputAppend",{attrs:{type:"icon"}},[e.isAdd?t("el-input",{attrs:{disabled:e.isEdit},model:{value:e.droneInformation.UAVID,callback:function(t){e.$set(e.droneInformation,"UAVID",t)},expression:"droneInformation.UAVID"}}):t("el-select",{on:{change:e.handleChange},model:{value:e.droneInformation.UAVID,callback:function(t){e.$set(e.droneInformation,"UAVID",t)},expression:"droneInformation.UAVID"}},e._l(e.equipments,(function(e){return t("el-option",{key:e.UAVID,attrs:{value:e.UAVID,label:e.UAVID}})})),1),t("span",{attrs:{slot:"input-append"},on:{click:e.handleChangeMode},slot:"input-append"},[t("i",{staticClass:"el-icon-refresh"})])],1):t("el-input",{attrs:{disabled:e.isEdit},model:{value:e.droneInformation.UAVID,callback:function(t){e.$set(e.droneInformation,"UAVID",t)},expression:"droneInformation.UAVID"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"无人机名称",prop:"UAVName"}},[t("el-input",{model:{value:e.droneInformation.UAVName,callback:function(t){e.$set(e.droneInformation,"UAVName",t)},expression:"droneInformation.UAVName"}})],1)],1)],1),t("el-row",{attrs:{gutter:e.gutter}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"机身号SN",prop:"SN"}},[t("el-input",{model:{value:e.droneInformation.SN,callback:function(t){e.$set(e.droneInformation,"SN",t)},expression:"droneInformation.SN"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"序列号FCSN",prop:"FCSN"}},[t("el-input",{model:{value:e.droneInformation.FCSN,callback:function(t){e.$set(e.droneInformation,"FCSN",t)},expression:"droneInformation.FCSN"}})],1)],1)],1),t("el-row",{attrs:{gutter:e.gutter}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"无人机型号",prop:"model"}},[t("el-select",{model:{value:e.droneInformation.model,callback:function(t){e.$set(e.droneInformation,"model",t)},expression:"droneInformation.model"}},e._l(e.models,(function(e,n){return t("el-option",{key:n,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"边缘计算机",prop:"isHaveComputer"}},[t("el-select",{model:{value:e.droneInformation.isHaveComputer,callback:function(t){e.$set(e.droneInformation,"isHaveComputer",t)},expression:"droneInformation.isHaveComputer"}},[t("el-option",{attrs:{label:"有",value:1}}),t("el-option",{attrs:{label:"无",value:2}})],1)],1)],1)],1),t("el-form-item",{attrs:{label:"FLV视频流"}},[t("el-input",{model:{value:e.droneInformation.UAVFLVURL,callback:function(t){e.$set(e.droneInformation,"UAVFLVURL",t)},expression:"droneInformation.UAVFLVURL"}})],1),"site"===e.componentMode?t("el-row",{attrs:{gutter:e.gutter}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"边缘计算机1"}},[t("InputAppend",{attrs:{type:"text"}},[t("el-select",{model:{value:e.droneInformation.ECID1,callback:function(t){e.$set(e.droneInformation,"ECID1",t)},expression:"droneInformation.ECID1"}},e._l(e.computerList,(function(e){return t("el-option",{key:e.ECID,attrs:{value:e.ECID,label:e.ECID}})})),1),t("span",{attrs:{slot:"input-append"},slot:"input-append"},[t("el-tooltip",{attrs:{content:"遥控器关联的安卓设备",placement:"top",effect:"light"}},[t("i",{staticClass:"el-icon-question"})])],1)],1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"边缘计算机2"}},[t("InputAppend",{attrs:{type:"text"}},[t("el-select",{model:{value:e.droneInformation.ECID2,callback:function(t){e.$set(e.droneInformation,"ECID2",t)},expression:"droneInformation.ECID2"}},e._l(e.computerList,(function(e){return t("el-option",{key:e.ECID,attrs:{value:e.ECID,label:e.ECID}})})),1),t("span",{attrs:{slot:"input-append"},slot:"input-append"},[t("el-tooltip",{attrs:{content:"无人机机载端关联的机载电脑",placement:"top",effect:"light"}},[t("i",{staticClass:"el-icon-question"})])],1)],1)],1)],1)],1):e._e()],1)],1)},o=[],r=(n("d9e2"),n("61f7")),i=n("3272"),s=n("160b"),l=n("514b"),u={name:"DroneInfoForm",props:{gutter:{type:Number,default:10},disabled:{type:Boolean,default:!1},isEdit:{type:Boolean,default:!1},data:{type:Object,default(){return{}}},equipments:{type:Array,default(){return[]}},siteList:{type:Array,default(){return[]}},id:{type:String,default:""},componentMode:{type:String,default:""},dialogVisible:{type:Boolean,default:!1}},data(){return{isAdd:!1,computerList:[],models:[],UAVMODELS:i["a"],deviceStatus:s["a"],droneInformation:{UAVID:"",UAVName:"",model:"",configMode:"",isHaveComputer:2,FCSN:"",SN:"",siteID:"",ECID1:"",ECID2:"",content:"",UAVFLVURL:""},rules:{UAVID:[{validator:r["d"],trigger:"blur"}],UAVName:[{required:!0,message:"请输入无人机名称",trigger:"blur"},{min:1,max:16,message:"长度在16个字符以下",trigger:"blur"}],SN:[{required:!0,validator:r["i"],trigger:"blur"}],FCSN:[{required:!0,validator:r["i"],trigger:"blur"}],siteID:[{required:!0,message:"请选择站点",trigger:"blur"}],model:[{required:!0,message:"请选择无人机型号",trigger:"blur"}],isHaveComputer:[{required:!0,message:"请选择边缘计算机配置",trigger:"blur"}]}}},created(){if(this.fetch(),this.data){const e=this.$deepClone(this.data);Object.keys(this.droneInformation).forEach(t=>{void 0===this.droneInformation[t]&&delete e[t]}),this.droneInformation=e}this.id&&this.$store.dispatch("uav/getDroneDetails",{UAVID:this.id}).then(e=>{const{data:t}=e;this.droneInformation=t}),this.dialogVisible&&this.getComputerList()},methods:{submit(e="droneInformationForm"){return new Promise((t,n)=>{this.$refs[e].validate(e=>{e?t(this.droneInformation):n(new Error("信息不全"))})})},resetForm(e="droneInformationForm"){this.$refs[e].resetFields(),this.droneInformation={}},handleChangeMode(){this.isAdd=!this.isAdd,this.droneInformation={},this.$emit("handleChangeMode",this.isAdd)},async handleChange(e){const{data:t}=await this.$store.dispatch("uav/getDroneDetails",{UAVID:e});this.droneInformation=t},async getComputerList(e=1,t=500,n=""){const{code:a,data:o,reason:r}=await this.$store.dispatch("computer/getComputerList",{page:e,size:t,ECID:n});if(!Object(l["a"])(a))return this.$message("请求失败："+r);const{list:i}=o;return this.computerList=i,i},async fetch(){try{const e=await this.$store.dispatch("device/fetch",{modelType:1});this.models=null===e||void 0===e?void 0:e.data.map(e=>({value:e.modelCode,label:e.modelName}))}catch(e){console.error(e),this.$message.error("请求无人机模型失败，请联系管理员")}}}},c=u,d=(n("f5ac"),n("2877")),m=Object(d["a"])(c,a,o,!1,null,"2db70a7b",null);t["a"]=m.exports},f5ac:function(e,t,n){"use strict";n("30e6")},fea2:function(e,t,n){"use strict";const a={hiveID:"",hiveName:"",hiveType:1,hiveModel:"",siteID:"",context:"",hiveFLVURL:""},o={UAVID:"",UAVName:"",brand:"",model:"",configMode:"",FCSN:"",SN:"",ECID1:"",ECID2:"",siteID:"",content:"",UAVFLVURL:"",isHaveComputer:2};t["a"]={HIVEINFO_TEMPLATE:a,UAVINFO_TEMPLATE:o}}}]);
//# sourceMappingURL=chunk-7d59b95a.1704762109123.js.map